/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */

(function( global, factory ) {

	if ( typeof module === "object" && typeof module.exports === "object" ) {
		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
}(typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Support: Firefox 18+
// Can't be in strict mode, several libs including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
//

var arr = [];

var slice = arr.slice;

var concat = arr.concat;

var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var support = {};



var
	// Use the correct document accordingly with window argument (sandbox)
	document = window.document,

	version = "2.1.4",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {
		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android<4.1
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,

	// Matches dashed string for camelizing
	rmsPrefix = /^-ms-/,
	rdashAlpha = /-([\da-z])/gi,

	// Used by jQuery.camelCase as callback to replace()
	fcamelCase = function( all, letter ) {
		return letter.toUpperCase();
	};

jQuery.fn = jQuery.prototype = {
	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// Start with an empty selector
	selector: "",

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {
		return num != null ?

			// Return just the one element from the set
			( num < 0 ? this[ num + this.length ] : this[ num ] ) :

			// Return all the elements in a clean array
			slice.call( this );
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;
		ret.context = this.context;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	// (You can seed the arguments with an array of args, but this is
	// only used internally.)
	each: function( callback, args ) {
		return jQuery.each( this, callback, args );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map(this, function( elem, i ) {
			return callback.call( elem, i, elem );
		}));
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor(null);
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && jQuery.isArray(src) ? src : [];

					} else {
						clone = src && jQuery.isPlainObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend({
	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isFunction: function( obj ) {
		return jQuery.type(obj) === "function";
	},

	isArray: Array.isArray,

	isWindow: function( obj ) {
		return obj != null && obj === obj.window;
	},

	isNumeric: function( obj ) {
		// parseFloat NaNs numeric-cast false positives (null|true|false|"")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		// adding 1 corrects loss of precision from parseFloat (#15100)
		return !jQuery.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;
	},

	isPlainObject: function( obj ) {
		// Not plain objects:
		// - Any object or value whose internal [[Class]] property is not "[object Object]"
		// - DOM nodes
		// - window
		if ( jQuery.type( obj ) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
			return false;
		}

		if ( obj.constructor &&
				!hasOwn.call( obj.constructor.prototype, "isPrototypeOf" ) ) {
			return false;
		}

		// If the function hasn't returned already, we're confident that
		// |obj| is a plain object, created by {} or constructed with new Object
		return true;
	},

	isEmptyObject: function( obj ) {
		var name;
		for ( name in obj ) {
			return false;
		}
		return true;
	},

	type: function( obj ) {
		if ( obj == null ) {
			return obj + "";
		}
		// Support: Android<4.0, iOS<6 (functionish RegExp)
		return typeof obj === "object" || typeof obj === "function" ?
			class2type[ toString.call(obj) ] || "object" :
			typeof obj;
	},

	// Evaluates a script in a global context
	globalEval: function( code ) {
		var script,
			indirect = eval;

		code = jQuery.trim( code );

		if ( code ) {
			// If the code includes a valid, prologue position
			// strict mode pragma, execute code by injecting a
			// script tag into the document.
			if ( code.indexOf("use strict") === 1 ) {
				script = document.createElement("script");
				script.text = code;
				document.head.appendChild( script ).parentNode.removeChild( script );
			} else {
			// Otherwise, avoid the DOM node creation, insertion
			// and removal by using an indirect global eval
				indirect( code );
			}
		}
	},

	// Convert dashed to camelCase; used by the css and data modules
	// Support: IE9-11+
	// Microsoft forgot to hump their vendor prefix (#9572)
	camelCase: function( string ) {
		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
	},

	nodeName: function( elem, name ) {
		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
	},

	// args is for internal usage only
	each: function( obj, callback, args ) {
		var value,
			i = 0,
			length = obj.length,
			isArray = isArraylike( obj );

		if ( args ) {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			}

		// A special, fast, case for the most common use of each
		} else {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			}
		}

		return obj;
	},

	// Support: Android<4.1
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArraylike( Object(arr) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var value,
			i = 0,
			length = elems.length,
			isArray = isArraylike( elems ),
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArray ) {
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// Bind a function to a context, optionally partially applying any
	// arguments.
	proxy: function( fn, context ) {
		var tmp, args, proxy;

		if ( typeof context === "string" ) {
			tmp = fn[ context ];
			context = fn;
			fn = tmp;
		}

		// Quick check to determine if target is callable, in the spec
		// this throws a TypeError, but we will just return undefined.
		if ( !jQuery.isFunction( fn ) ) {
			return undefined;
		}

		// Simulated bind
		args = slice.call( arguments, 2 );
		proxy = function() {
			return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
		};

		// Set the guid of unique handler to the same of original handler, so it can be removed
		proxy.guid = fn.guid = fn.guid || jQuery.guid++;

		return proxy;
	},

	now: Date.now,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
});

// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
});

function isArraylike( obj ) {

	// Support: iOS 8.2 (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = "length" in obj && obj.length,
		type = jQuery.type( obj );

	if ( type === "function" || jQuery.isWindow( obj ) ) {
		return false;
	}

	if ( obj.nodeType === 1 && length ) {
		return true;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// General-purpose constants
	MAX_NEGATIVE = 1 << 31,

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// http://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",
	// http://www.w3.org/TR/css3-syntax/#characters
	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

	// Loosely modeled on CSS identifier characters
	// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
	// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = characterEncoding.replace( "w", "w#" ),

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + characterEncoding + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,
	rescape = /'|\\/g,

	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	};

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var match, elem, m, nodeType,
		// QSA vars
		i, groups, old, nid, newContext, newSelector;

	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
		setDocument( context );
	}

	context = context || document;
	results = results || [];
	nodeType = context.nodeType;

	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	if ( !seed && documentIsHTML ) {

		// Try to shortcut find operations when possible (e.g., not under DocumentFragment)
		if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {
			// Speed-up: Sizzle("#ID")
			if ( (m = match[1]) ) {
				if ( nodeType === 9 ) {
					elem = context.getElementById( m );
					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document (jQuery #6963)
					if ( elem && elem.parentNode ) {
						// Handle the case where IE, Opera, and Webkit return items
						// by name instead of ID
						if ( elem.id === m ) {
							results.push( elem );
							return results;
						}
					} else {
						return results;
					}
				} else {
					// Context is not a document
					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
						contains( context, elem ) && elem.id === m ) {
						results.push( elem );
						return results;
					}
				}

			// Speed-up: Sizzle("TAG")
			} else if ( match[2] ) {
				push.apply( results, context.getElementsByTagName( selector ) );
				return results;

			// Speed-up: Sizzle(".CLASS")
			} else if ( (m = match[3]) && support.getElementsByClassName ) {
				push.apply( results, context.getElementsByClassName( m ) );
				return results;
			}
		}

		// QSA path
		if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
			nid = old = expando;
			newContext = context;
			newSelector = nodeType !== 1 && selector;

			// qSA works strangely on Element-rooted queries
			// We can work around this by specifying an extra ID on the root
			// and working up from there (Thanks to Andrew Dupont for the technique)
			// IE 8 doesn't work on object elements
			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
				groups = tokenize( selector );

				if ( (old = context.getAttribute("id")) ) {
					nid = old.replace( rescape, "\\$&" );
				} else {
					context.setAttribute( "id", nid );
				}
				nid = "[id='" + nid + "'] ";

				i = groups.length;
				while ( i-- ) {
					groups[i] = nid + toSelector( groups[i] );
				}
				newContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;
				newSelector = groups.join(",");
			}

			if ( newSelector ) {
				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch(qsaError) {
				} finally {
					if ( !old ) {
						context.removeAttribute("id");
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
	var div = document.createElement("div");

	try {
		return !!fn( div );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( div.parentNode ) {
			div.parentNode.removeChild( div );
		}
		// release memory in IE
		div = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = attrs.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			( ~b.sourceIndex || MAX_NEGATIVE ) -
			( ~a.sourceIndex || MAX_NEGATIVE );

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	// documentElement is verified for cases where it doesn't yet exist
	// (such as loading iframes in IE - #4833)
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, parent,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// If no document and documentElement is available, return
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Set our document
	document = doc;
	docElem = doc.documentElement;
	parent = doc.defaultView;

	// Support: IE>8
	// If iframe document is assigned to "document" variable and if iframe has been reloaded,
	// IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
	// IE6-8 do not support the defaultView property so parent will be undefined
	if ( parent && parent !== parent.top ) {
		// IE11 does not have attachEvent, so all must suffer
		if ( parent.addEventListener ) {
			parent.addEventListener( "unload", unloadHandler, false );
		} else if ( parent.attachEvent ) {
			parent.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Support tests
	---------------------------------------------------------------------- */
	documentIsHTML = !isXML( doc );

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( div ) {
		div.className = "i";
		return !div.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( div ) {
		div.appendChild( doc.createComment("") );
		return !div.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( doc.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( div ) {
		docElem.appendChild( div ).id = expando;
		return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
	});

	// ID find and filter
	if ( support.getById ) {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var m = context.getElementById( id );
				// Check parentNode to catch when Blackberry 4.6 returns
				// nodes that are no longer in the document #6963
				return m && m.parentNode ? [ m ] : [];
			}
		};
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
	} else {
		// Support: IE6/7
		// getElementById is not reliable as a find shortcut
		delete Expr.find["ID"];

		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" && elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See http://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( div ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// http://bugs.jquery.com/ticket/12359
			docElem.appendChild( div ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\f]' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( div.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !div.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.2+, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.7+
			if ( !div.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibing-combinator selector` fails
			if ( !div.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( div ) {
			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = doc.createElement("input");
			input.setAttribute( "type", "hidden" );
			div.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( div.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":enabled").length ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			div.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( div ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( div, "div" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( div, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully does not implement inclusive descendent
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === doc ? -1 :
				b === doc ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return doc;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	// Make sure that attribute selectors are quoted
	expr = expr.replace( rattributeQuotes, "='$1']" );

	if ( support.matchesSelector && documentIsHTML &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, outerCache, node, diff, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {
							// Seek `elem` from a previously-cached index
							outerCache = parent[ expando ] || (parent[ expando ] = {});
							cache = outerCache[ type ] || [];
							nodeIndex = cache[0] === dirruns && cache[1];
							diff = cache[0] === dirruns && cache[2];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						// Use previously-cached element index if available
						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
							diff = cache[1];

						// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
						} else {
							// Use the same loop as above to seek `elem` from the start
							while ( (node = ++nodeIndex && node && node[ dir ] ||
								(diff = nodeIndex = 0) || start.pop()) ) {

								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
									// Cache the index of each encountered element
									if ( useCache ) {
										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
									}

									if ( node === elem ) {
										break;
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": function( elem ) {
			return elem.disabled === false;
		},

		"disabled": function( elem ) {
			return elem.disabled === true;
		},

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		checkNonElements = base && dir === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});
						if ( (oldCache = outerCache[ dir ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							outerCache[ dir ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context !== document && context;
			}

			// Add elements passing elementMatchers directly to results
			// Keep `i` a string if there are no elements so `matchedCount` will be "00" below
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// Apply set filters to unmatched elements
			matchedCount += i;
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is no seed and only one group
	if ( match.length === 1 ) {

		// Take a shortcut and set the context if the root selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				support.getById && context.nodeType === 9 && documentIsHTML &&
				Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( div1 ) {
	// Should return 1, but returns 4 (following)
	return div1.compareDocumentPosition( document.createElement("div") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( div ) {
	div.innerHTML = "<a href='#'></a>";
	return div.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( div ) {
	div.innerHTML = "<input/>";
	div.firstChild.setAttribute( "value", "" );
	return div.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( div ) {
	return div.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.pseudos;
jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;



var rneedsContext = jQuery.expr.match.needsContext;

var rsingleTag = (/^<(\w+)\s*\/?>(?:<\/\1>|)$/);



var risSimple = /^.[^:#\[\.,]*$/;

// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( jQuery.isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			/* jshint -W018 */
			return !!qualifier.call( elem, i, elem ) !== not;
		});

	}

	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		});

	}

	if ( typeof qualifier === "string" ) {
		if ( risSimple.test( qualifier ) ) {
			return jQuery.filter( qualifier, elements, not );
		}

		qualifier = jQuery.filter( qualifier, elements );
	}

	return jQuery.grep( elements, function( elem ) {
		return ( indexOf.call( qualifier, elem ) >= 0 ) !== not;
	});
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	return elems.length === 1 && elem.nodeType === 1 ?
		jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
		jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
			return elem.nodeType === 1;
		}));
};

jQuery.fn.extend({
	find: function( selector ) {
		var i,
			len = this.length,
			ret = [],
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter(function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			}) );
		}

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		// Needed because $( selector, context ) becomes $( context ).find( selector )
		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
		ret.selector = this.selector ? this.selector + " " + selector : selector;
		return ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow(this, selector || [], false) );
	},
	not: function( selector ) {
		return this.pushStack( winnow(this, selector || [], true) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
});


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,

	init = jQuery.fn.init = function( selector, context ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[0] === "<" && selector[ selector.length - 1 ] === ">" && selector.length >= 3 ) {
				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && (match[1] || !context) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[1] ) {
					context = context instanceof jQuery ? context[0] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[1],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {
							// Properties of context are called as methods if possible
							if ( jQuery.isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[2] );

					// Support: Blackberry 4.6
					// gEBID returns nodes no longer in the document (#6963)
					if ( elem && elem.parentNode ) {
						// Inject the element directly into the jQuery object
						this.length = 1;
						this[0] = elem;
					}

					this.context = document;
					this.selector = selector;
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || rootjQuery ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this.context = this[0] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( jQuery.isFunction( selector ) ) {
			return typeof rootjQuery.ready !== "undefined" ?
				rootjQuery.ready( selector ) :
				// Execute immediately if ready is not present
				selector( jQuery );
		}

		if ( selector.selector !== undefined ) {
			this.selector = selector.selector;
			this.context = selector.context;
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,
	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.extend({
	dir: function( elem, dir, until ) {
		var matched = [],
			truncate = until !== undefined;

		while ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {
			if ( elem.nodeType === 1 ) {
				if ( truncate && jQuery( elem ).is( until ) ) {
					break;
				}
				matched.push( elem );
			}
		}
		return matched;
	},

	sibling: function( n, elem ) {
		var matched = [];

		for ( ; n; n = n.nextSibling ) {
			if ( n.nodeType === 1 && n !== elem ) {
				matched.push( n );
			}
		}

		return matched;
	}
});

jQuery.fn.extend({
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter(function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[i] ) ) {
					return true;
				}
			}
		});
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
				jQuery( selectors, context || this.context ) :
				0;

		for ( ; i < l; i++ ) {
			for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
				// Always skip document fragments
				if ( cur.nodeType < 11 && (pos ?
					pos.index(cur) > -1 :

					// Don't pass non-elements to Sizzle
					cur.nodeType === 1 &&
						jQuery.find.matchesSelector(cur, selectors)) ) {

					matched.push( cur );
					break;
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.unique(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter(selector)
		);
	}
});

function sibling( cur, dir ) {
	while ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each({
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return jQuery.dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return jQuery.dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return jQuery.dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return jQuery.sibling( elem.firstChild );
	},
	contents: function( elem ) {
		return elem.contentDocument || jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {
			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.unique( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
});
var rnotwhite = (/\S+/g);



// String to Object options format cache
var optionsCache = {};

// Convert String-formatted options into Object-formatted ones and store in cache
function createOptions( options ) {
	var object = optionsCache[ options ] = {};
	jQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	});
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		( optionsCache[ options ] || createOptions( options ) ) :
		jQuery.extend( {}, options );

	var // Last fire value (for non-forgettable lists)
		memory,
		// Flag to know if list was already fired
		fired,
		// Flag to know if list is currently firing
		firing,
		// First callback to fire (used internally by add and fireWith)
		firingStart,
		// End of the loop when firing
		firingLength,
		// Index of currently firing callback (modified by remove if needed)
		firingIndex,
		// Actual callback list
		list = [],
		// Stack of fire calls for repeatable lists
		stack = !options.once && [],
		// Fire callbacks
		fire = function( data ) {
			memory = options.memory && data;
			fired = true;
			firingIndex = firingStart || 0;
			firingStart = 0;
			firingLength = list.length;
			firing = true;
			for ( ; list && firingIndex < firingLength; firingIndex++ ) {
				if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
					memory = false; // To prevent further calls using add
					break;
				}
			}
			firing = false;
			if ( list ) {
				if ( stack ) {
					if ( stack.length ) {
						fire( stack.shift() );
					}
				} else if ( memory ) {
					list = [];
				} else {
					self.disable();
				}
			}
		},
		// Actual Callbacks object
		self = {
			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {
					// First, we save the current length
					var start = list.length;
					(function add( args ) {
						jQuery.each( args, function( _, arg ) {
							var type = jQuery.type( arg );
							if ( type === "function" ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && type !== "string" ) {
								// Inspect recursively
								add( arg );
							}
						});
					})( arguments );
					// Do we need to add the callbacks to the
					// current firing batch?
					if ( firing ) {
						firingLength = list.length;
					// With memory, if we're not firing then
					// we should call right away
					} else if ( memory ) {
						firingStart = start;
						fire( memory );
					}
				}
				return this;
			},
			// Remove a callback from the list
			remove: function() {
				if ( list ) {
					jQuery.each( arguments, function( _, arg ) {
						var index;
						while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
							list.splice( index, 1 );
							// Handle firing indexes
							if ( firing ) {
								if ( index <= firingLength ) {
									firingLength--;
								}
								if ( index <= firingIndex ) {
									firingIndex--;
								}
							}
						}
					});
				}
				return this;
			},
			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
			},
			// Remove all callbacks from the list
			empty: function() {
				list = [];
				firingLength = 0;
				return this;
			},
			// Have the list do nothing anymore
			disable: function() {
				list = stack = memory = undefined;
				return this;
			},
			// Is it disabled?
			disabled: function() {
				return !list;
			},
			// Lock the list in its current state
			lock: function() {
				stack = undefined;
				if ( !memory ) {
					self.disable();
				}
				return this;
			},
			// Is it locked?
			locked: function() {
				return !stack;
			},
			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( list && ( !fired || stack ) ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					if ( firing ) {
						stack.push( args );
					} else {
						fire( args );
					}
				}
				return this;
			},
			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},
			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


jQuery.extend({

	Deferred: function( func ) {
		var tuples = [
				// action, add listener, listener list, final state
				[ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
				[ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
				[ "notify", "progress", jQuery.Callbacks("memory") ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				then: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;
					return jQuery.Deferred(function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {
							var fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
							// deferred[ done | fail | progress ] for forwarding actions to newDefer
							deferred[ tuple[1] ](function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && jQuery.isFunction( returned.promise ) ) {
									returned.promise()
										.done( newDefer.resolve )
										.fail( newDefer.reject )
										.progress( newDefer.notify );
								} else {
									newDefer[ tuple[ 0 ] + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
								}
							});
						});
						fns = null;
					}).promise();
				},
				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Keep pipe for back-compat
		promise.pipe = promise.then;

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 3 ];

			// promise[ done | fail | progress ] = list.add
			promise[ tuple[1] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(function() {
					// state = [ resolved | rejected ]
					state = stateString;

				// [ reject_list | resolve_list ].disable; progress_list.lock
				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
			}

			// deferred[ resolve | reject | notify ]
			deferred[ tuple[0] ] = function() {
				deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
				return this;
			};
			deferred[ tuple[0] + "With" ] = list.fireWith;
		});

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( subordinate /* , ..., subordinateN */ ) {
		var i = 0,
			resolveValues = slice.call( arguments ),
			length = resolveValues.length,

			// the count of uncompleted subordinates
			remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,

			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.
			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),

			// Update function for both resolve and progress values
			updateFunc = function( i, contexts, values ) {
				return function( value ) {
					contexts[ i ] = this;
					values[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( values === progressValues ) {
						deferred.notifyWith( contexts, values );
					} else if ( !( --remaining ) ) {
						deferred.resolveWith( contexts, values );
					}
				};
			},

			progressValues, progressContexts, resolveContexts;

		// Add listeners to Deferred subordinates; treat others as resolved
		if ( length > 1 ) {
			progressValues = new Array( length );
			progressContexts = new Array( length );
			resolveContexts = new Array( length );
			for ( ; i < length; i++ ) {
				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
					resolveValues[ i ].promise()
						.done( updateFunc( i, resolveContexts, resolveValues ) )
						.fail( deferred.reject )
						.progress( updateFunc( i, progressContexts, progressValues ) );
				} else {
					--remaining;
				}
			}
		}

		// If we're not waiting on anything, resolve the master
		if ( !remaining ) {
			deferred.resolveWith( resolveContexts, resolveValues );
		}

		return deferred.promise();
	}
});


// The deferred used on DOM ready
var readyList;

jQuery.fn.ready = function( fn ) {
	// Add the callback
	jQuery.ready.promise().done( fn );

	return this;
};

jQuery.extend({
	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Hold (or release) the ready event
	holdReady: function( hold ) {
		if ( hold ) {
			jQuery.readyWait++;
		} else {
			jQuery.ready( true );
		}
	},

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );

		// Trigger any bound ready events
		if ( jQuery.fn.triggerHandler ) {
			jQuery( document ).triggerHandler( "ready" );
			jQuery( document ).off( "ready" );
		}
	}
});

/**
 * The ready event handler and self cleanup method
 */
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed, false );
	window.removeEventListener( "load", completed, false );
	jQuery.ready();
}

jQuery.ready.promise = function( obj ) {
	if ( !readyList ) {

		readyList = jQuery.Deferred();

		// Catch cases where $(document).ready() is called after the browser event has already occurred.
		// We once tried to use readyState "interactive" here, but it caused issues like the one
		// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
		if ( document.readyState === "complete" ) {
			// Handle it asynchronously to allow scripts the opportunity to delay ready
			setTimeout( jQuery.ready );

		} else {

			// Use the handy event callback
			document.addEventListener( "DOMContentLoaded", completed, false );

			// A fallback to window.onload, that will always work
			window.addEventListener( "load", completed, false );
		}
	}
	return readyList.promise( obj );
};

// Kick off the DOM ready check even if the user does not
jQuery.ready.promise();




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( jQuery.type( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !jQuery.isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {
			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
			}
		}
	}

	return chainable ?
		elems :

		// Gets
		bulk ?
			fn.call( elems ) :
			len ? fn( elems[0], key ) : emptyGet;
};


/**
 * Determines whether an object can have data
 */
jQuery.acceptData = function( owner ) {
	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	/* jshint -W018 */
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};


function Data() {
	// Support: Android<4,
	// Old WebKit does not have Object.preventExtensions/freeze method,
	// return new empty object instead with no [[set]] accessor
	Object.defineProperty( this.cache = {}, 0, {
		get: function() {
			return {};
		}
	});

	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;
Data.accepts = jQuery.acceptData;

Data.prototype = {
	key: function( owner ) {
		// We can accept data for non-element nodes in modern browsers,
		// but we should not, see #8335.
		// Always return the key for a frozen object.
		if ( !Data.accepts( owner ) ) {
			return 0;
		}

		var descriptor = {},
			// Check if the owner object already has a cache key
			unlock = owner[ this.expando ];

		// If not, create one
		if ( !unlock ) {
			unlock = Data.uid++;

			// Secure it in a non-enumerable, non-writable property
			try {
				descriptor[ this.expando ] = { value: unlock };
				Object.defineProperties( owner, descriptor );

			// Support: Android<4
			// Fallback to a less secure definition
			} catch ( e ) {
				descriptor[ this.expando ] = unlock;
				jQuery.extend( owner, descriptor );
			}
		}

		// Ensure the cache object
		if ( !this.cache[ unlock ] ) {
			this.cache[ unlock ] = {};
		}

		return unlock;
	},
	set: function( owner, data, value ) {
		var prop,
			// There may be an unlock assigned to this node,
			// if there is no entry for this "owner", create one inline
			// and set the unlock as though an owner entry had always existed
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		// Handle: [ owner, key, value ] args
		if ( typeof data === "string" ) {
			cache[ data ] = value;

		// Handle: [ owner, { properties } ] args
		} else {
			// Fresh assignments by object are shallow copied
			if ( jQuery.isEmptyObject( cache ) ) {
				jQuery.extend( this.cache[ unlock ], data );
			// Otherwise, copy the properties one-by-one to the cache object
			} else {
				for ( prop in data ) {
					cache[ prop ] = data[ prop ];
				}
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		// Either a valid cache is found, or will be created.
		// New caches will be created and the unlock returned,
		// allowing direct access to the newly created
		// empty data object. A valid owner object must be provided.
		var cache = this.cache[ this.key( owner ) ];

		return key === undefined ?
			cache : cache[ key ];
	},
	access: function( owner, key, value ) {
		var stored;
		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				((key && typeof key === "string") && value === undefined) ) {

			stored = this.get( owner, key );

			return stored !== undefined ?
				stored : this.get( owner, jQuery.camelCase(key) );
		}

		// [*]When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i, name, camel,
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		if ( key === undefined ) {
			this.cache[ unlock ] = {};

		} else {
			// Support array or space separated string of keys
			if ( jQuery.isArray( key ) ) {
				// If "name" is an array of keys...
				// When data is initially created, via ("key", "val") signature,
				// keys will be converted to camelCase.
				// Since there is no way to tell _how_ a key was added, remove
				// both plain key and camelCase key. #12786
				// This will only penalize the array argument path.
				name = key.concat( key.map( jQuery.camelCase ) );
			} else {
				camel = jQuery.camelCase( key );
				// Try the string as a key before any manipulation
				if ( key in cache ) {
					name = [ key, camel ];
				} else {
					// If a key with the spaces exists, use it.
					// Otherwise, create an array by matching non-whitespace
					name = camel;
					name = name in cache ?
						[ name ] : ( name.match( rnotwhite ) || [] );
				}
			}

			i = name.length;
			while ( i-- ) {
				delete cache[ name[ i ] ];
			}
		}
	},
	hasData: function( owner ) {
		return !jQuery.isEmptyObject(
			this.cache[ owner[ this.expando ] ] || {}
		);
	},
	discard: function( owner ) {
		if ( owner[ this.expando ] ) {
			delete this.cache[ owner[ this.expando ] ];
		}
	}
};
var data_priv = new Data();

var data_user = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /([A-Z])/g;

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = data === "true" ? true :
					data === "false" ? false :
					data === "null" ? null :
					// Only convert to a number if it doesn't change the string
					+data + "" === data ? +data :
					rbrace.test( data ) ? jQuery.parseJSON( data ) :
					data;
			} catch( e ) {}

			// Make sure we set the data so it isn't changed later
			data_user.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend({
	hasData: function( elem ) {
		return data_user.hasData( elem ) || data_priv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return data_user.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		data_user.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to data_priv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return data_priv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		data_priv.remove( elem, name );
	}
});

jQuery.fn.extend({
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = data_user.get( elem );

				if ( elem.nodeType === 1 && !data_priv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE11+
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = jQuery.camelCase( name.slice(5) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					data_priv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each(function() {
				data_user.set( this, key );
			});
		}

		return access( this, function( value ) {
			var data,
				camelKey = jQuery.camelCase( key );

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {
				// Attempt to get data from the cache
				// with the key as-is
				data = data_user.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to get data from the cache
				// with the key camelized
				data = data_user.get( elem, camelKey );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, camelKey, undefined );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each(function() {
				// First, attempt to store a copy or reference of any
				// data that might've been store with a camelCased key.
				var data = data_user.get( this, camelKey );

				// For HTML5 data-* attribute interop, we have to
				// store property names with dashes in a camelCase form.
				// This might not apply to all properties...*
				data_user.set( this, camelKey, value );

				// *... In the case of properties that might _actually_
				// have dashes, we need to also store a copy of that
				// unchanged property.
				if ( key.indexOf("-") !== -1 && data !== undefined ) {
					data_user.set( this, key, value );
				}
			});
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each(function() {
			data_user.remove( this, key );
		});
	}
});


jQuery.extend({
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = data_priv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || jQuery.isArray( data ) ) {
					queue = data_priv.access( elem, type, jQuery.makeArray(data) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return data_priv.get( elem, key ) || data_priv.access( elem, key, {
			empty: jQuery.Callbacks("once memory").add(function() {
				data_priv.remove( elem, [ type + "queue", key ] );
			})
		});
	}
});

jQuery.fn.extend({
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[0], type );
		}

		return data === undefined ?
			this :
			this.each(function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[0] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			});
	},
	dequeue: function( type ) {
		return this.each(function() {
			jQuery.dequeue( this, type );
		});
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},
	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = data_priv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
});
var pnum = (/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;

var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var isHidden = function( elem, el ) {
		// isHidden might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;
		return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
	};

var rcheckableType = (/^(?:checkbox|radio)$/i);



(function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Safari<=5.1
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Safari<=5.1, Android<4.2
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE<=11+
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;
})();
var strundefined = typeof undefined;



support.focusinBubbles = "onfocusin" in window;


var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu)|click/,
	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.get( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !(events = elemData.events) ) {
			events = elemData.events = {};
		}
		if ( !(eventHandle = elemData.handle) ) {
			eventHandle = elemData.handle = function( e ) {
				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== strundefined && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend({
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join(".")
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !(handlers = events[ type ]) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle, false );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.hasData( elem ) && data_priv.get( elem );

		if ( !elemData || !(events = elemData.events) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			delete elemData.handle;
			data_priv.remove( elem, "events" );
		}
	},

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];

		cur = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf(".") >= 0 ) {
			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split(".");
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf(":") < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join(".");
		event.namespace_re = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === (elem.ownerDocument || document) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {

			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( data_priv.get( cur, "events" ) || {} )[ event.type ] && data_priv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && jQuery.acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
				jQuery.acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;
					elem[ type ]();
					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	dispatch: function( event ) {

		// Make a writable jQuery.Event from the native event object
		event = jQuery.event.fix( event );

		var i, j, ret, matched, handleObj,
			handlerQueue = [],
			args = slice.call( arguments ),
			handlers = ( data_priv.get( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[0] = event;
		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {

				// Triggered event must either 1) have no namespace, or 2) have namespace(s)
				// a subset or equal to those in the bound event (both can have no namespace).
				if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
							.apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( (event.result = ret) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, matches, sel, handleObj,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		// Black-hole SVG <use> instance trees (#13180)
		// Avoid non-left-click bubbling in Firefox (#3861)
		if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.disabled !== true || event.type !== "click" ) {
					matches = [];
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matches[ sel ] === undefined ) {
							matches[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) >= 0 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matches[ sel ] ) {
							matches.push( handleObj );
						}
					}
					if ( matches.length ) {
						handlerQueue.push({ elem: cur, handlers: matches });
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		if ( delegateCount < handlers.length ) {
			handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
		}

		return handlerQueue;
	},

	// Includes some event props shared by KeyEvent and MouseEvent
	props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),

	fixHooks: {},

	keyHooks: {
		props: "char charCode key keyCode".split(" "),
		filter: function( event, original ) {

			// Add which for key events
			if ( event.which == null ) {
				event.which = original.charCode != null ? original.charCode : original.keyCode;
			}

			return event;
		}
	},

	mouseHooks: {
		props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
		filter: function( event, original ) {
			var eventDoc, doc, body,
				button = original.button;

			// Calculate pageX/Y if missing and clientX/Y available
			if ( event.pageX == null && original.clientX != null ) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
				event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
			}

			// Add which for click: 1 === left; 2 === middle; 3 === right
			// Note: button is not normalized, so don't use it
			if ( !event.which && button !== undefined ) {
				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
			}

			return event;
		}
	},

	fix: function( event ) {
		if ( event[ jQuery.expando ] ) {
			return event;
		}

		// Create a writable copy of the event object and normalize some properties
		var i, prop, copy,
			type = event.type,
			originalEvent = event,
			fixHook = this.fixHooks[ type ];

		if ( !fixHook ) {
			this.fixHooks[ type ] = fixHook =
				rmouseEvent.test( type ) ? this.mouseHooks :
				rkeyEvent.test( type ) ? this.keyHooks :
				{};
		}
		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;

		event = new jQuery.Event( originalEvent );

		i = copy.length;
		while ( i-- ) {
			prop = copy[ i ];
			event[ prop ] = originalEvent[ prop ];
		}

		// Support: Cordova 2.5 (WebKit) (#13255)
		// All events should have a target; Cordova deviceready doesn't
		if ( !event.target ) {
			event.target = document;
		}

		// Support: Safari 6.0+, Chrome<28
		// Target should not be a text node (#504, #13143)
		if ( event.target.nodeType === 3 ) {
			event.target = event.target.parentNode;
		}

		return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
	},

	special: {
		load: {
			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		focus: {
			// Fire native event if possible so blur/focus sequence is correct
			trigger: function() {
				if ( this !== safeActiveElement() && this.focus ) {
					this.focus();
					return false;
				}
			},
			delegateType: "focusin"
		},
		blur: {
			trigger: function() {
				if ( this === safeActiveElement() && this.blur ) {
					this.blur();
					return false;
				}
			},
			delegateType: "focusout"
		},
		click: {
			// For checkbox, fire native event so checked state will be right
			trigger: function() {
				if ( this.type === "checkbox" && this.click && jQuery.nodeName( this, "input" ) ) {
					this.click();
					return false;
				}
			},

			// For cross-browser consistency, don't fire native .click() on links
			_default: function( event ) {
				return jQuery.nodeName( event.target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	},

	simulate: function( type, elem, event, bubble ) {
		// Piggyback on a donor event to simulate a different one.
		// Fake originalEvent to avoid donor's stopPropagation, but if the
		// simulated event prevents default then we do the same on the donor.
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true,
				originalEvent: {}
			}
		);
		if ( bubble ) {
			jQuery.event.trigger( e, null, elem );
		} else {
			jQuery.event.dispatch.call( elem, e );
		}
		if ( e.isDefaultPrevented() ) {
			event.preventDefault();
		}
	}
};

jQuery.removeEvent = function( elem, type, handle ) {
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle, false );
	}
};

jQuery.Event = function( src, props ) {
	// Allow instantiation without the 'new' keyword
	if ( !(this instanceof jQuery.Event) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&
				// Support: Android<4.0
				src.returnValue === false ?
			returnTrue :
			returnFalse;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || jQuery.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && e.preventDefault ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && e.stopPropagation ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && e.stopImmediatePropagation ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Create mouseenter/leave events using mouseover/out and event-time checks
// Support: Chrome 15+
jQuery.each({
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mousenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
});

// Support: Firefox, Chrome, Safari
// Create "bubbling" focus and blur events
if ( !support.focusinBubbles ) {
	jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
				jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
			};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				data_priv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					data_priv.remove( doc, fix );

				} else {
					data_priv.access( doc, fix, attaches );
				}
			}
		};
	});
}

jQuery.fn.extend({

	on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
		var origFn, type;

		// Types can be a map of types/handlers
		if ( typeof types === "object" ) {
			// ( types-Object, selector, data )
			if ( typeof selector !== "string" ) {
				// ( types-Object, data )
				data = data || selector;
				selector = undefined;
			}
			for ( type in types ) {
				this.on( type, selector, data, types[ type ], one );
			}
			return this;
		}

		if ( data == null && fn == null ) {
			// ( types, fn )
			fn = selector;
			data = selector = undefined;
		} else if ( fn == null ) {
			if ( typeof selector === "string" ) {
				// ( types, selector, fn )
				fn = data;
				data = undefined;
			} else {
				// ( types, data, fn )
				fn = data;
				data = selector;
				selector = undefined;
			}
		}
		if ( fn === false ) {
			fn = returnFalse;
		} else if ( !fn ) {
			return this;
		}

		if ( one === 1 ) {
			origFn = fn;
			fn = function( event ) {
				// Can use an empty set, since event contains the info
				jQuery().off( event );
				return origFn.apply( this, arguments );
			};
			// Use same guid so caller can remove using origFn
			fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
		}
		return this.each( function() {
			jQuery.event.add( this, types, fn, data, selector );
		});
	},
	one: function( types, selector, data, fn ) {
		return this.on( types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {
			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {
			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {
			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each(function() {
			jQuery.event.remove( this, types, fn, selector );
		});
	},

	trigger: function( type, data ) {
		return this.each(function() {
			jQuery.event.trigger( type, data, this );
		});
	},
	triggerHandler: function( type, data ) {
		var elem = this[0];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
});


var
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
	rtagName = /<([\w:]+)/,
	rhtml = /<|&#?\w+;/,
	rnoInnerhtml = /<(?:script|style|link)/i,
	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rscriptType = /^$|\/(?:java|ecma)script/i,
	rscriptTypeMasked = /^true\/(.*)/,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,

	// We have to close these tags to support XHTML (#13200)
	wrapMap = {

		// Support: IE9
		option: [ 1, "<select multiple='multiple'>", "</select>" ],

		thead: [ 1, "<table>", "</table>" ],
		col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
		tr: [ 2, "<table><tbody>", "</tbody></table>" ],
		td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

		_default: [ 0, "", "" ]
	};

// Support: IE9
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

// Support: 1.x compatibility
// Manipulating tables requires a tbody
function manipulationTarget( elem, content ) {
	return jQuery.nodeName( elem, "table" ) &&
		jQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ?

		elem.getElementsByTagName("tbody")[0] ||
			elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
		elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = (elem.getAttribute("type") !== null) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	var match = rscriptTypeMasked.exec( elem.type );

	if ( match ) {
		elem.type = match[ 1 ];
	} else {
		elem.removeAttribute("type");
	}

	return elem;
}

// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		data_priv.set(
			elems[ i ], "globalEval", !refElements || data_priv.get( refElements[ i ], "globalEval" )
		);
	}
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( data_priv.hasData( src ) ) {
		pdataOld = data_priv.access( src );
		pdataCur = data_priv.set( dest, pdataOld );
		events = pdataOld.events;

		if ( events ) {
			delete pdataCur.handle;
			pdataCur.events = {};

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( data_user.hasData( src ) ) {
		udataOld = data_user.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		data_user.set( dest, udataCur );
	}
}

function getAll( context, tag ) {
	var ret = context.getElementsByTagName ? context.getElementsByTagName( tag || "*" ) :
			context.querySelectorAll ? context.querySelectorAll( tag || "*" ) :
			[];

	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
		jQuery.merge( [ context ], ret ) :
		ret;
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

jQuery.extend({
	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = jQuery.contains( elem.ownerDocument, elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	buildFragment: function( elems, context, scripts, selection ) {
		var elem, tmp, tag, wrap, contains, j,
			fragment = context.createDocumentFragment(),
			nodes = [],
			i = 0,
			l = elems.length;

		for ( ; i < l; i++ ) {
			elem = elems[ i ];

			if ( elem || elem === 0 ) {

				// Add nodes directly
				if ( jQuery.type( elem ) === "object" ) {
					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

				// Convert non-html into a text node
				} else if ( !rhtml.test( elem ) ) {
					nodes.push( context.createTextNode( elem ) );

				// Convert html into DOM nodes
				} else {
					tmp = tmp || fragment.appendChild( context.createElement("div") );

					// Deserialize a standard representation
					tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
					wrap = wrapMap[ tag ] || wrapMap._default;
					tmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[ 2 ];

					// Descend through wrappers to the right content
					j = wrap[ 0 ];
					while ( j-- ) {
						tmp = tmp.lastChild;
					}

					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, tmp.childNodes );

					// Remember the top-level container
					tmp = fragment.firstChild;

					// Ensure the created nodes are orphaned (#12392)
					tmp.textContent = "";
				}
			}
		}

		// Remove wrapper from fragment
		fragment.textContent = "";

		i = 0;
		while ( (elem = nodes[ i++ ]) ) {

			// #4087 - If origin and destination elements are the same, and this is
			// that element, do not do anything
			if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
				continue;
			}

			contains = jQuery.contains( elem.ownerDocument, elem );

			// Append to fragment
			tmp = getAll( fragment.appendChild( elem ), "script" );

			// Preserve script evaluation history
			if ( contains ) {
				setGlobalEval( tmp );
			}

			// Capture executables
			if ( scripts ) {
				j = 0;
				while ( (elem = tmp[ j++ ]) ) {
					if ( rscriptType.test( elem.type || "" ) ) {
						scripts.push( elem );
					}
				}
			}
		}

		return fragment;
	},

	cleanData: function( elems ) {
		var data, elem, type, key,
			special = jQuery.event.special,
			i = 0;

		for ( ; (elem = elems[ i ]) !== undefined; i++ ) {
			if ( jQuery.acceptData( elem ) ) {
				key = elem[ data_priv.expando ];

				if ( key && (data = data_priv.cache[ key ]) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}
					if ( data_priv.cache[ key ] ) {
						// Discard any remaining `private` data
						delete data_priv.cache[ key ];
					}
				}
			}
			// Discard any remaining `user` data
			delete data_user.cache[ elem[ data_user.expando ] ];
		}
	}
});

jQuery.fn.extend({
	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each(function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				});
		}, null, value, arguments.length );
	},

	append: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		});
	},

	prepend: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		});
	},

	before: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		});
	},

	after: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		});
	},

	remove: function( selector, keepData /* Internal Use Only */ ) {
		var elem,
			elems = selector ? jQuery.filter( selector, this ) : this,
			i = 0;

		for ( ; (elem = elems[i]) != null; i++ ) {
			if ( !keepData && elem.nodeType === 1 ) {
				jQuery.cleanData( getAll( elem ) );
			}

			if ( elem.parentNode ) {
				if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
					setGlobalEval( getAll( elem, "script" ) );
				}
				elem.parentNode.removeChild( elem );
			}
		}

		return this;
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; (elem = this[i]) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map(function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		});
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = value.replace( rxhtmlTag, "<$1></$2>" );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var arg = arguments[ 0 ];

		// Make the changes, replacing each context element with the new content
		this.domManip( arguments, function( elem ) {
			arg = this.parentNode;

			jQuery.cleanData( getAll( this ) );

			if ( arg ) {
				arg.replaceChild( elem, this );
			}
		});

		// Force removal if there was no new content (e.g., from empty arguments)
		return arg && (arg.length || arg.nodeType) ? this : this.remove();
	},

	detach: function( selector ) {
		return this.remove( selector, true );
	},

	domManip: function( args, callback ) {

		// Flatten any nested arrays
		args = concat.apply( [], args );

		var fragment, first, scripts, hasScripts, node, doc,
			i = 0,
			l = this.length,
			set = this,
			iNoClone = l - 1,
			value = args[ 0 ],
			isFunction = jQuery.isFunction( value );

		// We can't cloneNode fragments that contain checked, in WebKit
		if ( isFunction ||
				( l > 1 && typeof value === "string" &&
					!support.checkClone && rchecked.test( value ) ) ) {
			return this.each(function( index ) {
				var self = set.eq( index );
				if ( isFunction ) {
					args[ 0 ] = value.call( this, index, self.html() );
				}
				self.domManip( args, callback );
			});
		}

		if ( l ) {
			fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );
			first = fragment.firstChild;

			if ( fragment.childNodes.length === 1 ) {
				fragment = first;
			}

			if ( first ) {
				scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
				hasScripts = scripts.length;

				// Use the original fragment for the last item instead of the first because it can end up
				// being emptied incorrectly in certain situations (#8070).
				for ( ; i < l; i++ ) {
					node = fragment;

					if ( i !== iNoClone ) {
						node = jQuery.clone( node, true, true );

						// Keep references to cloned scripts for later restoration
						if ( hasScripts ) {
							// Support: QtWebKit
							// jQuery.merge because push.apply(_, arraylike) throws
							jQuery.merge( scripts, getAll( node, "script" ) );
						}
					}

					callback.call( this[ i ], node, i );
				}

				if ( hasScripts ) {
					doc = scripts[ scripts.length - 1 ].ownerDocument;

					// Reenable scripts
					jQuery.map( scripts, restoreScript );

					// Evaluate executable scripts on first document insertion
					for ( i = 0; i < hasScripts; i++ ) {
						node = scripts[ i ];
						if ( rscriptType.test( node.type || "" ) &&
							!data_priv.access( node, "globalEval" ) && jQuery.contains( doc, node ) ) {

							if ( node.src ) {
								// Optional AJAX dependency, but won't run scripts if not present
								if ( jQuery._evalUrl ) {
									jQuery._evalUrl( node.src );
								}
							} else {
								jQuery.globalEval( node.textContent.replace( rcleanScript, "" ) );
							}
						}
					}
				}
			}
		}

		return this;
	}
});

jQuery.each({
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: QtWebKit
			// .get() because push.apply(_, arraylike) throws
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
});


var iframe,
	elemdisplay = {};

/**
 * Retrieve the actual display of a element
 * @param {String} name nodeName of the element
 * @param {Object} doc Document object
 */
// Called only from within defaultDisplay
function actualDisplay( name, doc ) {
	var style,
		elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),

		// getDefaultComputedStyle might be reliably used only on attached element
		display = window.getDefaultComputedStyle && ( style = window.getDefaultComputedStyle( elem[ 0 ] ) ) ?

			// Use of this method is a temporary fix (more like optimization) until something better comes along,
			// since it was removed from specification and supported only in FF
			style.display : jQuery.css( elem[ 0 ], "display" );

	// We don't have any data stored on the element,
	// so use "detach" method as fast way to get rid of the element
	elem.detach();

	return display;
}

/**
 * Try to determine the default display value of an element
 * @param {String} nodeName
 */
function defaultDisplay( nodeName ) {
	var doc = document,
		display = elemdisplay[ nodeName ];

	if ( !display ) {
		display = actualDisplay( nodeName, doc );

		// If the simple way fails, read from inside an iframe
		if ( display === "none" || !display ) {

			// Use the already-created iframe if possible
			iframe = (iframe || jQuery( "<iframe frameborder='0' width='0' height='0'/>" )).appendTo( doc.documentElement );

			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
			doc = iframe[ 0 ].contentDocument;

			// Support: IE
			doc.write();
			doc.close();

			display = actualDisplay( nodeName, doc );
			iframe.detach();
		}

		// Store the correct default display
		elemdisplay[ nodeName ] = display;
	}

	return display;
}
var rmargin = (/^margin/);

var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {
		// Support: IE<=11+, Firefox<=30+ (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		if ( elem.ownerDocument.defaultView.opener ) {
			return elem.ownerDocument.defaultView.getComputedStyle( elem, null );
		}

		return window.getComputedStyle( elem, null );
	};



function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,
		style = elem.style;

	computed = computed || getStyles( elem );

	// Support: IE9
	// getPropertyValue is only needed for .css('filter') (#12537)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];
	}

	if ( computed ) {

		if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// Support: iOS < 6
		// A tribute to the "awesome hack by Dean Edwards"
		// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
		// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
		if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?
		// Support: IE
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {
	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {
				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return (this.get = hookFn).apply( this, arguments );
		}
	};
}


(function() {
	var pixelPositionVal, boxSizingReliableVal,
		docElem = document.documentElement,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	if ( !div.style ) {
		return;
	}

	// Support: IE9-11+
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	container.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;" +
		"position:absolute";
	container.appendChild( div );

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computePixelPositionAndBoxSizingReliable() {
		div.style.cssText =
			// Support: Firefox<29, Android 2.3
			// Vendor-prefix box-sizing
			"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;" +
			"box-sizing:border-box;display:block;margin-top:1%;top:1%;" +
			"border:1px;padding:1px;width:4px;position:absolute";
		div.innerHTML = "";
		docElem.appendChild( container );

		var divStyle = window.getComputedStyle( div, null );
		pixelPositionVal = divStyle.top !== "1%";
		boxSizingReliableVal = divStyle.width === "4px";

		docElem.removeChild( container );
	}

	// Support: node.js jsdom
	// Don't assume that getComputedStyle is a property of the global object
	if ( window.getComputedStyle ) {
		jQuery.extend( support, {
			pixelPosition: function() {

				// This test is executed only once but we still do memoizing
				// since we can use the boxSizingReliable pre-computing.
				// No need to check if the test was already performed, though.
				computePixelPositionAndBoxSizingReliable();
				return pixelPositionVal;
			},
			boxSizingReliable: function() {
				if ( boxSizingReliableVal == null ) {
					computePixelPositionAndBoxSizingReliable();
				}
				return boxSizingReliableVal;
			},
			reliableMarginRight: function() {

				// Support: Android 2.3
				// Check if div with explicit width and no margin-right incorrectly
				// gets computed margin-right based on width of container. (#3333)
				// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
				// This support function is only executed once so no memoizing is needed.
				var ret,
					marginDiv = div.appendChild( document.createElement( "div" ) );

				// Reset CSS: box-sizing; display; margin; border; padding
				marginDiv.style.cssText = div.style.cssText =
					// Support: Firefox<29, Android 2.3
					// Vendor-prefix box-sizing
					"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" +
					"box-sizing:content-box;display:block;margin:0;border:0;padding:0";
				marginDiv.style.marginRight = marginDiv.style.width = "0";
				div.style.width = "1px";
				docElem.appendChild( container );

				ret = !parseFloat( window.getComputedStyle( marginDiv, null ).marginRight );

				docElem.removeChild( container );
				div.removeChild( marginDiv );

				return ret;
			}
		});
	}
})();


// A method for quickly swapping in/out CSS properties to get correct calculations.
jQuery.swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};


var
	// Swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rnumsplit = new RegExp( "^(" + pnum + ")(.*)$", "i" ),
	rrelNum = new RegExp( "^([+-])=(" + pnum + ")", "i" ),

	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	},

	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];

// Return a css property mapped to a potentially vendor prefixed property
function vendorPropName( style, name ) {

	// Shortcut for names that are not vendor prefixed
	if ( name in style ) {
		return name;
	}

	// Check for vendor prefixed names
	var capName = name[0].toUpperCase() + name.slice(1),
		origName = name,
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in style ) {
			return name;
		}
	}

	return origName;
}

function setPositiveNumber( elem, value, subtract ) {
	var matches = rnumsplit.exec( value );
	return matches ?
		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
		value;
}

function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
	var i = extra === ( isBorderBox ? "border" : "content" ) ?
		// If we already have the right measurement, avoid augmentation
		4 :
		// Otherwise initialize for horizontal or vertical properties
		name === "width" ? 1 : 0,

		val = 0;

	for ( ; i < 4; i += 2 ) {
		// Both box models exclude margin, so add it if we want it
		if ( extra === "margin" ) {
			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
		}

		if ( isBorderBox ) {
			// border-box includes padding, so remove it if we want content
			if ( extra === "content" ) {
				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// At this point, extra isn't border nor margin, so remove border
			if ( extra !== "margin" ) {
				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		} else {
			// At this point, extra isn't content, so add padding
			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// At this point, extra isn't content nor padding, so add border
			if ( extra !== "padding" ) {
				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	return val;
}

function getWidthOrHeight( elem, name, extra ) {

	// Start with offset property, which is equivalent to the border-box value
	var valueIsBorderBox = true,
		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
		styles = getStyles( elem ),
		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

	// Some non-html elements return undefined for offsetWidth, so check for null/undefined
	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
	if ( val <= 0 || val == null ) {
		// Fall back to computed then uncomputed css if necessary
		val = curCSS( elem, name, styles );
		if ( val < 0 || val == null ) {
			val = elem.style[ name ];
		}

		// Computed unit is not pixels. Stop here and return.
		if ( rnumnonpx.test(val) ) {
			return val;
		}

		// Check for style in case a browser which returns unreliable values
		// for getComputedStyle silently falls back to the reliable elem.style
		valueIsBorderBox = isBorderBox &&
			( support.boxSizingReliable() || val === elem.style[ name ] );

		// Normalize "", auto, and prepare for extra
		val = parseFloat( val ) || 0;
	}

	// Use the active box-sizing model to add/subtract irrelevant styles
	return ( val +
		augmentWidthOrHeight(
			elem,
			name,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles
		)
	) + "px";
}

function showHide( elements, show ) {
	var display, elem, hidden,
		values = [],
		index = 0,
		length = elements.length;

	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		values[ index ] = data_priv.get( elem, "olddisplay" );
		display = elem.style.display;
		if ( show ) {
			// Reset the inline display of this element to learn if it is
			// being hidden by cascaded rules or not
			if ( !values[ index ] && display === "none" ) {
				elem.style.display = "";
			}

			// Set elements which have been overridden with display: none
			// in a stylesheet to whatever the default browser style is
			// for such an element
			if ( elem.style.display === "" && isHidden( elem ) ) {
				values[ index ] = data_priv.access( elem, "olddisplay", defaultDisplay(elem.nodeName) );
			}
		} else {
			hidden = isHidden( elem );

			if ( display !== "none" || !hidden ) {
				data_priv.set( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
			}
		}
	}

	// Set the display of most of the elements in a second loop
	// to avoid the constant reflow
	for ( index = 0; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}
		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
			elem.style.display = show ? values[ index ] || "" : "none";
		}
	}

	return elements;
}

jQuery.extend({

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {
		"float": "cssFloat"
	},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = jQuery.camelCase( name ),
			style = elem.style;

		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && (ret = rrelNum.exec( value )) ) {
				value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number, add 'px' to the (except for certain CSS properties)
			if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
				value += "px";
			}

			// Support: IE9-11+
			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {
				style[ name ] = value;
			}

		} else {
			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = jQuery.camelCase( name );

		// Make sure that we're working with the right name
		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
		}
		return val;
	}
});

jQuery.each([ "height", "width" ], function( i, name ) {
	jQuery.cssHooks[ name ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) && elem.offsetWidth === 0 ?
					jQuery.swap( elem, cssShow, function() {
						return getWidthOrHeight( elem, name, extra );
					}) :
					getWidthOrHeight( elem, name, extra );
			}
		},

		set: function( elem, value, extra ) {
			var styles = extra && getStyles( elem );
			return setPositiveNumber( elem, value, extra ?
				augmentWidthOrHeight(
					elem,
					name,
					extra,
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
					styles
				) : 0
			);
		}
	};
});

// Support: Android 2.3
jQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,
	function( elem, computed ) {
		if ( computed ) {
			return jQuery.swap( elem, { "display": "inline-block" },
				curCSS, [ elem, "marginRight" ] );
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each({
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split(" ") : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( !rmargin.test( prefix ) ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
});

jQuery.fn.extend({
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( jQuery.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	},
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each(function() {
			if ( isHidden( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		});
	}
});


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || "swing";
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			if ( tween.elem[ tween.prop ] != null &&
				(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );
			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {
			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE9
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	}
};

jQuery.fx = Tween.prototype.init;

// Back Compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, timerId,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rfxnum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" ),
	rrun = /queueHooks$/,
	animationPrefilters = [ defaultPrefilter ],
	tweeners = {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value ),
				target = tween.cur(),
				parts = rfxnum.exec( value ),
				unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

				// Starting value computation is required for potential unit mismatches
				start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
					rfxnum.exec( jQuery.css( tween.elem, prop ) ),
				scale = 1,
				maxIterations = 20;

			if ( start && start[ 3 ] !== unit ) {
				// Trust units reported by jQuery.css
				unit = unit || start[ 3 ];

				// Make sure we update the tween properties later on
				parts = parts || [];

				// Iteratively approximate from a nonzero starting point
				start = +target || 1;

				do {
					// If previous iteration zeroed out, double until we get *something*.
					// Use string for doubling so we don't accidentally see scale as unchanged below
					scale = scale || ".5";

					// Adjust and apply
					start = start / scale;
					jQuery.style( tween.elem, prop, start + unit );

				// Update scale, tolerating zero or NaN from tween.cur(),
				// break the loop if scale is unchanged or perfect, or if we've just had enough
				} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
			}

			// Update tween properties
			if ( parts ) {
				start = tween.start = +start || +target || 0;
				tween.unit = unit;
				// If a +=/-= token was provided, we're doing a relative animation
				tween.end = parts[ 1 ] ?
					start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
					+parts[ 2 ];
			}

			return tween;
		} ]
	};

// Animations created synchronously will run synchronously
function createFxNow() {
	setTimeout(function() {
		fxNow = undefined;
	});
	return ( fxNow = jQuery.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4 ; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( (tween = collection[ index ].call( animation, prop, value )) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	/* jshint validthis: true */
	var prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHidden( elem ),
		dataShow = data_priv.get( elem, "fxshow" );

	// Handle queue: false promises
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always(function() {
			// Ensure the complete handler is called before this completes
			anim.always(function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			});
		});
	}

	// Height/width overflow pass
	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
		// Make sure that nothing sneaks out
		// Record all 3 overflow attributes because IE9-10 do not
		// change the overflow attribute when overflowX and
		// overflowY are set to the same value
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Set display property to inline-block for height/width
		// animations on inline elements that are having width/height animated
		display = jQuery.css( elem, "display" );

		// Test default display if display is currently "none"
		checkDisplay = display === "none" ?
			data_priv.get( elem, "olddisplay" ) || defaultDisplay( elem.nodeName ) : display;

		if ( checkDisplay === "inline" && jQuery.css( elem, "float" ) === "none" ) {
			style.display = "inline-block";
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always(function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		});
	}

	// show/hide pass
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.exec( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );

		// Any non-fx value stops us from restoring the original display value
		} else {
			display = undefined;
		}
	}

	if ( !jQuery.isEmptyObject( orig ) ) {
		if ( dataShow ) {
			if ( "hidden" in dataShow ) {
				hidden = dataShow.hidden;
			}
		} else {
			dataShow = data_priv.access( elem, "fxshow", {} );
		}

		// Store state if its toggle - enables .stop().toggle() to "reverse"
		if ( toggle ) {
			dataShow.hidden = !hidden;
		}
		if ( hidden ) {
			jQuery( elem ).show();
		} else {
			anim.done(function() {
				jQuery( elem ).hide();
			});
		}
		anim.done(function() {
			var prop;

			data_priv.remove( elem, "fxshow" );
			for ( prop in orig ) {
				jQuery.style( elem, prop, orig[ prop ] );
			}
		});
		for ( prop in orig ) {
			tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );

			if ( !( prop in dataShow ) ) {
				dataShow[ prop ] = tween.start;
				if ( hidden ) {
					tween.end = tween.start;
					tween.start = prop === "width" || prop === "height" ? 1 : 0;
				}
			}
		}

	// If this is a noop like .hide().hide(), restore an overwritten display value
	} else if ( (display === "none" ? defaultDisplay( elem.nodeName ) : display) === "inline" ) {
		style.display = display;
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = jQuery.camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( jQuery.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = animationPrefilters.length,
		deferred = jQuery.Deferred().always( function() {
			// Don't match elem in the :animated selector
			delete tick.elem;
		}),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
				// Support: Android 2.3
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length ; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ]);

			if ( percent < 1 && length ) {
				return remaining;
			} else {
				deferred.resolveWith( elem, [ animation ] );
				return false;
			}
		},
		animation = deferred.promise({
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, { specialEasing: {} }, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,
					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length ; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		}),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length ; index++ ) {
		result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( jQuery.isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		})
	);

	// attach callbacks from options
	return animation.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );
}

jQuery.Animation = jQuery.extend( Animation, {

	tweener: function( props, callback ) {
		if ( jQuery.isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.split(" ");
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length ; index++ ) {
			prop = props[ index ];
			tweeners[ prop ] = tweeners[ prop ] || [];
			tweeners[ prop ].unshift( callback );
		}
	},

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			animationPrefilters.unshift( callback );
		} else {
			animationPrefilters.push( callback );
		}
	}
});

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			jQuery.isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
	};

	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
		opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( jQuery.isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend({
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHidden ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate({ opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {
				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || data_priv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each(function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = data_priv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		});
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each(function() {
			var index,
				data = data_priv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		});
	}
});

jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
});

// Generate shortcuts for custom animations
jQuery.each({
	slideDown: genFx("show"),
	slideUp: genFx("hide"),
	slideToggle: genFx("toggle"),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
});

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = jQuery.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];
		// Checks the timer has not already been removed
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	if ( timer() ) {
		jQuery.fx.start();
	} else {
		jQuery.timers.pop();
	}
};

jQuery.fx.interval = 13;

jQuery.fx.start = function() {
	if ( !timerId ) {
		timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
	}
};

jQuery.fx.stop = function() {
	clearInterval( timerId );
	timerId = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,
	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = setTimeout( next, time );
		hooks.stop = function() {
			clearTimeout( timeout );
		};
	});
};


(function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: iOS<=5.1, Android<=4.2+
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE<=11+
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: Android<=2.3
	// Options inside disabled selects are incorrectly marked as disabled
	select.disabled = true;
	support.optDisabled = !opt.disabled;

	// Support: IE<=11+
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
})();


var nodeHook, boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend({
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each(function() {
			jQuery.removeAttr( this, name );
		});
	}
});

jQuery.extend({
	attr: function( elem, name, value ) {
		var hooks, ret,
			nType = elem.nodeType;

		// don't get/set attributes on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === strundefined ) {
			return jQuery.prop( elem, name, value );
		}

		// All attributes are lowercase
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			name = name.toLowerCase();
			hooks = jQuery.attrHooks[ name ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
		}

		if ( value !== undefined ) {

			if ( value === null ) {
				jQuery.removeAttr( elem, name );

			} else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
				return ret;

			} else {
				elem.setAttribute( name, value + "" );
				return value;
			}

		} else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
			return ret;

		} else {
			ret = jQuery.find.attr( elem, name );

			// Non-existent attributes return null, we normalize to undefined
			return ret == null ?
				undefined :
				ret;
		}
	},

	removeAttr: function( elem, value ) {
		var name, propName,
			i = 0,
			attrNames = value && value.match( rnotwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( (name = attrNames[i++]) ) {
				propName = jQuery.propFix[ name ] || name;

				// Boolean attributes get special treatment (#10870)
				if ( jQuery.expr.match.bool.test( name ) ) {
					// Set corresponding property to false
					elem[ propName ] = false;
				}

				elem.removeAttribute( name );
			}
		}
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					jQuery.nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	}
});

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {
			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};
jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle;
		if ( !isXML ) {
			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ name ];
			attrHandle[ name ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				name.toLowerCase() :
				null;
			attrHandle[ name ] = handle;
		}
		return ret;
	};
});




var rfocusable = /^(?:input|select|textarea|button)$/i;

jQuery.fn.extend({
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each(function() {
			delete this[ jQuery.propFix[ name ] || name ];
		});
	}
});

jQuery.extend({
	propFix: {
		"for": "htmlFor",
		"class": "className"
	},

	prop: function( elem, name, value ) {
		var ret, hooks, notxml,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

		if ( notxml ) {
			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
				ret :
				( elem[ name ] = value );

		} else {
			return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
				ret :
				elem[ name ];
		}
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {
				return elem.hasAttribute( "tabindex" ) || rfocusable.test( elem.nodeName ) || elem.href ?
					elem.tabIndex :
					-1;
			}
		}
	}
});

if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {
			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		}
	};
}

jQuery.each([
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
});




var rclass = /[\t\r\n\f]/g;

jQuery.fn.extend({
	addClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).addClass( value.call( this, j, this.className ) );
			});
		}

		if ( proceed ) {
			// The disjunction here is for better compressibility (see removeClass)
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					" "
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// only assign if different to avoid unneeded rendering.
					finalValue = jQuery.trim( cur );
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = arguments.length === 0 || typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).removeClass( value.call( this, j, this.className ) );
			});
		}
		if ( proceed ) {
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					""
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = value ? jQuery.trim( cur ) : "";
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value;

		if ( typeof stateVal === "boolean" && type === "string" ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( i ) {
				jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
			});
		}

		return this.each(function() {
			if ( type === "string" ) {
				// Toggle individual class names
				var className,
					i = 0,
					self = jQuery( this ),
					classNames = value.match( rnotwhite ) || [];

				while ( (className = classNames[ i++ ]) ) {
					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( type === strundefined || type === "boolean" ) {
				if ( this.className ) {
					// store className if set
					data_priv.set( this, "__className__", this.className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				this.className = this.className || value === false ? "" : data_priv.get( this, "__className__" ) || "";
			}
		});
	},

	hasClass: function( selector ) {
		var className = " " + selector + " ",
			i = 0,
			l = this.length;
		for ( ; i < l; i++ ) {
			if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
				return true;
			}
		}

		return false;
	}
});




var rreturn = /\r/g;

jQuery.fn.extend({
	val: function( value ) {
		var hooks, ret, isFunction,
			elem = this[0];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
					return ret;
				}

				ret = elem.value;

				return typeof ret === "string" ?
					// Handle most common string cases
					ret.replace(rreturn, "") :
					// Handle cases where value is null/undef or number
					ret == null ? "" : ret;
			}

			return;
		}

		isFunction = jQuery.isFunction( value );

		return this.each(function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( isFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( jQuery.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				});
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		});
	}
});

jQuery.extend({
	valHooks: {
		option: {
			get: function( elem ) {
				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :
					// Support: IE10-11+
					// option.text throws exceptions (#14686, #14858)
					jQuery.trim( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one" || index < 0,
					values = one ? null : [],
					max = one ? index + 1 : options.length,
					i = index < 0 ?
						max :
						one ? index : 0;

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// IE6-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&
							// Don't return options that are disabled or in a disabled optgroup
							( support.optDisabled ? !option.disabled : option.getAttribute( "disabled" ) === null ) &&
							( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];
					if ( (option.selected = jQuery.inArray( option.value, values ) >= 0) ) {
						optionSet = true;
					}
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
});

// Radios and checkboxes getter/setter
jQuery.each([ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( jQuery.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute("value") === null ? "on" : elem.value;
		};
	}
});




// Return jQuery for attributes-only inclusion


jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
});

jQuery.fn.extend({
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	},

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {
		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
	}
});


var nonce = jQuery.now();

var rquery = (/\?/);



// Support: Android 2.3
// Workaround failure to string-cast null input
jQuery.parseJSON = function( data ) {
	return JSON.parse( data + "" );
};


// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml, tmp;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE9
	try {
		tmp = new DOMParser();
		xml = tmp.parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rhash = /#.*$/,
	rts = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,
	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,
	rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Document location
	ajaxLocation = window.location.href,

	// Segment location into parts
	ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];

		if ( jQuery.isFunction( func ) ) {
			// For each dataType in the dataTypeExpression
			while ( (dataType = dataTypes[i++]) ) {
				// Prepend if requested
				if ( dataType[0] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					(structure[ dataType ] = structure[ dataType ] || []).unshift( func );

				// Otherwise append
				} else {
					(structure[ dataType ] = structure[ dataType ] || []).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		});
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {
		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}
		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},
		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

		// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {
								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s[ "throws" ] ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend({

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: ajaxLocation,
		type: "GET",
		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /xml/,
			html: /html/,
			json: /json/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": jQuery.parseJSON,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,
			// URL without anti-cache param
			cacheURL,
			// Response headers
			responseHeadersString,
			responseHeaders,
			// timeout handle
			timeoutTimer,
			// Cross-domain detection vars
			parts,
			// To know if global events are to be dispatched
			fireGlobals,
			// Loop variable
			i,
			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),
			// Callbacks context
			callbackContext = s.context || s,
			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
				jQuery( callbackContext ) :
				jQuery.event,
			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks("once memory"),
			// Status-dependent callbacks
			statusCode = s.statusCode || {},
			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},
			// The jqXHR state
			state = 0,
			// Default abort message
			strAbort = "canceled",
			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( state === 2 ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( (match = rheaders.exec( responseHeadersString )) ) {
								responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
							}
						}
						match = responseHeaders[ key.toLowerCase() ];
					}
					return match == null ? null : match;
				},

				// Raw string
				getAllResponseHeaders: function() {
					return state === 2 ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					var lname = name.toLowerCase();
					if ( !state ) {
						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( !state ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( state < 2 ) {
							for ( code in map ) {
								// Lazy-add the new callback in a way that preserves old ones
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						} else {
							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR ).complete = completeDeferred.add;
		jqXHR.success = jqXHR.done;
		jqXHR.error = jqXHR.fail;

		// Remove hash character (#7531: and string promotion)
		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" )
			.replace( rprotocol, ajaxLocParts[ 1 ] + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( rnotwhite ) || [ "" ];

		// A cross-domain request is in order when we have a protocol:host:port mismatch
		if ( s.crossDomain == null ) {
			parts = rurl.exec( s.url.toLowerCase() );
			s.crossDomain = !!( parts &&
				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
			);
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( state === 2 ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger("ajaxStart");
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		cacheURL = s.url;

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// If data is available, append data to url
			if ( s.data ) {
				cacheURL = ( s.url += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add anti-cache in url if needed
			if ( s.cache === false ) {
				s.url = rts.test( cacheURL ) ?

					// If there is already a '_' parameter, set its value
					cacheURL.replace( rts, "$1_=" + nonce++ ) :

					// Otherwise add one to the end
					cacheURL + ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + nonce++;
			}
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
				s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		for ( i in { success: 1, error: 1, complete: 1 } ) {
			jqXHR[ i ]( s[ i ] );
		}

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}
			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = setTimeout(function() {
					jqXHR.abort("timeout");
				}, s.timeout );
			}

			try {
				state = 1;
				transport.send( requestHeaders, done );
			} catch ( e ) {
				// Propagate exception as error if not done
				if ( state < 2 ) {
					done( -1, e );
				// Simply rethrow otherwise
				} else {
					throw e;
				}
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Called once
			if ( state === 2 ) {
				return;
			}

			// State is "done" now
			state = 2;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader("Last-Modified");
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader("etag");
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {
				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger("ajaxStop");
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
});

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {
		// Shift arguments if data argument was omitted
		if ( jQuery.isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		return jQuery.ajax({
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		});
	};
});


jQuery._evalUrl = function( url ) {
	return jQuery.ajax({
		url: url,
		type: "GET",
		dataType: "script",
		async: false,
		global: false,
		"throws": true
	});
};


jQuery.fn.extend({
	wrapAll: function( html ) {
		var wrap;

		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapAll( html.call(this, i) );
			});
		}

		if ( this[ 0 ] ) {

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map(function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			}).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapInner( html.call(this, i) );
			});
		}

		return this.each(function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		});
	},

	wrap: function( html ) {
		var isFunction = jQuery.isFunction( html );

		return this.each(function( i ) {
			jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
		});
	},

	unwrap: function() {
		return this.parent().each(function() {
			if ( !jQuery.nodeName( this, "body" ) ) {
				jQuery( this ).replaceWith( this.childNodes );
			}
		}).end();
	}
});


jQuery.expr.filters.hidden = function( elem ) {
	// Support: Opera <= 12.12
	// Opera reports offsetWidths and offsetHeights less than zero on some elements
	return elem.offsetWidth <= 0 && elem.offsetHeight <= 0;
};
jQuery.expr.filters.visible = function( elem ) {
	return !jQuery.expr.filters.hidden( elem );
};




var r20 = /%20/g,
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( jQuery.isArray( obj ) ) {
		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {
				// Treat each array item as a scalar.
				add( prefix, v );

			} else {
				// Item is non-scalar (array or object), encode its numeric index.
				buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
			}
		});

	} else if ( !traditional && jQuery.type( obj ) === "object" ) {
		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {
		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, value ) {
			// If value is a function, invoke it and return its value
			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
		};

	// Set traditional to true for jQuery <= 1.3.2 behavior.
	if ( traditional === undefined ) {
		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		});

	} else {
		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" ).replace( r20, "+" );
};

jQuery.fn.extend({
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map(function() {
			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		})
		.filter(function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		})
		.map(function( i, elem ) {
			var val = jQuery( this ).val();

			return val == null ?
				null :
				jQuery.isArray( val ) ?
					jQuery.map( val, function( val ) {
						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
					}) :
					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		}).get();
	}
});


jQuery.ajaxSettings.xhr = function() {
	try {
		return new XMLHttpRequest();
	} catch( e ) {}
};

var xhrId = 0,
	xhrCallbacks = {},
	xhrSuccessStatus = {
		// file protocol always yields status code 0, assume 200
		0: 200,
		// Support: IE9
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

// Support: IE9
// Open requests must be manually aborted on unload (#5280)
// See https://support.microsoft.com/kb/2856746 for more info
if ( window.attachEvent ) {
	window.attachEvent( "onunload", function() {
		for ( var key in xhrCallbacks ) {
			xhrCallbacks[ key ]();
		}
	});
}

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport(function( options ) {
	var callback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr(),
					id = ++xhrId;

				xhr.open( options.type, options.url, options.async, options.username, options.password );

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers["X-Requested-With"] ) {
					headers["X-Requested-With"] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							delete xhrCallbacks[ id ];
							callback = xhr.onload = xhr.onerror = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {
								complete(
									// file: protocol always yields status 0; see #8605, #14207
									xhr.status,
									xhr.statusText
								);
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,
									// Support: IE9
									// Accessing binary-data responseText throws an exception
									// (#11426)
									typeof xhr.responseText === "string" ? {
										text: xhr.responseText
									} : undefined,
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				xhr.onerror = callback("error");

				// Create the abort callback
				callback = xhrCallbacks[ id ] = callback("abort");

				try {
					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {
					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




// Install script dataType
jQuery.ajaxSetup({
	accepts: {
		script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /(?:java|ecma)script/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
});

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
});

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {
	// This transport only deals with cross domain requests
	if ( s.crossDomain ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery("<script>").prop({
					async: true,
					charset: s.scriptCharset,
					src: s.url
				}).on(
					"load error",
					callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					}
				);
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup({
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
});

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters["script json"] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always(function() {
			// Restore preexisting value
			window[ callbackName ] = overwritten;

			// Save back as free
			if ( s[ callbackName ] ) {
				// make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		});

		// Delegate to script
		return "script";
	}
});




// data: string of html
// context (optional): If specified, the fragment will be created in this context, defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( !data || typeof data !== "string" ) {
		return null;
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}
	context = context || document;

	var parsed = rsingleTag.exec( data ),
		scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[1] ) ];
	}

	parsed = jQuery.buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


// Keep a copy of the old load method
var _load = jQuery.fn.load;

/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	if ( typeof url !== "string" && _load ) {
		return _load.apply( this, arguments );
	}

	var selector, type, response,
		self = this,
		off = url.indexOf(" ");

	if ( off >= 0 ) {
		selector = jQuery.trim( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( jQuery.isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax({
			url: url,

			// if "type" variable is undefined, then "GET" method will be used
			type: type,
			dataType: "html",
			data: params
		}).done(function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		}).complete( callback && function( jqXHR, status ) {
			self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
		});
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
});




jQuery.expr.filters.animated = function( elem ) {
	return jQuery.grep(jQuery.timers, function( fn ) {
		return elem === fn.elem;
	}).length;
};




var docElem = window.document.documentElement;

/**
 * Gets a window from an element
 */
function getWindow( elem ) {
	return jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;
}

jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf("auto") > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( jQuery.isFunction( options ) ) {
			options = options.call( elem, i, curOffset );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend({
	offset: function( options ) {
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each(function( i ) {
					jQuery.offset.setOffset( this, options, i );
				});
		}

		var docElem, win,
			elem = this[ 0 ],
			box = { top: 0, left: 0 },
			doc = elem && elem.ownerDocument;

		if ( !doc ) {
			return;
		}

		docElem = doc.documentElement;

		// Make sure it's not a disconnected DOM node
		if ( !jQuery.contains( docElem, elem ) ) {
			return box;
		}

		// Support: BlackBerry 5, iOS 3 (original iPhone)
		// If we don't have gBCR, just use 0,0 rather than error
		if ( typeof elem.getBoundingClientRect !== strundefined ) {
			box = elem.getBoundingClientRect();
		}
		win = getWindow( doc );
		return {
			top: box.top + win.pageYOffset - docElem.clientTop,
			left: box.left + win.pageXOffset - docElem.clientLeft
		};
	},

	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent
		if ( jQuery.css( elem, "position" ) === "fixed" ) {
			// Assume getBoundingClientRect is there when computed position is fixed
			offset = elem.getBoundingClientRect();

		} else {
			// Get *real* offsetParent
			offsetParent = this.offsetParent();

			// Get correct offsets
			offset = this.offset();
			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
				parentOffset = offsetParent.offset();
			}

			// Add offsetParent borders
			parentOffset.top += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	offsetParent: function() {
		return this.map(function() {
			var offsetParent = this.offsetParent || docElem;

			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position" ) === "static" ) ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || docElem;
		});
	}
});

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {
			var win = getWindow( elem );

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : window.pageXOffset,
					top ? val : window.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length, null );
	};
});

// Support: Safari<7+, Chrome<37+
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://code.google.com/p/chromium/issues/detail?id=229280
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );
				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
});


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( jQuery.isWindow( elem ) ) {
					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
					// isn't a whole lot we can do. See pull request at this URL for discussion:
					// https://github.com/jquery/jquery/pull/764
					return elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?
					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable, null );
		};
	});
});


// The number of elements contained in the matched element set
jQuery.fn.size = function() {
	return this.length;
};

jQuery.fn.andSelf = jQuery.fn.addBack;




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( typeof define === "function" && define.amd ) {
	define( "jquery", [], function() {
		return jQuery;
	});
}




var
	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( typeof noGlobal === strundefined ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;

}));

/*!
 * Bootstrap v3.3.6 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */

if (typeof jQuery === 'undefined') {
  throw new Error('Bootstrap\'s JavaScript requires jQuery')
}

+function ($) {
  'use strict';
  var version = $.fn.jquery.split(' ')[0].split('.')
  if ((version[0] < 2 && version[1] < 9) || (version[0] == 1 && version[1] == 9 && version[2] < 1) || (version[0] > 2)) {
    throw new Error('Bootstrap\'s JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3')
  }
}(jQuery);

/* ========================================================================
 * Bootstrap: transition.js v3.3.6
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      WebkitTransition : 'webkitTransitionEnd',
      MozTransition    : 'transitionend',
      OTransition      : 'oTransitionEnd otransitionend',
      transition       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // http://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false
    var $el = this
    $(this).one('bsTransitionEnd', function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()

    if (!$.support.transition) return

    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function (e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
      }
    }
  })

}(jQuery);

/* ========================================================================
 * Bootstrap: alert.js v3.3.6
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // ALERT CLASS DEFINITION
  // ======================

  var dismiss = '[data-dismiss="alert"]'
  var Alert   = function (el) {
    $(el).on('click', dismiss, this.close)
  }

  Alert.VERSION = '3.3.6'

  Alert.TRANSITION_DURATION = 150

  Alert.prototype.close = function (e) {
    var $this    = $(this)
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = $(selector)

    if (e) e.preventDefault()

    if (!$parent.length) {
      $parent = $this.closest('.alert')
    }

    $parent.trigger(e = $.Event('close.bs.alert'))

    if (e.isDefaultPrevented()) return

    $parent.removeClass('in')

    function removeElement() {
      // detach from parent, fire event then clean up data
      $parent.detach().trigger('closed.bs.alert').remove()
    }

    $.support.transition && $parent.hasClass('fade') ?
      $parent
        .one('bsTransitionEnd', removeElement)
        .emulateTransitionEnd(Alert.TRANSITION_DURATION) :
      removeElement()
  }


  // ALERT PLUGIN DEFINITION
  // =======================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.alert')

      if (!data) $this.data('bs.alert', (data = new Alert(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.alert

  $.fn.alert             = Plugin
  $.fn.alert.Constructor = Alert


  // ALERT NO CONFLICT
  // =================

  $.fn.alert.noConflict = function () {
    $.fn.alert = old
    return this
  }


  // ALERT DATA-API
  // ==============

  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)

}(jQuery);

/* ========================================================================
 * Bootstrap: button.js v3.3.6
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // BUTTON PUBLIC CLASS DEFINITION
  // ==============================

  var Button = function (element, options) {
    this.$element  = $(element)
    this.options   = $.extend({}, Button.DEFAULTS, options)
    this.isLoading = false
  }

  Button.VERSION  = '3.3.6'

  Button.DEFAULTS = {
    loadingText: 'loading...'
  }

  Button.prototype.setState = function (state) {
    var d    = 'disabled'
    var $el  = this.$element
    var val  = $el.is('input') ? 'val' : 'html'
    var data = $el.data()

    state += 'Text'

    if (data.resetText == null) $el.data('resetText', $el[val]())

    // push to event loop to allow forms to submit
    setTimeout($.proxy(function () {
      $el[val](data[state] == null ? this.options[state] : data[state])

      if (state == 'loadingText') {
        this.isLoading = true
        $el.addClass(d).attr(d, d)
      } else if (this.isLoading) {
        this.isLoading = false
        $el.removeClass(d).removeAttr(d)
      }
    }, this), 0)
  }

  Button.prototype.toggle = function () {
    var changed = true
    var $parent = this.$element.closest('[data-toggle="buttons"]')

    if ($parent.length) {
      var $input = this.$element.find('input')
      if ($input.prop('type') == 'radio') {
        if ($input.prop('checked')) changed = false
        $parent.find('.active').removeClass('active')
        this.$element.addClass('active')
      } else if ($input.prop('type') == 'checkbox') {
        if (($input.prop('checked')) !== this.$element.hasClass('active')) changed = false
        this.$element.toggleClass('active')
      }
      $input.prop('checked', this.$element.hasClass('active'))
      if (changed) $input.trigger('change')
    } else {
      this.$element.attr('aria-pressed', !this.$element.hasClass('active'))
      this.$element.toggleClass('active')
    }
  }


  // BUTTON PLUGIN DEFINITION
  // ========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.button')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.button', (data = new Button(this, options)))

      if (option == 'toggle') data.toggle()
      else if (option) data.setState(option)
    })
  }

  var old = $.fn.button

  $.fn.button             = Plugin
  $.fn.button.Constructor = Button


  // BUTTON NO CONFLICT
  // ==================

  $.fn.button.noConflict = function () {
    $.fn.button = old
    return this
  }


  // BUTTON DATA-API
  // ===============

  $(document)
    .on('click.bs.button.data-api', '[data-toggle^="button"]', function (e) {
      var $btn = $(e.target)
      if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')
      Plugin.call($btn, 'toggle')
      if (!($(e.target).is('input[type="radio"]') || $(e.target).is('input[type="checkbox"]'))) e.preventDefault()
    })
    .on('focus.bs.button.data-api blur.bs.button.data-api', '[data-toggle^="button"]', function (e) {
      $(e.target).closest('.btn').toggleClass('focus', /^focus(in)?$/.test(e.type))
    })

}(jQuery);

/* ========================================================================
 * Bootstrap: carousel.js v3.3.6
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CAROUSEL CLASS DEFINITION
  // =========================

  var Carousel = function (element, options) {
    this.$element    = $(element)
    this.$indicators = this.$element.find('.carousel-indicators')
    this.options     = options
    this.paused      = null
    this.sliding     = null
    this.interval    = null
    this.$active     = null
    this.$items      = null

    this.options.keyboard && this.$element.on('keydown.bs.carousel', $.proxy(this.keydown, this))

    this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element
      .on('mouseenter.bs.carousel', $.proxy(this.pause, this))
      .on('mouseleave.bs.carousel', $.proxy(this.cycle, this))
  }

  Carousel.VERSION  = '3.3.6'

  Carousel.TRANSITION_DURATION = 600

  Carousel.DEFAULTS = {
    interval: 5000,
    pause: 'hover',
    wrap: true,
    keyboard: true
  }

  Carousel.prototype.keydown = function (e) {
    if (/input|textarea/i.test(e.target.tagName)) return
    switch (e.which) {
      case 37: this.prev(); break
      case 39: this.next(); break
      default: return
    }

    e.preventDefault()
  }

  Carousel.prototype.cycle = function (e) {
    e || (this.paused = false)

    this.interval && clearInterval(this.interval)

    this.options.interval
      && !this.paused
      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))

    return this
  }

  Carousel.prototype.getItemIndex = function (item) {
    this.$items = item.parent().children('.item')
    return this.$items.index(item || this.$active)
  }

  Carousel.prototype.getItemForDirection = function (direction, active) {
    var activeIndex = this.getItemIndex(active)
    var willWrap = (direction == 'prev' && activeIndex === 0)
                || (direction == 'next' && activeIndex == (this.$items.length - 1))
    if (willWrap && !this.options.wrap) return active
    var delta = direction == 'prev' ? -1 : 1
    var itemIndex = (activeIndex + delta) % this.$items.length
    return this.$items.eq(itemIndex)
  }

  Carousel.prototype.to = function (pos) {
    var that        = this
    var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))

    if (pos > (this.$items.length - 1) || pos < 0) return

    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) }) // yes, "slid"
    if (activeIndex == pos) return this.pause().cycle()

    return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))
  }

  Carousel.prototype.pause = function (e) {
    e || (this.paused = true)

    if (this.$element.find('.next, .prev').length && $.support.transition) {
      this.$element.trigger($.support.transition.end)
      this.cycle(true)
    }

    this.interval = clearInterval(this.interval)

    return this
  }

  Carousel.prototype.next = function () {
    if (this.sliding) return
    return this.slide('next')
  }

  Carousel.prototype.prev = function () {
    if (this.sliding) return
    return this.slide('prev')
  }

  Carousel.prototype.slide = function (type, next) {
    var $active   = this.$element.find('.item.active')
    var $next     = next || this.getItemForDirection(type, $active)
    var isCycling = this.interval
    var direction = type == 'next' ? 'left' : 'right'
    var that      = this

    if ($next.hasClass('active')) return (this.sliding = false)

    var relatedTarget = $next[0]
    var slideEvent = $.Event('slide.bs.carousel', {
      relatedTarget: relatedTarget,
      direction: direction
    })
    this.$element.trigger(slideEvent)
    if (slideEvent.isDefaultPrevented()) return

    this.sliding = true

    isCycling && this.pause()

    if (this.$indicators.length) {
      this.$indicators.find('.active').removeClass('active')
      var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])
      $nextIndicator && $nextIndicator.addClass('active')
    }

    var slidEvent = $.Event('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, "slid"
    if ($.support.transition && this.$element.hasClass('slide')) {
      $next.addClass(type)
      $next[0].offsetWidth // force reflow
      $active.addClass(direction)
      $next.addClass(direction)
      $active
        .one('bsTransitionEnd', function () {
          $next.removeClass([type, direction].join(' ')).addClass('active')
          $active.removeClass(['active', direction].join(' '))
          that.sliding = false
          setTimeout(function () {
            that.$element.trigger(slidEvent)
          }, 0)
        })
        .emulateTransitionEnd(Carousel.TRANSITION_DURATION)
    } else {
      $active.removeClass('active')
      $next.addClass('active')
      this.sliding = false
      this.$element.trigger(slidEvent)
    }

    isCycling && this.cycle()

    return this
  }


  // CAROUSEL PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.carousel')
      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)
      var action  = typeof option == 'string' ? option : options.slide

      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))
      if (typeof option == 'number') data.to(option)
      else if (action) data[action]()
      else if (options.interval) data.pause().cycle()
    })
  }

  var old = $.fn.carousel

  $.fn.carousel             = Plugin
  $.fn.carousel.Constructor = Carousel


  // CAROUSEL NO CONFLICT
  // ====================

  $.fn.carousel.noConflict = function () {
    $.fn.carousel = old
    return this
  }


  // CAROUSEL DATA-API
  // =================

  var clickHandler = function (e) {
    var href
    var $this   = $(this)
    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '')) // strip for ie7
    if (!$target.hasClass('carousel')) return
    var options = $.extend({}, $target.data(), $this.data())
    var slideIndex = $this.attr('data-slide-to')
    if (slideIndex) options.interval = false

    Plugin.call($target, options)

    if (slideIndex) {
      $target.data('bs.carousel').to(slideIndex)
    }

    e.preventDefault()
  }

  $(document)
    .on('click.bs.carousel.data-api', '[data-slide]', clickHandler)
    .on('click.bs.carousel.data-api', '[data-slide-to]', clickHandler)

  $(window).on('load', function () {
    $('[data-ride="carousel"]').each(function () {
      var $carousel = $(this)
      Plugin.call($carousel, $carousel.data())
    })
  })

}(jQuery);

/* ========================================================================
 * Bootstrap: collapse.js v3.3.6
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +
                           '[data-toggle="collapse"][data-target="#' + element.id + '"]')
    this.transitioning = null

    if (this.options.parent) {
      this.$parent = this.getParent()
    } else {
      this.addAriaAndCollapsedClass(this.$element, this.$trigger)
    }

    if (this.options.toggle) this.toggle()
  }

  Collapse.VERSION  = '3.3.6'

  Collapse.TRANSITION_DURATION = 350

  Collapse.DEFAULTS = {
    toggle: true
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var activesData
    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')

    if (actives && actives.length) {
      activesData = actives.data('bs.collapse')
      if (activesData && activesData.transitioning) return
    }

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    if (actives && actives.length) {
      Plugin.call(actives, 'hide')
      activesData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')[dimension](0)
      .attr('aria-expanded', true)

    this.$trigger
      .removeClass('collapsed')
      .attr('aria-expanded', true)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')[dimension]('')
      this.transitioning = 0
      this.$element
        .trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element[dimension](this.$element[dimension]())[0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse in')
      .attr('aria-expanded', false)

    this.$trigger
      .addClass('collapsed')
      .attr('aria-expanded', false)

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .removeClass('collapsing')
        .addClass('collapse')
        .trigger('hidden.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }

  Collapse.prototype.getParent = function () {
    return $(this.options.parent)
      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
      .each($.proxy(function (i, element) {
        var $element = $(element)
        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
      }, this))
      .end()
  }

  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
    var isOpen = $element.hasClass('in')

    $element.attr('aria-expanded', isOpen)
    $trigger
      .toggleClass('collapsed', !isOpen)
      .attr('aria-expanded', isOpen)
  }

  function getTargetFromTrigger($trigger) {
    var href
    var target = $trigger.attr('data-target')
      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7

    return $(target)
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.collapse

  $.fn.collapse             = Plugin
  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
    var $this   = $(this)

    if (!$this.attr('data-target')) e.preventDefault()

    var $target = getTargetFromTrigger($this)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $this.data()

    Plugin.call($target, option)
  })

}(jQuery);

/* ========================================================================
 * Bootstrap: dropdown.js v3.3.6
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // DROPDOWN CLASS DEFINITION
  // =========================

  var backdrop = '.dropdown-backdrop'
  var toggle   = '[data-toggle="dropdown"]'
  var Dropdown = function (element) {
    $(element).on('click.bs.dropdown', this.toggle)
  }

  Dropdown.VERSION = '3.3.6'

  function getParent($this) {
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = selector && $(selector)

    return $parent && $parent.length ? $parent : $this.parent()
  }

  function clearMenus(e) {
    if (e && e.which === 3) return
    $(backdrop).remove()
    $(toggle).each(function () {
      var $this         = $(this)
      var $parent       = getParent($this)
      var relatedTarget = { relatedTarget: this }

      if (!$parent.hasClass('open')) return

      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return

      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this.attr('aria-expanded', 'false')
      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))
    })
  }

  Dropdown.prototype.toggle = function (e) {
    var $this = $(this)

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    clearMenus()

    if (!isActive) {
      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
        // if mobile we use a backdrop because click events don't delegate
        $(document.createElement('div'))
          .addClass('dropdown-backdrop')
          .insertAfter($(this))
          .on('click', clearMenus)
      }

      var relatedTarget = { relatedTarget: this }
      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this
        .trigger('focus')
        .attr('aria-expanded', 'true')

      $parent
        .toggleClass('open')
        .trigger($.Event('shown.bs.dropdown', relatedTarget))
    }

    return false
  }

  Dropdown.prototype.keydown = function (e) {
    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return

    var $this = $(this)

    e.preventDefault()
    e.stopPropagation()

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    if (!isActive && e.which != 27 || isActive && e.which == 27) {
      if (e.which == 27) $parent.find(toggle).trigger('focus')
      return $this.trigger('click')
    }

    var desc = ' li:not(.disabled):visible a'
    var $items = $parent.find('.dropdown-menu' + desc)

    if (!$items.length) return

    var index = $items.index(e.target)

    if (e.which == 38 && index > 0)                 index--         // up
    if (e.which == 40 && index < $items.length - 1) index++         // down
    if (!~index)                                    index = 0

    $items.eq(index).trigger('focus')
  }


  // DROPDOWN PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.dropdown')

      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.dropdown

  $.fn.dropdown             = Plugin
  $.fn.dropdown.Constructor = Dropdown


  // DROPDOWN NO CONFLICT
  // ====================

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }


  // APPLY TO STANDARD DROPDOWN ELEMENTS
  // ===================================

  $(document)
    .on('click.bs.dropdown.data-api', clearMenus)
    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)
    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)

}(jQuery);

/* ========================================================================
 * Bootstrap: modal.js v3.3.6
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // MODAL CLASS DEFINITION
  // ======================

  var Modal = function (element, options) {
    this.options             = options
    this.$body               = $(document.body)
    this.$element            = $(element)
    this.$dialog             = this.$element.find('.modal-dialog')
    this.$backdrop           = null
    this.isShown             = null
    this.originalBodyPad     = null
    this.scrollbarWidth      = 0
    this.ignoreBackdropClick = false

    if (this.options.remote) {
      this.$element
        .find('.modal-content')
        .load(this.options.remote, $.proxy(function () {
          this.$element.trigger('loaded.bs.modal')
        }, this))
    }
  }

  Modal.VERSION  = '3.3.6'

  Modal.TRANSITION_DURATION = 300
  Modal.BACKDROP_TRANSITION_DURATION = 150

  Modal.DEFAULTS = {
    backdrop: true,
    keyboard: true,
    show: true
  }

  Modal.prototype.toggle = function (_relatedTarget) {
    return this.isShown ? this.hide() : this.show(_relatedTarget)
  }

  Modal.prototype.show = function (_relatedTarget) {
    var that = this
    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })

    this.$element.trigger(e)

    if (this.isShown || e.isDefaultPrevented()) return

    this.isShown = true

    this.checkScrollbar()
    this.setScrollbar()
    this.$body.addClass('modal-open')

    this.escape()
    this.resize()

    this.$element.on('click.dismiss.bs.modal', '[data-dismiss="modal"]', $.proxy(this.hide, this))

    this.$dialog.on('mousedown.dismiss.bs.modal', function () {
      that.$element.one('mouseup.dismiss.bs.modal', function (e) {
        if ($(e.target).is(that.$element)) that.ignoreBackdropClick = true
      })
    })

    this.backdrop(function () {
      var transition = $.support.transition && that.$element.hasClass('fade')

      if (!that.$element.parent().length) {
        that.$element.appendTo(that.$body) // don't move modals dom position
      }

      that.$element
        .show()
        .scrollTop(0)

      that.adjustDialog()

      if (transition) {
        that.$element[0].offsetWidth // force reflow
      }

      that.$element.addClass('in')

      that.enforceFocus()

      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })

      transition ?
        that.$dialog // wait for modal to slide in
          .one('bsTransitionEnd', function () {
            that.$element.trigger('focus').trigger(e)
          })
          .emulateTransitionEnd(Modal.TRANSITION_DURATION) :
        that.$element.trigger('focus').trigger(e)
    })
  }

  Modal.prototype.hide = function (e) {
    if (e) e.preventDefault()

    e = $.Event('hide.bs.modal')

    this.$element.trigger(e)

    if (!this.isShown || e.isDefaultPrevented()) return

    this.isShown = false

    this.escape()
    this.resize()

    $(document).off('focusin.bs.modal')

    this.$element
      .removeClass('in')
      .off('click.dismiss.bs.modal')
      .off('mouseup.dismiss.bs.modal')

    this.$dialog.off('mousedown.dismiss.bs.modal')

    $.support.transition && this.$element.hasClass('fade') ?
      this.$element
        .one('bsTransitionEnd', $.proxy(this.hideModal, this))
        .emulateTransitionEnd(Modal.TRANSITION_DURATION) :
      this.hideModal()
  }

  Modal.prototype.enforceFocus = function () {
    $(document)
      .off('focusin.bs.modal') // guard against infinite focus loop
      .on('focusin.bs.modal', $.proxy(function (e) {
        if (this.$element[0] !== e.target && !this.$element.has(e.target).length) {
          this.$element.trigger('focus')
        }
      }, this))
  }

  Modal.prototype.escape = function () {
    if (this.isShown && this.options.keyboard) {
      this.$element.on('keydown.dismiss.bs.modal', $.proxy(function (e) {
        e.which == 27 && this.hide()
      }, this))
    } else if (!this.isShown) {
      this.$element.off('keydown.dismiss.bs.modal')
    }
  }

  Modal.prototype.resize = function () {
    if (this.isShown) {
      $(window).on('resize.bs.modal', $.proxy(this.handleUpdate, this))
    } else {
      $(window).off('resize.bs.modal')
    }
  }

  Modal.prototype.hideModal = function () {
    var that = this
    this.$element.hide()
    this.backdrop(function () {
      that.$body.removeClass('modal-open')
      that.resetAdjustments()
      that.resetScrollbar()
      that.$element.trigger('hidden.bs.modal')
    })
  }

  Modal.prototype.removeBackdrop = function () {
    this.$backdrop && this.$backdrop.remove()
    this.$backdrop = null
  }

  Modal.prototype.backdrop = function (callback) {
    var that = this
    var animate = this.$element.hasClass('fade') ? 'fade' : ''

    if (this.isShown && this.options.backdrop) {
      var doAnimate = $.support.transition && animate

      this.$backdrop = $(document.createElement('div'))
        .addClass('modal-backdrop ' + animate)
        .appendTo(this.$body)

      this.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {
        if (this.ignoreBackdropClick) {
          this.ignoreBackdropClick = false
          return
        }
        if (e.target !== e.currentTarget) return
        this.options.backdrop == 'static'
          ? this.$element[0].focus()
          : this.hide()
      }, this))

      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow

      this.$backdrop.addClass('in')

      if (!callback) return

      doAnimate ?
        this.$backdrop
          .one('bsTransitionEnd', callback)
          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :
        callback()

    } else if (!this.isShown && this.$backdrop) {
      this.$backdrop.removeClass('in')

      var callbackRemove = function () {
        that.removeBackdrop()
        callback && callback()
      }
      $.support.transition && this.$element.hasClass('fade') ?
        this.$backdrop
          .one('bsTransitionEnd', callbackRemove)
          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :
        callbackRemove()

    } else if (callback) {
      callback()
    }
  }

  // these following methods are used to handle overflowing modals

  Modal.prototype.handleUpdate = function () {
    this.adjustDialog()
  }

  Modal.prototype.adjustDialog = function () {
    var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight

    this.$element.css({
      paddingLeft:  !this.bodyIsOverflowing && modalIsOverflowing ? this.scrollbarWidth : '',
      paddingRight: this.bodyIsOverflowing && !modalIsOverflowing ? this.scrollbarWidth : ''
    })
  }

  Modal.prototype.resetAdjustments = function () {
    this.$element.css({
      paddingLeft: '',
      paddingRight: ''
    })
  }

  Modal.prototype.checkScrollbar = function () {
    var fullWindowWidth = window.innerWidth
    if (!fullWindowWidth) { // workaround for missing window.innerWidth in IE8
      var documentElementRect = document.documentElement.getBoundingClientRect()
      fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left)
    }
    this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth
    this.scrollbarWidth = this.measureScrollbar()
  }

  Modal.prototype.setScrollbar = function () {
    var bodyPad = parseInt((this.$body.css('padding-right') || 0), 10)
    this.originalBodyPad = document.body.style.paddingRight || ''
    if (this.bodyIsOverflowing) this.$body.css('padding-right', bodyPad + this.scrollbarWidth)
  }

  Modal.prototype.resetScrollbar = function () {
    this.$body.css('padding-right', this.originalBodyPad)
  }

  Modal.prototype.measureScrollbar = function () { // thx walsh
    var scrollDiv = document.createElement('div')
    scrollDiv.className = 'modal-scrollbar-measure'
    this.$body.append(scrollDiv)
    var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth
    this.$body[0].removeChild(scrollDiv)
    return scrollbarWidth
  }


  // MODAL PLUGIN DEFINITION
  // =======================

  function Plugin(option, _relatedTarget) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.modal')
      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))
      if (typeof option == 'string') data[option](_relatedTarget)
      else if (options.show) data.show(_relatedTarget)
    })
  }

  var old = $.fn.modal

  $.fn.modal             = Plugin
  $.fn.modal.Constructor = Modal


  // MODAL NO CONFLICT
  // =================

  $.fn.modal.noConflict = function () {
    $.fn.modal = old
    return this
  }


  // MODAL DATA-API
  // ==============

  $(document).on('click.bs.modal.data-api', '[data-toggle="modal"]', function (e) {
    var $this   = $(this)
    var href    = $this.attr('href')
    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\s]+$)/, ''))) // strip for ie7
    var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())

    if ($this.is('a')) e.preventDefault()

    $target.one('show.bs.modal', function (showEvent) {
      if (showEvent.isDefaultPrevented()) return // only register focus restorer if modal will actually get shown
      $target.one('hidden.bs.modal', function () {
        $this.is(':visible') && $this.trigger('focus')
      })
    })
    Plugin.call($target, option, this)
  })

}(jQuery);

/* ========================================================================
 * Bootstrap: tooltip.js v3.3.6
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // TOOLTIP PUBLIC CLASS DEFINITION
  // ===============================

  var Tooltip = function (element, options) {
    this.type       = null
    this.options    = null
    this.enabled    = null
    this.timeout    = null
    this.hoverState = null
    this.$element   = null
    this.inState    = null

    this.init('tooltip', element, options)
  }

  Tooltip.VERSION  = '3.3.6'

  Tooltip.TRANSITION_DURATION = 150

  Tooltip.DEFAULTS = {
    animation: true,
    placement: 'top',
    selector: false,
    template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
    trigger: 'hover focus',
    title: '',
    delay: 0,
    html: false,
    container: false,
    viewport: {
      selector: 'body',
      padding: 0
    }
  }

  Tooltip.prototype.init = function (type, element, options) {
    this.enabled   = true
    this.type      = type
    this.$element  = $(element)
    this.options   = this.getOptions(options)
    this.$viewport = this.options.viewport && $($.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : (this.options.viewport.selector || this.options.viewport))
    this.inState   = { click: false, hover: false, focus: false }

    if (this.$element[0] instanceof document.constructor && !this.options.selector) {
      throw new Error('`selector` option must be specified when initializing ' + this.type + ' on the window.document object!')
    }

    var triggers = this.options.trigger.split(' ')

    for (var i = triggers.length; i--;) {
      var trigger = triggers[i]

      if (trigger == 'click') {
        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))
      } else if (trigger != 'manual') {
        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'
        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'

        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))
        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))
      }
    }

    this.options.selector ?
      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :
      this.fixTitle()
  }

  Tooltip.prototype.getDefaults = function () {
    return Tooltip.DEFAULTS
  }

  Tooltip.prototype.getOptions = function (options) {
    options = $.extend({}, this.getDefaults(), this.$element.data(), options)

    if (options.delay && typeof options.delay == 'number') {
      options.delay = {
        show: options.delay,
        hide: options.delay
      }
    }

    return options
  }

  Tooltip.prototype.getDelegateOptions = function () {
    var options  = {}
    var defaults = this.getDefaults()

    this._options && $.each(this._options, function (key, value) {
      if (defaults[key] != value) options[key] = value
    })

    return options
  }

  Tooltip.prototype.enter = function (obj) {
    var self = obj instanceof this.constructor ?
      obj : $(obj.currentTarget).data('bs.' + this.type)

    if (!self) {
      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())
      $(obj.currentTarget).data('bs.' + this.type, self)
    }

    if (obj instanceof $.Event) {
      self.inState[obj.type == 'focusin' ? 'focus' : 'hover'] = true
    }

    if (self.tip().hasClass('in') || self.hoverState == 'in') {
      self.hoverState = 'in'
      return
    }

    clearTimeout(self.timeout)

    self.hoverState = 'in'

    if (!self.options.delay || !self.options.delay.show) return self.show()

    self.timeout = setTimeout(function () {
      if (self.hoverState == 'in') self.show()
    }, self.options.delay.show)
  }

  Tooltip.prototype.isInStateTrue = function () {
    for (var key in this.inState) {
      if (this.inState[key]) return true
    }

    return false
  }

  Tooltip.prototype.leave = function (obj) {
    var self = obj instanceof this.constructor ?
      obj : $(obj.currentTarget).data('bs.' + this.type)

    if (!self) {
      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())
      $(obj.currentTarget).data('bs.' + this.type, self)
    }

    if (obj instanceof $.Event) {
      self.inState[obj.type == 'focusout' ? 'focus' : 'hover'] = false
    }

    if (self.isInStateTrue()) return

    clearTimeout(self.timeout)

    self.hoverState = 'out'

    if (!self.options.delay || !self.options.delay.hide) return self.hide()

    self.timeout = setTimeout(function () {
      if (self.hoverState == 'out') self.hide()
    }, self.options.delay.hide)
  }

  Tooltip.prototype.show = function () {
    var e = $.Event('show.bs.' + this.type)

    if (this.hasContent() && this.enabled) {
      this.$element.trigger(e)

      var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0])
      if (e.isDefaultPrevented() || !inDom) return
      var that = this

      var $tip = this.tip()

      var tipId = this.getUID(this.type)

      this.setContent()
      $tip.attr('id', tipId)
      this.$element.attr('aria-describedby', tipId)

      if (this.options.animation) $tip.addClass('fade')

      var placement = typeof this.options.placement == 'function' ?
        this.options.placement.call(this, $tip[0], this.$element[0]) :
        this.options.placement

      var autoToken = /\s?auto?\s?/i
      var autoPlace = autoToken.test(placement)
      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'

      $tip
        .detach()
        .css({ top: 0, left: 0, display: 'block' })
        .addClass(placement)
        .data('bs.' + this.type, this)

      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)
      this.$element.trigger('inserted.bs.' + this.type)

      var pos          = this.getPosition()
      var actualWidth  = $tip[0].offsetWidth
      var actualHeight = $tip[0].offsetHeight

      if (autoPlace) {
        var orgPlacement = placement
        var viewportDim = this.getPosition(this.$viewport)

        placement = placement == 'bottom' && pos.bottom + actualHeight > viewportDim.bottom ? 'top'    :
                    placement == 'top'    && pos.top    - actualHeight < viewportDim.top    ? 'bottom' :
                    placement == 'right'  && pos.right  + actualWidth  > viewportDim.width  ? 'left'   :
                    placement == 'left'   && pos.left   - actualWidth  < viewportDim.left   ? 'right'  :
                    placement

        $tip
          .removeClass(orgPlacement)
          .addClass(placement)
      }

      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)

      this.applyPlacement(calculatedOffset, placement)

      var complete = function () {
        var prevHoverState = that.hoverState
        that.$element.trigger('shown.bs.' + that.type)
        that.hoverState = null

        if (prevHoverState == 'out') that.leave(that)
      }

      $.support.transition && this.$tip.hasClass('fade') ?
        $tip
          .one('bsTransitionEnd', complete)
          .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :
        complete()
    }
  }

  Tooltip.prototype.applyPlacement = function (offset, placement) {
    var $tip   = this.tip()
    var width  = $tip[0].offsetWidth
    var height = $tip[0].offsetHeight

    // manually read margins because getBoundingClientRect includes difference
    var marginTop = parseInt($tip.css('margin-top'), 10)
    var marginLeft = parseInt($tip.css('margin-left'), 10)

    // we must check for NaN for ie 8/9
    if (isNaN(marginTop))  marginTop  = 0
    if (isNaN(marginLeft)) marginLeft = 0

    offset.top  += marginTop
    offset.left += marginLeft

    // $.fn.offset doesn't round pixel values
    // so we use setOffset directly with our own function B-0
    $.offset.setOffset($tip[0], $.extend({
      using: function (props) {
        $tip.css({
          top: Math.round(props.top),
          left: Math.round(props.left)
        })
      }
    }, offset), 0)

    $tip.addClass('in')

    // check to see if placing tip in new offset caused the tip to resize itself
    var actualWidth  = $tip[0].offsetWidth
    var actualHeight = $tip[0].offsetHeight

    if (placement == 'top' && actualHeight != height) {
      offset.top = offset.top + height - actualHeight
    }

    var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight)

    if (delta.left) offset.left += delta.left
    else offset.top += delta.top

    var isVertical          = /top|bottom/.test(placement)
    var arrowDelta          = isVertical ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight
    var arrowOffsetPosition = isVertical ? 'offsetWidth' : 'offsetHeight'

    $tip.offset(offset)
    this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], isVertical)
  }

  Tooltip.prototype.replaceArrow = function (delta, dimension, isVertical) {
    this.arrow()
      .css(isVertical ? 'left' : 'top', 50 * (1 - delta / dimension) + '%')
      .css(isVertical ? 'top' : 'left', '')
  }

  Tooltip.prototype.setContent = function () {
    var $tip  = this.tip()
    var title = this.getTitle()

    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)
    $tip.removeClass('fade in top bottom left right')
  }

  Tooltip.prototype.hide = function (callback) {
    var that = this
    var $tip = $(this.$tip)
    var e    = $.Event('hide.bs.' + this.type)

    function complete() {
      if (that.hoverState != 'in') $tip.detach()
      that.$element
        .removeAttr('aria-describedby')
        .trigger('hidden.bs.' + that.type)
      callback && callback()
    }

    this.$element.trigger(e)

    if (e.isDefaultPrevented()) return

    $tip.removeClass('in')

    $.support.transition && $tip.hasClass('fade') ?
      $tip
        .one('bsTransitionEnd', complete)
        .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :
      complete()

    this.hoverState = null

    return this
  }

  Tooltip.prototype.fixTitle = function () {
    var $e = this.$element
    if ($e.attr('title') || typeof $e.attr('data-original-title') != 'string') {
      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')
    }
  }

  Tooltip.prototype.hasContent = function () {
    return this.getTitle()
  }

  Tooltip.prototype.getPosition = function ($element) {
    $element   = $element || this.$element

    var el     = $element[0]
    var isBody = el.tagName == 'BODY'

    var elRect    = el.getBoundingClientRect()
    if (elRect.width == null) {
      // width and height are missing in IE8, so compute them manually; see https://github.com/twbs/bootstrap/issues/14093
      elRect = $.extend({}, elRect, { width: elRect.right - elRect.left, height: elRect.bottom - elRect.top })
    }
    var elOffset  = isBody ? { top: 0, left: 0 } : $element.offset()
    var scroll    = { scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop() }
    var outerDims = isBody ? { width: $(window).width(), height: $(window).height() } : null

    return $.extend({}, elRect, scroll, outerDims, elOffset)
  }

  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {
    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2 } :
           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2 } :
           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :
        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width }

  }

  Tooltip.prototype.getViewportAdjustedDelta = function (placement, pos, actualWidth, actualHeight) {
    var delta = { top: 0, left: 0 }
    if (!this.$viewport) return delta

    var viewportPadding = this.options.viewport && this.options.viewport.padding || 0
    var viewportDimensions = this.getPosition(this.$viewport)

    if (/right|left/.test(placement)) {
      var topEdgeOffset    = pos.top - viewportPadding - viewportDimensions.scroll
      var bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight
      if (topEdgeOffset < viewportDimensions.top) { // top overflow
        delta.top = viewportDimensions.top - topEdgeOffset
      } else if (bottomEdgeOffset > viewportDimensions.top + viewportDimensions.height) { // bottom overflow
        delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset
      }
    } else {
      var leftEdgeOffset  = pos.left - viewportPadding
      var rightEdgeOffset = pos.left + viewportPadding + actualWidth
      if (leftEdgeOffset < viewportDimensions.left) { // left overflow
        delta.left = viewportDimensions.left - leftEdgeOffset
      } else if (rightEdgeOffset > viewportDimensions.right) { // right overflow
        delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset
      }
    }

    return delta
  }

  Tooltip.prototype.getTitle = function () {
    var title
    var $e = this.$element
    var o  = this.options

    title = $e.attr('data-original-title')
      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)

    return title
  }

  Tooltip.prototype.getUID = function (prefix) {
    do prefix += ~~(Math.random() * 1000000)
    while (document.getElementById(prefix))
    return prefix
  }

  Tooltip.prototype.tip = function () {
    if (!this.$tip) {
      this.$tip = $(this.options.template)
      if (this.$tip.length != 1) {
        throw new Error(this.type + ' `template` option must consist of exactly 1 top-level element!')
      }
    }
    return this.$tip
  }

  Tooltip.prototype.arrow = function () {
    return (this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow'))
  }

  Tooltip.prototype.enable = function () {
    this.enabled = true
  }

  Tooltip.prototype.disable = function () {
    this.enabled = false
  }

  Tooltip.prototype.toggleEnabled = function () {
    this.enabled = !this.enabled
  }

  Tooltip.prototype.toggle = function (e) {
    var self = this
    if (e) {
      self = $(e.currentTarget).data('bs.' + this.type)
      if (!self) {
        self = new this.constructor(e.currentTarget, this.getDelegateOptions())
        $(e.currentTarget).data('bs.' + this.type, self)
      }
    }

    if (e) {
      self.inState.click = !self.inState.click
      if (self.isInStateTrue()) self.enter(self)
      else self.leave(self)
    } else {
      self.tip().hasClass('in') ? self.leave(self) : self.enter(self)
    }
  }

  Tooltip.prototype.destroy = function () {
    var that = this
    clearTimeout(this.timeout)
    this.hide(function () {
      that.$element.off('.' + that.type).removeData('bs.' + that.type)
      if (that.$tip) {
        that.$tip.detach()
      }
      that.$tip = null
      that.$arrow = null
      that.$viewport = null
    })
  }


  // TOOLTIP PLUGIN DEFINITION
  // =========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.tooltip')
      var options = typeof option == 'object' && option

      if (!data && /destroy|hide/.test(option)) return
      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.tooltip

  $.fn.tooltip             = Plugin
  $.fn.tooltip.Constructor = Tooltip


  // TOOLTIP NO CONFLICT
  // ===================

  $.fn.tooltip.noConflict = function () {
    $.fn.tooltip = old
    return this
  }

}(jQuery);

/* ========================================================================
 * Bootstrap: popover.js v3.3.6
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // POPOVER PUBLIC CLASS DEFINITION
  // ===============================

  var Popover = function (element, options) {
    this.init('popover', element, options)
  }

  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')

  Popover.VERSION  = '3.3.6'

  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {
    placement: 'right',
    trigger: 'click',
    content: '',
    template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
  })


  // NOTE: POPOVER EXTENDS tooltip.js
  // ================================

  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)

  Popover.prototype.constructor = Popover

  Popover.prototype.getDefaults = function () {
    return Popover.DEFAULTS
  }

  Popover.prototype.setContent = function () {
    var $tip    = this.tip()
    var title   = this.getTitle()
    var content = this.getContent()

    $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)
    $tip.find('.popover-content').children().detach().end()[ // we use append for html objects to maintain js events
      this.options.html ? (typeof content == 'string' ? 'html' : 'append') : 'text'
    ](content)

    $tip.removeClass('fade top bottom left right in')

    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do
    // this manually by checking the contents.
    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()
  }

  Popover.prototype.hasContent = function () {
    return this.getTitle() || this.getContent()
  }

  Popover.prototype.getContent = function () {
    var $e = this.$element
    var o  = this.options

    return $e.attr('data-content')
      || (typeof o.content == 'function' ?
            o.content.call($e[0]) :
            o.content)
  }

  Popover.prototype.arrow = function () {
    return (this.$arrow = this.$arrow || this.tip().find('.arrow'))
  }


  // POPOVER PLUGIN DEFINITION
  // =========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.popover')
      var options = typeof option == 'object' && option

      if (!data && /destroy|hide/.test(option)) return
      if (!data) $this.data('bs.popover', (data = new Popover(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.popover

  $.fn.popover             = Plugin
  $.fn.popover.Constructor = Popover


  // POPOVER NO CONFLICT
  // ===================

  $.fn.popover.noConflict = function () {
    $.fn.popover = old
    return this
  }

}(jQuery);

/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.6
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // SCROLLSPY CLASS DEFINITION
  // ==========================

  function ScrollSpy(element, options) {
    this.$body          = $(document.body)
    this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)
    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
    this.selector       = (this.options.target || '') + ' .nav li > a'
    this.offsets        = []
    this.targets        = []
    this.activeTarget   = null
    this.scrollHeight   = 0

    this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))
    this.refresh()
    this.process()
  }

  ScrollSpy.VERSION  = '3.3.6'

  ScrollSpy.DEFAULTS = {
    offset: 10
  }

  ScrollSpy.prototype.getScrollHeight = function () {
    return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
  }

  ScrollSpy.prototype.refresh = function () {
    var that          = this
    var offsetMethod  = 'offset'
    var offsetBase    = 0

    this.offsets      = []
    this.targets      = []
    this.scrollHeight = this.getScrollHeight()

    if (!$.isWindow(this.$scrollElement[0])) {
      offsetMethod = 'position'
      offsetBase   = this.$scrollElement.scrollTop()
    }

    this.$body
      .find(this.selector)
      .map(function () {
        var $el   = $(this)
        var href  = $el.data('target') || $el.attr('href')
        var $href = /^#./.test(href) && $(href)

        return ($href
          && $href.length
          && $href.is(':visible')
          && [[$href[offsetMethod]().top + offsetBase, href]]) || null
      })
      .sort(function (a, b) { return a[0] - b[0] })
      .each(function () {
        that.offsets.push(this[0])
        that.targets.push(this[1])
      })
  }

  ScrollSpy.prototype.process = function () {
    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
    var scrollHeight = this.getScrollHeight()
    var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()
    var offsets      = this.offsets
    var targets      = this.targets
    var activeTarget = this.activeTarget
    var i

    if (this.scrollHeight != scrollHeight) {
      this.refresh()
    }

    if (scrollTop >= maxScroll) {
      return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)
    }

    if (activeTarget && scrollTop < offsets[0]) {
      this.activeTarget = null
      return this.clear()
    }

    for (i = offsets.length; i--;) {
      activeTarget != targets[i]
        && scrollTop >= offsets[i]
        && (offsets[i + 1] === undefined || scrollTop < offsets[i + 1])
        && this.activate(targets[i])
    }
  }

  ScrollSpy.prototype.activate = function (target) {
    this.activeTarget = target

    this.clear()

    var selector = this.selector +
      '[data-target="' + target + '"],' +
      this.selector + '[href="' + target + '"]'

    var active = $(selector)
      .parents('li')
      .addClass('active')

    if (active.parent('.dropdown-menu').length) {
      active = active
        .closest('li.dropdown')
        .addClass('active')
    }

    active.trigger('activate.bs.scrollspy')
  }

  ScrollSpy.prototype.clear = function () {
    $(this.selector)
      .parentsUntil(this.options.target, '.active')
      .removeClass('active')
  }


  // SCROLLSPY PLUGIN DEFINITION
  // ===========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.scrollspy')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.scrollspy

  $.fn.scrollspy             = Plugin
  $.fn.scrollspy.Constructor = ScrollSpy


  // SCROLLSPY NO CONFLICT
  // =====================

  $.fn.scrollspy.noConflict = function () {
    $.fn.scrollspy = old
    return this
  }


  // SCROLLSPY DATA-API
  // ==================

  $(window).on('load.bs.scrollspy.data-api', function () {
    $('[data-spy="scroll"]').each(function () {
      var $spy = $(this)
      Plugin.call($spy, $spy.data())
    })
  })

}(jQuery);

/* ========================================================================
 * Bootstrap: tab.js v3.3.6
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // TAB CLASS DEFINITION
  // ====================

  var Tab = function (element) {
    // jscs:disable requireDollarBeforejQueryAssignment
    this.element = $(element)
    // jscs:enable requireDollarBeforejQueryAssignment
  }

  Tab.VERSION = '3.3.6'

  Tab.TRANSITION_DURATION = 150

  Tab.prototype.show = function () {
    var $this    = this.element
    var $ul      = $this.closest('ul:not(.dropdown-menu)')
    var selector = $this.data('target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    if ($this.parent('li').hasClass('active')) return

    var $previous = $ul.find('.active:last a')
    var hideEvent = $.Event('hide.bs.tab', {
      relatedTarget: $this[0]
    })
    var showEvent = $.Event('show.bs.tab', {
      relatedTarget: $previous[0]
    })

    $previous.trigger(hideEvent)
    $this.trigger(showEvent)

    if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) return

    var $target = $(selector)

    this.activate($this.closest('li'), $ul)
    this.activate($target, $target.parent(), function () {
      $previous.trigger({
        type: 'hidden.bs.tab',
        relatedTarget: $this[0]
      })
      $this.trigger({
        type: 'shown.bs.tab',
        relatedTarget: $previous[0]
      })
    })
  }

  Tab.prototype.activate = function (element, container, callback) {
    var $active    = container.find('> .active')
    var transition = callback
      && $.support.transition
      && ($active.length && $active.hasClass('fade') || !!container.find('> .fade').length)

    function next() {
      $active
        .removeClass('active')
        .find('> .dropdown-menu > .active')
          .removeClass('active')
        .end()
        .find('[data-toggle="tab"]')
          .attr('aria-expanded', false)

      element
        .addClass('active')
        .find('[data-toggle="tab"]')
          .attr('aria-expanded', true)

      if (transition) {
        element[0].offsetWidth // reflow for transition
        element.addClass('in')
      } else {
        element.removeClass('fade')
      }

      if (element.parent('.dropdown-menu').length) {
        element
          .closest('li.dropdown')
            .addClass('active')
          .end()
          .find('[data-toggle="tab"]')
            .attr('aria-expanded', true)
      }

      callback && callback()
    }

    $active.length && transition ?
      $active
        .one('bsTransitionEnd', next)
        .emulateTransitionEnd(Tab.TRANSITION_DURATION) :
      next()

    $active.removeClass('in')
  }


  // TAB PLUGIN DEFINITION
  // =====================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.tab')

      if (!data) $this.data('bs.tab', (data = new Tab(this)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.tab

  $.fn.tab             = Plugin
  $.fn.tab.Constructor = Tab


  // TAB NO CONFLICT
  // ===============

  $.fn.tab.noConflict = function () {
    $.fn.tab = old
    return this
  }


  // TAB DATA-API
  // ============

  var clickHandler = function (e) {
    e.preventDefault()
    Plugin.call($(this), 'show')
  }

  $(document)
    .on('click.bs.tab.data-api', '[data-toggle="tab"]', clickHandler)
    .on('click.bs.tab.data-api', '[data-toggle="pill"]', clickHandler)

}(jQuery);

/* ========================================================================
 * Bootstrap: affix.js v3.3.6
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // AFFIX CLASS DEFINITION
  // ======================

  var Affix = function (element, options) {
    this.options = $.extend({}, Affix.DEFAULTS, options)

    this.$target = $(this.options.target)
      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))
      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))

    this.$element     = $(element)
    this.affixed      = null
    this.unpin        = null
    this.pinnedOffset = null

    this.checkPosition()
  }

  Affix.VERSION  = '3.3.6'

  Affix.RESET    = 'affix affix-top affix-bottom'

  Affix.DEFAULTS = {
    offset: 0,
    target: window
  }

  Affix.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {
    var scrollTop    = this.$target.scrollTop()
    var position     = this.$element.offset()
    var targetHeight = this.$target.height()

    if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false

    if (this.affixed == 'bottom') {
      if (offsetTop != null) return (scrollTop + this.unpin <= position.top) ? false : 'bottom'
      return (scrollTop + targetHeight <= scrollHeight - offsetBottom) ? false : 'bottom'
    }

    var initializing   = this.affixed == null
    var colliderTop    = initializing ? scrollTop : position.top
    var colliderHeight = initializing ? targetHeight : height

    if (offsetTop != null && scrollTop <= offsetTop) return 'top'
    if (offsetBottom != null && (colliderTop + colliderHeight >= scrollHeight - offsetBottom)) return 'bottom'

    return false
  }

  Affix.prototype.getPinnedOffset = function () {
    if (this.pinnedOffset) return this.pinnedOffset
    this.$element.removeClass(Affix.RESET).addClass('affix')
    var scrollTop = this.$target.scrollTop()
    var position  = this.$element.offset()
    return (this.pinnedOffset = position.top - scrollTop)
  }

  Affix.prototype.checkPositionWithEventLoop = function () {
    setTimeout($.proxy(this.checkPosition, this), 1)
  }

  Affix.prototype.checkPosition = function () {
    if (!this.$element.is(':visible')) return

    var height       = this.$element.height()
    var offset       = this.options.offset
    var offsetTop    = offset.top
    var offsetBottom = offset.bottom
    var scrollHeight = Math.max($(document).height(), $(document.body).height())

    if (typeof offset != 'object')         offsetBottom = offsetTop = offset
    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)
    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)

    var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom)

    if (this.affixed != affix) {
      if (this.unpin != null) this.$element.css('top', '')

      var affixType = 'affix' + (affix ? '-' + affix : '')
      var e         = $.Event(affixType + '.bs.affix')

      this.$element.trigger(e)

      if (e.isDefaultPrevented()) return

      this.affixed = affix
      this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null

      this.$element
        .removeClass(Affix.RESET)
        .addClass(affixType)
        .trigger(affixType.replace('affix', 'affixed') + '.bs.affix')
    }

    if (affix == 'bottom') {
      this.$element.offset({
        top: scrollHeight - height - offsetBottom
      })
    }
  }


  // AFFIX PLUGIN DEFINITION
  // =======================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.affix')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.affix

  $.fn.affix             = Plugin
  $.fn.affix.Constructor = Affix


  // AFFIX NO CONFLICT
  // =================

  $.fn.affix.noConflict = function () {
    $.fn.affix = old
    return this
  }


  // AFFIX DATA-API
  // ==============

  $(window).on('load', function () {
    $('[data-spy="affix"]').each(function () {
      var $spy = $(this)
      var data = $spy.data()

      data.offset = data.offset || {}

      if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom
      if (data.offsetTop    != null) data.offset.top    = data.offsetTop

      Plugin.call($spy, data)
    })
  })

}(jQuery);


(function(){function o(n){var i=e;n&&(e[n]||(e[n]={}),i=e[n]);if(!i.define||!i.define.packaged)t.original=i.define,i.define=t,i.define.packaged=!0;if(!i.require||!i.require.packaged)r.original=i.require,i.require=r,i.require.packaged=!0}var ACE_NAMESPACE="",e=function(){return this}();!e&&typeof window!="undefined"&&(e=window);if(!ACE_NAMESPACE&&typeof requirejs!="undefined")return;var t=function(e,n,r){if(typeof e!="string"){t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(r=n),t.modules[e]||(t.payloads[e]=r,t.modules[e]=null)};t.modules={},t.payloads={};var n=function(e,t,n){if(typeof t=="string"){var i=s(e,t);if(i!=undefined)return n&&n(),i}else if(Object.prototype.toString.call(t)==="[object Array]"){var o=[];for(var u=0,a=t.length;u<a;++u){var f=s(e,t[u]);if(f==undefined&&r.original)return;o.push(f)}return n&&n.apply(null,o)||!0}},r=function(e,t){var i=n("",e,t);return i==undefined&&r.original?r.original.apply(this,arguments):i},i=function(e,t){if(t.indexOf("!")!==-1){var n=t.split("!");return i(e,n[0])+"!"+i(e,n[1])}if(t.charAt(0)=="."){var r=e.split("/").slice(0,-1).join("/");t=r+"/"+t;while(t.indexOf(".")!==-1&&s!=t){var s=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},s=function(e,r){r=i(e,r);var s=t.modules[r];if(!s){s=t.payloads[r];if(typeof s=="function"){var o={},u={id:r,uri:"",exports:o,packaged:!0},a=function(e,t){return n(r,e,t)},f=s(a,o,u);o=f||u.exports,t.modules[r]=o,delete t.payloads[r]}s=t.modules[r]=o||s}return s};o(ACE_NAMESPACE)})(),define("ace/lib/regexp",["require","exports","module"],function(e,t,n){"use strict";function o(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function u(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var r=n||0;r<e.length;r++)if(e[r]===t)return r;return-1}var r={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},i=r.exec.call(/()??/,"")[1]===undefined,s=function(){var e=/^/g;return r.test.call(e,""),!e.lastIndex}();if(s&&i)return;RegExp.prototype.exec=function(e){var t=r.exec.apply(this,arguments),n,a;if(typeof e=="string"&&t){!i&&t.length>1&&u(t,"")>-1&&(a=RegExp(this.source,r.replace.call(o(this),"g","")),r.replace.call(e.slice(t.index),a,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===undefined&&(t[e]=undefined)}));if(this._xregexp&&this._xregexp.captureNames)for(var f=1;f<t.length;f++)n=this._xregexp.captureNames[f-1],n&&(t[n]=t[f]);!s&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--}return t},s||(RegExp.prototype.test=function(e){var t=r.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t})}),define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function r(){}function w(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function H(e){return e=+e,e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function B(e){var t=typeof e;return e===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function j(e){var t,n,r;if(B(e))return e;n=e.valueOf;if(typeof n=="function"){t=n.call(e);if(B(t))return t}r=e.toString;if(typeof r=="function"){t=r.call(e);if(B(t))return t}throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=u.call(arguments,1),s=function(){if(this instanceof s){var e=n.apply(this,i.concat(u.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(u.call(arguments)))};return n.prototype&&(r.prototype=n.prototype,s.prototype=new r,r.prototype=null),s});var i=Function.prototype.call,s=Array.prototype,o=Object.prototype,u=s.slice,a=i.bind(o.toString),f=i.bind(o.hasOwnProperty),l,c,h,p,d;if(d=f(o,"__defineGetter__"))l=i.bind(o.__defineGetter__),c=i.bind(o.__defineSetter__),h=i.bind(o.__lookupGetter__),p=i.bind(o.__lookupSetter__);if([1,2].splice(0).length!=2)if(!function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t=[],n;t.splice.apply(t,e(20)),t.splice.apply(t,e(26)),n=t.length,t.splice(5,0,"XXX"),n+1==t.length;if(n+1==t.length)return!0}())Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):e==void 0?e=0:e<0&&(e=Math.max(n+e,0)),e+t<n||(t=n-e);var r=this.slice(e,e+t),i=u.call(arguments,2),s=i.length;if(e===n)s&&this.push.apply(this,i);else{var o=Math.min(t,n-e),a=e+o,f=a+s-o,l=n-a,c=n-o;if(f<a)for(var h=0;h<l;++h)this[f+h]=this[a+h];else if(f>a)for(h=l;h--;)this[f+h]=this[a+h];if(s&&e===c)this.length=c,this.push.apply(this,i);else{this.length=c+s;for(h=0;h<s;++h)this[e+h]=i[h]}}return r};else{var v=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?v.apply(this,[e===void 0?0:e,t===void 0?this.length-e:t].concat(u.call(arguments,2))):[]}}Array.isArray||(Array.isArray=function(t){return a(t)=="[object Array]"});var m=Object("a"),g=m[0]!="a"||!(0 in m);Array.prototype.forEach||(Array.prototype.forEach=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=arguments[1],s=-1,o=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError;while(++s<o)s in r&&t.call(i,r[s],s,n)}),Array.prototype.map||(Array.prototype.map=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=Array(i),o=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var u=0;u<i;u++)u in r&&(s[u]=t.call(o,r[u],u,n));return s}),Array.prototype.filter||(Array.prototype.filter=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=[],o,u=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var f=0;f<i;f++)f in r&&(o=r[f],t.call(u,o,f,n)&&s.push(o));return s}),Array.prototype.every||(Array.prototype.every=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&!t.call(s,r[o],o,n))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&t.call(s,r[o],o,n))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!i&&arguments.length==1)throw new TypeError("reduce of empty array with no initial value");var s=0,o;if(arguments.length>=2)o=arguments[1];else do{if(s in r){o=r[s++];break}if(++s>=i)throw new TypeError("reduce of empty array with no initial value")}while(!0);for(;s<i;s++)s in r&&(o=t.call(void 0,o,r[s],s,n));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!i&&arguments.length==1)throw new TypeError("reduceRight of empty array with no initial value");var s,o=i-1;if(arguments.length>=2)s=arguments[1];else do{if(o in r){s=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}while(!0);do o in this&&(s=t.call(void 0,s,r[o],o,n));while(o--);return s});if(!Array.prototype.indexOf||[0,1].indexOf(1,2)!=-1)Array.prototype.indexOf=function(t){var n=g&&a(this)=="[object String]"?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=0;arguments.length>1&&(i=H(arguments[1])),i=i>=0?i:Math.max(0,r+i);for(;i<r;i++)if(i in n&&n[i]===t)return i;return-1};if(!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!=-1)Array.prototype.lastIndexOf=function(t){var n=g&&a(this)=="[object String]"?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=r-1;arguments.length>1&&(i=Math.min(i,H(arguments[1]))),i=i>=0?i:r-Math.abs(i);for(;i>=0;i--)if(i in n&&t===n[i])return i;return-1};Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:o)});if(!Object.getOwnPropertyDescriptor){var y="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,n){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(y+t);if(!f(t,n))return;var r,i,s;r={enumerable:!0,configurable:!0};if(d){var u=t.__proto__;t.__proto__=o;var i=h(t,n),s=p(t,n);t.__proto__=u;if(i||s)return i&&(r.get=i),s&&(r.set=s),r}return r.value=t[n],r}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)});if(!Object.create){var b;Object.prototype.__proto__===null?b=function(){return{__proto__:null}}:b=function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(t,n){var r;if(t===null)r=b();else{if(typeof t!="object")throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,r=new i,r.__proto__=t}return n!==void 0&&Object.defineProperties(r,n),r}}if(Object.defineProperty){var E=w({}),S=typeof document=="undefined"||w(document.createElement("div"));if(!E||!S)var x=Object.defineProperty}if(!Object.defineProperty||x){var T="Property description must be an object: ",N="Object.defineProperty called on non-object: ",C="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,n,r){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(N+t);if(typeof r!="object"&&typeof r!="function"||r===null)throw new TypeError(T+r);if(x)try{return x.call(Object,t,n,r)}catch(i){}if(f(r,"value"))if(d&&(h(t,n)||p(t,n))){var s=t.__proto__;t.__proto__=o,delete t[n],t[n]=r.value,t.__proto__=s}else t[n]=r.value;else{if(!d)throw new TypeError(C);f(r,"get")&&l(t,n,r.get),f(r,"set")&&c(t,n,r.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,n){for(var r in n)f(n,r)&&Object.defineProperty(t,r,n[r]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(k){Object.freeze=function(t){return function(n){return typeof n=="function"?n:t(n)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;var n="";while(f(t,n))n+="?";t[n]=!0;var r=f(t,n);return delete t[n],r});if(!Object.keys){var L=!0,A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],O=A.length;for(var M in{toString:null})L=!1;Object.keys=function I(e){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError("Object.keys called on a non-object");var I=[];for(var t in e)f(e,t)&&I.push(t);if(L)for(var n=0,r=O;n<r;n++){var i=A[n];f(e,i)&&I.push(i)}return I}}Date.now||(Date.now=function(){return(new Date).getTime()});var _="	\n\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim||_.trim()){_="["+_+"]";var D=new RegExp("^"+_+_+"*"),P=new RegExp(_+_+"*$");String.prototype.trim=function(){return String(this).replace(D,"").replace(P,"")}}var F=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e,t,n){"use strict";e("./regexp"),e("./es5-shim")}),define("ace/lib/dom",["require","exports","module"],function(e,t,n){"use strict";var r="http://www.w3.org/1999/xhtml";t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||r,e):document.createElement(e)},t.hasCssClass=function(e,t){var n=(e.className||"").split(/\s+/g);return n.indexOf(t)!==-1},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){var n=e.className.split(/\s+/g);for(;;){var r=n.indexOf(t);if(r==-1)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){var n=e.className.split(/\s+/g),r=!0;for(;;){var i=n.indexOf(t);if(i==-1)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n=0,r;t=t||document;if(t.createStyleSheet&&(r=t.styleSheets)){while(n<r.length)if(r[n++].owningElement.id===e)return!0}else if(r=t.getElementsByTagName("style"))while(n<r.length)if(r[n++].id===e)return!0;return!1},t.importCssString=function(n,r,i){i=i||document;if(r&&t.hasCssString(r,i))return null;var s;r&&(n+="\n/*# sourceURL=ace/css/"+r+" */"),i.createStyleSheet?(s=i.createStyleSheet(),s.cssText=n,r&&(s.owningElement.id=r)):(s=t.createElement("style"),s.appendChild(i.createTextNode(n)),r&&(s.id=r),t.getDocumentHead(i).appendChild(s))},t.importCssStylsheet=function(e,n){if(n.createStyleSheet)n.createStyleSheet(e);else{var r=t.createElement("link");r.rel="stylesheet",r.href=e,t.getDocumentHead(n).appendChild(r)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var s=e.documentElement;s.appendChild(r);var o=n.offsetWidth;i.overflow="scroll";var u=n.offsetWidth;return o==u&&(u=r.clientWidth),s.removeChild(r),o-u};if(typeof document=="undefined"){t.importCssString=function(){};return}window.pageYOffset!==undefined?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?t.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:t.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.setInnerHtml=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},"textContent"in document.documentElement?(t.setInnerText=function(e,t){e.textContent=t},t.getInnerText=function(e){return e.textContent}):(t.setInnerText=function(e,t){e.innerText=t},t.getInnerText=function(e){return e.innerText}),t.getParentWindow=function(e){return e.defaultView||e.parentWindow}}),define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(e,t,n){"use strict";e("./fixoldbrowsers");var r=e("./oop"),i=function(){var e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},t,n;for(n in e.FUNCTION_KEYS)t=e.FUNCTION_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);for(n in e.PRINTABLE_KEYS)t=e.PRINTABLE_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);return r.mixin(e,e.MODIFIER_KEYS),r.mixin(e,e.PRINTABLE_KEYS),r.mixin(e,e.FUNCTION_KEYS),e.enter=e["return"],e.escape=e.esc,e.del=e["delete"],e[173]="-",function(){var t=["cmd","ctrl","alt","shift"];for(var n=Math.pow(2,t.length);n--;)e.KEY_MODS[n]=t.filter(function(t){return n&e.KEY_MODS[t]}).join("-")+"-"}(),e.KEY_MODS[0]="",e.KEY_MODS[-1]="input-",e}();r.mixin(t,i),t.keyCodeToString=function(e){var t=i[e];return typeof t!="string"&&(t=String.fromCharCode(e)),t.toLowerCase()}}),define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};if(typeof navigator!="object")return;var r=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),i=navigator.userAgent;t.isWin=r=="win",t.isMac=r=="mac",t.isLinux=r=="linux",t.isIE=navigator.appName=="Microsoft Internet Explorer"||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((i.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((i.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=(window.Controllers||window.controllers)&&window.navigator.product==="Gecko",t.isOldGecko=t.isGecko&&parseInt((i.match(/rv\:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(i.split("WebKit/")[1])||undefined,t.isChrome=parseFloat(i.split(" Chrome/")[1])||undefined,t.isAIR=i.indexOf("AdobeAIR")>=0,t.isIPad=i.indexOf("iPad")>=0,t.isTouchPad=i.indexOf("TouchPad")>=0,t.isChromeOS=i.indexOf(" CrOS ")>=0}),define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function a(e,t,n){var a=u(t);if(!i.isMac&&s){s.OSKey&&(a|=8);if(s.altGr){if((3&a)==3)return;s.altGr=0}if(n===18||n===17){var f="location"in t?t.location:t.keyLocation;if(n===17&&f===1)s[n]==1&&(o=t.timeStamp);else if(n===18&&a===3&&f===2){var l=t.timeStamp-o;l<50&&(s.altGr=!0)}}}n in r.MODIFIER_KEYS&&(n=-1),a&8&&(n===91||n===92)&&(n=-1);if(!a&&n===13){var f="location"in t?t.location:t.keyLocation;if(f===3){e(t,a,-n);if(t.defaultPrevented)return}}if(i.isChromeOS&&a&8){e(t,a,n);if(t.defaultPrevented)return;a&=-9}return!!a||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS?e(t,a,n):!1}function f(){s=Object.create(null),s.count=0,s.lastT=0}var r=e("./keys"),i=e("./useragent"),s=null,o=0;t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var r=function(){n.call(e,window.event)};n._wrapper=r,e.attachEvent("on"+t,r)}},t.removeListener=function(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return e.type=="dblclick"?0:e.type=="contextmenu"||i.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,n,r){function i(e){n&&n(e),r&&r(e),t.removeListener(document,"mousemove",n,!0),t.removeListener(document,"mouseup",i,!0),t.removeListener(document,"dragstart",i,!0)}return t.addListener(document,"mousemove",n,!0),t.addListener(document,"mouseup",i,!0),t.addListener(document,"dragstart",i,!0),i},t.addTouchMoveListener=function(e,n){if("ontouchmove"in e){var r,i;t.addListener(e,"touchstart",function(e){var t=e.changedTouches[0];r=t.clientX,i=t.clientY}),t.addListener(e,"touchmove",function(e){var t=1,s=e.changedTouches[0];e.wheelX=-(s.clientX-r)/t,e.wheelY=-(s.clientY-i)/t,r=s.clientX,i=s.clientY,n(e)})}},t.addMouseWheelListener=function(e,n){"onmousewheel"in e?t.addListener(e,"mousewheel",function(e){var t=8;e.wheelDeltaX!==undefined?(e.wheelX=-e.wheelDeltaX/t,e.wheelY=-e.wheelDeltaY/t):(e.wheelX=0,e.wheelY=-e.wheelDelta/t),n(e)}):"onwheel"in e?t.addListener(e,"wheel",function(e){var t=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*t||0,e.wheelY=e.deltaY*t||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=(e.deltaX||0)*5,e.wheelY=(e.deltaY||0)*5}n(e)}):t.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=(e.detail||0)*5,e.wheelY=0):(e.wheelX=0,e.wheelY=(e.detail||0)*5),n(e)})},t.addMultiMouseDownListener=function(e,n,r,s){var o=0,u,a,f,l={2:"dblclick",3:"tripleclick",4:"quadclick"};t.addListener(e,"mousedown",function(e){t.getButton(e)!==0?o=0:e.detail>1?(o++,o>4&&(o=1)):o=1;if(i.isIE){var c=Math.abs(e.clientX-u)>5||Math.abs(e.clientY-a)>5;if(!f||c)o=1;f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600),o==1&&(u=e.clientX,a=e.clientY)}e._clicks=o,r[s]("mousedown",e);if(o>4)o=0;else if(o>1)return r[s](l[o],e)}),i.isOldIE&&t.addListener(e,"dblclick",function(e){o=2,f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600),r[s]("mousedown",e),r[s](l[o],e)})};var u=!i.isMac||!i.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};t.getModifierString=function(e){return r.KEY_MODS[u(e)]},t.addCommandKeyListener=function(e,n){var r=t.addListener;if(i.isOldGecko||i.isOpera&&!("KeyboardEvent"in window)){var o=null;r(e,"keydown",function(e){o=e.keyCode}),r(e,"keypress",function(e){return a(n,e,o)})}else{var u=null;r(e,"keydown",function(e){var t=e.keyCode;s[t]=(s[t]||0)+1,t==91||t==92?s.OSKey=!0:s.OSKey&&e.timeStamp-s.lastT>200&&s.count==1&&f(),s[t]==1&&s.count++,s.lastT=e.timeStamp;var r=a(n,e,t);return u=e.defaultPrevented,r}),r(e,"keypress",function(e){u&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),u=null)}),r(e,"keyup",function(e){var t=e.keyCode;s[t]?s.count=Math.max(s.count-1,0):f();if(t==91||t==92)s.OSKey=!1;s[t]=null}),s||(f(),r(window,"focus",f))}};if(typeof window=="object"&&window.postMessage&&!i.isOldIE){var l=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+l;t.addListener(n,"message",function i(s){s.data==r&&(t.stopPropagation(s),t.removeListener(n,"message",i),e())}),n.postMessage(r,"*")}}t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),define("ace/lib/lang",["require","exports","module"],function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){var n="";while(t>0){t&1&&(n+=e);if(t>>=1)e+=e}return n};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n]&&typeof e[n]=="object"?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function s(e){if(typeof e!="object"||!e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n++)t[n]=s(e[n]);return t}var r=e.constructor;if(r===RegExp)return e;t=r();for(var n in e)t[n]=s(e[n]);return t},t.arrayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){n==null&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=e("../lib/dom"),o=e("../lib/lang"),u=i.isChrome<18,a=i.isIE,f=function(e,t){function b(e){if(h)return;h=!0;if(k)t=0,r=e?0:n.value.length-1;else var t=e?2:1,r=2;try{n.setSelectionRange(t,r)}catch(i){}h=!1}function w(){if(h)return;n.value=f,i.isWebKit&&y.schedule()}function R(){clearTimeout(q),q=setTimeout(function(){p&&(n.style.cssText=p,p=""),t.renderer.$keepTextAreaAtCursor==null&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},i.isOldIE?200:0)}var n=s.createElement("textarea");n.className="ace_text-input",i.isTouchPad&&n.setAttribute("x-palm-disable-auto-cap",!0),n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",i.isOldIE&&(n.style.top="-1000px"),e.insertBefore(n,e.firstChild);var f="",l=!1,c=!1,h=!1,p="",d=!0;try{var v=document.activeElement===n}catch(m){}r.addListener(n,"blur",function(e){t.onBlur(e),v=!1}),r.addListener(n,"focus",function(e){v=!0,t.onFocus(e),b()}),this.focus=function(){if(p)return n.focus();var e=n.style.top;n.style.position="fixed",n.style.top="-1000px",n.focus(),setTimeout(function(){n.style.position="",n.style.top=="-1000px"&&(n.style.top=e)},0)},this.blur=function(){n.blur()},this.isFocused=function(){return v};var g=o.delayedCall(function(){v&&b(d)}),y=o.delayedCall(function(){h||(n.value=f,v&&b())});i.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=d&&(d=!d,g.schedule())}),w(),v&&t.onFocus();var E=function(e){return e.selectionStart===0&&e.selectionEnd===e.value.length};!n.setSelectionRange&&n.createTextRange&&(n.setSelectionRange=function(e,t){var n=this.createTextRange();n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select()},E=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.text==e.value});if(i.isOldIE){var S=!1,x=function(e){if(S)return;var t=n.value;if(h||!t||t==f)return;if(e&&t==f[0])return T.schedule();A(t),S=!0,w(),S=!1},T=o.delayedCall(x);r.addListener(n,"propertychange",x);var N={13:1,27:1};r.addListener(n,"keyup",function(e){h&&(!n.value||N[e.keyCode])&&setTimeout(F,0);if((n.value.charCodeAt(0)||0)<129)return T.call();h?j():B()}),r.addListener(n,"keydown",function(e){T.schedule(50)})}var C=function(e){l?l=!1:E(n)?(t.selectAll(),b()):k&&b(t.selection.isEmpty())},k=null;this.setInputHandler=function(e){k=e},this.getInputHandler=function(){return k};var L=!1,A=function(e){k&&(e=k(e),k=null),c?(b(),e&&t.onPaste(e),c=!1):e==f.charAt(0)?L?t.execCommand("del",{source:"ace"}):t.execCommand("backspace",{source:"ace"}):(e.substring(0,2)==f?e=e.substr(2):e.charAt(0)==f.charAt(0)?e=e.substr(1):e.charAt(e.length-1)==f.charAt(0)&&(e=e.slice(0,-1)),e.charAt(e.length-1)==f.charAt(0)&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),L&&(L=!1)},O=function(e){if(h)return;var t=n.value;A(t),w()},M=function(e,t){var n=e.clipboardData||window.clipboardData;if(!n||u)return;var r=a?"Text":"text/plain";return t?n.setData(r,t)!==!1:n.getData(r)},_=function(e,i){var s=t.getCopyText();if(!s)return r.preventDefault(e);M(e,s)?(i?t.onCut():t.onCopy(),r.preventDefault(e)):(l=!0,n.value=s,n.select(),setTimeout(function(){l=!1,w(),b(),i?t.onCut():t.onCopy()}))},D=function(e){_(e,!0)},P=function(e){_(e,!1)},H=function(e){var s=M(e);typeof s=="string"?(s&&t.onPaste(s,e),i.isIE&&setTimeout(b),r.preventDefault(e)):(n.value="",c=!0)};r.addCommandKeyListener(n,t.onCommandKey.bind(t)),r.addListener(n,"select",C),r.addListener(n,"input",O),r.addListener(n,"cut",D),r.addListener(n,"copy",P),r.addListener(n,"paste",H),(!("oncut"in n)||!("oncopy"in n)||!("onpaste"in n))&&r.addListener(e,"keydown",function(e){if(i.isMac&&!e.metaKey||!e.ctrlKey)return;switch(e.keyCode){case 67:P(e);break;case 86:H(e);break;case 88:D(e)}});var B=function(e){if(h||!t.onCompositionStart||t.$readOnly)return;h={},t.onCompositionStart(),setTimeout(j,0),t.on("mousedown",F),t.selection.isEmpty()||(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup()},j=function(){if(!h||!t.onCompositionUpdate||t.$readOnly)return;var e=n.value.replace(/\x01/g,"");if(h.lastValue===e)return;t.onCompositionUpdate(e),h.lastValue&&t.undo(),h.lastValue=e;if(h.lastValue){var r=t.selection.getRange();t.insert(h.lastValue),t.session.markUndoGroup(),h.range=t.selection.getRange(),t.selection.setRange(r),t.selection.clearSelection()}},F=function(e){if(!t.onCompositionEnd||t.$readOnly)return;var r=h;h=!1;var i=setTimeout(function(){i=null;var e=n.value.replace(/\x01/g,"");if(h)return;e==r.lastValue?w():!r.lastValue&&e&&(w(),A(e))});k=function(n){return i&&clearTimeout(i),n=n.replace(/\x01/g,""),n==r.lastValue?"":(r.lastValue&&i&&t.undo(),n)},t.onCompositionEnd(),t.removeListener("mousedown",F),e.type=="compositionend"&&r.range&&t.selection.setRange(r.range)},I=o.delayedCall(j,50);r.addListener(n,"compositionstart",B),i.isGecko?r.addListener(n,"text",function(){I.schedule()}):(r.addListener(n,"keyup",function(){I.schedule()}),r.addListener(n,"keydown",function(){I.schedule()})),r.addListener(n,"compositionend",F),this.getElement=function(){return n},this.setReadOnly=function(e){n.readOnly=e},this.onContextMenu=function(e){L=!0,b(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,o){if(!o&&i.isOldIE)return;p||(p=n.style.cssText),n.style.cssText=(o?"z-index:100000;":"")+"height:"+n.style.height+";"+(i.isIE?"opacity:0.1;":"");var u=t.container.getBoundingClientRect(),a=s.computedStyle(t.container),f=u.top+(parseInt(a.borderTopWidth)||0),l=u.left+(parseInt(u.borderLeftWidth)||0),c=u.bottom-f-n.clientHeight-2,h=function(e){n.style.left=e.clientX-l-2+"px",n.style.top=Math.min(e.clientY-f-2,c)+"px"};h(e);if(e.type!="mousedown")return;t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),i.isWin&&!i.isOldIE&&r.capture(t.container,h,R)},this.onContextMenuClose=R;var q,U=function(e){t.textInput.onContextMenu(e),R()};r.addListener(t.renderer.scroller,"contextmenu",U),r.addListener(n,"contextmenu",U)};t.TextInput=f}),define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function u(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e)),t.setDefaultHandler("touchmove",this.onTouchMove.bind(e));var n=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];n.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function a(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function f(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row==e.end.row-1&&!e.start.column&&!e.end.column)var n=t.column-4;else var n=2*t.row-e.start.row-e.end.row;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var r=e("../lib/dom"),i=e("../lib/event"),s=e("../lib/useragent"),o=0;(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var r=this.editor,i=e.getButton();if(i!==0){var s=r.getSelectionRange(),o=s.isEmpty();r.$blockScrolling++,o&&r.selection.moveToPosition(n),r.$blockScrolling--,r.textInput.onContextMenu(e.domEvent);return}this.mousedownEvent.time=Date.now();if(t&&!r.isFocused()){r.focus();if(this.$focusTimout&&!this.$clickSelection&&!r.inMultiSelectMode){this.setState("focusWait"),this.captureMouse(e);return}}return this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;n.$blockScrolling++,this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"),n.$blockScrolling--},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);t.$blockScrolling++;if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(r==-1)e=this.$clickSelection.end;else if(r==1)e=this.$clickSelection.start;else{var i=f(this.$clickSelection,n);n=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.$blockScrolling--,t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[e](r.row,r.column);n.$blockScrolling++;if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),o=this.$clickSelection.comparePoint(i.end);if(s==-1&&o<=0){t=this.$clickSelection.end;if(i.end.row!=r.row||i.end.column!=r.column)r=i.start}else if(o==1&&s>=0){t=this.$clickSelection.start;if(i.start.row!=r.row||i.start.column!=r.column)r=i.end}else if(s==-1&&o==1)r=i.end,t=i.start;else{var u=f(this.$clickSelection,r);r=u.cursor,t=u.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.$blockScrolling--,n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>o||t-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session,i=r.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var r=n.getSelectionRange();r.isMultiLine()&&r.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(r.start.row),this.$clickSelection.end=n.selection.getLineRange(r.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(e.getAccelKey())return;e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=e.domEvent.timeStamp,n=t-(this.$lastScrollTime||0),r=this.editor,i=r.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);if(i||n<200)return this.$lastScrollTime=t,r.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()},this.onTouchMove=function(e){var t=e.domEvent.timeStamp,n=t-(this.$lastScrollTime||0),r=this.editor,i=r.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);if(i||n<200)return this.$lastScrollTime=t,r.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()}}).call(u.prototype),t.DefaultHandlers=u}),define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){"use strict";function s(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}var r=e("./lib/oop"),i=e("./lib/dom");(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){i.setInnerText(this.getElement(),e)},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){i.addCssClass(this.getElement(),e)},this.show=function(e,t,n){e!=null&&this.setText(e),t!=null&&n!=null&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(s.prototype),t.Tooltip=s}),define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){"use strict";function u(e){function l(){var r=u.getDocumentPosition().row,s=n.$annotations[r];if(!s)return c();var o=t.session.getLength();if(r==o){var a=t.renderer.pixelToScreenCoordinates(0,u.y).row,l=u.$pos;if(a>t.session.documentToScreenRow(l.row,l.column))return c()}if(f==s)return;f=s.text.join("<br/>"),i.setHtml(f),i.show(),t.on("mousewheel",c);if(e.$tooltipFollowsMouse)h(u);else{var p=u.domEvent.target,d=p.getBoundingClientRect(),v=i.getElement().style;v.left=d.right+"px",v.top=d.bottom+"px"}}function c(){o&&(o=clearTimeout(o)),f&&(i.hide(),f=null,t.removeEventListener("mousewheel",c))}function h(e){i.setPosition(e.x,e.y)}var t=e.editor,n=t.renderer.$gutterLayer,i=new a(t.container);e.editor.setDefaultHandler("guttermousedown",function(r){if(!t.isFocused()||r.getButton()!=0)return;var i=n.getRegion(r);if(i=="foldWidgets")return;var s=r.getDocumentPosition().row,o=t.session.selection;if(r.getShiftKey())o.selectTo(s,0);else{if(r.domEvent.detail==2)return t.selectAll(),r.preventDefault();e.$clickSelection=t.selection.getLineRange(s)}return e.setState("selectByLines"),e.captureMouse(r),r.preventDefault()});var o,u,f;e.editor.setDefaultHandler("guttermousemove",function(t){var n=t.domEvent.target||t.domEvent.srcElement;if(r.hasCssClass(n,"ace_fold-widget"))return c();f&&e.$tooltipFollowsMouse&&h(t),u=t;if(o)return;o=setTimeout(function(){o=null,u&&!e.isMousePressed?l():c()},50)}),s.addListener(t.renderer.$gutter,"mouseout",function(e){u=null;if(!f||o)return;o=setTimeout(function(){o=null,c()},50)}),t.on("changeSession",c)}function a(e){o.call(this,e)}var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/event"),o=e("../tooltip").Tooltip;i.inherits(a,o),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),s=this.getHeight();e+=15,t+=15,e+i>n&&(e-=e+i-n),t+s>r&&(t-=20+s),o.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=u}),define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)}),define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function f(e){function T(e,n){var r=Date.now(),i=!n||e.row!=n.row,s=!n||e.column!=n.column;if(!S||i||s)t.$blockScrolling+=1,t.moveCursorToPosition(e),t.$blockScrolling-=1,S=r,x={x:p,y:d};else{var o=l(x.x,x.y,p,d);o>a?S=null:r-S>=u&&(t.renderer.scrollCursorIntoView(),S=null)}}function N(e,n){var r=Date.now(),i=t.renderer.layerConfig.lineHeight,s=t.renderer.layerConfig.characterWidth,u=t.renderer.scroller.getBoundingClientRect(),a={x:{left:p-u.left,right:u.right-p},y:{top:d-u.top,bottom:u.bottom-d}},f=Math.min(a.x.left,a.x.right),l=Math.min(a.y.top,a.y.bottom),c={row:e.row,column:e.column};f/s<=2&&(c.column+=a.x.left<a.x.right?-3:2),l/i<=1&&(c.row+=a.y.top<a.y.bottom?-1:1);var h=e.row!=c.row,v=e.column!=c.column,m=!n||e.row!=n.row;h||v&&!m?E?r-E>=o&&t.renderer.scrollCursorIntoView(c):E=r:E=null}function C(){var e=g;g=t.renderer.screenToTextCoordinates(p,d),T(g,e),N(g,e)}function k(){m=t.selection.toOrientedRange(),h=t.session.addMarker(m,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(v),C(),v=setInterval(C,20),y=0,i.addListener(document,"mousemove",O)}function L(){clearInterval(v),t.session.removeMarker(h),h=null,t.$blockScrolling+=1,t.selection.fromOrientedRange(m),t.$blockScrolling-=1,t.isFocused()&&!w&&t.renderer.$cursorLayer.setBlinking(!t.getReadOnly()),m=null,g=null,y=0,E=null,S=null,i.removeListener(document,"mousemove",O)}function O(){A==null&&(A=setTimeout(function(){A!=null&&h&&L()},20))}function M(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return e=="text/plain"||e=="Text"})}function _(e){var t=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],r=s.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return r&&t.indexOf(i)>=0?o="copy":n.indexOf(i)>=0?o="move":t.indexOf(i)>=0&&(o="copy"),o}var t=e.editor,n=r.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var f=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];f.forEach(function(t){e[t]=this[t]},this),t.addEventListener("mousedown",this.onMouseDown.bind(e));var c=t.container,h,p,d,v,m,g,y=0,b,w,E,S,x;this.onDragStart=function(e){if(this.cancelDrag||!c.draggable){var r=this;return setTimeout(function(){r.startSelect(),r.captureMouse(e)},0),e.preventDefault()}m=t.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=t.getReadOnly()?"copy":"copyMove",s.isOpera&&(t.container.appendChild(n),n.scrollTop=0),i.setDragImage&&i.setDragImage(n,0,0),s.isOpera&&t.container.removeChild(n),i.clearData(),i.setData("Text",t.session.getTextRange()),w=!0,this.setState("drag")},this.onDragEnd=function(e){c.draggable=!1,w=!1,this.setState(null);if(!t.getReadOnly()){var n=e.dataTransfer.dropEffect;!b&&n=="move"&&t.session.remove(t.getSelectionRange()),t.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return p=e.clientX,d=e.clientY,h||k(),y++,e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragOver=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return p=e.clientX,d=e.clientY,h||(k(),y++),A!==null&&(A=null),e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragLeave=function(e){y--;if(y<=0&&h)return L(),b=null,i.preventDefault(e)},this.onDrop=function(e){if(!g)return;var n=e.dataTransfer;if(w)switch(b){case"move":m.contains(g.row,g.column)?m={start:g,end:g}:m=t.moveText(m,g);break;case"copy":m=t.moveText(m,g,!0)}else{var r=n.getData("Text");m={start:g,end:t.session.insert(g,r)},t.focus(),b=null}return L(),i.preventDefault(e)},i.addListener(c,"dragstart",this.onDragStart.bind(e)),i.addListener(c,"dragend",this.onDragEnd.bind(e)),i.addListener(c,"dragenter",this.onDragEnter.bind(e)),i.addListener(c,"dragover",this.onDragOver.bind(e)),i.addListener(c,"dragleave",this.onDragLeave.bind(e)),i.addListener(c,"drop",this.onDrop.bind(e));var A=null}function l(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}var r=e("../lib/dom"),i=e("../lib/event"),s=e("../lib/useragent"),o=200,u=200,a=5;(function(){this.dragWait=function(){var e=Date.now()-this.mousedownEvent.time;e>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var e=this.editor.container;e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor,t=e.container;t.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var n=s.isWin?"default":"move";e.renderer.setCursorStyle(n),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;if(s.isIE&&this.state=="dragReady"){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&t.dragDrop()}if(this.state==="dragWait"){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(!this.$dragEnabled)return;this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),r=e.getButton(),i=e.domEvent.detail||1;if(i===1&&r===0&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;"unselectable"in o&&(o.unselectable="on");if(t.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var u=t.container;u.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}).call(f.prototype),t.DragdropHandler=f}),define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),i=document.createElement("script");i.src=e,n.appendChild(i),i.onload=i.onreadystatechange=function(e,n){if(n||!i.readyState||i.readyState=="loaded"||i.readyState=="complete")i=i.onload=i.onreadystatechange=null,n||t()}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var r={},i=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(!n.length&&!r)return;if(typeof t!="object"||!t)t={};t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=s),n=n.slice();for(var o=0;o<n.length;o++){n[o](t,this);if(t.propagationStopped)break}if(r&&!t.defaultPrevented)return r(t,this)},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(!n)return;n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)},r.once=function(e,t){var n=this;t&&this.addEventListener(e,function r(){n.removeEventListener(e,r),t.apply(null,arguments)})},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;n||(n=this._defaultHandlers={_disabled_:{}});if(n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var s=i.indexOf(t);s!=-1&&i.splice(s,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(!n)return;var r=n._disabled_[e];if(n[e]==t){var i=n[e];r&&this.setDefaultHandler(e,r.pop())}else if(r){var s=r.indexOf(t);s!=-1&&r.splice(s,1)}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),r.indexOf(t)==-1&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)return;var r=n.indexOf(t);r!==-1&&n.splice(r,1)},r.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=r}),define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"no use strict";function o(e){typeof console!="undefined"&&console.warn&&console.warn.apply(console,arguments)}function u(e,t){var n=new Error(e);n.data=t,typeof console=="object"&&console.error&&console.error(n),setTimeout(function(){throw n})}var r=e("./oop"),i=e("./event_emitter").EventEmitter,s={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]===t)return;var n=this.$options[e];if(!n)return o('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:o('misspelled option "'+e+'"')}},a=function(){this.$defaultOptions={}};(function(){r.implement(this,i),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach(function(t){var r=n[t];typeof r=="string"&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)}),r.implement(e,s),this},this.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},this.setDefaultValue=function(e,t,n){var r=this.$defaultOptions[e]||(this.$defaultOptions[e]={});r[t]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,t,n):r[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach(function(n){this.setDefaultValue(e,n,t[n])},this)},this.warn=o,this.reportError=u}).call(a.prototype),t.AppConfig=a}),define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(e,t,n){"no use strict";function f(r){a.packaged=r||e.packaged||n.packaged||u.define&&define.packaged;if(!u.document)return"";var i={},s="",o=document.currentScript||document._currentScript,f=o&&o.ownerDocument||document,c=f.getElementsByTagName("script");for(var h=0;h<c.length;h++){var p=c[h],d=p.src||p.getAttribute("src");if(!d)continue;var v=p.attributes;for(var m=0,g=v.length;m<g;m++){var y=v[m];y.name.indexOf("data-ace-")===0&&(i[l(y.name.replace(/^data-ace-/,""))]=y.value)}var b=d.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(s=b[1])}s&&(i.base=i.base||s,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var w in i)typeof i[w]!="undefined"&&t.set(w,i[w])}function l(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./lib/net"),o=e("./lib/app_config").AppConfig;n.exports=t=new o;var u=function(){return this||typeof window!="undefined"&&window}(),a={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};t.get=function(e){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return a[e]},t.set=function(e,t){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);a[e]=t},t.all=function(){return r.copyObject(a)},t.moduleUrl=function(e,t){if(a.$moduleUrls[e])return a.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var r=t=="snippets"?"/":"-",i=n[n.length-1];if(t=="worker"&&r=="-"){var s=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");i=i.replace(s,"")}(!i||i==t)&&n.length>1&&(i=n[n.length-2]);var o=a[t+"Path"];return o==null?o=a.basePath:r=="/"&&(t=r=""),o&&o.slice(-1)!="/"&&(o+="/"),o+t+r+i+this.get("suffix")},t.setModuleUrl=function(e,t){return a.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,r){var i,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{i=e(n)}catch(u){}if(i&&!t.$loading[n])return r&&r(i);t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r);if(t.$loading[n].length>1)return;var a=function(){e([n],function(e){t._emit("load.module",{name:n,module:e});var r=t.$loading[n];t.$loading[n]=null,r.forEach(function(t){t&&t(e)})})};if(!t.get("packaged"))return a();s.loadScript(t.moduleUrl(n,o),a)},t.init=f}),define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,f=e("../config"),l=function(e){var t=this;this.editor=e,new s(this),new o(this),new a(this);var n=function(t){(!document.hasFocus||!document.hasFocus())&&window.focus(),e.focus(),e.isFocused()||window.focus()},u=e.renderer.getMouseEventTarget();r.addListener(u,"click",this.onMouseEvent.bind(this,"click")),r.addListener(u,"mousemove",this.onMouseMove.bind(this,"mousemove")),r.addMultiMouseDownListener(u,[400,300,250],this,"onMouseEvent"),e.renderer.scrollBarV&&(r.addMultiMouseDownListener(e.renderer.scrollBarV.inner,[400,300,250],this,"onMouseEvent"),r.addMultiMouseDownListener(e.renderer.scrollBarH.inner,[400,300,250],this,"onMouseEvent"),i.isIE&&(r.addListener(e.renderer.scrollBarV.element,"mousedown",n),r.addListener(e.renderer.scrollBarH.element,"mousedown",n))),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel")),r.addTouchMoveListener(e.container,this.onTouchMove.bind(this,"touchmove"));var f=e.renderer.$gutter;r.addListener(f,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),r.addListener(f,"click",this.onMouseEvent.bind(this,"gutterclick")),r.addListener(f,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),r.addListener(f,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),r.addListener(u,"mousedown",n),r.addListener(f,"mousedown",function(t){return e.focus(),r.preventDefault(t)}),e.on("mousemove",function(n){if(t.state||t.$dragDelay||!t.$dragEnabled)return;var r=e.renderer.screenToTextCoordinates(n.x,n.y),i=e.session.selection.getRange(),s=e.renderer;!i.isEmpty()&&i.insideStart(r.row,r.column)?s.setCursorStyle("default"):s.setCursorStyle("")})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new u(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!n||!n.length)return;this.editor._emit(e,new u(t,this.editor))},this.onMouseWheel=function(e,t){var n=new u(t,this.editor);n.speed=this.$scrollSpeed*2,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.onTouchMove=function(e,t){var n=new u(t,this.editor);n.speed=1,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var s=this,o=function(e){if(!e)return;if(i.isWebKit&&!e.which&&s.releaseMouse)return s.releaseMouse();s.x=e.clientX,s.y=e.clientY,t&&t(e),s.mouseEvent=new u(e,s.editor),s.$mouseMoved=!0},a=function(e){clearInterval(l),f(),s[s.state+"End"]&&s[s.state+"End"](e),s.state="",n.$keepTextAreaAtCursor==null&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),s.isMousePressed=!1,s.$onCaptureMouseMove=s.releaseMouse=null,e&&s.onMouseEvent("mouseup",e)},f=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(i.isOldIE&&e.domEvent.type=="dblclick")return setTimeout(function(){a(e)});s.$onCaptureMouseMove=o,s.releaseMouse=r.capture(this.editor.container,o,a);var l=setInterval(f,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){if(t&&t.domEvent&&t.domEvent.type!="contextmenu")return;this.editor.off("nativecontextmenu",e),t&&t.domEvent&&r.stopEvent(t.domEvent)}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(l.prototype),f.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=l}),define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,n){"use strict";function r(e){e.on("click",function(t){var n=t.getDocumentPosition(),r=e.session,i=r.getFoldAt(n.row,n.column,1);i&&(t.getAccelKey()?r.removeFold(i):r.expandFold(i),t.stop())}),e.on("gutterclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n=="foldWidgets"){var r=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n=="foldWidgets"){var r=t.getDocumentPosition().row,i=e.session,s=i.getParentFoldRangeData(r,!0),o=s.range||s.firstRange;if(o){r=o.start.row;var u=i.getFoldAt(r,i.getLine(r).length,1);u?i.removeFold(u):(i.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}t.FoldHandler=r}),define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var r=e("../lib/keys"),i=e("../lib/event"),s=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]==e)return;while(t[t.length-1]&&t[t.length-1]!=this.$defaultHandler)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)},this.addKeyboardHandler=function(e,t){if(!e)return;typeof e=="function"&&!e.handleKeyboard&&(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);n!=-1&&this.$handlers.splice(n,1),t==undefined?this.$handlers.push(e):this.$handlers.splice(t,0,e),n==-1&&e.attach&&e.attach(this.$editor)},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return t==-1?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(t,e)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,r){var s,o=!1,u=this.$editor.commands;for(var a=this.$handlers.length;a--;){s=this.$handlers[a].handleKeyboard(this.$data,e,t,n,r);if(!s||!s.command)continue;s.command=="null"?o=!0:o=u.exec(s.command,this.$editor,s.args,r),o&&r&&e!=-1&&s.passEvent!=1&&s.command.passEvent!=1&&i.stopEvent(r);if(o)break}return!o&&e==-1&&(s={command:"insertstring"},o=u.exec("insertstring",this.$editor,t)),o&&this.$editor._signal("keyboardActivity",s),o},this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);this.$callKeyboardHandlers(t,i,n,e)},this.onTextInput=function(e){this.$callKeyboardHandlers(-1,e)}}).call(s.prototype),t.KeyBinding=s}),define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var r=function(e,t){return e.row-t.row||e.column-t.column},i=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return this.compare(e,t)==0},this.compareRange=function(e){var t,n=e.end,r=e.start;return t=this.compare(n.row,n.column),t==1?(t=this.compare(r.row,r.column),t==1?2:t==0?1:0):t==-1?-2:(t=this.compare(r.row,r.column),t==-1?-1:t==1?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0},this.intersects=function(e){var t=this.compareRange(e);return t==-1||t==0||t==1},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){typeof e=="object"?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){typeof e=="object"?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return this.compare(e,t)==0?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return!this.isMultiLine()&&e===this.start.row?t<this.start.column?-1:t>this.end.column?1:0:e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)var r={row:e,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(n==0)return this;if(n==-1)var r={row:e,column:t};else var s={row:e,column:t};return i.fromPoints(r||this.start,s||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=r,i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i}),define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})};(function(){r.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){if(this.$isEmpty){this.moveCursorTo(this.lead.row,this.lead.column+e);return}var t=this.getSelectionAnchor(),n=this.getSelectionLead(),r=this.isBackwards();(!r||t.column!==0)&&this.setSelectionAnchor(t.row,t.column+e),(r||n.column!==0)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+e)})},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(typeof t=="undefined"){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n=typeof e=="number"?e:this.lead.row,r,i=this.session.getFoldLine(n);return i?(n=i.start.row,r=i.end.row):r=n,t===!0?new o(n,0,r,this.session.getLine(r).length):new o(n,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(e.column===0)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column-n,e.column).split(" ").length-1==n?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column,e.column+n).split(" ").length-1==n?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(e,null,r.row,r.column),s=i.match(/^\s*/);s[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(r.column+=s[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var s=this.session.getFoldAt(e,t,1);if(s){this.moveCursorTo(s.end.row,s.end.column);return}if(i=this.session.nonTokenRe.exec(r))t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t);if(t>=n.length){this.moveCursorTo(e,n.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight();return}if(i=this.session.tokenRe.exec(r))t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0;this.moveCursorTo(e,t)},this.moveCursorLongWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1)){this.moveCursorTo(n.start.row,n.start.column);return}var r=this.session.getFoldStringAt(e,t,-1);r==null&&(r=this.doc.getLine(e).substring(0,t));var s=i.stringReverse(r),o;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;if(o=this.session.nonTokenRe.exec(s))t-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0;if(t<=0){this.moveCursorTo(e,0),this.moveCursorLeft(),e>0&&this.moveCursorWordLeft();return}if(o=this.session.tokenRe.exec(s))t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0;this.moveCursorTo(e,t)},this.$shortWordEndIndex=function(e){var t,n=0,r,i=/\s/,s=this.session.tokenRe;s.lastIndex=0;if(t=this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{while((r=e[n])&&i.test(r))n++;if(n<1){s.lastIndex=0;while((r=e[n])&&!s.test(r)){s.lastIndex=0,n++;if(i.test(r)){if(n>2){n--;break}while((r=e[n])&&i.test(r))n++;if(n>2)break}}}}return s.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){var s=this.doc.getLength();do e++,r=this.doc.getLine(e);while(e<s&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var o=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var r=this.session.getLine(e).substring(0,t);if(t===0){do e--,r=this.doc.getLine(e);while(e>0&&/^\s*$/.test(r));t=r.length,/\s+$/.test(r)||(r="")}var s=i.stringReverse(r),o=this.$shortWordEndIndex(s);return this.moveCursorTo(e,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);t===0&&(this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);var r=this.session.screenToDocumentPosition(n.row+e,n.column);e!==0&&t===0&&r.row===this.lead.row&&r.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[r.row]&&r.row++,this.moveCursorTo(r.row,r.column+t,t===0)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e.call(null,this);var n=this.getCursor();return o.fromPoints(t,n)}catch(r){return o.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(e.start==undefined){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=o.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(u.prototype),t.Selection=u}),define("ace/tokenizer",["require","exports","module","ace/config"],function(e,t,n){"use strict";var r=e("./config"),i=2e3,s=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){var n=this.states[t],r=[],i=0,s=this.matchMappings[t]={defaultToken:"text"},o="g",u=[];for(var a=0;a<n.length;a++){var f=n[a];f.defaultToken&&(s.defaultToken=f.defaultToken),f.caseInsensitive&&(o="gi");if(f.regex==null)continue;f.regex instanceof RegExp&&(f.regex=f.regex.toString().slice(1,-1));var l=f.regex,c=(new RegExp("(?:("+l+")|(.))")).exec("a").length-2;Array.isArray(f.token)?f.token.length==1||c==1?f.token=f.token[0]:c-1!=f.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:f,groupCount:c-1}),f.token=f.token[0]):(f.tokenArray=f.token,f.token=null,f.onMatch=this.$arrayTokens):typeof f.token=="function"&&!f.onMatch&&(c>1?f.onMatch=this.$applyToken:f.onMatch=f.token),c>1&&(/\\\d/.test(f.regex)?l=f.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+i+1)}):(c=1,l=this.removeCapturingGroups(f.regex)),!f.splitRegex&&typeof f.token!="string"&&u.push(f)),s[i]=a,i+=c,r.push(l),f.onMatch||(f.onMatch=null)}r.length||(s[0]=0,r.push("$")),u.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,o)},this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",o)}};(function(){this.$setMaxTokenCount=function(e){i=e|0},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if(typeof n=="string")return[{type:n,value:e}];var r=[];for(var i=0,s=n.length;i<s;i++)t[i]&&(r[r.length]={type:n[i],value:t[i]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";var n=[],r=this.tokenArray;for(var i=0,s=r.length;i<s;i++)t[i+1]&&(n[n.length]={type:r[i],value:t[i+1]});return n},this.removeCapturingGroups=function(e){var t=e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e});return t},this.createSplitterRegexp=function(e,t){if(e.indexOf("(?=")!=-1){var n=0,r=!1,i={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,s,o,u,a){return r?r=u!="]":u?r=!0:o?(n==i.stack&&(i.end=a+1,i.stack=-1),n--):s&&(n++,s.length!=1&&(i.stack=n,i.start=a)),e}),i.end!=null&&/^\)*$/.test(e.substr(i.end))&&(e=e.substring(0,i.start)+e.substr(i.end))}return e.charAt(0)!="^"&&(e="^"+e),e.charAt(e.length-1)!="$"&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&typeof t!="string"){var n=t.slice(0);t=n[0],t==="#tmp"&&(n.shift(),t=n.shift())}else var n=[];var r=t||"start",s=this.states[r];s||(r="start",s=this.states[r]);var o=this.matchMappings[r],u=this.regExps[r];u.lastIndex=0;var a,f=[],l=0,c=0,h={type:null,value:""};while(a=u.exec(e)){var p=o.defaultToken,d=null,v=a[0],m=u.lastIndex;if(m-v.length>l){var g=e.substring(l,m-v.length);h.type==p?h.value+=g:(h.type&&f.push(h),h={type:p,value:g})}for(var y=0;y<a.length-2;y++){if(a[y+1]===undefined)continue;d=s[o[y]],d.onMatch?p=d.onMatch(v,r,n):p=d.token,d.next&&(typeof d.next=="string"?r=d.next:r=d.next(r,n),s=this.states[r],s||(this.reportError("state doesn't exist",r),r="start",s=this.states[r]),o=this.matchMappings[r],l=m,u=this.regExps[r],u.lastIndex=m);break}if(v)if(typeof p=="string")!!d&&d.merge===!1||h.type!==p?(h.type&&f.push(h),h={type:p,value:v}):h.value+=v;else if(p){h.type&&f.push(h),h={type:null,value:""};for(var y=0;y<p.length;y++)f.push(p[y])}if(l==e.length)break;l=m;if(c++>i){c>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});while(l<e.length)h.type&&f.push(h),h={value:e.substring(l,l+=2e3),type:"overflow"};r="start",n=[];break}}return h.type&&f.push(h),n.length>1&&n[0]!==r&&n.unshift("#tmp",r),{tokens:f,state:n.length?n:r}},this.reportError=r.reportError}).call(s.prototype),t.Tokenizer=s}),define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(!t){for(var n in e)this.$rules[n]=e[n];return}for(var n in e){var r=e[n];for(var i=0;i<r.length;i++){var s=r[i];if(s.next||s.onMatch)typeof s.next=="string"&&s.next.indexOf(t)!==0&&(s.next=t+s.next),s.nextState&&s.nextState.indexOf(t)!==0&&(s.nextState=t+s.nextState)}this.$rules[t+n]=r}},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i,s){var o=typeof e=="function"?(new e).getRules():e;if(i)for(var u=0;u<i.length;u++)i[u]=t+i[u];else{i=[];for(var a in o)i.push(t+a)}this.addRules(o,t);if(n){var f=Array.prototype[s?"push":"unshift"];for(var u=0;u<i.length;u++)f.apply(this.$rules[i[u]],r.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return(e!="start"||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){function i(s){var o=r[s];o.processed=!0;for(var u=0;u<o.length;u++){var a=o[u];!a.regex&&a.start&&(a.regex=a.start,a.next||(a.next=[]),a.next.push({defaultToken:a.token},{token:a.token+".end",regex:a.end||a.start,next:"pop"}),a.token=a.token+".start",a.push=!0);var f=a.next||a.push;if(f&&Array.isArray(f)){var l=a.stateName;l||(l=a.token,typeof l!="string"&&(l=l[0]||""),r[l]&&(l+=n++)),r[l]=f,a.next=l,i(l)}else f=="pop"&&(a.next=t);a.push&&(a.nextState=a.next||a.push,a.next=e,delete a.push);if(a.rules)for(var c in a.rules)r[c]?r[c].push&&r[c].push.apply(r[c],a.rules[c]):r[c]=a.rules[c];if(a.include||typeof a=="string")var h=a.include||a,p=r[h];else Array.isArray(a)&&(p=a);if(p){var d=[u,1].concat(p);a.noEscape&&(d=d.filter(function(e){return!e.next})),o.splice.apply(o,d),u--,p=null}a.keywordMap&&(a.token=this.createKeywordMapper(a.keywordMap,a.defaultToken||"text",a.caseInsensitive),delete a.defaultToken)}}var n=0,r=this.$rules;Object.keys(r).forEach(i,this)},this.createKeywordMapper=function(e,t,n,r){var i=Object.create(null);return Object.keys(e).forEach(function(t){var s=e[t];n&&(s=s.toLowerCase());var o=s.split(r||"|");for(var u=o.length;u--;)i[o[u]]=t}),Object.getPrototypeOf(i)&&(i.__proto__=null),this.$keywordList=Object.keys(i),e=null,n?function(e){return i[e.toLowerCase()]||t}:function(e){return i[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),t.TextHighlightRules=i}),define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if(typeof e=="function")var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;var t={};for(var n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(r.prototype),t.Behaviour=r}),define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";function r(e){var n=/\w{4}/g;for(var r in e)t.packages[r]=e[r].replace(n,"\\u$&")}t.packages={},r({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),define("ace/token_iterator",["require","exports","module"],function(e,t,n){"use strict";var r=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;var e;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1,e||(e=this.$session.getLength());if(this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(n!==undefined)return n;n=0;while(t>0)t-=1,n+=e[t].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}}}).call(r.prototype),t.TokenIterator=r}),define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var r=e("../tokenizer").Tokenizer,i=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour").Behaviour,o=e("../unicode"),u=e("../lib/lang"),a=e("../token_iterator").TokenIterator,f=e("../range").Range,l=function(){this.HighlightRules=i,this.$behaviour=new s};(function(){this.tokenRe=new RegExp("^["+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules,this.$tokenizer=new r(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,r){function w(e){for(var t=n;t<=r;t++)e(i.getLine(t),t)}var i=t.doc,s=!0,o=!0,a=Infinity,f=t.getTabSize(),l=!1;if(!this.lineCommentStart){if(!this.blockComment)return!1;var c=this.blockComment.start,h=this.blockComment.end,p=new RegExp("^(\\s*)(?:"+u.escapeRegExp(c)+")"),d=new RegExp("(?:"+u.escapeRegExp(h)+")\\s*$"),v=function(e,t){if(g(e,t))return;if(!s||/\S/.test(e))i.insertInLine({row:t,column:e.length},h),i.insertInLine({row:t,column:a},c)},m=function(e,t){var n;(n=e.match(d))&&i.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(p))&&i.removeInLine(t,n[1].length,n[0].length)},g=function(e,n){if(p.test(e))return!0;var r=t.getTokens(n);for(var i=0;i<r.length;i++)if(r[i].type==="comment")return!0}}else{if(Array.isArray(this.lineCommentStart))var p=this.lineCommentStart.map(u.escapeRegExp).join("|"),c=this.lineCommentStart[0];else var p=u.escapeRegExp(this.lineCommentStart),c=this.lineCommentStart;p=new RegExp("^(\\s*)(?:"+p+") ?"),l=t.getUseSoftTabs();var m=function(e,t){var n=e.match(p);if(!n)return;var r=n[1].length,s=n[0].length;!b(e,r,s)&&n[0][s-1]==" "&&s--,i.removeInLine(t,r,s)},y=c+" ",v=function(e,t){if(!s||/\S/.test(e))b(e,a,a)?i.insertInLine({row:t,column:a},y):i.insertInLine({row:t,column:a},c)},g=function(e,t){return p.test(e)},b=function(e,t,n){var r=0;while(t--&&e.charAt(t)==" ")r++;if(r%f!=0)return!1;var r=0;while(e.charAt(n++)==" ")r++;return f>2?r%f!=f-1:r%f==0}}var E=Infinity;w(function(e,t){var n=e.search(/\S/);n!==-1?(n<a&&(a=n),o&&!g(e,t)&&(o=!1)):E>e.length&&(E=e.length)}),a==Infinity&&(a=E,s=!1,o=!1),l&&a%f!=0&&(a=Math.floor(a/f)*f),w(o?m:v)},this.toggleBlockComment=function(e,t,n,r){var i=this.blockComment;if(!i)return;!i.start&&i[0]&&(i=i[0]);var s=new a(t,r.row,r.column),o=s.getCurrentToken(),u=t.selection,l=t.selection.toOrientedRange(),c,h;if(o&&/comment/.test(o.type)){var p,d;while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.start);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;p=new f(m,g,m,g+i.start.length);break}o=s.stepBackward()}var s=new a(t,r.row,r.column),o=s.getCurrentToken();while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.end);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;d=new f(m,g,m,g+i.end.length);break}o=s.stepForward()}d&&t.remove(d),p&&(t.remove(p),c=p.start.row,h=-i.start.length)}else h=i.start.length,c=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);l.start.row==c&&(l.start.column+=h),l.end.row==c&&(l.end.column+=h),t.selection.fromOrientedRange(l)},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)e[t]&&(this.$embeds.push(t),this.$modes[t]=new e[t]);var n=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(var t=0;t<n.length;t++)(function(e){var r=n[t],i=e[r];e[n[t]]=function(){return this.$delegator(r,arguments,i)}})(this)},this.$delegator=function(e,t,n){var r=t[0];typeof r!="string"&&(r=r[0]);for(var i=0;i<this.$embeds.length;i++){if(!this.$modes[this.$embeds[i]])continue;var s=r.split(this.$embeds[i]);if(!s[0]&&s[1]){t[0]=s[1];var o=this.$modes[this.$embeds[i]];return o[e].apply(o,t)}}var u=n.apply(this,t);return n?u:undefined},this.transformAction=function(e,t,n,r,i){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var o in s)if(s[o][t]){var u=s[o][t].apply(this,arguments);if(u)return u}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t){var i=t[r];for(var s=0,o=i.length;s<o;s++)if(typeof i[s].token=="string")/keyword|support|storage/.test(i[s].token)&&n.push(i[s].regex);else if(typeof i[s].token=="object")for(var u=0,a=i[s].token.length;u<a;u++)if(/keyword|support|storage/.test(i[s].token[u])){var r=i[s].regex.match(/\(.+?\)/g)[u];n.push(r.substr(1,r.length-2))}}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,r){var i=this.$keywordList||this.$createKeywordList();return i.map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(l.prototype),t.Mode=l}),define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function r(e,t){throw console.log("Invalid Delta:",e),"Invalid Delta: "+t}function i(e,t){return t.row>=0&&t.row<e.length&&t.column>=0&&t.column<=e[t.row].length}function s(e,t){t.action!="insert"&&t.action!="remove"&&r(t,"delta.action must be 'insert' or 'remove'"),t.lines instanceof Array||r(t,"delta.lines must be an Array"),(!t.start||!t.end)&&r(t,"delta.start/end must be an present");var n=t.start;i(e,t.start)||r(t,"delta.start must be contained in document");var s=t.end;t.action=="remove"&&!i(e,s)&&r(t,"delta.end must contained in document for 'remove' actions");var o=s.row-n.row,u=s.column-(o==0?n.column:0);(o!=t.lines.length-1||t.lines[o].length!=u)&&r(t,"delta.range must match delta lines")}t.applyDelta=function(e,t,n){var r=t.start.row,i=t.start.column,s=e[r]||"";switch(t.action){case"insert":var o=t.lines;if(o.length===1)e[r]=s.substring(0,i)+t.lines[0]+s.substring(i);else{var u=[r,1].concat(t.lines);e.splice.apply(e,u),e[r]=s.substring(0,i)+e[r],e[r+t.lines.length-1]+=s.substring(i)}break;case"remove":var a=t.end.column,f=t.end.row;r===f?e[r]=s.substring(0,i)+s.substring(a):e.splice(r,f-r+1,s.substring(0,i)+e[f].substring(a))}}}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),typeof n=="undefined"?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var r=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&r}function t(t,n,r){var i=t.action=="insert",s=(i?1:-1)*(t.end.row-t.start.row),o=(i?1:-1)*(t.end.column-t.start.column),u=t.start,a=i?u:t.end;return e(n,u,r)?{row:n.row,column:n.column}:e(a,n,!r)?{row:n.row+s,column:n.column+(n.row==a.row?o:0)}:{row:u.row,column:u.column}}r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if(e.start.row==e.end.row&&e.start.row!=this.row)return;if(e.start.row>this.row)return;var n=t(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)},this.setPosition=function(e,t,n){var r;n?r={row:e,column:t}:r=this.$clipPositionToDocument(e,t);if(this.row==r.row&&this.column==r.column)return;var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:i,value:r})},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(s.prototype)}),define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./apply_delta").applyDelta,s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=e("./anchor").Anchor,a=function(e){this.$lines=[""],e.length===0?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){r.implement(this,s),this.setValue=function(e){var t=this.getLength()-1;this.remove(new o(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new u(this,e,t)},"aaa".split(/a/).length===0?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){if(this.$newLineMode===e)return;this.$newLineMode=e,this._signal("changeNewLineMode")},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return e=="\r\n"||e=="\r"||e=="\n"},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{t=this.getLines(e.start.row,e.end.row),t[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),r=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:r,action:"insert",lines:[t]},!0),this.clonePos(r)},this.clippedPos=function(e,t){var n=this.getLength();e===undefined?e=n:e<0?e=0:e>=n&&(e=n-1,t=undefined);var r=this.getLine(e);return t==undefined&&(t=r.length),t=Math.min(Math.max(t,0),r.length),{row:e,column:t}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){e=Math.min(Math.max(e,0),this.getLength());var n=0;e<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),r={row:n.row+t.length-1,column:(t.length==1?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:r,action:"insert",lines:t}),this.clonePos(r)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var r=this.clippedPos(e,t),i=this.clippedPos(e,n);return this.applyDelta({start:r,end:i,action:"remove",lines:this.getLinesForRange({start:r,end:i})},!0),this.clonePos(r)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1),t=Math.min(Math.max(0,t),this.getLength()-1);var n=t==this.getLength()-1&&e>0,r=t<this.getLength()-1,i=n?e-1:e,s=n?this.getLine(i).length:0,u=r?t+1:t,a=r?0:this.getLine(u).length,f=new o(i,s,u,a),l=this.$lines.slice(e,t+1);return this.applyDelta({start:f.start,end:f.end,action:"remove",lines:this.getLinesForRange(f)}),l},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){e instanceof o||(e=o.fromPoints(e.start,e.end));if(t.length===0&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);var n;return t?n=this.insert(e.start,t):n=e.start,n},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n=e.action=="insert";if(n?e.lines.length<=1&&!e.lines[0]:!o.comparePoints(e.start,e.end))return;n&&e.lines.length>2e4&&this.$splitAndapplyLargeDelta(e,2e4),i(this.$lines,e,t),this._signal("change",e)},this.$splitAndapplyLargeDelta=function(e,t){var n=e.lines,r=n.length,i=e.start.row,s=e.start.column,o=0,u=0;do{o=u,u+=t-1;var a=n.slice(o,u);if(u>r){e.lines=a,e.start.row=i+o,e.start.column=s;break}a.push(""),this.applyDelta({start:this.pos(i+o,s),end:this.pos(i+u,s=0),action:e.action,lines:a},!0)}while(!0)},this.revertDelta=function(e){this.applyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:e.action=="insert"?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length;for(var i=t||0,s=n.length;i<s;i++){e-=n[i].length+r;if(e<0)return{row:i,column:e+n[i].length+r}}return{row:s-1,column:n[s-1].length}},this.positionToIndex=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,s=Math.min(e.row,n.length);for(var o=t||0;o<s;++o)i+=n[o].length+r;return i+e.column}}).call(a.prototype),t.Document=a}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(!n.running)return;var e=new Date,t=n.currentLine,r=-1,i=n.doc,s=t;while(n.lines[t])t++;var o=i.getLength(),u=0;n.running=!1;while(t<o){n.$tokenizeRow(t),r=t;do t++;while(n.lines[t]);u++;if(u%5===0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,s<=r&&n.fireUpdateEvent(s,r)}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(n===0)this.lines[t]=null;else if(e.action=="remove")this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}}).call(s.prototype),t.BackgroundTokenizer=s}),define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){if(this.regExp+""==e+"")return;this.regExp=e,this.cache=[]},this.update=function(e,t,n,i){if(!this.regExp)return;var o=i.firstRow,u=i.lastRow;for(var a=o;a<=u;a++){var f=this.cache[a];f==null&&(f=r.getMatchOffsets(n.getLine(a),this.regExp),f.length>this.MAX_RANGES&&(f=f.slice(0,this.MAX_RANGES)),f=f.map(function(e){return new s(a,e.offset,a,e.offset+e.length)}),this.cache[a]=f.length?f:"");for(var l=f.length;l--;)t.drawSingleLineMarker(e,f[l].toScreenRange(n),this.clazz,i)}}}).call(o.prototype),t.SearchHighlight=o}),define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var r=0,i=this.folds,s,o,u,a=!0;t==null&&(t=this.end.row,n=this.end.column);for(var f=0;f<i.length;f++){s=i[f],o=s.range.compareStart(t,n);if(o==-1){e(null,t,n,r,a);return}u=e(null,s.start.row,s.start.column,r,a),u=!u&&e(s.placeholder,s.start.row,s.start.column,r);if(u||o===0)return;a=!s.sameRow,r=s.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){var n,r;for(var i=0;i<this.folds.length;i++){n=this.folds[i],r=n.range.compareEnd(e,t);if(r==-1)return{fold:n,kind:"after"};if(r===0)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var r=this.getNextFoldTo(e,t),i,s;if(r){i=r.fold;if(r.kind=="inside"&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){s=this.folds;var o=s.indexOf(i);o===0&&(this.start.column+=n);for(o;o<s.length;o++){i=s[o],i.start.column+=n;if(!i.sameRow)return;i.end.column+=n}this.end.column+=n}}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||n.kind=="inside")return null;var r=n.fold,s=this.folds,o=this.foldData,u=s.indexOf(r),a=s[u-1];this.end.row=a.end.row,this.end.column=a.end.column,s=s.splice(u,s.length-u);var f=new i(o,s);return o.splice(o.indexOf(this)+1,0,f),f},this.merge=function(e){var t=e.folds;for(var n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){var t=0;for(var n=0;n<this.folds.length;n++){var r=this.folds[n];e-=r.start.column-t;if(e<0)return{row:r.start.row,column:r.start.column+e};e-=r.placeholder.length;if(e<0)return r.start;t=r.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("./range").Range,i=r.comparePoints,s=function(){this.ranges=[]};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){var r=this.ranges;for(var s=n||0;s<r.length;s++){var o=r[s],u=i(e,o.end);if(u>0)continue;var a=i(e,o.start);return u===0?t&&a!==0?-s-2:s:a>0||a===0&&!t?s:-s-1}return-s-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){var t=[];for(var n=e.length;n--;)t.push.call(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return i(e.start,t.start)});var n=t[0],r;for(var s=1;s<t.length;s++){r=n,n=t[s];var o=i(r.end,n.start);if(o<0)continue;if(o==0&&!r.isEmpty()&&!n.isEmpty())continue;i(r.end,n.end)<0&&(r.end.row=n.end.row,r.end.column=n.end.column),t.splice(s,1),e.push(n),n=r,s--}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var i=this.pointIndex({row:t,column:0},r);i<0&&(i=-i-1);var s=[];for(var o=r;o<i;o++)s.push(n[o]);return s},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){if(!this.session)return;this.session.removeListener("change",this.onChange),this.session=null},this.$onChange=function(e){if(e.action=="insert")var t=e.start,n=e.end;else var n=e.start,t=e.end;var r=t.row,i=n.row,s=i-r,o=-t.column+n.column,u=this.ranges;for(var a=0,f=u.length;a<f;a++){var l=u[a];if(l.end.row<r)continue;if(l.start.row>r)break;l.start.row==r&&l.start.column>=t.column&&(l.start.column!=t.column||!this.$insertRight)&&(l.start.column+=o,l.start.row+=s);if(l.end.row==r&&l.end.column>=t.column){if(l.end.column==t.column&&this.$insertRight)continue;l.end.column==t.column&&o>0&&a<f-1&&l.end.column>l.start.column&&l.end.column==u[a+1].start.column&&(l.end.column-=o),l.end.column+=o,l.end.row+=s}}if(s!=0&&a<f)for(;a<f;a++){var l=u[a];l.start.row+=s,l.end.row+=s}}}).call(s.prototype),t.RangeList=s}),define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t,n){"use strict";function u(e,t){e.row-=t.row,e.row==0&&(e.column-=t.column)}function a(e,t){u(e.start,t),u(e.end,t)}function f(e,t){e.row==0&&(e.column+=t.column),e.row+=t.row}function l(e,t){f(e.start,t),f(e.end,t)}var r=e("../range").Range,i=e("../range_list").RangeList,s=e("../lib/oop"),o=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};s.inherits(o,i),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new o(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(this.range.isEqual(e))return;if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range);a(e,this.start);var t=e.start.row,n=e.start.column;for(var r=0,i=-1;r<this.subFolds.length;r++){i=this.subFolds[r].range.compare(t,n);if(i!=1)break}var s=this.subFolds[r];if(i==0)return s.addSubFold(e);var t=e.range.end.row,n=e.range.end.column;for(var o=r,i=-1;o<this.subFolds.length;o++){i=this.subFolds[o].range.compare(t,n);if(i!=1)break}var u=this.subFolds[o];if(i==0)throw new Error("A fold can't intersect already existing fold"+e.range+this.range);var f=this.subFolds.splice(r,o-r,e);return e.setFoldLine(this.foldLine),e},this.restoreRange=function(e){return l(e,this.start)}}.call(o.prototype)}),define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){"use strict";function u(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;var i=r.folds;for(var s=0;s<i.length;s++){var o=i[s];if(o.range.contains(e,t)){if(n==1&&o.range.isEnd(e,t))continue;if(n==-1&&o.range.isStart(e,t))continue;return o}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,i=[];t.column+=1,n.column-=1;for(var s=0;s<r.length;s++){var o=r[s].range.compareRange(e);if(o==2)continue;if(o==-2)break;var u=r[s].folds;for(var a=0;a<u.length;a++){var f=u[a];o=f.range.compareRange(e);if(o==-2)break;if(o==2)continue;if(o==42)break;i.push(f)}}return t.column-=1,n.column+=1,i},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else var t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){var e=[],t=this.$foldData;for(var n=0;n<t.length;n++)for(var r=0;r<t[n].folds.length;r++)e.push(t[n].folds[r]);return e},this.getFoldStringAt=function(e,t,n,r){r=r||this.getFoldLine(e);if(!r)return null;var i={end:{column:0}},s,o;for(var u=0;u<r.folds.length;u++){o=r.folds[u];var a=o.range.compareEnd(e,t);if(a==-1){s=this.getLine(o.start.row).substring(i.end.column,o.start.column);break}if(a===0)return null;i=o}return s||(s=this.getLine(o.start.row).substring(i.end.column)),n==-1?s.substring(0,t-i.end.column):n==1?s.substring(t-i.end.column):s},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){var n=this.$foldData,r=t-e+1;for(var i=0;i<n.length;i++){var s=n[i],o=s.end.row,u=s.start.row;if(o>=t){u<t&&(u>=e?r-=t-u:r=0);break}o>=e&&(u>=e?r-=o-u:r-=o-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n=this.$foldData,r=!1,o;e instanceof s?o=e:(o=new s(t,e),o.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(o.range);var u=o.start.row,a=o.start.column,f=o.end.row,l=o.end.column;if(u<f||u==f&&a<=l-2){var c=this.getFoldAt(u,a,1),h=this.getFoldAt(f,l,-1);if(c&&h==c)return c.addSubFold(o);c&&!c.range.isStart(u,a)&&this.removeFold(c),h&&!h.range.isEnd(f,l)&&this.removeFold(h);var p=this.getFoldsInRange(o.range);p.length>0&&(this.removeFolds(p),p.forEach(function(e){o.addSubFold(e)}));for(var d=0;d<n.length;d++){var v=n[d];if(f==v.start.row){v.addFold(o),r=!0;break}if(u==v.end.row){v.addFold(o),r=!0;if(!o.sameRow){var m=n[d+1];if(m&&m.start.row==f){v.merge(m);break}}break}if(f<=v.start.row)break}return r||(v=this.$addFoldLine(new i(this.$foldData,o))),this.$useWrapMode?this.$updateWrapData(v.start.row,v.start.row):this.$updateRowLengthCache(v.start.row,v.start.row),this.$modified=!0,this._signal("changeFold",{data:o,action:"add"}),o}throw new Error("The range has to be at least 2 characters width")},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,i=this.$foldData,s=t.folds;if(s.length==1)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))s.pop(),t.end.row=s[s.length-1].end.row,t.end.column=s[s.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))s.shift(),t.start.row=s[0].start.row,t.start.column=s[0].start.column;else if(e.sameRow)s.splice(s.indexOf(e),1);else{var o=t.split(e.start.row,e.start.column);s=o.folds,s.shift(),o.start.row=s[0].start.row,o.start.column=s[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;e==null?(n=new r(0,0,this.getLength(),0),t=!0):typeof e=="number"?n=new r(e,0,e,this.getLine(e).length):"row"in e?n=r.fromPoints(e,e):n=e,i=this.getFoldsInRangeList(n);if(t)this.removeFolds(i);else{var s=i;while(s.length)this.expandFolds(s),s=this.getFoldsInRangeList(n)}if(i.length)return i},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,i){r==null&&(r=e.start.row),i==null&&(i=0),t==null&&(t=e.end.row),n==null&&(n=this.getLine(t).length);var s=this.doc,o="";return e.walk(function(e,t,n,u){if(t<r)return;if(t==r){if(n<i)return;u=Math.max(i,u)}e!=null?o+=e:o+=s.getLine(t).substring(u,n)},t,n),o},this.getDisplayLine=function(e,t,n,r){var i=this.getFoldLine(e);if(!i){var s;return s=this.doc.getLine(e),s.substring(r||0,t||s.length)}return this.getFoldDisplayLine(i,e,t,n,r)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new i(e,n)}),e},this.toggleFold=function(e){var t=this.selection,n=t.getRange(),r,i;if(n.isEmpty()){var s=n.start;r=this.getFoldAt(s.row,s.column);if(r){this.expandFold(r);return}(i=this.findMatchingBracket(s))?n.comparePoint(i)==1?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:s.row,column:s.column+1}))?(n.comparePoint(i)==1?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(s.row,s.column)||n}else{var o=this.getFoldsInRange(n);if(e&&o.length){this.expandFolds(o);return}o.length==1&&(r=o[0])}r||(r=this.getFoldAt(n.start.row,n.start.column));if(r&&r.range.toString()==n.toString()){this.expandFold(r);return}var u="...";if(!n.isMultiLine()){u=this.getTextRange(n);if(u.length<4)return;u=u.trim().substring(0,2)+".."}this.addFold(u,n)},this.getCommentFoldRange=function(e,t,n){var i=new o(this,e,t),s=i.getCurrentToken();if(s&&/^comment|string/.test(s.type)){var u=new r,a=new RegExp(s.type.replace(/\..*/,"\\."));if(n!=1){do s=i.stepBackward();while(s&&a.test(s.type));i.stepForward()}u.start.row=i.getCurrentTokenRow(),u.start.column=i.getCurrentTokenColumn()+2,i=new o(this,e,t);if(n!=-1){do s=i.stepForward();while(s&&a.test(s.type));s=i.stepBackward()}else s=i.getCurrentToken();return u.end.row=i.getCurrentTokenRow(),u.end.column=i.getCurrentTokenColumn()+s.value.length-2,u}},this.foldAll=function(e,t,n){n==undefined&&(n=1e5);var r=this.foldWidgets;if(!r)return;t=t||this.getLength(),e=e||0;for(var i=e;i<t;i++){r[i]==null&&(r[i]=this.getFoldWidget(i));if(r[i]!="start")continue;var s=this.getFoldWidgetRange(i);if(s&&s.isMultiLine()&&s.end.row<=t&&s.start.row>=e){i=s.end.row;try{var o=this.addFold("...",s);o&&(o.collapseChildren=n)}catch(u){}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle==e)return;this.$foldStyle=e,e=="manual"&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)},this.$setFolding=function(e){if(this.$foldMode==e)return;this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation");if(!e||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};var r=e-1,i;while(r>=0){var s=n[r];s==null&&(s=n[r]=this.getFoldWidget(r));if(s=="start"){var o=this.getFoldWidgetRange(r);i||(i=o);if(o&&o.end.row>=e)break}r--}return{range:r!==-1&&o,firstRange:i}},this.onFoldWidgetClick=function(e,t){t=t.domEvent;var n={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey},r=this.$toggleFoldWidget(e,n);if(!r){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(!this.getFoldWidget)return;var n=this.getFoldWidget(e),r=this.getLine(e),i=n==="end"?-1:1,s=this.getFoldAt(e,i===-1?0:r.length,i);if(s){t.children||t.all?this.removeFold(s):this.expandFold(s);return}var o=this.getFoldWidgetRange(e,!0);if(o&&!o.isMultiLine()){s=this.getFoldAt(o.start.row,o.start.column,1);if(s&&o.isEqual(s.range)){this.removeFold(s);return}}if(t.siblings){var u=this.getParentFoldRangeData(e);if(u.range)var a=u.range.start.row+1,f=u.range.end.row;this.foldAll(a,f,t.all?1e4:0)}else t.children?(f=o?o.end.row:this.getLength(),this.foldAll(e+1,f,t.all?1e4:0)):o&&(t.all&&(o.collapseChildren=1e4),this.addFold("...",o));return o},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(n)return;var r=this.getParentFoldRangeData(t,!0);n=r.range||r.firstRange;if(n){t=n.start.row;var i=this.getFoldAt(t,this.getLine(t).length,1);i?this.removeFold(i):this.addFold("...",n)}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(n===0)this.foldWidgets[t]=null;else if(e.action=="remove")this.foldWidgets.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,r)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}var r=e("../range").Range,i=e("./fold_line").FoldLine,s=e("./fold").Fold,o=e("../token_iterator").TokenIterator;t.Folding=u}),define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";function s(){this.findMatchingBracket=function(e,t){if(e.column==0)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(n=="")return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var t=this.getLine(e.row),n=!0,r,s=t.charAt(e.column-1),o=s&&s.match(/([\(\[\{])|([\)\]\}])/);o||(s=t.charAt(e.column),e={row:e.row,column:e.column+1},o=s&&s.match(/([\(\[\{])|([\)\]\}])/),n=!1);if(!o)return null;if(o[1]){var u=this.$findClosingBracket(o[1],e);if(!u)return null;r=i.fromPoints(e,u),n||(r.end.column++,r.start.column--),r.cursor=r.end}else{var u=this.$findOpeningBracket(o[2],e);if(!u)return null;r=i.fromPoints(u,e),n||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));var a=t.column-o.getCurrentTokenColumn()-2,f=u.value;for(;;){while(a>=0){var l=f.charAt(a);if(l==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else l==e&&(s+=1);a-=1}do u=o.stepBackward();while(u&&!n.test(u.type));if(u==null)break;f=u.value,a=f.length-1}return null},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));var a=t.column-o.getCurrentTokenColumn();for(;;){var f=u.value,l=f.length;while(a<l){var c=f.charAt(a);if(c==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else c==e&&(s+=1);a+=1}do u=o.stepForward();while(u&&!n.test(u.type));if(u==null)break;a=0}return null}}var r=e("../token_iterator").TokenIterator,i=e("../range").Range;t.BracketMatch=s}),define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./config"),o=e("./lib/event_emitter").EventEmitter,u=e("./selection").Selection,a=e("./mode/text").Mode,f=e("./range").Range,l=e("./document").Document,c=e("./background_tokenizer").BackgroundTokenizer,h=e("./search_highlight").SearchHighlight,p=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this);if(typeof e!="object"||!e.getLine)e=new l(e);this.setDocument(e),this.selection=new u(this),s.resetOptions(this),this.setMode(t),s._signal("session",this)};(function(){function m(e){return e<4352?!1:e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510}r.implement(this,o),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e){this.$docRowCache=[],this.$screenRowCache=[];return}var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){var n=0,r=e.length-1;while(n<=r){var i=n+r>>1,s=e[i];if(t>s)n=i+1;else{if(!(t<s))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&!e.ignore&&(this.$deltasDoc.push(e),t&&t.length!=0&&this.$deltasFold.push({action:"removeFolds",folds:t}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n=this.bgTokenizer.getTokens(e),r,i=0;if(t==null)s=n.length-1,i=this.getLine(e).length;else for(var s=0;s<n.length;s++){i+=n[s].value.length;if(i>=t)break}return r=n[s],r?(r.index=s,r.start=i-r.value.length,r):null},this.setUndoManager=function(e){this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel();if(e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),t.$deltas.length>0&&e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas}),t.mergeUndoDeltas=!1,t.$deltas=[]},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){t===undefined&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var i=this.$markerId++,s={range:e,type:n||"line",renderer:typeof n=="function"?n:null,clazz:t,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=s,this._signal("changeFrontMarker")):(this.$backMarkers[i]=s,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(!e.update)return;var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(!t)return;var n=t.inFront?this.$frontMarkers:this.$backMarkers;t&&(delete n[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new h(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){typeof t!="number"&&(n=t,t=e),n||(n="ace_step");var i=new f(e,0,t,Infinity);return i.id=this.addMarker(i,n,"fullLine",r),i},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine="\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe));if(r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var i=/\s/;else var i=this.nonTokenRe;var s=t;if(s>0){do s--;while(s>=0&&n.charAt(s).match(i));s++}var o=t;while(o<n.length&&n.charAt(o).match(i))o++;return new f(e,s,e,o)},this.getAWordRange=function(e,t){var n=this.getWordRange(e,t),r=this.getLine(n.end.row);while(r.charAt(n.end.column).match(/[ \t]/))n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&typeof e=="object"){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new a);if(this.$modes[r]&&!n){this.$onChangeMode(this.$modes[r]),t&&t();return}this.$modeId=r,s.loadModule(["mode",r],function(e){if(this.$modeId!==r)return t&&t();this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){t||(this.$modeId=e.$id);if(this.$mode===e)return;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(n.addEventListener!==undefined){var r=this.onReloadTokenizer.bind(this);n.addEventListener("update",r)}if(!this.bgTokenizer){this.bgTokenizer=new c(n);var i=this;this.bgTokenizer.addEventListener("update",function(e){i._signal("tokenizerUpdate",e)})}else this.bgTokenizer.setTokenizer(n);this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){s.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){if(this.$scrollTop===e||isNaN(e))return;this.$scrollTop=e,this._signal("changeScrollTop",e)},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){if(this.$scrollLeft===e||isNaN(e))return;this.$scrollLeft=e,this._signal("changeScrollLeft",e)},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){this.$modified=!1;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,s=this.$foldData[i],o=s?s.start.row:Infinity,u=t.length;for(var a=0;a<u;a++){if(a>o){a=s.end.row+1;if(a>=u)break;s=this.$foldData[i++],o=s?s.start.row:Infinity}n[a]==null&&(n[a]=this.$getStringScreenWidth(t[a])[0]),n[a]>r&&(r=n[a])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;var n=null;for(var r=e.length-1;r!=-1;r--){var i=e[r];i.group=="doc"?(this.doc.revertDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!0,n)):i.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n},this.redoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;var n=null;for(var r=0;r<e.length;r++){var i=e[r];i.group=="doc"&&(this.doc.applyDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,n){function r(e){return t?e.action!=="insert":e.action==="insert"}var i=e[0],s,o,u=!1;r(i)?(s=f.fromPoints(i.start,i.end),u=!0):(s=f.fromPoints(i.start,i.start),u=!1);for(var a=1;a<e.length;a++)i=e[a],r(i)?(o=i.start,s.compare(o.row,o.column)==-1&&s.setStart(o),o=i.end,s.compare(o.row,o.column)==1&&s.setEnd(o),u=!0):(o=i.start,s.compare(o.row,o.column)==-1&&(s=f.fromPoints(i.start,i.start)),u=!1);if(n!=null){f.comparePoints(n.start,s.start)===0&&(n.start.column+=s.end.column-s.start.column,n.end.column+=s.end.column-s.start.column);var l=n.compareRange(s);l==1?s.setStart(n.start):l==-1&&s.setEnd(n.end)}return s},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),i=this.getFoldsInRange(e),s=f.fromPoints(t,t);if(!n){this.remove(e);var o=e.start.row-e.end.row,u=o?-e.end.column:e.start.column-e.end.column;u&&(s.start.row==e.end.row&&s.start.column>e.end.column&&(s.start.column+=u),s.end.row==e.end.row&&s.end.column>e.end.column&&(s.end.column+=u)),o&&s.start.row>=e.end.row&&(s.start.row+=o,s.end.row+=o)}s.end=this.insert(s.start,r);if(i.length){var a=e.start,l=s.start,o=l.row-a.row,u=l.column-a.column;this.addFolds(i.map(function(e){return e=e.clone(),e.start.row==a.row&&(e.start.column+=u),e.end.row==a.row&&(e.end.column+=u),e.start.row+=o,e.end.row+=o,e}))}return s},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;r<=t;r++)this.doc.insertInLine({row:r,column:0},n)},this.outdentRows=function(e){var t=e.collapseRows(),n=new f(0,0,0,0),r=this.getTabSize();for(var i=t.start.row;i<=t.end.row;++i){var s=this.getLine(i);n.start.row=i,n.end.row=i;for(var o=0;o<r;++o)if(s.charAt(o)!=" ")break;o<r&&s.charAt(o)=="	"?(n.start.column=o,n.end.column=o+1):(n.start.column=0,n.end.column=o),this.remove(n)}},this.$moveLines=function(e,t,n){e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t);if(n<0){var r=this.getRowFoldStart(e+n);if(r<0)return 0;var i=r-e}else if(n>0){var r=this.getRowFoldEnd(t+n);if(r>this.doc.getLength()-1)return 0;var i=r-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var i=t-e+1}var s=new f(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(s).map(function(e){return e=e.clone(),e.start.row+=i,e.end.row+=i,e}),u=n==0?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+i,u),o.length&&this.addFolds(o),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){t=Math.max(0,t);if(e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0);if(e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){if(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$useWrapMode&&this._signal("changeWrapMode")},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1?(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,r=e.start,i=e.end,s=r.row,o=i.row,u=o-s,a=null;this.$updating=!0;if(u!=0)if(n==="remove"){this[t?"$wrapData":"$rowLengthCache"].splice(s,u);var f=this.$foldData;a=this.getFoldsInRange(e),this.removeFolds(a);var l=this.getFoldLine(i.row),c=0;if(l){l.addRemoveChars(i.row,i.column,r.column-i.column),l.shiftRow(-u);var h=this.getFoldLine(s);h&&h!==l&&(h.merge(l),l=h),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=i.row&&l.shiftRow(-u)}o=s}else{var p=Array(u);p.unshift(s,0);var d=t?this.$wrapData:this.$rowLengthCache;d.splice.apply(d,p);var f=this.$foldData,l=this.getFoldLine(s),c=0;if(l){var v=l.range.compareInside(r.row,r.column);v==0?(l=l.split(r.row,r.column),l&&(l.shiftRow(u),l.addRemoveChars(o,0,i.column-r.column))):v==-1&&(l.addRemoveChars(s,0,i.column-r.column),l.shiftRow(u)),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=s&&l.shiftRow(u)}}else{u=Math.abs(e.start.column-e.end.column),n==="remove"&&(a=this.getFoldsInRange(e),this.removeFolds(a),u=-u);var l=this.getFoldLine(s);l&&l.addRemoveChars(s,r.column,u)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(s,o):this.$updateRowLengthCache(s,o),a},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var r=this.doc.getAllLines(),i=this.getTabSize(),s=this.$wrapData,o=this.$wrapLimit,a,f,l=e;t=Math.min(t,r.length-1);while(l<=t)f=this.getFoldLine(l,f),f?(a=[],f.walk(function(e,t,i,s){var o;if(e!=null){o=this.$getDisplayTokens(e,a.length),o[0]=n;for(var f=1;f<o.length;f++)o[f]=u}else o=this.$getDisplayTokens(r[t].substring(s,i),a.length);a=a.concat(o)}.bind(this),f.end.row,r[f.end.row].length+1),s[f.start.row]=this.$computeWrapSplits(a,o,i),l=f.end.row+1):(a=this.$getDisplayTokens(r[l]),s[l]=this.$computeWrapSplits(a,o,i),l++)};var e=1,t=2,n=3,u=4,l=9,p=10,d=11,v=12;this.$computeWrapSplits=function(e,r,i){function g(){var t=0;if(m===0)return t;if(h)for(var n=0;n<e.length;n++){var r=e[n];if(r==p)t+=1;else{if(r!=d){if(r==v)continue;break}t+=i}}return c&&h!==!1&&(t+=i),Math.min(t,m)}function y(t){var n=e.slice(a,t),r=n.length;n.join("").replace(/12/g,function(){r-=1}).replace(/2/g,function(){r-=1}),s.length||(b=g(),s.indent=b),f+=r,s.push(f),a=t}if(e.length==0)return[];var s=[],o=e.length,a=0,f=0,c=this.$wrapAsCode,h=this.$indentedSoftWrap,m=r<=Math.max(2*i,8)||h===!1?0:Math.floor(r/2),b=0;while(o-a>r-b){var w=a+r-b;if(e[w-1]>=p&&e[w]>=p){y(w);continue}if(e[w]==n||e[w]==u){for(w;w!=a-1;w--)if(e[w]==n)break;if(w>a){y(w);continue}w=a+r;for(w;w<e.length;w++)if(e[w]!=u)break;if(w==e.length)break;y(w);continue}var E=Math.max(w-(r-(r>>2)),a-1);while(w>E&&e[w]<n)w--;if(c){while(w>E&&e[w]<n)w--;while(w>E&&e[w]==l)w--}else while(w>E&&e[w]<p)w--;if(w>E){y(++w);continue}w=a+r,e[w]==t&&w--,y(w-b)}return s},this.$getDisplayTokens=function(n,r){var i=[],s;r=r||0;for(var o=0;o<n.length;o++){var u=n.charCodeAt(o);if(u==9){s=this.getScreenTabSize(i.length+r),i.push(d);for(var a=1;a<s;a++)i.push(v)}else u==32?i.push(p):u>39&&u<48||u>57&&u<64?i.push(l):u>=4352&&m(u)?i.push(e,t):i.push(e)}return i},this.$getStringScreenWidth=function(e,t,n){if(t==0)return[0,0];t==null&&(t=Infinity),n=n||0;var r,i;for(i=0;i<e.length;i++){r=e.charCodeAt(i),r==9?n+=this.getScreenTabSize(n):r>=4352&&m(r)?n+=2:n+=1;if(n>t)break}return[n,i]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return!this.$useWrapMode||!this.$wrapData[e]?1+t:this.$wrapData[e].length+1+t},this.getRowLineCount=function(e){return!this.$useWrapMode||!this.$wrapData[e]?1:this.$wrapData[e].length+1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:undefined},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t){if(e<0)return{row:0,column:0};var n,r=0,i=0,s,o=0,u=0,a=this.$screenRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var o=a[f],r=this.$docRowCache[f],c=e>a[l-1];else var c=!l;var h=this.getLength()-1,p=this.getNextFoldLine(r),d=p?p.start.row:Infinity;while(o<=e){u=this.getRowLength(r);if(o+u>e||r>=h)break;o+=u,r++,r>d&&(r=p.end.row+1,p=this.getNextFoldLine(r,p),d=p?p.start.row:Infinity),c&&(this.$docRowCache.push(r),this.$screenRowCache.push(o))}if(p&&p.start.row<=r)n=this.getFoldDisplayLine(p),r=p.start.row;else{if(o+u<=e||r>h)return{row:h,column:this.getLine(h).length};n=this.getLine(r),p=null}var v=0;if(this.$useWrapMode){var m=this.$wrapData[r];if(m){var g=Math.floor(e-o);s=m[g],g>0&&m.length&&(v=m.indent,i=m[g-1]||m[m.length-1],n=n.substring(i))}}return i+=this.$getStringScreenWidth(n,t-v)[1],this.$useWrapMode&&i>=s&&(i=s-1),p?p.idxToPosition(i):{row:r,column:i}},this.documentToScreenPosition=function(e,t){if(typeof t=="undefined")var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r=0,i=null,s=null;s=this.getFoldAt(e,t,1),s&&(e=s.start.row,t=s.start.column);var o,u=0,a=this.$docRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var u=a[f],r=this.$screenRowCache[f],c=e>a[l-1];else var c=!l;var h=this.getNextFoldLine(u),p=h?h.start.row:Infinity;while(u<e){if(u>=p){o=h.end.row+1;if(o>e)break;h=this.getNextFoldLine(o,h),p=h?h.start.row:Infinity}else o=u+1;r+=this.getRowLength(u),u=o,c&&(this.$docRowCache.push(u),this.$screenRowCache.push(r))}var d="";h&&u>=p?(d=this.getFoldDisplayLine(h,e,t),i=h.start.row):(d=this.getLine(e).substring(0,t),i=e);var v=0;if(this.$useWrapMode){var m=this.$wrapData[i];if(m){var g=0;while(d.length>=m[g])r++,g++;d=d.substring(m[g-1]||0,d.length),v=g>0?m.indent:0}}return{row:r,column:v+this.$getStringScreenWidth(d)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(!this.$useWrapMode){e=this.getLength();var n=this.$foldData;for(var r=0;r<n.length;r++)t=n[r],e-=t.end.row-t.start.row}else{var i=this.$wrapData.length,s=0,r=0,t=this.$foldData[r++],o=t?t.start.row:Infinity;while(s<i){var u=this.$wrapData[s];e+=u?u.length+1:1,s++,s>o&&(s=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:Infinity)}}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){if(!this.$enableVarChar)return;this.$getStringScreenWidth=function(t,n,r){if(n===0)return[0,0];n||(n=Infinity),r=r||0;var i,s;for(s=0;s<t.length;s++){i=t.charAt(s),i==="	"?r+=this.getScreenTabSize(r):r+=e.getCharacterWidth(i);if(r>n)break}return[r,s]}},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()}}).call(p.prototype),e("./edit_session/folding").Folding.call(p.prototype),e("./edit_session/bracket_match").BracketMatch.call(p.prototype),s.defineOptions(p.prototype,"session",{wrap:{set:function(e){!e||e=="off"?e=!1:e=="free"?e=!0:e=="printMargin"?e=-1:typeof e=="string"&&(e=parseInt(e,10)||!1);if(this.$wrap==e)return;this.$wrap=e;if(!e)this.setUseWrapMode(!1);else{var t=typeof e=="number"?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){e=e=="auto"?this.$mode.type!="text":e!="text",e!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},indentedSoftWrap:{initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){if(isNaN(e)||this.$tabSize===e)return;this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize")},initialValue:4,handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId}}}),t.EditSession=p}),define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var r=null;return n.forEach(function(e,n,i){if(!e.start){var o=e.offset+(i||0);r=new s(n,o,n,o+e.length);if(!e.length&&t.start&&t.start.start&&t.skipCurrent!=0&&r.isEqual(t.start))return r=null,!1}else r=e;return!0}),r},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),o=[],u=t.re;if(t.$isMultiLine){var a=u.length,f=i.length-a,l;e:for(var c=u.offset||0;c<=f;c++){for(var h=0;h<a;h++)if(i[c+h].search(u[h])==-1)continue e;var p=i[c],d=i[c+a-1],v=p.length-p.match(u[0])[0].length,m=d.match(u[a-1])[0].length;if(l&&l.end.row===c&&l.end.column>v)continue;o.push(l=new s(c,v,c+a-1,m)),a>2&&(c=c+a-2)}}else for(var g=0;g<i.length;g++){var y=r.getMatchOffsets(i[g],u);for(var h=0;h<y.length;h++){var b=y[h];o.push(new s(g,b.offset,g,b.offset+b.length))}}if(n){var w=n.start.column,E=n.start.column,g=0,h=o.length-1;while(g<h&&o[g].start.column<w&&o[g].start.row==n.start.row)g++;while(g<h&&o[h].end.column>E&&o[h].end.row==n.end.row)h--;o=o.slice(g,h+1);for(g=0,h=o.length;g<h;g++)o[g].start.row+=n.start.row,o[g].end.row+=n.start.row}return o},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(!r)return;var i=r.exec(e);if(!i||i[0].length!=e.length)return null;t=e.replace(r,t);if(n.preserveCase){t=t.split("");for(var s=Math.min(e.length,e.length);s--;){var o=e[s];o&&o.toLowerCase()!=o?t[s]=t[s].toUpperCase():t[s]=t[s].toLowerCase()}t=t.join("")}return t},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var i;if(t.$isMultiLine)var o=n.length,u=function(t,r,u){var a=t.search(n[0]);if(a==-1)return;for(var f=1;f<o;f++){t=e.getLine(r+f);if(t.search(n[f])==-1)return}var l=t.match(n[o-1])[0].length,c=new s(r,a,r+o-1,l);n.offset==1?(c.start.row--,c.start.column=Number.MAX_VALUE):u&&(c.start.column+=u);if(i(c))return!0};else if(t.backwards)var u=function(e,t,s){var o=r.getMatchOffsets(e,n);for(var u=o.length-1;u>=0;u--)if(i(o[u],t,s))return!0};else var u=function(e,t,s){var o=r.getMatchOffsets(e,n);for(var u=0;u<o.length;u++)if(i(o[u],t,s))return!0};var a=this.$lineIterator(e,t);return{forEach:function(e){i=e,a.forEach(u)}}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n="\\b"+n+"\\b");var i=e.caseSensitive?"gm":"gmi";e.$isMultiLine=!t&&/[\n\r]/.test(n);if(e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,i);try{var s=new RegExp(n,i)}catch(o){s=!1}return e.re=s},this.$assembleMultilineRegExp=function(e,t){var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[];for(var i=0;i<n.length;i++)try{r.push(new RegExp(n[i],t))}catch(s){return!1}return n[0]==""?(r.shift(),r.offset=1):r.offset=0,r},this.$lineIterator=function(e,t){var n=t.backwards==1,r=t.skipCurrent!=0,i=t.range,s=t.start;s||(s=i?i[n?"end":"start"]:e.selection.getRange()),s.start&&(s=s[r!=n?"end":"start"]);var o=i?i.start.row:0,u=i?i.end.row:e.getLength()-1,a=n?function(n){var r=s.row,i=e.getLine(r).substring(0,s.column);if(n(i,r))return;for(r--;r>=o;r--)if(n(e.getLine(r),r))return;if(t.wrap==0)return;for(r=u,o=s.row;r>=o;r--)if(n(e.getLine(r),r))return}:function(n){var r=s.row,i=e.getLine(r).substr(s.column);if(n(i,r,s.column))return;for(r+=1;r<=u;r++)if(n(e.getLine(r),r))return;if(t.wrap==0)return;for(r=o,u=s.row;r<=u;r++)if(n(e.getLine(r),r))return};return{forEach:a}}}).call(o.prototype),t.Search=o}),define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function o(e,t){this.platform=t||(i.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function u(e,t){o.call(this,e,t),this.$singleCommand=!1}var r=e("../lib/keys"),i=e("../lib/useragent"),s=r.KEY_MODS;u.prototype=o.prototype,function(){function e(e){return typeof e=="object"&&e.bindKey&&e.bindKey.position||0}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&(typeof e=="string"?e:e.name);e=this.commands[n],t||delete this.commands[n];var r=this.commandKeyBinding;for(var i in r){var s=r[i];if(s==e)delete r[i];else if(Array.isArray(s)){var o=s.indexOf(e);o!=-1&&(s.splice(o,1),s.length==1&&(r[i]=s[0]))}}},this.bindKey=function(e,t,n){typeof e=="object"&&(n==undefined&&(n=e.position),e=e[this.platform]);if(!e)return;if(typeof t=="function")return this.addCommand({exec:t,bindKey:e,name:t.name||e});e.split("|").forEach(function(e){var r="";if(e.indexOf(" ")!=-1){var i=e.split(/\s+/);e=i.pop(),i.forEach(function(e){var t=this.parseKeys(e),n=s[t.hashId]+t.key;r+=(r?" ":"")+n,this._addCommandToBinding(r,"chainKeys")},this),r+=" "}var o=this.parseKeys(e),u=s[o.hashId]+o.key;this._addCommandToBinding(r+u,t,n)},this)},this._addCommandToBinding=function(t,n,r){var i=this.commandKeyBinding,s;if(!n)delete i[t];else if(!i[t]||this.$singleCommand)i[t]=n;else{Array.isArray(i[t])?(s=i[t].indexOf(n))!=-1&&i[t].splice(s,1):i[t]=[i[t]],typeof r!="number"&&(r||n.isDefault?r=-100:r=e(n));var o=i[t];for(s=0;s<o.length;s++){var u=o[s],a=e(u);if(a>r)break}o.splice(s,0,n)}},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(!n)return;if(typeof n=="string")return this.bindKey(n,t);typeof n=="function"&&(n={exec:n});if(typeof n!="object")return;n.name||(n.name=t),this.addCommand(n)},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(t.length==1&&t[0]=="shift")return{key:n.toUpperCase(),hashId:-1}}var s=0;for(var o=t.length;o--;){var u=r.KEY_MODS[t[o]];if(u==null)return typeof console!="undefined"&&console.error("invalid modifier "+t[o]+" in "+e),!1;s|=u}return{key:n,hashId:s}},this.findKeyCommand=function(t,n){var r=s[t]+n;return this.commandKeyBinding[r]},this.handleKeyboard=function(e,t,n,r){if(r<0)return;var i=s[t]+n,o=this.commandKeyBinding[i];e.$keyChain&&(e.$keyChain+=" "+i,o=this.commandKeyBinding[e.$keyChain]||o);if(o)if(o=="chainKeys"||o[o.length-1]=="chainKeys")return e.$keyChain=e.$keyChain||i,{command:"null"};if(e.$keyChain)if(!!t&&t!=4||n.length!=1){if(t==-1||r>0)e.$keyChain=""}else e.$keyChain=e.$keyChain.slice(0,-i.length-1);return{command:o}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(o.prototype),t.HashHandler=o,t.MultiHashHandler=u}),define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../keyboard/hash_handler").MultiHashHandler,s=e("../lib/event_emitter").EventEmitter,o=function(e,t){i.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};r.inherits(o,i),function(){r.implement(this,s),this.exec=function(e,t,n){if(Array.isArray(e)){for(var r=e.length;r--;)if(this.exec(e[r],t,n))return!0;return!1}typeof e=="string"&&(e=this.commands[e]);if(!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;var i={editor:t,command:e,args:n};return i.returnValue=this._emit("exec",i),this._signal("afterExec",i),i.returnValue===!1?!1:!0},this.toggleRecording=function(e){if(this.$inReplay)return;return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(this.$inReplay||!this.macro)return;if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){typeof t=="string"?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}},this.trimMacro=function(e){return e.map(function(e){return typeof e[0]!="string"&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";function o(e,t){return{win:e,mac:t}}var r=e("../lib/lang"),i=e("../config"),s=e("../range").Range;t.commands=[{name:"showSettingsMenu",bindKey:o("Ctrl-,","Command-,"),exec:function(e){i.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:o("Alt-E","Ctrl-E"),exec:function(e){i.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:o("Alt-Shift-E","Ctrl-Shift-E"),exec:function(e){i.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:o("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:o(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:o("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:o("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:o("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:o("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:o("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:o("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",bindKey:o("Ctrl-F","Command-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:o("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:o("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",bindKey:o("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:o("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:o("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:o("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:o("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:o("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:o("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:o("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:o("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:o("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:o("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:o("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:o(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:o(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:o("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:o("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:o("Ctrl-P","Ctrl-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",bindKey:o("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",exec:function(e){},readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",bindKey:o("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:o("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:o("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:o("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:o("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:o("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:o("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:o(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:o("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:o(null,null),exec:function(e){var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),o=e.session.doc.getLine(n.row).length,u=e.session.doc.getTextRange(e.selection.getRange()),a=u.replace(/\n\s*/," ").length,f=e.session.doc.getLine(n.row);for(var l=n.row+1;l<=i.row+1;l++){var c=r.stringTrimLeft(r.stringTrimRight(e.session.doc.getLine(l)));c.length!==0&&(c=" "+c),f+=c}i.row+1<e.session.doc.getLength()-1&&(f+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new s(n.row,0,i.row+2,0),f),a>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+a)):(o=e.session.doc.getLine(n.row).length>o?o+1:o,e.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,r=e.selection.rangeList.ranges,i=[];r.length<1&&(r=[e.selection.getRange()]);for(var o=0;o<r.length;o++)o==r.length-1&&(r[o].end.row!==t||r[o].end.column!==n)&&i.push(new s(r[o].end.row,r[o].end.column,t,n)),o===0?(r[o].start.row!==0||r[o].start.column!==0)&&i.push(new s(0,0,r[o].start.row,r[o].start.column)):i.push(new s(r[o-1].end.row,r[o-1].end.column,r[o].start.row,r[o].start.column));e.exitMultiSelectMode(),e.clearSelection();for(var o=0;o<i.length;o++)e.selection.addRange(i[o],!1)},readOnly:!0,scrollIntoView:"none"}]}),define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/lang"),o=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,a=e("./mouse/mouse_handler").MouseHandler,f=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,c=e("./edit_session").EditSession,h=e("./search").Search,p=e("./range").Range,d=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,g=e("./config"),y=e("./token_iterator").TokenIterator,b=function(e,t){var n=e.getContainerElement();this.container=n,this.renderer=e,this.commands=new v(o.isMac?"mac":"win",m),this.textInput=new u(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new l(this),this.$mouseHandler=new a(this),new f(this),this.$blockScrolling=0,this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||new c("")),g.resetOptions(this),g._signal("editor",this)};(function(){r.implement(this,d),this.$initOperationListeners=function(){function e(e){return e[e.length-1]}this.selections=[],this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&this.curOp.command.scrollIntoView!==undefined&&this.$blockScrolling++},this.endOperation=function(e){if(this.curOp){if(e&&e.returnValue===!1)return this.curOp=null;this._signal("beforeEndOperation");var t=this.curOp.command;t.name&&this.$blockScrolling>0&&this.$blockScrolling--;var n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var r=this.selection.getRange(),i=this.renderer.layerConfig;(r.start.row>=i.lastRow||r.end.row<=i.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:}n=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(!this.$mergeUndoDeltas)return;var t=this.prevOp,n=this.$mergeableCommands,r=t.command&&e.command.name==t.command.name;if(e.command.name=="insertstring"){var i=e.args;this.mergeNextCommand===undefined&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&n.indexOf(e.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:n.indexOf(e.command.name)!==-1&&(this.sequenceStartTime=Date.now())},this.setKeyboardHandler=function(e,t){if(e&&typeof e=="string"){this.$keybindingId=e;var n=this;g.loadModule(["keybinding",e],function(r){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(r&&r.handler),t&&t()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session==e)return;this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.removeEventListener("changeCursor",this.$onCursorChange),n.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this})},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?t==1?this.navigateFileEnd():t==-1&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container,"fontSize")},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null);if(this.$highlightPending)return;var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(!t||!t.bgTokenizer)return;var n=t.findMatchingBracket(e.getCursorPosition());if(n)var r=new p(n.row,n.column,n.row,n.column+1);else if(t.$mode.getMatching)var r=t.$mode.getMatching(e.session);r&&(t.$bracketHighlight=t.addMarker(r,"ace_bracket","text"))},50)},this.$highlightTags=function(){if(this.$highlightTagPending)return;var e=this;this.$highlightTagPending=!0,setTimeout(function(){e.$highlightTagPending=!1;var t=e.session;if(!t||!t.bgTokenizer)return;var n=e.getCursorPosition(),r=new y(e.session,n.row,n.column),i=r.getCurrentToken();if(!i||!/\b(?:tag-open|tag-name)/.test(i.type)){t.removeMarker(t.$tagHighlight),t.$tagHighlight=null;return}if(i.type.indexOf("tag-open")!=-1){i=r.stepForward();if(!i)return}var s=i.value,o=0,u=r.stepBackward();if(u.value=="<"){do u=i,i=r.stepForward(),i&&i.value===s&&i.type.indexOf("tag-name")!==-1&&(u.value==="<"?o++:u.value==="</"&&o--);while(i&&o>=0)}else{do i=u,u=r.stepBackward(),i&&i.value===s&&i.type.indexOf("tag-name")!==-1&&(u.value==="<"?o++:u.value==="</"&&o--);while(u&&o<=0);r.stepForward()}if(!i){t.removeMarker(t.$tagHighlight),t.$tagHighlight=null;return}var a=r.getCurrentTokenRow(),f=r.getCurrentTokenColumn(),l=new p(a,f,a,f+i.value.length);t.$tagHighlight&&l.compareRange(t.$backMarkers[t.$tagHighlight].range)!==0&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),l&&!t.$tagHighlight&&(t.$tagHighlight=t.addMarker(l,"ace_bracket","text"))},50)},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){if(this.$isFocused)return;this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e)},this.onBlur=function(e){if(!this.$isFocused)return;this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e)},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:Infinity;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(g.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message"),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e=this.getSession(),t;if(this.$highlightActiveLine){if(this.$selectionStyle!="line"||!this.selection.isMultiLine())t=this.getCursorPosition();this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(t=!1)}if(e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,Infinity);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null;if(!this.selection.isEmpty()){var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}else this.$updateHighlightActiveLine();var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(t.isEmpty()||t.isMultiLine())return;var n=t.start.column-1,r=t.end.column+1,i=e.getLine(t.start.row),s=i.length,o=i.substring(Math.max(n,0),Math.min(r,s));if(n>=0&&/^[\w\d]/.test(o)||r<=s&&/[\w\d]$/.test(o))return;o=i.substring(t.start.column,t.end.column);if(!/^[\w\d]+$/.test(o))return;var u=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o});return u},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText();return this._signal("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},this.$handlePaste=function(e){typeof e=="string"&&(e={text:e}),this._signal("paste",e);var t=e.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(t);else{var n=t.split(/\r\n|\r|\n/),r=this.selection.rangeList.ranges;if(n.length>r.length||n.length<2||!n[1])return this.commands.exec("insertstring",this,t);for(var i=r.length;i--;){var s=r[i];s.isEmpty()||this.session.remove(s),this.session.insert(s.start,n[i])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,r=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var s=r.transformAction(n.getState(i.row),"insertion",this,n,e);s&&(e!==s.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),e=s.text)}e=="	"&&(e=this.session.getTabString());if(!this.selection.isEmpty()){var o=this.getSelectionRange();i=this.session.remove(o),this.clearSelection()}else if(this.session.getOverwrite()){var o=new p.fromPoints(i,i);o.end.column+=e.length,this.session.remove(o)}if(e=="\n"||e=="\r\n"){var u=n.getLine(i.row);if(i.column>u.search(/\S|$/)){var a=u.substr(i.column).search(/\S|$/);n.doc.removeInLine(i.row,i.column,i.column+a)}}this.clearSelection();var f=i.column,l=n.getState(i.row),u=n.getLine(i.row),c=r.checkOutdent(l,u,e),h=n.insert(i,e);s&&s.selection&&(s.selection.length==2?this.selection.setSelectionRange(new p(i.row,f+s.selection[0],i.row,f+s.selection[1])):this.selection.setSelectionRange(new p(i.row+s.selection[0],s.selection[1],i.row+s.selection[2],s.selection[3])));if(n.getDocument().isNewLine(e)){var d=r.getNextLineIndent(l,u.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},d)}c&&r.autoOutdent(l,n,i.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&(e=="left"?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),i=n.getMode().transformAction(r,"deletion",this,n,t);if(t.end.column===0){var s=n.getTextRange(t);if(s[s.length-1]=="\n"){var o=n.getLine(t.end.row);/^\s+$/.test(o)&&(t.end.column=o.length)}}i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(!this.selection.isEmpty())return;var e=this.getCursorPosition(),t=e.column;if(t===0)return;var n=this.session.getLine(e.row),r,i;t<n.length?(r=n.charAt(t)+n.charAt(t-1),i=new p(e.row,t-1,e.row,t+1)):(r=n.charAt(t-1)+n.charAt(t-2),i=new p(e.row,t-2,e.row,t)),this.session.replace(i,r)},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"	");return}if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\s+$/.test(r)){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"	");return}}var i=e.getLine(t.start.row),o=t.start,u=e.getTabSize(),a=e.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var f=u-a%u,l=s.stringRepeat(" ",f);else{var f=a%u;while(i[t.start.column]==" "&&f)t.start.column--,f--;this.selection.setSelectionRange(t),l="	"}return this.insert(l)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"	")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){var e=this.$getSelectedRows(),t=this.session,n=[];for(i=e.first;i<=e.last;i++)n.push(t.getLine(i));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});var r=new p(0,0,0,0);for(var i=e.first;i<=e.last;i++){var s=t.getLine(i);r.start.row=i,r.end.row=i,r.end.column=s.length,t.replace(r,n[i-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;var r=this.session.getLine(e);while(n.lastIndex<t){var i=n.exec(r);if(i.index<=t&&i.index+i[0].length>=t){var s={value:i[0],start:i.index,end:i.index+i[0].length};return s}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new p(t,n-1,t,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var s=this.getNumberAt(t,n);if(s){var o=s.value.indexOf(".")>=0?s.start+s.value.indexOf(".")+1:s.end,u=s.start+s.value.length-o,a=parseFloat(s.value);a*=Math.pow(10,u),o!==s.end&&n<o?e*=Math.pow(10,s.end-n-1):e*=Math.pow(10,s.end-n),a+=e,a/=Math.pow(10,u);var f=a.toFixed(u),l=new p(t,s.start,t,s.end);this.session.replace(l,f),this.moveCursorTo(t,Math.max(s.start+1,n+f.length-s.value.length))}}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{var s=r?n.start:n.end,o=t.insert(s,t.getTextRange(n),!1);n.start=s,n.end=o,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,r,i=this.selection;if(!i.inMultiSelectMode||this.inVirtualSelectionMode){var s=i.toOrientedRange();n=this.$getSelectedRows(s),r=this.session.$moveLines(n.first,n.last,t?0:e),t&&e==-1&&(r=0),s.moveBy(r,0),i.fromOrientedRange(s)}else{var o=i.rangeList.ranges;i.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;var u=0,a=0,f=o.length;for(var l=0;l<f;l++){var c=l;o[l].moveBy(u,0),n=this.$getSelectedRows(o[l]);var h=n.first,p=n.last;while(++l<f){a&&o[l].moveBy(a,0);var d=this.$getSelectedRows(o[l]);if(t&&d.first!=p)break;if(!t&&d.first>p+1)break;p=d.last}l--,u=this.session.$moveLines(h,p,t?0:e),t&&e==-1&&(c=l+1);while(c<=l)o[c].moveBy(u,0),c++;t||(u=0),a+=u}i.fromOrientedRange(i.ranges[0]),i.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,i=e*Math.floor(r.height/r.lineHeight);this.$blockScrolling++,t===!0?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):t===!1&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection()),this.$blockScrolling--;var s=n.scrollTop;n.scrollBy(0,i*r.lineHeight),t!=null&&n.scrollCursorIntoView(null,.5),n.animateScrolling(s)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),r=new y(this.session,n.row,n.column),i=r.getCurrentToken(),s=i||r.stepForward();if(!s)return;var o,u=!1,a={},f=n.column-s.start,l,c={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(s.value.match(/[{}()\[\]]/g))for(;f<s.value.length&&!u;f++){if(!c[s.value[f]])continue;l=c[s.value[f]]+"."+s.type.replace("rparen","lparen"),isNaN(a[l])&&(a[l]=0);switch(s.value[f]){case"(":case"[":case"{":a[l]++;break;case")":case"]":case"}":a[l]--,a[l]===-1&&(o="bracket",u=!0)}}else s&&s.type.indexOf("tag-name")!==-1&&(isNaN(a[s.value])&&(a[s.value]=0),i.value==="<"?a[s.value]++:i.value==="</"&&a[s.value]--,a[s.value]===-1&&(o="tag",u=!0));u||(i=s,s=r.stepForward(),f=0)}while(s&&!u);if(!o)return;var h,d;if(o==="bracket"){h=this.session.getBracketRange(n);if(!h){h=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+f-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+f-1),d=h.start;if(t||d.row===n.row&&Math.abs(d.column-n.column)<2)h=this.session.getBracketRange(d)}}else if(o==="tag"){if(!s||s.type.indexOf("tag-name")===-1)return;var v=s.value;h=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2);if(h.compare(n.row,n.column)===0){u=!1;do s=i,i=r.stepBackward(),i&&(i.type.indexOf("tag-close")!==-1&&h.setEnd(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1),s.value===v&&s.type.indexOf("tag-name")!==-1&&(i.value==="<"?a[v]++:i.value==="</"&&a[v]--,a[v]===0&&(u=!0)));while(i&&!u)}s&&s.type.indexOf("tag-name")&&(d=h.start,d.row==n.row&&Math.abs(d.column-n.column)<2&&(d=h.end))}d=h&&h.cursor||d,d&&(e?h&&t?this.selection.setRange(h):h&&h.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(d.row,d.column):this.selection.moveTo(d.row,d.column))},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.$blockScrolling-=1,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorLeft()}this.clearSelection()},this.navigateRight=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorRight()}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),n!==null&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;this.$blockScrolling+=1;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var s=n.length-1;s>=0;--s)this.$tryReplace(n[s],e)&&r++;return this.selection.setSelectionRange(i),this.$blockScrolling-=1,r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),t!==null?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),typeof e=="string"||e instanceof RegExp?t.needle=e:typeof e=="object"&&r.mixin(t,e);var i=this.selection.getRange();t.needle==null&&(e=this.session.getTextRange(i)||this.$search.$options.needle,e||(i=this.session.getWordRange(i.start.row,i.start.column),e=this.session.getTextRange(i)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:i});var s=this.$search.find(this.session);if(t.preventScroll)return s;if(s)return this.revealRange(s,n),s;t.backwards?i.start=i.end:i.end=i.start,this.selection.setRange(i)},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!==!1&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(e){if(!e)return;var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var s=this.on("changeSelection",function(){r=!0}),o=this.renderer.on("beforeRender",function(){r&&(t=n.renderer.container.getBoundingClientRect())}),u=this.renderer.on("afterRender",function(){if(r&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,s=e.$cursorLayer.$pixelPos,o=e.layerConfig,u=s.top-o.offset;s.top>=0&&u+t.top<0?r=!0:s.top<o.height&&s.top+t.top+o.lineHeight>window.innerHeight?r=!1:r=null,r!=null&&(i.style.top=u+"px",i.style.left=s.left+"px",i.style.height=o.lineHeight+"px",i.scrollIntoView(r)),r=t=null}});this.setAutoScrollEditorIntoView=function(e){if(e)return;delete this.setAutoScrollEditorIntoView,this.removeEventListener("changeSelection",s),this.renderer.removeEventListener("afterRender",u),this.renderer.removeEventListener("beforeRender",o)}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;if(!t)return;t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&e!="wide",i.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e))}}).call(b.prototype),g.defineOptions(b.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"}),t.Editor=b}),define("ace/undomanager",["require","exports","module"],function(e,t,n){"use strict";var r=function(){this.reset()};(function(){function e(e){return{action:e.action,start:e.start,end:e.end,lines:e.lines.length==1?null:e.lines,text:e.lines.length==1?e.lines[0]:null}}function t(e){return{action:e.action,start:e.start,end:e.end,lines:e.lines||[e.text]}}function n(e,t){var n=new Array(e.length);for(var r=0;r<e.length;r++){var i=e[r],s={group:i.group,deltas:new Array(i.length)};for(var o=0;o<i.deltas.length;o++){var u=i.deltas[o];s.deltas[o]=t(u)}n[r]=s}return n}this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],e.merge&&this.hasUndo()&&(this.dirtyCounter--,t=this.$undoStack.pop().concat(t)),this.$undoStack.push(t),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(e){var t=this.$undoStack.pop(),n=null;return t&&(n=this.$doc.undoChanges(t,e),this.$redoStack.push(t),this.dirtyCounter--),n},this.redo=function(e){var t=this.$redoStack.pop(),n=null;return t&&(n=this.$doc.redoChanges(this.$deserializeDeltas(t),e),this.$undoStack.push(t),this.dirtyCounter++),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return this.dirtyCounter===0},this.$serializeDeltas=function(t){return n(t,e)},this.$deserializeDeltas=function(e){return n(e,t)}}).call(r.prototype),t.UndoManager=r}),define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,u=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){i.implement(this,o),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.row,i=this.$annotations[r];i||(i=this.$annotations[r]={text:[]});var o=n.text;o=o?s.escapeHTML(o):n.html||"",i.text.indexOf(o)===-1&&i.text.push(o);var u=n.type;u=="error"?i.className=" ace_error":u=="warning"&&i.className!=" ace_error"?i.className=" ace_warning":u=="info"&&!i.className&&(i.className=" ace_info")}},this.$updateAnnotations=function(e){if(!this.$annotations.length)return;var t=e.start.row,n=e.end.row-t;if(n!==0)if(e.action=="remove")this.$annotations.splice(t,n+1,null);else{var r=new Array(n+1);r.unshift(t,1),this.$annotations.splice.apply(this.$annotations,r)}},this.update=function(e){var t=this.session,n=e.firstRow,i=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1),s=t.getNextFoldLine(n),o=s?s.start.row:Infinity,u=this.$showFoldWidgets&&t.foldWidgets,a=t.$breakpoints,f=t.$decorations,l=t.$firstLineNumber,c=0,h=t.gutterRenderer||this.$renderer,p=null,d=-1,v=n;for(;;){v>o&&(v=s.end.row+1,s=t.getNextFoldLine(v,s),o=s?s.start.row:Infinity);if(v>i){while(this.$cells.length>d+1)p=this.$cells.pop(),this.element.removeChild(p.element);break}p=this.$cells[++d],p||(p={element:null,textNode:null,foldWidget:null},p.element=r.createElement("div"),p.textNode=document.createTextNode(""),p.element.appendChild(p.textNode),this.element.appendChild(p.element),this.$cells[d]=p);var m="ace_gutter-cell ";a[v]&&(m+=a[v]),f[v]&&(m+=f[v]),this.$annotations[v]&&(m+=this.$annotations[v].className),p.element.className!=m&&(p.element.className=m);var g=t.getRowLength(v)*e.lineHeight+"px";g!=p.element.style.height&&(p.element.style.height=g);if(u){var y=u[v];y==null&&(y=u[v]=t.getFoldWidget(v))}if(y){p.foldWidget||(p.foldWidget=r.createElement("span"),p.element.appendChild(p.foldWidget));var m="ace_fold-widget ace_"+y;y=="start"&&v==o&&v<s.end.row?m+=" ace_closed":m+=" ace_open",p.foldWidget.className!=m&&(p.foldWidget.className=m);var g=e.lineHeight+"px";p.foldWidget.style.height!=g&&(p.foldWidget.style.height=g)}else p.foldWidget&&(p.element.removeChild(p.foldWidget),p.foldWidget=null);var b=c=h?h.getText(t,v):v+l;b!=p.textNode.data&&(p.textNode.data=b),v++}this.element.style.height=e.minHeight+"px";if(this.$fixedWidth||t.$useWrapMode)c=t.getLength()+l;var w=h?h.getWidth(t,c,e):c.toString().length*e.characterWidth,E=this.$padding||this.$computePadding();w+=E.left+E.right,w!==this.gutterWidth&&!isNaN(w)&&(this.gutterWidth=w,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",w))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1||0,this.$padding.right=parseInt(e.paddingRight)||0,this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();if(e.x<t.left+n.left)return"markers";if(this.$showFoldWidgets&&e.x>n.right-t.right)return"foldWidgets"}}).call(u.prototype),t.Gutter=u}),define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../range").Range,i=e("../lib/dom"),s=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){function e(e,t,n,r){return(e?1:0)|(t?2:0)|(n?4:0)|(r?8:0)}this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){var e=e||this.config;if(!e)return;this.config=e;var t=[];for(var n in this.markers){var r=this.markers[n];if(!r.range){r.update(t,this,this.session,e);continue}var i=r.range.clipRows(e.firstRow,e.lastRow);if(i.isEmpty())continue;i=i.toScreenRange(this.session);if(r.renderer){var s=this.$getTop(i.start.row,e),o=this.$padding+i.start.column*e.characterWidth;r.renderer(t,i,o,s,e)}else r.type=="fullLine"?this.drawFullLineMarker(t,i,r.clazz,e):r.type=="screenLine"?this.drawScreenLineMarker(t,i,r.clazz,e):i.isMultiLine()?r.type=="text"?this.drawTextMarker(t,i,r.clazz,e):this.drawMultiLineMarker(t,i,r.clazz,e):this.drawSingleLineMarker(t,i,r.clazz+" ace_start"+" ace_br15",e)}this.element.innerHTML=t.join("")},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(t,n,i,s,o){var u=this.session,a=n.start.row,f=n.end.row,l=a,c=0,h=0,p=u.getScreenLastRowColumn(l),d=new r(l,n.start.column,l,h);for(;l<=f;l++)d.start.row=d.end.row=l,d.start.column=l==a?n.start.column:u.getRowWrapIndent(l),d.end.column=p,c=h,h=p,p=l+1<f?u.getScreenLastRowColumn(l+1):l==f?0:n.end.column,this.drawSingleLineMarker(t,d,i+(l==a?" ace_start":"")+" ace_br"+e(l==a||l==a+1&&n.start.column,c<h,h>p,l==f),s,l==f?0:1,o)},this.drawMultiLineMarker=function(e,t,n,r,i){var s=this.$padding,o=r.lineHeight,u=this.$getTop(t.start.row,r),a=s+t.start.column*r.characterWidth;i=i||"",e.push("<div class='",n," ace_br1 ace_start' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",a,"px;",i,"'></div>"),u=this.$getTop(t.end.row,r);var f=t.end.column*r.characterWidth;e.push("<div class='",n," ace_br12' style='","height:",o,"px;","width:",f,"px;","top:",u,"px;","left:",s,"px;",i,"'></div>"),o=(t.end.row-t.start.row-1)*r.lineHeight;if(o<=0)return;u=this.$getTop(t.start.row+1,r);var l=(t.start.column?1:0)|(t.end.column?0:8);e.push("<div class='",n,l?" ace_br"+l:"","' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",s,"px;",i,"'></div>")},this.drawSingleLineMarker=function(e,t,n,r,i,s){var o=r.lineHeight,u=(t.end.column+(i||0)-t.start.column)*r.characterWidth,a=this.$getTop(t.start.row,r),f=this.$padding+t.start.column*r.characterWidth;e.push("<div class='",n,"' style='","height:",o,"px;","width:",u,"px;","top:",a,"px;","left:",f,"px;",s||"","'></div>")},this.drawFullLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,r)-s),e.push("<div class='",n,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",i||"","'></div>")},this.drawScreenLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;e.push("<div class='",n,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",i||"","'></div>")}}).call(s.prototype),t.Marker=s}),define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,a=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){r.implement(this,u),this.EOF_CHAR="\u00b6",this.EOL_CHAR_LF="\u00ac",this.EOL_CHAR_CRLF="\u00a4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\u00b7",this.$padding=0,this.$updateEolChar=function(){var e=this.session.doc.getNewLineCharacter()=="\n"?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;var t=this.$tabStrings=[0];for(var n=1;n<e+1;n++)this.showInvisibles?t.push("<span class='ace_invisible ace_invisible_tab'>"+s.stringRepeat(this.TAB_CHAR,n)+"</span>"):t.push(s.stringRepeat(" ",n));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r="ace_indent-guide",i="",o="";if(this.showInvisibles){r+=" ace_invisible",i=" ace_invisible_space",o=" ace_invisible_tab";var u=s.stringRepeat(this.SPACE_CHAR,this.tabSize),a=s.stringRepeat(this.TAB_CHAR,this.tabSize)}else var u=s.stringRepeat(" ",this.tabSize),a=u;this.$tabStrings[" "]="<span class='"+r+i+"'>"+u+"</span>",this.$tabStrings["	"]="<span class='"+r+o+"'>"+a+"</span>"}},this.updateLines=function(e,t,n){(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)&&this.scrollLines(e),this.config=e;var r=Math.max(t,e.firstRow),i=Math.min(n,e.lastRow),s=this.element.childNodes,o=0;for(var u=e.firstRow;u<r;u++){var a=this.session.getFoldLine(u);if(a){if(a.containsRow(r)){r=a.start.row;break}u=a.end.row}o++}var u=r,a=this.session.getNextFoldLine(u),f=a?a.start.row:Infinity;for(;;){u>f&&(u=a.end.row+1,a=this.session.getNextFoldLine(u,a),f=a?a.start.row:Infinity);if(u>i)break;var l=s[o++];if(l){var c=[];this.$renderLine(c,u,!this.$useLineGroups(),u==f?a:!1),l.style.height=e.lineHeight*this.session.getRowLength(u)+"px",l.innerHTML=c.join("")}u++}},this.scrollLines=function(e){var t=this.config;this.config=e;if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var n=this.element;if(t.firstRow<e.firstRow)for(var r=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);r>0;r--)n.removeChild(n.firstChild);if(t.lastRow>e.lastRow)for(var r=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);r>0;r--)n.removeChild(n.lastChild);if(e.firstRow<t.firstRow){var i=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)}if(e.lastRow>t.lastRow){var i=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);n.appendChild(i)}},this.$renderLinesFragment=function(e,t,n){var r=this.element.ownerDocument.createDocumentFragment(),s=t,o=this.session.getNextFoldLine(s),u=o?o.start.row:Infinity;for(;;){s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:Infinity);if(s>n)break;var a=i.createElement("div"),f=[];this.$renderLine(f,s,!1,s==u?o:!1),a.innerHTML=f.join("");if(this.$useLineGroups())a.className="ace_line_group",r.appendChild(a),a.style.height=e.lineHeight*this.session.getRowLength(s)+"px";else while(a.firstChild)r.appendChild(a.firstChild);s++}return r},this.update=function(e){this.config=e;var t=[],n=e.firstRow,r=e.lastRow,i=n,s=this.session.getNextFoldLine(i),o=s?s.start.row:Infinity;for(;;){i>o&&(i=s.end.row+1,s=this.session.getNextFoldLine(i,s),o=s?s.start.row:Infinity);if(i>r)break;this.$useLineGroups()&&t.push("<div class='ace_line_group' style='height:",e.lineHeight*this.session.getRowLength(i),"px'>"),this.$renderLine(t,i,!1,i==o?s:!1),this.$useLineGroups()&&t.push("</div>"),i++}this.element.innerHTML=t.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,r){var i=this,o=/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,u=function(e,n,r,o,u){if(n)return i.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+s.stringRepeat(i.SPACE_CHAR,e.length)+"</span>":e;if(e=="&")return"&#38;";if(e=="<")return"&#60;";if(e==">")return"&#62;";if(e=="	"){var a=i.session.getScreenTabSize(t+o);return t+=a-1,i.$tabStrings[a]}if(e=="\u3000"){var f=i.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",l=i.showInvisibles?i.SPACE_CHAR:"";return t+=1,"<span class='"+f+"' style='width:"+i.config.characterWidth*2+"px'>"+l+"</span>"}return r?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+i.SPACE_CHAR+"</span>":(t+=1,"<span class='ace_cjk' style='width:"+i.config.characterWidth*2+"px'>"+e+"</span>")},a=r.replace(o,u);if(!this.$textToken[n.type]){var f="ace_"+n.type.replace(/\./g," ace_"),l="";n.type=="fold"&&(l=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",f,"'",l,">",a,"</span>")}else e.push(a);return t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);return r<=0||r>=n?t:t[0]==" "?(r-=r%this.tabSize,e.push(s.stringRepeat(this.$tabStrings[" "],r/this.tabSize)),t.substr(r)):t[0]=="	"?(e.push(s.stringRepeat(this.$tabStrings["	"],r)),t.substr(r)):t},this.$renderWrappedLine=function(e,t,n,r){var i=0,o=0,u=n[0],a=0;for(var f=0;f<t.length;f++){var l=t[f],c=l.value;if(f==0&&this.displayIndentGuides){i=c.length,c=this.renderIndentGuide(e,c,u);if(!c)continue;i-=c.length}if(i+c.length<u)a=this.$renderToken(e,a,l,c),i+=c.length;else{while(i+c.length>=u)a=this.$renderToken(e,a,l,c.substring(0,u-i)),c=c.substring(u-i),i=u,r||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),e.push(s.stringRepeat("\u00a0",n.indent)),o++,a=0,u=n[o]||Number.MAX_VALUE;c.length!=0&&(i+=c.length,a=this.$renderToken(e,a,l,c))}}},this.$renderSimpleLine=function(e,t){var n=0,r=t[0],i=r.value;this.displayIndentGuides&&(i=this.renderIndentGuide(e,i)),i&&(n=this.$renderToken(e,n,r,i));for(var s=1;s<t.length;s++)r=t[s],i=r.value,n=this.$renderToken(e,n,r,i)},this.$renderLine=function(e,t,n,r){!r&&r!=0&&(r=this.session.getFoldLine(t));if(r)var i=this.$getFoldLineTokens(t,r);else var i=this.session.getTokens(t);n||e.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(t)),"px'>");if(i.length){var s=this.session.getRowSplitData(t);s&&s.length?this.$renderWrappedLine(e,i,s,n):this.$renderSimpleLine(e,i)}this.showInvisibles&&(r&&(t=r.end.row),e.push("<span class='ace_invisible ace_invisible_eol'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),n||e.push("</div>")},this.$getFoldLineTokens=function(e,t){function i(e,t,n){var i=0,s=0;while(s+e[i].value.length<t){s+=e[i].value.length,i++;if(i==e.length)return}if(s!=t){var o=e[i].value.substring(t-s);o.length>n-t&&(o=o.substring(0,n-t)),r.push({type:e[i].type,value:o}),s=t+o.length,i+=1}while(s<n&&i<e.length){var o=e[i].value;o.length+s>n?r.push({type:e[i].type,value:o.substring(0,n-s)}):r.push(e[i]),s+=o.length,i+=1}}var n=this.session,r=[],s=n.getTokens(e);return t.walk(function(e,t,o,u,a){e!=null?r.push({type:"fold",value:e}):(a&&(s=n.getTokens(t)),s.length&&i(s,u,o))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),t.Text=a}),define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../lib/dom"),i,s=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),i===undefined&&(i=!("opacity"in this.element.style)),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=(i?this.$updateVisibility:this.$updateOpacity).bind(this)};(function(){this.$updateVisibility=function(e){var t=this.cursors;for(var n=t.length;n--;)t[n].style.visibility=e?"":"hidden"},this.$updateOpacity=function(e){var t=this.cursors;for(var n=t.length;n--;)t[n].style.opacity=e?"":"0"},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&!i&&(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),e(!0);if(!this.isBlinking||!this.blinkInterval||!this.isVisible)return;this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),r=this.$padding+n.column*this.config.characterWidth,i=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:i}},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,r=0;if(t===undefined||t.length===0)t=[{cursor:null}];for(var n=0,i=t.length;n<i;n++){var s=this.getPixelPosition(t[n].cursor,!0);if((s.top>e.height+e.offset||s.top<0)&&n>1)continue;var o=(this.cursors[r++]||this.addCursor()).style;this.drawCursor?this.drawCursor(o,s,e,t[n],this.session):(o.left=s.left+"px",o.top=s.top+"px",o.width=e.characterWidth+"px",o.height=e.lineHeight+"px")}while(this.cursors.length>r)this.removeCursor();var u=this.session.getOverwrite();this.$setOverwrite(u),this.$pixelPos=s,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(s.prototype),t.Cursor=s}),define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,u=function(e){this.element=i.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)};(function(){r.implement(this,o),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e}}).call(u.prototype);var a=function(e,t){u.call(this,e),this.scrollTop=0,t.$scrollbarWidth=this.width=i.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};r.inherits(a,u),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=function(e){this.inner.style.height=e+"px"},this.setScrollHeight=function(e){this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=e)}}.call(a.prototype);var f=function(e,t){u.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(f,u),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(f.prototype),t.ScrollBar=a,t.ScrollBarV=a,t.ScrollBarH=f,t.VScrollBar=a,t.HScrollBar=f}),define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var r=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window};(function(){this.schedule=function(e){this.changes=this.changes|e;if(!this.pending&&this.changes){this.pending=!0;var t=this;r.nextFrame(function(){t.pending=!1;var e;while(e=t.changes)t.changes=0,t.onRender(e)},this.window)}}}).call(i.prototype),t.RenderLoop=i}),define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,a=0,f=t.FontMetrics=function(e,t){this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),a||this.$testFractionalRect(),this.$measureNode.innerHTML=s.stringRepeat("X",a),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){r.implement(this,u),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var e=i.createElement("div");this.$setMeasureNodeStyles(e.style),e.style.width="0.2px",document.documentElement.appendChild(e);var t=e.getBoundingClientRect().width;t>0&&t<1?a=50:a=100,e.parentNode.removeChild(e)},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",o.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(a===50){var e=null;try{e=this.$measureNode.getBoundingClientRect()}catch(t){e={width:0,height:0}}var n={height:e.height,width:e.width/a}}else var n={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/a};return n.width===0||n.height===0?null:n},this.$measureCharWidth=function(e){this.$main.innerHTML=s.stringRepeat(e,a);var t=this.$main.getBoundingClientRect();return t.width/a},this.getCharacterWidth=function(e){var t=this.charSizes[e];return t===undefined&&(this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(f.prototype)}),define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./config"),o=e("./lib/useragent"),u=e("./layer/gutter").Gutter,a=e("./layer/marker").Marker,f=e("./layer/text").Text,l=e("./layer/cursor").Cursor,c=e("./scrollbar").HScrollBar,h=e("./scrollbar").VScrollBar,p=e("./renderloop").RenderLoop,d=e("./layer/font_metrics").FontMetrics,v=e("./lib/event_emitter").EventEmitter,m='.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}';i.importCssString(m,"ace_editor.css");var g=function(e,t){var n=this;this.container=e||i.createElement("div"),this.$keepTextAreaAtCursor=!o.isOldIE,i.addCssClass(this.container,"ace_editor"),this.setTheme(t),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var r=this.$textLayer=new f(this.content);this.canvas=r.element,this.$markerFront=new a(this.content),this.$cursorLayer=new l(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new d(this.container,500),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new p(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),s.resetOptions(this),s._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,v),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e);if(!e)return;this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode)},this.updateLines=function(e,t,n){t===undefined&&(t=Infinity),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t};if(this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}if(this.$changedLines.firstRow>this.layerConfig.lastRow)return;this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,r){if(this.resizing>2)return;this.resizing>0?this.resizing++:this.resizing=e?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var s=this.$updateCachedSize(e,t,n,r);if(!this.$size.scrollerHeight||!n&&!r)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(s|this.$changes,!0):this.$loop.schedule(s|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null},this.$updateCachedSize=function(e,t,n,r){r-=this.$extraHeight||0;var i=0,s=this.$size,o={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};r&&(e||s.height!=r)&&(s.height=r,i|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",i|=this.CHANGE_SCROLL);if(n&&(e||s.width!=n)){i|=this.CHANGE_SIZE,s.width=n,t==null&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,this.scrollBarH.element.style.left=this.scroller.style.left=t+"px",s.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px";if(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)i|=this.CHANGE_FULL}return s.$dirty=!n||!r,i&&this._signal("resize",o),i},this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-this.$padding*2,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var e=this.$cursorLayer.$pixelPos,t=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var n=this.session.selection.getCursor();n.column=0,e=this.$cursorLayer.getPixelPosition(n,!0),t*=this.session.getRowLength(n.row)}this.$gutterLineHighlight.style.top=e.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=t+"px"},this.$updatePrintMargin=function(){if(!this.$showPrintMargin&&!this.$printMarginEl)return;if(!this.$printMarginEl){var e=i.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$keepTextAreaAtCursor)return;var e=this.layerConfig,t=this.$cursorLayer.$pixelPos.top,n=this.$cursorLayer.$pixelPos.left;t-=e.offset;var r=this.textarea.style,i=this.lineHeight;if(t<0||t>e.height-i){r.top=r.left="0";return}var s=this.characterWidth;if(this.$composition){var o=this.textarea.value.replace(/^\x01+/,"");s*=this.session.$getStringScreenWidth(o)[0]+2,i+=2}n-=this.scrollLeft,n>this.$size.scrollerWidth-s&&(n=this.$size.scrollerWidth-s),n+=this.gutterWidth,r.height=i+"px",r.width=s+"px",r.left=Math.min(n,this.$size.scrollerWidth-s)+"px",r.top=Math.min(t,this.$size.height-i)+"px"},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var i=this.scrollMargin;i.top=e|0,i.bottom=t|0,i.right=r|0,i.left=n|0,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){this.$changes&&(e|=this.$changes,this.$changes=0);if(!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t){this.$changes|=e;return}if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){e|=this.$computeLayerConfig();if(n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;r>0&&(this.scrollTop=r,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-n.offset+"px",this.content.style.marginTop=-n.offset+"px",this.content.style.width=n.width+2*this.$padding+"px",this.content.style.height=n.minHeight+"px"}e&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left");if(e&this.CHANGE_FULL){this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this._signal("afterRender");return}if(e&this.CHANGE_SCROLL){e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),this._signal("afterRender");return}e&this.CHANGE_TEXT?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender")},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.max((this.$minLines||1)*this.lineHeight,Math.min(t,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight());var r=e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||r!=this.$vScroll){r!=this.$vScroll&&(this.$vScroll=r,this.scrollBarV.setVisible(r));var i=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,i,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,r=this.session.getScreenLength(),i=r*this.lineHeight,s=this.$getLongestLine(),o=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-s-2*this.$padding<0),u=this.$horizScroll!==o;u&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var f=this.scrollTop%this.lineHeight,l=t.scrollerHeight+this.lineHeight,c=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=c;var h=this.scrollMargin;this.session.setScrollTop(Math.max(-h.top,Math.min(this.scrollTop,i-t.scrollerHeight+h.bottom))),this.session.setScrollLeft(Math.max(-h.left,Math.min(this.scrollLeft,s+2*this.$padding-t.scrollerWidth+h.right)));var p=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i+c<0||this.scrollTop>h.top),d=a!==p;d&&(this.$vScroll=p,this.scrollBarV.setVisible(p));var v=Math.ceil(l/this.lineHeight)-1,m=Math.max(0,Math.round((this.scrollTop-f)/this.lineHeight)),g=m+v,y,b,w=this.lineHeight;m=e.screenToDocumentRow(m,0);var E=e.getFoldLine(m);E&&(m=E.start.row),y=e.documentToScreenRow(m,0),b=e.getRowLength(m)*w,g=Math.min(e.screenToDocumentRow(g,0),e.getLength()-1),l=t.scrollerHeight+e.getRowLength(g)*w+b,f=this.scrollTop-y*w;var S=0;this.layerConfig.width!=s&&(S=this.CHANGE_H_SCROLL);if(u||d)S=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),d&&(s=this.$getLongestLine());return this.layerConfig={width:s,padding:this.$padding,firstRow:m,firstRowScreen:y,lastRow:g,lineHeight:w,characterWidth:this.characterWidth,minHeight:l,maxHeight:i,offset:f,gutterOffset:Math.max(0,Math.ceil((f+t.height-t.scrollerHeight)/w)),height:this.$size.scrollerHeight},S},this.$updateLines=function(){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(e>n.lastRow+1)return;if(t<n.firstRow)return;if(t===Infinity){this.$showGutter&&this.$gutterLayer.update(n),this.$textLayer.update(n);return}return this.$textLayer.updateLines(n,e,t),!0},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(this.$size.scrollerHeight===0)return;var r=this.$cursorLayer.getPixelPosition(e),i=r.left,s=r.top,o=n&&n.top||0,u=n&&n.bottom||0,a=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;a+o>s?(t&&(s-=t*this.$size.scrollerHeight),s===0&&(s=-this.scrollMargin.top),this.session.setScrollTop(s)):a+this.$size.scrollerHeight-u<s+this.lineHeight&&(t&&(s+=t*this.$size.scrollerHeight),this.session.setScrollTop(s+this.lineHeight-this.$size.scrollerHeight));var f=this.scrollLeft;f>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):f+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):f<=this.$padding&&i-f<this.characterWidth&&this.session.setScrollLeft(0)},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){typeof e=="number"&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(t||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,r=this.STEPS,i=[],s=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;n<r;++n)i.push(s(n/this.STEPS,e,t-e));return i},this.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}),s=i.top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),n!==!1&&this.animateScrolling(o,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(!this.$animatedScroll)return;var r=this;if(e==n)return;if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length){e=i[0];if(e==n)return}}var s=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:s},clearInterval(this.$timer),r.session.setScrollTop(s.shift()),r.session.$scrollTop=n,this.$timer=setInterval(function(){s.length?(r.session.setScrollTop(s.shift()),r.session.$scrollTop=n):n!=null?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())},10)},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){if(t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top)return!0;if(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom)return!0;if(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left)return!0;if(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},this.pixelToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=(e+this.scrollLeft-n.left-this.$padding)/this.characterWidth,i=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),s=Math.round(r);return{row:i,column:s,side:r-s>0?1:-1}},this.screenToTextCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=Math.round((e+this.scrollLeft-n.left-this.$padding)/this.characterWidth),i=(t+this.scrollTop-n.top)/this.lineHeight;return this.session.screenToDocumentPosition(i,Math.max(r,0))},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+Math.round(r.column*this.characterWidth),s=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+s-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(e){this.$moveTextAreaToCursor()},this.hideComposition=function(){if(!this.$composition)return;i.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null},this.setTheme=function(e,t){function o(r){if(n.$themeId!=e)return t&&t();if(!r.cssClass)return;i.importCssString(r.cssText,r.cssClass,n.container.ownerDocument),n.theme&&i.removeCssClass(n.container,n.theme.cssClass);var s="padding"in r?r.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&s!=n.$padding&&n.setPadding(s),n.$theme=r.cssClass,n.theme=r,i.addCssClass(n.container,r.cssClass),i.setCssClass(n.container,"ace_dark",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:r}),t&&t()}var n=this;this.$themeId=e,n._dispatchEvent("themeChange",{theme:e});if(!e||typeof e=="string"){var r=e||this.$options.theme.initialValue;s.loadModule(["theme",r],o)}else o(e)},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){i.setCssClass(this.container,e,t!==!1)},this.unsetStyle=function(e){i.removeCssClass(this.container,e)},this.setCursorStyle=function(e){this.scroller.style.cursor!=e&&(this.scroller.style.cursor=e)},this.setMouseCursor=function(e){this.scroller.style.cursor=e},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(g.prototype),s.defineOptions(g.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){typeof e=="number"&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:!0},showLineNumbers:{set:function(e){this.$gutterLayer.setShowLineNumbers(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){if(!this.$gutterLineHighlight){this.$gutterLineHighlight=i.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",this.$gutter.appendChild(this.$gutterLineHighlight);return}this.$gutterLineHighlight.style.display=e?"":"none",this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight()},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(e){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){typeof e=="number"&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.updateFull()}},scrollPastEnd:{set:function(e){e=+e||0;if(this.$scrollPastEnd==e)return;this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),t.VirtualRenderer=g}),define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../lib/net"),s=e("../lib/event_emitter").EventEmitter,o=e("../config"),u=function(t,n,r,i){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl);if(o.get("packaged")||!e.toUrl)i=i||o.moduleUrl(n,"worker");else{var s=this.$normalizePath;i=i||s(e.toUrl("ace/worker/worker.js",null,"_"));var u={};t.forEach(function(t){u[t]=s(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(i)}catch(a){if(!(a instanceof window.DOMException))throw a;var f=this.$workerBlob(i),l=window.URL||window.webkitURL,c=l.createObjectURL(f);this.$worker=new Worker(c),l.revokeObjectURL(c)}this.$worker.postMessage({init:!0,tlns:u,module:n,classname:r}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,s),this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return i.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),e.action=="insert"?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;if(!e)return;this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e})},this.$workerBlob=function(e){var t="importScripts('"+i.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(n){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,s=new r;return s.append(t),s.getBlob("application/javascript")}}}).call(u.prototype);var a=function(e,t,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var r=null,i=!1,u=Object.create(s),a=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){a.messageBuffer.push(e),r&&(i?setTimeout(f):f())},this.setEmitSync=function(e){i=e};var f=function(){var e=a.messageBuffer.shift();e.command?r[e.command].apply(r,e.args):e.event&&u._signal(e.event,e.data)};u.postMessage=function(e){a.onMessage({data:e})},u.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},u.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},o.loadModule(["worker",t],function(e){r=new e[n](u);while(a.messageBuffer.length)f()})};a.prototype=u.prototype,t.UIWorkerClient=a,t.WorkerClient=u}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var r=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),o=function(e,t,n,r,i,s){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=n;var u=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session,i=this.$pos;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(i.row,i.column),this.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(t){n.removeMarker(e.markerId),e.markerId=n.addMarker(new r(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(n){var r=t.createAnchor(n.row,n.column);e.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(this.othersActive)return;var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1),n.on("change",function(i){e.removeMarker(n.markerId),n.markerId=e.addMarker(new r(i.value.row,i.value.column,i.value.row,i.value.column+t.length),t.othersClass,null,!1)})})},this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)},this.onUpdate=function(e){var t=e;if(t.start.row!==t.end.row)return;if(t.start.row!==this.pos.row)return;if(this.$updating)return;this.$updating=!0;var n=e.action==="insert"?t.end.column-t.start.column:t.start.column-t.end.column;if(t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1){var i=t.start.column-this.pos.column;this.length+=n;if(!this.session.$fromUndo){if(e.action==="insert")for(var s=this.others.length-1;s>=0;s--){var o=this.others[s],u={row:o.row,column:o.column+i};o.row===t.start.row&&t.start.column<o.column&&(u.column+=n),this.doc.insertMergedLines(u,e.lines)}else if(e.action==="remove")for(var s=this.others.length-1;s>=0;s--){var o=this.others[s],u={row:o.row,column:o.column+i};o.row===t.start.row&&t.start.column<o.column&&(u.column+=n),this.doc.remove(new r(u.row,u.column,u.row,u.column-n))}t.start.column===this.pos.column&&e.action==="insert"?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-n);for(var e=0;e<this.others.length;e++){var r=this.others[e],i={row:r.row,column:r.column-n};r.row===t.start.row&&t.start.column<r.column&&(i.column+=n),r.setPosition(i.row,i.column)}}.bind(this),0):t.start.column===this.pos.column&&e.action==="remove"&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var r=this.others[e];r.row===t.start.row&&t.start.column<r.column&&r.setPosition(r.row,r.column-n)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var s=0;s<this.others.length;s++)this.others[s]._emit("change",{value:this.others[s]})}this.$updating=!1},this.onCursorChange=function(e){if(this.$updating||!this.session)return;var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var e=0;e<this.others.length;e++)this.others[e].detach();this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth===-1)throw Error("Canceling placeholders only supported with undo manager attached to session.");var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth;for(var n=0;n<t;n++)e.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}).call(o.prototype),t.PlaceHolder=o}),define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){function s(e,t){return e.row==t.row&&e.column==t.column}function o(e){var t=e.domEvent,n=t.altKey,o=t.shiftKey,u=t.ctrlKey,a=e.getAccelKey(),f=e.getButton();u&&i.isMac&&(f=t.button);if(e.editor.inMultiSelectMode&&f==2){e.editor.textInput.onContextMenu(e.domEvent);return}if(!u&&!n&&!a){f===0&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode();return}if(f!==0)return;var l=e.editor,c=l.selection,h=l.inMultiSelectMode,p=e.getDocumentPosition(),d=c.getCursor(),v=e.inSelection()||c.isEmpty()&&s(p,d),m=e.x,g=e.y,y=function(e){m=e.clientX,g=e.clientY},b=l.session,w=l.renderer.pixelToScreenCoordinates(m,g),E=w,S;if(l.$mouseHandler.$enableJumpToDef)u&&n||a&&n?S=o?"block":"add":n&&l.$blockSelectEnabled&&(S="block");else if(a&&!n){S="add";if(!h&&o)return}else n&&l.$blockSelectEnabled&&(S="block");S&&i.isMac&&t.ctrlKey&&l.$mouseHandler.cancelContextMenu();if(S=="add"){if(!h&&v)return;if(!h){var x=c.toOrientedRange();l.addSelectionMarker(x)}var T=c.rangeList.rangeAtPoint(p);l.$blockScrolling++,l.inVirtualSelectionMode=!0,o&&(T=null,x=c.ranges[0]||x,l.removeSelectionMarker(x)),l.once("mouseup",function(){var e=c.toOrientedRange();T&&e.isEmpty()&&s(T.cursor,e.cursor)?c.substractPoint(e.cursor):(o?c.substractPoint(x.cursor):x&&(l.removeSelectionMarker(x),c.addRange(x)),c.addRange(e)),l.$blockScrolling--,l.inVirtualSelectionMode=!1})}else if(S=="block"){e.stop(),l.inVirtualSelectionMode=!0;var N,C=[],k=function(){var e=l.renderer.pixelToScreenCoordinates(m,g),t=b.screenToDocumentPosition(e.row,e.column);if(s(E,e)&&s(t,c.lead))return;E=e,l.$blockScrolling++,l.selection.moveToPosition(t),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(C),C=c.rectangularRangeBlock(E,w),l.$mouseHandler.$clickSelection&&C.length==1&&C[0].isEmpty()&&(C[0]=l.$mouseHandler.$clickSelection.clone()),C.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers(),l.$blockScrolling--};l.$blockScrolling++,h&&!a?c.toSingleRange():!h&&a&&(N=c.toOrientedRange(),l.addSelectionMarker(N)),o?w=b.documentToScreenPosition(c.lead):c.moveToPosition(p),l.$blockScrolling--,E={row:-1,column:-1};var L=function(e){clearInterval(O),l.removeSelectionMarkers(C),C.length||(C=[c.toOrientedRange()]),l.$blockScrolling++,N&&(l.removeSelectionMarker(N),c.toSingleRange(N));for(var t=0;t<C.length;t++)c.addRange(C[t]);l.inVirtualSelectionMode=!1,l.$mouseHandler.$clickSelection=null,l.$blockScrolling--},A=k;r.capture(l.container,y,L);var O=setInterval(function(){A()},20);return e.preventDefault()}}var r=e("../lib/event"),i=e("../lib/useragent");t.onMouseDown=o}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)}),define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){function h(e,t,n){return c.$options.wrap=!0,c.$options.needle=t,c.$options.backwards=n==-1,c.find(e)}function v(e,t){return e.row==t.row&&e.column==t.column}function m(e){if(e.$multiselectOnSessionChange)return;e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",o),e.commands.addCommands(f.defaultCommands),g(e)}function g(e){function r(t){n&&(e.renderer.setMouseCursor(""),n=!1)}var t=e.textInput.getElement(),n=!1;u.addListener(t,"keydown",function(t){var i=t.keyCode==18&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&i?n||(e.renderer.setMouseCursor("crosshair"),n=!0):n&&r()}),u.addListener(t,"keyup",r),u.addListener(t,"blur",r)}var r=e("./range_list").RangeList,i=e("./range").Range,s=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),a=e("./lib/lang"),f=e("./commands/multi_select_commands");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var l=e("./search").Search,c=new l,p=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(!e)return;if(!this.inMultiSelectMode&&this.rangeCount===0){var n=this.toOrientedRange();this.rangeList.add(n),this.rangeList.add(e);if(this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:e}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){if(this.rangeList)return;this.rangeList=new r,this.ranges=[],this.rangeCount=0},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var n=this.getRange(),r=this.isBackwards(),s=n.start.row,o=n.end.row;if(s==o){if(r)var u=n.end,a=n.start;else var u=n.start,a=n.end;this.addRange(i.fromPoints(a,a)),this.addRange(i.fromPoints(u,u));return}var f=[],l=this.getLineRange(s,!0);l.start.column=n.start.column,f.push(l);for(var c=s+1;c<o;c++)f.push(this.getLineRange(c,!0));l=this.getLineRange(o,!0),l.end.column=n.end.column,f.push(l),f.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.selectionLead),s=this.session.documentToScreenPosition(this.selectionAnchor),o=this.rectangularRangeBlock(r,s);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],s=e.column<t.column;if(s)var o=e.column,u=t.column;else var o=t.column,u=e.column;var a=e.row<t.row;if(a)var f=e.row,l=t.row;else var f=t.row,l=e.row;o<0&&(o=0),f<0&&(f=0),f==l&&(n=!0);for(var c=f;c<=l;c++){var h=i.fromPoints(this.session.screenToDocumentPosition(c,o),this.session.screenToDocumentPosition(c,u));if(h.isEmpty()){if(p&&v(h.end,p))break;var p=h.end}h.cursor=s?h.start:h.end,r.push(h)}a&&r.reverse();if(!n){var d=r.length-1;while(r[d].isEmpty()&&d>0)d--;if(d>0){var m=0;while(r[m].isEmpty())m++}for(var g=d;g>=m;g--)r[g].isEmpty()&&r.splice(g,1)}return r}}.call(s.prototype);var d=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(!e.marker)return;this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);t!=-1&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length},this.removeSelectionMarkers=function(e){var t=this.session.$selectionMarkers;for(var n=e.length;n--;){var r=e[n];if(!r.marker)continue;this.session.removeMarker(r.marker);var i=t.indexOf(r);i!=-1&&t.splice(i,1)}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){if(this.inMultiSelectMode)return;this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onSingleSelect=function(e){if(this.session.multiSelect.inVirtualMode)return;this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection")},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(!n.multiSelect)return;if(!t.multiSelectAction){var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}else t.multiSelectAction=="forEach"?r=n.forEachSelection(t,e.args):t.multiSelectAction=="forEachLine"?r=n.forEachSelection(t,e.args,!0):t.multiSelectAction=="single"?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});return r},this.forEachSelection=function(e,t,n){if(this.inVirtualSelectionMode)return;var r=n&&n.keepOrder,i=n==1||n&&n.$byLines,o=this.session,u=this.selection,a=u.rangeList,f=(r?u:a).ranges,l;if(!f.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var c=u._eventRegistry;u._eventRegistry={};var h=new s(o);this.inVirtualSelectionMode=!0;for(var p=f.length;p--;){if(i)while(p>0&&f[p].start.row==f[p-1].end.row)p--;h.fromOrientedRange(f[p]),h.index=p,this.selection=o.selection=h;var d=e.exec?e.exec(this,t||{}):e(this,t||{});!l&&d!==undefined&&(l=d),h.toOrientedRange(f[p])}h.detach(),this.selection=o.selection=u,this.inVirtualSelectionMode=!1,u._eventRegistry=c,u.mergeOverlappingRanges();var v=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),v&&v.from==v.to&&this.renderer.animateScrolling(v.from),l},this.exitMultiSelectMode=function(){if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return;this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var t=this.multiSelect.rangeList.ranges,n=[];for(var r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var i=this.session.getDocument().getNewLineCharacter();e=n.join(i),e.length==(n.length-1)*i.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var r=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;(r.row!=t.row||this.session.$clipPositionToDocument(r.row,r.column).column!=t.column)&&this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.findAll=function(e,t,n){t=t||{},t.needle=e||t.needle;if(t.needle==undefined){var r=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(r)}this.$search.set(t);var i=this.$search.findAll(this.session);if(!i.length)return 0;this.$blockScrolling+=1;var s=this.multiSelect;n||s.toSingleRange(i[0]);for(var o=i.length;o--;)s.addRange(i[o],!0);return r&&s.rangeList.rangeAtPoint(r.start)&&s.addRange(r,!0),this.$blockScrolling-=1,i.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,s=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(s.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(s.row+e,s.column);if(!n.isEmpty())var u=this.session.documentToScreenPosition(r?n.end:n.start),a=this.session.screenToDocumentPosition(u.row+e,u.column);else var a=o;if(r){var f=i.fromPoints(o,a);f.cursor=f.start}else{var f=i.fromPoints(a,o);f.cursor=f.end}f.desiredColumn=s.column;if(!this.selection.inMultiSelectMode)this.selection.addRange(n);else if(t)var l=n.cursor;this.selection.addRange(f),l&&this.selection.substractPoint(l)},this.transposeSelections=function(e){var t=this.session,n=t.multiSelect,r=n.ranges;for(var i=r.length;i--;){var s=r[i];if(s.isEmpty()){var o=t.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}}n.mergeOverlappingRanges();var u=[];for(var i=r.length;i--;){var s=r[i];u.unshift(t.getTextRange(s))}e<0?u.unshift(u.pop()):u.push(u.shift());for(var i=r.length;i--;){var s=r[i],o=s.clone();t.replace(s,u[i]),s.start.row=o.start.row,s.start.column=o.start.column}},this.selectMore=function(e,t,n){var r=this.session,i=r.multiSelect,s=i.toOrientedRange();if(s.isEmpty()){s=r.getWordRange(s.start.row,s.start.column),s.cursor=e==-1?s.start:s.end,this.multiSelect.addRange(s);if(n)return}var o=r.getTextRange(s),u=h(r,o,e);u&&(u.cursor=e==-1?u.start:u.end,this.$blockScrolling+=1,this.session.unfold(u),this.multiSelect.addRange(u),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(s.cursor)},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,r=-1,s=n.filter(function(e){if(e.cursor.row==r)return!0;r=e.cursor.row});if(!n.length||s.length==n.length-1){var o=this.selection.getRange(),u=o.start.row,f=o.end.row,l=u==f;if(l){var c=this.session.getLength(),h;do h=this.session.getLine(f);while(/[=:]/.test(h)&&++f<c);do h=this.session.getLine(u);while(/[=:]/.test(h)&&--u>0);u<0&&(u=0),f>=c&&(f=c-1)}var p=this.session.removeFullLines(u,f);p=this.$reAlignText(p,l),this.session.insert({row:u,column:0},p.join("\n")+"\n"),l||(o.start.column=0,o.end.column=p[p.length-1].length),this.selection.setRange(o)}else{s.forEach(function(e){t.substractPoint(e.cursor)});var d=0,v=Infinity,m=n.map(function(t){var n=t.cursor,r=e.getLine(n.row),i=r.substr(n.column).search(/\S/g);return i==-1&&(i=0),n.column>d&&(d=n.column),i<v&&(v=i),i});n.forEach(function(t,n){var r=t.cursor,s=d-r.column,o=m[n]-v;s>o?e.insert(r,a.stringRepeat(" ",s-o)):e.remove(new i(r.row,r.column,r.row,r.column-s+o)),t.start.column=t.end.column=d,t.start.row=t.end.row=r.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(e,t){function u(e){return a.stringRepeat(" ",e)}function f(e){return e[2]?u(i)+e[2]+u(s-e[2].length+o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function l(e){return e[2]?u(i+s-e[2].length)+e[2]+u(o," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function c(e){return e[2]?u(i)+e[2]+u(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var n=!0,r=!0,i,s,o;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?i==null?(i=t[1].length,s=t[2].length,o=t[3].length,t):(i+s+o!=t[1].length+t[2].length+t[3].length&&(r=!1),i!=t[1].length&&(n=!1),i>t[1].length&&(i=t[1].length),s<t[2].length&&(s=t[2].length),o>t[3].length&&(o=t[3].length),t):[e]}).map(t?f:n?r?l:f:c)}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=m,e("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(e){m(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",o)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",o))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})}),define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("../../range").Range,i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?"start":t=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var i=/\S/,s=e.getLine(t),o=s.search(i);if(o==-1)return;var u=n||s.length,a=e.getLength(),f=t,l=t;while(++t<a){var c=e.getLine(t).search(i);if(c==-1)continue;if(c<=o)break;l=t}if(l>f){var h=e.getLine(l).length;return new r(f,u,l,h)}},this.openingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i+1},u=e.$findClosingBracket(t,o,s);if(!u)return;var a=e.foldWidgets[u.row];return a==null&&(a=e.getFoldWidget(u.row)),a=="start"&&u.row>o.row&&(u.row--,u.column=e.getLine(u.row).length),r.fromPoints(o,u)},this.closingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i},u=e.$findOpeningBracket(t,o);if(!u)return;return u.column++,o.column--,r.fromPoints(u,o)}}).call(i.prototype)}),define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function o(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./range").Range;(function(){this.getRowLength=function(e){var t;return this.lineWidgets?t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:t=0,!this.$useWrapMode||!this.$wrapData[e]?1+t:this.$wrapData[e].length+1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)}),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach();if(this.editor==e)return;this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets))},this.detach=function(e){var t=this.editor;if(!t)return;this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(!n||!e.action)return;var r=e.data,i=r.start.row,s=r.end.row,o=e.action=="add";for(var u=i+1;u<s;u++)n[u]&&(n[u].hidden=o);n[s]&&(o?n[i]?n[s].hidden=o:n[i]=n[s]:(n[i]==n[s]&&(n[i]=undefined),n[s].hidden=o))},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(!t)return;var n=e.start.row,r=e.end.row-n;if(r!==0)if(e.action=="remove"){var i=t.splice(n+1,r);i.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var s=new Array(r);s.unshift(n,0),t.splice.apply(t,s),this.$updateRows()}},this.$updateRows=function(){var e=this.session.lineWidgets;if(!e)return;var t=!0;e.forEach(function(e,n){if(e){t=!1,e.row=n;while(e.$oldWidget)e.$oldWidget.row=n,e=e.$oldWidget}}),t&&(this.session.lineWidgets=null)},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e.session=this.session;var n=this.editor.renderer;e.html&&!e.el&&(e.el=i.createElement("div"),e.el.innerHTML=e.html),e.el&&(i.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,n.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),e.pixelHeight||(e.pixelHeight=e.el.offsetHeight),e.rowCount==null&&(e.rowCount=e.pixelHeight/n.layerConfig.lineHeight);var r=this.session.getFoldAt(e.row,0);e.$fold=r;if(r){var s=this.session.lineWidgets;e.row==r.end.row&&!s[r.start.row]?s[r.start.row]=e:e.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,n),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el);if(e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}if(this.session.lineWidgets){var n=this.session.lineWidgets[e.row];if(n==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else while(n){if(n.$oldWidget==e){n.$oldWidget=e.$oldWidget;break}n=n.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){var t=this.session.lineWidgets,n=t&&t[e],r=[];while(n)r.push(n),n=n.$oldWidget;return r},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,r=t.layerConfig;if(!n||!n.length)return;var i=Infinity;for(var s=0;s<n.length;s++){var o=n[s];if(!o||!o.el)continue;if(o.session!=this.session)continue;o._inDocument||(o._inDocument=!0,t.container.appendChild(o.el)),o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=Math.ceil(o.w/r.characterWidth));var u=o.h/r.lineHeight;o.coverLine&&(u-=this.session.getRowLineCount(o.row),u<0&&(u=0)),o.rowCount!=u&&(o.rowCount=u,o.row<i&&(i=o.row))}i!=Infinity&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]},this.renderWidgets=function(e,t){var n=t.layerConfig,r=this.session.lineWidgets;if(!r)return;var i=Math.min(this.firstRow,n.firstRow),s=Math.max(this.lastRow,n.lastRow,r.length);while(i>0&&!r[i])i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var o=i;o<=s;o++){var u=r[o];if(!u||!u.el)continue;if(u.hidden){u.el.style.top=-100-(u.pixelHeight||0)+"px";continue}u._inDocument||(u._inDocument=!0,t.container.appendChild(u.el));var a=t.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;u.coverLine||(a+=n.lineHeight*this.session.getRowLineCount(u.row)),u.el.style.top=a-n.offset+"px";var f=u.coverGutter?0:t.gutterWidth;u.fixedWidth||(f-=t.scrollLeft),u.el.style.left=f+"px",u.fullWidth&&u.screenWidth&&(u.el.style.minWidth=n.width+2*n.padding+"px"),u.fixedWidth?u.el.style.right=t.scrollBar.getWidth()+"px":u.el.style.right=""}}}).call(o.prototype),t.LineWidgets=o}),define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function o(e,t,n){var r=0,i=e.length-1;while(r<=i){var s=r+i>>1,o=n(t,e[s]);if(o>0)r=s+1;else{if(!(o<0))return s;i=s-1}}return-(r+1)}function u(e,t,n){var r=e.getAnnotations().sort(s.comparePoints);if(!r.length)return;var i=o(r,{row:t,column:-1},s.comparePoints);i<0&&(i=-i-1),i>=r.length?i=n>0?0:r.length-1:i===0&&n<0&&(i=r.length-1);var u=r[i];if(!u||!n)return;if(u.row===t){do u=r[i+=n];while(u&&u.row===t);if(!u)return r.slice()}var a=[];t=u.row;do a[n<0?"unshift":"push"](u),u=r[i+=n];while(u&&u.row==t);return a.length&&a}var r=e("../line_widgets").LineWidgets,i=e("../lib/dom"),s=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(e));var s=e.getCursorPosition(),o=s.row,a=n.widgetManager.getWidgetsAtRow(o).filter(function(e){return e.type=="errorMarker"})[0];a?a.destroy():o-=t;var f=u(n,o,t),l;if(f){var c=f[0];s.column=(c.pos&&typeof c.column!="number"?c.pos.sc:c.column)||0,s.row=c.row,l=e.renderer.$gutterLayer.$annotations[s.row]}else{if(a)return;l={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var h={row:s.row,fixedWidth:!0,coverGutter:!0,el:i.createElement("div"),type:"errorMarker"},p=h.el.appendChild(i.createElement("div")),d=h.el.appendChild(i.createElement("div"));d.className="error_widget_arrow "+l.className;var v=e.renderer.$cursorLayer.getPixelPosition(s).left;d.style.left=v+e.renderer.gutterWidth-5+"px",h.el.className="error_widget_wrapper",p.className="error_widget "+l.className,p.innerHTML=l.text.join("<br>"),p.appendChild(i.createElement("div"));var m=function(e,t,n){if(t===0&&(n==="esc"||n==="return"))return h.destroy(),{command:"null"}};h.destroy=function(){if(e.$mouseHandler.isMousePressed)return;e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(h),e.off("changeSelection",h.destroy),e.off("changeSession",h.destroy),e.off("mouseup",h.destroy),e.off("change",h.destroy)},e.keyBinding.addKeyboardHandler(m),e.on("changeSelection",h.destroy),e.on("changeSession",h.destroy),e.on("mouseup",h.destroy),e.on("change",h.destroy),e.session.widgetManager.addLineWidget(h),h.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},i.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/dom"),i=e("./lib/event"),s=e("./editor").Editor,o=e("./edit_session").EditSession,u=e("./undomanager").UndoManager,a=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.edit=function(e){if(typeof e=="string"){var n=e;e=document.getElementById(n);if(!e)throw new Error("ace.edit can't find div #"+n)}if(e&&e.env&&e.env.editor instanceof s)return e.env.editor;var o="";if(e&&/input|textarea/i.test(e.tagName)){var u=e;o=u.value,e=r.createElement("pre"),u.parentNode.replaceChild(e,u)}else e&&(o=r.getInnerText(e),e.innerHTML="");var f=t.createEditSession(o),l=new s(new a(e));l.setSession(f);var c={document:f,editor:l,onResize:l.resize.bind(l,null)};return u&&(c.textarea=u),i.addListener(window,"resize",c.onResize),l.on("destroy",function(){i.removeListener(window,"resize",c.onResize),c.editor.container.env=null}),l.container.env=l.env=c,l},t.createEditSession=function(e,t){var n=new o(e,t);return n.setUndoManager(new u),n},t.EditSession=o,t.UndoManager=u});
            (function() {
                window.require(["ace/ace"], function(a) {
                    a && a.config.init(true);
                    if (!window.ace)
                        window.ace = a;
                    for (var key in a) if (a.hasOwnProperty(key))
                        window.ace[key] = a[key];
                });
            })();
        

//Place here your personal Access Token, you can go to our Readme if you need help
	var AccessToken = 'd96d0e0592ecae706958ecb2a3e59a93168b4262';

//Html tab size
	var htmlEditorTabSize = '2';

(function(){var a,b,c,d,e,f,g,h,i=[].slice,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=function(){},b=function(){function a(){}return a.prototype.addEventListener=a.prototype.on,a.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},this._callbacks[a]||(this._callbacks[a]=[]),this._callbacks[a].push(b),this},a.prototype.emit=function(){var a,b,c,d,e,f;if(d=arguments[0],a=2<=arguments.length?i.call(arguments,1):[],this._callbacks=this._callbacks||{},c=this._callbacks[d])for(e=0,f=c.length;f>e;e++)b=c[e],b.apply(this,a);return this},a.prototype.removeListener=a.prototype.off,a.prototype.removeAllListeners=a.prototype.off,a.prototype.removeEventListener=a.prototype.off,a.prototype.off=function(a,b){var c,d,e,f,g;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(d=this._callbacks[a],!d)return this;if(1===arguments.length)return delete this._callbacks[a],this;for(e=f=0,g=d.length;g>f;e=++f)if(c=d[e],c===b){d.splice(e,1);break}return this},a}(),a=function(a){function c(a,b){var e,f,g;if(this.element=a,this.version=c.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(c.instances.push(this),this.element.dropzone=this,e=null!=(g=c.optionsForElement(this.element))?g:{},this.options=d({},this.defaultOptions,e,null!=b?b:{}),this.options.forceFallback||!c.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(f=this.getExistingFallback())&&f.parentNode&&f.parentNode.removeChild(f),this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?c.getElement(this.options.previewsContainer,"previewsContainer"):this.element),this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:c.getElements(this.options.clickable,"clickable")),this.init()}var d,e;return k(c,a),c.prototype.Emitter=b,c.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],c.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(a,b){return b()},init:function(){return g},forceFallback:!1,fallback:function(){var a,b,d,e,f,g;for(this.element.className=""+this.element.className+" dz-browser-not-supported",g=this.element.getElementsByTagName("div"),e=0,f=g.length;f>e;e++)a=g[e],/(^| )dz-message($| )/.test(a.className)&&(b=a,a.className="dz-message");return b||(b=c.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(b)),d=b.getElementsByTagName("span")[0],d&&(null!=d.textContent?d.textContent=this.options.dictFallbackMessage:null!=d.innerText&&(d.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(a){var b,c,d;return b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height},c=a.width/a.height,b.optWidth=this.options.thumbnailWidth,b.optHeight=this.options.thumbnailHeight,null==b.optWidth&&null==b.optHeight?(b.optWidth=b.srcWidth,b.optHeight=b.srcHeight):null==b.optWidth?b.optWidth=c*b.optHeight:null==b.optHeight&&(b.optHeight=1/c*b.optWidth),d=b.optWidth/b.optHeight,a.height<b.optHeight||a.width<b.optWidth?(b.trgHeight=b.srcHeight,b.trgWidth=b.srcWidth):c>d?(b.srcHeight=a.height,b.srcWidth=b.srcHeight*d):(b.srcWidth=a.width,b.srcHeight=b.srcWidth/d),b.srcX=(a.width-b.srcWidth)/2,b.srcY=(a.height-b.srcHeight)/2,b},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:g,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:g,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(a.previewElement=c.createElement(this.options.previewTemplate.trim()),a.previewTemplate=a.previewElement,this.previewsContainer.appendChild(a.previewElement),l=a.previewElement.querySelectorAll("[data-dz-name]"),f=0,i=l.length;i>f;f++)b=l[f],b.textContent=a.name;for(m=a.previewElement.querySelectorAll("[data-dz-size]"),g=0,j=m.length;j>g;g++)b=m[g],b.innerHTML=this.filesize(a.size);for(this.options.addRemoveLinks&&(a._removeLink=c.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),a.previewElement.appendChild(a._removeLink)),d=function(b){return function(d){return d.preventDefault(),d.stopPropagation(),a.status===c.UPLOADING?c.confirm(b.options.dictCancelUploadConfirmation,function(){return b.removeFile(a)}):b.options.dictRemoveFileConfirmation?c.confirm(b.options.dictRemoveFileConfirmation,function(){return b.removeFile(a)}):b.removeFile(a)}}(this),n=a.previewElement.querySelectorAll("[data-dz-remove]"),o=[],h=0,k=n.length;k>h;h++)e=n[h],o.push(e.addEventListener("click",d));return o}},removedfile:function(a){var b;return a.previewElement&&null!=(b=a.previewElement)&&b.parentNode.removeChild(a.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(a,b){var c,d,e,f;if(a.previewElement){for(a.previewElement.classList.remove("dz-file-preview"),f=a.previewElement.querySelectorAll("[data-dz-thumbnail]"),d=0,e=f.length;e>d;d++)c=f[d],c.alt=a.name,c.src=b;return setTimeout(function(){return function(){return a.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(a,b){var c,d,e,f,g;if(a.previewElement){for(a.previewElement.classList.add("dz-error"),"String"!=typeof b&&b.error&&(b=b.error),f=a.previewElement.querySelectorAll("[data-dz-errormessage]"),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.textContent=b);return g}},errormultiple:g,processing:function(a){return a.previewElement&&(a.previewElement.classList.add("dz-processing"),a._removeLink)?a._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:g,uploadprogress:function(a,b){var c,d,e,f,g;if(a.previewElement){for(f=a.previewElement.querySelectorAll("[data-dz-uploadprogress]"),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push("PROGRESS"===c.nodeName?c.value=b:c.style.width=""+b+"%");return g}},totaluploadprogress:g,sending:g,sendingmultiple:g,success:function(a){return a.previewElement?a.previewElement.classList.add("dz-success"):void 0},successmultiple:g,canceled:function(a){return this.emit("error",a,"Upload canceled.")},canceledmultiple:g,complete:function(a){return a._removeLink&&(a._removeLink.textContent=this.options.dictRemoveFile),a.previewElement?a.previewElement.classList.add("dz-complete"):void 0},completemultiple:g,maxfilesexceeded:g,maxfilesreached:g,queuecomplete:g,addedfiles:g,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},d=function(){var a,b,c,d,e,f,g;for(d=arguments[0],c=2<=arguments.length?i.call(arguments,1):[],f=0,g=c.length;g>f;f++){b=c[f];for(a in b)e=b[a],d[a]=e}return d},c.prototype.getAcceptedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted&&e.push(a);return e},c.prototype.getRejectedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted||e.push(a);return e},c.prototype.getFilesWithStatus=function(a){var b,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.status===a&&f.push(b);return f},c.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(c.QUEUED)},c.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(c.UPLOADING)},c.prototype.getAddedFiles=function(){return this.getFilesWithStatus(c.ADDED)},c.prototype.getActiveFiles=function(){var a,b,d,e,f;for(e=this.files,f=[],b=0,d=e.length;d>b;b++)a=e[b],(a.status===c.UPLOADING||a.status===c.QUEUED)&&f.push(a);return f},c.prototype.init=function(){var a,b,d,e,f,g,h;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(c.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(d=function(a){return function(){return a.hiddenFileInput&&a.hiddenFileInput.parentNode.removeChild(a.hiddenFileInput),a.hiddenFileInput=document.createElement("input"),a.hiddenFileInput.setAttribute("type","file"),(null==a.options.maxFiles||a.options.maxFiles>1)&&a.hiddenFileInput.setAttribute("multiple","multiple"),a.hiddenFileInput.className="dz-hidden-input",null!=a.options.acceptedFiles&&a.hiddenFileInput.setAttribute("accept",a.options.acceptedFiles),null!=a.options.capture&&a.hiddenFileInput.setAttribute("capture",a.options.capture),a.hiddenFileInput.style.visibility="hidden",a.hiddenFileInput.style.position="absolute",a.hiddenFileInput.style.top="0",a.hiddenFileInput.style.left="0",a.hiddenFileInput.style.height="0",a.hiddenFileInput.style.width="0",document.querySelector(a.options.hiddenInputContainer).appendChild(a.hiddenFileInput),a.hiddenFileInput.addEventListener("change",function(){var b,c,e,f;if(c=a.hiddenFileInput.files,c.length)for(e=0,f=c.length;f>e;e++)b=c[e],a.addFile(b);return a.emit("addedfiles",c),d()})}}(this))(),this.URL=null!=(g=window.URL)?g:window.webkitURL,h=this.events,e=0,f=h.length;f>e;e++)a=h[e],this.on(a,this.options[a]);return this.on("uploadprogress",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("canceled",function(a){return function(b){return a.emit("complete",b)}}(this)),this.on("complete",function(a){return function(){return 0===a.getAddedFiles().length&&0===a.getUploadingFiles().length&&0===a.getQueuedFiles().length?setTimeout(function(){return a.emit("queuecomplete")},0):void 0}}(this)),b=function(a){return a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(a){return function(b){return a.emit("dragstart",b)}}(this),dragenter:function(a){return function(c){return b(c),a.emit("dragenter",c)}}(this),dragover:function(a){return function(c){var d;try{d=c.dataTransfer.effectAllowed}catch(e){}return c.dataTransfer.dropEffect="move"===d||"linkMove"===d?"move":"copy",b(c),a.emit("dragover",c)}}(this),dragleave:function(a){return function(b){return a.emit("dragleave",b)}}(this),drop:function(a){return function(c){return b(c),a.drop(c)}}(this),dragend:function(a){return function(b){return a.emit("dragend",b)}}(this)}}],this.clickableElements.forEach(function(a){return function(b){return a.listeners.push({element:b,events:{click:function(d){return(b!==a.element||d.target===a.element||c.elementInside(d.target,a.element.querySelector(".dz-message")))&&a.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},c.prototype.destroy=function(){var a;return this.disable(),this.removeAllFiles(!0),(null!=(a=this.hiddenFileInput)?a.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,c.instances.splice(c.instances.indexOf(this),1)},c.prototype.updateTotalUploadProgress=function(){var a,b,c,d,e,f,g,h;if(d=0,c=0,a=this.getActiveFiles(),a.length){for(h=this.getActiveFiles(),f=0,g=h.length;g>f;f++)b=h[f],d+=b.upload.bytesSent,c+=b.upload.total;e=100*d/c}else e=100;return this.emit("totaluploadprogress",e,c,d)},c.prototype._getParamName=function(a){return"function"==typeof this.options.paramName?this.options.paramName(a):""+this.options.paramName+(this.options.uploadMultiple?"["+a+"]":"")},c.prototype.getFallbackForm=function(){var a,b,d,e;return(a=this.getExistingFallback())?a:(d='<div class="dz-fallback">',this.options.dictFallbackText&&(d+="<p>"+this.options.dictFallbackText+"</p>"),d+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',b=c.createElement(d),"FORM"!==this.element.tagName?(e=c.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),e.appendChild(b)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:b)},c.prototype.getExistingFallback=function(){var a,b,c,d,e,f;for(b=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],/(^| )fallback($| )/.test(b.className))return b},f=["div","form"],d=0,e=f.length;e>d;d++)if(c=f[d],a=b(this.element.getElementsByTagName(c)))return a},c.prototype.setupEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.addEventListener(b,c,!1));return e}());return g},c.prototype.removeEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.removeEventListener(b,c,!1));return e}());return g},c.prototype.disable=function(){var a,b,c,d,e;for(this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")}),this.removeEventListeners(),d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.cancelUpload(a));return e},c.prototype.enable=function(){return this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")}),this.setupEventListeners()},c.prototype.filesize=function(a){var b,c,d,e,f,g,h,i;if(d=0,e="b",a>0){for(g=["TB","GB","MB","KB","b"],c=h=0,i=g.length;i>h;c=++h)if(f=g[c],b=Math.pow(this.options.filesizeBase,4-c)/10,a>=b){d=a/Math.pow(this.options.filesizeBase,4-c),e=f;break}d=Math.round(10*d)/10}return"<strong>"+d+"</strong> "+e},c.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},c.prototype.drop=function(a){var b,c;a.dataTransfer&&(this.emit("drop",a),b=a.dataTransfer.files,this.emit("addedfiles",b),b.length&&(c=a.dataTransfer.items,c&&c.length&&null!=c[0].webkitGetAsEntry?this._addFilesFromItems(c):this.handleFiles(b)))},c.prototype.paste=function(a){var b,c;if(null!=(null!=a&&null!=(c=a.clipboardData)?c.items:void 0))return this.emit("paste",a),b=a.clipboardData.items,b.length?this._addFilesFromItems(b):void 0},c.prototype.handleFiles=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.addFile(b));return e},c.prototype._addFilesFromItems=function(a){var b,c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(null!=c.webkitGetAsEntry&&(b=c.webkitGetAsEntry())?b.isFile?this.addFile(c.getAsFile()):b.isDirectory?this._addFilesFromDirectory(b,b.name):void 0:null!=c.getAsFile?null==c.kind||"file"===c.kind?this.addFile(c.getAsFile()):void 0:void 0);return f},c.prototype._addFilesFromDirectory=function(a,b){var c,d;return c=a.createReader(),d=function(a){return function(c){var d,e,f;for(e=0,f=c.length;f>e;e++)d=c[e],d.isFile?d.file(function(c){return a.options.ignoreHiddenFiles&&"."===c.name.substring(0,1)?void 0:(c.fullPath=""+b+"/"+c.name,a.addFile(c))}):d.isDirectory&&a._addFilesFromDirectory(d,""+b+"/"+d.name)}}(this),c.readEntries(d,function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(a):void 0})},c.prototype.accept=function(a,b){return a.size>1024*this.options.maxFilesize*1024?b(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):c.isValidFile(a,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(b(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",a)):this.options.accept.call(this,a,b):b(this.options.dictInvalidFileType)},c.prototype.addFile=function(a){return a.upload={progress:0,total:a.size,bytesSent:0},this.files.push(a),a.status=c.ADDED,this.emit("addedfile",a),this._enqueueThumbnail(a),this.accept(a,function(b){return function(c){return c?(a.accepted=!1,b._errorProcessing([a],c)):(a.accepted=!0,b.options.autoQueue&&b.enqueueFile(a)),b._updateMaxFilesReachedClass()}}(this))},c.prototype.enqueueFiles=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],this.enqueueFile(b);return null},c.prototype.enqueueFile=function(a){if(a.status!==c.ADDED||a.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return a.status=c.QUEUED,this.options.autoProcessQueue?setTimeout(function(a){return function(){return a.processQueue()}}(this),0):void 0},c.prototype._thumbnailQueue=[],c.prototype._processingThumbnail=!1,c.prototype._enqueueThumbnail=function(a){return this.options.createImageThumbnails&&a.type.match(/image.*/)&&a.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(a),setTimeout(function(a){return function(){return a._processThumbnailQueue()}}(this),0)):void 0},c.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(a){return function(){return a._processingThumbnail=!1,a._processThumbnailQueue()}}(this)))},c.prototype.removeFile=function(a){return a.status===c.UPLOADING&&this.cancelUpload(a),this.files=h(this.files,a),this.emit("removedfile",a),0===this.files.length?this.emit("reset"):void 0},c.prototype.removeAllFiles=function(a){var b,d,e,f;for(null==a&&(a=!1),f=this.files.slice(),d=0,e=f.length;e>d;d++)b=f[d],(b.status!==c.UPLOADING||a)&&this.removeFile(b);return null},c.prototype.createThumbnail=function(a,b){var c;return c=new FileReader,c.onload=function(d){return function(){return"image/svg+xml"===a.type?(d.emit("thumbnail",a,c.result),void(null!=b&&b())):d.createThumbnailFromUrl(a,c.result,b)}}(this),c.readAsDataURL(a)},c.prototype.createThumbnailFromUrl=function(a,b,c,d){var e;return e=document.createElement("img"),d&&(e.crossOrigin=d),e.onload=function(b){return function(){var d,g,h,i,j,k,l,m;return a.width=e.width,a.height=e.height,h=b.options.resize.call(b,a),null==h.trgWidth&&(h.trgWidth=h.optWidth),null==h.trgHeight&&(h.trgHeight=h.optHeight),d=document.createElement("canvas"),g=d.getContext("2d"),d.width=h.trgWidth,d.height=h.trgHeight,f(g,e,null!=(j=h.srcX)?j:0,null!=(k=h.srcY)?k:0,h.srcWidth,h.srcHeight,null!=(l=h.trgX)?l:0,null!=(m=h.trgY)?m:0,h.trgWidth,h.trgHeight),i=d.toDataURL("image/png"),b.emit("thumbnail",a,i),null!=c?c():void 0}}(this),null!=c&&(e.onerror=c),e.src=b},c.prototype.processQueue=function(){var a,b,c,d;if(b=this.options.parallelUploads,c=this.getUploadingFiles().length,a=c,!(c>=b)&&(d=this.getQueuedFiles(),d.length>0)){if(this.options.uploadMultiple)return this.processFiles(d.slice(0,b-c));for(;b>a;){if(!d.length)return;this.processFile(d.shift()),a++}}},c.prototype.processFile=function(a){return this.processFiles([a])},c.prototype.processFiles=function(a){var b,d,e;for(d=0,e=a.length;e>d;d++)b=a[d],b.processing=!0,b.status=c.UPLOADING,this.emit("processing",b);return this.options.uploadMultiple&&this.emit("processingmultiple",a),this.uploadFiles(a)},c.prototype._getFilesWithXhr=function(a){var b,c;return c=function(){var c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.xhr===a&&f.push(b);return f}.call(this)},c.prototype.cancelUpload=function(a){var b,d,e,f,g,h,i;if(a.status===c.UPLOADING){for(d=this._getFilesWithXhr(a.xhr),e=0,g=d.length;g>e;e++)b=d[e],b.status=c.CANCELED;for(a.xhr.abort(),f=0,h=d.length;h>f;f++)b=d[f],this.emit("canceled",b);this.options.uploadMultiple&&this.emit("canceledmultiple",d)}else((i=a.status)===c.ADDED||i===c.QUEUED)&&(a.status=c.CANCELED,this.emit("canceled",a),this.options.uploadMultiple&&this.emit("canceledmultiple",[a]));return this.options.autoProcessQueue?this.processQueue():void 0},e=function(){var a,b;return b=arguments[0],a=2<=arguments.length?i.call(arguments,1):[],"function"==typeof b?b.apply(this,a):b},c.prototype.uploadFile=function(a){return this.uploadFiles([a])},c.prototype.uploadFiles=function(a){var b,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;for(w=new XMLHttpRequest,x=0,B=a.length;B>x;x++)b=a[x],b.xhr=w;p=e(this.options.method,a),u=e(this.options.url,a),w.open(p,u,!0),w.withCredentials=!!this.options.withCredentials,s=null,g=function(c){return function(){var d,e,f;for(f=[],d=0,e=a.length;e>d;d++)b=a[d],f.push(c._errorProcessing(a,s||c.options.dictResponseError.replace("{{statusCode}}",w.status),w));return f}}(this),t=function(c){return function(d){var e,f,g,h,i,j,k,l,m;if(null!=d)for(f=100*d.loaded/d.total,g=0,j=a.length;j>g;g++)b=a[g],b.upload={progress:f,total:d.total,bytesSent:d.loaded};else{for(e=!0,f=100,h=0,k=a.length;k>h;h++)b=a[h],(100!==b.upload.progress||b.upload.bytesSent!==b.upload.total)&&(e=!1),b.upload.progress=f,b.upload.bytesSent=b.upload.total;if(e)return}for(m=[],i=0,l=a.length;l>i;i++)b=a[i],m.push(c.emit("uploadprogress",b,f,b.upload.bytesSent));return m}}(this),w.onload=function(b){return function(d){var e;if(a[0].status!==c.CANCELED&&4===w.readyState){if(s=w.responseText,w.getResponseHeader("content-type")&&~w.getResponseHeader("content-type").indexOf("application/json"))try{s=JSON.parse(s)}catch(f){d=f,s="Invalid JSON response from server."}return t(),200<=(e=w.status)&&300>e?b._finished(a,s,d):g()}}}(this),w.onerror=function(){return function(){return a[0].status!==c.CANCELED?g():void 0}}(this),r=null!=(G=w.upload)?G:w,r.onprogress=t,j={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&d(j,this.options.headers);for(h in j)i=j[h],i&&w.setRequestHeader(h,i);if(f=new FormData,this.options.params){H=this.options.params;for(o in H)v=H[o],f.append(o,v)}for(y=0,C=a.length;C>y;y++)b=a[y],this.emit("sending",b,w,f);if(this.options.uploadMultiple&&this.emit("sendingmultiple",a,w,f),"FORM"===this.element.tagName)for(I=this.element.querySelectorAll("input, textarea, select, button"),z=0,D=I.length;D>z;z++)if(l=I[z],m=l.getAttribute("name"),n=l.getAttribute("type"),"SELECT"===l.tagName&&l.hasAttribute("multiple"))for(J=l.options,A=0,E=J.length;E>A;A++)q=J[A],q.selected&&f.append(m,q.value);else(!n||"checkbox"!==(K=n.toLowerCase())&&"radio"!==K||l.checked)&&f.append(m,l.value);for(k=F=0,L=a.length-1;L>=0?L>=F:F>=L;k=L>=0?++F:--F)f.append(this._getParamName(k),a[k],a[k].name);return this.submitRequest(w,f,a)},c.prototype.submitRequest=function(a,b){return a.send(b)},c.prototype._finished=function(a,b,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=c.SUCCESS,this.emit("success",e,b,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("successmultiple",a,b,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},c.prototype._errorProcessing=function(a,b,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=c.ERROR,this.emit("error",e,b,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("errormultiple",a,b,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},c}(b),a.version="4.2.0",a.options={},a.optionsForElement=function(b){return b.getAttribute("id")?a.options[c(b.getAttribute("id"))]:void 0},a.instances=[],a.forElement=function(a){if("string"==typeof a&&(a=document.querySelector(a)),null==(null!=a?a.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return a.dropzone},a.autoDiscover=!0,a.discover=function(){var b,c,d,e,f,g;for(document.querySelectorAll?d=document.querySelectorAll(".dropzone"):(d=[],b=function(a){var b,c,e,f;for(f=[],c=0,e=a.length;e>c;c++)b=a[c],f.push(/(^| )dropzone($| )/.test(b.className)?d.push(b):void 0);return f},b(document.getElementsByTagName("div")),b(document.getElementsByTagName("form"))),g=[],e=0,f=d.length;f>e;e++)c=d[e],g.push(a.optionsForElement(c)!==!1?new a(c):void 0);return g},a.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],a.isBrowserSupported=function(){var b,c,d,e,f;if(b=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(f=a.blacklistedBrowsers,d=0,e=f.length;e>d;d++)c=f[d],c.test(navigator.userAgent)&&(b=!1);else b=!1;else b=!1;return b},h=function(a,b){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],c!==b&&f.push(c);return f},c=function(a){return a.replace(/[\-_](\w)/g,function(a){return a.charAt(1).toUpperCase()})},a.createElement=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]},a.elementInside=function(a,b){if(a===b)return!0;for(;a=a.parentNode;)if(a===b)return!0;return!1},a.getElement=function(a,b){var c;if("string"==typeof a?c=document.querySelector(a):null!=a.nodeType&&(c=a),null==c)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return c},a.getElements=function(a,b){var c,d,e,f,g,h,i,j;if(a instanceof Array){e=[];try{for(f=0,h=a.length;h>f;f++)d=a[f],e.push(this.getElement(d,b))}catch(k){c=k,e=null}}else if("string"==typeof a)for(e=[],j=document.querySelectorAll(a),g=0,i=j.length;i>g;g++)d=j[g],e.push(d);else null!=a.nodeType&&(e=[a]);if(null==e||!e.length)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return e},a.confirm=function(a,b,c){return window.confirm(a)?b():null!=c?c():void 0},a.isValidFile=function(a,b){var c,d,e,f,g;if(!b)return!0;for(b=b.split(","),d=a.type,c=d.replace(/\/.*$/,""),f=0,g=b.length;g>f;f++)if(e=b[f],e=e.trim(),"."===e.charAt(0)){if(-1!==a.name.toLowerCase().indexOf(e.toLowerCase(),a.name.length-e.length))return!0}else if(/\/\*$/.test(e)){if(c===e.replace(/\/.*$/,""))return!0}else if(d===e)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(b){return this.each(function(){return new a(this,b)})}),"undefined"!=typeof module&&null!==module?module.exports=a:window.Dropzone=a,a.ADDED="added",a.QUEUED="queued",a.ACCEPTED=a.QUEUED,a.UPLOADING="uploading",a.PROCESSING=a.UPLOADING,a.CANCELED="canceled",a.ERROR="error",a.SUCCESS="success",e=function(a){var b,c,d,e,f,g,h,i,j,k;
for(h=a.naturalWidth,g=a.naturalHeight,c=document.createElement("canvas"),c.width=1,c.height=g,d=c.getContext("2d"),d.drawImage(a,0,0),e=d.getImageData(0,0,1,g).data,k=0,f=g,i=g;i>k;)b=e[4*(i-1)+3],0===b?f=i:k=i,i=f+k>>1;return j=i/g,0===j?1:j},f=function(a,b,c,d,f,g,h,i,j,k){var l;return l=e(b),a.drawImage(b,c,d,f,g,h,i,j,k/l)},d=function(a,b){var c,d,e,f,g,h,i,j,k;if(e=!1,k=!0,d=a.document,j=d.documentElement,c=d.addEventListener?"addEventListener":"attachEvent",i=d.addEventListener?"removeEventListener":"detachEvent",h=d.addEventListener?"":"on",f=function(c){return"readystatechange"!==c.type||"complete"===d.readyState?(("load"===c.type?a:d)[i](h+c.type,f,!1),!e&&(e=!0)?b.call(a,c.type||c):void 0):void 0},g=function(){var a;try{j.doScroll("left")}catch(b){return a=b,void setTimeout(g,50)}return f("poll")},"complete"!==d.readyState){if(d.createEventObject&&j.doScroll){try{k=!a.frameElement}catch(l){}k&&g()}return d[c](h+"DOMContentLoaded",f,!1),d[c](h+"readystatechange",f,!1),a[c](h+"load",f,!1)}},a._autoDiscoverFunction=function(){return a.autoDiscover?a.discover():void 0},d(window,a._autoDiscoverFunction)}).call(this);

//     Underscore.js 1.3.3
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore is freely distributable under the MIT license.
//     Portions of Underscore are inspired or borrowed from Prototype,
//     Oliver Steele's Functional, and John Resig's Micro-Templating.
//     For all details and documentation:
//     http://documentcloud.github.com/underscore

var _ = (function() {

  // Baseline setup
  // --------------

  // Establish the root object, `window` in the browser, or `global` on the server.
  var root = this;

  // Save the previous value of the `_` variable.
  var previousUnderscore = root._;

  // Establish the object that gets returned to break out of a loop iteration.
  var breaker = {};

  // Save bytes in the minified (but not gzipped) version:
  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;

  // Create quick reference variables for speed access to core prototypes.
  var slice            = ArrayProto.slice,
      unshift          = ArrayProto.unshift,
      toString         = ObjProto.toString,
      hasOwnProperty   = ObjProto.hasOwnProperty;

  // All **ECMAScript 5** native function implementations that we hope to use
  // are declared here.
  var
    nativeForEach      = ArrayProto.forEach,
    nativeMap          = ArrayProto.map,
    nativeReduce       = ArrayProto.reduce,
    nativeReduceRight  = ArrayProto.reduceRight,
    nativeFilter       = ArrayProto.filter,
    nativeEvery        = ArrayProto.every,
    nativeSome         = ArrayProto.some,
    nativeIndexOf      = ArrayProto.indexOf,
    nativeLastIndexOf  = ArrayProto.lastIndexOf,
    nativeIsArray      = Array.isArray,
    nativeKeys         = Object.keys,
    nativeBind         = FuncProto.bind;

  // Create a safe reference to the Underscore object for use below.
  var _ = function(obj) { return new wrapper(obj); };

  // Export the Underscore object for **Node.js**, with
  // backwards-compatibility for the old `require()` API. If we're in
  // the browser, add `_` as a global object via a string identifier,
  // for Closure Compiler "advanced" mode.
  if (typeof exports !== 'undefined') {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = _;
    }
    exports._ = _;
  } else {
    root['_'] = _;
  }

  // Current version.
  _.VERSION = '1.3.3';

  // Collection Functions
  // --------------------

  // The cornerstone, an `each` implementation, aka `forEach`.
  // Handles objects with the built-in `forEach`, arrays, and raw objects.
  // Delegates to **ECMAScript 5**'s native `forEach` if available.
  var each = _.each = _.forEach = function(obj, iterator, context) {
    if (obj == null) return;
    if (nativeForEach && obj.forEach === nativeForEach) {
      obj.forEach(iterator, context);
    } else if (obj.length === +obj.length) {
      for (var i = 0, l = obj.length; i < l; i++) {
        if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) return;
      }
    } else {
      for (var key in obj) {
        if (_.has(obj, key)) {
          if (iterator.call(context, obj[key], key, obj) === breaker) return;
        }
      }
    }
  };

  // Return the results of applying the iterator to each element.
  // Delegates to **ECMAScript 5**'s native `map` if available.
  _.map = _.collect = function(obj, iterator, context) {
    var results = [];
    if (obj == null) return results;
    if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);
    each(obj, function(value, index, list) {
      results[results.length] = iterator.call(context, value, index, list);
    });
    if (obj.length === +obj.length) results.length = obj.length;
    return results;
  };

  // **Reduce** builds up a single result from a list of values, aka `inject`,
  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.
  _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {
    var initial = arguments.length > 2;
    if (obj == null) obj = [];
    if (nativeReduce && obj.reduce === nativeReduce) {
      if (context) iterator = _.bind(iterator, context);
      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);
    }
    each(obj, function(value, index, list) {
      if (!initial) {
        memo = value;
        initial = true;
      } else {
        memo = iterator.call(context, memo, value, index, list);
      }
    });
    if (!initial) throw new TypeError('Reduce of empty array with no initial value');
    return memo;
  };

  // The right-associative version of reduce, also known as `foldr`.
  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.
  _.reduceRight = _.foldr = function(obj, iterator, memo, context) {
    var initial = arguments.length > 2;
    if (obj == null) obj = [];
    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {
      if (context) iterator = _.bind(iterator, context);
      return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);
    }
    var reversed = _.toArray(obj).reverse();
    if (context && !initial) iterator = _.bind(iterator, context);
    return initial ? _.reduce(reversed, iterator, memo, context) : _.reduce(reversed, iterator);
  };

  // Return the first value which passes a truth test. Aliased as `detect`.
  _.find = _.detect = function(obj, iterator, context) {
    var result;
    any(obj, function(value, index, list) {
      if (iterator.call(context, value, index, list)) {
        result = value;
        return true;
      }
    });
    return result;
  };

  // Return all the elements that pass a truth test.
  // Delegates to **ECMAScript 5**'s native `filter` if available.
  // Aliased as `select`.
  _.filter = _.select = function(obj, iterator, context) {
    var results = [];
    if (obj == null) return results;
    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);
    each(obj, function(value, index, list) {
      if (iterator.call(context, value, index, list)) results[results.length] = value;
    });
    return results;
  };

  // Return all the elements for which a truth test fails.
  _.reject = function(obj, iterator, context) {
    var results = [];
    if (obj == null) return results;
    each(obj, function(value, index, list) {
      if (!iterator.call(context, value, index, list)) results[results.length] = value;
    });
    return results;
  };

  // Determine whether all of the elements match a truth test.
  // Delegates to **ECMAScript 5**'s native `every` if available.
  // Aliased as `all`.
  _.every = _.all = function(obj, iterator, context) {
    var result = true;
    if (obj == null) return result;
    if (nativeEvery && obj.every === nativeEvery) return obj.every(iterator, context);
    each(obj, function(value, index, list) {
      if (!(result = result && iterator.call(context, value, index, list))) return breaker;
    });
    return !!result;
  };

  // Determine if at least one element in the object matches a truth test.
  // Delegates to **ECMAScript 5**'s native `some` if available.
  // Aliased as `any`.
  var any = _.some = _.any = function(obj, iterator, context) {
    iterator || (iterator = _.identity);
    var result = false;
    if (obj == null) return result;
    if (nativeSome && obj.some === nativeSome) return obj.some(iterator, context);
    each(obj, function(value, index, list) {
      if (result || (result = iterator.call(context, value, index, list))) return breaker;
    });
    return !!result;
  };

  // Determine if a given value is included in the array or object using `===`.
  // Aliased as `contains`.
  _.include = _.contains = function(obj, target) {
    var found = false;
    if (obj == null) return found;
    if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;
    found = any(obj, function(value) {
      return value === target;
    });
    return found;
  };

  // Invoke a method (with arguments) on every item in a collection.
  _.invoke = function(obj, method) {
    var args = slice.call(arguments, 2);
    return _.map(obj, function(value) {
      return (_.isFunction(method) ? method || value : value[method]).apply(value, args);
    });
  };

  // Convenience version of a common use case of `map`: fetching a property.
  _.pluck = function(obj, key) {
    return _.map(obj, function(value){ return value[key]; });
  };

  // Return the maximum element or (element-based computation).
  _.max = function(obj, iterator, context) {
    if (!iterator && _.isArray(obj) && obj[0] === +obj[0]) return Math.max.apply(Math, obj);
    if (!iterator && _.isEmpty(obj)) return -Infinity;
    var result = {computed : -Infinity};
    each(obj, function(value, index, list) {
      var computed = iterator ? iterator.call(context, value, index, list) : value;
      computed >= result.computed && (result = {value : value, computed : computed});
    });
    return result.value;
  };

  // Return the minimum element (or element-based computation).
  _.min = function(obj, iterator, context) {
    if (!iterator && _.isArray(obj) && obj[0] === +obj[0]) return Math.min.apply(Math, obj);
    if (!iterator && _.isEmpty(obj)) return Infinity;
    var result = {computed : Infinity};
    each(obj, function(value, index, list) {
      var computed = iterator ? iterator.call(context, value, index, list) : value;
      computed < result.computed && (result = {value : value, computed : computed});
    });
    return result.value;
  };

  // Shuffle an array.
  _.shuffle = function(obj) {
    var shuffled = [], rand;
    each(obj, function(value, index, list) {
      rand = Math.floor(Math.random() * (index + 1));
      shuffled[index] = shuffled[rand];
      shuffled[rand] = value;
    });
    return shuffled;
  };

  // Sort the object's values by a criterion produced by an iterator.
  _.sortBy = function(obj, val, context) {
    var iterator = _.isFunction(val) ? val : function(obj) { return obj[val]; };
    return _.pluck(_.map(obj, function(value, index, list) {
      return {
        value : value,
        criteria : iterator.call(context, value, index, list)
      };
    }).sort(function(left, right) {
      var a = left.criteria, b = right.criteria;
      if (a === void 0) return 1;
      if (b === void 0) return -1;
      return a < b ? -1 : a > b ? 1 : 0;
    }), 'value');
  };

  // Groups the object's values by a criterion. Pass either a string attribute
  // to group by, or a function that returns the criterion.
  _.groupBy = function(obj, val) {
    var result = {};
    var iterator = _.isFunction(val) ? val : function(obj) { return obj[val]; };
    each(obj, function(value, index) {
      var key = iterator(value, index);
      (result[key] || (result[key] = [])).push(value);
    });
    return result;
  };

  // Use a comparator function to figure out at what index an object should
  // be inserted so as to maintain order. Uses binary search.
  _.sortedIndex = function(array, obj, iterator) {
    iterator || (iterator = _.identity);
    var low = 0, high = array.length;
    while (low < high) {
      var mid = (low + high) >> 1;
      iterator(array[mid]) < iterator(obj) ? low = mid + 1 : high = mid;
    }
    return low;
  };

  // Safely convert anything iterable into a real, live array.
  _.toArray = function(obj) {
    if (!obj)                                     return [];
    if (_.isArray(obj))                           return slice.call(obj);
    if (_.isArguments(obj))                       return slice.call(obj);
    if (obj.toArray && _.isFunction(obj.toArray)) return obj.toArray();
    return _.values(obj);
  };

  // Return the number of elements in an object.
  _.size = function(obj) {
    return _.isArray(obj) ? obj.length : _.keys(obj).length;
  };

  // Array Functions
  // ---------------

  // Get the first element of an array. Passing **n** will return the first N
  // values in the array. Aliased as `head` and `take`. The **guard** check
  // allows it to work with `_.map`.
  _.first = _.head = _.take = function(array, n, guard) {
    return (n != null) && !guard ? slice.call(array, 0, n) : array[0];
  };

  // Returns everything but the last entry of the array. Especcialy useful on
  // the arguments object. Passing **n** will return all the values in
  // the array, excluding the last N. The **guard** check allows it to work with
  // `_.map`.
  _.initial = function(array, n, guard) {
    return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));
  };

  // Get the last element of an array. Passing **n** will return the last N
  // values in the array. The **guard** check allows it to work with `_.map`.
  _.last = function(array, n, guard) {
    if ((n != null) && !guard) {
      return slice.call(array, Math.max(array.length - n, 0));
    } else {
      return array[array.length - 1];
    }
  };

  // Returns everything but the first entry of the array. Aliased as `tail`.
  // Especially useful on the arguments object. Passing an **index** will return
  // the rest of the values in the array from that index onward. The **guard**
  // check allows it to work with `_.map`.
  _.rest = _.tail = function(array, index, guard) {
    return slice.call(array, (index == null) || guard ? 1 : index);
  };

  // Trim out all falsy values from an array.
  _.compact = function(array) {
    return _.filter(array, function(value){ return !!value; });
  };

  // Return a completely flattened version of an array.
  _.flatten = function(array, shallow) {
    return _.reduce(array, function(memo, value) {
      if (_.isArray(value)) return memo.concat(shallow ? value : _.flatten(value));
      memo[memo.length] = value;
      return memo;
    }, []);
  };

  // Return a version of the array that does not contain the specified value(s).
  _.without = function(array) {
    return _.difference(array, slice.call(arguments, 1));
  };

  // Produce a duplicate-free version of the array. If the array has already
  // been sorted, you have the option of using a faster algorithm.
  // Aliased as `unique`.
  _.uniq = _.unique = function(array, isSorted, iterator) {
    var initial = iterator ? _.map(array, iterator) : array;
    var results = [];
    // The `isSorted` flag is irrelevant if the array only contains two elements.
    if (array.length < 3) isSorted = true;
    _.reduce(initial, function (memo, value, index) {
      if (isSorted ? _.last(memo) !== value || !memo.length : !_.include(memo, value)) {
        memo.push(value);
        results.push(array[index]);
      }
      return memo;
    }, []);
    return results;
  };

  // Produce an array that contains the union: each distinct element from all of
  // the passed-in arrays.
  _.union = function() {
    return _.uniq(_.flatten(arguments, true));
  };

  // Produce an array that contains every item shared between all the
  // passed-in arrays. (Aliased as "intersect" for back-compat.)
  _.intersection = _.intersect = function(array) {
    var rest = slice.call(arguments, 1);
    return _.filter(_.uniq(array), function(item) {
      return _.every(rest, function(other) {
        return _.indexOf(other, item) >= 0;
      });
    });
  };

  // Take the difference between one array and a number of other arrays.
  // Only the elements present in just the first array will remain.
  _.difference = function(array) {
    var rest = _.flatten(slice.call(arguments, 1), true);
    return _.filter(array, function(value){ return !_.include(rest, value); });
  };

  // Zip together multiple lists into a single array -- elements that share
  // an index go together.
  _.zip = function() {
    var args = slice.call(arguments);
    var length = _.max(_.pluck(args, 'length'));
    var results = new Array(length);
    for (var i = 0; i < length; i++) results[i] = _.pluck(args, "" + i);
    return results;
  };

  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),
  // we need this function. Return the position of the first occurrence of an
  // item in an array, or -1 if the item is not included in the array.
  // Delegates to **ECMAScript 5**'s native `indexOf` if available.
  // If the array is large and already in sort order, pass `true`
  // for **isSorted** to use binary search.
  _.indexOf = function(array, item, isSorted) {
    if (array == null) return -1;
    var i, l;
    if (isSorted) {
      i = _.sortedIndex(array, item);
      return array[i] === item ? i : -1;
    }
    if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item);
    for (i = 0, l = array.length; i < l; i++) if (i in array && array[i] === item) return i;
    return -1;
  };

  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.
  _.lastIndexOf = function(array, item) {
    if (array == null) return -1;
    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) return array.lastIndexOf(item);
    var i = array.length;
    while (i--) if (i in array && array[i] === item) return i;
    return -1;
  };

  // Generate an integer Array containing an arithmetic progression. A port of
  // the native Python `range()` function. See
  // [the Python documentation](http://docs.python.org/library/functions.html#range).
  _.range = function(start, stop, step) {
    if (arguments.length <= 1) {
      stop = start || 0;
      start = 0;
    }
    step = arguments[2] || 1;

    var len = Math.max(Math.ceil((stop - start) / step), 0);
    var idx = 0;
    var range = new Array(len);

    while(idx < len) {
      range[idx++] = start;
      start += step;
    }

    return range;
  };

  // Function (ahem) Functions
  // ------------------

  // Reusable constructor function for prototype setting.
  var ctor = function(){};

  // Create a function bound to a given object (assigning `this`, and arguments,
  // optionally). Binding with arguments is also known as `curry`.
  // Delegates to **ECMAScript 5**'s native `Function.bind` if available.
  // We check for `func.bind` first, to fail fast when `func` is undefined.
  _.bind = function bind(func, context) {
    var bound, args;
    if (func.bind === nativeBind && nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));
    if (!_.isFunction(func)) throw new TypeError;
    args = slice.call(arguments, 2);
    return bound = function() {
      if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));
      ctor.prototype = func.prototype;
      var self = new ctor;
      var result = func.apply(self, args.concat(slice.call(arguments)));
      if (Object(result) === result) return result;
      return self;
    };
  };

  // Bind all of an object's methods to that object. Useful for ensuring that
  // all callbacks defined on an object belong to it.
  _.bindAll = function(obj) {
    var funcs = slice.call(arguments, 1);
    if (funcs.length == 0) funcs = _.functions(obj);
    each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });
    return obj;
  };

  // Memoize an expensive function by storing its results.
  _.memoize = function(func, hasher) {
    var memo = {};
    hasher || (hasher = _.identity);
    return function() {
      var key = hasher.apply(this, arguments);
      return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));
    };
  };

  // Delays a function for the given number of milliseconds, and then calls
  // it with the arguments supplied.
  _.delay = function(func, wait) {
    var args = slice.call(arguments, 2);
    return setTimeout(function(){ return func.apply(null, args); }, wait);
  };

  // Defers a function, scheduling it to run after the current call stack has
  // cleared.
  _.defer = function(func) {
    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));
  };

  // Returns a function, that, when invoked, will only be triggered at most once
  // during a given window of time.
  _.throttle = function(func, wait) {
    var context, args, timeout, throttling, more, result;
    var whenDone = _.debounce(function(){ more = throttling = false; }, wait);
    return function() {
      context = this; args = arguments;
      var later = function() {
        timeout = null;
        if (more) func.apply(context, args);
        whenDone();
      };
      if (!timeout) timeout = setTimeout(later, wait);
      if (throttling) {
        more = true;
      } else {
        result = func.apply(context, args);
      }
      whenDone();
      throttling = true;
      return result;
    };
  };

  // Returns a function, that, as long as it continues to be invoked, will not
  // be triggered. The function will be called after it stops being called for
  // N milliseconds. If `immediate` is passed, trigger the function on the
  // leading edge, instead of the trailing.
  _.debounce = function(func, wait, immediate) {
    var timeout;
    return function() {
      var context = this, args = arguments;
      var later = function() {
        timeout = null;
        if (!immediate) func.apply(context, args);
      };
      if (immediate && !timeout) func.apply(context, args);
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  };

  // Returns a function that will be executed at most one time, no matter how
  // often you call it. Useful for lazy initialization.
  _.once = function(func) {
    var ran = false, memo;
    return function() {
      if (ran) return memo;
      ran = true;
      return memo = func.apply(this, arguments);
    };
  };

  // Returns the first function passed as an argument to the second,
  // allowing you to adjust arguments, run code before and after, and
  // conditionally execute the original function.
  _.wrap = function(func, wrapper) {
    return function() {
      var args = [func].concat(slice.call(arguments, 0));
      return wrapper.apply(this, args);
    };
  };

  // Returns a function that is the composition of a list of functions, each
  // consuming the return value of the function that follows.
  _.compose = function() {
    var funcs = arguments;
    return function() {
      var args = arguments;
      for (var i = funcs.length - 1; i >= 0; i--) {
        args = [funcs[i].apply(this, args)];
      }
      return args[0];
    };
  };

  // Returns a function that will only be executed after being called N times.
  _.after = function(times, func) {
    if (times <= 0) return func();
    return function() {
      if (--times < 1) { return func.apply(this, arguments); }
    };
  };

  // Object Functions
  // ----------------

  // Retrieve the names of an object's properties.
  // Delegates to **ECMAScript 5**'s native `Object.keys`
  _.keys = nativeKeys || function(obj) {
    if (obj !== Object(obj)) throw new TypeError('Invalid object');
    var keys = [];
    for (var key in obj) if (_.has(obj, key)) keys[keys.length] = key;
    return keys;
  };

  // Retrieve the values of an object's properties.
  _.values = function(obj) {
    return _.map(obj, _.identity);
  };

  // Return a sorted list of the function names available on the object.
  // Aliased as `methods`
  _.functions = _.methods = function(obj) {
    var names = [];
    for (var key in obj) {
      if (_.isFunction(obj[key])) names.push(key);
    }
    return names.sort();
  };

  // Extend a given object with all the properties in passed-in object(s).
  _.extend = function(obj) {
    each(slice.call(arguments, 1), function(source) {
      for (var prop in source) {
        obj[prop] = source[prop];
      }
    });
    return obj;
  };

  // Return a copy of the object only containing the whitelisted properties.
  _.pick = function(obj) {
    var result = {};
    each(_.flatten(slice.call(arguments, 1)), function(key) {
      if (key in obj) result[key] = obj[key];
    });
    return result;
  };

  // Fill in a given object with default properties.
  _.defaults = function(obj) {
    each(slice.call(arguments, 1), function(source) {
      for (var prop in source) {
        if (obj[prop] == null) obj[prop] = source[prop];
      }
    });
    return obj;
  };

  // Create a (shallow-cloned) duplicate of an object.
  _.clone = function(obj) {
    if (!_.isObject(obj)) return obj;
    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
  };

  // Invokes interceptor with the obj, and then returns obj.
  // The primary purpose of this method is to "tap into" a method chain, in
  // order to perform operations on intermediate results within the chain.
  _.tap = function(obj, interceptor) {
    interceptor(obj);
    return obj;
  };

  // Internal recursive comparison function.
  function eq(a, b, stack) {
    // Identical objects are equal. `0 === -0`, but they aren't identical.
    // See the Harmony `egal` proposal: http://wiki.ecmascript.org/doku.php?id=harmony:egal.
    if (a === b) return a !== 0 || 1 / a == 1 / b;
    // A strict comparison is necessary because `null == undefined`.
    if (a == null || b == null) return a === b;
    // Unwrap any wrapped objects.
    if (a._chain) a = a._wrapped;
    if (b._chain) b = b._wrapped;
    // Invoke a custom `isEqual` method if one is provided.
    if (a.isEqual && _.isFunction(a.isEqual)) return a.isEqual(b);
    if (b.isEqual && _.isFunction(b.isEqual)) return b.isEqual(a);
    // Compare `[[Class]]` names.
    var className = toString.call(a);
    if (className != toString.call(b)) return false;
    switch (className) {
      // Strings, numbers, dates, and booleans are compared by value.
      case '[object String]':
        // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is
        // equivalent to `new String("5")`.
        return a == String(b);
      case '[object Number]':
        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for
        // other numeric values.
        return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);
      case '[object Date]':
      case '[object Boolean]':
        // Coerce dates and booleans to numeric primitive values. Dates are compared by their
        // millisecond representations. Note that invalid dates with millisecond representations
        // of `NaN` are not equivalent.
        return +a == +b;
      // RegExps are compared by their source patterns and flags.
      case '[object RegExp]':
        return a.source == b.source &&
               a.global == b.global &&
               a.multiline == b.multiline &&
               a.ignoreCase == b.ignoreCase;
    }
    if (typeof a != 'object' || typeof b != 'object') return false;
    // Assume equality for cyclic structures. The algorithm for detecting cyclic
    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.
    var length = stack.length;
    while (length--) {
      // Linear search. Performance is inversely proportional to the number of
      // unique nested structures.
      if (stack[length] == a) return true;
    }
    // Add the first object to the stack of traversed objects.
    stack.push(a);
    var size = 0, result = true;
    // Recursively compare objects and arrays.
    if (className == '[object Array]') {
      // Compare array lengths to determine if a deep comparison is necessary.
      size = a.length;
      result = size == b.length;
      if (result) {
        // Deep compare the contents, ignoring non-numeric properties.
        while (size--) {
          // Ensure commutative equality for sparse arrays.
          if (!(result = size in a == size in b && eq(a[size], b[size], stack))) break;
        }
      }
    } else {
      // Objects with different constructors are not equivalent.
      if ('constructor' in a != 'constructor' in b || a.constructor != b.constructor) return false;
      // Deep compare objects.
      for (var key in a) {
        if (_.has(a, key)) {
          // Count the expected number of properties.
          size++;
          // Deep compare each member.
          if (!(result = _.has(b, key) && eq(a[key], b[key], stack))) break;
        }
      }
      // Ensure that both objects contain the same number of properties.
      if (result) {
        for (key in b) {
          if (_.has(b, key) && !(size--)) break;
        }
        result = !size;
      }
    }
    // Remove the first object from the stack of traversed objects.
    stack.pop();
    return result;
  }

  // Perform a deep comparison to check if two objects are equal.
  _.isEqual = function(a, b) {
    return eq(a, b, []);
  };

  // Is a given array, string, or object empty?
  // An "empty" object has no enumerable own-properties.
  _.isEmpty = function(obj) {
    if (obj == null) return true;
    if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;
    for (var key in obj) if (_.has(obj, key)) return false;
    return true;
  };

  // Is a given value a DOM element?
  _.isElement = function(obj) {
    return !!(obj && obj.nodeType == 1);
  };

  // Is a given value an array?
  // Delegates to ECMA5's native Array.isArray
  _.isArray = nativeIsArray || function(obj) {
    return toString.call(obj) == '[object Array]';
  };

  // Is a given variable an object?
  _.isObject = function(obj) {
    return obj === Object(obj);
  };

  // Is a given variable an arguments object?
  _.isArguments = function(obj) {
    return toString.call(obj) == '[object Arguments]';
  };
  if (!_.isArguments(arguments)) {
    _.isArguments = function(obj) {
      return !!(obj && _.has(obj, 'callee'));
    };
  }

  // Is a given value a function?
  _.isFunction = function(obj) {
    return toString.call(obj) == '[object Function]';
  };

  // Is a given value a string?
  _.isString = function(obj) {
    return toString.call(obj) == '[object String]';
  };

  // Is a given value a number?
  _.isNumber = function(obj) {
    return toString.call(obj) == '[object Number]';
  };

  // Is a given object a finite number?
  _.isFinite = function(obj) {
    return _.isNumber(obj) && isFinite(obj);
  };

  // Is the given value `NaN`?
  _.isNaN = function(obj) {
    // `NaN` is the only value for which `===` is not reflexive.
    return obj !== obj;
  };

  // Is a given value a boolean?
  _.isBoolean = function(obj) {
    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';
  };

  // Is a given value a date?
  _.isDate = function(obj) {
    return toString.call(obj) == '[object Date]';
  };

  // Is the given value a regular expression?
  _.isRegExp = function(obj) {
    return toString.call(obj) == '[object RegExp]';
  };

  // Is a given value equal to null?
  _.isNull = function(obj) {
    return obj === null;
  };

  // Is a given variable undefined?
  _.isUndefined = function(obj) {
    return obj === void 0;
  };

  // Has own property?
  _.has = function(obj, key) {
    return hasOwnProperty.call(obj, key);
  };

  // Utility Functions
  // -----------------

  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its
  // previous owner. Returns a reference to the Underscore object.
  _.noConflict = function() {
    root._ = previousUnderscore;
    return this;
  };

  // Keep the identity function around for default iterators.
  _.identity = function(value) {
    return value;
  };

  // Run a function **n** times.
  _.times = function (n, iterator, context) {
    for (var i = 0; i < n; i++) iterator.call(context, i);
  };

  // Escape a string for HTML interpolation.
  _.escape = function(string) {
    return (''+string).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#x27;').replace(/\//g,'&#x2F;');
  };

  // If the value of the named property is a function then invoke it;
  // otherwise, return it.
  _.result = function(object, property) {
    if (object == null) return null;
    var value = object[property];
    return _.isFunction(value) ? value.call(object) : value;
  };

  // Add your own custom functions to the Underscore object, ensuring that
  // they're correctly added to the OOP wrapper as well.
  _.mixin = function(obj) {
    each(_.functions(obj), function(name){
      addToWrapper(name, _[name] = obj[name]);
    });
  };

  // Generate a unique integer id (unique within the entire client session).
  // Useful for temporary DOM ids.
  var idCounter = 0;
  _.uniqueId = function(prefix) {
    var id = idCounter++;
    return prefix ? prefix + id : id;
  };

  // By default, Underscore uses ERB-style template delimiters, change the
  // following template settings to use alternative delimiters.
  _.templateSettings = {
    evaluate    : /<%([\s\S]+?)%>/g,
    interpolate : /<%=([\s\S]+?)%>/g,
    escape      : /<%-([\s\S]+?)%>/g
  };

  // When customizing `templateSettings`, if you don't want to define an
  // interpolation, evaluation or escaping regex, we need one that is
  // guaranteed not to match.
  var noMatch = /.^/;

  // Certain characters need to be escaped so that they can be put into a
  // string literal.
  var escapes = {
    '\\': '\\',
    "'": "'",
    'r': '\r',
    'n': '\n',
    't': '\t',
    'u2028': '\u2028',
    'u2029': '\u2029'
  };

  for (var p in escapes) escapes[escapes[p]] = p;
  var escaper = /\\|'|\r|\n|\t|\u2028|\u2029/g;
  var unescaper = /\\(\\|'|r|n|t|u2028|u2029)/g;

  // Within an interpolation, evaluation, or escaping, remove HTML escaping
  // that had been previously added.
  var unescape = function(code) {
    return code.replace(unescaper, function(match, escape) {
      return escapes[escape];
    });
  };

  // JavaScript micro-templating, similar to John Resig's implementation.
  // Underscore templating handles arbitrary delimiters, preserves whitespace,
  // and correctly escapes quotes within interpolated code.
  _.template = function(text, data, settings) {
    settings = _.defaults(settings || {}, _.templateSettings);

    // Compile the template source, taking care to escape characters that
    // cannot be included in a string literal and then unescape them in code
    // blocks.
    var source = "__p+='" + text
      .replace(escaper, function(match) {
        return '\\' + escapes[match];
      })
      .replace(settings.escape || noMatch, function(match, code) {
        return "'+\n_.escape(" + unescape(code) + ")+\n'";
      })
      .replace(settings.interpolate || noMatch, function(match, code) {
        return "'+\n(" + unescape(code) + ")+\n'";
      })
      .replace(settings.evaluate || noMatch, function(match, code) {
        return "';\n" + unescape(code) + "\n;__p+='";
      }) + "';\n";

    // If a variable is not specified, place data values in local scope.
    if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';

    source = "var __p='';" +
      "var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n" +
      source + "return __p;\n";

    var render = new Function(settings.variable || 'obj', '_', source);
    if (data) return render(data, _);
    var template = function(data) {
      return render.call(this, data, _);
    };

    // Provide the compiled function source as a convenience for build time
    // precompilation.
    template.source = 'function(' + (settings.variable || 'obj') + '){\n' +
      source + '}';

    return template;
  };

  // Add a "chain" function, which will delegate to the wrapper.
  _.chain = function(obj) {
    return _(obj).chain();
  };

  // The OOP Wrapper
  // ---------------

  // If Underscore is called as a function, it returns a wrapped object that
  // can be used OO-style. This wrapper holds altered versions of all the
  // underscore functions. Wrapped objects may be chained.
  var wrapper = function(obj) { this._wrapped = obj; };

  // Expose `wrapper.prototype` as `_.prototype`
  _.prototype = wrapper.prototype;

  // Helper function to continue chaining intermediate results.
  var result = function(obj, chain) {
    return chain ? _(obj).chain() : obj;
  };

  // A method to easily add functions to the OOP wrapper.
  var addToWrapper = function(name, func) {
    wrapper.prototype[name] = function() {
      var args = slice.call(arguments);
      unshift.call(args, this._wrapped);
      return result(func.apply(_, args), this._chain);
    };
  };

  // Add all of the Underscore functions to the wrapper object.
  _.mixin(_);

  // Add all mutator Array functions to the wrapper.
  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {
    var method = ArrayProto[name];
    wrapper.prototype[name] = function() {
      var wrapped = this._wrapped;
      method.apply(wrapped, arguments);
      var length = wrapped.length;
      if ((name == 'shift' || name == 'splice') && length === 0) delete wrapped[0];
      return result(wrapped, this._chain);
    };
  });

  // Add all accessor Array functions to the wrapper.
  each(['concat', 'join', 'slice'], function(name) {
    var method = ArrayProto[name];
    wrapper.prototype[name] = function() {
      return result(method.apply(this._wrapped, arguments), this._chain);
    };
  });

  // Start chaining a wrapped Underscore object.
  wrapper.prototype.chain = function() {
    this._chain = true;
    return this;
  };

  // Extracts the result from a wrapped and chained object.
  wrapper.prototype.value = function() {
    return this._wrapped;
  };
  return _;
}).call({});
/**
 * Core Emmet object, available in global scope
 */
var emmet = (function(global) {
	var defaultSyntax = 'html';
	var defaultProfile = 'plain';

	if (typeof _ == 'undefined') {
		try {
			// avoid collisions with RequireJS loader
			// also, JS obfuscators tends to translate
			// a["name"] to a.name, which also breaks RequireJS
			_ = global[['require'][0]]('underscore'); // node.js
		} catch (e) {}
	}

	if (typeof _ == 'undefined') {
		throw 'Cannot access to Underscore.js lib';
	}

	/** List of registered modules */
	var modules = {
		_ : _
	};

	/**
	 * Shared empty constructor function to aid in prototype-chain creation.
	 */
	var ctor = function(){};

	/**
	 * Helper function to correctly set up the prototype chain, for subclasses.
	 * Similar to `goog.inherits`, but uses a hash of prototype properties and
	 * class properties to be extended.
	 * Took it from Backbone.
	 * @param {Object} parent
	 * @param {Object} protoProps
	 * @param {Object} staticProps
	 * @returns {Object}
	 */
	function inherits(parent, protoProps, staticProps) {
		var child;

		// The constructor function for the new subclass is either defined by
		// you (the "constructor" property in your `extend` definition), or
		// defaulted by us to simply call the parent's constructor.
		if (protoProps && protoProps.hasOwnProperty('constructor')) {
			child = protoProps.constructor;
		} else {
			child = function() {
				parent.apply(this, arguments);
			};
		}

		// Inherit class (static) properties from parent.
		_.extend(child, parent);

		// Set the prototype chain to inherit from `parent`, without calling
		// `parent`'s constructor function.
		ctor.prototype = parent.prototype;
		child.prototype = new ctor();

		// Add prototype properties (instance properties) to the subclass,
		// if supplied.
		if (protoProps)
			_.extend(child.prototype, protoProps);

		// Add static properties to the constructor function, if supplied.
		if (staticProps)
			_.extend(child, staticProps);

		// Correctly set child's `prototype.constructor`.
		child.prototype.constructor = child;

		// Set a convenience property in case the parent's prototype is needed
		// later.
		child.__super__ = parent.prototype;

		return child;
	};

	/**
	 * @type Function Function that loads module definition if it's not defined
	 */
	var moduleLoader = null;

	/**
	 * Generic Emmet module loader (actually, it doesn’t load anything, just
	 * returns module reference). Not using `require` name to avoid conflicts
	 * with Node.js and RequireJS
	 */
	function r(name) {
		if (!(name in modules) && moduleLoader)
			moduleLoader(name);

		return modules[name];
	}

	return {
		/**
		 * Simple, AMD-like module definition. The module will be added into
		 * <code>emmet</code> object and will be available via
		 * <code>emmet.require(name)</code> or <code>emmet[name]</code>
		 * @param {String} name
		 * @param {Function} factory
		 * @memberOf emmet
		 */
		define: function(name, factory) {
			// do not let redefine existing properties
			if (!(name in modules)) {
				modules[name] = _.isFunction(factory)
					? this.exec(factory)
					: factory;
			}
		},

		/**
		 * Returns reference to Emmet module
		 * @param {String} name Module name
		 */
		require: r,

		/**
		 * Helper method that just executes passed function but with all
		 * important arguments like 'require' and '_'
		 * @param {Function} fn
		 * @param {Object} context Execution context
		 */
		exec: function(fn, context) {
			return fn.call(context || global, _.bind(r, this), _, this);
		},

		/**
		 * The self-propagating extend function for classes.
		 * Took it from Backbone
		 * @param {Object} protoProps
		 * @param {Object} classProps
		 * @returns {Object}
		 */
		extend: function(protoProps, classProps) {
			var child = inherits(this, protoProps, classProps);
			child.extend = this.extend;
			// a hack required to WSH inherit `toString` method
			if (protoProps.hasOwnProperty('toString'))
				child.prototype.toString = protoProps.toString;
			return child;
		},

		/**
		 * The essential function that expands Emmet abbreviation
		 * @param {String} abbr Abbreviation to parse
		 * @param {String} syntax Abbreviation's context syntax
		 * @param {String} profile Output profile (or its name)
		 * @param {Object} contextNode Contextual node where abbreviation is
		 * written
		 * @return {String}
		 */
		expandAbbreviation: function(abbr, syntax, profile, contextNode) {
			if (!abbr) return '';

			syntax = syntax || defaultSyntax;
//			profile = profile || defaultProfile;

			var filters = r('filters');
			var parser = r('abbreviationParser');

			profile = r('profile').get(profile, syntax);
			r('tabStops').resetTabstopIndex();

			var data = filters.extractFromAbbreviation(abbr);
			var outputTree = parser.parse(data[0], {
				syntax: syntax,
				contextNode: contextNode
			});

			var filtersList = filters.composeList(syntax, profile, data[1]);
			filters.apply(outputTree, filtersList, profile);
			return outputTree.toString();
		},

		/**
		 * Returns default syntax name used in abbreviation engine
		 * @returns {String}
		 */
		defaultSyntax: function() {
			return defaultSyntax;
		},

		/**
		 * Returns default profile name used in abbreviation engine
		 * @returns {String}
		 */
		defaultProfile: function() {
			return defaultProfile;
		},

		/**
		 * Log message into console if it exists
		 */
		log: function() {
			if (global.console && global.console.log)
				global.console.log.apply(global.console, arguments);
		},

		/**
		 * Setups function that should synchronously load undefined modules
		 * @param {Function} fn
		 */
		setModuleLoader: function(fn) {
			moduleLoader = fn;
		}
	};
})(this);

// export core for Node.JS
if (typeof exports !== 'undefined') {
	if (typeof module !== 'undefined' && module.exports) {
		exports = module.exports = emmet;
	}
	exports.emmet = emmet;
}

// export as Require.js module
if (typeof define !== 'undefined') {
	define('emmet', [], emmet);
}/**
 * Emmet abbreviation parser.
 * Takes string abbreviation and recursively parses it into a tree. The parsed
 * tree can be transformed into a string representation with
 * <code>toString()</code> method. Note that string representation is defined
 * by custom processors (called <i>filters</i>), not by abbreviation parser
 * itself.
 *
 * This module can be extended with custom pre-/post-processors to shape-up
 * final tree or its representation. Actually, many features of abbreviation
 * engine are defined in other modules as tree processors
 *
 *
 * @author Sergey Chikuyonok (serge.che@gmail.com)
 * @link http://chikuyonok.ru
 * @memberOf __abbreviationParser
 * @constructor
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('abbreviationParser', function(require, _) {
	var reValidName = /^[\w\-\$\:@\!%]+\+?$/i;
	var reWord = /[\w\-:\$@]/;

	var pairs = {
		'[': ']',
		'(': ')',
		'{': '}'
	};

	var spliceFn = Array.prototype.splice;

	var preprocessors = [];
	var postprocessors = [];
	var outputProcessors = [];

	/**
	 * @type AbbreviationNode
	 */
	function AbbreviationNode(parent) {
		/** @type AbbreviationNode */
		this.parent = null;
		this.children = [];
		this._attributes = [];

		/** @type String Raw abbreviation for current node */
		this.abbreviation = '';
		this.counter = 1;
		this._name = null;
		this._text = '';
		this.repeatCount = 1;
		this.hasImplicitRepeat = false;

		/** Custom data dictionary */
		this._data = {};

		// output properties
		this.start = '';
		this.end = '';
		this.content = '';
		this.padding = '';
	}

	AbbreviationNode.prototype = {
		/**
		 * Adds passed node as child or creates new child
		 * @param {AbbreviationNode} child
		 * @param {Number} position Index in children array where child should
		 * be inserted
		 * @return {AbbreviationNode}
		 */
		addChild: function(child, position) {
			child = child || new AbbreviationNode;
			child.parent = this;

			if (_.isUndefined(position)) {
				this.children.push(child);
			} else {
				this.children.splice(position, 0, child);
			}

			return child;
		},

		/**
		 * Creates a deep copy of current node
		 * @returns {AbbreviationNode}
		 */
		clone: function() {
			var node = new AbbreviationNode();
			var attrs = ['abbreviation', 'counter', '_name', '_text', 'repeatCount', 'hasImplicitRepeat', 'start', 'end', 'content', 'padding'];
			_.each(attrs, function(a) {
				node[a] = this[a];
			}, this);

			// clone attributes
			node._attributes = _.map(this._attributes, function(attr) {
				return _.clone(attr);
			});

			node._data = _.clone(this._data);

			// clone children
			node.children = _.map(this.children, function(child) {
				child = child.clone();
				child.parent = node;
				return child;
			});

			return node;
		},

		/**
		 * Removes current node from parent‘s child list
		 * @returns {AbbreviationNode} Current node itself
		 */
		remove: function() {
			if (this.parent) {
				this.parent.children = _.without(this.parent.children, this);
			}

			return this;
		},

		/**
		 * Replaces current node in parent‘s children list with passed nodes
		 * @param {AbbreviationNode} node Replacement node or array of nodes
		 */
		replace: function() {
			var parent = this.parent;
			var ix = _.indexOf(parent.children, this);
			var items = _.flatten(arguments);
			spliceFn.apply(parent.children, [ix, 1].concat(items));

			// update parent
			_.each(items, function(item) {
				item.parent = parent;
			});
		},

		/**
		 * Recursively sets <code>property</code> to <code>value</code> of current
		 * node and its children
		 * @param {String} name Property to update
		 * @param {Object} value New property value
		 */
		updateProperty: function(name, value) {
			this[name] = value;
			_.each(this.children, function(child) {
				child.updateProperty(name, value);
			});

			return this;
		},

		/**
		 * Finds first child node that matches truth test for passed
		 * <code>fn</code> function
		 * @param {Function} fn
		 * @returns {AbbreviationNode}
		 */
		find: function(fn) {
			return this.findAll(fn)[0];
//			if (!_.isFunction(fn)) {
//				var elemName = fn.toLowerCase();
//				fn = function(item) {return item.name().toLowerCase() == elemName;};
//			}
//
//			var result = null;
//			_.find(this.children, function(child) {
//				if (fn(child)) {
//					return result = child;
//				}
//
//				return result = child.find(fn);
//			});
//
//			return result;
		},

		/**
		 * Finds all child nodes that matches truth test for passed
		 * <code>fn</code> function
		 * @param {Function} fn
		 * @returns {Array}
		 */
		findAll: function(fn) {
			if (!_.isFunction(fn)) {
				var elemName = fn.toLowerCase();
				fn = function(item) {return item.name().toLowerCase() == elemName;};
			}

			var result = [];
			_.each(this.children, function(child) {
				if (fn(child))
					result.push(child);

				result = result.concat(child.findAll(fn));
			});

			return _.compact(result);
		},

		/**
		 * Sets/gets custom data
		 * @param {String} name
		 * @param {Object} value
		 * @returns {Object}
		 */
		data: function(name, value) {
			if (arguments.length == 2) {
				this._data[name] = value;

				if (name == 'resource' && require('elements').is(value, 'snippet')) {
					// setting snippet as matched resource: update `content`
					// property with snippet value
					this.content = value.data;
					if (this._text) {
						this.content = require('abbreviationUtils')
							.insertChildContent(value.data, this._text);
					}
				}
			}

			return this._data[name];
		},

		/**
		 * Returns name of current node
		 * @returns {String}
		 */
		name: function() {
			var res = this.matchedResource();
			if (require('elements').is(res, 'element')) {
				return res.name;
			}

			return this._name;
		},

		/**
		 * Returns list of attributes for current node
		 * @returns {Array}
		 */
		attributeList: function() {
			var attrs = [];

			var res = this.matchedResource();
			if (require('elements').is(res, 'element') && _.isArray(res.attributes)) {
				attrs = attrs.concat(res.attributes);
			}

			return optimizeAttributes(attrs.concat(this._attributes));
		},

		/**
		 * Returns or sets attribute value
		 * @param {String} name Attribute name
		 * @param {String} value New attribute value
		 * @returns {String}
		 */
		attribute: function(name, value) {
			if (arguments.length == 2) {
				// modifying attribute
				var ix = _.indexOf(_.pluck(this._attributes, 'name'), name.toLowerCase());
				if (~ix) {
					this._attributes[ix].value = value;
				} else {
					this._attributes.push({
						name: name,
						value: value
					});
				}
			}

			return (_.find(this.attributeList(), function(attr) {
				return attr.name == name;
			}) || {}).value;
		},

		/**
		 * Returns reference to the matched <code>element</code>, if any.
		 * See {@link elements} module for a list of available elements
		 * @returns {Object}
		 */
		matchedResource: function() {
			return this.data('resource');
		},

		/**
		 * Returns index of current node in parent‘s children list
		 * @returns {Number}
		 */
		index: function() {
			return this.parent ? _.indexOf(this.parent.children, this) : -1;
		},

		/**
		 * Sets how many times current element should be repeated
		 * @private
		 */
		_setRepeat: function(count) {
			if (count) {
				this.repeatCount = parseInt(count, 10) || 1;
			} else {
				this.hasImplicitRepeat = true;
			}
		},

		/**
		 * Sets abbreviation that belongs to current node
		 * @param {String} abbr
		 */
		setAbbreviation: function(abbr) {
			abbr = abbr || '';

			var that = this;

			// find multiplier
			abbr = abbr.replace(/\*(\d+)?$/, function(str, repeatCount) {
				that._setRepeat(repeatCount);
				return '';
			});

			this.abbreviation = abbr;

			var abbrText = extractText(abbr);
			if (abbrText) {
				abbr = abbrText.element;
				this.content = this._text = abbrText.text;
			}

			var abbrAttrs = parseAttributes(abbr);
			if (abbrAttrs) {
				abbr = abbrAttrs.element;
				this._attributes = abbrAttrs.attributes;
			}

			this._name = abbr;

			// validate name
			if (this._name && !reValidName.test(this._name)) {
				throw 'Invalid abbreviation';
			}
		},

		/**
		 * Returns string representation of current node
		 * @return {String}
		 */
		toString: function() {
			var utils = require('utils');

			var start = this.start;
			var end = this.end;
			var content = this.content;

			// apply output processors
			var node = this;
			_.each(outputProcessors, function(fn) {
				start = fn(start, node, 'start');
				content = fn(content, node, 'content');
				end = fn(end, node, 'end');
			});


			var innerContent = _.map(this.children, function(child) {
				return child.toString();
			}).join('');

			content = require('abbreviationUtils').insertChildContent(content, innerContent, {
				keepVariable: false
			});

			return start + utils.padString(content, this.padding) + end;
		},

		/**
		 * Check if current node contains children with empty <code>expr</code>
		 * property
		 * @return {Boolean}
		 */
		hasEmptyChildren: function() {
			return !!_.find(this.children, function(child) {
				return child.isEmpty();
			});
		},

		/**
		 * Check if current node has implied name that should be resolved
		 * @returns {Boolean}
		 */
		hasImplicitName: function() {
			return !this._name && !this.isTextNode();
		},

		/**
		 * Indicates that current element is a grouping one, e.g. has no
		 * representation but serves as a container for other nodes
		 * @returns {Boolean}
		 */
		isGroup: function() {
			return !this.abbreviation;
		},

		/**
		 * Indicates empty node (i.e. without abbreviation). It may be a
		 * grouping node and should not be outputted
		 * @return {Boolean}
		 */
		isEmpty: function() {
			return !this.abbreviation && !this.children.length;
		},

		/**
		 * Indicates that current node should be repeated
		 * @returns {Boolean}
		 */
		isRepeating: function() {
			return this.repeatCount > 1 || this.hasImplicitRepeat;
		},

		/**
		 * Check if current node is a text-only node
		 * @return {Boolean}
		 */
		isTextNode: function() {
			return !this.name() && !this.attributeList().length;
		},

		/**
		 * Indicates whether this node may be used to build elements or snippets
		 * @returns {Boolean}
		 */
		isElement: function() {
			return !this.isEmpty() && !this.isTextNode();
		},

		/**
		 * Returns latest and deepest child of current tree
		 * @returns {AbbreviationNode}
		 */
		deepestChild: function() {
			if (!this.children.length)
				return null;

			var deepestChild = this;
			while (deepestChild.children.length) {
				deepestChild = _.last(deepestChild.children);
			}

			return deepestChild;
		}
	};

	/**
	 * Returns stripped string: a string without first and last character.
	 * Used for “unquoting” strings
	 * @param {String} str
	 * @returns {String}
	 */
	function stripped(str) {
		return str.substring(1, str.length - 1);
	}

	function consumeQuotedValue(stream, quote) {
		var ch;
		while (ch = stream.next()) {
			if (ch === quote)
				return true;

			if (ch == '\\')
				continue;
		}

		return false;
	}

	/**
	 * Parses abbreviation into a tree
	 * @param {String} abbr
	 * @returns {AbbreviationNode}
	 */
	function parseAbbreviation(abbr) {
		abbr = require('utils').trim(abbr);

		var root = new AbbreviationNode;
		var context = root.addChild(), ch;

		/** @type StringStream */
		var stream = require('stringStream').create(abbr);
		var loopProtector = 1000, multiplier;

		while (!stream.eol() && --loopProtector > 0) {
			ch = stream.peek();

			switch (ch) {
				case '(': // abbreviation group
					stream.start = stream.pos;
					if (stream.skipToPair('(', ')')) {
						var inner = parseAbbreviation(stripped(stream.current()));
						if (multiplier = stream.match(/^\*(\d+)?/, true)) {
							context._setRepeat(multiplier[1]);
						}

						_.each(inner.children, function(child) {
							context.addChild(child);
						});
					} else {
						throw 'Invalid abbreviation: mo matching ")" found for character at ' + stream.pos;
					}
					break;

				case '>': // child operator
					context = context.addChild();
					stream.next();
					break;

				case '+': // sibling operator
					context = context.parent.addChild();
					stream.next();
					break;

				case '^': // climb up operator
					var parent = context.parent || context;
					context = (parent.parent || parent).addChild();
					stream.next();
					break;

				default: // consume abbreviation
					stream.start = stream.pos;
					stream.eatWhile(function(c) {
						if (c == '[' || c == '{') {
							if (stream.skipToPair(c, pairs[c])) {
								stream.backUp(1);
								return true;
							}

							throw 'Invalid abbreviation: mo matching "' + pairs[c] + '" found for character at ' + stream.pos;
						}

						if (c == '+') {
							// let's see if this is an expando marker
							stream.next();
							var isMarker = stream.eol() ||  ~'+>^*'.indexOf(stream.peek());
							stream.backUp(1);
							return isMarker;
						}

						return c != '(' && isAllowedChar(c);
					});

					context.setAbbreviation(stream.current());
					stream.start = stream.pos;
			}
		}

		if (loopProtector < 1)
			throw 'Endless loop detected';

		return root;
	}

	/**
	 * Extract attributes and their values from attribute set:
	 * <code>[attr col=3 title="Quoted string"]</code>
	 * @param {String} attrSet
	 * @returns {Array}
	 */
	function extractAttributes(attrSet, attrs) {
		attrSet = require('utils').trim(attrSet);
		var result = [];

		/** @type StringStream */
		var stream = require('stringStream').create(attrSet);
		stream.eatSpace();

		while (!stream.eol()) {
			stream.start = stream.pos;
			if (stream.eatWhile(reWord)) {
				var attrName = stream.current();
				var attrValue = '';
				if (stream.peek() == '=') {
					stream.next();
					stream.start = stream.pos;
					var quote = stream.peek();

					if (quote == '"' || quote == "'") {
						stream.next();
						if (consumeQuotedValue(stream, quote)) {
							attrValue = stream.current();
							// strip quotes
							attrValue = attrValue.substring(1, attrValue.length - 1);
						} else {
							throw 'Invalid attribute value';
						}
					} else if (stream.eatWhile(/[^\s\]]/)) {
						attrValue = stream.current();
					} else {
						throw 'Invalid attribute value';
					}
				}

				result.push({
					name: attrName,
					value: attrValue
				});
				stream.eatSpace();
			} else {
				break;
			}
		}

		return result;
	}

	/**
	 * Parses tag attributes extracted from abbreviation. If attributes found,
	 * returns object with <code>element</code> and <code>attributes</code>
	 * properties
	 * @param {String} abbr
	 * @returns {Object} Returns <code>null</code> if no attributes found in
	 * abbreviation
	 */
	function parseAttributes(abbr) {
		/*
		 * Example of incoming data:
		 * #header
		 * .some.data
		 * .some.data#header
		 * [attr]
		 * #item[attr=Hello other="World"].class
		 */
		var result = [];
		var attrMap = {'#': 'id', '.': 'class'};
		var nameEnd = null;

		/** @type StringStream */
		var stream = require('stringStream').create(abbr);
		while (!stream.eol()) {
			switch (stream.peek()) {
				case '#': // id
				case '.': // class
					if (nameEnd === null)
						nameEnd = stream.pos;

					var attrName = attrMap[stream.peek()];

					stream.next();
					stream.start = stream.pos;
					stream.eatWhile(reWord);
					result.push({
						name: attrName,
						value: stream.current()
					});
					break;
				case '[': //begin attribute set
					if (nameEnd === null)
						nameEnd = stream.pos;

					stream.start = stream.pos;
					if (!stream.skipToPair('[', ']'))
						throw 'Invalid attribute set definition';

					result = result.concat(
						extractAttributes(stripped(stream.current()))
					);
					break;
				default:
					stream.next();
			}
		}

		if (!result.length)
			return null;

		return {
			element: abbr.substring(0, nameEnd),
			attributes: optimizeAttributes(result)
		};
	}

	/**
	 * Optimize attribute set: remove duplicates and merge class attributes
	 * @param attrs
	 */
	function optimizeAttributes(attrs) {
		// clone all attributes to make sure that original objects are
		// not modified
		attrs  = _.map(attrs, function(attr) {
			return _.clone(attr);
		});

		var lookup = {};
		return _.filter(attrs, function(attr) {
			if (!(attr.name in lookup)) {
				return lookup[attr.name] = attr;
			}

			var la = lookup[attr.name];

			if (attr.name.toLowerCase() == 'class') {
				la.value += (la.value.length ? ' ' : '') + attr.value;
			} else {
				la.value = attr.value;
			}

			return false;
		});
	}

	/**
	 * Extract text data from abbreviation: if <code>a{hello}</code> abbreviation
	 * is passed, returns object <code>{element: 'a', text: 'hello'}</code>.
	 * If nothing found, returns <code>null</code>
	 * @param {String} abbr
	 *
	 */
	function extractText(abbr) {
		if (!~abbr.indexOf('{'))
			return null;

		/** @type StringStream */
		var stream = require('stringStream').create(abbr);
		while (!stream.eol()) {
			switch (stream.peek()) {
				case '[':
				case '(':
					stream.skipToPair(stream.peek(), pairs[stream.peek()]); break;

				case '{':
					stream.start = stream.pos;
					stream.skipToPair('{', '}');
					return {
						element: abbr.substring(0, stream.start),
						text: stripped(stream.current())
					};

				default:
					stream.next();
			}
		}
	}

	/**
	 * “Un-rolls“ contents of current node: recursively replaces all repeating
	 * children with their repeated clones
	 * @param {AbbreviationNode} node
	 * @returns {AbbreviationNode}
	 */
	function unroll(node) {
		for (var i = node.children.length - 1, j, child, maxCount; i >= 0; i--) {
			child = node.children[i];

			if (child.isRepeating()) {
				maxCount = j = child.repeatCount;
				child.repeatCount = 1;
				child.updateProperty('counter', 1);
				child.updateProperty('maxCount', maxCount);
				while (--j > 0) {
					child.parent.addChild(child.clone(), i + 1)
						.updateProperty('counter', j + 1)
						.updateProperty('maxCount', maxCount);
				}
			}
		}

		// to keep proper 'counter' property, we need to walk
		// on children once again
		_.each(node.children, unroll);

		return node;
	}

	/**
	 * Optimizes tree node: replaces empty nodes with their children
	 * @param {AbbreviationNode} node
	 * @return {AbbreviationNode}
	 */
	function squash(node) {
		for (var i = node.children.length - 1; i >= 0; i--) {
			/** @type AbbreviationNode */
			var n = node.children[i];
			if (n.isGroup()) {
				n.replace(squash(n).children);
			} else if (n.isEmpty()) {
				n.remove();
			}
		}

		_.each(node.children, squash);

		return node;
	}

	function isAllowedChar(ch) {
		var charCode = ch.charCodeAt(0);
		var specialChars = '#.*:$-_!@|%';

		return (charCode > 64 && charCode < 91)       // uppercase letter
				|| (charCode > 96 && charCode < 123)  // lowercase letter
				|| (charCode > 47 && charCode < 58)   // number
				|| specialChars.indexOf(ch) != -1;    // special character
	}

	// XXX add counter replacer function as output processor
	outputProcessors.push(function(text, node) {
		return require('utils').replaceCounter(text, node.counter, node.maxCount);
	});

	return {
		/**
		 * Parses abbreviation into tree with respect of groups,
		 * text nodes and attributes. Each node of the tree is a single
		 * abbreviation. Tree represents actual structure of the outputted
		 * result
		 * @memberOf abbreviationParser
		 * @param {String} abbr Abbreviation to parse
		 * @param {Object} options Additional options for parser and processors
		 *
		 * @return {AbbreviationNode}
		 */
		parse: function(abbr, options) {
			options = options || {};

			var tree = parseAbbreviation(abbr);

			if (options.contextNode) {
				// add info about context node –
				// a parent XHTML node in editor inside which abbreviation is
				// expanded
				tree._name = options.contextNode.name;
				var attrLookup = {};
				_.each(tree._attributes, function(attr) {
					attrLookup[attr.name] = attr;
				});

				_.each(options.contextNode.attributes, function(attr) {
					if (attr.name in attrLookup) {
						attrLookup[attr.name].value = attr.value;
					} else {
						attr = _.clone(attr);
						tree._attributes.push(attr);
						attrLookup[attr.name] = attr;
					}
				});
			}


			// apply preprocessors
			_.each(preprocessors, function(fn) {
				fn(tree, options);
			});

			tree = squash(unroll(tree));

			// apply postprocessors
			_.each(postprocessors, function(fn) {
				fn(tree, options);
			});

			return tree;
		},

		AbbreviationNode: AbbreviationNode,

		/**
		 * Add new abbreviation preprocessor. <i>Preprocessor</i> is a function
		 * that applies to a parsed abbreviation tree right after it get parsed.
		 * The passed tree is in unoptimized state.
		 * @param {Function} fn Preprocessor function. This function receives
		 * two arguments: parsed abbreviation tree (<code>AbbreviationNode</code>)
		 * and <code>options</code> hash that was passed to <code>parse</code>
		 * method
		 */
		addPreprocessor: function(fn) {
			if (!_.include(preprocessors, fn))
				preprocessors.push(fn);
		},

		/**
		 * Removes registered preprocessor
		 */
		removeFilter: function(fn) {
			preprocessor = _.without(preprocessors, fn);
		},

		/**
		 * Adds new abbreviation postprocessor. <i>Postprocessor</i> is a
		 * functinon that applies to <i>optimized</i> parsed abbreviation tree
		 * right before it returns from <code>parse()</code> method
		 * @param {Function} fn Postprocessor function. This function receives
		 * two arguments: parsed abbreviation tree (<code>AbbreviationNode</code>)
		 * and <code>options</code> hash that was passed to <code>parse</code>
		 * method
		 */
		addPostprocessor: function(fn) {
			if (!_.include(postprocessors, fn))
				postprocessors.push(fn);
		},

		/**
		 * Removes registered postprocessor function
		 */
		removePostprocessor: function(fn) {
			postprocessors = _.without(postprocessors, fn);
		},

		/**
		 * Registers output postprocessor. <i>Output processor</i> is a
		 * function that applies to output part (<code>start</code>,
		 * <code>end</code> and <code>content</code>) when
		 * <code>AbbreviationNode.toString()</code> method is called
		 */
		addOutputProcessor: function(fn) {
			if (!_.include(outputProcessors, fn))
				outputProcessors.push(fn);
		},

		/**
		 * Removes registered output processor
		 */
		removeOutputProcessor: function(fn) {
			outputProcessors = _.without(outputProcessors, fn);
		},

		/**
		 * Check if passed symbol is valid symbol for abbreviation expression
		 * @param {String} ch
		 * @return {Boolean}
		 */
		isAllowedChar: function(ch) {
			ch = String(ch); // convert Java object to JS
			return isAllowedChar(ch) || ~'>+^[](){}'.indexOf(ch);
		}
	};
});/**
 * Processor function that matches parsed <code>AbbreviationNode</code>
 * against resources defined in <code>resource</code> module
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	/**
	 * Finds matched resources for child nodes of passed <code>node</code>
	 * element. A matched resource is a reference to <i>snippets.json</i> entry
	 * that describes output of parsed node
	 * @param {AbbreviationNode} node
	 * @param {String} syntax
	 */
	function matchResources(node, syntax) {
		var resources = require('resources');
		var elements = require('elements');
		var parser = require('abbreviationParser');

		// do a shallow copy because the children list can be modified during
		// resource matching
		_.each(_.clone(node.children), /** @param {AbbreviationNode} child */ function(child) {
			var r = resources.getMatchedResource(child, syntax);
			if (_.isString(r)) {
				child.data('resource', elements.create('snippet', r));
			} else if (elements.is(r, 'reference')) {
				// it’s a reference to another abbreviation:
				// parse it and insert instead of current child
				/** @type AbbreviationNode */
				var subtree = parser.parse(r.data, {
					syntax: syntax
				});

				// if context element should be repeated, check if we need to
				// transfer repeated element to specific child node
				if (child.repeatCount > 1) {
					var repeatedChildren = subtree.findAll(function(node) {
						return node.hasImplicitRepeat;
					});

					_.each(repeatedChildren, function(node) {
						node.repeatCount = child.repeatCount;
						node.hasImplicitRepeat = false;
					});
				}

				// move child‘s children into the deepest child of new subtree
				var deepestChild = subtree.deepestChild();
				if (deepestChild) {
					_.each(child.children, function(c) {
						deepestChild.addChild(c);
					});
				}

				// copy current attributes to children
				_.each(subtree.children, function(node) {
					_.each(child.attributeList(), function(attr) {
						node.attribute(attr.name, attr.value);
					});
				});

				child.replace(subtree.children);
			} else {
				child.data('resource', r);
			}

			matchResources(child, syntax);
		});
	}

	// XXX register abbreviation filter that creates references to resources
	// on abbreviation nodes
	/**
	 * @param {AbbreviationNode} tree
	 */
	require('abbreviationParser').addPreprocessor(function(tree, options) {
		var syntax = options.syntax || emmet.defaultSyntax();
		matchResources(tree, syntax);
	});

});/**
 * Pasted content abbreviation processor. A pasted content is a content that
 * should be inserted into implicitly repeated abbreviation nodes.
 * This processor powers “Wrap With Abbreviation” action
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	var parser = require('abbreviationParser');
	var outputPlaceholder = '$#';

	/**
	 * Locates output placeholders inside text
	 * @param {String} text
	 * @returns {Array} Array of ranges of output placeholder in text
	 */
	function locateOutputPlaceholder(text) {
		var range = require('range');
		var result = [];

		/** @type StringStream */
		var stream = require('stringStream').create(text);

		while (!stream.eol()) {
			if (stream.peek() == '\\') {
				stream.next();
			} else {
				stream.start = stream.pos;
				if (stream.match(outputPlaceholder, true)) {
					result.push(range.create(stream.start, outputPlaceholder));
					continue;
				}
			}
			stream.next();
		}

		return result;
	}

	/**
	 * Replaces output placeholders inside <code>source</code> with
	 * <code>value</code>
	 * @param {String} source
	 * @param {String} value
	 * @returns {String}
	 */
	function replaceOutputPlaceholders(source, value) {
		var utils = require('utils');
		var ranges = locateOutputPlaceholder(source);

		ranges.reverse();
		_.each(ranges, function(r) {
			source = utils.replaceSubstring(source, value, r);
		});

		return source;
	}

	/**
	 * Check if parsed node contains output placeholder – a target where
	 * pasted content should be inserted
	 * @param {AbbreviationNode} node
	 * @returns {Boolean}
	 */
	function hasOutputPlaceholder(node) {
		if (locateOutputPlaceholder(node.content).length)
			return true;

		// check if attributes contains placeholder
		return !!_.find(node.attributeList(), function(attr) {
			return !!locateOutputPlaceholder(attr.value).length;
		});
	}

	/**
	 * Insert pasted content into correct positions of parsed node
	 * @param {AbbreviationNode} node
	 * @param {String} content
	 * @param {Boolean} overwrite Overwrite node content if no value placeholders
	 * found instead of appending to existing content
	 */
	function insertPastedContent(node, content, overwrite) {
		var nodesWithPlaceholders = node.findAll(function(item) {
			return hasOutputPlaceholder(item);
		});

		if (hasOutputPlaceholder(node))
			nodesWithPlaceholders.unshift(node);

		if (nodesWithPlaceholders.length) {
			_.each(nodesWithPlaceholders, function(item) {
				item.content = replaceOutputPlaceholders(item.content, content);
				_.each(item._attributes, function(attr) {
					attr.value = replaceOutputPlaceholders(attr.value, content);
				});
			});
		} else {
			// on output placeholders in subtree, insert content in the deepest
			// child node
			var deepest = node.deepestChild() || node;
			if (overwrite) {
				deepest.content = content;
			} else {
				deepest.content = require('abbreviationUtils').insertChildContent(deepest.content, content);
			}
		}
	}

	/**
	 * @param {AbbreviationNode} tree
	 * @param {Object} options
	 */
	parser.addPreprocessor(function(tree, options) {
		if (options.pastedContent) {
			var utils = require('utils');
			var lines = _.map(utils.splitByLines(options.pastedContent, true), utils.trim);

			// set repeat count for implicitly repeated elements before
			// tree is unrolled
			tree.findAll(function(item) {
				if (item.hasImplicitRepeat) {
					item.data('paste', lines);
					return item.repeatCount = lines.length;
				}
			});
		}
	});

	/**
	 * @param {AbbreviationNode} tree
	 * @param {Object} options
	 */
	parser.addPostprocessor(function(tree, options) {
		// for each node with pasted content, update text data
		var targets = tree.findAll(function(item) {
			var pastedContentObj = item.data('paste');
			var pastedContent = '';
			if (_.isArray(pastedContentObj)) {
				pastedContent = pastedContentObj[item.counter - 1];
			} else if (_.isFunction(pastedContentObj)) {
				pastedContent = pastedContentObj(item.counter - 1, item.content);
			} else if (pastedContentObj) {
				pastedContent = pastedContentObj;
			}

			if (pastedContent) {
				insertPastedContent(item, pastedContent, !!item.data('pasteOverwrites'));
			}

			item.data('paste', null);
			return !!pastedContentObj;
		});

		if (!targets.length && options.pastedContent) {
			// no implicitly repeated elements, put pasted content in
			// the deepest child
			insertPastedContent(tree, options.pastedContent);
		}
	});
});/**
 * Resolves tag names in abbreviations with implied name
 */
emmet.exec(function(require, _) {
	/**
	 * Resolves implicit node names in parsed tree
	 * @param {AbbreviationNode} tree
	 */
	function resolveNodeNames(tree) {
		var tagName = require('tagName');
		_.each(tree.children, function(node) {
			if (node.hasImplicitName() || node.data('forceNameResolving')) {
				node._name = tagName.resolve(node.parent.name());
			}
			resolveNodeNames(node);
		});

		return tree;
	}

	require('abbreviationParser').addPostprocessor(resolveNodeNames);
});/**
 * @author Stoyan Stefanov
 * @link https://github.com/stoyan/etc/tree/master/cssex
 */

emmet.define('cssParser', function(require, _) {
var walker, tokens = [], isOp, isNameChar, isDigit;

    // walks around the source
    walker = {
        lines: null,
        total_lines: 0,
        linenum: -1,
        line: '',
        ch: '',
        chnum: -1,
        init: function (source) {
            var me = walker;

            // source, yumm
            me.lines = source
                .replace(/\r\n/g, '\n')
                .replace(/\r/g, '\n')
                .split('\n');
            me.total_lines = me.lines.length;

            // reset
            me.chnum = -1;
            me.linenum = -1;
            me.ch = '';
            me.line = '';

            // advance
            me.nextLine();
            me.nextChar();
        },
        nextLine: function () {
            var me = this;
            me.linenum += 1;
            if (me.total_lines <= me.linenum) {
                me.line = false;
            } else {
                me.line = me.lines[me.linenum];
            }
            if (me.chnum !== -1) {
                me.chnum = 0;
            }
            return me.line;
        },
        nextChar: function () {
            var me = this;
            me.chnum += 1;
            while (me.line.charAt(me.chnum) === '') {
                if (this.nextLine() === false) {
                    me.ch = false;
                    return false; // end of source
                }
                me.chnum = -1;
                me.ch = '\n';
                return '\n';
            }
            me.ch = me.line.charAt(me.chnum);
            return me.ch;
        },
        peek: function() {
            return this.line.charAt(this.chnum + 1);
        }
    };

    // utility helpers
    isNameChar = function (c) {
    	// be more tolerate for name tokens: allow & character for LESS syntax
        return (c == '&' || c === '_' || c === '-' || (c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z'));
    };

    isDigit = function (ch) {
        return (ch !== false && ch >= '0' && ch <= '9');
    };

    isOp = (function () {
        var opsa = "{}[]()+*=.,;:>~|\\%$#@^!".split(''),
            opsmatcha = "*^|$~".split(''),
            ops = {},
            opsmatch = {},
            i = 0;
        for (; i < opsa.length; i += 1) {
            ops[opsa[i]] = true;
        }
        for (i = 0; i < opsmatcha.length; i += 1) {
            opsmatch[opsmatcha[i]] = true;
        }
        return function (ch, matchattr) {
            if (matchattr) {
                return !!opsmatch[ch];
            }
            return !!ops[ch];
        };
    }());

    // shorthands
    function isset(v) {
        return typeof v !== 'undefined';
    }
    function getConf() {
        return {
            'char': walker.chnum,
            line: walker.linenum
        };
    }


    // creates token objects and pushes them to a list
    function tokener(value, type, conf) {
        var w = walker, c = conf || {};
        tokens.push({
            charstart: isset(c['char']) ? c['char'] : w.chnum,
            charend:   isset(c.charend) ? c.charend : w.chnum,
            linestart: isset(c.line)    ? c.line    : w.linenum,
            lineend:   isset(c.lineend) ? c.lineend : w.linenum,
            value:     value,
            type:      type || value
        });
    }

    // oops
    function error(m, config) {
        var w = walker,
            conf = config || {},
            c = isset(conf['char']) ? conf['char'] : w.chnum,
            l = isset(conf.line) ? conf.line : w.linenum;
        return {
            name: "ParseError",
            message: m + " at line " + (l + 1) + ' char ' + (c + 1),
            walker: w,
            tokens: tokens
        };
    }


    // token handlers follow for:
    // white space, comment, string, identifier, number, operator
    function white() {

        var c = walker.ch,
            token = '',
            conf = getConf();

        while (c === " " || c === "\t") {
            token += c;
            c = walker.nextChar();
        }

        tokener(token, 'white', conf);

    }

    function comment() {

        var w = walker,
            c = w.ch,
            token = c,
            cnext,
            conf = getConf();

        cnext = w.nextChar();

        if (cnext === '/') {
            // inline comment in SCSS and such
            token += cnext;
            var pk = w.peek();
            while (pk && pk !== '\n') {
                token += cnext;
                cnext = w.nextChar();
                pk = w.peek();
            }
        } else if (cnext === '*') {
            // multiline CSS commment
            while (!(c === "*" && cnext === "/")) {
                token += cnext;
                c = cnext;
                cnext = w.nextChar();
            }
        } else {
            // oops, not a comment, just a /
            conf.charend = conf['char'];
            conf.lineend = conf.line;
            return tokener(token, token, conf);
        }

        token += cnext;
        w.nextChar();
        tokener(token, 'comment', conf);
    }

    function str() {
        var w = walker,
            c = w.ch,
            q = c,
            token = c,
            cnext,
            conf = getConf();

        c = w.nextChar();

        while (c !== q) {

            if (c === '\n') {
                cnext = w.nextChar();
                if (cnext === "\\") {
                    token += c + cnext;
                } else {
                    // end of line with no \ escape = bad
                    throw error("Unterminated string", conf);
                }
            } else {
                if (c === "\\") {
                    token += c + w.nextChar();
                } else {
                    token += c;
                }
            }

            c = w.nextChar();

        }
        token += c;
        w.nextChar();
        tokener(token, 'string', conf);
    }

    function brace() {
        var w = walker,
            c = w.ch,
            depth = 0,
            token = c,
            conf = getConf();

        c = w.nextChar();

        while (c !== ')' && !depth) {
        	if (c === '(') {
        		depth++;
        	} else if (c === ')') {
        		depth--;
        	} else if (c === false) {
        		throw error("Unterminated brace", conf);
        	}

        	token += c;
            c = w.nextChar();
        }

        token += c;
        w.nextChar();
        tokener(token, 'brace', conf);
    }

    function identifier(pre) {
        var w = walker,
            c = w.ch,
            conf = getConf(),
            token = (pre) ? pre + c : c;

        c = w.nextChar();

        if (pre) { // adjust token position
        	conf['char'] -= pre.length;
        }

        while (isNameChar(c) || isDigit(c)) {
            token += c;
            c = w.nextChar();
        }

        tokener(token, 'identifier', conf);
    }

    function num() {
        var w = walker,
            c = w.ch,
            conf = getConf(),
            token = c,
            point = token === '.',
            nondigit;

        c = w.nextChar();
        nondigit = !isDigit(c);

        // .2px or .classname?
        if (point && nondigit) {
            // meh, NaN, could be a class name, so it's an operator for now
            conf.charend = conf['char'];
            conf.lineend = conf.line;
            return tokener(token, '.', conf);
        }

        // -2px or -moz-something
        if (token === '-' && nondigit) {
            return identifier('-');
        }

        while (c !== false && (isDigit(c) || (!point && c === '.'))) { // not end of source && digit or first instance of .
            if (c === '.') {
                point = true;
            }
            token += c;
            c = w.nextChar();
        }

        tokener(token, 'number', conf);

    }

    function op() {
        var w = walker,
            c = w.ch,
            conf = getConf(),
            token = c,
            next = w.nextChar();

        if (next === "=" && isOp(token, true)) {
            token += next;
            tokener(token, 'match', conf);
            w.nextChar();
            return;
        }

        conf.charend = conf['char'] + 1;
        conf.lineend = conf.line;
        tokener(token, token, conf);
    }


    // call the appropriate handler based on the first character in a token suspect
    function tokenize() {

        var ch = walker.ch;

        if (ch === " " || ch === "\t") {
            return white();
        }

        if (ch === '/') {
            return comment();
        }

        if (ch === '"' || ch === "'") {
            return str();
        }

        if (ch === '(') {
            return brace();
        }

        if (ch === '-' || ch === '.' || isDigit(ch)) { // tricky - char: minus (-1px) or dash (-moz-stuff)
            return num();
        }

        if (isNameChar(ch)) {
            return identifier();
        }

        if (isOp(ch)) {
            return op();
        }

        if (ch === "\n") {
            tokener("line");
            walker.nextChar();
            return;
        }

        throw error("Unrecognized character");
    }

    /**
	 * Returns newline character at specified position in content
	 * @param {String} content
	 * @param {Number} pos
	 * @return {String}
	 */
	function getNewline(content, pos) {
		return content.charAt(pos) == '\r' && content.charAt(pos + 1) == '\n'
			? '\r\n'
			: content.charAt(pos);
	}

    return {
    	/**
    	 * @param source
    	 * @returns
    	 * @memberOf emmet.cssParser
    	 */
        lex: function (source) {
            walker.init(source);
            tokens = [];
            while (walker.ch !== false) {
                tokenize();
            }
            return tokens;
        },

        /**
         * Tokenizes CSS source
         * @param {String} source
         * @returns {Array}
         */
        parse: function(source) {
        	// transform tokens
	 		var pos = 0;
	 		return _.map(this.lex(source), function(token) {
	 			if (token.type == 'line') {
	 				token.value = getNewline(source, pos);
	 			}

	 			return {
	 				type: token.type,
	 				start: pos,
	 				end: (pos += token.value.length)
	 			};
			});
		},

        toSource: function (toks) {
            var i = 0, max = toks.length, t, src = '';
            for (; i < max; i += 1) {
                t = toks[i];
                if (t.type === 'line') {
                    src += '\n';
                } else {
                    src += t.value;
                }
            }
            return src;
        }
    };
});/**
 * HTML tokenizer by Marijn Haverbeke
 * http://codemirror.net/
 * @constructor
 * @memberOf __xmlParseDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('xmlParser', function(require, _) {
	var Kludges = {
		autoSelfClosers : {},
		implicitlyClosed : {},
		contextGrabbers : {},
		doNotIndent : {},
		allowUnquoted : true,
		allowMissing : true
	};

	// Return variables for tokenizers
	var tagName = null, type = null;

	function inText(stream, state) {
		function chain(parser) {
			state.tokenize = parser;
			return parser(stream, state);
		}

		var ch = stream.next();
		if (ch == "<") {
			if (stream.eat("!")) {
				if (stream.eat("[")) {
					if (stream.match("CDATA["))
						return chain(inBlock("atom", "]]>"));
					else
						return null;
				} else if (stream.match("--"))
					return chain(inBlock("comment", "-->"));
				else if (stream.match("DOCTYPE", true, true)) {
					stream.eatWhile(/[\w\._\-]/);
					return chain(doctype(1));
				} else
					return null;
			} else if (stream.eat("?")) {
				stream.eatWhile(/[\w\._\-]/);
				state.tokenize = inBlock("meta", "?>");
				return "meta";
			} else {
				type = stream.eat("/") ? "closeTag" : "openTag";
				stream.eatSpace();
				tagName = "";
				var c;
				while ((c = stream.eat(/[^\s\u00a0=<>\"\'\/?]/)))
					tagName += c;
				state.tokenize = inTag;
				return "tag";
			}
		} else if (ch == "&") {
			var ok;
			if (stream.eat("#")) {
				if (stream.eat("x")) {
					ok = stream.eatWhile(/[a-fA-F\d]/) && stream.eat(";");
				} else {
					ok = stream.eatWhile(/[\d]/) && stream.eat(";");
				}
			} else {
				ok = stream.eatWhile(/[\w\.\-:]/) && stream.eat(";");
			}
			return ok ? "atom" : "error";
		} else {
			stream.eatWhile(/[^&<]/);
			return "text";
		}
	}

	function inTag(stream, state) {
		var ch = stream.next();
		if (ch == ">" || (ch == "/" && stream.eat(">"))) {
			state.tokenize = inText;
			type = ch == ">" ? "endTag" : "selfcloseTag";
			return "tag";
		} else if (ch == "=") {
			type = "equals";
			return null;
		} else if (/[\'\"]/.test(ch)) {
			state.tokenize = inAttribute(ch);
			return state.tokenize(stream, state);
		} else {
			stream.eatWhile(/[^\s\u00a0=<>\"\'\/?]/);
			return "word";
		}
	}

	function inAttribute(quote) {
		return function(stream, state) {
			while (!stream.eol()) {
				if (stream.next() == quote) {
					state.tokenize = inTag;
					break;
				}
			}
			return "string";
		};
	}

	function inBlock(style, terminator) {
		return function(stream, state) {
			while (!stream.eol()) {
				if (stream.match(terminator)) {
					state.tokenize = inText;
					break;
				}
				stream.next();
			}
			return style;
		};
	}

	function doctype(depth) {
		return function(stream, state) {
			var ch;
			while ((ch = stream.next()) != null) {
				if (ch == "<") {
					state.tokenize = doctype(depth + 1);
					return state.tokenize(stream, state);
				} else if (ch == ">") {
					if (depth == 1) {
						state.tokenize = inText;
						break;
					} else {
						state.tokenize = doctype(depth - 1);
						return state.tokenize(stream, state);
					}
				}
			}
			return "meta";
		};
	}

	var curState = null, setStyle;
	function pass() {
		for (var i = arguments.length - 1; i >= 0; i--)
			curState.cc.push(arguments[i]);
	}

	function cont() {
		pass.apply(null, arguments);
		return true;
	}

	function pushContext(tagName, startOfLine) {
		var noIndent = Kludges.doNotIndent.hasOwnProperty(tagName)
			|| (curState.context && curState.context.noIndent);
		curState.context = {
			prev : curState.context,
			tagName : tagName,
			indent : curState.indented,
			startOfLine : startOfLine,
			noIndent : noIndent
		};
	}

	function popContext() {
		if (curState.context)
			curState.context = curState.context.prev;
	}

	function element(type) {
		if (type == "openTag") {
			curState.tagName = tagName;
			return cont(attributes, endtag(curState.startOfLine));
		} else if (type == "closeTag") {
			var err = false;
			if (curState.context) {
				if (curState.context.tagName != tagName) {
					if (Kludges.implicitlyClosed.hasOwnProperty(curState.context.tagName.toLowerCase())) {
						popContext();
					}
					err = !curState.context || curState.context.tagName != tagName;
				}
			} else {
				err = true;
			}

			if (err)
				setStyle = "error";
			return cont(endclosetag(err));
		}
		return cont();
	}

	function endtag(startOfLine) {
		return function(type) {
			if (type == "selfcloseTag"
					|| (type == "endTag" && Kludges.autoSelfClosers
							.hasOwnProperty(curState.tagName
									.toLowerCase()))) {
				maybePopContext(curState.tagName.toLowerCase());
				return cont();
			}
			if (type == "endTag") {
				maybePopContext(curState.tagName.toLowerCase());
				pushContext(curState.tagName, startOfLine);
				return cont();
			}
			return cont();
		};
	}

	function endclosetag(err) {
		return function(type) {
			if (err)
				setStyle = "error";
			if (type == "endTag") {
				popContext();
				return cont();
			}
			setStyle = "error";
			return cont(arguments.callee);
		};
	}

	function maybePopContext(nextTagName) {
		var parentTagName;
		while (true) {
			if (!curState.context) {
				return;
			}
			parentTagName = curState.context.tagName.toLowerCase();
			if (!Kludges.contextGrabbers.hasOwnProperty(parentTagName)
					|| !Kludges.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {
				return;
			}
			popContext();
		}
	}

	function attributes(type) {
		if (type == "word") {
			setStyle = "attribute";
			return cont(attribute, attributes);
		}
		if (type == "endTag" || type == "selfcloseTag")
			return pass();
		setStyle = "error";
		return cont(attributes);
	}

	function attribute(type) {
		if (type == "equals")
			return cont(attvalue, attributes);
		if (!Kludges.allowMissing)
			setStyle = "error";
		return (type == "endTag" || type == "selfcloseTag") ? pass()
				: cont();
	}

	function attvalue(type) {
		if (type == "string")
			return cont(attvaluemaybe);
		if (type == "word" && Kludges.allowUnquoted) {
			setStyle = "string";
			return cont();
		}
		setStyle = "error";
		return (type == "endTag" || type == "selfCloseTag") ? pass()
				: cont();
	}

	function attvaluemaybe(type) {
		if (type == "string")
			return cont(attvaluemaybe);
		else
			return pass();
	}

	function startState() {
		return {
			tokenize : inText,
			cc : [],
			indented : 0,
			startOfLine : true,
			tagName : null,
			context : null
		};
	}

	function token(stream, state) {
		if (stream.sol()) {
			state.startOfLine = true;
			state.indented = 0;
		}

		if (stream.eatSpace())
			return null;

		setStyle = type = tagName = null;
		var style = state.tokenize(stream, state);
		state.type = type;
		if ((style || type) && style != "comment") {
			curState = state;
			while (true) {
				var comb = state.cc.pop() || element;
				if (comb(type || style))
					break;
			}
		}
		state.startOfLine = false;
		return setStyle || style;
	}

	return {
		/**
		 * @memberOf emmet.xmlParser
		 * @returns
		 */
		parse: function(data, offset) {
			offset = offset || 0;
			var state = startState();
			var stream = require('stringStream').create(data);
			var tokens = [];
			while (!stream.eol()) {
				tokens.push({
					type: token(stream, state),
					start: stream.start + offset,
					end: stream.pos + offset
				});
				stream.start = stream.pos;
			}

			return tokens;
		}
	};
});
/*!
 * string_score.js: String Scoring Algorithm 0.1.10
 *
 * http://joshaven.com/string_score
 * https://github.com/joshaven/string_score
 *
 * Copyright (C) 2009-2011 Joshaven Potter <yourtech@gmail.com>
 * Special thanks to all of the contributors listed here https://github.com/joshaven/string_score
 * MIT license: http://www.opensource.org/licenses/mit-license.php
 *
 * Date: Tue Mar 1 2011
*/

/**
 * Scores a string against another string.
 *  'Hello World'.score('he');     //=> 0.5931818181818181
 *  'Hello World'.score('Hello');  //=> 0.7318181818181818
 */
emmet.define('string-score', function(require, _) {
	return {
		score: function(string, abbreviation, fuzziness) {
			// If the string is equal to the abbreviation, perfect match.
			  if (string == abbreviation) {return 1;}
			  //if it's not a perfect match and is empty return 0
			  if(abbreviation == "") {return 0;}

			  var total_character_score = 0,
			      abbreviation_length = abbreviation.length,
			      string_length = string.length,
			      start_of_string_bonus,
			      abbreviation_score,
			      fuzzies=1,
			      final_score;

			  // Walk through abbreviation and add up scores.
			  for (var i = 0,
			         character_score/* = 0*/,
			         index_in_string/* = 0*/,
			         c/* = ''*/,
			         index_c_lowercase/* = 0*/,
			         index_c_uppercase/* = 0*/,
			         min_index/* = 0*/;
			     i < abbreviation_length;
			     ++i) {

			    // Find the first case-insensitive match of a character.
			    c = abbreviation.charAt(i);

			    index_c_lowercase = string.indexOf(c.toLowerCase());
			    index_c_uppercase = string.indexOf(c.toUpperCase());
			    min_index = Math.min(index_c_lowercase, index_c_uppercase);
			    index_in_string = (min_index > -1) ? min_index : Math.max(index_c_lowercase, index_c_uppercase);

			    if (index_in_string === -1) {
			      if (fuzziness) {
			        fuzzies += 1-fuzziness;
			        continue;
			      } else {
			        return 0;
			      }
			    } else {
			      character_score = 0.1;
			    }

			    // Set base score for matching 'c'.

			    // Same case bonus.
			    if (string[index_in_string] === c) {
			      character_score += 0.1;
			    }

			    // Consecutive letter & start-of-string Bonus
			    if (index_in_string === 0) {
			      // Increase the score when matching first character of the remainder of the string
			      character_score += 0.6;
			      if (i === 0) {
			        // If match is the first character of the string
			        // & the first character of abbreviation, add a
			        // start-of-string match bonus.
			        start_of_string_bonus = 1; //true;
			      }
			    }
			    else {
			  // Acronym Bonus
			  // Weighing Logic: Typing the first character of an acronym is as if you
			  // preceded it with two perfect character matches.
			  if (string.charAt(index_in_string - 1) === ' ') {
			    character_score += 0.8; // * Math.min(index_in_string, 5); // Cap bonus at 0.4 * 5
			  }
			    }

			    // Left trim the already matched part of the string
			    // (forces sequential matching).
			    string = string.substring(index_in_string + 1, string_length);

			    total_character_score += character_score;
			  } // end of for loop

			  // Uncomment to weigh smaller words higher.
			  // return total_character_score / string_length;

			  abbreviation_score = total_character_score / abbreviation_length;
			  //percentage_of_matched_string = abbreviation_length / string_length;
			  //word_score = abbreviation_score * percentage_of_matched_string;

			  // Reduce penalty for longer strings.
			  //final_score = (word_score + abbreviation_score) / 2;
			  final_score = ((abbreviation_score * (abbreviation_length / string_length)) + abbreviation_score) / 2;

			  final_score = final_score / fuzzies;

			  if (start_of_string_bonus && (final_score + 0.15 < 1)) {
			    final_score += 0.15;
			  }

			  return final_score;
		}
	};
});/**
 * Utility module for Emmet
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('utils', function(require, _) {
	/**
	 * Special token used as a placeholder for caret positions inside
	 * generated output
	 */
	var caretPlaceholder = '${0}';

	/**
	 * A simple string builder, optimized for faster text concatenation
	 * @param {String} value Initial value
	 */
	function StringBuilder(value) {
		this._data = [];
		this.length = 0;

		if (value)
			this.append(value);
	}

	StringBuilder.prototype = {
		/**
		 * Append string
		 * @param {String} text
		 */
		append: function(text) {
			this._data.push(text);
			this.length += text.length;
		},

		/**
		 * @returns {String}
		 */
		toString: function() {
			return this._data.join('');
		},

		/**
		 * @returns {String}
		 */
		valueOf: function() {
			return this.toString();
		}
	};

	return {
		/** @memberOf utils */
		reTag: /<\/?[\w:\-]+(?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*\s*(\/?)>$/,

		/**
		 * Test if passed string ends with XHTML tag. This method is used for testing
		 * '>' character: it belongs to tag or it's a part of abbreviation?
		 * @param {String} str
		 * @return {Boolean}
		 */
		endsWithTag: function(str) {
			return this.reTag.test(str);
		},

		/**
		 * Check if passed symbol is a number
		 * @param {String} ch
		 * @returns {Boolean}
		 */
		isNumeric: function(ch) {
			if (typeof(ch) == 'string')
				ch = ch.charCodeAt(0);

			return (ch && ch > 47 && ch < 58);
		},

		/**
		 * Trim whitespace from string
		 * @param {String} text
		 * @return {String}
		 */
		trim: function(text) {
			return (text || "").replace(/^\s+|\s+$/g, "");
		},

		/**
		 * Returns newline character
		 * @returns {String}
		 */
		getNewline: function() {
			var res = require('resources');
			if (!res) {
				return '\n';
			}

			var nl = res.getVariable('newline');
			return _.isString(nl) ? nl : '\n';
		},

		/**
		 * Sets new newline character that will be used in output
		 * @param {String} str
		 */
		setNewline: function(str) {
			var res = require('resources');
			res.setVariable('newline', str);
			res.setVariable('nl', str);
		},

		/**
		 * Split text into lines. Set <code>remove_empty</code> to true to filter
		 * empty lines
		 * @param {String} text Text to split
		 * @param {Boolean} removeEmpty Remove empty lines from result
		 * @return {Array}
		 */
		splitByLines: function(text, removeEmpty) {
			// IE fails to split string by regexp,
			// need to normalize newlines first
			// Also, Mozilla's Rhiho JS engine has a weird newline bug
			var nl = this.getNewline();
			var lines = (text || '')
				.replace(/\r\n/g, '\n')
				.replace(/\n\r/g, '\n')
				.replace(/\r/g, '\n')
				.replace(/\n/g, nl)
				.split(nl);

			if (removeEmpty) {
				lines = _.filter(lines, function(line) {
					return line.length && !!this.trim(line);
				}, this);
			}

			return lines;
		},

		/**
		 * Normalizes newline character: replaces newlines in <code>text</code>
		 * with newline defined in preferences
		 * @param {String} text
		 * @returns {String}
		 */
		normalizeNewline: function(text) {
			return this.splitByLines(text).join(this.getNewline());
		},

		/**
		 * Repeats string <code>howMany</code> times
		 * @param {String} str
		 * @param {Number} how_many
		 * @return {String}
		 */
		repeatString: function(str, howMany) {
			var result = [];

			for (var i = 0; i < howMany; i++)
				result.push(str);

			return result.join('');
		},

		/**
		 * Returns list of paddings that should be used to align passed string
		 * @param {Array} strings
		 * @returns {Array}
		 */
		getStringsPads: function(strings) {
			var lengths = _.map(strings, function(s) {
				return _.isString(s) ? s.length : +s;
			});

			var max = _.max(lengths);
			return _.map(lengths, function(l) {
				var pad = max - l;
				return pad ? this.repeatString(' ', pad) : '';
			}, this);
		},

		/**
		 * Indents text with padding
		 * @param {String} text Text to indent
		 * @param {String} pad Padding size (number) or padding itself (string)
		 * @return {String}
		 */
		padString: function(text, pad) {
			var padStr = (_.isNumber(pad))
				? this.repeatString(require('resources').getVariable('indentation') || '\t', pad)
				: pad;

			var result = [];

			var lines = this.splitByLines(text);
			var nl = this.getNewline();

			result.push(lines[0]);
			for (var j = 1; j < lines.length; j++)
				result.push(nl + padStr + lines[j]);

			return result.join('');
		},

		/**
		 * Pad string with zeroes
		 * @param {String} str String to pad
		 * @param {Number} pad Desired string length
		 * @return {String}
		 */
		zeroPadString: function(str, pad) {
			var padding = '';
			var il = str.length;

			while (pad > il++) padding += '0';
			return padding + str;
		},

		/**
		 * Removes padding at the beginning of each text's line
		 * @param {String} text
		 * @param {String} pad
		 */
		unindentString: function(text, pad) {
			var lines = this.splitByLines(text);
			for (var i = 0; i < lines.length; i++) {
				if (lines[i].search(pad) == 0)
					lines[i] = lines[i].substr(pad.length);
			}

			return lines.join(this.getNewline());
		},

		/**
		 * Replaces unescaped symbols in <code>str</code>. For example, the '$' symbol
		 * will be replaced in 'item$count', but not in 'item\$count'.
		 * @param {String} str Original string
		 * @param {String} symbol Symbol to replace
		 * @param {String} replace Symbol replacement. Might be a function that
		 * returns new value
		 * @return {String}
		 */
		replaceUnescapedSymbol: function(str, symbol, replace) {
			var i = 0;
			var il = str.length;
			var sl = symbol.length;
			var matchCount = 0;

			while (i < il) {
				if (str.charAt(i) == '\\') {
					// escaped symbol, skip next character
					i += sl + 1;
				} else if (str.substr(i, sl) == symbol) {
					// have match
					var curSl = sl;
					matchCount++;
					var newValue = replace;
					if (_.isFunction(replace)) {
						var replaceData = replace(str, symbol, i, matchCount);
						if (replaceData) {
							curSl = replaceData[0].length;
							newValue = replaceData[1];
						} else {
							newValue = false;
						}
					}

					if (newValue === false) { // skip replacement
						i++;
						continue;
					}

					str = str.substring(0, i) + newValue + str.substring(i + curSl);
					// adjust indexes
					il = str.length;
					i += newValue.length;
				} else {
					i++;
				}
			}

			return str;
		},

		/**
		 * Replace variables like ${var} in string
		 * @param {String} str
		 * @param {Object} vars Variable set (defaults to variables defined in
		 * <code>snippets.json</code>) or variable resolver (<code>Function</code>)
		 * @return {String}
		 */
		replaceVariables: function(str, vars) {
			vars = vars || {};
			var resolver = _.isFunction(vars) ? vars : function(str, p1) {
				return p1 in vars ? vars[p1] : null;
			};

			var res = require('resources');
			return require('tabStops').processText(str, {
				variable: function(data) {
					var newValue = resolver(data.token, data.name, data);
					if (newValue === null) {
						// try to find variable in resources
						newValue = res.getVariable(data.name);
					}

					if (newValue === null || _.isUndefined(newValue))
						// nothing found, return token itself
						newValue = data.token;
					return newValue;
				}
			});
		},

		/**
		 * Replaces '$' character in string assuming it might be escaped with '\'
		 * @param {String} str String where character should be replaced
		 * @param {String} value New value
		 * @return {String}
		 */
		replaceCounter: function(str, value, total) {
			var symbol = '$';
			// in case we received strings from Java, convert the to native strings
			str = String(str);
			value = String(value);

			if (/^\-?\d+$/.test(value)) {
				value = +value;
			}

			var that = this;

			return this.replaceUnescapedSymbol(str, symbol, function(str, symbol, pos, matchNum){
				if (str.charAt(pos + 1) == '{' || that.isNumeric(str.charAt(pos + 1)) ) {
					// it's a variable, skip it
					return false;
				}

				// replace sequense of $ symbols with padded number
				var j = pos + 1;
				while(str.charAt(j) == '$' && str.charAt(j + 1) != '{') j++;
				var pad = j - pos;

				// get counter base
				var base = 0, decrement = false, m;
				if (m = str.substr(j).match(/^@(\-?)(\d*)/)) {
					j += m[0].length;

					if (m[1]) {
						decrement = true;
					}

					base = parseInt(m[2] || 1) - 1;
				}

				if (decrement && total && _.isNumber(value)) {
					value = total - value + 1;
				}

				value += base;

				return [str.substring(pos, j), that.zeroPadString(value + '', pad)];
			});
		},

		/**
		 * Check if string matches against <code>reTag</code> regexp. This
		 * function may be used to test if provided string contains HTML tags
		 * @param {String} str
		 * @returns {Boolean}
		 */
		matchesTag: function(str) {
			return this.reTag.test(str || '');
		},

		/**
		 * Escapes special characters used in Emmet, like '$', '|', etc.
		 * Use this method before passing to actions like "Wrap with Abbreviation"
		 * to make sure that existing special characters won't be altered
		 * @param {String} text
		 * @return {String}
		 */
		escapeText: function(text) {
			return text.replace(/([\$\\])/g, '\\$1');
		},

		/**
		 * Unescapes special characters used in Emmet, like '$', '|', etc.
		 * @param {String} text
		 * @return {String}
		 */
		unescapeText: function(text) {
			return text.replace(/\\(.)/g, '$1');
		},

		/**
		 * Returns caret placeholder
		 * @returns {String}
		 */
		getCaretPlaceholder: function() {
			return _.isFunction(caretPlaceholder)
				? caretPlaceholder.apply(this, arguments)
				: caretPlaceholder;
		},

		/**
		 * Sets new representation for carets in generated output
		 * @param {String} value New caret placeholder. Might be a
		 * <code>Function</code>
		 */
		setCaretPlaceholder: function(value) {
			caretPlaceholder = value;
		},

		/**
		 * Returns line padding
		 * @param {String} line
		 * @return {String}
		 */
		getLinePadding: function(line) {
			return (line.match(/^(\s+)/) || [''])[0];
		},

		/**
		 * Helper function that returns padding of line of <code>pos</code>
		 * position in <code>content</code>
		 * @param {String} content
		 * @param {Number} pos
		 * @returns {String}
		 */
		getLinePaddingFromPosition: function(content, pos) {
			var lineRange = this.findNewlineBounds(content, pos);
			return this.getLinePadding(lineRange.substring(content));
		},

		/**
		 * Escape special regexp chars in string, making it usable for creating dynamic
		 * regular expressions
		 * @param {String} str
		 * @return {String}
		 */
		escapeForRegexp: function(str) {
			var specials = new RegExp("[.*+?|()\\[\\]{}\\\\]", "g"); // .*+?|()[]{}\
			return str.replace(specials, "\\$&");
		},

		/**
		 * Make decimal number look good: convert it to fixed precision end remove
		 * traling zeroes
		 * @param {Number} num
		 * @param {Number} fracion Fraction numbers (default is 2)
		 * @return {String}
		 */
		prettifyNumber: function(num, fraction) {
			return num.toFixed(typeof fraction == 'undefined' ? 2 : fraction).replace(/\.?0+$/, '');
		},

		/**
		 * A simple mutable string shim, optimized for faster text concatenation
		 * @param {String} value Initial value
		 * @returns {StringBuilder}
		 */
		stringBuilder: function(value) {
			return new StringBuilder(value);
		},

		/**
		 * Replace substring of <code>str</code> with <code>value</code>
		 * @param {String} str String where to replace substring
		 * @param {String} value New substring value
		 * @param {Number} start Start index of substring to replace. May also
		 * be a <code>Range</code> object: in this case, the <code>end</code>
		 * argument is not required
		 * @param {Number} end End index of substring to replace. If ommited,
		 * <code>start</code> argument is used
		 */
		replaceSubstring: function(str, value, start, end) {
			if (_.isObject(start) && 'end' in start) {
				end = start.end;
				start = start.start;
			}

			if (_.isString(end))
				end = start + end.length;

			if (_.isUndefined(end))
				end = start;

			if (start < 0 || start > str.length)
				return str;

			return str.substring(0, start) + value + str.substring(end);
		},

		/**
		 * Narrows down text range, adjusting selection to non-space characters
		 * @param {String} text
		 * @param {Number} start Starting range in <code>text</code> where
		 * slection should be adjusted. Can also be any object that is accepted
		 * by <code>Range</code> class
		 * @return {Range}
		 */
		narrowToNonSpace: function(text, start, end) {
			var range = require('range').create(start, end);

			var reSpace = /[\s\n\r\u00a0]/;
			// narrow down selection until first non-space character
			while (range.start < range.end) {
				if (!reSpace.test(text.charAt(range.start)))
					break;

				range.start++;
			}

			while (range.end > range.start) {
				range.end--;
				if (!reSpace.test(text.charAt(range.end))) {
					range.end++;
					break;
				}
			}

			return range;
		},

		/**
		 * Find start and end index of text line for <code>from</code> index
		 * @param {String} text
		 * @param {Number} from
		 */
		findNewlineBounds: function(text, from) {
			var len = text.length,
				start = 0,
				end = len - 1;

			// search left
			for (var i = from - 1; i > 0; i--) {
				var ch = text.charAt(i);
				if (ch == '\n' || ch == '\r') {
					start = i + 1;
					break;
				}
			}
			// search right
			for (var j = from; j < len; j++) {
				var ch = text.charAt(j);
				if (ch == '\n' || ch == '\r') {
					end = j;
					break;
				}
			}

			return require('range').create(start, end - start);
		},

		/**
		 * Deep merge of two or more objects. Taken from jQuery.extend()
		 */
		deepMerge: function() {
			var options, name, src, copy, copyIsArray, clone,
				target = arguments[0] || {},
				i = 1,
				length = arguments.length;


			// Handle case when target is a string or something (possible in deep copy)
			if (!_.isObject(target) && !_.isFunction(target)) {
				target = {};
			}

			for ( ; i < length; i++ ) {
				// Only deal with non-null/undefined values
				if ( (options = arguments[ i ]) != null ) {
					// Extend the base object
					for ( name in options ) {
						src = target[ name ];
						copy = options[ name ];

						// Prevent never-ending loop
						if ( target === copy ) {
							continue;
						}

						// Recurse if we're merging plain objects or arrays
						if ( copy && ( _.isObject(copy) || (copyIsArray = _.isArray(copy)) ) ) {
							if ( copyIsArray ) {
								copyIsArray = false;
								clone = src && _.isArray(src) ? src : [];

							} else {
								clone = src && _.isObject(src) ? src : {};
							}

							// Never move original objects, clone them
							target[ name ] = this.deepMerge(clone, copy );

						// Don't bring in undefined values
						} else if ( copy !== undefined ) {
							target[ name ] = copy;
						}
					}
				}
			}

			// Return the modified object
			return target;
		}
	};
});
/**
 * Helper module to work with ranges
 * @constructor
 * @memberOf __rangeDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('range', function(require, _) {
	function cmp(a, b, op) {
		switch (op) {
			case 'eq':
			case '==':
				return a === b;
			case 'lt':
			case '<':
				return a < b;
			case 'lte':
			case '<=':
				return a <= b;
			case 'gt':
			case '>':
				return a > b;
			case 'gte':
			case '>=':
				return a >= b;
		}
	}


	/**
	 * @type Range
	 * @constructor
	 * @param {Object} start
	 * @param {Number} len
	 */
	function Range(start, len) {
		if (_.isObject(start) && 'start' in start) {
			// create range from object stub
			this.start = Math.min(start.start, start.end);
			this.end = Math.max(start.start, start.end);
		} else if (_.isArray(start)) {
			this.start = start[0];
			this.end = start[1];
		} else {
			len = _.isString(len) ? len.length : +len;
			this.start = start;
			this.end = start + len;
		}
	}

	Range.prototype = {
		length: function() {
			return Math.abs(this.end - this.start);
		},

		/**
		 * Returns <code>true</code> if passed range is equals to current one
		 * @param {Range} range
		 * @returns {Boolean}
		 */
		equal: function(range) {
			return this.cmp(range, 'eq', 'eq');
//			return this.start === range.start && this.end === range.end;
		},

		/**
		 * Shifts indexes position with passed <code>delat</code>
		 * @param {Number} delta
		 * @returns {Range} range itself
		 */
		shift: function(delta) {
			this.start += delta;
			this.end += delta;
			return this;
		},

		/**
		 * Check if two ranges are overlapped
		 * @param {Range} range
		 * @returns {Boolean}
		 */
		overlap: function(range) {
			return range.start <= this.end && range.end >= this.start;
		},

		/**
		 * Finds intersection of two ranges
		 * @param {Range} range
		 * @returns {Range} <code>null</code> if ranges does not overlap
		 */
		intersection: function(range) {
			if (this.overlap(range)) {
				var start = Math.max(range.start, this.start);
				var end = Math.min(range.end, this.end);
				return new Range(start, end - start);
			}

			return null;
		},

		/**
		 * Returns the union of the thow ranges.
		 * @param {Range} range
		 * @returns {Range} <code>null</code> if ranges are not overlapped
		 */
		union: function(range) {
			if (this.overlap(range)) {
				var start = Math.min(range.start, this.start);
				var end = Math.max(range.end, this.end);
				return new Range(start, end - start);
			}

			return null;
		},

		/**
		 * Returns a Boolean value that indicates whether a specified position
		 * is in a given range.
		 * @param {Number} loc
		 */
		inside: function(loc) {
			return this.cmp(loc, 'lte', 'gt');
//			return this.start <= loc && this.end > loc;
		},

		/**
		 * Returns a Boolean value that indicates whether a specified position
		 * is in a given range, but not equals bounds.
		 * @param {Number} loc
		 */
		contains: function(loc) {
			return this.cmp(loc, 'lt', 'gt');
		},

		/**
		 * Check if current range completely includes specified one
		 * @param {Range} r
		 * @returns {Boolean}
		 */
		include: function(r) {
			return this.cmp(loc, 'lte', 'gte');
//			return this.start <= r.start && this.end >= r.end;
		},

		/**
		 * Low-level comparision method
		 * @param {Number} loc
		 * @param {String} left Left comparison operator
		 * @param {String} right Right comaprison operator
		 */
		cmp: function(loc, left, right) {
			var a, b;
			if (loc instanceof Range) {
				a = loc.start;
				b = loc.end;
			} else {
				a = b = loc;
			}

			return cmp(this.start, a, left || '<=') && cmp(this.end, b, right || '>');
		},

		/**
		 * Returns substring of specified <code>str</code> for current range
		 * @param {String} str
		 * @returns {String}
		 */
		substring: function(str) {
			return this.length() > 0
				? str.substring(this.start, this.end)
				: '';
		},

		/**
		 * Creates copy of current range
		 * @returns {Range}
		 */
		clone: function() {
			return new Range(this.start, this.length());
		},

		/**
		 * @returns {Array}
		 */
		toArray: function() {
			return [this.start, this.end];
		},

		toString: function() {
			return '{' + this.start + ', ' + this.length() + '}';
		}
	};

	return {
		/**
		 * Creates new range object instance
		 * @param {Object} start Range start or array with 'start' and 'end'
		 * as two first indexes or object with 'start' and 'end' properties
		 * @param {Number} len Range length or string to produce range from
		 * @returns {Range}
		 * @memberOf emmet.range
		 */
		create: function(start, len) {
			if (_.isUndefined(start) || start === null)
				return null;

			if (start instanceof Range)
				return start;

			if (_.isObject(start) && 'start' in start && 'end' in start) {
				len = start.end - start.start;
				start = start.start;
			}

			return new Range(start, len);
		},

		/**
		 * <code>Range</code> object factory, the same as <code>this.create()</code>
		 * but last argument represents end of range, not length
		 * @returns {Range}
		 */
		create2: function(start, end) {
			if (_.isNumber(start) && _.isNumber(end)) {
				end -= start;
			}

			return this.create(start, end);
		}
	};
});/**
 * Utility module that provides ordered storage of function handlers.
 * Many Emmet modules' functionality can be extended/overridden by custom
 * function. This modules provides unified storage of handler functions, their
 * management and execution
 *
 * @constructor
 * @memberOf __handlerListDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('handlerList', function(require, _) {
	/**
	 * @type HandlerList
	 * @constructor
	 */
	function HandlerList() {
		this._list = [];
	}

	HandlerList.prototype = {
		/**
		 * Adds function handler
		 * @param {Function} fn Handler
		 * @param {Object} options Handler options. Possible values are:<br><br>
		 * <b>order</b> : (<code>Number</code>) – order in handler list. Handlers
		 * with higher order value will be executed earlier.
		 */
		add: function(fn, options) {
			this._list.push(_.extend({order: 0}, options || {}, {fn: fn}));
		},

		/**
		 * Removes handler from list
		 * @param {Function} fn
		 */
		remove: function(fn) {
			this._list = _.without(this._list, _.find(this._list, function(item) {
				return item.fn === fn;
			}));
		},

		/**
		 * Returns ordered list of handlers. By default, handlers
		 * with the same <code>order</code> option returned in reverse order,
		 * i.e. the latter function was added into the handlers list, the higher
		 * it will be in the returned array
		 * @returns {Array}
		 */
		list: function() {
			return _.sortBy(this._list, 'order').reverse();
		},

		/**
		 * Returns ordered list of handler functions
		 * @returns {Array}
		 */
		listFn: function() {
			return _.pluck(this.list(), 'fn');
		},

		/**
		 * Executes handler functions in their designated order. If function
		 * returns <code>skipVal</code>, meaning that function was unable to
		 * handle passed <code>args</code>, the next function will be executed
		 * and so on.
		 * @param {Object} skipValue If function returns this value, execute
		 * next handler.
		 * @param {Array} args Arguments to pass to handler function
		 * @returns {Boolean} Whether any of registered handlers performed
		 * successfully
		 */
		exec: function(skipValue, args) {
			args = args || [];
			var result = null;
			_.find(this.list(), function(h) {
				result = h.fn.apply(h, args);
				if (result !== skipValue)
					return true;
			});

			return result;
		}
	};

	return {
		/**
		 * Factory method that produces <code>HandlerList</code> instance
		 * @returns {HandlerList}
		 * @memberOf handlerList
		 */
		create: function() {
			return new HandlerList();
		}
	};
});/**
 * Helper class for convenient token iteration
 */
emmet.define('tokenIterator', function(require, _) {
	/**
	 * @type TokenIterator
	 * @param {Array} tokens
	 * @type TokenIterator
	 * @constructor
	 */
	function TokenIterator(tokens) {
		/** @type Array */
		this.tokens = tokens;
		this._position = 0;
		this.reset();
	}

	TokenIterator.prototype = {
		next: function() {
			if (this.hasNext()) {
				var token = this.tokens[++this._i];
				this._position = token.start;
				return token;
			}

			return null;
		},

		current: function() {
			return this.tokens[this._i];
		},

		position: function() {
			return this._position;
		},

		hasNext: function() {
			return this._i < this._il - 1;
		},

		reset: function() {
			this._i = -1;
			this._il = this.tokens.length;
		},

		item: function() {
			return this.tokens[this._i];
		},

		itemNext: function() {
			return this.tokens[this._i + 1];
		},

		itemPrev: function() {
			return this.tokens[this._i - 1];
		},

		nextUntil: function(type, callback) {
			var token;
			var test = _.isString(type)
				? function(t){return t.type == type;}
				: type;

			while (token = this.next()) {
				if (callback)
					callback.call(this, token);
				if (test.call(this, token))
					break;
			}
		}
	};

	return {
		create: function(tokens) {
			return new TokenIterator(tokens);
		}
	};
});/**
 * A trimmed version of CodeMirror's StringStream module for string parsing
 */
emmet.define('stringStream', function(require, _) {
	/**
	 * @type StringStream
	 * @constructor
	 * @param {String} string
	 */
	function StringStream(string) {
		this.pos = this.start = 0;
		this.string = string;
	}

	StringStream.prototype = {
		/**
		 * Returns true only if the stream is at the end of the line.
		 * @returns {Boolean}
		 */
		eol: function() {
			return this.pos >= this.string.length;
		},

		/**
		 * Returns true only if the stream is at the start of the line
		 * @returns {Boolean}
		 */
		sol: function() {
			return this.pos == 0;
		},

		/**
		 * Returns the next character in the stream without advancing it.
		 * Will return <code>undefined</code> at the end of the line.
		 * @returns {String}
		 */
		peek: function() {
			return this.string.charAt(this.pos);
		},

		/**
		 * Returns the next character in the stream and advances it.
		 * Also returns <code>undefined</code> when no more characters are available.
		 * @returns {String}
		 */
		next: function() {
			if (this.pos < this.string.length)
				return this.string.charAt(this.pos++);
		},

		/**
		 * match can be a character, a regular expression, or a function that
		 * takes a character and returns a boolean. If the next character in the
		 * stream 'matches' the given argument, it is consumed and returned.
		 * Otherwise, undefined is returned.
		 * @param {Object} match
		 * @returns {String}
		 */
		eat: function(match) {
			var ch = this.string.charAt(this.pos), ok;
			if (typeof match == "string")
				ok = ch == match;
			else
				ok = ch && (match.test ? match.test(ch) : match(ch));

			if (ok) {
				++this.pos;
				return ch;
			}
		},

		/**
		 * Repeatedly calls <code>eat</code> with the given argument, until it
		 * fails. Returns <code>true</code> if any characters were eaten.
		 * @param {Object} match
		 * @returns {Boolean}
		 */
		eatWhile: function(match) {
			var start = this.pos;
			while (this.eat(match)) {}
			return this.pos > start;
		},

		/**
		 * Shortcut for <code>eatWhile</code> when matching white-space.
		 * @returns {Boolean}
		 */
		eatSpace: function() {
			var start = this.pos;
			while (/[\s\u00a0]/.test(this.string.charAt(this.pos)))
				++this.pos;
			return this.pos > start;
		},

		/**
		 * Moves the position to the end of the line.
		 */
		skipToEnd: function() {
			this.pos = this.string.length;
		},

		/**
		 * Skips to the next occurrence of the given character, if found on the
		 * current line (doesn't advance the stream if the character does not
		 * occur on the line). Returns true if the character was found.
		 * @param {String} ch
		 * @returns {Boolean}
		 */
		skipTo: function(ch) {
			var found = this.string.indexOf(ch, this.pos);
			if (found > -1) {
				this.pos = found;
				return true;
			}
		},

		/**
		 * Skips to <code>close</code> character which is pair to <code>open</code>
		 * character, considering possible pair nesting. This function is used
		 * to consume pair of characters, like opening and closing braces
		 * @param {String} open
		 * @param {String} close
		 * @returns {Boolean} Returns <code>true</code> if pair was successfully
		 * consumed
		 */
		skipToPair: function(open, close) {
			var braceCount = 0, ch;
			var pos = this.pos, len = this.string.length;
			while (pos < len) {
				ch = this.string.charAt(pos++);
				if (ch == open) {
					braceCount++;
				} else if (ch == close) {
					braceCount--;
					if (braceCount < 1) {
						this.pos = pos;
						return true;
					}
				}
			}

			return false;
		},

		/**
		 * Backs up the stream n characters. Backing it up further than the
		 * start of the current token will cause things to break, so be careful.
		 * @param {Number} n
		 */
		backUp : function(n) {
			this.pos -= n;
		},

		/**
		 * Act like a multi-character <code>eat</code>—if <code>consume</code> is true or
		 * not given—or a look-ahead that doesn't update the stream position—if
		 * it is false. <code>pattern</code> can be either a string or a
		 * regular expression starting with ^. When it is a string,
		 * <code>caseInsensitive</code> can be set to true to make the match
		 * case-insensitive. When successfully matching a regular expression,
		 * the returned value will be the array returned by <code>match</code>,
		 * in case you need to extract matched groups.
		 *
		 * @param {RegExp} pattern
		 * @param {Boolean} consume
		 * @param {Boolean} caseInsensitive
		 * @returns
		 */
		match: function(pattern, consume, caseInsensitive) {
			if (typeof pattern == "string") {
				var cased = caseInsensitive
					? function(str) {return str.toLowerCase();}
					: function(str) {return str;};

				if (cased(this.string).indexOf(cased(pattern), this.pos) == this.pos) {
					if (consume !== false)
						this.pos += pattern.length;
					return true;
				}
			} else {
				var match = this.string.slice(this.pos).match(pattern);
				if (match && consume !== false)
					this.pos += match[0].length;
				return match;
			}
		},

		/**
		 * Get the string between the start of the current token and the
		 * current stream position.
		 * @returns {String}
		 */
		current: function() {
			return this.string.slice(this.start, this.pos);
		}
	};

	return {
		create: function(string) {
			return new StringStream(string);
		}
	};
});/**
 * Parsed resources (snippets, abbreviations, variables, etc.) for Emmet.
 * Contains convenient method to get access for snippets with respect of
 * inheritance. Also provides ability to store data in different vocabularies
 * ('system' and 'user') for fast and safe resource update
 * @author Sergey Chikuyonok (serge.che@gmail.com)
 * @link http://chikuyonok.ru
 *
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('resources', function(require, _) {
	var VOC_SYSTEM = 'system';
	var VOC_USER = 'user';

	var cache = {};

	/** Regular expression for XML tag matching */
	var reTag = /^<(\w+\:?[\w\-]*)((?:\s+[\w\:\-]+\s*=\s*(['"]).*?\3)*)\s*(\/?)>/;

	var systemSettings = {};
	var userSettings = {};

	/** @type HandlerList List of registered abbreviation resolvers */
	var resolvers = require('handlerList').create();

	/**
	 * Normalizes caret plceholder in passed text: replaces | character with
	 * default caret placeholder
	 * @param {String} text
	 * @returns {String}
	 */
	function normalizeCaretPlaceholder(text) {
		var utils = require('utils');
		return utils.replaceUnescapedSymbol(text, '|', utils.getCaretPlaceholder());
	}

	function parseItem(name, value, type) {
		value = normalizeCaretPlaceholder(value);

		if (type == 'snippets') {
			return require('elements').create('snippet', value);
		}

		if (type == 'abbreviations') {
			return parseAbbreviation(name, value);
		}
	}

	/**
	 * Parses single abbreviation
	 * @param {String} key Abbreviation name
	 * @param {String} value Abbreviation value
	 * @return {Object}
	 */
	function parseAbbreviation(key, value) {
		key = require('utils').trim(key);
		var elements = require('elements');
		var m;
		if (m = reTag.exec(value)) {
			return elements.create('element', m[1], m[2], m[4] == '/');
		} else {
			// assume it's reference to another abbreviation
			return elements.create('reference', value);
		}
	}

	/**
	 * Normalizes snippet key name for better fuzzy search
	 * @param {String} str
	 * @returns {String}
	 */
	function normalizeName(str) {
		return str.replace(/:$/, '').replace(/:/g, '-');
	}

	return {
		/**
		 * Sets new unparsed data for specified settings vocabulary
		 * @param {Object} data
		 * @param {String} type Vocabulary type ('system' or 'user')
		 * @memberOf resources
		 */
		setVocabulary: function(data, type) {
			cache = {};
			if (type == VOC_SYSTEM)
				systemSettings = data;
			else
				userSettings = data;
		},

		/**
		 * Returns resource vocabulary by its name
		 * @param {String} name Vocabulary name ('system' or 'user')
		 * @return {Object}
		 */
		getVocabulary: function(name) {
			return name == VOC_SYSTEM ? systemSettings : userSettings;
		},

		/**
		 * Returns resource (abbreviation, snippet, etc.) matched for passed
		 * abbreviation
		 * @param {AbbreviationNode} node
		 * @param {String} syntax
		 * @returns {Object}
		 */
		getMatchedResource: function(node, syntax) {
			return resolvers.exec(null, _.toArray(arguments))
				|| this.findSnippet(syntax, node.name());
		},

		/**
		 * Returns variable value
		 * @return {String}
		 */
		getVariable: function(name) {
			return (this.getSection('variables') || {})[name];
		},

		/**
		 * Store runtime variable in user storage
		 * @param {String} name Variable name
		 * @param {String} value Variable value
		 */
		setVariable: function(name, value){
			var voc = this.getVocabulary('user') || {};
			if (!('variables' in voc))
				voc.variables = {};

			voc.variables[name] = value;
			this.setVocabulary(voc, 'user');
		},

		/**
		 * Check if there are resources for specified syntax
		 * @param {String} syntax
		 * @return {Boolean}
		 */
		hasSyntax: function(syntax) {
			return syntax in this.getVocabulary(VOC_USER)
				|| syntax in this.getVocabulary(VOC_SYSTEM);
		},

		/**
		 * Registers new abbreviation resolver.
		 * @param {Function} fn Abbreviation resolver which will receive
		 * abbreviation as first argument and should return parsed abbreviation
		 * object if abbreviation has handled successfully, <code>null</code>
		 * otherwise
		 * @param {Object} options Options list as described in
		 * {@link HandlerList#add()} method
		 */
		addResolver: function(fn, options) {
			resolvers.add(fn, options);
		},

		removeResolver: function(fn) {
			resolvers.remove(fn);
		},

		/**
		 * Returns actual section data, merged from both
		 * system and user data
		 * @param {String} name Section name (syntax)
		 * @param {String} ...args Subsections
		 * @returns
		 */
		getSection: function(name) {
			if (!name)
				return null;

			if (!(name in cache)) {
				cache[name] = require('utils').deepMerge({}, systemSettings[name], userSettings[name]);
			}

			var data = cache[name], subsections = _.rest(arguments), key;
			while (data && (key = subsections.shift())) {
				if (key in data) {
					data = data[key];
				} else {
					return null;
				}
			}

			return data;
		},

		/**
		 * Recursively searches for a item inside top level sections (syntaxes)
		 * with respect of `extends` attribute
		 * @param {String} topSection Top section name (syntax)
		 * @param {String} subsection Inner section name
		 * @returns {Object}
		 */
		findItem: function(topSection, subsection) {
			var data = this.getSection(topSection);
			while (data) {
				if (subsection in data)
					return data[subsection];

				data = this.getSection(data['extends']);
			}
		},

		/**
		 * Recursively searches for a snippet definition inside syntax section.
		 * Definition is searched inside `snippets` and `abbreviations`
		 * subsections
		 * @param {String} syntax Top-level section name (syntax)
		 * @param {String} name Snippet name
		 * @returns {Object}
		 */
		findSnippet: function(syntax, name, memo) {
			if (!syntax || !name)
				return null;

			memo = memo || [];

			var names = [name];
			// create automatic aliases to properties with colons,
			// e.g. pos-a == pos:a
			if (~name.indexOf('-'))
				names.push(name.replace(/\-/g, ':'));

			var data = this.getSection(syntax), matchedItem = null;
			_.find(['snippets', 'abbreviations'], function(sectionName) {
				var data = this.getSection(syntax, sectionName);
				if (data) {
					return _.find(names, function(n) {
						if (data[n])
							return matchedItem = parseItem(n, data[n], sectionName);
					});
				}
			}, this);

			memo.push(syntax);
			if (!matchedItem && data['extends'] && !_.include(memo, data['extends'])) {
				// try to find item in parent syntax section
				return this.findSnippet(data['extends'], name, memo);
			}

			return matchedItem;
		},

		/**
		 * Performs fuzzy search of snippet definition
		 * @param {String} syntax Top-level section name (syntax)
		 * @param {String} name Snippet name
		 * @returns
		 */
		fuzzyFindSnippet: function(syntax, name, minScore) {
			minScore = minScore || 0.3;

			var payload = this.getAllSnippets(syntax);
			var sc = require('string-score');

			name = normalizeName(name);
			var scores = _.map(payload, function(value, key) {
				return {
					key: key,
					score: sc.score(value.nk, name, 0.1)
				};
			});

			var result = _.last(_.sortBy(scores, 'score'));
			if (result && result.score >= minScore) {
				var k = result.key;
				return payload[k].parsedValue;
//				return parseItem(k, payload[k].value, payload[k].type);
			}
		},

		/**
		 * Returns plain dictionary of all available abbreviations and snippets
		 * for specified syntax with respect of inheritance
		 * @param {String} syntax
		 * @returns {Object}
		 */
		getAllSnippets: function(syntax) {
			var cacheKey = 'all-' + syntax;
			if (!cache[cacheKey]) {
				var stack = [], sectionKey = syntax;
				var memo = [];

				do {
					var section = this.getSection(sectionKey);
					if (!section)
						break;

					_.each(['snippets', 'abbreviations'], function(sectionName) {
						var stackItem = {};
						_.each(section[sectionName] || null, function(v, k) {
							stackItem[k] = {
								nk: normalizeName(k),
								value: v,
								parsedValue: parseItem(k, v, sectionName),
								type: sectionName
							};
						});

						stack.push(stackItem);
					});

					memo.push(sectionKey);
					sectionKey = section['extends'];
				} while (sectionKey && !_.include(memo, sectionKey));


				cache[cacheKey] = _.extend.apply(_, stack.reverse());
			}

			return cache[cacheKey];
		}
	};
});/**
 * Module describes and performs Emmet actions. The actions themselves are
 * defined in <i>actions</i> folder
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('actions', function(require, _, zc) {
	var actions = {};

	/**
	 * “Humanizes” action name, makes it more readable for people
	 * @param {String} name Action name (like 'expand_abbreviation')
	 * @return Humanized name (like 'Expand Abbreviation')
	 */
	function humanizeActionName(name) {
		return require('utils').trim(name.charAt(0).toUpperCase()
			+ name.substring(1).replace(/_[a-z]/g, function(str) {
				return ' ' + str.charAt(1).toUpperCase();
			}));
	}

	return {
		/**
		 * Registers new action
		 * @param {String} name Action name
		 * @param {Function} fn Action function
		 * @param {Object} options Custom action options:<br>
		 * <b>label</b> : (<code>String</code>) – Human-readable action name.
		 * May contain '/' symbols as submenu separators<br>
		 * <b>hidden</b> : (<code>Boolean</code>) – Indicates whether action
		 * should be displayed in menu (<code>getMenu()</code> method)
		 *
		 * @memberOf actions
		 */
		add: function(name, fn, options) {
			name = name.toLowerCase();
			options = options || {};
			if (!options.label) {
				options.label = humanizeActionName(name);
			}

			actions[name] = {
				name: name,
				fn: fn,
				options: options
			};
		},

		/**
		 * Returns action object
		 * @param {String} name Action name
		 * @returns {Object}
		 */
		get: function(name) {
			return actions[name.toLowerCase()];
		},

		/**
		 * Runs Emmet action. For list of available actions and their
		 * arguments see <i>actions</i> folder.
		 * @param {String} name Action name
		 * @param {Array} args Additional arguments. It may be array of arguments
		 * or inline arguments. The first argument should be <code>IEmmetEditor</code> instance
		 * @returns {Boolean} Status of performed operation, <code>true</code>
		 * means action was performed successfully.
		 * @example
		 * emmet.require('actions').run('expand_abbreviation', editor);
		 * emmet.require('actions').run('wrap_with_abbreviation', [editor, 'div']);
		 */
		run: function(name, args) {
			if (!_.isArray(args)) {
				args = _.rest(arguments);
			}

			var action = this.get(name);
			if (action) {
				return action.fn.apply(emmet, args);
			} else {
				emmet.log('Action "%s" is not defined', name);
				return false;
			}
		},

		/**
		 * Returns all registered actions as object
		 * @returns {Object}
		 */
		getAll: function() {
			return actions;
		},

		/**
		 * Returns all registered actions as array
		 * @returns {Array}
		 */
		getList: function() {
			return _.values(this.getAll());
		},

		/**
		 * Returns actions list as structured menu. If action has <i>label</i>,
		 * it will be splitted by '/' symbol into submenus (for example:
		 * CSS/Reflect Value) and grouped with other items
		 * @param {Array} skipActions List of action identifiers that should be
		 * skipped from menu
		 * @returns {Array}
		 */
		getMenu: function(skipActions) {
			var result = [];
			skipActions = skipActions || [];
			_.each(this.getList(), function(action) {
				if (action.options.hidden || _.include(skipActions, action.name))
					return;

				var actionName = humanizeActionName(action.name);
				var ctx = result;
				if (action.options.label) {
					var parts = action.options.label.split('/');
					actionName = parts.pop();

					// create submenus, if needed
					var menuName, submenu;
					while (menuName = parts.shift()) {
						submenu = _.find(ctx, function(item) {
							return item.type == 'submenu' && item.name == menuName;
						});

						if (!submenu) {
							submenu = {
								name: menuName,
								type: 'submenu',
								items: []
							};
							ctx.push(submenu);
						}

						ctx = submenu.items;
					}
				}

				ctx.push({
					type: 'action',
					name: action.name,
					label: actionName
				});
			});

			return result;
		},

		/**
		 * Returns action name associated with menu item title
		 * @param {String} title
		 * @returns {String}
		 */
		getActionNameForMenuTitle: function(title, menu) {
			var item = null;
			_.find(menu || this.getMenu(), function(val) {
				if (val.type == 'action') {
					if (val.label == title || val.name == title) {
						return item = val.name;
					}
				} else {
					return item = this.getActionNameForMenuTitle(title, val.items);
				}
			}, this);

			return item || null;
		}
	};
});/**
 * Output profile module.
 * Profile defines how XHTML output data should look like
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('profile', function(require, _) {
	var profiles = {};

	var defaultProfile = {
		tag_case: 'asis',
		attr_case: 'asis',
		attr_quotes: 'double',

		// each tag on new line
		tag_nl: 'decide',

		// with tag_nl === true, defines if leaf node (e.g. node with no children)
		// should have formatted line breaks
		tag_nl_leaf: false,

		place_cursor: true,

		// indent tags
		indent: true,

		// how many inline elements should be to force line break
		// (set to 0 to disable)
		inline_break: 3,

		// use self-closing style for writing empty elements, e.g. <br /> or <br>
		self_closing_tag: 'xhtml',

		// Profile-level output filters, re-defines syntax filters
		filters: '',

		// Additional filters applied to abbreviation.
		// Unlike "filters", this preference doesn't override default filters
		// but add the instead every time given profile is chosen
		extraFilters: ''
	};

	/**
	 * @constructor
	 * @type OutputProfile
	 * @param {Object} options
	 */
	function OutputProfile(options) {
		_.extend(this, defaultProfile, options);
	}

	OutputProfile.prototype = {
		/**
		 * Transforms tag name case depending on current profile settings
		 * @param {String} name String to transform
		 * @returns {String}
		 */
		tagName: function(name) {
			return stringCase(name, this.tag_case);
		},

		/**
		 * Transforms attribute name case depending on current profile settings
		 * @param {String} name String to transform
		 * @returns {String}
		 */
		attributeName: function(name) {
			return stringCase(name, this.attr_case);
		},

		/**
		 * Returns quote character for current profile
		 * @returns {String}
		 */
		attributeQuote: function() {
			return this.attr_quotes == 'single' ? "'" : '"';
		},

		/**
		 * Returns self-closing tag symbol for current profile
		 * @param {String} param
		 * @returns {String}
		 */
		selfClosing: function(param) {
			if (this.self_closing_tag == 'xhtml')
				return ' /';

			if (this.self_closing_tag === true)
				return '/';

			return '';
		},

		/**
		 * Returns cursor token based on current profile settings
		 * @returns {String}
		 */
		cursor: function() {
			return this.place_cursor ? require('utils').getCaretPlaceholder() : '';
		}
	};

	/**
	 * Helper function that converts string case depending on
	 * <code>caseValue</code>
	 * @param {String} str String to transform
	 * @param {String} caseValue Case value: can be <i>lower</i>,
	 * <i>upper</i> and <i>leave</i>
	 * @returns {String}
	 */
	function stringCase(str, caseValue) {
		switch (String(caseValue || '').toLowerCase()) {
			case 'lower':
				return str.toLowerCase();
			case 'upper':
				return str.toUpperCase();
		}

		return str;
	}

	/**
	 * Creates new output profile
	 * @param {String} name Profile name
	 * @param {Object} options Profile options
	 */
	function createProfile(name, options) {
		return profiles[name.toLowerCase()] = new OutputProfile(options);
	}

	function createDefaultProfiles() {
		createProfile('xhtml');
		createProfile('html', {self_closing_tag: false});
		createProfile('xml', {self_closing_tag: true, tag_nl: true});
		createProfile('plain', {tag_nl: false, indent: false, place_cursor: false});
		createProfile('line', {tag_nl: false, indent: false, extraFilters: 's'});
	}

	createDefaultProfiles();

	return  {
		/**
		 * Creates new output profile and adds it into internal dictionary
		 * @param {String} name Profile name
		 * @param {Object} options Profile options
		 * @memberOf emmet.profile
		 * @returns {Object} New profile
		 */
		create: function(name, options) {
			if (arguments.length == 2)
				return createProfile(name, options);
			else
				// create profile object only
				return new OutputProfile(_.defaults(name || {}, defaultProfile));
		},

		/**
		 * Returns profile by its name. If profile wasn't found, returns
		 * 'plain' profile
		 * @param {String} name Profile name. Might be profile itself
		 * @param {String} syntax. Optional. Current editor syntax. If defined,
		 * profile is searched in resources first, then in predefined profiles
		 * @returns {Object}
		 */
		get: function(name, syntax) {
			if (!name && syntax) {
				// search in user resources first
				var profile = require('resources').findItem(syntax, 'profile');
				if (profile) {
					name = profile;
				}
			}

			if (!name) {
				return profiles.plain;
			}

			if (name instanceof OutputProfile) {
				return name;
			}

			if (_.isString(name) && name.toLowerCase() in profiles) {
				return profiles[name.toLowerCase()];
			}

			return this.create(name);
		},

		/**
		 * Deletes profile with specified name
		 * @param {String} name Profile name
		 */
		remove: function(name) {
			name = (name || '').toLowerCase();
			if (name in profiles)
				delete profiles[name];
		},

		/**
		 * Resets all user-defined profiles
		 */
		reset: function() {
			profiles = {};
			createDefaultProfiles();
		},

		/**
		 * Helper function that converts string case depending on
		 * <code>caseValue</code>
		 * @param {String} str String to transform
		 * @param {String} caseValue Case value: can be <i>lower</i>,
		 * <i>upper</i> and <i>leave</i>
		 * @returns {String}
		 */
		stringCase: stringCase
	};
});/**
 * Utility module used to prepare text for pasting into back-end editor
 * @param {Function} require
 * @param {Underscore} _
 * @author Sergey Chikuyonok (serge.che@gmail.com) <http://chikuyonok.ru>
 */
emmet.define('editorUtils', function(require, _) {
	return  {
		/**
		 * Check if cursor is placed inside XHTML tag
		 * @param {String} html Contents of the document
		 * @param {Number} caretPos Current caret position inside tag
		 * @return {Boolean}
		 */
		isInsideTag: function(html, caretPos) {
			var reTag = /^<\/?\w[\w\:\-]*.*?>/;

			// search left to find opening brace
			var pos = caretPos;
			while (pos > -1) {
				if (html.charAt(pos) == '<')
					break;
				pos--;
			}

			if (pos != -1) {
				var m = reTag.exec(html.substring(pos));
				if (m && caretPos > pos && caretPos < pos + m[0].length)
					return true;
			}

			return false;
		},

		/**
		 * Sanitizes incoming editor data and provides default values for
		 * output-specific info
		 * @param {IEmmetEditor} editor
		 * @param {String} syntax
		 * @param {String} profile
		 */
		outputInfo: function(editor, syntax, profile) {
			// most of this code makes sense for Java/Rhino environment
			// because string that comes from Java are not actually JS string
			// but Java String object so the have to be explicitly converted
			// to native string
			profile = profile || editor.getProfileName();
			return  {
				/** @memberOf outputInfo */
				syntax: String(syntax || editor.getSyntax()),
				profile: profile || null,
				content: String(editor.getContent())
			};
		},

		/**
		 * Unindent content, thus preparing text for tag wrapping
		 * @param {IEmmetEditor} editor Editor instance
		 * @param {String} text
		 * @return {String}
		 */
		unindent: function(editor, text) {
			return require('utils').unindentString(text, this.getCurrentLinePadding(editor));
		},

		/**
		 * Returns padding of current editor's line
		 * @param {IEmmetEditor} Editor instance
		 * @return {String}
		 */
		getCurrentLinePadding: function(editor) {
			return require('utils').getLinePadding(editor.getCurrentLine());
		}
	};
});
/**
 * Utility methods for Emmet actions
 * @param {Function} require
 * @param {Underscore} _
 * @author Sergey Chikuyonok (serge.che@gmail.com) <http://chikuyonok.ru>
 */
emmet.define('actionUtils', function(require, _) {
	return {
		mimeTypes: {
			'gif' : 'image/gif',
			'png' : 'image/png',
			'jpg' : 'image/jpeg',
			'jpeg': 'image/jpeg',
			'svg' : 'image/svg+xml',
			'html': 'text/html',
			'htm' : 'text/html'
		},

		/**
		 * Extracts abbreviations from text stream, starting from the end
		 * @param {String} str
		 * @return {String} Abbreviation or empty string
		 * @memberOf emmet.actionUtils
		 */
		extractAbbreviation: function(str) {
			var curOffset = str.length;
			var startIndex = -1;
			var groupCount = 0;
			var braceCount = 0;
			var textCount = 0;

			var utils = require('utils');
			var parser = require('abbreviationParser');

			while (true) {
				curOffset--;
				if (curOffset < 0) {
					// moved to the beginning of the line
					startIndex = 0;
					break;
				}

				var ch = str.charAt(curOffset);

				if (ch == ']') {
					braceCount++;
				} else if (ch == '[') {
					if (!braceCount) { // unexpected brace
						startIndex = curOffset + 1;
						break;
					}
					braceCount--;
				} else if (ch == '}') {
					textCount++;
				} else if (ch == '{') {
					if (!textCount) { // unexpected brace
						startIndex = curOffset + 1;
						break;
					}
					textCount--;
				} else if (ch == ')') {
					groupCount++;
				} else if (ch == '(') {
					if (!groupCount) { // unexpected brace
						startIndex = curOffset + 1;
						break;
					}
					groupCount--;
				} else {
					if (braceCount || textCount)
						// respect all characters inside attribute sets or text nodes
						continue;
					else if (!parser.isAllowedChar(ch) || (ch == '>' && utils.endsWithTag(str.substring(0, curOffset + 1)))) {
						// found stop symbol
						startIndex = curOffset + 1;
						break;
					}
				}
			}

			if (startIndex != -1 && !textCount && !braceCount && !groupCount)
				// found something, remove some invalid symbols from the
				// beginning and return abbreviation
				return str.substring(startIndex).replace(/^[\*\+\>\^]+/, '');
			else
				return '';
		},

		/**
		 * Gets image size from image byte stream.
		 * @author http://romeda.org/rePublish/
		 * @param {String} stream Image byte stream (use <code>IEmmetFile.read()</code>)
		 * @return {Object} Object with <code>width</code> and <code>height</code> properties
		 */
		getImageSize: function(stream) {
			var pngMagicNum = "\211PNG\r\n\032\n",
				jpgMagicNum = "\377\330",
				gifMagicNum = "GIF8",
				nextByte = function() {
					return stream.charCodeAt(pos++);
				};

			if (stream.substr(0, 8) === pngMagicNum) {
				// PNG. Easy peasy.
				var pos = stream.indexOf('IHDR') + 4;

				return { width:  (nextByte() << 24) | (nextByte() << 16) |
								 (nextByte() <<  8) | nextByte(),
						 height: (nextByte() << 24) | (nextByte() << 16) |
								 (nextByte() <<  8) | nextByte() };

			} else if (stream.substr(0, 4) === gifMagicNum) {
				pos = 6;

				return {
					width:  nextByte() | (nextByte() << 8),
					height: nextByte() | (nextByte() << 8)
				};

			} else if (stream.substr(0, 2) === jpgMagicNum) {
				pos = 2;

				var l = stream.length;
				while (pos < l) {
					if (nextByte() != 0xFF) return;

					var marker = nextByte();
					if (marker == 0xDA) break;

					var size = (nextByte() << 8) | nextByte();

					if (marker >= 0xC0 && marker <= 0xCF && !(marker & 0x4) && !(marker & 0x8)) {
						pos += 1;
						return { height:  (nextByte() << 8) | nextByte(),
								 width: (nextByte() << 8) | nextByte() };

					} else {
						pos += size - 2;
					}
				}
			}
		},

		/**
		 * Captures context XHTML element from editor under current caret position.
		 * This node can be used as a helper for abbreviation extraction
		 * @param {IEmmetEditor} editor
		 * @returns {Object}
		 */
		captureContext: function(editor) {
			var allowedSyntaxes = {'html': 1, 'xml': 1, 'xsl': 1};
			var syntax = String(editor.getSyntax());
			if (syntax in allowedSyntaxes) {
				var content = String(editor.getContent());
				var tag = require('htmlMatcher').find(content, editor.getCaretPos());

				if (tag && tag.type == 'tag') {
					var startTag = tag.open;
					var contextNode = {
						name: startTag.name,
						attributes: []
					};

					// parse attributes
					var tagTree = require('xmlEditTree').parse(startTag.range.substring(content));
					if (tagTree) {
						contextNode.attributes = _.map(tagTree.getAll(), function(item) {
							return {
								name: item.name(),
								value: item.value()
							};
						});
					}

					return contextNode;
				}
			}

			return null;
		},

		/**
		 * Find expression bounds in current editor at caret position.
		 * On each character a <code>fn</code> function will be called and must
		 * return <code>true</code> if current character meets requirements,
		 * <code>false</code> otherwise
		 * @param {IEmmetEditor} editor
		 * @param {Function} fn Function to test each character of expression
		 * @return {Range}
		 */
		findExpressionBounds: function(editor, fn) {
			var content = String(editor.getContent());
			var il = content.length;
			var exprStart = editor.getCaretPos() - 1;
			var exprEnd = exprStart + 1;

			// start by searching left
			while (exprStart >= 0 && fn(content.charAt(exprStart), exprStart, content)) exprStart--;

			// then search right
			while (exprEnd < il && fn(content.charAt(exprEnd), exprEnd, content)) exprEnd++;

			if (exprEnd > exprStart) {
				return require('range').create([++exprStart, exprEnd]);
			}
		},

		/**
		 * @param {IEmmetEditor} editor
		 * @param {Object} data
		 * @returns {Boolean}
		 */
		compoundUpdate: function(editor, data) {
			if (data) {
				var sel = editor.getSelectionRange();
				editor.replaceContent(data.data, data.start, data.end, true);
				editor.createSelection(data.caret, data.caret + sel.end - sel.start);
				return true;
			}

			return false;
		},

		/**
		 * Common syntax detection method for editors that doesn’t provide any
		 * info about current syntax scope.
		 * @param {IEmmetEditor} editor Current editor
		 * @param {String} hint Any syntax hint that editor can provide
		 * for syntax detection. Default is 'html'
		 * @returns {String}
		 */
		detectSyntax: function(editor, hint) {
			var syntax = hint || 'html';

			if (!require('resources').hasSyntax(syntax)) {
				syntax = 'html';
			}

			if (syntax == 'html' && (this.isStyle(editor) || this.isInlineCSS(editor))) {
				syntax = 'css';
			}

			return syntax;
		},

		/**
		 * Common method for detecting output profile
		 * @param {IEmmetEditor} editor
		 * @returns {String}
		 */
		detectProfile: function(editor) {
			var syntax = editor.getSyntax();

			// get profile from syntax definition
			var profile = require('resources').findItem(syntax, 'profile');
			if (profile) {
				return profile;
			}

			switch(syntax) {
				case 'xml':
				case 'xsl':
					return 'xml';
				case 'css':
					if (this.isInlineCSS(editor)) {
						return 'line';
					}
					break;
				case 'html':
					var profile = require('resources').getVariable('profile');
					if (!profile) { // no forced profile, guess from content
						// html or xhtml?
						profile = this.isXHTML(editor) ? 'xhtml': 'html';
					}

					return profile;
			}

			return 'xhtml';
		},

		/**
		 * Tries to detect if current document is XHTML one.
		 * @param {IEmmetEditor} editor
		 * @returns {Boolean}
		 */
		isXHTML: function(editor) {
			return editor.getContent().search(/<!DOCTYPE[^>]+XHTML/i) != -1;
		},

		/**
		 * Check if current caret position is inside &lt;style&gt; tag
		 * @param {IEmmetEditor} editor
		 * @returns
		 */
		isStyle: function(editor) {
			var content = String(editor.getContent());
			var caretPos = editor.getCaretPos();
			var tag = require('htmlMatcher').tag(content, caretPos);
			return tag && tag.open.name.toLowerCase() == 'style'
				&& tag.innerRange.cmp(caretPos, 'lte', 'gte');
		},

		/**
		 * Check if current caret position is inside "style" attribute of HTML
		 * element
		 * @param {IEmmetEditor} editor
		 * @returns {Boolean}
		 */
		isInlineCSS: function(editor) {
			var content = String(editor.getContent());
			var caretPos = editor.getCaretPos();
			var tree = require('xmlEditTree').parseFromPosition(content, caretPos, true);
            if (tree) {
                var attr = tree.itemFromPosition(caretPos, true);
                return attr && attr.name().toLowerCase() == 'style'
                	&& attr.valueRange(true).cmp(caretPos, 'lte', 'gte');
            }

            return false;
		}
	};
});/**
 * Utility functions to work with <code>AbbreviationNode</code> as HTML element
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('abbreviationUtils', function(require, _) {
	return {
		/**
		 * Check if passed abbreviation node has matched snippet resource
		 * @param {AbbreviationNode} node
		 * @returns {Boolean}
		 * @memberOf abbreviationUtils
		 */
		isSnippet: function(node) {
			return require('elements').is(node.matchedResource(), 'snippet');
		},

		/**
		 * Test if passed node is unary (no closing tag)
		 * @param {AbbreviationNode} node
		 * @return {Boolean}
		 */
		isUnary: function(node) {
			if (node.children.length || node._text || this.isSnippet(node)) {
				return false;
			}

			var r = node.matchedResource();
			return r && r.is_empty;
		},

		/**
		 * Test if passed node is inline-level (like &lt;strong&gt;, &lt;img&gt;)
		 * @param {AbbreviationNode} node
		 * @return {Boolean}
		 */
		isInline: function(node) {
			return node.isTextNode()
				|| !node.name()
				|| require('tagName').isInlineLevel(node.name());
		},

		/**
		 * Test if passed node is block-level
		 * @param {AbbreviationNode} node
		 * @return {Boolean}
		 */
		isBlock: function(node) {
			return this.isSnippet(node) || !this.isInline(node);
		},

		/**
		 * Test if given node is a snippet
		 * @param {AbbreviationNode} node
		 * @return {Boolean}
		 */
		isSnippet: function(node) {
			return require('elements').is(node.matchedResource(), 'snippet');
		},

		/**
		 * This function tests if passed node content contains HTML tags.
		 * This function is mostly used for output formatting
		 * @param {AbbreviationNode} node
		 * @returns {Boolean}
		 */
		hasTagsInContent: function(node) {
			return require('utils').matchesTag(node.content);
		},

		/**
		 * Test if current element contains block-level children
		 * @param {AbbreviationNode} node
		 * @return {Boolean}
		 */
		hasBlockChildren: function(node) {
			return (this.hasTagsInContent(node) && this.isBlock(node))
				|| _.any(node.children, function(child) {
					return this.isBlock(child);
				}, this);
		},

		/**
		 * Utility function that inserts content instead of <code>${child}</code>
		 * variables on <code>text</code>
		 * @param {String} text Text where child content should be inserted
		 * @param {String} childContent Content to insert
		 * @param {Object} options
		 * @returns {String
		 */
		insertChildContent: function(text, childContent, options) {
			options = _.extend({
				keepVariable: true,
				appendIfNoChild: true
			}, options || {});

			var childVariableReplaced = false;
			var utils = require('utils');
			text = utils.replaceVariables(text, function(variable, name, data) {
				var output = variable;
				if (name == 'child') {
					// add correct indentation
					output = utils.padString(childContent, utils.getLinePaddingFromPosition(text, data.start));
					childVariableReplaced = true;
					if (options.keepVariable)
						output += variable;
				}

				return output;
			});

			if (!childVariableReplaced && options.appendIfNoChild) {
				text += childContent;
			}

			return text;
		}
	};
});/**
 * @author Sergey Chikuyonok (serge.che@gmail.com)
 * @link http://chikuyonok.ru
 */
emmet.define('base64', function(require, _) {
	var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';

	return {
		/**
		 * Encodes data using base64 algorithm
		 * @author Tyler Akins (http://rumkin.com)
		 * @param {String} input
		 * @returns {String}
		 * @memberOf emmet.base64
		 */
		encode : function(input) {
			var output = [];
			var chr1, chr2, chr3, enc1, enc2, enc3, enc4, cdp1, cdp2, cdp3;
			var i = 0, il = input.length, b64 = chars;

			while (i < il) {

				cdp1 = input.charCodeAt(i++);
				cdp2 = input.charCodeAt(i++);
				cdp3 = input.charCodeAt(i++);

				chr1 = cdp1 & 0xff;
				chr2 = cdp2 & 0xff;
				chr3 = cdp3 & 0xff;

				enc1 = chr1 >> 2;
				enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
				enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
				enc4 = chr3 & 63;

				if (isNaN(cdp2)) {
					enc3 = enc4 = 64;
				} else if (isNaN(cdp3)) {
					enc4 = 64;
				}

				output.push(b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4));
			}

			return output.join('');
		},

		/**
		 * Decodes string using MIME base64 algorithm
		 *
		 * @author Tyler Akins (http://rumkin.com)
		 * @param {String} data
		 * @return {String}
		 */
		decode : function(data) {
			var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, tmpArr = [];
			var b64 = chars, il = data.length;

			if (!data) {
				return data;
			}

			data += '';

			do { // unpack four hexets into three octets using index points in b64
				h1 = b64.indexOf(data.charAt(i++));
				h2 = b64.indexOf(data.charAt(i++));
				h3 = b64.indexOf(data.charAt(i++));
				h4 = b64.indexOf(data.charAt(i++));

				bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;

				o1 = bits >> 16 & 0xff;
				o2 = bits >> 8 & 0xff;
				o3 = bits & 0xff;

				if (h3 == 64) {
					tmpArr[ac++] = String.fromCharCode(o1);
				} else if (h4 == 64) {
					tmpArr[ac++] = String.fromCharCode(o1, o2);
				} else {
					tmpArr[ac++] = String.fromCharCode(o1, o2, o3);
				}
			} while (i < il);

			return tmpArr.join('');
		}
	};
});/**
 * HTML matcher: takes string and searches for HTML tag pairs for given position
 *
 * Unlike “classic” matchers, it parses content from the specified
 * position, not from the start, so it may work even outside HTML documents
 * (for example, inside strings of programming languages like JavaScript, Python
 * etc.)
 * @constructor
 * @memberOf __htmlMatcherDefine
 */
emmet.define('htmlMatcher', function(require, _) {
	// Regular Expressions for parsing tags and attributes
	var reOpenTag = /^<([\w\:\-]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/;
	var reCloseTag = /^<\/([\w\:\-]+)[^>]*>/;

	function openTag(i, match) {
		return {
			name: match[1],
			selfClose: !!match[3],
			/** @type Range */
			range: require('range').create(i, match[0]),
			type: 'open'
		};
	}

	function closeTag(i, match) {
		return {
			name: match[1],
			/** @type Range */
			range: require('range').create(i, match[0]),
			type: 'close'
		};
	}

	function comment(i, match) {
		return {
			/** @type Range */
			range: require('range').create(i, _.isNumber(match) ? match - i : match[0]),
			type: 'comment'
		};
	}

	/**
	 * Creates new tag matcher session
	 * @param {String} text
	 */
	function createMatcher(text) {
		var memo = {}, m;
		return {
			/**
			 * Test if given position matches opening tag
			 * @param {Number} i
			 * @returns {Object} Matched tag object
			 */
			open: function(i) {
				var m = this.matches(i);
				return m && m.type == 'open' ? m : null;
			},

			/**
			 * Test if given position matches closing tag
			 * @param {Number} i
			 * @returns {Object} Matched tag object
			 */
			close: function(i) {
				var m = this.matches(i);
				return m && m.type == 'close' ? m : null;
			},

			/**
			 * Matches either opening or closing tag for given position
			 * @param i
			 * @returns
			 */
			matches: function(i) {
				var key = 'p' + i;

				if (!(key in memo)) {
					if (text.charAt(i) == '<') {
						var substr = text.slice(i);
						if (m = substr.match(reOpenTag)) {
							memo[key] = openTag(i, m);
						} else if (m = substr.match(reCloseTag)) {
							memo[key] = closeTag(i, m);
						} else {
							// remember that given position contains no valid tag
							memo[key] = false;
						}
					}
				}

				return memo[key];
			},

			/**
			 * Returns original text
			 * @returns {String}
			 */
			text: function() {
				return text;
			}
		};
	}

	function matches(text, pos, pattern) {
		return text.substring(pos, pos + pattern.length) == pattern;
	}

	/**
	 * Search for closing pair of opening tag
	 * @param {Object} open Open tag instance
	 * @param {Object} matcher Matcher instance
	 */
	function findClosingPair(open, matcher) {
		var stack = [], tag = null;
		var text = matcher.text();

		for (var pos = open.range.end, len = text.length; pos < len; pos++) {
			if (matches(text, pos, '<!--')) {
				// skip to end of comment
				for (var j = pos; j < len; j++) {
					if (matches(text, j, '-->')) {
						pos = j + 3;
						break;
					}
				}
			}

			if (tag = matcher.matches(pos)) {
				if (tag.type == 'open' && !tag.selfClose) {
					stack.push(tag.name);
				} else if (tag.type == 'close') {
					if (!stack.length) { // found valid pair?
						return tag.name == open.name ? tag : null;
					}

					// check if current closing tag matches previously opened one
					if (_.last(stack) == tag.name) {
						stack.pop();
					} else {
						var found = false;
						while (stack.length && !found) {
							var last = stack.pop();
							if (last == tag.name) {
								found = true;
							}
						}

						if (!stack.length && !found) {
							return tag.name == open.name ? tag : null;
						}
					}
				}
			}

		}
	}

	return {
		/**
		 * Main function: search for tag pair in <code>text</code> for given
		 * position
		 * @memberOf htmlMatcher
		 * @param {String} text
		 * @param {Number} pos
		 * @returns {Object}
		 */
		find: function(text, pos) {
			var range = require('range');
			var matcher = createMatcher(text);
			var open = null, close = null;

			for (var i = pos; i >= 0; i--) {
				if (open = matcher.open(i)) {
					// found opening tag
					if (open.selfClose) {
						if (open.range.cmp(pos, 'lt', 'gt')) {
							// inside self-closing tag, found match
							break;
						}

						// outside self-closing tag, continue
						continue;
					}

					close = findClosingPair(open, matcher);
					if (close) {
						// found closing tag.
						var r = range.create2(open.range.start, close.range.end);
						if (r.contains(pos)) {
							break;
						}
					} else if (open.range.contains(pos)) {
						// we inside empty HTML tag like <br>
						break;
					}

					open = null;
				} else if (matches(text, i, '-->')) {
					// skip back to comment start
					for (var j = i - 1; j >= 0; j--) {
						if (matches(text, j, '-->')) {
							// found another comment end, do nothing
							break;
						} else if (matches(text, j, '<!--')) {
							i = j;
							break;
						}
					}
				} else if (matches(text, i, '<!--')) {
					// we're inside comment, match it
					var j = i + 4, jl = text.length;
					for (; j < jl; j++) {
						if (matches(text, j, '-->')) {
							j += 3;
							break;
						}
					}

					open = comment(i, j);
					break;
				}
			}

			if (open) {
				var outerRange = null;
				var innerRange = null;

				if (close) {
					outerRange = range.create2(open.range.start, close.range.end);
					innerRange = range.create2(open.range.end, close.range.start);
				} else {
					outerRange = innerRange = range.create2(open.range.start, open.range.end);
				}

				if (open.type == 'comment') {
					// adjust positions of inner range for comment
					var _c = outerRange.substring(text);
					innerRange.start += _c.length - _c.replace(/^<\!--\s*/, '').length;
					innerRange.end -= _c.length - _c.replace(/\s*-->$/, '').length;
				}

				return {
					open: open,
					close: close,
					type: open.type == 'comment' ? 'comment' : 'tag',
					innerRange: innerRange,
					innerContent: function() {
						return this.innerRange.substring(text);
					},
					outerRange: outerRange,
					outerContent: function() {
						return this.outerRange.substring(text);
					},
					range: !innerRange.length() || !innerRange.cmp(pos, 'lte', 'gte') ? outerRange : innerRange,
					content: function() {
						return this.range.substring(text);
					},
					source: text
				};
			}
		},

		/**
		 * The same as <code>find()</code> method, but restricts matched result
		 * to <code>tag</code> type
		 * @param {String} text
		 * @param {Number} pos
		 * @returns {Object}
		 */
		tag: function(text, pos) {
			var result = this.find(text, pos);
			if (result && result.type == 'tag') {
				return result;
			}
		}
	};
});/**
 * Utility module for handling tabstops tokens generated by Emmet's
 * "Expand Abbreviation" action. The main <code>extract</code> method will take
 * raw text (for example: <i>${0} some ${1:text}</i>), find all tabstops
 * occurrences, replace them with tokens suitable for your editor of choice and
 * return object with processed text and list of found tabstops and their ranges.
 * For sake of portability (Objective-C/Java) the tabstops list is a plain
 * sorted array with plain objects.
 *
 * Placeholders with the same are meant to be <i>linked</i> in your editor.
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('tabStops', function(require, _) {
	/**
	 * Global placeholder value, automatically incremented by
	 * <code>variablesResolver()</code> function
	 */
	var startPlaceholderNum = 100;

	var tabstopIndex = 0;

	var defaultOptions = {
		replaceCarets: false,
		escape: function(ch) {
			return '\\' + ch;
		},
		tabstop: function(data) {
			return data.token;
		},
		variable: function(data) {
			return data.token;
		}
	};

	// XXX register output processor that will upgrade tabstops of parsed node
	// in order to prevent tabstop index conflicts
	require('abbreviationParser').addOutputProcessor(function(text, node, type) {
		var maxNum = 0;
		var tabstops = require('tabStops');
		var utils = require('utils');

		var tsOptions = {
			tabstop: function(data) {
				var group = parseInt(data.group);
				if (group == 0)
					return '${0}';

				if (group > maxNum) maxNum = group;
				if (data.placeholder) {
					// respect nested placeholders
					var ix = group + tabstopIndex;
					var placeholder = tabstops.processText(data.placeholder, tsOptions);
					return '${' + ix + ':' + placeholder + '}';
				} else {
					return '${' + (group + tabstopIndex) + '}';
				}
			}
		};

		// upgrade tabstops
		text = tabstops.processText(text, tsOptions);

		// resolve variables
		text = utils.replaceVariables(text, tabstops.variablesResolver(node));

		tabstopIndex += maxNum + 1;
		return text;
	});

	return {
		/**
		 * Main function that looks for a tabstops in provided <code>text</code>
		 * and returns a processed version of <code>text</code> with expanded
		 * placeholders and list of tabstops found.
		 * @param {String} text Text to process
		 * @param {Object} options List of processor options:<br>
		 *
		 * <b>replaceCarets</b> : <code>Boolean</code> — replace all default
		 * caret placeholders (like <i>{%::emmet-caret::%}</i>) with <i>${0:caret}</i><br>
		 *
		 * <b>escape</b> : <code>Function</code> — function that handle escaped
		 * characters (mostly '$'). By default, it returns the character itself
		 * to be displayed as is in output, but sometimes you will use
		 * <code>extract</code> method as intermediate solution for further
		 * processing and want to keep character escaped. Thus, you should override
		 * <code>escape</code> method to return escaped symbol (e.g. '\\$')<br>
		 *
		 * <b>tabstop</b> : <code>Function</code> – a tabstop handler. Receives
		 * a single argument – an object describing token: its position, number
		 * group, placeholder and token itself. Should return a replacement
		 * string that will appear in final output
		 *
		 * <b>variable</b> : <code>Function</code> – variable handler. Receives
		 * a single argument – an object describing token: its position, name
		 * and original token itself. Should return a replacement
		 * string that will appear in final output
		 *
		 * @returns {Object} Object with processed <code>text</code> property
		 * and array of <code>tabstops</code> found
		 * @memberOf tabStops
		 */
		extract: function(text, options) {
			// prepare defaults
			var utils = require('utils');
			var placeholders = {carets: ''};
			var marks = [];

			options = _.extend({}, defaultOptions, options, {
				tabstop: function(data) {
					var token = data.token;
					var ret = '';
					if (data.placeholder == 'cursor') {
						marks.push({
							start: data.start,
							end: data.start + token.length,
							group: 'carets',
							value: ''
						});
					} else {
						// unify placeholder value for single group
						if ('placeholder' in data)
							placeholders[data.group] = data.placeholder;

						if (data.group in placeholders)
							ret = placeholders[data.group];

						marks.push({
							start: data.start,
							end: data.start + token.length,
							group: data.group,
							value: ret
						});
					}

					return token;
				}
			});

			if (options.replaceCarets) {
				text = text.replace(new RegExp( utils.escapeForRegexp( utils.getCaretPlaceholder() ), 'g'), '${0:cursor}');
			}

			// locate tabstops and unify group's placeholders
			text = this.processText(text, options);

			// now, replace all tabstops with placeholders
			var buf = utils.stringBuilder(), lastIx = 0;
			var tabStops = _.map(marks, function(mark) {
				buf.append(text.substring(lastIx, mark.start));

				var pos = buf.length;
				var ph = placeholders[mark.group] || '';

				buf.append(ph);
				lastIx = mark.end;

				return {
					group: mark.group,
					start: pos,
					end:  pos + ph.length
				};
			});

			buf.append(text.substring(lastIx));

			return {
				text: buf.toString(),
				tabstops: _.sortBy(tabStops, 'start')
			};
		},

		/**
		 * Text processing routine. Locates escaped characters and tabstops and
		 * replaces them with values returned by handlers defined in
		 * <code>options</code>
		 * @param {String} text
		 * @param {Object} options See <code>extract</code> method options
		 * description
		 * @returns {String}
		 */
		processText: function(text, options) {
			options = _.extend({}, defaultOptions, options);

			var buf = require('utils').stringBuilder();
			/** @type StringStream */
			var stream = require('stringStream').create(text);
			var ch, m, a;

			while (ch = stream.next()) {
				if (ch == '\\' && !stream.eol()) {
					// handle escaped character
					buf.append(options.escape(stream.next()));
					continue;
				}

				a = ch;

				if (ch == '$') {
					// looks like a tabstop
					stream.start = stream.pos - 1;

					if (m = stream.match(/^[0-9]+/)) {
						// it's $N
						a = options.tabstop({
							start: buf.length,
							group: stream.current().substr(1),
							token: stream.current()
						});
					} else if (m = stream.match(/^\{([a-z_\-][\w\-]*)\}/)) {
						// ${variable}
						a = options.variable({
							start: buf.length,
							name: m[1],
							token: stream.current()
						});
					} else if (m = stream.match(/^\{([0-9]+)(:.+?)?\}/, false)) {
						// ${N:value} or ${N} placeholder
						// parse placeholder, including nested ones
						stream.skipToPair('{', '}');

						var obj = {
							start: buf.length,
							group: m[1],
							token: stream.current()
						};

						var placeholder = obj.token.substring(obj.group.length + 2, obj.token.length - 1);

						if (placeholder) {
							obj.placeholder = placeholder.substr(1);
						}

						a = options.tabstop(obj);
					}
				}

				buf.append(a);
			}

			return buf.toString();
		},

		/**
		 * Upgrades tabstops in output node in order to prevent naming conflicts
		 * @param {AbbreviationNode} node
		 * @param {Number} offset Tab index offset
		 * @returns {Number} Maximum tabstop index in element
		 */
		upgrade: function(node, offset) {
			var maxNum = 0;
			var options = {
				tabstop: function(data) {
					var group = parseInt(data.group);
					if (group > maxNum) maxNum = group;

					if (data.placeholder)
						return '${' + (group + offset) + ':' + data.placeholder + '}';
					else
						return '${' + (group + offset) + '}';
				}
			};

			_.each(['start', 'end', 'content'], function(p) {
				node[p] = this.processText(node[p], options);
			}, this);

			return maxNum;
		},

		/**
		 * Helper function that produces a callback function for
		 * <code>replaceVariables()</code> method from {@link utils}
		 * module. This callback will replace variable definitions (like
		 * ${var_name}) with their value defined in <i>resource</i> module,
		 * or outputs tabstop with variable name otherwise.
		 * @param {AbbreviationNode} node Context node
		 * @returns {Function}
		 */
		variablesResolver: function(node) {
			var placeholderMemo = {};
			var res = require('resources');
			return function(str, varName) {
				// do not mark `child` variable as placeholder – it‘s a reserved
				// variable name
				if (varName == 'child')
					return str;

				if (varName == 'cursor')
					return require('utils').getCaretPlaceholder();

				var attr = node.attribute(varName);
				if (!_.isUndefined(attr) && attr !== str) {
					return attr;
				}

				var varValue = res.getVariable(varName);
				if (varValue)
					return varValue;

				// output as placeholder
				if (!placeholderMemo[varName])
					placeholderMemo[varName] = startPlaceholderNum++;

				return '${' + placeholderMemo[varName] + ':' + varName + '}';
			};
		},

		/**
		 * Resets global tabstop index. When parsed tree is converted to output
		 * string (<code>AbbreviationNode.toString()</code>), all tabstops
		 * defined in snippets and elements are upgraded in order to prevent
		 * naming conflicts of nested. For example, <code>${1}</code> of a node
		 * should not be linked with the same placehilder of the child node.
		 * By default, <code>AbbreviationNode.toString()</code> automatically
		 * upgrades tabstops of the same index for each node and writes maximum
		 * tabstop index into the <code>tabstopIndex</code> variable. To keep
		 * this variable at reasonable value, it is recommended to call
		 * <code>resetTabstopIndex()</code> method each time you expand variable
		 * @returns
		 */
		resetTabstopIndex: function() {
			tabstopIndex = 0;
			startPlaceholderNum = 100;
		}
	};
});/**
 * Common module's preferences storage. This module
 * provides general storage for all module preferences, their description and
 * default values.<br><br>
 *
 * This module can also be used to list all available properties to create
 * UI for updating properties
 *
 * @memberOf __preferencesDefine
 * @constructor
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('preferences', function(require, _) {
	var preferences = {};
	var defaults = {};
	var _dbgDefaults = null;
	var _dbgPreferences = null;

	function toBoolean(val) {
		if (_.isString(val)) {
			val = val.toLowerCase();
			return val == 'yes' || val == 'true' || val == '1';
		}

		return !!val;
	}

	function isValueObj(obj) {
		return _.isObject(obj)
			&& 'value' in obj
			&& _.keys(obj).length < 3;
	}

	return {
		/**
		 * Creates new preference item with default value
		 * @param {String} name Preference name. You can also pass object
		 * with many options
		 * @param {Object} value Preference default value
		 * @param {String} description Item textual description
		 * @memberOf preferences
		 */
		define: function(name, value, description) {
			var prefs = name;
			if (_.isString(name)) {
				prefs = {};
				prefs[name] = {
					value: value,
					description: description
				};
			}

			_.each(prefs, function(v, k) {
				defaults[k] = isValueObj(v) ? v : {value: v};
			});
		},

		/**
		 * Updates preference item value. Preference value should be defined
		 * first with <code>define</code> method.
		 * @param {String} name Preference name. You can also pass object
		 * with many options
		 * @param {Object} value Preference default value
		 * @memberOf preferences
		 */
		set: function(name, value) {
			var prefs = name;
			if (_.isString(name)) {
				prefs = {};
				prefs[name] = value;
			}

			_.each(prefs, function(v, k) {
				if (!(k in defaults)) {
					throw 'Property "' + k + '" is not defined. You should define it first with `define` method of current module';
				}

				// do not set value if it equals to default value
				if (v !== defaults[k].value) {
					// make sure we have value of correct type
					switch (typeof defaults[k].value) {
						case 'boolean':
							v = toBoolean(v);
							break;
						case 'number':
							v = parseInt(v + '', 10) || 0;
							break;
						default: // convert to string
							if (v !== null) {
								v += '';
							}
					}

					preferences[k] = v;
				} else if  (k in preferences) {
					delete preferences[k];
				}
			});
		},

		/**
		 * Returns preference value
		 * @param {String} name
		 * @returns {String} Returns <code>undefined</code> if preference is
		 * not defined
		 */
		get: function(name) {
			if (name in preferences)
				return preferences[name];

			if (name in defaults)
				return defaults[name].value;

			return void 0;
		},

		/**
		 * Returns comma-separated preference value as array of values
		 * @param {String} name
		 * @returns {Array} Returns <code>undefined</code> if preference is
		 * not defined, <code>null</code> if string cannot be converted to array
		 */
		getArray: function(name) {
			var val = this.get(name);
			if (_.isUndefined(val) || val === null || val === '')  {
				return null;
			}

			val = _.map(val.split(','), require('utils').trim);
			if (!val.length) {
				return null;
			}

			return val;
		},

		/**
		 * Returns comma and colon-separated preference value as dictionary
		 * @param {String} name
		 * @returns {Object}
		 */
		getDict: function(name) {
			var result = {};
			_.each(this.getArray(name), function(val) {
				var parts = val.split(':');
				result[parts[0]] = parts[1];
			});

			return result;
		},

		/**
		 * Returns description of preference item
		 * @param {String} name Preference name
		 * @returns {Object}
		 */
		description: function(name) {
			return name in defaults ? defaults[name].description : void 0;
		},

		/**
		 * Completely removes specified preference(s)
		 * @param {String} name Preference name (or array of names)
		 */
		remove: function(name) {
			if (!_.isArray(name))
				name = [name];

			_.each(name, function(key) {
				if (key in preferences)
					delete preferences[key];

				if (key in defaults)
					delete defaults[key];
			});
		},

		/**
		 * Returns sorted list of all available properties
		 * @returns {Array}
		 */
		list: function() {
			return _.map(_.keys(defaults).sort(), function(key) {
				return {
					name: key,
					value: this.get(key),
					type: typeof defaults[key].value,
					description: defaults[key].description
				};
			}, this);
		},

		/**
		 * Loads user-defined preferences from JSON
		 * @param {Object} json
		 * @returns
		 */
		load: function(json) {
			_.each(json, function(value, key) {
				this.set(key, value);
			}, this);
		},

		/**
		 * Returns hash of user-modified preferences
		 * @returns {Object}
		 */
		exportModified: function() {
			return _.clone(preferences);
		},

		/**
		 * Reset to defaults
		 * @returns
		 */
		reset: function() {
			preferences = {};
		},

		/**
		 * For unit testing: use empty storage
		 */
		_startTest: function() {
			_dbgDefaults = defaults;
			_dbgPreferences = preferences;
			defaults = {};
			preferences = {};
		},

		/**
		 * For unit testing: restore original storage
		 */
		_stopTest: function() {
			defaults = _dbgDefaults;
			preferences = _dbgPreferences;
		}
	};
});/**
 * Module for handling filters
 * @param {Function} require
 * @param {Underscore} _
 * @author Sergey Chikuyonok (serge.che@gmail.com) <http://chikuyonok.ru>
 */
emmet.define('filters', function(require, _) {
	/** List of registered filters */
	var registeredFilters = {};

	/** Filters that will be applied for unknown syntax */
	var basicFilters = 'html';

	function list(filters) {
		if (!filters)
			return [];

		if (_.isString(filters))
			return filters.split(/[\|,]/g);

		return filters;
	}

	return  {
		/**
		 * Register new filter
		 * @param {String} name Filter name
		 * @param {Function} fn Filter function
		 */
		add: function(name, fn) {
			registeredFilters[name] = fn;
		},

		/**
		 * Apply filters for final output tree
		 * @param {AbbreviationNode} tree Output tree
		 * @param {Array} filters List of filters to apply. Might be a
		 * <code>String</code>
		 * @param {Object} profile Output profile, defined in <i>profile</i>
		 * module. Filters defined it profile are not used, <code>profile</code>
		 * is passed to filter function
		 * @memberOf emmet.filters
		 * @returns {AbbreviationNode}
		 */
		apply: function(tree, filters, profile) {
			var utils = require('utils');
			profile = require('profile').get(profile);

			_.each(list(filters), function(filter) {
				var name = utils.trim(filter.toLowerCase());
				if (name && name in registeredFilters) {
					tree = registeredFilters[name](tree, profile);
				}
			});

			return tree;
		},

		/**
		 * Composes list of filters that should be applied to a tree, based on
		 * passed data
		 * @param {String} syntax Syntax name ('html', 'css', etc.)
		 * @param {Object} profile Output profile
		 * @param {String} additionalFilters List or pipe-separated
		 * string of additional filters to apply
		 * @returns {Array}
		 */
		composeList: function(syntax, profile, additionalFilters) {
			profile = require('profile').get(profile);
			var filters = list(profile.filters || require('resources').findItem(syntax, 'filters') || basicFilters);

			if (profile.extraFilters) {
				filters = filters.concat(list(profile.extraFilters));
			}

			if (additionalFilters) {
				filters = filters.concat(list(additionalFilters));
			}

			if (!filters || !filters.length) {
				// looks like unknown syntax, apply basic filters
				filters = list(basicFilters);
			}

			return filters;
		},

		/**
		 * Extracts filter list from abbreviation
		 * @param {String} abbr
		 * @returns {Array} Array with cleaned abbreviation and list of
		 * extracted filters
		 */
		extractFromAbbreviation: function(abbr) {
			var filters = '';
			abbr = abbr.replace(/\|([\w\|\-]+)$/, function(str, p1){
				filters = p1;
				return '';
			});

			return [abbr, list(filters)];
		}
	};
});/**
 * Module that contains factories for element types used by Emmet
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('elements', function(require, _) {
	var factories = {};
	var reAttrs = /([\w\-:]+)\s*=\s*(['"])(.*?)\2/g;

	var result = {
		/**
		 * Create new element factory
		 * @param {String} name Element identifier
		 * @param {Function} factory Function that produces element of specified
		 * type. The object generated by this factory is automatically
		 * augmented with <code>type</code> property pointing to element
		 * <code>name</code>
		 * @memberOf elements
		 */
		add: function(name, factory) {
			var that = this;
			factories[name] = function() {
				var elem = factory.apply(that, arguments);
				if (elem)
					elem.type = name;

				return elem;
			};
		},

		/**
		 * Returns factory for specified name
		 * @param {String} name
		 * @returns {Function}
		 */
		get: function(name) {
			return factories[name];
		},

		/**
		 * Creates new element with specified type
		 * @param {String} name
		 * @returns {Object}
		 */
		create: function(name) {
			var args = [].slice.call(arguments, 1);
			var factory = this.get(name);
			return factory ? factory.apply(this, args) : null;
		},

		/**
		 * Check if passed element is of specified type
		 * @param {Object} elem
		 * @param {String} type
		 * @returns {Boolean}
		 */
		is: function(elem, type) {
			return elem && elem.type === type;
		}
	};

	// register resource references
	function commonFactory(value) {
		return {data: value};
	}

	/**
	 * Element factory
	 * @param {String} elementName Name of output element
	 * @param {String} attrs Attributes definition. You may also pass
	 * <code>Array</code> where each contains object with <code>name</code>
	 * and <code>value</code> properties, or <code>Object</code>
	 * @param {Boolean} isEmpty Is expanded element should be empty
	 */
	result.add('element', function(elementName, attrs, isEmpty) {
		var ret = {
			/** @memberOf __emmetDataElement */
			name: elementName,
			is_empty: !!isEmpty
		};

		if (attrs) {
			ret.attributes = [];
			if (_.isArray(attrs)) {
				ret.attributes = attrs;
			} else if (_.isString(attrs)) {
				var m;
				while (m = reAttrs.exec(attrs)) {
					ret.attributes.push({
						name: m[1],
						value: m[3]
					});
				}
			} else {
				_.each(attrs, function(value, name) {
					ret.attributes.push({
						name: name,
						value: value
					});
				});
			}
		}

		return ret;
	});

	result.add('snippet', commonFactory);
	result.add('reference', commonFactory);
	result.add('empty', function() {
		return {};
	});

	return result;
});/**
 * Abstract implementation of edit tree interface.
 * Edit tree is a named container of editable “name-value” child elements,
 * parsed from <code>source</code>. This container provides convenient methods
 * for editing/adding/removing child elements. All these update actions are
 * instantly reflected in the <code>source</code> code with respect of formatting.
 * <br><br>
 * For example, developer can create an edit tree from CSS rule and add or
 * remove properties from it–all changes will be immediately reflected in the
 * original source.
 * <br><br>
 * All classes defined in this module should be extended the same way as in
 * Backbone framework: using <code>extend</code> method to create new class and
 * <code>initialize</code> method to define custom class constructor.
 *
 * @example
 * <pre><code>
 * var MyClass = require('editTree').EditElement.extend({
 * 	initialize: function() {
 * 		// constructor code here
 * 	}
 * });
 *
 * var elem = new MyClass();
 * </code></pre>
 *
 *
 * @param {Function} require
 * @param {Underscore} _
 * @constructor
 * @memberOf __editTreeDefine
 */
emmet.define('editTree', function(require, _, core) {
	var range = require('range').create;

	/**
	 * Named container of edited source
	 * @type EditContainer
	 * @param {String} source
	 * @param {Object} options
	 */
	function EditContainer(source, options) {
		this.options = _.extend({offset: 0}, options);
		/**
		 * Source code of edited structure. All changes in the structure are
		 * immediately reflected into this property
		 */
		this.source = source;

		/**
		 * List of all editable children
		 * @private
		 */
		this._children = [];

		/**
		 * Hash of all positions of container
		 * @private
		 */
		this._positions = {
			name: 0
		};

		this.initialize.apply(this, arguments);
	}

	/**
	 * The self-propagating extend function for classes.
	 * @type Function
	 */
	EditContainer.extend = core.extend;

	EditContainer.prototype = {
		/**
		 * Child class constructor
		 */
		initialize: function() {},

		/**
		 * Replace substring of tag's source
		 * @param {String} value
		 * @param {Number} start
		 * @param {Number} end
		 * @private
		 */
		_updateSource: function(value, start, end) {
			// create modification range
			var r = range(start, _.isUndefined(end) ? 0 : end - start);
			var delta = value.length - r.length();

			var update = function(obj) {
				_.each(obj, function(v, k) {
					if (v >= r.end)
						obj[k] += delta;
				});
			};

			// update affected positions of current container
			update(this._positions);

			// update affected positions of children
			_.each(this.list(), function(item) {
				update(item._positions);
			});

			this.source = require('utils').replaceSubstring(this.source, value, r);
		},


		/**
		 * Adds new attribute
		 * @param {String} name Property name
		 * @param {String} value Property value
		 * @param {Number} pos Position at which to insert new property. By
		 * default the property is inserted at the end of rule
		 * @returns {EditElement} Newly created element
		 */
		add: function(name, value, pos) {
			// this is abstract implementation
			var item = new EditElement(name, value);
			this._children.push(item);
			return item;
		},

		/**
		 * Returns attribute object
		 * @param {String} name Attribute name or its index
		 * @returns {EditElement}
		 */
		get: function(name) {
			if (_.isNumber(name))
				return this.list()[name];

			if (_.isString(name))
				return _.find(this.list(), function(prop) {
					return prop.name() === name;
				});

			return name;
		},

		/**
		 * Returns all children by name or indexes
		 * @param {Object} name Element name(s) or indexes (<code>String</code>,
		 * <code>Array</code>, <code>Number</code>)
		 * @returns {Array}
		 */
		getAll: function(name) {
			if (!_.isArray(name))
				name = [name];

			// split names and indexes
			var names = [], indexes = [];
			_.each(name, function(item) {
				if (_.isString(item))
					names.push(item);
				else if (_.isNumber(item))
					indexes.push(item);
			});

			return _.filter(this.list(), function(attribute, i) {
				return _.include(indexes, i) || _.include(names, attribute.name());
			});
		},

		/**
		 * Returns or updates element value. If such element doesn't exists,
		 * it will be created automatically and added at the end of child list.
		 * @param {String} name Element name or its index
		 * @param {String} value New element value
		 * @returns {String}
		 */
		value: function(name, value, pos) {
			var element = this.get(name);
			if (element)
				return element.value(value);

			if (!_.isUndefined(value)) {
				// no such element — create it
				return this.add(name, value, pos);
			}
		},

		/**
		 * Returns all values of child elements found by <code>getAll()</code>
		 * method
		 * @param {Object} name Element name(s) or indexes (<code>String</code>,
		 * <code>Array</code>, <code>Number</code>)
		 * @returns {Array}
		 */
		values: function(name) {
			return _.map(this.getAll(name), function(element) {
				return element.value();
			});
		},

		/**
		 * Remove child element
		 * @param {String} name Property name or its index
		 */
		remove: function(name) {
			var element = this.get(name);
			if (element) {
				this._updateSource('', element.fullRange());
				this._children = _.without(this._children, element);
			}
		},

		/**
		 * Returns list of all editable child elements
		 * @returns {Array}
		 */
		list: function() {
			return this._children;
		},

		/**
		 * Returns index of editble child in list
		 * @param {Object} item
		 * @returns {Number}
		 */
		indexOf: function(item) {
			return _.indexOf(this.list(), this.get(item));
		},

		/**
		 * Sets or gets container name
		 * @param {String} val New name. If not passed, current
		 * name is returned
		 * @return {String}
		 */
		name: function(val) {
			if (!_.isUndefined(val) && this._name !== (val = String(val))) {
				this._updateSource(val, this._positions.name, this._positions.name + this._name.length);
				this._name = val;
			}

			return this._name;
		},

		/**
		 * Returns name range object
		 * @param {Boolean} isAbsolute Return absolute range (with respect of
		 * rule offset)
		 * @returns {Range}
		 */
		nameRange: function(isAbsolute) {
			return range(this._positions.name + (isAbsolute ? this.options.offset : 0), this.name());
		},

		/**
		 * Returns range of current source
		 * @param {Boolean} isAbsolute
		 */
		range: function(isAbsolute) {
			return range(isAbsolute ? this.options.offset : 0, this.toString());
		},

		/**
		 * Returns element that belongs to specified position
		 * @param {Number} pos
		 * @param {Boolean} isAbsolute
		 * @returns {EditElement}
		 */
		itemFromPosition: function(pos, isAbsolute) {
			return _.find(this.list(), function(elem) {
				return elem.range(isAbsolute).inside(pos);
			});
		},

		/**
		 * Returns source code of current container
		 * @returns {String}
		 */
		toString: function() {
			return this.source;
		}
	};

	/**
	 * @param {EditContainer} parent
	 * @param {Object} nameToken
	 * @param {Object} valueToken
	 */
	function EditElement(parent, nameToken, valueToken) {
		/** @type EditContainer */
		this.parent = parent;

		this._name = nameToken.value;
		this._value = valueToken ? valueToken.value : '';

		this._positions = {
			name: nameToken.start,
			value: valueToken ? valueToken.start : -1
		};

		this.initialize.apply(this, arguments);
	}

	/**
	 * The self-propagating extend function for classes.
	 * @type Function
	 */
	EditElement.extend = core.extend;

	EditElement.prototype = {
		/**
		 * Child class constructor
		 */
		initialize: function() {},

		/**
		 * Make position absolute
		 * @private
		 * @param {Number} num
		 * @param {Boolean} isAbsolute
		 * @returns {Boolean}
		 */
		_pos: function(num, isAbsolute) {
			return num + (isAbsolute ? this.parent.options.offset : 0);
		},

		/**
		 * Sets of gets element value
		 * @param {String} val New element value. If not passed, current
		 * value is returned
		 * @returns {String}
		 */
		value: function(val) {
			if (!_.isUndefined(val) && this._value !== (val = String(val))) {
				this.parent._updateSource(val, this.valueRange());
				this._value = val;
			}

			return this._value;
		},

		/**
		 * Sets of gets element name
		 * @param {String} val New element name. If not passed, current
		 * name is returned
		 * @returns {String}
		 */
		name: function(val) {
			if (!_.isUndefined(val) && this._name !== (val = String(val))) {
				this.parent._updateSource(val, this.nameRange());
				this._name = val;
			}

			return this._name;
		},

		/**
		 * Returns position of element name token
		 * @param {Boolean} isAbsolute Return absolute position
		 * @returns {Number}
		 */
		namePosition: function(isAbsolute) {
			return this._pos(this._positions.name, isAbsolute);
		},

		/**
		 * Returns position of element value token
		 * @param {Boolean} isAbsolute Return absolute position
		 * @returns {Number}
		 */
		valuePosition: function(isAbsolute) {
			return this._pos(this._positions.value, isAbsolute);
		},

		/**
		 * Returns element name
		 * @param {Boolean} isAbsolute Return absolute range
		 * @returns {Range}
		 */
		range: function(isAbsolute) {
			return range(this.namePosition(isAbsolute), this.toString());
		},

		/**
		 * Returns full element range, including possible indentation
		 * @param {Boolean} isAbsolute Return absolute range
		 * @returns {Range}
		 */
		fullRange: function(isAbsolute) {
			return this.range(isAbsolute);
		},

		/**
		 * Returns element name range
		 * @param {Boolean} isAbsolute Return absolute range
		 * @returns {Range}
		 */
		nameRange: function(isAbsolute) {
			return range(this.namePosition(isAbsolute), this.name());
		},

		/**
		 * Returns element value range
		 * @param {Boolean} isAbsolute Return absolute range
		 * @returns {Range}
		 */
		valueRange: function(isAbsolute) {
			return range(this.valuePosition(isAbsolute), this.value());
		},

		/**
		 * Returns current element string representation
		 * @returns {String}
		 */
		toString: function() {
			return this.name() + this.value();
		},

		valueOf: function() {
			return this.toString();
		}
	};

	return {
		EditContainer: EditContainer,
		EditElement: EditElement,

		/**
		 * Creates token that can be fed to <code>EditElement</code>
		 * @param {Number} start
		 * @param {String} value
		 * @param {String} type
		 * @returns
		 */
		createToken: function(start, value, type) {
			var obj = {
				start: start || 0,
				value: value || '',
				type: type
			};

			obj.end = obj.start + obj.value.length;
			return obj;
		}
	};
});/**
 * CSS EditTree is a module that can parse a CSS rule into a tree with
 * convenient methods for adding, modifying and removing CSS properties. These
 * changes can be written back to string with respect of code formatting.
 *
 * @memberOf __cssEditTreeDefine
 * @constructor
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('cssEditTree', function(require, _) {
	var defaultOptions = {
		styleBefore: '\n\t',
		styleSeparator: ': ',
		offset: 0
	};

	var WHITESPACE_REMOVE_FROM_START = 1;
	var WHITESPACE_REMOVE_FROM_END   = 2;

	/**
	 * Returns range object
	 * @param {Number} start
	 * @param {Number} len
	 * @returns {Range}
	 */
	function range(start, len) {
		return require('range').create(start, len);
	}

	/**
	 * Removes whitespace tokens from the array ends
	 * @param {Array} tokens
	 * @param {Number} mask Mask indicating from which end whitespace should be
	 * removed
	 * @returns {Array}
	 */
	function trimWhitespaceTokens(tokens, mask) {
		mask = mask || (WHITESPACE_REMOVE_FROM_START | WHITESPACE_REMOVE_FROM_END);
		var whitespace = ['white', 'line'];

		if ((mask & WHITESPACE_REMOVE_FROM_END) == WHITESPACE_REMOVE_FROM_END)
			while (tokens.length && _.include(whitespace, _.last(tokens).type)) {
				tokens.pop();
	 		}

		if ((mask & WHITESPACE_REMOVE_FROM_START) == WHITESPACE_REMOVE_FROM_START)
			while (tokens.length && _.include(whitespace, tokens[0].type)) {
				tokens.shift();
			}

		return tokens;
	}

	/**
	 * Helper function that searches for selector range for <code>CSSEditRule</code>
	 * @param {TokenIterator} it
	 * @returns {Range}
	 */
	function findSelectorRange(it) {
		var tokens = [], token;
 		var start = it.position(), end;

 		while (token = it.next()) {
			if (token.type == '{')
				break;
			tokens.push(token);
		}

 		trimWhitespaceTokens(tokens);

 		if (tokens.length) {
 			start = tokens[0].start;
 			end = _.last(tokens).end;
 		} else {
 			end = start;
 		}

 		return range(start, end - start);
	}

	/**
	 * Helper function that searches for CSS property value range next to
	 * iterator's current position
	 * @param {TokenIterator} it
	 * @returns {Range}
	 */
	function findValueRange(it) {
		// find value start position
		var skipTokens = ['white', 'line', ':'];
		var tokens = [], token, start, end;

		it.nextUntil(function(tok) {
			return !_.include(skipTokens, this.itemNext().type);
		});

		start = it.current().end;
		// consume value
		while (token = it.next()) {
			if (token.type == '}' || token.type == ';') {
				// found value end
				trimWhitespaceTokens(tokens, WHITESPACE_REMOVE_FROM_START
						| (token.type == '}' ? WHITESPACE_REMOVE_FROM_END : 0));

				if (tokens.length) {
					start = tokens[0].start;
					end = _.last(tokens).end;
				} else {
					end = start;
				}

				return range(start, end - start);
			}

			tokens.push(token);
		}

		// reached the end of tokens list
		if (tokens.length) {
			return range(tokens[0].start, _.last(tokens).end - tokens[0].start);
		}
	}

	/**
	 * Finds parts of complex CSS value
	 * @param {String} str
	 * @returns {Array} Returns list of <code>Range</code>'s
	 */
	function findParts(str) {
		/** @type StringStream */
		var stream = require('stringStream').create(str);
		var ch;
		var result = [];
		var sep = /[\s\u00a0,]/;

		var add = function() {
			stream.next();
			result.push(range(stream.start, stream.current()));
			stream.start = stream.pos;
		};

		// skip whitespace
		stream.eatSpace();
		stream.start = stream.pos;

		while (ch = stream.next()) {
			if (ch == '"' || ch == "'") {
				stream.next();
				if (!stream.skipTo(ch)) break;
				add();
			} else if (ch == '(') {
				// function found, may have nested function
				stream.backUp(1);
				if (!stream.skipToPair('(', ')')) break;
				stream.backUp(1);
				add();
			} else {
				if (sep.test(ch)) {
					result.push(range(stream.start, stream.current().length - 1));
					stream.eatWhile(sep);
					stream.start = stream.pos;
				}
			}
		}

		add();

		return _.chain(result)
			.filter(function(item) {
				return !!item.length();
			})
			.uniq(false, function(item) {
				return item.toString();
			})
			.value();
	}

	/**
	 * A bit hacky way to identify invalid CSS property definition: when user
	 * starts writing new abbreviation in CSS rule, he actually creates invalid
	 * CSS property definition and this method tries to identify such abbreviation
	 * and prevent it from being added to CSS edit tree
	 * @param {TokenIterator} it
	 */
	function isValidIdentifier(it) {
//		return true;
		var tokens = it.tokens;
		for (var i = it._i + 1, il = tokens.length; i < il; i++) {
			if (tokens[i].type == ':')
				return true;

			if (tokens[i].type == 'identifier' || tokens[i].type == 'line')
				return false;
		}

		return false;
	}

	/**
	 * @class
	 * @extends EditContainer
	 */
	var CSSEditContainer = require('editTree').EditContainer.extend({
		initialize: function(source, options) {
			_.defaults(this.options, defaultOptions);
			var editTree = require('editTree');

			/** @type TokenIterator */
	 		var it = require('tokenIterator').create(
	 				require('cssParser').parse(source));

	 		var selectorRange = findSelectorRange(it);
	 		this._positions.name = selectorRange.start;
	 		this._name = selectorRange.substring(source);

	 		if (!it.current() || it.current().type != '{')
	 			throw 'Invalid CSS rule';

	 		this._positions.contentStart = it.position() + 1;

	 		// consume properties
	 		var propertyRange, valueRange, token;
			while (token = it.next()) {
				if (token.type == 'identifier' && isValidIdentifier(it)) {
					propertyRange = range(token);
					valueRange = findValueRange(it);
					var end = (it.current() && it.current().type == ';')
						? range(it.current())
						: range(valueRange.end, 0);
					this._children.push(new CSSEditElement(this,
							editTree.createToken(propertyRange.start, propertyRange.substring(source)),
							editTree.createToken(valueRange.start, valueRange.substring(source)),
							editTree.createToken(end.start, end.substring(source))
							));
				}
			}

			this._saveStyle();
		},

		/**
		 * Remembers all styles of properties
		 * @private
		 */
		_saveStyle: function() {
			var start = this._positions.contentStart;
			var source = this.source;
			var utils = require('utils');

			_.each(this.list(), /** @param {CSSEditProperty} p */ function(p) {
				p.styleBefore = source.substring(start, p.namePosition());
				// a small hack here:
				// Sometimes users add empty lines before properties to logically
				// separate groups of properties. In this case, a blind copy of
				// characters between rules may lead to undesired behavior,
				// especially when current rule is duplicated or used as a donor
				// to create new rule.
				// To solve this issue, we‘ll take only last newline indentation
				var lines = utils.splitByLines(p.styleBefore);
				if (lines.length > 1) {
					p.styleBefore = '\n' + _.last(lines);
				}

				p.styleSeparator = source.substring(p.nameRange().end, p.valuePosition());

				// graceful and naive comments removal
				p.styleBefore = _.last(p.styleBefore.split('*/'));
				p.styleSeparator = p.styleSeparator.replace(/\/\*.*?\*\//g, '');

				start = p.range().end;
			});
		},

		/**
		 * Adds new CSS property
		 * @param {String} name Property name
		 * @param {String} value Property value
		 * @param {Number} pos Position at which to insert new property. By
		 * default the property is inserted at the end of rule
		 * @returns {CSSEditProperty}
		 */
		add: function(name, value, pos) {
			var list = this.list();
			var start = this._positions.contentStart;
			var styles = _.pick(this.options, 'styleBefore', 'styleSeparator');
			var editTree = require('editTree');

			if (_.isUndefined(pos))
				pos = list.length;

			/** @type CSSEditProperty */
			var donor = list[pos];
			if (donor) {
				start = donor.fullRange().start;
			} else if (donor = list[pos - 1]) {
				// make sure that donor has terminating semicolon
				donor.end(';');
				start = donor.range().end;
			}

			if (donor) {
				styles = _.pick(donor, 'styleBefore', 'styleSeparator');
			}

			var nameToken = editTree.createToken(start + styles.styleBefore.length, name);
			var valueToken = editTree.createToken(nameToken.end + styles.styleSeparator.length, value);

			var property = new CSSEditElement(this, nameToken, valueToken,
					editTree.createToken(valueToken.end, ';'));

			_.extend(property, styles);

			// write new property into the source
			this._updateSource(property.styleBefore + property.toString(), start);

			// insert new property
			this._children.splice(pos, 0, property);
			return property;
		}
	});

	/**
	 * @class
	 * @type CSSEditElement
	 * @constructor
	 */
	var CSSEditElement = require('editTree').EditElement.extend({
		initialize: function(rule, name, value, end) {
			this.styleBefore = rule.options.styleBefore;
			this.styleSeparator = rule.options.styleSeparator;

			this._end = end.value;
			this._positions.end = end.start;
		},

		/**
		 * Returns ranges of complex value parts
		 * @returns {Array} Returns <code>null</code> if value is not complex
		 */
		valueParts: function(isAbsolute) {
			var parts = findParts(this.value());
			if (isAbsolute) {
				var offset = this.valuePosition(true);
				_.each(parts, function(p) {
					p.shift(offset);
				});
			}

			return parts;
		},

		/**
		 * Sets of gets property end value (basically, it's a semicolon)
		 * @param {String} val New end value. If not passed, current
		 * value is returned
		 */
		end: function(val) {
			if (!_.isUndefined(val) && this._end !== val) {
				this.parent._updateSource(val, this._positions.end, this._positions.end + this._end.length);
				this._end = val;
			}

			return this._end;
		},

		/**
		 * Returns full rule range, with indentation
		 * @param {Boolean} isAbsolute Return absolute range (with respect of
		 * rule offset)
		 * @returns {Range}
		 */
		fullRange: function(isAbsolute) {
			var r = this.range(isAbsolute);
			r.start -= this.styleBefore.length;
			return r;
		},

		/**
		 * Returns item string representation
		 * @returns {String}
		 */
		toString: function() {
			return this.name() + this.styleSeparator + this.value() + this.end();
		}
	});

	return {
		/**
		 * Parses CSS rule into editable tree
		 * @param {String} source
		 * @param {Object} options
		 * @memberOf emmet.cssEditTree
		 * @returns {EditContainer}
		 */
		parse: function(source, options) {
			return new CSSEditContainer(source, options);
		},

		/**
		 * Extract and parse CSS rule from specified position in <code>content</code>
		 * @param {String} content CSS source code
		 * @param {Number} pos Character position where to start source code extraction
		 * @returns {EditContainer}
		 */
		parseFromPosition: function(content, pos, isBackward) {
			var bounds = this.extractRule(content, pos, isBackward);
			if (!bounds || !bounds.inside(pos))
				// no matching CSS rule or caret outside rule bounds
				return null;

			return this.parse(bounds.substring(content), {
				offset: bounds.start
			});
		},

		/**
		 * Extracts single CSS selector definition from source code
		 * @param {String} content CSS source code
		 * @param {Number} pos Character position where to start source code extraction
		 * @returns {Range}
		 */
		extractRule: function(content, pos, isBackward) {
			var result = '';
			var len = content.length;
			var offset = pos;
			var stopChars = '{}/\\<>\n\r';
			var bracePos = -1, ch;

			// search left until we find rule edge
			while (offset >= 0) {
				ch = content.charAt(offset);
				if (ch == '{') {
					bracePos = offset;
					break;
				}
				else if (ch == '}' && !isBackward) {
					offset++;
					break;
				}

				offset--;
			}

			// search right for full rule set
			while (offset < len) {
				ch = content.charAt(offset);
				if (ch == '{') {
					bracePos = offset;
				} else if (ch == '}') {
					if (bracePos != -1)
						result = content.substring(bracePos, offset + 1);
					break;
				}

				offset++;
			}

			if (result) {
				// find CSS selector
				offset = bracePos - 1;
				var selector = '';
				while (offset >= 0) {
					ch = content.charAt(offset);
					if (stopChars.indexOf(ch) != -1) break;
					offset--;
				}

				// also trim whitespace
				selector = content.substring(offset + 1, bracePos).replace(/^[\s\n\r]+/m, '');
				return require('range').create(bracePos - selector.length, result.length + selector.length);
			}

			return null;
		},

		/**
	 	 * Removes vendor prefix from CSS property
	 	 * @param {String} name CSS property
	 	 * @return {String}
	 	 */
	 	baseName: function(name) {
	 		return name.replace(/^\s*\-\w+\-/, '');
	 	},

	 	/**
	 	 * Finds parts of complex CSS value
	 	 * @param {String} str
	 	 * @returns {Array}
	 	 */
	 	findParts: findParts
	};
});/**
 * XML EditTree is a module that can parse an XML/HTML element into a tree with
 * convenient methods for adding, modifying and removing attributes. These
 * changes can be written back to string with respect of code formatting.
 *
 * @memberOf __xmlEditTreeDefine
 * @constructor
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('xmlEditTree', function(require, _) {
	var defaultOptions = {
		styleBefore: ' ',
		styleSeparator: '=',
		styleQuote: '"',
		offset: 0
	};

	var startTag = /^<([\w\:\-]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/m;

	var XMLEditContainer = require('editTree').EditContainer.extend({
		initialize: function(source, options) {
			_.defaults(this.options, defaultOptions);
			this._positions.name = 1;

			var attrToken = null;
			var tokens = require('xmlParser').parse(source);
			var range = require('range');

			_.each(tokens, function(token) {
				token.value = range.create(token).substring(source);
				switch (token.type) {
					case 'tag':
						if (/^<[^\/]+/.test(token.value)) {
							this._name = token.value.substring(1);
						}
						break;

					case 'attribute':
						// add empty attribute
						if (attrToken) {
							this._children.push(new XMLEditElement(this, attrToken));
						}

						attrToken = token;
						break;

					case 'string':
						this._children.push(new XMLEditElement(this, attrToken, token));
						attrToken = null;
						break;
				}
			}, this);

			if (attrToken) {
				this._children.push(new XMLEditElement(this, attrToken));
			}

			this._saveStyle();
		},

		/**
		 * Remembers all styles of properties
		 * @private
		 */
		_saveStyle: function() {
			var start = this.nameRange().end;
			var source = this.source;

			_.each(this.list(), /** @param {EditElement} p */ function(p) {
				p.styleBefore = source.substring(start, p.namePosition());

				if (p.valuePosition() !== -1) {
					p.styleSeparator = source.substring(p.namePosition() + p.name().length, p.valuePosition() - p.styleQuote.length);
				}

				start = p.range().end;
			});
		},

		/**
		 * Adds new attribute
		 * @param {String} name Property name
		 * @param {String} value Property value
		 * @param {Number} pos Position at which to insert new property. By
		 * default the property is inserted at the end of rule
		 */
		add: function(name, value, pos) {
			var list = this.list();
			var start = this.nameRange().end;
			var editTree = require('editTree');
			var styles = _.pick(this.options, 'styleBefore', 'styleSeparator', 'styleQuote');

			if (_.isUndefined(pos))
				pos = list.length;


			/** @type XMLEditAttribute */
			var donor = list[pos];
			if (donor) {
				start = donor.fullRange().start;
			} else if (donor = list[pos - 1]) {
				start = donor.range().end;
			}

			if (donor) {
				styles = _.pick(donor, 'styleBefore', 'styleSeparator', 'styleQuote');
			}

			value = styles.styleQuote + value + styles.styleQuote;

			var attribute = new XMLEditElement(this,
					editTree.createToken(start + styles.styleBefore.length, name),
					editTree.createToken(start + styles.styleBefore.length + name.length
							+ styles.styleSeparator.length, value)
					);

			_.extend(attribute, styles);

			// write new attribute into the source
			this._updateSource(attribute.styleBefore + attribute.toString(), start);

			// insert new attribute
			this._children.splice(pos, 0, attribute);
			return attribute;
		}
	});

	var XMLEditElement = require('editTree').EditElement.extend({
		initialize: function(parent, nameToken, valueToken) {
			this.styleBefore = parent.options.styleBefore;
			this.styleSeparator = parent.options.styleSeparator;

			var value = '', quote = parent.options.styleQuote;
			if (valueToken) {
				value = valueToken.value;
				quote = value.charAt(0);
				if (quote == '"' || quote == "'") {
					value = value.substring(1);
				} else {
					quote = '';
				}

				if (quote && value.charAt(value.length - 1) == quote) {
					value = value.substring(0, value.length - 1);
				}
			}

			this.styleQuote = quote;

			this._value = value;
			this._positions.value = valueToken ? valueToken.start + quote.length : -1;
		},

		/**
		 * Returns full rule range, with indentation
		 * @param {Boolean} isAbsolute Return absolute range (with respect of
		 * rule offset)
		 * @returns {Range}
		 */
		fullRange: function(isAbsolute) {
			var r = this.range(isAbsolute);
			r.start -= this.styleBefore.length;
			return r;
		},

		toString: function() {
			return this.name() + this.styleSeparator
				+ this.styleQuote + this.value() + this.styleQuote;
		}
	});

	return {
		/**
		 * Parses HTML element into editable tree
		 * @param {String} source
		 * @param {Object} options
		 * @memberOf emmet.htmlEditTree
		 * @returns {EditContainer}
		 */
		parse: function(source, options) {
			return new XMLEditContainer(source, options);
		},

		/**
		 * Extract and parse HTML from specified position in <code>content</code>
		 * @param {String} content CSS source code
		 * @param {Number} pos Character position where to start source code extraction
		 * @returns {XMLEditElement}
		 */
		parseFromPosition: function(content, pos, isBackward) {
			var bounds = this.extractTag(content, pos, isBackward);
			if (!bounds || !bounds.inside(pos))
				// no matching HTML tag or caret outside tag bounds
				return null;

			return this.parse(bounds.substring(content), {
				offset: bounds.start
			});
		},

		/**
		 * Extracts nearest HTML tag range from <code>content</code>, starting at
		 * <code>pos</code> position
		 * @param {String} content
		 * @param {Number} pos
		 * @param {Boolean} isBackward
		 * @returns {Range}
		 */
		extractTag: function(content, pos, isBackward) {
			var len = content.length, i;
			var range = require('range');

			// max extraction length. I don't think there may be tags larger
			// than 2000 characters length
			var maxLen = Math.min(2000, len);

			/** @type Range */
			var r = null;

			var match = function(pos) {
				var m;
				if (content.charAt(pos) == '<' && (m = content.substr(pos, maxLen).match(startTag)))
					return range.create(pos, m[0]);
			};

			// lookup backward, in case we are inside tag already
			for (i = pos; i >= 0; i--) {
				if (r = match(i)) break;
			}

			if (r && (r.inside(pos) || isBackward))
				return r;

			if (!r && isBackward)
				return null;

			// search forward
			for (i = pos; i < len; i++) {
				if (r = match(i))
					return r;
			}
		}
	};
});/**
 * 'Expand abbreviation' editor action: extracts abbreviation from current caret
 * position and replaces it with formatted output.
 * <br><br>
 * This behavior can be overridden with custom handlers which can perform
 * different actions when 'Expand Abbreviation' action is called.
 * For example, a CSS gradient handler that produces vendor-prefixed gradient
 * definitions registers its own expand abbreviation handler.
 *
 * @constructor
 * @memberOf __expandAbbreviationActionDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('expandAbbreviation', function(require, _) {
	/**
	 * @type HandlerList List of registered handlers
	 */
	var handlers = require('handlerList').create();

	/** Back-reference to module */
	var module = null;

	var actions = require('actions');
	/**
	 * 'Expand abbreviation' editor action
	 * @param {IEmmetEditor} editor Editor instance
	 * @param {String} syntax Syntax type (html, css, etc.)
	 * @param {String} profile Output profile name (html, xml, xhtml)
	 * @return {Boolean} Returns <code>true</code> if abbreviation was expanded
	 * successfully
	 */
	actions.add('expand_abbreviation', function(editor, syntax, profile) {
		var args = _.toArray(arguments);

		// normalize incoming arguments
		var info = require('editorUtils').outputInfo(editor, syntax, profile);
		args[1] = info.syntax;
		args[2] = info.profile;

		return handlers.exec(false, args);
	});

	/**
	 * A special version of <code>expandAbbreviation</code> function: if it can't
	 * find abbreviation, it will place Tab character at caret position
	 * @param {IEmmetEditor} editor Editor instance
	 * @param {String} syntax Syntax type (html, css, etc.)
	 * @param {String} profile Output profile name (html, xml, xhtml)
	 */
	actions.add('expand_abbreviation_with_tab', function(editor, syntax, profile) {
		var sel = editor.getSelection();
		var indent = require('resources').getVariable('indentation');
		if (sel) {
			// indent selection
			var utils = require('utils');
			var selRange = require('range').create(editor.getSelectionRange());
			var content = utils.padString(sel, indent);

			editor.replaceContent(indent + '${0}', editor.getCaretPos());
			var replaceRange = require('range').create(editor.getCaretPos(), selRange.length());
			editor.replaceContent(content, replaceRange.start, replaceRange.end, true);
			editor.createSelection(replaceRange.start, replaceRange.start + content.length);
			return true;
		}

		if (!actions.run('expand_abbreviation', editor, syntax, profile)) {
			editor.replaceContent(indent, editor.getCaretPos());
		}

		return true;
	}, {hidden: true});

	// XXX setup default handler
	/**
	 * Extracts abbreviation from current caret
	 * position and replaces it with formatted output
	 * @param {IEmmetEditor} editor Editor instance
	 * @param {String} syntax Syntax type (html, css, etc.)
	 * @param {String} profile Output profile name (html, xml, xhtml)
	 * @return {Boolean} Returns <code>true</code> if abbreviation was expanded
	 * successfully
	 */
	handlers.add(function(editor, syntax, profile) {
		var caretPos = editor.getSelectionRange().end;
		var abbr = module.findAbbreviation(editor);

		if (abbr) {
			var content = emmet.expandAbbreviation(abbr, syntax, profile,
					require('actionUtils').captureContext(editor));
			if (content) {
				editor.replaceContent(content, caretPos - abbr.length, caretPos);
				return true;
			}
		}

		return false;
	}, {order: -1});

	return module = {
		/**
		 * Adds custom expand abbreviation handler. The passed function should
		 * return <code>true</code> if it was performed successfully,
		 * <code>false</code> otherwise.
		 *
		 * Added handlers will be called when 'Expand Abbreviation' is called
		 * in order they were added
		 * @memberOf expandAbbreviation
		 * @param {Function} fn
		 * @param {Object} options
		 */
		addHandler: function(fn, options) {
			handlers.add(fn, options);
		},

		/**
		 * Removes registered handler
		 * @returns
		 */
		removeHandler: function(fn) {
			handlers.remove(fn, options);
		},

		/**
		 * Search for abbreviation in editor from current caret position
		 * @param {IEmmetEditor} editor Editor instance
		 * @return {String}
		 */
		findAbbreviation: function(editor) {
			/** @type Range */
			var range = require('range').create(editor.getSelectionRange());
			var content = String(editor.getContent());
			if (range.length()) {
				// abbreviation is selected by user
				return range.substring(content);
			}

			// search for new abbreviation from current caret position
			var curLine = editor.getCurrentLineRange();
			return require('actionUtils').extractAbbreviation(content.substring(curLine.start, range.start));
		}
	};
});/**
 * Action that wraps content with abbreviation. For convenience, action is
 * defined as reusable module
 * @constructor
 * @memberOf __wrapWithAbbreviationDefine
 */
emmet.define('wrapWithAbbreviation', function(require, _) {
	/** Back-references to current module */
	var module = null;

	/**
	 * Wraps content with abbreviation
	 * @param {IEmmetEditor} Editor instance
	 * @param {String} abbr Abbreviation to wrap with
	 * @param {String} syntax Syntax type (html, css, etc.)
	 * @param {String} profile Output profile name (html, xml, xhtml)
	 */
	require('actions').add('wrap_with_abbreviation', function (editor, abbr, syntax, profile) {
		var info = require('editorUtils').outputInfo(editor, syntax, profile);
		var utils = require('utils');
		/** @type emmet.editorUtils */
		var editorUtils = require('editorUtils');
		abbr = abbr || editor.prompt("Enter abbreviation");

		if (!abbr)
			return null;

		abbr = String(abbr);

		var range = require('range').create(editor.getSelectionRange());

		if (!range.length()) {
			// no selection, find tag pair
			var match = require('htmlMatcher').tag(info.content, range.start);
			if (!match) {  // nothing to wrap
				return false;
			}

			range = utils.narrowToNonSpace(info.content, match.range);
		}

		var newContent = utils.escapeText(range.substring(info.content));
		var result = module
			.wrap(abbr, editorUtils.unindent(editor, newContent), info.syntax,
					info.profile, require('actionUtils').captureContext(editor));

		if (result) {
			editor.replaceContent(result, range.start, range.end);
			return true;
		}

		return false;
	});

	return module = {
		/**
		 * Wraps passed text with abbreviation. Text will be placed inside last
		 * expanded element
		 * @memberOf wrapWithAbbreviation
		 * @param {String} abbr Abbreviation
		 * @param {String} text Text to wrap
		 * @param {String} syntax Document type (html, xml, etc.). Default is 'html'
		 * @param {String} profile Output profile's name. Default is 'plain'
		 * @param {Object} contextNode Context node inside which abbreviation
		 * is wrapped. It will be used as a reference for node name resolvers
		 * @return {String}
		 */
		wrap: function(abbr, text, syntax, profile, contextNode) {
			/** @type emmet.filters */
			var filters = require('filters');
			/** @type emmet.utils */
			var utils = require('utils');

			syntax = syntax || emmet.defaultSyntax();
			profile = require('profile').get(profile, syntax);

			require('tabStops').resetTabstopIndex();

			var data = filters.extractFromAbbreviation(abbr);
			var parsedTree = require('abbreviationParser').parse(data[0], {
				syntax: syntax,
				pastedContent: text,
				contextNode: contextNode
			});
			if (parsedTree) {
				var filtersList = filters.composeList(syntax, profile, data[1]);
				filters.apply(parsedTree, filtersList, profile);
				return utils.replaceVariables(parsedTree.toString());
			}

			return null;
		}
	};
});/**
 * Toggles HTML and CSS comments depending on current caret context. Unlike
 * the same action in most editors, this action toggles comment on currently
 * matched item—HTML tag or CSS selector—when nothing is selected.
 *
 * @param {Function} require
 * @param {Underscore} _
 * @memberOf __toggleCommentAction
 * @constructor
 */
emmet.exec(function(require, _) {
	/**
	 * Toggle HTML comment on current selection or tag
	 * @param {IEmmetEditor} editor
	 * @return {Boolean} Returns <code>true</code> if comment was toggled
	 */
	function toggleHTMLComment(editor) {
		/** @type Range */
		var range = require('range').create(editor.getSelectionRange());
		var info = require('editorUtils').outputInfo(editor);

		if (!range.length()) {
			// no selection, find matching tag
			var tag = require('htmlMatcher').tag(info.content, editor.getCaretPos());
			if (tag) { // found pair
				range = tag.outerRange;
			}
		}

		return genericCommentToggle(editor, '<!--', '-->', range);
	}

	/**
	 * Simple CSS commenting
	 * @param {IEmmetEditor} editor
	 * @return {Boolean} Returns <code>true</code> if comment was toggled
	 */
	function toggleCSSComment(editor) {
		/** @type Range */
		var range = require('range').create(editor.getSelectionRange());
		var info = require('editorUtils').outputInfo(editor);

		if (!range.length()) {
			// no selection, try to get current rule
			/** @type CSSRule */
			var rule = require('cssEditTree').parseFromPosition(info.content, editor.getCaretPos());
			if (rule) {
				var property = cssItemFromPosition(rule, editor.getCaretPos());
				range = property
					? property.range(true)
					: require('range').create(rule.nameRange(true).start, rule.source);
			}
		}

		if (!range.length()) {
			// still no selection, get current line
			range = require('range').create(editor.getCurrentLineRange());
			require('utils').narrowToNonSpace(info.content, range);
		}

		return genericCommentToggle(editor, '/*', '*/', range);
	}

	/**
	 * Returns CSS property from <code>rule</code> that matches passed position
	 * @param {EditContainer} rule
	 * @param {Number} absPos
	 * @returns {EditElement}
	 */
	function cssItemFromPosition(rule, absPos) {
		// do not use default EditContainer.itemFromPosition() here, because
		// we need to make a few assumptions to make CSS commenting more reliable
		var relPos = absPos - (rule.options.offset || 0);
		var reSafeChar = /^[\s\n\r]/;
		return _.find(rule.list(), function(item) {
			if (item.range().end === relPos) {
				// at the end of property, but outside of it
				// if there’s a space character at current position,
				// use current property
				return reSafeChar.test(rule.source.charAt(relPos));
			}

			return item.range().inside(relPos);
		});
	}

	/**
	 * Search for nearest comment in <code>str</code>, starting from index <code>from</code>
	 * @param {String} text Where to search
	 * @param {Number} from Search start index
	 * @param {String} start_token Comment start string
	 * @param {String} end_token Comment end string
	 * @return {Range} Returns null if comment wasn't found
	 */
	function searchComment(text, from, startToken, endToken) {
		var commentStart = -1;
		var commentEnd = -1;

		var hasMatch = function(str, start) {
			return text.substr(start, str.length) == str;
		};

		// search for comment start
		while (from--) {
			if (hasMatch(startToken, from)) {
				commentStart = from;
				break;
			}
		}

		if (commentStart != -1) {
			// search for comment end
			from = commentStart;
			var contentLen = text.length;
			while (contentLen >= from++) {
				if (hasMatch(endToken, from)) {
					commentEnd = from + endToken.length;
					break;
				}
			}
		}

		return (commentStart != -1 && commentEnd != -1)
			? require('range').create(commentStart, commentEnd - commentStart)
			: null;
	}

	/**
	 * Generic comment toggling routine
	 * @param {IEmmetEditor} editor
	 * @param {String} commentStart Comment start token
	 * @param {String} commentEnd Comment end token
	 * @param {Range} range Selection range
	 * @return {Boolean}
	 */
	function genericCommentToggle(editor, commentStart, commentEnd, range) {
		var editorUtils = require('editorUtils');
		var content = editorUtils.outputInfo(editor).content;
		var caretPos = editor.getCaretPos();
		var newContent = null;

		var utils = require('utils');

		/**
		 * Remove comment markers from string
		 * @param {Sting} str
		 * @return {String}
		 */
		function removeComment(str) {
			return str
				.replace(new RegExp('^' + utils.escapeForRegexp(commentStart) + '\\s*'), function(str){
					caretPos -= str.length;
					return '';
				}).replace(new RegExp('\\s*' + utils.escapeForRegexp(commentEnd) + '$'), '');
		}

		// first, we need to make sure that this substring is not inside
		// comment
		var commentRange = searchComment(content, caretPos, commentStart, commentEnd);
		if (commentRange && commentRange.overlap(range)) {
			// we're inside comment, remove it
			range = commentRange;
			newContent = removeComment(range.substring(content));
		} else {
			// should add comment
			// make sure that there's no comment inside selection
			newContent = commentStart + ' ' +
				range.substring(content)
					.replace(new RegExp(utils.escapeForRegexp(commentStart) + '\\s*|\\s*' + utils.escapeForRegexp(commentEnd), 'g'), '') +
				' ' + commentEnd;

			// adjust caret position
			caretPos += commentStart.length + 1;
		}

		// replace editor content
		if (newContent !== null) {
			newContent = utils.escapeText(newContent);
			editor.setCaretPos(range.start);
			editor.replaceContent(editorUtils.unindent(editor, newContent), range.start, range.end);
			editor.setCaretPos(caretPos);
			return true;
		}

		return false;
	}

	/**
	 * Toggle comment on current editor's selection or HTML tag/CSS rule
	 * @param {IEmmetEditor} editor
	 */
	require('actions').add('toggle_comment', function(editor) {
		var info = require('editorUtils').outputInfo(editor);
		if (info.syntax == 'css') {
			// in case our editor is good enough and can recognize syntax from
			// current token, we have to make sure that cursor is not inside
			// 'style' attribute of html element
			var caretPos = editor.getCaretPos();
			var tag = require('htmlMatcher').tag(info.content, caretPos);
			if (tag && tag.open.range.inside(caretPos)) {
				info.syntax = 'html';
			}
		}

		if (info.syntax == 'css')
			return toggleCSSComment(editor);

		return toggleHTMLComment(editor);
	});
});/**
 * Move between next/prev edit points. 'Edit points' are places between tags
 * and quotes of empty attributes in html
 * @constructor
 *
 * @memberOf __editPointActionDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	/**
	 * Search for new caret insertion point
	 * @param {IEmmetEditor} editor Editor instance
	 * @param {Number} inc Search increment: -1 — search left, 1 — search right
	 * @param {Number} offset Initial offset relative to current caret position
	 * @return {Number} Returns -1 if insertion point wasn't found
	 */
	function findNewEditPoint(editor, inc, offset) {
		inc = inc || 1;
		offset = offset || 0;

		var curPoint = editor.getCaretPos() + offset;
		var content = String(editor.getContent());
		var maxLen = content.length;
		var nextPoint = -1;
		var reEmptyLine = /^\s+$/;

		function getLine(ix) {
			var start = ix;
			while (start >= 0) {
				var c = content.charAt(start);
				if (c == '\n' || c == '\r')
					break;
				start--;
			}

			return content.substring(start, ix);
		}

		while (curPoint <= maxLen && curPoint >= 0) {
			curPoint += inc;
			var curChar = content.charAt(curPoint);
			var nextChar = content.charAt(curPoint + 1);
			var prevChar = content.charAt(curPoint - 1);

			switch (curChar) {
				case '"':
				case '\'':
					if (nextChar == curChar && prevChar == '=') {
						// empty attribute
						nextPoint = curPoint + 1;
					}
					break;
				case '>':
					if (nextChar == '<') {
						// between tags
						nextPoint = curPoint + 1;
					}
					break;
				case '\n':
				case '\r':
					// empty line
					if (reEmptyLine.test(getLine(curPoint - 1))) {
						nextPoint = curPoint;
					}
					break;
			}

			if (nextPoint != -1)
				break;
		}

		return nextPoint;
	}

	/** @type emmet.actions */
	var actions = require('actions');

	/**
	 * Move caret to previous edit point
	 * @param {IEmmetEditor} editor Editor instance
	 */
	actions.add('prev_edit_point', function(editor) {
		var curPos = editor.getCaretPos();
		var newPoint = findNewEditPoint(editor, -1);

		if (newPoint == curPos)
			// we're still in the same point, try searching from the other place
			newPoint = findNewEditPoint(editor, -1, -2);

		if (newPoint != -1) {
			editor.setCaretPos(newPoint);
			return true;
		}

		return false;
	}, {label: 'Previous Edit Point'});

	/**
	 * Move caret to next edit point
	 * @param {IEmmetEditor} editor Editor instance
	 */
	actions.add('next_edit_point', function(editor) {
		var newPoint = findNewEditPoint(editor, 1);
		if (newPoint != -1) {
			editor.setCaretPos(newPoint);
			return true;
		}

		return false;
	});
});/**
 * Actions that use stream parsers and tokenizers for traversing:
 * -- Search for next/previous items in HTML
 * -- Search for next/previous items in CSS
 * @constructor
 * @memberOf __selectItemActionDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	var startTag = /^<([\w\:\-]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/;

	/**
	 * Generic function for searching for items to select
	 * @param {IEmmetEditor} editor
	 * @param {Boolean} isBackward Search backward (search forward otherwise)
	 * @param {Function} extractFn Function that extracts item content
	 * @param {Function} rangeFn Function that search for next token range
	 */
	function findItem(editor, isBackward, extractFn, rangeFn) {
		var range = require('range');
		var content = require('editorUtils').outputInfo(editor).content;

		var contentLength = content.length;
		var itemRange, rng;
		/** @type Range */
		var prevRange = range.create(-1, 0);
		/** @type Range */
		var sel = range.create(editor.getSelectionRange());

		var searchPos = sel.start, loop = 100000; // endless loop protection
		while (searchPos >= 0 && searchPos < contentLength && --loop > 0) {
			if ( (itemRange = extractFn(content, searchPos, isBackward)) ) {
				if (prevRange.equal(itemRange)) {
					break;
				}

				prevRange = itemRange.clone();
				rng = rangeFn(itemRange.substring(content), itemRange.start, sel.clone());

				if (rng) {
					editor.createSelection(rng.start, rng.end);
					return true;
				} else {
					searchPos = isBackward ? itemRange.start : itemRange.end - 1;
				}
			}

			searchPos += isBackward ? -1 : 1;
		}

		return false;
	}

	// XXX HTML section

	/**
	 * Find next HTML item
	 * @param {IEmmetEditor} editor
	 */
	function findNextHTMLItem(editor) {
		var isFirst = true;
		return findItem(editor, false, function(content, searchPos){
			if (isFirst) {
				isFirst = false;
				return findOpeningTagFromPosition(content, searchPos);
			} else {
				return getOpeningTagFromPosition(content, searchPos);
			}
		}, function(tag, offset, selRange) {
			return getRangeForHTMLItem(tag, offset, selRange, false);
		});
	}

	/**
	 * Find previous HTML item
	 * @param {IEmmetEditor} editor
	 */
	function findPrevHTMLItem(editor) {
		return findItem(editor, true, getOpeningTagFromPosition, function (tag, offset, selRange) {
			return getRangeForHTMLItem(tag, offset, selRange, true);
		});
	}

	/**
	 * Creates possible selection ranges for HTML tag
	 * @param {String} source Original HTML source for tokens
	 * @param {Array} tokens List of HTML tokens
	 * @returns {Array}
	 */
	function makePossibleRangesHTML(source, tokens, offset) {
		offset = offset || 0;
		var range = require('range');
		var result = [];
		var attrStart = -1, attrName = '', attrValue = '', attrValueRange, tagName;
		_.each(tokens, function(tok) {
			switch (tok.type) {
				case 'tag':
					tagName = source.substring(tok.start, tok.end);
					if (/^<[\w\:\-]/.test(tagName)) {
						// add tag name
						result.push(range.create({
							start: tok.start + 1,
							end: tok.end
						}));
					}
					break;
				case 'attribute':
					attrStart = tok.start;
					attrName = source.substring(tok.start, tok.end);
					break;

				case 'string':
					// attribute value
					// push full attribute first
					 result.push(range.create(attrStart, tok.end - attrStart));

					 attrValueRange = range.create(tok);
					 attrValue = attrValueRange.substring(source);

					 // is this a quoted attribute?
					 if (isQuote(attrValue.charAt(0)))
						 attrValueRange.start++;

					 if (isQuote(attrValue.charAt(attrValue.length - 1)))
						 attrValueRange.end--;

					 result.push(attrValueRange);

					 if (attrName == 'class') {
						 result = result.concat(classNameRanges(attrValueRange.substring(source), attrValueRange.start));
					 }

					break;
			}
		});

		// offset ranges
		_.each(result, function(r) {
			r.shift(offset);
		});

		return _.chain(result)
			.filter(function(item) {        // remove empty
				return !!item.length();
			})
			.uniq(false, function(item) {   // remove duplicates
				return item.toString();
			})
			.value();
	}

	/**
	 * Returns ranges of class names in "class" attribute value
	 * @param {String} className
	 * @returns {Array}
	 */
	function classNameRanges(className, offset) {
		offset = offset || 0;
		var result = [];
		/** @type StringStream */
		var stream = require('stringStream').create(className);
		var range = require('range');

		// skip whitespace
		stream.eatSpace();
		stream.start = stream.pos;

		var ch;
		while (ch = stream.next()) {
			if (/[\s\u00a0]/.test(ch)) {
				result.push(range.create(stream.start + offset, stream.pos - stream.start - 1));
				stream.eatSpace();
				stream.start = stream.pos;
			}
		}

		result.push(range.create(stream.start + offset, stream.pos - stream.start));
		return result;
	}

	/**
	 * Returns best HTML tag range match for current selection
	 * @param {String} tag Tag declaration
	 * @param {Number} offset Tag's position index inside content
	 * @param {Range} selRange Selection range
	 * @return {Range} Returns range if next item was found, <code>null</code> otherwise
	 */
	function getRangeForHTMLItem(tag, offset, selRange, isBackward) {
		var ranges = makePossibleRangesHTML(tag, require('xmlParser').parse(tag), offset);

		if (isBackward)
			ranges.reverse();

		// try to find selected range
		var curRange = _.find(ranges, function(r) {
			return r.equal(selRange);
		});

		if (curRange) {
			var ix = _.indexOf(ranges, curRange);
			if (ix < ranges.length - 1)
				return ranges[ix + 1];

			return null;
		}

		// no selected range, find nearest one
		if (isBackward)
			// search backward
			return _.find(ranges, function(r) {
				return r.start < selRange.start;
			});

		// search forward
		// to deal with overlapping ranges (like full attribute definition
		// and attribute value) let's find range under caret first
		if (!curRange) {
			var matchedRanges = _.filter(ranges, function(r) {
				return r.inside(selRange.end);
			});

			if (matchedRanges.length > 1)
				return matchedRanges[1];
		}


		return _.find(ranges, function(r) {
			return r.end > selRange.end;
		});
	}

	/**
	 * Search for opening tag in content, starting at specified position
	 * @param {String} html Where to search tag
	 * @param {Number} pos Character index where to start searching
	 * @return {Range} Returns range if valid opening tag was found,
	 * <code>null</code> otherwise
	 */
	function findOpeningTagFromPosition(html, pos) {
		var tag;
		while (pos >= 0) {
			if (tag = getOpeningTagFromPosition(html, pos))
				return tag;
			pos--;
		}

		return null;
	}

	/**
	 * @param {String} html Where to search tag
	 * @param {Number} pos Character index where to start searching
	 * @return {Range} Returns range if valid opening tag was found,
	 * <code>null</code> otherwise
	 */
	function getOpeningTagFromPosition(html, pos) {
		var m;
		if (html.charAt(pos) == '<' && (m = html.substring(pos, html.length).match(startTag))) {
			return require('range').create(pos, m[0]);
		}
	}

	function isQuote(ch) {
		return ch == '"' || ch == "'";
	}

	/**
	 * Makes all possible selection ranges for specified CSS property
	 * @param {CSSProperty} property
	 * @returns {Array}
	 */
	function makePossibleRangesCSS(property) {
		// find all possible ranges, sorted by position and size
		var valueRange = property.valueRange(true);
		var result = [property.range(true), valueRange];
		var stringStream = require('stringStream');
		var cssEditTree = require('cssEditTree');
		var range = require('range');

		// locate parts of complex values.
		// some examples:
		// – 1px solid red: 3 parts
		// – arial, sans-serif: enumeration, 2 parts
		// – url(image.png): function value part
		var value = property.value();
		_.each(property.valueParts(), function(r) {
			// add absolute range
			var clone = r.clone();
			result.push(clone.shift(valueRange.start));

			/** @type StringStream */
			var stream = stringStream.create(r.substring(value));
			if (stream.match(/^[\w\-]+\(/, true)) {
				// we have a function, find values in it.
				// but first add function contents
				stream.start = stream.pos;
				stream.skipToPair('(', ')');
				var fnBody = stream.current();
				result.push(range.create(clone.start + stream.start, fnBody));

				// find parts
				_.each(cssEditTree.findParts(fnBody), function(part) {
					result.push(range.create(clone.start + stream.start + part.start, part.substring(fnBody)));
				});
			}
		});

		// optimize result: remove empty ranges and duplicates
		return _.chain(result)
			.filter(function(item) {
				return !!item.length();
			})
			.uniq(false, function(item) {
				return item.toString();
			})
			.value();
	}

	/**
	 * Tries to find matched CSS property and nearest range for selection
	 * @param {CSSRule} rule
	 * @param {Range} selRange
	 * @param {Boolean} isBackward
	 * @returns {Range}
	 */
	function matchedRangeForCSSProperty(rule, selRange, isBackward) {
		/** @type CSSProperty */
		var property = null;
		var possibleRanges, curRange = null, ix;
		var list = rule.list();
		var searchFn, nearestItemFn;

		if (isBackward) {
			list.reverse();
			searchFn = function(p) {
				return p.range(true).start <= selRange.start;
			};
			nearestItemFn = function(r) {
				return r.start < selRange.start;
			};
		} else {
			searchFn = function(p) {
				return p.range(true).end >= selRange.end;
			};
			nearestItemFn = function(r) {
				return r.end > selRange.start;
			};
		}

		// search for nearest to selection CSS property
		while (property = _.find(list, searchFn)) {
			possibleRanges = makePossibleRangesCSS(property);
			if (isBackward)
				possibleRanges.reverse();

			// check if any possible range is already selected
			curRange = _.find(possibleRanges, function(r) {
				return r.equal(selRange);
			});

			if (!curRange) {
				// no selection, select nearest item
				var matchedRanges = _.filter(possibleRanges, function(r) {
					return r.inside(selRange.end);
				});

				if (matchedRanges.length > 1) {
					curRange = matchedRanges[1];
					break;
				}

				if (curRange = _.find(possibleRanges, nearestItemFn))
					break;
			} else {
				ix = _.indexOf(possibleRanges, curRange);
				if (ix != possibleRanges.length - 1) {
					curRange = possibleRanges[ix + 1];
					break;
				}
			}

			curRange = null;
			selRange.start = selRange.end = isBackward
				? property.range(true).start - 1
				: property.range(true).end + 1;
		}

		return curRange;
	}

	function findNextCSSItem(editor) {
		return findItem(editor, false, require('cssEditTree').extractRule, getRangeForNextItemInCSS);
	}

	function findPrevCSSItem(editor) {
		return findItem(editor, true, require('cssEditTree').extractRule, getRangeForPrevItemInCSS);
	}

	/**
	 * Returns range for item to be selected in CSS after current caret
	 * (selection) position
	 * @param {String} rule CSS rule declaration
	 * @param {Number} offset Rule's position index inside content
	 * @param {Range} selRange Selection range
	 * @return {Range} Returns range if next item was found, <code>null</code> otherwise
	 */
	function getRangeForNextItemInCSS(rule, offset, selRange) {
		var tree = require('cssEditTree').parse(rule, {
			offset: offset
		});

		// check if selector is matched
		var range = tree.nameRange(true);
		if (selRange.end < range.end) {
			return range;
		}

		return matchedRangeForCSSProperty(tree, selRange, false);
	}

	/**
	 * Returns range for item to be selected in CSS before current caret
	 * (selection) position
	 * @param {String} rule CSS rule declaration
	 * @param {Number} offset Rule's position index inside content
	 * @param {Range} selRange Selection range
	 * @return {Range} Returns range if previous item was found, <code>null</code> otherwise
	 */
	function getRangeForPrevItemInCSS(rule, offset, selRange) {
		var tree = require('cssEditTree').parse(rule, {
			offset: offset
		});

		var curRange = matchedRangeForCSSProperty(tree, selRange, true);

		if (!curRange) {
			// no matched property, try to match selector
			var range = tree.nameRange(true);
			if (selRange.start > range.start) {
				return range;
			}
		}

		return curRange;
	}

	// XXX register actions
	var actions = require('actions');
	actions.add('select_next_item', function(editor){
		if (editor.getSyntax() == 'css')
			return findNextCSSItem(editor);
		else
			return findNextHTMLItem(editor);
	});

	actions.add('select_previous_item', function(editor){
		if (editor.getSyntax() == 'css')
			return findPrevCSSItem(editor);
		else
			return findPrevHTMLItem(editor);
	});
});/**
 * HTML pair matching (balancing) actions
 * @constructor
 * @memberOf __matchPairActionDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	/** @type emmet.actions */
	var actions = require('actions');
	var matcher = require('htmlMatcher');
	var lastMatch = null;

	/**
	 * Find and select HTML tag pair
	 * @param {IEmmetEditor} editor Editor instance
	 * @param {String} direction Direction of pair matching: 'in' or 'out'.
	 * Default is 'out'
	 */
	function matchPair(editor, direction) {
		direction = String((direction || 'out').toLowerCase());
		var info = require('editorUtils').outputInfo(editor);

		var range = require('range');
		/** @type Range */
		var sel = range.create(editor.getSelectionRange());
		var content = info.content;

		// validate previous match
		if (lastMatch && !lastMatch.range.equal(sel)) {
			lastMatch = null;
		}

		if (lastMatch && sel.length()) {
			if (direction == 'in') {
				// user has previously selected tag and wants to move inward
				if (lastMatch.type == 'tag' && !lastMatch.close) {
					// unary tag was selected, can't move inward
					return false;
				} else {
					if (lastMatch.range.equal(lastMatch.outerRange)) {
						lastMatch.range = lastMatch.innerRange;
					} else {
						var narrowed = require('utils').narrowToNonSpace(content, lastMatch.innerRange);
						lastMatch = matcher.find(content, narrowed.start + 1);
						if (lastMatch && lastMatch.range.equal(sel) && lastMatch.outerRange.equal(sel)) {
							lastMatch.range = lastMatch.innerRange;
						}
					}
				}
			} else {
				if (
						!lastMatch.innerRange.equal(lastMatch.outerRange)
						&& lastMatch.range.equal(lastMatch.innerRange)
						&& sel.equal(lastMatch.range)) {
					lastMatch.range = lastMatch.outerRange;
				} else {
					lastMatch = matcher.find(content, sel.start);
					if (lastMatch && lastMatch.range.equal(sel) && lastMatch.innerRange.equal(sel)) {
						lastMatch.range = lastMatch.outerRange;
					}
				}
			}
		} else {
			lastMatch = matcher.find(content, sel.start);
		}

		if (lastMatch && !lastMatch.range.equal(sel)) {
			editor.createSelection(lastMatch.range.start, lastMatch.range.end);
			return true;
		}

		lastMatch = null;
		return false;
	}

	actions.add('match_pair', matchPair, {hidden: true});
	actions.add('match_pair_inward', function(editor){
		return matchPair(editor, 'in');
	}, {label: 'HTML/Match Pair Tag (inward)'});

	actions.add('match_pair_outward', function(editor){
		return matchPair(editor, 'out');
	}, {label: 'HTML/Match Pair Tag (outward)'});

	/**
	 * Moves caret to matching opening or closing tag
	 * @param {IEmmetEditor} editor
	 */
	actions.add('matching_pair', function(editor) {
		var content = String(editor.getContent());
		var caretPos = editor.getCaretPos();

		if (content.charAt(caretPos) == '<')
			// looks like caret is outside of tag pair
			caretPos++;

		var tag = matcher.tag(content, caretPos);
		if (tag && tag.close) { // exclude unary tags
			if (tag.open.range.inside(caretPos)) {
				editor.setCaretPos(tag.close.range.start);
			} else {
				editor.setCaretPos(tag.open.range.start);
			}

			return true;
		}

		return false;
	}, {label: 'HTML/Go To Matching Tag Pair'});
});/**
 * Gracefully removes tag under cursor
 *
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	require('actions').add('remove_tag', function(editor) {
		var utils = require('utils');
		var info = require('editorUtils').outputInfo(editor);

		// search for tag
		var tag = require('htmlMatcher').tag(info.content, editor.getCaretPos());
		if (tag) {
			if (!tag.close) {
				// simply remove unary tag
				editor.replaceContent(utils.getCaretPlaceholder(), tag.range.start, tag.range.end);
			} else {
				// remove tag and its newlines
				/** @type Range */
				var tagContentRange = utils.narrowToNonSpace(info.content, tag.innerRange);
				/** @type Range */
				var startLineBounds = utils.findNewlineBounds(info.content, tagContentRange.start);
				var startLinePad = utils.getLinePadding(startLineBounds.substring(info.content));
				var tagContent = tagContentRange.substring(info.content);

				tagContent = utils.unindentString(tagContent, startLinePad);
				editor.replaceContent(utils.getCaretPlaceholder() + utils.escapeText(tagContent), tag.outerRange.start, tag.outerRange.end);
			}

			return true;
		}

		return false;
	}, {label: 'HTML/Remove Tag'});
});
/**
 * Splits or joins tag, e.g. transforms it into a short notation and vice versa:<br>
 * &lt;div&gt;&lt;/div&gt; → &lt;div /&gt; : join<br>
 * &lt;div /&gt; → &lt;div&gt;&lt;/div&gt; : split
 * @param {Function} require
 * @param {Underscore} _
 * @memberOf __splitJoinTagAction
 * @constructor
 */
emmet.exec(function(require, _) {
	/**
	 * @param {IEmmetEditor} editor
	 * @param {Object} profile
	 * @param {Object} tag
	 */
	function joinTag(editor, profile, tag) {
		/** @type emmet.utils */
		var utils = require('utils');

		// empty closing slash is a nonsense for this action
		var slash = profile.selfClosing() || ' /';
		var content = tag.open.range.substring(tag.source).replace(/\s*>$/, slash + '>');

		var caretPos = editor.getCaretPos();

		// update caret position
		if (content.length + tag.outerRange.start < caretPos) {
			caretPos = content.length + tag.outerRange.start;
		}

		content = utils.escapeText(content);
		editor.replaceContent(content, tag.outerRange.start, tag.outerRange.end);
		editor.setCaretPos(caretPos);
		return true;
	}

	function splitTag(editor, profile, tag) {
		/** @type emmet.utils */
		var utils = require('utils');

		var nl = utils.getNewline();
		var pad = require('resources').getVariable('indentation');
		var caretPos = editor.getCaretPos();

		// define tag content depending on profile
		var tagContent = (profile.tag_nl === true) ? nl + pad + nl : '';
		var content = tag.outerContent().replace(/\s*\/>$/, '>');
		caretPos = tag.outerRange.start + content.length;
		content += tagContent + '</' + tag.open.name + '>';

		content = utils.escapeText(content);
		editor.replaceContent(content, tag.outerRange.start, tag.outerRange.end);
		editor.setCaretPos(caretPos);
		return true;
	}

	require('actions').add('split_join_tag', function(editor, profileName) {
		var matcher = require('htmlMatcher');

		var info = require('editorUtils').outputInfo(editor, null, profileName);
		var profile = require('profile').get(info.profile);

		// find tag at current position
		var tag = matcher.tag(info.content, editor.getCaretPos());
		if (tag) {
			return tag.close
				? joinTag(editor, profile, tag)
				: splitTag(editor, profile, tag);
		}

		return false;
	}, {label: 'HTML/Split\\Join Tag Declaration'});
});/**
 * Reflect CSS value: takes rule's value under caret and pastes it for the same
 * rules with vendor prefixes
 * @constructor
 * @memberOf __reflectCSSActionDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('reflectCSSValue', function(require, _) {
	/**
	 * @type HandlerList List of registered handlers
	 */
	var handlers = require('handlerList').create();

	require('actions').add('reflect_css_value', function(editor) {
		if (editor.getSyntax() != 'css') return false;

		return require('actionUtils').compoundUpdate(editor, doCSSReflection(editor));
	}, {label: 'CSS/Reflect Value'});

	function doCSSReflection(editor) {
		/** @type emmet.cssEditTree */
		var cssEditTree = require('cssEditTree');
		var outputInfo = require('editorUtils').outputInfo(editor);
		var caretPos = editor.getCaretPos();

		var cssRule = cssEditTree.parseFromPosition(outputInfo.content, caretPos);
		if (!cssRule) return;

		var property = cssRule.itemFromPosition(caretPos, true);
		// no property under cursor, nothing to reflect
		if (!property) return;

		var oldRule = cssRule.source;
		var offset = cssRule.options.offset;
		var caretDelta = caretPos - offset - property.range().start;

		handlers.exec(false, [property]);

		if (oldRule !== cssRule.source) {
			return {
				data:  cssRule.source,
				start: offset,
				end:   offset + oldRule.length,
				caret: offset + property.range().start + caretDelta
			};
		}
	}

	/**
	 * Returns regexp that should match reflected CSS property names
	 * @param {String} name Current CSS property name
	 * @return {RegExp}
	 */
	function getReflectedCSSName(name) {
		name = require('cssEditTree').baseName(name);
		var vendorPrefix = '^(?:\\-\\w+\\-)?', m;

		if (name == 'opacity' || name == 'filter') {
			return new RegExp(vendorPrefix + '(?:opacity|filter)$');
		} else if (m = name.match(/^border-radius-(top|bottom)(left|right)/)) {
			// Mozilla-style border radius
			return new RegExp(vendorPrefix + '(?:' + name + '|border-' + m[1] + '-' + m[2] + '-radius)$');
		} else if (m = name.match(/^border-(top|bottom)-(left|right)-radius/)) {
			return new RegExp(vendorPrefix + '(?:' + name + '|border-radius-' + m[1] + m[2] + ')$');
		}

		return new RegExp(vendorPrefix + name + '$');
	}

	/**
	 * Reflects value from <code>donor</code> into <code>receiver</code>
	 * @param {CSSProperty} donor Donor CSS property from which value should
	 * be reflected
	 * @param {CSSProperty} receiver Property that should receive reflected
	 * value from donor
	 */
	function reflectValue(donor, receiver) {
		var value = getReflectedValue(donor.name(), donor.value(),
				receiver.name(), receiver.value());

		receiver.value(value);
	}

	/**
	 * Returns value that should be reflected for <code>refName</code> CSS property
	 * from <code>curName</code> property. This function is used for special cases,
	 * when the same result must be achieved with different properties for different
	 * browsers. For example: opаcity:0.5; → filter:alpha(opacity=50);<br><br>
	 *
	 * This function does value conversion between different CSS properties
	 *
	 * @param {String} curName Current CSS property name
	 * @param {String} curValue Current CSS property value
	 * @param {String} refName Receiver CSS property's name
	 * @param {String} refValue Receiver CSS property's value
	 * @return {String} New value for receiver property
	 */
	function getReflectedValue(curName, curValue, refName, refValue) {
		var cssEditTree = require('cssEditTree');
		var utils = require('utils');
		curName = cssEditTree.baseName(curName);
		refName = cssEditTree.baseName(refName);

		if (curName == 'opacity' && refName == 'filter') {
			return refValue.replace(/opacity=[^)]*/i, 'opacity=' + Math.floor(parseFloat(curValue) * 100));
		} else if (curName == 'filter' && refName == 'opacity') {
			var m = curValue.match(/opacity=([^)]*)/i);
			return m ? utils.prettifyNumber(parseInt(m[1]) / 100) : refValue;
		}

		return curValue;
	}

	// XXX add default handler
	handlers.add(function(property) {
		var reName = getReflectedCSSName(property.name());
		_.each(property.parent.list(), function(p) {
			if (reName.test(p.name())) {
				reflectValue(property, p);
			}
		});
	}, {order: -1});

	return {
		/**
		 * Adds custom reflect handler. The passed function will receive matched
		 * CSS property (as <code>CSSEditElement</code> object) and should
		 * return <code>true</code> if it was performed successfully (handled
		 * reflection), <code>false</code> otherwise.
		 * @param {Function} fn
		 * @param {Object} options
		 */
		addHandler: function(fn, options) {
			handlers.add(fn, options);
		},

		/**
		 * Removes registered handler
		 * @returns
		 */
		removeHandler: function(fn) {
			handlers.remove(fn, options);
		}
	};
});/**
 * Evaluates simple math expression under caret
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	require('actions').add('evaluate_math_expression', function(editor) {
		var actionUtils = require('actionUtils');
		var utils = require('utils');

		var content = String(editor.getContent());
		var chars = '.+-*/\\';

		/** @type Range */
		var sel = require('range').create(editor.getSelectionRange());
		if (!sel.length()) {
			sel = actionUtils.findExpressionBounds(editor, function(ch) {
				return utils.isNumeric(ch) || chars.indexOf(ch) != -1;
			});
		}

		if (sel && sel.length()) {
			var expr = sel.substring(content);

			// replace integral division: 11\2 => Math.round(11/2)
			expr = expr.replace(/([\d\.\-]+)\\([\d\.\-]+)/g, 'Math.round($1/$2)');

			try {
				var result = utils.prettifyNumber(new Function('return ' + expr)());
				editor.replaceContent(result, sel.start, sel.end);
				editor.setCaretPos(sel.start + result.length);
				return true;
			} catch (e) {}
		}

		return false;
	}, {label: 'Numbers/Evaluate Math Expression'});
});
/**
 * Increment/decrement number under cursor
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	/**
	 * Extract number from current caret position of the <code>editor</code> and
	 * increment it by <code>step</code>
	 * @param {IEmmetEditor} editor
	 * @param {Number} step Increment step (may be negative)
	 */
	function incrementNumber(editor, step) {
		var utils = require('utils');
		var actionUtils = require('actionUtils');

		var hasSign = false;
		var hasDecimal = false;

		var r = actionUtils.findExpressionBounds(editor, function(ch, pos, content) {
			if (utils.isNumeric(ch))
				return true;
			if (ch == '.') {
				// make sure that next character is numeric too
				if (!utils.isNumeric(content.charAt(pos + 1)))
					return false;

				return hasDecimal ? false : hasDecimal = true;
			}
			if (ch == '-')
				return hasSign ? false : hasSign = true;

			return false;
		});

		if (r && r.length()) {
			var strNum = r.substring(String(editor.getContent()));
			var num = parseFloat(strNum);
			if (!_.isNaN(num)) {
				num = utils.prettifyNumber(num + step);

				// do we have zero-padded number?
				if (/^(\-?)0+[1-9]/.test(strNum)) {
					var minus = '';
					if (RegExp.$1) {
						minus = '-';
						num = num.substring(1);
					}

					var parts = num.split('.');
					parts[0] = utils.zeroPadString(parts[0], intLength(strNum));
					num = minus + parts.join('.');
				}

				editor.replaceContent(num, r.start, r.end);
				editor.createSelection(r.start, r.start + num.length);
				return true;
			}
		}

		return false;
	}

	/**
	 * Returns length of integer part of number
	 * @param {String} num
	 */
	function intLength(num) {
		num = num.replace(/^\-/, '');
		if (~num.indexOf('.')) {
			return num.split('.')[0].length;
		}

		return num.length;
	}

	var actions = require('actions');
	_.each([1, -1, 10, -10, 0.1, -0.1], function(num) {
		var prefix = num > 0 ? 'increment' : 'decrement';

		actions.add(prefix + '_number_by_' + String(Math.abs(num)).replace('.', '').substring(0, 2), function(editor) {
			return incrementNumber(editor, num);
		}, {label: 'Numbers/' + prefix.charAt(0).toUpperCase() + prefix.substring(1) + ' number by ' + Math.abs(num)});
	});
});/**
 * Actions to insert line breaks. Some simple editors (like browser's
 * &lt;textarea&gt;, for example) do not provide such simple things
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	var actions = require('actions');
	/** @type emmet.preferences */
	var prefs = require('preferences');

	// setup default preferences
	prefs.define('css.closeBraceIndentation', '\n',
			'Indentation before closing brace of CSS rule. Some users prefere '
			+ 'indented closing brace of CSS rule for better readability. '
			+ 'This preference’s value will be automatically inserted before '
			+ 'closing brace when user adds newline in newly created CSS rule '
			+ '(e.g. when “Insert formatted linebreak” action will be performed '
			+ 'in CSS file). If you’re such user, you may want to write put a value '
			+ 'like <code>\\n\\t</code> in this preference.');

	/**
	 * Inserts newline character with proper indentation in specific positions only.
	 * @param {IEmmetEditor} editor
	 * @return {Boolean} Returns <code>true</code> if line break was inserted
	 */
	actions.add('insert_formatted_line_break_only', function(editor) {
		var utils = require('utils');
		/** @type emmet.resources */
		var res = require('resources');

		var info = require('editorUtils').outputInfo(editor);
		var caretPos = editor.getCaretPos();
		var nl = utils.getNewline();

		if (_.include(['html', 'xml', 'xsl'], info.syntax)) {
			var pad = res.getVariable('indentation');
			// let's see if we're breaking newly created tag
			var tag = require('htmlMatcher').tag(info.content, caretPos);
			if (tag && !tag.innerRange.length()) {
				editor.replaceContent(nl + pad + utils.getCaretPlaceholder() + nl, caretPos);
				return true;
			}
		} else if (info.syntax == 'css') {
			/** @type String */
			var content = info.content;
			if (caretPos && content.charAt(caretPos - 1) == '{') {
				var append = prefs.get('css.closeBraceIndentation');
				var pad = res.getVariable('indentation');

				var hasCloseBrace = content.charAt(caretPos) == '}';
				if (!hasCloseBrace) {
					// do we really need special formatting here?
					// check if this is really a newly created rule,
					// look ahead for a closing brace
					for (var i = caretPos, il = content.length, ch; i < il; i++) {
						ch = content.charAt(i);
						if (ch == '{') {
							// ok, this is a new rule without closing brace
							break;
						}

						if (ch == '}') {
							// not a new rule, just add indentation
							append = '';
							hasCloseBrace = true;
							break;
						}
					}
				}

				if (!hasCloseBrace) {
					append += '}';
				}

				// defining rule set
				var insValue = nl + pad + utils.getCaretPlaceholder() + append;
				editor.replaceContent(insValue, caretPos);
				return true;
			}
		}

		return false;
	}, {hidden: true});

	/**
	 * Inserts newline character with proper indentation. This action is used in
	 * editors that doesn't have indentation control (like textarea element) to
	 * provide proper indentation
	 * @param {IEmmetEditor} editor Editor instance
	 */
	actions.add('insert_formatted_line_break', function(editor) {
		if (!actions.run('insert_formatted_line_break_only', editor)) {
			var utils = require('utils');

			var curPadding = require('editorUtils').getCurrentLinePadding(editor);
			var content = String(editor.getContent());
			var caretPos = editor.getCaretPos();
			var len = content.length;
			var nl = utils.getNewline();

			// check out next line padding
			var lineRange = editor.getCurrentLineRange();
			var nextPadding = '';

			for (var i = lineRange.end + 1, ch; i < len; i++) {
				ch = content.charAt(i);
				if (ch == ' ' || ch == '\t')
					nextPadding += ch;
				else
					break;
			}

			if (nextPadding.length > curPadding.length)
				editor.replaceContent(nl + nextPadding, caretPos, caretPos, true);
			else
				editor.replaceContent(nl, caretPos);
		}

		return true;
	}, {hidden: true});
});/**
 * Merges selected lines or lines between XHTML tag pairs
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	require('actions').add('merge_lines', function(editor) {
		var matcher = require('htmlMatcher');
		var utils = require('utils');
		var editorUtils = require('editorUtils');
		var info = editorUtils.outputInfo(editor);

		/** @type Range */
		var selection = require('range').create(editor.getSelectionRange());
		if (!selection.length()) {
			// find matching tag
			var pair = matcher.find(info.content, editor.getCaretPos());
			if (pair) {
				selection = pair.outerRange;
			}
		}

		if (selection.length()) {
			// got range, merge lines
			var text =  selection.substring(info.content);
			var lines = utils.splitByLines(text);

			for (var i = 1; i < lines.length; i++) {
				lines[i] = lines[i].replace(/^\s+/, '');
			}

			text = lines.join('').replace(/\s{2,}/, ' ');
			var textLen = text.length;
			text = utils.escapeText(text);
			editor.replaceContent(text, selection.start, selection.end);
			editor.createSelection(selection.start, selection.start + textLen);

			return true;
		}

		return false;
	});
});/**
 * Encodes/decodes image under cursor to/from base64
 * @param {IEmmetEditor} editor
 * @since 0.65
 *
 * @memberOf __base64ActionDefine
 * @constructor
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	require('actions').add('encode_decode_data_url', function(editor) {
		var data = String(editor.getSelection());
		var caretPos = editor.getCaretPos();

		if (!data) {
			// no selection, try to find image bounds from current caret position
			var text = String(editor.getContent()),  m;
			while (caretPos-- >= 0) {
				if (startsWith('src=', text, caretPos)) { // found <img src="">
					if (m = text.substr(caretPos).match(/^(src=(["'])?)([^'"<>\s]+)\1?/)) {
						data = m[3];
						caretPos += m[1].length;
					}
					break;
				} else if (startsWith('url(', text, caretPos)) { // found CSS url() pattern
					if (m = text.substr(caretPos).match(/^(url\((['"])?)([^'"\)\s]+)\1?/)) {
						data = m[3];
						caretPos += m[1].length;
					}
					break;
				}
			}
		}

		if (data) {
			if (startsWith('data:', data))
				return decodeFromBase64(editor, data, caretPos);
			else
				return encodeToBase64(editor, data, caretPos);
		}

		return false;
	}, {label: 'Encode\\Decode data:URL image'});

	/**
	 * Test if <code>text</code> starts with <code>token</code> at <code>pos</code>
	 * position. If <code>pos</code> is omitted, search from beginning of text
	 * @param {String} token Token to test
	 * @param {String} text Where to search
	 * @param {Number} pos Position where to start search
	 * @return {Boolean}
	 * @since 0.65
	 */
	function startsWith(token, text, pos) {
		pos = pos || 0;
		return text.charAt(pos) == token.charAt(0) && text.substr(pos, token.length) == token;
	}

	/**
	 * Encodes image to base64
	 *
	 * @param {IEmmetEditor} editor
	 * @param {String} imgPath Path to image
	 * @param {Number} pos Caret position where image is located in the editor
	 * @return {Boolean}
	 */
	function encodeToBase64(editor, imgPath, pos) {
		var file = require('file');
		var actionUtils = require('actionUtils');

		var editorFile = editor.getFilePath();
		var defaultMimeType = 'application/octet-stream';

		if (editorFile === null) {
			throw "You should save your file before using this action";
		}

		// locate real image path
		var realImgPath = file.locateFile(editorFile, imgPath);
		if (realImgPath === null) {
			throw "Can't find " + imgPath + ' file';
		}

		file.read(realImgPath, function(err, content) {
			if (err) {
				throw 'Unable to read ' + realImgPath + ': ' + err;
			}

			var b64 = require('base64').encode(String(content));
			if (!b64) {
				throw "Can't encode file content to base64";
			}

			b64 = 'data:' + (actionUtils.mimeTypes[String(file.getExt(realImgPath))] || defaultMimeType) +
				';base64,' + b64;

			editor.replaceContent('$0' + b64, pos, pos + imgPath.length);
		});


		return true;
	}

	/**
	 * Decodes base64 string back to file.
	 * @param {IEmmetEditor} editor
	 * @param {String} data Base64-encoded file content
	 * @param {Number} pos Caret position where image is located in the editor
	 */
	function decodeFromBase64(editor, data, pos) {
		// ask user to enter path to file
		var filePath = String(editor.prompt('Enter path to file (absolute or relative)'));
		if (!filePath)
			return false;

		var file = require('file');
		var absPath = file.createPath(editor.getFilePath(), filePath);
		if (!absPath) {
			throw "Can't save file";
		}

		file.save(absPath, require('base64').decode( data.replace(/^data\:.+?;.+?,/, '') ));
		editor.replaceContent('$0' + filePath, pos, pos + data.length);
		return true;
	}
});
/**
 * Automatically updates image size attributes in HTML's &lt;img&gt; element or
 * CSS rule
 * @param {Function} require
 * @param {Underscore} _
 * @constructor
 * @memberOf __updateImageSizeAction
 */
emmet.exec(function(require, _) {
	/**
	 * Updates image size of &lt;img src=""&gt; tag
	 * @param {IEmmetEditor} editor
	 */
	function updateImageSizeHTML(editor) {
		var offset = editor.getCaretPos();

		// find tag from current caret position
		var info = require('editorUtils').outputInfo(editor);
		var xmlElem = require('xmlEditTree').parseFromPosition(info.content, offset, true);
		if (xmlElem && (xmlElem.name() || '').toLowerCase() == 'img') {
			getImageSizeForSource(editor, xmlElem.value('src'), function(size) {
				if (size) {
					var compoundData = xmlElem.range(true);
					xmlElem.value('width', size.width);
					xmlElem.value('height', size.height, xmlElem.indexOf('width') + 1);

					require('actionUtils').compoundUpdate(editor, _.extend(compoundData, {
						data: xmlElem.toString(),
						caret: offset
					}));
				}
			});
		}
	}

	/**
	 * Updates image size of CSS property
	 * @param {IEmmetEditor} editor
	 */
	function updateImageSizeCSS(editor) {
		var offset = editor.getCaretPos();

		// find tag from current caret position
		var info = require('editorUtils').outputInfo(editor);
		var cssRule = require('cssEditTree').parseFromPosition(info.content, offset, true);
		if (cssRule) {
			// check if there is property with image under caret
			var prop = cssRule.itemFromPosition(offset, true), m;
			if (prop && (m = /url\((["']?)(.+?)\1\)/i.exec(prop.value() || ''))) {
				getImageSizeForSource(editor, m[2], function(size) {
					if (size) {
						var compoundData = cssRule.range(true);
						cssRule.value('width', size.width + 'px');
						cssRule.value('height', size.height + 'px', cssRule.indexOf('width') + 1);

						require('actionUtils').compoundUpdate(editor, _.extend(compoundData, {
							data: cssRule.toString(),
							caret: offset
						}));
					}
				});
			}
		}
	}

	/**
	 * Returns image dimensions for source
	 * @param {IEmmetEditor} editor
	 * @param {String} src Image source (path or data:url)
	 */
	function getImageSizeForSource(editor, src, callback) {
		var fileContent;
		var au = require('actionUtils');
		if (src) {
			// check if it is data:url
			if (/^data:/.test(src)) {
				fileContent = require('base64').decode( src.replace(/^data\:.+?;.+?,/, '') );
				return callback(au.getImageSize(fileContent));
			}

			var file = require('file');
			var absPath = file.locateFile(editor.getFilePath(), src);
			if (absPath === null) {
				throw "Can't find " + src + ' file';
			}

			file.read(absPath, function(err, content) {
				if (err) {
					throw 'Unable to read ' + absPath + ': ' + err;
				}

				content = String(content);
				callback(au.getImageSize(content));
			});
		}
	}

	require('actions').add('update_image_size', function(editor) {
		// this action will definitely won’t work in SASS dialect,
		// but may work in SCSS or LESS
		if (_.include(['css', 'less', 'scss'], String(editor.getSyntax()))) {
			updateImageSizeCSS(editor);
		} else {
			updateImageSizeHTML(editor);
		}

		return true;
	});
});/**
 * Resolver for fast CSS typing. Handles abbreviations with the following
 * notation:<br>
 *
 * <code>(-vendor prefix)?property(value)*(!)?</code>
 *
 * <br><br>
 * <b>Abbreviation handling</b><br>
 *
 * By default, Emmet searches for matching snippet definition for provided abbreviation.
 * If snippet wasn't found, Emmet automatically generates element with
 * abbreviation's name. For example, <code>foo</code> abbreviation will generate
 * <code>&lt;foo&gt;&lt;/foo&gt;</code> output.
 * <br><br>
 * This module will capture all expanded properties and upgrade them with values,
 * vendor prefixes and !important declarations. All unmatched abbreviations will
 * be automatically transformed into <code>property-name: ${1}</code> snippets.
 *
 * <b>Vendor prefixes<b><br>
 *
 * If CSS-property is preceded with dash, resolver should output property with
 * all <i>known</i> vendor prefixes. For example, if <code>brad</code>
 * abbreviation generates <code>border-radius: ${value};</code> snippet,
 * the <code>-brad</code> abbreviation should generate:
 * <pre><code>
 * -webkit-border-radius: ${value};
 * -moz-border-radius: ${value};
 * border-radius: ${value};
 * </code></pre>
 * Note that <i>o</i> and <i>ms</i> prefixes are omitted since Opera and IE
 * supports unprefixed property.<br><br>
 *
 * Users can also provide an explicit list of one-character prefixes for any
 * CSS property. For example, <code>-wm-float</code> will produce
 *
 * <pre><code>
 * -webkit-float: ${1};
 * -moz-float: ${1};
 * float: ${1};
 * </code></pre>
 *
 * Although this example looks pointless, users can use this feature to write
 * cutting-edge properties implemented by browser vendors recently.
 *
 * @constructor
 * @memberOf __cssResolverDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('cssResolver', function(require, _) {
	/** Back-reference to module */
	var module = null;

	var prefixObj = {
		/** Real vendor prefix name */
		prefix: 'emmet',

		/**
		 * Indicates this prefix is obsolete and should't be used when user
		 * wants to generate all-prefixed properties
		 */
		obsolete: false,

		/**
		 * Returns prefixed CSS property name
		 * @param {String} name Unprefixed CSS property
		 */
		transformName: function(name) {
			return '-' + this.prefix + '-' + name;
		},

		/**
		 * List of unprefixed CSS properties that supported by
		 * current prefix. This list is used to generate all-prefixed property
		 * @returns {Array}
		 */
		properties: function() {
			return getProperties('css.' + this.prefix + 'Properties') || [];
		},

		/**
		 * Check if given property is supported by current prefix
		 * @param name
		 */
		supports: function(name) {
			return _.include(this.properties(), name);
		}
	};


	/**
	 * List of registered one-character prefixes. Key is a one-character prefix,
	 * value is an <code>prefixObj</code> object
	 */
	var vendorPrefixes = {};

	var defaultValue = '${1};';

	// XXX module preferences
	var prefs = require('preferences');
	prefs.define('css.valueSeparator', ': ',
			'Defines a symbol that should be placed between CSS property and '
			+ 'value when expanding CSS abbreviations.');
	prefs.define('css.propertyEnd', ';',
			'Defines a symbol that should be placed at the end of CSS property  '
			+ 'when expanding CSS abbreviations.');

	prefs.define('stylus.valueSeparator', ' ',
			'Defines a symbol that should be placed between CSS property and '
			+ 'value when expanding CSS abbreviations in Stylus dialect.');
	prefs.define('stylus.propertyEnd', '',
			'Defines a symbol that should be placed at the end of CSS property  '
			+ 'when expanding CSS abbreviations in Stylus dialect.');

	prefs.define('sass.propertyEnd', '',
			'Defines a symbol that should be placed at the end of CSS property  '
			+ 'when expanding CSS abbreviations in SASS dialect.');

	prefs.define('css.autoInsertVendorPrefixes', true,
			'Automatically generate vendor-prefixed copies of expanded CSS '
			+ 'property. By default, Emmet will generate vendor-prefixed '
			+ 'properties only when you put dash before abbreviation '
			+ '(e.g. <code>-bxsh</code>). With this option enabled, you don’t '
			+ 'need dashes before abbreviations: Emmet will produce '
			+ 'vendor-prefixed properties for you.');

	var descTemplate = _.template('A comma-separated list of CSS properties that may have '
		+ '<code><%= vendor %></code> vendor prefix. This list is used to generate '
		+ 'a list of prefixed properties when expanding <code>-property</code> '
		+ 'abbreviations. Empty list means that all possible CSS values may '
		+ 'have <code><%= vendor %></code> prefix.');

	var descAddonTemplate = _.template('A comma-separated list of <em>additional</em> CSS properties '
			+ 'for <code>css.<%= vendor %>Preperties</code> preference. '
			+ 'You should use this list if you want to add or remove a few CSS '
			+ 'properties to original set. To add a new property, simply write its name, '
			+ 'to remove it, precede property with hyphen.<br>'
			+ 'For example, to add <em>foo</em> property and remove <em>border-radius</em> one, '
			+ 'the preference value will look like this: <code>foo, -border-radius</code>.');

	// properties list is created from cssFeatures.html file
	var props = {
		'webkit': 'animation, animation-delay, animation-direction, animation-duration, animation-fill-mode, animation-iteration-count, animation-name, animation-play-state, animation-timing-function, appearance, backface-visibility, background-clip, background-composite, background-origin, background-size, border-fit, border-horizontal-spacing, border-image, border-vertical-spacing, box-align, box-direction, box-flex, box-flex-group, box-lines, box-ordinal-group, box-orient, box-pack, box-reflect, box-shadow, color-correction, column-break-after, column-break-before, column-break-inside, column-count, column-gap, column-rule-color, column-rule-style, column-rule-width, column-span, column-width, dashboard-region, font-smoothing, highlight, hyphenate-character, hyphenate-limit-after, hyphenate-limit-before, hyphens, line-box-contain, line-break, line-clamp, locale, margin-before-collapse, margin-after-collapse, marquee-direction, marquee-increment, marquee-repetition, marquee-style, mask-attachment, mask-box-image, mask-box-image-outset, mask-box-image-repeat, mask-box-image-slice, mask-box-image-source, mask-box-image-width, mask-clip, mask-composite, mask-image, mask-origin, mask-position, mask-repeat, mask-size, nbsp-mode, perspective, perspective-origin, rtl-ordering, text-combine, text-decorations-in-effect, text-emphasis-color, text-emphasis-position, text-emphasis-style, text-fill-color, text-orientation, text-security, text-stroke-color, text-stroke-width, transform, transition, transform-origin, transform-style, transition-delay, transition-duration, transition-property, transition-timing-function, user-drag, user-modify, user-select, writing-mode, svg-shadow, box-sizing, border-radius',
		'moz': 'animation-delay, animation-direction, animation-duration, animation-fill-mode, animation-iteration-count, animation-name, animation-play-state, animation-timing-function, appearance, backface-visibility, background-inline-policy, binding, border-bottom-colors, border-image, border-left-colors, border-right-colors, border-top-colors, box-align, box-direction, box-flex, box-ordinal-group, box-orient, box-pack, box-shadow, box-sizing, column-count, column-gap, column-rule-color, column-rule-style, column-rule-width, column-width, float-edge, font-feature-settings, font-language-override, force-broken-image-icon, hyphens, image-region, orient, outline-radius-bottomleft, outline-radius-bottomright, outline-radius-topleft, outline-radius-topright, perspective, perspective-origin, stack-sizing, tab-size, text-blink, text-decoration-color, text-decoration-line, text-decoration-style, text-size-adjust, transform, transform-origin, transform-style, transition, transition-delay, transition-duration, transition-property, transition-timing-function, user-focus, user-input, user-modify, user-select, window-shadow, background-clip, border-radius',
		'ms': 'accelerator, backface-visibility, background-position-x, background-position-y, behavior, block-progression, box-align, box-direction, box-flex, box-line-progression, box-lines, box-ordinal-group, box-orient, box-pack, content-zoom-boundary, content-zoom-boundary-max, content-zoom-boundary-min, content-zoom-chaining, content-zoom-snap, content-zoom-snap-points, content-zoom-snap-type, content-zooming, filter, flow-from, flow-into, font-feature-settings, grid-column, grid-column-align, grid-column-span, grid-columns, grid-layer, grid-row, grid-row-align, grid-row-span, grid-rows, high-contrast-adjust, hyphenate-limit-chars, hyphenate-limit-lines, hyphenate-limit-zone, hyphens, ime-mode, interpolation-mode, layout-flow, layout-grid, layout-grid-char, layout-grid-line, layout-grid-mode, layout-grid-type, line-break, overflow-style, perspective, perspective-origin, perspective-origin-x, perspective-origin-y, scroll-boundary, scroll-boundary-bottom, scroll-boundary-left, scroll-boundary-right, scroll-boundary-top, scroll-chaining, scroll-rails, scroll-snap-points-x, scroll-snap-points-y, scroll-snap-type, scroll-snap-x, scroll-snap-y, scrollbar-arrow-color, scrollbar-base-color, scrollbar-darkshadow-color, scrollbar-face-color, scrollbar-highlight-color, scrollbar-shadow-color, scrollbar-track-color, text-align-last, text-autospace, text-justify, text-kashida-space, text-overflow, text-size-adjust, text-underline-position, touch-action, transform, transform-origin, transform-origin-x, transform-origin-y, transform-origin-z, transform-style, transition, transition-delay, transition-duration, transition-property, transition-timing-function, user-select, word-break, word-wrap, wrap-flow, wrap-margin, wrap-through, writing-mode',
		'o': 'dashboard-region, animation, animation-delay, animation-direction, animation-duration, animation-fill-mode, animation-iteration-count, animation-name, animation-play-state, animation-timing-function, border-image, link, link-source, object-fit, object-position, tab-size, table-baseline, transform, transform-origin, transition, transition-delay, transition-duration, transition-property, transition-timing-function, accesskey, input-format, input-required, marquee-dir, marquee-loop, marquee-speed, marquee-style'
	};

	_.each(props, function(v, k) {
		prefs.define('css.' + k + 'Properties', v, descTemplate({vendor: k}));
		prefs.define('css.' + k + 'PropertiesAddon', '', descAddonTemplate({vendor: k}));
	});

	prefs.define('css.unitlessProperties', 'z-index, line-height, opacity, font-weight, zoom',
			'The list of properties whose values ​​must not contain units.');

	prefs.define('css.intUnit', 'px', 'Default unit for integer values');
	prefs.define('css.floatUnit', 'em', 'Default unit for float values');

	prefs.define('css.keywords', 'auto, inherit',
			'A comma-separated list of valid keywords that can be used in CSS abbreviations.');

	prefs.define('css.keywordAliases', 'a:auto, i:inherit, s:solid, da:dashed, do:dotted, t:transparent',
			'A comma-separated list of keyword aliases, used in CSS abbreviation. '
			+ 'Each alias should be defined as <code>alias:keyword_name</code>.');

	prefs.define('css.unitAliases', 'e:em, p:%, x:ex, r:rem',
			'A comma-separated list of unit aliases, used in CSS abbreviation. '
			+ 'Each alias should be defined as <code>alias:unit_value</code>.');

	prefs.define('css.color.short', true,
			'Should color values like <code>#ffffff</code> be shortened to '
			+ '<code>#fff</code> after abbreviation with color was expanded.');

	prefs.define('css.color.case', 'keep',
			'Letter case of color values generated by abbreviations with color '
			+ '(like <code>c#0</code>). Possible values are <code>upper</code>, '
			+ '<code>lower</code> and <code>keep</code>.');

	prefs.define('css.fuzzySearch', true,
			'Enable fuzzy search among CSS snippet names. When enabled, every '
			+ '<em>unknown</em> snippet will be scored against available snippet '
			+ 'names (not values or CSS properties!). The match with best score '
			+ 'will be used to resolve snippet value. For example, with this '
			+ 'preference enabled, the following abbreviations are equal: '
			+ '<code>ov:h</code> == <code>ov-h</code> == <code>o-h</code> == '
			+ '<code>oh</code>');

	prefs.define('css.fuzzySearchMinScore', 0.3,
			'The minium score (from 0 to 1) that fuzzy-matched abbreviation should '
			+ 'achive. Lower values may produce many false-positive matches, '
			+ 'higher values may reduce possible matches.');

	prefs.define('css.alignVendor', false,
			'If set to <code>true</code>, all generated vendor-prefixed properties '
			+ 'will be aligned by real property name.');


	function isNumeric(ch) {
		var code = ch && ch.charCodeAt(0);
		return (ch && ch == '.' || (code > 47 && code < 58));
	}

	/**
	 * Check if provided snippet contains only one CSS property and value.
	 * @param {String} snippet
	 * @returns {Boolean}
	 */
	function isSingleProperty(snippet) {
		var utils = require('utils');
		snippet = utils.trim(snippet);

		// check if it doesn't contain a comment and a newline
		if (~snippet.indexOf('/*') || /[\n\r]/.test(snippet)) {
			return false;
		}

		// check if it's a valid snippet definition
		if (!/^[a-z0-9\-]+\s*\:/i.test(snippet)) {
			return false;
		}

		snippet = require('tabStops').processText(snippet, {
			replaceCarets: true,
			tabstop: function() {
				return 'value';
			}
		});

		return snippet.split(':').length == 2;
	}

	/**
	 * Normalizes abbreviated value to final CSS one
	 * @param {String} value
	 * @returns {String}
	 */
	function normalizeValue(value) {
		if (value.charAt(0) == '-' && !/^\-[\.\d]/.test(value)) {
			value = value.replace(/^\-+/, '');
		}

		if (value.charAt(0) == '#') {
			return normalizeHexColor(value);
		}

		return getKeyword(value);
	}

	function normalizeHexColor(value) {
		var hex = value.replace(/^#+/, '') || '0';
		if (hex.toLowerCase() == 't') {
			return 'transparent';
		}

		var repeat = require('utils').repeatString;
		var color = null;
		switch (hex.length) {
			case 1:
				color = repeat(hex, 6);
				break;
			case 2:
				color = repeat(hex, 3);
				break;
			case 3:
				color = hex.charAt(0) + hex.charAt(0) + hex.charAt(1) + hex.charAt(1) + hex.charAt(2) + hex.charAt(2);
				break;
			case 4:
				color = hex + hex.substr(0, 2);
				break;
			case 5:
				color = hex + hex.charAt(0);
				break;
			default:
				color = hex.substr(0, 6);
		}

		// color must be shortened?
		if (prefs.get('css.color.short')) {
			var p = color.split('');
			if (p[0] == p[1] && p[2] == p[3] && p[4] == p[5]) {
				color = p[0] + p[2] + p[4];
			}
		}

		// should transform case?
		switch (prefs.get('css.color.case')) {
			case 'upper':
				color = color.toUpperCase();
				break;
			case 'lower':
				color = color.toLowerCase();
				break;
		}

		return '#' + color;
	}

	function getKeyword(name) {
		var aliases = prefs.getDict('css.keywordAliases');
		return name in aliases ? aliases[name] : name;
	}

	function getUnit(name) {
		var aliases = prefs.getDict('css.unitAliases');
		return name in aliases ? aliases[name] : name;
	}

	function isValidKeyword(keyword) {
		return _.include(prefs.getArray('css.keywords'), getKeyword(keyword));
	}

	/**
	 * Check if passed CSS property support specified vendor prefix
	 * @param {String} property
	 * @param {String} prefix
	 */
	function hasPrefix(property, prefix) {
		var info = vendorPrefixes[prefix];

		if (!info)
			info = _.find(vendorPrefixes, function(data) {
				return data.prefix == prefix;
			});

		return info && info.supports(property);
	}

	/**
	 * Search for a list of supported prefixes for CSS property. This list
	 * is used to generate all-prefixed snippet
	 * @param {String} property CSS property name
	 * @returns {Array}
	 */
	function findPrefixes(property, noAutofill) {
		var result = [];
		_.each(vendorPrefixes, function(obj, prefix) {
			if (hasPrefix(property, prefix)) {
				result.push(prefix);
			}
		});

		if (!result.length && !noAutofill) {
			// add all non-obsolete prefixes
			_.each(vendorPrefixes, function(obj, prefix) {
				if (!obj.obsolete)
					result.push(prefix);
			});
		}

		return result;
	}

	function addPrefix(name, obj) {
		if (_.isString(obj))
			obj = {prefix: obj};

		vendorPrefixes[name] = _.extend({}, prefixObj, obj);
	}

	function getSyntaxPreference(name, syntax) {
		if (syntax) {
			var val = prefs.get(syntax + '.' + name);
			if (!_.isUndefined(val))
				return val;
		}

		return prefs.get('css.' + name);
	}

	/**
	 * Format CSS property according to current syntax dialect
	 * @param {String} property
	 * @param {String} syntax
	 * @returns {String}
	 */
	function formatProperty(property, syntax) {
		var ix = property.indexOf(':');
		property = property.substring(0, ix).replace(/\s+$/, '')
			+ getSyntaxPreference('valueSeparator', syntax)
			+ require('utils').trim(property.substring(ix + 1));

		return property.replace(/\s*;\s*$/, getSyntaxPreference('propertyEnd', syntax));
	}

	/**
	 * Transforms snippet value if required. For example, this transformation
	 * may add <i>!important</i> declaration to CSS property
	 * @param {String} snippet
	 * @param {Boolean} isImportant
	 * @returns {String}
	 */
	function transformSnippet(snippet, isImportant, syntax) {
		if (!_.isString(snippet))
			snippet = snippet.data;

		if (!isSingleProperty(snippet))
			return snippet;

		if (isImportant) {
			if (~snippet.indexOf(';')) {
				snippet = snippet.split(';').join(' !important;');
			} else {
				snippet += ' !important';
			}
		}

		return formatProperty(snippet, syntax);
	}

	/**
	 * Helper function that parses comma-separated list of elements into array
	 * @param {String} list
	 * @returns {Array}
	 */
	function parseList(list) {
		var result = _.map((list || '').split(','), require('utils').trim);
		return result.length ? result : null;
	}

	function getProperties(key) {
		var list = prefs.getArray(key);
		_.each(prefs.getArray(key + 'Addon'), function(prop) {
			if (prop.charAt(0) == '-') {
				list = _.without(list, prop.substr(1));
			} else {
				if (prop.charAt(0) == '+')
					prop = prop.substr(1);

				list.push(prop);
			}
		});

		return list;
	}


	// TODO refactor, this looks awkward now
	addPrefix('w', {
		prefix: 'webkit'
	});
	addPrefix('m', {
		prefix: 'moz'
	});
	addPrefix('s', {
		prefix: 'ms'
	});
	addPrefix('o', {
		prefix: 'o'
	});

	// I think nobody uses it
//	addPrefix('k', {
//		prefix: 'khtml',
//		obsolete: true
//	});

	var cssSyntaxes = ['css', 'less', 'sass', 'scss', 'stylus'];

	/**
	 * XXX register resolver
	 * @param {TreeNode} node
	 * @param {String} syntax
	 */
	require('resources').addResolver(function(node, syntax) {
		if (_.include(cssSyntaxes, syntax) && node.isElement()) {
			return module.expandToSnippet(node.abbreviation, syntax);
		}

		return null;
	});

	var ea = require('expandAbbreviation');
	/**
	 * For CSS-like syntaxes, we need to handle a special use case. Some editors
	 * (like Sublime Text 2) may insert semicolons automatically when user types
	 * abbreviation. After expansion, user receives a double semicolon. This
	 * handler automatically removes semicolon from generated content in such cases.
	 * @param {IEmmetEditor} editor
	 * @param {String} syntax
	 * @param {String} profile
	 */
	ea.addHandler(function(editor, syntax, profile) {
		if (!_.include(cssSyntaxes, syntax)) {
			return false;
		}

		var caretPos = editor.getSelectionRange().end;
		var abbr = ea.findAbbreviation(editor);

		if (abbr) {
			var content = emmet.expandAbbreviation(abbr, syntax, profile);
			if (content) {
				var replaceFrom = caretPos - abbr.length;
				var replaceTo = caretPos;
				if (editor.getContent().charAt(caretPos) == ';' && content.charAt(content.length - 1) == ';') {
					replaceTo++;
				}

				editor.replaceContent(content, replaceFrom, replaceTo);
				return true;
			}
		}

		return false;
	});

	return module = {
		/**
		 * Adds vendor prefix
		 * @param {String} name One-character prefix name
		 * @param {Object} obj Object describing vendor prefix
		 * @memberOf cssResolver
		 */
		addPrefix: addPrefix,

		/**
		 * Check if passed CSS property supports specified vendor prefix
		 * @param {String} property
		 * @param {String} prefix
		 */
		supportsPrefix: hasPrefix,

		/**
		 * Returns prefixed version of passed CSS property, only if this
		 * property supports such prefix
		 * @param {String} property
		 * @param {String} prefix
		 * @returns
		 */
		prefixed: function(property, prefix) {
			return hasPrefix(property, prefix)
				? '-' + prefix + '-' + property
				: property;
		},

		/**
		 * Returns list of all registered vendor prefixes
		 * @returns {Array}
		 */
		listPrefixes: function() {
			return _.map(vendorPrefixes, function(obj) {
				return obj.prefix;
			});
		},

		/**
		 * Returns object describing vendor prefix
		 * @param {String} name
		 * @returns {Object}
		 */
		getPrefix: function(name) {
			return vendorPrefixes[name];
		},

		/**
		 * Removes prefix object
		 * @param {String} name
		 */
		removePrefix: function(name) {
			if (name in vendorPrefixes)
				delete vendorPrefixes[name];
		},

		/**
		 * Extract vendor prefixes from abbreviation
		 * @param {String} abbr
		 * @returns {Object} Object containing array of prefixes and clean
		 * abbreviation name
		 */
		extractPrefixes: function(abbr) {
			if (abbr.charAt(0) != '-') {
				return {
					property: abbr,
					prefixes: null
				};
			}

			// abbreviation may either contain sequence of one-character prefixes
			// or just dash, meaning that user wants to produce all possible
			// prefixed properties
			var i = 1, il = abbr.length, ch;
			var prefixes = [];

			while (i < il) {
				ch = abbr.charAt(i);
				if (ch == '-') {
					// end-sequence character found, stop searching
					i++;
					break;
				}

				if (ch in vendorPrefixes) {
					prefixes.push(ch);
				} else {
					// no prefix found, meaning user want to produce all
					// vendor-prefixed properties
					prefixes.length = 0;
					i = 1;
					break;
				}

				i++;
			}

			// reached end of abbreviation and no property name left
			if (i == il -1) {
				i = 1;
				prefixes.length = 1;
			}

			return {
				property: abbr.substring(i),
				prefixes: prefixes.length ? prefixes : 'all'
			};
		},

		/**
		 * Search for value substring in abbreviation
		 * @param {String} abbr
		 * @returns {String} Value substring
		 */
		findValuesInAbbreviation: function(abbr, syntax) {
			syntax = syntax || 'css';

			var i = 0, il = abbr.length, value = '', ch;
			while (i < il) {
				ch = abbr.charAt(i);
				if (isNumeric(ch) || ch == '#' || (ch == '-' && isNumeric(abbr.charAt(i + 1)))) {
					value = abbr.substring(i);
					break;
				}

				i++;
			}

			// try to find keywords in abbreviation
			var property = abbr.substring(0, abbr.length - value.length);
			var res = require('resources');
			var keywords = [];
			// try to extract some commonly-used properties
			while (~property.indexOf('-') && !res.findSnippet(syntax, property)) {
				var parts = property.split('-');
				var lastPart = parts.pop();
				if (!isValidKeyword(lastPart)) {
					break;
				}

				keywords.unshift(lastPart);
				property = parts.join('-');
			}

			return keywords.join('-') + value;
		},

		parseValues: function(str) {
			/** @type StringStream */
			var stream = require('stringStream').create(str);
			var values = [];
			var ch = null;

			while (ch = stream.next()) {
				if (ch == '#') {
					stream.match(/^t|[0-9a-f]+/i, true);
					values.push(stream.current());
				} else if (ch == '-') {
					if (isValidKeyword(_.last(values)) ||
							( stream.start && isNumeric(str.charAt(stream.start - 1)) )
						) {
						stream.start = stream.pos;
					}

					stream.match(/^\-?[0-9]*(\.[0-9]+)?[a-z%\.]*/, true);
					values.push(stream.current());
				} else {
					stream.match(/^[0-9]*(\.[0-9]*)?[a-z%]*/, true);
					values.push(stream.current());
				}

				stream.start = stream.pos;
			}

			return _.map(_.compact(values), normalizeValue);
		},

		/**
		 * Extracts values from abbreviation
		 * @param {String} abbr
		 * @returns {Object} Object containing array of values and clean
		 * abbreviation name
		 */
		extractValues: function(abbr) {
			// search for value start
			var abbrValues = this.findValuesInAbbreviation(abbr);
			if (!abbrValues) {
				return {
					property: abbr,
					values: null
				};
			}

			return {
				property: abbr.substring(0, abbr.length - abbrValues.length).replace(/-$/, ''),
				values: this.parseValues(abbrValues)
			};
		},

		/**
		 * Normalizes value, defined in abbreviation.
		 * @param {String} value
		 * @param {String} property
		 * @returns {String}
		 */
		normalizeValue: function(value, property) {
			property = (property || '').toLowerCase();
			var unitlessProps = prefs.getArray('css.unitlessProperties');
			return value.replace(/^(\-?[0-9\.]+)([a-z]*)$/, function(str, val, unit) {
				if (!unit && (val == '0' || _.include(unitlessProps, property)))
					return val;

				if (!unit)
					return val.replace(/\.$/, '') + prefs.get(~val.indexOf('.') ? 'css.floatUnit' : 'css.intUnit');

				return val + getUnit(unit);
			});
		},

		/**
		 * Expands abbreviation into a snippet
		 * @param {String} abbr Abbreviation name to expand
		 * @param {String} value Abbreviation value
		 * @param {String} syntax Currect syntax or dialect. Default is 'css'
		 * @returns {Object} Array of CSS properties and values or predefined
		 * snippet (string or element)
		 */
		expand: function(abbr, value, syntax) {
			syntax = syntax || 'css';
			var resources = require('resources');
			var autoInsertPrefixes = prefs.get('css.autoInsertVendorPrefixes');

			// check if snippet should be transformed to !important
			var isImportant;
			if (isImportant = /^(.+)\!$/.test(abbr)) {
				abbr = RegExp.$1;
			}

			// check if we have abbreviated resource
			var snippet = resources.findSnippet(syntax, abbr);
			if (snippet && !autoInsertPrefixes) {
				return transformSnippet(snippet, isImportant, syntax);
			}

			// no abbreviated resource, parse abbreviation
			var prefixData = this.extractPrefixes(abbr);
			var valuesData = this.extractValues(prefixData.property);
			var abbrData = _.extend(prefixData, valuesData);

			if (!snippet) {
				snippet = resources.findSnippet(syntax, abbrData.property);
			} else {
				abbrData.values = null;
			}

			if (!snippet && prefs.get('css.fuzzySearch')) {
				// let’s try fuzzy search
				snippet = resources.fuzzyFindSnippet(syntax, abbrData.property, parseFloat(prefs.get('css.fuzzySearchMinScore')));
			}

			if (!snippet) {
				snippet = abbrData.property + ':' + defaultValue;
			} else if (!_.isString(snippet)) {
				snippet = snippet.data;
			}

			if (!isSingleProperty(snippet)) {
				return snippet;
			}

			var snippetObj = this.splitSnippet(snippet);
			var result = [];
			if (!value && abbrData.values) {
				value = _.map(abbrData.values, function(val) {
					return this.normalizeValue(val, snippetObj.name);
				}, this).join(' ') + ';';
			}

			snippetObj.value = value || snippetObj.value;

			var prefixes = abbrData.prefixes == 'all' || (!abbrData.prefixes && autoInsertPrefixes)
				? findPrefixes(snippetObj.name, autoInsertPrefixes && abbrData.prefixes != 'all')
				: abbrData.prefixes;


			var names = [], propName;
			_.each(prefixes, function(p) {
				if (p in vendorPrefixes) {
					propName = vendorPrefixes[p].transformName(snippetObj.name);
					names.push(propName);
					result.push(transformSnippet(propName + ':' + snippetObj.value,
							isImportant, syntax));
				}
			});

			// put the original property
			result.push(transformSnippet(snippetObj.name + ':' + snippetObj.value, isImportant, syntax));
			names.push(snippetObj.name);

			if (prefs.get('css.alignVendor')) {
				var pads = require('utils').getStringsPads(names);
				result = _.map(result, function(prop, i) {
					return pads[i] + prop;
				});
			}

			return result;
		},

		/**
		 * Same as <code>expand</code> method but transforms output into
		 * Emmet snippet
		 * @param {String} abbr
		 * @param {String} syntax
		 * @returns {String}
		 */
		expandToSnippet: function(abbr, syntax) {
			var snippet = this.expand(abbr, null, syntax);
			if (_.isArray(snippet)) {
				return snippet.join('\n');
			}

			if (!_.isString(snippet))
				return snippet.data;

			return String(snippet);
		},

		/**
		 * Split snippet into a CSS property-value pair
		 * @param {String} snippet
		 */
		splitSnippet: function(snippet) {
			var utils = require('utils');
			snippet = utils.trim(snippet);
			if (snippet.indexOf(':') == -1) {
				return {
					name: snippet,
					value: defaultValue
				};
			}

			var pair = snippet.split(':');

			return {
				name: utils.trim(pair.shift()),
				// replace ${0} tabstop to produce valid vendor-prefixed values
				// where possible
				value: utils.trim(pair.join(':')).replace(/^(\$\{0\}|\$0)(\s*;?)$/, '${1}$2')
			};
		},

		getSyntaxPreference: getSyntaxPreference,
		transformSnippet: transformSnippet
	};
});
/**
 * 'Expand Abbreviation' handler that parses gradient definition from under
 * cursor and updates CSS rule with vendor-prefixed values.
 *
 * @memberOf __cssGradientHandlerDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('cssGradient', function(require, _) {
	var defaultLinearDirections = ['top', 'to bottom', '0deg'];
	/** Back-reference to current module */
	var module = null;

	var cssSyntaxes = ['css', 'less', 'sass', 'scss', 'stylus', 'styl'];

	var reDeg = /\d+deg/i;
	var reKeyword = /top|bottom|left|right/i;

	// XXX define preferences
	/** @type preferences */
	var prefs = require('preferences');
	prefs.define('css.gradient.prefixes', 'webkit, moz, o',
			'A comma-separated list of vendor-prefixes for which values should '
			+ 'be generated.');

	prefs.define('css.gradient.oldWebkit', true,
			'Generate gradient definition for old Webkit implementations');

	prefs.define('css.gradient.omitDefaultDirection', true,
		'Do not output default direction definition in generated gradients.');

	prefs.define('css.gradient.defaultProperty', 'background-image',
		'When gradient expanded outside CSS value context, it will produce '
			+ 'properties with this name.');

	prefs.define('css.gradient.fallback', false,
			'With this option enabled, CSS gradient generator will produce '
			+ '<code>background-color</code> property with gradient first color '
			+ 'as fallback for old browsers.');

	function normalizeSpace(str) {
		return require('utils').trim(str).replace(/\s+/g, ' ');
	}

	/**
	 * Parses linear gradient definition
	 * @param {String}
	 */
	function parseLinearGradient(gradient) {
		var direction = defaultLinearDirections[0];

		// extract tokens
		/** @type StringStream */
		var stream = require('stringStream').create(require('utils').trim(gradient));
		var colorStops = [], ch;
		while (ch = stream.next()) {
			if (stream.peek() == ',') {
				colorStops.push(stream.current());
				stream.next();
				stream.eatSpace();
				stream.start = stream.pos;
			} else if (ch == '(') { // color definition, like 'rgb(0,0,0)'
				stream.skipTo(')');
			}
		}

		// add last token
		colorStops.push(stream.current());
		colorStops = _.compact(_.map(colorStops, normalizeSpace));

		if (!colorStops.length)
			return null;

		// let's see if the first color stop is actually a direction
		if (reDeg.test(colorStops[0]) || reKeyword.test(colorStops[0])) {
			direction = colorStops.shift();
		}

		return {
			type: 'linear',
			direction: direction,
			colorStops: _.map(colorStops, parseColorStop)
		};
	}

	/**
	 * Parses color stop definition
	 * @param {String} colorStop
	 * @returns {Object}
	 */
	function parseColorStop(colorStop) {
		colorStop = normalizeSpace(colorStop);

		// find color declaration
		// first, try complex color declaration, like rgb(0,0,0)
		var color = null;
		colorStop = colorStop.replace(/^(\w+\(.+?\))\s*/, function(str, c) {
			color = c;
			return '';
		});

		if (!color) {
			// try simple declaration, like yellow, #fco, #ffffff, etc.
			var parts = colorStop.split(' ');
			color = parts[0];
			colorStop = parts[1] || '';
		}

		var result = {
			color: color
		};

		if (colorStop) {
			// there's position in color stop definition
			colorStop.replace(/^(\-?[\d\.]+)([a-z%]+)?$/, function(str, pos, unit) {
				result.position = pos;
				if (~pos.indexOf('.')) {
					unit = '';
				} else if (!unit) {
					unit = '%';
				}

				if (unit)
					result.unit = unit;
			});
		}

		return result;
	}

	/**
	 * Resolves property name (abbreviation): searches for snippet definition in
	 * 'resources' and returns new name of matched property
	 */
	function resolvePropertyName(name, syntax) {
		var res = require('resources');
		var prefs = require('preferences');
		var snippet = res.findSnippet(syntax, name);

		if (!snippet && prefs.get('css.fuzzySearch')) {
			snippet = res.fuzzyFindSnippet(syntax, name,
					parseFloat(prefs.get('css.fuzzySearchMinScore')));
		}

		if (snippet) {
			if (!_.isString(snippet)) {
				snippet = snippet.data;
			}

			return require('cssResolver').splitSnippet(snippet).name;
		}
	}

	/**
	 * Fills-out implied positions in color-stops. This function is useful for
	 * old Webkit gradient definitions
	 */
	function fillImpliedPositions(colorStops) {
		var from = 0;

		_.each(colorStops, function(cs, i) {
			// make sure that first and last positions are defined
			if (!i)
				return cs.position = cs.position || 0;

			if (i == colorStops.length - 1 && !('position' in cs))
				cs.position = 1;

			if ('position' in cs) {
				var start = colorStops[from].position || 0;
				var step = (cs.position - start) / (i - from);
				_.each(colorStops.slice(from, i), function(cs2, j) {
					cs2.position = start + step * j;
				});

				from = i;
			}
		});
	}

	/**
	 * Returns textual version of direction expressed in degrees
	 * @param {String} direction
	 * @returns {String}
	 */
	function textualDirection(direction) {
		var angle = parseFloat(direction);

		if(!_.isNaN(angle)) {
			switch(angle % 360) {
				case 0:   return 'left';
				case 90:  return 'bottom';
				case 180: return 'right';
				case 240: return 'top';
			}
		}

		return direction;
	}

	/**
	 * Creates direction definition for old Webkit gradients
	 * @param {String} direction
	 * @returns {String}
	 */
	function oldWebkitDirection(direction) {
		direction = textualDirection(direction);

		if(reDeg.test(direction))
			throw "The direction is an angle that can’t be converted.";

		var v = function(pos) {
			return ~direction.indexOf(pos) ? '100%' : '0';
		};

		return v('right') + ' ' + v('bottom') + ', ' + v('left') + ' ' + v('top');
	}

	function getPrefixedNames(name) {
		var prefixes = prefs.getArray('css.gradient.prefixes');
		var names = prefixes
			? _.map(prefixes, function(p) {
				return '-' + p + '-' + name;
			})
			: [];

		names.push(name);

		return names;
	}

	/**
	 * Returns list of CSS properties with gradient
	 * @param {Object} gradient
	 * @param {String} propertyName Original CSS property name
	 * @returns {Array}
	 */
	function getPropertiesForGradient(gradient, propertyName) {
		var props = [];
		var css = require('cssResolver');

		if (prefs.get('css.gradient.fallback') && ~propertyName.toLowerCase().indexOf('background')) {
			props.push({
				name: 'background-color',
				value: '${1:' + gradient.colorStops[0].color + '}'
			});
		}

		_.each(prefs.getArray('css.gradient.prefixes'), function(prefix) {
			var name = css.prefixed(propertyName, prefix);
			if (prefix == 'webkit' && prefs.get('css.gradient.oldWebkit')) {
				try {
					props.push({
						name: name,
						value: module.oldWebkitLinearGradient(gradient)
					});
				} catch(e) {}
			}

			props.push({
				name: name,
				value: module.toString(gradient, prefix)
			});
		});

		return props.sort(function(a, b) {
			return b.name.length - a.name.length;
		});
	}

	/**
	 * Pastes gradient definition into CSS rule with correct vendor-prefixes
	 * @param {EditElement} property Matched CSS property
	 * @param {Object} gradient Parsed gradient
	 * @param {Range} valueRange If passed, only this range within property
	 * value will be replaced with gradient. Otherwise, full value will be
	 * replaced
	 */
	function pasteGradient(property, gradient, valueRange) {
		var rule = property.parent;
		var utils = require('utils');
		var alignVendor = require('preferences').get('css.alignVendor');

		// we may have aligned gradient definitions: find the smallest value
		// separator
		var sep = property.styleSeparator;
		var before = property.styleBefore;

		// first, remove all properties within CSS rule with the same name and
		// gradient definition
		_.each(rule.getAll(getPrefixedNames(property.name())), function(item) {
			if (item != property && /gradient/i.test(item.value())) {
				if (item.styleSeparator.length < sep.length) {
					sep = item.styleSeparator;
				}
				if (item.styleBefore.length < before.length) {
					before = item.styleBefore;
				}
				rule.remove(item);
			}
		});

		if (alignVendor) {
			// update prefix
			if (before != property.styleBefore) {
				var fullRange = property.fullRange();
				rule._updateSource(before, fullRange.start, fullRange.start + property.styleBefore.length);
				property.styleBefore = before;
			}

			// update separator value
			if (sep != property.styleSeparator) {
				rule._updateSource(sep, property.nameRange().end, property.valueRange().start);
				property.styleSeparator = sep;
			}
		}

		var value = property.value();
		if (!valueRange)
			valueRange = require('range').create(0, property.value());

		var val = function(v) {
			return utils.replaceSubstring(value, v, valueRange);
		};

		// put vanilla-clean gradient definition into current rule
		property.value(val(module.toString(gradient)) + '${2}');

		// create list of properties to insert
		var propsToInsert = getPropertiesForGradient(gradient, property.name());

		// align prefixed values
		if (alignVendor) {
			var values = _.pluck(propsToInsert, 'value');
			var names = _.pluck(propsToInsert, 'name');
			values.push(property.value());
			names.push(property.name());

			var valuePads = utils.getStringsPads(_.map(values, function(v) {
				return v.substring(0, v.indexOf('('));
			}));

			var namePads = utils.getStringsPads(names);
			property.name(_.last(namePads) + property.name());

			_.each(propsToInsert, function(prop, i) {
				prop.name = namePads[i] + prop.name;
				prop.value = valuePads[i] + prop.value;
			});

			property.value(_.last(valuePads) + property.value());
		}

		// put vendor-prefixed definitions before current rule
		_.each(propsToInsert, function(prop) {
			rule.add(prop.name, prop.value, rule.indexOf(property));
		});
	}

	/**
	 * Search for gradient definition inside CSS property value
	 */
	function findGradient(cssProp) {
		var value = cssProp.value();
		var gradient = null;
		var matchedPart = _.find(cssProp.valueParts(), function(part) {
			return gradient = module.parse(part.substring(value));
		});

		if (matchedPart && gradient) {
			return {
				gradient: gradient,
				valueRange: matchedPart
			};
		}

		return null;
	}

	/**
	 * Tries to expand gradient outside CSS value
	 * @param {IEmmetEditor} editor
	 * @param {String} syntax
	 */
	function expandGradientOutsideValue(editor, syntax) {
		var propertyName = prefs.get('css.gradient.defaultProperty');

		if (!propertyName)
			return false;

		// assuming that gradient definition is written on new line,
		// do a simplified parsing
		var content = String(editor.getContent());
		/** @type Range */
		var lineRange = require('range').create(editor.getCurrentLineRange());

		// get line content and adjust range with padding
		var line = lineRange.substring(content)
			.replace(/^\s+/, function(pad) {
				lineRange.start += pad.length;
				return '';
			})
			.replace(/\s+$/, function(pad) {
				lineRange.end -= pad.length;
				return '';
			});

		var css = require('cssResolver');
		var gradient = module.parse(line);
		if (gradient) {
			var props = getPropertiesForGradient(gradient, propertyName);
			props.push({
				name: propertyName,
				value: module.toString(gradient) + '${2}'
			});

			var sep = css.getSyntaxPreference('valueSeparator', syntax);
			var end = css.getSyntaxPreference('propertyEnd', syntax);

			if (require('preferences').get('css.alignVendor')) {
				var pads = require('utils').getStringsPads(_.map(props, function(prop) {
					return prop.value.substring(0, prop.value.indexOf('('));
				}));
				_.each(props, function(prop, i) {
					prop.value = pads[i] + prop.value;
				});
			}

			props = _.map(props, function(item) {
				return item.name + sep + item.value + end;
			});

			editor.replaceContent(props.join('\n'), lineRange.start, lineRange.end);
			return true;
		}

		return false;
	}

	/**
	 * Search for gradient definition inside CSS value under cursor
	 * @param {String} content
	 * @param {Number} pos
	 * @returns {Object}
	 */
	function findGradientFromPosition(content, pos) {
		var cssProp = null;
		/** @type EditContainer */
		var cssRule = require('cssEditTree').parseFromPosition(content, pos, true);

		if (cssRule) {
			cssProp = cssRule.itemFromPosition(pos, true);
			if (!cssProp) {
				// in case user just started writing CSS property
				// and didn't include semicolon–try another approach
				cssProp = _.find(cssRule.list(), function(elem) {
					return elem.range(true).end == pos;
				});
			}
		}

		return {
			rule: cssRule,
			property: cssProp
		};
	}

	// XXX register expand abbreviation handler
	/**
	 * @param {IEmmetEditor} editor
	 * @param {String} syntax
	 * @param {String} profile
	 */
	require('expandAbbreviation').addHandler(function(editor, syntax, profile) {
		var info = require('editorUtils').outputInfo(editor, syntax, profile);
		if (!_.include(cssSyntaxes, info.syntax))
			return false;

		// let's see if we are expanding gradient definition
		var caret = editor.getCaretPos();
		var content = info.content;
		var css = findGradientFromPosition(content, caret);

		if (css.property) {
			// make sure that caret is inside property value with gradient
			// definition
			var g = findGradient(css.property);
			if (g) {
				var ruleStart = css.rule.options.offset || 0;
				var ruleEnd = ruleStart + css.rule.toString().length;

				// Handle special case:
				// user wrote gradient definition between existing CSS
				// properties and did not finished it with semicolon.
				// In this case, we have semicolon right after gradient
				// definition and re-parse rule again
				if (/[\n\r]/.test(css.property.value())) {
					// insert semicolon at the end of gradient definition
					var insertPos = css.property.valueRange(true).start + g.valueRange.end;
					content = require('utils').replaceSubstring(content, ';', insertPos);
					var newCss = findGradientFromPosition(content, caret);
					if (newCss.property) {
						g = findGradient(newCss.property);
						css = newCss;
					}
				}

				// make sure current property has terminating semicolon
				css.property.end(';');

				// resolve CSS property name
				var resolvedName = resolvePropertyName(css.property.name(), syntax);
				if (resolvedName) {
					css.property.name(resolvedName);
				}

				pasteGradient(css.property, g.gradient, g.valueRange);
				editor.replaceContent(css.rule.toString(), ruleStart, ruleEnd, true);
				return true;
			}
		}

		return expandGradientOutsideValue(editor, syntax);
	});

	// XXX register "Reflect CSS Value" action delegate
	/**
	 * @param {EditElement} property
	 */
	require('reflectCSSValue').addHandler(function(property) {
		var utils = require('utils');

		var g = findGradient(property);
		if (!g)
			return false;

		var value = property.value();
		var val = function(v) {
			return utils.replaceSubstring(value, v, g.valueRange);
		};

		// reflect value for properties with the same name
		_.each(property.parent.getAll(getPrefixedNames(property.name())), function(prop) {
			if (prop === property)
				return;

			// check if property value starts with gradient definition
			var m = prop.value().match(/^\s*(\-([a-z]+)\-)?linear\-gradient/);
			if (m) {
				prop.value(val(module.toString(g.gradient, m[2] || '')));
			} else if (m = prop.value().match(/\s*\-webkit\-gradient/)) {
				// old webkit gradient definition
				prop.value(val(module.oldWebkitLinearGradient(g.gradient)));
			}
		});

		return true;
	});

	return module = {
		/**
		 * Parses gradient definition
		 * @param {String} gradient
		 * @returns {Object}
		 */
		parse: function(gradient) {
			var result = null;
			require('utils').trim(gradient).replace(/^([\w\-]+)\((.+?)\)$/, function(str, type, definition) {
				// remove vendor prefix
				type = type.toLowerCase().replace(/^\-[a-z]+\-/, '');
				if (type == 'linear-gradient' || type == 'lg') {
					result = parseLinearGradient(definition);
					return '';
				}

				return str;
			});

			return result;
		},

		/**
		 * Produces linear gradient definition used in early Webkit
		 * implementations
		 * @param {Object} gradient Parsed gradient
		 * @returns {String}
		 */
		oldWebkitLinearGradient: function(gradient) {
			if (_.isString(gradient))
				gradient = this.parse(gradient);

			if (!gradient)
				return null;

			var colorStops = _.map(gradient.colorStops, _.clone);

			// normalize color-stops position
			_.each(colorStops, function(cs) {
				if (!('position' in cs)) // implied position
					return;

				if (~cs.position.indexOf('.') || cs.unit == '%') {
					cs.position = parseFloat(cs.position) / (cs.unit == '%' ? 100 : 1);
				} else {
					throw "Can't convert color stop '" + (cs.position + (cs.unit || '')) + "'";
				}
			});

			fillImpliedPositions(colorStops);

			// transform color-stops into string representation
			colorStops = _.map(colorStops, function(cs, i) {
				if (!cs.position && !i)
					return 'from(' + cs.color + ')';

				if (cs.position == 1 && i == colorStops.length - 1)
					return 'to(' + cs.color + ')';

				return 'color-stop(' + (cs.position.toFixed(2).replace(/\.?0+$/, '')) + ', ' + cs.color + ')';
			});

			return '-webkit-gradient(linear, '
				+ oldWebkitDirection(gradient.direction)
				+ ', '
				+ colorStops.join(', ')
				+ ')';
		},

		/**
		 * Returns string representation of parsed gradient
		 * @param {Object} gradient Parsed gradient
		 * @param {String} prefix Vendor prefix
		 * @returns {String}
		 */
		toString: function(gradient, prefix) {
			if (gradient.type == 'linear') {
				var fn = (prefix ? '-' + prefix + '-' : '') + 'linear-gradient';

				// transform color-stops
				var colorStops = _.map(gradient.colorStops, function(cs) {
					return cs.color + ('position' in cs
							? ' ' + cs.position + (cs.unit || '')
							: '');
				});

				if (gradient.direction
						&& (!prefs.get('css.gradient.omitDefaultDirection')
						|| !_.include(defaultLinearDirections, gradient.direction))) {
					colorStops.unshift(gradient.direction);
				}

				return fn + '(' + colorStops.join(', ') + ')';
			}
		}
	};
});/**
 * Module adds support for generators: a regexp-based abbreviation resolver
 * that can produce custom output.
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	/** @type HandlerList */
	var generators = require('handlerList').create();
	var resources = require('resources');

	_.extend(resources, {
		/**
		 * Add generator. A generator function <code>fn</code> will be called
		 * only if current abbreviation matches <code>regexp</code> regular
		 * expression and this function should return <code>null</code> if
		 * abbreviation cannot be resolved
		 * @param {RegExp} regexp Regular expression for abbreviation element name
		 * @param {Function} fn Resolver function
		 * @param {Object} options Options list as described in
		 * {@link HandlerList#add()} method
		 */
		addGenerator: function(regexp, fn, options) {
			if (_.isString(regexp))
				regexp = new RegExp(regexp);

			generators.add(function(node, syntax) {
				var m;
				if ((m = regexp.exec(node.name()))) {
					return fn(m, node, syntax);
				}

				return null;
			}, options);
		}
	});

	resources.addResolver(function(node, syntax) {
		return generators.exec(null, _.toArray(arguments));
	});
});/**
 * Module for resolving tag names: returns best matched tag name for child
 * element based on passed parent's tag name. Also provides utility function
 * for element type detection (inline, block-level, empty)
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('tagName', function(require, _) {
	var elementTypes = {
//		empty: 'area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,keygen,command'.split(','),
		empty: [],
		blockLevel: 'address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,link,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul,h1,h2,h3,h4,h5,h6'.split(','),
		inlineLevel: 'a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var'.split(',')
	};

	var elementMap = {
		'p': 'span',
		'ul': 'li',
		'ol': 'li',
		'table': 'tr',
		'tr': 'td',
		'tbody': 'tr',
		'thead': 'tr',
		'tfoot': 'tr',
		'colgroup': 'col',
		'select': 'option',
		'optgroup': 'option',
		'audio': 'source',
		'video': 'source',
		'object': 'param',
		'map': 'area'
	};

	return {
		/**
		 * Returns best matched child element name for passed parent's
		 * tag name
		 * @param {String} name
		 * @returns {String}
		 * @memberOf tagName
		 */
		resolve: function(name) {
			name = (name || '').toLowerCase();

			if (name in elementMap)
				return this.getMapping(name);

			if (this.isInlineLevel(name))
				return 'span';

			return 'div';
		},

		/**
		 * Returns mapped child element name for passed parent's name
		 * @param {String} name
		 * @returns {String}
		 */
		getMapping: function(name) {
			return elementMap[name.toLowerCase()];
		},

		/**
		 * Check if passed element name belongs to inline-level element
		 * @param {String} name
		 * @returns {Boolean}
		 */
		isInlineLevel: function(name) {
			return this.isTypeOf(name, 'inlineLevel');
		},

		/**
		 * Check if passed element belongs to block-level element.
		 * For better matching of unknown elements (for XML, for example),
		 * you should use <code>!this.isInlineLevel(name)</code>
		 * @returns {Boolean}
		 */
		isBlockLevel: function(name) {
			return this.isTypeOf(name, 'blockLevel');
		},

		/**
		 * Check if passed element is void (i.e. should not have closing tag).
		 * @returns {Boolean}
		 */
		isEmptyElement: function(name) {
			return this.isTypeOf(name, 'empty');
		},

		/**
		 * Generic function for testing if element name belongs to specified
		 * elements collection
		 * @param {String} name Element name
		 * @param {String} type Collection name
		 * @returns {Boolean}
		 */
		isTypeOf: function(name, type) {
			return _.include(elementTypes[type], name);
		},

		/**
		 * Adds new parent–child mapping
		 * @param {String} parent
		 * @param {String} child
		 */
		addMapping: function(parent, child) {
			elementMap[parent] = child;
		},

		/**
		 * Removes parent-child mapping
		 */
		removeMapping: function(parent) {
			if (parent in elementMap)
				delete elementMap[parent];
		},

		/**
		 * Adds new element into collection
		 * @param {String} name Element name
		 * @param {String} collection Collection name
		 */
		addElementToCollection: function(name, collection) {
			if (!elementTypes[collection])
				elementTypes[collection] = [];

			var col = this.getCollection(collection);
			if (!_.include(col, name))
				col.push(name);
		},

		/**
		 * Removes element name from specified collection
		 * @param {String} name Element name
		 * @param {String} collection Collection name
		 * @returns
		 */
		removeElementFromCollection: function(name, collection) {
			if (collection in elementTypes) {
				elementTypes[collection] = _.without(this.getCollection(collection), name);
			}
		},

		/**
		 * Returns elements name collection
		 * @param {String} name Collection name
		 * @returns {Array}
		 */
		getCollection: function(name) {
			return elementTypes[name];
		}
	};
});/**
 * Filter for aiding of writing elements with complex class names as described
 * in Yandex's BEM (Block, Element, Modifier) methodology. This filter will
 * automatically inherit block and element names from parent elements and insert
 * them into child element classes
 * @memberOf __bemFilterDefine
 * @constructor
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	var prefs = require('preferences');
	prefs.define('bem.elementSeparator', '__', 'Class name’s element separator.');
	prefs.define('bem.modifierSeparator', '_', 'Class name’s modifier separator.');
	prefs.define('bem.shortElementPrefix', '-',
			'Symbol for describing short “block-element” notation. Class names '
			+ 'prefixed with this symbol will be treated as element name for parent‘s '
			+ 'block name. Each symbol instance traverses one level up in parsed '
			+ 'tree for block name lookup. Empty value will disable short notation.');

	var shouldRunHtmlFilter = false;

	function getSeparators() {
		return {
			element: prefs.get('bem.elementSeparator'),
			modifier: prefs.get('bem.modifierSeparator')
		};
	}

	/**
	 * @param {AbbreviationNode} item
	 */
	function bemParse(item) {
		if (require('abbreviationUtils').isSnippet(item))
			return item;

		// save BEM stuff in cache for faster lookups
		item.__bem = {
			block: '',
			element: '',
			modifier: ''
		};

		var classNames = normalizeClassName(item.attribute('class')).split(' ');

		// guess best match for block name
		var reBlockName = /^[a-z]\-/i;
		item.__bem.block = _.find(classNames, function(name) {
			return reBlockName.test(name);
		});

		// guessing doesn't worked, pick first class name as block name
		if (!item.__bem.block) {
			reBlockName = /^[a-z]/i;
			item.__bem.block = _.find(classNames, function(name) {
				return reBlockName.test(name);
			}) || '';
		}

		classNames = _.chain(classNames)
			.map(function(name) {return processClassName(name, item);})
			.flatten()
			.uniq()
			.value()
			.join(' ');

		if (classNames)
			item.attribute('class', classNames);

		return item;
	}

	/**
	 * @param {String} className
	 * @returns {String}
	 */
	function normalizeClassName(className) {
		var utils = require('utils');
		className = (' ' + (className || '') + ' ').replace(/\s+/g, ' ');

		var shortSymbol = prefs.get('bem.shortElementPrefix');
		if (shortSymbol) {
			var re = new RegExp('\\s(' + utils.escapeForRegexp(shortSymbol) + '+)', 'g');
			className = className.replace(re, function(str, p1) {
				return ' ' + utils.repeatString(getSeparators().element, p1.length);
			});
		}

		return utils.trim(className);
	}

	/**
	 * Processes class name
	 * @param {String} name Class name item to process
	 * @param {AbbreviationNode} item Host node for provided class name
	 * @returns Processed class name. May return <code>Array</code> of
	 * class names
	 */
	function processClassName(name, item) {
		name = transformClassName(name, item, 'element');
		name = transformClassName(name, item, 'modifier');

		// expand class name
		// possible values:
		// * block__element
		// * block__element_modifier
		// * block__element_modifier1_modifier2
		// * block_modifier
		var block = '', element = '', modifier = '';
		var separators = getSeparators();
		if (~name.indexOf(separators.element)) {
			var blockElem = name.split(separators.element);
			var elemModifiers = blockElem[1].split(separators.modifier);

			block = blockElem[0];
			element = elemModifiers.shift();
			modifier = elemModifiers.join(separators.modifier);
		} else if (~name.indexOf(separators.modifier)) {
			var blockModifiers = name.split(separators.modifier);

			block = blockModifiers.shift();
			modifier = blockModifiers.join(separators.modifier);
		}

		if (block || element || modifier) {
			if (!block) {
				block = item.__bem.block;
			}

			// inherit parent bem element, if exists
//			if (item.parent && item.parent.__bem && item.parent.__bem.element)
//				element = item.parent.__bem.element + separators.element + element;

			// produce multiple classes
			var prefix = block;
			var result = [];

			if (element) {
				prefix += separators.element + element;
				result.push(prefix);
			} else {
				result.push(prefix);
			}

			if (modifier) {
				result.push(prefix + separators.modifier + modifier);
			}

			item.__bem.block = block;
			item.__bem.element = element;
			item.__bem.modifier = modifier;

			return result;
		}

		// ...otherwise, return processed or original class name
		return name;
	}

	/**
	 * Low-level function to transform user-typed class name into full BEM class
	 * @param {String} name Class name item to process
	 * @param {AbbreviationNode} item Host node for provided class name
	 * @param {String} entityType Type of entity to be tried to transform
	 * ('element' or 'modifier')
	 * @returns {String} Processed class name or original one if it can't be
	 * transformed
	 */
	function transformClassName(name, item, entityType) {
		var separators = getSeparators();
		var reSep = new RegExp('^(' + separators[entityType] + ')+', 'g');
		if (reSep.test(name)) {
			var depth = 0; // parent lookup depth
			var cleanName = name.replace(reSep, function(str, p1) {
				depth = str.length / separators[entityType].length;
				return '';
			});

			// find donor element
			var donor = item;
			while (donor.parent && depth--) {
				donor = donor.parent;
			}

			if (!donor || !donor.__bem)
				donor = item;

			if (donor && donor.__bem) {
				var prefix = donor.__bem.block;

				// decide if we should inherit element name
//				if (entityType == 'element') {
//					var curElem = cleanName.split(separators.modifier, 1)[0];
//					if (donor.__bem.element && donor.__bem.element != curElem)
//						prefix += separators.element + donor.__bem.element;
//				}

				if (entityType == 'modifier' &&  donor.__bem.element)
					prefix += separators.element + donor.__bem.element;

				return prefix + separators[entityType] + cleanName;
			}
		}

		return name;
	}

	/**
	 * Recursive function for processing tags, which extends class names
	 * according to BEM specs: http://bem.github.com/bem-method/pages/beginning/beginning.ru.html
	 * <br><br>
	 * It does several things:<br>
	 * <ul>
	 * <li>Expands complex class name (according to BEM symbol semantics):
	 * .block__elem_modifier → .block.block__elem.block__elem_modifier
	 * </li>
	 * <li>Inherits block name on child elements:
	 * .b-block > .__el > .__el → .b-block > .b-block__el > .b-block__el__el
	 * </li>
	 * <li>Treats first dash symbol as '__'</li>
	 * <li>Double underscore (or typographic '–') is also treated as an element
	 * level lookup, e.g. ____el will search for element definition in parent’s
	 * parent element:
	 * .b-block > .__el1 > .____el2 → .b-block > .b-block__el1 > .b-block__el2
	 * </li>
	 * </ul>
	 *
	 * @param {AbbreviationNode} tree
	 * @param {Object} profile
	 */
	function process(tree, profile) {
		if (tree.name)
			bemParse(tree, profile);

		var abbrUtils = require('abbreviationUtils');
		_.each(tree.children, function(item) {
			process(item, profile);
			if (!abbrUtils.isSnippet(item) && item.start)
				shouldRunHtmlFilter = true;
		});

		return tree;
	};

	require('filters').add('bem', function(tree, profile) {
		shouldRunHtmlFilter = false;
		tree = process(tree, profile);
		// in case 'bem' filter is applied after 'html' filter: run it again
		// to update output
		if (shouldRunHtmlFilter) {
			tree = require('filters').apply(tree, 'html', profile);
		}

		return tree;
	});
});

/**
 * Comment important tags (with 'id' and 'class' attributes)
 * @author Sergey Chikuyonok (serge.che@gmail.com)
 * @link http://chikuyonok.ru
 * @constructor
 * @memberOf __commentFilterDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	// define some preferences
	/** @type emmet.preferences */
	var prefs = require('preferences');

	prefs.define('filter.commentAfter',
			'\n<!-- /<%= attr("id", "#") %><%= attr("class", ".") %> -->',
			'A definition of comment that should be placed <i>after</i> matched '
			+ 'element when <code>comment</code> filter is applied. This definition '
			+ 'is an ERB-style template passed to <code>_.template()</code> '
			+ 'function (see Underscore.js docs for details). In template context, '
			+ 'the following properties and functions are availabe:\n'
			+ '<ul>'

			+ '<li><code>attr(name, before, after)</code> – a function that outputs'
			+ 'specified attribute value concatenated with <code>before</code> '
			+ 'and <code>after</code> strings. If attribute doesn\'t exists, the '
			+ 'empty string will be returned.</li>'

			+ '<li><code>node</code> – current node (instance of <code>AbbreviationNode</code>)</li>'

			+ '<li><code>name</code> – name of current tag</li>'

			+ '<li><code>padding</code> – current string padding, can be used '
			+ 'for formatting</li>'

			+'</ul>');

	prefs.define('filter.commentBefore',
			'',
			'A definition of comment that should be placed <i>before</i> matched '
			+ 'element when <code>comment</code> filter is applied. '
			+ 'For more info, read description of <code>filter.commentAfter</code> '
			+ 'property');

	prefs.define('filter.commentTrigger', 'id, class',
			'A comma-separated list of attribute names that should exist in abbreviatoin '
			+ 'where comment should be added. If you wish to add comment for '
			+ 'every element, set this option to <code>*</code>');

	/**
	 * Add comments to tag
	 * @param {AbbreviationNode} node
	 */
	function addComments(node, templateBefore, templateAfter) {
		var utils = require('utils');

		// check if comments should be added
		var trigger = prefs.get('filter.commentTrigger');
		if (trigger != '*') {
			var shouldAdd = _.find(trigger.split(','), function(name) {
				return !!node.attribute(utils.trim(name));
			});
			if (!shouldAdd) return;
		}

		var ctx = {
			node: node,
			name: node.name(),
			padding: node.parent ? node.parent.padding : '',
			attr: function(name, before, after) {
				var attr = node.attribute(name);
				if (attr) {
					return (before || '') + attr + (after || '');
				}

				return '';
			}
		};

		var nodeBefore = utils.normalizeNewline(templateBefore ? templateBefore(ctx) : '');
		var nodeAfter = utils.normalizeNewline(templateAfter ? templateAfter(ctx) : '');

		node.start = node.start.replace(/</, nodeBefore + '<');
		node.end = node.end.replace(/>/, '>' + nodeAfter);
	}

	function process(tree, before, after) {
		var abbrUtils = require('abbreviationUtils');
		_.each(tree.children, function(item) {
			if (abbrUtils.isBlock(item))
				addComments(item, before, after);

			process(item, before, after);
		});

		return tree;
	}

	require('filters').add('c', function(tree) {
		var templateBefore = _.template(prefs.get('filter.commentBefore'));
		var templateAfter = _.template(prefs.get('filter.commentAfter'));

		return process(tree, templateBefore, templateAfter);
	});
});
/**
 * Filter for escaping unsafe XML characters: <, >, &
 * @author Sergey Chikuyonok (serge.che@gmail.com)
 * @link http://chikuyonok.ru
 */
emmet.exec(function(require, _) {
	var charMap = {
		'<': '&lt;',
		'>': '&gt;',
		'&': '&amp;'
	};

	function escapeChars(str) {
		return str.replace(/([<>&])/g, function(str, p1){
			return charMap[p1];
		});
	}

	require('filters').add('e', function process(tree) {
		_.each(tree.children, function(item) {
			item.start = escapeChars(item.start);
			item.end = escapeChars(item.end);
			item.content = escapeChars(item.content);
			process(item);
		});

		return tree;
	});
});/**
 * Generic formatting filter: creates proper indentation for each tree node,
 * placing "%s" placeholder where the actual output should be. You can use
 * this filter to preformat tree and then replace %s placeholder to whatever you
 * need. This filter should't be called directly from editor as a part
 * of abbreviation.
 * @author Sergey Chikuyonok (serge.che@gmail.com)
 * @link http://chikuyonok.ru
 * @constructor
 * @memberOf __formatFilterDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _){
	var placeholder = '%s';

	/** @type preferences */
	var prefs = require('preferences');
	prefs.define('format.noIndentTags', 'html',
			'A comma-separated list of tag names that should not get inner indentation.');

	prefs.define('format.forceIndentationForTags', 'body',
		'A comma-separated list of tag names that should <em>always</em> get inner indentation.');

	/**
	 * Get indentation for given node
	 * @param {AbbreviationNode} node
	 * @returns {String}
	 */
	function getIndentation(node) {
		if (_.include(prefs.getArray('format.noIndentTags') || [], node.name())) {
			return '';
		}

		return require('resources').getVariable('indentation');
	}

	/**
	 * Test if passed node has block-level sibling element
	 * @param {AbbreviationNode} item
	 * @return {Boolean}
	 */
	function hasBlockSibling(item) {
		return item.parent && require('abbreviationUtils').hasBlockChildren(item.parent);
	}

	/**
	 * Test if passed item is very first child in parsed tree
	 * @param {AbbreviationNode} item
	 */
	function isVeryFirstChild(item) {
		return item.parent && !item.parent.parent && !item.index();
	}

	/**
	 * Check if a newline should be added before element
	 * @param {AbbreviationNode} node
	 * @param {OutputProfile} profile
	 * @return {Boolean}
	 */
	function shouldAddLineBreak(node, profile) {
		var abbrUtils = require('abbreviationUtils');
		if (profile.tag_nl === true || abbrUtils.isBlock(node))
			return true;

		if (!node.parent || !profile.inline_break)
			return false;

		// check if there are required amount of adjacent inline element
		return shouldFormatInline(node.parent, profile);
}

	/**
	 * Need to add newline because <code>item</code> has too many inline children
	 * @param {AbbreviationNode} node
	 * @param {OutputProfile} profile
	 */
	function shouldBreakChild(node, profile) {
		// we need to test only one child element, because
		// hasBlockChildren() method will do the rest
		return node.children.length && shouldAddLineBreak(node.children[0], profile);
	}

	function shouldFormatInline(node, profile) {
		var nodeCount = 0;
		var abbrUtils = require('abbreviationUtils');
		return !!_.find(node.children, function(child) {
			if (child.isTextNode() || !abbrUtils.isInline(child))
				nodeCount = 0;
			else if (abbrUtils.isInline(child))
				nodeCount++;

			if (nodeCount >= profile.inline_break)
				return true;
		});
	}

	function isRoot(item) {
		return !item.parent;
	}

	/**
	 * Processes element with matched resource of type <code>snippet</code>
	 * @param {AbbreviationNode} item
	 * @param {OutputProfile} profile
	 * @param {Number} level Depth level
	 */
	function processSnippet(item, profile, level) {
		item.start = item.end = '';
		if (!isVeryFirstChild(item) && profile.tag_nl !== false && shouldAddLineBreak(item, profile)) {
			// check if we’re not inside inline element
			if (isRoot(item.parent) || !require('abbreviationUtils').isInline(item.parent)) {
				item.start = require('utils').getNewline() + item.start;
			}
		}

		return item;
	}

	/**
	 * Check if we should add line breaks inside inline element
	 * @param {AbbreviationNode} node
	 * @param {OutputProfile} profile
	 * @return {Boolean}
	 */
	function shouldBreakInsideInline(node, profile) {
		var abbrUtils = require('abbreviationUtils');
		var hasBlockElems = _.any(node.children, function(child) {
			if (abbrUtils.isSnippet(child))
				return false;

			return !abbrUtils.isInline(child);
		});

		if (!hasBlockElems) {
			return shouldFormatInline(node, profile);
		}

		return true;
	}

	/**
	 * Processes element with <code>tag</code> type
	 * @param {AbbreviationNode} item
	 * @param {OutputProfile} profile
	 * @param {Number} level Depth level
	 */
	function processTag(item, profile, level) {
		item.start = item.end = placeholder;
		var utils = require('utils');
		var abbrUtils = require('abbreviationUtils');
		var isUnary = abbrUtils.isUnary(item);
		var nl = utils.getNewline();
		var indent = getIndentation(item);

		// formatting output
		if (profile.tag_nl !== false) {
			var forceNl = profile.tag_nl === true && (profile.tag_nl_leaf || item.children.length);
			if (!forceNl) {
				forceNl = _.include(prefs.getArray('format.forceIndentationForTags') || [], item.name());
			}

			// formatting block-level elements
			if (!item.isTextNode()) {
				if (shouldAddLineBreak(item, profile)) {
					// - do not indent the very first element
					// - do not indent first child of a snippet
					if (!isVeryFirstChild(item) && (!abbrUtils.isSnippet(item.parent) || item.index()))
						item.start = nl + item.start;

					if (abbrUtils.hasBlockChildren(item) || shouldBreakChild(item, profile) || (forceNl && !isUnary))
						item.end = nl + item.end;

					if (abbrUtils.hasTagsInContent(item) || (forceNl && !item.children.length && !isUnary))
						item.start += nl + indent;
				} else if (abbrUtils.isInline(item) && hasBlockSibling(item) && !isVeryFirstChild(item)) {
					item.start = nl + item.start;
				} else if (abbrUtils.isInline(item) && shouldBreakInsideInline(item, profile)) {
					item.end = nl + item.end;
				}

				item.padding = indent;
			}
		}

		return item;
	}

	/**
	 * Processes simplified tree, making it suitable for output as HTML structure
	 * @param {AbbreviationNode} tree
	 * @param {OutputProfile} profile
	 * @param {Number} level Depth level
	 */
	require('filters').add('_format', function process(tree, profile, level) {
		level = level || 0;
		var abbrUtils = require('abbreviationUtils');

		_.each(tree.children, function(item) {
			if (abbrUtils.isSnippet(item))
				processSnippet(item, profile, level);
			else
				processTag(item, profile, level);

			process(item, profile, level + 1);
		});

		return tree;
	});
});/**
 * Filter for producing HAML code from abbreviation.
 * @author Sergey Chikuyonok (serge.che@gmail.com)
 * @link http://chikuyonok.ru
 * @constructor
 * @memberOf __hamlFilterDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	var childToken = '${child}';

	function transformClassName(className) {
		return require('utils').trim(className).replace(/\s+/g, '.');
	}

	/**
	 * Creates HAML attributes string from tag according to profile settings
	 * @param {AbbreviationNode} tag
	 * @param {Object} profile
	 */
	function makeAttributesString(tag, profile) {
		var attrs = '';
		var otherAttrs = [];
		var attrQuote = profile.attributeQuote();
		var cursor = profile.cursor();

		_.each(tag.attributeList(), function(a) {
			var attrName = profile.attributeName(a.name);
			switch (attrName.toLowerCase()) {
				// use short notation for ID and CLASS attributes
				case 'id':
					attrs += '#' + (a.value || cursor);
					break;
				case 'class':
					attrs += '.' + transformClassName(a.value || cursor);
					break;
				// process other attributes
				default:
					otherAttrs.push(':' +attrName + ' => ' + attrQuote + (a.value || cursor) + attrQuote);
			}
		});

		if (otherAttrs.length)
			attrs += '{' + otherAttrs.join(', ') + '}';

		return attrs;
	}

	/**
	 * Test if passed node has block-level sibling element
	 * @param {AbbreviationNode} item
	 * @return {Boolean}
	 */
	function hasBlockSibling(item) {
		return item.parent && item.parent.hasBlockChildren();
	}

	/**
	 * Processes element with <code>tag</code> type
	 * @param {AbbreviationNode} item
	 * @param {OutputProfile} profile
	 * @param {Number} level Depth level
	 */
	function processTag(item, profile, level) {
		if (!item.parent)
			// looks like it's root element
			return item;

		var abbrUtils = require('abbreviationUtils');
		var utils = require('utils');

		var attrs = makeAttributesString(item, profile);
		var cursor = profile.cursor();
		var isUnary = abbrUtils.isUnary(item);
		var selfClosing = profile.self_closing_tag && isUnary ? '/' : '';
		var start= '';

		// define tag name
		var tagName = '%' + profile.tagName(item.name());
		if (tagName.toLowerCase() == '%div' && attrs && attrs.indexOf('{') == -1)
			// omit div tag
			tagName = '';

		item.end = '';
		start = tagName + attrs + selfClosing + ' ';

		var placeholder = '%s';
		// We can't just replace placeholder with new value because
		// JavaScript will treat double $ character as a single one, assuming
		// we're using RegExp literal.
		item.start = utils.replaceSubstring(item.start, start, item.start.indexOf(placeholder), placeholder);

		if (!item.children.length && !isUnary)
			item.start += cursor;

		return item;
	}

	/**
	 * Processes simplified tree, making it suitable for output as HTML structure
	 * @param {AbbreviationNode} tree
	 * @param {Object} profile
	 * @param {Number} level Depth level
	 */
	require('filters').add('haml', function process(tree, profile, level) {
		level = level || 0;
		var abbrUtils = require('abbreviationUtils');

		if (!level) {
			tree = require('filters').apply(tree, '_format', profile);
		}

		_.each(tree.children, function(item) {
			if (!abbrUtils.isSnippet(item))
				processTag(item, profile, level);

			process(item, profile, level + 1);
		});

		return tree;
	});
});/**
 * Filter that produces HTML tree
 * @author Sergey Chikuyonok (serge.che@gmail.com)
 * @link http://chikuyonok.ru
 * @constructor
 * @memberOf __htmlFilterDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	/**
	 * Creates HTML attributes string from tag according to profile settings
	 * @param {AbbreviationNode} node
	 * @param {OutputProfile} profile
	 */
	function makeAttributesString(node, profile) {
		var attrQuote = profile.attributeQuote();
		var cursor = profile.cursor();

		return _.map(node.attributeList(), function(a) {
			var attrName = profile.attributeName(a.name);
			return ' ' + attrName + '=' + attrQuote + (a.value || cursor) + attrQuote;
		}).join('');
	}

	/**
	 * Processes element with <code>tag</code> type
	 * @param {AbbreviationNode} item
	 * @param {OutputProfile} profile
	 * @param {Number} level Depth level
	 */
	function processTag(item, profile, level) {
		if (!item.parent) // looks like it's root element
			return item;

		var abbrUtils = require('abbreviationUtils');
		var utils = require('utils');

		var attrs = makeAttributesString(item, profile);
		var cursor = profile.cursor();
		var isUnary = abbrUtils.isUnary(item);
		var start= '';
		var end = '';

		// define opening and closing tags
		if (!item.isTextNode()) {
			var tagName = profile.tagName(item.name());
			if (isUnary) {
				start = '<' + tagName + attrs + profile.selfClosing() + '>';
				item.end = '';
			} else {
				start = '<' + tagName + attrs + '>';
				end = '</' + tagName + '>';
			}
		}

		var placeholder = '%s';
		// We can't just replace placeholder with new value because
		// JavaScript will treat double $ character as a single one, assuming
		// we're using RegExp literal.
		item.start = utils.replaceSubstring(item.start, start, item.start.indexOf(placeholder), placeholder);
		item.end = utils.replaceSubstring(item.end, end, item.end.indexOf(placeholder), placeholder);

		// should we put caret placeholder after opening tag?
		if (
				!item.children.length
				&& !isUnary
				&& !~item.content.indexOf(cursor)
				&& !require('tabStops').extract(item.content).tabstops.length
			) {
			item.start += cursor;
		}

		return item;
	}

	/**
	 * Processes simplified tree, making it suitable for output as HTML structure
	 * @param {AbbreviationNode} tree
	 * @param {Object} profile
	 * @param {Number} level Depth level
	 */
	require('filters').add('html', function process(tree, profile, level) {
		level = level || 0;
		var abbrUtils = require('abbreviationUtils');

		if (!level) {
			tree = require('filters').apply(tree, '_format', profile);
		}

		_.each(tree.children, function(item) {
			if (!abbrUtils.isSnippet(item))
				processTag(item, profile, level);

			process(item, profile, level + 1);
		});

		return tree;
	});
});/**
 * Output abbreviation on a single line (i.e. no line breaks)
 * @author Sergey Chikuyonok (serge.che@gmail.com)
 * @link http://chikuyonok.ru
 * @constructor
 * @memberOf __singleLineFilterDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	var rePad = /^\s+/;
	var reNl = /[\n\r]/g;

	require('filters').add('s', function process(tree, profile, level) {
		var abbrUtils = require('abbreviationUtils');

		_.each(tree.children, function(item) {
			if (!abbrUtils.isSnippet(item)) {
				// remove padding from item
				item.start = item.start.replace(rePad, '');
				item.end = item.end.replace(rePad, '');
			}

			// remove newlines
			item.start = item.start.replace(reNl, '');
			item.end = item.end.replace(reNl, '');
			item.content = item.content.replace(reNl, '');

			process(item);
		});

		return tree;
	});
});
/**
 * Trim filter: removes characters at the beginning of the text
 * content that indicates lists: numbers, #, *, -, etc.
 *
 * Useful for wrapping lists with abbreviation.
 *
 * @author Sergey Chikuyonok (serge.che@gmail.com)
 * @link http://chikuyonok.ru
 *
 * @constructor
 * @memberOf __trimFilterDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	require('preferences').define('filter.trimRegexp', '[\\s|\\u00a0]*[\\d|#|\\-|\*|\\u2022]+\\.?\\s*',
			'Regular expression used to remove list markers (numbers, dashes, '
			+ 'bullets, etc.) in <code>t</code> (trim) filter. The trim filter '
			+ 'is useful for wrapping with abbreviation lists, pased from other '
			+ 'documents (for example, Word documents).');

	function process(tree, re) {
		_.each(tree.children, function(item) {
			if (item.content)
				item.content = item.content.replace(re, '');

			process(item, re);
		});

		return tree;
	}

	require('filters').add('t', function(tree) {
		var re = new RegExp(require('preferences').get('filter.trimRegexp'));
		return process(tree, re);
	});
});
/**
 * Filter for trimming "select" attributes from some tags that contains
 * child elements
 * @author Sergey Chikuyonok (serge.che@gmail.com)
 * @link http://chikuyonok.ru
 *
 * @constructor
 * @memberOf __xslFilterDefine
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.exec(function(require, _) {
	var tags = {
		'xsl:variable': 1,
		'xsl:with-param': 1
	};

	/**
	 * Removes "select" attribute from node
	 * @param {AbbreviationNode} node
	 */
	function trimAttribute(node) {
		node.start = node.start.replace(/\s+select\s*=\s*(['"]).*?\1/, '');
	}

	require('filters').add('xsl', function process(tree) {
		var abbrUtils = require('abbreviationUtils');
		_.each(tree.children, function(item) {
			if (!abbrUtils.isSnippet(item)
					&& (item.name() || '').toLowerCase() in tags
					&& item.children.length)
				trimAttribute(item);
			process(item);
		});

		return tree;
	});
});/**
 * "Lorem ipsum" text generator. Matches <code>lipsum(num)?</code> or
 * <code>lorem(num)?</code> abbreviation.
 * This code is based on Django's contribution:
 * https://code.djangoproject.com/browser/django/trunk/django/contrib/webdesign/lorem_ipsum.py
 * <br><br>
 * Examples to test:<br>
 * <code>lipsum</code> – generates 30 words text.<br>
 * <code>lipsum*6</code> – generates 6 paragraphs (autowrapped with &lt;p&gt; element) of text.<br>
 * <code>ol>lipsum10*5</code> — generates ordered list with 5 list items (autowrapped with &lt;li&gt; tag)
 * with text of 10 words on each line<br>
 * <code>span*3>lipsum20</code> – generates 3 paragraphs of 20-words text, each wrapped with &lt;span&gt; element .
 * Each paragraph phrase is unique
 * @param {Function} require
 * @param {Underscore} _
 * @constructor
 * @memberOf __loremIpsumGeneratorDefine
 */
emmet.define('lorem', function(require, _) {
	var langs = {
		en: {
			common: ['lorem', 'ipsum', 'dolor', 'sit', 'amet', 'consectetur', 'adipisicing', 'elit'],
			words: ['exercitationem', 'perferendis', 'perspiciatis', 'laborum', 'eveniet',
	             'sunt', 'iure', 'nam', 'nobis', 'eum', 'cum', 'officiis', 'excepturi',
	             'odio', 'consectetur', 'quasi', 'aut', 'quisquam', 'vel', 'eligendi',
	             'itaque', 'non', 'odit', 'tempore', 'quaerat', 'dignissimos',
	             'facilis', 'neque', 'nihil', 'expedita', 'vitae', 'vero', 'ipsum',
	             'nisi', 'animi', 'cumque', 'pariatur', 'velit', 'modi', 'natus',
	             'iusto', 'eaque', 'sequi', 'illo', 'sed', 'ex', 'et', 'voluptatibus',
	             'tempora', 'veritatis', 'ratione', 'assumenda', 'incidunt', 'nostrum',
	             'placeat', 'aliquid', 'fuga', 'provident', 'praesentium', 'rem',
	             'necessitatibus', 'suscipit', 'adipisci', 'quidem', 'possimus',
	             'voluptas', 'debitis', 'sint', 'accusantium', 'unde', 'sapiente',
	             'voluptate', 'qui', 'aspernatur', 'laudantium', 'soluta', 'amet',
	             'quo', 'aliquam', 'saepe', 'culpa', 'libero', 'ipsa', 'dicta',
	             'reiciendis', 'nesciunt', 'doloribus', 'autem', 'impedit', 'minima',
	             'maiores', 'repudiandae', 'ipsam', 'obcaecati', 'ullam', 'enim',
	             'totam', 'delectus', 'ducimus', 'quis', 'voluptates', 'dolores',
	             'molestiae', 'harum', 'dolorem', 'quia', 'voluptatem', 'molestias',
	             'magni', 'distinctio', 'omnis', 'illum', 'dolorum', 'voluptatum', 'ea',
	             'quas', 'quam', 'corporis', 'quae', 'blanditiis', 'atque', 'deserunt',
	             'laboriosam', 'earum', 'consequuntur', 'hic', 'cupiditate',
	             'quibusdam', 'accusamus', 'ut', 'rerum', 'error', 'minus', 'eius',
	             'ab', 'ad', 'nemo', 'fugit', 'officia', 'at', 'in', 'id', 'quos',
	             'reprehenderit', 'numquam', 'iste', 'fugiat', 'sit', 'inventore',
	             'beatae', 'repellendus', 'magnam', 'recusandae', 'quod', 'explicabo',
	             'doloremque', 'aperiam', 'consequatur', 'asperiores', 'commodi',
	             'optio', 'dolor', 'labore', 'temporibus', 'repellat', 'veniam',
	             'architecto', 'est', 'esse', 'mollitia', 'nulla', 'a', 'similique',
	             'eos', 'alias', 'dolore', 'tenetur', 'deleniti', 'porro', 'facere',
	             'maxime', 'corrupti']
		},
		ru: {
			common: ['далеко-далеко', 'за', 'словесными', 'горами', 'в стране', 'гласных', 'и согласных', 'живут', 'рыбные', 'тексты'],
			words: ['вдали', 'от всех', 'они', 'буквенных', 'домах', 'на берегу', 'семантика',
		            'большого', 'языкового', 'океана', 'маленький', 'ручеек', 'даль',
		            'журчит', 'по всей', 'обеспечивает', 'ее','всеми', 'необходимыми',
		            'правилами', 'эта', 'парадигматическая', 'страна', 'которой', 'жаренные',
		            'предложения', 'залетают', 'прямо', 'рот', 'даже', 'всемогущая',
		            'пунктуация', 'не', 'имеет', 'власти', 'над', 'рыбными', 'текстами',
		            'ведущими', 'безорфографичный', 'образ', 'жизни', 'однажды', 'одна',
		            'маленькая', 'строчка','рыбного', 'текста', 'имени', 'lorem', 'ipsum',
		            'решила', 'выйти', 'большой', 'мир', 'грамматики', 'великий', 'оксмокс',
		            'предупреждал', 'о', 'злых', 'запятых', 'диких', 'знаках', 'вопроса',
		            'коварных', 'точках', 'запятой', 'но', 'текст', 'дал', 'сбить',
		            'себя', 'толку', 'он', 'собрал', 'семь', 'своих', 'заглавных', 'букв',
		            'подпоясал', 'инициал', 'за', 'пояс', 'пустился', 'дорогу',
		            'взобравшись', 'первую', 'вершину', 'курсивных', 'гор', 'бросил',
		            'последний', 'взгляд', 'назад', 'силуэт', 'своего', 'родного', 'города',
		            'буквоград', 'заголовок', 'деревни', 'алфавит', 'подзаголовок', 'своего',
		            'переулка', 'грустный', 'реторический', 'вопрос', 'скатился', 'его',
		            'щеке', 'продолжил', 'свой', 'путь', 'дороге', 'встретил', 'рукопись',
		            'она', 'предупредила',  'моей', 'все', 'переписывается', 'несколько',
		            'раз', 'единственное', 'что', 'меня', 'осталось', 'это', 'приставка',
		            'возвращайся', 'ты', 'лучше', 'свою', 'безопасную', 'страну', 'послушавшись',
		            'рукописи', 'наш', 'продолжил', 'свой', 'путь', 'вскоре', 'ему',
		            'повстречался', 'коварный', 'составитель', 'рекламных', 'текстов',
		            'напоивший', 'языком', 'речью', 'заманивший', 'свое', 'агенство',
		            'которое', 'использовало', 'снова', 'снова', 'своих', 'проектах',
		            'если', 'переписали', 'то', 'живет', 'там', 'до', 'сих', 'пор']
		}
	};

	var prefs = require('preferences');
	prefs.define('lorem.defaultLang', 'en');

	/**
	 * @param {AbbreviationNode} tree
	 * @param {Object} options
	 */
	require('abbreviationParser').addPreprocessor(function(tree, options) {
		var re = /^(?:lorem|lipsum)([a-z]{2})?(\d*)$/i, match;

		/** @param {AbbreviationNode} node */
		tree.findAll(function(node) {
			if (node._name && (match = node._name.match(re))) {
				var wordCound = match[2] || 30;
				var lang = match[1] || prefs.get('lorem.defaultLang') || 'en';

				// force node name resolving if node should be repeated
				// or contains attributes. In this case, node should be outputed
				// as tag, otherwise as text-only node
				node._name = '';
				node.data('forceNameResolving', node.isRepeating() || node.attributeList().length);
				node.data('pasteOverwrites', true);
				node.data('paste', function(i, content) {
					return paragraph(lang, wordCound, !i);
				});
			}
		});
	});

	/**
	 * Returns random integer between <code>from</code> and <code>to</code> values
	 * @param {Number} from
	 * @param {Number} to
	 * @returns {Number}
	 */
	function randint(from, to) {
		return Math.round(Math.random() * (to - from) + from);
	}

	/**
	 * @param {Array} arr
	 * @param {Number} count
	 * @returns {Array}
	 */
	function sample(arr, count) {
		var len = arr.length;
		var iterations = Math.min(len, count);
		var result = [];
		while (result.length < iterations) {
			var randIx = randint(0, len - 1);
			if (!_.include(result, randIx))
				result.push(randIx);
		}

		return _.map(result, function(ix) {
			return arr[ix];
		});
	}

	function choice(val) {
		if (_.isString(val))
			return val.charAt(randint(0, val.length - 1));

		return val[randint(0, val.length - 1)];
	}

	function sentence(words, end) {
		if (words.length) {
			words[0] = words[0].charAt(0).toUpperCase() + words[0].substring(1);
		}

		return words.join(' ') + (end || choice('?!...')); // more dots that question marks
	}

	/**
	 * Insert commas at randomly selected words. This function modifies values
	 * inside <code>words</code> array
	 * @param {Array} words
	 */
	function insertCommas(words) {
		var len = words.length;
		var totalCommas = 0;

		if (len > 3 && len <= 6) {
			totalCommas = randint(0, 1);
		} else if (len > 6 && len <= 12) {
			totalCommas = randint(0, 2);
		} else {
			totalCommas = randint(1, 4);
		}

		_.each(_.range(totalCommas), function(ix) {
			if (ix < words.length - 1) {
				words[ix] += ',';
			}
		});
	}

	/**
	 * Generate a paragraph of "Lorem ipsum" text
	 * @param {Number} wordCount Words count in paragraph
	 * @param {Boolean} startWithCommon Should paragraph start with common
	 * "lorem ipsum" sentence.
	 * @returns {String}
	 */
	function paragraph(lang, wordCount, startWithCommon) {
		var data = langs[lang];
		if (!data) {
			return '';
		}

		var result = [];
		var totalWords = 0;
		var words;

		wordCount = parseInt(wordCount, 10);

		if (startWithCommon && data.common) {
			words = data.common.slice(0, wordCount);
			if (words.length > 5)
				words[4] += ',';
			totalWords += words.length;
			result.push(sentence(words, '.'));
		}

		while (totalWords < wordCount) {
			words = sample(data.words, Math.min(randint(3, 12) * randint(1, 5), wordCount - totalWords));
			totalWords += words.length;
			insertCommas(words);
			result.push(sentence(words));
		}

		return result.join(' ');
	}

	return {
		/**
		 * Adds new language words for Lorem Ipsum generator
		 * @param {String} lang Two-letter lang definition
		 * @param {Object} data Words for language. Maight be either a space-separated
		 * list of words (String), Array of words or object with <code>text</code> and
		 * <code>common</code> properties
		 */
		addLang: function(lang, data) {
			if (_.isString(data)) {
				data = {words: _.compact(data.split(' '))};
			} else if (_.isArray(data)) {
				data = {words: data};
			}

			langs[lang] = data;
		}
	}
});/**
 * A back-end bootstrap module with commonly used methods for loading user data
 * @param {Function} require
 * @param {Underscore} _
 */
emmet.define('bootstrap', function(require, _) {
var snippets = {
	"variables": {
		"lang": "en",
		"locale": "en-US",
		"charset": "UTF-8",
		"indentation": "\t",
		"newline": "\n"
	},

	"css": {
		"filters": "html",
		"snippets": {
			"@i": "@import url(|);",
			"@import": "@import url(|);",
			"@m": "@media ${1:screen} {\n\t|\n}",
			"@media": "@media ${1:screen} {\n\t|\n}",
			"@f": "@font-face {\n\tfont-family:|;\n\tsrc:url(|);\n}",
			"@f+": "@font-face {\n\tfont-family: '${1:FontName}';\n\tsrc: url('${2:FileName}.eot');\n\tsrc: url('${2:FileName}.eot?#iefix') format('embedded-opentype'),\n\t\t url('${2:FileName}.woff') format('woff'),\n\t\t url('${2:FileName}.ttf') format('truetype'),\n\t\t url('${2:FileName}.svg#${1:FontName}') format('svg');\n\tfont-style: ${3:normal};\n\tfont-weight: ${4:normal};\n}",

			"@kf": "@-webkit-keyframes ${1:identifier} {\n\t${2:from} { ${3} }${6}\n\t${4:to} { ${5} }\n}\n@-o-keyframes ${1:identifier} {\n\t${2:from} { ${3} }${6}\n\t${4:to} { ${5} }\n}\n@-moz-keyframes ${1:identifier} {\n\t${2:from} { ${3} }${6}\n\t${4:to} { ${5} }\n}\n@keyframes ${1:identifier} {\n\t${2:from} { ${3} }${6}\n\t${4:to} { ${5} }\n}",


			"anim": "animation:|;",
			"anim-": "animation:${1:name} ${2:duration} ${3:timing-function} ${4:delay} ${5:iteration-count} ${6:direction} ${7:fill-mode};",
			"animdel": "animation-delay:${1:time};",

			"animdir": "animation-direction:${1:normal};",
			"animdir:n": "animation-direction:normal;",
			"animdir:r": "animation-direction:reverse;",
			"animdir:a": "animation-direction:alternate;",
			"animdir:ar": "animation-direction:alternate-reverse;",

			"animdur": "animation-duration:${1:0}s;",

			"animfm": "animation-fill-mode:${1:both};",
			"animfm:f": "animation-fill-mode:forwards;",
			"animfm:b": "animation-fill-mode:backwards;",
			"animfm:bt": "animation-fill-mode:both;",
			"animfm:bh": "animation-fill-mode:both;",

			"animic": "animation-iteration-count:${1:1};",
			"animic:i": "animation-iteration-count:infinite;",

			"animn": "animation-name:${1:none};",

			"animps": "animation-play-state:${1:running};",
			"animps:p": "animation-play-state:paused;",
			"animps:r": "animation-play-state:running;",

			"animtf": "animation-timing-function:${1:linear};",
			"animtf:e": "animation-timing-function:ease;",
			"animtf:ei": "animation-timing-function:ease-in;",
			"animtf:eo": "animation-timing-function:ease-out;",
			"animtf:eio": "animation-timing-function:ease-in-out;",
			"animtf:l": "animation-timing-function:linear;",
			"animtf:cb": "animation-timing-function:cubic-bezier(${1:0.1}, ${2:0.7}, ${3:1.0}, ${3:0.1});",

			"ap": "appearance:${none};",

			"!": "!important",
			"pos": "position:${1:relative};",
			"pos:s": "position:static;",
			"pos:a": "position:absolute;",
			"pos:r": "position:relative;",
			"pos:f": "position:fixed;",
			"t": "top:|;",
			"t:a": "top:auto;",
			"r": "right:|;",
			"r:a": "right:auto;",
			"b": "bottom:|;",
			"b:a": "bottom:auto;",
			"l": "left:|;",
			"l:a": "left:auto;",
			"z": "z-index:|;",
			"z:a": "z-index:auto;",
			"fl": "float:${1:left};",
			"fl:n": "float:none;",
			"fl:l": "float:left;",
			"fl:r": "float:right;",
			"cl": "clear:${1:both};",
			"cl:n": "clear:none;",
			"cl:l": "clear:left;",
			"cl:r": "clear:right;",
			"cl:b": "clear:both;",

			"colm": "columns:|;",
			"colmc": "column-count:|;",
			"colmf": "column-fill:|;",
			"colmg": "column-gap:|;",
			"colmr": "column-rule:|;",
			"colmrc": "column-rule-color:|;",
			"colmrs": "column-rule-style:|;",
			"colmrw": "column-rule-width:|;",
			"colms": "column-span:|;",
			"colmw": "column-width:|;",

			"d": "display:${1:block};",
			"d:n": "display:none;",
			"d:b": "display:block;",
			"d:i": "display:inline;",
			"d:ib": "display:inline-block;",
			"d:ib+": "display: inline-block;\n*display: inline;\n*zoom: 1;",
			"d:li": "display:list-item;",
			"d:ri": "display:run-in;",
			"d:cp": "display:compact;",
			"d:tb": "display:table;",
			"d:itb": "display:inline-table;",
			"d:tbcp": "display:table-caption;",
			"d:tbcl": "display:table-column;",
			"d:tbclg": "display:table-column-group;",
			"d:tbhg": "display:table-header-group;",
			"d:tbfg": "display:table-footer-group;",
			"d:tbr": "display:table-row;",
			"d:tbrg": "display:table-row-group;",
			"d:tbc": "display:table-cell;",
			"d:rb": "display:ruby;",
			"d:rbb": "display:ruby-base;",
			"d:rbbg": "display:ruby-base-group;",
			"d:rbt": "display:ruby-text;",
			"d:rbtg": "display:ruby-text-group;",
			"v": "visibility:${1:hidden};",
			"v:v": "visibility:visible;",
			"v:h": "visibility:hidden;",
			"v:c": "visibility:collapse;",
			"ov": "overflow:${1:hidden};",
			"ov:v": "overflow:visible;",
			"ov:h": "overflow:hidden;",
			"ov:s": "overflow:scroll;",
			"ov:a": "overflow:auto;",
			"ovx": "overflow-x:${1:hidden};",
			"ovx:v": "overflow-x:visible;",
			"ovx:h": "overflow-x:hidden;",
			"ovx:s": "overflow-x:scroll;",
			"ovx:a": "overflow-x:auto;",
			"ovy": "overflow-y:${1:hidden};",
			"ovy:v": "overflow-y:visible;",
			"ovy:h": "overflow-y:hidden;",
			"ovy:s": "overflow-y:scroll;",
			"ovy:a": "overflow-y:auto;",
			"ovs": "overflow-style:${1:scrollbar};",
			"ovs:a": "overflow-style:auto;",
			"ovs:s": "overflow-style:scrollbar;",
			"ovs:p": "overflow-style:panner;",
			"ovs:m": "overflow-style:move;",
			"ovs:mq": "overflow-style:marquee;",
			"zoo": "zoom:1;",
			"zm": "zoom:1;",
			"cp": "clip:|;",
			"cp:a": "clip:auto;",
			"cp:r": "clip:rect(${1:top} ${2:right} ${3:bottom} ${4:left});",
			"bxz": "box-sizing:${1:border-box};",
			"bxz:cb": "box-sizing:content-box;",
			"bxz:bb": "box-sizing:border-box;",
			"bxsh": "box-shadow:${1:inset }${2:hoff} ${3:voff} ${4:blur} ${5:color};",
			"bxsh:r": "box-shadow:${1:inset }${2:hoff} ${3:voff} ${4:blur} ${5:spread }rgb(${6:0}, ${7:0}, ${8:0});",
			"bxsh:ra": "box-shadow:${1:inset }${2:h} ${3:v} ${4:blur} ${5:spread }rgba(${6:0}, ${7:0}, ${8:0}, .${9:5});",
			"bxsh:n": "box-shadow:none;",
			"m": "margin:|;",
			"m:a": "margin:auto;",
			"mt": "margin-top:|;",
			"mt:a": "margin-top:auto;",
			"mr": "margin-right:|;",
			"mr:a": "margin-right:auto;",
			"mb": "margin-bottom:|;",
			"mb:a": "margin-bottom:auto;",
			"ml": "margin-left:|;",
			"ml:a": "margin-left:auto;",
			"p": "padding:|;",
			"pt": "padding-top:|;",
			"pr": "padding-right:|;",
			"pb": "padding-bottom:|;",
			"pl": "padding-left:|;",
			"w": "width:|;",
			"w:a": "width:auto;",
			"h": "height:|;",
			"h:a": "height:auto;",
			"maw": "max-width:|;",
			"maw:n": "max-width:none;",
			"mah": "max-height:|;",
			"mah:n": "max-height:none;",
			"miw": "min-width:|;",
			"mih": "min-height:|;",
			"mar": "max-resolution:${1:res};",
			"mir": "min-resolution:${1:res};",
			"ori": "orientation:|;",
			"ori:l": "orientation:landscape;",
			"ori:p": "orientation:portrait;",
			"ol": "outline:|;",
			"ol:n": "outline:none;",
			"olo": "outline-offset:|;",
			"olw": "outline-width:|;",
			"olw:tn": "outline-width:thin;",
			"olw:m": "outline-width:medium;",
			"olw:tc": "outline-width:thick;",
			"ols": "outline-style:|;",
			"ols:n": "outline-style:none;",
			"ols:dt": "outline-style:dotted;",
			"ols:ds": "outline-style:dashed;",
			"ols:s": "outline-style:solid;",
			"ols:db": "outline-style:double;",
			"ols:g": "outline-style:groove;",
			"ols:r": "outline-style:ridge;",
			"ols:i": "outline-style:inset;",
			"ols:o": "outline-style:outset;",
			"olc": "outline-color:#${1:000};",
			"olc:i": "outline-color:invert;",
			"bd": "border:|;",
			"bd+": "border:${1:1px} ${2:solid} ${3:#000};",
			"bd:n": "border:none;",
			"bdbk": "border-break:${1:close};",
			"bdbk:c": "border-break:close;",
			"bdcl": "border-collapse:|;",
			"bdcl:c": "border-collapse:collapse;",
			"bdcl:s": "border-collapse:separate;",
			"bdc": "border-color:#${1:000};",
			"bdc:t": "border-color:transparent;",
			"bdi": "border-image:url(|);",
			"bdi:n": "border-image:none;",
			"bdti": "border-top-image:url(|);",
			"bdti:n": "border-top-image:none;",
			"bdri": "border-right-image:url(|);",
			"bdri:n": "border-right-image:none;",
			"bdbi": "border-bottom-image:url(|);",
			"bdbi:n": "border-bottom-image:none;",
			"bdli": "border-left-image:url(|);",
			"bdli:n": "border-left-image:none;",
			"bdci": "border-corner-image:url(|);",
			"bdci:n": "border-corner-image:none;",
			"bdci:c": "border-corner-image:continue;",
			"bdtli": "border-top-left-image:url(|);",
			"bdtli:n": "border-top-left-image:none;",
			"bdtli:c": "border-top-left-image:continue;",
			"bdtri": "border-top-right-image:url(|);",
			"bdtri:n": "border-top-right-image:none;",
			"bdtri:c": "border-top-right-image:continue;",
			"bdbri": "border-bottom-right-image:url(|);",
			"bdbri:n": "border-bottom-right-image:none;",
			"bdbri:c": "border-bottom-right-image:continue;",
			"bdbli": "border-bottom-left-image:url(|);",
			"bdbli:n": "border-bottom-left-image:none;",
			"bdbli:c": "border-bottom-left-image:continue;",
			"bdf": "border-fit:${1:repeat};",
			"bdf:c": "border-fit:clip;",
			"bdf:r": "border-fit:repeat;",
			"bdf:sc": "border-fit:scale;",
			"bdf:st": "border-fit:stretch;",
			"bdf:ow": "border-fit:overwrite;",
			"bdf:of": "border-fit:overflow;",
			"bdf:sp": "border-fit:space;",
			"bdlen": "border-length:|;",
			"bdlen:a": "border-length:auto;",
			"bdsp": "border-spacing:|;",
			"bds": "border-style:|;",
			"bds:n": "border-style:none;",
			"bds:h": "border-style:hidden;",
			"bds:dt": "border-style:dotted;",
			"bds:ds": "border-style:dashed;",
			"bds:s": "border-style:solid;",
			"bds:db": "border-style:double;",
			"bds:dtds": "border-style:dot-dash;",
			"bds:dtdtds": "border-style:dot-dot-dash;",
			"bds:w": "border-style:wave;",
			"bds:g": "border-style:groove;",
			"bds:r": "border-style:ridge;",
			"bds:i": "border-style:inset;",
			"bds:o": "border-style:outset;",
			"bdw": "border-width:|;",
			"bdtw": "border-top-width:|;",
			"bdrw": "border-right-width:|;",
			"bdbw": "border-bottom-width:|;",
			"bdlw": "border-left-width:|;",
			"bdt": "border-top:|;",
			"bt": "border-top:|;",
			"bdt+": "border-top:${1:1px} ${2:solid} ${3:#000};",
			"bdt:n": "border-top:none;",
			"bdts": "border-top-style:|;",
			"bdts:n": "border-top-style:none;",
			"bdtc": "border-top-color:#${1:000};",
			"bdtc:t": "border-top-color:transparent;",
			"bdr": "border-right:|;",
			"br": "border-right:|;",
			"bdr+": "border-right:${1:1px} ${2:solid} ${3:#000};",
			"bdr:n": "border-right:none;",
			"bdrst": "border-right-style:|;",
			"bdrst:n": "border-right-style:none;",
			"bdrc": "border-right-color:#${1:000};",
			"bdrc:t": "border-right-color:transparent;",
			"bdb": "border-bottom:|;",
			"bb": "border-bottom:|;",
			"bdb+": "border-bottom:${1:1px} ${2:solid} ${3:#000};",
			"bdb:n": "border-bottom:none;",
			"bdbs": "border-bottom-style:|;",
			"bdbs:n": "border-bottom-style:none;",
			"bdbc": "border-bottom-color:#${1:000};",
			"bdbc:t": "border-bottom-color:transparent;",
			"bdl": "border-left:|;",
			"bl": "border-left:|;",
			"bdl+": "border-left:${1:1px} ${2:solid} ${3:#000};",
			"bdl:n": "border-left:none;",
			"bdls": "border-left-style:|;",
			"bdls:n": "border-left-style:none;",
			"bdlc": "border-left-color:#${1:000};",
			"bdlc:t": "border-left-color:transparent;",
			"bdrs": "border-radius:|;",
			"bdtrrs": "border-top-right-radius:|;",
			"bdtlrs": "border-top-left-radius:|;",
			"bdbrrs": "border-bottom-right-radius:|;",
			"bdblrs": "border-bottom-left-radius:|;",
			"bg": "background:#${1:000};",
			"bg+": "background:${1:#fff} url(${2}) ${3:0} ${4:0} ${5:no-repeat};",
			"bg:n": "background:none;",
			"bg:ie": "filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='${1:x}.png',sizingMethod='${2:crop}');",
			"bgc": "background-color:#${1:fff};",
			"bgc:t": "background-color:transparent;",
			"bgi": "background-image:url(|);",
			"bgi:n": "background-image:none;",
			"bgr": "background-repeat:|;",
			"bgr:n": "background-repeat:no-repeat;",
			"bgr:x": "background-repeat:repeat-x;",
			"bgr:y": "background-repeat:repeat-y;",
			"bgr:sp": "background-repeat:space;",
			"bgr:rd": "background-repeat:round;",
			"bga": "background-attachment:|;",
			"bga:f": "background-attachment:fixed;",
			"bga:s": "background-attachment:scroll;",
			"bgp": "background-position:${1:0} ${2:0};",
			"bgpx": "background-position-x:|;",
			"bgpy": "background-position-y:|;",
			"bgbk": "background-break:|;",
			"bgbk:bb": "background-break:bounding-box;",
			"bgbk:eb": "background-break:each-box;",
			"bgbk:c": "background-break:continuous;",
			"bgcp": "background-clip:${1:padding-box};",
			"bgcp:bb": "background-clip:border-box;",
			"bgcp:pb": "background-clip:padding-box;",
			"bgcp:cb": "background-clip:content-box;",
			"bgcp:nc": "background-clip:no-clip;",
			"bgo": "background-origin:|;",
			"bgo:pb": "background-origin:padding-box;",
			"bgo:bb": "background-origin:border-box;",
			"bgo:cb": "background-origin:content-box;",
			"bgsz": "background-size:|;",
			"bgsz:a": "background-size:auto;",
			"bgsz:ct": "background-size:contain;",
			"bgsz:cv": "background-size:cover;",
			"c": "color:#${1:000};",
			"c:r": "color:rgb(${1:0}, ${2:0}, ${3:0});",
			"c:ra": "color:rgba(${1:0}, ${2:0}, ${3:0}, .${4:5});",
			"cm": "/* |${child} */",
			"cnt": "content:'|';",
			"cnt:n": "content:normal;",
			"cnt:oq": "content:open-quote;",
			"cnt:noq": "content:no-open-quote;",
			"cnt:cq": "content:close-quote;",
			"cnt:ncq": "content:no-close-quote;",
			"cnt:a": "content:attr(|);",
			"cnt:c": "content:counter(|);",
			"cnt:cs": "content:counters(|);",


			"tbl": "table-layout:|;",
			"tbl:a": "table-layout:auto;",
			"tbl:f": "table-layout:fixed;",
			"cps": "caption-side:|;",
			"cps:t": "caption-side:top;",
			"cps:b": "caption-side:bottom;",
			"ec": "empty-cells:|;",
			"ec:s": "empty-cells:show;",
			"ec:h": "empty-cells:hide;",
			"lis": "list-style:|;",
			"lis:n": "list-style:none;",
			"lisp": "list-style-position:|;",
			"lisp:i": "list-style-position:inside;",
			"lisp:o": "list-style-position:outside;",
			"list": "list-style-type:|;",
			"list:n": "list-style-type:none;",
			"list:d": "list-style-type:disc;",
			"list:c": "list-style-type:circle;",
			"list:s": "list-style-type:square;",
			"list:dc": "list-style-type:decimal;",
			"list:dclz": "list-style-type:decimal-leading-zero;",
			"list:lr": "list-style-type:lower-roman;",
			"list:ur": "list-style-type:upper-roman;",
			"lisi": "list-style-image:|;",
			"lisi:n": "list-style-image:none;",
			"q": "quotes:|;",
			"q:n": "quotes:none;",
			"q:ru": "quotes:'\\00AB' '\\00BB' '\\201E' '\\201C';",
			"q:en": "quotes:'\\201C' '\\201D' '\\2018' '\\2019';",
			"ct": "content:|;",
			"ct:n": "content:normal;",
			"ct:oq": "content:open-quote;",
			"ct:noq": "content:no-open-quote;",
			"ct:cq": "content:close-quote;",
			"ct:ncq": "content:no-close-quote;",
			"ct:a": "content:attr(|);",
			"ct:c": "content:counter(|);",
			"ct:cs": "content:counters(|);",
			"coi": "counter-increment:|;",
			"cor": "counter-reset:|;",
			"va": "vertical-align:${1:top};",
			"va:sup": "vertical-align:super;",
			"va:t": "vertical-align:top;",
			"va:tt": "vertical-align:text-top;",
			"va:m": "vertical-align:middle;",
			"va:bl": "vertical-align:baseline;",
			"va:b": "vertical-align:bottom;",
			"va:tb": "vertical-align:text-bottom;",
			"va:sub": "vertical-align:sub;",
			"ta": "text-align:${1:left};",
			"ta:l": "text-align:left;",
			"ta:c": "text-align:center;",
			"ta:r": "text-align:right;",
			"ta:j": "text-align:justify;",
			"ta-lst": "text-align-last:|;",
			"tal:a": "text-align-last:auto;",
			"tal:l": "text-align-last:left;",
			"tal:c": "text-align-last:center;",
			"tal:r": "text-align-last:right;",
			"td": "text-decoration:${1:none};",
			"td:n": "text-decoration:none;",
			"td:u": "text-decoration:underline;",
			"td:o": "text-decoration:overline;",
			"td:l": "text-decoration:line-through;",
			"te": "text-emphasis:|;",
			"te:n": "text-emphasis:none;",
			"te:ac": "text-emphasis:accent;",
			"te:dt": "text-emphasis:dot;",
			"te:c": "text-emphasis:circle;",
			"te:ds": "text-emphasis:disc;",
			"te:b": "text-emphasis:before;",
			"te:a": "text-emphasis:after;",
			"th": "text-height:|;",
			"th:a": "text-height:auto;",
			"th:f": "text-height:font-size;",
			"th:t": "text-height:text-size;",
			"th:m": "text-height:max-size;",
			"ti": "text-indent:|;",
			"ti:-": "text-indent:-9999px;",
			"tj": "text-justify:|;",
			"tj:a": "text-justify:auto;",
			"tj:iw": "text-justify:inter-word;",
			"tj:ii": "text-justify:inter-ideograph;",
			"tj:ic": "text-justify:inter-cluster;",
			"tj:d": "text-justify:distribute;",
			"tj:k": "text-justify:kashida;",
			"tj:t": "text-justify:tibetan;",
			"tov": "text-overflow:${ellipsis};",
			"tov:e": "text-overflow:ellipsis;",
			"tov:c": "text-overflow:clip;",
			"to": "text-outline:|;",
			"to+": "text-outline:${1:0} ${2:0} ${3:#000};",
			"to:n": "text-outline:none;",
			"tr": "text-replace:|;",
			"tr:n": "text-replace:none;",
			"tt": "text-transform:${1:uppercase};",
			"tt:n": "text-transform:none;",
			"tt:c": "text-transform:capitalize;",
			"tt:u": "text-transform:uppercase;",
			"tt:l": "text-transform:lowercase;",
			"tw": "text-wrap:|;",
			"tw:n": "text-wrap:normal;",
			"tw:no": "text-wrap:none;",
			"tw:u": "text-wrap:unrestricted;",
			"tw:s": "text-wrap:suppress;",
			"tsh": "text-shadow:${1:hoff} ${2:voff} ${3:blur} ${4:#000};",
			"tsh:r": "text-shadow:${1:h} ${2:v} ${3:blur} rgb(${4:0}, ${5:0}, ${6:0});",
			"tsh:ra": "text-shadow:${1:h} ${2:v} ${3:blur} rgba(${4:0}, ${5:0}, ${6:0}, .${7:5});",
			"tsh+": "text-shadow:${1:0} ${2:0} ${3:0} ${4:#000};",
			"tsh:n": "text-shadow:none;",
			"trf": "transform:|;",
			"trf:skx": "transform: skewX(${1:angle});",
			"trf:sky": "transform: skewY(${1:angle});",
			"trf:sc": "transform: scale(${1:x}, ${2:y});",
			"trf:scx": "transform: scaleX(${1:x});",
			"trf:scy": "transform: scaleY(${1:y});",
			"trf:r": "transform: rotate(${1:angle});",
			"trf:t": "transform: translate(${1:x}, ${2:y});",
			"trf:tx": "transform: translateX(${1:x});",
			"trf:ty": "transform: translateY(${1:y});",
			"trfo": "transform-origin:|;",
			"trfs": "transform-style:${1:preserve-3d};",
			"trs": "transition:${1:prop} ${2:time};",
			"trsde": "transition-delay:${1:time};",
			"trsdu": "transition-duration:${1:time};",
			"trsp": "transition-property:${1:prop};",
			"trstf": "transition-timing-function:${1:tfunc};",
			"lh": "line-height:|;",
			"whs": "white-space:|;",
			"whs:n": "white-space:normal;",
			"whs:p": "white-space:pre;",
			"whs:nw": "white-space:nowrap;",
			"whs:pw": "white-space:pre-wrap;",
			"whs:pl": "white-space:pre-line;",
			"whsc": "white-space-collapse:|;",
			"whsc:n": "white-space-collapse:normal;",
			"whsc:k": "white-space-collapse:keep-all;",
			"whsc:l": "white-space-collapse:loose;",
			"whsc:bs": "white-space-collapse:break-strict;",
			"whsc:ba": "white-space-collapse:break-all;",
			"wob": "word-break:|;",
			"wob:n": "word-break:normal;",
			"wob:k": "word-break:keep-all;",
			"wob:ba": "word-break:break-all;",
			"wos": "word-spacing:|;",
			"wow": "word-wrap:|;",
			"wow:nm": "word-wrap:normal;",
			"wow:n": "word-wrap:none;",
			"wow:u": "word-wrap:unrestricted;",
			"wow:s": "word-wrap:suppress;",
			"wow:b": "word-wrap:break-word;",
			"wm": "writing-mode:${1:lr-tb};",
			"wm:lrt": "writing-mode:lr-tb;",
			"wm:lrb": "writing-mode:lr-bt;",
			"wm:rlt": "writing-mode:rl-tb;",
			"wm:rlb": "writing-mode:rl-bt;",
			"wm:tbr": "writing-mode:tb-rl;",
			"wm:tbl": "writing-mode:tb-lr;",
			"wm:btl": "writing-mode:bt-lr;",
			"wm:btr": "writing-mode:bt-rl;",
			"lts": "letter-spacing:|;",
			"lts-n": "letter-spacing:normal;",
			"f": "font:|;",
			"f+": "font:${1:1em} ${2:Arial,sans-serif};",
			"fw": "font-weight:|;",
			"fw:n": "font-weight:normal;",
			"fw:b": "font-weight:bold;",
			"fw:br": "font-weight:bolder;",
			"fw:lr": "font-weight:lighter;",
			"fs": "font-style:${italic};",
			"fs:n": "font-style:normal;",
			"fs:i": "font-style:italic;",
			"fs:o": "font-style:oblique;",
			"fv": "font-variant:|;",
			"fv:n": "font-variant:normal;",
			"fv:sc": "font-variant:small-caps;",
			"fz": "font-size:|;",
			"fza": "font-size-adjust:|;",
			"fza:n": "font-size-adjust:none;",
			"ff": "font-family:|;",
			"ff:s": "font-family:serif;",
			"ff:ss": "font-family:sans-serif;",
			"ff:c": "font-family:cursive;",
			"ff:f": "font-family:fantasy;",
			"ff:m": "font-family:monospace;",
			"ff:a": "font-family: Arial, \"Helvetica Neue\", Helvetica, sans-serif;",
			"ff:t": "font-family: \"Times New Roman\", Times, Baskerville, Georgia, serif;",
			"ff:v": "font-family: Verdana, Geneva, sans-serif;",
			"fef": "font-effect:|;",
			"fef:n": "font-effect:none;",
			"fef:eg": "font-effect:engrave;",
			"fef:eb": "font-effect:emboss;",
			"fef:o": "font-effect:outline;",
			"fem": "font-emphasize:|;",
			"femp": "font-emphasize-position:|;",
			"femp:b": "font-emphasize-position:before;",
			"femp:a": "font-emphasize-position:after;",
			"fems": "font-emphasize-style:|;",
			"fems:n": "font-emphasize-style:none;",
			"fems:ac": "font-emphasize-style:accent;",
			"fems:dt": "font-emphasize-style:dot;",
			"fems:c": "font-emphasize-style:circle;",
			"fems:ds": "font-emphasize-style:disc;",
			"fsm": "font-smooth:|;",
			"fsm:a": "font-smooth:auto;",
			"fsm:n": "font-smooth:never;",
			"fsm:aw": "font-smooth:always;",
			"fst": "font-stretch:|;",
			"fst:n": "font-stretch:normal;",
			"fst:uc": "font-stretch:ultra-condensed;",
			"fst:ec": "font-stretch:extra-condensed;",
			"fst:c": "font-stretch:condensed;",
			"fst:sc": "font-stretch:semi-condensed;",
			"fst:se": "font-stretch:semi-expanded;",
			"fst:e": "font-stretch:expanded;",
			"fst:ee": "font-stretch:extra-expanded;",
			"fst:ue": "font-stretch:ultra-expanded;",
			"op": "opacity:|;",
			"op+": "opacity: $1;\nfilter: alpha(opacity=$2);",
			"op:ie": "filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);",
			"op:ms": "-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=100)';",
			"rsz": "resize:|;",
			"rsz:n": "resize:none;",
			"rsz:b": "resize:both;",
			"rsz:h": "resize:horizontal;",
			"rsz:v": "resize:vertical;",
			"cur": "cursor:${pointer};",
			"cur:a": "cursor:auto;",
			"cur:d": "cursor:default;",
			"cur:c": "cursor:crosshair;",
			"cur:ha": "cursor:hand;",
			"cur:he": "cursor:help;",
			"cur:m": "cursor:move;",
			"cur:p": "cursor:pointer;",
			"cur:t": "cursor:text;",
			"pgbb": "page-break-before:|;",
			"pgbb:au": "page-break-before:auto;",
			"pgbb:al": "page-break-before:always;",
			"pgbb:l": "page-break-before:left;",
			"pgbb:r": "page-break-before:right;",
			"pgbi": "page-break-inside:|;",
			"pgbi:au": "page-break-inside:auto;",
			"pgbi:av": "page-break-inside:avoid;",
			"pgba": "page-break-after:|;",
			"pgba:au": "page-break-after:auto;",
			"pgba:al": "page-break-after:always;",
			"pgba:l": "page-break-after:left;",
			"pgba:r": "page-break-after:right;",
			"orp": "orphans:|;",
			"us": "user-select:${none};",
			"wid": "widows:|;",
			"wfsm": "-webkit-font-smoothing:${antialiased};",
			"wfsm:a": "-webkit-font-smoothing:antialiased;",
			"wfsm:s": "-webkit-font-smoothing:subpixel-antialiased;",
			"wfsm:sa": "-webkit-font-smoothing:subpixel-antialiased;",
			"wfsm:n": "-webkit-font-smoothing:none;"
		}
	},

	"html": {
		"filters": "html",
		"profile": "html",
		"snippets": {
			"!!!":    "<!doctype html>",
			"!!!4t":  "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">",
			"!!!4s":  "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">",
			"!!!xt":  "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">",
			"!!!xs":  "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">",
			"!!!xxs": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\" \"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">",

			"c": "<!-- |${child} -->",
			"cc:ie6": "<!--[if lte IE 6]>\n\t${child}|\n<![endif]-->",
			"cc:ie": "<!--[if IE]>\n\t${child}|\n<![endif]-->",
			"cc:noie": "<!--[if !IE]><!-->\n\t${child}|\n<!--<![endif]-->"
		},

		"abbreviations": {
			"!": "html:5",
			"a": "<a href=\"\">",
			"a:link": "<a href=\"http://|\">",
			"a:mail": "<a href=\"mailto:|\">",
			"abbr": "<abbr title=\"\">",
			"acronym": "<acronym title=\"\">",
			"base": "<base href=\"\" />",
			"basefont": "<basefont/>",
			"br": "<br/>",
			"frame": "<frame/>",
			"hr": "<hr/>",
			"bdo": "<bdo dir=\"\">",
			"bdo:r": "<bdo dir=\"rtl\">",
			"bdo:l": "<bdo dir=\"ltr\">",
			"col": "<col/>",
			"link": "<link rel=\"stylesheet\" href=\"\" />",
			"link:css": "<link rel=\"stylesheet\" href=\"${1:style}.css\" />",
			"link:print": "<link rel=\"stylesheet\" href=\"${1:print}.css\" media=\"print\" />",
			"link:favicon": "<link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"${1:favicon.ico}\" />",
			"link:touch": "<link rel=\"apple-touch-icon\" href=\"${1:favicon.png}\" />",
			"link:rss": "<link rel=\"alternate\" type=\"application/rss+xml\" title=\"RSS\" href=\"${1:rss.xml}\" />",
			"link:atom": "<link rel=\"alternate\" type=\"application/atom+xml\" title=\"Atom\" href=\"${1:atom.xml}\" />",
			"meta": "<meta/>",
			"meta:utf": "<meta http-equiv=\"Content-Type\" content=\"text/html;charset=UTF-8\" />",
			"meta:win": "<meta http-equiv=\"Content-Type\" content=\"text/html;charset=windows-1251\" />",
			"meta:vp": "<meta name=\"viewport\" content=\"width=${1:device-width}, user-scalable=${2:no}, initial-scale=${3:1.0}, maximum-scale=${4:1.0}, minimum-scale=${5:1.0}\" />",
			"meta:compat": "<meta http-equiv=\"X-UA-Compatible\" content=\"${1:IE=7}\" />",
			"style": "<style>",
			"script": "<script>",
			"script:src": "<script src=\"\">",
			"img": "<img src=\"\" alt=\"\" />",
			"iframe": "<iframe src=\"\" frameborder=\"0\">",
			"embed": "<embed src=\"\" type=\"\" />",
			"object": "<object data=\"\" type=\"\">",
			"param": "<param name=\"\" value=\"\" />",
			"map": "<map name=\"\">",
			"area": "<area shape=\"\" coords=\"\" href=\"\" alt=\"\" />",
			"area:d": "<area shape=\"default\" href=\"\" alt=\"\" />",
			"area:c": "<area shape=\"circle\" coords=\"\" href=\"\" alt=\"\" />",
			"area:r": "<area shape=\"rect\" coords=\"\" href=\"\" alt=\"\" />",
			"area:p": "<area shape=\"poly\" coords=\"\" href=\"\" alt=\"\" />",
			"form": "<form action=\"\">",
			"form:get": "<form action=\"\" method=\"get\">",
			"form:post": "<form action=\"\" method=\"post\">",
			"label": "<label for=\"\">",
			"input": "<input type=\"${1:text}\" />",
			"inp": "<input type=\"${1:text}\" name=\"\" id=\"\" />",
			"input:hidden": "input[type=hidden name]",
			"input:h": "input:hidden",
			"input:text": "inp",
			"input:t": "inp",
			"input:search": "inp[type=search]",
			"input:email": "inp[type=email]",
			"input:url": "inp[type=url]",
			"input:password": "inp[type=password]",
			"input:p": "input:password",
			"input:datetime": "inp[type=datetime]",
			"input:date": "inp[type=date]",
			"input:datetime-local": "inp[type=datetime-local]",
			"input:month": "inp[type=month]",
			"input:week": "inp[type=week]",
			"input:time": "inp[type=time]",
			"input:number": "inp[type=number]",
			"input:color": "inp[type=color]",
			"input:checkbox": "inp[type=checkbox]",
			"input:c": "input:checkbox",
			"input:radio": "inp[type=radio]",
			"input:r": "input:radio",
			"input:range": "inp[type=range]",
			"input:file": "inp[type=file]",
			"input:f": "input:file",
			"input:submit": "<input type=\"submit\" value=\"\" />",
			"input:s": "input:submit",
			"input:image": "<input type=\"image\" src=\"\" alt=\"\" />",
			"input:i": "input:image",
			"input:button": "<input type=\"button\" value=\"\" />",
			"input:b": "input:button",
			"isindex": "<isindex/>",
			"input:reset": "input:button[type=reset]",
			"select": "<select name=\"\" id=\"\">",
			"select:disabled": "select[disabled]",
			"select:d": "select[disabled]",
			"option": "<option value=\"\">",
			"textarea": "<textarea name=\"\" id=\"\" cols=\"${1:30}\" rows=\"${2:10}\">",
			"marquee": "<marquee behavior=\"\" direction=\"\">",
			"menu:context": "menu[type=context]>",
			"menu:c": "menu:context",
			"menu:toolbar": "menu[type=toolbar]>",
			"menu:t": "menu:toolbar",
			"video": "<video src=\"\">",
			"audio": "<audio src=\"\">",
			"html:xml": "<html xmlns=\"http://www.w3.org/1999/xhtml\">",
			"keygen": "<keygen/>",
			"command": "<command/>",
			"button:submit" : "button[type=submit]",
			"button:s" : "button[type=submit]",
			"button:reset" : "button[type=reset]",
			"button:r" : "button[type=reset]",
			"button:disabled" : "button[disabled]",
			"button:d" : "button[disabled]",
			"fieldset:disabled" : "fieldset[disabled]",
			"fieldset:d" : "fieldset[disabled]",

			"bq": "blockquote",
			"acr": "acronym",
			"fig": "figure",
			"figc": "figcaption",
			"ifr": "iframe",
			"emb": "embed",
			"obj": "object",
			"src": "source",
			"cap": "caption",
			"colg": "colgroup",
			"fst": "fieldset",
			"fst:d": "fieldset[disabled]",
			"btn": "button",
			"btn:b": "button[type=button]",
			"btn:r": "button[type=reset]",
			"btn:s": "button[type=submit]",
			"btn:d": "button[disabled]",
			"optg": "optgroup",
			"opt": "option",
			"tarea": "textarea",
			"leg": "legend",
			"sect": "section",
			"art": "article",
			"hdr": "header",
			"ftr": "footer",
			"adr": "address",
			"dlg": "dialog",
			"str": "strong",
			"prog": "progress",
			"fset": "fieldset",
			"fset:d": "fieldset[disabled]",
			"datag": "datagrid",
			"datal": "datalist",
			"kg": "keygen",
			"out": "output",
			"det": "details",
			"cmd": "command",
			"doc": "html>(head>meta[charset=UTF-8]+title{${1:Document}})+body",
			"doc4": "html>(head>meta[http-equiv=\"Content-Type\" content=\"text/html;charset=${charset}\"]+title{${1:Document}})+body",

			"html:4t":  "!!!4t+doc4[lang=${lang}]",
			"html:4s":  "!!!4s+doc4[lang=${lang}]",
			"html:xt":  "!!!xt+doc4[xmlns=http://www.w3.org/1999/xhtml xml:lang=${lang}]",
			"html:xs":  "!!!xs+doc4[xmlns=http://www.w3.org/1999/xhtml xml:lang=${lang}]",
			"html:xxs": "!!!xxs+doc4[xmlns=http://www.w3.org/1999/xhtml xml:lang=${lang}]",
			"html:5":   "!!!+doc[lang=${lang}]",

			"ol+": "ol>li",
			"ul+": "ul>li",
			"dl+": "dl>dt+dd",
			"map+": "map>area",
			"table+": "table>tr>td",
			"colgroup+": "colgroup>col",
			"colg+": "colgroup>col",
			"tr+": "tr>td",
			"select+": "select>option",
			"optgroup+": "optgroup>option",
			"optg+": "optgroup>option"
		}
	},

	"xml": {
		"extends": "html",
		"profile": "xml",
		"filters": "html"
	},

	"xsl": {
		"extends": "html",
		"profile": "xml",
		"filters": "html, xsl",
		"abbreviations": {
			"tm": "<xsl:template match=\"\" mode=\"\">",
			"tmatch": "tm",
			"tn": "<xsl:template name=\"\">",
			"tname": "tn",
			"call": "<xsl:call-template name=\"\"/>",
			"ap": "<xsl:apply-templates select=\"\" mode=\"\"/>",
			"api": "<xsl:apply-imports/>",
			"imp": "<xsl:import href=\"\"/>",
			"inc": "<xsl:include href=\"\"/>",

			"ch": "<xsl:choose>",
			"xsl:when": "<xsl:when test=\"\">",
			"wh": "xsl:when",
			"ot": "<xsl:otherwise>",
			"if": "<xsl:if test=\"\">",

			"par": "<xsl:param name=\"\">",
			"pare": "<xsl:param name=\"\" select=\"\"/>",
			"var": "<xsl:variable name=\"\">",
			"vare": "<xsl:variable name=\"\" select=\"\"/>",
			"wp": "<xsl:with-param name=\"\" select=\"\"/>",
			"key": "<xsl:key name=\"\" match=\"\" use=\"\"/>",

			"elem": "<xsl:element name=\"\">",
			"attr": "<xsl:attribute name=\"\">",
			"attrs": "<xsl:attribute-set name=\"\">",

			"cp": "<xsl:copy select=\"\"/>",
			"co": "<xsl:copy-of select=\"\"/>",
			"val": "<xsl:value-of select=\"\"/>",
			"each": "<xsl:for-each select=\"\">",
			"for": "each",
			"tex": "<xsl:text></xsl:text>",

			"com": "<xsl:comment>",
			"msg": "<xsl:message terminate=\"no\">",
			"fall": "<xsl:fallback>",
			"num": "<xsl:number value=\"\"/>",
			"nam": "<namespace-alias stylesheet-prefix=\"\" result-prefix=\"\"/>",
			"pres": "<xsl:preserve-space elements=\"\"/>",
			"strip": "<xsl:strip-space elements=\"\"/>",
			"proc": "<xsl:processing-instruction name=\"\">",
			"sort": "<xsl:sort select=\"\" order=\"\"/>",

			"choose+": "xsl:choose>xsl:when+xsl:otherwise",
			"xsl": "!!!+xsl:stylesheet[version=1.0 xmlns:xsl=http://www.w3.org/1999/XSL/Transform]>{\n|}"
		},
		"snippets": {
			"!!!": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
		}
	},

	"haml": {
		"filters": "haml",
		"extends": "html",
		"profile": "xml"
	},

	"scss": {
		"extends": "css"
	},

	"sass": {
		"extends": "css"
	},

	"less": {
		"extends": "css"
	},

	"stylus": {
		"extends": "css"
	},

	"styl": {
		"extends": "stylus"
	}
}
;
var res = require('resources');
var userData = res.getVocabulary('user') || {};
res.setVocabulary(require('utils').deepMerge(userData, snippets), 'user');
});

define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=e("./lib/lang"),o=e("./range").Range,u=e("./anchor").Anchor,a=e("./keyboard/hash_handler").HashHandler,f=e("./tokenizer").Tokenizer,l=o.comparePoints,c=function(){this.snippetMap={},this.snippetNameMap={}};(function(){r.implement(this,i),this.getTokenizer=function(){function e(e,t,n){return e=e.substr(1),/^\d+$/.test(e)&&!n.inFormatString?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function t(e){return"(?:[^\\\\"+e+"]|\\\\.)"}return c.$tokenizer=new f({start:[{regex:/:/,onMatch:function(e,t,n){return n.length&&n[0].expectIf?(n[0].expectIf=!1,n[0].elseBranch=n[0],[n[0]]):":"}},{regex:/\\./,onMatch:function(e,t,n){var r=e[1];return r=="}"&&n.length?e=r:"`$\\".indexOf(r)!=-1?e=r:n.inFormatString&&(r=="n"?e="\n":r=="t"?e="\n":"ulULE".indexOf(r)!=-1&&(e={changeCase:r,local:r>"a"})),[e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:e},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(t,n,r){var i=e(t.substr(1),n,r);return r.unshift(i[0]),i},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+t("\\|")+"*\\|",onMatch:function(e,t,n){n[0].choices=e.slice(1,-1).split(",")},next:"start"},{regex:"/("+t("/")+"+)/(?:("+t("/")+"*)/)(\\w*):?",onMatch:function(e,t,n){var r=n[0];return r.fmtString=e,e=this.splitRegex.exec(e),r.guard=e[1],r.fmt=e[2],r.flag=e[3],""},next:"start"},{regex:"`"+t("`")+"*`",onMatch:function(e,t,n){return n[0].code=e.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(e,t,n){n[0]&&(n[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+t("/")+"+)/",token:"regex"},{regex:"",onMatch:function(e,t,n){n.inFormatString=!0},next:"start"}]}),c.prototype.getTokenizer=function(){return c.$tokenizer},c.$tokenizer},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},this.$getDefaultValue=function(e,t){if(/^[A-Z]\d+$/.test(t)){var n=t.substr(1);return(this.variables[t[0]+"__"]||{})[n]}if(/^\d+$/.test(t))return(this.variables.__||{})[t];t=t.replace(/^TM_/,"");if(!e)return;var r=e.session;switch(t){case"CURRENT_WORD":var i=r.getWordRange();case"SELECTION":case"SELECTED_TEXT":return r.getTextRange(i);case"CURRENT_LINE":return r.getLine(e.getCursorPosition().row);case"PREV_LINE":return r.getLine(e.getCursorPosition().row-1);case"LINE_INDEX":return e.getCursorPosition().column;case"LINE_NUMBER":return e.getCursorPosition().row+1;case"SOFT_TABS":return r.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return r.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}},this.variables={},this.getVariableValue=function(e,t){return this.variables.hasOwnProperty(t)?this.variables[t](e,t)||"":this.$getDefaultValue(e,t)||""},this.tmStrFormat=function(e,t,n){var r=t.flag||"",i=t.guard;i=new RegExp(i,r.replace(/[^gi]/,""));var s=this.tokenizeTmSnippet(t.fmt,"formatString"),o=this,u=e.replace(i,function(){o.variables.__=arguments;var e=o.resolveVariables(s,n),t="E";for(var r=0;r<e.length;r++){var i=e[r];if(typeof i=="object"){e[r]="";if(i.changeCase&&i.local){var u=e[r+1];u&&typeof u=="string"&&(i.changeCase=="u"?e[r]=u[0].toUpperCase():e[r]=u[0].toLowerCase(),e[r+1]=u.substr(1))}else i.changeCase&&(t=i.changeCase)}else t=="U"?e[r]=i.toUpperCase():t=="L"&&(e[r]=i.toLowerCase())}return e.join("")});return this.variables.__=null,u},this.resolveVariables=function(e,t){function o(t){var n=e.indexOf(t,r+1);n!=-1&&(r=n)}var n=[];for(var r=0;r<e.length;r++){var i=e[r];if(typeof i=="string")n.push(i);else{if(typeof i!="object")continue;if(i.skip)o(i);else{if(i.processed<r)continue;if(i.text){var s=this.getVariableValue(t,i.text);s&&i.fmtString&&(s=this.tmStrFormat(s,i)),i.processed=r,i.expectIf==null?s&&(n.push(s),o(i)):s?i.skip=i.elseBranch:o(i)}else i.tabstopId!=null?n.push(i):i.changeCase!=null&&n.push(i)}}}return n},this.insertSnippetForSelection=function(e,t){function f(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];if(typeof r=="object"){if(a[r.tabstopId])continue;var i=e.lastIndexOf(r,n-1);r=t[i]||{tabstopId:r.tabstopId}}t[n]=r}return t}var n=e.getCursorPosition(),r=e.session.getLine(n.row),i=e.session.getTabString(),s=r.match(/^\s*/)[0];n.column<s.length&&(s=s.slice(0,n.column));var o=this.tokenizeTmSnippet(t);o=this.resolveVariables(o,e),o=o.map(function(e){return e=="\n"?e+s:typeof e=="string"?e.replace(/\t/g,i):e});var u=[];o.forEach(function(e,t){if(typeof e!="object")return;var n=e.tabstopId,r=u[n];r||(r=u[n]=[],r.index=n,r.value="");if(r.indexOf(e)!==-1)return;r.push(e);var i=o.indexOf(e,t+1);if(i===-1)return;var s=o.slice(t+1,i),a=s.some(function(e){return typeof e=="object"});a&&!r.value?r.value=s:s.length&&(!r.value||typeof r.value!="string")&&(r.value=s.join(""))}),u.forEach(function(e){e.length=0});var a={};for(var l=0;l<o.length;l++){var c=o[l];if(typeof c!="object")continue;var p=c.tabstopId,d=o.indexOf(c,l+1);if(a[p]){a[p]===c&&(a[p]=null);continue}var v=u[p],m=typeof v.value=="string"?[v.value]:f(v.value);m.unshift(l+1,Math.max(0,d-l)),m.push(c),a[p]=c,o.splice.apply(o,m),v.indexOf(c)===-1&&v.push(c)}var g=0,y=0,b="";o.forEach(function(e){typeof e=="string"?(e[0]==="\n"?(y=e.length-1,g++):y+=e.length,b+=e):e.start?e.end={row:g,column:y}:e.start={row:g,column:y}});var w=e.getSelectionRange(),E=e.session.replace(w,b),S=new h(e),x=e.inVirtualSelectionMode&&e.selection.index;S.addTabstops(u,w.start,E,x)},this.insertSnippet=function(e,t){var n=this;if(e.inVirtualSelectionMode)return n.insertSnippetForSelection(e,t);e.forEachSelection(function(){n.insertSnippetForSelection(e,t)},null,{keepOrder:!0}),e.tabstopManager&&e.tabstopManager.tabNext()},this.$getScope=function(e){var t=e.session.$mode.$id||"";t=t.split("/").pop();if(t==="html"||t==="php"){t==="php"&&!e.session.$mode.inlinePhp&&(t="html");var n=e.getCursorPosition(),r=e.session.getState(n.row);typeof r=="object"&&(r=r[0]),r.substring&&(r.substring(0,3)=="js-"?t="javascript":r.substring(0,4)=="css-"?t="css":r.substring(0,4)=="php-"&&(t="php"))}return t},this.getActiveScopes=function(e){var t=this.$getScope(e),n=[t],r=this.snippetMap;return r[t]&&r[t].includeScopes&&n.push.apply(n,r[t].includeScopes),n.push("_"),n},this.expandWithTab=function(e,t){var n=this,r=e.forEachSelection(function(){return n.expandSnippetForSelection(e,t)},null,{keepOrder:!0});return r&&e.tabstopManager&&e.tabstopManager.tabNext(),r},this.expandSnippetForSelection=function(e,t){var n=e.getCursorPosition(),r=e.session.getLine(n.row),i=r.substring(0,n.column),s=r.substr(n.column),o=this.snippetMap,u;return this.getActiveScopes(e).some(function(e){var t=o[e];return t&&(u=this.findMatchingSnippet(t,i,s)),!!u},this),u?t&&t.dryRun?!0:(e.session.doc.removeInLine(n.row,n.column-u.replaceBefore.length,n.column+u.replaceAfter.length),this.variables.M__=u.matchBefore,this.variables.T__=u.matchAfter,this.insertSnippetForSelection(e,u.content),this.variables.M__=this.variables.T__=null,!0):!1},this.findMatchingSnippet=function(e,t,n){for(var r=e.length;r--;){var i=e[r];if(i.startRe&&!i.startRe.test(t))continue;if(i.endRe&&!i.endRe.test(n))continue;if(!i.startRe&&!i.endRe)continue;return i.matchBefore=i.startRe?i.startRe.exec(t):[""],i.matchAfter=i.endRe?i.endRe.exec(n):[""],i.replaceBefore=i.triggerRe?i.triggerRe.exec(t)[0]:"",i.replaceAfter=i.endTriggerRe?i.endTriggerRe.exec(n)[0]:"",i}},this.snippetMap={},this.snippetNameMap={},this.register=function(e,t){function o(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function u(e,t,n){return e=o(e),t=o(t),n?(e=t+e,e&&e[e.length-1]!="$"&&(e+="$")):(e+=t,e&&e[0]!="^"&&(e="^"+e)),new RegExp(e)}function a(e){e.scope||(e.scope=t||"_"),t=e.scope,n[t]||(n[t]=[],r[t]={});var o=r[t];if(e.name){var a=o[e.name];a&&i.unregister(a),o[e.name]=e}n[t].push(e),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=s.escapeRegExp(e.tabTrigger));if(!e.trigger&&!e.guard&&!e.endTrigger&&!e.endGuard)return;e.startRe=u(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger,"",!0),e.endRe=u(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger,"",!0)}var n=this.snippetMap,r=this.snippetNameMap,i=this;e||(e=[]),e&&e.content?a(e):Array.isArray(e)&&e.forEach(a),this._signal("registerSnippets",{scope:t})},this.unregister=function(e,t){function i(e){var i=r[e.scope||t];if(i&&i[e.name]){delete i[e.name];var s=n[e.scope||t],o=s&&s.indexOf(e);o>=0&&s.splice(o,1)}}var n=this.snippetMap,r=this.snippetNameMap;e.content?i(e):Array.isArray(e)&&e.forEach(i)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");var t=[],n={},r=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,i;while(i=r.exec(e)){if(i[1])try{n=JSON.parse(i[1]),t.push(n)}catch(s){}if(i[4])n.content=i[4].replace(/^\t/gm,""),t.push(n),n={};else{var o=i[2],u=i[3];if(o=="regex"){var a=/\/((?:[^\/\\]|\\.)*)|$/g;n.guard=a.exec(u)[1],n.trigger=a.exec(u)[1],n.endTrigger=a.exec(u)[1],n.endGuard=a.exec(u)[1]}else o=="snippet"?(n.tabTrigger=u.match(/^\S*/)[0],n.name||(n.name=u)):n[o]=u}}return t},this.getSnippetByName=function(e,t){var n=this.snippetNameMap,r;return this.getActiveScopes(t).some(function(t){var i=n[t];return i&&(r=i[e]),!!r},this),r}}).call(c.prototype);var h=function(e){if(e.tabstopManager)return e.tabstopManager;e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=s.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e)};(function(){this.attach=function(e){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){var t=e,n=e.action[0]=="r",r=e.start,i=e.end,s=r.row,o=i.row,u=o-s,a=i.column-r.column;n&&(u=-u,a=-a);if(!this.$inChange&&n){var f=this.selectedTabstop,c=f&&!f.some(function(e){return l(e.start,r)<=0&&l(e.end,i)>=0});if(c)return this.detach()}var h=this.ranges;for(var p=0;p<h.length;p++){var d=h[p];if(d.end.row<r.row)continue;if(n&&l(r,d.start)<0&&l(i,d.end)>0){this.removeRange(d),p--;continue}d.start.row==s&&d.start.column>r.column&&(d.start.column+=a),d.end.row==s&&d.end.column>=r.column&&(d.end.column+=a),d.start.row>=s&&(d.start.row+=u),d.end.row>=s&&(d.end.row+=u),l(d.start,d.end)>0&&this.removeRange(d)}h.length||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(!e||!e.hasLinkedRanges)return;this.$inChange=!0;var n=this.editor.session,r=n.getTextRange(e.firstNonLinked);for(var i=e.length;i--;){var s=e[i];if(!s.linked)continue;var o=t.snippetManager.tmStrFormat(r,s.original);n.replace(s,o)}this.$inChange=!1},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(!this.editor)return;var e=this.editor.selection.lead,t=this.editor.selection.anchor,n=this.editor.selection.isEmpty();for(var r=this.ranges.length;r--;){if(this.ranges[r].linked)continue;var i=this.ranges[r].contains(e.row,e.column),s=n||this.ranges[r].contains(t.row,t.column);if(i&&s)return}this.detach()},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length,n=this.index+(e||1);n=Math.min(Math.max(n,1),t),n==t&&(n=0),this.selectTabstop(n),n===0&&this.detach()},this.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];t&&this.addTabstopMarkers(t),this.index=e,t=this.tabstops[this.index];if(!t||!t.length)return;this.selectedTabstop=t;if(!this.editor.inVirtualSelectionMode){var n=this.editor.multiSelect;n.toSingleRange(t.firstNonLinked.clone());for(var r=t.length;r--;){if(t.hasLinkedRanges&&t[r].linked)continue;n.addRange(t[r].clone(),!0)}n.ranges[0]&&n.addRange(n.ranges[0].clone())}else this.editor.selection.setRange(t.firstNonLinked);this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.addTabstops=function(e,t,n){this.$openTabstops||(this.$openTabstops=[]);if(!e[0]){var r=o.fromPoints(n,n);v(r.start,t),v(r.end,t),e[0]=[r],e[0].index=0}var i=this.index,s=[i+1,0],u=this.ranges;e.forEach(function(e,n){var r=this.$openTabstops[n]||e;for(var i=e.length;i--;){var a=e[i],f=o.fromPoints(a.start,a.end||a.start);d(f.start,t),d(f.end,t),f.original=a,f.tabstop=r,u.push(f),r!=e?r.unshift(f):r[i]=f,a.fmtString?(f.linked=!0,r.hasLinkedRanges=!0):r.firstNonLinked||(r.firstNonLinked=f)}r.firstNonLinked||(r.hasLinkedRanges=!1),r===e&&(s.push(r),this.$openTabstops[n]=r),this.addTabstopMarkers(r)},this),s.length>2&&(this.tabstops.length&&s.push(s.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,s))},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId),e.markerId=null})},this.removeRange=function(e){var t=e.tabstop.indexOf(e);e.tabstop.splice(t,1),t=this.ranges.indexOf(e),this.ranges.splice(t,1),this.editor.session.removeMarker(e.markerId),e.tabstop.length||(t=this.tabstops.indexOf(e.tabstop),t!=-1&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},this.keyboardHandler=new a,this.keyboardHandler.bindKeys({Tab:function(e){if(t.snippetManager&&t.snippetManager.expandWithTab(e))return;e.tabstopManager.tabNext(1)},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1)},Esc:function(e){e.tabstopManager.detach()},Return:function(e){return!1}})}).call(h.prototype);var p={};p.onChange=u.prototype.onChange,p.setPosition=function(e,t){this.pos.row=e,this.pos.column=t},p.update=function(e,t,n){this.$insertRight=n,this.pos=e,this.onChange(t)};var d=function(e,t){e.row==0&&(e.column+=t.column),e.row+=t.row},v=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};e("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),t.snippetManager=new c;var m=e("./editor").Editor;(function(){this.insertSnippet=function(e,n){return t.snippetManager.insertSnippet(this,e,n)},this.expandSnippet=function(e){return t.snippetManager.expandWithTab(this,e)}}).call(m.prototype)}),define("ace/ext/emmet",["require","exports","module","ace/keyboard/hash_handler","ace/editor","ace/snippets","ace/range","resources","resources","range","tabStops","resources","utils","actions","ace/config","ace/config"],function(e,t,n){"use strict";function f(){}var r=e("ace/keyboard/hash_handler").HashHandler,i=e("ace/editor").Editor,s=e("ace/snippets").snippetManager,o=e("ace/range").Range,u,a;f.prototype={setupContext:function(e){this.ace=e,this.indentation=e.session.getTabString(),u||(u=window.emmet),u.require("resources").setVariable("indentation",this.indentation),this.$syntax=null,this.$syntax=this.getSyntax()},getSelectionRange:function(){var e=this.ace.getSelectionRange(),t=this.ace.session.doc;return{start:t.positionToIndex(e.start),end:t.positionToIndex(e.end)}},createSelection:function(e,t){var n=this.ace.session.doc;this.ace.selection.setRange({start:n.indexToPosition(e),end:n.indexToPosition(t)})},getCurrentLineRange:function(){var e=this.ace,t=e.getCursorPosition().row,n=e.session.getLine(t).length,r=e.session.doc.positionToIndex({row:t,column:0});return{start:r,end:r+n}},getCaretPos:function(){var e=this.ace.getCursorPosition();return this.ace.session.doc.positionToIndex(e)},setCaretPos:function(e){var t=this.ace.session.doc.indexToPosition(e);this.ace.selection.moveToPosition(t)},getCurrentLine:function(){var e=this.ace.getCursorPosition().row;return this.ace.session.getLine(e)},replaceContent:function(e,t,n,r){n==null&&(n=t==null?this.getContent().length:t),t==null&&(t=0);var i=this.ace,u=i.session.doc,a=o.fromPoints(u.indexToPosition(t),u.indexToPosition(n));i.session.remove(a),a.end=a.start,e=this.$updateTabstops(e),s.insertSnippet(i,e)},getContent:function(){return this.ace.getValue()},getSyntax:function(){if(this.$syntax)return this.$syntax;var e=this.ace.session.$modeId.split("/").pop();if(e=="html"||e=="php"){var t=this.ace.getCursorPosition(),n=this.ace.session.getState(t.row);typeof n!="string"&&(n=n[0]),n&&(n=n.split("-"),n.length>1?e=n[0]:e=="php"&&(e="html"))}return e},getProfileName:function(){switch(this.getSyntax()){case"css":return"css";case"xml":case"xsl":return"xml";case"html":var e=u.require("resources").getVariable("profile");return e||(e=this.ace.session.getLines(0,2).join("").search(/<!DOCTYPE[^>]+XHTML/i)!=-1?"xhtml":"html"),e;default:var t=this.ace.session.$mode;return t.emmetConfig&&t.emmetConfig.profile||"xhtml"}},prompt:function(e){return prompt(e)},getSelection:function(){return this.ace.session.getTextRange()},getFilePath:function(){return""},$updateTabstops:function(e){var t=1e3,n=0,r=null,i=u.require("range"),s=u.require("tabStops"),o=u.require("resources").getVocabulary("user"),a={tabstop:function(e){var o=parseInt(e.group,10),u=o===0;u?o=++n:o+=t;var f=e.placeholder;f&&(f=s.processText(f,a));var l="${"+o+(f?":"+f:"")+"}";return u&&(r=i.create(e.start,l)),l},escape:function(e){return e=="$"?"\\$":e=="\\"?"\\\\":e}};return e=s.processText(e,a),o.variables.insert_final_tabstop&&!/\$\{0\}$/.test(e)?e+="${0}":r&&(e=u.require("utils").replaceSubstring(e,"${0}",r)),e}};var l={expand_abbreviation:{mac:"ctrl+alt+e",win:"alt+e"},match_pair_outward:{mac:"ctrl+d",win:"ctrl+,"},match_pair_inward:{mac:"ctrl+j",win:"ctrl+shift+0"},matching_pair:{mac:"ctrl+alt+j",win:"alt+j"},next_edit_point:"alt+right",prev_edit_point:"alt+left",toggle_comment:{mac:"command+/",win:"ctrl+/"},split_join_tag:{mac:"shift+command+'",win:"shift+ctrl+`"},remove_tag:{mac:"command+'",win:"shift+ctrl+;"},evaluate_math_expression:{mac:"shift+command+y",win:"shift+ctrl+y"},increment_number_by_1:"ctrl+up",decrement_number_by_1:"ctrl+down",increment_number_by_01:"alt+up",decrement_number_by_01:"alt+down",increment_number_by_10:{mac:"alt+command+up",win:"shift+alt+up"},decrement_number_by_10:{mac:"alt+command+down",win:"shift+alt+down"},select_next_item:{mac:"shift+command+.",win:"shift+ctrl+."},select_previous_item:{mac:"shift+command+,",win:"shift+ctrl+,"},reflect_css_value:{mac:"shift+command+r",win:"shift+ctrl+r"},encode_decode_data_url:{mac:"shift+ctrl+d",win:"ctrl+'"},expand_abbreviation_with_tab:"Tab",wrap_with_abbreviation:{mac:"shift+ctrl+a",win:"shift+ctrl+a"}},c=new f;t.commands=new r,t.runEmmetCommand=function v(e){try{c.setupContext(e);var t=u.require("actions");if(this.action=="expand_abbreviation_with_tab"&&!e.selection.isEmpty())return!1;if(this.action=="wrap_with_abbreviation")return setTimeout(function(){t.run("wrap_with_abbreviation",c)},0);var n=e.selection.lead,r=e.session.getTokenAt(n.row,n.column);if(r&&/\btag\b/.test(r.type))return!1;var i=t.run(this.action,c)}catch(s){if(!u)return d(v.bind(this,e)),!0;e._signal("changeStatus",typeof s=="string"?s:s.message),console.log(s),i=!1}return i};for(var h in l)t.commands.addCommand({name:"emmet:"+h,action:h,bindKey:l[h],exec:t.runEmmetCommand,multiSelectAction:"forEach"});t.updateCommands=function(e,n){n?e.keyBinding.addKeyboardHandler(t.commands):e.keyBinding.removeKeyboardHandler(t.commands)},t.isSupportedMode=function(e){if(!e)return!1;if(e.emmetConfig)return!0;var t=e.$id||e;return/css|less|scss|sass|stylus|html|php|twig|ejs|handlebars/.test(t)},t.isAvailable=function(e,n){if(/(evaluate_math_expression|expand_abbreviation)$/.test(n))return!0;var r=e.session.$mode,i=t.isSupportedMode(r);if(i&&r.$modes)try{c.setupContext(e),/js|php/.test(c.getSyntax())&&(i=!1)}catch(s){}return i};var p=function(e,n){var r=n;if(!r)return;var i=t.isSupportedMode(r.session.$mode);e.enableEmmet===!1&&(i=!1),i&&d(),t.updateCommands(r,i)},d=function(t){typeof a=="string"&&e("ace/config").loadModule(a,function(){a=null,t&&t()})};t.AceEmmetEditor=f,e("ace/config").defineOptions(i.prototype,"editor",{enableEmmet:{set:function(e){this[e?"on":"removeListener"]("changeMode",p),p({enableEmmet:!!e},this)},value:!0}}),t.setCore=function(e){typeof e=="string"?a=e:u=e}});
                (function() {
                    window.require(["ace/ext/emmet"], function() {});
                })();
            

define("ace/ext/themelist",["require","exports","module","ace/lib/fixoldbrowsers"],function(e,t,n){"use strict";e("ace/lib/fixoldbrowsers");var r=[["Chrome"],["Clouds"],["Crimson Editor"],["Dawn"],["Dreamweaver"],["Eclipse"],["GitHub"],["IPlastic"],["Solarized Light"],["TextMate"],["Tomorrow"],["XCode"],["Kuroir"],["KatzenMilch"],["SQL Server","sqlserver","light"],["Ambiance","ambiance","dark"],["Chaos","chaos","dark"],["Clouds Midnight","clouds_midnight","dark"],["Cobalt","cobalt","dark"],["idle Fingers","idle_fingers","dark"],["krTheme","kr_theme","dark"],["Merbivore","merbivore","dark"],["Merbivore Soft","merbivore_soft","dark"],["Mono Industrial","mono_industrial","dark"],["Monokai","monokai","dark"],["Pastel on dark","pastel_on_dark","dark"],["Solarized Dark","solarized_dark","dark"],["Terminal","terminal","dark"],["Tomorrow Night","tomorrow_night","dark"],["Tomorrow Night Blue","tomorrow_night_blue","dark"],["Tomorrow Night Bright","tomorrow_night_bright","dark"],["Tomorrow Night 80s","tomorrow_night_eighties","dark"],["Twilight","twilight","dark"],["Vibrant Ink","vibrant_ink","dark"]];t.themesByName={},t.themes=r.map(function(e){var n=e[1]||e[0].replace(/ /g,"_").toLowerCase(),r={caption:e[0],theme:"ace/theme/"+n,isDark:e[2]=="dark",name:n};return t.themesByName[n]=r,r})});
                (function() {
                    window.require(["ace/ext/themelist"], function() {});
                })();
            

/*! jQuery UI - v1.11.4 - 2015-03-11
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */

(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=u.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=u.call(arguments,1),r=this;return a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+n+"'")}):(o.length&&(n=e.widget.extend.apply(null,[n].concat(o))),this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))})),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,M=e.extend({},y),C=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?M.left-=d:"center"===n.my[0]&&(M.left-=d/2),"bottom"===n.my[1]?M.top-=c:"center"===n.my[1]&&(M.top-=c/2),M.left+=C[0],M.top+=C[1],a||(M.left=h(M.left),M.top=h(M.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](M,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+C[0],p[1]+C[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-M.left,i=t+m-d,s=v.top-M.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:M.left,top:M.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(M,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),n=s.uniqueId().attr("id");t.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=n.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?e():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var s,n,a,o=this,r=0,h=e.css("box-sizing"),l=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},d=l&&u.down||u,c=function(){o._toggleComplete(i)};return"number"==typeof d&&(a=d),"string"==typeof d&&(n=d),n=n||d.easing||u.easing,a=a||d.duration||u.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:n,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:a,easing:n,complete:c,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?"content-box"===h&&(r+=i.now):"content"!==o.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-r),r=0)}}),void 0):t.animate(this.hideProps,a,n,c):e.animate(this.showProps,a,n,c)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);
i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,s,n,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,s=this.previousFilter||"",n=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-n}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var v;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),v===n&&(v=null))},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);
return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,M,C,N,A,P,I,H,z,F,E,O,j,W,L=new Date,R=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),J=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),U=this._get(e,"stepMonths"),Q=1!==K[0]||1!==K[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-K[0]*K[1]+1,$.getDate())),t=X&&X>t?X:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-U,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+U,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:R,o=q?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;K[0]>w;w++){for(k="",this.maxRows=4,T=0;K[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",M="",Q){if(M+="<div class='ui-datepicker-group",K[1]>1)switch(T){case 0:M+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:M+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-datepicker-group-middle",S=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,X,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",C=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+u)%7,C+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[N]+"'>"+p[N]+"</span></th>";for(M+=C+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),H=Q?this.maxRows>I?this.maxRows:I:I,this.maxRows=H,z=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;H>F;F++){for(M+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)O=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],j=z.getMonth()!==Z,W=j&&!y||!O[0]||X&&X>z||$&&z>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(z.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===z.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+O[1]+(z.getTime()===G.getTime()?" "+this._currentClass:"")+(z.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===R.getTime()?" ui-state-highlight":"")+(z.getTime()===G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);M+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),M+="</tbody></table>"+(Q?"</div>"+(K[0]>0&&T===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=M}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)
},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n})),n?(a.isOver||(a.isOver=1,s._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};e(n.alsoResize).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),n={},a=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=l-t.width,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;
if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return a>=l&&d>=r&&o>=u&&c>=h;case"intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case"touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable;var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],n=s._rgba=o._rgba,!1):t}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s):a[i]}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c="array"),"string"===c?this.parse(s(n)||a._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):"object"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if("alpha"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===o?u:("function"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+"Class"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return"boolean"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(y+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(y+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(o,t.mode||"hide"),d=t.direction||"up",c=r.test(d),p=c?"height":"width",f=c?"top":"left",m=h.test(d),g={},v="show"===u;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i()}})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"effect"),l="hide"===h,u="show"===h,d=t.direction||"up",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=o.queue(),_=b.length;for((u||l)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"hide"),l="show"===h,u=t.direction||"vertical",d="vertical"===u,c=d?"height":"width",p=d?"top":"left",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(n,t.mode||"hide"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===u?-s:s),d[l]=(r?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),h="show"===r,l="hide"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||("show"===p?b:s),o.to=t.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),c=c.concat(["marginLeft","marginRight"]),l=r.concat(d).concat(c),o.find("*[width]").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};
f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||"both",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"hide"),a="hide"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||"show"),o="show"===a,r="hide"===a,h=o||"hide"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?"-=":"+=")+h,m[c]=(p?"+=":"-=")+2*h,g[c]=(p?"-=":"+=")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(n,t.mode||"show"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(r?u?"+=":"-=":u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a="fixed"===n.css("position"),o=e("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})},e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var s=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&s.index!==t.focusIndex&&(t._trigger("focus",e,{item:s}),t.isOpen||t._select(s,e)),t.focusIndex=s.index,t.button.attr("aria-activedescendant",t.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,i){var s=this,n="";e.each(i,function(i,a){a.optgroup!==n&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:a.optgroup}).appendTo(t),n=a.optgroup),s._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var s=e("<li>");return i.disabled&&s.addClass("ui-state-disabled"),this._setText(s,i.label),s.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),n+=":not(.ui-state-disabled)"),s="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](n).eq(-1):i[e+"All"](n).eq(0),s.length&&this.menuInstance.focus(t,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var i=[];t.each(function(t,s){var n=e(s),a=n.parent("optgroup");i.push({element:n,index:t,value:n.val(),label:n.text(),optgroup:a.attr("label")||"",disabled:a.prop("disabled")||n.prop("disabled")})}),this.items=i},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-a.width()/2,top:t.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,s=Math.floor(+(e-t).toFixed(this._precision())/i)*i;e=s+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));
return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s],this.document[0]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i],this.document[0]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n)):"tr"===s?t._createTrPlaceholder(t.currentItem,n):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var s=this;t.children().each(function(){e("<td>&#160;</td>",s.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:h(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:h(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:h(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(h(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return t.hash.length>1&&i===s}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,n){return e(n).attr("aria-controls")===s?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,s=this.anchors,n=this.panels;
this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var n,a,o,r=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(n=s.hash,o=n.substring(1),a=t.element.find(t._sanitizeSelector(n))):(o=h.attr("aria-controls")||e({}).uniqueId()[0].id,n="#"+o,a=t.element.find(n),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":o,"aria-labelledby":r}),a.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?e():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:r?e():a,newPanel:h};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),t),this._toggle(t,u))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o},h=function(e,t){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,n){setTimeout(function(){o.html(e),s._trigger("load",i,r),h(n,t)},1)}).fail(function(e,t){setTimeout(function(){h(e,t)},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t.element)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s.element[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._registerCloseHandlers(t,s),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){n._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=a),this._open(t,e,i))})}),i&&this._open(t,e,i),void 0)},_open:function(t,i,s){function n(e){l.of=e,o.is(":hidden")||o.position(l)}var a,o,r,h,l=e.extend({},this.options.position);if(s){if(a=this._find(i))return a.tooltip.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),o=a.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(h=s.clone(),h.removeAttr("id").find("[id]").removeAttr("id")):h=s,e("<div>").html(h).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(n(l.of),clearInterval(r))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,i){var s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(s.mouseleave="close"),t&&"focusin"!==t.type||(s.focusout="close"),this._on(!0,i,s)},close:function(t){var i,s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);return a?(i=a.tooltip,a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),a.closing=!0,this._trigger("close",t,{tooltip:i}),a.hiding||(a.closing=!1)),void 0):(n.removeData("ui-tooltip-open"),void 0)},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur"),a=s.element;n.target=n.currentTarget=a[0],t.close(n,!0),e("#"+i).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})});

/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function i(b){var c=b||window.event,g=d.call(arguments,1),h=0,i=0,l=0,m=0;if(b=a.event.fix(c),b.type="mousewheel","detail"in c&&(l=-1*c.detail),"wheelDelta"in c&&(l=c.wheelDelta),"wheelDeltaY"in c&&(l=c.wheelDeltaY),"wheelDeltaX"in c&&(i=-1*c.wheelDeltaX),"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(i=-1*l,l=0),h=0===l?i:l,"deltaY"in c&&(l=-1*c.deltaY,h=l),"deltaX"in c&&(i=c.deltaX,0===l&&(h=-1*i)),0!==l||0!==i){if(1===c.deltaMode){var n=a.data(this,"mousewheel-line-height");h*=n,l*=n,i*=n}else if(2===c.deltaMode){var o=a.data(this,"mousewheel-page-height");h*=o,l*=o,i*=o}return m=Math.max(Math.abs(l),Math.abs(i)),(!f||f>m)&&(f=m,k(c,m)&&(f/=40)),k(c,m)&&(h/=40,i/=40,l/=40),h=Math[h>=1?"floor":"ceil"](h/f),i=Math[i>=1?"floor":"ceil"](i/f),l=Math[l>=1?"floor":"ceil"](l/f),b.deltaX=i,b.deltaY=l,b.deltaFactor=f,b.deltaMode=0,g.unshift(b,h,i,l),e&&clearTimeout(e),e=setTimeout(j,200),(a.event.dispatch||a.event.handle).apply(this,g)}}function j(){f=null}function k(a,b){return h.settings.adjustOldDeltas&&"mousewheel"===a.type&&0===b%120}var e,f,b=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],c="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice;if(a.event.fixHooks)for(var g=b.length;g;)a.event.fixHooks[b[--g]]=a.event.mouseHooks;var h=a.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var b=c.length;b;)this.addEventListener(c[--b],i,!1);else this.onmousewheel=i;a.data(this,"mousewheel-line-height",h.getLineHeight(this)),a.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],i,!1);else this.onmousewheel=null},getLineHeight:function(b){return parseInt(a(b)["offsetParent"in a.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});

function Api(method, url, callback, data, raw) {
  url = 'https://api.github.com' + url;
  url += ((/\?/).test(url) ? '&' : '?');
  url += '&' + (new Date()).getTime();

  if(data && Object.keys(data).length > 1){
    data = JSON.stringify(data)
  }

  $.ajax({
    type: method,
    url: url,
    data: data,
    dataType: 'json',
    beforeSend: function(xhrObj){
      xhrObj.setRequestHeader('Accept','application/vnd.github.v3+json');
      xhrObj.setRequestHeader('Content-Type','application/json;charset=UTF-8');
      xhrObj.setRequestHeader('Authorization', 'token ' + $.trim(AccessToken));
    },
    success: function(data) {
      callback(data)
    },
    error: function(data, argument2, argument3) {
      callback(data.status);
    }
  });

}
//Current user
  function CurrentUser(callback) {
    Api('GET', '/user', callback);
  };

//Show Repos
  function Repos(callback) {
    Api('GET', '/user/repos?type=public&per_page=1000', callback);
  };

//Show Tree
  function Tree(branch, callback){
    Api('GET', RepoPath + 'git/trees/' + branch + '?per_page=1000', function(data) {
      callback(data.tree);
    });
  }

//Show Folders Content
  function Content(path, branch, callback) {
    Api('GET', RepoPath + 'contents' + (path ? '/' + encodeURI(path) : '') + '?per_page=1000', callback, { ref: branch });
  };

//Show Files Content
  function Read(path, branch, callback) {
    Api('GET', RepoPath + 'contents/' + encodeURI(path) + '?ref=' + branch + '&per_page=1000', function(data){
    	callback(window.atob(data.content));
    });
  };

//Get Sha
  function Sha(path, branch, callback) {
    Api("GET", RepoPath + "contents/" + path + "?ref=" + branch, function(data) {
      if(data === 403){//if file is bigger than 1mb it's not returned so look inside the container folder
        cut = path.lastIndexOf('/');
        fname = path.substring(cut + 1);
        findIn = decodeURI(path).replace('/' + fname, '');
        Content(findIn, branch, function(data){
        	if(data === 403){ // If looking in the container folder throws error it's not in a folder but in the root
        		Tree(branch, function(data){
					    $.each(data, function( index, value ){
		            if(value.path === decodeURI(path)){
		              callback(value.sha);
		            }
		          });
				    });
        	}else{
	          $.each(data, function( index, value ){
	            if(value.path === decodeURI(path)){
	              callback(value.sha);
	            }
	          });
        	}
        });
      }else if(data === 404){
        callback(data);
      }else{
        callback(data.sha);
      }
    });
  };

//Update files
  function Write(path, branch, content, CommitMsg, callback) {
    Sha(encodeURI(path), branch, function(data) {
      Api("PUT", RepoPath + "contents/" + encodeURI(path), callback, {
        message: CommitMsg,
        content: content,
        branch: branch,
        sha: data
      });
    });
  };

//Create files
  function Create(path, branch, content, CommitMsg, callback) {
    Api("PUT", RepoPath + "contents/" + encodeURI(path), callback, {
      message: CommitMsg,
      content: content,
      branch: branch
    });
  };

//Remove files
  function Delete(path, branch, callback) {
    Sha(encodeURI(path), branch, function(data) {
      Api('DELETE', RepoPath + 'contents/' + encodeURI(path), callback, {
        message: path + ' is removed',
        sha: data,
        branch: branch
      });
    });
  };

//Rename
  function Rename(path, newName, callback){
    Api('PATCH', path, callback, {
      name: newName,
    });
  }

/*//Fork
  function Fork(forkUser, forkRepo, callback) {
    Api('POST', '/repos/' + forkUser + '/' + forkRepo + '/forks', callback);
  };*/

//Toggle sidebar
	$('#toggle').click(function() {
	  $('body').toggleClass('toggled');
	  $('header + div').toggleClass('row');
	});

//Back button
	$('#back').click(function(){
		if($('header .breadcrumb').children().length === 1){
			ShowWebsites();
		}else{
			$('header .breadcrumb span:last-child span').trigger('click');
		}
	});


var UserLogin;

var RepoName;
var RepoPath;
var RepoOwner;
var RepoBranch;
var RepoUrl;

var CurrentName;
var CurrentPath;

var CommitMsg = 'Changes made by ';
var SaveBtn = '<button type="button" class="btn btn-success" disabled></button>';

var InsertImage;
var FrontMatter;

//Get current user info
	CurrentUser(function(data) {
		UserLogin = data.login;
		$(".avatar").attr('src', data.avatar_url);
		if(data.name === null){
			$(".user-name").html('<a src="' + data.html_url + '">' + data.login + '</a>');
		}else{
			$(".user-name").html('<a src="' + data.html_url + '">' + data.name + '</a>');
		}
		$('#commit').attr('placeholder', CommitMsg + UserLogin);
		ShowWebsites();
	});

//Show user websites
	function ShowWebsites() {
		$('body').attr('data-content', 'sites').attr('data-pages', '0');
		$('header .title').text('My websites').removeAttr('data-site');
		$('header .url, aside .list .title, aside ul, main .content, main .images').empty();
		$('.breadcrumb .fa-home').nextAll().remove();
		if($('.loading').is(':hidden')){
			$('.loading, .noclick').toggle();
		}

		Repos(function(data) {
			var _totalPages = 0;
			$.each(data, function( index, value ) {
				if(value.has_pages === true){
					if(value.name === value.owner.login.toLowerCase() + '.github.io'){
	      		var _url = value.html_url;
	      		var _repoUrl = value.name;
	      		var _branch = 'master'
	      	}else {
	      		var _url = value.html_url + '/tree/gh-pages';
	      		var _repoUrl = UserLogin.toLowerCase() + '.github.io' + '/' + value.name;
	      		var _branch = 'gh-pages'
	      	}
	      	$('main .content').append('<div class="card"><div class="card-block"><a href="' + _url + '" target="_blank"><i class="fa fa-github-square"></i></a> ' + value.name + '</div><div data-site="' + value.name + '" data-owner="' + value.owner.login.toLowerCase() + '" data-branch="' + _branch + '" data-url="' + _repoUrl + '" class="card-footer">Manage <i class="fa fa-arrow-circle-o-right"></i></div></div>');
	      	_totalPages += 1;
	      }
	    });
			$('aside .my-websites .label').text(_totalPages);
			if(data.length < 1){
				$('main .content').append('<div class="alert alert-danger" role="alert"><strong>Oh oh!</strong> It seems like there are no public repositories in your account. Meet Hyde only tracks pubic repositories because websites are meant to be public right?"</div>');
			}else if(_totalPages < 1){
				$('main .content').append('<div class="alert alert-danger" role="alert"><strong>Oh oh!</strong> It seems like there are no websites in any of your repositories. Meet Hyde only tracks repositories with "gh-pages" branches and user pages which are repositories named this way: "user-name.github.io"</div>');
			}
			if($('.loading').is(':visible')){
				$('.loading, .noclick').toggle();
			}
		});

		//Append option to create a new website (in progress)
			//$('main .content').append('<div id="fork" class="card" data-toggle="modal" data-target="#Fork"><div class="card-block"><i class="fa fa-plus-circle"></i> New</div><div class="card-footer">Create a new website <i class="fa fa-arrow-circle-o-right"></i></div></div>');
	}

	//Call the function (its called on load or on click of .my-websites)
		$('.my-websites').click(function(){
			ShowWebsites();

		});

//Show the tree for a website
	function Root(_repoName, _repoOwner, _repoBranch, _repoUrl, _showPages ){
		RepoName = _repoName;
		RepoOwner = _repoOwner;
		RepoPath = '/repos/' + RepoOwner + '/' + RepoName + '/';
		RepoBranch = _repoBranch;
		RepoUrl = _repoUrl;

		$('.loading, .noclick').toggle();
		$('body').attr('data-content', 'tree');
		$('main .content, main .images, aside ul, #FTitle').empty();
		$('.title').text(RepoName).attr('data-site', RepoName).attr('data-owner', RepoOwner).attr('data-branch', RepoBranch).attr('data-url', RepoUrl);
		if(!_showPages){
			$('header .url').html('(<a href="http://' + RepoUrl + '" target="_blank">' + RepoUrl + '</a>)');
			$('body').attr('data-pages', '0');
		}else{
			$('body').attr('data-pages', '1');
		}

		Tree(RepoBranch, function(data) {
			var _name;
			$.each(data, function( index, value ) {
				_name = value.path.toLowerCase();

				if (_name.match('.md$') && _name !== 'readme.md' || _name.match('.html$') || _name.match('.htm$') || _name.match('.markdown$')){
					if(_showPages){
						$('#FTitle').text('Pages');
						$('main .content').append('<div class="card" data-icon="' + value.type + '" ><div class="card-block"><i class="fa"> </i><div class="options"><span class="delete" data-path="' + value.path + '">delete</span></div></div><div class="card-footer" data-type="' + value.type + '" data-path="' + value.path + '" data-name="' + value.path + '" >' + value.path + ' <i class="fa"></i></div></div>');
					}
				}else{
					if(!_showPages){
						if(_name.match('.jpg$') || _name.match('.png$') || _name.match('.gif$') || _name.match('.svg$')){
							$('main .images').append('<div class="card image" data-name="' + value.name + '" data-path="' + value.path + '"><img src="https://raw.githubusercontent.com/' + RepoOwner + '/' + RepoName + '/' + RepoBranch + '/' + value.path + '"><div class="options"><span class="name">' + value.path + '</span><span class="delete" data-path="' + value.path + '">delete</span></div></div>');
						}else if (_name !== '.ds_store' || _name !== '_site'){
							$('main .content').append('<div class="card" data-icon="' + value.type + '" ><div class="card-block"><i class="fa"> </i><div class="options"><span class="delete" data-path="' + value.path + '">delete</span></div></div><div class="card-footer" data-type="' + value.type + '" data-path="' + value.path + '" data-name="' + value.path + '" >' + value.path + ' <i class="fa"></i></div></div>');

						}
					}
					$('aside ul').append('<li data-type="' + value.type + '" data-path="' + value.path + '" data-name="' + value.path + '"><i class="fa"></i> ' + value.path + '</li>');
				}

				if (value.path === 'CNAME') {
					Read('CNAME', RepoBranch, function(data) {
						if(data.indexOf('.') != -1){
							$('header .url').html('(<a href="http://' + data + '" target="_blank">' + data + '</a>)');
						}
					});
				}
			});

			if(!_showPages){
				$('main .content').append('<div class="card" data-icon="tree" ><div class="card-block"><i class="fa"> </i></div><div class="card-footer" data-site="' + RepoName +'" data-owner="' + RepoOwner + '" data-branch="' + RepoBranch + '" data-url="' + _repoUrl + '" data-pages="' + true + '">Pages <i class="fa"></i></div></div>');
			}

			$('aside ul').append('<li data-site="' + RepoName +'" data-owner="' + RepoOwner + '" data-branch="' + RepoBranch + '" data-url="'+ RepoName + '" data-pages="' + true + '"><i class="fa fa-folder-open-o"></i> Pages</li>');

			$('aside ul').each(function () {
		    $('[data-type="blob"]', this).prependTo(this);
		    $('[data-type="tree"]', this).appendTo(this);
			});
		});
		$('.loading, .noclick').toggle();
	}
	//Call the function (Header repo name, sidebar repo name, breadcrumb repo name)
		$('body').on('click', '[data-site]', function(){
			$('.breadcrumb .fa-home').nextAll().remove();
			if($(this).attr('data-pages')){
				$('.breadcrumb').append('<span class="repo"><i class="fa fa-angle-double-right"></i> <span data-site="' + RepoName + '" data-owner="' + RepoOwner + '" data-branch="' + RepoBranch + '" data-url=' + RepoUrl + '>' + RepoName + '</span></span>');
			}
			Root($(this).attr('data-site'), $(this).attr('data-owner'), $(this).attr('data-branch'), $(this).attr('data-url'), $(this).attr('data-pages'));
		});


// Show folder contents
	function Open(_currentName, _currentPath){
		CurrentName = _currentName;
		CurrentPath = _currentPath;
		$('.loading, .noclick').toggle();
		$('body').attr('data-content', 'dir').attr('data-pages', '0');
		$('#FTitle').text(CurrentName);
		$('main .content, main .images').empty();

		Content(CurrentPath, RepoBranch, function(data) {
			var _name;
			if(data !== 404){//if the function retrieves contents (when deleting files if the folder is left empty the folder is deleted too so the function returns error)
				$.each(data, function( index, value ){
					_name = value.path.toLowerCase();
					if(!value.path.match('.ds_store$')){
						if(value.path.match('.jpg$') || value.path.match('.png$') || value.path.match('.gif$') || value.path.match('.svg$')){
							$('main .images').append('<div class="card image" data-name="' + value.name + '" data-path="' + value.path + '"><div class="card-block"><img src="' + value.download_url + '"><div class="options"><span class="name">' + value.name + '</span><span class="delete" data-path="' + value.path + '">delete</span></div></div></div>');
						}else{
							$('main .content').append('<div class="card" data-icon="' + value.type + '"><div class="card-block"><i class="fa"></i><div class="options"><span class="delete" data-path="' + value.path + '">delete</span></div></div><div class="card-footer" data-type="' + value.type + '" data-path="' + value.path + '" data-name="' + value.name + '" >' + value.name + ' <i class="fa"></i></div></div>');
						}
					}
				});
			}else{//in this case go to the preceding folder
				$('header .breadcrumb span:last-child span').trigger('click');
			}
			$('.loading, .noclick').toggle();
		});
	}
	//Call the function
		$('body').on('click', '[data-type="tree"], [data-type="dir"], [data-type="breadcrumb"]', function(){
			if($(this).attr('data-type') === "tree"){
				$('.breadcrumb .fa-home').nextAll().remove();
				$('.breadcrumb').append('<span class="repo"><i class="fa fa-angle-double-right"></i> <span data-site="' + RepoName + '" data-owner="' + RepoOwner + '" data-branch="' + RepoBranch + '" data-url="' + RepoUrl + '">' + RepoName + '</span></span>');
			}else if($(this).attr('data-type') === "breadcrumb"){
				$(this).parent('.folder').nextAll().remove();
				$(this).parent('.folder').remove();
			}else{//if click in a dir
				$('.breadcrumb').append('<span class="folder"><i class="fa fa-angle-double-right"></i> <span data-type="breadcrumb" data-path="' + CurrentPath + '" data-name="' + CurrentName + '">' + CurrentName + '</span></span>');
			}

			Open($(this).attr('data-name'), $(this).attr('data-path'));
		});

//Show file contents
	function Edit(_currentName, _currentPath, _editor){
CurrentName = _currentName;
		CurrentPath = _currentPath;
		$('.loading, .noclick').toggle();
		$('body').attr('data-content', 'file').attr('data-pages', '0');
		$('#FTitle').text(CurrentName);
		$('main .content, main .images').empty();

		Read(CurrentPath, RepoBranch, function(data) {
			if(_editor === 'md'){
				if(data.substring(0, 4) === "---\n"){ //Extract Front Matter
					FrontMatter = $.trim(data.split('---')[1].split('---')[0]);
					data = data.replace(FrontMatter , '');
					data = data.replace('---' , '');
					data = $.trim(data.replace('---' , ''));
				}else{ //Set a default Front Matter (wont be saved)
					FrontMatter = 'Replace this text with your Front Matter block.\n\n! TIP: You can skip the triple-dashed lines (---), they will be added automatically';
				}
				mdEditor(data, FrontMatter);
			}else{
				htmlEditor(data, 'main .content');
			}
			$('.loading, .noclick').toggle();
		});
	}
	//Call the function
	 	$('body').on('click', '[data-type="blob"], [data-type="file"]', function(){
	 		if($(this).attr('data-type') === "blob"){
	 			if($(this).attr('data-name') === 'CNAME' || $(this).attr('data-name').match('.yml$') || $(this).attr('data-name').match('.xml$')){
	 				$('.breadcrumb .fa-home').nextAll().remove();
					$('.breadcrumb').append('<span class="repo"><i class="fa fa-angle-double-right"></i> <span data-site="' + RepoName + '" data-owner="' + RepoOwner + '" data-branch="' + RepoBranch + '" data-url="' + RepoUrl + '">' + RepoName + '</span></span>');
		 		}
			}else if(!$(this).attr('data-name').match('.html$') && !$(this).attr('data-name').match('.md$') && !$(this).attr('data-name').match('.htm$') && !$(this).attr('data-name').match('.markdown$')){
				$('.breadcrumb').append('<span class="folder"><i class="fa fa-angle-double-right"></i> <span data-type="breadcrumb" data-path="' + CurrentPath + '" data-name="' + CurrentName + '">' + CurrentName + '</span></span>');
		 	}

	 		if($(this).attr('data-name').match('.html$') || $(this).attr('data-name').match('.md$') || $(this).attr('data-name').match('.htm$') || $(this).attr('data-name').match('.markdown$')){
	 			$('#Editors .modal-footer .btn').attr('data-type', $(this).attr('data-type')).attr('data-name', $(this).attr('data-name')).attr('data-path', $(this).attr('data-path')).attr('data-class', $(this).attr('data-class'));
	 			$('#Editors').modal('toggle');
	 		}else if ($(this).attr('data-name') === 'CNAME'){
	 			$('#CNAME').modal('toggle');
	 			Read('CNAME', RepoBranch, function(data) {
					$('#CustomDomain').val($.trim(data));
				});
	 		}else{
	 			Edit($(this).attr('data-name'), $(this).attr('data-path'), 'html')
	 		}
		});

		$('#Editors .modal-footer .btn').click(function(){
			if($(this).attr('data-type') === "blob"){
				$('.breadcrumb .fa-home').nextAll().remove();//update the breadcrumb
				$('.breadcrumb').append('<span class="repo"><i class="fa fa-angle-double-right"></i> <span data-site="' + RepoName + '" data-owner="' + RepoOwner + '" data-branch="' + RepoBranch + '" data-url="' + RepoUrl + '">' + RepoName + '</span></span>');
				if($(this).attr('data-name').match('.md$') && $(this).attr('data-name') !== 'README.md' || $(this).attr('data-name').match('.html$') || $(this).attr('data-name').match('.htm$') || $(this).attr('data-name').match('.markdown$')){
					$('.breadcrumb').append('<span class="repo"><i class="fa fa-angle-double-right"></i> <span data-site="' + RepoName + '" data-owner="' + RepoOwner + '" data-branch="' + RepoBranch + '" data-url="' + RepoUrl + '" data-pages="' + true + '">Pages</span></span>');
				}
 			}else{
				$('.breadcrumb').append('<span class="folder"><i class="fa fa-angle-double-right"></i> <span data-type="breadcrumb" data-path="' + CurrentPath + '" data-name="' + CurrentName + '">' + CurrentName + '</span></span>');
		 	}

			Edit($(this).attr('data-name'), $(this).attr('data-path'), $(this).attr('data-editor'));
		});

//Html editor
	function htmlEditor(_data, _location){
		$(_location).html('<pre id="editor"></pre>');
		$('main .content').append('<div class="fileActions">' + SaveBtn + '</div>');
		$('.fileActions .btn').html('<i class="fa fa-check"></i> Up to date');

		var editor = ace.edit("editor");
		editor.$blockScrolling = Infinity;
		editor.session.setMode("ace/mode/html");
		editor.setOption("enableEmmet", true);
		editor.renderer.setScrollMargin(10, 10);
		editor.setOptions({
		  autoScrollEditorIntoView: true
		});

		editor.setValue(_data, -1);
		editor.getSession().setTabSize(htmlEditorTabSize);

		editor.on('input', function() {
			if(_data === editor.getValue()){
				$('.fileActions .btn').html('<i class="fa fa-check"></i> Up to date').attr('disabled', true);
			}else{
				$('.fileActions .btn').html('<i class="fa fa-save"></i> Save').attr('disabled', false);
			}
		});
		$(document).one('click', '.fileActions .btn', function(){
			if(_location === 'main .content'){
				saveChanges(editor.getValue());
			}else{
				FrontMatter = editor.getValue();
				$('#saveInMd').trigger('click');
			}
		});

	}

//Markdown editor
	function mdEditor(_data, _fm){
		$('main .content').html('<ul class="nav nav-tabs" role="tablist"><li class="nav-item"><a class="nav-link active" href="#editContent" role="tab" data-toggle="tab">Content</a></li><li class="nav-item"><a class="nav-link" href="#editFm" role="tab" data-toggle="tab">Front Matter</a></li></ul><div class="tab-content"><div role="tabpanel" class="tab-pane active" id="editContent"><textarea class="form-control" id="mdEditor"></textarea></div><div role="tabpanel" class="tab-pane" id="editFm"></div></div><div id="saveInMd" class="hidden"></div>');

		htmlEditor(_fm, '#editFm');

		var simplemde = new SimpleMDE({
					element: document.getElementById("mdEditor"),
					spellChecker: false,
					tabSize: 4,
					toolbar: ["bold", "italic", "strikethrough",
										"|",
										"heading", "heading-smaller", "heading-bigger",
										"|",
										"code", "quote", "unordered-list", "ordered-list", "horizontal-rule",
										"|",
										"link",
										{
					            name: "image",
					            className: "search-image fa fa-picture-o",
					            action: searchImage,
					            title: "Insert Image",
					          },
					          {
					            name: "image2",
					            className: "insert-image fa fa-times",
					            action: _drawImage,
					            title: "Insert Image",
					          },
										"|" ,
										"side-by-side",
										{
					            name: "expand",
					            action: mdexpand,
					            className: "expand fa fa-arrows-alt",
					            title: "Toggle Fullscreen",
			        			},
			        			"fullscreen", "preview"
			        		 ]
				});

		function _drawImage(editor) {
			var cm = editor.codemirror;
			var stat = _getState(cm);
			_replaceselection(cm, stat.image, '\n' + InsertImage + '\n' , "");
			InsertImage = "";
		}
		SimpleMDE._drawImage = _drawImage;
		SimpleMDE.prototype._drawImage = function() {
			_drawImage(this);
		};
		function _getState(cm, pos) {
			pos = pos || cm.getCursor("start");
			var stat = cm.getTokenAt(pos);
			if(!stat.type) return {};

			var types = stat.type.split(" ");

			var ret = {},
				data, text;
			for(var i = 0; i < types.length; i++) {
				data = types[i];
				if(data === "strong") {
					ret.bold = true;
				} else if(data === "variable-2") {
					text = cm.getLine(pos.line);
					if(/^\s*\d+\.\s/.test(text)) {
						ret["ordered-list"] = true;
					} else {
						ret["unordered-list"] = true;
					}
				} else if(data === "atom") {
					ret.quote = true;
				} else if(data === "em") {
					ret.italic = true;
				} else if(data === "quote") {
					ret.quote = true;
				} else if(data === "strikethrough") {
					ret.strikethrough = true;
				} else if(data === "comment") {
					ret.code = true;
				}
			}
			return ret;
		}
		function _replaceselection(cm, active, start, end) {
			if(/editor-preview-active/.test(cm.getWrapperElement().lastChild.className))
				return;

			var text;
			var startPoint = cm.getCursor("start");
			var endPoint = cm.getCursor("end");
			if(active) {
				text = cm.getLine(startPoint.line);
				start = text.slice(0, startPoint.ch);
				end = text.slice(startPoint.ch);
				cm.replaceRange(start + end, {
					line: startPoint.line,
					ch: 0
				});
			} else {
				text = cm.getSelection();
				cm.replaceSelection(start + text + end);

				startPoint.ch += start.length;
				if(startPoint !== endPoint) {
					endPoint.ch += start.length;
				}
			}
			cm.setSelection(startPoint, endPoint);
			cm.focus();
		}

		simplemde.value(_data);

		$('.editor-toolbar .fa-columns').trigger( 'click' );
		$('.fa-arrows-alt:not(.expand)').hide();
		$('main .content').wrapInner('<div id="md-editor" class="nofull" />');
		$('.editor-toolbar').append('<div class="fileActions">' + SaveBtn + '</div>');
		$('.editor-toolbar .actions').toggle();

		simplemde.codemirror.on("change", function(){
			if(_data === simplemde.value()){
				$('.fileActions .btn').html('<i class="fa fa-check"></i> Up to date').attr('disabled', true);
			}else{
				$('.fileActions .btn').html('<i class="fa fa-save"></i> Save').attr('disabled', false);
			}
		});

		$(document).one('click', '#saveInMd', function(){
			saveChanges(FrontMatter, simplemde.value())
		});
	}

	//Editor full screen
		function mdexpand(){
			$('.expand').toggleClass('isactive');
			$('#md-editor').toggleClass('nofull');
			$('.editor-toolbar .actions').toggle();
		}

	//Open the image manager
		function searchImage(){
			$('#MdImage').modal('toggle');
			MdImage();
		}

	//Markdown image manager
		function MdImage(_path){
			$('#MdImage .folders, #MdImage .files').empty();
			$('#MdImage .loading, .noclick').toggle();
			if(_path){
				$('#MdImage .breadcrumb').attr('data-current-path', _path)
				Content(_path, RepoBranch, function(data) {
					if(data !== 404){//if the function retrieves contents (when deleting files if the folder is left empty the folder is deleted too so the function returns error)
						$.each(data, function( index, value ){
							if(!value.path.match('.DS_Store$')){
								if(value.path.match('.jpg$') || value.path.match('.png$') || value.path.match('.JPG$') || value.path.match('.PNG$') || value.path.match('.gif$') || value.path.match('.GIF$') || value.path.match('.svg$') || value.path.match('.SVG$')){
									$('#MdImage .files').append('<div class="image"><img class="cardSelect" src="https://raw.githubusercontent.com/' + RepoOwner + '/' + RepoName + '/' + RepoBranch + '/' + value.path + '"><div class="options"><span class="name">' + value.path + '</span></div><div data-name="' + value.name + '" data-url="https://raw.githubusercontent.com/' + RepoOwner + '/' + RepoName + '/' + RepoBranch + '/' + value.path + '" class="btn btn-success btn-block"><i class="fa fa-check"></i>Add</div></div>');
								}else{
									$('#MdImage .folders').append('<div class="folder" data-path="' + value.path + '"><i class="fa fa-folder-open-o"></i><div>' + value.name + '</div></div>');
								}
							}
						});
					}else{//in this case go to the preceding folder
						$('header .breadcrumb span:last-child span').trigger('click');
					}
					$('#MdImage .loading, .noclick').toggle();
				});
			}else{
				$('#MdImage .breadcrumb').html('<span data-path="">' + RepoName + '</span>');
				Tree(RepoBranch, function(data) {
					$.each(data, function( index, value ) {
						if(value.type === 'tree'){
							$('#MdImage .folders').append('<div class="folder" data-path="' + value.path + '"><i class="fa fa-folder-open-o"></i><div>' + value.path + '</div></div>');
						}else if(value.path.match('.jpg$') || value.path.match('.png$') || value.path.match('.JPG$') || value.path.match('.PNG$') || value.path.match('.gif$') || value.path.match('.GIF$') || value.path.match('.svg$') || value.path.match('.SVG$')){
							$('#MdImage .files').append('<div class="image"><img class="cardSelect" src="https://raw.githubusercontent.com/' + RepoOwner + '/' + RepoName + '/' + RepoBranch + '/' + value.path + '"><div class="options"><span class="name">' + value.path + '</span></div><div data-name="' + value.name + '" data-url="https://raw.githubusercontent.com/' + RepoOwner + '/' + RepoName + '/' + RepoBranch + '/' + value.path + '" class="btn btn-success btn-block"><i class="fa fa-check"></i>Add</div></div>');
						}
					});
					$('#MdImage .loading, .noclick').toggle();
				});
			}
		}

		//Navigate through folders
			$('body').on('click', '#MdImage [data-path]', function(){
				MdImage($(this).attr('data-path'));
				if ($(this).hasClass('folder')){
					$('#MdImage .breadcrumb').append('<i class="fa fa-angle-double-right"></i><span class="image-path" data-path="' + $(this).attr('data-path') + '">' + $(this).children('div').html() + '</span>');
				}else{
					$(this).nextAll().remove();
				}
			});

		//Attach mousewheel to horizontal folders
			$("#MdImage .folders").mousewheel(function(event, delta) {
				this.scrollLeft -= (delta * 30);
		  	event.preventDefault();
			});

		//Insert images on mdeditor
			$('body').on('click', '#MdImage .image > .btn', function(){
				InsertImage = '![' + $(this).attr('data-name') + '](' + $(this).attr('data-url') + ')';
				$('.editor-toolbar .insert-image').trigger('click');
				$('#MdImage').modal('toggle');
			});
			$('body').on('click', '#insertUrl .modal-footer .btn', function(){
				InsertImage = '![](' + $('#insertUrl input').val() + ')';
				$('.editor-toolbar .insert-image').trigger('click');
				$('#MdImage').modal('toggle');
			});

		//Top bar
			//upload
				$('body').on('click', '#Upload', function(){
					$('#MdImage .uploader, #MdImage .folders, #MdImage .files').toggle();
				});
				//Remove image from upload que
					$('body').on('click', '.dz-remove', function(){
						$(this).closest('.dz-preview').remove();
					});
				//Close the dropbox
					$('body').on('click', '.uploader .btn-danger', function(){
						$('#MdImage .uploader, #MdImage .folders, #MdImage .files').toggle();
						$('form.dropzone .dz-preview').remove();
						$('form.dropzone').removeClass('dz-started');
					});
				//Upload the images
					$('body').on('click', '#MdImage .uploader .btn-success', function(){
						_path = $('#MdImage .breadcrumb').attr('data-current-path');
						if(_path){
							_saveIn = _path + '/';
						}else{
							_saveIn = '';
						}
						_imagesToUpload = ($('#MdImage .manager-drop img').length); //# of images to upload
						_augmentIn = 100 / _imagesToUpload;
						_imagesUploaded = 0;
						if (_imagesToUpload === 0) {
						  alert('There are no images to upload');
						}else {
							$('#MdImage .uploading, .noclick').toggle();
							$('#MdImage .manager-drop img').each(function(){
								_base = $(this).attr('src');
								_baseClean = _base.replace('data:image/png;base64,','');
								_imgName = $(this).attr('alt');
								Create(_saveIn + _imgName, RepoBranch, _baseClean, 'uploaded by' + UserLogin, function(err) {
									$('#MdImage .uploading .progress').attr('value', parseFloat($('#MdImage .progress').attr('value')) + parseFloat(_augmentIn));
									$('#MdImage .uploading .percent').text(Math.floor(parseInt($('#MdImage .uploading .percent').prev().attr('value'))) + ' %');
									_imagesUploaded += 1;
									if(_imagesUploaded ===  _imagesToUpload){
										MdImage(_path);
										$('#MdImage .uploader, #MdImage .folders, #MdImage .files').toggle();
										$('#MdImage form.manager-drop .dz-preview').remove();
										$('#MdImage form.manager-drop').removeClass('dz-started');
										$('#MdImage .uploading .progress').attr('value', '0');
										$('#MdImage .uploading .percent').text('0');
										$('#MdImage .uploading, .noclick').toggle();
									}
								});
							});
						}
					});

				//Insert from url
					$('#FromUrl').click(function(){
						$('#insertUrl').modal('toggle');
					});
					$('body').on('input', '#insertUrl input', function(){
						_imageUrl = $(this).val();
						$(this).parent().next().children().attr('src', _imageUrl);
					});
					$('#insertUrl').on('hidden.bs.modal', function () {
					  $('#insertUrl input').val('');
					  $('#insertUrl img').attr('src', '');
					});

		//Clear data on close
		  $('#MdImage').on('hidden.bs.modal', function () {
			  $('#MdImage .folders, #MdImage .files, #MdImage .images').empty();
			});

//Save files
	function saveChanges(_html, _md){
		var _saveContent;

		if ($("#commit").val()) {
		  CommitMsg = $("#commit").val();
		}

		$('.fileActions .btn').html('<div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>').attr('disabled', true);//content for the button

		if (_md){//If the editing is being made with MarkDown
			if (_html.indexOf("Replace this text with your Front Matter block.") >= 0){
				_saveContent = _md;
			}else if (_html.substring(0, 4) === "---\n"){
				_saveContent = '---\n' + $.trim(_html.split('---')[1].split('---')[0]) + '\n---\n' + _md;
			}else{
				_saveContent = '---\n' + $.trim(_html) + '\n---\n' + _md;
			}
		}else { //If the editing is being made with Html
			_saveContent = _html;
		}

		Write(CurrentPath, RepoBranch, window.btoa(_saveContent), CommitMsg, function(data) {
			$('main .content').empty();
			if(_md){
				mdEditor(_md, _html)
			}else{
				htmlEditor(_html, 'main .content')
			}
			CommitMsg = 'Changes made by ' + UserLogin;
			$("#commit").val('');
		});
	}

//Delete files
	$(document).on('click', '.options .delete', function(){
		$('#confirmDelete').modal('toggle');
		$('#confirmDelete #Confirm').attr('data-path', $(this).attr('data-path'));
	});

	$(document).on('click', '#confirmDelete #Confirm', function(){
		$('.deleting, .noclick').toggle();
		var _remove = $(this).attr('data-path');
		Delete($(this).attr('data-path'), RepoBranch, function() {
			$('main .card .delete').each(function(){
				if($(this).attr('data-path') === _remove){
					$(this).closest('.card').remove();
					$('	.deleting, .noclick').toggle();
					return false;
				}
			});
		});
  });

//Get current date
	function CurrentDate(){
		var d = new Date();
		var month = d.getMonth()+1;
		var day = d.getDate();

		return d.getFullYear() + '-' +
		    (month<10 ? '0' : '') + month + '-' +
		    (day<10 ? '0' : '') + day + '-';
	}

//Create files
	$('.create').on('click', function () {
		if($('body').attr('data-content') === 'dir'){
			$('#createFile form label').text(RepoName + '/' + CurrentPath + '/');
		}
		else if($('body').attr('data-pages') === '1'){
			$('#createFile form label').text(RepoName + '/Pages/');
		}else{
			$('#createFile form label').text(RepoName + '/');
		}
	});

	$('#createFile input').on('input', function(){
		if($(this).val().length === 0){
			$('#createFile .modal-footer').html('<button type="button" class="btn btn-success use-images" disabled><i class="fa fa-ban"></i></button>');
		}else if($(this).val().length === 1) {
			$('#createFile .modal-footer').html('<button type="button" class="create btn btn-success use-images"><i class="fa fa-check"></i> Create</button>');
		}
	});

	$('body').on('click', '#createFile .modal-footer .create', function () {
		var _newFile;

		$('#createFile .modal-footer').html('<button type="button" class="btn btn-success use-images" disabled><div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></button>');

		if($('body').attr('data-content') === 'dir'){
			if(CurrentPath.indexOf('_posts') >= 0){
				_newFile = CurrentPath + '/' + CurrentDate() + $('#createFile form input').val();
			}else{
				_newFile = CurrentPath + '/' + $('#createFile form input').val();
			}
		}
		else{
			_newFile = $('#createFile form input').val();
		}

		Create(_newFile, RepoBranch, window.btoa(''), 'created by' + UserLogin, function(data) {
			$('#createFile').modal('toggle');
			if($('body').attr('data-content') === 'dir'){
				Open(CurrentName, CurrentPath);
			}
			else if($('body').attr('data-pages') === '1'){
				Root(RepoName, RepoOwner, RepoBranch, RepoUrl, true);
			}else{
				Root(RepoName, RepoOwner, RepoBranch, RepoUrl);
			}

			$('#createFile .modal-footer').html('<button type="button" class="btn btn-success use-images" disabled><i class="fa fa-ban"></i></button>');
		});
	});
	$('#createFile').on('hidden.bs.modal', function () { //Clear values on modal close
	  $('#createFile .modal-footer').html('<button type="button" class="btn btn-success use-images" disabled><i class="fa fa-ban"></i></button>');
	  $('#createFile input').val('');
	});

//Upload files
	Dropzone.options.addFromFolder = { //Disable image resize
	  thumbnailWidth: null,
	  thumbnailHeight: null,
	  init: function() {
	    this.on("thumbnail", function(file, dataUrl) {
	    	$('img[alt="' + file.name + '"]').parent().next().append('<div class="dz-remove"><i class="fa fa-times-circle"></i> Remove</div>');
	    });
	  }
	}
	Dropzone.options.MdUploader = { //Disable image resize
	  thumbnailWidth: null,
	  thumbnailHeight: null,
	}
	Dropzone.prototype.submitRequest = function(xhr, formData, files) { //Disable auto-uploads
  };

	$('.upload').on('click', function () {
		if($('body').attr('data-content') === 'dir'){
			$('#uploadFile form label').text(RepoName + '/' + CurrentPath + '/');
		}
		else if($('body').attr('data-pages') === '1'){
			$('#uploadFile form label').text(RepoName + '/Pages/');
		}else{
			$('#uploadFile form label').text(RepoName + '/');
		}
	});

	$('body').on('click', '#uploadFile .uploader .btn-success', function(){
		var _filesToUpload = ($('#uploadFile .addimage-drop img').length);
		var _augmentIn = 100 / _filesToUpload;
		var _imagesUploaded = 0;
		var _saveIn;
		var _content;
		var _imgName;
		var _currentName = CurrentName;
		$('.upload').attr('disabled', true);
		$('#uploadFile, #Uploading').modal('toggle');

		if (_filesToUpload === 0) {
		  alert('There are no images to upload');
		}else {
			if($('body').attr('data-content') === 'dir'){
				if ($('#uploadFile input').val()){
					_saveIn = CurrentPath + '/' + $('#uploadFile form input').val() + '/';
				}else{
					_saveIn = CurrentPath + '/';
				}
			}
			else{
				if ($('#uploadFile input').val()){
					_saveIn = $('#uploadFile form input').val() + '/';
				}else{
					_saveIn = '';
				}
			}

			$('#uploadFile .addimage-drop img').each(function(){
				_content = $(this).attr('src').replace('data:image/png;base64,','');
				_imgName = $(this).attr('alt');
				Create(_saveIn + _imgName, RepoBranch, _content, 'uploaded by' + UserLogin, function(err) {
					$('#Uploading .progress').attr('value', parseFloat($('#Uploading .progress').attr('value')) + parseFloat(_augmentIn));
					$('#Uploading .percent').text(Math.floor(parseInt($('#Uploading .progress').attr('value'))) + ' %');
					_imagesUploaded += 1;
					if(_imagesUploaded === _filesToUpload){
						if(_currentName === CurrentName){
							if($('body').attr('data-content') === 'dir'){
								Open(CurrentName, CurrentPath);
							}
							else if($('body').attr('data-pages') === '1'){
								Root(RepoName, RepoOwner, RepoBranch, RepoUrl, true );
							}else{
								Root(RepoName, RepoOwner, RepoBranch, RepoUrl);
							}
						}

						$('#UploadSuccess, #Uploading').modal('toggle');
						$('.upload').attr('disabled', false);
						$('#uploadFile form.addimage-drop .dz-preview').remove();
						$('#uploadFile #filename').val('');
						$('#uploadFile form.addimage-drop').removeClass('dz-started');
						$('#Uploading .progress').attr('value', '0');
						$('#Uploading .percent').text('0');
						$('#uploadFile input').val('')
					}
				});
			});
		}
	});
	$('#uploadFile').on('hidden.bs.modal', function () {
		$('#uploadFile form.addimage-drop .dz-preview').remove();
		$('#uploadFile #filename').val('');
	});
	$('#Uploading button').click(function(){
		$('#Uploading .noclick').toggle();
		$('#Uploading').toggleClass('minimized');
		$('#Uploading button i').toggleClass('fa-minus').toggleClass('fa-plus');
	});

/*/Fork repos
	$('#Fork input').on('input', function(){
		if($('#Fork .newname').val().length === 0 || $('#Fork .username').val().length === 0 || $('#Fork .reponame').val().length === 0){
			$('#Fork .modal-footer').html('<button type="button" class="btn btn-success fork" disabled><i class="fa fa-ban"></i></button>');
		}else{
			$('#Fork .modal-footer').html('<button type="button" class="create btn btn-success fork"><i class="fa fa-check"></i> Create</button>');
		}
	});

	$(document).on('click', '#Fork .btn.fork', function(){
		Fork($('#Fork .username').val(), $('#Fork .reponame').val(), function(data){
		  rename('/repos/' + data.full_name, $('#Fork .newname').val(), function(data){
		    Repos(function(data) {//data is an array of objects, each object is a repo
					$.each(data, function( index, value ) { //iterate through each data(each repo) on the data array
						if(value.name === $('#Fork .username').val() && value.has_pages === false){

						}
					});
				});
			});
		});
	});*/

/**
 * simplemde v1.8.1
 * Copyright Next Step Webs, Inc.
 * @link https://github.com/NextStepWebs/simplemde-markdown-editor
 * @license MIT
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.SimpleMDE=e()}}(function(){var e;return function t(e,n,r){function i(l,a){if(!n[l]){if(!e[l]){var s="function"==typeof require&&require;if(!a&&s)return s(l,!0);if(o)return o(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[l]={exports:{}};e[l][0].call(u.exports,function(t){var n=e[l][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[l].exports}for(var o="function"==typeof require&&require,l=0;l<r.length;l++)i(r[l]);return i}({1:[function(e,t,n){(function(n){Typo=n.Typo=e("/Users/wescossick/Documents/Websites/simplemde-markdown-editor/node_modules/codemirror-spell-checker/src/js/typo.js"),CodeMirror=n.CodeMirror=e("codemirror");(function(e,t,n){var r,i=0,o=!1,l=!1,a="",s="";CodeMirror.defineMode("spell-checker",function(e,t){if(!o){o=!0;var n=new XMLHttpRequest;n.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),n.onload=function(e){4===n.readyState&&200===n.status&&(a=n.responseText,i++,2==i&&(r=new Typo("en_US",a,s,{platform:"any"})))},n.send(null)}if(!l){l=!0;var c=new XMLHttpRequest;c.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),c.onload=function(e){4===c.readyState&&200===c.status&&(s=c.responseText,i++,2==i&&(r=new Typo("en_US",a,s,{platform:"any"})))},c.send(null)}var u='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',d={token:function(e,t){var n=e.peek(),i="";if(u.includes(n))return e.next(),null;for(;null!=(n=e.peek())&&!u.includes(n);)i+=n,e.next();return r&&!r.check(i)?"spell-error":null}},h=CodeMirror.getMode(e,e.backdrop||"text/plain");return CodeMirror.overlayMode(h,d,!0)}),String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)})}).call(n,t,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/wescossick/Documents/Websites/simplemde-markdown-editor/node_modules/codemirror-spell-checker/src/js/typo.js":2,codemirror:6}],2:[function(e,t,n){(function(e){(function(e,t,n,r,i){"use strict";var o=function(e,t,n,r){if(r=r||{},this.platform=r.platform||"chrome",this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=r.flags||{},e){if(this.dictionary=e,"chrome"==this.platform)t||(t=this._readFile(chrome.extension.getURL("lib/typo/dictionaries/"+e+"/"+e+".aff"))),n||(n=this._readFile(chrome.extension.getURL("lib/typo/dictionaries/"+e+"/"+e+".dic")));else{var i=r.dictionaryPath||"";t||(t=this._readFile(i+"/"+e+"/"+e+".aff")),n||(n=this._readFile(i+"/"+e+"/"+e+".dic"))}this.rules=this._parseAFF(t),this.compoundRuleCodes={};for(var o=0,l=this.compoundRules.length;l>o;o++)for(var a=this.compoundRules[o],s=0,c=a.length;c>s;s++)this.compoundRuleCodes[a[s]]=[];"ONLYINCOMPOUND"in this.flags&&(this.compoundRuleCodes[this.flags.ONLYINCOMPOUND]=[]),this.dictionaryTable=this._parseDIC(n);for(var o in this.compoundRuleCodes)0==this.compoundRuleCodes[o].length&&delete this.compoundRuleCodes[o];for(var o=0,l=this.compoundRules.length;l>o;o++){for(var u=this.compoundRules[o],d="",s=0,c=u.length;c>s;s++){var h=u[s];d+=h in this.compoundRuleCodes?"("+this.compoundRuleCodes[h].join("|")+")":h}this.compoundRules[o]=new RegExp(d,"i")}}return this};o.prototype={load:function(e){for(var t in e)this[t]=e[t];return this},_readFile:function(e,t){t||(t="ISO8859-1");var n=new XMLHttpRequest;return n.open("GET",e,!1),n.overrideMimeType&&n.overrideMimeType("text/plain; charset="+t),n.send(null),n.responseText},_parseAFF:function(e){var t={};e=this._removeAffixComments(e);for(var n=e.split("\n"),r=0,i=n.length;i>r;r++){var o=n[r],l=o.split(/\s+/),a=l[0];if("PFX"==a||"SFX"==a){for(var s=l[1],c=l[2],u=parseInt(l[3],10),d=[],h=r+1,f=r+1+u;f>h;h++){var o=n[h],p=o.split(/\s+/),m=p[2],g=p[3].split("/"),v=g[0];"0"===v&&(v="");var y=this.parseRuleCodes(g[1]),x=p[4],b={};b.add=v,y.length>0&&(b.continuationClasses=y),"."!==x&&("SFX"===a?b.match=new RegExp(x+"$"):b.match=new RegExp("^"+x)),"0"!=m&&("SFX"===a?b.remove=new RegExp(m+"$"):b.remove=m),d.push(b)}t[s]={type:a,combineable:"Y"==c,entries:d},r+=u}else if("COMPOUNDRULE"===a){for(var u=parseInt(l[1],10),h=r+1,f=r+1+u;f>h;h++){var o=n[h],p=o.split(/\s+/);this.compoundRules.push(p[1])}r+=u}else if("REP"===a){var p=o.split(/\s+/);3===p.length&&this.replacementTable.push([p[1],p[2]])}else this.flags[a]=l[1]}return t},_removeAffixComments:function(e){return e=e.replace(/#.*$/gm,""),e=e.replace(/^\s\s*/m,"").replace(/\s\s*$/m,""),e=e.replace(/\n{2,}/g,"\n"),e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(e){function t(e,t){e in r&&"object"==typeof r[e]||(r[e]=[]),r[e].push(t)}e=this._removeDicComments(e);for(var n=e.split("\n"),r={},i=1,o=n.length;o>i;i++){var l=n[i],a=l.split("/",2),s=a[0];if(a.length>1){var c=this.parseRuleCodes(a[1]);"NEEDAFFIX"in this.flags&&-1!=c.indexOf(this.flags.NEEDAFFIX)||t(s,c);for(var u=0,d=c.length;d>u;u++){var h=c[u],f=this.rules[h];if(f)for(var p=this._applyRule(s,f),m=0,g=p.length;g>m;m++){var v=p[m];if(t(v,[]),f.combineable)for(var y=u+1;d>y;y++){var x=c[y],b=this.rules[x];if(b&&b.combineable&&f.type!=b.type)for(var w=this._applyRule(v,b),k=0,C=w.length;C>k;k++){var S=w[k];t(S,[])}}}h in this.compoundRuleCodes&&this.compoundRuleCodes[h].push(s)}}else t(s.trim(),[])}return r},_removeDicComments:function(e){return e=e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(!e)return[];if(!("FLAG"in this.flags))return e.split("");if("long"===this.flags.FLAG){for(var t=[],n=0,r=e.length;r>n;n+=2)t.push(e.substr(n,2));return t}return"num"===this.flags.FLAG?textCode.split(","):void 0},_applyRule:function(e,t){for(var n=t.entries,r=[],i=0,o=n.length;o>i;i++){var l=n[i];if(!l.match||e.match(l.match)){var a=e;if(l.remove&&(a=a.replace(l.remove,"")),"SFX"===t.type?a+=l.add:a=l.add+a,r.push(a),"continuationClasses"in l)for(var s=0,c=l.continuationClasses.length;c>s;s++){var u=this.rules[l.continuationClasses[s]];u&&(r=r.concat(this._applyRule(a,u)))}}}return r},check:function(e){var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var n=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0}var r=t.toLowerCase();if(r!==t){if(this.hasFlag(r,"KEEPCASE"))return!1;if(this.checkExact(r))return!0}return!1},checkExact:function(e){var t=this.dictionaryTable[e];if("undefined"==typeof t){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(var n=0,r=this.compoundRules.length;r>n;n++)if(e.match(this.compoundRules[n]))return!0;return!1}for(var n=0,r=t.length;r>n;n++)if(!this.hasFlag(e,"ONLYINCOMPOUND",t[n]))return!0;return!1},hasFlag:function(e,t,n){if(t in this.flags){if("undefined"==typeof n)var n=Array.prototype.concat.apply([],this.dictionaryTable[e]);if(n&&-1!==n.indexOf(this.flags[t]))return!0}return!1},alphabet:"",suggest:function(e,t){function n(e){for(var t=[],n=0,r=e.length;r>n;n++){for(var i=e[n],o=[],l=0,a=i.length+1;a>l;l++)o.push([i.substring(0,l),i.substring(l,i.length)]);for(var s=[],l=0,a=o.length;a>l;l++){var u=o[l];u[1]&&s.push(u[0]+u[1].substring(1))}for(var d=[],l=0,a=o.length;a>l;l++){var u=o[l];u[1].length>1&&d.push(u[0]+u[1][1]+u[1][0]+u[1].substring(2))}for(var h=[],l=0,a=o.length;a>l;l++){var u=o[l];if(u[1])for(var f=0,p=c.alphabet.length;p>f;f++)h.push(u[0]+c.alphabet[f]+u[1].substring(1))}for(var m=[],l=0,a=o.length;a>l;l++){var u=o[l];if(u[1])for(var f=0,p=c.alphabet.length;p>f;f++)h.push(u[0]+c.alphabet[f]+u[1])}t=t.concat(s),t=t.concat(d),t=t.concat(h),t=t.concat(m)}return t}function r(e){for(var t=[],n=0;n<e.length;n++)c.check(e[n])&&t.push(e[n]);return t}function i(e){function i(e,t){return e[1]<t[1]?-1:1}for(var o=n([e]),l=n(o),a=r(o).concat(r(l)),s={},u=0,d=a.length;d>u;u++)a[u]in s?s[a[u]]+=1:s[a[u]]=1;var h=[];for(var u in s)h.push([u,s[u]]);h.sort(i).reverse();for(var f=[],u=0,d=Math.min(t,h.length);d>u;u++)c.hasFlag(h[u][0],"NOSUGGEST")||f.push(h[u][0]);return f}if(t||(t=5),this.check(e))return[];for(var o=0,l=this.replacementTable.length;l>o;o++){var a=this.replacementTable[o];if(-1!==e.indexOf(a[0])){var s=e.replace(a[0],a[1]);if(this.check(s))return[s]}}var c=this;return c.alphabet="abcdefghijklmnopqrstuvwxyz",i(e)}},i("undefined"!=typeof o?o:window.Typo)}).call(e,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror")):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function n(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}e.defineOption("fullScreen",!1,function(r,i,o){o==e.Init&&(o=!1),!o!=!i&&(i?t(r):n(r))})})},{"../../lib/codemirror":6}],4:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror")):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";var t=/^(\s*)(>[> ]*|[*+-]\s|(\d+)([.)]))(\s*)/,n=/^(\s*)(>[> ]*|[*+-]|(\d+)[.)])(\s*)$/,r=/[*+-]\s/;e.commands.newlineAndIndentContinueMarkdownList=function(i){if(i.getOption("disableInput"))return e.Pass;for(var o=i.listSelections(),l=[],a=0;a<o.length;a++){var s=o[a].head,c=i.getStateAfter(s.line),u=c.list!==!1,d=0!==c.quote,h=i.getLine(s.line),f=t.exec(h);if(!o[a].empty()||!u&&!d||!f)return void i.execCommand("newlineAndIndent");if(n.test(h))i.replaceRange("",{line:s.line,ch:0},{line:s.line,ch:s.ch+1}),l[a]="\n";else{var p=f[1],m=f[5],g=r.test(f[2])||f[2].indexOf(">")>=0?f[2]:parseInt(f[3],10)+1+f[4];l[a]="\n"+p+g+m}}i.replaceSelections(l)}})},{"../../lib/codemirror":6}],5:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror")):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";e.overlayMode=function(t,n,r){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(r){return{base:e.copyState(t,r.base),overlay:e.copyState(n,r.overlay),basePos:r.basePos,baseCur:null,overlayPos:r.overlayPos,overlayCur:null}},token:function(e,i){return(e!=i.streamSeen||Math.min(i.basePos,i.overlayPos)<e.start)&&(i.streamSeen=e,i.basePos=i.overlayPos=e.start),e.start==i.basePos&&(i.baseCur=t.token(e,i.base),i.basePos=e.pos),e.start==i.overlayPos&&(e.pos=e.start,i.overlayCur=n.token(e,i.overlay),i.overlayPos=e.pos),e.pos=Math.min(i.basePos,i.overlayPos),null==i.overlayCur?i.baseCur:null!=i.baseCur&&i.overlay.combineTokens||r&&null==i.overlay.combineTokens?i.baseCur+" "+i.overlayCur:i.overlayCur},indent:t.indent&&function(e,n){return t.indent(e.base,n)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){t.blankLine&&t.blankLine(e.base),n.blankLine&&n.blankLine(e.overlay)}}}})},{"../../lib/codemirror":6}],6:[function(t,n,r){!function(t){if("object"==typeof r&&"object"==typeof n)n.exports=t();else{if("function"==typeof e&&e.amd)return e([],t);this.CodeMirror=t()}}(function(){"use strict";function e(n,r){if(!(this instanceof e))return new e(n,r);this.options=r=r?Pi(r):{},Pi(Qo,r,!1),f(r);var i=r.value;"string"==typeof i&&(i=new kl(i,r.mode,null,r.lineSeparator)),this.doc=i;var o=new e.inputStyles[r.inputStyle](this),l=this.display=new t(n,i,o);l.wrapper.CodeMirror=this,c(this),a(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),r.autofocus&&!No&&l.input.focus(),v(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Ai,keySeq:null,specialChars:null};var s=this;yo&&11>xo&&setTimeout(function(){s.display.input.reset(!0)},20),_t(this),Ki(),xt(this),this.curOp.forceUpdate=!0,Xr(this,i),r.autofocus&&!No||s.hasFocus()?setTimeout(zi(gn,this),20):vn(this);for(var u in Jo)Jo.hasOwnProperty(u)&&Jo[u](this,r[u],el);k(this),r.finishInit&&r.finishInit(this);for(var d=0;d<il.length;++d)il[d](this);wt(this),bo&&r.lineWrapping&&"optimizelegibility"==getComputedStyle(l.lineDiv).textRendering&&(l.lineDiv.style.textRendering="auto")}function t(e,t,n){var r=this;this.input=n,r.scrollbarFiller=_i("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("cm-not-content","true"),r.gutterFiller=_i("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("cm-not-content","true"),r.lineDiv=_i("div",null,"CodeMirror-code"),r.selectionDiv=_i("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=_i("div",null,"CodeMirror-cursors"),r.measure=_i("div",null,"CodeMirror-measure"),r.lineMeasure=_i("div",null,"CodeMirror-measure"),r.lineSpace=_i("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none"),r.mover=_i("div",[_i("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=_i("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=_i("div",null,null,"position: absolute; height: "+Dl+"px; width: 1px;"),r.gutters=_i("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=_i("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=_i("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),yo&&8>xo&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),bo||mo&&No||(r.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(r.wrapper):e(r.wrapper)),r.viewFrom=r.viewTo=t.first,r.reportedViewFrom=r.reportedViewTo=t.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.alignWidgets=!1,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null,r.activeTouch=null,n.init(r)}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),r(t)}function r(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Fe(e,100),e.state.modeGen++,e.curOp&&Et(e)}function i(e){e.options.lineWrapping?(Yl(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Xl(e.display.wrapper,"CodeMirror-wrap"),h(e)),l(e),Et(e),lt(e),setTimeout(function(){y(e)},100)}function o(e){var t=vt(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/yt(e.display)-3);return function(i){if(wr(e.doc,i))return 0;var o=0;if(i.widgets)for(var l=0;l<i.widgets.length;l++)i.widgets[l].height&&(o+=i.widgets[l].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function l(e){var t=e.doc,n=o(e);t.iter(function(e){var t=n(e);t!=e.height&&Jr(e,t)})}function a(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),lt(e)}function s(e){c(e),Et(e),setTimeout(function(){w(e)},20)}function c(e){var t=e.display.gutters,n=e.options.gutters;ji(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(_i("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",u(e)}function u(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function d(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=pr(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=mr(r);){var i=t.find(0,!0);n-=r.text.length-i.from.ch,r=i.to.line,n+=r.text.length-i.to.ch}return n}function h(e){var t=e.display,n=e.doc;t.maxLine=Yr(n,n.first),t.maxLineLength=d(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=d(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function f(e){var t=Hi(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function p(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+qe(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Ue(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function m(e,t,n){this.cm=n;var r=this.vert=_i("div",[_i("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=_i("div",[_i("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(r),e(i),Nl(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),Nl(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,yo&&8>xo&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function g(){}function v(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Xl(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),Nl(e,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?rn(t,e):nn(t,e)},t),t.display.scrollbars.addClass&&Yl(t.display.wrapper,t.display.scrollbars.addClass)}function y(e,t){t||(t=p(e));var n=e.display.barWidth,r=e.display.barHeight;x(e,t);for(var i=0;4>i&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&W(e),x(e,p(e)),n=e.display.barWidth,r=e.display.barHeight}function x(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function b(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-je(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=ti(t,r),l=ti(t,i);if(n&&n.ensure){var a=n.ensure.from.line,s=n.ensure.to.line;o>a?(o=a,l=ti(t,ni(Yr(t,a))+e.wrapper.clientHeight)):Math.min(s,t.lastLine())>=l&&(o=ti(t,ni(Yr(t,s))-e.wrapper.clientHeight),l=s)}return{from:o,to:Math.max(l,o+1)}}function w(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=S(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",l=0;l<n.length;l++)if(!n[l].hidden){e.options.fixedGutter&&n[l].gutter&&(n[l].gutter.style.left=o);var a=n[l].alignable;if(a)for(var s=0;s<a.length;s++)a[s].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function k(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=C(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(_i("div",[_i("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-l)+1,r.lineNumWidth=r.lineNumInnerWidth+l,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",u(e),!0}return!1}function C(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function S(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function L(e,t,n){var r=e.display;this.viewport=t,this.visible=b(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=$e(e),this.force=n,this.dims=D(e),this.events=[]}function T(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ue(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ue(e)+"px",t.scrollbarsClipped=!0)}function M(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Pt(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Bt(e))return!1;k(e)&&(Pt(e),t.dims=D(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),l=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>l&&n.viewTo-l<20&&(l=Math.min(i,n.viewTo)),Io&&(o=xr(e.doc,o),l=br(e.doc,l));var a=o!=n.viewFrom||l!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Rt(e,o,l),n.viewOffset=ni(Yr(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var s=Bt(e);if(!a&&0==s&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=Gi();return s>4&&(n.lineDiv.style.display="none"),E(e,n.updateLineNumbers,t.dims),s>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,c&&Gi()!=c&&c.offsetHeight&&c.focus(),ji(n.cursorDiv),ji(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Fe(e,400)),n.updateLineNumbers=null,!0}function N(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=$e(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+qe(e.display)-Ve(e),n.top)}),t.visible=b(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&M(e,t);r=!1){W(e);var i=p(e);De(e),O(e,i),y(e,i)}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function A(e,t){var n=new L(e,t);if(M(e,n)){W(e),N(e,n);var r=p(e);De(e),O(e,r),y(e,r),n.finish()}}function O(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var n=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=n+"px",e.display.gutters.style.height=Math.max(n+Ue(e),t.clientHeight)+"px"}function W(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i,o=t.view[r];if(!o.hidden){if(yo&&8>xo){var l=o.node.offsetTop+o.node.offsetHeight;i=l-n,n=l}else{var a=o.node.getBoundingClientRect();i=a.bottom-a.top}var s=o.line.height-i;if(2>i&&(i=vt(t)),(s>.001||-.001>s)&&(Jr(o.line,i),H(o.line),o.rest))for(var c=0;c<o.rest.length;c++)H(o.rest[c])}}}function H(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function D(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,l=0;o;o=o.nextSibling,++l)n[e.options.gutters[l]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[l]]=o.clientWidth;return{fixedPos:S(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function E(e,t,n){function r(t){var n=t.nextSibling;return bo&&Ao&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var i=e.display,o=e.options.lineNumbers,l=i.lineDiv,a=l.firstChild,s=i.view,c=i.viewFrom,u=0;u<s.length;u++){var d=s[u];if(d.hidden);else if(d.node&&d.node.parentNode==l){for(;a!=d.node;)a=r(a);var h=o&&null!=t&&c>=t&&d.lineNumber;d.changes&&(Hi(d.changes,"gutter")>-1&&(h=!1),I(e,d,c,n)),h&&(ji(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(C(e.options,c)))),a=d.node.nextSibling}else{var f=q(e,d,c,n);l.insertBefore(f,a)}c+=d.size}for(;a;)a=r(a)}function I(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?R(e,t):"gutter"==o?_(e,t,n,r):"class"==o?B(t):"widget"==o&&j(e,t,r)}t.changes=null}function P(e){return e.node==e.text&&(e.node=_i("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),yo&&8>xo&&(e.node.style.zIndex=2)),e.node}function z(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=P(e);e.background=n.insertBefore(_i("div",null,t),n.firstChild)}}function F(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):zr(e,t)}function R(e,t){var n=t.text.className,r=F(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,B(t)):n&&(t.text.className=n)}function B(e){z(e),e.line.wrapClass?P(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function _(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=P(t);t.gutterBackground=_i("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var i=P(t),l=t.gutter=_i("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),i.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(_i("div",C(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var a=0;a<e.options.gutters.length;++a){var s=e.options.gutters[a],c=o.hasOwnProperty(s)&&o[s];c&&l.appendChild(_i("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[s]+"px; width: "+r.gutterWidth[s]+"px"))}}}function j(e,t,n){t.alignable&&(t.alignable=null);for(var r,i=t.node.firstChild;i;i=r){var r=i.nextSibling;"CodeMirror-linewidget"==i.className&&t.node.removeChild(i)}G(e,t,n)}function q(e,t,n,r){var i=F(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),B(t),_(e,t,n,r),G(e,t,r),t.node}function G(e,t,n){if(U(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)U(e,t.rest[r],t,n,!1)}function U(e,t,n,r,i){if(t.widgets)for(var o=P(n),l=0,a=t.widgets;l<a.length;++l){var s=a[l],c=_i("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),$(s,c,n,r),e.display.input.setUneditable(c),i&&s.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),Ci(s,"redraw")}}function $(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function V(e){return Po(e.line,e.ch)}function K(e,t){return zo(e,t)<0?t:e}function X(e,t){return zo(e,t)<0?e:t}function Y(e){e.state.focused||(e.display.input.focus(),gn(e))}function Z(e){return e.options.readOnly||e.doc.cantEdit}function Q(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var l=e.state.pasteIncoming||"paste"==i,a=o.splitLines(t),s=null;if(l&&r.ranges.length>1)if(Fo&&Fo.join("\n")==t){if(r.ranges.length%Fo.length==0){s=[];for(var c=0;c<Fo.length;c++)s.push(o.splitLines(Fo[c]))}}else a.length==r.ranges.length&&(s=Di(a,function(e){return[e]}));for(var c=r.ranges.length-1;c>=0;c--){var u=r.ranges[c],d=u.from(),h=u.to();u.empty()&&(n&&n>0?d=Po(d.line,d.ch-n):e.state.overwrite&&!l&&(h=Po(h.line,Math.min(Yr(o,h.line).text.length,h.ch+Wi(a).length))));var f=e.curOp.updateInput,p={from:d,to:h,text:s?s[c%s.length]:a,origin:i||(l?"paste":e.state.cutIncoming?"cut":"+input")};Ln(e.doc,p),Ci(e,"inputRead",e,p)}t&&!l&&ee(e,t),zn(e),e.curOp.updateInput=f,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function J(e,t){var n=e.clipboardData&&e.clipboardData.getData("text/plain");return n?(e.preventDefault(),Z(t)||t.options.disableInput||Nt(t,function(){Q(t,n,0,null,"paste")}),!0):void 0}function ee(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),l=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){l=Rn(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Yr(e.doc,i.head.line).text.slice(0,i.head.ch))&&(l=Rn(e,i.head.line,"smart"));l&&Ci(e,"electricInput",e,i.head.line)}}}function te(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:Po(i,0),head:Po(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function ne(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function re(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Ai,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function ie(){var e=_i("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=_i("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return bo?e.style.width="1000px":e.setAttribute("wrap","off"),Mo&&(e.style.border="1px solid black"),ne(e),t}function oe(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ai,this.gracePeriod=!1}function le(e,t){var n=Qe(e,t.line);if(!n||n.hidden)return null;var r=Yr(e.doc,t.line),i=Xe(n,r,t.line),o=ri(r),l="left";if(o){var a=so(o,t.ch);l=a%2?"right":"left"}var s=tt(i.map,t.ch,l);return s.offset="right"==s.collapse?s.end:s.start,s}function ae(e,t){return t&&(e.bad=!0),e}function se(e,t,n){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[n],!r)return ae(e.clipPos(Po(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}
for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return ce(o,t,n)}}function ce(e,t,n){function r(t,n,r){for(var i=-1;i<(u?u.length:0);i++)for(var o=0>i?c.map:u[i],l=0;l<o.length;l+=3){var a=o[l+2];if(a==t||a==n){var s=ei(0>i?e.line:e.rest[i]),d=o[l]+r;return(0>r||a!=t)&&(d=o[l+(r?1:0)]),Po(s,d)}}}var i=e.text.firstChild,o=!1;if(!t||!$l(i,t))return ae(Po(ei(e.line),0),!0);if(t==i&&(o=!0,t=i.childNodes[n],n=0,!t)){var l=e.rest?Wi(e.rest):e.line;return ae(Po(ei(l),l.text.length),o)}var a=3==t.nodeType?t:null,s=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=i;)s=s.parentNode;var c=e.measure,u=c.maps,d=r(a,s,n);if(d)return ae(d,o);for(var h=s.nextSibling,f=a?a.nodeValue.length-n:0;h;h=h.nextSibling){if(d=r(h,h.firstChild,0))return ae(Po(d.line,d.ch-f),o);f+=h.textContent.length}for(var p=s.previousSibling,f=n;p;p=p.previousSibling){if(d=r(p,p.firstChild,-1))return ae(Po(d.line,d.ch+f),o);f+=h.textContent.length}}function ue(e,t,n,r,i){function o(e){return function(t){return t.id==e}}function l(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return""==n&&(n=t.textContent.replace(/\u200b/g,"")),void(a+=n);var u,d=t.getAttribute("cm-marker");if(d){var h=e.findMarks(Po(r,0),Po(i+1,0),o(+d));return void(h.length&&(u=h[0].find())&&(a+=Zr(e.doc,u.from,u.to).join(c)))}if("false"==t.getAttribute("contenteditable"))return;for(var f=0;f<t.childNodes.length;f++)l(t.childNodes[f]);/^(pre|div|p)$/i.test(t.nodeName)&&(s=!0)}else if(3==t.nodeType){var p=t.nodeValue;if(!p)return;s&&(a+=c,s=!1),a+=p}}for(var a="",s=!1,c=e.doc.lineSeparator();l(t),t!=n;)t=t.nextSibling;return a}function de(e,t){this.ranges=e,this.primIndex=t}function he(e,t){this.anchor=e,this.head=t}function fe(e,t){var n=e[t];e.sort(function(e,t){return zo(e.from(),t.from())}),t=Hi(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(zo(o.to(),i.from())>=0){var l=X(o.from(),i.from()),a=K(o.to(),i.to()),s=o.empty()?i.from()==i.head:o.from()==o.head;t>=r&&--t,e.splice(--r,2,new he(s?a:l,s?l:a))}}return new de(e,t)}function pe(e,t){return new de([new he(e,t||e)],0)}function me(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ge(e,t){if(t.line<e.first)return Po(e.first,0);var n=e.first+e.size-1;return t.line>n?Po(n,Yr(e,n).text.length):ve(t,Yr(e,t.line).text.length)}function ve(e,t){var n=e.ch;return null==n||n>t?Po(e.line,t):0>n?Po(e.line,0):e}function ye(e,t){return t>=e.first&&t<e.first+e.size}function xe(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=ge(e,t[r]);return n}function be(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var o=zo(n,i)<0;o!=zo(r,i)<0?(i=n,n=r):o!=zo(n,r)<0&&(n=r)}return new he(i,n)}return new he(r||n,n)}function we(e,t,n,r){Me(e,new de([be(e,e.sel.primary(),t,n)],0),r)}function ke(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=be(e,e.sel.ranges[i],t[i],null);var o=fe(r,e.sel.primIndex);Me(e,o,n)}function Ce(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Me(e,fe(i,e.sel.primIndex),r)}function Se(e,t,n,r){Me(e,pe(t,n),r)}function Le(e,t){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new he(ge(e,t[n].anchor),ge(e,t[n].head))}};return Wl(e,"beforeSelectionChange",e,n),e.cm&&Wl(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?fe(n.ranges,n.ranges.length-1):t}function Te(e,t,n){var r=e.history.done,i=Wi(r);i&&i.ranges?(r[r.length-1]=t,Ne(e,t,n)):Me(e,t,n)}function Me(e,t,n){Ne(e,t,n),ui(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Ne(e,t,n){(Mi(e,"beforeSelectionChange")||e.cm&&Mi(e.cm,"beforeSelectionChange"))&&(t=Le(e,t));var r=n&&n.bias||(zo(t.primary().head,e.sel.primary().head)<0?-1:1);Ae(e,We(e,t,r,!0)),n&&n.scroll===!1||!e.cm||zn(e.cm)}function Ae(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Ti(e.cm)),Ci(e,"cursorActivity",e))}function Oe(e){Ae(e,We(e,e.sel,null,!1),Il)}function We(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var l=t.ranges[o],a=He(e,l.anchor,n,r),s=He(e,l.head,n,r);(i||a!=l.anchor||s!=l.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new he(a,s))}return i?fe(i,t.primIndex):t}function He(e,t,n,r){var i=!1,o=t,l=n||1;e.cantEdit=!1;e:for(;;){var a=Yr(e,o.line);if(a.markedSpans)for(var s=0;s<a.markedSpans.length;++s){var c=a.markedSpans[s],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(u.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(r&&(Wl(u,"beforeCursorEnter"),u.explicitlyCleared)){if(a.markedSpans){--s;continue}break}if(!u.atomic)continue;var d=u.find(0>l?-1:1);if(0==zo(d,o)&&(d.ch+=l,d.ch<0?d=d.line>e.first?ge(e,Po(d.line-1)):null:d.ch>a.text.length&&(d=d.line<e.first+e.size-1?Po(d.line+1,0):null),!d)){if(i)return r?(e.cantEdit=!0,Po(e.first,0)):He(e,t,n,!0);i=!0,d=t,l=-l}o=d;continue e}}return o}}function De(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ee(e,t){for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),l=0;l<n.sel.ranges.length;l++)if(t!==!1||l!=n.sel.primIndex){var a=n.sel.ranges[l],s=a.empty();(s||e.options.showCursorWhenSelecting)&&Ie(e,a.head,i),s||Pe(e,a,o)}return r}function Ie(e,t,n){var r=ht(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(_i("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(_i("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function Pe(e,t,n){function r(e,t,n,r){0>t&&(t=0),t=Math.round(t),r=Math.round(r),a.appendChild(_i("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?u-e:n)+"px; height: "+(r-t)+"px"))}function i(t,n,i){function o(n,r){return dt(e,Po(t,n),"div",d,r)}var a,s,d=Yr(l,t),h=d.text.length;return Ji(ri(d),n||0,null==i?h:i,function(e,t,l){var d,f,p,m=o(e,"left");if(e==t)d=m,f=p=m.left;else{if(d=o(t-1,"right"),"rtl"==l){var g=m;m=d,d=g}f=m.left,p=d.right}null==n&&0==e&&(f=c),d.top-m.top>3&&(r(f,m.top,null,m.bottom),f=c,m.bottom<d.top&&r(f,m.bottom,null,d.top)),null==i&&t==h&&(p=u),(!a||m.top<a.top||m.top==a.top&&m.left<a.left)&&(a=m),(!s||d.bottom>s.bottom||d.bottom==s.bottom&&d.right>s.right)&&(s=d),c+1>f&&(f=c),r(f,d.top,p-f,d.bottom)}),{start:a,end:s}}var o=e.display,l=e.doc,a=document.createDocumentFragment(),s=Ge(e.display),c=s.left,u=Math.max(o.sizerWidth,$e(e)-o.sizer.offsetLeft)-s.right,d=t.from(),h=t.to();if(d.line==h.line)i(d.line,d.ch,h.ch);else{var f=Yr(l,d.line),p=Yr(l,h.line),m=vr(f)==vr(p),g=i(d.line,d.ch,m?f.text.length+1:null).end,v=i(h.line,m?0:null,h.ch).start;m&&(g.top<v.top-2?(r(g.right,g.top,null,g.bottom),r(c,v.top,v.left,v.bottom)):r(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&r(c,g.bottom,null,v.top)}n.appendChild(a)}function ze(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Fe(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,zi(Re,e))}function Re(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=ll(t.mode,_e(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var l=o.styles,a=o.text.length>e.options.maxHighlightLength,s=Dr(e,o,a?ll(t.mode,r):r,!0);o.styles=s.styles;var c=o.styleClasses,u=s.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var d=!l||l.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),h=0;!d&&h<l.length;++h)d=l[h]!=o.styles[h];d&&i.push(t.frontier),o.stateAfter=a?r:ll(t.mode,r)}else o.text.length<=e.options.maxHighlightLength&&Ir(e,o.text,r),o.stateAfter=t.frontier%5==0?ll(t.mode,r):null;return++t.frontier,+new Date>n?(Fe(e,e.options.workDelay),!0):void 0}),i.length&&Nt(e,function(){for(var t=0;t<i.length;t++)It(e,i[t],"text")})}}function Be(e,t,n){for(var r,i,o=e.doc,l=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>l;--a){if(a<=o.first)return o.first;var s=Yr(o,a-1);if(s.stateAfter&&(!n||a<=o.frontier))return a;var c=Fl(s.text,null,e.options.tabSize);(null==i||r>c)&&(i=a-1,r=c)}return i}function _e(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var o=Be(e,t,n),l=o>r.first&&Yr(r,o-1).stateAfter;return l=l?ll(r.mode,l):al(r.mode),r.iter(o,t,function(n){Ir(e,n.text,l);var a=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;n.stateAfter=a?ll(r.mode,l):null,++o}),n&&(r.frontier=o),l}function je(e){return e.lineSpace.offsetTop}function qe(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ge(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=qi(e.measure,_i("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Ue(e){return Dl-e.display.nativeBarWidth}function $e(e){return e.display.scroller.clientWidth-Ue(e)-e.display.barWidth}function Ve(e){return e.display.scroller.clientHeight-Ue(e)-e.display.barHeight}function Ke(e,t,n){var r=e.options.lineWrapping,i=r&&$e(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var l=t.text.firstChild.getClientRects(),a=0;a<l.length-1;a++){var s=l[a],c=l[a+1];Math.abs(s.bottom-c.bottom)>2&&o.push((s.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Xe(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var r=0;r<e.rest.length;r++)if(ei(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Ye(e,t){t=vr(t);var n=ei(t),r=e.display.externalMeasured=new Ht(e.doc,t,n);r.lineN=n;var i=r.built=zr(e,r);return r.text=i.pre,qi(e.display.lineMeasure,i.pre),r}function Ze(e,t,n,r){return et(e,Je(e,t),n,r)}function Qe(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[zt(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Je(e,t){var n=ei(t),r=Qe(e,n);r&&!r.text?r=null:r&&r.changes&&(I(e,r,n,D(e)),e.curOp.forceUpdate=!0),r||(r=Ye(e,t));var i=Xe(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function et(e,t,n,r,i){t.before&&(n=-1);var o,l=n+(r||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Ke(e,t.view,t.rect),t.hasHeights=!0),o=nt(e,t,n,r),o.bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function tt(e,t,n){for(var r,i,o,l,a=0;a<e.length;a+=3){var s=e[a],c=e[a+1];if(s>t?(i=0,o=1,l="left"):c>t?(i=t-s,o=i+1):(a==e.length-3||t==c&&e[a+3]>t)&&(o=c-s,i=o-1,t>=c&&(l="right")),null!=i){if(r=e[a+2],s==c&&n==(r.insertLeft?"left":"right")&&(l=n),"left"==n&&0==i)for(;a&&e[a-2]==e[a-3]&&e[a-1].insertLeft;)r=e[(a-=3)+2],l="left";if("right"==n&&i==c-s)for(;a<e.length-3&&e[a+3]==e[a+4]&&!e[a+5].insertLeft;)r=e[(a+=3)+2],l="right";break}}return{node:r,start:i,end:o,collapse:l,coverStart:s,coverEnd:c}}function nt(e,t,n,r){var i,o=tt(t.map,n,r),l=o.node,a=o.start,s=o.end,c=o.collapse;if(3==l.nodeType){for(var u=0;4>u;u++){for(;a&&Bi(t.line.text.charAt(o.coverStart+a));)--a;for(;o.coverStart+s<o.coverEnd&&Bi(t.line.text.charAt(o.coverStart+s));)++s;if(yo&&9>xo&&0==a&&s==o.coverEnd-o.coverStart)i=l.parentNode.getBoundingClientRect();else if(yo&&e.options.lineWrapping){var d=jl(l,a,s).getClientRects();i=d.length?d["right"==r?d.length-1:0]:jo}else i=jl(l,a,s).getBoundingClientRect()||jo;if(i.left||i.right||0==a)break;s=a,a-=1,c="right"}yo&&11>xo&&(i=rt(e.display.measure,i))}else{a>0&&(c=r="right");var d;i=e.options.lineWrapping&&(d=l.getClientRects()).length>1?d["right"==r?d.length-1:0]:l.getBoundingClientRect()}if(yo&&9>xo&&!a&&(!i||!i.left&&!i.right)){var h=l.parentNode.getClientRects()[0];i=h?{left:h.left,right:h.left+yt(e.display),top:h.top,bottom:h.bottom}:jo}for(var f=i.top-t.rect.top,p=i.bottom-t.rect.top,m=(f+p)/2,g=t.view.measure.heights,u=0;u<g.length-1&&!(m<g[u]);u++);var v=u?g[u-1]:0,y=g[u],x={left:("right"==c?i.right:i.left)-t.rect.left,right:("left"==c?i.left:i.right)-t.rect.left,top:v,bottom:y};return i.left||i.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=f,x.rbottom=p),x}function rt(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Qi(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function it(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function ot(e){e.display.externalMeasure=null,ji(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)it(e.display.view[t])}function lt(e){ot(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function at(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function st(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function ct(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=Sr(t.widgets[i]);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var l=ni(t);if("local"==r?l+=je(e.display):l-=e.display.viewOffset,"page"==r||"window"==r){var a=e.display.lineSpace.getBoundingClientRect();l+=a.top+("window"==r?0:st());var s=a.left+("window"==r?0:at());n.left+=s,n.right+=s}return n.top+=l,n.bottom+=l,n}function ut(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=at(),i-=st();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var l=e.display.lineSpace.getBoundingClientRect();return{left:r-l.left,top:i-l.top}}function dt(e,t,n,r,i){return r||(r=Yr(e.doc,t.line)),ct(e,r,Ze(e,r,t.ch,i),n)}function ht(e,t,n,r,i,o){function l(t,l){var a=et(e,i,t,l?"right":"left",o);return l?a.left=a.right:a.right=a.left,ct(e,r,a,n)}function a(e,t){var n=s[t],r=n.level%2;return e==eo(n)&&t&&n.level<s[t-1].level?(n=s[--t],e=to(n)-(n.level%2?0:1),r=!0):e==to(n)&&t<s.length-1&&n.level<s[t+1].level&&(n=s[++t],e=eo(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?l(e-1):l(e,r)}r=r||Yr(e.doc,t.line),i||(i=Je(e,r));var s=ri(r),c=t.ch;if(!s)return l(c);var u=so(s,c),d=a(c,u);return null!=ia&&(d.other=a(c,ia)),d}function ft(e,t){var n=0,t=ge(e.doc,t);e.options.lineWrapping||(n=yt(e.display)*t.ch);var r=Yr(e.doc,t.line),i=ni(r)+je(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function pt(e,t,n,r){var i=Po(e,t);return i.xRel=r,n&&(i.outside=!0),i}function mt(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,0>n)return pt(r.first,0,!0,-1);var i=ti(r,n),o=r.first+r.size-1;if(i>o)return pt(r.first+r.size-1,Yr(r,o).text.length,!0,1);0>t&&(t=0);for(var l=Yr(r,i);;){var a=gt(e,l,i,t,n),s=mr(l),c=s&&s.find(0,!0);if(!s||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;i=ei(l=c.to.line)}}function gt(e,t,n,r,i){function o(r){var i=ht(e,Po(n,r),"line",t,c);return a=!0,l>i.bottom?i.left-s:l<i.top?i.left+s:(a=!1,i.left)}var l=i-ni(t),a=!1,s=2*e.display.wrapper.clientWidth,c=Je(e,t),u=ri(t),d=t.text.length,h=no(t),f=ro(t),p=o(h),m=a,g=o(f),v=a;if(r>g)return pt(n,f,v,1);for(;;){if(u?f==h||f==uo(t,h,1):1>=f-h){for(var y=p>r||g-r>=r-p?h:f,x=r-(y==h?p:g);Bi(t.text.charAt(y));)++y;var b=pt(n,y,y==h?m:v,-1>x?-1:x>1?1:0);return b}var w=Math.ceil(d/2),k=h+w;if(u){k=h;for(var C=0;w>C;++C)k=uo(t,k,1)}var S=o(k);S>r?(f=k,g=S,(v=a)&&(g+=1e3),d=w):(h=k,p=S,m=a,d-=w)}}function vt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ro){Ro=_i("pre");for(var t=0;49>t;++t)Ro.appendChild(document.createTextNode("x")),Ro.appendChild(_i("br"));Ro.appendChild(document.createTextNode("x"))}qi(e.measure,Ro);var n=Ro.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),ji(e.measure),n||1}function yt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=_i("span","xxxxxxxxxx"),n=_i("pre",[t]);qi(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function xt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Go},qo?qo.ops.push(e.curOp):e.curOp.ownsGroup=qo={ops:[e.curOp],delayedCallbacks:[]}}function bt(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}function wt(e){var t=e.curOp,n=t.ownsGroup;if(n)try{bt(n)}finally{qo=null;for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;kt(n)}}function kt(e){for(var t=e.ops,n=0;n<t.length;n++)Ct(t[n]);for(var n=0;n<t.length;n++)St(t[n]);for(var n=0;n<t.length;n++)Lt(t[n]);for(var n=0;n<t.length;n++)Tt(t[n]);for(var n=0;n<t.length;n++)Mt(t[n])}function Ct(e){var t=e.cm,n=t.display;T(t),e.updateMaxLine&&h(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new L(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function St(e){e.updatedDisplay=e.mustUpdate&&M(e.cm,e.update)}function Lt(e){var t=e.cm,n=t.display;e.updatedDisplay&&W(t),e.barMeasure=p(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ze(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Ue(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-$e(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Tt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&rn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&O(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&y(t,e.barMeasure),e.selectionChanged&&ze(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),!e.focus||e.focus!=Gi()||document.hasFocus&&!document.hasFocus()||Y(e.cm)}function Mt(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&N(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==e.scrollTop||n.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(r.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop)),n.scrollbars.setScrollTop(r.scrollTop),n.scroller.scrollTop=r.scrollTop),null==e.scrollLeft||n.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(r.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-$e(t),e.scrollLeft)),n.scrollbars.setScrollLeft(r.scrollLeft),n.scroller.scrollLeft=r.scrollLeft,w(t)),e.scrollToPos){var i=Dn(t,ge(r,e.scrollToPos.from),ge(r,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Hn(t,i)}var o=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(o)for(var a=0;a<o.length;++a)o[a].lines.length||Wl(o[a],"hide");if(l)for(var a=0;a<l.length;++a)l[a].lines.length&&Wl(l[a],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Wl(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Nt(e,t){if(e.curOp)return t();xt(e);try{return t()}finally{wt(e)}}function At(e,t){return function(){if(e.curOp)return t.apply(e,arguments);xt(e);try{return t.apply(e,arguments)}finally{wt(e)}}}function Ot(e){return function(){if(this.curOp)return e.apply(this,arguments);xt(this);try{return e.apply(this,arguments)}finally{wt(this)}}}function Wt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);xt(t);try{return e.apply(this,arguments)}finally{wt(t)}}}function Ht(e,t,n){this.line=t,this.rest=yr(t),this.size=this.rest?ei(Wi(this.rest))-n+1:1,this.node=this.text=null,this.hidden=wr(e,t)}function Dt(e,t,n){for(var r,i=[],o=t;n>o;o=r){var l=new Ht(e.doc,Yr(e.doc,o),o);r=o+l.size,i.push(l)}return i}function Et(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Io&&xr(e.doc,t)<i.viewTo&&Pt(e);else if(n<=i.viewFrom)Io&&br(e.doc,n+r)>i.viewFrom?Pt(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Pt(e);else if(t<=i.viewFrom){var o=Ft(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):Pt(e)}else if(n>=i.viewTo){var o=Ft(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):Pt(e)}else{var l=Ft(e,t,t,-1),a=Ft(e,n,n+r,1);l&&a?(i.view=i.view.slice(0,l.index).concat(Dt(e,l.lineN,a.lineN)).concat(i.view.slice(a.index)),i.viewTo+=r):Pt(e)}var s=i.externalMeasured;s&&(n<s.lineN?s.lineN+=r:t<s.lineN+s.size&&(i.externalMeasured=null))}function It(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[zt(e,t)];if(null!=o.node){var l=o.changes||(o.changes=[]);-1==Hi(l,n)&&l.push(n)}}}function Pt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function zt(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var n=e.display.view,r=0;r<n.length;r++)if(t-=n[r].size,0>t)return r}function Ft(e,t,n,r){var i,o=zt(e,t),l=e.display.view;if(!Io||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=0,s=e.display.viewFrom;o>a;a++)s+=l[a].size;if(s!=t){if(r>0){if(o==l.length-1)return null;i=s+l[o].size-t,o++}else i=s-t;t+=i,n+=i}for(;xr(e.doc,n)!=n;){if(o==(0>r?0:l.length-1))return null;n+=r*l[o-(0>r?1:0)].size,o+=r}return{index:o,lineN:n}}function Rt(e,t,n){var r=e.display,i=r.view;0==i.length||t>=r.viewTo||n<=r.viewFrom?(r.view=Dt(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Dt(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(zt(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Dt(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,zt(e,n)))),r.viewTo=n}function Bt(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function _t(e){function t(){i.activeTouch&&(o=setTimeout(function(){i.activeTouch=null},1e3),l=i.activeTouch,l.end=+new Date)}function n(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function r(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}var i=e.display;Nl(i.scroller,"mousedown",At(e,$t)),yo&&11>xo?Nl(i.scroller,"dblclick",At(e,function(t){if(!Li(e,t)){var n=Ut(e,t);if(n&&!Zt(e,t)&&!Gt(e.display,t)){Ll(t);var r=e.findWordAt(n);we(e.doc,r.anchor,r.head)}}})):Nl(i.scroller,"dblclick",function(t){Li(e,t)||Ll(t)}),Do||Nl(i.scroller,"contextmenu",function(t){yn(e,t)});var o,l={end:0};Nl(i.scroller,"touchstart",function(e){if(!n(e)){clearTimeout(o);var t=+new Date;i.activeTouch={start:t,moved:!1,prev:t-l.end<=300?l:null},1==e.touches.length&&(i.activeTouch.left=e.touches[0].pageX,i.activeTouch.top=e.touches[0].pageY)}}),Nl(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),Nl(i.scroller,"touchend",function(n){var o=i.activeTouch;if(o&&!Gt(i,n)&&null!=o.left&&!o.moved&&new Date-o.start<300){var l,a=e.coordsChar(i.activeTouch,"page");l=!o.prev||r(o,o.prev)?new he(a,a):!o.prev.prev||r(o,o.prev.prev)?e.findWordAt(a):new he(Po(a.line,0),ge(e.doc,Po(a.line+1,0))),e.setSelection(l.anchor,l.head),e.focus(),Ll(n)}t()}),Nl(i.scroller,"touchcancel",t),Nl(i.scroller,"scroll",function(){i.scroller.clientHeight&&(nn(e,i.scroller.scrollTop),rn(e,i.scroller.scrollLeft,!0),Wl(e,"scroll",e))}),Nl(i.scroller,"mousewheel",function(t){on(e,t)}),Nl(i.scroller,"DOMMouseScroll",function(t){on(e,t)}),Nl(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(t){Li(e,t)||Ml(t)},over:function(t){Li(e,t)||(en(e,t),Ml(t))},start:function(t){Jt(e,t)},drop:At(e,Qt),leave:function(){tn(e)}};var a=i.input.getField();Nl(a,"keyup",function(t){fn.call(e,t)}),Nl(a,"keydown",At(e,dn)),Nl(a,"keypress",At(e,pn)),Nl(a,"focus",zi(gn,e)),Nl(a,"blur",zi(vn,e))}function jt(t,n,r){var i=r&&r!=e.Init;if(!n!=!i){var o=t.display.dragFunctions,l=n?Nl:Ol;l(t.display.scroller,"dragstart",o.start),l(t.display.scroller,"dragenter",o.enter),l(t.display.scroller,"dragover",o.over),l(t.display.scroller,"dragleave",o.leave),l(t.display.scroller,"drop",o.drop)}}function qt(e){var t=e.display;(t.lastWrapHeight!=t.wrapper.clientHeight||t.lastWrapWidth!=t.wrapper.clientWidth)&&(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Gt(e,t){for(var n=bi(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Ut(e,t,n,r){var i=e.display;if(!n&&"true"==bi(t).getAttribute("cm-not-content"))return null;var o,l,a=i.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,l=t.clientY-a.top}catch(t){return null}var s,c=mt(e,o,l);if(r&&1==c.xRel&&(s=Yr(e.doc,c.line).text).length==c.ch){var u=Fl(s,s.length,e.options.tabSize)-s.length;c=Po(c.line,Math.max(0,Math.round((o-Ge(e.display).left)/yt(e.display))-u))}return c}function $t(e){var t=this,n=t.display;if(!(n.activeTouch&&n.input.supportsTouch()||Li(t,e))){if(n.shift=e.shiftKey,Gt(n,e))return void(bo||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100)));if(!Zt(t,e)){var r=Ut(t,e);switch(window.focus(),wi(e)){case 1:t.state.selectingText?t.state.selectingText(e):r?Vt(t,e,r):bi(e)==n.scroller&&Ll(e);break;case 2:bo&&(t.state.lastMiddleDown=+new Date),r&&we(t.doc,r),setTimeout(function(){n.input.focus()},20),Ll(e);break;case 3:Do?yn(t,e):mn(t)}}}}function Vt(e,t,n){yo?setTimeout(zi(Y,e),0):e.curOp.focus=Gi();var r,i=+new Date;_o&&_o.time>i-400&&0==zo(_o.pos,n)?r="triple":Bo&&Bo.time>i-400&&0==zo(Bo.pos,n)?(r="double",_o={time:i,pos:n}):(r="single",Bo={time:i,pos:n});var o,l=e.doc.sel,a=Ao?t.metaKey:t.ctrlKey;e.options.dragDrop&&Ql&&!Z(e)&&"single"==r&&(o=l.contains(n))>-1&&(zo((o=l.ranges[o]).from(),n)<0||n.xRel>0)&&(zo(o.to(),n)>0||n.xRel<0)?Kt(e,t,n,a):Xt(e,t,n,r,a)}function Kt(e,t,n,r){var i=e.display,o=+new Date,l=At(e,function(a){bo&&(i.scroller.draggable=!1),e.state.draggingText=!1,Ol(document,"mouseup",l),Ol(i.scroller,"drop",l),Math.abs(t.clientX-a.clientX)+Math.abs(t.clientY-a.clientY)<10&&(Ll(a),!r&&+new Date-200<o&&we(e.doc,n),bo||yo&&9==xo?setTimeout(function(){document.body.focus(),i.input.focus()},20):i.input.focus())});bo&&(i.scroller.draggable=!0),e.state.draggingText=l,i.scroller.dragDrop&&i.scroller.dragDrop(),Nl(document,"mouseup",l),Nl(i.scroller,"drop",l)}function Xt(e,t,n,r,i){function o(t){if(0!=zo(g,t))if(g=t,"rect"==r){for(var i=[],o=e.options.tabSize,l=Fl(Yr(c,n.line).text,n.ch,o),a=Fl(Yr(c,t.line).text,t.ch,o),s=Math.min(l,a),f=Math.max(l,a),p=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));m>=p;p++){var v=Yr(c,p).text,y=Rl(v,s,o);s==f?i.push(new he(Po(p,y),Po(p,y))):v.length>y&&i.push(new he(Po(p,y),Po(p,Rl(v,f,o))))}i.length||i.push(new he(n,n)),Me(c,fe(h.ranges.slice(0,d).concat(i),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var x=u,b=x.anchor,w=t;if("single"!=r){if("double"==r)var k=e.findWordAt(t);else var k=new he(Po(t.line,0),ge(c,Po(t.line+1,0)));zo(k.anchor,b)>0?(w=k.head,b=X(x.from(),k.anchor)):(w=k.anchor,b=K(x.to(),k.head))}var i=h.ranges.slice(0);i[d]=new he(ge(c,b),w),Me(c,fe(i,d),Pl)}}function l(t){var n=++y,i=Ut(e,t,!0,"rect"==r);if(i)if(0!=zo(i,g)){e.curOp.focus=Gi(),o(i);var a=b(s,c);(i.line>=a.to||i.line<a.from)&&setTimeout(At(e,function(){y==n&&l(t)}),150)}else{var u=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;u&&setTimeout(At(e,function(){y==n&&(s.scroller.scrollTop+=u,l(t))}),50)}}function a(t){e.state.selectingText=!1,y=1/0,Ll(t),s.input.focus(),Ol(document,"mousemove",x),Ol(document,"mouseup",w),c.history.lastSelOrigin=null}var s=e.display,c=e.doc;Ll(t);var u,d,h=c.sel,f=h.ranges;if(i&&!t.shiftKey?(d=c.sel.contains(n),u=d>-1?f[d]:new he(n,n)):(u=c.sel.primary(),d=c.sel.primIndex),t.altKey)r="rect",i||(u=new he(n,n)),n=Ut(e,t,!0,!0),d=-1;else if("double"==r){var p=e.findWordAt(n);u=e.display.shift||c.extend?be(c,u,p.anchor,p.head):p}else if("triple"==r){var m=new he(Po(n.line,0),ge(c,Po(n.line+1,0)));u=e.display.shift||c.extend?be(c,u,m.anchor,m.head):m}else u=be(c,u,n);i?-1==d?(d=f.length,Me(c,fe(f.concat([u]),d),{scroll:!1,origin:"*mouse"})):f.length>1&&f[d].empty()&&"single"==r&&!t.shiftKey?(Me(c,fe(f.slice(0,d).concat(f.slice(d+1)),0),{scroll:!1,origin:"*mouse"}),h=c.sel):Ce(c,d,u,Pl):(d=0,Me(c,new de([u],0),Pl),h=c.sel);var g=n,v=s.wrapper.getBoundingClientRect(),y=0,x=At(e,function(e){wi(e)?l(e):a(e)}),w=At(e,a);e.state.selectingText=w,Nl(document,"mousemove",x),Nl(document,"mouseup",w)}function Yt(e,t,n,r){try{var i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Ll(t);var l=e.display,a=l.lineDiv.getBoundingClientRect();if(o>a.bottom||!Mi(e,n))return xi(t);o-=a.top-l.viewOffset;for(var s=0;s<e.options.gutters.length;++s){var c=l.gutters.childNodes[s];if(c&&c.getBoundingClientRect().right>=i){var u=ti(e.doc,o),d=e.options.gutters[s];return Wl(e,n,e,u,d,t),xi(t)}}}function Zt(e,t){return Yt(e,t,"gutterClick",!0)}function Qt(e){var t=this;if(tn(t),!Li(t,e)&&!Gt(t.display,e)){Ll(e),yo&&(Uo=+new Date);var n=Ut(t,e,!0),r=e.dataTransfer.files;if(n&&!Z(t))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),l=0,a=function(e,r){if(!t.options.allowDropFileTypes||-1!=Hi(t.options.allowDropFileTypes,e.type)){var a=new FileReader;a.onload=At(t,function(){var e=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[r]=e,++l==i){n=ge(t.doc,n);var s={from:n,to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};Ln(t.doc,s),Te(t.doc,pe(n,Zo(s)))}}),a.readAsText(e)}},s=0;i>s;++s)a(r[s],s);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){t.display.input.focus()},20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!(Ao?e.altKey:e.ctrlKey))var c=t.listSelections();if(Ne(t.doc,pe(n,n)),c)for(var s=0;s<c.length;++s)Wn(t.doc,"",c[s].anchor,c[s].head,"drag");t.replaceSelection(o,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Jt(e,t){if(yo&&(!e.state.draggingText||+new Date-Uo<100))return void Ml(t);if(!Li(e,t)&&!Gt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!So)){var n=_i("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Co&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),
t.dataTransfer.setDragImage(n,0,0),Co&&n.parentNode.removeChild(n)}}function en(e,t){var n=Ut(e,t);if(n){var r=document.createDocumentFragment();Ie(e,n,r),e.display.dragCursor||(e.display.dragCursor=_i("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),qi(e.display.dragCursor,r)}}function tn(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function nn(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,mo||A(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),mo&&A(e),Fe(e,100))}function rn(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,w(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function on(e,t){var n=Ko(t),r=n.x,i=n.y,o=e.display,l=o.scroller,a=l.scrollWidth>l.clientWidth,s=l.scrollHeight>l.clientHeight;if(r&&a||i&&s){if(i&&Ao&&bo)e:for(var c=t.target,u=o.view;c!=l;c=c.parentNode)for(var d=0;d<u.length;d++)if(u[d].node==c){e.display.currentWheelTarget=c;break e}if(r&&!mo&&!Co&&null!=Vo)return i&&s&&nn(e,Math.max(0,Math.min(l.scrollTop+i*Vo,l.scrollHeight-l.clientHeight))),rn(e,Math.max(0,Math.min(l.scrollLeft+r*Vo,l.scrollWidth-l.clientWidth))),(!i||i&&s)&&Ll(t),void(o.wheelStartX=null);if(i&&null!=Vo){var h=i*Vo,f=e.doc.scrollTop,p=f+o.wrapper.clientHeight;0>h?f=Math.max(0,f+h-50):p=Math.min(e.doc.height,p+h+50),A(e,{top:f,bottom:p})}20>$o&&(null==o.wheelStartX?(o.wheelStartX=l.scrollLeft,o.wheelStartY=l.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout(function(){if(null!=o.wheelStartX){var e=l.scrollLeft-o.wheelStartX,t=l.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(Vo=(Vo*$o+n)/($o+1),++$o)}},200)):(o.wheelDX+=r,o.wheelDY+=i))}}function ln(e,t,n){if("string"==typeof t&&(t=sl[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{Z(e)&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=El}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function an(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=ul(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&ul(t,e.options.extraKeys,n,e)||ul(t,e.options.keyMap,n,e)}function sn(e,t,n,r){var i=e.state.keySeq;if(i){if(dl(t))return"handled";Xo.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),t=i+" "+t}var o=an(e,t,r);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&Ci(e,"keyHandled",e,t,n),("handled"==o||"multi"==o)&&(Ll(n),ze(e)),i&&!o&&/\'$/.test(t)?(Ll(n),!0):!!o}function cn(e,t){var n=hl(t,!0);return n?t.shiftKey&&!e.state.keySeq?sn(e,"Shift-"+n,t,function(t){return ln(e,t,!0)})||sn(e,n,t,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?ln(e,t):void 0}):sn(e,n,t,function(t){return ln(e,t)}):!1}function un(e,t,n){return sn(e,"'"+n+"'",t,function(t){return ln(e,t,!0)})}function dn(e){var t=this;if(t.curOp.focus=Gi(),!Li(t,e)){yo&&11>xo&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=cn(t,e);Co&&(Yo=r?n:null,!r&&88==n&&!ta&&(Ao?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||hn(t)}}function hn(e){function t(e){18!=e.keyCode&&e.altKey||(Xl(n,"CodeMirror-crosshair"),Ol(document,"keyup",t),Ol(document,"mouseover",t))}var n=e.display.lineDiv;Yl(n,"CodeMirror-crosshair"),Nl(document,"keyup",t),Nl(document,"mouseover",t)}function fn(e){16==e.keyCode&&(this.doc.sel.shift=!1),Li(this,e)}function pn(e){var t=this;if(!(Gt(t.display,e)||Li(t,e)||e.ctrlKey&&!e.altKey||Ao&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(Co&&n==Yo)return Yo=null,void Ll(e);if(!Co||e.which&&!(e.which<10)||!cn(t,e)){var i=String.fromCharCode(null==r?n:r);un(t,e,i)||t.display.input.onKeyPress(e)}}}function mn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,vn(e))},100)}function gn(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Wl(e,"focus",e),e.state.focused=!0,Yl(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),bo&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),ze(e))}function vn(e){e.state.delayingBlurEvent||(e.state.focused&&(Wl(e,"blur",e),e.state.focused=!1,Xl(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function yn(e,t){Gt(e.display,t)||xn(e,t)||Li(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function xn(e,t){return Mi(e,"gutterContextMenu")?Yt(e,t,"gutterContextMenu",!1):!1}function bn(e,t){if(zo(e,t.from)<0)return e;if(zo(e,t.to)<=0)return Zo(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Zo(t).ch-t.to.ch),Po(n,r)}function wn(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new he(bn(i.anchor,t),bn(i.head,t)))}return fe(n,e.sel.primIndex)}function kn(e,t,n){return e.line==t.line?Po(n.line,e.ch-t.ch+n.ch):Po(n.line+(e.line-t.line),e.ch)}function Cn(e,t,n){for(var r=[],i=Po(e.first,0),o=i,l=0;l<t.length;l++){var a=t[l],s=kn(a.from,i,o),c=kn(Zo(a),i,o);if(i=a.to,o=c,"around"==n){var u=e.sel.ranges[l],d=zo(u.head,u.anchor)<0;r[l]=new he(d?c:s,d?s:c)}else r[l]=new he(s,s)}return new de(r,e.sel.primIndex)}function Sn(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=ge(e,t)),n&&(this.to=ge(e,n)),r&&(this.text=r),void 0!==i&&(this.origin=i)}),Wl(e,"beforeChange",e,r),e.cm&&Wl(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Ln(e,t,n){if(e.cm){if(!e.cm.curOp)return At(e.cm,Ln)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Mi(e,"beforeChange")||e.cm&&Mi(e.cm,"beforeChange"))||(t=Sn(e,t,!0))){var r=Eo&&!n&&ar(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Tn(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Tn(e,t)}}function Tn(e,t){if(1!=t.text.length||""!=t.text[0]||0!=zo(t.from,t.to)){var n=wn(e,t);si(e,t,n,e.cm?e.cm.curOp.id:NaN),An(e,t,n,ir(e,t));var r=[];Kr(e,function(e,n){n||-1!=Hi(r,e.history)||(yi(e.history,t),r.push(e.history)),An(e,t,null,ir(e,t))})}}function Mn(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var r,i=e.history,o=e.sel,l="undo"==t?i.done:i.undone,a="undo"==t?i.undone:i.done,s=0;s<l.length&&(r=l[s],n?!r.ranges||r.equals(e.sel):r.ranges);s++);if(s!=l.length){for(i.lastOrigin=i.lastSelOrigin=null;r=l.pop(),r.ranges;){if(di(r,a),n&&!r.equals(e.sel))return void Me(e,r,{clearRedo:!1});o=r}var c=[];di(o,a),a.push({changes:c,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var u=Mi(e,"beforeChange")||e.cm&&Mi(e.cm,"beforeChange"),s=r.changes.length-1;s>=0;--s){var d=r.changes[s];if(d.origin=t,u&&!Sn(e,d,!1))return void(l.length=0);c.push(oi(e,d));var h=s?wn(e,d):Wi(l);An(e,d,h,lr(e,d)),!s&&e.cm&&e.cm.scrollIntoView({from:d.from,to:Zo(d)});var f=[];Kr(e,function(e,t){t||-1!=Hi(f,e.history)||(yi(e.history,d),f.push(e.history)),An(e,d,null,lr(e,d))})}}}}function Nn(e,t){if(0!=t&&(e.first+=t,e.sel=new de(Di(e.sel.ranges,function(e){return new he(Po(e.anchor.line+t,e.anchor.ch),Po(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Et(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)It(e.cm,r,"gutter")}}function An(e,t,n,r){if(e.cm&&!e.cm.curOp)return At(e.cm,An)(e,t,n,r);if(t.to.line<e.first)return void Nn(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Nn(e,i),t={from:Po(e.first,0),to:Po(t.to.line+i,t.to.ch),text:[Wi(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:Po(o,Yr(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Zr(e,t.from,t.to),n||(n=wn(e,t)),e.cm?On(e.cm,t,r):Ur(e,t,r),Ne(e,n,Il)}}function On(e,t,n){var r=e.doc,i=e.display,l=t.from,a=t.to,s=!1,c=l.line;e.options.lineWrapping||(c=ei(vr(Yr(r,l.line))),r.iter(c,a.line+1,function(e){return e==i.maxLine?(s=!0,!0):void 0})),r.sel.contains(t.from,t.to)>-1&&Ti(e),Ur(r,t,n,o(e)),e.options.lineWrapping||(r.iter(c,l.line+t.text.length,function(e){var t=d(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,l.line),Fe(e,400);var u=t.text.length-(a.line-l.line)-1;t.full?Et(e):l.line!=a.line||1!=t.text.length||Gr(e.doc,t)?Et(e,l.line,a.line+1,u):It(e,l.line,"text");var h=Mi(e,"changes"),f=Mi(e,"change");if(f||h){var p={from:l,to:a,text:t.text,removed:t.removed,origin:t.origin};f&&Ci(e,"change",e,p),h&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function Wn(e,t,n,r,i){if(r||(r=n),zo(r,n)<0){var o=r;r=n,n=o}"string"==typeof t&&(t=e.splitLines(t)),Ln(e,{from:n,to:r,text:t,origin:i})}function Hn(e,t){if(!Li(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!To){var o=_i("div","​",null,"position: absolute; top: "+(t.top-n.viewOffset-je(e.display))+"px; height: "+(t.bottom-t.top+Ue(e)+n.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}function Dn(e,t,n,r){null==r&&(r=0);for(var i=0;5>i;i++){var o=!1,l=ht(e,t),a=n&&n!=t?ht(e,n):l,s=In(e,Math.min(l.left,a.left),Math.min(l.top,a.top)-r,Math.max(l.left,a.left),Math.max(l.bottom,a.bottom)+r),c=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=s.scrollTop&&(nn(e,s.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(o=!0)),null!=s.scrollLeft&&(rn(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(o=!0)),!o)break}return l}function En(e,t,n,r,i){var o=In(e,t,n,r,i);null!=o.scrollTop&&nn(e,o.scrollTop),null!=o.scrollLeft&&rn(e,o.scrollLeft)}function In(e,t,n,r,i){var o=e.display,l=vt(e.display);0>n&&(n=0);var a=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,s=Ve(e),c={};i-n>s&&(i=n+s);var u=e.doc.height+qe(o),d=l>n,h=i>u-l;if(a>n)c.scrollTop=d?0:n;else if(i>a+s){var f=Math.min(n,(h?u:i)-s);f!=a&&(c.scrollTop=f)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=$e(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),g=r-t>m;return g&&(r=t+m),10>t?c.scrollLeft=0:p>t?c.scrollLeft=Math.max(0,t-(g?0:10)):r>m+p-3&&(c.scrollLeft=r+(g?0:10)-m),c}function Pn(e,t,n){(null!=t||null!=n)&&Fn(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function zn(e){Fn(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?Po(t.line,t.ch-1):t,r=Po(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function Fn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=ft(e,t.from),r=ft(e,t.to),i=In(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function Rn(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=_e(e,t):n="prev");var l=e.options.tabSize,a=Yr(o,t),s=Fl(a.text,null,l);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(r||/\S/.test(a.text)){if("smart"==n&&(c=o.mode.indent(i,a.text.slice(u.length),a.text),c==El||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?Fl(Yr(o,t-1).text,null,l):0:"add"==n?c=s+e.options.indentUnit:"subtract"==n?c=s-e.options.indentUnit:"number"==typeof n&&(c=s+n),c=Math.max(0,c);var d="",h=0;if(e.options.indentWithTabs)for(var f=Math.floor(c/l);f;--f)h+=l,d+="	";if(c>h&&(d+=Oi(c-h)),d!=u)return Wn(o,d,Po(t,0),Po(t,u.length),"+input"),a.stateAfter=null,!0;for(var f=0;f<o.sel.ranges.length;f++){var p=o.sel.ranges[f];if(p.head.line==t&&p.head.ch<u.length){var h=Po(t,u.length);Ce(o,f,new he(h,h));break}}}function Bn(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=Yr(e,me(e,t)):i=ei(t),null==i?null:(r(o,i)&&e.cm&&It(e.cm,i,n),o)}function _n(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&zo(o.from,Wi(r).to)<=0;){var l=r.pop();if(zo(l.from,o.from)<0){o.from=l.from;break}}r.push(o)}Nt(e,function(){for(var t=r.length-1;t>=0;t--)Wn(e.doc,"",r[t].from,r[t].to,"+delete");zn(e)})}function jn(e,t,n,r,i){function o(){var t=a+n;return t<e.first||t>=e.first+e.size?d=!1:(a=t,u=Yr(e,t))}function l(e){var t=(i?uo:ho)(u,s,n,!0);if(null==t){if(e||!o())return d=!1;s=i?(0>n?ro:no)(u):0>n?u.text.length:0}else s=t;return!0}var a=t.line,s=t.ch,c=n,u=Yr(e,a),d=!0;if("char"==r)l();else if("column"==r)l(!0);else if("word"==r||"group"==r)for(var h=null,f="group"==r,p=e.cm&&e.cm.getHelper(t,"wordChars"),m=!0;!(0>n)||l(!m);m=!1){var g=u.text.charAt(s)||"\n",v=Fi(g,p)?"w":f&&"\n"==g?"n":!f||/\s/.test(g)?null:"p";if(!f||m||v||(v="s"),h&&h!=v){0>n&&(n=1,l());break}if(v&&(h=v),n>0&&!l(!m))break}var y=He(e,Po(a,s),c,!0);return d||(y.hitSide=!0),y}function qn(e,t,n,r){var i,o=e.doc,l=t.left;if("page"==r){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+n*(a-(0>n?1.5:.5)*vt(e.display))}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;;){var s=mt(e,l,i);if(!s.outside)break;if(0>n?0>=i:i>=o.height){s.hitSide=!0;break}i+=5*n}return s}function Gn(t,n,r,i){e.defaults[t]=n,r&&(Jo[t]=i?function(e,t,n){n!=el&&r(e,t,n)}:r)}function Un(e){for(var t,n,r,i,o=e.split(/-(?!$)/),e=o[o.length-1],l=0;l<o.length-1;l++){var a=o[l];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)$/i.test(a))throw new Error("Unrecognized modifier name: "+a);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function $n(e){return"string"==typeof e?cl[e]:e}function Vn(e,t,n,r,i){if(r&&r.shared)return Kn(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return At(e.cm,Vn)(e,t,n,r,i);var o=new ml(e,i),l=zo(t,n);if(r&&Pi(r,o,!1),l>0||0==l&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=_i("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(gr(e,t.line,t,n,o)||t.line!=n.line&&gr(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Io=!0}o.addToHistory&&si(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,s=t.line,c=e.cm;if(e.iter(s,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&vr(e)==c.display.maxLine&&(a=!0),o.collapsed&&s!=t.line&&Jr(e,0),tr(e,new Qn(o,s==t.line?t.ch:null,s==n.line?n.ch:null)),++s}),o.collapsed&&e.iter(t.line,n.line+1,function(t){wr(e,t)&&Jr(t,0)}),o.clearOnEnter&&Nl(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(Eo=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++pl,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)Et(c,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=t.line;u<=n.line;u++)It(c,u,"text");o.atomic&&Oe(c.doc),Ci(c,"markerAdded",c,o)}return o}function Kn(e,t,n,r,i){r=Pi(r),r.shared=!1;var o=[Vn(e,t,n,r,i)],l=o[0],a=r.widgetNode;return Kr(e,function(e){a&&(r.widgetNode=a.cloneNode(!0)),o.push(Vn(e,ge(e,t),ge(e,n),r,i));for(var s=0;s<e.linked.length;++s)if(e.linked[s].isParent)return;l=Wi(o)}),new gl(o,l)}function Xn(e){return e.findMarks(Po(e.first,0),e.clipPos(Po(e.lastLine())),function(e){return e.parent})}function Yn(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),l=e.clipPos(i.to);if(zo(o,l)){var a=Vn(e,o,l,r.primary,r.primary.type);r.markers.push(a),a.parent=r}}}function Zn(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];Kr(n.primary.doc,function(e){r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==Hi(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}}}function Qn(e,t,n){this.marker=e,this.from=t,this.to=n}function Jn(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function er(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function tr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function nr(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],l=o.marker,a=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);if(a||o.from==t&&"bookmark"==l.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Qn(l,o.from,s?null:o.to))}}return r}function rr(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],l=o.marker,a=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);if(a||o.from==t&&"bookmark"==l.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Qn(l,s?null:o.from-t,null==o.to?null:o.to-t))}}return r}function ir(e,t){if(t.full)return null;var n=ye(e,t.from.line)&&Yr(e,t.from.line).markedSpans,r=ye(e,t.to.line)&&Yr(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,l=0==zo(t.from,t.to),a=nr(n,i,l),s=rr(r,o,l),c=1==t.text.length,u=Wi(t.text).length+(c?i:0);if(a)for(var d=0;d<a.length;++d){var h=a[d];if(null==h.to){var f=Jn(s,h.marker);f?c&&(h.to=null==f.to?null:f.to+u):h.to=i}}if(s)for(var d=0;d<s.length;++d){var h=s[d];if(null!=h.to&&(h.to+=u),null==h.from){var f=Jn(a,h.marker);f||(h.from=u,c&&(a||(a=[])).push(h))}else h.from+=u,c&&(a||(a=[])).push(h)}a&&(a=or(a)),s&&s!=a&&(s=or(s));var p=[a];if(!c){var m,g=t.text.length-2;if(g>0&&a)for(var d=0;d<a.length;++d)null==a[d].to&&(m||(m=[])).push(new Qn(a[d].marker,null,null));for(var d=0;g>d;++d)p.push(m);p.push(s)}return p}function or(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function lr(e,t){var n=pi(e,t),r=ir(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],l=r[i];if(o&&l)e:for(var a=0;a<l.length;++a){for(var s=l[a],c=0;c<o.length;++c)if(o[c].marker==s.marker)continue e;o.push(s)}else l&&(n[i]=l)}return n}function ar(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=Hi(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var l=r[o],a=l.find(0),s=0;s<i.length;++s){var c=i[s];if(!(zo(c.to,a.from)<0||zo(c.from,a.to)>0)){var u=[s,1],d=zo(c.from,a.from),h=zo(c.to,a.to);(0>d||!l.inclusiveLeft&&!d)&&u.push({from:c.from,to:a.from}),(h>0||!l.inclusiveRight&&!h)&&u.push({from:a.to,to:c.to}),i.splice.apply(i,u),s+=u.length-1}}return i}function sr(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function cr(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function ur(e){return e.inclusiveLeft?-1:0}function dr(e){return e.inclusiveRight?1:0}function hr(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=zo(r.from,i.from)||ur(e)-ur(t);if(o)return-o;var l=zo(r.to,i.to)||dr(e)-dr(t);return l?l:t.id-e.id}function fr(e,t){var n,r=Io&&e.markedSpans;if(r)for(var i,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!n||hr(n,i.marker)<0)&&(n=i.marker);return n}function pr(e){return fr(e,!0)}function mr(e){return fr(e,!1)}function gr(e,t,n,r,i){var o=Yr(e,t),l=Io&&o.markedSpans;if(l)for(var a=0;a<l.length;++a){var s=l[a];if(s.marker.collapsed){var c=s.marker.find(0),u=zo(c.from,n)||ur(s.marker)-ur(i),d=zo(c.to,r)||dr(s.marker)-dr(i);if(!(u>=0&&0>=d||0>=u&&d>=0)&&(0>=u&&(zo(c.to,n)>0||s.marker.inclusiveRight&&i.inclusiveLeft)||u>=0&&(zo(c.from,r)<0||s.marker.inclusiveLeft&&i.inclusiveRight)))return!0}}}function vr(e){for(var t;t=pr(e);)e=t.find(-1,!0).line;return e}function yr(e){for(var t,n;t=mr(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function xr(e,t){var n=Yr(e,t),r=vr(n);return n==r?t:ei(r)}function br(e,t){if(t>e.lastLine())return t;var n,r=Yr(e,t);if(!wr(e,r))return t;for(;n=mr(r);)r=n.find(1,!0).line;return ei(r)+1}function wr(e,t){var n=Io&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&kr(e,t,r))return!0}}function kr(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return kr(e,r.line,Jn(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&kr(e,t,i))return!0}function Cr(e,t,n){ni(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Pn(e,null,n)}function Sr(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!$l(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),qi(t.display.measure,_i("div",[e.node],null,n))}return e.height=e.node.offsetHeight}function Lr(e,t,n,r){var i=new vl(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),Bn(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!wr(e,t)){var r=ni(t)<e.scrollTop;Jr(t,t.height+Sr(i)),r&&Pn(o,null,i.height),o.curOp.forceUpdate=!0}return!0}),i}function Tr(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),sr(e),cr(e,n);var i=r?r(e):1;i!=e.height&&Jr(e,i)}function Mr(e){e.parent=null,sr(e)}function Nr(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Ar(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var r=e.innerMode(t,n);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function Or(t,n,r,i){for(var o=0;10>o;o++){i&&(i[0]=e.innerMode(t,r).mode);var l=t.token(n,r);if(n.pos>n.start)return l}throw new Error("Mode "+t.name+" failed to advance stream.")}function Wr(e,t,n,r){function i(e){return{start:d.start,end:d.pos,string:d.current(),type:o||null,state:e?ll(l.mode,u):u}}var o,l=e.doc,a=l.mode;t=ge(l,t);var s,c=Yr(l,t.line),u=_e(e,t.line,n),d=new fl(c.text,e.options.tabSize);for(r&&(s=[]);(r||d.pos<t.ch)&&!d.eol();)d.start=d.pos,o=Or(a,d,u),r&&s.push(i(!0));return r?s:i()}function Hr(e,t,n,r,i,o,l){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var s,c=0,u=null,d=new fl(t,e.options.tabSize),h=e.options.addModeClass&&[null];for(""==t&&Nr(Ar(n,r),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(a=!1,l&&Ir(e,t,r,d.pos),d.pos=t.length,s=null):s=Nr(Or(n,d,r,h),o),h){var f=h[0].name;f&&(s="m-"+(s?f+" "+s:f))}if(!a||u!=s){for(;c<d.start;)c=Math.min(d.start,c+5e4),i(c,u);u=s}d.start=d.pos}for(;c<d.pos;){var p=Math.min(d.pos,c+5e4);i(p,u),c=p}}function Dr(e,t,n,r){var i=[e.state.modeGen],o={};Hr(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},o,r);for(var l=0;l<e.state.overlays.length;++l){var a=e.state.overlays[l],s=1,c=0;Hr(e,t.text,a.mode,!0,function(e,t){for(var n=s;e>c;){var r=i[s];r>e&&i.splice(s,1,e,i[s+1],r),s+=2,c=Math.min(e,r)}if(t)if(a.opaque)i.splice(n,s-n,e,"cm-overlay "+t),s=n+2;else for(;s>n;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function Er(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=_e(e,ei(t)),i=Dr(e,t,t.text.length>e.options.maxHighlightLength?ll(e.doc.mode,r):r);t.stateAfter=r,t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.frontier&&e.doc.frontier++}return t.styles}function Ir(e,t,n,r){var i=e.doc.mode,o=new fl(t,e.options.tabSize);for(o.start=o.pos=r||0,""==t&&Ar(i,n);!o.eol();)Or(i,o,n),o.start=o.pos}function Pr(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?bl:xl;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function zr(e,t){var n=_i("span",null,null,bo?"padding-right: .1px":null),r={pre:_i("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,splitSpaces:(yo||bo)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,l=i?t.rest[i-1]:t.line;r.pos=0,r.addToken=Rr,Zi(e.display.measure)&&(o=ri(l))&&(r.addToken=_r(r.addToken,o)),r.map=[];var a=t!=e.display.externalMeasured&&ei(l);qr(l,r,Er(e,l,a)),l.styleClasses&&(l.styleClasses.bgClass&&(r.bgClass=$i(l.styleClasses.bgClass,r.bgClass||"")),l.styleClasses.textClass&&(r.textClass=$i(l.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Yi(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return bo&&/\bcm-tab\b/.test(r.content.lastChild.className)&&(r.content.className="cm-tab-wrap-hack"),Wl(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=$i(r.pre.className,r.textClass||"")),r}function Fr(e){var t=_i("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Rr(e,t,n,r,i,o,l){if(t){var a=e.splitSpaces?t.replace(/ {3,}/g,Br):t,s=e.cm.state.specialChars,c=!1;if(s.test(t))for(var u=document.createDocumentFragment(),d=0;;){s.lastIndex=d;var h=s.exec(t),f=h?h.index-d:t.length-d;if(f){var p=document.createTextNode(a.slice(d,d+f));yo&&9>xo?u.appendChild(_i("span",[p])):u.appendChild(p),e.map.push(e.pos,e.pos+f,p),e.col+=f,e.pos+=f}if(!h)break;if(d+=f+1,"	"==h[0]){var m=e.cm.options.tabSize,g=m-e.col%m,p=u.appendChild(_i("span",Oi(g),"cm-tab"));p.setAttribute("role","presentation"),p.setAttribute("cm-text","	"),e.col+=g}else if("\r"==h[0]||"\n"==h[0]){var p=u.appendChild(_i("span","\r"==h[0]?"␍":"␤","cm-invalidchar"));p.setAttribute("cm-text",h[0]),e.col+=1}else{var p=e.cm.options.specialCharPlaceholder(h[0]);p.setAttribute("cm-text",h[0]),yo&&9>xo?u.appendChild(_i("span",[p])):u.appendChild(p),e.col+=1}e.map.push(e.pos,e.pos+1,p),e.pos++}else{e.col+=t.length;var u=document.createTextNode(a);e.map.push(e.pos,e.pos+t.length,u),yo&&9>xo&&(c=!0),e.pos+=t.length}if(n||r||i||c||l){var v=n||"";r&&(v+=r),i&&(v+=i);var y=_i("span",[u],v,l);return o&&(y.title=o),e.content.appendChild(y)}e.content.appendChild(u)}}function Br(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" "}function _r(e,t){return function(n,r,i,o,l,a,s){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var d=0;d<t.length;d++){var h=t[d];if(h.to>c&&h.from<=c)break}if(h.to>=u)return e(n,r,i,o,l,a,s);e(n,r.slice(0,h.to-c),i,o,null,a,s),o=null,r=r.slice(h.to-c),c=h.to}}}function jr(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t}function qr(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var l,a,s,c,u,d,h,f=i.length,p=0,m=1,g="",v=0;;){if(v==p){s=c=u=d=a="",h=null,v=1/0;for(var y=[],x=0;x<r.length;++x){var b=r[x],w=b.marker;"bookmark"==w.type&&b.from==p&&w.widgetNode?y.push(w):b.from<=p&&(null==b.to||b.to>p||w.collapsed&&b.to==p&&b.from==p)?(null!=b.to&&b.to!=p&&v>b.to&&(v=b.to,c=""),w.className&&(s+=" "+w.className),w.css&&(a=w.css),w.startStyle&&b.from==p&&(u+=" "+w.startStyle),w.endStyle&&b.to==v&&(c+=" "+w.endStyle),w.title&&!d&&(d=w.title),w.collapsed&&(!h||hr(h.marker,w)<0)&&(h=b)):b.from>p&&v>b.from&&(v=b.from)}if(h&&(h.from||0)==p){if(jr(t,(null==h.to?f+1:h.to)-p,h.marker,null==h.from),null==h.to)return;h.to==p&&(h=!1)}if(!h&&y.length)for(var x=0;x<y.length;++x)jr(t,0,y[x])}if(p>=f)break;for(var k=Math.min(f,v);;){if(g){var C=p+g.length;if(!h){var S=C>k?g.slice(0,k-p):g;t.addToken(t,S,l?l+s:s,u,p+S.length==v?c:"",d,a)}if(C>=k){g=g.slice(k-p),p=k;break}p=C,u=""}g=i.slice(o,o=n[m++]),l=Pr(n[m++],t.cm.options)}}else for(var m=1;m<n.length;m+=2)t.addToken(t,i.slice(o,o=n[m]),Pr(n[m+1],t.cm.options))}function Gr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Wi(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ur(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){Tr(e,n,i,r),Ci(e,"change",e,t)}function l(e,t){for(var n=e,o=[];t>n;++n)o.push(new yl(c[n],i(n),r));return o}var a=t.from,s=t.to,c=t.text,u=Yr(e,a.line),d=Yr(e,s.line),h=Wi(c),f=i(c.length-1),p=s.line-a.line;if(t.full)e.insert(0,l(0,c.length)),e.remove(c.length,e.size-c.length);else if(Gr(e,t)){var m=l(0,c.length-1);o(d,d.text,f),p&&e.remove(a.line,p),m.length&&e.insert(a.line,m)}else if(u==d)if(1==c.length)o(u,u.text.slice(0,a.ch)+h+u.text.slice(s.ch),f);else{var m=l(1,c.length-1);m.push(new yl(h+u.text.slice(s.ch),f,r)),o(u,u.text.slice(0,a.ch)+c[0],i(0)),e.insert(a.line+1,m)}else if(1==c.length)o(u,u.text.slice(0,a.ch)+c[0]+d.text.slice(s.ch),i(0)),e.remove(a.line+1,p);else{o(u,u.text.slice(0,a.ch)+c[0],i(0)),o(d,h+d.text.slice(s.ch),f);var m=l(1,c.length-1);p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,m)}Ci(e,"change",e,t)}function $r(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Vr(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}function Kr(e,t,n){function r(e,i,o){if(e.linked)for(var l=0;l<e.linked.length;++l){var a=e.linked[l];if(a.doc!=i){var s=o&&a.sharedHist;(!n||s)&&(t(a.doc,s),r(a.doc,e,s))}}}r(e,null,!0)}function Xr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,l(e),n(e),e.options.lineWrapping||h(e),e.options.mode=t.modeOption,Et(e)}function Yr(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(o>t){n=i;break}t-=o}return n.lines[t]}function Zr(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function Qr(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function Jr(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function ei(e){if(null==e.parent)return null;for(var t=e.parent,n=Hi(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function ti(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(o>t){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var r=0;r<e.lines.length;++r){var l=e.lines[r],a=l.height;if(a>t)break;t-=a}return n+r}function ni(e){e=vr(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;n=o,o=n.parent)for(var r=0;r<o.children.length;++r){var l=o.children[r];if(l==n)break;t+=l.height}return t}function ri(e){var t=e.order;return null==t&&(t=e.order=oa(e.text)),t}function ii(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,
this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function oi(e,t){var n={from:V(t.from),to:Zo(t),text:Zr(e,t.from,t.to)};return hi(e,n,t.from.line,t.to.line+1),Kr(e,function(e){hi(e,n,t.from.line,t.to.line+1)},!0),n}function li(e){for(;e.length;){var t=Wi(e);if(!t.ranges)break;e.pop()}}function ai(e,t){return t?(li(e.done),Wi(e.done)):e.done.length&&!Wi(e.done).ranges?Wi(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Wi(e.done)):void 0}function si(e,t,n,r){var i=e.history;i.undone.length=0;var o,l=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>l-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=ai(i,i.lastOp==r))){var a=Wi(o.changes);0==zo(t.from,t.to)&&0==zo(t.from,a.to)?a.to=Zo(t):o.changes.push(oi(e,t))}else{var s=Wi(i.done);for(s&&s.ranges||di(e.sel,i.done),o={changes:[oi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=l,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,a||Wl(e,"historyAdded")}function ci(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function ui(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||ci(e,o,Wi(i.done),t))?i.done[i.done.length-1]=t:di(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&r.clearRedo!==!1&&li(i.undone)}function di(e,t){var n=Wi(t);n&&n.ranges&&n.equals(e)||t.push(e)}function hi(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function fi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function pi(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(fi(n[r]));return i}function mi(e,t,n){for(var r=0,i=[];r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?de.prototype.deepCopy.call(o):o);else{var l=o.changes,a=[];i.push({changes:a});for(var s=0;s<l.length;++s){var c,u=l[s];if(a.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&Hi(t,Number(c[1]))>-1&&(Wi(a)[d]=u[d],delete u[d])}}}return i}function gi(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function vi(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],l=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var a=0;a<o.ranges.length;a++)gi(o.ranges[a].anchor,t,n,r),gi(o.ranges[a].head,t,n,r)}else{for(var a=0;a<o.changes.length;++a){var s=o.changes[a];if(n<s.from.line)s.from=Po(s.from.line+r,s.from.ch),s.to=Po(s.to.line+r,s.to.ch);else if(t<=s.to.line){l=!1;break}}l||(e.splice(0,i+1),i=0)}}}function yi(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;vi(e.done,n,r,i),vi(e.undone,n,r,i)}function xi(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function bi(e){return e.target||e.srcElement}function wi(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Ao&&e.ctrlKey&&1==t&&(t=3),t}function ki(e,t,n){var r=e._handlers&&e._handlers[t];return n?r&&r.length>0?r.slice():Al:r||Al}function Ci(e,t){function n(e){return function(){e.apply(null,o)}}var r=ki(e,t,!1);if(r.length){var i,o=Array.prototype.slice.call(arguments,2);qo?i=qo.delayedCallbacks:Hl?i=Hl:(i=Hl=[],setTimeout(Si,0));for(var l=0;l<r.length;++l)i.push(n(r[l]))}}function Si(){var e=Hl;Hl=null;for(var t=0;t<e.length;++t)e[t]()}function Li(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Wl(e,n||t.type,e,t),xi(t)||t.codemirrorIgnore}function Ti(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==Hi(n,t[r])&&n.push(t[r])}function Mi(e,t){return ki(e,t).length>0}function Ni(e){e.prototype.on=function(e,t){Nl(this,e,t)},e.prototype.off=function(e,t){Ol(this,e,t)}}function Ai(){this.id=null}function Oi(e){for(;Bl.length<=e;)Bl.push(Wi(Bl)+" ");return Bl[e]}function Wi(e){return e[e.length-1]}function Hi(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function Di(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Ei(){}function Ii(e,t){var n;return Object.create?n=Object.create(e):(Ei.prototype=e,n=new Ei),t&&Pi(t,n),n}function Pi(e,t,n){t||(t={});for(var r in e)!e.hasOwnProperty(r)||n===!1&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function zi(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Fi(e,t){return t?t.source.indexOf("\\w")>-1&&Gl(e)?!0:t.test(e):Gl(e)}function Ri(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Bi(e){return e.charCodeAt(0)>=768&&Ul.test(e)}function _i(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function ji(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function qi(e,t){return ji(e).appendChild(t)}function Gi(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function Ui(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function $i(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!Ui(n[r]).test(t)&&(t+=" "+n[r]);return t}function Vi(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function Ki(){Zl||(Xi(),Zl=!0)}function Xi(){var e;Nl(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Vi(qt)},100))}),Nl(window,"blur",function(){Vi(vn)})}function Yi(e){if(null==Vl){var t=_i("span","​");qi(e,_i("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Vl=t.offsetWidth<=1&&t.offsetHeight>2&&!(yo&&8>xo))}var n=Vl?_i("span","​"):_i("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Zi(e){if(null!=Kl)return Kl;var t=qi(e,document.createTextNode("AخA")),n=jl(t,0,1).getBoundingClientRect();if(!n||n.left==n.right)return!1;var r=jl(t,1,2).getBoundingClientRect();return Kl=r.right-n.right<3}function Qi(e){if(null!=na)return na;var t=qi(e,_i("span","x")),n=t.getBoundingClientRect(),r=jl(t,0,1).getBoundingClientRect();return na=Math.abs(n.left-r.left)>1}function Ji(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,o=0;o<e.length;++o){var l=e[o];(l.from<n&&l.to>t||t==n&&l.to==t)&&(r(Math.max(l.from,t),Math.min(l.to,n),1==l.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}function eo(e){return e.level%2?e.to:e.from}function to(e){return e.level%2?e.from:e.to}function no(e){var t=ri(e);return t?eo(t[0]):0}function ro(e){var t=ri(e);return t?to(Wi(t)):e.text.length}function io(e,t){var n=Yr(e.doc,t),r=vr(n);r!=n&&(t=ei(r));var i=ri(r),o=i?i[0].level%2?ro(r):no(r):0;return Po(t,o)}function oo(e,t){for(var n,r=Yr(e.doc,t);n=mr(r);)r=n.find(1,!0).line,t=null;var i=ri(r),o=i?i[0].level%2?no(r):ro(r):r.text.length;return Po(null==t?ei(r):t,o)}function lo(e,t){var n=io(e,t.line),r=Yr(e.doc,n.line),i=ri(r);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),l=t.line==n.line&&t.ch<=o&&t.ch;return Po(n.line,l?0:o)}return n}function ao(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:n>t}function so(e,t){ia=null;for(var n,r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return r;if(i.from==t||i.to==t){if(null!=n)return ao(e,i.level,e[n].level)?(i.from!=i.to&&(ia=n),r):(i.from!=i.to&&(ia=r),n);n=r}}return n}function co(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&Bi(e.text.charAt(t)));return t}function uo(e,t,n,r){var i=ri(e);if(!i)return ho(e,t,n,r);for(var o=so(i,t),l=i[o],a=co(e,t,l.level%2?-n:n,r);;){if(a>l.from&&a<l.to)return a;if(a==l.from||a==l.to)return so(i,a)==o?a:(l=i[o+=n],n>0==l.level%2?l.to:l.from);if(l=i[o+=n],!l)return null;a=n>0==l.level%2?co(e,l.to,-1,r):co(e,l.from,1,r)}}function ho(e,t,n,r){var i=t+n;if(r)for(;i>0&&Bi(e.text.charAt(i));)i+=n;return 0>i||i>e.text.length?null:i}var fo=navigator.userAgent,po=navigator.platform,mo=/gecko\/\d/i.test(fo),go=/MSIE \d/.test(fo),vo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fo),yo=go||vo,xo=yo&&(go?document.documentMode||6:vo[1]),bo=/WebKit\//.test(fo),wo=bo&&/Qt\/\d+\.\d+/.test(fo),ko=/Chrome\//.test(fo),Co=/Opera\//.test(fo),So=/Apple Computer/.test(navigator.vendor),Lo=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(fo),To=/PhantomJS/.test(fo),Mo=/AppleWebKit/.test(fo)&&/Mobile\/\w+/.test(fo),No=Mo||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(fo),Ao=Mo||/Mac/.test(po),Oo=/win/i.test(po),Wo=Co&&fo.match(/Version\/(\d*\.\d*)/);Wo&&(Wo=Number(Wo[1])),Wo&&Wo>=15&&(Co=!1,bo=!0);var Ho=Ao&&(wo||Co&&(null==Wo||12.11>Wo)),Do=mo||yo&&xo>=9,Eo=!1,Io=!1;m.prototype=Pi({update:function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=Ao&&!Lo?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ai,this.disableVert=new Ai},enableZeroWidthBar:function(e,t){function n(){var r=e.getBoundingClientRect(),i=document.elementFromPoint(r.left+1,r.bottom-1);i!=e?e.style.pointerEvents="none":t.set(1e3,n)}e.style.pointerEvents="auto",t.set(1e3,n)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},m.prototype),g.prototype=Pi({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},g.prototype),e.scrollbarModel={"native":m,"null":g},L.prototype.signal=function(e,t){Mi(e,t)&&this.events.push(arguments)},L.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Wl.apply(null,this.events[e])};var Po=e.Pos=function(e,t){return this instanceof Po?(this.line=e,void(this.ch=t)):new Po(e,t)},zo=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},Fo=null;re.prototype=Pi({init:function(e){function t(e){if(r.somethingSelected())Fo=r.getSelections(),n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,o.value=Fo.join("\n"),_l(o));else{if(!r.options.lineWiseCopyCut)return;var t=te(r);Fo=t.text,"cut"==e.type?r.setSelections(t.ranges,null,Il):(n.prevInput="",o.value=t.text.join("\n"),_l(o))}"cut"==e.type&&(r.state.cutIncoming=!0)}var n=this,r=this.cm,i=this.wrapper=ie(),o=this.textarea=i.firstChild;e.wrapper.insertBefore(i,e.wrapper.firstChild),Mo&&(o.style.width="0px"),Nl(o,"input",function(){yo&&xo>=9&&n.hasSelection&&(n.hasSelection=null),n.poll()}),Nl(o,"paste",function(e){return J(e,r)?!0:(r.state.pasteIncoming=!0,void n.fastPoll())}),Nl(o,"cut",t),Nl(o,"copy",t),Nl(e.scroller,"paste",function(t){Gt(e,t)||(r.state.pasteIncoming=!0,n.focus())}),Nl(e.lineSpace,"selectstart",function(t){Gt(e,t)||Ll(t)}),Nl(o,"compositionstart",function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),Nl(o,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,n=e.doc,r=Ee(e);if(e.options.moveInputWithCursor){var i=ht(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),l=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+l.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+l.left-o.left))}return r},showSelection:function(e){var t=this.cm,n=t.display;qi(n.cursorDiv,e.cursors),qi(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,n,r=this.cm,i=r.doc;if(r.somethingSelected()){this.prevInput="";var o=i.sel.primary();t=ta&&(o.to().line-o.from().line>100||(n=r.getSelection()).length>1e3);var l=t?"-":n||r.getSelection();this.textarea.value=l,r.state.focused&&_l(this.textarea),yo&&xo>=9&&(this.hasSelection=l)}else e||(this.prevInput=this.textarea.value="",yo&&xo>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!No||Gi()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){function e(){var r=n.poll();r||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,e)},poll:function(){var e=this.cm,t=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||ea(t)&&!n&&!this.composing||Z(e)||e.options.disableInput||e.state.keySeq)return!1;var r=t.value;if(r==n&&!e.somethingSelected())return!1;if(yo&&xo>=9&&this.hasSelection===r||Ao&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var i=r.charCodeAt(0);if(8203!=i||n||(n="​"),8666==i)return this.reset(),this.cm.execCommand("undo")}for(var o=0,l=Math.min(n.length,r.length);l>o&&n.charCodeAt(o)==r.charCodeAt(o);)++o;var a=this;return Nt(e,function(){Q(e,r.slice(o),n.length-o,null,a.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?t.value=a.prevInput="":a.prevInput=r,a.composing&&(a.composing.range.clear(),a.composing.range=e.markText(a.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){yo&&xo>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=l.selectionStart){var e=i.somethingSelected(),t="​"+(e?l.value:"");l.value="⇚",l.value=t,r.prevInput=e?"":"​",l.selectionStart=1,l.selectionEnd=t.length,o.selForContextMenu=i.doc.sel}}function n(){if(r.contextMenuPending=!1,r.wrapper.style.position="relative",l.style.cssText=u,yo&&9>xo&&o.scrollbars.setScrollTop(o.scroller.scrollTop=s),null!=l.selectionStart){(!yo||yo&&9>xo)&&t();var e=0,n=function(){o.selForContextMenu==i.doc.sel&&0==l.selectionStart&&l.selectionEnd>0&&"​"==r.prevInput?At(i,sl.selectAll)(i):e++<10?o.detectingSelectAll=setTimeout(n,500):o.input.reset()};o.detectingSelectAll=setTimeout(n,200)}}var r=this,i=r.cm,o=i.display,l=r.textarea,a=Ut(i,e),s=o.scroller.scrollTop;if(a&&!Co){var c=i.options.resetSelectionOnContextMenu;c&&-1==i.doc.sel.contains(a)&&At(i,Me)(i.doc,pe(a),Il);var u=l.style.cssText;if(r.wrapper.style.position="absolute",l.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(yo?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",bo)var d=window.scrollY;if(o.input.focus(),bo&&window.scrollTo(null,d),o.input.reset(),i.somethingSelected()||(l.value=r.prevInput=" "),r.contextMenuPending=!0,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),yo&&xo>=9&&t(),Do){Ml(e);var h=function(){Ol(window,"mouseup",h),setTimeout(n,20)};Nl(window,"mouseup",h)}else setTimeout(n,50)}},readOnlyChanged:function(e){e||this.reset()},setUneditable:Ei,needsContentAttribute:!1},re.prototype),oe.prototype=Pi({init:function(e){function t(e){if(r.somethingSelected())Fo=r.getSelections(),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=te(r);Fo=t.text,"cut"==e.type&&r.operation(function(){r.setSelections(t.ranges,0,Il),r.replaceSelection("",null,"cut")})}if(e.clipboardData&&!Mo)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Fo.join("\n"));else{var n=ie(),i=n.firstChild;r.display.lineSpace.insertBefore(n,r.display.lineSpace.firstChild),i.value=Fo.join("\n");var o=document.activeElement;_l(i),setTimeout(function(){r.display.lineSpace.removeChild(n),o.focus()},50)}}var n=this,r=n.cm,i=n.div=e.lineDiv;ne(i),Nl(i,"paste",function(e){J(e,r)}),Nl(i,"compositionstart",function(e){var t=e.data;if(n.composing={sel:r.doc.sel,data:t,startData:t},t){var i=r.doc.sel.primary(),o=r.getLine(i.head.line),l=o.indexOf(t,Math.max(0,i.head.ch-t.length));l>-1&&l<=i.head.ch&&(n.composing.sel=pe(Po(i.head.line,l),Po(i.head.line,l+t.length)))}}),Nl(i,"compositionupdate",function(e){n.composing.data=e.data}),Nl(i,"compositionend",function(e){var t=n.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||n.applyComposition(t),n.composing==t&&(n.composing=null)},50))}),Nl(i,"touchstart",function(){n.forceCompositionEnd()}),Nl(i,"input",function(){n.composing||(Z(r)||!n.pollContent())&&Nt(n.cm,function(){Et(r)})}),Nl(i,"copy",t),Nl(i,"cut",t)},prepareSelection:function(){var e=Ee(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=se(this.cm,e.anchorNode,e.anchorOffset),r=se(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!r||r.bad||0!=zo(X(n,r),t.from())||0!=zo(K(n,r),t.to())){var i=le(this.cm,t.from()),o=le(this.cm,t.to());if(i||o){var l=this.cm.display.view,a=e.rangeCount&&e.getRangeAt(0);if(i){if(!o){var s=l[l.length-1].measure,c=s.maps?s.maps[s.maps.length-1]:s.map;o={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else i={node:l[0].measure.map[2],offset:0};try{var u=jl(i.node,i.offset,o.offset,o.node)}catch(d){}u&&(e.removeAllRanges(),e.addRange(u),a&&null==e.anchorNode?e.addRange(a):mo&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){qi(this.cm.display.cursorDiv,e.cursors),qi(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return $l(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():Nt(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var n=se(t,e.anchorNode,e.anchorOffset),r=se(t,e.focusNode,e.focusOffset);n&&r&&Nt(t,function(){Me(t.doc,pe(n,r),Il),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(r.line<t.viewFrom||i.line>t.viewTo-1)return!1;var o;if(r.line==t.viewFrom||0==(o=zt(e,r.line)))var l=ei(t.view[0].line),a=t.view[0].node;else var l=ei(t.view[o].line),a=t.view[o-1].node.nextSibling;var s=zt(e,i.line);if(s==t.view.length-1)var c=t.viewTo-1,u=t.lineDiv.lastChild;else var c=ei(t.view[s+1].line)-1,u=t.view[s+1].node.previousSibling;for(var d=e.doc.splitLines(ue(e,a,u,l,c)),h=Zr(e.doc,Po(l,0),Po(c,Yr(e.doc,c).text.length));d.length>1&&h.length>1;)if(Wi(d)==Wi(h))d.pop(),h.pop(),c--;else{if(d[0]!=h[0])break;d.shift(),h.shift(),l++}for(var f=0,p=0,m=d[0],g=h[0],v=Math.min(m.length,g.length);v>f&&m.charCodeAt(f)==g.charCodeAt(f);)++f;for(var y=Wi(d),x=Wi(h),b=Math.min(y.length-(1==d.length?f:0),x.length-(1==h.length?f:0));b>p&&y.charCodeAt(y.length-p-1)==x.charCodeAt(x.length-p-1);)++p;d[d.length-1]=y.slice(0,y.length-p),d[0]=d[0].slice(f);var w=Po(l,f),k=Po(c,h.length?Wi(h).length-p:0);return d.length>1||d[0]||zo(w,k)?(Wn(e.doc,d,w,k,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){Z(this.cm)?At(this.cm,Et)(this.cm):e.data&&e.data!=e.startData&&At(this.cm,Q)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),Z(this.cm)||At(this.cm,Q)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:Ei,resetPosition:Ei,needsContentAttribute:!0},oe.prototype),e.inputStyles={textarea:re,contenteditable:oe},de.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(0!=zo(n.anchor,r.anchor)||0!=zo(n.head,r.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new he(V(this.ranges[t].anchor),V(this.ranges[t].head));return new de(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(zo(t,r.from())>=0&&zo(e,r.to())<=0)return n}return-1}},he.prototype={from:function(){return X(this.anchor,this.head)},to:function(){return K(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Ro,Bo,_o,jo={left:0,right:0,top:0,bottom:0},qo=null,Go=0,Uo=0,$o=0,Vo=null;yo?Vo=-.53:mo?Vo=15:ko?Vo=-.7:So&&(Vo=-1/3);var Ko=function(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}};e.wheelEventPixels=function(e){var t=Ko(e);return t.x*=Vo,t.y*=Vo,t};var Xo=new Ai,Yo=null,Zo=e.changeEnd=function(e){return e.text?Po(e.from.line+e.text.length-1,Wi(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var n=this.options,r=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,Jo.hasOwnProperty(e)&&At(this,Jo[e])(this,t,r))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"]($n(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Ot(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,Et(this)}),removeOverlay:Ot(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Et(this)}}),indentLine:Ot(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ye(this.doc,e)&&Rn(this,e,t,n)}),indentSelection:Ot(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Rn(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&zn(this));else{var o=i.from(),l=i.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),l.line-(l.ch?0:1))+1;for(var s=a;n>s;++s)Rn(this,s,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[r].from().ch>0&&Ce(this.doc,r,new he(o,c[r].to()),Il)}}}),getTokenAt:function(e,t){return Wr(this,e,t)},getLineTokens:function(e,t){return Wr(this,Po(e),t,!0)},getTokenTypeAt:function(e){e=ge(this.doc,e);var t,n=Er(this,Yr(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var l=r+i>>1;if((l?n[2*l-1]:0)>=o)i=l;else{if(!(n[2*l+1]<o)){t=n[2*l+2];break}r=l+1}}var a=t?t.indexOf("cm-overlay "):-1;return 0>a?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!ol.hasOwnProperty(t))return n;var r=ol[t],i=this.getModeAt(e);if("string"==typeof i[t])r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var l=r[i[t][o]];l&&n.push(l)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var o=0;o<r._global.length;o++){var a=r._global[o];a.pred(i,this)&&-1==Hi(n,a.val)&&n.push(a.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=me(n,null==e?n.first+n.size-1:e),_e(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return n=null==e?r.head:"object"==typeof e?ge(this.doc,e):e?r.from():r.to(),ht(this,n,t||"page")},charCoords:function(e,t){return dt(this,ge(this.doc,e),t||"page")},coordsChar:function(e,t){return e=ut(this,e,t||"page"),mt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=ut(this,{top:e,left:0},t||"page").top,ti(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n,r=!1;if("number"==typeof e){var i=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>i&&(e=i,r=!0),n=Yr(this.doc,e)}else n=e;return ct(this,n,{top:0,left:0},t||"page").top+(r?this.doc.height-ni(n):0)},defaultTextHeight:function(){return vt(this.display)},defaultCharWidth:function(){return yt(this.display)},setGutterMarker:Ot(function(e,t,n){return Bn(this.doc,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&Ri(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Ot(function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,It(t,r,"gutter"),Ri(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),lineInfo:function(e){if("number"==typeof e){if(!ye(this.doc,e))return null;var t=e;if(e=Yr(this.doc,e),!e)return null}else{var t=ei(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o=this.display;e=ht(this,ge(this.doc,e));var l=e.bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==r)l=e.top;else if("above"==r||"near"==r){var s=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>s)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=s&&(l=e.bottom),a+t.offsetWidth>c&&(a=c-t.offsetWidth)}t.style.top=l+"px",t.style.left=t.style.right="","right"==i?(a=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?a=0:"middle"==i&&(a=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),n&&En(this,a,l,a+t.offsetWidth,l+t.offsetHeight)},triggerOnKeyDown:Ot(dn),triggerOnKeyPress:Ot(pn),triggerOnKeyUp:fn,execCommand:function(e){return sl.hasOwnProperty(e)?sl[e].call(null,this):void 0},triggerElectric:Ot(function(e){ee(this,e)}),findPosH:function(e,t,n,r){var i=1;0>t&&(i=-1,t=-t);for(var o=0,l=ge(this.doc,e);t>o&&(l=jn(this.doc,l,i,n,r),!l.hitSide);++o);return l},moveH:Ot(function(e,t){var n=this;n.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?jn(n.doc,r.head,e,t,n.options.rtlMoveVisually):0>e?r.from():r.to()},zl)}),deleteH:Ot(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):_n(this,function(n){var i=jn(r,n.head,e,t,!1);return 0>e?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;0>t&&(i=-1,t=-t);for(var l=0,a=ge(this.doc,e);t>l;++l){var s=ht(this,a,"div");if(null==o?o=s.left:s.left=o,a=qn(this,s,i,n),a.hitSide)break}return a},moveV:Ot(function(e,t){var n=this,r=this.doc,i=[],o=!n.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(l){if(o)return 0>e?l.from():l.to();var a=ht(n,l.head,"div");null!=l.goalColumn&&(a.left=l.goalColumn),i.push(a.left);var s=qn(n,a,e,t);return"page"==t&&l==r.sel.primary()&&Pn(n,null,dt(n,s,"div").top-a.top),s},zl),i.length)for(var l=0;l<r.sel.ranges.length;l++)r.sel.ranges[l].goalColumn=i[l]}),findWordAt:function(e){var t=this.doc,n=Yr(t,e.line).text,r=e.ch,i=e.ch;if(n){var o=this.getHelper(e,"wordChars");(e.xRel<0||i==n.length)&&r?--r:++i;for(var l=n.charAt(r),a=Fi(l,o)?function(e){return Fi(e,o)}:/\s/.test(l)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Fi(e)};r>0&&a(n.charAt(r-1));)--r;for(;i<n.length&&a(n.charAt(i));)++i}return new he(Po(e.line,r),Po(e.line,i))},toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Yl(this.display.cursorDiv,"CodeMirror-overwrite"):Xl(this.display.cursorDiv,"CodeMirror-overwrite"),Wl(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Gi()},scrollTo:Ot(function(e,t){(null!=e||null!=t)&&Fn(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ue(this)-this.display.barHeight,width:e.scrollWidth-Ue(this)-this.display.barWidth,clientHeight:Ve(this),clientWidth:$e(this)}},scrollIntoView:Ot(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={
from:Po(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Fn(this),this.curOp.scrollToPos=e;else{var n=In(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:Ot(function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var r=this;null!=e&&(r.display.wrapper.style.width=n(e)),null!=t&&(r.display.wrapper.style.height=n(t)),r.options.lineWrapping&&ot(this);var i=r.display.viewFrom;r.doc.iter(i,r.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){It(r,i,"widget");break}++i}),r.curOp.forceUpdate=!0,Wl(r,"refresh",this)}),operation:function(e){return Nt(this,e)},refresh:Ot(function(){var e=this.display.cachedTextHeight;Et(this),this.curOp.forceUpdate=!0,lt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),u(this),(null==e||Math.abs(e-vt(this.display))>.5)&&l(this),Wl(this,"refresh",this)}),swapDoc:Ot(function(e){var t=this.doc;return t.cm=null,Xr(this,e),lt(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Ci(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ni(e);var Qo=e.defaults={},Jo=e.optionHandlers={},el=e.Init={toString:function(){return"CodeMirror.Init"}};Gn("value","",function(e,t){e.setValue(t)},!0),Gn("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),Gn("indentUnit",2,n,!0),Gn("indentWithTabs",!1),Gn("smartIndent",!0),Gn("tabSize",4,function(e){r(e),lt(e),Et(e)},!0),Gn("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(Po(r,o))}r++});for(var i=n.length-1;i>=0;i--)Wn(e.doc,t,n[i],Po(n[i].line,n[i].ch+t.length))}}),Gn("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,n,r){t.state.specialChars=new RegExp(n.source+(n.test("	")?"":"|	"),"g"),r!=e.Init&&t.refresh()}),Gn("specialCharPlaceholder",Fr,function(e){e.refresh()},!0),Gn("electricChars",!0),Gn("inputStyle",No?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Gn("rtlMoveVisually",!Oo),Gn("wholeLineUpdateBefore",!0),Gn("theme","default",function(e){a(e),s(e)},!0),Gn("keyMap","default",function(t,n,r){var i=$n(n),o=r!=e.Init&&$n(r);o&&o.detach&&o.detach(t,i),i.attach&&i.attach(t,o||null)}),Gn("extraKeys",null),Gn("lineWrapping",!1,i,!0),Gn("gutters",[],function(e){f(e.options),s(e)},!0),Gn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?S(e.display)+"px":"0",e.refresh()},!0),Gn("coverGutterNextToScrollbar",!1,function(e){y(e)},!0),Gn("scrollbarStyle","native",function(e){v(e),y(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Gn("lineNumbers",!1,function(e){f(e.options),s(e)},!0),Gn("firstLineNumber",1,s,!0),Gn("lineNumberFormatter",function(e){return e},s,!0),Gn("showCursorWhenSelecting",!1,De,!0),Gn("resetSelectionOnContextMenu",!0),Gn("lineWiseCopyCut",!0),Gn("readOnly",!1,function(e,t){"nocursor"==t?(vn(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),Gn("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Gn("dragDrop",!0,jt),Gn("allowDropFileTypes",null),Gn("cursorBlinkRate",530),Gn("cursorScrollMargin",0),Gn("cursorHeight",1,De,!0),Gn("singleCursorHeightPerLine",!0,De,!0),Gn("workTime",100),Gn("workDelay",100),Gn("flattenSpans",!0,r,!0),Gn("addModeClass",!1,r,!0),Gn("pollInterval",100),Gn("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Gn("historyEventDelay",1250),Gn("viewportMargin",10,function(e){e.refresh()},!0),Gn("maxHighlightLength",1e4,r,!0),Gn("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Gn("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),Gn("autofocus",null);var tl=e.modes={},nl=e.mimeModes={};e.defineMode=function(t,n){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),tl[t]=n},e.defineMIME=function(e,t){nl[e]=t},e.resolveMode=function(t){if("string"==typeof t&&nl.hasOwnProperty(t))t=nl[t];else if(t&&"string"==typeof t.name&&nl.hasOwnProperty(t.name)){var n=nl[t.name];"string"==typeof n&&(n={name:n}),t=Ii(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=tl[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(rl.hasOwnProperty(n.name)){var o=rl[n.name];for(var l in o)o.hasOwnProperty(l)&&(i.hasOwnProperty(l)&&(i["_"+l]=i[l]),i[l]=o[l])}if(i.name=n.name,n.helperType&&(i.helperType=n.helperType),n.modeProps)for(var l in n.modeProps)i[l]=n.modeProps[l];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var rl=e.modeExtensions={};e.extendMode=function(e,t){var n=rl.hasOwnProperty(e)?rl[e]:rl[e]={};Pi(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){kl.prototype[e]=t},e.defineOption=Gn;var il=[];e.defineInitHook=function(e){il.push(e)};var ol=e.helpers={};e.registerHelper=function(t,n,r){ol.hasOwnProperty(t)||(ol[t]=e[t]={_global:[]}),ol[t][n]=r},e.registerGlobalHelper=function(t,n,r,i){e.registerHelper(t,n,i),ol[t]._global.push({pred:r,val:i})};var ll=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},al=e.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var sl=e.commands={selectAll:function(e){e.setSelection(Po(e.firstLine(),0),Po(e.lastLine()),Il)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Il)},killLine:function(e){_n(e,function(t){if(t.empty()){var n=Yr(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:Po(t.head.line+1,0)}:{from:t.head,to:Po(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){_n(e,function(t){return{from:Po(t.from().line,0),to:ge(e.doc,Po(t.to().line+1,0))}})},delLineLeft:function(e){_n(e,function(e){return{from:Po(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){_n(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){_n(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(Po(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Po(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return io(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return lo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return oo(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},zl)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},zl)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?lo(e,t.head):r},zl)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),l=Fl(e.getLine(o.line),o.ch,r);t.push(new Array(r-l%r+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Nt(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var i=t[r].head,o=Yr(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new Po(i.line,i.ch-1)),i.ch>0)i=new Po(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),Po(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var l=Yr(e.doc,i.line-1).text;l&&e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+l.charAt(l.length-1),Po(i.line-1,l.length-1),Po(i.line,1),"+transpose")}n.push(new he(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){Nt(e,function(){for(var t=e.listSelections().length,n=0;t>n;n++){var r=e.listSelections()[n];e.replaceRange(e.doc.lineSeparator(),r.anchor,r.head,"+input"),e.indentLine(r.from().line+1,null,!0)}zn(e)})},toggleOverwrite:function(e){e.toggleOverwrite()}},cl=e.keyMap={};cl.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},cl.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},cl.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},cl.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},cl["default"]=Ao?cl.macDefault:cl.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Di(n.split(" "),Un),o=0;o<i.length;o++){var l,a;o==i.length-1?(a=i.join(" "),l=r):(a=i.slice(0,o+1).join(" "),l="...");var s=t[a];if(s){if(s!=l)throw new Error("Inconsistent bindings for "+a)}else t[a]=l}delete e[n]}for(var c in t)e[c]=t[c];return e};var ul=e.lookupKey=function(e,t,n,r){t=$n(t);var i=t.call?t.call(e,r):t[e];if(i===!1)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return ul(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var l=ul(e,t.fallthrough[o],n,r);if(l)return l}}},dl=e.isModifierKey=function(e){var t="string"==typeof e?e:ra[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},hl=e.keyName=function(e,t){if(Co&&34==e.keyCode&&e["char"])return!1;var n=ra[e.keyCode],r=n;return null==r||e.altGraphKey?!1:(e.altKey&&"Alt"!=n&&(r="Alt-"+r),(Ho?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(r="Ctrl-"+r),(Ho?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(r="Cmd-"+r),!t&&e.shiftKey&&"Shift"!=n&&(r="Shift-"+r),r)};e.fromTextArea=function(t,n){function r(){t.value=c.getValue()}if(n=n?Pi(n):{},n.value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var i=Gi();n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(Nl(t.form,"submit",r),!n.leaveSubmitMethodAlone)){var o=t.form,l=o.submit;try{var a=o.submit=function(){r(),o.submit=l,o.submit(),o.submit=a}}catch(s){}}n.finishInit=function(e){e.save=r,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,r(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Ol(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=l))}},t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return c};var fl=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};fl.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Fl(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Fl(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Fl(this.string,null,this.tabSize)-(this.lineStart?Fl(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);return i(o)==i(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var pl=0,ml=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++pl};Ni(ml),ml.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&xt(e),Mi(this,"clear")){var n=this.find();n&&Ci(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var l=this.lines[o],a=Jn(l.markedSpans,this);e&&!this.collapsed?It(e,ei(l),"text"):e&&(null!=a.to&&(i=ei(l)),null!=a.from&&(r=ei(l))),l.markedSpans=er(l.markedSpans,a),null==a.from&&this.collapsed&&!wr(this.doc,l)&&e&&Jr(l,vt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var s=vr(this.lines[o]),c=d(s);c>e.display.maxLineLength&&(e.display.maxLine=s,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Et(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Oe(e.doc)),e&&Ci(e,"markerCleared",e,this),t&&wt(e),this.parent&&this.parent.clear()}},ml.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var o=this.lines[i],l=Jn(o.markedSpans,this);if(null!=l.from&&(n=Po(t?o:ei(o),l.from),-1==e))return n;if(null!=l.to&&(r=Po(t?o:ei(o),l.to),1==e))return r}return n&&{from:n,to:r}},ml.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&Nt(n,function(){var r=e.line,i=ei(e.line),o=Qe(n,i);if(o&&(it(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!wr(t.doc,r)&&null!=t.height){var l=t.height;t.height=null;var a=Sr(t)-l;a&&Jr(r,r.height+a)}})},ml.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Hi(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ml.prototype.detachLine=function(e){if(this.lines.splice(Hi(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var pl=0,gl=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Ni(gl),gl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ci(this,"clear")}},gl.prototype.find=function(e,t){return this.primary.find(e,t)};var vl=e.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};Ni(vl),vl.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=ei(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=Sr(this);Jr(n,Math.max(0,n.height-o)),e&&Nt(e,function(){Cr(e,n,-o),It(e,r,"widget")})}},vl.prototype.changed=function(){var e=this.height,t=this.doc.cm,n=this.line;this.height=null;var r=Sr(this)-e;r&&(Jr(n,n.height+r),t&&Nt(t,function(){t.curOp.forceUpdate=!0,Cr(t,n,r)}))};var yl=e.Line=function(e,t,n){this.text=e,cr(this,t),this.height=n?n(this):1};Ni(yl),yl.prototype.lineNo=function(){return ei(this)};var xl={},bl={};$r.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;r>n;++n){var i=this.lines[n];this.height-=i.height,Mr(i),Ci(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;r>e;++e)if(n(this.lines[e]))return!0}},Vr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(i>e){var o=Math.min(t,i-e),l=r.height;if(r.removeInner(e,o),this.height-=l-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof $r))){var a=[];this.collapse(a),this.children=[new $r(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>=e){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(;i.lines.length>50;){var l=i.lines.splice(i.lines.length-25,25),a=new $r(l);i.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Vr(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=Hi(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new Vr(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>e){var l=Math.min(t,o-e);if(i.iterN(e,l,n))return!0;if(0==(t-=l))break;e=0}else e-=o}}};var wl=0,kl=e.Doc=function(e,t,n,r){if(!(this instanceof kl))return new kl(e,t,n,r);null==n&&(n=0),Vr.call(this,[new $r([new yl("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var i=Po(n,0);this.sel=pe(i),this.history=new ii(null),this.id=++wl,this.modeOption=t,this.lineSep=r,"string"==typeof e&&(e=this.splitLines(e)),Ur(this,{from:i,to:i,text:e}),Me(this,pe(i),Il)};kl.prototype=Ii(Vr.prototype,{constructor:kl,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Qr(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Wt(function(e){var t=Po(this.first,0),n=this.first+this.size-1;Ln(this,{from:t,to:Po(n,Yr(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),Me(this,pe(t))}),replaceRange:function(e,t,n,r){t=ge(this,t),n=n?ge(this,n):t,Wn(this,e,t,n,r)},getRange:function(e,t,n){var r=Zr(this,ge(this,e),ge(this,t));return n===!1?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return ye(this,e)?Yr(this,e):void 0},getLineNumber:function(e){return ei(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Yr(this,e)),vr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ge(this,e)},getCursor:function(e){var t,n=this.sel.primary();return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||e===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Wt(function(e,t,n){Se(this,ge(this,"number"==typeof e?Po(e,t||0):e),null,n)}),setSelection:Wt(function(e,t,n){Se(this,ge(this,e),ge(this,t||e),n)}),extendSelection:Wt(function(e,t,n){we(this,ge(this,e),t&&ge(this,t),n)}),extendSelections:Wt(function(e,t){ke(this,xe(this,e,t))}),extendSelectionsBy:Wt(function(e,t){ke(this,Di(this.sel.ranges,e),t)}),setSelections:Wt(function(e,t,n){if(e.length){for(var r=0,i=[];r<e.length;r++)i[r]=new he(ge(this,e[r].anchor),ge(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Me(this,fe(i,t),n)}}),addSelection:Wt(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new he(ge(this,e),ge(this,t||e))),Me(this,fe(r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=Zr(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return e===!1?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Zr(this,n[r].from(),n[r].to());e!==!1&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Wt(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var l=i.ranges[o];r[o]={from:l.from(),to:l.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&Cn(this,r,t),o=r.length-1;o>=0;o--)Ln(this,r[o]);a?Te(this,a):this.cm&&zn(this.cm)}),undo:Wt(function(){Mn(this,"undo")}),redo:Wt(function(){Mn(this,"redo")}),undoSelection:Wt(function(){Mn(this,"undo",!0)}),redoSelection:Wt(function(){Mn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new ii(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:mi(this.history.done),undone:mi(this.history.undone)}},setHistory:function(e){var t=this.history=new ii(this.history.maxGeneration);t.done=mi(e.done.slice(0),null,!0),t.undone=mi(e.undone.slice(0),null,!0)},addLineClass:Wt(function(e,t,n){return Bn(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(Ui(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:Wt(function(e,t,n){return Bn(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(Ui(n));if(!o)return!1;var l=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&l!=i.length?" ":"")+i.slice(l)||null}return!0})}),addLineWidget:Wt(function(e,t,n){return Lr(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Vn(this,ge(this,e),ge(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=ge(this,e),Vn(this,e,e,n,"bookmark")},findMarksAt:function(e){e=ge(this,e);var t=[],n=Yr(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=ge(this,e),t=ge(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var l=o.markedSpans;if(l)for(var a=0;a<l.length;a++){var s=l[a];i==e.line&&e.ch>s.to||null==s.from&&i!=e.line||i==t.line&&s.from>t.ch||n&&!n(s.marker)||r.push(s.marker.parent||s.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;return i>e?(t=e,!0):(e-=i,void++n)}),ge(this,Po(n,t))},indexFromPos:function(e){e=ge(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new kl(Qr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new kl(Qr(this,t,n),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Yn(r,Xn(this)),r},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=this.linked[n];if(r.doc==t){this.linked.splice(n,1),t.unlinkDoc(this),Zn(Xn(this));break}}if(t.history==this.history){var i=[t.id];Kr(t,function(e){i.push(e.id)},!0),t.history=new ii(null),t.history.done=mi(this.history.done,i),t.history.undone=mi(this.history.undone,i)}},iterLinkedDocs:function(e){Kr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Jl(e)},lineSeparator:function(){return this.lineSep||"\n"}}),kl.prototype.eachLine=kl.prototype.iter;var Cl="iter insert remove copy getEditor constructor".split(" ");for(var Sl in kl.prototype)kl.prototype.hasOwnProperty(Sl)&&Hi(Cl,Sl)<0&&(e.prototype[Sl]=function(e){return function(){return e.apply(this.doc,arguments)}}(kl.prototype[Sl]));Ni(kl);var Ll=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Tl=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Ml=e.e_stop=function(e){Ll(e),Tl(e)},Nl=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}},Al=[],Ol=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else for(var r=ki(e,t,!1),i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}},Wl=e.signal=function(e,t){var n=ki(e,t,!0);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)},Hl=null,Dl=30,El=e.Pass={toString:function(){return"CodeMirror.Pass"}},Il={scroll:!1},Pl={origin:"*mouse"},zl={origin:"+move"};Ai.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Fl=e.countColumn=function(e,t,n,r,i){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var o=r||0,l=i||0;;){var a=e.indexOf("	",o);if(0>a||a>=t)return l+(t-o);l+=a-o,l+=n-l%n,o=a+1}},Rl=e.findColumn=function(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("	",r);-1==o&&(o=e.length);var l=o-r;if(o==e.length||i+l>=t)return r+Math.min(l,t-i);if(i+=o-r,i+=n-i%n,r=o+1,i>=t)return r}},Bl=[""],_l=function(e){e.select()};Mo?_l=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:yo&&(_l=function(e){try{e.select()}catch(t){}});var jl,ql=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Gl=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ql.test(e))},Ul=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
jl=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(i){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var $l=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)};yo&&11>xo&&(Gi=function(){try{return document.activeElement}catch(e){return document.body}});var Vl,Kl,Xl=e.rmClass=function(e,t){var n=e.className,r=Ui(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}},Yl=e.addClass=function(e,t){var n=e.className;Ui(t).test(n)||(e.className+=(n?" ":"")+t)},Zl=!1,Ql=function(){if(yo&&9>xo)return!1;var e=_i("div");return"draggable"in e||"dragDrop"in e}(),Jl=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;r>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(n.push(o.slice(0,l)),t+=l+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},ea=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},ta=function(){var e=_i("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),na=null,ra=e.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var e=0;10>e;e++)ra[e+48]=ra[e+96]=String(e);for(var e=65;90>=e;e++)ra[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)ra[e+111]=ra[e+63235]="F"+e}();var ia,oa=function(){function e(e){return 247>=e?n.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?r.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,l=/[LRr]/,a=/[Lb1n]/,s=/[1n]/,c="L";return function(n){if(!i.test(n))return!1;for(var r,u=n.length,d=[],h=0;u>h;++h)d.push(r=e(n.charCodeAt(h)));for(var h=0,f=c;u>h;++h){var r=d[h];"m"==r?d[h]=f:f=r}for(var h=0,p=c;u>h;++h){var r=d[h];"1"==r&&"r"==p?d[h]="n":l.test(r)&&(p=r,"r"==r&&(d[h]="R"))}for(var h=1,f=d[0];u-1>h;++h){var r=d[h];"+"==r&&"1"==f&&"1"==d[h+1]?d[h]="1":","!=r||f!=d[h+1]||"1"!=f&&"n"!=f||(d[h]=f),f=r}for(var h=0;u>h;++h){var r=d[h];if(","==r)d[h]="N";else if("%"==r){for(var m=h+1;u>m&&"%"==d[m];++m);for(var g=h&&"!"==d[h-1]||u>m&&"1"==d[m]?"1":"N",v=h;m>v;++v)d[v]=g;h=m-1}}for(var h=0,p=c;u>h;++h){var r=d[h];"L"==p&&"1"==r?d[h]="L":l.test(r)&&(p=r)}for(var h=0;u>h;++h)if(o.test(d[h])){for(var m=h+1;u>m&&o.test(d[m]);++m);for(var y="L"==(h?d[h-1]:c),x="L"==(u>m?d[m]:c),g=y||x?"L":"R",v=h;m>v;++v)d[v]=g;h=m-1}for(var b,w=[],h=0;u>h;)if(a.test(d[h])){var k=h;for(++h;u>h&&a.test(d[h]);++h);w.push(new t(0,k,h))}else{var C=h,S=w.length;for(++h;u>h&&"L"!=d[h];++h);for(var v=C;h>v;)if(s.test(d[v])){v>C&&w.splice(S,0,new t(1,C,v));var L=v;for(++v;h>v&&s.test(d[v]);++v);w.splice(S,0,new t(2,L,v)),C=v}else++v;h>C&&w.splice(S,0,new t(1,C,h))}return 1==w[0].level&&(b=n.match(/^\s+/))&&(w[0].from=b[0].length,w.unshift(new t(0,0,b[0].length))),1==Wi(w).level&&(b=n.match(/\s+$/))&&(Wi(w).to-=b[0].length,w.push(new t(0,u-b[0].length,u))),2==w[0].level&&w.unshift(new t(1,w[0].to,w[0].to)),w[0].level!=Wi(w).level&&w.push(new t(w[0].level,u,u)),w}}();return e.version="5.8.1",e})},{}],7:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror"),t("../markdown/markdown"),t("../../addon/mode/overlay")):"function"==typeof e&&e.amd?e(["../../lib/codemirror","../markdown/markdown","../../addon/mode/overlay"],i):i(CodeMirror)}(function(e){"use strict";var t=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i;e.defineMode("gfm",function(n,r){function i(e){return e.code=!1,null}var o=0,l={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,n){if(n.combineTokens=null,n.codeBlock)return e.match(/^```+/)?(n.codeBlock=!1,null):(e.skipToEnd(),null);if(e.sol()&&(n.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),n.codeBlock=!0,null;if("`"===e.peek()){e.next();var i=e.pos;e.eatWhile("`");var l=1+e.pos-i;return n.code?l===o&&(n.code=!1):(o=l,n.code=!0),null}if(n.code)return e.next(),null;if(e.eatSpace())return n.ateSpace=!0,null;if((e.sol()||n.ateSpace)&&(n.ateSpace=!1,r.gitHubSpice!==!1)){if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?:[a-f0-9]{7,40}\b)/))return n.combineTokens=!0,"link";if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return n.combineTokens=!0,"link"}return e.match(t)&&"]("!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\W/.test(e.string.charAt(e.start-1)))?(n.combineTokens=!0,"link"):(e.next(),null)},blankLine:i},a={underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:"```",strikethrough:!0};for(var s in r)a[s]=r[s];return a.name="markdown",e.overlayMode(e.getMode(n,a),l)},"markdown"),e.defineMIME("text/x-gfm","gfm")})},{"../../addon/mode/overlay":5,"../../lib/codemirror":6,"../markdown/markdown":8}],8:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror"),t("../xml/xml"),t("../meta")):"function"==typeof e&&e.amd?e(["../../lib/codemirror","../xml/xml","../meta"],i):i(CodeMirror)}(function(e){"use strict";e.defineMode("markdown",function(t,n){function r(n){if(e.findModeByName){var r=e.findModeByName(n);r&&(n=r.mime||r.mimes[0])}var i=e.getMode(t,n);return"null"==i.name?null:i}function i(e,t,n){return t.f=t.inline=n,n(e,t)}function o(e,t,n){return t.f=t.block=n,n(e,t)}function l(e){return!e||!/\S/.test(e.string)}function a(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,k||e.f!=c||(e.f=p,e.block=s),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine=null,null}function s(e,t){var o=e.sol(),a=t.list!==!1,s=t.indentedCode;t.indentedCode=!1,a&&(t.indentationDiff>=0?(t.indentationDiff<4&&(t.indentation-=t.indentationDiff),t.list=null):t.indentation>0?(t.list=null,t.listDepth=Math.floor(t.indentation/4)):(t.list=!1,t.listDepth=0));var c=null;if(t.indentationDiff>=4)return e.skipToEnd(),s||l(t.prevLine)?(t.indentation-=4,t.indentedCode=!0,L.code):null;if(e.eatSpace())return null;if((c=e.match(W))&&c[1].length<=6)return t.header=c[1].length,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,h(t);if(!(l(t.prevLine)||t.quote||a||s)&&(c=e.match(H)))return t.header="="==c[0].charAt(0)?1:2,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,h(t);if(e.eat(">"))return t.quote=o?1:t.quote+1,n.highlightFormatting&&(t.formatting="quote"),e.eatSpace(),h(t);if("["===e.peek())return i(e,t,y);if(e.match(M,!0))return t.hr=!0,L.hr;if((l(t.prevLine)||a)&&(e.match(N,!1)||e.match(A,!1))){var d=null;return e.match(N,!0)?d="ul":(e.match(A,!0),d="ol"),t.indentation=e.column()+e.current().length,t.list=!0,t.listDepth++,n.taskLists&&e.match(O,!1)&&(t.taskList=!0),t.f=t.inline,n.highlightFormatting&&(t.formatting=["list","list-"+d]),h(t)}return n.fencedCodeBlocks&&(c=e.match(E,!0))?(t.fencedChars=c[1],t.localMode=r(c[2]),t.localMode&&(t.localState=t.localMode.startState()),t.f=t.block=u,n.highlightFormatting&&(t.formatting="code-block"),t.code=!0,h(t)):i(e,t,t.inline)}function c(e,t){var n=C.token(e,t.htmlState);return(k&&null===t.htmlState.tagStart&&!t.htmlState.context&&t.htmlState.tokenize.isInText||t.md_inside&&e.current().indexOf(">")>-1)&&(t.f=p,t.block=s,t.htmlState=null),n}function u(e,t){return e.sol()&&t.fencedChars&&e.match(t.fencedChars,!1)?(t.localMode=t.localState=null,t.f=t.block=d,null):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),L.code)}function d(e,t){e.match(t.fencedChars),t.block=s,t.f=p,t.fencedChars=null,n.highlightFormatting&&(t.formatting="code-block"),t.code=!0;var r=h(t);return t.code=!1,r}function h(e){var t=[];if(e.formatting){t.push(L.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var r=0;r<e.formatting.length;r++)t.push(L.formatting+"-"+e.formatting[r]),"header"===e.formatting[r]&&t.push(L.formatting+"-"+e.formatting[r]+"-"+e.header),"quote"===e.formatting[r]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(L.formatting+"-"+e.formatting[r]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(L.linkHref,"url"):(e.strong&&t.push(L.strong),e.em&&t.push(L.em),e.strikethrough&&t.push(L.strikethrough),e.linkText&&t.push(L.linkText),e.code&&t.push(L.code)),e.header&&t.push(L.header,L.header+"-"+e.header),e.quote&&(t.push(L.quote),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(L.quote+"-"+e.quote):t.push(L.quote+"-"+n.maxBlockquoteDepth)),e.list!==!1){var i=(e.listDepth-1)%3;i?1===i?t.push(L.list2):t.push(L.list3):t.push(L.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function f(e,t){return e.match(D,!0)?h(t):void 0}function p(t,r){var i=r.text(t,r);if("undefined"!=typeof i)return i;if(r.list)return r.list=null,h(r);if(r.taskList){var l="x"!==t.match(O,!0)[1];return l?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,h(r)}if(r.taskOpen=!1,r.taskClosed=!1,r.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"),h(r);var a=t.sol(),s=t.next();if("\\"===s&&(t.next(),n.highlightFormatting)){var u=h(r),d=L.formatting+"-escape";return u?u+" "+d:d}if(r.linkTitle){r.linkTitle=!1;var f=s;"("===s&&(f=")"),f=(f+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var p="^\\s*(?:[^"+f+"\\\\]+|\\\\\\\\|\\\\.)"+f;if(t.match(new RegExp(p),!0))return L.linkHref}if("`"===s){var v=r.formatting;n.highlightFormatting&&(r.formatting="code");var y=h(r),x=t.pos;t.eatWhile("`");var b=1+t.pos-x;return r.code?b===S?(r.code=!1,y):(r.formatting=v,h(r)):(S=b,r.code=!0,h(r))}if(r.code)return h(r);if("!"===s&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),r.inline=r.f=g,L.image;if("["===s&&t.match(/.*\](\(.*\)| ?\[.*\])/,!1))return r.linkText=!0,n.highlightFormatting&&(r.formatting="link"),h(r);if("]"===s&&r.linkText&&t.match(/\(.*\)| ?\[.*\]/,!1)){n.highlightFormatting&&(r.formatting="link");var u=h(r);return r.linkText=!1,r.inline=r.f=g,u}if("<"===s&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=m,n.highlightFormatting&&(r.formatting="link");var u=h(r);return u?u+=" ":u="",u+L.linkInline}if("<"===s&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=m,n.highlightFormatting&&(r.formatting="link");var u=h(r);return u?u+=" ":u="",u+L.linkEmail}if("<"===s&&t.match(/^(!--|\w)/,!1)){var w=t.string.indexOf(">",t.pos);if(-1!=w){var k=t.string.substring(t.start,w);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(k)&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(C),o(t,r,c)}if("<"===s&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";var T=!1;if(!n.underscoresBreakWords&&"_"===s&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var M=t.pos-2;if(M>=0){var N=t.string.charAt(M);"_"!==N&&N.match(/(\w)/,!1)&&(T=!0)}}if("*"===s||"_"===s&&!T)if(a&&" "===t.peek());else{if(r.strong===s&&t.eat(s)){n.highlightFormatting&&(r.formatting="strong");var y=h(r);return r.strong=!1,y}if(!r.strong&&t.eat(s))return r.strong=s,n.highlightFormatting&&(r.formatting="strong"),h(r);if(r.em===s){n.highlightFormatting&&(r.formatting="em");var y=h(r);return r.em=!1,y}if(!r.em)return r.em=s,n.highlightFormatting&&(r.formatting="em"),h(r)}else if(" "===s&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return h(r);t.backUp(1)}if(n.strikethrough)if("~"===s&&t.eatWhile(s)){if(r.strikethrough){n.highlightFormatting&&(r.formatting="strikethrough");var y=h(r);return r.strikethrough=!1,y}if(t.match(/^[^\s]/,!1))return r.strikethrough=!0,n.highlightFormatting&&(r.formatting="strikethrough"),h(r)}else if(" "===s&&t.match(/^~~/,!0)){if(" "===t.peek())return h(r);t.backUp(2)}return" "===s&&(t.match(/ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),h(r)}function m(e,t){var r=e.next();if(">"===r){t.f=t.inline=p,n.highlightFormatting&&(t.formatting="link");var i=h(t);return i?i+=" ":i="",i+L.linkInline}return e.match(/^[^>]+/,!0),L.linkInline}function g(e,t){if(e.eatSpace())return null;var r=e.next();return"("===r||"["===r?(t.f=t.inline=v("("===r?")":"]"),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,h(t)):"error"}function v(e){return function(t,r){var i=t.next();if(i===e){r.f=r.inline=p,n.highlightFormatting&&(r.formatting="link-string");var o=h(r);return r.linkHref=!1,o}return t.match(w(e),!0)&&t.backUp(1),r.linkHref=!0,h(r)}}function y(e,t){return e.match(/^[^\]]*\]:/,!1)?(t.f=x,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,h(t)):i(e,t,p)}function x(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=b,n.highlightFormatting&&(t.formatting="link");var r=h(t);return t.linkText=!1,r}return e.match(/^[^\]]+/,!0),L.linkText}function b(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=p,L.linkHref+" url")}function w(e){return I[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),I[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),I[e]}var k=e.modes.hasOwnProperty("xml"),C=e.getMode(t,k?{name:"xml",htmlMode:!0}:"text/plain");void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.underscoresBreakWords&&(n.underscoresBreakWords=!0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var S=0,L={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"tag",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"};for(var T in L)L.hasOwnProperty(T)&&n.tokenTypeOverrides[T]&&(L[T]=n.tokenTypeOverrides[T]);var M=/^([*\-_])(?:\s*\1){2,}\s*$/,N=/^[*\-+]\s+/,A=/^[0-9]+([.)])\s+/,O=/^\[(x| )\](?=\s)/,W=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,H=/^ *(?:\={1,}|-{1,})\s*$/,D=/^[^#!\[\]*_\\<>` "'(~]+/,E=new RegExp("^("+(n.fencedCodeBlocks===!0?"~~~+|```+":n.fencedCodeBlocks)+")[ \\t]*([\\w+#]*)"),I=[],P={startState:function(){return{f:s,prevLine:null,thisLine:null,block:s,htmlState:null,indentation:0,inline:p,text:f,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t["this"],block:t.block,htmlState:t.htmlState&&e.copyState(C,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkTitle:t.linkTitle,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,header:t.header,hr:t.hr,taskList:t.taskList,list:t.list,listDepth:t.listDepth,quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedChars:t.fencedChars}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine){var n=t.header||t.hr;if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0)||n){if(a(t),!n)return null;t.prevLine=null}t.prevLine=t.thisLine,t.thisLine=e,t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var r=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=4*Math.floor((r-t.indentation)/4);i>4&&(i=4);var o=t.indentation+i;if(t.indentationDiff=o-t.indentation,t.indentation=o,r>0)return null}return t.f(e,t)},innerMode:function(e){return e.block==c?{state:e.htmlState,mode:C}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:P}},blankLine:a,getType:h,fold:"markdown"};return P},"xml"),e.defineMIME("text/x-markdown","markdown")})},{"../../lib/codemirror":6,"../meta":9,"../xml/xml":10}],9:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../lib/codemirror")):"function"==typeof e&&e.amd?e(["../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy"]},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Jade",mime:"text/x-jade",mode:"jade",ext:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps"},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mime:"text/n-triples",mode:"ntriples",ext:["nt"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:["php","php3","php4","php5","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["py","pyw"]},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"MariaDB",mime:"text/x-mariadb",mode:"sql"},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"YAML",mime:"text/x-yaml",mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var n=e.modeInfo[t];n.mimes&&(n.mime=n.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.mime==t)return r;if(r.mimes)for(var i=0;i<r.mimes.length;i++)if(r.mimes[i]==t)return r}},e.findModeByExtension=function(t){for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.ext)for(var i=0;i<r.ext.length;i++)if(r.ext[i]==t)return r}},e.findModeByFileName=function(t){for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.file&&r.file.test(t))return r}var i=t.lastIndexOf("."),o=i>-1&&t.substring(i+1,t.length);return o?e.findModeByExtension(o):void 0},e.findModeByName=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.name.toLowerCase()==t)return r;if(r.alias)for(var i=0;i<r.alias.length;i++)if(r.alias[i].toLowerCase()==t)return r}}})},{"../lib/codemirror":6}],10:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror")):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";e.defineMode("xml",function(t,n){function r(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r)return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(l("atom","]]>")):null:e.match("--")?n(l("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(a(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=l("meta","?>"),"meta"):(C=e.eat("/")?"closeTag":"openTag",t.tokenize=i,"tag bracket");if("&"==r){var o;return o=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),o?"atom":"error"}return e.eatWhile(/[^&<]/),null}function i(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=r,C=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return C="equals",null;if("<"==n){t.tokenize=r,t.state=d,t.tagName=t.tagStart=null;var i=t.tokenize(e,t);return i?i+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=o(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function o(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"};return t.isInAttribute=!0,t}function l(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=r;break}n.next()}return e}}function a(e){return function(t,n){for(var i;null!=(i=t.next());){if("<"==i)return n.tokenize=a(e+1),n.tokenize(t,n);if(">"==i){if(1==e){n.tokenize=r;break}return n.tokenize=a(e-1),n.tokenize(t,n)}}return"meta"}}function s(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(L.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function c(e){e.context&&(e.context=e.context.prev)}function u(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!L.contextGrabbers.hasOwnProperty(n)||!L.contextGrabbers[n].hasOwnProperty(t))return;c(e)}}function d(e,t,n){return"openTag"==e?(n.tagStart=t.column(),h):"closeTag"==e?f:d}function h(e,t,n){return"word"==e?(n.tagName=t.current(),S="tag",g):(S="error",h)}function f(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&L.implicitlyClosed.hasOwnProperty(n.context.tagName)&&c(n),n.context&&n.context.tagName==r?(S="tag",p):(S="tag error",m)}return S="error",m}function p(e,t,n){return"endTag"!=e?(S="error",p):(c(n),d)}function m(e,t,n){return S="error",p(e,t,n)}function g(e,t,n){if("word"==e)return S="attribute",
v;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||L.autoSelfClosers.hasOwnProperty(r)?u(n,r):(u(n,r),n.context=new s(n,r,i==n.indented)),d}return S="error",g}function v(e,t,n){return"equals"==e?y:(L.allowMissing||(S="error"),g(e,t,n))}function y(e,t,n){return"string"==e?x:"word"==e&&L.allowUnquoted?(S="string",g):(S="error",g(e,t,n))}function x(e,t,n){return"string"==e?x:g(e,t,n)}var b=t.indentUnit,w=n.multilineTagIndentFactor||1,k=n.multilineTagIndentPastTag;null==k&&(k=!0);var C,S,L=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},T=n.alignCDATA;return r.isInText=!0,{startState:function(){return{tokenize:r,state:d,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;C=null;var n=t.tokenize(e,t);return(n||C)&&"comment"!=n&&(S=null,t.state=t.state(C||n,e,t),S&&(n="error"==S?n+" error":S)),n},indent:function(t,n,o){var l=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+b;if(l&&l.noIndent)return e.Pass;if(t.tokenize!=i&&t.tokenize!=r)return o?o.match(/^(\s*)/)[0].length:0;if(t.tagName)return k?t.tagStart+t.tagName.length+2:t.tagStart+b*w;if(T&&/<!\[CDATA\[/.test(n))return 0;var a=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(a&&a[1])for(;l;){if(l.tagName==a[2]){l=l.prev;break}if(!L.implicitlyClosed.hasOwnProperty(l.tagName))break;l=l.prev}else if(a)for(;l;){var s=L.contextGrabbers[l.tagName];if(!s||!s.hasOwnProperty(a[2]))break;l=l.prev}for(;l&&!l.startOfLine;)l=l.prev;return l?l.indent+b:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:n.htmlMode?"html":"xml",helperType:n.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})})},{"../../lib/codemirror":6}],11:[function(t,n,r){(function(t){(function(){function t(e){this.tokens=[],this.tokens.links={},this.options=e||h.defaults,this.rules=f.normal,this.options.gfm&&(this.options.tables?this.rules=f.tables:this.rules=f.gfm)}function i(e,t){if(this.options=t||h.defaults,this.links=e,this.rules=p.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=p.breaks:this.rules=p.gfm:this.options.pedantic&&(this.rules=p.pedantic)}function o(e){this.options=e||{}}function l(e){this.tokens=[],this.token=null,this.options=e||h.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function s(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function c(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),n):new RegExp(e,t)}}function u(){}function d(e){for(var t,n,r=1;r<arguments.length;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function h(e,n,r){if(r||"function"==typeof n){r||(r=n,n=null),n=d({},h.defaults,n||{});var i,o,s=n.highlight,c=0;try{i=t.lex(e,n)}catch(u){return r(u)}o=i.length;var f=function(e){if(e)return n.highlight=s,r(e);var t;try{t=l.parse(i,n)}catch(o){e=o}return n.highlight=s,e?r(e):r(null,t)};if(!s||s.length<3)return f();if(delete n.highlight,!o)return f();for(;c<i.length;c++)!function(e){return"code"!==e.type?--o||f():s(e.text,e.lang,function(t,n){return t?f(t):null==n||n===e.text?--o||f():(e.text=n,e.escaped=!0,void(--o||f()))})}(i[c])}else try{return n&&(n=d({},h.defaults,n)),l.parse(t.lex(e,n),n)}catch(u){if(u.message+="\nPlease report this to https://github.com/chjj/marked.",(n||h.defaults).silent)return"<p>An error occured:</p><pre>"+a(u.message+"",!0)+"</pre>";throw u}}var f={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};f.bullet=/(?:[*+-]|\d+\.)/,f.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,f.item=c(f.item,"gm")(/bull/g,f.bullet)(),f.list=c(f.list)(/bull/g,f.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+f.def.source+")")(),f.blockquote=c(f.blockquote)("def",f.def)(),f._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",f.html=c(f.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,f._tag)(),f.paragraph=c(f.paragraph)("hr",f.hr)("heading",f.heading)("lheading",f.lheading)("blockquote",f.blockquote)("tag","<"+f._tag)("def",f.def)(),f.normal=d({},f),f.gfm=d({},f.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),f.gfm.paragraph=c(f.paragraph)("(?!","(?!"+f.gfm.fences.source.replace("\\1","\\2")+"|"+f.list.source.replace("\\1","\\3")+"|")(),f.tables=d({},f.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=f,t.lex=function(e,n){var r=new t(n);return r.lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(e,t,n){for(var r,i,o,l,a,s,c,u,d,e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e))e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(t&&(o=this.rules.nptable.exec(e))){for(e=e.substring(o[0].length),s={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},u=0;u<s.align.length;u++)/^ *-+: *$/.test(s.align[u])?s.align[u]="right":/^ *:-+: *$/.test(s.align[u])?s.align[u]="center":/^ *:-+ *$/.test(s.align[u])?s.align[u]="left":s.align[u]=null;for(u=0;u<s.cells.length;u++)s.cells[u]=s.cells[u].split(/ *\| */);this.tokens.push(s)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,t,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),l=o[2],this.tokens.push({type:"list_start",ordered:l.length>1}),o=o[0].match(this.rules.item),r=!1,d=o.length,u=0;d>u;u++)s=o[u],c=s.length,s=s.replace(/^ *([*+-]|\d+\.) +/,""),~s.indexOf("\n ")&&(c-=s.length,s=this.options.pedantic?s.replace(/^ {1,4}/gm,""):s.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&u!==d-1&&(a=f.bullet.exec(o[u+1])[0],l===a||l.length>1&&a.length>1||(e=o.slice(u+1).join("\n")+e,u=d-1)),i=r||/\n\n(?!\s*$)/.test(s),u!==d-1&&(r="\n"===s.charAt(s.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(s,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(!n&&t&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(t&&(o=this.rules.table.exec(e))){for(e=e.substring(o[0].length),s={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<s.align.length;u++)/^ *-+: *$/.test(s.align[u])?s.align[u]="right":/^ *:-+: *$/.test(s.align[u])?s.align[u]="center":/^ *:-+ *$/.test(s.align[u])?s.align[u]="left":s.align[u]=null;for(u=0;u<s.cells.length;u++)s.cells[u]=s.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(s)}else if(t&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var p={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};p._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,p._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,p.link=c(p.link)("inside",p._inside)("href",p._href)(),p.reflink=c(p.reflink)("inside",p._inside)(),p.normal=d({},p),p.pedantic=d({},p.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),p.gfm=d({},p.normal,{escape:c(p.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:c(p.text)("]|","~]|")("|","|https?://|")()}),p.breaks=d({},p.gfm,{br:c(p.br)("{2,}","*")(),text:c(p.gfm.text)("{2,}","*")()}),i.rules=p,i.output=function(e,t,n){var r=new i(t,n);return r.output(e)},i.prototype.output=function(e){for(var t,n,r,i,o="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),o+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(n=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),r=this.mangle("mailto:")+n):(n=a(i[1]),r=n),o+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):a(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,o+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){o+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,o+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),o+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),o+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),o+=this.renderer.codespan(a(i[2],!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),o+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),o+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),o+=this.renderer.text(a(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(i[0].length),n=a(i[1]),r=n,o+=this.renderer.link(r,null,n);return o},i.prototype.outputLink=function(e,t){var n=a(t.href),r=t.title?a(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,a(e[1]))},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},i.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;r>i;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},o.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+a(t,!0)+'">'+(n?e:a(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:a(e,!0))+"\n</code></pre>"},o.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},o.prototype.html=function(e){return e},o.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},o.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},o.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},o.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},o.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},o.prototype.tablecell=function(e,t){var n=t.header?"th":"td",r=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return r+e+"</"+n+">\n"},o.prototype.strong=function(e){return"<strong>"+e+"</strong>"},o.prototype.em=function(e){return"<em>"+e+"</em>"},o.prototype.codespan=function(e){return"<code>"+e+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(e){return"<del>"+e+"</del>"},o.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(s(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(i){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:"))return""}var o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>"},o.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},o.prototype.text=function(e){return e},l.parse=function(e,t,n){var r=new l(t,n);return r.parse(e)},l.prototype.parse=function(e){this.inline=new i(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},l.prototype.next=function(){return this.token=this.tokens.pop()},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,i,o="",l="";for(n="",e=0;e<this.token.header.length;e++)r={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",i=0;i<t.length;i++)n+=this.renderer.tablecell(this.inline.output(t[i]),{header:!1,align:this.token.align[i]});l+=this.renderer.tablerow(n)}return this.renderer.table(o,l);case"blockquote_start":for(var l="";"blockquote_end"!==this.next().type;)l+=this.tok();return this.renderer.blockquote(l);case"list_start":for(var l="",a=this.token.ordered;"list_end"!==this.next().type;)l+=this.tok();return this.renderer.list(l,a);case"list_item_start":for(var l="";"list_item_end"!==this.next().type;)l+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(l);case"loose_item_start":for(var l="";"list_item_end"!==this.next().type;)l+=this.tok();return this.renderer.listitem(l);case"html":var s=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(s);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},u.exec=u,h.options=h.setOptions=function(e){return d(h.defaults,e),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new o,xhtml:!1},h.Parser=l,h.parser=l.parse,h.Renderer=o,h.Lexer=t,h.lexer=t.lex,h.InlineLexer=i,h.inlineLexer=i.output,h.parse=h,"undefined"!=typeof n&&"object"==typeof r?n.exports=h:"function"==typeof e&&e.amd?e(function(){return h}):this.marked=h}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t,n){var r=e("codemirror");r.commands.tabAndIndentMarkdownList=function(e){var t=e.listSelections(),n=t[0].head,r=e.getStateAfter(n.line),i=r.list!==!1;if(i)return void e.execCommand("indentMore");if(e.options.indentWithTabs)e.execCommand("insertTab");else{var o=Array(e.options.tabSize+1).join(" ");e.replaceSelection(o)}},r.commands.shiftTabAndUnindentMarkdownList=function(e){var t=e.listSelections(),n=t[0].head,r=e.getStateAfter(n.line),i=r.list!==!1;if(i)return void e.execCommand("indentLess");if(e.options.indentWithTabs)e.execCommand("insertTab");else{var o=Array(e.options.tabSize+1).join(" ");e.replaceSelection(o)}}},{codemirror:6}],13:[function(e,t,n){"use strict";function r(e){return e=z?e.replace("Ctrl","Cmd"):e.replace("Cmd","Ctrl")}function i(e,t){e=e||{};var n=document.createElement("a");return t=void 0==t?!0:t,e.title&&t&&(n.title=e.title,z&&(n.title=n.title.replace("Ctrl","⌘"),n.title=n.title.replace("Alt","⌥"))),n.className=e.className,n}function o(){var e=document.createElement("i");return e.className="separator",e.innerHTML="|",e}function l(e,t){t=t||e.getCursor("start");var n=e.getTokenAt(t);if(!n.type)return{};for(var r,i,o=n.type.split(" "),l={},a=0;a<o.length;a++)r=o[a],"strong"===r?l.bold=!0:"variable-2"===r?(i=e.getLine(t.line),/^\s*\d+\.\s/.test(i)?l["ordered-list"]=!0:l["unordered-list"]=!0):"atom"===r?l.quote=!0:"em"===r?l.italic=!0:"quote"===r?l.quote=!0:"strikethrough"===r?l.strikethrough=!0:"comment"===r&&(l.code=!0);return l}function a(e){var t=e.codemirror;t.setOption("fullScreen",!t.getOption("fullScreen")),t.getOption("fullScreen")?(B=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=B;var n=t.getWrapperElement();/fullscreen/.test(n.previousSibling.className)?n.previousSibling.className=n.previousSibling.className.replace(/\s*fullscreen\b/,""):n.previousSibling.className+=" fullscreen";var r=e.toolbarElements.fullscreen;/active/.test(r.className)?r.className=r.className.replace(/\s*active\s*/g,""):r.className+=" active";var i=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(i.className)&&L(e)}function s(e){O(e,"bold","**")}function c(e){O(e,"italic","*")}function u(e){O(e,"strikethrough","~~")}function d(e){O(e,"code","```\r\n","\r\n```")}function h(e){var t=e.codemirror;A(t,"quote")}function f(e){var t=e.codemirror;N(t,"smaller")}function p(e){var t=e.codemirror;N(t,"bigger")}function m(e){var t=e.codemirror;N(t,void 0,1)}function g(e){var t=e.codemirror;N(t,void 0,2)}function v(e){var t=e.codemirror;N(t,void 0,3)}function y(e){var t=e.codemirror;A(t,"unordered-list")}function x(e){var t=e.codemirror;A(t,"ordered-list")}function b(e){var t=e.codemirror,n=l(t),r=e.options;M(t,n.link,r.insertTexts.link)}function w(e){var t=e.codemirror,n=l(t),r=e.options;M(t,n.image,r.insertTexts.image)}function k(e){var t=e.codemirror,n=l(t),r=e.options;M(t,n.image,r.insertTexts.horizontalRule)}function C(e){var t=e.codemirror;t.undo(),t.focus()}function S(e){var t=e.codemirror;t.redo(),t.focus()}function L(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.nextSibling,i=e.toolbarElements["side-by-side"];/editor-preview-active-side/.test(r.className)?(r.className=r.className.replace(/\s*editor-preview-active-side\s*/g,""),i.className=i.className.replace(/\s*active\s*/g,""),n.className=n.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout(function(){t.getOption("fullScreen")||a(e),r.className+=" editor-preview-active-side"},1),i.className+=" active",n.className+=" CodeMirror-sided");var o=n.lastChild;if(/editor-preview-active/.test(o.className)){o.className=o.className.replace(/\s*editor-preview-active\s*/g,"");var l=e.toolbarElements.preview,s=n.previousSibling;l.className=l.className.replace(/\s*active\s*/g,""),s.className=s.className.replace(/\s*disabled-for-preview*/g,"")}r.innerHTML=e.options.previewRender(e.value(),r),t.on("update",function(){r.innerHTML=e.options.previewRender(e.value(),r)})}function T(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.previousSibling,i=e.toolbarElements.preview,o=n.lastChild;o&&/editor-preview/.test(o.className)||(o=document.createElement("div"),o.className="editor-preview",n.appendChild(o)),/editor-preview-active/.test(o.className)?(o.className=o.className.replace(/\s*editor-preview-active\s*/g,""),i.className=i.className.replace(/\s*active\s*/g,""),r.className=r.className.replace(/\s*disabled-for-preview*/g,"")):(setTimeout(function(){o.className+=" editor-preview-active"},1),i.className+=" active",r.className+=" disabled-for-preview"),o.innerHTML=e.options.previewRender(e.value(),o);var l=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(l.className)&&L(e)}function M(e,t,n){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){var r,i=n[0],o=n[1],l=e.getCursor("start"),a=e.getCursor("end");t?(r=e.getLine(l.line),i=r.slice(0,l.ch),o=r.slice(l.ch),e.replaceRange(i+o,{line:l.line,ch:0})):(r=e.getSelection(),e.replaceSelection(i+r+o),l.ch+=i.length,l!==a&&(a.ch+=i.length)),e.setSelection(l,a),e.focus()}}function N(e,t,n){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var r=e.getCursor("start"),i=e.getCursor("end"),o=r.line;o<=i.line;o++)!function(r){var i=e.getLine(r),o=i.search(/[^#]/);i=void 0!==t?0>=o?"bigger"==t?"###### "+i:"# "+i:6==o&&"smaller"==t?i.substr(7):1==o&&"bigger"==t?i.substr(2):"bigger"==t?i.substr(1):"#"+i:1==n?0>=o?"# "+i:o==n?i.substr(o+1):"# "+i.substr(o+1):2==n?0>=o?"## "+i:o==n?i.substr(o+1):"## "+i.substr(o+1):0>=o?"### "+i:o==n?i.substr(o+1):"### "+i.substr(o+1),e.replaceRange(i,{line:r,ch:0},{line:r,ch:99999999999999})}(o);e.focus()}}function A(e,t){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var n=l(e),r=e.getCursor("start"),i=e.getCursor("end"),o={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},a={quote:"> ","unordered-list":"* ","ordered-list":"1. "},s=r.line;s<=i.line;s++)!function(r){var i=e.getLine(r);i=n[t]?i.replace(o[t],"$1"):a[t]+i,e.replaceRange(i,{line:r,ch:0},{line:r,ch:99999999999999})}(s);e.focus()}}function O(e,t,n,r){if(!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)){r="undefined"==typeof r?n:r;var i,o=e.codemirror,a=l(o),s=n,c=r,u=o.getCursor("start"),d=o.getCursor("end");a[t]?(i=o.getLine(u.line),s=i.slice(0,u.ch),c=i.slice(u.ch),"bold"==t?(s=s.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),c=c.replace(/(\*\*|__)/,"")):"italic"==t?(s=s.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),c=c.replace(/(\*|_)/,"")):"strikethrough"==t&&(s=s.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),c=c.replace(/(\*\*|~~)/,"")),o.replaceRange(s+c,{line:u.line,ch:0},{line:u.line,ch:99999999999999}),"bold"==t||"strikethrough"==t?(u.ch-=2,u!==d&&(d.ch-=2)):"italic"==t&&(u.ch-=1,u!==d&&(d.ch-=1))):(i=o.getSelection(),"bold"==t?(i=i.split("**").join(""),i=i.split("__").join("")):"italic"==t?(i=i.split("*").join(""),i=i.split("_").join("")):"strikethrough"==t&&(i=i.split("~~").join("")),o.replaceSelection(s+i+c),u.ch+=n.length,d.ch=u.ch+i.length),o.setSelection(u,d),o.focus()}}function W(e,t){for(var n in t)t.hasOwnProperty(n)&&(t[n]instanceof Array?e[n]=t[n].concat(e[n]instanceof Array?e[n]:[]):null!==t[n]&&"object"==typeof t[n]&&t[n].constructor===Object?e[n]=W(e[n]||{},t[n]):e[n]=t[n]);return e}function H(e){for(var t=1;t<arguments.length;t++)e=W(e,arguments[t]);return e}function D(e){var t=/[a-zA-Z0-9_\u0392-\u03c9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g,n=e.match(t),r=0;if(null===n)return r;for(var i=0;i<n.length;i++)r+=n[i].charCodeAt(0)>=19968?n[i].length:1;return r}function E(e){e=e||{},e.parent=this;var t=!0;if(e.autoDownloadFontAwesome===!1&&(t=!1),e.autoDownloadFontAwesome!==!0)for(var n=document.styleSheets,r=0;r<n.length;r++)n[r].href&&n[r].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(t=!1);if(t){var i=document.createElement("link");i.rel="stylesheet",i.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(i)}if(e.element)this.element=e.element;else if(null===e.element)return void console.log("SimpleMDE: Error. No element was found.");e.toolbar!==!1&&(e.toolbar=e.toolbar||E.toolbar),e.hasOwnProperty("status")||(e.status=["autosave","lines","words","cursor"]),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=e.parsingConfig||{},e.insertTexts=H({},j,e.insertTexts||{}),this.options=e,this.render(),e.initialValue&&this.value(e.initialValue)}var I=e("codemirror");e("codemirror/addon/edit/continuelist.js"),e("./codemirror/tablist"),e("codemirror/addon/display/fullscreen.js"),e("codemirror/mode/markdown/markdown.js"),e("codemirror/addon/mode/overlay.js"),e("codemirror/mode/gfm/gfm.js"),e("codemirror/mode/xml/xml.js"),e("spell-checker");var P=e("marked"),z=/Mac/.test(navigator.platform),F={"Cmd-B":s,"Cmd-I":c,"Cmd-K":b,"Cmd-H":f,"Shift-Cmd-H":p,"Cmd-Alt-I":w,"Cmd-'":h,"Cmd-Alt-L":x,"Cmd-L":y,"Cmd-Alt-C":d,"Cmd-P":T},R=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},B="",_={bold:{name:"bold",action:s,className:"fa fa-bold",title:"Bold (Ctrl+B)"},italic:{name:"italic",action:c,className:"fa fa-italic",title:"Italic (Ctrl+I)"},strikethrough:{name:"strikethrough",action:u,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:f,className:"fa fa-header",title:"Heading (Ctrl+H)"},"heading-smaller":{name:"heading-smaller",action:f,className:"fa fa-header fa-header-x fa-header-smaller",title:"Smaller Heading (Ctrl+H)"},"heading-bigger":{name:"heading-bigger",action:p,className:"fa fa-header fa-header-x fa-header-bigger",title:"Bigger Heading (Shift+Ctrl+H)"},"heading-1":{name:"heading-1",action:m,className:"fa fa-header fa-header-x fa-header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:g,className:"fa fa-header fa-header-x fa-header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:v,className:"fa fa-header fa-header-x fa-header-3",title:"Small Heading"},code:{name:"code",action:d,className:"fa fa-code",title:"Code (Ctrl+Alt+C)"},quote:{name:"quote",action:h,className:"fa fa-quote-left",title:"Quote (Ctrl+')"},"unordered-list":{name:"unordered-list",action:y,className:"fa fa-list-ul",title:"Generic List (Ctrl+L)"},"ordered-list":{name:"ordered-list",action:x,className:"fa fa-list-ol",title:"Numbered List (Ctrl+Alt+L)"},link:{name:"link",action:b,className:"fa fa-link",title:"Create Link (Ctrl+K)"},image:{name:"image",action:w,className:"fa fa-picture-o",title:"Insert Image (Ctrl+Alt+I)"},"horizontal-rule":{name:"horizontal-rule",action:k,className:"fa fa-minus",title:"Insert Horizontal Line"},preview:{name:"preview",action:T,className:"fa fa-eye no-disable",title:"Toggle Preview (Ctrl+P)"},"side-by-side":{name:"side-by-side",action:L,className:"fa fa-columns no-disable no-mobile",title:"Toggle Side by Side (F9)"
},fullscreen:{name:"fullscreen",action:a,className:"fa fa-arrows-alt no-disable no-mobile",title:"Toggle Fullscreen (F11)"},guide:{name:"guide",action:"http://nextstepwebs.github.io/simplemde-markdown-editor/markdown-guide",className:"fa fa-question-circle",title:"Markdown Guide"}},j={link:["[","](http://)"],image:["![](http://",")"],horizontalRule:["","\n\n-----\n\n"]};E.toolbar=["bold","italic","heading","|","quote","unordered-list","ordered-list","|","link","image","|","preview","side-by-side","fullscreen","guide"],E.prototype.markdown=function(e){if(P){var t={};return this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks!==!1&&(t.breaks=!0),this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0&&window.hljs&&(t.highlight=function(e){return window.hljs.highlightAuto(e).value}),P.setOptions(t),P(e)}},E.prototype.render=function(e){if(e||(e=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==e){this.element=e;var t=this.options,n=this,i={};for(var o in F)!function(e){i[r(e)]=function(){F[e](n)}}(o);i.Enter="newlineAndIndentContinueMarkdownList",i.Tab="tabAndIndentMarkdownList",i["Shift-Tab"]="shiftTabAndUnindentMarkdownList",i.F11=function(){a(n)},i.F9=function(){L(n)},i.Esc=function(e){e.getOption("fullScreen")&&a(n)};var l,s;t.spellChecker!==!1?(l="spell-checker",s=t.parsingConfig,s.name="gfm",s.gitHubSpice=!1):(l=t.parsingConfig,l.name="gfm",l.gitHubSpice=!1),this.codemirror=I.fromTextArea(e,{mode:l,backdrop:s,theme:"paper",tabSize:void 0!=t.tabSize?t.tabSize:2,indentUnit:void 0!=t.tabSize?t.tabSize:2,indentWithTabs:t.indentWithTabs===!1?!1:!0,lineNumbers:!1,autofocus:t.autofocus===!0?!0:!1,extraKeys:i,lineWrapping:t.lineWrapping===!1?!1:!0,allowDropFileTypes:["text/plain"]}),t.toolbar!==!1&&this.createToolbar(),t.status!==!1&&this.createStatusbar(),void 0!=t.autosave&&t.autosave.enabled===!0&&this.autosave(),this.createSideBySide(),this._rendered=this.element}},E.prototype.autosave=function(){var e=this.value(),t=this;if(void 0==this.options.autosave.unique_id||""==this.options.autosave.unique_id)return void console.log("SimpleMDE: You must set a unique_id to use the autosave feature");null!=t.element.form&&void 0!=t.element.form&&t.element.form.addEventListener("submit",function(){localStorage.setItem(t.options.autosave.unique_id,"")}),this.options.autosave.loaded!==!0&&(null!=localStorage.getItem(this.options.autosave.unique_id)&&this.codemirror.setValue(localStorage.getItem(this.options.autosave.unique_id)),this.options.autosave.loaded=!0),localStorage&&localStorage.setItem(this.options.autosave.unique_id,e);var n=document.getElementById("autosaved");if(null!=n&&void 0!=n&&""!=n){var r=new Date,i=r.getHours(),o=r.getMinutes(),l="am",a=i;a>=12&&(a=i-12,l="pm"),0==a&&(a=12),o=10>o?"0"+o:o,n.innerHTML="Autosaved: "+a+":"+o+" "+l}setTimeout(function(){t.autosave()},this.options.autosave.delay||1e4)},E.prototype.createSideBySide=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.nextSibling;n&&/editor-preview-side/.test(n.className)||(n=document.createElement("div"),n.className="editor-preview-side",t.parentNode.insertBefore(n,t.nextSibling));var r=!1,i=!1;return e.on("scroll",function(e){if(r)return void(r=!1);i=!0;var t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,o=parseFloat(e.getScrollInfo().top)/t,l=(n.scrollHeight-n.clientHeight)*o;n.scrollTop=l}),n.onscroll=function(){if(i)return void(i=!1);r=!0;var t=n.scrollHeight-n.clientHeight,o=parseFloat(n.scrollTop)/t,l=(e.getScrollInfo().height-e.getScrollInfo().clientHeight)*o;e.scrollTo(0,l)},!0},E.prototype.createToolbar=function(e){if(e=e||this.options.toolbar,e&&0!==e.length){var t;for(t=0;t<e.length;t++)void 0!=_[e[t]]&&(e[t]=_[e[t]]);var n=document.createElement("div");n.className="editor-toolbar";var r=this,a={};for(r.toolbar=e,t=0;t<e.length;t++)("guide"!=e[t].name||r.options.toolbarGuideIcon!==!1)&&(r.options.hideIcons&&-1!=r.options.hideIcons.indexOf(e[t].name)||("fullscreen"!=e[t].name&&"side-by-side"!=e[t].name||!R())&&!function(e){var t;t="|"===e?o():i(e,r.options.toolbarTips),e.action&&("function"==typeof e.action?t.onclick=function(){e.action(r)}:"string"==typeof e.action&&(t.href=e.action,t.target="_blank")),a[e.name||e]=t,n.appendChild(t)}(e[t]));r.toolbarElements=a;var s=this.codemirror;s.on("cursorActivity",function(){var e=l(s);for(var t in a)!function(t){var n=a[t];e[t]?n.className+=" active":"fullscreen"!=t&&"side-by-side"!=t&&(n.className=n.className.replace(/\s*active\s*/g,""))}(t)});var c=s.getWrapperElement();return c.parentNode.insertBefore(n,c),n}},E.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options;if(e&&0!==e.length){var n=document.createElement("div");n.className="editor-statusbar";for(var r,i=this.codemirror,o=0;o<e.length;o++)!function(e){var o=document.createElement("span");o.className=e,"words"===e?(o.innerHTML="0",i.on("update",function(){o.innerHTML=D(i.getValue())})):"lines"===e?(o.innerHTML="0",i.on("update",function(){o.innerHTML=i.lineCount()})):"cursor"===e?(o.innerHTML="0:0",i.on("cursorActivity",function(){r=i.getCursor(),o.innerHTML=r.line+":"+r.ch})):"autosave"===e&&void 0!=t.autosave&&t.autosave.enabled===!0&&o.setAttribute("id","autosaved"),n.appendChild(o)}(e[o]);var l=this.codemirror.getWrapperElement();return l.parentNode.insertBefore(n,l.nextSibling),n}},E.prototype.value=function(e){return void 0===e?this.codemirror.getValue():(this.codemirror.getDoc().setValue(e),this)},E.toggleBold=s,E.toggleItalic=c,E.toggleStrikethrough=u,E.toggleBlockquote=h,E.toggleHeadingSmaller=f,E.toggleHeadingBigger=p,E.toggleHeading1=m,E.toggleHeading2=g,E.toggleHeading3=v,E.toggleCodeBlock=d,E.toggleUnorderedList=y,E.toggleOrderedList=x,E.drawLink=b,E.drawImage=w,E.drawHorizontalRule=k,E.undo=C,E.redo=S,E.togglePreview=T,E.toggleSideBySide=L,E.toggleFullScreen=a,E.prototype.toggleBold=function(){s(this)},E.prototype.toggleItalic=function(){c(this)},E.prototype.toggleStrikethrough=function(){u(this)},E.prototype.toggleBlockquote=function(){h(this)},E.prototype.toggleHeadingSmaller=function(){f(this)},E.prototype.toggleHeadingBigger=function(){p(this)},E.prototype.toggleHeading1=function(){m(this)},E.prototype.toggleHeading2=function(){g(this)},E.prototype.toggleHeading3=function(){v(this)},E.prototype.toggleCodeBlock=function(){d(this)},E.prototype.toggleUnorderedList=function(){y(this)},E.prototype.toggleOrderedList=function(){x(this)},E.prototype.drawLink=function(){b(this)},E.prototype.drawImage=function(){w(this)},E.prototype.drawHorizontalRule=function(){k(this)},E.prototype.undo=function(){C(this)},E.prototype.redo=function(){S(this)},E.prototype.togglePreview=function(){T(this)},E.prototype.toggleSideBySide=function(){L(this)},E.prototype.toggleFullScreen=function(){a(this)},E.prototype.isPreviewActive=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.lastChild;return/editor-preview-active/.test(n.className)},E.prototype.isSideBySideActive=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.nextSibling;return/editor-preview-active-side/.test(n.className)},E.prototype.isFullscreenActive=function(){var e=this.codemirror;return e.getOption("fullScreen")},t.exports=E},{"./codemirror/tablist":12,codemirror:6,"codemirror/addon/display/fullscreen.js":3,"codemirror/addon/edit/continuelist.js":4,"codemirror/addon/mode/overlay.js":5,"codemirror/mode/gfm/gfm.js":7,"codemirror/mode/markdown/markdown.js":8,"codemirror/mode/xml/xml.js":10,marked:11,"spell-checker":1}]},{},[13])(13)});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5qcyIsImJvb3RzdHJhcC5qcyIsImFwcC5qcyIsIm1lZXQtaHlkZS9hY2UuanMiLCJtZWV0LWh5ZGUvY29uZmlnLmpzIiwibWVldC1oeWRlL2Ryb3B6b25lLm1pbi5qcyIsIm1lZXQtaHlkZS9lbW1ldC5qcyIsIm1lZXQtaHlkZS9leHQtZW1tZXQuanMiLCJtZWV0LWh5ZGUvZXh0LXRoZW1lbGlzdC5qcyIsIm1lZXQtaHlkZS9qcXVlcnktdWkubWluLmpzIiwibWVldC1oeWRlL2pxdWVyeS5tb3VzZXdoZWVsLm1pbi5qcyIsIm1lZXQtaHlkZS9qcy5qcyIsIm1lZXQtaHlkZS9zaW1wbGVtZGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxL1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzN6RUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQTtBQUNBO0FBQ0E7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5OWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3Q4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2Mi4xLjRcbiAqIGh0dHA6Ly9qcXVlcnkuY29tL1xuICpcbiAqIEluY2x1ZGVzIFNpenpsZS5qc1xuICogaHR0cDovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBEYXRlOiAyMDE1LTA0LTI4VDE2OjAxWlxuICovXG5cbihmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuXG5cdGlmICggdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Ly8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciBgd2luZG93YFxuXHRcdC8vIGlzIHByZXNlbnQsIGV4ZWN1dGUgdGhlIGZhY3RvcnkgYW5kIGdldCBqUXVlcnkuXG5cdFx0Ly8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBoYXZlIGEgYHdpbmRvd2Agd2l0aCBhIGBkb2N1bWVudGBcblx0XHQvLyAoc3VjaCBhcyBOb2RlLmpzKSwgZXhwb3NlIGEgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0cy5cblx0XHQvLyBUaGlzIGFjY2VudHVhdGVzIHRoZSBuZWVkIGZvciB0aGUgY3JlYXRpb24gb2YgYSByZWFsIGB3aW5kb3dgLlxuXHRcdC8vIGUuZy4gdmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIikod2luZG93KTtcblx0XHQvLyBTZWUgdGlja2V0ICMxNDU0OSBmb3IgbW9yZSBpbmZvLlxuXHRcdG1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLmRvY3VtZW50ID9cblx0XHRcdGZhY3RvcnkoIGdsb2JhbCwgdHJ1ZSApIDpcblx0XHRcdGZ1bmN0aW9uKCB3ICkge1xuXHRcdFx0XHRpZiAoICF3LmRvY3VtZW50ICkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFjdG9yeSggdyApO1xuXHRcdFx0fTtcblx0fSBlbHNlIHtcblx0XHRmYWN0b3J5KCBnbG9iYWwgKTtcblx0fVxuXG4vLyBQYXNzIHRoaXMgaWYgd2luZG93IGlzIG5vdCBkZWZpbmVkIHlldFxufSh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24oIHdpbmRvdywgbm9HbG9iYWwgKSB7XG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3ggMTgrXG4vLyBDYW4ndCBiZSBpbiBzdHJpY3QgbW9kZSwgc2V2ZXJhbCBsaWJzIGluY2x1ZGluZyBBU1AuTkVUIHRyYWNlXG4vLyB0aGUgc3RhY2sgdmlhIGFyZ3VtZW50cy5jYWxsZXIuY2FsbGVlIGFuZCBGaXJlZm94IGRpZXMgaWZcbi8vIHlvdSB0cnkgdG8gdHJhY2UgdGhyb3VnaCBcInVzZSBzdHJpY3RcIiBjYWxsIGNoYWlucy4gKCMxMzMzNSlcbi8vXG5cbnZhciBhcnIgPSBbXTtcblxudmFyIHNsaWNlID0gYXJyLnNsaWNlO1xuXG52YXIgY29uY2F0ID0gYXJyLmNvbmNhdDtcblxudmFyIHB1c2ggPSBhcnIucHVzaDtcblxudmFyIGluZGV4T2YgPSBhcnIuaW5kZXhPZjtcblxudmFyIGNsYXNzMnR5cGUgPSB7fTtcblxudmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcblxudmFyIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBzdXBwb3J0ID0ge307XG5cblxuXG52YXJcblx0Ly8gVXNlIHRoZSBjb3JyZWN0IGRvY3VtZW50IGFjY29yZGluZ2x5IHdpdGggd2luZG93IGFyZ3VtZW50IChzYW5kYm94KVxuXHRkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudCxcblxuXHR2ZXJzaW9uID0gXCIyLjEuNFwiLFxuXG5cdC8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5XG5cdGpRdWVyeSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblx0XHQvLyBUaGUgalF1ZXJ5IG9iamVjdCBpcyBhY3R1YWxseSBqdXN0IHRoZSBpbml0IGNvbnN0cnVjdG9yICdlbmhhbmNlZCdcblx0XHQvLyBOZWVkIGluaXQgaWYgalF1ZXJ5IGlzIGNhbGxlZCAoanVzdCBhbGxvdyBlcnJvciB0byBiZSB0aHJvd24gaWYgbm90IGluY2x1ZGVkKVxuXHRcdHJldHVybiBuZXcgalF1ZXJ5LmZuLmluaXQoIHNlbGVjdG9yLCBjb250ZXh0ICk7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjFcblx0Ly8gTWFrZSBzdXJlIHdlIHRyaW0gQk9NIGFuZCBOQlNQXG5cdHJ0cmltID0gL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFxuXG5cdC8vIE1hdGNoZXMgZGFzaGVkIHN0cmluZyBmb3IgY2FtZWxpemluZ1xuXHRybXNQcmVmaXggPSAvXi1tcy0vLFxuXHRyZGFzaEFscGhhID0gLy0oW1xcZGEtel0pL2dpLFxuXG5cdC8vIFVzZWQgYnkgalF1ZXJ5LmNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKClcblx0ZmNhbWVsQ2FzZSA9IGZ1bmN0aW9uKCBhbGwsIGxldHRlciApIHtcblx0XHRyZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG5cdH07XG5cbmpRdWVyeS5mbiA9IGpRdWVyeS5wcm90b3R5cGUgPSB7XG5cdC8vIFRoZSBjdXJyZW50IHZlcnNpb24gb2YgalF1ZXJ5IGJlaW5nIHVzZWRcblx0anF1ZXJ5OiB2ZXJzaW9uLFxuXG5cdGNvbnN0cnVjdG9yOiBqUXVlcnksXG5cblx0Ly8gU3RhcnQgd2l0aCBhbiBlbXB0eSBzZWxlY3RvclxuXHRzZWxlY3RvcjogXCJcIixcblxuXHQvLyBUaGUgZGVmYXVsdCBsZW5ndGggb2YgYSBqUXVlcnkgb2JqZWN0IGlzIDBcblx0bGVuZ3RoOiAwLFxuXG5cdHRvQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gR2V0IHRoZSBOdGggZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldCBPUlxuXHQvLyBHZXQgdGhlIHdob2xlIG1hdGNoZWQgZWxlbWVudCBzZXQgYXMgYSBjbGVhbiBhcnJheVxuXHRnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7XG5cdFx0cmV0dXJuIG51bSAhPSBudWxsID9cblxuXHRcdFx0Ly8gUmV0dXJuIGp1c3QgdGhlIG9uZSBlbGVtZW50IGZyb20gdGhlIHNldFxuXHRcdFx0KCBudW0gPCAwID8gdGhpc1sgbnVtICsgdGhpcy5sZW5ndGggXSA6IHRoaXNbIG51bSBdICkgOlxuXG5cdFx0XHQvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBpbiBhIGNsZWFuIGFycmF5XG5cdFx0XHRzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gVGFrZSBhbiBhcnJheSBvZiBlbGVtZW50cyBhbmQgcHVzaCBpdCBvbnRvIHRoZSBzdGFja1xuXHQvLyAocmV0dXJuaW5nIHRoZSBuZXcgbWF0Y2hlZCBlbGVtZW50IHNldClcblx0cHVzaFN0YWNrOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cblx0XHQvLyBCdWlsZCBhIG5ldyBqUXVlcnkgbWF0Y2hlZCBlbGVtZW50IHNldFxuXHRcdHZhciByZXQgPSBqUXVlcnkubWVyZ2UoIHRoaXMuY29uc3RydWN0b3IoKSwgZWxlbXMgKTtcblxuXHRcdC8vIEFkZCB0aGUgb2xkIG9iamVjdCBvbnRvIHRoZSBzdGFjayAoYXMgYSByZWZlcmVuY2UpXG5cdFx0cmV0LnByZXZPYmplY3QgPSB0aGlzO1xuXHRcdHJldC5jb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuXG5cdFx0Ly8gUmV0dXJuIHRoZSBuZXdseS1mb3JtZWQgZWxlbWVudCBzZXRcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXG5cdC8vIEV4ZWN1dGUgYSBjYWxsYmFjayBmb3IgZXZlcnkgZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBzZXQuXG5cdC8vIChZb3UgY2FuIHNlZWQgdGhlIGFyZ3VtZW50cyB3aXRoIGFuIGFycmF5IG9mIGFyZ3MsIGJ1dCB0aGlzIGlzXG5cdC8vIG9ubHkgdXNlZCBpbnRlcm5hbGx5Lilcblx0ZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrLCBhcmdzICkge1xuXHRcdHJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2ssIGFyZ3MgKTtcblx0fSxcblxuXHRtYXA6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeS5tYXAodGhpcywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG5cdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbCggZWxlbSwgaSwgZWxlbSApO1xuXHRcdH0pKTtcblx0fSxcblxuXHRzbGljZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBzbGljZS5hcHBseSggdGhpcywgYXJndW1lbnRzICkgKTtcblx0fSxcblxuXHRmaXJzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIDAgKTtcblx0fSxcblxuXHRsYXN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggLTEgKTtcblx0fSxcblxuXHRlcTogZnVuY3Rpb24oIGkgKSB7XG5cdFx0dmFyIGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0aiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGogPj0gMCAmJiBqIDwgbGVuID8gWyB0aGlzW2pdIF0gOiBbXSApO1xuXHR9LFxuXG5cdGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHJldk9iamVjdCB8fCB0aGlzLmNvbnN0cnVjdG9yKG51bGwpO1xuXHR9LFxuXG5cdC8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS5cblx0Ly8gQmVoYXZlcyBsaWtlIGFuIEFycmF5J3MgbWV0aG9kLCBub3QgbGlrZSBhIGpRdWVyeSBtZXRob2QuXG5cdHB1c2g6IHB1c2gsXG5cdHNvcnQ6IGFyci5zb3J0LFxuXHRzcGxpY2U6IGFyci5zcGxpY2Vcbn07XG5cbmpRdWVyeS5leHRlbmQgPSBqUXVlcnkuZm4uZXh0ZW5kID0gZnVuY3Rpb24oKSB7XG5cdHZhciBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbMF0gfHwge30sXG5cdFx0aSA9IDEsXG5cdFx0bGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcblx0XHRkZWVwID0gZmFsc2U7XG5cblx0Ly8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cblx0XHQvLyBTa2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307XG5cdFx0aSsrO1xuXHR9XG5cblx0Ly8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpXG5cdGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24odGFyZ2V0KSApIHtcblx0XHR0YXJnZXQgPSB7fTtcblx0fVxuXG5cdC8vIEV4dGVuZCBqUXVlcnkgaXRzZWxmIGlmIG9ubHkgb25lIGFyZ3VtZW50IGlzIHBhc3NlZFxuXHRpZiAoIGkgPT09IGxlbmd0aCApIHtcblx0XHR0YXJnZXQgPSB0aGlzO1xuXHRcdGktLTtcblx0fVxuXG5cdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAoIChvcHRpb25zID0gYXJndW1lbnRzWyBpIF0pICE9IG51bGwgKSB7XG5cdFx0XHQvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG5cdFx0XHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRcdHNyYyA9IHRhcmdldFsgbmFtZSBdO1xuXHRcdFx0XHRjb3B5ID0gb3B0aW9uc1sgbmFtZSBdO1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0aWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcblx0XHRcdFx0aWYgKCBkZWVwICYmIGNvcHkgJiYgKCBqUXVlcnkuaXNQbGFpbk9iamVjdChjb3B5KSB8fCAoY29weUlzQXJyYXkgPSBqUXVlcnkuaXNBcnJheShjb3B5KSkgKSApIHtcblx0XHRcdFx0XHRpZiAoIGNvcHlJc0FycmF5ICkge1xuXHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGpRdWVyeS5pc0FycmF5KHNyYykgPyBzcmMgOiBbXTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdChzcmMpID8gc3JjIDoge307XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBqUXVlcnkuZXh0ZW5kKCBkZWVwLCBjbG9uZSwgY29weSApO1xuXG5cdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0fSBlbHNlIGlmICggY29weSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0gY29weTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdHJldHVybiB0YXJnZXQ7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0Ly8gVW5pcXVlIGZvciBlYWNoIGNvcHkgb2YgalF1ZXJ5IG9uIHRoZSBwYWdlXG5cdGV4cGFuZG86IFwialF1ZXJ5XCIgKyAoIHZlcnNpb24gKyBNYXRoLnJhbmRvbSgpICkucmVwbGFjZSggL1xcRC9nLCBcIlwiICksXG5cblx0Ly8gQXNzdW1lIGpRdWVyeSBpcyByZWFkeSB3aXRob3V0IHRoZSByZWFkeSBtb2R1bGVcblx0aXNSZWFkeTogdHJ1ZSxcblxuXHRlcnJvcjogZnVuY3Rpb24oIG1zZyApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoIG1zZyApO1xuXHR9LFxuXG5cdG5vb3A6IGZ1bmN0aW9uKCkge30sXG5cblx0aXNGdW5jdGlvbjogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRyZXR1cm4galF1ZXJ5LnR5cGUob2JqKSA9PT0gXCJmdW5jdGlvblwiO1xuXHR9LFxuXG5cdGlzQXJyYXk6IEFycmF5LmlzQXJyYXksXG5cblx0aXNXaW5kb3c6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0cmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PT0gb2JqLndpbmRvdztcblx0fSxcblxuXHRpc051bWVyaWM6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0Ly8gcGFyc2VGbG9hdCBOYU5zIG51bWVyaWMtY2FzdCBmYWxzZSBwb3NpdGl2ZXMgKG51bGx8dHJ1ZXxmYWxzZXxcIlwiKVxuXHRcdC8vIC4uLmJ1dCBtaXNpbnRlcnByZXRzIGxlYWRpbmctbnVtYmVyIHN0cmluZ3MsIHBhcnRpY3VsYXJseSBoZXggbGl0ZXJhbHMgKFwiMHguLi5cIilcblx0XHQvLyBzdWJ0cmFjdGlvbiBmb3JjZXMgaW5maW5pdGllcyB0byBOYU5cblx0XHQvLyBhZGRpbmcgMSBjb3JyZWN0cyBsb3NzIG9mIHByZWNpc2lvbiBmcm9tIHBhcnNlRmxvYXQgKCMxNTEwMClcblx0XHRyZXR1cm4gIWpRdWVyeS5pc0FycmF5KCBvYmogKSAmJiAob2JqIC0gcGFyc2VGbG9hdCggb2JqICkgKyAxKSA+PSAwO1xuXHR9LFxuXG5cdGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0Ly8gTm90IHBsYWluIG9iamVjdHM6XG5cdFx0Ly8gLSBBbnkgb2JqZWN0IG9yIHZhbHVlIHdob3NlIGludGVybmFsIFtbQ2xhc3NdXSBwcm9wZXJ0eSBpcyBub3QgXCJbb2JqZWN0IE9iamVjdF1cIlxuXHRcdC8vIC0gRE9NIG5vZGVzXG5cdFx0Ly8gLSB3aW5kb3dcblx0XHRpZiAoIGpRdWVyeS50eXBlKCBvYmogKSAhPT0gXCJvYmplY3RcIiB8fCBvYmoubm9kZVR5cGUgfHwgalF1ZXJ5LmlzV2luZG93KCBvYmogKSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRpZiAoIG9iai5jb25zdHJ1Y3RvciAmJlxuXHRcdFx0XHQhaGFzT3duLmNhbGwoIG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwiaXNQcm90b3R5cGVPZlwiICkgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlIGZ1bmN0aW9uIGhhc24ndCByZXR1cm5lZCBhbHJlYWR5LCB3ZSdyZSBjb25maWRlbnQgdGhhdFxuXHRcdC8vIHxvYmp8IGlzIGEgcGxhaW4gb2JqZWN0LCBjcmVhdGVkIGJ5IHt9IG9yIGNvbnN0cnVjdGVkIHdpdGggbmV3IE9iamVjdFxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdGlzRW1wdHlPYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIG5hbWU7XG5cdFx0Zm9yICggbmFtZSBpbiBvYmogKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdHR5cGU6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0aWYgKCBvYmogPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiBvYmogKyBcIlwiO1xuXHRcdH1cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMCwgaU9TPDYgKGZ1bmN0aW9uaXNoIFJlZ0V4cClcblx0XHRyZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgP1xuXHRcdFx0Y2xhc3MydHlwZVsgdG9TdHJpbmcuY2FsbChvYmopIF0gfHwgXCJvYmplY3RcIiA6XG5cdFx0XHR0eXBlb2Ygb2JqO1xuXHR9LFxuXG5cdC8vIEV2YWx1YXRlcyBhIHNjcmlwdCBpbiBhIGdsb2JhbCBjb250ZXh0XG5cdGdsb2JhbEV2YWw6IGZ1bmN0aW9uKCBjb2RlICkge1xuXHRcdHZhciBzY3JpcHQsXG5cdFx0XHRpbmRpcmVjdCA9IGV2YWw7XG5cblx0XHRjb2RlID0galF1ZXJ5LnRyaW0oIGNvZGUgKTtcblxuXHRcdGlmICggY29kZSApIHtcblx0XHRcdC8vIElmIHRoZSBjb2RlIGluY2x1ZGVzIGEgdmFsaWQsIHByb2xvZ3VlIHBvc2l0aW9uXG5cdFx0XHQvLyBzdHJpY3QgbW9kZSBwcmFnbWEsIGV4ZWN1dGUgY29kZSBieSBpbmplY3RpbmcgYVxuXHRcdFx0Ly8gc2NyaXB0IHRhZyBpbnRvIHRoZSBkb2N1bWVudC5cblx0XHRcdGlmICggY29kZS5pbmRleE9mKFwidXNlIHN0cmljdFwiKSA9PT0gMSApIHtcblx0XHRcdFx0c2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcblx0XHRcdFx0c2NyaXB0LnRleHQgPSBjb2RlO1xuXHRcdFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHQgKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBzY3JpcHQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBPdGhlcndpc2UsIGF2b2lkIHRoZSBET00gbm9kZSBjcmVhdGlvbiwgaW5zZXJ0aW9uXG5cdFx0XHQvLyBhbmQgcmVtb3ZhbCBieSB1c2luZyBhbiBpbmRpcmVjdCBnbG9iYWwgZXZhbFxuXHRcdFx0XHRpbmRpcmVjdCggY29kZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gTWljcm9zb2Z0IGZvcmdvdCB0byBodW1wIHRoZWlyIHZlbmRvciBwcmVmaXggKCM5NTcyKVxuXHRjYW1lbENhc2U6IGZ1bmN0aW9uKCBzdHJpbmcgKSB7XG5cdFx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsIFwibXMtXCIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7XG5cdH0sXG5cblx0bm9kZU5hbWU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHR9LFxuXG5cdC8vIGFyZ3MgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0ZWFjaDogZnVuY3Rpb24oIG9iaiwgY2FsbGJhY2ssIGFyZ3MgKSB7XG5cdFx0dmFyIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBvYmoubGVuZ3RoLFxuXHRcdFx0aXNBcnJheSA9IGlzQXJyYXlsaWtlKCBvYmogKTtcblxuXHRcdGlmICggYXJncyApIHtcblx0XHRcdGlmICggaXNBcnJheSApIHtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5hcHBseSggb2JqWyBpIF0sIGFyZ3MgKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrLmFwcGx5KCBvYmpbIGkgXSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEEgc3BlY2lhbCwgZmFzdCwgY2FzZSBmb3IgdGhlIG1vc3QgY29tbW9uIHVzZSBvZiBlYWNoXG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICggaXNBcnJheSApIHtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApO1xuXG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xXG5cdHRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdHJldHVybiB0ZXh0ID09IG51bGwgP1xuXHRcdFx0XCJcIiA6XG5cdFx0XHQoIHRleHQgKyBcIlwiICkucmVwbGFjZSggcnRyaW0sIFwiXCIgKTtcblx0fSxcblxuXHQvLyByZXN1bHRzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1ha2VBcnJheTogZnVuY3Rpb24oIGFyciwgcmVzdWx0cyApIHtcblx0XHR2YXIgcmV0ID0gcmVzdWx0cyB8fCBbXTtcblxuXHRcdGlmICggYXJyICE9IG51bGwgKSB7XG5cdFx0XHRpZiAoIGlzQXJyYXlsaWtlKCBPYmplY3QoYXJyKSApICkge1xuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIHJldCxcblx0XHRcdFx0XHR0eXBlb2YgYXJyID09PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRbIGFyciBdIDogYXJyXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwdXNoLmNhbGwoIHJldCwgYXJyICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblxuXHRpbkFycmF5OiBmdW5jdGlvbiggZWxlbSwgYXJyLCBpICkge1xuXHRcdHJldHVybiBhcnIgPT0gbnVsbCA/IC0xIDogaW5kZXhPZi5jYWxsKCBhcnIsIGVsZW0sIGkgKTtcblx0fSxcblxuXHRtZXJnZTogZnVuY3Rpb24oIGZpcnN0LCBzZWNvbmQgKSB7XG5cdFx0dmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLFxuXHRcdFx0aiA9IDAsXG5cdFx0XHRpID0gZmlyc3QubGVuZ3RoO1xuXG5cdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGogXTtcblx0XHR9XG5cblx0XHRmaXJzdC5sZW5ndGggPSBpO1xuXG5cdFx0cmV0dXJuIGZpcnN0O1xuXHR9LFxuXG5cdGdyZXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGludmVydCApIHtcblx0XHR2YXIgY2FsbGJhY2tJbnZlcnNlLFxuXHRcdFx0bWF0Y2hlcyA9IFtdLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGgsXG5cdFx0XHRjYWxsYmFja0V4cGVjdCA9ICFpbnZlcnQ7XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgb25seSBzYXZpbmcgdGhlIGl0ZW1zXG5cdFx0Ly8gdGhhdCBwYXNzIHRoZSB2YWxpZGF0b3IgZnVuY3Rpb25cblx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdGNhbGxiYWNrSW52ZXJzZSA9ICFjYWxsYmFjayggZWxlbXNbIGkgXSwgaSApO1xuXHRcdFx0aWYgKCBjYWxsYmFja0ludmVyc2UgIT09IGNhbGxiYWNrRXhwZWN0ICkge1xuXHRcdFx0XHRtYXRjaGVzLnB1c2goIGVsZW1zWyBpIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbWF0Y2hlcztcblx0fSxcblxuXHQvLyBhcmcgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0bWFwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBhcmcgKSB7XG5cdFx0dmFyIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGgsXG5cdFx0XHRpc0FycmF5ID0gaXNBcnJheWxpa2UoIGVsZW1zICksXG5cdFx0XHRyZXQgPSBbXTtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpciBuZXcgdmFsdWVzXG5cdFx0aWYgKCBpc0FycmF5ICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gR28gdGhyb3VnaCBldmVyeSBrZXkgb24gdGhlIG9iamVjdCxcblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICggaSBpbiBlbGVtcyApIHtcblx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdHJldC5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRcdHJldHVybiBjb25jYXQuYXBwbHkoIFtdLCByZXQgKTtcblx0fSxcblxuXHQvLyBBIGdsb2JhbCBHVUlEIGNvdW50ZXIgZm9yIG9iamVjdHNcblx0Z3VpZDogMSxcblxuXHQvLyBCaW5kIGEgZnVuY3Rpb24gdG8gYSBjb250ZXh0LCBvcHRpb25hbGx5IHBhcnRpYWxseSBhcHBseWluZyBhbnlcblx0Ly8gYXJndW1lbnRzLlxuXHRwcm94eTogZnVuY3Rpb24oIGZuLCBjb250ZXh0ICkge1xuXHRcdHZhciB0bXAsIGFyZ3MsIHByb3h5O1xuXG5cdFx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHRtcCA9IGZuWyBjb250ZXh0IF07XG5cdFx0XHRjb250ZXh0ID0gZm47XG5cdFx0XHRmbiA9IHRtcDtcblx0XHR9XG5cblx0XHQvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlY1xuXHRcdC8vIHRoaXMgdGhyb3dzIGEgVHlwZUVycm9yLCBidXQgd2Ugd2lsbCBqdXN0IHJldHVybiB1bmRlZmluZWQuXG5cdFx0aWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIGZuICkgKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIFNpbXVsYXRlZCBiaW5kXG5cdFx0YXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMiApO1xuXHRcdHByb3h5ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gZm4uYXBwbHkoIGNvbnRleHQgfHwgdGhpcywgYXJncy5jb25jYXQoIHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApICkgKTtcblx0XHR9O1xuXG5cdFx0Ly8gU2V0IHRoZSBndWlkIG9mIHVuaXF1ZSBoYW5kbGVyIHRvIHRoZSBzYW1lIG9mIG9yaWdpbmFsIGhhbmRsZXIsIHNvIGl0IGNhbiBiZSByZW1vdmVkXG5cdFx0cHJveHkuZ3VpZCA9IGZuLmd1aWQgPSBmbi5ndWlkIHx8IGpRdWVyeS5ndWlkKys7XG5cblx0XHRyZXR1cm4gcHJveHk7XG5cdH0sXG5cblx0bm93OiBEYXRlLm5vdyxcblxuXHQvLyBqUXVlcnkuc3VwcG9ydCBpcyBub3QgdXNlZCBpbiBDb3JlIGJ1dCBvdGhlciBwcm9qZWN0cyBhdHRhY2ggdGhlaXJcblx0Ly8gcHJvcGVydGllcyB0byBpdCBzbyBpdCBuZWVkcyB0byBleGlzdC5cblx0c3VwcG9ydDogc3VwcG9ydFxufSk7XG5cbi8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcFxualF1ZXJ5LmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbihpLCBuYW1lKSB7XG5cdGNsYXNzMnR5cGVbIFwiW29iamVjdCBcIiArIG5hbWUgKyBcIl1cIiBdID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xufSk7XG5cbmZ1bmN0aW9uIGlzQXJyYXlsaWtlKCBvYmogKSB7XG5cblx0Ly8gU3VwcG9ydDogaU9TIDguMiAobm90IHJlcHJvZHVjaWJsZSBpbiBzaW11bGF0b3IpXG5cdC8vIGBpbmAgY2hlY2sgdXNlZCB0byBwcmV2ZW50IEpJVCBlcnJvciAoZ2gtMjE0NSlcblx0Ly8gaGFzT3duIGlzbid0IHVzZWQgaGVyZSBkdWUgdG8gZmFsc2UgbmVnYXRpdmVzXG5cdC8vIHJlZ2FyZGluZyBOb2RlbGlzdCBsZW5ndGggaW4gSUVcblx0dmFyIGxlbmd0aCA9IFwibGVuZ3RoXCIgaW4gb2JqICYmIG9iai5sZW5ndGgsXG5cdFx0dHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTtcblxuXHRpZiAoIHR5cGUgPT09IFwiZnVuY3Rpb25cIiB8fCBqUXVlcnkuaXNXaW5kb3coIG9iaiApICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGlmICggb2JqLm5vZGVUeXBlID09PSAxICYmIGxlbmd0aCApIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHJldHVybiB0eXBlID09PSBcImFycmF5XCIgfHwgbGVuZ3RoID09PSAwIHx8XG5cdFx0dHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajtcbn1cbnZhciBTaXp6bGUgPVxuLyohXG4gKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4yLjAtcHJlXG4gKiBodHRwOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCAyMDA4LCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTQtMTItMTZcbiAqL1xuKGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbnZhciBpLFxuXHRzdXBwb3J0LFxuXHRFeHByLFxuXHRnZXRUZXh0LFxuXHRpc1hNTCxcblx0dG9rZW5pemUsXG5cdGNvbXBpbGUsXG5cdHNlbGVjdCxcblx0b3V0ZXJtb3N0Q29udGV4dCxcblx0c29ydElucHV0LFxuXHRoYXNEdXBsaWNhdGUsXG5cblx0Ly8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuXHRzZXREb2N1bWVudCxcblx0ZG9jdW1lbnQsXG5cdGRvY0VsZW0sXG5cdGRvY3VtZW50SXNIVE1MLFxuXHRyYnVnZ3lRU0EsXG5cdHJidWdneU1hdGNoZXMsXG5cdG1hdGNoZXMsXG5cdGNvbnRhaW5zLFxuXG5cdC8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGFcblx0ZXhwYW5kbyA9IFwic2l6emxlXCIgKyAxICogbmV3IERhdGUoKSxcblx0cHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuXHRkaXJydW5zID0gMCxcblx0ZG9uZSA9IDAsXG5cdGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHR0b2tlbkNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0Y29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9LFxuXG5cdC8vIEdlbmVyYWwtcHVycG9zZSBjb25zdGFudHNcblx0TUFYX05FR0FUSVZFID0gMSA8PCAzMSxcblxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdGhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksXG5cdGFyciA9IFtdLFxuXHRwb3AgPSBhcnIucG9wLFxuXHRwdXNoX25hdGl2ZSA9IGFyci5wdXNoLFxuXHRwdXNoID0gYXJyLnB1c2gsXG5cdHNsaWNlID0gYXJyLnNsaWNlLFxuXHQvLyBVc2UgYSBzdHJpcHBlZC1kb3duIGluZGV4T2YgYXMgaXQncyBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0Ly8gaHR0cDovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81XG5cdGluZGV4T2YgPSBmdW5jdGlvbiggbGlzdCwgZWxlbSApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSBsaXN0Lmxlbmd0aDtcblx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGlmICggbGlzdFtpXSA9PT0gZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fSxcblxuXHRib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblxuXHQvLyBSZWd1bGFyIGV4cHJlc3Npb25zXG5cblx0Ly8gV2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc2VsZWN0b3JzLyN3aGl0ZXNwYWNlXG5cdHdoaXRlc3BhY2UgPSBcIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc3ludGF4LyNjaGFyYWN0ZXJzXG5cdGNoYXJhY3RlckVuY29kaW5nID0gXCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixcblxuXHQvLyBMb29zZWx5IG1vZGVsZWQgb24gQ1NTIGlkZW50aWZpZXIgY2hhcmFjdGVyc1xuXHQvLyBBbiB1bnF1b3RlZCB2YWx1ZSBzaG91bGQgYmUgYSBDU1MgaWRlbnRpZmllciBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuXHQvLyBQcm9wZXIgc3ludGF4OiBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXJcblx0aWRlbnRpZmllciA9IGNoYXJhY3RlckVuY29kaW5nLnJlcGxhY2UoIFwid1wiLCBcIncjXCIgKSxcblxuXHQvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnNcblx0YXR0cmlidXRlcyA9IFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKSg/OlwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gT3BlcmF0b3IgKGNhcHR1cmUgMilcblx0XHRcIiooWypeJHwhfl0/PSlcIiArIHdoaXRlc3BhY2UgK1xuXHRcdC8vIFwiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XVwiXG5cdFx0XCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIiArIGlkZW50aWZpZXIgKyBcIikpfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFwiKlxcXFxdXCIsXG5cblx0cHNldWRvcyA9IFwiOihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpKD86XFxcXCgoXCIgK1xuXHRcdC8vIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIHNlbGVjdG9ycyBuZWVkaW5nIHRva2VuaXplIGluIHRoZSBwcmVGaWx0ZXIsIHByZWZlciBhcmd1bWVudHM6XG5cdFx0Ly8gMS4gcXVvdGVkIChjYXB0dXJlIDM7IGNhcHR1cmUgNCBvciBjYXB0dXJlIDUpXG5cdFx0XCIoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXxcIiArXG5cdFx0Ly8gMi4gc2ltcGxlIChjYXB0dXJlIDYpXG5cdFx0XCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIgKyBhdHRyaWJ1dGVzICsgXCIpKil8XCIgK1xuXHRcdC8vIDMuIGFueXRoaW5nIGVsc2UgKGNhcHR1cmUgMilcblx0XHRcIi4qXCIgK1xuXHRcdFwiKVxcXFwpfClcIixcblxuXHQvLyBMZWFkaW5nIGFuZCBub24tZXNjYXBlZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBjYXB0dXJpbmcgc29tZSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHByZWNlZGluZyB0aGUgbGF0dGVyXG5cdHJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArIFwiK1wiLCBcImdcIiApLFxuXHRydHJpbSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIiArIHdoaXRlc3BhY2UgKyBcIiskXCIsIFwiZ1wiICksXG5cblx0cmNvbW1hID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqLFwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cdHJjb21iaW5hdG9ycyA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKihbPit+XXxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXG5cdHJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCBcIj1cIiArIHdoaXRlc3BhY2UgKyBcIiooW15cXFxcXSdcXFwiXSo/KVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFxdXCIsIFwiZ1wiICksXG5cblx0cnBzZXVkbyA9IG5ldyBSZWdFeHAoIHBzZXVkb3MgKSxcblx0cmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCBcIl5cIiArIGlkZW50aWZpZXIgKyBcIiRcIiApLFxuXG5cdG1hdGNoRXhwciA9IHtcblx0XHRcIklEXCI6IG5ldyBSZWdFeHAoIFwiXiMoXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKVwiICksXG5cdFx0XCJDTEFTU1wiOiBuZXcgUmVnRXhwKCBcIl5cXFxcLihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpXCIgKSxcblx0XHRcIlRBR1wiOiBuZXcgUmVnRXhwKCBcIl4oXCIgKyBjaGFyYWN0ZXJFbmNvZGluZy5yZXBsYWNlKCBcIndcIiwgXCJ3KlwiICkgKyBcIilcIiApLFxuXHRcdFwiQVRUUlwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIGF0dHJpYnV0ZXMgKSxcblx0XHRcIlBTRVVET1wiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHBzZXVkb3MgKSxcblx0XHRcIkNISUxEXCI6IG5ldyBSZWdFeHAoIFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIHdoaXRlc3BhY2UgKyBcIiooPzooWystXXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihcXFxcZCspfCkpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KVwiLCBcImlcIiApLFxuXHRcdFwiYm9vbFwiOiBuZXcgUmVnRXhwKCBcIl4oPzpcIiArIGJvb2xlYW5zICsgXCIpJFwiLCBcImlcIiApLFxuXHRcdC8vIEZvciB1c2UgaW4gbGlicmFyaWVzIGltcGxlbWVudGluZyAuaXMoKVxuXHRcdC8vIFdlIHVzZSB0aGlzIGZvciBQT1MgbWF0Y2hpbmcgaW4gYHNlbGVjdGBcblx0XHRcIm5lZWRzQ29udGV4dFwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIgK1xuXHRcdFx0d2hpdGVzcGFjZSArIFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIiApXG5cdH0sXG5cblx0cmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJoZWFkZXIgPSAvXmhcXGQkL2ksXG5cblx0cm5hdGl2ZSA9IC9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXG5cblx0Ly8gRWFzaWx5LXBhcnNlYWJsZS9yZXRyaWV2YWJsZSBJRCBvciBUQUcgb3IgQ0xBU1Mgc2VsZWN0b3JzXG5cdHJxdWlja0V4cHIgPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxcblxuXHRyc2libGluZyA9IC9bK35dLyxcblx0cmVzY2FwZSA9IC8nfFxcXFwvZyxcblxuXHQvLyBDU1MgZXNjYXBlcyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjZXNjYXBlZC1jaGFyYWN0ZXJzXG5cdHJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoIFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIgKyB3aGl0ZXNwYWNlICsgXCI/fChcIiArIHdoaXRlc3BhY2UgKyBcIil8LilcIiwgXCJpZ1wiICksXG5cdGZ1bmVzY2FwZSA9IGZ1bmN0aW9uKCBfLCBlc2NhcGVkLCBlc2NhcGVkV2hpdGVzcGFjZSApIHtcblx0XHR2YXIgaGlnaCA9IFwiMHhcIiArIGVzY2FwZWQgLSAweDEwMDAwO1xuXHRcdC8vIE5hTiBtZWFucyBub24tY29kZXBvaW50XG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyNFxuXHRcdC8vIFdvcmthcm91bmQgZXJyb25lb3VzIG51bWVyaWMgaW50ZXJwcmV0YXRpb24gb2YgK1wiMHhcIlxuXHRcdHJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID9cblx0XHRcdGVzY2FwZWQgOlxuXHRcdFx0aGlnaCA8IDAgP1xuXHRcdFx0XHQvLyBCTVAgY29kZXBvaW50XG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOlxuXHRcdFx0XHQvLyBTdXBwbGVtZW50YWwgUGxhbmUgY29kZXBvaW50IChzdXJyb2dhdGUgcGFpcilcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7XG5cdH0sXG5cblx0Ly8gVXNlZCBmb3IgaWZyYW1lc1xuXHQvLyBTZWUgc2V0RG9jdW1lbnQoKVxuXHQvLyBSZW1vdmluZyB0aGUgZnVuY3Rpb24gd3JhcHBlciBjYXVzZXMgYSBcIlBlcm1pc3Npb24gRGVuaWVkXCJcblx0Ly8gZXJyb3IgaW4gSUVcblx0dW5sb2FkSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHNldERvY3VtZW50KCk7XG5cdH07XG5cbi8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApXG50cnkge1xuXHRwdXNoLmFwcGx5KFxuXHRcdChhcnIgPSBzbGljZS5jYWxsKCBwcmVmZXJyZWREb2MuY2hpbGROb2RlcyApKSxcblx0XHRwcmVmZXJyZWREb2MuY2hpbGROb2Rlc1xuXHQpO1xuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMFxuXHQvLyBEZXRlY3Qgc2lsZW50bHkgZmFpbGluZyBwdXNoLmFwcGx5XG5cdGFyclsgcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoIF0ubm9kZVR5cGU7XG59IGNhdGNoICggZSApIHtcblx0cHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggP1xuXG5cdFx0Ly8gTGV2ZXJhZ2Ugc2xpY2UgaWYgcG9zc2libGVcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHRwdXNoX25hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKGVscykgKTtcblx0XHR9IDpcblxuXHRcdC8vIFN1cHBvcnQ6IElFPDlcblx0XHQvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5XG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0dmFyIGogPSB0YXJnZXQubGVuZ3RoLFxuXHRcdFx0XHRpID0gMDtcblx0XHRcdC8vIENhbid0IHRydXN0IE5vZGVMaXN0Lmxlbmd0aFxuXHRcdFx0d2hpbGUgKCAodGFyZ2V0W2orK10gPSBlbHNbaSsrXSkgKSB7fVxuXHRcdFx0dGFyZ2V0Lmxlbmd0aCA9IGogLSAxO1xuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gU2l6emxlKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIG1hdGNoLCBlbGVtLCBtLCBub2RlVHlwZSxcblx0XHQvLyBRU0EgdmFyc1xuXHRcdGksIGdyb3Vwcywgb2xkLCBuaWQsIG5ld0NvbnRleHQsIG5ld1NlbGVjdG9yO1xuXG5cdGlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXG5cdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblx0bm9kZVR5cGUgPSBjb250ZXh0Lm5vZGVUeXBlO1xuXG5cdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHtcblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cblx0aWYgKCAhc2VlZCAmJiBkb2N1bWVudElzSFRNTCApIHtcblxuXHRcdC8vIFRyeSB0byBzaG9ydGN1dCBmaW5kIG9wZXJhdGlvbnMgd2hlbiBwb3NzaWJsZSAoZS5nLiwgbm90IHVuZGVyIERvY3VtZW50RnJhZ21lbnQpXG5cdFx0aWYgKCBub2RlVHlwZSAhPT0gMTEgJiYgKG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApKSApIHtcblx0XHRcdC8vIFNwZWVkLXVwOiBTaXp6bGUoXCIjSURcIilcblx0XHRcdGlmICggKG0gPSBtYXRjaFsxXSkgKSB7XG5cdFx0XHRcdGlmICggbm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKTtcblx0XHRcdFx0XHQvLyBDaGVjayBwYXJlbnROb2RlIHRvIGNhdGNoIHdoZW4gQmxhY2tiZXJyeSA0LjYgcmV0dXJuc1xuXHRcdFx0XHRcdC8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgKGpRdWVyeSAjNjk2Mylcblx0XHRcdFx0XHRpZiAoIGVsZW0gJiYgZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIElFLCBPcGVyYSwgYW5kIFdlYmtpdCByZXR1cm4gaXRlbXNcblx0XHRcdFx0XHRcdC8vIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0aWYgKCBlbGVtLmlkID09PSBtICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDb250ZXh0IGlzIG5vdCBhIGRvY3VtZW50XG5cdFx0XHRcdFx0aWYgKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgJiYgKGVsZW0gPSBjb250ZXh0Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgJiZcblx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiYgZWxlbS5pZCA9PT0gbSApIHtcblx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIFNwZWVkLXVwOiBTaXp6bGUoXCJUQUdcIilcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzJdICkge1xuXHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHQvLyBTcGVlZC11cDogU2l6emxlKFwiLkNMQVNTXCIpXG5cdFx0XHR9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFFTQSBwYXRoXG5cdFx0aWYgKCBzdXBwb3J0LnFzYSAmJiAoIXJidWdneVFTQSB8fCAhcmJ1Z2d5UVNBLnRlc3QoIHNlbGVjdG9yICkpICkge1xuXHRcdFx0bmlkID0gb2xkID0gZXhwYW5kbztcblx0XHRcdG5ld0NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0bmV3U2VsZWN0b3IgPSBub2RlVHlwZSAhPT0gMSAmJiBzZWxlY3RvcjtcblxuXHRcdFx0Ly8gcVNBIHdvcmtzIHN0cmFuZ2VseSBvbiBFbGVtZW50LXJvb3RlZCBxdWVyaWVzXG5cdFx0XHQvLyBXZSBjYW4gd29yayBhcm91bmQgdGhpcyBieSBzcGVjaWZ5aW5nIGFuIGV4dHJhIElEIG9uIHRoZSByb290XG5cdFx0XHQvLyBhbmQgd29ya2luZyB1cCBmcm9tIHRoZXJlIChUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhlIHRlY2huaXF1ZSlcblx0XHRcdC8vIElFIDggZG9lc24ndCB3b3JrIG9uIG9iamVjdCBlbGVtZW50c1xuXHRcdFx0aWYgKCBub2RlVHlwZSA9PT0gMSAmJiBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRcdGdyb3VwcyA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXG5cdFx0XHRcdGlmICggKG9sZCA9IGNvbnRleHQuZ2V0QXR0cmlidXRlKFwiaWRcIikpICkge1xuXHRcdFx0XHRcdG5pZCA9IG9sZC5yZXBsYWNlKCByZXNjYXBlLCBcIlxcXFwkJlwiICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29udGV4dC5zZXRBdHRyaWJ1dGUoIFwiaWRcIiwgbmlkICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmlkID0gXCJbaWQ9J1wiICsgbmlkICsgXCInXSBcIjtcblxuXHRcdFx0XHRpID0gZ3JvdXBzLmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0Z3JvdXBzW2ldID0gbmlkICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmV3Q29udGV4dCA9IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHQ7XG5cdFx0XHRcdG5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oXCIsXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG5ld1NlbGVjdG9yICkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsXG5cdFx0XHRcdFx0XHRuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yIClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHR9IGNhdGNoKHFzYUVycm9yKSB7XG5cdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0aWYgKCAhb2xkICkge1xuXHRcdFx0XHRcdFx0Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBBbGwgb3RoZXJzXG5cdHJldHVybiBzZWxlY3QoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApO1xufVxuXG4vKipcbiAqIENyZWF0ZSBrZXktdmFsdWUgY2FjaGVzIG9mIGxpbWl0ZWQgc2l6ZVxuICogQHJldHVybnMge0Z1bmN0aW9uKHN0cmluZywgT2JqZWN0KX0gUmV0dXJucyB0aGUgT2JqZWN0IGRhdGEgYWZ0ZXIgc3RvcmluZyBpdCBvbiBpdHNlbGYgd2l0aFxuICpcdHByb3BlcnR5IG5hbWUgdGhlIChzcGFjZS1zdWZmaXhlZCkgc3RyaW5nIGFuZCAoaWYgdGhlIGNhY2hlIGlzIGxhcmdlciB0aGFuIEV4cHIuY2FjaGVMZW5ndGgpXG4gKlx0ZGVsZXRpbmcgdGhlIG9sZGVzdCBlbnRyeVxuICovXG5mdW5jdGlvbiBjcmVhdGVDYWNoZSgpIHtcblx0dmFyIGtleXMgPSBbXTtcblxuXHRmdW5jdGlvbiBjYWNoZSgga2V5LCB2YWx1ZSApIHtcblx0XHQvLyBVc2UgKGtleSArIFwiIFwiKSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aCBuYXRpdmUgcHJvdG90eXBlIHByb3BlcnRpZXMgKHNlZSBJc3N1ZSAjMTU3KVxuXHRcdGlmICgga2V5cy5wdXNoKCBrZXkgKyBcIiBcIiApID4gRXhwci5jYWNoZUxlbmd0aCApIHtcblx0XHRcdC8vIE9ubHkga2VlcCB0aGUgbW9zdCByZWNlbnQgZW50cmllc1xuXHRcdFx0ZGVsZXRlIGNhY2hlWyBrZXlzLnNoaWZ0KCkgXTtcblx0XHR9XG5cdFx0cmV0dXJuIChjYWNoZVsga2V5ICsgXCIgXCIgXSA9IHZhbHVlKTtcblx0fVxuXHRyZXR1cm4gY2FjaGU7XG59XG5cbi8qKlxuICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtYXJrXG4gKi9cbmZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7XG5cdGZuWyBleHBhbmRvIF0gPSB0cnVlO1xuXHRyZXR1cm4gZm47XG59XG5cbi8qKlxuICogU3VwcG9ydCB0ZXN0aW5nIHVzaW5nIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBkaXYgYW5kIGV4cGVjdHMgYSBib29sZWFuIHJlc3VsdFxuICovXG5mdW5jdGlvbiBhc3NlcnQoIGZuICkge1xuXHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuXHR0cnkge1xuXHRcdHJldHVybiAhIWZuKCBkaXYgKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSBmaW5hbGx5IHtcblx0XHQvLyBSZW1vdmUgZnJvbSBpdHMgcGFyZW50IGJ5IGRlZmF1bHRcblx0XHRpZiAoIGRpdi5wYXJlbnROb2RlICkge1xuXHRcdFx0ZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGRpdiApO1xuXHRcdH1cblx0XHQvLyByZWxlYXNlIG1lbW9yeSBpbiBJRVxuXHRcdGRpdiA9IG51bGw7XG5cdH1cbn1cblxuLyoqXG4gKiBBZGRzIHRoZSBzYW1lIGhhbmRsZXIgZm9yIGFsbCBvZiB0aGUgc3BlY2lmaWVkIGF0dHJzXG4gKiBAcGFyYW0ge1N0cmluZ30gYXR0cnMgUGlwZS1zZXBhcmF0ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBtZXRob2QgdGhhdCB3aWxsIGJlIGFwcGxpZWRcbiAqL1xuZnVuY3Rpb24gYWRkSGFuZGxlKCBhdHRycywgaGFuZGxlciApIHtcblx0dmFyIGFyciA9IGF0dHJzLnNwbGl0KFwifFwiKSxcblx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdEV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyO1xuXHR9XG59XG5cbi8qKlxuICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5nc1xuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYlxuICovXG5mdW5jdGlvbiBzaWJsaW5nQ2hlY2soIGEsIGIgKSB7XG5cdHZhciBjdXIgPSBiICYmIGEsXG5cdFx0ZGlmZiA9IGN1ciAmJiBhLm5vZGVUeXBlID09PSAxICYmIGIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdCggfmIuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICkgLVxuXHRcdFx0KCB+YS5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKTtcblxuXHQvLyBVc2UgSUUgc291cmNlSW5kZXggaWYgYXZhaWxhYmxlIG9uIGJvdGggbm9kZXNcblx0aWYgKCBkaWZmICkge1xuXHRcdHJldHVybiBkaWZmO1xuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgYiBmb2xsb3dzIGFcblx0aWYgKCBjdXIgKSB7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLm5leHRTaWJsaW5nKSApIHtcblx0XHRcdGlmICggY3VyID09PSBiICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGEgPyAxIDogLTE7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBpbnB1dCB0eXBlc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGJ1dHRvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvblBzZXVkbyggdHlwZSApIHtcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiAobmFtZSA9PT0gXCJpbnB1dFwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCIpICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5mdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHtcblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggYXJndW1lbnQgKSB7XG5cdFx0YXJndW1lbnQgPSArYXJndW1lbnQ7XG5cdFx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdHZhciBqLFxuXHRcdFx0XHRtYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLFxuXHRcdFx0XHRpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDtcblxuXHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHtcblx0XHRcdFx0XHRzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHRcbiAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZVxuICovXG5mdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHtcblx0cmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29udGV4dDtcbn1cblxuLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2VcbnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4vKipcbiAqIERldGVjdHMgWE1MIG5vZGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuICovXG5pc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHQvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0XG5cdC8vIChzdWNoIGFzIGxvYWRpbmcgaWZyYW1lcyBpbiBJRSAtICM0ODMzKVxuXHR2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDtcblx0cmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gXCJIVE1MXCIgOiBmYWxzZTtcbn07XG5cbi8qKlxuICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudFxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuICovXG5zZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkge1xuXHR2YXIgaGFzQ29tcGFyZSwgcGFyZW50LFxuXHRcdGRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYztcblxuXHQvLyBJZiBubyBkb2N1bWVudCBhbmQgZG9jdW1lbnRFbGVtZW50IGlzIGF2YWlsYWJsZSwgcmV0dXJuXG5cdGlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50O1xuXHR9XG5cblx0Ly8gU2V0IG91ciBkb2N1bWVudFxuXHRkb2N1bWVudCA9IGRvYztcblx0ZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdHBhcmVudCA9IGRvYy5kZWZhdWx0VmlldztcblxuXHQvLyBTdXBwb3J0OiBJRT44XG5cdC8vIElmIGlmcmFtZSBkb2N1bWVudCBpcyBhc3NpZ25lZCB0byBcImRvY3VtZW50XCIgdmFyaWFibGUgYW5kIGlmIGlmcmFtZSBoYXMgYmVlbiByZWxvYWRlZCxcblx0Ly8gSUUgd2lsbCB0aHJvdyBcInBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBhY2Nlc3NpbmcgXCJkb2N1bWVudFwiIHZhcmlhYmxlLCBzZWUgalF1ZXJ5ICMxMzkzNlxuXHQvLyBJRTYtOCBkbyBub3Qgc3VwcG9ydCB0aGUgZGVmYXVsdFZpZXcgcHJvcGVydHkgc28gcGFyZW50IHdpbGwgYmUgdW5kZWZpbmVkXG5cdGlmICggcGFyZW50ICYmIHBhcmVudCAhPT0gcGFyZW50LnRvcCApIHtcblx0XHQvLyBJRTExIGRvZXMgbm90IGhhdmUgYXR0YWNoRXZlbnQsIHNvIGFsbCBtdXN0IHN1ZmZlclxuXHRcdGlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJ1bmxvYWRcIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UgKTtcblx0XHR9IGVsc2UgaWYgKCBwYXJlbnQuYXR0YWNoRXZlbnQgKSB7XG5cdFx0XHRwYXJlbnQuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgdW5sb2FkSGFuZGxlciApO1xuXHRcdH1cblx0fVxuXG5cdC8qIFN1cHBvcnQgdGVzdHNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jICk7XG5cblx0LyogQXR0cmlidXRlc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gU3VwcG9ydDogSUU8OFxuXHQvLyBWZXJpZnkgdGhhdCBnZXRBdHRyaWJ1dGUgcmVhbGx5IHJldHVybnMgYXR0cmlidXRlcyBhbmQgbm90IHByb3BlcnRpZXNcblx0Ly8gKGV4Y2VwdGluZyBJRTggYm9vbGVhbnMpXG5cdHN1cHBvcnQuYXR0cmlidXRlcyA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRpdi5jbGFzc05hbWUgPSBcImlcIjtcblx0XHRyZXR1cm4gIWRpdi5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIik7XG5cdH0pO1xuXG5cdC8qIGdldEVsZW1lbnQocylCeSpcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSByZXR1cm5zIG9ubHkgZWxlbWVudHNcblx0c3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRpdi5hcHBlbmRDaGlsZCggZG9jLmNyZWF0ZUNvbW1lbnQoXCJcIikgKTtcblx0XHRyZXR1cm4gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBTdXBwb3J0OiBJRTw5XG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKTtcblxuXHQvLyBTdXBwb3J0OiBJRTwxMFxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcblx0Ly8gVGhlIGJyb2tlbiBnZXRFbGVtZW50QnlJZCBtZXRob2RzIGRvbid0IHBpY2sgdXAgcHJvZ3JhbWF0aWNhbGx5LXNldCBuYW1lcyxcblx0Ly8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0XG5cdHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlkID0gZXhwYW5kbztcblx0XHRyZXR1cm4gIWRvYy5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jLmdldEVsZW1lbnRzQnlOYW1lKCBleHBhbmRvICkubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBJRCBmaW5kIGFuZCBmaWx0ZXJcblx0aWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7XG5cdFx0RXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0XHR2YXIgbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7XG5cdFx0XHRcdC8vIENoZWNrIHBhcmVudE5vZGUgdG8gY2F0Y2ggd2hlbiBCbGFja2JlcnJ5IDQuNiByZXR1cm5zXG5cdFx0XHRcdC8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgIzY5NjNcblx0XHRcdFx0cmV0dXJuIG0gJiYgbS5wYXJlbnROb2RlID8gWyBtIF0gOiBbXTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwiaWRcIikgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHQvLyBTdXBwb3J0OiBJRTYvN1xuXHRcdC8vIGdldEVsZW1lbnRCeUlkIGlzIG5vdCByZWxpYWJsZSBhcyBhIGZpbmQgc2hvcnRjdXRcblx0XHRkZWxldGUgRXhwci5maW5kW1wiSURcIl07XG5cblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gIGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7XG5cdFx0XHRcdHJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fVxuXG5cdC8vIFRhZ1xuXHRFeHByLmZpbmRbXCJUQUdcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID9cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBEb2N1bWVudEZyYWdtZW50IG5vZGVzIGRvbid0IGhhdmUgZ0VCVE5cblx0XHRcdH0gZWxzZSBpZiAoIHN1cHBvcnQucXNhICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgKTtcblx0XHRcdH1cblx0XHR9IDpcblxuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0dG1wID0gW10sXG5cdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHQvLyBCeSBoYXBweSBjb2luY2lkZW5jZSwgYSAoYnJva2VuKSBnRUJUTiBhcHBlYXJzIG9uIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgdG9vXG5cdFx0XHRcdHJlc3VsdHMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuXHRcdFx0Ly8gRmlsdGVyIG91dCBwb3NzaWJsZSBjb21tZW50c1xuXHRcdFx0aWYgKCB0YWcgPT09IFwiKlwiICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHR0bXAucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0bXA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHR9O1xuXG5cdC8vIENsYXNzXG5cdEV4cHIuZmluZFtcIkNMQVNTXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7XG5cdFx0aWYgKCBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApO1xuXHRcdH1cblx0fTtcblxuXHQvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0XG5cblx0Ly8gbWF0Y2hlc1NlbGVjdG9yKDphY3RpdmUpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChJRTkvT3BlcmEgMTEuNSlcblx0cmJ1Z2d5TWF0Y2hlcyA9IFtdO1xuXG5cdC8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpXG5cdC8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvclxuXHQvLyB3aGVuZXZlciBgZG9jdW1lbnQuYWN0aXZlRWxlbWVudGAgaXMgYWNjZXNzZWQgb24gYW4gaWZyYW1lXG5cdC8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yXG5cdC8vIFNlZSBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMzM3OFxuXHRyYnVnZ3lRU0EgPSBbXTtcblxuXHRpZiAoIChzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jLnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7XG5cdFx0Ly8gQnVpbGQgUVNBIHJlZ2V4XG5cdFx0Ly8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaVxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU2VsZWN0IGlzIHNldCB0byBlbXB0eSBzdHJpbmcgb24gcHVycG9zZVxuXHRcdFx0Ly8gVGhpcyBpcyB0byB0ZXN0IElFJ3MgdHJlYXRtZW50IG9mIG5vdCBleHBsaWNpdGx5XG5cdFx0XHQvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSxcblx0XHRcdC8vIHNpbmNlIGl0cyBwcmVzZW5jZSBzaG91bGQgYmUgZW5vdWdoXG5cdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OVxuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaW5uZXJIVE1MID0gXCI8YSBpZD0nXCIgKyBleHBhbmRvICsgXCInPjwvYT5cIiArXG5cdFx0XHRcdFwiPHNlbGVjdCBpZD0nXCIgKyBleHBhbmRvICsgXCItXFxmXScgbXNhbGxvd2NhcHR1cmU9Jyc+XCIgK1xuXHRcdFx0XHRcIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTZcblx0XHRcdC8vIE5vdGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkIHdoZW4gZW1wdHkgc3RyaW5ncyBmb2xsb3cgXj0gb3IgJD0gb3IgKj1cblx0XHRcdC8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0IFwic2FmZVwiIGZvciBXaW5SVFxuXHRcdFx0Ly8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb25cblx0XHRcdGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlsqXiRdPVwiICsgd2hpdGVzcGFjZSArIFwiKig/OicnfFxcXCJcXFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGFuZCBcInZhbHVlXCIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseVxuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooPzp2YWx1ZXxcIiArIGJvb2xlYW5zICsgXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lPDI5LCBBbmRyb2lkPDQuMissIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS43K1xuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW2lkfj1cIiArIGV4cGFuZG8gKyBcIi1dXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwifj1cIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdlYmtpdC9PcGVyYSAtIDpjaGVja2VkIHNob3VsZCByZXR1cm4gc2VsZWN0ZWQgb3B0aW9uIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIjpjaGVja2VkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCssIGlPUyA4K1xuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNjg1MVxuXHRcdFx0Ly8gSW4tcGFnZSBgc2VsZWN0b3IjaWQgc2liaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggXCJhI1wiICsgZXhwYW5kbyArIFwiKypcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIuIy4rWyt+XVwiKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU3VwcG9ydDogV2luZG93cyA4IE5hdGl2ZSBBcHBzXG5cdFx0XHQvLyBUaGUgdHlwZSBhbmQgbmFtZSBhdHRyaWJ1dGVzIGFyZSByZXN0cmljdGVkIGR1cmluZyAuaW5uZXJIVE1MIGFzc2lnbm1lbnRcblx0XHRcdHZhciBpbnB1dCA9IGRvYy5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cdFx0XHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcImhpZGRlblwiICk7XG5cdFx0XHRkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJEXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBFbmZvcmNlIGNhc2Utc2Vuc2l0aXZpdHkgb2YgbmFtZSBhdHRyaWJ1dGVcblx0XHRcdGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIm5hbWVcIiArIHdoaXRlc3BhY2UgKyBcIipbKl4kfCF+XT89XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRkYgMy41IC0gOmVuYWJsZWQvOmRpc2FibGVkIGFuZCBoaWRkZW4gZWxlbWVudHMgKGhpZGRlbiBlbGVtZW50cyBhcmUgc3RpbGwgZW5hYmxlZClcblx0XHRcdC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPcGVyYSAxMC0xMSBkb2VzIG5vdCB0aHJvdyBvbiBwb3N0LWNvbW1hIGludmFsaWQgcHNldWRvc1xuXHRcdFx0ZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpO1xuXHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIsLio6XCIpO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKCAoc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgPSBybmF0aXZlLnRlc3QoIChtYXRjaGVzID0gZG9jRWxlbS5tYXRjaGVzIHx8XG5cdFx0ZG9jRWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ub01hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubXNNYXRjaGVzU2VsZWN0b3IpICkpICkge1xuXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3Jcblx0XHRcdC8vIG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgKElFIDkpXG5cdFx0XHRzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBkaXYsIFwiZGl2XCIgKTtcblxuXHRcdFx0Ly8gVGhpcyBzaG91bGQgZmFpbCB3aXRoIGFuIGV4Y2VwdGlvblxuXHRcdFx0Ly8gR2Vja28gZG9lcyBub3QgZXJyb3IsIHJldHVybnMgZmFsc2UgaW5zdGVhZFxuXHRcdFx0bWF0Y2hlcy5jYWxsKCBkaXYsIFwiW3MhPScnXTp4XCIgKTtcblx0XHRcdHJidWdneU1hdGNoZXMucHVzaCggXCIhPVwiLCBwc2V1ZG9zICk7XG5cdFx0fSk7XG5cdH1cblxuXHRyYnVnZ3lRU0EgPSByYnVnZ3lRU0EubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneVFTQS5qb2luKFwifFwiKSApO1xuXHRyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKFwifFwiKSApO1xuXG5cdC8qIENvbnRhaW5zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0aGFzQ29tcGFyZSA9IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiApO1xuXG5cdC8vIEVsZW1lbnQgY29udGFpbnMgYW5vdGhlclxuXHQvLyBQdXJwb3NlZnVsbHkgZG9lcyBub3QgaW1wbGVtZW50IGluY2x1c2l2ZSBkZXNjZW5kZW50XG5cdC8vIEFzIGluLCBhbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmXG5cdGNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHR2YXIgYWRvd24gPSBhLm5vZGVUeXBlID09PSA5ID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLFxuXHRcdFx0XHRidXAgPSBiICYmIGIucGFyZW50Tm9kZTtcblx0XHRcdHJldHVybiBhID09PSBidXAgfHwgISEoIGJ1cCAmJiBidXAubm9kZVR5cGUgPT09IDEgJiYgKFxuXHRcdFx0XHRhZG93bi5jb250YWlucyA/XG5cdFx0XHRcdFx0YWRvd24uY29udGFpbnMoIGJ1cCApIDpcblx0XHRcdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTZcblx0XHRcdCkpO1xuXHRcdH0gOlxuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0aWYgKCBiICkge1xuXHRcdFx0XHR3aGlsZSAoIChiID0gYi5wYXJlbnROb2RlKSApIHtcblx0XHRcdFx0XHRpZiAoIGIgPT09IGEgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdC8qIFNvcnRpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIERvY3VtZW50IG9yZGVyIHNvcnRpbmdcblx0c29ydE9yZGVyID0gaGFzQ29tcGFyZSA/XG5cdGZ1bmN0aW9uKCBhLCBiICkge1xuXG5cdFx0Ly8gRmxhZyBmb3IgZHVwbGljYXRlIHJlbW92YWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBvbiBtZXRob2QgZXhpc3RlbmNlIGlmIG9ubHkgb25lIGlucHV0IGhhcyBjb21wYXJlRG9jdW1lbnRQb3NpdGlvblxuXHRcdHZhciBjb21wYXJlID0gIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gLSAhYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtcblx0XHRpZiAoIGNvbXBhcmUgKSB7XG5cdFx0XHRyZXR1cm4gY29tcGFyZTtcblx0XHR9XG5cblx0XHQvLyBDYWxjdWxhdGUgcG9zaXRpb24gaWYgYm90aCBpbnB1dHMgYmVsb25nIHRvIHRoZSBzYW1lIGRvY3VtZW50XG5cdFx0Y29tcGFyZSA9ICggYS5vd25lckRvY3VtZW50IHx8IGEgKSA9PT0gKCBiLm93bmVyRG9jdW1lbnQgfHwgYiApID9cblx0XHRcdGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGIgKSA6XG5cblx0XHRcdC8vIE90aGVyd2lzZSB3ZSBrbm93IHRoZXkgYXJlIGRpc2Nvbm5lY3RlZFxuXHRcdFx0MTtcblxuXHRcdC8vIERpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdGlmICggY29tcGFyZSAmIDEgfHxcblx0XHRcdCghc3VwcG9ydC5zb3J0RGV0YWNoZWQgJiYgYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYSApID09PSBjb21wYXJlKSApIHtcblxuXHRcdFx0Ly8gQ2hvb3NlIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgaXMgcmVsYXRlZCB0byBvdXIgcHJlZmVycmVkIGRvY3VtZW50XG5cdFx0XHRpZiAoIGEgPT09IGRvYyB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGIgPT09IGRvYyB8fCBiLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGIpICkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFpbnRhaW4gb3JpZ2luYWwgb3JkZXJcblx0XHRcdHJldHVybiBzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvbXBhcmUgJiA0ID8gLTEgOiAxO1xuXHR9IDpcblx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0Ly8gRXhpdCBlYXJseSBpZiB0aGUgbm9kZXMgYXJlIGlkZW50aWNhbFxuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2YXIgY3VyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdXAgPSBhLnBhcmVudE5vZGUsXG5cdFx0XHRidXAgPSBiLnBhcmVudE5vZGUsXG5cdFx0XHRhcCA9IFsgYSBdLFxuXHRcdFx0YnAgPSBbIGIgXTtcblxuXHRcdC8vIFBhcmVudGxlc3Mgbm9kZXMgYXJlIGVpdGhlciBkb2N1bWVudHMgb3IgZGlzY29ubmVjdGVkXG5cdFx0aWYgKCAhYXVwIHx8ICFidXAgKSB7XG5cdFx0XHRyZXR1cm4gYSA9PT0gZG9jID8gLTEgOlxuXHRcdFx0XHRiID09PSBkb2MgPyAxIDpcblx0XHRcdFx0YXVwID8gLTEgOlxuXHRcdFx0XHRidXAgPyAxIDpcblx0XHRcdFx0c29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Ly8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcblx0XHR9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcblx0XHRcdHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuXHRcdGN1ciA9IGE7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YXAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXHRcdGN1ciA9IGI7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YnAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcblx0XHR3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHtcblx0XHRcdGkrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gaSA/XG5cdFx0XHQvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3Jcblx0XHRcdHNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3Rcblx0XHRcdGFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6XG5cdFx0XHRicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6XG5cdFx0XHQwO1xuXHR9O1xuXG5cdHJldHVybiBkb2M7XG59O1xuXG5TaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBlbGVtZW50cyApIHtcblx0cmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTtcbn07XG5cblNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0Ly8gTWFrZSBzdXJlIHRoYXQgYXR0cmlidXRlIHNlbGVjdG9ycyBhcmUgcXVvdGVkXG5cdGV4cHIgPSBleHByLnJlcGxhY2UoIHJhdHRyaWJ1dGVRdW90ZXMsIFwiPSckMSddXCIgKTtcblxuXHRpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG5cdFx0KCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJlxuXHRcdCggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblxuXHRcdHRyeSB7XG5cdFx0XHR2YXIgcmV0ID0gbWF0Y2hlcy5jYWxsKCBlbGVtLCBleHByICk7XG5cblx0XHRcdC8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRcdGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcblx0XHRcdFx0XHQvLyBBcyB3ZWxsLCBkaXNjb25uZWN0ZWQgbm9kZXMgYXJlIHNhaWQgdG8gYmUgaW4gYSBkb2N1bWVudFxuXHRcdFx0XHRcdC8vIGZyYWdtZW50IGluIElFIDlcblx0XHRcdFx0XHRlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHt9XG5cdH1cblxuXHRyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwO1xufTtcblxuU2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXHRyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTtcbn07XG5cblNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdHZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sXG5cdFx0Ly8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKGpRdWVyeSAjMTM4MDcpXG5cdFx0dmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0Zm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDpcblx0XHRcdHVuZGVmaW5lZDtcblxuXHRyZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgP1xuXHRcdHZhbCA6XG5cdFx0c3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApIDpcblx0XHRcdCh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xufTtcblxuU2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHtcblx0dGhyb3cgbmV3IEVycm9yKCBcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiICsgbXNnICk7XG59O1xuXG4vKipcbiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXNcbiAqIEBwYXJhbSB7QXJyYXlMaWtlfSByZXN1bHRzXG4gKi9cblNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7XG5cdHZhciBlbGVtLFxuXHRcdGR1cGxpY2F0ZXMgPSBbXSxcblx0XHRqID0gMCxcblx0XHRpID0gMDtcblxuXHQvLyBVbmxlc3Mgd2UgKmtub3cqIHdlIGNhbiBkZXRlY3QgZHVwbGljYXRlcywgYXNzdW1lIHRoZWlyIHByZXNlbmNlXG5cdGhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7XG5cdHNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApO1xuXHRyZXN1bHRzLnNvcnQoIHNvcnRPcmRlciApO1xuXG5cdGlmICggaGFzRHVwbGljYXRlICkge1xuXHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0aWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7XG5cdFx0XHRcdGogPSBkdXBsaWNhdGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRyZXN1bHRzLnNwbGljZSggZHVwbGljYXRlc1sgaiBdLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHNcblx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvc2l6emxlL3B1bGwvMjI1XG5cdHNvcnRJbnB1dCA9IG51bGw7XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG4gKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW1cbiAqL1xuZ2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHZhciBub2RlLFxuXHRcdHJldCA9IFwiXCIsXG5cdFx0aSA9IDAsXG5cdFx0bm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdGlmICggIW5vZGVUeXBlICkge1xuXHRcdC8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5XG5cdFx0d2hpbGUgKCAobm9kZSA9IGVsZW1baSsrXSkgKSB7XG5cdFx0XHQvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2Rlc1xuXHRcdFx0cmV0ICs9IGdldFRleHQoIG5vZGUgKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHtcblx0XHQvLyBVc2UgdGV4dENvbnRlbnQgZm9yIGVsZW1lbnRzXG5cdFx0Ly8gaW5uZXJUZXh0IHVzYWdlIHJlbW92ZWQgZm9yIGNvbnNpc3RlbmN5IG9mIG5ldyBsaW5lcyAoalF1ZXJ5ICMxMTE1Mylcblx0XHRpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFRyYXZlcnNlIGl0cyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdHJldCArPSBnZXRUZXh0KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMyB8fCBub2RlVHlwZSA9PT0gNCApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVmFsdWU7XG5cdH1cblx0Ly8gRG8gbm90IGluY2x1ZGUgY29tbWVudCBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGVzXG5cblx0cmV0dXJuIHJldDtcbn07XG5cbkV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0ge1xuXG5cdC8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlclxuXHRjYWNoZUxlbmd0aDogNTAsXG5cblx0Y3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sXG5cblx0bWF0Y2g6IG1hdGNoRXhwcixcblxuXHRhdHRySGFuZGxlOiB7fSxcblxuXHRmaW5kOiB7fSxcblxuXHRyZWxhdGl2ZToge1xuXHRcdFwiPlwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XCIgXCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiB9LFxuXHRcdFwiK1wiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIn5cIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIgfVxuXHR9LFxuXG5cdHByZUZpbHRlcjoge1xuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdC8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkXG5cdFx0XHRtYXRjaFszXSA9ICggbWF0Y2hbM10gfHwgbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdGlmICggbWF0Y2hbMl0gPT09IFwifj1cIiApIHtcblx0XHRcdFx0bWF0Y2hbM10gPSBcIiBcIiArIG1hdGNoWzNdICsgXCIgXCI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgNCApO1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdC8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbXCJDSElMRFwiXVxuXHRcdFx0XHQxIHR5cGUgKG9ubHl8bnRofC4uLilcblx0XHRcdFx0MiB3aGF0IChjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHQzIGFyZ3VtZW50IChldmVufG9kZHxcXGQqfFxcZCpuKFsrLV1cXGQrKT98Li4uKVxuXHRcdFx0XHQ0IHhuLWNvbXBvbmVudCBvZiB4bit5IGFyZ3VtZW50IChbKy1dP1xcZCpufClcblx0XHRcdFx0NSBzaWduIG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHQ2IHggb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDcgc2lnbiBvZiB5LWNvbXBvbmVudFxuXHRcdFx0XHQ4IHkgb2YgeS1jb21wb25lbnRcblx0XHRcdCovXG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdGlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gXCJudGhcIiApIHtcblx0XHRcdFx0Ly8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnRcblx0XHRcdFx0aWYgKCAhbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gbnVtZXJpYyB4IGFuZCB5IHBhcmFtZXRlcnMgZm9yIEV4cHIuZmlsdGVyLkNISUxEXG5cdFx0XHRcdC8vIHJlbWVtYmVyIHRoYXQgZmFsc2UvdHJ1ZSBjYXN0IHJlc3BlY3RpdmVseSB0byAwLzFcblx0XHRcdFx0bWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09IFwiZXZlblwiIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICkgKTtcblx0XHRcdFx0bWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApO1xuXG5cdFx0XHQvLyBvdGhlciB0eXBlcyBwcm9oaWJpdCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaDtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0dmFyIGV4Y2Vzcyxcblx0XHRcdFx0dW5xdW90ZWQgPSAhbWF0Y2hbNl0gJiYgbWF0Y2hbMl07XG5cblx0XHRcdGlmICggbWF0Y2hFeHByW1wiQ0hJTERcIl0udGVzdCggbWF0Y2hbMF0gKSApIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzXG5cdFx0XHRpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRtYXRjaFsyXSA9IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IFwiXCI7XG5cblx0XHRcdC8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzXG5cdFx0XHR9IGVsc2UgaWYgKCB1bnF1b3RlZCAmJiBycHNldWRvLnRlc3QoIHVucXVvdGVkICkgJiZcblx0XHRcdFx0Ly8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSlcblx0XHRcdFx0KGV4Y2VzcyA9IHRva2VuaXplKCB1bnF1b3RlZCwgdHJ1ZSApKSAmJlxuXHRcdFx0XHQvLyBhZHZhbmNlIHRvIHRoZSBuZXh0IGNsb3NpbmcgcGFyZW50aGVzaXNcblx0XHRcdFx0KGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoIFwiKVwiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7XG5cblx0XHRcdFx0Ly8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXhcblx0XHRcdFx0bWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHRcdG1hdGNoWzJdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudClcblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgMyApO1xuXHRcdH1cblx0fSxcblxuXHRmaWx0ZXI6IHtcblxuXHRcdFwiVEFHXCI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkge1xuXHRcdFx0dmFyIG5vZGVOYW1lID0gbm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gXCIqXCIgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lO1xuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNMQVNTXCI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7XG5cdFx0XHR2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArIFwiIFwiIF07XG5cblx0XHRcdHJldHVybiBwYXR0ZXJuIHx8XG5cdFx0XHRcdChwYXR0ZXJuID0gbmV3IFJlZ0V4cCggXCIoXnxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIGNsYXNzTmFtZSArIFwiKFwiICsgd2hpdGVzcGFjZSArIFwifCQpXCIgKSkgJiZcblx0XHRcdFx0Y2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09IFwic3RyaW5nXCIgJiYgZWxlbS5jbGFzc05hbWUgfHwgdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIiApO1xuXHRcdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHRcdGlmICggcmVzdWx0ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIiE9XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAhb3BlcmF0b3IgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXN1bHQgKz0gXCJcIjtcblxuXHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiPVwiID8gcmVzdWx0ID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiIT1cIiA/IHJlc3VsdCAhPT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIl49XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA9PT0gMCA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiKj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiQ9XCIgPyBjaGVjayAmJiByZXN1bHQuc2xpY2UoIC1jaGVjay5sZW5ndGggKSA9PT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIn49XCIgPyAoIFwiIFwiICsgcmVzdWx0LnJlcGxhY2UoIHJ3aGl0ZXNwYWNlLCBcIiBcIiApICsgXCIgXCIgKS5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcInw9XCIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArIFwiLVwiIDpcblx0XHRcdFx0XHRmYWxzZTtcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIHR5cGUsIHdoYXQsIGFyZ3VtZW50LCBmaXJzdCwgbGFzdCApIHtcblx0XHRcdHZhciBzaW1wbGUgPSB0eXBlLnNsaWNlKCAwLCAzICkgIT09IFwibnRoXCIsXG5cdFx0XHRcdGZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSBcImxhc3RcIixcblx0XHRcdFx0b2ZUeXBlID0gd2hhdCA9PT0gXCJvZi10eXBlXCI7XG5cblx0XHRcdHJldHVybiBmaXJzdCA9PT0gMSAmJiBsYXN0ID09PSAwID9cblxuXHRcdFx0XHQvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pXG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiAhIWVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0fSA6XG5cblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgY2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIGRpZmYsIG5vZGVJbmRleCwgc3RhcnQsXG5cdFx0XHRcdFx0XHRkaXIgPSBzaW1wbGUgIT09IGZvcndhcmQgPyBcIm5leHRTaWJsaW5nXCIgOiBcInByZXZpb3VzU2libGluZ1wiLFxuXHRcdFx0XHRcdFx0cGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLFxuXHRcdFx0XHRcdFx0bmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHR1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZTtcblxuXHRcdFx0XHRcdGlmICggcGFyZW50ICkge1xuXG5cdFx0XHRcdFx0XHQvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdFx0XHRpZiAoIHNpbXBsZSApIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCBkaXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggb2ZUeXBlID8gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDogbm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbylcblx0XHRcdFx0XHRcdFx0XHRzdGFydCA9IGRpciA9IHR5cGUgPT09IFwib25seVwiICYmICFzdGFydCAmJiBcIm5leHRTaWJsaW5nXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07XG5cblx0XHRcdFx0XHRcdC8vIG5vbi14bWwgOm50aC1jaGlsZCguLi4pIHN0b3JlcyBjYWNoZSBkYXRhIG9uIGBwYXJlbnRgXG5cdFx0XHRcdFx0XHRpZiAoIGZvcndhcmQgJiYgdXNlQ2FjaGUgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNlZWsgYGVsZW1gIGZyb20gYSBwcmV2aW91c2x5LWNhY2hlZCBpbmRleFxuXHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gcGFyZW50WyBleHBhbmRvIF0gfHwgKHBhcmVudFsgZXhwYW5kbyBdID0ge30pO1xuXHRcdFx0XHRcdFx0XHRjYWNoZSA9IG91dGVyQ2FjaGVbIHR5cGUgXSB8fCBbXTtcblx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbMF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbMV07XG5cdFx0XHRcdFx0XHRcdGRpZmYgPSBjYWNoZVswXSA9PT0gZGlycnVucyAmJiBjYWNoZVsyXTtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIHNlZWtpbmcgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVha1xuXHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgbm9kZUluZGV4LCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gVXNlIHByZXZpb3VzbHktY2FjaGVkIGVsZW1lbnQgaW5kZXggaWYgYXZhaWxhYmxlXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB1c2VDYWNoZSAmJiAoY2FjaGUgPSAoZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSkpWyB0eXBlIF0pICYmIGNhY2hlWzBdID09PSBkaXJydW5zICkge1xuXHRcdFx0XHRcdFx0XHRkaWZmID0gY2FjaGVbMV07XG5cblx0XHRcdFx0XHRcdC8vIHhtbCA6bnRoLWNoaWxkKC4uLikgb3IgOm50aC1sYXN0LWNoaWxkKC4uLikgb3IgOm50aCgtbGFzdCk/LW9mLXR5cGUoLi4uKVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBzYW1lIGxvb3AgYXMgYWJvdmUgdG8gc2VlayBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggKCBvZlR5cGUgPyBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOiBub2RlLm5vZGVUeXBlID09PSAxICkgJiYgKytkaWZmICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0KG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pKVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEluY29ycG9yYXRlIHRoZSBvZmZzZXQsIHRoZW4gY2hlY2sgYWdhaW5zdCBjeWNsZSBzaXplXG5cdFx0XHRcdFx0XHRkaWZmIC09IGxhc3Q7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGlmZiA9PT0gZmlyc3QgfHwgKCBkaWZmICUgZmlyc3QgPT09IDAgJiYgZGlmZiAvIGZpcnN0ID49IDAgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkge1xuXHRcdFx0Ly8gcHNldWRvLWNsYXNzIG5hbWVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI3BzZXVkby1jbGFzc2VzXG5cdFx0XHQvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVyc1xuXHRcdFx0Ly8gUmVtZW1iZXIgdGhhdCBzZXRGaWx0ZXJzIGluaGVyaXRzIGZyb20gcHNldWRvc1xuXHRcdFx0dmFyIGFyZ3MsXG5cdFx0XHRcdGZuID0gRXhwci5wc2V1ZG9zWyBwc2V1ZG8gXSB8fCBFeHByLnNldEZpbHRlcnNbIHBzZXVkby50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIiArIHBzZXVkbyApO1xuXG5cdFx0XHQvLyBUaGUgdXNlciBtYXkgdXNlIGNyZWF0ZVBzZXVkbyB0byBpbmRpY2F0ZSB0aGF0XG5cdFx0XHQvLyBhcmd1bWVudHMgYXJlIG5lZWRlZCB0byBjcmVhdGUgdGhlIGZpbHRlciBmdW5jdGlvblxuXHRcdFx0Ly8ganVzdCBhcyBTaXp6bGUgZG9lc1xuXHRcdFx0aWYgKCBmblsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRyZXR1cm4gZm4oIGFyZ3VtZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEJ1dCBtYWludGFpbiBzdXBwb3J0IGZvciBvbGQgc2lnbmF0dXJlc1xuXHRcdFx0aWYgKCBmbi5sZW5ndGggPiAxICkge1xuXHRcdFx0XHRhcmdzID0gWyBwc2V1ZG8sIHBzZXVkbywgXCJcIiwgYXJndW1lbnQgXTtcblx0XHRcdFx0cmV0dXJuIEV4cHIuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eSggcHNldWRvLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0XHRcdFx0dmFyIGlkeCxcblx0XHRcdFx0XHRcdFx0bWF0Y2hlZCA9IGZuKCBzZWVkLCBhcmd1bWVudCApLFxuXHRcdFx0XHRcdFx0XHRpID0gbWF0Y2hlZC5sZW5ndGg7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWR4ID0gaW5kZXhPZiggc2VlZCwgbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0XHRzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pIDpcblx0XHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBmbiggZWxlbSwgMCwgYXJncyApO1xuXHRcdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmbjtcblx0XHR9XG5cdH0sXG5cblx0cHNldWRvczoge1xuXHRcdC8vIFBvdGVudGlhbGx5IGNvbXBsZXggcHNldWRvc1xuXHRcdFwibm90XCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHQvLyBUcmltIHRoZSBzZWxlY3RvciBwYXNzZWQgdG8gY29tcGlsZVxuXHRcdFx0Ly8gdG8gYXZvaWQgdHJlYXRpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmdcblx0XHRcdC8vIHNwYWNlcyBhcyBjb21iaW5hdG9yc1xuXHRcdFx0dmFyIGlucHV0ID0gW10sXG5cdFx0XHRcdHJlc3VsdHMgPSBbXSxcblx0XHRcdFx0bWF0Y2hlciA9IGNvbXBpbGUoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSApO1xuXG5cdFx0XHRyZXR1cm4gbWF0Y2hlclsgZXhwYW5kbyBdID9cblx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdFx0XHR1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksXG5cdFx0XHRcdFx0XHRpID0gc2VlZC5sZW5ndGg7XG5cblx0XHRcdFx0XHQvLyBNYXRjaCBlbGVtZW50cyB1bm1hdGNoZWQgYnkgYG1hdGNoZXJgXG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0c2VlZFtpXSA9ICEobWF0Y2hlc1tpXSA9IGVsZW0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkgOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdGlucHV0WzBdID0gZWxlbTtcblx0XHRcdFx0XHRtYXRjaGVyKCBpbnB1dCwgbnVsbCwgeG1sLCByZXN1bHRzICk7XG5cdFx0XHRcdFx0Ly8gRG9uJ3Qga2VlcCB0aGUgZWxlbWVudCAoaXNzdWUgIzI5OSlcblx0XHRcdFx0XHRpbnB1dFswXSA9IG51bGw7XG5cdFx0XHRcdFx0cmV0dXJuICFyZXN1bHRzLnBvcCgpO1xuXHRcdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0XCJoYXNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdFwiY29udGFpbnNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbS50ZXh0Q29udGVudCB8fCBlbGVtLmlubmVyVGV4dCB8fCBnZXRUZXh0KCBlbGVtICkgKS5pbmRleE9mKCB0ZXh0ICkgPiAtMTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBcIldoZXRoZXIgYW4gZWxlbWVudCBpcyByZXByZXNlbnRlZCBieSBhIDpsYW5nKCkgc2VsZWN0b3Jcblx0XHQvLyBpcyBiYXNlZCBzb2xlbHkgb24gdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZVxuXHRcdC8vIGJlaW5nIGVxdWFsIHRvIHRoZSBpZGVudGlmaWVyIEMsXG5cdFx0Ly8gb3IgYmVnaW5uaW5nIHdpdGggdGhlIGlkZW50aWZpZXIgQyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBcIi1cIi5cblx0XHQvLyBUaGUgbWF0Y2hpbmcgb2YgQyBhZ2FpbnN0IHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWUgaXMgcGVyZm9ybWVkIGNhc2UtaW5zZW5zaXRpdmVseS5cblx0XHQvLyBUaGUgaWRlbnRpZmllciBDIGRvZXMgbm90IGhhdmUgdG8gYmUgYSB2YWxpZCBsYW5ndWFnZSBuYW1lLlwiXG5cdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNsYW5nLXBzZXVkb1xuXHRcdFwibGFuZ1wiOiBtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBsYW5nICkge1xuXHRcdFx0Ly8gbGFuZyB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllclxuXHRcdFx0aWYgKCAhcmlkZW50aWZpZXIudGVzdChsYW5nIHx8IFwiXCIpICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgbGFuZzogXCIgKyBsYW5nICk7XG5cdFx0XHR9XG5cdFx0XHRsYW5nID0gbGFuZy5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBlbGVtTGFuZztcblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdGlmICggKGVsZW1MYW5nID0gZG9jdW1lbnRJc0hUTUwgP1xuXHRcdFx0XHRcdFx0ZWxlbS5sYW5nIDpcblx0XHRcdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIikgfHwgZWxlbS5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKSApIHtcblxuXHRcdFx0XHRcdFx0ZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW1MYW5nID09PSBsYW5nIHx8IGVsZW1MYW5nLmluZGV4T2YoIGxhbmcgKyBcIi1cIiApID09PSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB3aGlsZSAoIChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBNaXNjZWxsYW5lb3VzXG5cdFx0XCJ0YXJnZXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaGFzaDtcblx0XHRcdHJldHVybiBoYXNoICYmIGhhc2guc2xpY2UoIDEgKSA9PT0gZWxlbS5pZDtcblx0XHR9LFxuXG5cdFx0XCJyb290XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY0VsZW07XG5cdFx0fSxcblxuXHRcdFwiZm9jdXNcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoIWRvY3VtZW50Lmhhc0ZvY3VzIHx8IGRvY3VtZW50Lmhhc0ZvY3VzKCkpICYmICEhKGVsZW0udHlwZSB8fCBlbGVtLmhyZWYgfHwgfmVsZW0udGFiSW5kZXgpO1xuXHRcdH0sXG5cblx0XHQvLyBCb29sZWFuIHByb3BlcnRpZXNcblx0XHRcImVuYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZmFsc2U7XG5cdFx0fSxcblxuXHRcdFwiZGlzYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJjaGVja2VkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gSW4gQ1NTMywgOmNoZWNrZWQgc2hvdWxkIHJldHVybiBib3RoIGNoZWNrZWQgYW5kIHNlbGVjdGVkIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0dmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIChub2RlTmFtZSA9PT0gXCJpbnB1dFwiICYmICEhZWxlbS5jaGVja2VkKSB8fCAobm9kZU5hbWUgPT09IFwib3B0aW9uXCIgJiYgISFlbGVtLnNlbGVjdGVkKTtcblx0XHR9LFxuXG5cdFx0XCJzZWxlY3RlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIEFjY2Vzc2luZyB0aGlzIHByb3BlcnR5IG1ha2VzIHNlbGVjdGVkLWJ5LWRlZmF1bHRcblx0XHRcdC8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHlcblx0XHRcdGlmICggZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRlbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGVsZW0uc2VsZWN0ZWQgPT09IHRydWU7XG5cdFx0fSxcblxuXHRcdC8vIENvbnRlbnRzXG5cdFx0XCJlbXB0eVwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jZW1wdHktcHNldWRvXG5cdFx0XHQvLyA6ZW1wdHkgaXMgbmVnYXRlZCBieSBlbGVtZW50ICgxKSBvciBjb250ZW50IG5vZGVzICh0ZXh0OiAzOyBjZGF0YTogNDsgZW50aXR5IHJlZjogNSksXG5cdFx0XHQvLyAgIGJ1dCBub3QgYnkgb3RoZXJzIChjb21tZW50OiA4OyBwcm9jZXNzaW5nIGluc3RydWN0aW9uOiA3OyBldGMuKVxuXHRcdFx0Ly8gbm9kZVR5cGUgPCA2IHdvcmtzIGJlY2F1c2UgYXR0cmlidXRlcyAoMikgZG8gbm90IGFwcGVhciBhcyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA8IDYgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJwYXJlbnRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gIUV4cHIucHNldWRvc1tcImVtcHR5XCJdKCBlbGVtICk7XG5cdFx0fSxcblxuXHRcdC8vIEVsZW1lbnQvaW5wdXQgdHlwZXNcblx0XHRcImhlYWRlclwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaGVhZGVyLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJpbnB1dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaW5wdXRzLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJidXR0b25cIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBuYW1lID09PSBcImlucHV0XCIgJiYgZWxlbS50eXBlID09PSBcImJ1dHRvblwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCI7XG5cdFx0fSxcblxuXHRcdFwidGV4dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBhdHRyO1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICYmXG5cdFx0XHRcdGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCIgJiZcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTw4XG5cdFx0XHRcdC8vIE5ldyBIVE1MNSBhdHRyaWJ1dGUgdmFsdWVzIChlLmcuLCBcInNlYXJjaFwiKSBhcHBlYXIgd2l0aCBlbGVtLnR5cGUgPT09IFwidGV4dFwiXG5cdFx0XHRcdCggKGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZShcInR5cGVcIikpID09IG51bGwgfHwgYXR0ci50b0xvd2VyQ2FzZSgpID09PSBcInRleHRcIiApO1xuXHRcdH0sXG5cblx0XHQvLyBQb3NpdGlvbi1pbi1jb2xsZWN0aW9uXG5cdFx0XCJmaXJzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIFsgMCBdO1xuXHRcdH0pLFxuXG5cdFx0XCJsYXN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIFsgbGVuZ3RoIC0gMSBdO1xuXHRcdH0pLFxuXG5cdFx0XCJlcVwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHRyZXR1cm4gWyBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50IF07XG5cdFx0fSksXG5cblx0XHRcImV2ZW5cIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcIm9kZFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHZhciBpID0gMTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwibHRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyAtLWkgPj0gMDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJndFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7ICsraSA8IGxlbmd0aDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pXG5cdH1cbn07XG5cbkV4cHIucHNldWRvc1tcIm50aFwiXSA9IEV4cHIucHNldWRvc1tcImVxXCJdO1xuXG4vLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvc1xuZm9yICggaSBpbiB7IHJhZGlvOiB0cnVlLCBjaGVja2JveDogdHJ1ZSwgZmlsZTogdHJ1ZSwgcGFzc3dvcmQ6IHRydWUsIGltYWdlOiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlSW5wdXRQc2V1ZG8oIGkgKTtcbn1cbmZvciAoIGkgaW4geyBzdWJtaXQ6IHRydWUsIHJlc2V0OiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlQnV0dG9uUHNldWRvKCBpICk7XG59XG5cbi8vIEVhc3kgQVBJIGZvciBjcmVhdGluZyBuZXcgc2V0RmlsdGVyc1xuZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9XG5zZXRGaWx0ZXJzLnByb3RvdHlwZSA9IEV4cHIuZmlsdGVycyA9IEV4cHIucHNldWRvcztcbkV4cHIuc2V0RmlsdGVycyA9IG5ldyBzZXRGaWx0ZXJzKCk7XG5cbnRva2VuaXplID0gU2l6emxlLnRva2VuaXplID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBwYXJzZU9ubHkgKSB7XG5cdHZhciBtYXRjaGVkLCBtYXRjaCwgdG9rZW5zLCB0eXBlLFxuXHRcdHNvRmFyLCBncm91cHMsIHByZUZpbHRlcnMsXG5cdFx0Y2FjaGVkID0gdG9rZW5DYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggY2FjaGVkICkge1xuXHRcdHJldHVybiBwYXJzZU9ubHkgPyAwIDogY2FjaGVkLnNsaWNlKCAwICk7XG5cdH1cblxuXHRzb0ZhciA9IHNlbGVjdG9yO1xuXHRncm91cHMgPSBbXTtcblx0cHJlRmlsdGVycyA9IEV4cHIucHJlRmlsdGVyO1xuXG5cdHdoaWxlICggc29GYXIgKSB7XG5cblx0XHQvLyBDb21tYSBhbmQgZmlyc3QgcnVuXG5cdFx0aWYgKCAhbWF0Y2hlZCB8fCAobWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSkgKSB7XG5cdFx0XHRpZiAoIG1hdGNoICkge1xuXHRcdFx0XHQvLyBEb24ndCBjb25zdW1lIHRyYWlsaW5nIGNvbW1hcyBhcyB2YWxpZFxuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaFswXS5sZW5ndGggKSB8fCBzb0Zhcjtcblx0XHRcdH1cblx0XHRcdGdyb3Vwcy5wdXNoKCAodG9rZW5zID0gW10pICk7XG5cdFx0fVxuXG5cdFx0bWF0Y2hlZCA9IGZhbHNlO1xuXG5cdFx0Ly8gQ29tYmluYXRvcnNcblx0XHRpZiAoIChtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApKSApIHtcblx0XHRcdG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuXHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0Ly8gQ2FzdCBkZXNjZW5kYW50IGNvbWJpbmF0b3JzIHRvIHNwYWNlXG5cdFx0XHRcdHR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCBcIiBcIiApXG5cdFx0XHR9KTtcblx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0Ly8gRmlsdGVyc1xuXHRcdGZvciAoIHR5cGUgaW4gRXhwci5maWx0ZXIgKSB7XG5cdFx0XHRpZiAoIChtYXRjaCA9IG1hdGNoRXhwclsgdHlwZSBdLmV4ZWMoIHNvRmFyICkpICYmICghcHJlRmlsdGVyc1sgdHlwZSBdIHx8XG5cdFx0XHRcdChtYXRjaCA9IHByZUZpbHRlcnNbIHR5cGUgXSggbWF0Y2ggKSkpICkge1xuXHRcdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0bWF0Y2hlczogbWF0Y2hcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCAhbWF0Y2hlZCApIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2Vzc1xuXHQvLyBpZiB3ZSdyZSBqdXN0IHBhcnNpbmdcblx0Ly8gT3RoZXJ3aXNlLCB0aHJvdyBhbiBlcnJvciBvciByZXR1cm4gdG9rZW5zXG5cdHJldHVybiBwYXJzZU9ubHkgP1xuXHRcdHNvRmFyLmxlbmd0aCA6XG5cdFx0c29GYXIgP1xuXHRcdFx0U2l6emxlLmVycm9yKCBzZWxlY3RvciApIDpcblx0XHRcdC8vIENhY2hlIHRoZSB0b2tlbnNcblx0XHRcdHRva2VuQ2FjaGUoIHNlbGVjdG9yLCBncm91cHMgKS5zbGljZSggMCApO1xufTtcblxuZnVuY3Rpb24gdG9TZWxlY3RvciggdG9rZW5zICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRzZWxlY3RvciA9IFwiXCI7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdHNlbGVjdG9yICs9IHRva2Vuc1tpXS52YWx1ZTtcblx0fVxuXHRyZXR1cm4gc2VsZWN0b3I7XG59XG5cbmZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7XG5cdHZhciBkaXIgPSBjb21iaW5hdG9yLmRpcixcblx0XHRjaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBkaXIgPT09IFwicGFyZW50Tm9kZVwiLFxuXHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXG5cdHJldHVybiBjb21iaW5hdG9yLmZpcnN0ID9cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSA6XG5cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIG9sZENhY2hlLCBvdXRlckNhY2hlLFxuXHRcdFx0XHRuZXdDYWNoZSA9IFsgZGlycnVucywgZG9uZU5hbWUgXTtcblxuXHRcdFx0Ly8gV2UgY2FuJ3Qgc2V0IGFyYml0cmFyeSBkYXRhIG9uIFhNTCBub2Rlcywgc28gdGhleSBkb24ndCBiZW5lZml0IGZyb20gZGlyIGNhY2hpbmdcblx0XHRcdGlmICggeG1sICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pO1xuXHRcdFx0XHRcdFx0aWYgKCAob2xkQ2FjaGUgPSBvdXRlckNhY2hlWyBkaXIgXSkgJiZcblx0XHRcdFx0XHRcdFx0b2xkQ2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBvbGRDYWNoZVsgMSBdID09PSBkb25lTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBBc3NpZ24gdG8gbmV3Q2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKG5ld0NhY2hlWyAyIF0gPSBvbGRDYWNoZVsgMiBdKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFJldXNlIG5ld2NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZVsgZGlyIF0gPSBuZXdDYWNoZTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBIG1hdGNoIG1lYW5zIHdlJ3JlIGRvbmU7IGEgZmFpbCBtZWFucyB3ZSBoYXZlIHRvIGtlZXAgY2hlY2tpbmdcblx0XHRcdFx0XHRcdFx0aWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHtcblx0cmV0dXJuIG1hdGNoZXJzLmxlbmd0aCA+IDEgP1xuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoICFtYXRjaGVyc1tpXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IDpcblx0XHRtYXRjaGVyc1swXTtcbn1cblxuZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0c1tpXSwgcmVzdWx0cyApO1xuXHR9XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkge1xuXHR2YXIgZWxlbSxcblx0XHRuZXdVbm1hdGNoZWQgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsZW4gPSB1bm1hdGNoZWQubGVuZ3RoLFxuXHRcdG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0aWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdG5ld1VubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdGlmICggbWFwcGVkICkge1xuXHRcdFx0XHRcdG1hcC5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbmV3VW5tYXRjaGVkO1xufVxuXG5mdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7XG5cdGlmICggcG9zdEZpbHRlciAmJiAhcG9zdEZpbHRlclsgZXhwYW5kbyBdICkge1xuXHRcdHBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7XG5cdH1cblx0aWYgKCBwb3N0RmluZGVyICYmICFwb3N0RmluZGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbmRlciA9IHNldE1hdGNoZXIoIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApO1xuXHR9XG5cdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHtcblx0XHR2YXIgdGVtcCwgaSwgZWxlbSxcblx0XHRcdHByZU1hcCA9IFtdLFxuXHRcdFx0cG9zdE1hcCA9IFtdLFxuXHRcdFx0cHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHRcblx0XHRcdGVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCBcIipcIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSxcblxuXHRcdFx0Ly8gUHJlZmlsdGVyIHRvIGdldCBtYXRjaGVyIGlucHV0LCBwcmVzZXJ2aW5nIGEgbWFwIGZvciBzZWVkLXJlc3VsdHMgc3luY2hyb25pemF0aW9uXG5cdFx0XHRtYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID9cblx0XHRcdFx0Y29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRlbGVtcyxcblxuXHRcdFx0bWF0Y2hlck91dCA9IG1hdGNoZXIgP1xuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLFxuXHRcdFx0XHRwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/XG5cblx0XHRcdFx0XHQvLyAuLi5pbnRlcm1lZGlhdGUgcHJvY2Vzc2luZyBpcyBuZWNlc3Nhcnlcblx0XHRcdFx0XHRbXSA6XG5cblx0XHRcdFx0XHQvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHlcblx0XHRcdFx0XHRyZXN1bHRzIDpcblx0XHRcdFx0bWF0Y2hlckluO1xuXG5cdFx0Ly8gRmluZCBwcmltYXJ5IG1hdGNoZXNcblx0XHRpZiAoIG1hdGNoZXIgKSB7XG5cdFx0XHRtYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHBvc3RGaWx0ZXJcblx0XHRpZiAoIHBvc3RGaWx0ZXIgKSB7XG5cdFx0XHR0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcblx0XHRcdHBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTtcblxuXHRcdFx0Ly8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJblxuXHRcdFx0aSA9IHRlbXAubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkge1xuXHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG5cdFx0XHRcdFx0dGVtcCA9IFtdO1xuXHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcblx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWRcblx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgJiZcblx0XHRcdFx0XHRcdCh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHtcblxuXHRcdFx0XHRcdFx0c2VlZFt0ZW1wXSA9ICEocmVzdWx0c1t0ZW1wXSA9IGVsZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkXG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXJPdXQgPSBjb25kZW5zZShcblx0XHRcdFx0bWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/XG5cdFx0XHRcdFx0bWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDpcblx0XHRcdFx0XHRtYXRjaGVyT3V0XG5cdFx0XHQpO1xuXHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCByZXN1bHRzLCBtYXRjaGVyT3V0LCB4bWwgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkge1xuXHR2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0bGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSxcblx0XHRpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbXCIgXCJdLFxuXHRcdGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblxuXHRcdC8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpXG5cdFx0bWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0O1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuXHRcdFx0XHQoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgP1xuXHRcdFx0XHRcdG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcblx0XHRcdC8vIEF2b2lkIGhhbmdpbmcgb250byBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0Y2hlY2tDb250ZXh0ID0gbnVsbDtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSBdO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHtcblx0XHRcdG1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7XG5cblx0XHRcdC8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyXG5cdFx0XHRpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0Ly8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nXG5cdFx0XHRcdGogPSArK2k7XG5cdFx0XHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2V0TWF0Y2hlcihcblx0XHRcdFx0XHRpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSxcblx0XHRcdFx0XHRpID4gMSAmJiB0b1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmBcblx0XHRcdFx0XHRcdHRva2Vucy5zbGljZSggMCwgaSAtIDEgKS5jb25jYXQoeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09IFwiIFwiID8gXCIqXCIgOiBcIlwiIH0pXG5cdFx0XHRcdFx0KS5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksXG5cdFx0XHRcdFx0bWF0Y2hlcixcblx0XHRcdFx0XHRpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlcnMucHVzaCggbWF0Y2hlciApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkge1xuXHR2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdGJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdHN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHtcblx0XHRcdHZhciBlbGVtLCBqLCBtYXRjaGVyLFxuXHRcdFx0XHRtYXRjaGVkQ291bnQgPSAwLFxuXHRcdFx0XHRpID0gXCIwXCIsXG5cdFx0XHRcdHVubWF0Y2hlZCA9IHNlZWQgJiYgW10sXG5cdFx0XHRcdHNldE1hdGNoZWQgPSBbXSxcblx0XHRcdFx0Y29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsXG5cdFx0XHRcdC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHRcblx0XHRcdFx0ZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbXCJUQUdcIl0oIFwiKlwiLCBvdXRlcm1vc3QgKSxcblx0XHRcdFx0Ly8gVXNlIGludGVnZXIgZGlycnVucyBpZmYgdGhpcyBpcyB0aGUgb3V0ZXJtb3N0IG1hdGNoZXJcblx0XHRcdFx0ZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksXG5cdFx0XHRcdGxlbiA9IGVsZW1zLmxlbmd0aDtcblxuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ICE9PSBkb2N1bWVudCAmJiBjb250ZXh0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0c1xuXHRcdFx0Ly8gS2VlcCBgaWAgYSBzdHJpbmcgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzIHNvIGBtYXRjaGVkQ291bnRgIHdpbGwgYmUgXCIwMFwiIGJlbG93XG5cdFx0XHQvLyBTdXBwb3J0OiBJRTw5LCBTYWZhcmlcblx0XHRcdC8vIFRvbGVyYXRlIE5vZGVMaXN0IHByb3BlcnRpZXMgKElFOiBcImxlbmd0aFwiOyBTYWZhcmk6IDxudW1iZXI+KSBtYXRjaGluZyBlbGVtZW50cyBieSBpZFxuXHRcdFx0Zm9yICggOyBpICE9PSBsZW4gJiYgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGJ5RWxlbWVudCAmJiBlbGVtICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBlbGVtZW50TWF0Y2hlcnNbaisrXSkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVyc1xuXHRcdFx0XHRpZiAoIGJ5U2V0ICkge1xuXHRcdFx0XHRcdC8vIFRoZXkgd2lsbCBoYXZlIGdvbmUgdGhyb3VnaCBhbGwgcG9zc2libGUgbWF0Y2hlcnNcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7XG5cdFx0XHRcdFx0XHRtYXRjaGVkQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG5cdFx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdFx0dW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzXG5cdFx0XHRtYXRjaGVkQ291bnQgKz0gaTtcblx0XHRcdGlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkge1xuXHRcdFx0XHRqID0gMDtcblx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdG1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0Ly8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZ1xuXHRcdFx0XHRcdGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRcdHNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXNcblx0XHRcdFx0XHRzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFkZCBtYXRjaGVzIHRvIHJlc3VsdHNcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApO1xuXG5cdFx0XHRcdC8vIFNlZWRsZXNzIHNldCBtYXRjaGVzIHN1Y2NlZWRpbmcgbXVsdGlwbGUgc3VjY2Vzc2Z1bCBtYXRjaGVycyBzdGlwdWxhdGUgc29ydGluZ1xuXHRcdFx0XHRpZiAoIG91dGVybW9zdCAmJiAhc2VlZCAmJiBzZXRNYXRjaGVkLmxlbmd0aCA+IDAgJiZcblx0XHRcdFx0XHQoIG1hdGNoZWRDb3VudCArIHNldE1hdGNoZXJzLmxlbmd0aCApID4gMSApIHtcblxuXHRcdFx0XHRcdFNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gT3ZlcnJpZGUgbWFuaXB1bGF0aW9uIG9mIGdsb2JhbHMgYnkgbmVzdGVkIG1hdGNoZXJzXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0QmFja3VwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdW5tYXRjaGVkO1xuXHRcdH07XG5cblx0cmV0dXJuIGJ5U2V0ID9cblx0XHRtYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDpcblx0XHRzdXBlck1hdGNoZXI7XG59XG5cbmNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7XG5cdHZhciBpLFxuXHRcdHNldE1hdGNoZXJzID0gW10sXG5cdFx0ZWxlbWVudE1hdGNoZXJzID0gW10sXG5cdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggIWNhY2hlZCApIHtcblx0XHQvLyBHZW5lcmF0ZSBhIGZ1bmN0aW9uIG9mIHJlY3Vyc2l2ZSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCB0byBjaGVjayBlYWNoIGVsZW1lbnRcblx0XHRpZiAoICFtYXRjaCApIHtcblx0XHRcdG1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0fVxuXHRcdGkgPSBtYXRjaC5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRjYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTtcblx0XHRcdGlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvblxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApO1xuXG5cdFx0Ly8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uXG5cdFx0Y2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdH1cblx0cmV0dXJuIGNhY2hlZDtcbn07XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHRcbiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXVxuICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3RcbiAqL1xuc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsXG5cdFx0Y29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBzZWxlY3Rvcixcblx0XHRtYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBUcnkgdG8gbWluaW1pemUgb3BlcmF0aW9ucyBpZiB0aGVyZSBpcyBubyBzZWVkIGFuZCBvbmx5IG9uZSBncm91cFxuXHRpZiAoIG1hdGNoLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdC8vIFRha2UgYSBzaG9ydGN1dCBhbmQgc2V0IHRoZSBjb250ZXh0IGlmIHRoZSByb290IHNlbGVjdG9yIGlzIGFuIElEXG5cdFx0dG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApO1xuXHRcdGlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSBcIklEXCIgJiZcblx0XHRcdFx0c3VwcG9ydC5nZXRCeUlkICYmIGNvbnRleHQubm9kZVR5cGUgPT09IDkgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHRcdFx0RXhwci5yZWxhdGl2ZVsgdG9rZW5zWzFdLnR5cGUgXSApIHtcblxuXHRcdFx0Y29udGV4dCA9ICggRXhwci5maW5kW1wiSURcIl0oIHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZShydW5lc2NhcGUsIGZ1bmVzY2FwZSksIGNvbnRleHQgKSB8fCBbXSApWzBdO1xuXHRcdFx0aWYgKCAhY29udGV4dCApIHtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cblx0XHRcdC8vIFByZWNvbXBpbGVkIG1hdGNoZXJzIHdpbGwgc3RpbGwgdmVyaWZ5IGFuY2VzdHJ5LCBzbyBzdGVwIHVwIGEgbGV2ZWxcblx0XHRcdH0gZWxzZSBpZiAoIGNvbXBpbGVkICkge1xuXHRcdFx0XHRjb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnNsaWNlKCB0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGggKTtcblx0XHR9XG5cblx0XHQvLyBGZXRjaCBhIHNlZWQgc2V0IGZvciByaWdodC10by1sZWZ0IG1hdGNoaW5nXG5cdFx0aSA9IG1hdGNoRXhwcltcIm5lZWRzQ29udGV4dFwiXS50ZXN0KCBzZWxlY3RvciApID8gMCA6IHRva2Vucy5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0b2tlbiA9IHRva2Vuc1tpXTtcblxuXHRcdFx0Ly8gQWJvcnQgaWYgd2UgaGl0IGEgY29tYmluYXRvclxuXHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyAodHlwZSA9IHRva2VuLnR5cGUpIF0gKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAoZmluZCA9IEV4cHIuZmluZFsgdHlwZSBdKSApIHtcblx0XHRcdFx0Ly8gU2VhcmNoLCBleHBhbmRpbmcgY29udGV4dCBmb3IgbGVhZGluZyBzaWJsaW5nIGNvbWJpbmF0b3JzXG5cdFx0XHRcdGlmICggKHNlZWQgPSBmaW5kKFxuXHRcdFx0XHRcdHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKSxcblx0XHRcdFx0XHRyc2libGluZy50ZXN0KCB0b2tlbnNbMF0udHlwZSApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdFx0XHRcdCkpICkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgc2VlZCBpcyBlbXB0eSBvciBubyB0b2tlbnMgcmVtYWluLCB3ZSBjYW4gcmV0dXJuIGVhcmx5XG5cdFx0XHRcdFx0dG9rZW5zLnNwbGljZSggaSwgMSApO1xuXHRcdFx0XHRcdHNlbGVjdG9yID0gc2VlZC5sZW5ndGggJiYgdG9TZWxlY3RvciggdG9rZW5zICk7XG5cdFx0XHRcdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBzZWVkICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIENvbXBpbGUgYW5kIGV4ZWN1dGUgYSBmaWx0ZXJpbmcgZnVuY3Rpb24gaWYgb25lIGlzIG5vdCBwcm92aWRlZFxuXHQvLyBQcm92aWRlIGBtYXRjaGAgdG8gYXZvaWQgcmV0b2tlbml6YXRpb24gaWYgd2UgbW9kaWZpZWQgdGhlIHNlbGVjdG9yIGFib3ZlXG5cdCggY29tcGlsZWQgfHwgY29tcGlsZSggc2VsZWN0b3IsIG1hdGNoICkgKShcblx0XHRzZWVkLFxuXHRcdGNvbnRleHQsXG5cdFx0IWRvY3VtZW50SXNIVE1MLFxuXHRcdHJlc3VsdHMsXG5cdFx0cnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dFxuXHQpO1xuXHRyZXR1cm4gcmVzdWx0cztcbn07XG5cbi8vIE9uZS10aW1lIGFzc2lnbm1lbnRzXG5cbi8vIFNvcnQgc3RhYmlsaXR5XG5zdXBwb3J0LnNvcnRTdGFibGUgPSBleHBhbmRvLnNwbGl0KFwiXCIpLnNvcnQoIHNvcnRPcmRlciApLmpvaW4oXCJcIikgPT09IGV4cGFuZG87XG5cbi8vIFN1cHBvcnQ6IENocm9tZSAxNC0zNStcbi8vIEFsd2F5cyBhc3N1bWUgZHVwbGljYXRlcyBpZiB0aGV5IGFyZW4ndCBwYXNzZWQgdG8gdGhlIGNvbXBhcmlzb24gZnVuY3Rpb25cbnN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcyA9ICEhaGFzRHVwbGljYXRlO1xuXG4vLyBJbml0aWFsaXplIGFnYWluc3QgdGhlIGRlZmF1bHQgZG9jdW1lbnRcbnNldERvY3VtZW50KCk7XG5cbi8vIFN1cHBvcnQ6IFdlYmtpdDw1MzcuMzIgLSBTYWZhcmkgNi4wLjMvQ2hyb21lIDI1IChmaXhlZCBpbiBDaHJvbWUgMjcpXG4vLyBEZXRhY2hlZCBub2RlcyBjb25mb3VuZGluZ2x5IGZvbGxvdyAqZWFjaCBvdGhlcipcbnN1cHBvcnQuc29ydERldGFjaGVkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYxICkge1xuXHQvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcblx0cmV0dXJuIGRpdjEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgKSAmIDE7XG59KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHhcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8YSBocmVmPScjJz48L2E+XCI7XG5cdHJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIiNcIiA7XG59KSApIHtcblx0YWRkSGFuZGxlKCBcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidHlwZVwiID8gMSA6IDIgKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZShcInZhbHVlXCIpXG5pZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8aW5wdXQvPlwiO1xuXHRkaXYuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiwgXCJcIiApO1xuXHRyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXNcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRyZXR1cm4gZGl2LmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09IG51bGw7XG59KSApIHtcblx0YWRkSGFuZGxlKCBib29sZWFucywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciB2YWw7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbVsgbmFtZSBdID09PSB0cnVlID8gbmFtZS50b0xvd2VyQ2FzZSgpIDpcblx0XHRcdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0fVxuXHR9KTtcbn1cblxucmV0dXJuIFNpenpsZTtcblxufSkoIHdpbmRvdyApO1xuXG5cblxualF1ZXJ5LmZpbmQgPSBTaXp6bGU7XG5qUXVlcnkuZXhwciA9IFNpenpsZS5zZWxlY3RvcnM7XG5qUXVlcnkuZXhwcltcIjpcIl0gPSBqUXVlcnkuZXhwci5wc2V1ZG9zO1xualF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xualF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDtcbmpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDtcbmpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcblxuXG5cbnZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O1xuXG52YXIgcnNpbmdsZVRhZyA9ICgvXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8pO1xuXG5cblxudmFyIHJpc1NpbXBsZSA9IC9eLlteOiNcXFtcXC4sXSokLztcblxuLy8gSW1wbGVtZW50IHRoZSBpZGVudGljYWwgZnVuY3Rpb25hbGl0eSBmb3IgZmlsdGVyIGFuZCBub3RcbmZ1bmN0aW9uIHdpbm5vdyggZWxlbWVudHMsIHF1YWxpZmllciwgbm90ICkge1xuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBxdWFsaWZpZXIgKSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdC8qIGpzaGludCAtVzAxOCAqL1xuXHRcdFx0cmV0dXJuICEhcXVhbGlmaWVyLmNhbGwoIGVsZW0sIGksIGVsZW0gKSAhPT0gbm90O1xuXHRcdH0pO1xuXG5cdH1cblxuXHRpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGlmICggdHlwZW9mIHF1YWxpZmllciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRpZiAoIHJpc1NpbXBsZS50ZXN0KCBxdWFsaWZpZXIgKSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTtcblx0XHR9XG5cblx0XHRxdWFsaWZpZXIgPSBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzICk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gKCBpbmRleE9mLmNhbGwoIHF1YWxpZmllciwgZWxlbSApID49IDAgKSAhPT0gbm90O1xuXHR9KTtcbn1cblxualF1ZXJ5LmZpbHRlciA9IGZ1bmN0aW9uKCBleHByLCBlbGVtcywgbm90ICkge1xuXHR2YXIgZWxlbSA9IGVsZW1zWyAwIF07XG5cblx0aWYgKCBub3QgKSB7XG5cdFx0ZXhwciA9IFwiOm5vdChcIiArIGV4cHIgKyBcIilcIjtcblx0fVxuXG5cdHJldHVybiBlbGVtcy5sZW5ndGggPT09IDEgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSA/XG5cdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBlbGVtLCBleHByICkgPyBbIGVsZW0gXSA6IFtdIDpcblx0XHRqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDE7XG5cdFx0fSkpO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGZpbmQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgaSxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0cmV0ID0gW10sXG5cdFx0XHRzZWxmID0gdGhpcztcblxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSkgKTtcblx0XHR9XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0alF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApO1xuXHRcdH1cblxuXHRcdC8vIE5lZWRlZCBiZWNhdXNlICQoIHNlbGVjdG9yLCBjb250ZXh0ICkgYmVjb21lcyAkKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKVxuXHRcdHJldCA9IHRoaXMucHVzaFN0YWNrKCBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZSggcmV0ICkgOiByZXQgKTtcblx0XHRyZXQuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArIFwiIFwiICsgc2VsZWN0b3IgOiBzZWxlY3Rvcjtcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXHRmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyh0aGlzLCBzZWxlY3RvciB8fCBbXSwgZmFsc2UpICk7XG5cdH0sXG5cdG5vdDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlKSApO1xuXHR9LFxuXHRpczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiAhIXdpbm5vdyhcblx0XHRcdHRoaXMsXG5cblx0XHRcdC8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXRcblx0XHRcdC8vIHNvICQoXCJwOmZpcnN0XCIpLmlzKFwicDpsYXN0XCIpIHdvbid0IHJldHVybiB0cnVlIGZvciBhIGRvYyB3aXRoIHR3byBcInBcIi5cblx0XHRcdHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICkgP1xuXHRcdFx0XHRqUXVlcnkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHRzZWxlY3RvciB8fCBbXSxcblx0XHRcdGZhbHNlXG5cdFx0KS5sZW5ndGg7XG5cdH1cbn0pO1xuXG5cbi8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0XG5cblxuLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpXG52YXIgcm9vdGpRdWVyeSxcblxuXHQvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5nc1xuXHQvLyBQcmlvcml0aXplICNpZCBvdmVyIDx0YWc+IHRvIGF2b2lkIFhTUyB2aWEgbG9jYXRpb24uaGFzaCAoIzk1MjEpXG5cdC8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KVxuXHRycXVpY2tFeHByID0gL14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sXG5cblx0aW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHZhciBtYXRjaCwgZWxlbTtcblxuXHRcdC8vIEhBTkRMRTogJChcIlwiKSwgJChudWxsKSwgJCh1bmRlZmluZWQpLCAkKGZhbHNlKVxuXHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIEhUTUwgc3RyaW5nc1xuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0aWYgKCBzZWxlY3RvclswXSA9PT0gXCI8XCIgJiYgc2VsZWN0b3JbIHNlbGVjdG9yLmxlbmd0aCAtIDEgXSA9PT0gXCI+XCIgJiYgc2VsZWN0b3IubGVuZ3RoID49IDMgKSB7XG5cdFx0XHRcdC8vIEFzc3VtZSB0aGF0IHN0cmluZ3MgdGhhdCBzdGFydCBhbmQgZW5kIHdpdGggPD4gYXJlIEhUTUwgYW5kIHNraXAgdGhlIHJlZ2V4IGNoZWNrXG5cdFx0XHRcdG1hdGNoID0gWyBudWxsLCBzZWxlY3RvciwgbnVsbCBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWF0Y2ggaHRtbCBvciBtYWtlIHN1cmUgbm8gY29udGV4dCBpcyBzcGVjaWZpZWQgZm9yICNpZFxuXHRcdFx0aWYgKCBtYXRjaCAmJiAobWF0Y2hbMV0gfHwgIWNvbnRleHQpICkge1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuXHRcdFx0XHRpZiAoIG1hdGNoWzFdICkge1xuXHRcdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGV4dFswXSA6IGNvbnRleHQ7XG5cblx0XHRcdFx0XHQvLyBPcHRpb24gdG8gcnVuIHNjcmlwdHMgaXMgdHJ1ZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0XHQvLyBJbnRlbnRpb25hbGx5IGxldCB0aGUgZXJyb3IgYmUgdGhyb3duIGlmIHBhcnNlSFRNTCBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcywgalF1ZXJ5LnBhcnNlSFRNTChcblx0XHRcdFx0XHRcdG1hdGNoWzFdLFxuXHRcdFx0XHRcdFx0Y29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCxcblx0XHRcdFx0XHRcdHRydWVcblx0XHRcdFx0XHQpICk7XG5cblx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG5cdFx0XHRcdFx0aWYgKCByc2luZ2xlVGFnLnRlc3QoIG1hdGNoWzFdICkgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvbnRleHQgKSApIHtcblx0XHRcdFx0XHRcdGZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGVcblx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXNbIG1hdGNoIF0oIGNvbnRleHRbIG1hdGNoIF0gKTtcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgb3RoZXJ3aXNlIHNldCBhcyBhdHRyaWJ1dGVzXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hdHRyKCBtYXRjaCwgY29udGV4dFsgbWF0Y2ggXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKCNpZClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWzJdICk7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBCbGFja2JlcnJ5IDQuNlxuXHRcdFx0XHRcdC8vIGdFQklEIHJldHVybnMgbm9kZXMgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAoIzY5NjMpXG5cdFx0XHRcdFx0aWYgKCBlbGVtICYmIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHRcdC8vIEluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0XG5cdFx0XHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdFx0XHR0aGlzWzBdID0gZWxlbTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR0aGlzLmNvbnRleHQgPSBkb2N1bWVudDtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsICQoLi4uKSlcblx0XHRcdH0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkge1xuXHRcdFx0XHRyZXR1cm4gKCBjb250ZXh0IHx8IHJvb3RqUXVlcnkgKS5maW5kKCBzZWxlY3RvciApO1xuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dClcblx0XHRcdC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gSEFORExFOiAkKERPTUVsZW1lbnQpXG5cdFx0fSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG5cdFx0XHR0aGlzLmNvbnRleHQgPSB0aGlzWzBdID0gc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdC8vIEhBTkRMRTogJChmdW5jdGlvbilcblx0XHQvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHlcblx0XHR9IGVsc2UgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggc2VsZWN0b3IgKSApIHtcblx0XHRcdHJldHVybiB0eXBlb2Ygcm9vdGpRdWVyeS5yZWFkeSAhPT0gXCJ1bmRlZmluZWRcIiA/XG5cdFx0XHRcdHJvb3RqUXVlcnkucmVhZHkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHQvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IGlmIHJlYWR5IGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdHNlbGVjdG9yKCBqUXVlcnkgKTtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yLnNlbGVjdG9yICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3Iuc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmNvbnRleHQgPSBzZWxlY3Rvci5jb250ZXh0O1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHR9O1xuXG4vLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcblxuLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxucm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTtcblxuXG52YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sXG5cdC8vIE1ldGhvZHMgZ3VhcmFudGVlZCB0byBwcm9kdWNlIGEgdW5pcXVlIHNldCB3aGVuIHN0YXJ0aW5nIGZyb20gYSB1bmlxdWUgc2V0XG5cdGd1YXJhbnRlZWRVbmlxdWUgPSB7XG5cdFx0Y2hpbGRyZW46IHRydWUsXG5cdFx0Y29udGVudHM6IHRydWUsXG5cdFx0bmV4dDogdHJ1ZSxcblx0XHRwcmV2OiB0cnVlXG5cdH07XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRkaXI6IGZ1bmN0aW9uKCBlbGVtLCBkaXIsIHVudGlsICkge1xuXHRcdHZhciBtYXRjaGVkID0gW10sXG5cdFx0XHR0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7XG5cblx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7XG5cdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdGlmICggdHJ1bmNhdGUgJiYgalF1ZXJ5KCBlbGVtICkuaXMoIHVudGlsICkgKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0bWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9LFxuXG5cdHNpYmxpbmc6IGZ1bmN0aW9uKCBuLCBlbGVtICkge1xuXHRcdHZhciBtYXRjaGVkID0gW107XG5cblx0XHRmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuXHRcdFx0aWYgKCBuLm5vZGVUeXBlID09PSAxICYmIG4gIT09IGVsZW0gKSB7XG5cdFx0XHRcdG1hdGNoZWQucHVzaCggbiApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGhhczogZnVuY3Rpb24oIHRhcmdldCApIHtcblx0XHR2YXIgdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksXG5cdFx0XHRsID0gdGFyZ2V0cy5sZW5ndGg7XG5cblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCB0aGlzLCB0YXJnZXRzW2ldICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRjbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkge1xuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSB0aGlzLmxlbmd0aCxcblx0XHRcdG1hdGNoZWQgPSBbXSxcblx0XHRcdHBvcyA9IHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgfHwgdHlwZW9mIHNlbGVjdG9ycyAhPT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdGpRdWVyeSggc2VsZWN0b3JzLCBjb250ZXh0IHx8IHRoaXMuY29udGV4dCApIDpcblx0XHRcdFx0MDtcblxuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGZvciAoIGN1ciA9IHRoaXNbaV07IGN1ciAmJiBjdXIgIT09IGNvbnRleHQ7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXHRcdFx0XHQvLyBBbHdheXMgc2tpcCBkb2N1bWVudCBmcmFnbWVudHNcblx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAocG9zID9cblx0XHRcdFx0XHRwb3MuaW5kZXgoY3VyKSA+IC0xIDpcblxuXHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdGN1ci5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGN1ciwgc2VsZWN0b3JzKSkgKSB7XG5cblx0XHRcdFx0XHRtYXRjaGVkLnB1c2goIGN1ciApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlKCBtYXRjaGVkICkgOiBtYXRjaGVkICk7XG5cdH0sXG5cblx0Ly8gRGV0ZXJtaW5lIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHdpdGhpbiB0aGUgc2V0XG5cdGluZGV4OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIE5vIGFyZ3VtZW50LCByZXR1cm4gaW5kZXggaW4gcGFyZW50XG5cdFx0aWYgKCAhZWxlbSApIHtcblx0XHRcdHJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTtcblx0XHR9XG5cblx0XHQvLyBJbmRleCBpbiBzZWxlY3RvclxuXHRcdGlmICggdHlwZW9mIGVsZW0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gaW5kZXhPZi5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdGhpc1sgMCBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gTG9jYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZGVzaXJlZCBlbGVtZW50XG5cdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggdGhpcyxcblxuXHRcdFx0Ly8gSWYgaXQgcmVjZWl2ZXMgYSBqUXVlcnkgb2JqZWN0LCB0aGUgZmlyc3QgZWxlbWVudCBpcyB1c2VkXG5cdFx0XHRlbGVtLmpxdWVyeSA/IGVsZW1bIDAgXSA6IGVsZW1cblx0XHQpO1xuXHR9LFxuXG5cdGFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayhcblx0XHRcdGpRdWVyeS51bmlxdWUoXG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcy5nZXQoKSwgalF1ZXJ5KCBzZWxlY3RvciwgY29udGV4dCApIClcblx0XHRcdClcblx0XHQpO1xuXHR9LFxuXG5cdGFkZEJhY2s6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuXHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlcihzZWxlY3Rvcilcblx0XHQpO1xuXHR9XG59KTtcblxuZnVuY3Rpb24gc2libGluZyggY3VyLCBkaXIgKSB7XG5cdHdoaWxlICggKGN1ciA9IGN1cltkaXJdKSAmJiBjdXIubm9kZVR5cGUgIT09IDEgKSB7fVxuXHRyZXR1cm4gY3VyO1xufVxuXG5qUXVlcnkuZWFjaCh7XG5cdHBhcmVudDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRyZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMTEgPyBwYXJlbnQgOiBudWxsO1xuXHR9LFxuXHRwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIgKTtcblx0fSxcblx0cGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicGFyZW50Tm9kZVwiLCB1bnRpbCApO1xuXHR9LFxuXHRuZXh0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZyggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXY6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiICk7XG5cdH0sXG5cdG5leHRBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldkFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiwgdW50aWwgKTtcblx0fSxcblx0cHJldlVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIsIHVudGlsICk7XG5cdH0sXG5cdHNpYmxpbmdzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LnNpYmxpbmcoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApO1xuXHR9LFxuXHRjaGlsZHJlbjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5zaWJsaW5nKCBlbGVtLmZpcnN0Q2hpbGQgKTtcblx0fSxcblx0Y29udGVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBlbGVtLmNvbnRlbnREb2N1bWVudCB8fCBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcblx0fVxufSwgZnVuY3Rpb24oIG5hbWUsIGZuICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBqUXVlcnkubWFwKCB0aGlzLCBmbiwgdW50aWwgKTtcblxuXHRcdGlmICggbmFtZS5zbGljZSggLTUgKSAhPT0gXCJVbnRpbFwiICkge1xuXHRcdFx0c2VsZWN0b3IgPSB1bnRpbDtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG1hdGNoZWQgPSBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgbWF0Y2hlZCApO1xuXHRcdH1cblxuXHRcdGlmICggdGhpcy5sZW5ndGggPiAxICkge1xuXHRcdFx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZXNcblx0XHRcdGlmICggIWd1YXJhbnRlZWRVbmlxdWVbIG5hbWUgXSApIHtcblx0XHRcdFx0alF1ZXJ5LnVuaXF1ZSggbWF0Y2hlZCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlc1xuXHRcdFx0aWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRtYXRjaGVkLnJldmVyc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQgKTtcblx0fTtcbn0pO1xudmFyIHJub3R3aGl0ZSA9ICgvXFxTKy9nKTtcblxuXG5cbi8vIFN0cmluZyB0byBPYmplY3Qgb3B0aW9ucyBmb3JtYXQgY2FjaGVcbnZhciBvcHRpb25zQ2FjaGUgPSB7fTtcblxuLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXMgYW5kIHN0b3JlIGluIGNhY2hlXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkge1xuXHR2YXIgb2JqZWN0ID0gb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gPSB7fTtcblx0alF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHtcblx0XHRvYmplY3RbIGZsYWcgXSA9IHRydWU7XG5cdH0pO1xuXHRyZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICpcdG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gKlx0XHRcdFx0XHR2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcblx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdCggb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gfHwgY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApICkgOlxuXHRcdGpRdWVyeS5leHRlbmQoIHt9LCBvcHRpb25zICk7XG5cblx0dmFyIC8vIExhc3QgZmlyZSB2YWx1ZSAoZm9yIG5vbi1mb3JnZXR0YWJsZSBsaXN0cylcblx0XHRtZW1vcnksXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWRcblx0XHRmaXJlZCxcblx0XHQvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCBpcyBjdXJyZW50bHkgZmlyaW5nXG5cdFx0ZmlyaW5nLFxuXHRcdC8vIEZpcnN0IGNhbGxiYWNrIHRvIGZpcmUgKHVzZWQgaW50ZXJuYWxseSBieSBhZGQgYW5kIGZpcmVXaXRoKVxuXHRcdGZpcmluZ1N0YXJ0LFxuXHRcdC8vIEVuZCBvZiB0aGUgbG9vcCB3aGVuIGZpcmluZ1xuXHRcdGZpcmluZ0xlbmd0aCxcblx0XHQvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSByZW1vdmUgaWYgbmVlZGVkKVxuXHRcdGZpcmluZ0luZGV4LFxuXHRcdC8vIEFjdHVhbCBjYWxsYmFjayBsaXN0XG5cdFx0bGlzdCA9IFtdLFxuXHRcdC8vIFN0YWNrIG9mIGZpcmUgY2FsbHMgZm9yIHJlcGVhdGFibGUgbGlzdHNcblx0XHRzdGFjayA9ICFvcHRpb25zLm9uY2UgJiYgW10sXG5cdFx0Ly8gRmlyZSBjYWxsYmFja3Ncblx0XHRmaXJlID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cdFx0XHRtZW1vcnkgPSBvcHRpb25zLm1lbW9yeSAmJiBkYXRhO1xuXHRcdFx0ZmlyZWQgPSB0cnVlO1xuXHRcdFx0ZmlyaW5nSW5kZXggPSBmaXJpbmdTdGFydCB8fCAwO1xuXHRcdFx0ZmlyaW5nU3RhcnQgPSAwO1xuXHRcdFx0ZmlyaW5nTGVuZ3RoID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRmaXJpbmcgPSB0cnVlO1xuXHRcdFx0Zm9yICggOyBsaXN0ICYmIGZpcmluZ0luZGV4IDwgZmlyaW5nTGVuZ3RoOyBmaXJpbmdJbmRleCsrICkge1xuXHRcdFx0XHRpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIGRhdGFbIDAgXSwgZGF0YVsgMSBdICkgPT09IGZhbHNlICYmIG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG5cdFx0XHRcdFx0bWVtb3J5ID0gZmFsc2U7IC8vIFRvIHByZXZlbnQgZnVydGhlciBjYWxscyB1c2luZyBhZGRcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZmlyaW5nID0gZmFsc2U7XG5cdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdGlmICggc3RhY2sgKSB7XG5cdFx0XHRcdFx0aWYgKCBzdGFjay5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCBzdGFjay5zaGlmdCgpICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKCBtZW1vcnkgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IFtdO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGYuZGlzYWJsZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuXHRcdHNlbGYgPSB7XG5cdFx0XHQvLyBBZGQgYSBjYWxsYmFjayBvciBhIGNvbGxlY3Rpb24gb2YgY2FsbGJhY2tzIHRvIHRoZSBsaXN0XG5cdFx0XHRhZGQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0Ly8gRmlyc3QsIHdlIHNhdmUgdGhlIGN1cnJlbnQgbGVuZ3RoXG5cdFx0XHRcdFx0dmFyIHN0YXJ0ID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0KGZ1bmN0aW9uIGFkZCggYXJncyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmdzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0XHR2YXIgdHlwZSA9IGpRdWVyeS50eXBlKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCAhb3B0aW9ucy51bmlxdWUgfHwgIXNlbGYuaGFzKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxpc3QucHVzaCggYXJnICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBhcmcgJiYgYXJnLmxlbmd0aCAmJiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIEluc3BlY3QgcmVjdXJzaXZlbHlcblx0XHRcdFx0XHRcdFx0XHRhZGQoIGFyZyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KSggYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0Ly8gRG8gd2UgbmVlZCB0byBhZGQgdGhlIGNhbGxiYWNrcyB0byB0aGVcblx0XHRcdFx0XHQvLyBjdXJyZW50IGZpcmluZyBiYXRjaD9cblx0XHRcdFx0XHRpZiAoIGZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmluZ0xlbmd0aCA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0XHRcdC8vIFdpdGggbWVtb3J5LCBpZiB3ZSdyZSBub3QgZmlyaW5nIHRoZW5cblx0XHRcdFx0XHQvLyB3ZSBzaG91bGQgY2FsbCByaWdodCBhd2F5XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggbWVtb3J5ICkge1xuXHRcdFx0XHRcdFx0ZmlyaW5nU3RhcnQgPSBzdGFydDtcblx0XHRcdFx0XHRcdGZpcmUoIG1lbW9yeSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHQvLyBSZW1vdmUgYSBjYWxsYmFjayBmcm9tIHRoZSBsaXN0XG5cdFx0XHRyZW1vdmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHRcdHZhciBpbmRleDtcblx0XHRcdFx0XHRcdHdoaWxlICggKCBpbmRleCA9IGpRdWVyeS5pbkFycmF5KCBhcmcsIGxpc3QsIGluZGV4ICkgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0XHRsaXN0LnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG5cdFx0XHRcdFx0XHRcdGlmICggZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nTGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZmlyaW5nTGVuZ3RoLS07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleC0tO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuXG5cdFx0XHQvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC5cblx0XHRcdGhhczogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRyZXR1cm4gZm4gPyBqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDogISEoIGxpc3QgJiYgbGlzdC5sZW5ndGggKTtcblx0XHRcdH0sXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG5cdFx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxpc3QgPSBbXTtcblx0XHRcdFx0ZmlyaW5nTGVuZ3RoID0gMDtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gSGF2ZSB0aGUgbGlzdCBkbyBub3RoaW5nIGFueW1vcmVcblx0XHRcdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsaXN0ID0gc3RhY2sgPSBtZW1vcnkgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIElzIGl0IGRpc2FibGVkP1xuXHRcdFx0ZGlzYWJsZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gIWxpc3Q7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gTG9jayB0aGUgbGlzdCBpbiBpdHMgY3VycmVudCBzdGF0ZVxuXHRcdFx0bG9jazogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHN0YWNrID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRpZiAoICFtZW1vcnkgKSB7XG5cdFx0XHRcdFx0c2VsZi5kaXNhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gSXMgaXQgbG9ja2VkP1xuXHRcdFx0bG9ja2VkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICFzdGFjaztcblx0XHRcdH0sXG5cdFx0XHQvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzXG5cdFx0XHRmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7XG5cdFx0XHRcdGlmICggbGlzdCAmJiAoICFmaXJlZCB8fCBzdGFjayApICkge1xuXHRcdFx0XHRcdGFyZ3MgPSBhcmdzIHx8IFtdO1xuXHRcdFx0XHRcdGFyZ3MgPSBbIGNvbnRleHQsIGFyZ3Muc2xpY2UgPyBhcmdzLnNsaWNlKCkgOiBhcmdzIF07XG5cdFx0XHRcdFx0aWYgKCBmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRzdGFjay5wdXNoKCBhcmdzICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGZpcmUoIGFyZ3MgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHNcblx0XHRcdGZpcmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG5cdFx0XHRmaXJlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWZpcmVkO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0cmV0dXJuIHNlbGY7XG59O1xuXG5cbmpRdWVyeS5leHRlbmQoe1xuXG5cdERlZmVycmVkOiBmdW5jdGlvbiggZnVuYyApIHtcblx0XHR2YXIgdHVwbGVzID0gW1xuXHRcdFx0XHQvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgbGlzdGVuZXIgbGlzdCwgZmluYWwgc3RhdGVcblx0XHRcdFx0WyBcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZWplY3RlZFwiIF0sXG5cdFx0XHRcdFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpIF1cblx0XHRcdF0sXG5cdFx0XHRzdGF0ZSA9IFwicGVuZGluZ1wiLFxuXHRcdFx0cHJvbWlzZSA9IHtcblx0XHRcdFx0c3RhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBzdGF0ZTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YWx3YXlzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5kb25lKCBhcmd1bWVudHMgKS5mYWlsKCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblx0XHRcdFx0dGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdHZhciBmbnMgPSBhcmd1bWVudHM7XG5cdFx0XHRcdFx0cmV0dXJuIGpRdWVyeS5EZWZlcnJlZChmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBmbnNbIGkgXSApICYmIGZuc1sgaSBdO1xuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZFsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdIGZvciBmb3J3YXJkaW5nIGFjdGlvbnMgdG8gbmV3RGVmZXJcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzFdIF0oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5mYWlsKCBuZXdEZWZlci5yZWplY3QgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IHByb21pc2UgPyBuZXdEZWZlci5wcm9taXNlKCkgOiB0aGlzLCBmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGZucyA9IG51bGw7XG5cdFx0XHRcdFx0fSkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHQvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkXG5cdFx0XHRcdC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3Rcblx0XHRcdFx0cHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdFx0XHRyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWZlcnJlZCA9IHt9O1xuXG5cdFx0Ly8gS2VlcCBwaXBlIGZvciBiYWNrLWNvbXBhdFxuXHRcdHByb21pc2UucGlwZSA9IHByb21pc2UudGhlbjtcblxuXHRcdC8vIEFkZCBsaXN0LXNwZWNpZmljIG1ldGhvZHNcblx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHR2YXIgbGlzdCA9IHR1cGxlWyAyIF0sXG5cdFx0XHRcdHN0YXRlU3RyaW5nID0gdHVwbGVbIDMgXTtcblxuXHRcdFx0Ly8gcHJvbWlzZVsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdID0gbGlzdC5hZGRcblx0XHRcdHByb21pc2VbIHR1cGxlWzFdIF0gPSBsaXN0LmFkZDtcblxuXHRcdFx0Ly8gSGFuZGxlIHN0YXRlXG5cdFx0XHRpZiAoIHN0YXRlU3RyaW5nICkge1xuXHRcdFx0XHRsaXN0LmFkZChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvLyBzdGF0ZSA9IFsgcmVzb2x2ZWQgfCByZWplY3RlZCBdXG5cdFx0XHRcdFx0c3RhdGUgPSBzdGF0ZVN0cmluZztcblxuXHRcdFx0XHQvLyBbIHJlamVjdF9saXN0IHwgcmVzb2x2ZV9saXN0IF0uZGlzYWJsZTsgcHJvZ3Jlc3NfbGlzdC5sb2NrXG5cdFx0XHRcdH0sIHR1cGxlc1sgaSBeIDEgXVsgMiBdLmRpc2FibGUsIHR1cGxlc1sgMiBdWyAyIF0ubG9jayApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBkZWZlcnJlZFsgcmVzb2x2ZSB8IHJlamVjdCB8IG5vdGlmeSBdXG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbMF0gXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbMF0gKyBcIldpdGhcIiBdKCB0aGlzID09PSBkZWZlcnJlZCA/IHByb21pc2UgOiB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9O1xuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzBdICsgXCJXaXRoXCIgXSA9IGxpc3QuZmlyZVdpdGg7XG5cdFx0fSk7XG5cblx0XHQvLyBNYWtlIHRoZSBkZWZlcnJlZCBhIHByb21pc2Vcblx0XHRwcm9taXNlLnByb21pc2UoIGRlZmVycmVkICk7XG5cblx0XHQvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55XG5cdFx0aWYgKCBmdW5jICkge1xuXHRcdFx0ZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTtcblx0XHR9XG5cblx0XHQvLyBBbGwgZG9uZSFcblx0XHRyZXR1cm4gZGVmZXJyZWQ7XG5cdH0sXG5cblx0Ly8gRGVmZXJyZWQgaGVscGVyXG5cdHdoZW46IGZ1bmN0aW9uKCBzdWJvcmRpbmF0ZSAvKiAsIC4uLiwgc3Vib3JkaW5hdGVOICovICkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdHJlc29sdmVWYWx1ZXMgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcblx0XHRcdGxlbmd0aCA9IHJlc29sdmVWYWx1ZXMubGVuZ3RoLFxuXG5cdFx0XHQvLyB0aGUgY291bnQgb2YgdW5jb21wbGV0ZWQgc3Vib3JkaW5hdGVzXG5cdFx0XHRyZW1haW5pbmcgPSBsZW5ndGggIT09IDEgfHwgKCBzdWJvcmRpbmF0ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggc3Vib3JkaW5hdGUucHJvbWlzZSApICkgPyBsZW5ndGggOiAwLFxuXG5cdFx0XHQvLyB0aGUgbWFzdGVyIERlZmVycmVkLiBJZiByZXNvbHZlVmFsdWVzIGNvbnNpc3Qgb2Ygb25seSBhIHNpbmdsZSBEZWZlcnJlZCwganVzdCB1c2UgdGhhdC5cblx0XHRcdGRlZmVycmVkID0gcmVtYWluaW5nID09PSAxID8gc3Vib3JkaW5hdGUgOiBqUXVlcnkuRGVmZXJyZWQoKSxcblxuXHRcdFx0Ly8gVXBkYXRlIGZ1bmN0aW9uIGZvciBib3RoIHJlc29sdmUgYW5kIHByb2dyZXNzIHZhbHVlc1xuXHRcdFx0dXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpLCBjb250ZXh0cywgdmFsdWVzICkge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdGNvbnRleHRzWyBpIF0gPSB0aGlzO1xuXHRcdFx0XHRcdHZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlO1xuXHRcdFx0XHRcdGlmICggdmFsdWVzID09PSBwcm9ncmVzc1ZhbHVlcyApIHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCAhKCAtLXJlbWFpbmluZyApICkge1xuXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXG5cdFx0XHRwcm9ncmVzc1ZhbHVlcywgcHJvZ3Jlc3NDb250ZXh0cywgcmVzb2x2ZUNvbnRleHRzO1xuXG5cdFx0Ly8gQWRkIGxpc3RlbmVycyB0byBEZWZlcnJlZCBzdWJvcmRpbmF0ZXM7IHRyZWF0IG90aGVycyBhcyByZXNvbHZlZFxuXHRcdGlmICggbGVuZ3RoID4gMSApIHtcblx0XHRcdHByb2dyZXNzVmFsdWVzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdHByb2dyZXNzQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuXHRcdFx0cmVzb2x2ZUNvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIHJlc29sdmVWYWx1ZXNbIGkgXSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggcmVzb2x2ZVZhbHVlc1sgaSBdLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRyZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSgpXG5cdFx0XHRcdFx0XHQuZG9uZSggdXBkYXRlRnVuYyggaSwgcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICkgKVxuXHRcdFx0XHRcdFx0LmZhaWwoIGRlZmVycmVkLnJlamVjdCApXG5cdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIHVwZGF0ZUZ1bmMoIGksIHByb2dyZXNzQ29udGV4dHMsIHByb2dyZXNzVmFsdWVzICkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQtLXJlbWFpbmluZztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElmIHdlJ3JlIG5vdCB3YWl0aW5nIG9uIGFueXRoaW5nLCByZXNvbHZlIHRoZSBtYXN0ZXJcblx0XHRpZiAoICFyZW1haW5pbmcgKSB7XG5cdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblx0fVxufSk7XG5cblxuLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5XG52YXIgcmVhZHlMaXN0O1xuXG5qUXVlcnkuZm4ucmVhZHkgPSBmdW5jdGlvbiggZm4gKSB7XG5cdC8vIEFkZCB0aGUgY2FsbGJhY2tcblx0alF1ZXJ5LnJlYWR5LnByb21pc2UoKS5kb25lKCBmbiApO1xuXG5cdHJldHVybiB0aGlzO1xufTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdC8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuXG5cdGlzUmVhZHk6IGZhbHNlLFxuXG5cdC8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmVcblx0Ly8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODFcblx0cmVhZHlXYWl0OiAxLFxuXG5cdC8vIEhvbGQgKG9yIHJlbGVhc2UpIHRoZSByZWFkeSBldmVudFxuXHRob2xkUmVhZHk6IGZ1bmN0aW9uKCBob2xkICkge1xuXHRcdGlmICggaG9sZCApIHtcblx0XHRcdGpRdWVyeS5yZWFkeVdhaXQrKztcblx0XHR9IGVsc2Uge1xuXHRcdFx0alF1ZXJ5LnJlYWR5KCB0cnVlICk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIEhhbmRsZSB3aGVuIHRoZSBET00gaXMgcmVhZHlcblx0cmVhZHk6IGZ1bmN0aW9uKCB3YWl0ICkge1xuXG5cdFx0Ly8gQWJvcnQgaWYgdGhlcmUgYXJlIHBlbmRpbmcgaG9sZHMgb3Igd2UncmUgYWxyZWFkeSByZWFkeVxuXHRcdGlmICggd2FpdCA9PT0gdHJ1ZSA/IC0talF1ZXJ5LnJlYWR5V2FpdCA6IGpRdWVyeS5pc1JlYWR5ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlbWVtYmVyIHRoYXQgdGhlIERPTSBpcyByZWFkeVxuXHRcdGpRdWVyeS5pc1JlYWR5ID0gdHJ1ZTtcblxuXHRcdC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG5cdFx0aWYgKCB3YWl0ICE9PSB0cnVlICYmIC0talF1ZXJ5LnJlYWR5V2FpdCA+IDAgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlcmUgYXJlIGZ1bmN0aW9ucyBib3VuZCwgdG8gZXhlY3V0ZVxuXHRcdHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblxuXHRcdC8vIFRyaWdnZXIgYW55IGJvdW5kIHJlYWR5IGV2ZW50c1xuXHRcdGlmICggalF1ZXJ5LmZuLnRyaWdnZXJIYW5kbGVyICkge1xuXHRcdFx0alF1ZXJ5KCBkb2N1bWVudCApLnRyaWdnZXJIYW5kbGVyKCBcInJlYWR5XCIgKTtcblx0XHRcdGpRdWVyeSggZG9jdW1lbnQgKS5vZmYoIFwicmVhZHlcIiApO1xuXHRcdH1cblx0fVxufSk7XG5cbi8qKlxuICogVGhlIHJlYWR5IGV2ZW50IGhhbmRsZXIgYW5kIHNlbGYgY2xlYW51cCBtZXRob2RcbiAqL1xuZnVuY3Rpb24gY29tcGxldGVkKCkge1xuXHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblx0alF1ZXJ5LnJlYWR5KCk7XG59XG5cbmpRdWVyeS5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24oIG9iaiApIHtcblx0aWYgKCAhcmVhZHlMaXN0ICkge1xuXG5cdFx0cmVhZHlMaXN0ID0galF1ZXJ5LkRlZmVycmVkKCk7XG5cblx0XHQvLyBDYXRjaCBjYXNlcyB3aGVyZSAkKGRvY3VtZW50KS5yZWFkeSgpIGlzIGNhbGxlZCBhZnRlciB0aGUgYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cblx0XHQvLyBXZSBvbmNlIHRyaWVkIHRvIHVzZSByZWFkeVN0YXRlIFwiaW50ZXJhY3RpdmVcIiBoZXJlLCBidXQgaXQgY2F1c2VkIGlzc3VlcyBsaWtlIHRoZSBvbmVcblx0XHQvLyBkaXNjb3ZlcmVkIGJ5IENocmlzUyBoZXJlOiBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjI4MiNjb21tZW50OjE1XG5cdFx0aWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgKSB7XG5cdFx0XHQvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHlcblx0XHRcdHNldFRpbWVvdXQoIGpRdWVyeS5yZWFkeSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gVXNlIHRoZSBoYW5keSBldmVudCBjYWxsYmFja1xuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblxuXHRcdFx0Ly8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVhZHlMaXN0LnByb21pc2UoIG9iaiApO1xufTtcblxuLy8gS2ljayBvZmYgdGhlIERPTSByZWFkeSBjaGVjayBldmVuIGlmIHRoZSB1c2VyIGRvZXMgbm90XG5qUXVlcnkucmVhZHkucHJvbWlzZSgpO1xuXG5cblxuXG4vLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cbi8vIFRoZSB2YWx1ZS9zIGNhbiBvcHRpb25hbGx5IGJlIGV4ZWN1dGVkIGlmIGl0J3MgYSBmdW5jdGlvblxudmFyIGFjY2VzcyA9IGpRdWVyeS5hY2Nlc3MgPSBmdW5jdGlvbiggZWxlbXMsIGZuLCBrZXksIHZhbHVlLCBjaGFpbmFibGUsIGVtcHR5R2V0LCByYXcgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBlbGVtcy5sZW5ndGgsXG5cdFx0YnVsayA9IGtleSA9PSBudWxsO1xuXG5cdC8vIFNldHMgbWFueSB2YWx1ZXNcblx0aWYgKCBqUXVlcnkudHlwZSgga2V5ICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblx0XHRmb3IgKCBpIGluIGtleSApIHtcblx0XHRcdGpRdWVyeS5hY2Nlc3MoIGVsZW1zLCBmbiwgaSwga2V5W2ldLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7XG5cdFx0fVxuXG5cdC8vIFNldHMgb25lIHZhbHVlXG5cdH0gZWxzZSBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblxuXHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmF3ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGJ1bGsgKSB7XG5cdFx0XHQvLyBCdWxrIG9wZXJhdGlvbnMgcnVuIGFnYWluc3QgdGhlIGVudGlyZSBzZXRcblx0XHRcdGlmICggcmF3ICkge1xuXHRcdFx0XHRmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTtcblx0XHRcdFx0Zm4gPSBudWxsO1xuXG5cdFx0XHQvLyAuLi5leGNlcHQgd2hlbiBleGVjdXRpbmcgZnVuY3Rpb24gdmFsdWVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRidWxrID0gZm47XG5cdFx0XHRcdGZuID0gZnVuY3Rpb24oIGVsZW0sIGtleSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRmbiggZWxlbXNbaV0sIGtleSwgcmF3ID8gdmFsdWUgOiB2YWx1ZS5jYWxsKCBlbGVtc1tpXSwgaSwgZm4oIGVsZW1zW2ldLCBrZXkgKSApICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGNoYWluYWJsZSA/XG5cdFx0ZWxlbXMgOlxuXG5cdFx0Ly8gR2V0c1xuXHRcdGJ1bGsgP1xuXHRcdFx0Zm4uY2FsbCggZWxlbXMgKSA6XG5cdFx0XHRsZW4gPyBmbiggZWxlbXNbMF0sIGtleSApIDogZW1wdHlHZXQ7XG59O1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIG9iamVjdCBjYW4gaGF2ZSBkYXRhXG4gKi9cbmpRdWVyeS5hY2NlcHREYXRhID0gZnVuY3Rpb24oIG93bmVyICkge1xuXHQvLyBBY2NlcHRzIG9ubHk6XG5cdC8vICAtIE5vZGVcblx0Ly8gICAgLSBOb2RlLkVMRU1FTlRfTk9ERVxuXHQvLyAgICAtIE5vZGUuRE9DVU1FTlRfTk9ERVxuXHQvLyAgLSBPYmplY3Rcblx0Ly8gICAgLSBBbnlcblx0LyoganNoaW50IC1XMDE4ICovXG5cdHJldHVybiBvd25lci5ub2RlVHlwZSA9PT0gMSB8fCBvd25lci5ub2RlVHlwZSA9PT0gOSB8fCAhKCArb3duZXIubm9kZVR5cGUgKTtcbn07XG5cblxuZnVuY3Rpb24gRGF0YSgpIHtcblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LFxuXHQvLyBPbGQgV2ViS2l0IGRvZXMgbm90IGhhdmUgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zL2ZyZWV6ZSBtZXRob2QsXG5cdC8vIHJldHVybiBuZXcgZW1wdHkgb2JqZWN0IGluc3RlYWQgd2l0aCBubyBbW3NldF1dIGFjY2Vzc29yXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGhpcy5jYWNoZSA9IHt9LCAwLCB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB7fTtcblx0XHR9XG5cdH0pO1xuXG5cdHRoaXMuZXhwYW5kbyA9IGpRdWVyeS5leHBhbmRvICsgRGF0YS51aWQrKztcbn1cblxuRGF0YS51aWQgPSAxO1xuRGF0YS5hY2NlcHRzID0galF1ZXJ5LmFjY2VwdERhdGE7XG5cbkRhdGEucHJvdG90eXBlID0ge1xuXHRrZXk6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHQvLyBXZSBjYW4gYWNjZXB0IGRhdGEgZm9yIG5vbi1lbGVtZW50IG5vZGVzIGluIG1vZGVybiBicm93c2Vycyxcblx0XHQvLyBidXQgd2Ugc2hvdWxkIG5vdCwgc2VlICM4MzM1LlxuXHRcdC8vIEFsd2F5cyByZXR1cm4gdGhlIGtleSBmb3IgYSBmcm96ZW4gb2JqZWN0LlxuXHRcdGlmICggIURhdGEuYWNjZXB0cyggb3duZXIgKSApIHtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZhciBkZXNjcmlwdG9yID0ge30sXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgb3duZXIgb2JqZWN0IGFscmVhZHkgaGFzIGEgY2FjaGUga2V5XG5cdFx0XHR1bmxvY2sgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHQvLyBJZiBub3QsIGNyZWF0ZSBvbmVcblx0XHRpZiAoICF1bmxvY2sgKSB7XG5cdFx0XHR1bmxvY2sgPSBEYXRhLnVpZCsrO1xuXG5cdFx0XHQvLyBTZWN1cmUgaXQgaW4gYSBub24tZW51bWVyYWJsZSwgbm9uLXdyaXRhYmxlIHByb3BlcnR5XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkZXNjcmlwdG9yWyB0aGlzLmV4cGFuZG8gXSA9IHsgdmFsdWU6IHVubG9jayB9O1xuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyggb3duZXIsIGRlc2NyaXB0b3IgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0XG5cdFx0XHQvLyBGYWxsYmFjayB0byBhIGxlc3Mgc2VjdXJlIGRlZmluaXRpb25cblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHRkZXNjcmlwdG9yWyB0aGlzLmV4cGFuZG8gXSA9IHVubG9jaztcblx0XHRcdFx0alF1ZXJ5LmV4dGVuZCggb3duZXIsIGRlc2NyaXB0b3IgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBFbnN1cmUgdGhlIGNhY2hlIG9iamVjdFxuXHRcdGlmICggIXRoaXMuY2FjaGVbIHVubG9jayBdICkge1xuXHRcdFx0dGhpcy5jYWNoZVsgdW5sb2NrIF0gPSB7fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdW5sb2NrO1xuXHR9LFxuXHRzZXQ6IGZ1bmN0aW9uKCBvd25lciwgZGF0YSwgdmFsdWUgKSB7XG5cdFx0dmFyIHByb3AsXG5cdFx0XHQvLyBUaGVyZSBtYXkgYmUgYW4gdW5sb2NrIGFzc2lnbmVkIHRvIHRoaXMgbm9kZSxcblx0XHRcdC8vIGlmIHRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIFwib3duZXJcIiwgY3JlYXRlIG9uZSBpbmxpbmVcblx0XHRcdC8vIGFuZCBzZXQgdGhlIHVubG9jayBhcyB0aG91Z2ggYW4gb3duZXIgZW50cnkgaGFkIGFsd2F5cyBleGlzdGVkXG5cdFx0XHR1bmxvY2sgPSB0aGlzLmtleSggb3duZXIgKSxcblx0XHRcdGNhY2hlID0gdGhpcy5jYWNoZVsgdW5sb2NrIF07XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIGtleSwgdmFsdWUgXSBhcmdzXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGNhY2hlWyBkYXRhIF0gPSB2YWx1ZTtcblxuXHRcdC8vIEhhbmRsZTogWyBvd25lciwgeyBwcm9wZXJ0aWVzIH0gXSBhcmdzXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEZyZXNoIGFzc2lnbm1lbnRzIGJ5IG9iamVjdCBhcmUgc2hhbGxvdyBjb3BpZWRcblx0XHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5leHRlbmQoIHRoaXMuY2FjaGVbIHVubG9jayBdLCBkYXRhICk7XG5cdFx0XHQvLyBPdGhlcndpc2UsIGNvcHkgdGhlIHByb3BlcnRpZXMgb25lLWJ5LW9uZSB0byB0aGUgY2FjaGUgb2JqZWN0XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBwcm9wIGluIGRhdGEgKSB7XG5cdFx0XHRcdFx0Y2FjaGVbIHByb3AgXSA9IGRhdGFbIHByb3AgXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY2FjaGU7XG5cdH0sXG5cdGdldDogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0Ly8gRWl0aGVyIGEgdmFsaWQgY2FjaGUgaXMgZm91bmQsIG9yIHdpbGwgYmUgY3JlYXRlZC5cblx0XHQvLyBOZXcgY2FjaGVzIHdpbGwgYmUgY3JlYXRlZCBhbmQgdGhlIHVubG9jayByZXR1cm5lZCxcblx0XHQvLyBhbGxvd2luZyBkaXJlY3QgYWNjZXNzIHRvIHRoZSBuZXdseSBjcmVhdGVkXG5cdFx0Ly8gZW1wdHkgZGF0YSBvYmplY3QuIEEgdmFsaWQgb3duZXIgb2JqZWN0IG11c3QgYmUgcHJvdmlkZWQuXG5cdFx0dmFyIGNhY2hlID0gdGhpcy5jYWNoZVsgdGhpcy5rZXkoIG93bmVyICkgXTtcblxuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRjYWNoZSA6IGNhY2hlWyBrZXkgXTtcblx0fSxcblx0YWNjZXNzOiBmdW5jdGlvbiggb3duZXIsIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIHN0b3JlZDtcblx0XHQvLyBJbiBjYXNlcyB3aGVyZSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIE5vIGtleSB3YXMgc3BlY2lmaWVkXG5cdFx0Ly8gICAyLiBBIHN0cmluZyBrZXkgd2FzIHNwZWNpZmllZCwgYnV0IG5vIHZhbHVlIHByb3ZpZGVkXG5cdFx0Ly9cblx0XHQvLyBUYWtlIHRoZSBcInJlYWRcIiBwYXRoIGFuZCBhbGxvdyB0aGUgZ2V0IG1ldGhvZCB0byBkZXRlcm1pbmVcblx0XHQvLyB3aGljaCB2YWx1ZSB0byByZXR1cm4sIHJlc3BlY3RpdmVseSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIFRoZSBlbnRpcmUgY2FjaGUgb2JqZWN0XG5cdFx0Ly8gICAyLiBUaGUgZGF0YSBzdG9yZWQgYXQgdGhlIGtleVxuXHRcdC8vXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHQoKGtleSAmJiB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiKSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSApIHtcblxuXHRcdFx0c3RvcmVkID0gdGhpcy5nZXQoIG93bmVyLCBrZXkgKTtcblxuXHRcdFx0cmV0dXJuIHN0b3JlZCAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0c3RvcmVkIDogdGhpcy5nZXQoIG93bmVyLCBqUXVlcnkuY2FtZWxDYXNlKGtleSkgKTtcblx0XHR9XG5cblx0XHQvLyBbKl1XaGVuIHRoZSBrZXkgaXMgbm90IGEgc3RyaW5nLCBvciBib3RoIGEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vIGFyZSBzcGVjaWZpZWQsIHNldCBvciBleHRlbmQgKGV4aXN0aW5nIG9iamVjdHMpIHdpdGggZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBBbiBvYmplY3Qgb2YgcHJvcGVydGllc1xuXHRcdC8vICAgMi4gQSBrZXkgYW5kIHZhbHVlXG5cdFx0Ly9cblx0XHR0aGlzLnNldCggb3duZXIsIGtleSwgdmFsdWUgKTtcblxuXHRcdC8vIFNpbmNlIHRoZSBcInNldFwiIHBhdGggY2FuIGhhdmUgdHdvIHBvc3NpYmxlIGVudHJ5IHBvaW50c1xuXHRcdC8vIHJldHVybiB0aGUgZXhwZWN0ZWQgZGF0YSBiYXNlZCBvbiB3aGljaCBwYXRoIHdhcyB0YWtlblsqXVxuXHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBrZXk7XG5cdH0sXG5cdHJlbW92ZTogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0dmFyIGksIG5hbWUsIGNhbWVsLFxuXHRcdFx0dW5sb2NrID0gdGhpcy5rZXkoIG93bmVyICksXG5cdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGVbIHVubG9jayBdO1xuXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHRoaXMuY2FjaGVbIHVubG9jayBdID0ge307XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGtleXNcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIGtleSApICkge1xuXHRcdFx0XHQvLyBJZiBcIm5hbWVcIiBpcyBhbiBhcnJheSBvZiBrZXlzLi4uXG5cdFx0XHRcdC8vIFdoZW4gZGF0YSBpcyBpbml0aWFsbHkgY3JlYXRlZCwgdmlhIChcImtleVwiLCBcInZhbFwiKSBzaWduYXR1cmUsXG5cdFx0XHRcdC8vIGtleXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlLlxuXHRcdFx0XHQvLyBTaW5jZSB0aGVyZSBpcyBubyB3YXkgdG8gdGVsbCBfaG93XyBhIGtleSB3YXMgYWRkZWQsIHJlbW92ZVxuXHRcdFx0XHQvLyBib3RoIHBsYWluIGtleSBhbmQgY2FtZWxDYXNlIGtleS4gIzEyNzg2XG5cdFx0XHRcdC8vIFRoaXMgd2lsbCBvbmx5IHBlbmFsaXplIHRoZSBhcnJheSBhcmd1bWVudCBwYXRoLlxuXHRcdFx0XHRuYW1lID0ga2V5LmNvbmNhdCgga2V5Lm1hcCggalF1ZXJ5LmNhbWVsQ2FzZSApICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYW1lbCA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXHRcdFx0XHQvLyBUcnkgdGhlIHN0cmluZyBhcyBhIGtleSBiZWZvcmUgYW55IG1hbmlwdWxhdGlvblxuXHRcdFx0XHRpZiAoIGtleSBpbiBjYWNoZSApIHtcblx0XHRcdFx0XHRuYW1lID0gWyBrZXksIGNhbWVsIF07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gSWYgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0cywgdXNlIGl0LlxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgY3JlYXRlIGFuIGFycmF5IGJ5IG1hdGNoaW5nIG5vbi13aGl0ZXNwYWNlXG5cdFx0XHRcdFx0bmFtZSA9IGNhbWVsO1xuXHRcdFx0XHRcdG5hbWUgPSBuYW1lIGluIGNhY2hlID9cblx0XHRcdFx0XHRcdFsgbmFtZSBdIDogKCBuYW1lLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGkgPSBuYW1lLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRkZWxldGUgY2FjaGVbIG5hbWVbIGkgXSBdO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0aGFzRGF0YTogZnVuY3Rpb24oIG93bmVyICkge1xuXHRcdHJldHVybiAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoXG5cdFx0XHR0aGlzLmNhY2hlWyBvd25lclsgdGhpcy5leHBhbmRvIF0gXSB8fCB7fVxuXHRcdCk7XG5cdH0sXG5cdGRpc2NhcmQ6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHRpZiAoIG93bmVyWyB0aGlzLmV4cGFuZG8gXSApIHtcblx0XHRcdGRlbGV0ZSB0aGlzLmNhY2hlWyBvd25lclsgdGhpcy5leHBhbmRvIF0gXTtcblx0XHR9XG5cdH1cbn07XG52YXIgZGF0YV9wcml2ID0gbmV3IERhdGEoKTtcblxudmFyIGRhdGFfdXNlciA9IG5ldyBEYXRhKCk7XG5cblxuXG4vL1x0SW1wbGVtZW50YXRpb24gU3VtbWFyeVxuLy9cbi8vXHQxLiBFbmZvcmNlIEFQSSBzdXJmYWNlIGFuZCBzZW1hbnRpYyBjb21wYXRpYmlsaXR5IHdpdGggMS45LnggYnJhbmNoXG4vL1x0Mi4gSW1wcm92ZSB0aGUgbW9kdWxlJ3MgbWFpbnRhaW5hYmlsaXR5IGJ5IHJlZHVjaW5nIHRoZSBzdG9yYWdlXG4vL1x0XHRwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uXG4vL1x0My4gVXNlIHRoZSBzYW1lIHNpbmdsZSBtZWNoYW5pc20gdG8gc3VwcG9ydCBcInByaXZhdGVcIiBhbmQgXCJ1c2VyXCIgZGF0YS5cbi8vXHQ0LiBfTmV2ZXJfIGV4cG9zZSBcInByaXZhdGVcIiBkYXRhIHRvIHVzZXIgY29kZSAoVE9ETzogRHJvcCBfZGF0YSwgX3JlbW92ZURhdGEpXG4vL1x0NS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpXG4vL1x0Ni4gUHJvdmlkZSBhIGNsZWFyIHBhdGggZm9yIGltcGxlbWVudGF0aW9uIHVwZ3JhZGUgdG8gV2Vha01hcCBpbiAyMDE0XG5cbnZhciByYnJhY2UgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sXG5cdHJtdWx0aURhc2ggPSAvKFtBLVpdKS9nO1xuXG5mdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkge1xuXHR2YXIgbmFtZTtcblxuXHQvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbnRlcm5hbGx5LCB0cnkgdG8gZmV0Y2ggYW55XG5cdC8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZVxuXHRpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdG5hbWUgPSBcImRhdGEtXCIgKyBrZXkucmVwbGFjZSggcm11bHRpRGFzaCwgXCItJDFcIiApLnRvTG93ZXJDYXNlKCk7XG5cdFx0ZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGF0YSA9IGRhdGEgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6XG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJmYWxzZVwiID8gZmFsc2UgOlxuXHRcdFx0XHRcdGRhdGEgPT09IFwibnVsbFwiID8gbnVsbCA6XG5cdFx0XHRcdFx0Ly8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcblx0XHRcdFx0XHQrZGF0YSArIFwiXCIgPT09IGRhdGEgPyArZGF0YSA6XG5cdFx0XHRcdFx0cmJyYWNlLnRlc3QoIGRhdGEgKSA/IGpRdWVyeS5wYXJzZUpTT04oIGRhdGEgKSA6XG5cdFx0XHRcdFx0ZGF0YTtcblx0XHRcdH0gY2F0Y2goIGUgKSB7fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgd2Ugc2V0IHRoZSBkYXRhIHNvIGl0IGlzbid0IGNoYW5nZWQgbGF0ZXJcblx0XHRcdGRhdGFfdXNlci5zZXQoIGVsZW0sIGtleSwgZGF0YSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZGF0YTtcbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cdGhhc0RhdGE6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkYXRhX3VzZXIuaGFzRGF0YSggZWxlbSApIHx8IGRhdGFfcHJpdi5oYXNEYXRhKCBlbGVtICk7XG5cdH0sXG5cblx0ZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFfdXNlci5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRkYXRhX3VzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH0sXG5cblx0Ly8gVE9ETzogTm93IHRoYXQgYWxsIGNhbGxzIHRvIF9kYXRhIGFuZCBfcmVtb3ZlRGF0YSBoYXZlIGJlZW4gcmVwbGFjZWRcblx0Ly8gd2l0aCBkaXJlY3QgY2FsbHMgdG8gZGF0YV9wcml2IG1ldGhvZHMsIHRoZXNlIGNhbiBiZSBkZXByZWNhdGVkLlxuXHRfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdHZhciBpLCBuYW1lLCBkYXRhLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGF0dHJzID0gZWxlbSAmJiBlbGVtLmF0dHJpYnV0ZXM7XG5cblx0XHQvLyBHZXRzIGFsbCB2YWx1ZXNcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFfdXNlci5nZXQoIGVsZW0gKTtcblxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgIWRhdGFfcHJpdi5nZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIgKSApIHtcblx0XHRcdFx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTExK1xuXHRcdFx0XHRcdFx0Ly8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpXG5cdFx0XHRcdFx0XHRpZiAoIGF0dHJzWyBpIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7XG5cdFx0XHRcdFx0XHRcdGlmICggbmFtZS5pbmRleE9mKCBcImRhdGEtXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZS5zbGljZSg1KSApO1xuXHRcdFx0XHRcdFx0XHRcdGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhX3ByaXYuc2V0KCBlbGVtLCBcImhhc0RhdGFBdHRyc1wiLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0cyBtdWx0aXBsZSB2YWx1ZXNcblx0XHRpZiAoIHR5cGVvZiBrZXkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhX3VzZXIuc2V0KCB0aGlzLCBrZXkgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBkYXRhLFxuXHRcdFx0XHRjYW1lbEtleSA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXG5cdFx0XHQvLyBUaGUgY2FsbGluZyBqUXVlcnkgb2JqZWN0IChlbGVtZW50IG1hdGNoZXMpIGlzIG5vdCBlbXB0eVxuXHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdC8vIGB2YWx1ZWAgcGFyYW1ldGVyIHdhcyBub3QgdW5kZWZpbmVkLiBBbiBlbXB0eSBqUXVlcnkgb2JqZWN0XG5cdFx0XHQvLyB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBmb3IgZWxlbSA9IHRoaXNbIDAgXSB3aGljaCB3aWxsXG5cdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0aWYgKCBlbGVtICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gZ2V0IGRhdGEgZnJvbSB0aGUgY2FjaGVcblx0XHRcdFx0Ly8gd2l0aCB0aGUga2V5IGFzLWlzXG5cdFx0XHRcdGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGdldCBkYXRhIGZyb20gdGhlIGNhY2hlXG5cdFx0XHRcdC8vIHdpdGggdGhlIGtleSBjYW1lbGl6ZWRcblx0XHRcdFx0ZGF0YSA9IGRhdGFfdXNlci5nZXQoIGVsZW0sIGNhbWVsS2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBcImRpc2NvdmVyXCIgdGhlIGRhdGEgaW5cblx0XHRcdFx0Ly8gSFRNTDUgY3VzdG9tIGRhdGEtKiBhdHRyc1xuXHRcdFx0XHRkYXRhID0gZGF0YUF0dHIoIGVsZW0sIGNhbWVsS2V5LCB1bmRlZmluZWQgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBXZSB0cmllZCByZWFsbHkgaGFyZCwgYnV0IHRoZSBkYXRhIGRvZXNuJ3QgZXhpc3QuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IHRoZSBkYXRhLi4uXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIEZpcnN0LCBhdHRlbXB0IHRvIHN0b3JlIGEgY29weSBvciByZWZlcmVuY2Ugb2YgYW55XG5cdFx0XHRcdC8vIGRhdGEgdGhhdCBtaWdodCd2ZSBiZWVuIHN0b3JlIHdpdGggYSBjYW1lbENhc2VkIGtleS5cblx0XHRcdFx0dmFyIGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCB0aGlzLCBjYW1lbEtleSApO1xuXG5cdFx0XHRcdC8vIEZvciBIVE1MNSBkYXRhLSogYXR0cmlidXRlIGludGVyb3AsIHdlIGhhdmUgdG9cblx0XHRcdFx0Ly8gc3RvcmUgcHJvcGVydHkgbmFtZXMgd2l0aCBkYXNoZXMgaW4gYSBjYW1lbENhc2UgZm9ybS5cblx0XHRcdFx0Ly8gVGhpcyBtaWdodCBub3QgYXBwbHkgdG8gYWxsIHByb3BlcnRpZXMuLi4qXG5cdFx0XHRcdGRhdGFfdXNlci5zZXQoIHRoaXMsIGNhbWVsS2V5LCB2YWx1ZSApO1xuXG5cdFx0XHRcdC8vICouLi4gSW4gdGhlIGNhc2Ugb2YgcHJvcGVydGllcyB0aGF0IG1pZ2h0IF9hY3R1YWxseV9cblx0XHRcdFx0Ly8gaGF2ZSBkYXNoZXMsIHdlIG5lZWQgdG8gYWxzbyBzdG9yZSBhIGNvcHkgb2YgdGhhdFxuXHRcdFx0XHQvLyB1bmNoYW5nZWQgcHJvcGVydHkuXG5cdFx0XHRcdGlmICgga2V5LmluZGV4T2YoXCItXCIpICE9PSAtMSAmJiBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0ZGF0YV91c2VyLnNldCggdGhpcywga2V5LCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEsIG51bGwsIHRydWUgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRkYXRhX3VzZXIucmVtb3ZlKCB0aGlzLCBrZXkgKTtcblx0XHR9KTtcblx0fVxufSk7XG5cblxualF1ZXJ5LmV4dGVuZCh7XG5cdHF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgcXVldWU7XG5cblx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHR0eXBlID0gKCB0eXBlIHx8IFwiZnhcIiApICsgXCJxdWV1ZVwiO1xuXHRcdFx0cXVldWUgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdC8vIFNwZWVkIHVwIGRlcXVldWUgYnkgZ2V0dGluZyBvdXQgcXVpY2tseSBpZiB0aGlzIGlzIGp1c3QgYSBsb29rdXBcblx0XHRcdGlmICggZGF0YSApIHtcblx0XHRcdFx0aWYgKCAhcXVldWUgfHwgalF1ZXJ5LmlzQXJyYXkoIGRhdGEgKSApIHtcblx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIHR5cGUsIGpRdWVyeS5tYWtlQXJyYXkoZGF0YSkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBkYXRhICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBxdWV1ZSB8fCBbXTtcblx0XHR9XG5cdH0sXG5cblx0ZGVxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCBlbGVtLCB0eXBlICksXG5cdFx0XHRzdGFydExlbmd0aCA9IHF1ZXVlLmxlbmd0aCxcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKSxcblx0XHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCB0eXBlICksXG5cdFx0XHRuZXh0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCBlbGVtLCB0eXBlICk7XG5cdFx0XHR9O1xuXG5cdFx0Ly8gSWYgdGhlIGZ4IHF1ZXVlIGlzIGRlcXVldWVkLCBhbHdheXMgcmVtb3ZlIHRoZSBwcm9ncmVzcyBzZW50aW5lbFxuXHRcdGlmICggZm4gPT09IFwiaW5wcm9ncmVzc1wiICkge1xuXHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0c3RhcnRMZW5ndGgtLTtcblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXG5cdFx0XHQvLyBBZGQgYSBwcm9ncmVzcyBzZW50aW5lbCB0byBwcmV2ZW50IHRoZSBmeCBxdWV1ZSBmcm9tIGJlaW5nXG5cdFx0XHQvLyBhdXRvbWF0aWNhbGx5IGRlcXVldWVkXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwiZnhcIiApIHtcblx0XHRcdFx0cXVldWUudW5zaGlmdCggXCJpbnByb2dyZXNzXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2xlYXIgdXAgdGhlIGxhc3QgcXVldWUgc3RvcCBmdW5jdGlvblxuXHRcdFx0ZGVsZXRlIGhvb2tzLnN0b3A7XG5cdFx0XHRmbi5jYWxsKCBlbGVtLCBuZXh0LCBob29rcyApO1xuXHRcdH1cblxuXHRcdGlmICggIXN0YXJ0TGVuZ3RoICYmIGhvb2tzICkge1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBOb3QgcHVibGljIC0gZ2VuZXJhdGUgYSBxdWV1ZUhvb2tzIG9iamVjdCwgb3IgcmV0dXJuIHRoZSBjdXJyZW50IG9uZVxuXHRfcXVldWVIb29rczogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dmFyIGtleSA9IHR5cGUgKyBcInF1ZXVlSG9va3NcIjtcblx0XHRyZXR1cm4gZGF0YV9wcml2LmdldCggZWxlbSwga2V5ICkgfHwgZGF0YV9wcml2LmFjY2VzcyggZWxlbSwga2V5LCB7XG5cdFx0XHRlbXB0eTogalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgWyB0eXBlICsgXCJxdWV1ZVwiLCBrZXkgXSApO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRxdWV1ZTogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHNldHRlciA9IDI7XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZGF0YSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gXCJmeFwiO1xuXHRcdFx0c2V0dGVyLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgc2V0dGVyICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1swXSwgdHlwZSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBkYXRhID09PSB1bmRlZmluZWQgP1xuXHRcdFx0dGhpcyA6XG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgZGF0YSApO1xuXG5cdFx0XHRcdC8vIEVuc3VyZSBhIGhvb2tzIGZvciB0aGlzIHF1ZXVlXG5cdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggdGhpcywgdHlwZSApO1xuXG5cdFx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICYmIHF1ZXVlWzBdICE9PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fSxcblx0ZGVxdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0fSk7XG5cdH0sXG5cdGNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0fSxcblx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHQvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdClcblx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHR2YXIgdG1wLFxuXHRcdFx0Y291bnQgPSAxLFxuXHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdGkgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0ZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0bXAgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtZW50c1sgaSBdLCB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgKTtcblx0XHRcdGlmICggdG1wICYmIHRtcC5lbXB0eSApIHtcblx0XHRcdFx0Y291bnQrKztcblx0XHRcdFx0dG1wLmVtcHR5LmFkZCggcmVzb2x2ZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXNvbHZlKCk7XG5cdFx0cmV0dXJuIGRlZmVyLnByb21pc2UoIG9iaiApO1xuXHR9XG59KTtcbnZhciBwbnVtID0gKC9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvKS5zb3VyY2U7XG5cbnZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblxudmFyIGlzSGlkZGVuID0gZnVuY3Rpb24oIGVsZW0sIGVsICkge1xuXHRcdC8vIGlzSGlkZGVuIG1pZ2h0IGJlIGNhbGxlZCBmcm9tIGpRdWVyeSNmaWx0ZXIgZnVuY3Rpb247XG5cdFx0Ly8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50XG5cdFx0ZWxlbSA9IGVsIHx8IGVsZW07XG5cdFx0cmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgPT09IFwibm9uZVwiIHx8ICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXHR9O1xuXG52YXIgcmNoZWNrYWJsZVR5cGUgPSAoL14oPzpjaGVja2JveHxyYWRpbykkL2kpO1xuXG5cblxuKGZ1bmN0aW9uKCkge1xuXHR2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0ZGl2ID0gZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApLFxuXHRcdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cblx0Ly8gU3VwcG9ydDogU2FmYXJpPD01LjFcblx0Ly8gQ2hlY2sgc3RhdGUgbG9zdCBpZiB0aGUgbmFtZSBpcyBzZXQgKCMxMTIxNylcblx0Ly8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKVxuXHQvLyBgbmFtZWAgYW5kIGB0eXBlYCBtdXN0IHVzZSAuc2V0QXR0cmlidXRlIGZvciBXV0EgKCMxNDkwMSlcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJyYWRpb1wiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwidFwiICk7XG5cblx0ZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApO1xuXG5cdC8vIFN1cHBvcnQ6IFNhZmFyaTw9NS4xLCBBbmRyb2lkPDQuMlxuXHQvLyBPbGRlciBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHNcblx0c3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkO1xuXG5cdC8vIFN1cHBvcnQ6IElFPD0xMStcblx0Ly8gTWFrZSBzdXJlIHRleHRhcmVhIChhbmQgY2hlY2tib3gpIGRlZmF1bHRWYWx1ZSBpcyBwcm9wZXJseSBjbG9uZWRcblx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gISFkaXYuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTtcbn0pKCk7XG52YXIgc3RydW5kZWZpbmVkID0gdHlwZW9mIHVuZGVmaW5lZDtcblxuXG5cbnN1cHBvcnQuZm9jdXNpbkJ1YmJsZXMgPSBcIm9uZm9jdXNpblwiIGluIHdpbmRvdztcblxuXG52YXJcblx0cmtleUV2ZW50ID0gL15rZXkvLFxuXHRybW91c2VFdmVudCA9IC9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLFxuXHRyZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxcblx0cnR5cGVuYW1lc3BhY2UgPSAvXihbXi5dKikoPzpcXC4oLispfCkkLztcblxuZnVuY3Rpb24gcmV0dXJuVHJ1ZSgpIHtcblx0cmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJldHVybkZhbHNlKCkge1xuXHRyZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHR9IGNhdGNoICggZXJyICkgeyB9XG59XG5cbi8qXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBldmVudHMgLS0gbm90IHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuXG4gKiBQcm9wcyB0byBEZWFuIEVkd2FyZHMnIGFkZEV2ZW50IGxpYnJhcnkgZm9yIG1hbnkgb2YgdGhlIGlkZWFzLlxuICovXG5qUXVlcnkuZXZlbnQgPSB7XG5cblx0Z2xvYmFsOiB7fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgZGF0YSwgc2VsZWN0b3IgKSB7XG5cblx0XHR2YXIgaGFuZGxlT2JqSW4sIGV2ZW50SGFuZGxlLCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YV9wcml2LmdldCggZWxlbSApO1xuXG5cdFx0Ly8gRG9uJ3QgYXR0YWNoIGV2ZW50cyB0byBub0RhdGEgb3IgdGV4dC9jb21tZW50IG5vZGVzIChidXQgYWxsb3cgcGxhaW4gb2JqZWN0cylcblx0XHRpZiAoICFlbGVtRGF0YSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXJcblx0XHRpZiAoIGhhbmRsZXIuaGFuZGxlciApIHtcblx0XHRcdGhhbmRsZU9iakluID0gaGFuZGxlcjtcblx0XHRcdGhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyO1xuXHRcdFx0c2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3Rvcjtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXJcblx0XHRpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRoYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrO1xuXHRcdH1cblxuXHRcdC8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3Rcblx0XHRpZiAoICEoZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzKSApIHtcblx0XHRcdGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyA9IHt9O1xuXHRcdH1cblx0XHRpZiAoICEoZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUpICkge1xuXHRcdFx0ZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgPSBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0Ly8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmRcblx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gc3RydW5kZWZpbmVkICYmIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSA/XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBlbGVtLCBhcmd1bWVudHMgKSA6IHVuZGVmaW5lZDtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIG11bHRpcGxlIGV2ZW50cyBzZXBhcmF0ZWQgYnkgYSBzcGFjZVxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1t0XSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFRoZXJlICptdXN0KiBiZSBhIHR5cGUsIG5vIGF0dGFjaGluZyBuYW1lc3BhY2Utb25seSBoYW5kbGVyc1xuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGV2ZW50IGNoYW5nZXMgaXRzIHR5cGUsIHVzZSB0aGUgc3BlY2lhbCBldmVudCBoYW5kbGVycyBmb3IgdGhlIGNoYW5nZWQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIElmIHNlbGVjdG9yIGRlZmluZWQsIGRldGVybWluZSBzcGVjaWFsIGV2ZW50IGFwaSB0eXBlLCBvdGhlcndpc2UgZ2l2ZW4gdHlwZVxuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXG5cdFx0XHQvLyBVcGRhdGUgc3BlY2lhbCBiYXNlZCBvbiBuZXdseSByZXNldCB0eXBlXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblxuXHRcdFx0Ly8gaGFuZGxlT2JqIGlzIHBhc3NlZCB0byBhbGwgZXZlbnQgaGFuZGxlcnNcblx0XHRcdGhhbmRsZU9iaiA9IGpRdWVyeS5leHRlbmQoe1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRvcmlnVHlwZTogb3JpZ1R5cGUsXG5cdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdGhhbmRsZXI6IGhhbmRsZXIsXG5cdFx0XHRcdGd1aWQ6IGhhbmRsZXIuZ3VpZCxcblx0XHRcdFx0c2VsZWN0b3I6IHNlbGVjdG9yLFxuXHRcdFx0XHRuZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLFxuXHRcdFx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbihcIi5cIilcblx0XHRcdH0sIGhhbmRsZU9iakluICk7XG5cblx0XHRcdC8vIEluaXQgdGhlIGV2ZW50IGhhbmRsZXIgcXVldWUgaWYgd2UncmUgdGhlIGZpcnN0XG5cdFx0XHRpZiAoICEoaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSkgKSB7XG5cdFx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcblx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cblx0XHRcdFx0Ly8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG5cdFx0XHRcdGlmICggIXNwZWNpYWwuc2V0dXAgfHwgc3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdFx0XHRcdGVsZW0uYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgZXZlbnRIYW5kbGUsIGZhbHNlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggc3BlY2lhbC5hZGQgKSB7XG5cdFx0XHRcdHNwZWNpYWwuYWRkLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXG5cdFx0XHRcdGlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udFxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cblx0XHRcdGpRdWVyeS5ldmVudC5nbG9iYWxbIHR5cGUgXSA9IHRydWU7XG5cdFx0fVxuXG5cdH0sXG5cblx0Ly8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50XG5cdHJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7XG5cblx0XHR2YXIgaiwgb3JpZ0NvdW50LCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YV9wcml2Lmhhc0RhdGEoIGVsZW0gKSAmJiBkYXRhX3ByaXYuZ2V0KCBlbGVtICk7XG5cblx0XHRpZiAoICFlbGVtRGF0YSB8fCAhKGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cykgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1t0XSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFVuYmluZCBhbGwgZXZlbnRzIChvbiB0aGlzIG5hbWVzcGFjZSwgaWYgcHJvdmlkZWQpIGZvciB0aGUgZWxlbWVudFxuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSArIHR5cGVzWyB0IF0sIGhhbmRsZXIsIHNlbGVjdG9yLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXHRcdFx0aGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSB8fCBbXTtcblx0XHRcdHRtcCA9IHRtcFsyXSAmJiBuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikgKyBcIihcXFxcLnwkKVwiICk7XG5cblx0XHRcdC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcblx0XHRcdG9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuXHRcdFx0XHRpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG5cdFx0XHRcdFx0KCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcblx0XHRcdFx0XHQoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmXG5cdFx0XHRcdFx0KCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gXCIqKlwiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkge1xuXHRcdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaiwgMSApO1xuXG5cdFx0XHRcdFx0aWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LS07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggc3BlY2lhbC5yZW1vdmUgKSB7XG5cdFx0XHRcdFx0XHRzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVtb3ZlIGdlbmVyaWMgZXZlbnQgaGFuZGxlciBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZyBhbmQgbm8gbW9yZSBoYW5kbGVycyBleGlzdFxuXHRcdFx0Ly8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpXG5cdFx0XHRpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnRlYXJkb3duIHx8IHNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZWxlbURhdGEuaGFuZGxlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZWxldGUgZXZlbnRzWyB0eXBlIF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBleHBhbmRvIGlmIGl0J3Mgbm8gbG9uZ2VyIHVzZWRcblx0XHRpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHtcblx0XHRcdGRlbGV0ZSBlbGVtRGF0YS5oYW5kbGU7XG5cdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBcImV2ZW50c1wiICk7XG5cdFx0fVxuXHR9LFxuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCBldmVudCwgZGF0YSwgZWxlbSwgb25seUhhbmRsZXJzICkge1xuXG5cdFx0dmFyIGksIGN1ciwgdG1wLCBidWJibGVUeXBlLCBvbnR5cGUsIGhhbmRsZSwgc3BlY2lhbCxcblx0XHRcdGV2ZW50UGF0aCA9IFsgZWxlbSB8fCBkb2N1bWVudCBdLFxuXHRcdFx0dHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgXCJ0eXBlXCIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCxcblx0XHRcdG5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwibmFtZXNwYWNlXCIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdChcIi5cIikgOiBbXTtcblxuXHRcdGN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50O1xuXG5cdFx0Ly8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3dcblx0XHRpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlLmluZGV4T2YoXCIuXCIpID49IDAgKSB7XG5cdFx0XHQvLyBOYW1lc3BhY2VkIHRyaWdnZXI7IGNyZWF0ZSBhIHJlZ2V4cCB0byBtYXRjaCBldmVudCB0eXBlIGluIGhhbmRsZSgpXG5cdFx0XHRuYW1lc3BhY2VzID0gdHlwZS5zcGxpdChcIi5cIik7XG5cdFx0XHR0eXBlID0gbmFtZXNwYWNlcy5zaGlmdCgpO1xuXHRcdFx0bmFtZXNwYWNlcy5zb3J0KCk7XG5cdFx0fVxuXHRcdG9udHlwZSA9IHR5cGUuaW5kZXhPZihcIjpcIikgPCAwICYmIFwib25cIiArIHR5cGU7XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmdcblx0XHRldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cblx0XHRcdGV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gXCJvYmplY3RcIiAmJiBldmVudCApO1xuXG5cdFx0Ly8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuXHRcdGV2ZW50LmlzVHJpZ2dlciA9IG9ubHlIYW5kbGVycyA/IDIgOiAzO1xuXHRcdGV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbihcIi5cIik7XG5cdFx0ZXZlbnQubmFtZXNwYWNlX3JlID0gZXZlbnQubmFtZXNwYWNlID9cblx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKSArIFwiKFxcXFwufCQpXCIgKSA6XG5cdFx0XHRudWxsO1xuXG5cdFx0Ly8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkXG5cdFx0ZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkO1xuXHRcdGlmICggIWV2ZW50LnRhcmdldCApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGVsZW07XG5cdFx0fVxuXG5cdFx0Ly8gQ2xvbmUgYW55IGluY29taW5nIGRhdGEgYW5kIHByZXBlbmQgdGhlIGV2ZW50LCBjcmVhdGluZyB0aGUgaGFuZGxlciBhcmcgbGlzdFxuXHRcdGRhdGEgPSBkYXRhID09IG51bGwgP1xuXHRcdFx0WyBldmVudCBdIDpcblx0XHRcdGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEsIFsgZXZlbnQgXSApO1xuXG5cdFx0Ly8gQWxsb3cgc3BlY2lhbCBldmVudHMgdG8gZHJhdyBvdXRzaWRlIHRoZSBsaW5lc1xuXHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiBzcGVjaWFsLnRyaWdnZXIgJiYgc3BlY2lhbC50cmlnZ2VyLmFwcGx5KCBlbGVtLCBkYXRhICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBldmVudCBwcm9wYWdhdGlvbiBwYXRoIGluIGFkdmFuY2UsIHBlciBXM0MgZXZlbnRzIHNwZWMgKCM5OTUxKVxuXHRcdC8vIEJ1YmJsZSB1cCB0byBkb2N1bWVudCwgdGhlbiB0byB3aW5kb3c7IHdhdGNoIGZvciBhIGdsb2JhbCBvd25lckRvY3VtZW50IHZhciAoIzk3MjQpXG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmICFzcGVjaWFsLm5vQnViYmxlICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0YnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG5cdFx0XHRpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkge1xuXHRcdFx0XHRjdXIgPSBjdXIucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIGN1ciApO1xuXHRcdFx0XHR0bXAgPSBjdXI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKVxuXHRcdFx0aWYgKCB0bXAgPT09IChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aFxuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKGN1ciA9IGV2ZW50UGF0aFtpKytdKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuXHRcdFx0ZXZlbnQudHlwZSA9IGkgPiAxID9cblx0XHRcdFx0YnViYmxlVHlwZSA6XG5cdFx0XHRcdHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblxuXHRcdFx0Ly8galF1ZXJ5IGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9ICggZGF0YV9wcml2LmdldCggY3VyLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdICYmIGRhdGFfcHJpdi5nZXQoIGN1ciwgXCJoYW5kbGVcIiApO1xuXHRcdFx0aWYgKCBoYW5kbGUgKSB7XG5cdFx0XHRcdGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE5hdGl2ZSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSBvbnR5cGUgJiYgY3VyWyBvbnR5cGUgXTtcblx0XHRcdGlmICggaGFuZGxlICYmIGhhbmRsZS5hcHBseSAmJiBqUXVlcnkuYWNjZXB0RGF0YSggY3VyICkgKSB7XG5cdFx0XHRcdGV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGV2ZW50LnR5cGUgPSB0eXBlO1xuXG5cdFx0Ly8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vd1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cblx0XHRcdGlmICggKCFzcGVjaWFsLl9kZWZhdWx0IHx8IHNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoIGV2ZW50UGF0aC5wb3AoKSwgZGF0YSApID09PSBmYWxzZSkgJiZcblx0XHRcdFx0alF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcblxuXHRcdFx0XHQvLyBDYWxsIGEgbmF0aXZlIERPTSBtZXRob2Qgb24gdGhlIHRhcmdldCB3aXRoIHRoZSBzYW1lIG5hbWUgbmFtZSBhcyB0aGUgZXZlbnQuXG5cdFx0XHRcdC8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MClcblx0XHRcdFx0aWYgKCBvbnR5cGUgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIGVsZW1bIHR5cGUgXSApICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2Rcblx0XHRcdFx0XHR0bXAgPSBlbGVtWyBvbnR5cGUgXTtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSBudWxsO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFByZXZlbnQgcmUtdHJpZ2dlcmluZyBvZiB0aGUgc2FtZSBldmVudCwgc2luY2Ugd2UgYWxyZWFkeSBidWJibGVkIGl0IGFib3ZlXG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7XG5cdFx0XHRcdFx0ZWxlbVsgdHlwZSBdKCk7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSB0bXA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRkaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0Ly8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG5cdFx0ZXZlbnQgPSBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApO1xuXG5cdFx0dmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLFxuXHRcdFx0aGFuZGxlclF1ZXVlID0gW10sXG5cdFx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksXG5cdFx0XHRoYW5kbGVycyA9ICggZGF0YV9wcml2LmdldCggdGhpcywgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9O1xuXG5cdFx0Ly8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnRcblx0XHRhcmdzWzBdID0gZXZlbnQ7XG5cdFx0ZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzO1xuXG5cdFx0Ly8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZFxuXHRcdGlmICggc3BlY2lhbC5wcmVEaXNwYXRjaCAmJiBzcGVjaWFsLnByZURpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBoYW5kbGVyc1xuXHRcdGhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTtcblxuXHRcdC8vIFJ1biBkZWxlZ2F0ZXMgZmlyc3Q7IHRoZXkgbWF5IHdhbnQgdG8gc3RvcCBwcm9wYWdhdGlvbiBiZW5lYXRoIHVzXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAobWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0pICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0ZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblxuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoIChoYW5kbGVPYmogPSBtYXRjaGVkLmhhbmRsZXJzWyBqKysgXSkgJiYgIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cblx0XHRcdFx0Ly8gVHJpZ2dlcmVkIGV2ZW50IG11c3QgZWl0aGVyIDEpIGhhdmUgbm8gbmFtZXNwYWNlLCBvciAyKSBoYXZlIG5hbWVzcGFjZShzKVxuXHRcdFx0XHQvLyBhIHN1YnNldCBvciBlcXVhbCB0byB0aG9zZSBpbiB0aGUgYm91bmQgZXZlbnQgKGJvdGggY2FuIGhhdmUgbm8gbmFtZXNwYWNlKS5cblx0XHRcdFx0aWYgKCAhZXZlbnQubmFtZXNwYWNlX3JlIHx8IGV2ZW50Lm5hbWVzcGFjZV9yZS50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSB7XG5cblx0XHRcdFx0XHRldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG5cdFx0XHRcdFx0ZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhO1xuXG5cdFx0XHRcdFx0cmV0ID0gKCAoalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9KS5oYW5kbGUgfHwgaGFuZGxlT2JqLmhhbmRsZXIgKVxuXHRcdFx0XHRcdFx0XHQuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCByZXQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdGlmICggKGV2ZW50LnJlc3VsdCA9IHJldCkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG5cdFx0aWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHtcblx0XHRcdHNwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRoYW5kbGVyczogZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVycyApIHtcblx0XHR2YXIgaSwgbWF0Y2hlcywgc2VsLCBoYW5kbGVPYmosXG5cdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdGRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LFxuXHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0Ly8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuXHRcdC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICgjMTMxODApXG5cdFx0Ly8gQXZvaWQgbm9uLWxlZnQtY2xpY2sgYnViYmxpbmcgaW4gRmlyZWZveCAoIzM4NjEpXG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50ICYmIGN1ci5ub2RlVHlwZSAmJiAoIWV2ZW50LmJ1dHRvbiB8fCBldmVudC50eXBlICE9PSBcImNsaWNrXCIpICkge1xuXG5cdFx0XHRmb3IgKCA7IGN1ciAhPT0gdGhpczsgY3VyID0gY3VyLnBhcmVudE5vZGUgfHwgdGhpcyApIHtcblxuXHRcdFx0XHQvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcblx0XHRcdFx0aWYgKCBjdXIuZGlzYWJsZWQgIT09IHRydWUgfHwgZXZlbnQudHlwZSAhPT0gXCJjbGlja1wiICkge1xuXHRcdFx0XHRcdG1hdGNoZXMgPSBbXTtcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHtcblx0XHRcdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpXG5cdFx0XHRcdFx0XHRzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID49IDAgOlxuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXNbIHNlbCBdICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG1hdGNoZXMubGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goeyBlbGVtOiBjdXIsIGhhbmRsZXJzOiBtYXRjaGVzIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCB0aGUgcmVtYWluaW5nIChkaXJlY3RseS1ib3VuZCkgaGFuZGxlcnNcblx0XHRpZiAoIGRlbGVnYXRlQ291bnQgPCBoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRoYW5kbGVyUXVldWUucHVzaCh7IGVsZW06IHRoaXMsIGhhbmRsZXJzOiBoYW5kbGVycy5zbGljZSggZGVsZWdhdGVDb3VudCApIH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBoYW5kbGVyUXVldWU7XG5cdH0sXG5cblx0Ly8gSW5jbHVkZXMgc29tZSBldmVudCBwcm9wcyBzaGFyZWQgYnkgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnRcblx0cHJvcHM6IFwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoXCIuc3BsaXQoXCIgXCIpLFxuXG5cdGZpeEhvb2tzOiB7fSxcblxuXHRrZXlIb29rczoge1xuXHRcdHByb3BzOiBcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksXG5cdFx0ZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXG5cdFx0XHQvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcblx0XHRcdGlmICggZXZlbnQud2hpY2ggPT0gbnVsbCApIHtcblx0XHRcdFx0ZXZlbnQud2hpY2ggPSBvcmlnaW5hbC5jaGFyQ29kZSAhPSBudWxsID8gb3JpZ2luYWwuY2hhckNvZGUgOiBvcmlnaW5hbC5rZXlDb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZXZlbnQ7XG5cdFx0fVxuXHR9LFxuXG5cdG1vdXNlSG9va3M6IHtcblx0XHRwcm9wczogXCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksXG5cdFx0ZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXHRcdFx0dmFyIGV2ZW50RG9jLCBkb2MsIGJvZHksXG5cdFx0XHRcdGJ1dHRvbiA9IG9yaWdpbmFsLmJ1dHRvbjtcblxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHBhZ2VYL1kgaWYgbWlzc2luZyBhbmQgY2xpZW50WC9ZIGF2YWlsYWJsZVxuXHRcdFx0aWYgKCBldmVudC5wYWdlWCA9PSBudWxsICYmIG9yaWdpbmFsLmNsaWVudFggIT0gbnVsbCApIHtcblx0XHRcdFx0ZXZlbnREb2MgPSBldmVudC50YXJnZXQub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudDtcblx0XHRcdFx0ZG9jID0gZXZlbnREb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdFx0XHRib2R5ID0gZXZlbnREb2MuYm9keTtcblxuXHRcdFx0XHRldmVudC5wYWdlWCA9IG9yaWdpbmFsLmNsaWVudFggKyAoIGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwICkgLSAoIGRvYyAmJiBkb2MuY2xpZW50TGVmdCB8fCBib2R5ICYmIGJvZHkuY2xpZW50TGVmdCB8fCAwICk7XG5cdFx0XHRcdGV2ZW50LnBhZ2VZID0gb3JpZ2luYWwuY2xpZW50WSArICggZG9jICYmIGRvYy5zY3JvbGxUb3AgIHx8IGJvZHkgJiYgYm9keS5zY3JvbGxUb3AgIHx8IDAgKSAtICggZG9jICYmIGRvYy5jbGllbnRUb3AgIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgIHx8IDAgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodFxuXHRcdFx0Ly8gTm90ZTogYnV0dG9uIGlzIG5vdCBub3JtYWxpemVkLCBzbyBkb24ndCB1c2UgaXRcblx0XHRcdGlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRldmVudC53aGljaCA9ICggYnV0dG9uICYgMSA/IDEgOiAoIGJ1dHRvbiAmIDIgPyAzIDogKCBidXR0b24gJiA0ID8gMiA6IDAgKSApICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cdH0sXG5cblx0Zml4OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSApIHtcblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgYSB3cml0YWJsZSBjb3B5IG9mIHRoZSBldmVudCBvYmplY3QgYW5kIG5vcm1hbGl6ZSBzb21lIHByb3BlcnRpZXNcblx0XHR2YXIgaSwgcHJvcCwgY29weSxcblx0XHRcdHR5cGUgPSBldmVudC50eXBlLFxuXHRcdFx0b3JpZ2luYWxFdmVudCA9IGV2ZW50LFxuXHRcdFx0Zml4SG9vayA9IHRoaXMuZml4SG9va3NbIHR5cGUgXTtcblxuXHRcdGlmICggIWZpeEhvb2sgKSB7XG5cdFx0XHR0aGlzLmZpeEhvb2tzWyB0eXBlIF0gPSBmaXhIb29rID1cblx0XHRcdFx0cm1vdXNlRXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5tb3VzZUhvb2tzIDpcblx0XHRcdFx0cmtleUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMua2V5SG9va3MgOlxuXHRcdFx0XHR7fTtcblx0XHR9XG5cdFx0Y29weSA9IGZpeEhvb2sucHJvcHMgPyB0aGlzLnByb3BzLmNvbmNhdCggZml4SG9vay5wcm9wcyApIDogdGhpcy5wcm9wcztcblxuXHRcdGV2ZW50ID0gbmV3IGpRdWVyeS5FdmVudCggb3JpZ2luYWxFdmVudCApO1xuXG5cdFx0aSA9IGNvcHkubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0cHJvcCA9IGNvcHlbIGkgXTtcblx0XHRcdGV2ZW50WyBwcm9wIF0gPSBvcmlnaW5hbEV2ZW50WyBwcm9wIF07XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogQ29yZG92YSAyLjUgKFdlYktpdCkgKCMxMzI1NSlcblx0XHQvLyBBbGwgZXZlbnRzIHNob3VsZCBoYXZlIGEgdGFyZ2V0OyBDb3Jkb3ZhIGRldmljZXJlYWR5IGRvZXNuJ3Rcblx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBkb2N1bWVudDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgNi4wKywgQ2hyb21lPDI4XG5cdFx0Ly8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0Mylcblx0XHRpZiAoIGV2ZW50LnRhcmdldC5ub2RlVHlwZSA9PT0gMyApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmaXhIb29rLmZpbHRlciA/IGZpeEhvb2suZmlsdGVyKCBldmVudCwgb3JpZ2luYWxFdmVudCApIDogZXZlbnQ7XG5cdH0sXG5cblx0c3BlY2lhbDoge1xuXHRcdGxvYWQ6IHtcblx0XHRcdC8vIFByZXZlbnQgdHJpZ2dlcmVkIGltYWdlLmxvYWQgZXZlbnRzIGZyb20gYnViYmxpbmcgdG8gd2luZG93LmxvYWRcblx0XHRcdG5vQnViYmxlOiB0cnVlXG5cdFx0fSxcblx0XHRmb2N1czoge1xuXHRcdFx0Ly8gRmlyZSBuYXRpdmUgZXZlbnQgaWYgcG9zc2libGUgc28gYmx1ci9mb2N1cyBzZXF1ZW5jZSBpcyBjb3JyZWN0XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7XG5cdFx0XHRcdFx0dGhpcy5mb2N1cygpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c2luXCJcblx0XHR9LFxuXHRcdGJsdXI6IHtcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMgPT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5ibHVyICkge1xuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c291dFwiXG5cdFx0fSxcblx0XHRjbGljazoge1xuXHRcdFx0Ly8gRm9yIGNoZWNrYm94LCBmaXJlIG5hdGl2ZSBldmVudCBzbyBjaGVja2VkIHN0YXRlIHdpbGwgYmUgcmlnaHRcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHRoaXMuY2xpY2sgJiYgalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR0aGlzLmNsaWNrKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBGb3IgY3Jvc3MtYnJvd3NlciBjb25zaXN0ZW5jeSwgZG9uJ3QgZmlyZSBuYXRpdmUgLmNsaWNrKCkgb24gbGlua3Ncblx0XHRcdF9kZWZhdWx0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkubm9kZU5hbWUoIGV2ZW50LnRhcmdldCwgXCJhXCIgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0YmVmb3JldW5sb2FkOiB7XG5cdFx0XHRwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDIwK1xuXHRcdFx0XHQvLyBGaXJlZm94IGRvZXNuJ3QgYWxlcnQgaWYgdGhlIHJldHVyblZhbHVlIGZpZWxkIGlzIG5vdCBzZXQuXG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgZXZlbnQub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdHNpbXVsYXRlOiBmdW5jdGlvbiggdHlwZSwgZWxlbSwgZXZlbnQsIGJ1YmJsZSApIHtcblx0XHQvLyBQaWdneWJhY2sgb24gYSBkb25vciBldmVudCB0byBzaW11bGF0ZSBhIGRpZmZlcmVudCBvbmUuXG5cdFx0Ly8gRmFrZSBvcmlnaW5hbEV2ZW50IHRvIGF2b2lkIGRvbm9yJ3Mgc3RvcFByb3BhZ2F0aW9uLCBidXQgaWYgdGhlXG5cdFx0Ly8gc2ltdWxhdGVkIGV2ZW50IHByZXZlbnRzIGRlZmF1bHQgdGhlbiB3ZSBkbyB0aGUgc2FtZSBvbiB0aGUgZG9ub3IuXG5cdFx0dmFyIGUgPSBqUXVlcnkuZXh0ZW5kKFxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCgpLFxuXHRcdFx0ZXZlbnQsXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdGlzU2ltdWxhdGVkOiB0cnVlLFxuXHRcdFx0XHRvcmlnaW5hbEV2ZW50OiB7fVxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0aWYgKCBidWJibGUgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggZSwgbnVsbCwgZWxlbSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQuZGlzcGF0Y2guY2FsbCggZWxlbSwgZSApO1xuXHRcdH1cblx0XHRpZiAoIGUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcblx0aWYgKCBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0ZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBoYW5kbGUsIGZhbHNlICk7XG5cdH1cbn07XG5cbmpRdWVyeS5FdmVudCA9IGZ1bmN0aW9uKCBzcmMsIHByb3BzICkge1xuXHQvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmRcblx0aWYgKCAhKHRoaXMgaW5zdGFuY2VvZiBqUXVlcnkuRXZlbnQpICkge1xuXHRcdHJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBFdmVudCBvYmplY3Rcblx0aWYgKCBzcmMgJiYgc3JjLnR5cGUgKSB7XG5cdFx0dGhpcy5vcmlnaW5hbEV2ZW50ID0gc3JjO1xuXHRcdHRoaXMudHlwZSA9IHNyYy50eXBlO1xuXG5cdFx0Ly8gRXZlbnRzIGJ1YmJsaW5nIHVwIHRoZSBkb2N1bWVudCBtYXkgaGF2ZSBiZWVuIG1hcmtlZCBhcyBwcmV2ZW50ZWRcblx0XHQvLyBieSBhIGhhbmRsZXIgbG93ZXIgZG93biB0aGUgdHJlZTsgcmVmbGVjdCB0aGUgY29ycmVjdCB2YWx1ZS5cblx0XHR0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHNyYy5kZWZhdWx0UHJldmVudGVkIHx8XG5cdFx0XHRcdHNyYy5kZWZhdWx0UHJldmVudGVkID09PSB1bmRlZmluZWQgJiZcblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjBcblx0XHRcdFx0c3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRyZXR1cm5UcnVlIDpcblx0XHRcdHJldHVybkZhbHNlO1xuXG5cdC8vIEV2ZW50IHR5cGVcblx0fSBlbHNlIHtcblx0XHR0aGlzLnR5cGUgPSBzcmM7XG5cdH1cblxuXHQvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuXHRpZiAoIHByb3BzICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRoaXMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBDcmVhdGUgYSB0aW1lc3RhbXAgaWYgaW5jb21pbmcgZXZlbnQgZG9lc24ndCBoYXZlIG9uZVxuXHR0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IGpRdWVyeS5ub3coKTtcblxuXHQvLyBNYXJrIGl0IGFzIGZpeGVkXG5cdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xufTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcbmpRdWVyeS5FdmVudC5wcm90b3R5cGUgPSB7XG5cdGlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsXG5cdGlzUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXG5cdHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiBlLnByZXZlbnREZWZhdWx0ICkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblx0c3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmIGUuc3RvcFByb3BhZ2F0aW9uICkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiApIHtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcblx0fVxufTtcblxuLy8gQ3JlYXRlIG1vdXNlZW50ZXIvbGVhdmUgZXZlbnRzIHVzaW5nIG1vdXNlb3Zlci9vdXQgYW5kIGV2ZW50LXRpbWUgY2hlY2tzXG4vLyBTdXBwb3J0OiBDaHJvbWUgMTUrXG5qUXVlcnkuZWFjaCh7XG5cdG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsXG5cdG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIixcblx0cG9pbnRlcmVudGVyOiBcInBvaW50ZXJvdmVyXCIsXG5cdHBvaW50ZXJsZWF2ZTogXCJwb2ludGVyb3V0XCJcbn0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBvcmlnIF0gPSB7XG5cdFx0ZGVsZWdhdGVUeXBlOiBmaXgsXG5cdFx0YmluZFR5cGU6IGZpeCxcblxuXHRcdGhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIHJldCxcblx0XHRcdFx0dGFyZ2V0ID0gdGhpcyxcblx0XHRcdFx0cmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQsXG5cdFx0XHRcdGhhbmRsZU9iaiA9IGV2ZW50LmhhbmRsZU9iajtcblxuXHRcdFx0Ly8gRm9yIG1vdXNlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuXHRcdFx0Ly8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcblx0XHRcdGlmICggIXJlbGF0ZWQgfHwgKHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSkgKSB7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBoYW5kbGVPYmoub3JpZ1R5cGU7XG5cdFx0XHRcdHJldCA9IGhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGZpeDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3gsIENocm9tZSwgU2FmYXJpXG4vLyBDcmVhdGUgXCJidWJibGluZ1wiIGZvY3VzIGFuZCBibHVyIGV2ZW50c1xuaWYgKCAhc3VwcG9ydC5mb2N1c2luQnViYmxlcyApIHtcblx0alF1ZXJ5LmVhY2goeyBmb2N1czogXCJmb2N1c2luXCIsIGJsdXI6IFwiZm9jdXNvdXRcIiB9LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXG5cdFx0Ly8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudCB3aGlsZSBzb21lb25lIHdhbnRzIGZvY3VzaW4vZm9jdXNvdXRcblx0XHR2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0alF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBmaXgsIGV2ZW50LnRhcmdldCwgalF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKSwgdHJ1ZSApO1xuXHRcdFx0fTtcblxuXHRcdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHtcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YV9wcml2LmFjY2VzcyggZG9jLCBmaXggKTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MuYWRkRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4LCAoIGF0dGFjaGVzIHx8IDAgKSArIDEgKTtcblx0XHRcdH0sXG5cdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4ICkgLSAxO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZG9jLCBmaXggKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4LCBhdHRhY2hlcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fSk7XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXG5cdG9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgLypJTlRFUk5BTCovIG9uZSApIHtcblx0XHR2YXIgb3JpZ0ZuLCB0eXBlO1xuXG5cdFx0Ly8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzXG5cdFx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHQvLyAoIHR5cGVzLU9iamVjdCwgc2VsZWN0b3IsIGRhdGEgKVxuXHRcdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdC8vICggdHlwZXMtT2JqZWN0LCBkYXRhIClcblx0XHRcdFx0ZGF0YSA9IGRhdGEgfHwgc2VsZWN0b3I7XG5cdFx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdFx0dGhpcy5vbiggdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0aWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHtcblx0XHRcdC8vICggdHlwZXMsIGZuIClcblx0XHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0XHRkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcblx0XHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHQvLyAoIHR5cGVzLCBzZWxlY3RvciwgZm4gKVxuXHRcdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyAoIHR5cGVzLCBkYXRhLCBmbiApXG5cdFx0XHRcdGZuID0gZGF0YTtcblx0XHRcdFx0ZGF0YSA9IHNlbGVjdG9yO1xuXHRcdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCBmbiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHRcdH0gZWxzZSBpZiAoICFmbiApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdGlmICggb25lID09PSAxICkge1xuXHRcdFx0b3JpZ0ZuID0gZm47XG5cdFx0XHRmbiA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0Ly8gQ2FuIHVzZSBhbiBlbXB0eSBzZXQsIHNpbmNlIGV2ZW50IGNvbnRhaW5zIHRoZSBpbmZvXG5cdFx0XHRcdGpRdWVyeSgpLm9mZiggZXZlbnQgKTtcblx0XHRcdFx0cmV0dXJuIG9yaWdGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHR9O1xuXHRcdFx0Ly8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm5cblx0XHRcdGZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTtcblx0XHR9KTtcblx0fSxcblx0b25lOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgMSApO1xuXHR9LFxuXHRvZmY6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGZuICkge1xuXHRcdHZhciBoYW5kbGVPYmosIHR5cGU7XG5cdFx0aWYgKCB0eXBlcyAmJiB0eXBlcy5wcmV2ZW50RGVmYXVsdCAmJiB0eXBlcy5oYW5kbGVPYmogKSB7XG5cdFx0XHQvLyAoIGV2ZW50ICkgIGRpc3BhdGNoZWQgalF1ZXJ5LkV2ZW50XG5cdFx0XHRoYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7XG5cdFx0XHRqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKFxuXHRcdFx0XHRoYW5kbGVPYmoubmFtZXNwYWNlID8gaGFuZGxlT2JqLm9yaWdUeXBlICsgXCIuXCIgKyBoYW5kbGVPYmoubmFtZXNwYWNlIDogaGFuZGxlT2JqLm9yaWdUeXBlLFxuXHRcdFx0XHRoYW5kbGVPYmouc2VsZWN0b3IsXG5cdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0Ly8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdIClcblx0XHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRcdHRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRcdFx0Ly8gKCB0eXBlcyBbLCBmbl0gKVxuXHRcdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCB0aGlzICk7XG5cdFx0fSk7XG5cdH0sXG5cdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgZWxlbSA9IHRoaXNbMF07XG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCBlbGVtLCB0cnVlICk7XG5cdFx0fVxuXHR9XG59KTtcblxuXG52YXJcblx0cnhodG1sVGFnID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLFxuXHRydGFnTmFtZSA9IC88KFtcXHc6XSspLyxcblx0cmh0bWwgPSAvPHwmIz9cXHcrOy8sXG5cdHJub0lubmVyaHRtbCA9IC88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksXG5cdC8vIGNoZWNrZWQ9XCJjaGVja2VkXCIgb3IgY2hlY2tlZFxuXHRyY2hlY2tlZCA9IC9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksXG5cdHJzY3JpcHRUeXBlID0gL14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxcblx0cnNjcmlwdFR5cGVNYXNrZWQgPSAvXnRydWVcXC8oLiopLyxcblx0cmNsZWFuU2NyaXB0ID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nLFxuXG5cdC8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG5cdHdyYXBNYXAgPSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRvcHRpb246IFsgMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCIgXSxcblxuXHRcdHRoZWFkOiBbIDEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCIgXSxcblx0XHRjb2w6IFsgMiwgXCI8dGFibGU+PGNvbGdyb3VwPlwiLCBcIjwvY29sZ3JvdXA+PC90YWJsZT5cIiBdLFxuXHRcdHRyOiBbIDIsIFwiPHRhYmxlPjx0Ym9keT5cIiwgXCI8L3Rib2R5PjwvdGFibGU+XCIgXSxcblx0XHR0ZDogWyAzLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiIF0sXG5cblx0XHRfZGVmYXVsdDogWyAwLCBcIlwiLCBcIlwiIF1cblx0fTtcblxuLy8gU3VwcG9ydDogSUU5XG53cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247XG5cbndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblxuLy8gU3VwcG9ydDogMS54IGNvbXBhdGliaWxpdHlcbi8vIE1hbmlwdWxhdGluZyB0YWJsZXMgcmVxdWlyZXMgYSB0Ym9keVxuZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkge1xuXHRyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuXHRcdGpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCBcInRyXCIgKSA/XG5cblx0XHRlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF0gfHxcblx0XHRcdGVsZW0uYXBwZW5kQ2hpbGQoIGVsZW0ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIikgKSA6XG5cdFx0ZWxlbTtcbn1cblxuLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHtcblx0ZWxlbS50eXBlID0gKGVsZW0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKSAhPT0gbnVsbCkgKyBcIi9cIiArIGVsZW0udHlwZTtcblx0cmV0dXJuIGVsZW07XG59XG5mdW5jdGlvbiByZXN0b3JlU2NyaXB0KCBlbGVtICkge1xuXHR2YXIgbWF0Y2ggPSByc2NyaXB0VHlwZU1hc2tlZC5leGVjKCBlbGVtLnR5cGUgKTtcblxuXHRpZiAoIG1hdGNoICkge1xuXHRcdGVsZW0udHlwZSA9IG1hdGNoWyAxIF07XG5cdH0gZWxzZSB7XG5cdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuZnVuY3Rpb24gc2V0R2xvYmFsRXZhbCggZWxlbXMsIHJlZkVsZW1lbnRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0ZGF0YV9wcml2LnNldChcblx0XHRcdGVsZW1zWyBpIF0sIFwiZ2xvYmFsRXZhbFwiLCAhcmVmRWxlbWVudHMgfHwgZGF0YV9wcml2LmdldCggcmVmRWxlbWVudHNbIGkgXSwgXCJnbG9iYWxFdmFsXCIgKVxuXHRcdCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY2xvbmVDb3B5RXZlbnQoIHNyYywgZGVzdCApIHtcblx0dmFyIGksIGwsIHR5cGUsIHBkYXRhT2xkLCBwZGF0YUN1ciwgdWRhdGFPbGQsIHVkYXRhQ3VyLCBldmVudHM7XG5cblx0aWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIDEuIENvcHkgcHJpdmF0ZSBkYXRhOiBldmVudHMsIGhhbmRsZXJzLCBldGMuXG5cdGlmICggZGF0YV9wcml2Lmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHBkYXRhT2xkID0gZGF0YV9wcml2LmFjY2Vzcyggc3JjICk7XG5cdFx0cGRhdGFDdXIgPSBkYXRhX3ByaXYuc2V0KCBkZXN0LCBwZGF0YU9sZCApO1xuXHRcdGV2ZW50cyA9IHBkYXRhT2xkLmV2ZW50cztcblxuXHRcdGlmICggZXZlbnRzICkge1xuXHRcdFx0ZGVsZXRlIHBkYXRhQ3VyLmhhbmRsZTtcblx0XHRcdHBkYXRhQ3VyLmV2ZW50cyA9IHt9O1xuXG5cdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBldmVudHNbIHR5cGUgXS5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggZGVzdCwgdHlwZSwgZXZlbnRzWyB0eXBlIF1bIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gMi4gQ29weSB1c2VyIGRhdGFcblx0aWYgKCBkYXRhX3VzZXIuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0dWRhdGFPbGQgPSBkYXRhX3VzZXIuYWNjZXNzKCBzcmMgKTtcblx0XHR1ZGF0YUN1ciA9IGpRdWVyeS5leHRlbmQoIHt9LCB1ZGF0YU9sZCApO1xuXG5cdFx0ZGF0YV91c2VyLnNldCggZGVzdCwgdWRhdGFDdXIgKTtcblx0fVxufVxuXG5mdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHtcblx0dmFyIHJldCA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPyBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgfHwgXCIqXCIgKSA6XG5cdFx0XHRjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgPyBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyB8fCBcIipcIiApIDpcblx0XHRcdFtdO1xuXG5cdHJldHVybiB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgalF1ZXJ5Lm5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSA/XG5cdFx0alF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICkgOlxuXHRcdHJldDtcbn1cblxuLy8gRml4IElFIGJ1Z3MsIHNlZSBzdXBwb3J0IHRlc3RzXG5mdW5jdGlvbiBmaXhJbnB1dCggc3JjLCBkZXN0ICkge1xuXHR2YXIgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0Ly8gRmFpbHMgdG8gcGVyc2lzdCB0aGUgY2hlY2tlZCBzdGF0ZSBvZiBhIGNsb25lZCBjaGVja2JveCBvciByYWRpbyBidXR0b24uXG5cdGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiByY2hlY2thYmxlVHlwZS50ZXN0KCBzcmMudHlwZSApICkge1xuXHRcdGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXG5cdC8vIEZhaWxzIHRvIHJldHVybiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHRvIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zXG5cdH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgfHwgbm9kZU5hbWUgPT09IFwidGV4dGFyZWFcIiApIHtcblx0XHRkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7XG5cdH1cbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cdGNsb25lOiBmdW5jdGlvbiggZWxlbSwgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0dmFyIGksIGwsIHNyY0VsZW1lbnRzLCBkZXN0RWxlbWVudHMsXG5cdFx0XHRjbG9uZSA9IGVsZW0uY2xvbmVOb2RlKCB0cnVlICksXG5cdFx0XHRpblBhZ2UgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXG5cdFx0Ly8gRml4IElFIGNsb25pbmcgaXNzdWVzXG5cdFx0aWYgKCAhc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCAmJiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgZWxlbS5ub2RlVHlwZSA9PT0gMTEgKSAmJlxuXHRcdFx0XHQhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cblx0XHRcdC8vIFdlIGVzY2hldyBTaXp6bGUgaGVyZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uczogaHR0cDovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yXG5cdFx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lICk7XG5cdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXG5cdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuXHRcdGlmICggZGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG5cdFx0XHRcdGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCBcInNjcmlwdFwiICk7XG5cdFx0aWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdHJldHVybiBjbG9uZTtcblx0fSxcblxuXHRidWlsZEZyYWdtZW50OiBmdW5jdGlvbiggZWxlbXMsIGNvbnRleHQsIHNjcmlwdHMsIHNlbGVjdGlvbiApIHtcblx0XHR2YXIgZWxlbSwgdG1wLCB0YWcsIHdyYXAsIGNvbnRhaW5zLCBqLFxuXHRcdFx0ZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRcdG5vZGVzID0gW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRlbGVtID0gZWxlbXNbIGkgXTtcblxuXHRcdFx0aWYgKCBlbGVtIHx8IGVsZW0gPT09IDAgKSB7XG5cblx0XHRcdFx0Ly8gQWRkIG5vZGVzIGRpcmVjdGx5XG5cdFx0XHRcdGlmICggalF1ZXJ5LnR5cGUoIGVsZW0gKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdCwgUGhhbnRvbUpTXG5cdFx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIGVsZW0ubm9kZVR5cGUgPyBbIGVsZW0gXSA6IGVsZW0gKTtcblxuXHRcdFx0XHQvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGVcblx0XHRcdFx0fSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcblx0XHRcdFx0XHRub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTtcblxuXHRcdFx0XHQvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0bXAgPSB0bXAgfHwgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudChcImRpdlwiKSApO1xuXG5cdFx0XHRcdFx0Ly8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvblxuXHRcdFx0XHRcdHRhZyA9ICggcnRhZ05hbWUuZXhlYyggZWxlbSApIHx8IFsgXCJcIiwgXCJcIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXHRcdFx0XHRcdHRtcC5pbm5lckhUTUwgPSB3cmFwWyAxIF0gKyBlbGVtLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApICsgd3JhcFsgMiBdO1xuXG5cdFx0XHRcdFx0Ly8gRGVzY2VuZCB0aHJvdWdoIHdyYXBwZXJzIHRvIHRoZSByaWdodCBjb250ZW50XG5cdFx0XHRcdFx0aiA9IHdyYXBbIDAgXTtcblx0XHRcdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0XHRcdHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXQsIFBoYW50b21KU1xuXHRcdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCB0bXAuY2hpbGROb2RlcyApO1xuXG5cdFx0XHRcdFx0Ly8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXJcblx0XHRcdFx0XHR0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRcdFx0Ly8gRW5zdXJlIHRoZSBjcmVhdGVkIG5vZGVzIGFyZSBvcnBoYW5lZCAoIzEyMzkyKVxuXHRcdFx0XHRcdHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XG5cdFx0ZnJhZ21lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoZWxlbSA9IG5vZGVzWyBpKysgXSkgKSB7XG5cblx0XHRcdC8vICM0MDg3IC0gSWYgb3JpZ2luIGFuZCBkZXN0aW5hdGlvbiBlbGVtZW50cyBhcmUgdGhlIHNhbWUsIGFuZCB0aGlzIGlzXG5cdFx0XHQvLyB0aGF0IGVsZW1lbnQsIGRvIG5vdCBkbyBhbnl0aGluZ1xuXHRcdFx0aWYgKCBzZWxlY3Rpb24gJiYgalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHNlbGVjdGlvbiApICE9PSAtMSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdFx0Ly8gQXBwZW5kIHRvIGZyYWdtZW50XG5cdFx0XHR0bXAgPSBnZXRBbGwoIGZyYWdtZW50LmFwcGVuZENoaWxkKCBlbGVtICksIFwic2NyaXB0XCIgKTtcblxuXHRcdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdFx0aWYgKCBjb250YWlucyApIHtcblx0XHRcdFx0c2V0R2xvYmFsRXZhbCggdG1wICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhcHR1cmUgZXhlY3V0YWJsZXNcblx0XHRcdGlmICggc2NyaXB0cyApIHtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSB0bXBbIGorKyBdKSApIHtcblx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIGVsZW0udHlwZSB8fCBcIlwiICkgKSB7XG5cdFx0XHRcdFx0XHRzY3JpcHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZnJhZ21lbnQ7XG5cdH0sXG5cblx0Y2xlYW5EYXRhOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cdFx0dmFyIGRhdGEsIGVsZW0sIHR5cGUsIGtleSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoZWxlbSA9IGVsZW1zWyBpIF0pICE9PSB1bmRlZmluZWQ7IGkrKyApIHtcblx0XHRcdGlmICggalF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdFx0a2V5ID0gZWxlbVsgZGF0YV9wcml2LmV4cGFuZG8gXTtcblxuXHRcdFx0XHRpZiAoIGtleSAmJiAoZGF0YSA9IGRhdGFfcHJpdi5jYWNoZVsga2V5IF0pICkge1xuXHRcdFx0XHRcdGlmICggZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRmb3IgKCB0eXBlIGluIGRhdGEuZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZFxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIGRhdGFfcHJpdi5jYWNoZVsga2V5IF0gKSB7XG5cdFx0XHRcdFx0XHQvLyBEaXNjYXJkIGFueSByZW1haW5pbmcgYHByaXZhdGVgIGRhdGFcblx0XHRcdFx0XHRcdGRlbGV0ZSBkYXRhX3ByaXYuY2FjaGVbIGtleSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gRGlzY2FyZCBhbnkgcmVtYWluaW5nIGB1c2VyYCBkYXRhXG5cdFx0XHRkZWxldGUgZGF0YV91c2VyLmNhY2hlWyBlbGVtWyBkYXRhX3VzZXIuZXhwYW5kbyBdIF07XG5cdFx0fVxuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHRleHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS50ZXh0KCB0aGlzICkgOlxuXHRcdFx0XHR0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRcdHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG5cdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdHByZXBlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRiZWZvcmU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRhZnRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdHJlbW92ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCBrZWVwRGF0YSAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHtcblx0XHR2YXIgZWxlbSxcblx0XHRcdGVsZW1zID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgdGhpcyApIDogdGhpcyxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRpZiAoICFrZWVwRGF0YSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0gKSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0aWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICkge1xuXHRcdFx0XHRcdHNldEdsb2JhbEV2YWwoIGdldEFsbCggZWxlbSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IChlbGVtID0gdGhpc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXG5cdFx0XHRcdC8vIFJlbW92ZSBhbnkgcmVtYWluaW5nIG5vZGVzXG5cdFx0XHRcdGVsZW0udGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0ZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50cztcblx0XHRkZWVwRGF0YUFuZEV2ZW50cyA9IGRlZXBEYXRhQW5kRXZlbnRzID09IG51bGwgPyBkYXRhQW5kRXZlbnRzIDogZGVlcERhdGFBbmRFdmVudHM7XG5cblx0XHRyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmNsb25lKCB0aGlzLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApO1xuXHRcdH0pO1xuXHR9LFxuXG5cdGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmlubmVySFRNTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdCF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuXHRcdFx0XHR2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW0gPSAwO1xuXG5cdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHR9IGNhdGNoKCBlICkge31cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHR0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApO1xuXHRcdFx0fVxuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBhcmcgPSBhcmd1bWVudHNbIDAgXTtcblxuXHRcdC8vIE1ha2UgdGhlIGNoYW5nZXMsIHJlcGxhY2luZyBlYWNoIGNvbnRleHQgZWxlbWVudCB3aXRoIHRoZSBuZXcgY29udGVudFxuXHRcdHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRhcmcgPSB0aGlzLnBhcmVudE5vZGU7XG5cblx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggdGhpcyApICk7XG5cblx0XHRcdGlmICggYXJnICkge1xuXHRcdFx0XHRhcmcucmVwbGFjZUNoaWxkKCBlbGVtLCB0aGlzICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBGb3JjZSByZW1vdmFsIGlmIHRoZXJlIHdhcyBubyBuZXcgY29udGVudCAoZS5nLiwgZnJvbSBlbXB0eSBhcmd1bWVudHMpXG5cdFx0cmV0dXJuIGFyZyAmJiAoYXJnLmxlbmd0aCB8fCBhcmcubm9kZVR5cGUpID8gdGhpcyA6IHRoaXMucmVtb3ZlKCk7XG5cdH0sXG5cblx0ZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucmVtb3ZlKCBzZWxlY3RvciwgdHJ1ZSApO1xuXHR9LFxuXG5cdGRvbU1hbmlwOiBmdW5jdGlvbiggYXJncywgY2FsbGJhY2sgKSB7XG5cblx0XHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdFx0YXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTtcblxuXHRcdHZhciBmcmFnbWVudCwgZmlyc3QsIHNjcmlwdHMsIGhhc1NjcmlwdHMsIG5vZGUsIGRvYyxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0c2V0ID0gdGhpcyxcblx0XHRcdGlOb0Nsb25lID0gbCAtIDEsXG5cdFx0XHR2YWx1ZSA9IGFyZ3NbIDAgXSxcblx0XHRcdGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHRcdC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuXHRcdGlmICggaXNGdW5jdGlvbiB8fFxuXHRcdFx0XHQoIGwgPiAxICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHRcdCFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0XHRcdHZhciBzZWxmID0gc2V0LmVxKCBpbmRleCApO1xuXHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdFx0YXJnc1sgMCBdID0gdmFsdWUuY2FsbCggdGhpcywgaW5kZXgsIHNlbGYuaHRtbCgpICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2VsZi5kb21NYW5pcCggYXJncywgY2FsbGJhY2sgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICggbCApIHtcblx0XHRcdGZyYWdtZW50ID0galF1ZXJ5LmJ1aWxkRnJhZ21lbnQoIGFyZ3MsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50LCBmYWxzZSwgdGhpcyApO1xuXHRcdFx0Zmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRpZiAoIGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICkge1xuXHRcdFx0XHRmcmFnbWVudCA9IGZpcnN0O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGZpcnN0ICkge1xuXHRcdFx0XHRzY3JpcHRzID0galF1ZXJ5Lm1hcCggZ2V0QWxsKCBmcmFnbWVudCwgXCJzY3JpcHRcIiApLCBkaXNhYmxlU2NyaXB0ICk7XG5cdFx0XHRcdGhhc1NjcmlwdHMgPSBzY3JpcHRzLmxlbmd0aDtcblxuXHRcdFx0XHQvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtIGluc3RlYWQgb2YgdGhlIGZpcnN0IGJlY2F1c2UgaXQgY2FuIGVuZCB1cFxuXHRcdFx0XHQvLyBiZWluZyBlbXB0aWVkIGluY29ycmVjdGx5IGluIGNlcnRhaW4gc2l0dWF0aW9ucyAoIzgwNzApLlxuXHRcdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IGZyYWdtZW50O1xuXG5cdFx0XHRcdFx0aWYgKCBpICE9PSBpTm9DbG9uZSApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTtcblxuXHRcdFx0XHRcdFx0Ly8gS2VlcCByZWZlcmVuY2VzIHRvIGNsb25lZCBzY3JpcHRzIGZvciBsYXRlciByZXN0b3JhdGlvblxuXHRcdFx0XHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdFxuXHRcdFx0XHRcdFx0XHQvLyBqUXVlcnkubWVyZ2UgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzXG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKCB0aGlzWyBpIF0sIG5vZGUsIGkgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblx0XHRcdFx0XHRkb2MgPSBzY3JpcHRzWyBzY3JpcHRzLmxlbmd0aCAtIDEgXS5vd25lckRvY3VtZW50O1xuXG5cdFx0XHRcdFx0Ly8gUmVlbmFibGUgc2NyaXB0c1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTtcblxuXHRcdFx0XHRcdC8vIEV2YWx1YXRlIGV4ZWN1dGFibGUgc2NyaXB0cyBvbiBmaXJzdCBkb2N1bWVudCBpbnNlcnRpb25cblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGhhc1NjcmlwdHM7IGkrKyApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBzY3JpcHRzWyBpIF07XG5cdFx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCBcIlwiICkgJiZcblx0XHRcdFx0XHRcdFx0IWRhdGFfcHJpdi5hY2Nlc3MoIG5vZGUsIFwiZ2xvYmFsRXZhbFwiICkgJiYgalF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUuc3JjICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuX2V2YWxVcmwgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuX2V2YWxVcmwoIG5vZGUuc3JjICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCBub2RlLnRleHRDb250ZW50LnJlcGxhY2UoIHJjbGVhblNjcmlwdCwgXCJcIiApICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKHtcblx0YXBwZW5kVG86IFwiYXBwZW5kXCIsXG5cdHByZXBlbmRUbzogXCJwcmVwZW5kXCIsXG5cdGluc2VydEJlZm9yZTogXCJiZWZvcmVcIixcblx0aW5zZXJ0QWZ0ZXI6IFwiYWZ0ZXJcIixcblx0cmVwbGFjZUFsbDogXCJyZXBsYWNlV2l0aFwiXG59LCBmdW5jdGlvbiggbmFtZSwgb3JpZ2luYWwgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBlbGVtcyxcblx0XHRcdHJldCA9IFtdLFxuXHRcdFx0aW5zZXJ0ID0galF1ZXJ5KCBzZWxlY3RvciApLFxuXHRcdFx0bGFzdCA9IGluc2VydC5sZW5ndGggLSAxLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkge1xuXHRcdFx0ZWxlbXMgPSBpID09PSBsYXN0ID8gdGhpcyA6IHRoaXMuY2xvbmUoIHRydWUgKTtcblx0XHRcdGpRdWVyeSggaW5zZXJ0WyBpIF0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXRcblx0XHRcdC8vIC5nZXQoKSBiZWNhdXNlIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Ncblx0XHRcdHB1c2guYXBwbHkoIHJldCwgZWxlbXMuZ2V0KCkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHJldCApO1xuXHR9O1xufSk7XG5cblxudmFyIGlmcmFtZSxcblx0ZWxlbWRpc3BsYXkgPSB7fTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgYWN0dWFsIGRpc3BsYXkgb2YgYSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBub2RlTmFtZSBvZiB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IGRvYyBEb2N1bWVudCBvYmplY3RcbiAqL1xuLy8gQ2FsbGVkIG9ubHkgZnJvbSB3aXRoaW4gZGVmYXVsdERpc3BsYXlcbmZ1bmN0aW9uIGFjdHVhbERpc3BsYXkoIG5hbWUsIGRvYyApIHtcblx0dmFyIHN0eWxlLFxuXHRcdGVsZW0gPSBqUXVlcnkoIGRvYy5jcmVhdGVFbGVtZW50KCBuYW1lICkgKS5hcHBlbmRUbyggZG9jLmJvZHkgKSxcblxuXHRcdC8vIGdldERlZmF1bHRDb21wdXRlZFN0eWxlIG1pZ2h0IGJlIHJlbGlhYmx5IHVzZWQgb25seSBvbiBhdHRhY2hlZCBlbGVtZW50XG5cdFx0ZGlzcGxheSA9IHdpbmRvdy5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSAmJiAoIHN0eWxlID0gd2luZG93LmdldERlZmF1bHRDb21wdXRlZFN0eWxlKCBlbGVtWyAwIF0gKSApID9cblxuXHRcdFx0Ly8gVXNlIG9mIHRoaXMgbWV0aG9kIGlzIGEgdGVtcG9yYXJ5IGZpeCAobW9yZSBsaWtlIG9wdGltaXphdGlvbikgdW50aWwgc29tZXRoaW5nIGJldHRlciBjb21lcyBhbG9uZyxcblx0XHRcdC8vIHNpbmNlIGl0IHdhcyByZW1vdmVkIGZyb20gc3BlY2lmaWNhdGlvbiBhbmQgc3VwcG9ydGVkIG9ubHkgaW4gRkZcblx0XHRcdHN0eWxlLmRpc3BsYXkgOiBqUXVlcnkuY3NzKCBlbGVtWyAwIF0sIFwiZGlzcGxheVwiICk7XG5cblx0Ly8gV2UgZG9uJ3QgaGF2ZSBhbnkgZGF0YSBzdG9yZWQgb24gdGhlIGVsZW1lbnQsXG5cdC8vIHNvIHVzZSBcImRldGFjaFwiIG1ldGhvZCBhcyBmYXN0IHdheSB0byBnZXQgcmlkIG9mIHRoZSBlbGVtZW50XG5cdGVsZW0uZGV0YWNoKCk7XG5cblx0cmV0dXJuIGRpc3BsYXk7XG59XG5cbi8qKlxuICogVHJ5IHRvIGRldGVybWluZSB0aGUgZGVmYXVsdCBkaXNwbGF5IHZhbHVlIG9mIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZVxuICovXG5mdW5jdGlvbiBkZWZhdWx0RGlzcGxheSggbm9kZU5hbWUgKSB7XG5cdHZhciBkb2MgPSBkb2N1bWVudCxcblx0XHRkaXNwbGF5ID0gZWxlbWRpc3BsYXlbIG5vZGVOYW1lIF07XG5cblx0aWYgKCAhZGlzcGxheSApIHtcblx0XHRkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuXG5cdFx0Ly8gSWYgdGhlIHNpbXBsZSB3YXkgZmFpbHMsIHJlYWQgZnJvbSBpbnNpZGUgYW4gaWZyYW1lXG5cdFx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiB8fCAhZGlzcGxheSApIHtcblxuXHRcdFx0Ly8gVXNlIHRoZSBhbHJlYWR5LWNyZWF0ZWQgaWZyYW1lIGlmIHBvc3NpYmxlXG5cdFx0XHRpZnJhbWUgPSAoaWZyYW1lIHx8IGpRdWVyeSggXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIgKSkuYXBwZW5kVG8oIGRvYy5kb2N1bWVudEVsZW1lbnQgKTtcblxuXHRcdFx0Ly8gQWx3YXlzIHdyaXRlIGEgbmV3IEhUTUwgc2tlbGV0b24gc28gV2Via2l0IGFuZCBGaXJlZm94IGRvbid0IGNob2tlIG9uIHJldXNlXG5cdFx0XHRkb2MgPSBpZnJhbWVbIDAgXS5jb250ZW50RG9jdW1lbnQ7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFXG5cdFx0XHRkb2Mud3JpdGUoKTtcblx0XHRcdGRvYy5jbG9zZSgpO1xuXG5cdFx0XHRkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuXHRcdFx0aWZyYW1lLmRldGFjaCgpO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIHRoZSBjb3JyZWN0IGRlZmF1bHQgZGlzcGxheVxuXHRcdGVsZW1kaXNwbGF5WyBub2RlTmFtZSBdID0gZGlzcGxheTtcblx0fVxuXG5cdHJldHVybiBkaXNwbGF5O1xufVxudmFyIHJtYXJnaW4gPSAoL15tYXJnaW4vKTtcblxudmFyIHJudW1ub25weCA9IG5ldyBSZWdFeHAoIFwiXihcIiArIHBudW0gKyBcIikoPyFweClbYS16JV0rJFwiLCBcImlcIiApO1xuXG52YXIgZ2V0U3R5bGVzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0Ly8gU3VwcG9ydDogSUU8PTExKywgRmlyZWZveDw9MzArICgjMTUwOTgsICMxNDE1MClcblx0XHQvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHNcblx0XHQvLyBGRiBtZWFud2hpbGUgdGhyb3dzIG9uIGZyYW1lIGVsZW1lbnRzIHRocm91Z2ggXCJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlXCJcblx0XHRpZiAoIGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5vcGVuZXIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0sIG51bGwgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGVsZW0sIG51bGwgKTtcblx0fTtcblxuXG5cbmZ1bmN0aW9uIGN1ckNTUyggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7XG5cdHZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdGNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7XG5cblx0Ly8gU3VwcG9ydDogSUU5XG5cdC8vIGdldFByb3BlcnR5VmFsdWUgaXMgb25seSBuZWVkZWQgZm9yIC5jc3MoJ2ZpbHRlcicpICgjMTI1MzcpXG5cdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0cmV0ID0gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF07XG5cdH1cblxuXHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0aWYgKCByZXQgPT09IFwiXCIgJiYgIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgKSB7XG5cdFx0XHRyZXQgPSBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBpT1MgPCA2XG5cdFx0Ly8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuXHRcdC8vIGlPUyA8IDYgKGF0IGxlYXN0KSByZXR1cm5zIHBlcmNlbnRhZ2UgZm9yIGEgbGFyZ2VyIHNldCBvZiB2YWx1ZXMsIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHNcblx0XHQvLyB0aGlzIGlzIGFnYWluc3QgdGhlIENTU09NIGRyYWZ0IHNwZWM6IGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzc29tLyNyZXNvbHZlZC12YWx1ZXNcblx0XHRpZiAoIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiBybWFyZ2luLnRlc3QoIG5hbWUgKSApIHtcblxuXHRcdFx0Ly8gUmVtZW1iZXIgdGhlIG9yaWdpbmFsIHZhbHVlc1xuXHRcdFx0d2lkdGggPSBzdHlsZS53aWR0aDtcblx0XHRcdG1pbldpZHRoID0gc3R5bGUubWluV2lkdGg7XG5cdFx0XHRtYXhXaWR0aCA9IHN0eWxlLm1heFdpZHRoO1xuXG5cdFx0XHQvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0XG5cdFx0XHRzdHlsZS5taW5XaWR0aCA9IHN0eWxlLm1heFdpZHRoID0gc3R5bGUud2lkdGggPSByZXQ7XG5cdFx0XHRyZXQgPSBjb21wdXRlZC53aWR0aDtcblxuXHRcdFx0Ly8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuXHRcdFx0c3R5bGUud2lkdGggPSB3aWR0aDtcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gbWluV2lkdGg7XG5cdFx0XHRzdHlsZS5tYXhXaWR0aCA9IG1heFdpZHRoO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXQgIT09IHVuZGVmaW5lZCA/XG5cdFx0Ly8gU3VwcG9ydDogSUVcblx0XHQvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLlxuXHRcdHJldCArIFwiXCIgOlxuXHRcdHJldDtcbn1cblxuXG5mdW5jdGlvbiBhZGRHZXRIb29rSWYoIGNvbmRpdGlvbkZuLCBob29rRm4gKSB7XG5cdC8vIERlZmluZSB0aGUgaG9vaywgd2UnbGwgY2hlY2sgb24gdGhlIGZpcnN0IHJ1biBpZiBpdCdzIHJlYWxseSBuZWVkZWQuXG5cdHJldHVybiB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggY29uZGl0aW9uRm4oKSApIHtcblx0XHRcdFx0Ly8gSG9vayBub3QgbmVlZGVkIChvciBpdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgaXQgZHVlXG5cdFx0XHRcdC8vIHRvIG1pc3NpbmcgZGVwZW5kZW5jeSksIHJlbW92ZSBpdC5cblx0XHRcdFx0ZGVsZXRlIHRoaXMuZ2V0O1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLlxuXHRcdFx0cmV0dXJuICh0aGlzLmdldCA9IGhvb2tGbikuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0fTtcbn1cblxuXG4oZnVuY3Rpb24oKSB7XG5cdHZhciBwaXhlbFBvc2l0aW9uVmFsLCBib3hTaXppbmdSZWxpYWJsZVZhbCxcblx0XHRkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuXHRcdGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcblx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cblx0aWYgKCAhZGl2LnN0eWxlICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gU3R5bGUgb2YgY2xvbmVkIGVsZW1lbnQgYWZmZWN0cyBzb3VyY2UgZWxlbWVudCBjbG9uZWQgKCM4OTA4KVxuXHRkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG5cdGRpdi5jbG9uZU5vZGUoIHRydWUgKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiXCI7XG5cdHN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSBcImNvbnRlbnQtYm94XCI7XG5cblx0Y29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBcImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O1wiICtcblx0XHRcInBvc2l0aW9uOmFic29sdXRlXCI7XG5cdGNvbnRhaW5lci5hcHBlbmRDaGlsZCggZGl2ICk7XG5cblx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdGZ1bmN0aW9uIGNvbXB1dGVQaXhlbFBvc2l0aW9uQW5kQm94U2l6aW5nUmVsaWFibGUoKSB7XG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjNcblx0XHRcdC8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZ1xuXHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtcIiArXG5cdFx0XHRcImJveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO1wiICtcblx0XHRcdFwiYm9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGVcIjtcblx0XHRkaXYuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBjb250YWluZXIgKTtcblxuXHRcdHZhciBkaXZTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBkaXYsIG51bGwgKTtcblx0XHRwaXhlbFBvc2l0aW9uVmFsID0gZGl2U3R5bGUudG9wICE9PSBcIjElXCI7XG5cdFx0Ym94U2l6aW5nUmVsaWFibGVWYWwgPSBkaXZTdHlsZS53aWR0aCA9PT0gXCI0cHhcIjtcblxuXHRcdGRvY0VsZW0ucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogbm9kZS5qcyBqc2RvbVxuXHQvLyBEb24ndCBhc3N1bWUgdGhhdCBnZXRDb21wdXRlZFN0eWxlIGlzIGEgcHJvcGVydHkgb2YgdGhlIGdsb2JhbCBvYmplY3Rcblx0aWYgKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCBzdXBwb3J0LCB7XG5cdFx0XHRwaXhlbFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBUaGlzIHRlc3QgaXMgZXhlY3V0ZWQgb25seSBvbmNlIGJ1dCB3ZSBzdGlsbCBkbyBtZW1vaXppbmdcblx0XHRcdFx0Ly8gc2luY2Ugd2UgY2FuIHVzZSB0aGUgYm94U2l6aW5nUmVsaWFibGUgcHJlLWNvbXB1dGluZy5cblx0XHRcdFx0Ly8gTm8gbmVlZCB0byBjaGVjayBpZiB0aGUgdGVzdCB3YXMgYWxyZWFkeSBwZXJmb3JtZWQsIHRob3VnaC5cblx0XHRcdFx0Y29tcHV0ZVBpeGVsUG9zaXRpb25BbmRCb3hTaXppbmdSZWxpYWJsZSgpO1xuXHRcdFx0XHRyZXR1cm4gcGl4ZWxQb3NpdGlvblZhbDtcblx0XHRcdH0sXG5cdFx0XHRib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggYm94U2l6aW5nUmVsaWFibGVWYWwgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRjb21wdXRlUGl4ZWxQb3NpdGlvbkFuZEJveFNpemluZ1JlbGlhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO1xuXHRcdFx0fSxcblx0XHRcdHJlbGlhYmxlTWFyZ2luUmlnaHQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5cdFx0XHRcdC8vIENoZWNrIGlmIGRpdiB3aXRoIGV4cGxpY2l0IHdpZHRoIGFuZCBubyBtYXJnaW4tcmlnaHQgaW5jb3JyZWN0bHlcblx0XHRcdFx0Ly8gZ2V0cyBjb21wdXRlZCBtYXJnaW4tcmlnaHQgYmFzZWQgb24gd2lkdGggb2YgY29udGFpbmVyLiAoIzMzMzMpXG5cdFx0XHRcdC8vIFdlYktpdCBCdWcgMTMzNDMgLSBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgd3JvbmcgdmFsdWUgZm9yIG1hcmdpbi1yaWdodFxuXHRcdFx0XHQvLyBUaGlzIHN1cHBvcnQgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBvbmNlIHNvIG5vIG1lbW9pemluZyBpcyBuZWVkZWQuXG5cdFx0XHRcdHZhciByZXQsXG5cdFx0XHRcdFx0bWFyZ2luRGl2ID0gZGl2LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKTtcblxuXHRcdFx0XHQvLyBSZXNldCBDU1M6IGJveC1zaXppbmc7IGRpc3BsYXk7IG1hcmdpbjsgYm9yZGVyOyBwYWRkaW5nXG5cdFx0XHRcdG1hcmdpbkRpdi5zdHlsZS5jc3NUZXh0ID0gZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjksIEFuZHJvaWQgMi4zXG5cdFx0XHRcdFx0Ly8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nXG5cdFx0XHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wiICtcblx0XHRcdFx0XHRcImJveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIjtcblx0XHRcdFx0bWFyZ2luRGl2LnN0eWxlLm1hcmdpblJpZ2h0ID0gbWFyZ2luRGl2LnN0eWxlLndpZHRoID0gXCIwXCI7XG5cdFx0XHRcdGRpdi5zdHlsZS53aWR0aCA9IFwiMXB4XCI7XG5cdFx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApO1xuXG5cdFx0XHRcdHJldCA9ICFwYXJzZUZsb2F0KCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggbWFyZ2luRGl2LCBudWxsICkubWFyZ2luUmlnaHQgKTtcblxuXHRcdFx0XHRkb2NFbGVtLnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblx0XHRcdFx0ZGl2LnJlbW92ZUNoaWxkKCBtYXJnaW5EaXYgKTtcblxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KSgpO1xuXG5cbi8vIEEgbWV0aG9kIGZvciBxdWlja2x5IHN3YXBwaW5nIGluL291dCBDU1MgcHJvcGVydGllcyB0byBnZXQgY29ycmVjdCBjYWxjdWxhdGlvbnMuXG5qUXVlcnkuc3dhcCA9IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncyApIHtcblx0dmFyIHJldCwgbmFtZSxcblx0XHRvbGQgPSB7fTtcblxuXHQvLyBSZW1lbWJlciB0aGUgb2xkIHZhbHVlcywgYW5kIGluc2VydCB0aGUgbmV3IG9uZXNcblx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdG9sZFsgbmFtZSBdID0gZWxlbS5zdHlsZVsgbmFtZSBdO1xuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9wdGlvbnNbIG5hbWUgXTtcblx0fVxuXG5cdHJldCA9IGNhbGxiYWNrLmFwcGx5KCBlbGVtLCBhcmdzIHx8IFtdICk7XG5cblx0Ly8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvbGRbIG5hbWUgXTtcblx0fVxuXG5cdHJldHVybiByZXQ7XG59O1xuXG5cbnZhclxuXHQvLyBTd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuXHQvLyBTZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXlcblx0cmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFxuXHRybnVtc3BsaXQgPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKC4qKSRcIiwgXCJpXCIgKSxcblx0cnJlbE51bSA9IG5ldyBSZWdFeHAoIFwiXihbKy1dKT0oXCIgKyBwbnVtICsgXCIpXCIsIFwiaVwiICksXG5cblx0Y3NzU2hvdyA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sXG5cdGNzc05vcm1hbFRyYW5zZm9ybSA9IHtcblx0XHRsZXR0ZXJTcGFjaW5nOiBcIjBcIixcblx0XHRmb250V2VpZ2h0OiBcIjQwMFwiXG5cdH0sXG5cblx0Y3NzUHJlZml4ZXMgPSBbIFwiV2Via2l0XCIsIFwiT1wiLCBcIk1velwiLCBcIm1zXCIgXTtcblxuLy8gUmV0dXJuIGEgY3NzIHByb3BlcnR5IG1hcHBlZCB0byBhIHBvdGVudGlhbGx5IHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eVxuZnVuY3Rpb24gdmVuZG9yUHJvcE5hbWUoIHN0eWxlLCBuYW1lICkge1xuXG5cdC8vIFNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkXG5cdGlmICggbmFtZSBpbiBzdHlsZSApIHtcblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXG5cdC8vIENoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXNcblx0dmFyIGNhcE5hbWUgPSBuYW1lWzBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpLFxuXHRcdG9yaWdOYW1lID0gbmFtZSxcblx0XHRpID0gY3NzUHJlZml4ZXMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcblx0XHRpZiAoIG5hbWUgaW4gc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm4gbmFtZTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gb3JpZ05hbWU7XG59XG5cbmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG5cdHZhciBtYXRjaGVzID0gcm51bXNwbGl0LmV4ZWMoIHZhbHVlICk7XG5cdHJldHVybiBtYXRjaGVzID9cblx0XHQvLyBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCBcInN1YnRyYWN0XCIsIGUuZy4sIHdoZW4gdXNlZCBhcyBpbiBjc3NIb29rc1xuXHRcdE1hdGgubWF4KCAwLCBtYXRjaGVzWyAxIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAyIF0gfHwgXCJweFwiICkgOlxuXHRcdHZhbHVlO1xufVxuXG5mdW5jdGlvbiBhdWdtZW50V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEsIGlzQm9yZGVyQm94LCBzdHlsZXMgKSB7XG5cdHZhciBpID0gZXh0cmEgPT09ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSA/XG5cdFx0Ly8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSByaWdodCBtZWFzdXJlbWVudCwgYXZvaWQgYXVnbWVudGF0aW9uXG5cdFx0NCA6XG5cdFx0Ly8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllc1xuXHRcdG5hbWUgPT09IFwid2lkdGhcIiA/IDEgOiAwLFxuXG5cdFx0dmFsID0gMDtcblxuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7XG5cdFx0Ly8gQm90aCBib3ggbW9kZWxzIGV4Y2x1ZGUgbWFyZ2luLCBzbyBhZGQgaXQgaWYgd2Ugd2FudCBpdFxuXHRcdGlmICggZXh0cmEgPT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHR2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgZXh0cmEgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc0JvcmRlckJveCApIHtcblx0XHRcdC8vIGJvcmRlci1ib3ggaW5jbHVkZXMgcGFkZGluZywgc28gcmVtb3ZlIGl0IGlmIHdlIHdhbnQgY29udGVudFxuXHRcdFx0aWYgKCBleHRyYSA9PT0gXCJjb250ZW50XCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgYm9yZGVyIG5vciBtYXJnaW4sIHNvIHJlbW92ZSBib3JkZXJcblx0XHRcdGlmICggZXh0cmEgIT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50LCBzbyBhZGQgcGFkZGluZ1xuXHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50IG5vciBwYWRkaW5nLCBzbyBhZGQgYm9yZGVyXG5cdFx0XHRpZiAoIGV4dHJhICE9PSBcInBhZGRpbmdcIiApIHtcblx0XHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHZhbDtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKSB7XG5cblx0Ly8gU3RhcnQgd2l0aCBvZmZzZXQgcHJvcGVydHksIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGJvcmRlci1ib3ggdmFsdWVcblx0dmFyIHZhbHVlSXNCb3JkZXJCb3ggPSB0cnVlLFxuXHRcdHZhbCA9IG5hbWUgPT09IFwid2lkdGhcIiA/IGVsZW0ub2Zmc2V0V2lkdGggOiBlbGVtLm9mZnNldEhlaWdodCxcblx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblx0XHRpc0JvcmRlckJveCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCI7XG5cblx0Ly8gU29tZSBub24taHRtbCBlbGVtZW50cyByZXR1cm4gdW5kZWZpbmVkIGZvciBvZmZzZXRXaWR0aCwgc28gY2hlY2sgZm9yIG51bGwvdW5kZWZpbmVkXG5cdC8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NVxuXHQvLyBNYXRoTUwgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00OTE2Njhcblx0aWYgKCB2YWwgPD0gMCB8fCB2YWwgPT0gbnVsbCApIHtcblx0XHQvLyBGYWxsIGJhY2sgdG8gY29tcHV0ZWQgdGhlbiB1bmNvbXB1dGVkIGNzcyBpZiBuZWNlc3Nhcnlcblx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuXHRcdGlmICggdmFsIDwgMCB8fCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdHZhbCA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBDb21wdXRlZCB1bml0IGlzIG5vdCBwaXhlbHMuIFN0b3AgaGVyZSBhbmQgcmV0dXJuLlxuXHRcdGlmICggcm51bW5vbnB4LnRlc3QodmFsKSApIHtcblx0XHRcdHJldHVybiB2YWw7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXNcblx0XHQvLyBmb3IgZ2V0Q29tcHV0ZWRTdHlsZSBzaWxlbnRseSBmYWxscyBiYWNrIHRvIHRoZSByZWxpYWJsZSBlbGVtLnN0eWxlXG5cdFx0dmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94ICYmXG5cdFx0XHQoIHN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGUoKSB8fCB2YWwgPT09IGVsZW0uc3R5bGVbIG5hbWUgXSApO1xuXG5cdFx0Ly8gTm9ybWFsaXplIFwiXCIsIGF1dG8sIGFuZCBwcmVwYXJlIGZvciBleHRyYVxuXHRcdHZhbCA9IHBhcnNlRmxvYXQoIHZhbCApIHx8IDA7XG5cdH1cblxuXHQvLyBVc2UgdGhlIGFjdGl2ZSBib3gtc2l6aW5nIG1vZGVsIHRvIGFkZC9zdWJ0cmFjdCBpcnJlbGV2YW50IHN0eWxlc1xuXHRyZXR1cm4gKCB2YWwgK1xuXHRcdGF1Z21lbnRXaWR0aE9ySGVpZ2h0KFxuXHRcdFx0ZWxlbSxcblx0XHRcdG5hbWUsXG5cdFx0XHRleHRyYSB8fCAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICksXG5cdFx0XHR2YWx1ZUlzQm9yZGVyQm94LFxuXHRcdFx0c3R5bGVzXG5cdFx0KVxuXHQpICsgXCJweFwiO1xufVxuXG5mdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7XG5cdHZhciBkaXNwbGF5LCBlbGVtLCBoaWRkZW4sXG5cdFx0dmFsdWVzID0gW10sXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcblx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0dmFsdWVzWyBpbmRleCBdID0gZGF0YV9wcml2LmdldCggZWxlbSwgXCJvbGRkaXNwbGF5XCIgKTtcblx0XHRkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuXHRcdGlmICggc2hvdyApIHtcblx0XHRcdC8vIFJlc2V0IHRoZSBpbmxpbmUgZGlzcGxheSBvZiB0aGlzIGVsZW1lbnQgdG8gbGVhcm4gaWYgaXQgaXNcblx0XHRcdC8vIGJlaW5nIGhpZGRlbiBieSBjYXNjYWRlZCBydWxlcyBvciBub3Rcblx0XHRcdGlmICggIXZhbHVlc1sgaW5kZXggXSAmJiBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGVsZW1lbnRzIHdoaWNoIGhhdmUgYmVlbiBvdmVycmlkZGVuIHdpdGggZGlzcGxheTogbm9uZVxuXHRcdFx0Ly8gaW4gYSBzdHlsZXNoZWV0IHRvIHdoYXRldmVyIHRoZSBkZWZhdWx0IGJyb3dzZXIgc3R5bGUgaXNcblx0XHRcdC8vIGZvciBzdWNoIGFuIGVsZW1lbnRcblx0XHRcdGlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmIGlzSGlkZGVuKCBlbGVtICkgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIFwib2xkZGlzcGxheVwiLCBkZWZhdWx0RGlzcGxheShlbGVtLm5vZGVOYW1lKSApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRoaWRkZW4gPSBpc0hpZGRlbiggZWxlbSApO1xuXG5cdFx0XHRpZiAoIGRpc3BsYXkgIT09IFwibm9uZVwiIHx8ICFoaWRkZW4gKSB7XG5cdFx0XHRcdGRhdGFfcHJpdi5zZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiLCBoaWRkZW4gPyBkaXNwbGF5IDogalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFNldCB0aGUgZGlzcGxheSBvZiBtb3N0IG9mIHRoZSBlbGVtZW50cyBpbiBhIHNlY29uZCBsb29wXG5cdC8vIHRvIGF2b2lkIHRoZSBjb25zdGFudCByZWZsb3dcblx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0aWYgKCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoICFzaG93IHx8IGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/IHZhbHVlc1sgaW5kZXggXSB8fCBcIlwiIDogXCJub25lXCI7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRzO1xufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblxuXHQvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcblx0Ly8gYmVoYXZpb3Igb2YgZ2V0dGluZyBhbmQgc2V0dGluZyBhIHN0eWxlIHByb3BlcnR5XG5cdGNzc0hvb2tzOiB7XG5cdFx0b3BhY2l0eToge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBXZSBzaG91bGQgYWx3YXlzIGdldCBhIG51bWJlciBiYWNrIGZyb20gb3BhY2l0eVxuXHRcdFx0XHRcdHZhciByZXQgPSBjdXJDU1MoIGVsZW0sIFwib3BhY2l0eVwiICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJldCA9PT0gXCJcIiA/IFwiMVwiIDogcmV0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkIFwicHhcIiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzXG5cdGNzc051bWJlcjoge1xuXHRcdFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcblx0XHRcImZpbGxPcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJmbGV4R3Jvd1wiOiB0cnVlLFxuXHRcdFwiZmxleFNocmlua1wiOiB0cnVlLFxuXHRcdFwiZm9udFdlaWdodFwiOiB0cnVlLFxuXHRcdFwibGluZUhlaWdodFwiOiB0cnVlLFxuXHRcdFwib3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwib3JkZXJcIjogdHJ1ZSxcblx0XHRcIm9ycGhhbnNcIjogdHJ1ZSxcblx0XHRcIndpZG93c1wiOiB0cnVlLFxuXHRcdFwiekluZGV4XCI6IHRydWUsXG5cdFx0XCJ6b29tXCI6IHRydWVcblx0fSxcblxuXHQvLyBBZGQgaW4gcHJvcGVydGllcyB3aG9zZSBuYW1lcyB5b3Ugd2lzaCB0byBmaXggYmVmb3JlXG5cdC8vIHNldHRpbmcgb3IgZ2V0dGluZyB0aGUgdmFsdWVcblx0Y3NzUHJvcHM6IHtcblx0XHRcImZsb2F0XCI6IFwiY3NzRmxvYXRcIlxuXHR9LFxuXG5cdC8vIEdldCBhbmQgc2V0IHRoZSBzdHlsZSBwcm9wZXJ0eSBvbiBhIERPTSBOb2RlXG5cdHN0eWxlOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUsIGV4dHJhICkge1xuXG5cdFx0Ly8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0dmFyIHJldCwgdHlwZSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRcdG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHwgKCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuXHRcdC8vIEdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24sIHRoZW4gdW5wcmVmaXhlZCB2ZXJzaW9uXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWVcblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG5cdFx0XHQvLyBDb252ZXJ0IFwiKz1cIiBvciBcIi09XCIgdG8gcmVsYXRpdmUgbnVtYmVycyAoIzczNDUpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgJiYgKHJldCA9IHJyZWxOdW0uZXhlYyggdmFsdWUgKSkgKSB7XG5cdFx0XHRcdHZhbHVlID0gKCByZXRbMV0gKyAxICkgKiByZXRbMl0gKyBwYXJzZUZsb2F0KCBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICkgKTtcblx0XHRcdFx0Ly8gRml4ZXMgYnVnICM5MjM3XG5cdFx0XHRcdHR5cGUgPSBcIm51bWJlclwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCBudWxsIGFuZCBOYU4gdmFsdWVzIGFyZW4ndCBzZXQgKCM3MTE2KVxuXHRcdFx0aWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlICE9PSB2YWx1ZSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIG51bWJlciwgYWRkICdweCcgdG8gdGhlIChleGNlcHQgZm9yIGNlcnRhaW4gQ1NTIHByb3BlcnRpZXMpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwibnVtYmVyXCIgJiYgIWpRdWVyeS5jc3NOdW1iZXJbIG9yaWdOYW1lIF0gKSB7XG5cdFx0XHRcdHZhbHVlICs9IFwicHhcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHRcdFx0Ly8gYmFja2dyb3VuZC0qIHByb3BzIGFmZmVjdCBvcmlnaW5hbCBjbG9uZSdzIHZhbHVlc1xuXHRcdFx0aWYgKCAhc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgJiYgdmFsdWUgPT09IFwiXCIgJiYgbmFtZS5pbmRleE9mKCBcImJhY2tncm91bmRcIiApID09PSAwICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gXCJpbmhlcml0XCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQsIHVzZSB0aGF0IHZhbHVlLCBvdGhlcndpc2UganVzdCBzZXQgdGhlIHNwZWNpZmllZCB2YWx1ZVxuXHRcdFx0aWYgKCAhaG9va3MgfHwgIShcInNldFwiIGluIGhvb2tzKSB8fCAodmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgZmFsc2UsIGV4dHJhICkpICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE90aGVyd2lzZSBqdXN0IGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgc3R5bGUgb2JqZWN0XG5cdFx0XHRyZXR1cm4gc3R5bGVbIG5hbWUgXTtcblx0XHR9XG5cdH0sXG5cblx0Y3NzOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZXh0cmEsIHN0eWxlcyApIHtcblx0XHR2YXIgdmFsLCBudW0sIGhvb2tzLFxuXHRcdFx0b3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWVcblx0XHRuYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8ICggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIGVsZW0uc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuXHRcdC8vIFRyeSBwcmVmaXhlZCBuYW1lIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIG5hbWVcblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuXHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICkge1xuXHRcdFx0dmFsID0gaG9va3MuZ2V0KCBlbGVtLCB0cnVlLCBleHRyYSApO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyd2lzZSwgaWYgYSB3YXkgdG8gZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBleGlzdHMsIHVzZSB0aGF0XG5cdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBcIm5vcm1hbFwiIHRvIGNvbXB1dGVkIHZhbHVlXG5cdFx0aWYgKCB2YWwgPT09IFwibm9ybWFsXCIgJiYgbmFtZSBpbiBjc3NOb3JtYWxUcmFuc2Zvcm0gKSB7XG5cdFx0XHR2YWwgPSBjc3NOb3JtYWxUcmFuc2Zvcm1bIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIG51bWVyaWMgaWYgZm9yY2VkIG9yIGEgcXVhbGlmaWVyIHdhcyBwcm92aWRlZCBhbmQgdmFsIGxvb2tzIG51bWVyaWNcblx0XHRpZiAoIGV4dHJhID09PSBcIlwiIHx8IGV4dHJhICkge1xuXHRcdFx0bnVtID0gcGFyc2VGbG9hdCggdmFsICk7XG5cdFx0XHRyZXR1cm4gZXh0cmEgPT09IHRydWUgfHwgalF1ZXJ5LmlzTnVtZXJpYyggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCwgZXh0cmEgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0XHRcdC8vIENlcnRhaW4gZWxlbWVudHMgY2FuIGhhdmUgZGltZW5zaW9uIGluZm8gaWYgd2UgaW52aXNpYmx5IHNob3cgdGhlbVxuXHRcdFx0XHQvLyBidXQgaXQgbXVzdCBoYXZlIGEgY3VycmVudCBkaXNwbGF5IHN0eWxlIHRoYXQgd291bGQgYmVuZWZpdFxuXHRcdFx0XHRyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgKSAmJiBlbGVtLm9mZnNldFdpZHRoID09PSAwID9cblx0XHRcdFx0XHRqUXVlcnkuc3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0Z2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIGV4dHJhICkge1xuXHRcdFx0dmFyIHN0eWxlcyA9IGV4dHJhICYmIGdldFN0eWxlcyggZWxlbSApO1xuXHRcdFx0cmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgZXh0cmEgP1xuXHRcdFx0XHRhdWdtZW50V2lkdGhPckhlaWdodChcblx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdG5hbWUsXG5cdFx0XHRcdFx0ZXh0cmEsXG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0XHRzdHlsZXNcblx0XHRcdFx0KSA6IDBcblx0XHRcdCk7XG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5qUXVlcnkuY3NzSG9va3MubWFyZ2luUmlnaHQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodCxcblx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnN3YXAoIGVsZW0sIHsgXCJkaXNwbGF5XCI6IFwiaW5saW5lLWJsb2NrXCIgfSxcblx0XHRcdFx0Y3VyQ1NTLCBbIGVsZW0sIFwibWFyZ2luUmlnaHRcIiBdICk7XG5cdFx0fVxuXHR9XG4pO1xuXG4vLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzXG5qUXVlcnkuZWFjaCh7XG5cdG1hcmdpbjogXCJcIixcblx0cGFkZGluZzogXCJcIixcblx0Ym9yZGVyOiBcIldpZHRoXCJcbn0sIGZ1bmN0aW9uKCBwcmVmaXgsIHN1ZmZpeCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXSA9IHtcblx0XHRleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBpID0gMCxcblx0XHRcdFx0ZXhwYW5kZWQgPSB7fSxcblxuXHRcdFx0XHQvLyBBc3N1bWVzIGEgc2luZ2xlIG51bWJlciBpZiBub3QgYSBzdHJpbmdcblx0XHRcdFx0cGFydHMgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS5zcGxpdChcIiBcIikgOiBbIHZhbHVlIF07XG5cblx0XHRcdGZvciAoIDsgaSA8IDQ7IGkrKyApIHtcblx0XHRcdFx0ZXhwYW5kZWRbIHByZWZpeCArIGNzc0V4cGFuZFsgaSBdICsgc3VmZml4IF0gPVxuXHRcdFx0XHRcdHBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV4cGFuZGVkO1xuXHRcdH1cblx0fTtcblxuXHRpZiAoICFybWFyZ2luLnRlc3QoIHByZWZpeCApICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0Y3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHN0eWxlcywgbGVuLFxuXHRcdFx0XHRtYXAgPSB7fSxcblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHtcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICk7XG5cdFx0XHRcdGxlbiA9IG5hbWUubGVuZ3RoO1xuXG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdG1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBtYXA7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDpcblx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApO1xuXHRcdH0sIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9LFxuXHRzaG93OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTtcblx0fSxcblx0aGlkZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzICk7XG5cdH0sXG5cdHRvZ2dsZTogZnVuY3Rpb24oIHN0YXRlICkge1xuXHRcdGlmICggdHlwZW9mIHN0YXRlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdHJldHVybiBzdGF0ZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGlmICggaXNIaWRkZW4oIHRoaXMgKSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KTtcblxuXG5mdW5jdGlvbiBUd2VlbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKSB7XG5cdHJldHVybiBuZXcgVHdlZW4ucHJvdG90eXBlLmluaXQoIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICk7XG59XG5qUXVlcnkuVHdlZW4gPSBUd2VlbjtcblxuVHdlZW4ucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogVHdlZW4sXG5cdGluaXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZywgdW5pdCApIHtcblx0XHR0aGlzLmVsZW0gPSBlbGVtO1xuXHRcdHRoaXMucHJvcCA9IHByb3A7XG5cdFx0dGhpcy5lYXNpbmcgPSBlYXNpbmcgfHwgXCJzd2luZ1wiO1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5zdGFydCA9IHRoaXMubm93ID0gdGhpcy5jdXIoKTtcblx0XHR0aGlzLmVuZCA9IGVuZDtcblx0XHR0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApO1xuXHR9LFxuXHRjdXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRyZXR1cm4gaG9va3MgJiYgaG9va3MuZ2V0ID9cblx0XHRcdGhvb2tzLmdldCggdGhpcyApIDpcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQoIHRoaXMgKTtcblx0fSxcblx0cnVuOiBmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHR2YXIgZWFzZWQsXG5cdFx0XHRob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKFxuXHRcdFx0XHRwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZXJjZW50LCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb25cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50O1xuXHRcdH1cblx0XHR0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5zdGVwICkge1xuXHRcdFx0dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCggdGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgaG9va3Muc2V0ICkge1xuXHRcdFx0aG9va3Muc2V0KCB0aGlzICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQoIHRoaXMgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn07XG5cblR3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFR3ZWVuLnByb3RvdHlwZTtcblxuVHdlZW4ucHJvcEhvb2tzID0ge1xuXHRfZGVmYXVsdDoge1xuXHRcdGdldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0dmFyIHJlc3VsdDtcblxuXHRcdFx0aWYgKCB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gIT0gbnVsbCAmJlxuXHRcdFx0XHQoIXR3ZWVuLmVsZW0uc3R5bGUgfHwgdHdlZW4uZWxlbS5zdHlsZVsgdHdlZW4ucHJvcCBdID09IG51bGwpICkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQYXNzaW5nIGFuIGVtcHR5IHN0cmluZyBhcyBhIDNyZCBwYXJhbWV0ZXIgdG8gLmNzcyB3aWxsIGF1dG9tYXRpY2FsbHlcblx0XHRcdC8vIGF0dGVtcHQgYSBwYXJzZUZsb2F0IGFuZCBmYWxsYmFjayB0byBhIHN0cmluZyBpZiB0aGUgcGFyc2UgZmFpbHMuXG5cdFx0XHQvLyBTaW1wbGUgdmFsdWVzIHN1Y2ggYXMgXCIxMHB4XCIgYXJlIHBhcnNlZCB0byBGbG9hdDtcblx0XHRcdC8vIGNvbXBsZXggdmFsdWVzIHN1Y2ggYXMgXCJyb3RhdGUoMXJhZClcIiBhcmUgcmV0dXJuZWQgYXMtaXMuXG5cdFx0XHRyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCBcIlwiICk7XG5cdFx0XHQvLyBFbXB0eSBzdHJpbmdzLCBudWxsLCB1bmRlZmluZWQgYW5kIFwiYXV0b1wiIGFyZSBjb252ZXJ0ZWQgdG8gMC5cblx0XHRcdHJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gXCJhdXRvXCIgPyAwIDogcmVzdWx0O1xuXHRcdH0sXG5cdFx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0XHQvLyBVc2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdC5cblx0XHRcdC8vIFVzZSBjc3NIb29rIGlmIGl0cyB0aGVyZS5cblx0XHRcdC8vIFVzZSAuc3R5bGUgaWYgYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUuXG5cdFx0XHRpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0oIHR3ZWVuICk7XG5cdFx0XHR9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLnN0eWxlICYmICggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8IGpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgdHdlZW4ubm93ICsgdHdlZW4udW5pdCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuLy8gU3VwcG9ydDogSUU5XG4vLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHtcblx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICYmIHR3ZWVuLmVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5lYXNpbmcgPSB7XG5cdGxpbmVhcjogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIHA7XG5cdH0sXG5cdHN3aW5nOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gMC41IC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJICkgLyAyO1xuXHR9XG59O1xuXG5qUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDtcblxuLy8gQmFjayBDb21wYXQgPDEuOCBleHRlbnNpb24gcG9pbnRcbmpRdWVyeS5meC5zdGVwID0ge307XG5cblxuXG5cbnZhclxuXHRmeE5vdywgdGltZXJJZCxcblx0cmZ4dHlwZXMgPSAvXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sXG5cdHJmeG51bSA9IG5ldyBSZWdFeHAoIFwiXig/OihbKy1dKT18KShcIiArIHBudW0gKyBcIikoW2EteiVdKikkXCIsIFwiaVwiICksXG5cdHJydW4gPSAvcXVldWVIb29rcyQvLFxuXHRhbmltYXRpb25QcmVmaWx0ZXJzID0gWyBkZWZhdWx0UHJlZmlsdGVyIF0sXG5cdHR3ZWVuZXJzID0ge1xuXHRcdFwiKlwiOiBbIGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcblx0XHRcdHZhciB0d2VlbiA9IHRoaXMuY3JlYXRlVHdlZW4oIHByb3AsIHZhbHVlICksXG5cdFx0XHRcdHRhcmdldCA9IHR3ZWVuLmN1cigpLFxuXHRcdFx0XHRwYXJ0cyA9IHJmeG51bS5leGVjKCB2YWx1ZSApLFxuXHRcdFx0XHR1bml0ID0gcGFydHMgJiYgcGFydHNbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKSxcblxuXHRcdFx0XHQvLyBTdGFydGluZyB2YWx1ZSBjb21wdXRhdGlvbiBpcyByZXF1aXJlZCBmb3IgcG90ZW50aWFsIHVuaXQgbWlzbWF0Y2hlc1xuXHRcdFx0XHRzdGFydCA9ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdIHx8IHVuaXQgIT09IFwicHhcIiAmJiArdGFyZ2V0ICkgJiZcblx0XHRcdFx0XHRyZnhudW0uZXhlYyggalF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgcHJvcCApICksXG5cdFx0XHRcdHNjYWxlID0gMSxcblx0XHRcdFx0bWF4SXRlcmF0aW9ucyA9IDIwO1xuXG5cdFx0XHRpZiAoIHN0YXJ0ICYmIHN0YXJ0WyAzIF0gIT09IHVuaXQgKSB7XG5cdFx0XHRcdC8vIFRydXN0IHVuaXRzIHJlcG9ydGVkIGJ5IGpRdWVyeS5jc3Ncblx0XHRcdFx0dW5pdCA9IHVuaXQgfHwgc3RhcnRbIDMgXTtcblxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uXG5cdFx0XHRcdHBhcnRzID0gcGFydHMgfHwgW107XG5cblx0XHRcdFx0Ly8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnRcblx0XHRcdFx0c3RhcnQgPSArdGFyZ2V0IHx8IDE7XG5cblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdC8vIElmIHByZXZpb3VzIGl0ZXJhdGlvbiB6ZXJvZWQgb3V0LCBkb3VibGUgdW50aWwgd2UgZ2V0ICpzb21ldGhpbmcqLlxuXHRcdFx0XHRcdC8vIFVzZSBzdHJpbmcgZm9yIGRvdWJsaW5nIHNvIHdlIGRvbid0IGFjY2lkZW50YWxseSBzZWUgc2NhbGUgYXMgdW5jaGFuZ2VkIGJlbG93XG5cdFx0XHRcdFx0c2NhbGUgPSBzY2FsZSB8fCBcIi41XCI7XG5cblx0XHRcdFx0XHQvLyBBZGp1c3QgYW5kIGFwcGx5XG5cdFx0XHRcdFx0c3RhcnQgPSBzdGFydCAvIHNjYWxlO1xuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgcHJvcCwgc3RhcnQgKyB1bml0ICk7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHNjYWxlLCB0b2xlcmF0aW5nIHplcm8gb3IgTmFOIGZyb20gdHdlZW4uY3VyKCksXG5cdFx0XHRcdC8vIGJyZWFrIHRoZSBsb29wIGlmIHNjYWxlIGlzIHVuY2hhbmdlZCBvciBwZXJmZWN0LCBvciBpZiB3ZSd2ZSBqdXN0IGhhZCBlbm91Z2hcblx0XHRcdFx0fSB3aGlsZSAoIHNjYWxlICE9PSAoc2NhbGUgPSB0d2Vlbi5jdXIoKSAvIHRhcmdldCkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVwZGF0ZSB0d2VlbiBwcm9wZXJ0aWVzXG5cdFx0XHRpZiAoIHBhcnRzICkge1xuXHRcdFx0XHRzdGFydCA9IHR3ZWVuLnN0YXJ0ID0gK3N0YXJ0IHx8ICt0YXJnZXQgfHwgMDtcblx0XHRcdFx0dHdlZW4udW5pdCA9IHVuaXQ7XG5cdFx0XHRcdC8vIElmIGEgKz0vLT0gdG9rZW4gd2FzIHByb3ZpZGVkLCB3ZSdyZSBkb2luZyBhIHJlbGF0aXZlIGFuaW1hdGlvblxuXHRcdFx0XHR0d2Vlbi5lbmQgPSBwYXJ0c1sgMSBdID9cblx0XHRcdFx0XHRzdGFydCArICggcGFydHNbIDEgXSArIDEgKSAqIHBhcnRzWyAyIF0gOlxuXHRcdFx0XHRcdCtwYXJ0c1sgMiBdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fSBdXG5cdH07XG5cbi8vIEFuaW1hdGlvbnMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHdpbGwgcnVuIHN5bmNocm9ub3VzbHlcbmZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkge1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdGZ4Tm93ID0gdW5kZWZpbmVkO1xuXHR9KTtcblx0cmV0dXJuICggZnhOb3cgPSBqUXVlcnkubm93KCkgKTtcbn1cblxuLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb25cbmZ1bmN0aW9uIGdlbkZ4KCB0eXBlLCBpbmNsdWRlV2lkdGggKSB7XG5cdHZhciB3aGljaCxcblx0XHRpID0gMCxcblx0XHRhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH07XG5cblx0Ly8gSWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLFxuXHQvLyBvdGhlcndpc2Ugc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodFxuXHRpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDtcblx0Zm9yICggOyBpIDwgNCA7IGkgKz0gMiAtIGluY2x1ZGVXaWR0aCApIHtcblx0XHR3aGljaCA9IGNzc0V4cGFuZFsgaSBdO1xuXHRcdGF0dHJzWyBcIm1hcmdpblwiICsgd2hpY2ggXSA9IGF0dHJzWyBcInBhZGRpbmdcIiArIHdoaWNoIF0gPSB0eXBlO1xuXHR9XG5cblx0aWYgKCBpbmNsdWRlV2lkdGggKSB7XG5cdFx0YXR0cnMub3BhY2l0eSA9IGF0dHJzLndpZHRoID0gdHlwZTtcblx0fVxuXG5cdHJldHVybiBhdHRycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7XG5cdHZhciB0d2Vlbixcblx0XHRjb2xsZWN0aW9uID0gKCB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCB0d2VlbmVyc1sgXCIqXCIgXSApLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoICh0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApKSApIHtcblxuXHRcdFx0Ly8gV2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHlcblx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlciggZWxlbSwgcHJvcHMsIG9wdHMgKSB7XG5cdC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cblx0dmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIHR3ZWVuLCBob29rcywgb2xkZmlyZSwgZGlzcGxheSwgY2hlY2tEaXNwbGF5LFxuXHRcdGFuaW0gPSB0aGlzLFxuXHRcdG9yaWcgPSB7fSxcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGUsXG5cdFx0aGlkZGVuID0gZWxlbS5ub2RlVHlwZSAmJiBpc0hpZGRlbiggZWxlbSApLFxuXHRcdGRhdGFTaG93ID0gZGF0YV9wcml2LmdldCggZWxlbSwgXCJmeHNob3dcIiApO1xuXG5cdC8vIEhhbmRsZSBxdWV1ZTogZmFsc2UgcHJvbWlzZXNcblx0aWYgKCAhb3B0cy5xdWV1ZSApIHtcblx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgXCJmeFwiICk7XG5cdFx0aWYgKCBob29rcy51bnF1ZXVlZCA9PSBudWxsICkge1xuXHRcdFx0aG9va3MudW5xdWV1ZWQgPSAwO1xuXHRcdFx0b2xkZmlyZSA9IGhvb2tzLmVtcHR5LmZpcmU7XG5cdFx0XHRob29rcy5lbXB0eS5maXJlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggIWhvb2tzLnVucXVldWVkICkge1xuXHRcdFx0XHRcdG9sZGZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0aG9va3MudW5xdWV1ZWQrKztcblxuXHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gRW5zdXJlIHRoZSBjb21wbGV0ZSBoYW5kbGVyIGlzIGNhbGxlZCBiZWZvcmUgdGhpcyBjb21wbGV0ZXNcblx0XHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRob29rcy51bnF1ZXVlZC0tO1xuXHRcdFx0XHRpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sIFwiZnhcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gSGVpZ2h0L3dpZHRoIG92ZXJmbG93IHBhc3Ncblx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCJoZWlnaHRcIiBpbiBwcm9wcyB8fCBcIndpZHRoXCIgaW4gcHJvcHMgKSApIHtcblx0XHQvLyBNYWtlIHN1cmUgdGhhdCBub3RoaW5nIHNuZWFrcyBvdXRcblx0XHQvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFOS0xMCBkbyBub3Rcblx0XHQvLyBjaGFuZ2UgdGhlIG92ZXJmbG93IGF0dHJpYnV0ZSB3aGVuIG92ZXJmbG93WCBhbmRcblx0XHQvLyBvdmVyZmxvd1kgYXJlIHNldCB0byB0aGUgc2FtZSB2YWx1ZVxuXHRcdG9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdO1xuXG5cdFx0Ly8gU2V0IGRpc3BsYXkgcHJvcGVydHkgdG8gaW5saW5lLWJsb2NrIGZvciBoZWlnaHQvd2lkdGhcblx0XHQvLyBhbmltYXRpb25zIG9uIGlubGluZSBlbGVtZW50cyB0aGF0IGFyZSBoYXZpbmcgd2lkdGgvaGVpZ2h0IGFuaW1hdGVkXG5cdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cblx0XHQvLyBUZXN0IGRlZmF1bHQgZGlzcGxheSBpZiBkaXNwbGF5IGlzIGN1cnJlbnRseSBcIm5vbmVcIlxuXHRcdGNoZWNrRGlzcGxheSA9IGRpc3BsYXkgPT09IFwibm9uZVwiID9cblx0XHRcdGRhdGFfcHJpdi5nZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiICkgfHwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXk7XG5cblx0XHRpZiAoIGNoZWNrRGlzcGxheSA9PT0gXCJpbmxpbmVcIiAmJiBqUXVlcnkuY3NzKCBlbGVtLCBcImZsb2F0XCIgKSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRzdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHR9XG5cdH1cblxuXHRpZiAoIG9wdHMub3ZlcmZsb3cgKSB7XG5cdFx0c3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0c3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1ggPSBvcHRzLm92ZXJmbG93WyAxIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1kgPSBvcHRzLm92ZXJmbG93WyAyIF07XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBzaG93L2hpZGUgcGFzc1xuXHRmb3IgKCBwcm9wIGluIHByb3BzICkge1xuXHRcdHZhbHVlID0gcHJvcHNbIHByb3AgXTtcblx0XHRpZiAoIHJmeHR5cGVzLmV4ZWMoIHZhbHVlICkgKSB7XG5cdFx0XHRkZWxldGUgcHJvcHNbIHByb3AgXTtcblx0XHRcdHRvZ2dsZSA9IHRvZ2dsZSB8fCB2YWx1ZSA9PT0gXCJ0b2dnbGVcIjtcblx0XHRcdGlmICggdmFsdWUgPT09ICggaGlkZGVuID8gXCJoaWRlXCIgOiBcInNob3dcIiApICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZXJlIGlzIGRhdGFTaG93IGxlZnQgb3ZlciBmcm9tIGEgc3RvcHBlZCBoaWRlIG9yIHNob3cgYW5kIHdlIGFyZSBnb2luZyB0byBwcm9jZWVkIHdpdGggc2hvdywgd2Ugc2hvdWxkIHByZXRlbmQgdG8gYmUgaGlkZGVuXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IFwic2hvd1wiICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvcmlnWyBwcm9wIF0gPSBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdIHx8IGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCApO1xuXG5cdFx0Ly8gQW55IG5vbi1meCB2YWx1ZSBzdG9wcyB1cyBmcm9tIHJlc3RvcmluZyB0aGUgb3JpZ2luYWwgZGlzcGxheSB2YWx1ZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5ID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvcmlnICkgKSB7XG5cdFx0aWYgKCBkYXRhU2hvdyApIHtcblx0XHRcdGlmICggXCJoaWRkZW5cIiBpbiBkYXRhU2hvdyApIHtcblx0XHRcdFx0aGlkZGVuID0gZGF0YVNob3cuaGlkZGVuO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhU2hvdyA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIFwiZnhzaG93XCIsIHt9ICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcmUgc3RhdGUgaWYgaXRzIHRvZ2dsZSAtIGVuYWJsZXMgLnN0b3AoKS50b2dnbGUoKSB0byBcInJldmVyc2VcIlxuXHRcdGlmICggdG9nZ2xlICkge1xuXHRcdFx0ZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjtcblx0XHR9XG5cdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRqUXVlcnkoIGVsZW0gKS5zaG93KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuaW0uZG9uZShmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5KCBlbGVtICkuaGlkZSgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGFuaW0uZG9uZShmdW5jdGlvbigpIHtcblx0XHRcdHZhciBwcm9wO1xuXG5cdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cdFx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgb3JpZ1sgcHJvcCBdICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0dHdlZW4gPSBjcmVhdGVUd2VlbiggaGlkZGVuID8gZGF0YVNob3dbIHByb3AgXSA6IDAsIHByb3AsIGFuaW0gKTtcblxuXHRcdFx0aWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7XG5cdFx0XHRcdGRhdGFTaG93WyBwcm9wIF0gPSB0d2Vlbi5zdGFydDtcblx0XHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdFx0dHdlZW4uZW5kID0gdHdlZW4uc3RhcnQ7XG5cdFx0XHRcdFx0dHdlZW4uc3RhcnQgPSBwcm9wID09PSBcIndpZHRoXCIgfHwgcHJvcCA9PT0gXCJoZWlnaHRcIiA/IDEgOiAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdC8vIElmIHRoaXMgaXMgYSBub29wIGxpa2UgLmhpZGUoKS5oaWRlKCksIHJlc3RvcmUgYW4gb3ZlcndyaXR0ZW4gZGlzcGxheSB2YWx1ZVxuXHR9IGVsc2UgaWYgKCAoZGlzcGxheSA9PT0gXCJub25lXCIgPyBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApIDogZGlzcGxheSkgPT09IFwiaW5saW5lXCIgKSB7XG5cdFx0c3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcHJvcEZpbHRlciggcHJvcHMsIHNwZWNpYWxFYXNpbmcgKSB7XG5cdHZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7XG5cblx0Ly8gY2FtZWxDYXNlLCBzcGVjaWFsRWFzaW5nIGFuZCBleHBhbmQgY3NzSG9vayBwYXNzXG5cdGZvciAoIGluZGV4IGluIHByb3BzICkge1xuXHRcdG5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBpbmRleCApO1xuXHRcdGVhc2luZyA9IHNwZWNpYWxFYXNpbmdbIG5hbWUgXTtcblx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdO1xuXHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRlYXNpbmcgPSB2YWx1ZVsgMSBdO1xuXHRcdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyAwIF07XG5cdFx0fVxuXG5cdFx0aWYgKCBpbmRleCAhPT0gbmFtZSApIHtcblx0XHRcdHByb3BzWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgaW5kZXggXTtcblx0XHR9XG5cblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdO1xuXHRcdGlmICggaG9va3MgJiYgXCJleHBhbmRcIiBpbiBob29rcyApIHtcblx0XHRcdHZhbHVlID0gaG9va3MuZXhwYW5kKCB2YWx1ZSApO1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBuYW1lIF07XG5cblx0XHRcdC8vIE5vdCBxdWl0ZSAkLmV4dGVuZCwgdGhpcyB3b24ndCBvdmVyd3JpdGUgZXhpc3Rpbmcga2V5cy5cblx0XHRcdC8vIFJldXNpbmcgJ2luZGV4JyBiZWNhdXNlIHdlIGhhdmUgdGhlIGNvcnJlY3QgXCJuYW1lXCJcblx0XHRcdGZvciAoIGluZGV4IGluIHZhbHVlICkge1xuXHRcdFx0XHRpZiAoICEoIGluZGV4IGluIHByb3BzICkgKSB7XG5cdFx0XHRcdFx0cHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgaW5kZXggXTtcblx0XHRcdFx0XHRzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNwZWNpYWxFYXNpbmdbIG5hbWUgXSA9IGVhc2luZztcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkge1xuXHR2YXIgcmVzdWx0LFxuXHRcdHN0b3BwZWQsXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGFuaW1hdGlvblByZWZpbHRlcnMubGVuZ3RoLFxuXHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCkuYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdC8vIERvbid0IG1hdGNoIGVsZW0gaW4gdGhlIDphbmltYXRlZCBzZWxlY3RvclxuXHRcdFx0ZGVsZXRlIHRpY2suZWxlbTtcblx0XHR9KSxcblx0XHR0aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciBjdXJyZW50VGltZSA9IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRcdHJlbWFpbmluZyA9IE1hdGgubWF4KCAwLCBhbmltYXRpb24uc3RhcnRUaW1lICsgYW5pbWF0aW9uLmR1cmF0aW9uIC0gY3VycmVudFRpbWUgKSxcblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCAyLjNcblx0XHRcdFx0Ly8gQXJjaGFpYyBjcmFzaCBidWcgd29uJ3QgYWxsb3cgdXMgdG8gdXNlIGAxIC0gKCAwLjUgfHwgMCApYCAoIzEyNDk3KVxuXHRcdFx0XHR0ZW1wID0gcmVtYWluaW5nIC8gYW5pbWF0aW9uLmR1cmF0aW9uIHx8IDAsXG5cdFx0XHRcdHBlcmNlbnQgPSAxIC0gdGVtcCxcblx0XHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0XHRsZW5ndGggPSBhbmltYXRpb24udHdlZW5zLmxlbmd0aDtcblxuXHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCBwZXJjZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBwZXJjZW50LCByZW1haW5pbmcgXSk7XG5cblx0XHRcdGlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gcmVtYWluaW5nO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uIF0gKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSh7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0cHJvcHM6IGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wZXJ0aWVzICksXG5cdFx0XHRvcHRzOiBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB7IHNwZWNpYWxFYXNpbmc6IHt9IH0sIG9wdGlvbnMgKSxcblx0XHRcdG9yaWdpbmFsUHJvcGVydGllczogcHJvcGVydGllcyxcblx0XHRcdG9yaWdpbmFsT3B0aW9uczogb3B0aW9ucyxcblx0XHRcdHN0YXJ0VGltZTogZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuXHRcdFx0dHdlZW5zOiBbXSxcblx0XHRcdGNyZWF0ZVR3ZWVuOiBmdW5jdGlvbiggcHJvcCwgZW5kICkge1xuXHRcdFx0XHR2YXIgdHdlZW4gPSBqUXVlcnkuVHdlZW4oIGVsZW0sIGFuaW1hdGlvbi5vcHRzLCBwcm9wLCBlbmQsXG5cdFx0XHRcdFx0XHRhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnMucHVzaCggdHdlZW4gKTtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdFx0fSxcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKCBnb3RvRW5kICkge1xuXHRcdFx0XHR2YXIgaW5kZXggPSAwLFxuXHRcdFx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVuc1xuXHRcdFx0XHRcdC8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydFxuXHRcdFx0XHRcdGxlbmd0aCA9IGdvdG9FbmQgPyBhbmltYXRpb24udHdlZW5zLmxlbmd0aCA6IDA7XG5cdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wcGVkID0gdHJ1ZTtcblx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlc29sdmUgd2hlbiB3ZSBwbGF5ZWQgdGhlIGxhc3QgZnJhbWU7IG90aGVyd2lzZSwgcmVqZWN0XG5cdFx0XHRcdGlmICggZ290b0VuZCApIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9KSxcblx0XHRwcm9wcyA9IGFuaW1hdGlvbi5wcm9wcztcblxuXHRwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApO1xuXG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuXHRcdHJlc3VsdCA9IGFuaW1hdGlvblByZWZpbHRlcnNbIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBlbGVtLCBwcm9wcywgYW5pbWF0aW9uLm9wdHMgKTtcblx0XHRpZiAoIHJlc3VsdCApIHtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXHR9XG5cblx0alF1ZXJ5Lm1hcCggcHJvcHMsIGNyZWF0ZVR3ZWVuLCBhbmltYXRpb24gKTtcblxuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkge1xuXHRcdGFuaW1hdGlvbi5vcHRzLnN0YXJ0LmNhbGwoIGVsZW0sIGFuaW1hdGlvbiApO1xuXHR9XG5cblx0alF1ZXJ5LmZ4LnRpbWVyKFxuXHRcdGpRdWVyeS5leHRlbmQoIHRpY2ssIHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRhbmltOiBhbmltYXRpb24sXG5cdFx0XHRxdWV1ZTogYW5pbWF0aW9uLm9wdHMucXVldWVcblx0XHR9KVxuXHQpO1xuXG5cdC8vIGF0dGFjaCBjYWxsYmFja3MgZnJvbSBvcHRpb25zXG5cdHJldHVybiBhbmltYXRpb24ucHJvZ3Jlc3MoIGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzIClcblx0XHQuZG9uZSggYW5pbWF0aW9uLm9wdHMuZG9uZSwgYW5pbWF0aW9uLm9wdHMuY29tcGxldGUgKVxuXHRcdC5mYWlsKCBhbmltYXRpb24ub3B0cy5mYWlsIClcblx0XHQuYWx3YXlzKCBhbmltYXRpb24ub3B0cy5hbHdheXMgKTtcbn1cblxualF1ZXJ5LkFuaW1hdGlvbiA9IGpRdWVyeS5leHRlbmQoIEFuaW1hdGlvbiwge1xuXG5cdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcHJvcHMgKSApIHtcblx0XHRcdGNhbGxiYWNrID0gcHJvcHM7XG5cdFx0XHRwcm9wcyA9IFsgXCIqXCIgXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvcHMgPSBwcm9wcy5zcGxpdChcIiBcIik7XG5cdFx0fVxuXG5cdFx0dmFyIHByb3AsXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdHByb3AgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRcdHR3ZWVuZXJzWyBwcm9wIF0gPSB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdO1xuXHRcdFx0dHdlZW5lcnNbIHByb3AgXS51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH1cblx0fSxcblxuXHRwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHtcblx0XHRpZiAoIHByZXBlbmQgKSB7XG5cdFx0XHRhbmltYXRpb25QcmVmaWx0ZXJzLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuaW1hdGlvblByZWZpbHRlcnMucHVzaCggY2FsbGJhY2sgKTtcblx0XHR9XG5cdH1cbn0pO1xuXG5qUXVlcnkuc3BlZWQgPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgZm4gKSB7XG5cdHZhciBvcHQgPSBzcGVlZCAmJiB0eXBlb2Ygc3BlZWQgPT09IFwib2JqZWN0XCIgPyBqUXVlcnkuZXh0ZW5kKCB7fSwgc3BlZWQgKSA6IHtcblx0XHRjb21wbGV0ZTogZm4gfHwgIWZuICYmIGVhc2luZyB8fFxuXHRcdFx0alF1ZXJ5LmlzRnVuY3Rpb24oIHNwZWVkICkgJiYgc3BlZWQsXG5cdFx0ZHVyYXRpb246IHNwZWVkLFxuXHRcdGVhc2luZzogZm4gJiYgZWFzaW5nIHx8IGVhc2luZyAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24oIGVhc2luZyApICYmIGVhc2luZ1xuXHR9O1xuXG5cdG9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5vZmYgPyAwIDogdHlwZW9mIG9wdC5kdXJhdGlvbiA9PT0gXCJudW1iZXJcIiA/IG9wdC5kdXJhdGlvbiA6XG5cdFx0b3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgPyBqUXVlcnkuZnguc3BlZWRzWyBvcHQuZHVyYXRpb24gXSA6IGpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7XG5cblx0Ly8gTm9ybWFsaXplIG9wdC5xdWV1ZSAtIHRydWUvdW5kZWZpbmVkL251bGwgLT4gXCJmeFwiXG5cdGlmICggb3B0LnF1ZXVlID09IG51bGwgfHwgb3B0LnF1ZXVlID09PSB0cnVlICkge1xuXHRcdG9wdC5xdWV1ZSA9IFwiZnhcIjtcblx0fVxuXG5cdC8vIFF1ZXVlaW5nXG5cdG9wdC5vbGQgPSBvcHQuY29tcGxldGU7XG5cblx0b3B0LmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0Lm9sZCApICkge1xuXHRcdFx0b3B0Lm9sZC5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHQucXVldWUgKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBvcHQ7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0ZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXG5cdFx0Ly8gU2hvdyBhbnkgaGlkZGVuIGVsZW1lbnRzIGFmdGVyIHNldHRpbmcgb3BhY2l0eSB0byAwXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBpc0hpZGRlbiApLmNzcyggXCJvcGFjaXR5XCIsIDAgKS5zaG93KClcblxuXHRcdFx0Ly8gQW5pbWF0ZSB0byB0aGUgdmFsdWUgc3BlY2lmaWVkXG5cdFx0XHQuZW5kKCkuYW5pbWF0ZSh7IG9wYWNpdHk6IHRvIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH0sXG5cdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHR2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLFxuXHRcdFx0b3B0YWxsID0galF1ZXJ5LnNwZWVkKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApLFxuXHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3Rcblx0XHRcdFx0dmFyIGFuaW0gPSBBbmltYXRpb24oIHRoaXMsIGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wICksIG9wdGFsbCApO1xuXG5cdFx0XHRcdC8vIEVtcHR5IGFuaW1hdGlvbnMsIG9yIGZpbmlzaGluZyByZXNvbHZlcyBpbW1lZGlhdGVseVxuXHRcdFx0XHRpZiAoIGVtcHR5IHx8IGRhdGFfcHJpdi5nZXQoIHRoaXMsIFwiZmluaXNoXCIgKSApIHtcblx0XHRcdFx0XHRhbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uO1xuXG5cdFx0cmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0dGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDpcblx0XHRcdHRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTtcblx0fSxcblx0c3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7XG5cdFx0dmFyIHN0b3BRdWV1ZSA9IGZ1bmN0aW9uKCBob29rcyApIHtcblx0XHRcdHZhciBzdG9wID0gaG9va3Muc3RvcDtcblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0c3RvcCggZ290b0VuZCApO1xuXHRcdH07XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0Z290b0VuZCA9IGNsZWFyUXVldWU7XG5cdFx0XHRjbGVhclF1ZXVlID0gdHlwZTtcblx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZGVxdWV1ZSA9IHRydWUsXG5cdFx0XHRcdGluZGV4ID0gdHlwZSAhPSBudWxsICYmIHR5cGUgKyBcInF1ZXVlSG9va3NcIixcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0ZGF0YSA9IGRhdGFfcHJpdi5nZXQoIHRoaXMgKTtcblxuXHRcdFx0aWYgKCBpbmRleCApIHtcblx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCApIHtcblx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaW5kZXggaW4gZGF0YSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICYmIHJydW4udGVzdCggaW5kZXggKSApIHtcblx0XHRcdFx0XHRcdHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmICh0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlKSApIHtcblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7XG5cdFx0XHRcdFx0ZGVxdWV1ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZC5cblx0XHRcdC8vIFRpbWVycyBjdXJyZW50bHkgd2lsbCBjYWxsIHRoZWlyIGNvbXBsZXRlIGNhbGxiYWNrcywgd2hpY2hcblx0XHRcdC8vIHdpbGwgZGVxdWV1ZSBidXQgb25seSBpZiB0aGV5IHdlcmUgZ290b0VuZC5cblx0XHRcdGlmICggZGVxdWV1ZSB8fCAhZ290b0VuZCApIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblx0ZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRpZiAoIHR5cGUgIT09IGZhbHNlICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4LFxuXHRcdFx0XHRkYXRhID0gZGF0YV9wcml2LmdldCggdGhpcyApLFxuXHRcdFx0XHRxdWV1ZSA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlXCIgXSxcblx0XHRcdFx0aG9va3MgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgXSxcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0bGVuZ3RoID0gcXVldWUgPyBxdWV1ZS5sZW5ndGggOiAwO1xuXG5cdFx0XHQvLyBFbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhXG5cdFx0XHRkYXRhLmZpbmlzaCA9IHRydWU7XG5cblx0XHRcdC8vIEVtcHR5IHRoZSBxdWV1ZSBmaXJzdFxuXHRcdFx0alF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBbXSApO1xuXG5cdFx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnN0b3AgKSB7XG5cdFx0XHRcdGhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYWN0aXZlIGFuaW1hdGlvbnMsIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSB7XG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggdHJ1ZSApO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9vayBmb3IgYW55IGFuaW1hdGlvbnMgaW4gdGhlIG9sZCBxdWV1ZSBhbmQgZmluaXNoIHRoZW1cblx0XHRcdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdGlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkge1xuXHRcdFx0XHRcdHF1ZXVlWyBpbmRleCBdLmZpbmlzaC5jYWxsKCB0aGlzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVHVybiBvZmYgZmluaXNoaW5nIGZsYWdcblx0XHRcdGRlbGV0ZSBkYXRhLmZpbmlzaDtcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJ0b2dnbGVcIiwgXCJzaG93XCIsIFwiaGlkZVwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHR2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSBcImJvb2xlYW5cIiA/XG5cdFx0XHRjc3NGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICkgOlxuXHRcdFx0dGhpcy5hbmltYXRlKCBnZW5GeCggbmFtZSwgdHJ1ZSApLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9O1xufSk7XG5cbi8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcbmpRdWVyeS5lYWNoKHtcblx0c2xpZGVEb3duOiBnZW5GeChcInNob3dcIiksXG5cdHNsaWRlVXA6IGdlbkZ4KFwiaGlkZVwiKSxcblx0c2xpZGVUb2dnbGU6IGdlbkZ4KFwidG9nZ2xlXCIpLFxuXHRmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSxcblx0ZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LFxuXHRmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxufSwgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0pO1xuXG5qUXVlcnkudGltZXJzID0gW107XG5qUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgdGltZXIsXG5cdFx0aSA9IDAsXG5cdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycztcblxuXHRmeE5vdyA9IGpRdWVyeS5ub3coKTtcblxuXHRmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7XG5cdFx0dGltZXIgPSB0aW1lcnNbIGkgXTtcblx0XHQvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWRcblx0XHRpZiAoICF0aW1lcigpICYmIHRpbWVyc1sgaSBdID09PSB0aW1lciApIHtcblx0XHRcdHRpbWVycy5zcGxpY2UoIGktLSwgMSApO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIXRpbWVycy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0b3AoKTtcblx0fVxuXHRmeE5vdyA9IHVuZGVmaW5lZDtcbn07XG5cbmpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHtcblx0alF1ZXJ5LnRpbWVycy5wdXNoKCB0aW1lciApO1xuXHRpZiAoIHRpbWVyKCkgKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0YXJ0KCk7XG5cdH0gZWxzZSB7XG5cdFx0alF1ZXJ5LnRpbWVycy5wb3AoKTtcblx0fVxufTtcblxualF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5cbmpRdWVyeS5meC5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRpZiAoICF0aW1lcklkICkge1xuXHRcdHRpbWVySWQgPSBzZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApO1xuXHR9XG59O1xuXG5qUXVlcnkuZnguc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRjbGVhckludGVydmFsKCB0aW1lcklkICk7XG5cdHRpbWVySWQgPSBudWxsO1xufTtcblxualF1ZXJ5LmZ4LnNwZWVkcyA9IHtcblx0c2xvdzogNjAwLFxuXHRmYXN0OiAyMDAsXG5cdC8vIERlZmF1bHQgc3BlZWRcblx0X2RlZmF1bHQ6IDQwMFxufTtcblxuXG4vLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uXG4vLyBodHRwOi8vYmxpbmRzaWduYWxzLmNvbS9pbmRleC5waHAvMjAwOS8wNy9qcXVlcnktZGVsYXkvXG5qUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHtcblx0dGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTtcblx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7XG5cdFx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7XG5cdFx0aG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7XG5cdFx0fTtcblx0fSk7XG59O1xuXG5cbihmdW5jdGlvbigpIHtcblx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICksXG5cdFx0c2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzZWxlY3RcIiApLFxuXHRcdG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvcHRpb25cIiApICk7XG5cblx0aW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcblxuXHQvLyBTdXBwb3J0OiBpT1M8PTUuMSwgQW5kcm9pZDw9NC4yK1xuXHQvLyBEZWZhdWx0IHZhbHVlIGZvciBhIGNoZWNrYm94IHNob3VsZCBiZSBcIm9uXCJcblx0c3VwcG9ydC5jaGVja09uID0gaW5wdXQudmFsdWUgIT09IFwiXCI7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBNdXN0IGFjY2VzcyBzZWxlY3RlZEluZGV4IHRvIG1ha2UgZGVmYXVsdCBvcHRpb25zIHNlbGVjdFxuXHRzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8PTIuM1xuXHQvLyBPcHRpb25zIGluc2lkZSBkaXNhYmxlZCBzZWxlY3RzIGFyZSBpbmNvcnJlY3RseSBtYXJrZWQgYXMgZGlzYWJsZWRcblx0c2VsZWN0LmRpc2FibGVkID0gdHJ1ZTtcblx0c3VwcG9ydC5vcHREaXNhYmxlZCA9ICFvcHQuZGlzYWJsZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBBbiBpbnB1dCBsb3NlcyBpdHMgdmFsdWUgYWZ0ZXIgYmVjb21pbmcgYSByYWRpb1xuXHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRpbnB1dC52YWx1ZSA9IFwidFwiO1xuXHRpbnB1dC50eXBlID0gXCJyYWRpb1wiO1xuXHRzdXBwb3J0LnJhZGlvVmFsdWUgPSBpbnB1dC52YWx1ZSA9PT0gXCJ0XCI7XG59KSgpO1xuXG5cbnZhciBub2RlSG9vaywgYm9vbEhvb2ssXG5cdGF0dHJIYW5kbGUgPSBqUXVlcnkuZXhwci5hdHRySGFuZGxlO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0YXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5hdHRyLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTtcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRhdHRyOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBkb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBGYWxsYmFjayB0byBwcm9wIHdoZW4gYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZFxuXHRcdGlmICggdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlID09PSBzdHJ1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGF0dHJpYnV0ZXMgYXJlIGxvd2VyY2FzZVxuXHRcdC8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWRcblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblx0XHRcdG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5hdHRySG9va3NbIG5hbWUgXSB8fFxuXHRcdFx0XHQoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiBub2RlSG9vayApO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcblx0XHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyBcIlwiICk7XG5cdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdH1cblxuXHRcdH0gZWxzZSBpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHQvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuXHRcdFx0cmV0dXJuIHJldCA9PSBudWxsID9cblx0XHRcdFx0dW5kZWZpbmVkIDpcblx0XHRcdFx0cmV0O1xuXHRcdH1cblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0dmFyIG5hbWUsIHByb3BOYW1lLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICk7XG5cblx0XHRpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0d2hpbGUgKCAobmFtZSA9IGF0dHJOYW1lc1tpKytdKSApIHtcblx0XHRcdFx0cHJvcE5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cblx0XHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGdldCBzcGVjaWFsIHRyZWF0bWVudCAoIzEwODcwKVxuXHRcdFx0XHRpZiAoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRcdC8vIFNldCBjb3JyZXNwb25kaW5nIHByb3BlcnR5IHRvIGZhbHNlXG5cdFx0XHRcdFx0ZWxlbVsgcHJvcE5hbWUgXSA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIG5hbWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0YXR0ckhvb2tzOiB7XG5cdFx0dHlwZToge1xuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggIXN1cHBvcnQucmFkaW9WYWx1ZSAmJiB2YWx1ZSA9PT0gXCJyYWRpb1wiICYmXG5cdFx0XHRcdFx0alF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR2YXIgdmFsID0gZWxlbS52YWx1ZTtcblx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIHZhbHVlICk7XG5cdFx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnZhbHVlID0gdmFsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG4vLyBIb29rcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzXG5ib29sSG9vayA9IHtcblx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG5cdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHQvLyBSZW1vdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdoZW4gc2V0IHRvIGZhbHNlXG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgbmFtZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxufTtcbmpRdWVyeS5lYWNoKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCggL1xcdysvZyApLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0dmFyIGdldHRlciA9IGF0dHJIYW5kbGVbIG5hbWUgXSB8fCBqUXVlcnkuZmluZC5hdHRyO1xuXG5cdGF0dHJIYW5kbGVbIG5hbWUgXSA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgcmV0LCBoYW5kbGU7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHQvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wIGJ5IHRlbXBvcmFyaWx5IHJlbW92aW5nIHRoaXMgZnVuY3Rpb24gZnJvbSB0aGUgZ2V0dGVyXG5cdFx0XHRoYW5kbGUgPSBhdHRySGFuZGxlWyBuYW1lIF07XG5cdFx0XHRhdHRySGFuZGxlWyBuYW1lIF0gPSByZXQ7XG5cdFx0XHRyZXQgPSBnZXR0ZXIoIGVsZW0sIG5hbWUsIGlzWE1MICkgIT0gbnVsbCA/XG5cdFx0XHRcdG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0XHRhdHRySGFuZGxlWyBuYW1lIF0gPSBoYW5kbGU7XG5cdFx0fVxuXHRcdHJldHVybiByZXQ7XG5cdH07XG59KTtcblxuXG5cblxudmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0cHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0ZGVsZXRlIHRoaXNbIGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZSBdO1xuXHRcdH0pO1xuXHR9XG59KTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdHByb3BGaXg6IHtcblx0XHRcImZvclwiOiBcImh0bWxGb3JcIixcblx0XHRcImNsYXNzXCI6IFwiY2xhc3NOYW1lXCJcblx0fSxcblxuXHRwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIHJldCwgaG9va3MsIG5vdHhtbCxcblx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRcdC8vIERvbid0IGdldC9zZXQgcHJvcGVydGllcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRpZiAoICFlbGVtIHx8IG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdG5vdHhtbCA9IG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKTtcblxuXHRcdGlmICggbm90eG1sICkge1xuXHRcdFx0Ly8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rc1xuXHRcdFx0bmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcblx0XHRcdGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybiBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkpICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRyZXQgOlxuXHRcdFx0XHQoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCA/XG5cdFx0XHRcdHJldCA6XG5cdFx0XHRcdGVsZW1bIG5hbWUgXTtcblx0XHR9XG5cdH0sXG5cblx0cHJvcEhvb2tzOiB7XG5cdFx0dGFiSW5kZXg6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmhhc0F0dHJpYnV0ZSggXCJ0YWJpbmRleFwiICkgfHwgcmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHwgZWxlbS5ocmVmID9cblx0XHRcdFx0XHRlbGVtLnRhYkluZGV4IDpcblx0XHRcdFx0XHQtMTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG5pZiAoICFzdXBwb3J0Lm9wdFNlbGVjdGVkICkge1xuXHRqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH07XG59XG5cbmpRdWVyeS5lYWNoKFtcblx0XCJ0YWJJbmRleFwiLFxuXHRcInJlYWRPbmx5XCIsXG5cdFwibWF4TGVuZ3RoXCIsXG5cdFwiY2VsbFNwYWNpbmdcIixcblx0XCJjZWxsUGFkZGluZ1wiLFxuXHRcInJvd1NwYW5cIixcblx0XCJjb2xTcGFuXCIsXG5cdFwidXNlTWFwXCIsXG5cdFwiZnJhbWVCb3JkZXJcIixcblx0XCJjb250ZW50RWRpdGFibGVcIlxuXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7XG59KTtcblxuXG5cblxudmFyIHJjbGFzcyA9IC9bXFx0XFxyXFxuXFxmXS9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0YWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdHByb2NlZWQgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmFkZENsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCB0aGlzLmNsYXNzTmFtZSApICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIHByb2NlZWQgKSB7XG5cdFx0XHQvLyBUaGUgZGlzanVuY3Rpb24gaGVyZSBpcyBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIHJlbW92ZUNsYXNzKVxuXHRcdFx0Y2xhc3NlcyA9ICggdmFsdWUgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGVsZW0gPSB0aGlzWyBpIF07XG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBlbGVtLmNsYXNzTmFtZSA/XG5cdFx0XHRcdFx0KCBcIiBcIiArIGVsZW0uY2xhc3NOYW1lICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiICkgOlxuXHRcdFx0XHRcdFwiIFwiXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoY2xhenogPSBjbGFzc2VzW2orK10pICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPCAwICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgKz0gY2xhenogKyBcIiBcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBvbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBqUXVlcnkudHJpbSggY3VyICk7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLmNsYXNzTmFtZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uY2xhc3NOYW1lID0gZmluYWxWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRyZW1vdmVDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0cHJvY2VlZCA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW4gPSB0aGlzLmxlbmd0aDtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgdGhpcy5jbGFzc05hbWUgKSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGlmICggcHJvY2VlZCApIHtcblx0XHRcdGNsYXNzZXMgPSAoIHZhbHVlIHx8IFwiXCIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdO1xuXHRcdFx0XHQvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKVxuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggZWxlbS5jbGFzc05hbWUgP1xuXHRcdFx0XHRcdCggXCIgXCIgKyBlbGVtLmNsYXNzTmFtZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApIDpcblx0XHRcdFx0XHRcIlwiXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoY2xhenogPSBjbGFzc2VzW2orK10pICkge1xuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlICphbGwqIGluc3RhbmNlc1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPj0gMCApIHtcblx0XHRcdFx0XHRcdFx0Y3VyID0gY3VyLnJlcGxhY2UoIFwiIFwiICsgY2xhenogKyBcIiBcIiwgXCIgXCIgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSB2YWx1ZSA/IGpRdWVyeS50cmltKCBjdXIgKSA6IFwiXCI7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLmNsYXNzTmFtZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uY2xhc3NOYW1lID0gZmluYWxWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR0b2dnbGVDbGFzczogZnVuY3Rpb24oIHZhbHVlLCBzdGF0ZVZhbCApIHtcblx0XHR2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuXHRcdGlmICggdHlwZW9mIHN0YXRlVmFsID09PSBcImJvb2xlYW5cIiAmJiB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlVmFsID8gdGhpcy5hZGRDbGFzcyggdmFsdWUgKSA6IHRoaXMucmVtb3ZlQ2xhc3MoIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnRvZ2dsZUNsYXNzKCB2YWx1ZS5jYWxsKHRoaXMsIGksIHRoaXMuY2xhc3NOYW1lLCBzdGF0ZVZhbCksIHN0YXRlVmFsICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHQvLyBUb2dnbGUgaW5kaXZpZHVhbCBjbGFzcyBuYW1lc1xuXHRcdFx0XHR2YXIgY2xhc3NOYW1lLFxuXHRcdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHRcdHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0XHRjbGFzc05hbWVzID0gdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0XHRcdHdoaWxlICggKGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdKSApIHtcblx0XHRcdFx0XHQvLyBDaGVjayBlYWNoIGNsYXNzTmFtZSBnaXZlbiwgc3BhY2Ugc2VwYXJhdGVkIGxpc3Rcblx0XHRcdFx0XHRpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuXHRcdFx0XHRcdFx0c2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZVxuXHRcdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gc3RydW5kZWZpbmVkIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0XHRpZiAoIHRoaXMuY2xhc3NOYW1lICkge1xuXHRcdFx0XHRcdC8vIHN0b3JlIGNsYXNzTmFtZSBpZiBzZXRcblx0XHRcdFx0XHRkYXRhX3ByaXYuc2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgdGhpcy5jbGFzc05hbWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsXG5cdFx0XHRcdC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksXG5cdFx0XHRcdC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cblx0XHRcdFx0dGhpcy5jbGFzc05hbWUgPSB0aGlzLmNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgPyBcIlwiIDogZGF0YV9wcml2LmdldCggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIgKSB8fCBcIlwiO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdGhhc0NsYXNzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGNsYXNzTmFtZSA9IFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoO1xuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGlmICggdGhpc1tpXS5ub2RlVHlwZSA9PT0gMSAmJiAoXCIgXCIgKyB0aGlzW2ldLmNsYXNzTmFtZSArIFwiIFwiKS5yZXBsYWNlKHJjbGFzcywgXCIgXCIpLmluZGV4T2YoIGNsYXNzTmFtZSApID49IDAgKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufSk7XG5cblxuXG5cbnZhciBycmV0dXJuID0gL1xcci9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0dmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsIGlzRnVuY3Rpb24sXG5cdFx0XHRlbGVtID0gdGhpc1swXTtcblxuXHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyBlbGVtLnR5cGUgXSB8fCBqUXVlcnkudmFsSG9va3NbIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBcInZhbHVlXCIgKSkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0ID0gZWxlbS52YWx1ZTtcblxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIHJldCA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0Ly8gSGFuZGxlIG1vc3QgY29tbW9uIHN0cmluZyBjYXNlc1xuXHRcdFx0XHRcdHJldC5yZXBsYWNlKHJyZXR1cm4sIFwiXCIpIDpcblx0XHRcdFx0XHQvLyBIYW5kbGUgY2FzZXMgd2hlcmUgdmFsdWUgaXMgbnVsbC91bmRlZiBvciBudW1iZXJcblx0XHRcdFx0XHRyZXQgPT0gbnVsbCA/IFwiXCIgOiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0dmFyIHZhbDtcblxuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaXNGdW5jdGlvbiApIHtcblx0XHRcdFx0dmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUcmVhdCBudWxsL3VuZGVmaW5lZCBhcyBcIlwiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHR2YWwgPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWwgKz0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHR2YWwgPSBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSArIFwiXCI7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgdGhpcy50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0Ly8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmdcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoXCJzZXRcIiBpbiBob29rcykgfHwgaG9va3Muc2V0KCB0aGlzLCB2YWwsIFwidmFsdWVcIiApID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHRoaXMudmFsdWUgPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0dmFsSG9va3M6IHtcblx0XHRvcHRpb246IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWwgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInZhbHVlXCIgKTtcblx0XHRcdFx0cmV0dXJuIHZhbCAhPSBudWxsID9cblx0XHRcdFx0XHR2YWwgOlxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFMTAtMTErXG5cdFx0XHRcdFx0Ly8gb3B0aW9uLnRleHQgdGhyb3dzIGV4Y2VwdGlvbnMgKCMxNDY4NiwgIzE0ODU4KVxuXHRcdFx0XHRcdGpRdWVyeS50cmltKCBqUXVlcnkudGV4dCggZWxlbSApICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZWxlY3Q6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWx1ZSwgb3B0aW9uLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0aW5kZXggPSBlbGVtLnNlbGVjdGVkSW5kZXgsXG5cdFx0XHRcdFx0b25lID0gZWxlbS50eXBlID09PSBcInNlbGVjdC1vbmVcIiB8fCBpbmRleCA8IDAsXG5cdFx0XHRcdFx0dmFsdWVzID0gb25lID8gbnVsbCA6IFtdLFxuXHRcdFx0XHRcdG1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLFxuXHRcdFx0XHRcdGkgPSBpbmRleCA8IDAgP1xuXHRcdFx0XHRcdFx0bWF4IDpcblx0XHRcdFx0XHRcdG9uZSA/IGluZGV4IDogMDtcblxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zXG5cdFx0XHRcdGZvciAoIDsgaSA8IG1heDsgaSsrICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8vIElFNi05IGRvZXNuJ3QgdXBkYXRlIHNlbGVjdGVkIGFmdGVyIGZvcm0gcmVzZXQgKCMyNTUxKVxuXHRcdFx0XHRcdGlmICggKCBvcHRpb24uc2VsZWN0ZWQgfHwgaSA9PT0gaW5kZXggKSAmJlxuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHRcdFx0XHRcdCggc3VwcG9ydC5vcHREaXNhYmxlZCA/ICFvcHRpb24uZGlzYWJsZWQgOiBvcHRpb24uZ2V0QXR0cmlidXRlKCBcImRpc2FibGVkXCIgKSA9PT0gbnVsbCApICYmXG5cdFx0XHRcdFx0XHRcdCggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8ICFqUXVlcnkubm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCBcIm9wdGdyb3VwXCIgKSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHNwZWNpZmljIHZhbHVlIGZvciB0aGUgb3B0aW9uXG5cdFx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeSggb3B0aW9uICkudmFsKCk7XG5cblx0XHRcdFx0XHRcdC8vIFdlIGRvbid0IG5lZWQgYW4gYXJyYXkgZm9yIG9uZSBzZWxlY3RzXG5cdFx0XHRcdFx0XHRpZiAoIG9uZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuXHRcdFx0XHRcdFx0dmFsdWVzLnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgb3B0aW9uU2V0LCBvcHRpb24sXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHR2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLFxuXHRcdFx0XHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cdFx0XHRcdFx0aWYgKCAob3B0aW9uLnNlbGVjdGVkID0galF1ZXJ5LmluQXJyYXkoIG9wdGlvbi52YWx1ZSwgdmFsdWVzICkgPj0gMCkgKSB7XG5cdFx0XHRcdFx0XHRvcHRpb25TZXQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZvcmNlIGJyb3dzZXJzIHRvIGJlaGF2ZSBjb25zaXN0ZW50bHkgd2hlbiBub24tbWF0Y2hpbmcgdmFsdWUgaXMgc2V0XG5cdFx0XHRcdGlmICggIW9wdGlvblNldCApIHtcblx0XHRcdFx0XHRlbGVtLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSk7XG5cbi8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyXG5qUXVlcnkuZWFjaChbIFwicmFkaW9cIiwgXCJjaGVja2JveFwiIF0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXSA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0uY2hlY2tlZCA9IGpRdWVyeS5pbkFycmF5KCBqUXVlcnkoZWxlbSkudmFsKCksIHZhbHVlICkgPj0gMCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0aWYgKCAhc3VwcG9ydC5jaGVja09uICkge1xuXHRcdGpRdWVyeS52YWxIb29rc1sgdGhpcyBdLmdldCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwidmFsdWVcIikgPT09IG51bGwgPyBcIm9uXCIgOiBlbGVtLnZhbHVlO1xuXHRcdH07XG5cdH1cbn0pO1xuXG5cblxuXG4vLyBSZXR1cm4galF1ZXJ5IGZvciBhdHRyaWJ1dGVzLW9ubHkgaW5jbHVzaW9uXG5cblxualF1ZXJ5LmVhY2goIChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIFwiICtcblx0XCJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBcIiArXG5cdFwiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiKS5zcGxpdChcIiBcIiksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXG5cdC8vIEhhbmRsZSBldmVudCBiaW5kaW5nXG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/XG5cdFx0XHR0aGlzLm9uKCBuYW1lLCBudWxsLCBkYXRhLCBmbiApIDpcblx0XHRcdHRoaXMudHJpZ2dlciggbmFtZSApO1xuXHR9O1xufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRob3ZlcjogZnVuY3Rpb24oIGZuT3ZlciwgZm5PdXQgKSB7XG5cdFx0cmV0dXJuIHRoaXMubW91c2VlbnRlciggZm5PdmVyICkubW91c2VsZWF2ZSggZm5PdXQgfHwgZm5PdmVyICk7XG5cdH0sXG5cblx0YmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIG51bGwsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApO1xuXHR9LFxuXG5cdGRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHtcblx0XHQvLyAoIG5hbWVzcGFjZSApIG9yICggc2VsZWN0b3IsIHR5cGVzIFssIGZuXSApXG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyB0aGlzLm9mZiggc2VsZWN0b3IsIFwiKipcIiApIDogdGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuICk7XG5cdH1cbn0pO1xuXG5cbnZhciBub25jZSA9IGpRdWVyeS5ub3coKTtcblxudmFyIHJxdWVyeSA9ICgvXFw/Lyk7XG5cblxuXG4vLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuLy8gV29ya2Fyb3VuZCBmYWlsdXJlIHRvIHN0cmluZy1jYXN0IG51bGwgaW5wdXRcbmpRdWVyeS5wYXJzZUpTT04gPSBmdW5jdGlvbiggZGF0YSApIHtcblx0cmV0dXJuIEpTT04ucGFyc2UoIGRhdGEgKyBcIlwiICk7XG59O1xuXG5cbi8vIENyb3NzLWJyb3dzZXIgeG1sIHBhcnNpbmdcbmpRdWVyeS5wYXJzZVhNTCA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXHR2YXIgeG1sLCB0bXA7XG5cdGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRTlcblx0dHJ5IHtcblx0XHR0bXAgPSBuZXcgRE9NUGFyc2VyKCk7XG5cdFx0eG1sID0gdG1wLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgXCJ0ZXh0L3htbFwiICk7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHhtbCA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdGlmICggIXhtbCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwicGFyc2VyZXJyb3JcIiApLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBYTUw6IFwiICsgZGF0YSApO1xuXHR9XG5cdHJldHVybiB4bWw7XG59O1xuXG5cbnZhclxuXHRyaGFzaCA9IC8jLiokLyxcblx0cnRzID0gLyhbPyZdKV89W14mXSovLFxuXHRyaGVhZGVycyA9IC9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvbWcsXG5cdC8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvblxuXHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLyxcblx0cnByb3RvY29sID0gL15cXC9cXC8vLFxuXHRydXJsID0gL14oW1xcdy4rLV0rOikoPzpcXC9cXC8oPzpbXlxcLz8jXSpAfCkoW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sXG5cblx0LyogUHJlZmlsdGVyc1xuXHQgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKVxuXHQgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOlxuXHQgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG5cdCAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSlcblx0ICogMykga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHRwcmVmaWx0ZXJzID0ge30sXG5cblx0LyogVHJhbnNwb3J0cyBiaW5kaW5nc1xuXHQgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdCAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcblx0ICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHR0cmFuc3BvcnRzID0ge30sXG5cblx0Ly8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG5cdGFsbFR5cGVzID0gXCIqL1wiLmNvbmNhdCggXCIqXCIgKSxcblxuXHQvLyBEb2N1bWVudCBsb2NhdGlvblxuXHRhamF4TG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaHJlZixcblxuXHQvLyBTZWdtZW50IGxvY2F0aW9uIGludG8gcGFydHNcblx0YWpheExvY1BhcnRzID0gcnVybC5leGVjKCBhamF4TG9jYXRpb24udG9Mb3dlckNhc2UoKSApIHx8IFtdO1xuXG4vLyBCYXNlIFwiY29uc3RydWN0b3JcIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0XG5mdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSApIHtcblxuXHQvLyBkYXRhVHlwZUV4cHJlc3Npb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIFwiKlwiXG5cdHJldHVybiBmdW5jdGlvbiggZGF0YVR5cGVFeHByZXNzaW9uLCBmdW5jICkge1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZnVuYyA9IGRhdGFUeXBlRXhwcmVzc2lvbjtcblx0XHRcdGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuXHRcdH1cblxuXHRcdHZhciBkYXRhVHlwZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0ZGF0YVR5cGVzID0gZGF0YVR5cGVFeHByZXNzaW9uLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZnVuYyApICkge1xuXHRcdFx0Ly8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvblxuXHRcdFx0d2hpbGUgKCAoZGF0YVR5cGUgPSBkYXRhVHlwZXNbaSsrXSkgKSB7XG5cdFx0XHRcdC8vIFByZXBlbmQgaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmICggZGF0YVR5cGVbMF0gPT09IFwiK1wiICkge1xuXHRcdFx0XHRcdGRhdGFUeXBlID0gZGF0YVR5cGUuc2xpY2UoIDEgKSB8fCBcIipcIjtcblx0XHRcdFx0XHQoc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdKS51bnNoaWZ0KCBmdW5jICk7XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdChzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10pLnB1c2goIGZ1bmMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5mdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkge1xuXG5cdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTtcblxuXHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHR2YXIgc2VsZWN0ZWQ7XG5cdFx0aW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTtcblx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0dmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTtcblx0XHRcdGlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09IFwic3RyaW5nXCIgJiYgIXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXHRcdFx0XHRvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdGluc3BlY3QoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIGlmICggc2Vla2luZ1RyYW5zcG9ydCApIHtcblx0XHRcdFx0cmV0dXJuICEoIHNlbGVjdGVkID0gZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBzZWxlY3RlZDtcblx0fVxuXG5cdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xufVxuXG4vLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcbi8vIHRoYXQgdGFrZXMgXCJmbGF0XCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpXG4vLyBGaXhlcyAjOTg4N1xuZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdHZhciBrZXksIGRlZXAsXG5cdFx0ZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9O1xuXG5cdGZvciAoIGtleSBpbiBzcmMgKSB7XG5cdFx0aWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoZGVlcCA9IHt9KSApIClbIGtleSBdID0gc3JjWyBrZXkgXTtcblx0XHR9XG5cdH1cblx0aWYgKCBkZWVwICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRydWUsIHRhcmdldCwgZGVlcCApO1xuXHR9XG5cblx0cmV0dXJuIHRhcmdldDtcbn1cblxuLyogSGFuZGxlcyByZXNwb25zZXMgdG8gYW4gYWpheCByZXF1ZXN0OlxuICogLSBmaW5kcyB0aGUgcmlnaHQgZGF0YVR5cGUgKG1lZGlhdGVzIGJldHdlZW4gY29udGVudC10eXBlIGFuZCBleHBlY3RlZCBkYXRhVHlwZSlcbiAqIC0gcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuICovXG5mdW5jdGlvbiBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICkge1xuXG5cdHZhciBjdCwgdHlwZSwgZmluYWxEYXRhVHlwZSwgZmlyc3REYXRhVHlwZSxcblx0XHRjb250ZW50cyA9IHMuY29udGVudHMsXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXM7XG5cblx0Ly8gUmVtb3ZlIGF1dG8gZGF0YVR5cGUgYW5kIGdldCBjb250ZW50LXR5cGUgaW4gdGhlIHByb2Nlc3Ncblx0d2hpbGUgKCBkYXRhVHlwZXNbIDAgXSA9PT0gXCIqXCIgKSB7XG5cdFx0ZGF0YVR5cGVzLnNoaWZ0KCk7XG5cdFx0aWYgKCBjdCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0Y3QgPSBzLm1pbWVUeXBlIHx8IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpO1xuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZVxuXHRpZiAoIGN0ICkge1xuXHRcdGZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7XG5cdFx0XHRpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkge1xuXHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdHlwZSApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHJlc3BvbnNlIGZvciB0aGUgZXhwZWN0ZWQgZGF0YVR5cGVcblx0aWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7XG5cdFx0ZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuXHR9IGVsc2Uge1xuXHRcdC8vIFRyeSBjb252ZXJ0aWJsZSBkYXRhVHlwZXNcblx0XHRmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHtcblx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWzBdIF0gKSB7XG5cdFx0XHRcdGZpbmFsRGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGlmICggIWZpcnN0RGF0YVR5cGUgKSB7XG5cdFx0XHRcdGZpcnN0RGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmVcblx0XHRmaW5hbERhdGFUeXBlID0gZmluYWxEYXRhVHlwZSB8fCBmaXJzdERhdGFUeXBlO1xuXHR9XG5cblx0Ly8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZVxuXHQvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZFxuXHQvLyBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG5cdGlmICggZmluYWxEYXRhVHlwZSApIHtcblx0XHRpZiAoIGZpbmFsRGF0YVR5cGUgIT09IGRhdGFUeXBlc1sgMCBdICkge1xuXHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIGZpbmFsRGF0YVR5cGUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3BvbnNlc1sgZmluYWxEYXRhVHlwZSBdO1xuXHR9XG59XG5cbi8qIENoYWluIGNvbnZlcnNpb25zIGdpdmVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgb3JpZ2luYWwgcmVzcG9uc2VcbiAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKSB7XG5cdHZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LFxuXHRcdGNvbnZlcnRlcnMgPSB7fSxcblx0XHQvLyBXb3JrIHdpdGggYSBjb3B5IG9mIGRhdGFUeXBlcyBpbiBjYXNlIHdlIG5lZWQgdG8gbW9kaWZ5IGl0IGZvciBjb252ZXJzaW9uXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXMuc2xpY2UoKTtcblxuXHQvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXNcblx0aWYgKCBkYXRhVHlwZXNbIDEgXSApIHtcblx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdGNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07XG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdC8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlXG5cdHdoaWxlICggY3VycmVudCApIHtcblxuXHRcdGlmICggcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdICkge1xuXHRcdFx0anFYSFJbIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSBdID0gcmVzcG9uc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWRcblx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTtcblx0XHR9XG5cblx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0XHRpZiAoIGN1cnJlbnQgKSB7XG5cblx0XHQvLyBUaGVyZSdzIG9ubHkgd29yayB0byBkbyBpZiBjdXJyZW50IGRhdGFUeXBlIGlzIG5vbi1hdXRvXG5cdFx0XHRpZiAoIGN1cnJlbnQgPT09IFwiKlwiICkge1xuXG5cdFx0XHRcdGN1cnJlbnQgPSBwcmV2O1xuXG5cdFx0XHQvLyBDb252ZXJ0IHJlc3BvbnNlIGlmIHByZXYgZGF0YVR5cGUgaXMgbm9uLWF1dG8gYW5kIGRpZmZlcnMgZnJvbSBjdXJyZW50XG5cdFx0XHR9IGVsc2UgaWYgKCBwcmV2ICE9PSBcIipcIiAmJiBwcmV2ICE9PSBjdXJyZW50ICkge1xuXG5cdFx0XHRcdC8vIFNlZWsgYSBkaXJlY3QgY29udmVydGVyXG5cdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyBjdXJyZW50IF0gfHwgY29udmVydGVyc1sgXCIqIFwiICsgY3VycmVudCBdO1xuXG5cdFx0XHRcdC8vIElmIG5vbmUgZm91bmQsIHNlZWsgYSBwYWlyXG5cdFx0XHRcdGlmICggIWNvbnYgKSB7XG5cdFx0XHRcdFx0Zm9yICggY29udjIgaW4gY29udmVydGVycyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSWYgY29udjIgb3V0cHV0cyBjdXJyZW50XG5cdFx0XHRcdFx0XHR0bXAgPSBjb252Mi5zcGxpdCggXCIgXCIgKTtcblx0XHRcdFx0XHRcdGlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gSWYgcHJldiBjYW4gYmUgY29udmVydGVkIHRvIGFjY2VwdGVkIGlucHV0XG5cdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyB0bXBbIDAgXSBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0Y29udmVydGVyc1sgXCIqIFwiICsgdG1wWyAwIF0gXTtcblx0XHRcdFx0XHRcdFx0aWYgKCBjb252ICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIENvbmRlbnNlIGVxdWl2YWxlbmNlIGNvbnZlcnRlcnNcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgPT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgY29udjIgXTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgaW5zZXJ0IHRoZSBpbnRlcm1lZGlhdGUgZGF0YVR5cGVcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudCA9IHRtcFsgMCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXBwbHkgY29udmVydGVyIChpZiBub3QgYW4gZXF1aXZhbGVuY2UpXG5cdFx0XHRcdGlmICggY29udiAhPT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdC8vIFVubGVzcyBlcnJvcnMgYXJlIGFsbG93ZWQgdG8gYnViYmxlLCBjYXRjaCBhbmQgcmV0dXJuIHRoZW1cblx0XHRcdFx0XHRpZiAoIGNvbnYgJiYgc1sgXCJ0aHJvd3NcIiBdICkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHsgc3RhdGU6IFwicGFyc2VyZXJyb3JcIiwgZXJyb3I6IGNvbnYgPyBlIDogXCJObyBjb252ZXJzaW9uIGZyb20gXCIgKyBwcmV2ICsgXCIgdG8gXCIgKyBjdXJyZW50IH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc3RhdGU6IFwic3VjY2Vzc1wiLCBkYXRhOiByZXNwb25zZSB9O1xufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblxuXHQvLyBDb3VudGVyIGZvciBob2xkaW5nIHRoZSBudW1iZXIgb2YgYWN0aXZlIHF1ZXJpZXNcblx0YWN0aXZlOiAwLFxuXG5cdC8vIExhc3QtTW9kaWZpZWQgaGVhZGVyIGNhY2hlIGZvciBuZXh0IHJlcXVlc3Rcblx0bGFzdE1vZGlmaWVkOiB7fSxcblx0ZXRhZzoge30sXG5cblx0YWpheFNldHRpbmdzOiB7XG5cdFx0dXJsOiBhamF4TG9jYXRpb24sXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBhamF4TG9jUGFydHNbIDEgXSApLFxuXHRcdGdsb2JhbDogdHJ1ZSxcblx0XHRwcm9jZXNzRGF0YTogdHJ1ZSxcblx0XHRhc3luYzogdHJ1ZSxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixcblx0XHQvKlxuXHRcdHRpbWVvdXQ6IDAsXG5cdFx0ZGF0YTogbnVsbCxcblx0XHRkYXRhVHlwZTogbnVsbCxcblx0XHR1c2VybmFtZTogbnVsbCxcblx0XHRwYXNzd29yZDogbnVsbCxcblx0XHRjYWNoZTogbnVsbCxcblx0XHR0aHJvd3M6IGZhbHNlLFxuXHRcdHRyYWRpdGlvbmFsOiBmYWxzZSxcblx0XHRoZWFkZXJzOiB7fSxcblx0XHQqL1xuXG5cdFx0YWNjZXB0czoge1xuXHRcdFx0XCIqXCI6IGFsbFR5cGVzLFxuXHRcdFx0dGV4dDogXCJ0ZXh0L3BsYWluXCIsXG5cdFx0XHRodG1sOiBcInRleHQvaHRtbFwiLFxuXHRcdFx0eG1sOiBcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixcblx0XHRcdGpzb246IFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJcblx0XHR9LFxuXG5cdFx0Y29udGVudHM6IHtcblx0XHRcdHhtbDogL3htbC8sXG5cdFx0XHRodG1sOiAvaHRtbC8sXG5cdFx0XHRqc29uOiAvanNvbi9cblx0XHR9LFxuXG5cdFx0cmVzcG9uc2VGaWVsZHM6IHtcblx0XHRcdHhtbDogXCJyZXNwb25zZVhNTFwiLFxuXHRcdFx0dGV4dDogXCJyZXNwb25zZVRleHRcIixcblx0XHRcdGpzb246IFwicmVzcG9uc2VKU09OXCJcblx0XHR9LFxuXG5cdFx0Ly8gRGF0YSBjb252ZXJ0ZXJzXG5cdFx0Ly8gS2V5cyBzZXBhcmF0ZSBzb3VyY2UgKG9yIGNhdGNoYWxsIFwiKlwiKSBhbmQgZGVzdGluYXRpb24gdHlwZXMgd2l0aCBhIHNpbmdsZSBzcGFjZVxuXHRcdGNvbnZlcnRlcnM6IHtcblxuXHRcdFx0Ly8gQ29udmVydCBhbnl0aGluZyB0byB0ZXh0XG5cdFx0XHRcIiogdGV4dFwiOiBTdHJpbmcsXG5cblx0XHRcdC8vIFRleHQgdG8gaHRtbCAodHJ1ZSA9IG5vIHRyYW5zZm9ybWF0aW9uKVxuXHRcdFx0XCJ0ZXh0IGh0bWxcIjogdHJ1ZSxcblxuXHRcdFx0Ly8gRXZhbHVhdGUgdGV4dCBhcyBhIGpzb24gZXhwcmVzc2lvblxuXHRcdFx0XCJ0ZXh0IGpzb25cIjogalF1ZXJ5LnBhcnNlSlNPTixcblxuXHRcdFx0Ly8gUGFyc2UgdGV4dCBhcyB4bWxcblx0XHRcdFwidGV4dCB4bWxcIjogalF1ZXJ5LnBhcnNlWE1MXG5cdFx0fSxcblxuXHRcdC8vIEZvciBvcHRpb25zIHRoYXQgc2hvdWxkbid0IGJlIGRlZXAgZXh0ZW5kZWQ6XG5cdFx0Ly8geW91IGNhbiBhZGQgeW91ciBvd24gY3VzdG9tIG9wdGlvbnMgaGVyZSBpZlxuXHRcdC8vIGFuZCB3aGVuIHlvdSBjcmVhdGUgb25lIHRoYXQgc2hvdWxkbid0IGJlXG5cdFx0Ly8gZGVlcCBleHRlbmRlZCAoc2VlIGFqYXhFeHRlbmQpXG5cdFx0ZmxhdE9wdGlvbnM6IHtcblx0XHRcdHVybDogdHJ1ZSxcblx0XHRcdGNvbnRleHQ6IHRydWVcblx0XHR9XG5cdH0sXG5cblx0Ly8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXRcblx0Ly8gd2l0aCBib3RoIGFqYXhTZXR0aW5ncyBhbmQgc2V0dGluZ3MgZmllbGRzLlxuXHQvLyBJZiB0YXJnZXQgaXMgb21pdHRlZCwgd3JpdGVzIGludG8gYWpheFNldHRpbmdzLlxuXHRhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkge1xuXHRcdHJldHVybiBzZXR0aW5ncyA/XG5cblx0XHRcdC8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0XG5cdFx0XHRhamF4RXh0ZW5kKCBhamF4RXh0ZW5kKCB0YXJnZXQsIGpRdWVyeS5hamF4U2V0dGluZ3MgKSwgc2V0dGluZ3MgKSA6XG5cblx0XHRcdC8vIEV4dGVuZGluZyBhamF4U2V0dGluZ3Ncblx0XHRcdGFqYXhFeHRlbmQoIGpRdWVyeS5hamF4U2V0dGluZ3MsIHRhcmdldCApO1xuXHR9LFxuXG5cdGFqYXhQcmVmaWx0ZXI6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycyApLFxuXHRhamF4VHJhbnNwb3J0OiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMgKSxcblxuXHQvLyBNYWluIG1ldGhvZFxuXHRhamF4OiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkge1xuXG5cdFx0Ly8gSWYgdXJsIGlzIGFuIG9iamVjdCwgc2ltdWxhdGUgcHJlLTEuNSBzaWduYXR1cmVcblx0XHRpZiAoIHR5cGVvZiB1cmwgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRvcHRpb25zID0gdXJsO1xuXHRcdFx0dXJsID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIEZvcmNlIG9wdGlvbnMgdG8gYmUgYW4gb2JqZWN0XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0XHR2YXIgdHJhbnNwb3J0LFxuXHRcdFx0Ly8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbVxuXHRcdFx0Y2FjaGVVUkwsXG5cdFx0XHQvLyBSZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcsXG5cdFx0XHRyZXNwb25zZUhlYWRlcnMsXG5cdFx0XHQvLyB0aW1lb3V0IGhhbmRsZVxuXHRcdFx0dGltZW91dFRpbWVyLFxuXHRcdFx0Ly8gQ3Jvc3MtZG9tYWluIGRldGVjdGlvbiB2YXJzXG5cdFx0XHRwYXJ0cyxcblx0XHRcdC8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZFxuXHRcdFx0ZmlyZUdsb2JhbHMsXG5cdFx0XHQvLyBMb29wIHZhcmlhYmxlXG5cdFx0XHRpLFxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdFxuXHRcdFx0cyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksXG5cdFx0XHQvLyBDYWxsYmFja3MgY29udGV4dFxuXHRcdFx0Y2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG5cdFx0XHQvLyBDb250ZXh0IGZvciBnbG9iYWwgZXZlbnRzIGlzIGNhbGxiYWNrQ29udGV4dCBpZiBpdCBpcyBhIERPTSBub2RlIG9yIGpRdWVyeSBjb2xsZWN0aW9uXG5cdFx0XHRnbG9iYWxFdmVudENvbnRleHQgPSBzLmNvbnRleHQgJiYgKCBjYWxsYmFja0NvbnRleHQubm9kZVR5cGUgfHwgY2FsbGJhY2tDb250ZXh0LmpxdWVyeSApID9cblx0XHRcdFx0alF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6XG5cdFx0XHRcdGpRdWVyeS5ldmVudCxcblx0XHRcdC8vIERlZmVycmVkc1xuXHRcdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGNvbXBsZXRlRGVmZXJyZWQgPSBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0c3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcblx0XHRcdC8vIEhlYWRlcnMgKHRoZXkgYXJlIHNlbnQgYWxsIGF0IG9uY2UpXG5cdFx0XHRyZXF1ZXN0SGVhZGVycyA9IHt9LFxuXHRcdFx0cmVxdWVzdEhlYWRlcnNOYW1lcyA9IHt9LFxuXHRcdFx0Ly8gVGhlIGpxWEhSIHN0YXRlXG5cdFx0XHRzdGF0ZSA9IDAsXG5cdFx0XHQvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2Vcblx0XHRcdHN0ckFib3J0ID0gXCJjYW5jZWxlZFwiLFxuXHRcdFx0Ly8gRmFrZSB4aHJcblx0XHRcdGpxWEhSID0ge1xuXHRcdFx0XHRyZWFkeVN0YXRlOiAwLFxuXG5cdFx0XHRcdC8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWRcblx0XHRcdFx0Z2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0XHRcdFx0dmFyIG1hdGNoO1xuXHRcdFx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICFyZXNwb25zZUhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlSGVhZGVycyA9IHt9O1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIChtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnNbIG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBSYXcgc3RyaW5nXG5cdFx0XHRcdGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlID09PSAyID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYWNoZXMgdGhlIGhlYWRlclxuXHRcdFx0XHRzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0dmFyIGxuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0bmFtZSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIGxuYW1lIF0gPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyXG5cdFx0XHRcdG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0cy5taW1lVHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG5cdFx0XHRcdFx0dmFyIGNvZGU7XG5cdFx0XHRcdFx0aWYgKCBtYXAgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRcdFx0Zm9yICggY29kZSBpbiBtYXAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFjayBpbiBhIHdheSB0aGF0IHByZXNlcnZlcyBvbGQgb25lc1xuXHRcdFx0XHRcdFx0XHRcdHN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3Ncblx0XHRcdFx0XHRcdFx0anFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0dmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG5cdFx0XHRcdFx0aWYgKCB0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkb25lKCAwLCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdC8vIEF0dGFjaCBkZWZlcnJlZHNcblx0XHRkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApLmNvbXBsZXRlID0gY29tcGxldGVEZWZlcnJlZC5hZGQ7XG5cdFx0anFYSFIuc3VjY2VzcyA9IGpxWEhSLmRvbmU7XG5cdFx0anFYSFIuZXJyb3IgPSBqcVhIUi5mYWlsO1xuXG5cdFx0Ly8gUmVtb3ZlIGhhc2ggY2hhcmFjdGVyICgjNzUzMTogYW5kIHN0cmluZyBwcm9tb3Rpb24pXG5cdFx0Ly8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAocHJlZmlsdGVycyBtaWdodCBleHBlY3QgaXQpXG5cdFx0Ly8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSlcblx0XHQvLyBXZSBhbHNvIHVzZSB0aGUgdXJsIHBhcmFtZXRlciBpZiBhdmFpbGFibGVcblx0XHRzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgYWpheExvY2F0aW9uICkgKyBcIlwiICkucmVwbGFjZSggcmhhc2gsIFwiXCIgKVxuXHRcdFx0LnJlcGxhY2UoIHJwcm90b2NvbCwgYWpheExvY1BhcnRzWyAxIF0gKyBcIi8vXCIgKTtcblxuXHRcdC8vIEFsaWFzIG1ldGhvZCBvcHRpb24gdG8gdHlwZSBhcyBwZXIgdGlja2V0ICMxMjAwNFxuXHRcdHMudHlwZSA9IG9wdGlvbnMubWV0aG9kIHx8IG9wdGlvbnMudHlwZSB8fCBzLm1ldGhvZCB8fCBzLnR5cGU7XG5cblx0XHQvLyBFeHRyYWN0IGRhdGFUeXBlcyBsaXN0XG5cdFx0cy5kYXRhVHlwZXMgPSBqUXVlcnkudHJpbSggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXG5cdFx0Ly8gQSBjcm9zcy1kb21haW4gcmVxdWVzdCBpcyBpbiBvcmRlciB3aGVuIHdlIGhhdmUgYSBwcm90b2NvbDpob3N0OnBvcnQgbWlzbWF0Y2hcblx0XHRpZiAoIHMuY3Jvc3NEb21haW4gPT0gbnVsbCApIHtcblx0XHRcdHBhcnRzID0gcnVybC5leGVjKCBzLnVybC50b0xvd2VyQ2FzZSgpICk7XG5cdFx0XHRzLmNyb3NzRG9tYWluID0gISEoIHBhcnRzICYmXG5cdFx0XHRcdCggcGFydHNbIDEgXSAhPT0gYWpheExvY1BhcnRzWyAxIF0gfHwgcGFydHNbIDIgXSAhPT0gYWpheExvY1BhcnRzWyAyIF0gfHxcblx0XHRcdFx0XHQoIHBhcnRzWyAzIF0gfHwgKCBwYXJ0c1sgMSBdID09PSBcImh0dHA6XCIgPyBcIjgwXCIgOiBcIjQ0M1wiICkgKSAhPT1cblx0XHRcdFx0XHRcdCggYWpheExvY1BhcnRzWyAzIF0gfHwgKCBhamF4TG9jUGFydHNbIDEgXSA9PT0gXCJodHRwOlwiID8gXCI4MFwiIDogXCI0NDNcIiApICkgKVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmdcblx0XHRpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRzLmRhdGEgPSBqUXVlcnkucGFyYW0oIHMuZGF0YSwgcy50cmFkaXRpb25hbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHByZWZpbHRlcnNcblx0XHRpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlXG5cdFx0aWYgKCBzdGF0ZSA9PT0gMiApIHtcblx0XHRcdHJldHVybiBqcVhIUjtcblx0XHR9XG5cblx0XHQvLyBXZSBjYW4gZmlyZSBnbG9iYWwgZXZlbnRzIGFzIG9mIG5vdyBpZiBhc2tlZCB0b1xuXHRcdC8vIERvbid0IGZpcmUgZXZlbnRzIGlmIGpRdWVyeS5ldmVudCBpcyB1bmRlZmluZWQgaW4gYW4gQU1ELXVzYWdlIHNjZW5hcmlvICgjMTUxMTgpXG5cdFx0ZmlyZUdsb2JhbHMgPSBqUXVlcnkuZXZlbnQgJiYgcy5nbG9iYWw7XG5cblx0XHQvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzXG5cdFx0aWYgKCBmaXJlR2xvYmFscyAmJiBqUXVlcnkuYWN0aXZlKysgPT09IDAgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKTtcblx0XHR9XG5cblx0XHQvLyBVcHBlcmNhc2UgdGhlIHR5cGVcblx0XHRzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuXHRcdC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG5cdFx0cy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cblx0XHQvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2Vcblx0XHQvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cblx0XHRjYWNoZVVSTCA9IHMudXJsO1xuXG5cdFx0Ly8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcblx0XHRpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cblx0XHRcdC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlLCBhcHBlbmQgZGF0YSB0byB1cmxcblx0XHRcdGlmICggcy5kYXRhICkge1xuXHRcdFx0XHRjYWNoZVVSTCA9ICggcy51cmwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuZGF0YSApO1xuXHRcdFx0XHQvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5XG5cdFx0XHRcdGRlbGV0ZSBzLmRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBhbnRpLWNhY2hlIGluIHVybCBpZiBuZWVkZWRcblx0XHRcdGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdHMudXJsID0gcnRzLnRlc3QoIGNhY2hlVVJMICkgP1xuXG5cdFx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYWxyZWFkeSBhICdfJyBwYXJhbWV0ZXIsIHNldCBpdHMgdmFsdWVcblx0XHRcdFx0XHRjYWNoZVVSTC5yZXBsYWNlKCBydHMsIFwiJDFfPVwiICsgbm9uY2UrKyApIDpcblxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSBhZGQgb25lIHRvIHRoZSBlbmRcblx0XHRcdFx0XHRjYWNoZVVSTCArICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyBub25jZSsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50XG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoXG5cdFx0XHRcIkFjY2VwdFwiLFxuXHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gP1xuXHRcdFx0XHRzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gKyAoIHMuZGF0YVR5cGVzWyAwIF0gIT09IFwiKlwiID8gXCIsIFwiICsgYWxsVHlwZXMgKyBcIjsgcT0wLjAxXCIgOiBcIlwiICkgOlxuXHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHQpO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0Zm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuXHRcdH1cblxuXHRcdC8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnRcblx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJiAoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IHN0YXRlID09PSAyICkgKSB7XG5cdFx0XHQvLyBBYm9ydCBpZiBub3QgZG9uZSBhbHJlYWR5IGFuZCByZXR1cm5cblx0XHRcdHJldHVybiBqcVhIUi5hYm9ydCgpO1xuXHRcdH1cblxuXHRcdC8vIEFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvblxuXHRcdHN0ckFib3J0ID0gXCJhYm9ydFwiO1xuXG5cdFx0Ly8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzXG5cdFx0Zm9yICggaSBpbiB7IHN1Y2Nlc3M6IDEsIGVycm9yOiAxLCBjb21wbGV0ZTogMSB9ICkge1xuXHRcdFx0anFYSFJbIGkgXSggc1sgaSBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdHRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0aWYgKCAhdHJhbnNwb3J0ICkge1xuXHRcdFx0ZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cblx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4U2VuZFwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XHRcdH1cblx0XHRcdC8vIFRpbWVvdXRcblx0XHRcdGlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkge1xuXHRcdFx0XHR0aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGpxWEhSLmFib3J0KFwidGltZW91dFwiKTtcblx0XHRcdFx0fSwgcy50aW1lb3V0ICk7XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHN0YXRlID0gMTtcblx0XHRcdFx0dHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0Ly8gUHJvcGFnYXRlIGV4Y2VwdGlvbiBhcyBlcnJvciBpZiBub3QgZG9uZVxuXHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRkb25lKCAtMSwgZSApO1xuXHRcdFx0XHQvLyBTaW1wbHkgcmV0aHJvdyBvdGhlcndpc2Vcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lXG5cdFx0ZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7XG5cdFx0XHR2YXIgaXNTdWNjZXNzLCBzdWNjZXNzLCBlcnJvciwgcmVzcG9uc2UsIG1vZGlmaWVkLFxuXHRcdFx0XHRzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDtcblxuXHRcdFx0Ly8gQ2FsbGVkIG9uY2Vcblx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhdGUgaXMgXCJkb25lXCIgbm93XG5cdFx0XHRzdGF0ZSA9IDI7XG5cblx0XHRcdC8vIENsZWFyIHRpbWVvdXQgaWYgaXQgZXhpc3RzXG5cdFx0XHRpZiAoIHRpbWVvdXRUaW1lciApIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lb3V0VGltZXIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRGVyZWZlcmVuY2UgdHJhbnNwb3J0IGZvciBlYXJseSBnYXJiYWdlIGNvbGxlY3Rpb25cblx0XHRcdC8vIChubyBtYXR0ZXIgaG93IGxvbmcgdGhlIGpxWEhSIG9iamVjdCB3aWxsIGJlIHVzZWQpXG5cdFx0XHR0cmFuc3BvcnQgPSB1bmRlZmluZWQ7XG5cblx0XHRcdC8vIENhY2hlIHJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgXCJcIjtcblxuXHRcdFx0Ly8gU2V0IHJlYWR5U3RhdGVcblx0XHRcdGpxWEhSLnJlYWR5U3RhdGUgPSBzdGF0dXMgPiAwID8gNCA6IDA7XG5cblx0XHRcdC8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsXG5cdFx0XHRpc1N1Y2Nlc3MgPSBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCB8fCBzdGF0dXMgPT09IDMwNDtcblxuXHRcdFx0Ly8gR2V0IHJlc3BvbnNlIGRhdGFcblx0XHRcdGlmICggcmVzcG9uc2VzICkge1xuXHRcdFx0XHRyZXNwb25zZSA9IGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udmVydCBubyBtYXR0ZXIgd2hhdCAodGhhdCB3YXkgcmVzcG9uc2VYWFggZmllbGRzIGFyZSBhbHdheXMgc2V0KVxuXHRcdFx0cmVzcG9uc2UgPSBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKTtcblxuXHRcdFx0Ly8gSWYgc3VjY2Vzc2Z1bCwgaGFuZGxlIHR5cGUgY2hhaW5pbmdcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXG5cdFx0XHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0XHRcdGlmICggcy5pZk1vZGlmaWVkICkge1xuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmIG5vIGNvbnRlbnRcblx0XHRcdFx0aWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09IFwiSEVBRFwiICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXG5cdFx0XHRcdC8vIGlmIG5vdCBtb2RpZmllZFxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTtcblx0XHRcdFx0XHRzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuXHRcdFx0XHRcdGlzU3VjY2VzcyA9ICFlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRXh0cmFjdCBlcnJvciBmcm9tIHN0YXR1c1RleHQgYW5kIG5vcm1hbGl6ZSBmb3Igbm9uLWFib3J0c1xuXHRcdFx0XHRlcnJvciA9IHN0YXR1c1RleHQ7XG5cdFx0XHRcdGlmICggc3RhdHVzIHx8ICFzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcImVycm9yXCI7XG5cdFx0XHRcdFx0aWYgKCBzdGF0dXMgPCAwICkge1xuXHRcdFx0XHRcdFx0c3RhdHVzID0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGRhdGEgZm9yIHRoZSBmYWtlIHhociBvYmplY3Rcblx0XHRcdGpxWEhSLnN0YXR1cyA9IHN0YXR1cztcblx0XHRcdGpxWEhSLnN0YXR1c1RleHQgPSAoIG5hdGl2ZVN0YXR1c1RleHQgfHwgc3RhdHVzVGV4dCApICsgXCJcIjtcblxuXHRcdFx0Ly8gU3VjY2Vzcy9FcnJvclxuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsgc3VjY2Vzcywgc3RhdHVzVGV4dCwganFYSFIgXSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0LCBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRqcVhIUi5zdGF0dXNDb2RlKCBzdGF0dXNDb2RlICk7XG5cdFx0XHRzdGF0dXNDb2RlID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggaXNTdWNjZXNzID8gXCJhamF4U3VjY2Vzc1wiIDogXCJhamF4RXJyb3JcIixcblx0XHRcdFx0XHRbIGpxWEhSLCBzLCBpc1N1Y2Nlc3MgPyBzdWNjZXNzIDogZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb21wbGV0ZVxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZC5maXJlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0IF0gKTtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheENvbXBsZXRlXCIsIFsganFYSFIsIHMgXSApO1xuXHRcdFx0XHQvLyBIYW5kbGUgdGhlIGdsb2JhbCBBSkFYIGNvdW50ZXJcblx0XHRcdFx0aWYgKCAhKCAtLWpRdWVyeS5hY3RpdmUgKSApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpxWEhSO1xuXHR9LFxuXG5cdGdldEpTT046IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBcImpzb25cIiApO1xuXHR9LFxuXG5cdGdldFNjcmlwdDogZnVuY3Rpb24oIHVybCwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgXCJzY3JpcHRcIiApO1xuXHR9XG59KTtcblxualF1ZXJ5LmVhY2goIFsgXCJnZXRcIiwgXCJwb3N0XCIgXSwgZnVuY3Rpb24oIGksIG1ldGhvZCApIHtcblx0alF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkge1xuXHRcdC8vIFNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZGF0YSApICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgY2FsbGJhY2s7XG5cdFx0XHRjYWxsYmFjayA9IGRhdGE7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkuYWpheCh7XG5cdFx0XHR1cmw6IHVybCxcblx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdGRhdGFUeXBlOiB0eXBlLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSk7XG5cdH07XG59KTtcblxuXG5qUXVlcnkuX2V2YWxVcmwgPSBmdW5jdGlvbiggdXJsICkge1xuXHRyZXR1cm4galF1ZXJ5LmFqYXgoe1xuXHRcdHVybDogdXJsLFxuXHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ZGF0YVR5cGU6IFwic2NyaXB0XCIsXG5cdFx0YXN5bmM6IGZhbHNlLFxuXHRcdGdsb2JhbDogZmFsc2UsXG5cdFx0XCJ0aHJvd3NcIjogdHJ1ZVxuXHR9KTtcbn07XG5cblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciB3cmFwO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXNbIDAgXSApIHtcblxuXHRcdFx0Ly8gVGhlIGVsZW1lbnRzIHRvIHdyYXAgdGhlIHRhcmdldCBhcm91bmRcblx0XHRcdHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50ICkuZXEoIDAgKS5jbG9uZSggdHJ1ZSApO1xuXG5cdFx0XHRpZiAoIHRoaXNbIDAgXS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR3cmFwLmluc2VydEJlZm9yZSggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHdyYXAubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IHRoaXM7XG5cblx0XHRcdFx0d2hpbGUgKCBlbGVtLmZpcnN0RWxlbWVudENoaWxkICkge1xuXHRcdFx0XHRcdGVsZW0gPSBlbGVtLmZpcnN0RWxlbWVudENoaWxkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0XHR9KS5hcHBlbmQoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBJbm5lciggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0Y29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cblx0XHRcdGlmICggY29udGVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYuYXBwZW5kKCBodG1sICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0d3JhcDogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0dmFyIGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApO1xuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGlzRnVuY3Rpb24gPyBodG1sLmNhbGwodGhpcywgaSkgOiBodG1sICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0dW53cmFwOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImJvZHlcIiApICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZXBsYWNlV2l0aCggdGhpcy5jaGlsZE5vZGVzICk7XG5cdFx0XHR9XG5cdFx0fSkuZW5kKCk7XG5cdH1cbn0pO1xuXG5cbmpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdC8vIFN1cHBvcnQ6IE9wZXJhIDw9IDEyLjEyXG5cdC8vIE9wZXJhIHJlcG9ydHMgb2Zmc2V0V2lkdGhzIGFuZCBvZmZzZXRIZWlnaHRzIGxlc3MgdGhhbiB6ZXJvIG9uIHNvbWUgZWxlbWVudHNcblx0cmV0dXJuIGVsZW0ub2Zmc2V0V2lkdGggPD0gMCAmJiBlbGVtLm9mZnNldEhlaWdodCA8PSAwO1xufTtcbmpRdWVyeS5leHByLmZpbHRlcnMudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gIWpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuKCBlbGVtICk7XG59O1xuXG5cblxuXG52YXIgcjIwID0gLyUyMC9nLFxuXHRyYnJhY2tldCA9IC9cXFtcXF0kLyxcblx0ckNSTEYgPSAvXFxyP1xcbi9nLFxuXHRyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG5cdHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuXHR2YXIgbmFtZTtcblxuXHRpZiAoIGpRdWVyeS5pc0FycmF5KCBvYmogKSApIHtcblx0XHQvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS5cblx0XHRqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHtcblx0XHRcdGlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7XG5cdFx0XHRcdC8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci5cblx0XHRcdFx0YWRkKCBwcmVmaXgsIHYgKTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguXG5cdFx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgPyBpIDogXCJcIiApICsgXCJdXCIsIHYsIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHR9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgalF1ZXJ5LnR5cGUoIG9iaiApID09PSBcIm9iamVjdFwiICkge1xuXHRcdC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArIG5hbWUgKyBcIl1cIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cblx0fSBlbHNlIHtcblx0XHQvLyBTZXJpYWxpemUgc2NhbGFyIGl0ZW0uXG5cdFx0YWRkKCBwcmVmaXgsIG9iaiApO1xuXHR9XG59XG5cbi8vIFNlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mXG4vLyBrZXkvdmFsdWVzIGludG8gYSBxdWVyeSBzdHJpbmdcbmpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBhLCB0cmFkaXRpb25hbCApIHtcblx0dmFyIHByZWZpeCxcblx0XHRzID0gW10sXG5cdFx0YWRkID0gZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0XHQvLyBJZiB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBpbnZva2UgaXQgYW5kIHJldHVybiBpdHMgdmFsdWVcblx0XHRcdHZhbHVlID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgPyB2YWx1ZSgpIDogKCB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICk7XG5cdFx0XHRzWyBzLmxlbmd0aCBdID0gZW5jb2RlVVJJQ29tcG9uZW50KCBrZXkgKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZSApO1xuXHRcdH07XG5cblx0Ly8gU2V0IHRyYWRpdGlvbmFsIHRvIHRydWUgZm9yIGpRdWVyeSA8PSAxLjMuMiBiZWhhdmlvci5cblx0aWYgKCB0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdHRyYWRpdGlvbmFsID0galF1ZXJ5LmFqYXhTZXR0aW5ncyAmJiBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO1xuXHR9XG5cblx0Ly8gSWYgYW4gYXJyYXkgd2FzIHBhc3NlZCBpbiwgYXNzdW1lIHRoYXQgaXQgaXMgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cy5cblx0aWYgKCBqUXVlcnkuaXNBcnJheSggYSApIHx8ICggYS5qcXVlcnkgJiYgIWpRdWVyeS5pc1BsYWluT2JqZWN0KCBhICkgKSApIHtcblx0XHQvLyBTZXJpYWxpemUgdGhlIGZvcm0gZWxlbWVudHNcblx0XHRqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRhZGQoIHRoaXMubmFtZSwgdGhpcy52YWx1ZSApO1xuXHRcdH0pO1xuXG5cdH0gZWxzZSB7XG5cdFx0Ly8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgXCJvbGRcIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXJcblx0XHQvLyBkaWQgaXQpLCBvdGhlcndpc2UgZW5jb2RlIHBhcmFtcyByZWN1cnNpdmVseS5cblx0XHRmb3IgKCBwcmVmaXggaW4gYSApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSByZXN1bHRpbmcgc2VyaWFsaXphdGlvblxuXHRyZXR1cm4gcy5qb2luKCBcIiZcIiApLnJlcGxhY2UoIHIyMCwgXCIrXCIgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBqUXVlcnkucGFyYW0oIHRoaXMuc2VyaWFsaXplQXJyYXkoKSApO1xuXHR9LFxuXHRzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gQ2FuIGFkZCBwcm9wSG9vayBmb3IgXCJlbGVtZW50c1wiIHRvIGZpbHRlciBvciBhZGQgZm9ybSBlbGVtZW50c1xuXHRcdFx0dmFyIGVsZW1lbnRzID0galF1ZXJ5LnByb3AoIHRoaXMsIFwiZWxlbWVudHNcIiApO1xuXHRcdFx0cmV0dXJuIGVsZW1lbnRzID8galF1ZXJ5Lm1ha2VBcnJheSggZWxlbWVudHMgKSA6IHRoaXM7XG5cdFx0fSlcblx0XHQuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHR5cGUgPSB0aGlzLnR5cGU7XG5cblx0XHRcdC8vIFVzZSAuaXMoIFwiOmRpc2FibGVkXCIgKSBzbyB0aGF0IGZpZWxkc2V0W2Rpc2FibGVkXSB3b3Jrc1xuXHRcdFx0cmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoIFwiOmRpc2FibGVkXCIgKSAmJlxuXHRcdFx0XHRyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmXG5cdFx0XHRcdCggdGhpcy5jaGVja2VkIHx8ICFyY2hlY2thYmxlVHlwZS50ZXN0KCB0eXBlICkgKTtcblx0XHR9KVxuXHRcdC5tYXAoZnVuY3Rpb24oIGksIGVsZW0gKSB7XG5cdFx0XHR2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7XG5cblx0XHRcdHJldHVybiB2YWwgPT0gbnVsbCA/XG5cdFx0XHRcdG51bGwgOlxuXHRcdFx0XHRqUXVlcnkuaXNBcnJheSggdmFsICkgP1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbCApIHtcblx0XHRcdFx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHR9KS5nZXQoKTtcblx0fVxufSk7XG5cblxualF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdH0gY2F0Y2goIGUgKSB7fVxufTtcblxudmFyIHhocklkID0gMCxcblx0eGhyQ2FsbGJhY2tzID0ge30sXG5cdHhoclN1Y2Nlc3NTdGF0dXMgPSB7XG5cdFx0Ly8gZmlsZSBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyBjb2RlIDAsIGFzc3VtZSAyMDBcblx0XHQwOiAyMDAsXG5cdFx0Ly8gU3VwcG9ydDogSUU5XG5cdFx0Ly8gIzE0NTA6IHNvbWV0aW1lcyBJRSByZXR1cm5zIDEyMjMgd2hlbiBpdCBzaG91bGQgYmUgMjA0XG5cdFx0MTIyMzogMjA0XG5cdH0sXG5cdHhoclN1cHBvcnRlZCA9IGpRdWVyeS5hamF4U2V0dGluZ3MueGhyKCk7XG5cbi8vIFN1cHBvcnQ6IElFOVxuLy8gT3BlbiByZXF1ZXN0cyBtdXN0IGJlIG1hbnVhbGx5IGFib3J0ZWQgb24gdW5sb2FkICgjNTI4MClcbi8vIFNlZSBodHRwczovL3N1cHBvcnQubWljcm9zb2Z0LmNvbS9rYi8yODU2NzQ2IGZvciBtb3JlIGluZm9cbmlmICggd2luZG93LmF0dGFjaEV2ZW50ICkge1xuXHR3aW5kb3cuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgZnVuY3Rpb24oKSB7XG5cdFx0Zm9yICggdmFyIGtleSBpbiB4aHJDYWxsYmFja3MgKSB7XG5cdFx0XHR4aHJDYWxsYmFja3NbIGtleSBdKCk7XG5cdFx0fVxuXHR9KTtcbn1cblxuc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCBcIndpdGhDcmVkZW50aWFsc1wiIGluIHhoclN1cHBvcnRlZCApO1xuc3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7XG5cbmpRdWVyeS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHR2YXIgY2FsbGJhY2s7XG5cblx0Ly8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdFxuXHRpZiAoIHN1cHBvcnQuY29ycyB8fCB4aHJTdXBwb3J0ZWQgJiYgIW9wdGlvbnMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0dmFyIGksXG5cdFx0XHRcdFx0eGhyID0gb3B0aW9ucy54aHIoKSxcblx0XHRcdFx0XHRpZCA9ICsreGhySWQ7XG5cblx0XHRcdFx0eGhyLm9wZW4oIG9wdGlvbnMudHlwZSwgb3B0aW9ucy51cmwsIG9wdGlvbnMuYXN5bmMsIG9wdGlvbnMudXNlcm5hbWUsIG9wdGlvbnMucGFzc3dvcmQgKTtcblxuXHRcdFx0XHQvLyBBcHBseSBjdXN0b20gZmllbGRzIGlmIHByb3ZpZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0Zm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRcdHhoclsgaSBdID0gb3B0aW9ucy54aHJGaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBPdmVycmlkZSBtaW1lIHR5cGUgaWYgbmVlZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHtcblx0XHRcdFx0XHR4aHIub3ZlcnJpZGVNaW1lVHlwZSggb3B0aW9ucy5taW1lVHlwZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXJcblx0XHRcdFx0Ly8gRm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cywgc2VlaW5nIGFzIGNvbmRpdGlvbnMgZm9yIGEgcHJlZmxpZ2h0IGFyZVxuXHRcdFx0XHQvLyBha2luIHRvIGEgamlnc2F3IHB1enpsZSwgd2Ugc2ltcGx5IG5ldmVyIHNldCBpdCB0byBiZSBzdXJlLlxuXHRcdFx0XHQvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cClcblx0XHRcdFx0Ly8gRm9yIHNhbWUtZG9tYWluIHJlcXVlc3RzLCB3b24ndCBjaGFuZ2UgaGVhZGVyIGlmIGFscmVhZHkgcHJvdmlkZWQuXG5cdFx0XHRcdGlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gJiYgIWhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdICkge1xuXHRcdFx0XHRcdGhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2V0IGhlYWRlcnNcblx0XHRcdFx0Zm9yICggaSBpbiBoZWFkZXJzICkge1xuXHRcdFx0XHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBoZWFkZXJzWyBpIF0gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIHhockNhbGxiYWNrc1sgaWQgXTtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSB4aHIub25sb2FkID0geGhyLm9uZXJyb3IgPSBudWxsO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHRcdHhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlID09PSBcImVycm9yXCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBmaWxlOiBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyAwOyBzZWUgIzg2MDUsICMxNDIwN1xuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0XG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblx0XHRcdFx0XHRcdFx0XHRcdHhoclN1Y2Nlc3NTdGF0dXNbIHhoci5zdGF0dXMgXSB8fCB4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHQsXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFjY2Vzc2luZyBiaW5hcnktZGF0YSByZXNwb25zZVRleHQgdGhyb3dzIGFuIGV4Y2VwdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gKCMxMTQyNilcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ID09PSBcInN0cmluZ1wiID8ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB4aHIucmVzcG9uc2VUZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHR9IDogdW5kZWZpbmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHR4aHIub25sb2FkID0gY2FsbGJhY2soKTtcblx0XHRcdFx0eGhyLm9uZXJyb3IgPSBjYWxsYmFjayhcImVycm9yXCIpO1xuXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgYWJvcnQgY2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSB4aHJDYWxsYmFja3NbIGlkIF0gPSBjYWxsYmFjayhcImFib3J0XCIpO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gRG8gc2VuZCB0aGUgcmVxdWVzdCAodGhpcyBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uKVxuXHRcdFx0XHRcdHhoci5zZW5kKCBvcHRpb25zLmhhc0NvbnRlbnQgJiYgb3B0aW9ucy5kYXRhIHx8IG51bGwgKTtcblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdFx0Ly8gIzE0NjgzOiBPbmx5IHJldGhyb3cgaWYgdGhpcyBoYXNuJ3QgYmVlbiBub3RpZmllZCBhcyBhbiBlcnJvciB5ZXRcblx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSk7XG5cblxuXG5cbi8vIEluc3RhbGwgc2NyaXB0IGRhdGFUeXBlXG5qUXVlcnkuYWpheFNldHVwKHtcblx0YWNjZXB0czoge1xuXHRcdHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwiXG5cdH0sXG5cdGNvbnRlbnRzOiB7XG5cdFx0c2NyaXB0OiAvKD86amF2YXxlY21hKXNjcmlwdC9cblx0fSxcblx0Y29udmVydGVyczoge1xuXHRcdFwidGV4dCBzY3JpcHRcIjogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHRqUXVlcnkuZ2xvYmFsRXZhbCggdGV4dCApO1xuXHRcdFx0cmV0dXJuIHRleHQ7XG5cdFx0fVxuXHR9XG59KTtcblxuLy8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBjcm9zc0RvbWFpblxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRzLmNhY2hlID0gZmFsc2U7XG5cdH1cblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMudHlwZSA9IFwiR0VUXCI7XG5cdH1cbn0pO1xuXG4vLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnRcbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblx0Ly8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiByZXF1ZXN0c1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0dmFyIHNjcmlwdCwgY2FsbGJhY2s7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBfLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0c2NyaXB0ID0galF1ZXJ5KFwiPHNjcmlwdD5cIikucHJvcCh7XG5cdFx0XHRcdFx0YXN5bmM6IHRydWUsXG5cdFx0XHRcdFx0Y2hhcnNldDogcy5zY3JpcHRDaGFyc2V0LFxuXHRcdFx0XHRcdHNyYzogcy51cmxcblx0XHRcdFx0fSkub24oXG5cdFx0XHRcdFx0XCJsb2FkIGVycm9yXCIsXG5cdFx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggZXZ0ICkge1xuXHRcdFx0XHRcdFx0c2NyaXB0LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHRcdFx0aWYgKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCBldnQudHlwZSA9PT0gXCJlcnJvclwiID8gNDA0IDogMjAwLCBldnQudHlwZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0WyAwIF0gKTtcblx0XHRcdH0sXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0pO1xuXG5cblxuXG52YXIgb2xkQ2FsbGJhY2tzID0gW10sXG5cdHJqc29ucCA9IC8oPSlcXD8oPz0mfCQpfFxcP1xcPy87XG5cbi8vIERlZmF1bHQganNvbnAgc2V0dGluZ3NcbmpRdWVyeS5hamF4U2V0dXAoe1xuXHRqc29ucDogXCJjYWxsYmFja1wiLFxuXHRqc29ucENhbGxiYWNrOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgY2FsbGJhY2sgPSBvbGRDYWxsYmFja3MucG9wKCkgfHwgKCBqUXVlcnkuZXhwYW5kbyArIFwiX1wiICsgKCBub25jZSsrICkgKTtcblx0XHR0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTtcblx0XHRyZXR1cm4gY2FsbGJhY2s7XG5cdH1cbn0pO1xuXG4vLyBEZXRlY3QsIG5vcm1hbGl6ZSBvcHRpb25zIGFuZCBpbnN0YWxsIGNhbGxiYWNrcyBmb3IganNvbnAgcmVxdWVzdHNcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBcImpzb24ganNvbnBcIiwgZnVuY3Rpb24oIHMsIG9yaWdpbmFsU2V0dGluZ3MsIGpxWEhSICkge1xuXG5cdHZhciBjYWxsYmFja05hbWUsIG92ZXJ3cml0dGVuLCByZXNwb25zZUNvbnRhaW5lcixcblx0XHRqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgP1xuXHRcdFx0XCJ1cmxcIiA6XG5cdFx0XHR0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICYmICEoIHMuY29udGVudFR5cGUgfHwgXCJcIiApLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikgJiYgcmpzb25wLnRlc3QoIHMuZGF0YSApICYmIFwiZGF0YVwiXG5cdFx0KTtcblxuXHQvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgXCJqc29ucFwiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0XG5cdGlmICgganNvblByb3AgfHwgcy5kYXRhVHlwZXNbIDAgXSA9PT0gXCJqc29ucFwiICkge1xuXG5cdFx0Ly8gR2V0IGNhbGxiYWNrIG5hbWUsIHJlbWVtYmVyaW5nIHByZWV4aXN0aW5nIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBpdFxuXHRcdGNhbGxiYWNrTmFtZSA9IHMuanNvbnBDYWxsYmFjayA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBzLmpzb25wQ2FsbGJhY2sgKSA/XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2soKSA6XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHQvLyBJbnNlcnQgY2FsbGJhY2sgaW50byB1cmwgb3IgZm9ybSBkYXRhXG5cdFx0aWYgKCBqc29uUHJvcCApIHtcblx0XHRcdHNbIGpzb25Qcm9wIF0gPSBzWyBqc29uUHJvcCBdLnJlcGxhY2UoIHJqc29ucCwgXCIkMVwiICsgY2FsbGJhY2tOYW1lICk7XG5cdFx0fSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gXCImXCIgOiBcIj9cIiApICsgcy5qc29ucCArIFwiPVwiICsgY2FsbGJhY2tOYW1lO1xuXHRcdH1cblxuXHRcdC8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb25cblx0XHRzLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhcmVzcG9uc2VDb250YWluZXIgKSB7XG5cdFx0XHRcdGpRdWVyeS5lcnJvciggY2FsbGJhY2tOYW1lICsgXCIgd2FzIG5vdCBjYWxsZWRcIiApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07XG5cdFx0fTtcblxuXHRcdC8vIGZvcmNlIGpzb24gZGF0YVR5cGVcblx0XHRzLmRhdGFUeXBlc1sgMCBdID0gXCJqc29uXCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrXG5cdFx0b3ZlcndyaXR0ZW4gPSB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdO1xuXHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzO1xuXHRcdH07XG5cblx0XHQvLyBDbGVhbi11cCBmdW5jdGlvbiAoZmlyZXMgYWZ0ZXIgY29udmVydGVycylcblx0XHRqcVhIUi5hbHdheXMoZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBSZXN0b3JlIHByZWV4aXN0aW5nIHZhbHVlXG5cdFx0XHR3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gb3ZlcndyaXR0ZW47XG5cblx0XHRcdC8vIFNhdmUgYmFjayBhcyBmcmVlXG5cdFx0XHRpZiAoIHNbIGNhbGxiYWNrTmFtZSBdICkge1xuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmRcblx0XHRcdFx0cy5qc29ucENhbGxiYWNrID0gb3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrO1xuXG5cdFx0XHRcdC8vIHNhdmUgdGhlIGNhbGxiYWNrIG5hbWUgZm9yIGZ1dHVyZSB1c2Vcblx0XHRcdFx0b2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2Vcblx0XHRcdGlmICggcmVzcG9uc2VDb250YWluZXIgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIG92ZXJ3cml0dGVuICkgKSB7XG5cdFx0XHRcdG92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7XG5cdFx0fSk7XG5cblx0XHQvLyBEZWxlZ2F0ZSB0byBzY3JpcHRcblx0XHRyZXR1cm4gXCJzY3JpcHRcIjtcblx0fVxufSk7XG5cblxuXG5cbi8vIGRhdGE6IHN0cmluZyBvZiBodG1sXG4vLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsIGRlZmF1bHRzIHRvIGRvY3VtZW50XG4vLyBrZWVwU2NyaXB0cyAob3B0aW9uYWwpOiBJZiB0cnVlLCB3aWxsIGluY2x1ZGUgc2NyaXB0cyBwYXNzZWQgaW4gdGhlIGh0bWwgc3RyaW5nXG5qUXVlcnkucGFyc2VIVE1MID0gZnVuY3Rpb24oIGRhdGEsIGNvbnRleHQsIGtlZXBTY3JpcHRzICkge1xuXHRpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGtlZXBTY3JpcHRzID0gY29udGV4dDtcblx0XHRjb250ZXh0ID0gZmFsc2U7XG5cdH1cblx0Y29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG5cblx0dmFyIHBhcnNlZCA9IHJzaW5nbGVUYWcuZXhlYyggZGF0YSApLFxuXHRcdHNjcmlwdHMgPSAha2VlcFNjcmlwdHMgJiYgW107XG5cblx0Ly8gU2luZ2xlIHRhZ1xuXHRpZiAoIHBhcnNlZCApIHtcblx0XHRyZXR1cm4gWyBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIHBhcnNlZFsxXSApIF07XG5cdH1cblxuXHRwYXJzZWQgPSBqUXVlcnkuYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTtcblxuXHRpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTtcbn07XG5cblxuLy8gS2VlcCBhIGNvcHkgb2YgdGhlIG9sZCBsb2FkIG1ldGhvZFxudmFyIF9sb2FkID0galF1ZXJ5LmZuLmxvYWQ7XG5cbi8qKlxuICogTG9hZCBhIHVybCBpbnRvIGEgcGFnZVxuICovXG5qUXVlcnkuZm4ubG9hZCA9IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcywgY2FsbGJhY2sgKSB7XG5cdGlmICggdHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIiAmJiBfbG9hZCApIHtcblx0XHRyZXR1cm4gX2xvYWQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHR9XG5cblx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRzZWxmID0gdGhpcyxcblx0XHRvZmYgPSB1cmwuaW5kZXhPZihcIiBcIik7XG5cblx0aWYgKCBvZmYgPj0gMCApIHtcblx0XHRzZWxlY3RvciA9IGpRdWVyeS50cmltKCB1cmwuc2xpY2UoIG9mZiApICk7XG5cdFx0dXJsID0gdXJsLnNsaWNlKCAwLCBvZmYgKTtcblx0fVxuXG5cdC8vIElmIGl0J3MgYSBmdW5jdGlvblxuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwYXJhbXMgKSApIHtcblxuXHRcdC8vIFdlIGFzc3VtZSB0aGF0IGl0J3MgdGhlIGNhbGxiYWNrXG5cdFx0Y2FsbGJhY2sgPSBwYXJhbXM7XG5cdFx0cGFyYW1zID0gdW5kZWZpbmVkO1xuXG5cdC8vIE90aGVyd2lzZSwgYnVpbGQgYSBwYXJhbSBzdHJpbmdcblx0fSBlbHNlIGlmICggcGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0dHlwZSA9IFwiUE9TVFwiO1xuXHR9XG5cblx0Ly8gSWYgd2UgaGF2ZSBlbGVtZW50cyB0byBtb2RpZnksIG1ha2UgdGhlIHJlcXVlc3Rcblx0aWYgKCBzZWxmLmxlbmd0aCA+IDAgKSB7XG5cdFx0alF1ZXJ5LmFqYXgoe1xuXHRcdFx0dXJsOiB1cmwsXG5cblx0XHRcdC8vIGlmIFwidHlwZVwiIHZhcmlhYmxlIGlzIHVuZGVmaW5lZCwgdGhlbiBcIkdFVFwiIG1ldGhvZCB3aWxsIGJlIHVzZWRcblx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRkYXRhVHlwZTogXCJodG1sXCIsXG5cdFx0XHRkYXRhOiBwYXJhbXNcblx0XHR9KS5kb25lKGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7XG5cblx0XHRcdC8vIFNhdmUgcmVzcG9uc2UgZm9yIHVzZSBpbiBjb21wbGV0ZSBjYWxsYmFja1xuXHRcdFx0cmVzcG9uc2UgPSBhcmd1bWVudHM7XG5cblx0XHRcdHNlbGYuaHRtbCggc2VsZWN0b3IgP1xuXG5cdFx0XHRcdC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuXHRcdFx0XHQvLyBFeGNsdWRlIHNjcmlwdHMgdG8gYXZvaWQgSUUgJ1Blcm1pc3Npb24gRGVuaWVkJyBlcnJvcnNcblx0XHRcdFx0alF1ZXJ5KFwiPGRpdj5cIikuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSB1c2UgdGhlIGZ1bGwgcmVzdWx0XG5cdFx0XHRcdHJlc3BvbnNlVGV4dCApO1xuXG5cdFx0fSkuY29tcGxldGUoIGNhbGxiYWNrICYmIGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xuXHRcdFx0c2VsZi5lYWNoKCBjYWxsYmFjaywgcmVzcG9uc2UgfHwgWyBqcVhIUi5yZXNwb25zZVRleHQsIHN0YXR1cywganFYSFIgXSApO1xuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5cblxuXG4vLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50c1xualF1ZXJ5LmVhY2goIFsgXCJhamF4U3RhcnRcIiwgXCJhamF4U3RvcFwiLCBcImFqYXhDb21wbGV0ZVwiLCBcImFqYXhFcnJvclwiLCBcImFqYXhTdWNjZXNzXCIsIFwiYWpheFNlbmRcIiBdLCBmdW5jdGlvbiggaSwgdHlwZSApIHtcblx0alF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG5cdH07XG59KTtcblxuXG5cblxualF1ZXJ5LmV4cHIuZmlsdGVycy5hbmltYXRlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmdyZXAoalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiBlbGVtID09PSBmbi5lbGVtO1xuXHR9KS5sZW5ndGg7XG59O1xuXG5cblxuXG52YXIgZG9jRWxlbSA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbi8qKlxuICogR2V0cyBhIHdpbmRvdyBmcm9tIGFuIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmlzV2luZG93KCBlbGVtICkgPyBlbGVtIDogZWxlbS5ub2RlVHlwZSA9PT0gOSAmJiBlbGVtLmRlZmF1bHRWaWV3O1xufVxuXG5qUXVlcnkub2Zmc2V0ID0ge1xuXHRzZXRPZmZzZXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBpICkge1xuXHRcdHZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sXG5cdFx0XHRwb3NpdGlvbiA9IGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApLFxuXHRcdFx0Y3VyRWxlbSA9IGpRdWVyeSggZWxlbSApLFxuXHRcdFx0cHJvcHMgPSB7fTtcblxuXHRcdC8vIFNldCBwb3NpdGlvbiBmaXJzdCwgaW4tY2FzZSB0b3AvbGVmdCBhcmUgc2V0IGV2ZW4gb24gc3RhdGljIGVsZW1cblx0XHRpZiAoIHBvc2l0aW9uID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcblx0XHR9XG5cblx0XHRjdXJPZmZzZXQgPSBjdXJFbGVtLm9mZnNldCgpO1xuXHRcdGN1ckNTU1RvcCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwidG9wXCIgKTtcblx0XHRjdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJsZWZ0XCIgKTtcblx0XHRjYWxjdWxhdGVQb3NpdGlvbiA9ICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkgJiZcblx0XHRcdCggY3VyQ1NTVG9wICsgY3VyQ1NTTGVmdCApLmluZGV4T2YoXCJhdXRvXCIpID4gLTE7XG5cblx0XHQvLyBOZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlclxuXHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdGlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7XG5cdFx0XHRjdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTtcblx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdGN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7XG5cdFx0XHRjdXJMZWZ0ID0gcGFyc2VGbG9hdCggY3VyQ1NTTGVmdCApIHx8IDA7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0aW9ucyApICkge1xuXHRcdFx0b3B0aW9ucyA9IG9wdGlvbnMuY2FsbCggZWxlbSwgaSwgY3VyT2Zmc2V0ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHRpb25zLnRvcCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDtcblx0XHR9XG5cdFx0aWYgKCBvcHRpb25zLmxlZnQgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLmxlZnQgPSAoIG9wdGlvbnMubGVmdCAtIGN1ck9mZnNldC5sZWZ0ICkgKyBjdXJMZWZ0O1xuXHRcdH1cblxuXHRcdGlmICggXCJ1c2luZ1wiIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyRWxlbS5jc3MoIHByb3BzICk7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0b2Zmc2V0OiBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0dGhpcyA6XG5cdFx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0XHRqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHR2YXIgZG9jRWxlbSwgd2luLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGJveCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH0sXG5cdFx0XHRkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDtcblxuXHRcdGlmICggIWRvYyApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuXHRcdC8vIE1ha2Ugc3VyZSBpdCdzIG5vdCBhIGRpc2Nvbm5lY3RlZCBET00gbm9kZVxuXHRcdGlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkge1xuXHRcdFx0cmV0dXJuIGJveDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBCbGFja0JlcnJ5IDUsIGlPUyAzIChvcmlnaW5hbCBpUGhvbmUpXG5cdFx0Ly8gSWYgd2UgZG9uJ3QgaGF2ZSBnQkNSLCBqdXN0IHVzZSAwLDAgcmF0aGVyIHRoYW4gZXJyb3Jcblx0XHRpZiAoIHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gc3RydW5kZWZpbmVkICkge1xuXHRcdFx0Ym94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHR9XG5cdFx0d2luID0gZ2V0V2luZG93KCBkb2MgKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBib3gudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRUb3AsXG5cdFx0XHRsZWZ0OiBib3gubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY0VsZW0uY2xpZW50TGVmdFxuXHRcdH07XG5cdH0sXG5cblx0cG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggIXRoaXNbIDAgXSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgb2Zmc2V0UGFyZW50LCBvZmZzZXQsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0cGFyZW50T2Zmc2V0ID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblxuXHRcdC8vIEZpeGVkIGVsZW1lbnRzIGFyZSBvZmZzZXQgZnJvbSB3aW5kb3cgKHBhcmVudE9mZnNldCA9IHt0b3A6MCwgbGVmdDogMH0sIGJlY2F1c2UgaXQgaXMgaXRzIG9ubHkgb2Zmc2V0IHBhcmVudFxuXHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcblx0XHRcdC8vIEFzc3VtZSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgdGhlcmUgd2hlbiBjb21wdXRlZCBwb3NpdGlvbiBpcyBmaXhlZFxuXHRcdFx0b2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBHZXQgKnJlYWwqIG9mZnNldFBhcmVudFxuXHRcdFx0b2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQoKTtcblxuXHRcdFx0Ly8gR2V0IGNvcnJlY3Qgb2Zmc2V0c1xuXHRcdFx0b2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTtcblx0XHRcdGlmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50WyAwIF0sIFwiaHRtbFwiICkgKSB7XG5cdFx0XHRcdHBhcmVudE9mZnNldCA9IG9mZnNldFBhcmVudC5vZmZzZXQoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIG9mZnNldFBhcmVudCBib3JkZXJzXG5cdFx0XHRwYXJlbnRPZmZzZXQudG9wICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlclRvcFdpZHRoXCIsIHRydWUgKTtcblx0XHRcdHBhcmVudE9mZnNldC5sZWZ0ICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlckxlZnRXaWR0aFwiLCB0cnVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2luc1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wIC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5Ub3BcIiwgdHJ1ZSApLFxuXHRcdFx0bGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luTGVmdFwiLCB0cnVlIClcblx0XHR9O1xuXHR9LFxuXG5cdG9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50IHx8IGRvY0VsZW07XG5cblx0XHRcdHdoaWxlICggb2Zmc2V0UGFyZW50ICYmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50LCBcImh0bWxcIiApICYmIGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSApIHtcblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2NFbGVtO1xuXHRcdH0pO1xuXHR9XG59KTtcblxuLy8gQ3JlYXRlIHNjcm9sbExlZnQgYW5kIHNjcm9sbFRvcCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiBcInBhZ2VYT2Zmc2V0XCIsIHNjcm9sbFRvcDogXCJwYWdlWU9mZnNldFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG5cdHZhciB0b3AgPSBcInBhZ2VZT2Zmc2V0XCIgPT09IHByb3A7XG5cblx0alF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkge1xuXHRcdFx0dmFyIHdpbiA9IGdldFdpbmRvdyggZWxlbSApO1xuXG5cdFx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gd2luID8gd2luWyBwcm9wIF0gOiBlbGVtWyBtZXRob2QgXTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB3aW4gKSB7XG5cdFx0XHRcdHdpbi5zY3JvbGxUbyhcblx0XHRcdFx0XHQhdG9wID8gdmFsIDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuXHRcdFx0XHRcdHRvcCA/IHZhbCA6IHdpbmRvdy5wYWdlWU9mZnNldFxuXHRcdFx0XHQpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtWyBtZXRob2QgXSA9IHZhbDtcblx0XHRcdH1cblx0XHR9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCwgbnVsbCApO1xuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IFNhZmFyaTw3KywgQ2hyb21lPDM3K1xuLy8gQWRkIHRoZSB0b3AvbGVmdCBjc3NIb29rcyB1c2luZyBqUXVlcnkuZm4ucG9zaXRpb25cbi8vIFdlYmtpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTA4NFxuLy8gQmxpbmsgYnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MjgwXG4vLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0O1xuLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmVcbmpRdWVyeS5lYWNoKCBbIFwidG9wXCIsIFwibGVmdFwiIF0sIGZ1bmN0aW9uKCBpLCBwcm9wICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5waXhlbFBvc2l0aW9uLFxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7XG5cdFx0XHRcdC8vIElmIGN1ckNTUyByZXR1cm5zIHBlcmNlbnRhZ2UsIGZhbGxiYWNrIHRvIG9mZnNldFxuXHRcdFx0XHRyZXR1cm4gcm51bW5vbnB4LnRlc3QoIGNvbXB1dGVkICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArIFwicHhcIiA6XG5cdFx0XHRcdFx0Y29tcHV0ZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xufSk7XG5cblxuLy8gQ3JlYXRlIGlubmVySGVpZ2h0LCBpbm5lcldpZHRoLCBoZWlnaHQsIHdpZHRoLCBvdXRlckhlaWdodCBhbmQgb3V0ZXJXaWR0aCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBIZWlnaHQ6IFwiaGVpZ2h0XCIsIFdpZHRoOiBcIndpZHRoXCIgfSwgZnVuY3Rpb24oIG5hbWUsIHR5cGUgKSB7XG5cdGpRdWVyeS5lYWNoKCB7IHBhZGRpbmc6IFwiaW5uZXJcIiArIG5hbWUsIGNvbnRlbnQ6IHR5cGUsIFwiXCI6IFwib3V0ZXJcIiArIG5hbWUgfSwgZnVuY3Rpb24oIGRlZmF1bHRFeHRyYSwgZnVuY05hbWUgKSB7XG5cdFx0Ly8gTWFyZ2luIGlzIG9ubHkgZm9yIG91dGVySGVpZ2h0LCBvdXRlcldpZHRoXG5cdFx0alF1ZXJ5LmZuWyBmdW5jTmFtZSBdID0gZnVuY3Rpb24oIG1hcmdpbiwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgY2hhaW5hYmxlID0gYXJndW1lbnRzLmxlbmd0aCAmJiAoIGRlZmF1bHRFeHRyYSB8fCB0eXBlb2YgbWFyZ2luICE9PSBcImJvb2xlYW5cIiApLFxuXHRcdFx0XHRleHRyYSA9IGRlZmF1bHRFeHRyYSB8fCAoIG1hcmdpbiA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gdHJ1ZSA/IFwibWFyZ2luXCIgOiBcImJvcmRlclwiICk7XG5cblx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIGRvYztcblxuXHRcdFx0XHRpZiAoIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXHRcdFx0XHRcdC8vIEFzIG9mIDUvOC8yMDEyIHRoaXMgd2lsbCB5aWVsZCBpbmNvcnJlY3QgcmVzdWx0cyBmb3IgTW9iaWxlIFNhZmFyaSwgYnV0IHRoZXJlXG5cdFx0XHRcdFx0Ly8gaXNuJ3QgYSB3aG9sZSBsb3Qgd2UgY2FuIGRvLiBTZWUgcHVsbCByZXF1ZXN0IGF0IHRoaXMgVVJMIGZvciBkaXNjdXNzaW9uOlxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNzY0XG5cdFx0XHRcdFx0cmV0dXJuIGVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBcImNsaWVudFwiICsgbmFtZSBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGRvY3VtZW50IHdpZHRoIG9yIGhlaWdodFxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sXG5cdFx0XHRcdFx0Ly8gd2hpY2hldmVyIGlzIGdyZWF0ZXN0XG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgubWF4KFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcInNjcm9sbFwiICsgbmFtZSBdLCBkb2NbIFwic2Nyb2xsXCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwib2Zmc2V0XCIgKyBuYW1lIF0sIGRvY1sgXCJvZmZzZXRcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGRvY1sgXCJjbGllbnRcIiArIG5hbWUgXVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdFx0Ly8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdFxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOlxuXG5cdFx0XHRcdFx0Ly8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgdHlwZSwgdmFsdWUsIGV4dHJhICk7XG5cdFx0XHR9LCB0eXBlLCBjaGFpbmFibGUgPyBtYXJnaW4gOiB1bmRlZmluZWQsIGNoYWluYWJsZSwgbnVsbCApO1xuXHRcdH07XG5cdH0pO1xufSk7XG5cblxuLy8gVGhlIG51bWJlciBvZiBlbGVtZW50cyBjb250YWluZWQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXRcbmpRdWVyeS5mbi5zaXplID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzLmxlbmd0aDtcbn07XG5cbmpRdWVyeS5mbi5hbmRTZWxmID0galF1ZXJ5LmZuLmFkZEJhY2s7XG5cblxuXG5cbi8vIFJlZ2lzdGVyIGFzIGEgbmFtZWQgQU1EIG1vZHVsZSwgc2luY2UgalF1ZXJ5IGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlclxuLy8gZmlsZXMgdGhhdCBtYXkgdXNlIGRlZmluZSwgYnV0IG5vdCB2aWEgYSBwcm9wZXIgY29uY2F0ZW5hdGlvbiBzY3JpcHQgdGhhdFxuLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0XG4vLyB3YXkgdG8gcmVnaXN0ZXIuIExvd2VyY2FzZSBqcXVlcnkgaXMgdXNlZCBiZWNhdXNlIEFNRCBtb2R1bGUgbmFtZXMgYXJlXG4vLyBkZXJpdmVkIGZyb20gZmlsZSBuYW1lcywgYW5kIGpRdWVyeSBpcyBub3JtYWxseSBkZWxpdmVyZWQgaW4gYSBsb3dlcmNhc2Vcbi8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50c1xuLy8gdG8gY2FsbCBub0NvbmZsaWN0IHRvIGhpZGUgdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSwgaXQgd2lsbCB3b3JrLlxuXG4vLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZFxuLy8gZGVjbGFyZSB0aGVtc2VsdmVzIGFzIGFub255bW91cyBtb2R1bGVzLCBhbmQgYXZvaWQgc2V0dGluZyBhIGdsb2JhbCBpZiBhblxuLy8gQU1EIGxvYWRlciBpcyBwcmVzZW50LiBqUXVlcnkgaXMgYSBzcGVjaWFsIGNhc2UuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub25cblxuaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblx0ZGVmaW5lKCBcImpxdWVyeVwiLCBbXSwgZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeTtcblx0fSk7XG59XG5cblxuXG5cbnZhclxuXHQvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0X2pRdWVyeSA9IHdpbmRvdy5qUXVlcnksXG5cblx0Ly8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XyQgPSB3aW5kb3cuJDtcblxualF1ZXJ5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiggZGVlcCApIHtcblx0aWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy4kID0gXyQ7XG5cdH1cblxuXHRpZiAoIGRlZXAgJiYgd2luZG93LmpRdWVyeSA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy5qUXVlcnkgPSBfalF1ZXJ5O1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeTtcbn07XG5cbi8vIEV4cG9zZSBqUXVlcnkgYW5kICQgaWRlbnRpZmllcnMsIGV2ZW4gaW4gQU1EXG4vLyAoIzcxMDIjY29tbWVudDoxMCwgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC81NTcpXG4vLyBhbmQgQ29tbW9uSlMgZm9yIGJyb3dzZXIgZW11bGF0b3JzICgjMTM1NjYpXG5pZiAoIHR5cGVvZiBub0dsb2JhbCA9PT0gc3RydW5kZWZpbmVkICkge1xuXHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG59XG5cblxuXG5cbnJldHVybiBqUXVlcnk7XG5cbn0pKTtcbiIsIi8qIVxuICogQm9vdHN0cmFwIHYzLjMuNiAoaHR0cDovL2dldGJvb3RzdHJhcC5jb20pXG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE1IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICovXG5cbmlmICh0eXBlb2YgalF1ZXJ5ID09PSAndW5kZWZpbmVkJykge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0Jvb3RzdHJhcFxcJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnknKVxufVxuXG4rZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICB2YXIgdmVyc2lvbiA9ICQuZm4uanF1ZXJ5LnNwbGl0KCcgJylbMF0uc3BsaXQoJy4nKVxuICBpZiAoKHZlcnNpb25bMF0gPCAyICYmIHZlcnNpb25bMV0gPCA5KSB8fCAodmVyc2lvblswXSA9PSAxICYmIHZlcnNpb25bMV0gPT0gOSAmJiB2ZXJzaW9uWzJdIDwgMSkgfHwgKHZlcnNpb25bMF0gPiAyKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQm9vdHN0cmFwXFwncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGpRdWVyeSB2ZXJzaW9uIDEuOS4xIG9yIGhpZ2hlciwgYnV0IGxvd2VyIHRoYW4gdmVyc2lvbiAzJylcbiAgfVxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogdHJhbnNpdGlvbi5qcyB2My4zLjZcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3RyYW5zaXRpb25zXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHlyaWdodCAyMDExLTIwMTUgVHdpdHRlciwgSW5jLlxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5cbitmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gQ1NTIFRSQU5TSVRJT04gU1VQUE9SVCAoU2hvdXRvdXQ6IGh0dHA6Ly93d3cubW9kZXJuaXpyLmNvbS8pXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGZ1bmN0aW9uIHRyYW5zaXRpb25FbmQoKSB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYm9vdHN0cmFwJylcblxuICAgIHZhciB0cmFuc0VuZEV2ZW50TmFtZXMgPSB7XG4gICAgICBXZWJraXRUcmFuc2l0aW9uIDogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLFxuICAgICAgTW96VHJhbnNpdGlvbiAgICA6ICd0cmFuc2l0aW9uZW5kJyxcbiAgICAgIE9UcmFuc2l0aW9uICAgICAgOiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnLFxuICAgICAgdHJhbnNpdGlvbiAgICAgICA6ICd0cmFuc2l0aW9uZW5kJ1xuICAgIH1cblxuICAgIGZvciAodmFyIG5hbWUgaW4gdHJhbnNFbmRFdmVudE5hbWVzKSB7XG4gICAgICBpZiAoZWwuc3R5bGVbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4geyBlbmQ6IHRyYW5zRW5kRXZlbnROYW1lc1tuYW1lXSB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlIC8vIGV4cGxpY2l0IGZvciBpZTggKCAgLl8uKVxuICB9XG5cbiAgLy8gaHR0cDovL2Jsb2cuYWxleG1hY2Nhdy5jb20vY3NzLXRyYW5zaXRpb25zXG4gICQuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoZHVyYXRpb24pIHtcbiAgICB2YXIgY2FsbGVkID0gZmFsc2VcbiAgICB2YXIgJGVsID0gdGhpc1xuICAgICQodGhpcykub25lKCdic1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7IGNhbGxlZCA9IHRydWUgfSlcbiAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IGlmICghY2FsbGVkKSAkKCRlbCkudHJpZ2dlcigkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpIH1cbiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCBkdXJhdGlvbilcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgJChmdW5jdGlvbiAoKSB7XG4gICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRW5kKClcblxuICAgIGlmICghJC5zdXBwb3J0LnRyYW5zaXRpb24pIHJldHVyblxuXG4gICAgJC5ldmVudC5zcGVjaWFsLmJzVHJhbnNpdGlvbkVuZCA9IHtcbiAgICAgIGJpbmRUeXBlOiAkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsXG4gICAgICBkZWxlZ2F0ZVR5cGU6ICQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCxcbiAgICAgIGhhbmRsZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKHRoaXMpKSByZXR1cm4gZS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG59KGpRdWVyeSk7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQm9vdHN0cmFwOiBhbGVydC5qcyB2My4zLjZcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2FsZXJ0c1xuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE1IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuXG4rZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIEFMRVJUIENMQVNTIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBkaXNtaXNzID0gJ1tkYXRhLWRpc21pc3M9XCJhbGVydFwiXSdcbiAgdmFyIEFsZXJ0ICAgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAkKGVsKS5vbignY2xpY2snLCBkaXNtaXNzLCB0aGlzLmNsb3NlKVxuICB9XG5cbiAgQWxlcnQuVkVSU0lPTiA9ICczLjMuNidcblxuICBBbGVydC5UUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwXG5cbiAgQWxlcnQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgJHRoaXMgICAgPSAkKHRoaXMpXG4gICAgdmFyIHNlbGVjdG9yID0gJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKVxuXG4gICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgc2VsZWN0b3IgPSAkdGhpcy5hdHRyKCdocmVmJylcbiAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgJiYgc2VsZWN0b3IucmVwbGFjZSgvLiooPz0jW15cXHNdKiQpLywgJycpIC8vIHN0cmlwIGZvciBpZTdcbiAgICB9XG5cbiAgICB2YXIgJHBhcmVudCA9ICQoc2VsZWN0b3IpXG5cbiAgICBpZiAoZSkgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBpZiAoISRwYXJlbnQubGVuZ3RoKSB7XG4gICAgICAkcGFyZW50ID0gJHRoaXMuY2xvc2VzdCgnLmFsZXJ0JylcbiAgICB9XG5cbiAgICAkcGFyZW50LnRyaWdnZXIoZSA9ICQuRXZlbnQoJ2Nsb3NlLmJzLmFsZXJ0JykpXG5cbiAgICBpZiAoZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuXG5cbiAgICAkcGFyZW50LnJlbW92ZUNsYXNzKCdpbicpXG5cbiAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KCkge1xuICAgICAgLy8gZGV0YWNoIGZyb20gcGFyZW50LCBmaXJlIGV2ZW50IHRoZW4gY2xlYW4gdXAgZGF0YVxuICAgICAgJHBhcmVudC5kZXRhY2goKS50cmlnZ2VyKCdjbG9zZWQuYnMuYWxlcnQnKS5yZW1vdmUoKVxuICAgIH1cblxuICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmICRwYXJlbnQuaGFzQ2xhc3MoJ2ZhZGUnKSA/XG4gICAgICAkcGFyZW50XG4gICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIHJlbW92ZUVsZW1lbnQpXG4gICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChBbGVydC5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6XG4gICAgICByZW1vdmVFbGVtZW50KClcbiAgfVxuXG5cbiAgLy8gQUxFUlQgUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpXG4gICAgICB2YXIgZGF0YSAgPSAkdGhpcy5kYXRhKCdicy5hbGVydCcpXG5cbiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuYWxlcnQnLCAoZGF0YSA9IG5ldyBBbGVydCh0aGlzKSkpXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dLmNhbGwoJHRoaXMpXG4gICAgfSlcbiAgfVxuXG4gIHZhciBvbGQgPSAkLmZuLmFsZXJ0XG5cbiAgJC5mbi5hbGVydCAgICAgICAgICAgICA9IFBsdWdpblxuICAkLmZuLmFsZXJ0LkNvbnN0cnVjdG9yID0gQWxlcnRcblxuXG4gIC8vIEFMRVJUIE5PIENPTkZMSUNUXG4gIC8vID09PT09PT09PT09PT09PT09XG5cbiAgJC5mbi5hbGVydC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm4uYWxlcnQgPSBvbGRcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvLyBBTEVSVCBEQVRBLUFQSVxuICAvLyA9PT09PT09PT09PT09PVxuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljay5icy5hbGVydC5kYXRhLWFwaScsIGRpc21pc3MsIEFsZXJ0LnByb3RvdHlwZS5jbG9zZSlcblxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogYnV0dG9uLmpzIHYzLjMuNlxuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jYnV0dG9uc1xuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE1IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuXG4rZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIEJVVFRPTiBQVUJMSUMgQ0xBU1MgREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgQnV0dG9uID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLiRlbGVtZW50ICA9ICQoZWxlbWVudClcbiAgICB0aGlzLm9wdGlvbnMgICA9ICQuZXh0ZW5kKHt9LCBCdXR0b24uREVGQVVMVFMsIG9wdGlvbnMpXG4gICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZVxuICB9XG5cbiAgQnV0dG9uLlZFUlNJT04gID0gJzMuMy42J1xuXG4gIEJ1dHRvbi5ERUZBVUxUUyA9IHtcbiAgICBsb2FkaW5nVGV4dDogJ2xvYWRpbmcuLi4nXG4gIH1cblxuICBCdXR0b24ucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgdmFyIGQgICAgPSAnZGlzYWJsZWQnXG4gICAgdmFyICRlbCAgPSB0aGlzLiRlbGVtZW50XG4gICAgdmFyIHZhbCAgPSAkZWwuaXMoJ2lucHV0JykgPyAndmFsJyA6ICdodG1sJ1xuICAgIHZhciBkYXRhID0gJGVsLmRhdGEoKVxuXG4gICAgc3RhdGUgKz0gJ1RleHQnXG5cbiAgICBpZiAoZGF0YS5yZXNldFRleHQgPT0gbnVsbCkgJGVsLmRhdGEoJ3Jlc2V0VGV4dCcsICRlbFt2YWxdKCkpXG5cbiAgICAvLyBwdXNoIHRvIGV2ZW50IGxvb3AgdG8gYWxsb3cgZm9ybXMgdG8gc3VibWl0XG4gICAgc2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uICgpIHtcbiAgICAgICRlbFt2YWxdKGRhdGFbc3RhdGVdID09IG51bGwgPyB0aGlzLm9wdGlvbnNbc3RhdGVdIDogZGF0YVtzdGF0ZV0pXG5cbiAgICAgIGlmIChzdGF0ZSA9PSAnbG9hZGluZ1RleHQnKSB7XG4gICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZVxuICAgICAgICAkZWwuYWRkQ2xhc3MoZCkuYXR0cihkLCBkKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTG9hZGluZykge1xuICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlXG4gICAgICAgICRlbC5yZW1vdmVDbGFzcyhkKS5yZW1vdmVBdHRyKGQpXG4gICAgICB9XG4gICAgfSwgdGhpcyksIDApXG4gIH1cblxuICBCdXR0b24ucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2hhbmdlZCA9IHRydWVcbiAgICB2YXIgJHBhcmVudCA9IHRoaXMuJGVsZW1lbnQuY2xvc2VzdCgnW2RhdGEtdG9nZ2xlPVwiYnV0dG9uc1wiXScpXG5cbiAgICBpZiAoJHBhcmVudC5sZW5ndGgpIHtcbiAgICAgIHZhciAkaW5wdXQgPSB0aGlzLiRlbGVtZW50LmZpbmQoJ2lucHV0JylcbiAgICAgIGlmICgkaW5wdXQucHJvcCgndHlwZScpID09ICdyYWRpbycpIHtcbiAgICAgICAgaWYgKCRpbnB1dC5wcm9wKCdjaGVja2VkJykpIGNoYW5nZWQgPSBmYWxzZVxuICAgICAgICAkcGFyZW50LmZpbmQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgIH0gZWxzZSBpZiAoJGlucHV0LnByb3AoJ3R5cGUnKSA9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgIGlmICgoJGlucHV0LnByb3AoJ2NoZWNrZWQnKSkgIT09IHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2FjdGl2ZScpKSBjaGFuZ2VkID0gZmFsc2VcbiAgICAgICAgdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcygnYWN0aXZlJylcbiAgICAgIH1cbiAgICAgICRpbnB1dC5wcm9wKCdjaGVja2VkJywgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnYWN0aXZlJykpXG4gICAgICBpZiAoY2hhbmdlZCkgJGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGVsZW1lbnQuYXR0cignYXJpYS1wcmVzc2VkJywgIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2FjdGl2ZScpKVxuICAgICAgdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcygnYWN0aXZlJylcbiAgICB9XG4gIH1cblxuXG4gIC8vIEJVVFRPTiBQTFVHSU4gREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcbiAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuYnV0dG9uJylcbiAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb25cblxuICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5idXR0b24nLCAoZGF0YSA9IG5ldyBCdXR0b24odGhpcywgb3B0aW9ucykpKVxuXG4gICAgICBpZiAob3B0aW9uID09ICd0b2dnbGUnKSBkYXRhLnRvZ2dsZSgpXG4gICAgICBlbHNlIGlmIChvcHRpb24pIGRhdGEuc2V0U3RhdGUob3B0aW9uKVxuICAgIH0pXG4gIH1cblxuICB2YXIgb2xkID0gJC5mbi5idXR0b25cblxuICAkLmZuLmJ1dHRvbiAgICAgICAgICAgICA9IFBsdWdpblxuICAkLmZuLmJ1dHRvbi5Db25zdHJ1Y3RvciA9IEJ1dHRvblxuXG5cbiAgLy8gQlVUVE9OIE5PIENPTkZMSUNUXG4gIC8vID09PT09PT09PT09PT09PT09PVxuXG4gICQuZm4uYnV0dG9uLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbi5idXR0b24gPSBvbGRcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvLyBCVVRUT04gREFUQS1BUElcbiAgLy8gPT09PT09PT09PT09PT09XG5cbiAgJChkb2N1bWVudClcbiAgICAub24oJ2NsaWNrLmJzLmJ1dHRvbi5kYXRhLWFwaScsICdbZGF0YS10b2dnbGVePVwiYnV0dG9uXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciAkYnRuID0gJChlLnRhcmdldClcbiAgICAgIGlmICghJGJ0bi5oYXNDbGFzcygnYnRuJykpICRidG4gPSAkYnRuLmNsb3Nlc3QoJy5idG4nKVxuICAgICAgUGx1Z2luLmNhbGwoJGJ0biwgJ3RvZ2dsZScpXG4gICAgICBpZiAoISgkKGUudGFyZ2V0KS5pcygnaW5wdXRbdHlwZT1cInJhZGlvXCJdJykgfHwgJChlLnRhcmdldCkuaXMoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpKSkgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfSlcbiAgICAub24oJ2ZvY3VzLmJzLmJ1dHRvbi5kYXRhLWFwaSBibHVyLmJzLmJ1dHRvbi5kYXRhLWFwaScsICdbZGF0YS10b2dnbGVePVwiYnV0dG9uXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5idG4nKS50b2dnbGVDbGFzcygnZm9jdXMnLCAvXmZvY3VzKGluKT8kLy50ZXN0KGUudHlwZSkpXG4gICAgfSlcblxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogY2Fyb3VzZWwuanMgdjMuMy42XG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNjYXJvdXNlbFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE1IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuXG4rZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIENBUk9VU0VMIENMQVNTIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBDYXJvdXNlbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy4kZWxlbWVudCAgICA9ICQoZWxlbWVudClcbiAgICB0aGlzLiRpbmRpY2F0b3JzID0gdGhpcy4kZWxlbWVudC5maW5kKCcuY2Fyb3VzZWwtaW5kaWNhdG9ycycpXG4gICAgdGhpcy5vcHRpb25zICAgICA9IG9wdGlvbnNcbiAgICB0aGlzLnBhdXNlZCAgICAgID0gbnVsbFxuICAgIHRoaXMuc2xpZGluZyAgICAgPSBudWxsXG4gICAgdGhpcy5pbnRlcnZhbCAgICA9IG51bGxcbiAgICB0aGlzLiRhY3RpdmUgICAgID0gbnVsbFxuICAgIHRoaXMuJGl0ZW1zICAgICAgPSBudWxsXG5cbiAgICB0aGlzLm9wdGlvbnMua2V5Ym9hcmQgJiYgdGhpcy4kZWxlbWVudC5vbigna2V5ZG93bi5icy5jYXJvdXNlbCcsICQucHJveHkodGhpcy5rZXlkb3duLCB0aGlzKSlcblxuICAgIHRoaXMub3B0aW9ucy5wYXVzZSA9PSAnaG92ZXInICYmICEoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSAmJiB0aGlzLiRlbGVtZW50XG4gICAgICAub24oJ21vdXNlZW50ZXIuYnMuY2Fyb3VzZWwnLCAkLnByb3h5KHRoaXMucGF1c2UsIHRoaXMpKVxuICAgICAgLm9uKCdtb3VzZWxlYXZlLmJzLmNhcm91c2VsJywgJC5wcm94eSh0aGlzLmN5Y2xlLCB0aGlzKSlcbiAgfVxuXG4gIENhcm91c2VsLlZFUlNJT04gID0gJzMuMy42J1xuXG4gIENhcm91c2VsLlRSQU5TSVRJT05fRFVSQVRJT04gPSA2MDBcblxuICBDYXJvdXNlbC5ERUZBVUxUUyA9IHtcbiAgICBpbnRlcnZhbDogNTAwMCxcbiAgICBwYXVzZTogJ2hvdmVyJyxcbiAgICB3cmFwOiB0cnVlLFxuICAgIGtleWJvYXJkOiB0cnVlXG4gIH1cblxuICBDYXJvdXNlbC5wcm90b3R5cGUua2V5ZG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZS50YXJnZXQudGFnTmFtZSkpIHJldHVyblxuICAgIHN3aXRjaCAoZS53aGljaCkge1xuICAgICAgY2FzZSAzNzogdGhpcy5wcmV2KCk7IGJyZWFrXG4gICAgICBjYXNlIDM5OiB0aGlzLm5leHQoKTsgYnJlYWtcbiAgICAgIGRlZmF1bHQ6IHJldHVyblxuICAgIH1cblxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICB9XG5cbiAgQ2Fyb3VzZWwucHJvdG90eXBlLmN5Y2xlID0gZnVuY3Rpb24gKGUpIHtcbiAgICBlIHx8ICh0aGlzLnBhdXNlZCA9IGZhbHNlKVxuXG4gICAgdGhpcy5pbnRlcnZhbCAmJiBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpXG5cbiAgICB0aGlzLm9wdGlvbnMuaW50ZXJ2YWxcbiAgICAgICYmICF0aGlzLnBhdXNlZFxuICAgICAgJiYgKHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgkLnByb3h5KHRoaXMubmV4dCwgdGhpcyksIHRoaXMub3B0aW9ucy5pbnRlcnZhbCkpXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgQ2Fyb3VzZWwucHJvdG90eXBlLmdldEl0ZW1JbmRleCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgdGhpcy4kaXRlbXMgPSBpdGVtLnBhcmVudCgpLmNoaWxkcmVuKCcuaXRlbScpXG4gICAgcmV0dXJuIHRoaXMuJGl0ZW1zLmluZGV4KGl0ZW0gfHwgdGhpcy4kYWN0aXZlKVxuICB9XG5cbiAgQ2Fyb3VzZWwucHJvdG90eXBlLmdldEl0ZW1Gb3JEaXJlY3Rpb24gPSBmdW5jdGlvbiAoZGlyZWN0aW9uLCBhY3RpdmUpIHtcbiAgICB2YXIgYWN0aXZlSW5kZXggPSB0aGlzLmdldEl0ZW1JbmRleChhY3RpdmUpXG4gICAgdmFyIHdpbGxXcmFwID0gKGRpcmVjdGlvbiA9PSAncHJldicgJiYgYWN0aXZlSW5kZXggPT09IDApXG4gICAgICAgICAgICAgICAgfHwgKGRpcmVjdGlvbiA9PSAnbmV4dCcgJiYgYWN0aXZlSW5kZXggPT0gKHRoaXMuJGl0ZW1zLmxlbmd0aCAtIDEpKVxuICAgIGlmICh3aWxsV3JhcCAmJiAhdGhpcy5vcHRpb25zLndyYXApIHJldHVybiBhY3RpdmVcbiAgICB2YXIgZGVsdGEgPSBkaXJlY3Rpb24gPT0gJ3ByZXYnID8gLTEgOiAxXG4gICAgdmFyIGl0ZW1JbmRleCA9IChhY3RpdmVJbmRleCArIGRlbHRhKSAlIHRoaXMuJGl0ZW1zLmxlbmd0aFxuICAgIHJldHVybiB0aGlzLiRpdGVtcy5lcShpdGVtSW5kZXgpXG4gIH1cblxuICBDYXJvdXNlbC5wcm90b3R5cGUudG8gPSBmdW5jdGlvbiAocG9zKSB7XG4gICAgdmFyIHRoYXQgICAgICAgID0gdGhpc1xuICAgIHZhciBhY3RpdmVJbmRleCA9IHRoaXMuZ2V0SXRlbUluZGV4KHRoaXMuJGFjdGl2ZSA9IHRoaXMuJGVsZW1lbnQuZmluZCgnLml0ZW0uYWN0aXZlJykpXG5cbiAgICBpZiAocG9zID4gKHRoaXMuJGl0ZW1zLmxlbmd0aCAtIDEpIHx8IHBvcyA8IDApIHJldHVyblxuXG4gICAgaWYgKHRoaXMuc2xpZGluZykgICAgICAgcmV0dXJuIHRoaXMuJGVsZW1lbnQub25lKCdzbGlkLmJzLmNhcm91c2VsJywgZnVuY3Rpb24gKCkgeyB0aGF0LnRvKHBvcykgfSkgLy8geWVzLCBcInNsaWRcIlxuICAgIGlmIChhY3RpdmVJbmRleCA9PSBwb3MpIHJldHVybiB0aGlzLnBhdXNlKCkuY3ljbGUoKVxuXG4gICAgcmV0dXJuIHRoaXMuc2xpZGUocG9zID4gYWN0aXZlSW5kZXggPyAnbmV4dCcgOiAncHJldicsIHRoaXMuJGl0ZW1zLmVxKHBvcykpXG4gIH1cblxuICBDYXJvdXNlbC5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoZSkge1xuICAgIGUgfHwgKHRoaXMucGF1c2VkID0gdHJ1ZSlcblxuICAgIGlmICh0aGlzLiRlbGVtZW50LmZpbmQoJy5uZXh0LCAucHJldicpLmxlbmd0aCAmJiAkLnN1cHBvcnQudHJhbnNpdGlvbikge1xuICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZClcbiAgICAgIHRoaXMuY3ljbGUodHJ1ZSlcbiAgICB9XG5cbiAgICB0aGlzLmludGVydmFsID0gY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIENhcm91c2VsLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnNsaWRpbmcpIHJldHVyblxuICAgIHJldHVybiB0aGlzLnNsaWRlKCduZXh0JylcbiAgfVxuXG4gIENhcm91c2VsLnByb3RvdHlwZS5wcmV2ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnNsaWRpbmcpIHJldHVyblxuICAgIHJldHVybiB0aGlzLnNsaWRlKCdwcmV2JylcbiAgfVxuXG4gIENhcm91c2VsLnByb3RvdHlwZS5zbGlkZSA9IGZ1bmN0aW9uICh0eXBlLCBuZXh0KSB7XG4gICAgdmFyICRhY3RpdmUgICA9IHRoaXMuJGVsZW1lbnQuZmluZCgnLml0ZW0uYWN0aXZlJylcbiAgICB2YXIgJG5leHQgICAgID0gbmV4dCB8fCB0aGlzLmdldEl0ZW1Gb3JEaXJlY3Rpb24odHlwZSwgJGFjdGl2ZSlcbiAgICB2YXIgaXNDeWNsaW5nID0gdGhpcy5pbnRlcnZhbFxuICAgIHZhciBkaXJlY3Rpb24gPSB0eXBlID09ICduZXh0JyA/ICdsZWZ0JyA6ICdyaWdodCdcbiAgICB2YXIgdGhhdCAgICAgID0gdGhpc1xuXG4gICAgaWYgKCRuZXh0Lmhhc0NsYXNzKCdhY3RpdmUnKSkgcmV0dXJuICh0aGlzLnNsaWRpbmcgPSBmYWxzZSlcblxuICAgIHZhciByZWxhdGVkVGFyZ2V0ID0gJG5leHRbMF1cbiAgICB2YXIgc2xpZGVFdmVudCA9ICQuRXZlbnQoJ3NsaWRlLmJzLmNhcm91c2VsJywge1xuICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldCxcbiAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uXG4gICAgfSlcbiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc2xpZGVFdmVudClcbiAgICBpZiAoc2xpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuXG5cbiAgICB0aGlzLnNsaWRpbmcgPSB0cnVlXG5cbiAgICBpc0N5Y2xpbmcgJiYgdGhpcy5wYXVzZSgpXG5cbiAgICBpZiAodGhpcy4kaW5kaWNhdG9ycy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuJGluZGljYXRvcnMuZmluZCgnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuICAgICAgdmFyICRuZXh0SW5kaWNhdG9yID0gJCh0aGlzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKClbdGhpcy5nZXRJdGVtSW5kZXgoJG5leHQpXSlcbiAgICAgICRuZXh0SW5kaWNhdG9yICYmICRuZXh0SW5kaWNhdG9yLmFkZENsYXNzKCdhY3RpdmUnKVxuICAgIH1cblxuICAgIHZhciBzbGlkRXZlbnQgPSAkLkV2ZW50KCdzbGlkLmJzLmNhcm91c2VsJywgeyByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0LCBkaXJlY3Rpb246IGRpcmVjdGlvbiB9KSAvLyB5ZXMsIFwic2xpZFwiXG4gICAgaWYgKCQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ3NsaWRlJykpIHtcbiAgICAgICRuZXh0LmFkZENsYXNzKHR5cGUpXG4gICAgICAkbmV4dFswXS5vZmZzZXRXaWR0aCAvLyBmb3JjZSByZWZsb3dcbiAgICAgICRhY3RpdmUuYWRkQ2xhc3MoZGlyZWN0aW9uKVxuICAgICAgJG5leHQuYWRkQ2xhc3MoZGlyZWN0aW9uKVxuICAgICAgJGFjdGl2ZVxuICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJG5leHQucmVtb3ZlQ2xhc3MoW3R5cGUsIGRpcmVjdGlvbl0uam9pbignICcpKS5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgICAgICAkYWN0aXZlLnJlbW92ZUNsYXNzKFsnYWN0aXZlJywgZGlyZWN0aW9uXS5qb2luKCcgJykpXG4gICAgICAgICAgdGhhdC5zbGlkaW5nID0gZmFsc2VcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoYXQuJGVsZW1lbnQudHJpZ2dlcihzbGlkRXZlbnQpXG4gICAgICAgICAgfSwgMClcbiAgICAgICAgfSlcbiAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKENhcm91c2VsLlRSQU5TSVRJT05fRFVSQVRJT04pXG4gICAgfSBlbHNlIHtcbiAgICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAkbmV4dC5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlXG4gICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc2xpZEV2ZW50KVxuICAgIH1cblxuICAgIGlzQ3ljbGluZyAmJiB0aGlzLmN5Y2xlKClcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuXG4gIC8vIENBUk9VU0VMIFBMVUdJTiBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG4gICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2JzLmNhcm91c2VsJylcbiAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sIENhcm91c2VsLkRFRkFVTFRTLCAkdGhpcy5kYXRhKCksIHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uKVxuICAgICAgdmFyIGFjdGlvbiAgPSB0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnID8gb3B0aW9uIDogb3B0aW9ucy5zbGlkZVxuXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmNhcm91c2VsJywgKGRhdGEgPSBuZXcgQ2Fyb3VzZWwodGhpcywgb3B0aW9ucykpKVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ251bWJlcicpIGRhdGEudG8ob3B0aW9uKVxuICAgICAgZWxzZSBpZiAoYWN0aW9uKSBkYXRhW2FjdGlvbl0oKVxuICAgICAgZWxzZSBpZiAob3B0aW9ucy5pbnRlcnZhbCkgZGF0YS5wYXVzZSgpLmN5Y2xlKClcbiAgICB9KVxuICB9XG5cbiAgdmFyIG9sZCA9ICQuZm4uY2Fyb3VzZWxcblxuICAkLmZuLmNhcm91c2VsICAgICAgICAgICAgID0gUGx1Z2luXG4gICQuZm4uY2Fyb3VzZWwuQ29uc3RydWN0b3IgPSBDYXJvdXNlbFxuXG5cbiAgLy8gQ0FST1VTRUwgTk8gQ09ORkxJQ1RcbiAgLy8gPT09PT09PT09PT09PT09PT09PT1cblxuICAkLmZuLmNhcm91c2VsLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbi5jYXJvdXNlbCA9IG9sZFxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuXG4gIC8vIENBUk9VU0VMIERBVEEtQVBJXG4gIC8vID09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGhyZWZcbiAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcbiAgICB2YXIgJHRhcmdldCA9ICQoJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKSB8fCAoaHJlZiA9ICR0aGlzLmF0dHIoJ2hyZWYnKSkgJiYgaHJlZi5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLCAnJykpIC8vIHN0cmlwIGZvciBpZTdcbiAgICBpZiAoISR0YXJnZXQuaGFzQ2xhc3MoJ2Nhcm91c2VsJykpIHJldHVyblxuICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sICR0YXJnZXQuZGF0YSgpLCAkdGhpcy5kYXRhKCkpXG4gICAgdmFyIHNsaWRlSW5kZXggPSAkdGhpcy5hdHRyKCdkYXRhLXNsaWRlLXRvJylcbiAgICBpZiAoc2xpZGVJbmRleCkgb3B0aW9ucy5pbnRlcnZhbCA9IGZhbHNlXG5cbiAgICBQbHVnaW4uY2FsbCgkdGFyZ2V0LCBvcHRpb25zKVxuXG4gICAgaWYgKHNsaWRlSW5kZXgpIHtcbiAgICAgICR0YXJnZXQuZGF0YSgnYnMuY2Fyb3VzZWwnKS50byhzbGlkZUluZGV4KVxuICAgIH1cblxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICB9XG5cbiAgJChkb2N1bWVudClcbiAgICAub24oJ2NsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpJywgJ1tkYXRhLXNsaWRlXScsIGNsaWNrSGFuZGxlcilcbiAgICAub24oJ2NsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpJywgJ1tkYXRhLXNsaWRlLXRvXScsIGNsaWNrSGFuZGxlcilcblxuICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgJCgnW2RhdGEtcmlkZT1cImNhcm91c2VsXCJdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJGNhcm91c2VsID0gJCh0aGlzKVxuICAgICAgUGx1Z2luLmNhbGwoJGNhcm91c2VsLCAkY2Fyb3VzZWwuZGF0YSgpKVxuICAgIH0pXG4gIH0pXG5cbn0oalF1ZXJ5KTtcblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBCb290c3RyYXA6IGNvbGxhcHNlLmpzIHYzLjMuNlxuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jY29sbGFwc2VcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IDIwMTEtMjAxNSBUd2l0dGVyLCBJbmMuXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cblxuK2Z1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBDT0xMQVBTRSBQVUJMSUMgQ0xBU1MgREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBDb2xsYXBzZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy4kZWxlbWVudCAgICAgID0gJChlbGVtZW50KVxuICAgIHRoaXMub3B0aW9ucyAgICAgICA9ICQuZXh0ZW5kKHt9LCBDb2xsYXBzZS5ERUZBVUxUUywgb3B0aW9ucylcbiAgICB0aGlzLiR0cmlnZ2VyICAgICAgPSAkKCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtocmVmPVwiIycgKyBlbGVtZW50LmlkICsgJ1wiXSwnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXRhcmdldD1cIiMnICsgZWxlbWVudC5pZCArICdcIl0nKVxuICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IG51bGxcblxuICAgIGlmICh0aGlzLm9wdGlvbnMucGFyZW50KSB7XG4gICAgICB0aGlzLiRwYXJlbnQgPSB0aGlzLmdldFBhcmVudCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuJGVsZW1lbnQsIHRoaXMuJHRyaWdnZXIpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy50b2dnbGUpIHRoaXMudG9nZ2xlKClcbiAgfVxuXG4gIENvbGxhcHNlLlZFUlNJT04gID0gJzMuMy42J1xuXG4gIENvbGxhcHNlLlRSQU5TSVRJT05fRFVSQVRJT04gPSAzNTBcblxuICBDb2xsYXBzZS5ERUZBVUxUUyA9IHtcbiAgICB0b2dnbGU6IHRydWVcbiAgfVxuXG4gIENvbGxhcHNlLnByb3RvdHlwZS5kaW1lbnNpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGhhc1dpZHRoID0gdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnd2lkdGgnKVxuICAgIHJldHVybiBoYXNXaWR0aCA/ICd3aWR0aCcgOiAnaGVpZ2h0J1xuICB9XG5cbiAgQ29sbGFwc2UucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMudHJhbnNpdGlvbmluZyB8fCB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdpbicpKSByZXR1cm5cblxuICAgIHZhciBhY3RpdmVzRGF0YVxuICAgIHZhciBhY3RpdmVzID0gdGhpcy4kcGFyZW50ICYmIHRoaXMuJHBhcmVudC5jaGlsZHJlbignLnBhbmVsJykuY2hpbGRyZW4oJy5pbiwgLmNvbGxhcHNpbmcnKVxuXG4gICAgaWYgKGFjdGl2ZXMgJiYgYWN0aXZlcy5sZW5ndGgpIHtcbiAgICAgIGFjdGl2ZXNEYXRhID0gYWN0aXZlcy5kYXRhKCdicy5jb2xsYXBzZScpXG4gICAgICBpZiAoYWN0aXZlc0RhdGEgJiYgYWN0aXZlc0RhdGEudHJhbnNpdGlvbmluZykgcmV0dXJuXG4gICAgfVxuXG4gICAgdmFyIHN0YXJ0RXZlbnQgPSAkLkV2ZW50KCdzaG93LmJzLmNvbGxhcHNlJylcbiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc3RhcnRFdmVudClcbiAgICBpZiAoc3RhcnRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuXG5cbiAgICBpZiAoYWN0aXZlcyAmJiBhY3RpdmVzLmxlbmd0aCkge1xuICAgICAgUGx1Z2luLmNhbGwoYWN0aXZlcywgJ2hpZGUnKVxuICAgICAgYWN0aXZlc0RhdGEgfHwgYWN0aXZlcy5kYXRhKCdicy5jb2xsYXBzZScsIG51bGwpXG4gICAgfVxuXG4gICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZGltZW5zaW9uKClcblxuICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgIC5yZW1vdmVDbGFzcygnY29sbGFwc2UnKVxuICAgICAgLmFkZENsYXNzKCdjb2xsYXBzaW5nJylbZGltZW5zaW9uXSgwKVxuICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKVxuXG4gICAgdGhpcy4kdHJpZ2dlclxuICAgICAgLnJlbW92ZUNsYXNzKCdjb2xsYXBzZWQnKVxuICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKVxuXG4gICAgdGhpcy50cmFuc2l0aW9uaW5nID0gMVxuXG4gICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kZWxlbWVudFxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNpbmcnKVxuICAgICAgICAuYWRkQ2xhc3MoJ2NvbGxhcHNlIGluJylbZGltZW5zaW9uXSgnJylcbiAgICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IDBcbiAgICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgICAgLnRyaWdnZXIoJ3Nob3duLmJzLmNvbGxhcHNlJylcbiAgICB9XG5cbiAgICBpZiAoISQuc3VwcG9ydC50cmFuc2l0aW9uKSByZXR1cm4gY29tcGxldGUuY2FsbCh0aGlzKVxuXG4gICAgdmFyIHNjcm9sbFNpemUgPSAkLmNhbWVsQ2FzZShbJ3Njcm9sbCcsIGRpbWVuc2lvbl0uam9pbignLScpKVxuXG4gICAgdGhpcy4kZWxlbWVudFxuICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgJC5wcm94eShjb21wbGV0ZSwgdGhpcykpXG4gICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoQ29sbGFwc2UuVFJBTlNJVElPTl9EVVJBVElPTilbZGltZW5zaW9uXSh0aGlzLiRlbGVtZW50WzBdW3Njcm9sbFNpemVdKVxuICB9XG5cbiAgQ29sbGFwc2UucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMudHJhbnNpdGlvbmluZyB8fCAhdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnaW4nKSkgcmV0dXJuXG5cbiAgICB2YXIgc3RhcnRFdmVudCA9ICQuRXZlbnQoJ2hpZGUuYnMuY29sbGFwc2UnKVxuICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihzdGFydEV2ZW50KVxuICAgIGlmIChzdGFydEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLmRpbWVuc2lvbigpXG5cbiAgICB0aGlzLiRlbGVtZW50W2RpbWVuc2lvbl0odGhpcy4kZWxlbWVudFtkaW1lbnNpb25dKCkpWzBdLm9mZnNldEhlaWdodFxuXG4gICAgdGhpcy4kZWxlbWVudFxuICAgICAgLmFkZENsYXNzKCdjb2xsYXBzaW5nJylcbiAgICAgIC5yZW1vdmVDbGFzcygnY29sbGFwc2UgaW4nKVxuICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSlcblxuICAgIHRoaXMuJHRyaWdnZXJcbiAgICAgIC5hZGRDbGFzcygnY29sbGFwc2VkJylcbiAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpXG5cbiAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAxXG5cbiAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAwXG4gICAgICB0aGlzLiRlbGVtZW50XG4gICAgICAgIC5yZW1vdmVDbGFzcygnY29sbGFwc2luZycpXG4gICAgICAgIC5hZGRDbGFzcygnY29sbGFwc2UnKVxuICAgICAgICAudHJpZ2dlcignaGlkZGVuLmJzLmNvbGxhcHNlJylcbiAgICB9XG5cbiAgICBpZiAoISQuc3VwcG9ydC50cmFuc2l0aW9uKSByZXR1cm4gY29tcGxldGUuY2FsbCh0aGlzKVxuXG4gICAgdGhpcy4kZWxlbWVudFxuICAgICAgW2RpbWVuc2lvbl0oMClcbiAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsICQucHJveHkoY29tcGxldGUsIHRoaXMpKVxuICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKENvbGxhcHNlLlRSQU5TSVRJT05fRFVSQVRJT04pXG4gIH1cblxuICBDb2xsYXBzZS5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXNbdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnaW4nKSA/ICdoaWRlJyA6ICdzaG93J10oKVxuICB9XG5cbiAgQ29sbGFwc2UucHJvdG90eXBlLmdldFBhcmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJCh0aGlzLm9wdGlvbnMucGFyZW50KVxuICAgICAgLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtcGFyZW50PVwiJyArIHRoaXMub3B0aW9ucy5wYXJlbnQgKyAnXCJdJylcbiAgICAgIC5lYWNoKCQucHJveHkoZnVuY3Rpb24gKGksIGVsZW1lbnQpIHtcbiAgICAgICAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KVxuICAgICAgICB0aGlzLmFkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhnZXRUYXJnZXRGcm9tVHJpZ2dlcigkZWxlbWVudCksICRlbGVtZW50KVxuICAgICAgfSwgdGhpcykpXG4gICAgICAuZW5kKClcbiAgfVxuXG4gIENvbGxhcHNlLnByb3RvdHlwZS5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MgPSBmdW5jdGlvbiAoJGVsZW1lbnQsICR0cmlnZ2VyKSB7XG4gICAgdmFyIGlzT3BlbiA9ICRlbGVtZW50Lmhhc0NsYXNzKCdpbicpXG5cbiAgICAkZWxlbWVudC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgaXNPcGVuKVxuICAgICR0cmlnZ2VyXG4gICAgICAudG9nZ2xlQ2xhc3MoJ2NvbGxhcHNlZCcsICFpc09wZW4pXG4gICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIGlzT3BlbilcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFRhcmdldEZyb21UcmlnZ2VyKCR0cmlnZ2VyKSB7XG4gICAgdmFyIGhyZWZcbiAgICB2YXIgdGFyZ2V0ID0gJHRyaWdnZXIuYXR0cignZGF0YS10YXJnZXQnKVxuICAgICAgfHwgKGhyZWYgPSAkdHJpZ2dlci5hdHRyKCdocmVmJykpICYmIGhyZWYucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLywgJycpIC8vIHN0cmlwIGZvciBpZTdcblxuICAgIHJldHVybiAkKHRhcmdldClcbiAgfVxuXG5cbiAgLy8gQ09MTEFQU0UgUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcbiAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuY29sbGFwc2UnKVxuICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQ29sbGFwc2UuREVGQVVMVFMsICR0aGlzLmRhdGEoKSwgdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb24pXG5cbiAgICAgIGlmICghZGF0YSAmJiBvcHRpb25zLnRvZ2dsZSAmJiAvc2hvd3xoaWRlLy50ZXN0KG9wdGlvbikpIG9wdGlvbnMudG9nZ2xlID0gZmFsc2VcbiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuY29sbGFwc2UnLCAoZGF0YSA9IG5ldyBDb2xsYXBzZSh0aGlzLCBvcHRpb25zKSkpXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKClcbiAgICB9KVxuICB9XG5cbiAgdmFyIG9sZCA9ICQuZm4uY29sbGFwc2VcblxuICAkLmZuLmNvbGxhcHNlICAgICAgICAgICAgID0gUGx1Z2luXG4gICQuZm4uY29sbGFwc2UuQ29uc3RydWN0b3IgPSBDb2xsYXBzZVxuXG5cbiAgLy8gQ09MTEFQU0UgTk8gQ09ORkxJQ1RcbiAgLy8gPT09PT09PT09PT09PT09PT09PT1cblxuICAkLmZuLmNvbGxhcHNlLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbi5jb2xsYXBzZSA9IG9sZFxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuXG4gIC8vIENPTExBUFNFIERBVEEtQVBJXG4gIC8vID09PT09PT09PT09PT09PT09XG5cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrLmJzLmNvbGxhcHNlLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcblxuICAgIGlmICghJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKSkgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICB2YXIgJHRhcmdldCA9IGdldFRhcmdldEZyb21UcmlnZ2VyKCR0aGlzKVxuICAgIHZhciBkYXRhICAgID0gJHRhcmdldC5kYXRhKCdicy5jb2xsYXBzZScpXG4gICAgdmFyIG9wdGlvbiAgPSBkYXRhID8gJ3RvZ2dsZScgOiAkdGhpcy5kYXRhKClcblxuICAgIFBsdWdpbi5jYWxsKCR0YXJnZXQsIG9wdGlvbilcbiAgfSlcblxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogZHJvcGRvd24uanMgdjMuMy42XG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNkcm9wZG93bnNcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IDIwMTEtMjAxNSBUd2l0dGVyLCBJbmMuXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cblxuK2Z1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBEUk9QRE9XTiBDTEFTUyBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgYmFja2Ryb3AgPSAnLmRyb3Bkb3duLWJhY2tkcm9wJ1xuICB2YXIgdG9nZ2xlICAgPSAnW2RhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIl0nXG4gIHZhciBEcm9wZG93biA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgJChlbGVtZW50KS5vbignY2xpY2suYnMuZHJvcGRvd24nLCB0aGlzLnRvZ2dsZSlcbiAgfVxuXG4gIERyb3Bkb3duLlZFUlNJT04gPSAnMy4zLjYnXG5cbiAgZnVuY3Rpb24gZ2V0UGFyZW50KCR0aGlzKSB7XG4gICAgdmFyIHNlbGVjdG9yID0gJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKVxuXG4gICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgc2VsZWN0b3IgPSAkdGhpcy5hdHRyKCdocmVmJylcbiAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgJiYgLyNbQS1aYS16XS8udGVzdChzZWxlY3RvcikgJiYgc2VsZWN0b3IucmVwbGFjZSgvLiooPz0jW15cXHNdKiQpLywgJycpIC8vIHN0cmlwIGZvciBpZTdcbiAgICB9XG5cbiAgICB2YXIgJHBhcmVudCA9IHNlbGVjdG9yICYmICQoc2VsZWN0b3IpXG5cbiAgICByZXR1cm4gJHBhcmVudCAmJiAkcGFyZW50Lmxlbmd0aCA/ICRwYXJlbnQgOiAkdGhpcy5wYXJlbnQoKVxuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJNZW51cyhlKSB7XG4gICAgaWYgKGUgJiYgZS53aGljaCA9PT0gMykgcmV0dXJuXG4gICAgJChiYWNrZHJvcCkucmVtb3ZlKClcbiAgICAkKHRvZ2dsZSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgICAgICAgICA9ICQodGhpcylcbiAgICAgIHZhciAkcGFyZW50ICAgICAgID0gZ2V0UGFyZW50KCR0aGlzKVxuICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSB7IHJlbGF0ZWRUYXJnZXQ6IHRoaXMgfVxuXG4gICAgICBpZiAoISRwYXJlbnQuaGFzQ2xhc3MoJ29wZW4nKSkgcmV0dXJuXG5cbiAgICAgIGlmIChlICYmIGUudHlwZSA9PSAnY2xpY2snICYmIC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZS50YXJnZXQudGFnTmFtZSkgJiYgJC5jb250YWlucygkcGFyZW50WzBdLCBlLnRhcmdldCkpIHJldHVyblxuXG4gICAgICAkcGFyZW50LnRyaWdnZXIoZSA9ICQuRXZlbnQoJ2hpZGUuYnMuZHJvcGRvd24nLCByZWxhdGVkVGFyZ2V0KSlcblxuICAgICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuXG4gICAgICAkdGhpcy5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJylcbiAgICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoJ29wZW4nKS50cmlnZ2VyKCQuRXZlbnQoJ2hpZGRlbi5icy5kcm9wZG93bicsIHJlbGF0ZWRUYXJnZXQpKVxuICAgIH0pXG4gIH1cblxuICBEcm9wZG93bi5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpXG5cbiAgICBpZiAoJHRoaXMuaXMoJy5kaXNhYmxlZCwgOmRpc2FibGVkJykpIHJldHVyblxuXG4gICAgdmFyICRwYXJlbnQgID0gZ2V0UGFyZW50KCR0aGlzKVxuICAgIHZhciBpc0FjdGl2ZSA9ICRwYXJlbnQuaGFzQ2xhc3MoJ29wZW4nKVxuXG4gICAgY2xlYXJNZW51cygpXG5cbiAgICBpZiAoIWlzQWN0aXZlKSB7XG4gICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmICEkcGFyZW50LmNsb3Nlc3QoJy5uYXZiYXItbmF2JykubGVuZ3RoKSB7XG4gICAgICAgIC8vIGlmIG1vYmlsZSB3ZSB1c2UgYSBiYWNrZHJvcCBiZWNhdXNlIGNsaWNrIGV2ZW50cyBkb24ndCBkZWxlZ2F0ZVxuICAgICAgICAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKVxuICAgICAgICAgIC5hZGRDbGFzcygnZHJvcGRvd24tYmFja2Ryb3AnKVxuICAgICAgICAgIC5pbnNlcnRBZnRlcigkKHRoaXMpKVxuICAgICAgICAgIC5vbignY2xpY2snLCBjbGVhck1lbnVzKVxuICAgICAgfVxuXG4gICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHsgcmVsYXRlZFRhcmdldDogdGhpcyB9XG4gICAgICAkcGFyZW50LnRyaWdnZXIoZSA9ICQuRXZlbnQoJ3Nob3cuYnMuZHJvcGRvd24nLCByZWxhdGVkVGFyZ2V0KSlcblxuICAgICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuXG4gICAgICAkdGhpc1xuICAgICAgICAudHJpZ2dlcignZm9jdXMnKVxuICAgICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJylcblxuICAgICAgJHBhcmVudFxuICAgICAgICAudG9nZ2xlQ2xhc3MoJ29wZW4nKVxuICAgICAgICAudHJpZ2dlcigkLkV2ZW50KCdzaG93bi5icy5kcm9wZG93bicsIHJlbGF0ZWRUYXJnZXQpKVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgRHJvcGRvd24ucHJvdG90eXBlLmtleWRvd24gPSBmdW5jdGlvbiAoZSkge1xuICAgIGlmICghLygzOHw0MHwyN3wzMikvLnRlc3QoZS53aGljaCkgfHwgL2lucHV0fHRleHRhcmVhL2kudGVzdChlLnRhcmdldC50YWdOYW1lKSkgcmV0dXJuXG5cbiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpXG5cbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBpZiAoJHRoaXMuaXMoJy5kaXNhYmxlZCwgOmRpc2FibGVkJykpIHJldHVyblxuXG4gICAgdmFyICRwYXJlbnQgID0gZ2V0UGFyZW50KCR0aGlzKVxuICAgIHZhciBpc0FjdGl2ZSA9ICRwYXJlbnQuaGFzQ2xhc3MoJ29wZW4nKVxuXG4gICAgaWYgKCFpc0FjdGl2ZSAmJiBlLndoaWNoICE9IDI3IHx8IGlzQWN0aXZlICYmIGUud2hpY2ggPT0gMjcpIHtcbiAgICAgIGlmIChlLndoaWNoID09IDI3KSAkcGFyZW50LmZpbmQodG9nZ2xlKS50cmlnZ2VyKCdmb2N1cycpXG4gICAgICByZXR1cm4gJHRoaXMudHJpZ2dlcignY2xpY2snKVxuICAgIH1cblxuICAgIHZhciBkZXNjID0gJyBsaTpub3QoLmRpc2FibGVkKTp2aXNpYmxlIGEnXG4gICAgdmFyICRpdGVtcyA9ICRwYXJlbnQuZmluZCgnLmRyb3Bkb3duLW1lbnUnICsgZGVzYylcblxuICAgIGlmICghJGl0ZW1zLmxlbmd0aCkgcmV0dXJuXG5cbiAgICB2YXIgaW5kZXggPSAkaXRlbXMuaW5kZXgoZS50YXJnZXQpXG5cbiAgICBpZiAoZS53aGljaCA9PSAzOCAmJiBpbmRleCA+IDApICAgICAgICAgICAgICAgICBpbmRleC0tICAgICAgICAgLy8gdXBcbiAgICBpZiAoZS53aGljaCA9PSA0MCAmJiBpbmRleCA8ICRpdGVtcy5sZW5ndGggLSAxKSBpbmRleCsrICAgICAgICAgLy8gZG93blxuICAgIGlmICghfmluZGV4KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gMFxuXG4gICAgJGl0ZW1zLmVxKGluZGV4KS50cmlnZ2VyKCdmb2N1cycpXG4gIH1cblxuXG4gIC8vIERST1BET1dOIFBMVUdJTiBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKVxuICAgICAgdmFyIGRhdGEgID0gJHRoaXMuZGF0YSgnYnMuZHJvcGRvd24nKVxuXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmRyb3Bkb3duJywgKGRhdGEgPSBuZXcgRHJvcGRvd24odGhpcykpKVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXS5jYWxsKCR0aGlzKVxuICAgIH0pXG4gIH1cblxuICB2YXIgb2xkID0gJC5mbi5kcm9wZG93blxuXG4gICQuZm4uZHJvcGRvd24gICAgICAgICAgICAgPSBQbHVnaW5cbiAgJC5mbi5kcm9wZG93bi5Db25zdHJ1Y3RvciA9IERyb3Bkb3duXG5cblxuICAvLyBEUk9QRE9XTiBOTyBDT05GTElDVFxuICAvLyA9PT09PT09PT09PT09PT09PT09PVxuXG4gICQuZm4uZHJvcGRvd24ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuLmRyb3Bkb3duID0gb2xkXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG5cbiAgLy8gQVBQTFkgVE8gU1RBTkRBUkQgRFJPUERPV04gRUxFTUVOVFNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAkKGRvY3VtZW50KVxuICAgIC5vbignY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGknLCBjbGVhck1lbnVzKVxuICAgIC5vbignY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGknLCAnLmRyb3Bkb3duIGZvcm0nLCBmdW5jdGlvbiAoZSkgeyBlLnN0b3BQcm9wYWdhdGlvbigpIH0pXG4gICAgLm9uKCdjbGljay5icy5kcm9wZG93bi5kYXRhLWFwaScsIHRvZ2dsZSwgRHJvcGRvd24ucHJvdG90eXBlLnRvZ2dsZSlcbiAgICAub24oJ2tleWRvd24uYnMuZHJvcGRvd24uZGF0YS1hcGknLCB0b2dnbGUsIERyb3Bkb3duLnByb3RvdHlwZS5rZXlkb3duKVxuICAgIC5vbigna2V5ZG93bi5icy5kcm9wZG93bi5kYXRhLWFwaScsICcuZHJvcGRvd24tbWVudScsIERyb3Bkb3duLnByb3RvdHlwZS5rZXlkb3duKVxuXG59KGpRdWVyeSk7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQm9vdHN0cmFwOiBtb2RhbC5qcyB2My4zLjZcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI21vZGFsc1xuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE1IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuXG4rZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIE1PREFMIENMQVNTIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBNb2RhbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zICAgICAgICAgICAgID0gb3B0aW9uc1xuICAgIHRoaXMuJGJvZHkgICAgICAgICAgICAgICA9ICQoZG9jdW1lbnQuYm9keSlcbiAgICB0aGlzLiRlbGVtZW50ICAgICAgICAgICAgPSAkKGVsZW1lbnQpXG4gICAgdGhpcy4kZGlhbG9nICAgICAgICAgICAgID0gdGhpcy4kZWxlbWVudC5maW5kKCcubW9kYWwtZGlhbG9nJylcbiAgICB0aGlzLiRiYWNrZHJvcCAgICAgICAgICAgPSBudWxsXG4gICAgdGhpcy5pc1Nob3duICAgICAgICAgICAgID0gbnVsbFxuICAgIHRoaXMub3JpZ2luYWxCb2R5UGFkICAgICA9IG51bGxcbiAgICB0aGlzLnNjcm9sbGJhcldpZHRoICAgICAgPSAwXG4gICAgdGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrID0gZmFsc2VcblxuICAgIGlmICh0aGlzLm9wdGlvbnMucmVtb3RlKSB7XG4gICAgICB0aGlzLiRlbGVtZW50XG4gICAgICAgIC5maW5kKCcubW9kYWwtY29udGVudCcpXG4gICAgICAgIC5sb2FkKHRoaXMub3B0aW9ucy5yZW1vdGUsICQucHJveHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcignbG9hZGVkLmJzLm1vZGFsJylcbiAgICAgICAgfSwgdGhpcykpXG4gICAgfVxuICB9XG5cbiAgTW9kYWwuVkVSU0lPTiAgPSAnMy4zLjYnXG5cbiAgTW9kYWwuVFJBTlNJVElPTl9EVVJBVElPTiA9IDMwMFxuICBNb2RhbC5CQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwXG5cbiAgTW9kYWwuREVGQVVMVFMgPSB7XG4gICAgYmFja2Ryb3A6IHRydWUsXG4gICAga2V5Ym9hcmQ6IHRydWUsXG4gICAgc2hvdzogdHJ1ZVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIChfcmVsYXRlZFRhcmdldCkge1xuICAgIHJldHVybiB0aGlzLmlzU2hvd24gPyB0aGlzLmhpZGUoKSA6IHRoaXMuc2hvdyhfcmVsYXRlZFRhcmdldClcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKF9yZWxhdGVkVGFyZ2V0KSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgdmFyIGUgICAgPSAkLkV2ZW50KCdzaG93LmJzLm1vZGFsJywgeyByZWxhdGVkVGFyZ2V0OiBfcmVsYXRlZFRhcmdldCB9KVxuXG4gICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpXG5cbiAgICBpZiAodGhpcy5pc1Nob3duIHx8IGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuXG4gICAgdGhpcy5pc1Nob3duID0gdHJ1ZVxuXG4gICAgdGhpcy5jaGVja1Njcm9sbGJhcigpXG4gICAgdGhpcy5zZXRTY3JvbGxiYXIoKVxuICAgIHRoaXMuJGJvZHkuYWRkQ2xhc3MoJ21vZGFsLW9wZW4nKVxuXG4gICAgdGhpcy5lc2NhcGUoKVxuICAgIHRoaXMucmVzaXplKClcblxuICAgIHRoaXMuJGVsZW1lbnQub24oJ2NsaWNrLmRpc21pc3MuYnMubW9kYWwnLCAnW2RhdGEtZGlzbWlzcz1cIm1vZGFsXCJdJywgJC5wcm94eSh0aGlzLmhpZGUsIHRoaXMpKVxuXG4gICAgdGhpcy4kZGlhbG9nLm9uKCdtb3VzZWRvd24uZGlzbWlzcy5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoYXQuJGVsZW1lbnQub25lKCdtb3VzZXVwLmRpc21pc3MuYnMubW9kYWwnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoJChlLnRhcmdldCkuaXModGhhdC4kZWxlbWVudCkpIHRoYXQuaWdub3JlQmFja2Ryb3BDbGljayA9IHRydWVcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHRyYW5zaXRpb24gPSAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiB0aGF0LiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJylcblxuICAgICAgaWYgKCF0aGF0LiRlbGVtZW50LnBhcmVudCgpLmxlbmd0aCkge1xuICAgICAgICB0aGF0LiRlbGVtZW50LmFwcGVuZFRvKHRoYXQuJGJvZHkpIC8vIGRvbid0IG1vdmUgbW9kYWxzIGRvbSBwb3NpdGlvblxuICAgICAgfVxuXG4gICAgICB0aGF0LiRlbGVtZW50XG4gICAgICAgIC5zaG93KClcbiAgICAgICAgLnNjcm9sbFRvcCgwKVxuXG4gICAgICB0aGF0LmFkanVzdERpYWxvZygpXG5cbiAgICAgIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICAgIHRoYXQuJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGggLy8gZm9yY2UgcmVmbG93XG4gICAgICB9XG5cbiAgICAgIHRoYXQuJGVsZW1lbnQuYWRkQ2xhc3MoJ2luJylcblxuICAgICAgdGhhdC5lbmZvcmNlRm9jdXMoKVxuXG4gICAgICB2YXIgZSA9ICQuRXZlbnQoJ3Nob3duLmJzLm1vZGFsJywgeyByZWxhdGVkVGFyZ2V0OiBfcmVsYXRlZFRhcmdldCB9KVxuXG4gICAgICB0cmFuc2l0aW9uID9cbiAgICAgICAgdGhhdC4kZGlhbG9nIC8vIHdhaXQgZm9yIG1vZGFsIHRvIHNsaWRlIGluXG4gICAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdmb2N1cycpLnRyaWdnZXIoZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChNb2RhbC5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6XG4gICAgICAgIHRoYXQuJGVsZW1lbnQudHJpZ2dlcignZm9jdXMnKS50cmlnZ2VyKGUpXG4gICAgfSlcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZSkgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBlID0gJC5FdmVudCgnaGlkZS5icy5tb2RhbCcpXG5cbiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSlcblxuICAgIGlmICghdGhpcy5pc1Nob3duIHx8IGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuXG4gICAgdGhpcy5pc1Nob3duID0gZmFsc2VcblxuICAgIHRoaXMuZXNjYXBlKClcbiAgICB0aGlzLnJlc2l6ZSgpXG5cbiAgICAkKGRvY3VtZW50KS5vZmYoJ2ZvY3VzaW4uYnMubW9kYWwnKVxuXG4gICAgdGhpcy4kZWxlbWVudFxuICAgICAgLnJlbW92ZUNsYXNzKCdpbicpXG4gICAgICAub2ZmKCdjbGljay5kaXNtaXNzLmJzLm1vZGFsJylcbiAgICAgIC5vZmYoJ21vdXNldXAuZGlzbWlzcy5icy5tb2RhbCcpXG5cbiAgICB0aGlzLiRkaWFsb2cub2ZmKCdtb3VzZWRvd24uZGlzbWlzcy5icy5tb2RhbCcpXG5cbiAgICAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJykgP1xuICAgICAgdGhpcy4kZWxlbWVudFxuICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCAkLnByb3h5KHRoaXMuaGlkZU1vZGFsLCB0aGlzKSlcbiAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKE1vZGFsLlRSQU5TSVRJT05fRFVSQVRJT04pIDpcbiAgICAgIHRoaXMuaGlkZU1vZGFsKClcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5lbmZvcmNlRm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgJChkb2N1bWVudClcbiAgICAgIC5vZmYoJ2ZvY3VzaW4uYnMubW9kYWwnKSAvLyBndWFyZCBhZ2FpbnN0IGluZmluaXRlIGZvY3VzIGxvb3BcbiAgICAgIC5vbignZm9jdXNpbi5icy5tb2RhbCcsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuJGVsZW1lbnRbMF0gIT09IGUudGFyZ2V0ICYmICF0aGlzLiRlbGVtZW50LmhhcyhlLnRhcmdldCkubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKCdmb2N1cycpXG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpKVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLmVzY2FwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5pc1Nob3duICYmIHRoaXMub3B0aW9ucy5rZXlib2FyZCkge1xuICAgICAgdGhpcy4kZWxlbWVudC5vbigna2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsJywgJC5wcm94eShmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLndoaWNoID09IDI3ICYmIHRoaXMuaGlkZSgpXG4gICAgICB9LCB0aGlzKSlcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzU2hvd24pIHtcbiAgICAgIHRoaXMuJGVsZW1lbnQub2ZmKCdrZXlkb3duLmRpc21pc3MuYnMubW9kYWwnKVxuICAgIH1cbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuaXNTaG93bikge1xuICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUuYnMubW9kYWwnLCAkLnByb3h5KHRoaXMuaGFuZGxlVXBkYXRlLCB0aGlzKSlcbiAgICB9IGVsc2Uge1xuICAgICAgJCh3aW5kb3cpLm9mZigncmVzaXplLmJzLm1vZGFsJylcbiAgICB9XG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuaGlkZU1vZGFsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0aGF0ID0gdGhpc1xuICAgIHRoaXMuJGVsZW1lbnQuaGlkZSgpXG4gICAgdGhpcy5iYWNrZHJvcChmdW5jdGlvbiAoKSB7XG4gICAgICB0aGF0LiRib2R5LnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuJylcbiAgICAgIHRoYXQucmVzZXRBZGp1c3RtZW50cygpXG4gICAgICB0aGF0LnJlc2V0U2Nyb2xsYmFyKClcbiAgICAgIHRoYXQuJGVsZW1lbnQudHJpZ2dlcignaGlkZGVuLmJzLm1vZGFsJylcbiAgICB9KVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLnJlbW92ZUJhY2tkcm9wID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJGJhY2tkcm9wICYmIHRoaXMuJGJhY2tkcm9wLnJlbW92ZSgpXG4gICAgdGhpcy4kYmFja2Ryb3AgPSBudWxsXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuYmFja2Ryb3AgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICB2YXIgdGhhdCA9IHRoaXNcbiAgICB2YXIgYW5pbWF0ZSA9IHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2ZhZGUnKSA/ICdmYWRlJyA6ICcnXG5cbiAgICBpZiAodGhpcy5pc1Nob3duICYmIHRoaXMub3B0aW9ucy5iYWNrZHJvcCkge1xuICAgICAgdmFyIGRvQW5pbWF0ZSA9ICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIGFuaW1hdGVcblxuICAgICAgdGhpcy4kYmFja2Ryb3AgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKVxuICAgICAgICAuYWRkQ2xhc3MoJ21vZGFsLWJhY2tkcm9wICcgKyBhbmltYXRlKVxuICAgICAgICAuYXBwZW5kVG8odGhpcy4kYm9keSlcblxuICAgICAgdGhpcy4kZWxlbWVudC5vbignY2xpY2suZGlzbWlzcy5icy5tb2RhbCcsICQucHJveHkoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaWdub3JlQmFja2Ryb3BDbGljaykge1xuICAgICAgICAgIHRoaXMuaWdub3JlQmFja2Ryb3BDbGljayA9IGZhbHNlXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUudGFyZ2V0ICE9PSBlLmN1cnJlbnRUYXJnZXQpIHJldHVyblxuICAgICAgICB0aGlzLm9wdGlvbnMuYmFja2Ryb3AgPT0gJ3N0YXRpYydcbiAgICAgICAgICA/IHRoaXMuJGVsZW1lbnRbMF0uZm9jdXMoKVxuICAgICAgICAgIDogdGhpcy5oaWRlKClcbiAgICAgIH0sIHRoaXMpKVxuXG4gICAgICBpZiAoZG9BbmltYXRlKSB0aGlzLiRiYWNrZHJvcFswXS5vZmZzZXRXaWR0aCAvLyBmb3JjZSByZWZsb3dcblxuICAgICAgdGhpcy4kYmFja2Ryb3AuYWRkQ2xhc3MoJ2luJylcblxuICAgICAgaWYgKCFjYWxsYmFjaykgcmV0dXJuXG5cbiAgICAgIGRvQW5pbWF0ZSA/XG4gICAgICAgIHRoaXMuJGJhY2tkcm9wXG4gICAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgY2FsbGJhY2spXG4gICAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKE1vZGFsLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pIDpcbiAgICAgICAgY2FsbGJhY2soKVxuXG4gICAgfSBlbHNlIGlmICghdGhpcy5pc1Nob3duICYmIHRoaXMuJGJhY2tkcm9wKSB7XG4gICAgICB0aGlzLiRiYWNrZHJvcC5yZW1vdmVDbGFzcygnaW4nKVxuXG4gICAgICB2YXIgY2FsbGJhY2tSZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoYXQucmVtb3ZlQmFja2Ryb3AoKVxuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpXG4gICAgICB9XG4gICAgICAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJykgP1xuICAgICAgICB0aGlzLiRiYWNrZHJvcFxuICAgICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGNhbGxiYWNrUmVtb3ZlKVxuICAgICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChNb2RhbC5CQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OKSA6XG4gICAgICAgIGNhbGxiYWNrUmVtb3ZlKClcblxuICAgIH0gZWxzZSBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICAvLyB0aGVzZSBmb2xsb3dpbmcgbWV0aG9kcyBhcmUgdXNlZCB0byBoYW5kbGUgb3ZlcmZsb3dpbmcgbW9kYWxzXG5cbiAgTW9kYWwucHJvdG90eXBlLmhhbmRsZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmFkanVzdERpYWxvZygpXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuYWRqdXN0RGlhbG9nID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBtb2RhbElzT3ZlcmZsb3dpbmcgPSB0aGlzLiRlbGVtZW50WzBdLnNjcm9sbEhlaWdodCA+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcblxuICAgIHRoaXMuJGVsZW1lbnQuY3NzKHtcbiAgICAgIHBhZGRpbmdMZWZ0OiAgIXRoaXMuYm9keUlzT3ZlcmZsb3dpbmcgJiYgbW9kYWxJc092ZXJmbG93aW5nID8gdGhpcy5zY3JvbGxiYXJXaWR0aCA6ICcnLFxuICAgICAgcGFkZGluZ1JpZ2h0OiB0aGlzLmJvZHlJc092ZXJmbG93aW5nICYmICFtb2RhbElzT3ZlcmZsb3dpbmcgPyB0aGlzLnNjcm9sbGJhcldpZHRoIDogJydcbiAgICB9KVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLnJlc2V0QWRqdXN0bWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy4kZWxlbWVudC5jc3Moe1xuICAgICAgcGFkZGluZ0xlZnQ6ICcnLFxuICAgICAgcGFkZGluZ1JpZ2h0OiAnJ1xuICAgIH0pXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUuY2hlY2tTY3JvbGxiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZ1bGxXaW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoXG4gICAgaWYgKCFmdWxsV2luZG93V2lkdGgpIHsgLy8gd29ya2Fyb3VuZCBmb3IgbWlzc2luZyB3aW5kb3cuaW5uZXJXaWR0aCBpbiBJRThcbiAgICAgIHZhciBkb2N1bWVudEVsZW1lbnRSZWN0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICBmdWxsV2luZG93V2lkdGggPSBkb2N1bWVudEVsZW1lbnRSZWN0LnJpZ2h0IC0gTWF0aC5hYnMoZG9jdW1lbnRFbGVtZW50UmVjdC5sZWZ0KVxuICAgIH1cbiAgICB0aGlzLmJvZHlJc092ZXJmbG93aW5nID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA8IGZ1bGxXaW5kb3dXaWR0aFxuICAgIHRoaXMuc2Nyb2xsYmFyV2lkdGggPSB0aGlzLm1lYXN1cmVTY3JvbGxiYXIoKVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLnNldFNjcm9sbGJhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYm9keVBhZCA9IHBhcnNlSW50KCh0aGlzLiRib2R5LmNzcygncGFkZGluZy1yaWdodCcpIHx8IDApLCAxMClcbiAgICB0aGlzLm9yaWdpbmFsQm9keVBhZCA9IGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0IHx8ICcnXG4gICAgaWYgKHRoaXMuYm9keUlzT3ZlcmZsb3dpbmcpIHRoaXMuJGJvZHkuY3NzKCdwYWRkaW5nLXJpZ2h0JywgYm9keVBhZCArIHRoaXMuc2Nyb2xsYmFyV2lkdGgpXG4gIH1cblxuICBNb2RhbC5wcm90b3R5cGUucmVzZXRTY3JvbGxiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy4kYm9keS5jc3MoJ3BhZGRpbmctcmlnaHQnLCB0aGlzLm9yaWdpbmFsQm9keVBhZClcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5tZWFzdXJlU2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkgeyAvLyB0aHggd2Fsc2hcbiAgICB2YXIgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gJ21vZGFsLXNjcm9sbGJhci1tZWFzdXJlJ1xuICAgIHRoaXMuJGJvZHkuYXBwZW5kKHNjcm9sbERpdilcbiAgICB2YXIgc2Nyb2xsYmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGhcbiAgICB0aGlzLiRib2R5WzBdLnJlbW92ZUNoaWxkKHNjcm9sbERpdilcbiAgICByZXR1cm4gc2Nyb2xsYmFyV2lkdGhcbiAgfVxuXG5cbiAgLy8gTU9EQUwgUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uLCBfcmVsYXRlZFRhcmdldCkge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG4gICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2JzLm1vZGFsJylcbiAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sIE1vZGFsLkRFRkFVTFRTLCAkdGhpcy5kYXRhKCksIHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uKVxuXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLm1vZGFsJywgKGRhdGEgPSBuZXcgTW9kYWwodGhpcywgb3B0aW9ucykpKVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXShfcmVsYXRlZFRhcmdldClcbiAgICAgIGVsc2UgaWYgKG9wdGlvbnMuc2hvdykgZGF0YS5zaG93KF9yZWxhdGVkVGFyZ2V0KVxuICAgIH0pXG4gIH1cblxuICB2YXIgb2xkID0gJC5mbi5tb2RhbFxuXG4gICQuZm4ubW9kYWwgICAgICAgICAgICAgPSBQbHVnaW5cbiAgJC5mbi5tb2RhbC5Db25zdHJ1Y3RvciA9IE1vZGFsXG5cblxuICAvLyBNT0RBTCBOTyBDT05GTElDVFxuICAvLyA9PT09PT09PT09PT09PT09PVxuXG4gICQuZm4ubW9kYWwubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuLm1vZGFsID0gb2xkXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG5cbiAgLy8gTU9EQUwgREFUQS1BUElcbiAgLy8gPT09PT09PT09PT09PT1cblxuICAkKGRvY3VtZW50KS5vbignY2xpY2suYnMubW9kYWwuZGF0YS1hcGknLCAnW2RhdGEtdG9nZ2xlPVwibW9kYWxcIl0nLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxuICAgIHZhciBocmVmICAgID0gJHRoaXMuYXR0cignaHJlZicpXG4gICAgdmFyICR0YXJnZXQgPSAkKCR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JykgfHwgKGhyZWYgJiYgaHJlZi5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLCAnJykpKSAvLyBzdHJpcCBmb3IgaWU3XG4gICAgdmFyIG9wdGlvbiAgPSAkdGFyZ2V0LmRhdGEoJ2JzLm1vZGFsJykgPyAndG9nZ2xlJyA6ICQuZXh0ZW5kKHsgcmVtb3RlOiAhLyMvLnRlc3QoaHJlZikgJiYgaHJlZiB9LCAkdGFyZ2V0LmRhdGEoKSwgJHRoaXMuZGF0YSgpKVxuXG4gICAgaWYgKCR0aGlzLmlzKCdhJykpIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgJHRhcmdldC5vbmUoJ3Nob3cuYnMubW9kYWwnLCBmdW5jdGlvbiAoc2hvd0V2ZW50KSB7XG4gICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm4gLy8gb25seSByZWdpc3RlciBmb2N1cyByZXN0b3JlciBpZiBtb2RhbCB3aWxsIGFjdHVhbGx5IGdldCBzaG93blxuICAgICAgJHRhcmdldC5vbmUoJ2hpZGRlbi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHRoaXMuaXMoJzp2aXNpYmxlJykgJiYgJHRoaXMudHJpZ2dlcignZm9jdXMnKVxuICAgICAgfSlcbiAgICB9KVxuICAgIFBsdWdpbi5jYWxsKCR0YXJnZXQsIG9wdGlvbiwgdGhpcylcbiAgfSlcblxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogdG9vbHRpcC5qcyB2My4zLjZcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3Rvb2x0aXBcbiAqIEluc3BpcmVkIGJ5IHRoZSBvcmlnaW5hbCBqUXVlcnkudGlwc3kgYnkgSmFzb24gRnJhbWVcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IDIwMTEtMjAxNSBUd2l0dGVyLCBJbmMuXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cblxuK2Z1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBUT09MVElQIFBVQkxJQyBDTEFTUyBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgVG9vbHRpcCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy50eXBlICAgICAgID0gbnVsbFxuICAgIHRoaXMub3B0aW9ucyAgICA9IG51bGxcbiAgICB0aGlzLmVuYWJsZWQgICAgPSBudWxsXG4gICAgdGhpcy50aW1lb3V0ICAgID0gbnVsbFxuICAgIHRoaXMuaG92ZXJTdGF0ZSA9IG51bGxcbiAgICB0aGlzLiRlbGVtZW50ICAgPSBudWxsXG4gICAgdGhpcy5pblN0YXRlICAgID0gbnVsbFxuXG4gICAgdGhpcy5pbml0KCd0b29sdGlwJywgZWxlbWVudCwgb3B0aW9ucylcbiAgfVxuXG4gIFRvb2x0aXAuVkVSU0lPTiAgPSAnMy4zLjYnXG5cbiAgVG9vbHRpcC5UUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwXG5cbiAgVG9vbHRpcC5ERUZBVUxUUyA9IHtcbiAgICBhbmltYXRpb246IHRydWUsXG4gICAgcGxhY2VtZW50OiAndG9wJyxcbiAgICBzZWxlY3RvcjogZmFsc2UsXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwidG9vbHRpcFwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cInRvb2x0aXAtYXJyb3dcIj48L2Rpdj48ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiPjwvZGl2PjwvZGl2PicsXG4gICAgdHJpZ2dlcjogJ2hvdmVyIGZvY3VzJyxcbiAgICB0aXRsZTogJycsXG4gICAgZGVsYXk6IDAsXG4gICAgaHRtbDogZmFsc2UsXG4gICAgY29udGFpbmVyOiBmYWxzZSxcbiAgICB2aWV3cG9ydDoge1xuICAgICAgc2VsZWN0b3I6ICdib2R5JyxcbiAgICAgIHBhZGRpbmc6IDBcbiAgICB9XG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHR5cGUsIGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmVuYWJsZWQgICA9IHRydWVcbiAgICB0aGlzLnR5cGUgICAgICA9IHR5cGVcbiAgICB0aGlzLiRlbGVtZW50ICA9ICQoZWxlbWVudClcbiAgICB0aGlzLm9wdGlvbnMgICA9IHRoaXMuZ2V0T3B0aW9ucyhvcHRpb25zKVxuICAgIHRoaXMuJHZpZXdwb3J0ID0gdGhpcy5vcHRpb25zLnZpZXdwb3J0ICYmICQoJC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy52aWV3cG9ydCkgPyB0aGlzLm9wdGlvbnMudmlld3BvcnQuY2FsbCh0aGlzLCB0aGlzLiRlbGVtZW50KSA6ICh0aGlzLm9wdGlvbnMudmlld3BvcnQuc2VsZWN0b3IgfHwgdGhpcy5vcHRpb25zLnZpZXdwb3J0KSlcbiAgICB0aGlzLmluU3RhdGUgICA9IHsgY2xpY2s6IGZhbHNlLCBob3ZlcjogZmFsc2UsIGZvY3VzOiBmYWxzZSB9XG5cbiAgICBpZiAodGhpcy4kZWxlbWVudFswXSBpbnN0YW5jZW9mIGRvY3VtZW50LmNvbnN0cnVjdG9yICYmICF0aGlzLm9wdGlvbnMuc2VsZWN0b3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYHNlbGVjdG9yYCBvcHRpb24gbXVzdCBiZSBzcGVjaWZpZWQgd2hlbiBpbml0aWFsaXppbmcgJyArIHRoaXMudHlwZSArICcgb24gdGhlIHdpbmRvdy5kb2N1bWVudCBvYmplY3QhJylcbiAgICB9XG5cbiAgICB2YXIgdHJpZ2dlcnMgPSB0aGlzLm9wdGlvbnMudHJpZ2dlci5zcGxpdCgnICcpXG5cbiAgICBmb3IgKHZhciBpID0gdHJpZ2dlcnMubGVuZ3RoOyBpLS07KSB7XG4gICAgICB2YXIgdHJpZ2dlciA9IHRyaWdnZXJzW2ldXG5cbiAgICAgIGlmICh0cmlnZ2VyID09ICdjbGljaycpIHtcbiAgICAgICAgdGhpcy4kZWxlbWVudC5vbignY2xpY2suJyArIHRoaXMudHlwZSwgdGhpcy5vcHRpb25zLnNlbGVjdG9yLCAkLnByb3h5KHRoaXMudG9nZ2xlLCB0aGlzKSlcbiAgICAgIH0gZWxzZSBpZiAodHJpZ2dlciAhPSAnbWFudWFsJykge1xuICAgICAgICB2YXIgZXZlbnRJbiAgPSB0cmlnZ2VyID09ICdob3ZlcicgPyAnbW91c2VlbnRlcicgOiAnZm9jdXNpbidcbiAgICAgICAgdmFyIGV2ZW50T3V0ID0gdHJpZ2dlciA9PSAnaG92ZXInID8gJ21vdXNlbGVhdmUnIDogJ2ZvY3Vzb3V0J1xuXG4gICAgICAgIHRoaXMuJGVsZW1lbnQub24oZXZlbnRJbiAgKyAnLicgKyB0aGlzLnR5cGUsIHRoaXMub3B0aW9ucy5zZWxlY3RvciwgJC5wcm94eSh0aGlzLmVudGVyLCB0aGlzKSlcbiAgICAgICAgdGhpcy4kZWxlbWVudC5vbihldmVudE91dCArICcuJyArIHRoaXMudHlwZSwgdGhpcy5vcHRpb25zLnNlbGVjdG9yLCAkLnByb3h5KHRoaXMubGVhdmUsIHRoaXMpKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMub3B0aW9ucy5zZWxlY3RvciA/XG4gICAgICAodGhpcy5fb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIHsgdHJpZ2dlcjogJ21hbnVhbCcsIHNlbGVjdG9yOiAnJyB9KSkgOlxuICAgICAgdGhpcy5maXhUaXRsZSgpXG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS5nZXREZWZhdWx0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gVG9vbHRpcC5ERUZBVUxUU1xuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLmdldERlZmF1bHRzKCksIHRoaXMuJGVsZW1lbnQuZGF0YSgpLCBvcHRpb25zKVxuXG4gICAgaWYgKG9wdGlvbnMuZGVsYXkgJiYgdHlwZW9mIG9wdGlvbnMuZGVsYXkgPT0gJ251bWJlcicpIHtcbiAgICAgIG9wdGlvbnMuZGVsYXkgPSB7XG4gICAgICAgIHNob3c6IG9wdGlvbnMuZGVsYXksXG4gICAgICAgIGhpZGU6IG9wdGlvbnMuZGVsYXlcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW9uc1xuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0RGVsZWdhdGVPcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zICA9IHt9XG4gICAgdmFyIGRlZmF1bHRzID0gdGhpcy5nZXREZWZhdWx0cygpXG5cbiAgICB0aGlzLl9vcHRpb25zICYmICQuZWFjaCh0aGlzLl9vcHRpb25zLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKGRlZmF1bHRzW2tleV0gIT0gdmFsdWUpIG9wdGlvbnNba2V5XSA9IHZhbHVlXG4gICAgfSlcblxuICAgIHJldHVybiBvcHRpb25zXG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS5lbnRlciA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICB2YXIgc2VsZiA9IG9iaiBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3IgP1xuICAgICAgb2JqIDogJChvYmouY3VycmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSlcblxuICAgIGlmICghc2VsZikge1xuICAgICAgc2VsZiA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG9iai5jdXJyZW50VGFyZ2V0LCB0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKVxuICAgICAgJChvYmouY3VycmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSwgc2VsZilcbiAgICB9XG5cbiAgICBpZiAob2JqIGluc3RhbmNlb2YgJC5FdmVudCkge1xuICAgICAgc2VsZi5pblN0YXRlW29iai50eXBlID09ICdmb2N1c2luJyA/ICdmb2N1cycgOiAnaG92ZXInXSA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoc2VsZi50aXAoKS5oYXNDbGFzcygnaW4nKSB8fCBzZWxmLmhvdmVyU3RhdGUgPT0gJ2luJykge1xuICAgICAgc2VsZi5ob3ZlclN0YXRlID0gJ2luJ1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY2xlYXJUaW1lb3V0KHNlbGYudGltZW91dClcblxuICAgIHNlbGYuaG92ZXJTdGF0ZSA9ICdpbidcblxuICAgIGlmICghc2VsZi5vcHRpb25zLmRlbGF5IHx8ICFzZWxmLm9wdGlvbnMuZGVsYXkuc2hvdykgcmV0dXJuIHNlbGYuc2hvdygpXG5cbiAgICBzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZWxmLmhvdmVyU3RhdGUgPT0gJ2luJykgc2VsZi5zaG93KClcbiAgICB9LCBzZWxmLm9wdGlvbnMuZGVsYXkuc2hvdylcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmlzSW5TdGF0ZVRydWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuaW5TdGF0ZSkge1xuICAgICAgaWYgKHRoaXMuaW5TdGF0ZVtrZXldKSByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUubGVhdmUgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgdmFyIHNlbGYgPSBvYmogaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yID9cbiAgICAgIG9iaiA6ICQob2JqLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2JzLicgKyB0aGlzLnR5cGUpXG5cbiAgICBpZiAoIXNlbGYpIHtcbiAgICAgIHNlbGYgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihvYmouY3VycmVudFRhcmdldCwgdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSlcbiAgICAgICQob2JqLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2JzLicgKyB0aGlzLnR5cGUsIHNlbGYpXG4gICAgfVxuXG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mICQuRXZlbnQpIHtcbiAgICAgIHNlbGYuaW5TdGF0ZVtvYmoudHlwZSA9PSAnZm9jdXNvdXQnID8gJ2ZvY3VzJyA6ICdob3ZlciddID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoc2VsZi5pc0luU3RhdGVUcnVlKCkpIHJldHVyblxuXG4gICAgY2xlYXJUaW1lb3V0KHNlbGYudGltZW91dClcblxuICAgIHNlbGYuaG92ZXJTdGF0ZSA9ICdvdXQnXG5cbiAgICBpZiAoIXNlbGYub3B0aW9ucy5kZWxheSB8fCAhc2VsZi5vcHRpb25zLmRlbGF5LmhpZGUpIHJldHVybiBzZWxmLmhpZGUoKVxuXG4gICAgc2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2VsZi5ob3ZlclN0YXRlID09ICdvdXQnKSBzZWxmLmhpZGUoKVxuICAgIH0sIHNlbGYub3B0aW9ucy5kZWxheS5oaWRlKVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZSA9ICQuRXZlbnQoJ3Nob3cuYnMuJyArIHRoaXMudHlwZSlcblxuICAgIGlmICh0aGlzLmhhc0NvbnRlbnQoKSAmJiB0aGlzLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKVxuXG4gICAgICB2YXIgaW5Eb20gPSAkLmNvbnRhaW5zKHRoaXMuJGVsZW1lbnRbMF0ub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHRoaXMuJGVsZW1lbnRbMF0pXG4gICAgICBpZiAoZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fCAhaW5Eb20pIHJldHVyblxuICAgICAgdmFyIHRoYXQgPSB0aGlzXG5cbiAgICAgIHZhciAkdGlwID0gdGhpcy50aXAoKVxuXG4gICAgICB2YXIgdGlwSWQgPSB0aGlzLmdldFVJRCh0aGlzLnR5cGUpXG5cbiAgICAgIHRoaXMuc2V0Q29udGVudCgpXG4gICAgICAkdGlwLmF0dHIoJ2lkJywgdGlwSWQpXG4gICAgICB0aGlzLiRlbGVtZW50LmF0dHIoJ2FyaWEtZGVzY3JpYmVkYnknLCB0aXBJZClcblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5hbmltYXRpb24pICR0aXAuYWRkQ2xhc3MoJ2ZhZGUnKVxuXG4gICAgICB2YXIgcGxhY2VtZW50ID0gdHlwZW9mIHRoaXMub3B0aW9ucy5wbGFjZW1lbnQgPT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgIHRoaXMub3B0aW9ucy5wbGFjZW1lbnQuY2FsbCh0aGlzLCAkdGlwWzBdLCB0aGlzLiRlbGVtZW50WzBdKSA6XG4gICAgICAgIHRoaXMub3B0aW9ucy5wbGFjZW1lbnRcblxuICAgICAgdmFyIGF1dG9Ub2tlbiA9IC9cXHM/YXV0bz9cXHM/L2lcbiAgICAgIHZhciBhdXRvUGxhY2UgPSBhdXRvVG9rZW4udGVzdChwbGFjZW1lbnQpXG4gICAgICBpZiAoYXV0b1BsYWNlKSBwbGFjZW1lbnQgPSBwbGFjZW1lbnQucmVwbGFjZShhdXRvVG9rZW4sICcnKSB8fCAndG9wJ1xuXG4gICAgICAkdGlwXG4gICAgICAgIC5kZXRhY2goKVxuICAgICAgICAuY3NzKHsgdG9wOiAwLCBsZWZ0OiAwLCBkaXNwbGF5OiAnYmxvY2snIH0pXG4gICAgICAgIC5hZGRDbGFzcyhwbGFjZW1lbnQpXG4gICAgICAgIC5kYXRhKCdicy4nICsgdGhpcy50eXBlLCB0aGlzKVxuXG4gICAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyID8gJHRpcC5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKSA6ICR0aXAuaW5zZXJ0QWZ0ZXIodGhpcy4kZWxlbWVudClcbiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcignaW5zZXJ0ZWQuYnMuJyArIHRoaXMudHlwZSlcblxuICAgICAgdmFyIHBvcyAgICAgICAgICA9IHRoaXMuZ2V0UG9zaXRpb24oKVxuICAgICAgdmFyIGFjdHVhbFdpZHRoICA9ICR0aXBbMF0ub2Zmc2V0V2lkdGhcbiAgICAgIHZhciBhY3R1YWxIZWlnaHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodFxuXG4gICAgICBpZiAoYXV0b1BsYWNlKSB7XG4gICAgICAgIHZhciBvcmdQbGFjZW1lbnQgPSBwbGFjZW1lbnRcbiAgICAgICAgdmFyIHZpZXdwb3J0RGltID0gdGhpcy5nZXRQb3NpdGlvbih0aGlzLiR2aWV3cG9ydClcblxuICAgICAgICBwbGFjZW1lbnQgPSBwbGFjZW1lbnQgPT0gJ2JvdHRvbScgJiYgcG9zLmJvdHRvbSArIGFjdHVhbEhlaWdodCA+IHZpZXdwb3J0RGltLmJvdHRvbSA/ICd0b3AnICAgIDpcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50ID09ICd0b3AnICAgICYmIHBvcy50b3AgICAgLSBhY3R1YWxIZWlnaHQgPCB2aWV3cG9ydERpbS50b3AgICAgPyAnYm90dG9tJyA6XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9PSAncmlnaHQnICAmJiBwb3MucmlnaHQgICsgYWN0dWFsV2lkdGggID4gdmlld3BvcnREaW0ud2lkdGggID8gJ2xlZnQnICAgOlxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQgPT0gJ2xlZnQnICAgJiYgcG9zLmxlZnQgICAtIGFjdHVhbFdpZHRoICA8IHZpZXdwb3J0RGltLmxlZnQgICA/ICdyaWdodCcgIDpcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50XG5cbiAgICAgICAgJHRpcFxuICAgICAgICAgIC5yZW1vdmVDbGFzcyhvcmdQbGFjZW1lbnQpXG4gICAgICAgICAgLmFkZENsYXNzKHBsYWNlbWVudClcbiAgICAgIH1cblxuICAgICAgdmFyIGNhbGN1bGF0ZWRPZmZzZXQgPSB0aGlzLmdldENhbGN1bGF0ZWRPZmZzZXQocGxhY2VtZW50LCBwb3MsIGFjdHVhbFdpZHRoLCBhY3R1YWxIZWlnaHQpXG5cbiAgICAgIHRoaXMuYXBwbHlQbGFjZW1lbnQoY2FsY3VsYXRlZE9mZnNldCwgcGxhY2VtZW50KVxuXG4gICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwcmV2SG92ZXJTdGF0ZSA9IHRoYXQuaG92ZXJTdGF0ZVxuICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoJ3Nob3duLmJzLicgKyB0aGF0LnR5cGUpXG4gICAgICAgIHRoYXQuaG92ZXJTdGF0ZSA9IG51bGxcblxuICAgICAgICBpZiAocHJldkhvdmVyU3RhdGUgPT0gJ291dCcpIHRoYXQubGVhdmUodGhhdClcbiAgICAgIH1cblxuICAgICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kdGlwLmhhc0NsYXNzKCdmYWRlJykgP1xuICAgICAgICAkdGlwXG4gICAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgY29tcGxldGUpXG4gICAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRvb2x0aXAuVFJBTlNJVElPTl9EVVJBVElPTikgOlxuICAgICAgICBjb21wbGV0ZSgpXG4gICAgfVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuYXBwbHlQbGFjZW1lbnQgPSBmdW5jdGlvbiAob2Zmc2V0LCBwbGFjZW1lbnQpIHtcbiAgICB2YXIgJHRpcCAgID0gdGhpcy50aXAoKVxuICAgIHZhciB3aWR0aCAgPSAkdGlwWzBdLm9mZnNldFdpZHRoXG4gICAgdmFyIGhlaWdodCA9ICR0aXBbMF0ub2Zmc2V0SGVpZ2h0XG5cbiAgICAvLyBtYW51YWxseSByZWFkIG1hcmdpbnMgYmVjYXVzZSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaW5jbHVkZXMgZGlmZmVyZW5jZVxuICAgIHZhciBtYXJnaW5Ub3AgPSBwYXJzZUludCgkdGlwLmNzcygnbWFyZ2luLXRvcCcpLCAxMClcbiAgICB2YXIgbWFyZ2luTGVmdCA9IHBhcnNlSW50KCR0aXAuY3NzKCdtYXJnaW4tbGVmdCcpLCAxMClcblxuICAgIC8vIHdlIG11c3QgY2hlY2sgZm9yIE5hTiBmb3IgaWUgOC85XG4gICAgaWYgKGlzTmFOKG1hcmdpblRvcCkpICBtYXJnaW5Ub3AgID0gMFxuICAgIGlmIChpc05hTihtYXJnaW5MZWZ0KSkgbWFyZ2luTGVmdCA9IDBcblxuICAgIG9mZnNldC50b3AgICs9IG1hcmdpblRvcFxuICAgIG9mZnNldC5sZWZ0ICs9IG1hcmdpbkxlZnRcblxuICAgIC8vICQuZm4ub2Zmc2V0IGRvZXNuJ3Qgcm91bmQgcGl4ZWwgdmFsdWVzXG4gICAgLy8gc28gd2UgdXNlIHNldE9mZnNldCBkaXJlY3RseSB3aXRoIG91ciBvd24gZnVuY3Rpb24gQi0wXG4gICAgJC5vZmZzZXQuc2V0T2Zmc2V0KCR0aXBbMF0sICQuZXh0ZW5kKHtcbiAgICAgIHVzaW5nOiBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAgICAgJHRpcC5jc3Moe1xuICAgICAgICAgIHRvcDogTWF0aC5yb3VuZChwcm9wcy50b3ApLFxuICAgICAgICAgIGxlZnQ6IE1hdGgucm91bmQocHJvcHMubGVmdClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LCBvZmZzZXQpLCAwKVxuXG4gICAgJHRpcC5hZGRDbGFzcygnaW4nKVxuXG4gICAgLy8gY2hlY2sgdG8gc2VlIGlmIHBsYWNpbmcgdGlwIGluIG5ldyBvZmZzZXQgY2F1c2VkIHRoZSB0aXAgdG8gcmVzaXplIGl0c2VsZlxuICAgIHZhciBhY3R1YWxXaWR0aCAgPSAkdGlwWzBdLm9mZnNldFdpZHRoXG4gICAgdmFyIGFjdHVhbEhlaWdodCA9ICR0aXBbMF0ub2Zmc2V0SGVpZ2h0XG5cbiAgICBpZiAocGxhY2VtZW50ID09ICd0b3AnICYmIGFjdHVhbEhlaWdodCAhPSBoZWlnaHQpIHtcbiAgICAgIG9mZnNldC50b3AgPSBvZmZzZXQudG9wICsgaGVpZ2h0IC0gYWN0dWFsSGVpZ2h0XG4gICAgfVxuXG4gICAgdmFyIGRlbHRhID0gdGhpcy5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGEocGxhY2VtZW50LCBvZmZzZXQsIGFjdHVhbFdpZHRoLCBhY3R1YWxIZWlnaHQpXG5cbiAgICBpZiAoZGVsdGEubGVmdCkgb2Zmc2V0LmxlZnQgKz0gZGVsdGEubGVmdFxuICAgIGVsc2Ugb2Zmc2V0LnRvcCArPSBkZWx0YS50b3BcblxuICAgIHZhciBpc1ZlcnRpY2FsICAgICAgICAgID0gL3RvcHxib3R0b20vLnRlc3QocGxhY2VtZW50KVxuICAgIHZhciBhcnJvd0RlbHRhICAgICAgICAgID0gaXNWZXJ0aWNhbCA/IGRlbHRhLmxlZnQgKiAyIC0gd2lkdGggKyBhY3R1YWxXaWR0aCA6IGRlbHRhLnRvcCAqIDIgLSBoZWlnaHQgKyBhY3R1YWxIZWlnaHRcbiAgICB2YXIgYXJyb3dPZmZzZXRQb3NpdGlvbiA9IGlzVmVydGljYWwgPyAnb2Zmc2V0V2lkdGgnIDogJ29mZnNldEhlaWdodCdcblxuICAgICR0aXAub2Zmc2V0KG9mZnNldClcbiAgICB0aGlzLnJlcGxhY2VBcnJvdyhhcnJvd0RlbHRhLCAkdGlwWzBdW2Fycm93T2Zmc2V0UG9zaXRpb25dLCBpc1ZlcnRpY2FsKVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUucmVwbGFjZUFycm93ID0gZnVuY3Rpb24gKGRlbHRhLCBkaW1lbnNpb24sIGlzVmVydGljYWwpIHtcbiAgICB0aGlzLmFycm93KClcbiAgICAgIC5jc3MoaXNWZXJ0aWNhbCA/ICdsZWZ0JyA6ICd0b3AnLCA1MCAqICgxIC0gZGVsdGEgLyBkaW1lbnNpb24pICsgJyUnKVxuICAgICAgLmNzcyhpc1ZlcnRpY2FsID8gJ3RvcCcgOiAnbGVmdCcsICcnKVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuc2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHRpcCAgPSB0aGlzLnRpcCgpXG4gICAgdmFyIHRpdGxlID0gdGhpcy5nZXRUaXRsZSgpXG5cbiAgICAkdGlwLmZpbmQoJy50b29sdGlwLWlubmVyJylbdGhpcy5vcHRpb25zLmh0bWwgPyAnaHRtbCcgOiAndGV4dCddKHRpdGxlKVxuICAgICR0aXAucmVtb3ZlQ2xhc3MoJ2ZhZGUgaW4gdG9wIGJvdHRvbSBsZWZ0IHJpZ2h0JylcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICB2YXIgdGhhdCA9IHRoaXNcbiAgICB2YXIgJHRpcCA9ICQodGhpcy4kdGlwKVxuICAgIHZhciBlICAgID0gJC5FdmVudCgnaGlkZS5icy4nICsgdGhpcy50eXBlKVxuXG4gICAgZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICBpZiAodGhhdC5ob3ZlclN0YXRlICE9ICdpbicpICR0aXAuZGV0YWNoKClcbiAgICAgIHRoYXQuJGVsZW1lbnRcbiAgICAgICAgLnJlbW92ZUF0dHIoJ2FyaWEtZGVzY3JpYmVkYnknKVxuICAgICAgICAudHJpZ2dlcignaGlkZGVuLmJzLicgKyB0aGF0LnR5cGUpXG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpXG4gICAgfVxuXG4gICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpXG5cbiAgICBpZiAoZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuXG5cbiAgICAkdGlwLnJlbW92ZUNsYXNzKCdpbicpXG5cbiAgICAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiAkdGlwLmhhc0NsYXNzKCdmYWRlJykgP1xuICAgICAgJHRpcFxuICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBjb21wbGV0ZSlcbiAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRvb2x0aXAuVFJBTlNJVElPTl9EVVJBVElPTikgOlxuICAgICAgY29tcGxldGUoKVxuXG4gICAgdGhpcy5ob3ZlclN0YXRlID0gbnVsbFxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmZpeFRpdGxlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciAkZSA9IHRoaXMuJGVsZW1lbnRcbiAgICBpZiAoJGUuYXR0cigndGl0bGUnKSB8fCB0eXBlb2YgJGUuYXR0cignZGF0YS1vcmlnaW5hbC10aXRsZScpICE9ICdzdHJpbmcnKSB7XG4gICAgICAkZS5hdHRyKCdkYXRhLW9yaWdpbmFsLXRpdGxlJywgJGUuYXR0cigndGl0bGUnKSB8fCAnJykuYXR0cigndGl0bGUnLCAnJylcbiAgICB9XG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS5oYXNDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmdldFRpdGxlKClcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24gKCRlbGVtZW50KSB7XG4gICAgJGVsZW1lbnQgICA9ICRlbGVtZW50IHx8IHRoaXMuJGVsZW1lbnRcblxuICAgIHZhciBlbCAgICAgPSAkZWxlbWVudFswXVxuICAgIHZhciBpc0JvZHkgPSBlbC50YWdOYW1lID09ICdCT0RZJ1xuXG4gICAgdmFyIGVsUmVjdCAgICA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgaWYgKGVsUmVjdC53aWR0aCA9PSBudWxsKSB7XG4gICAgICAvLyB3aWR0aCBhbmQgaGVpZ2h0IGFyZSBtaXNzaW5nIGluIElFOCwgc28gY29tcHV0ZSB0aGVtIG1hbnVhbGx5OyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2lzc3Vlcy8xNDA5M1xuICAgICAgZWxSZWN0ID0gJC5leHRlbmQoe30sIGVsUmVjdCwgeyB3aWR0aDogZWxSZWN0LnJpZ2h0IC0gZWxSZWN0LmxlZnQsIGhlaWdodDogZWxSZWN0LmJvdHRvbSAtIGVsUmVjdC50b3AgfSlcbiAgICB9XG4gICAgdmFyIGVsT2Zmc2V0ICA9IGlzQm9keSA/IHsgdG9wOiAwLCBsZWZ0OiAwIH0gOiAkZWxlbWVudC5vZmZzZXQoKVxuICAgIHZhciBzY3JvbGwgICAgPSB7IHNjcm9sbDogaXNCb2R5ID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA6ICRlbGVtZW50LnNjcm9sbFRvcCgpIH1cbiAgICB2YXIgb3V0ZXJEaW1zID0gaXNCb2R5ID8geyB3aWR0aDogJCh3aW5kb3cpLndpZHRoKCksIGhlaWdodDogJCh3aW5kb3cpLmhlaWdodCgpIH0gOiBudWxsXG5cbiAgICByZXR1cm4gJC5leHRlbmQoe30sIGVsUmVjdCwgc2Nyb2xsLCBvdXRlckRpbXMsIGVsT2Zmc2V0KVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRlZE9mZnNldCA9IGZ1bmN0aW9uIChwbGFjZW1lbnQsIHBvcywgYWN0dWFsV2lkdGgsIGFjdHVhbEhlaWdodCkge1xuICAgIHJldHVybiBwbGFjZW1lbnQgPT0gJ2JvdHRvbScgPyB7IHRvcDogcG9zLnRvcCArIHBvcy5oZWlnaHQsICAgbGVmdDogcG9zLmxlZnQgKyBwb3Mud2lkdGggLyAyIC0gYWN0dWFsV2lkdGggLyAyIH0gOlxuICAgICAgICAgICBwbGFjZW1lbnQgPT0gJ3RvcCcgICAgPyB7IHRvcDogcG9zLnRvcCAtIGFjdHVhbEhlaWdodCwgbGVmdDogcG9zLmxlZnQgKyBwb3Mud2lkdGggLyAyIC0gYWN0dWFsV2lkdGggLyAyIH0gOlxuICAgICAgICAgICBwbGFjZW1lbnQgPT0gJ2xlZnQnICAgPyB7IHRvcDogcG9zLnRvcCArIHBvcy5oZWlnaHQgLyAyIC0gYWN0dWFsSGVpZ2h0IC8gMiwgbGVmdDogcG9zLmxlZnQgLSBhY3R1YWxXaWR0aCB9IDpcbiAgICAgICAgLyogcGxhY2VtZW50ID09ICdyaWdodCcgKi8geyB0b3A6IHBvcy50b3AgKyBwb3MuaGVpZ2h0IC8gMiAtIGFjdHVhbEhlaWdodCAvIDIsIGxlZnQ6IHBvcy5sZWZ0ICsgcG9zLndpZHRoIH1cblxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0Vmlld3BvcnRBZGp1c3RlZERlbHRhID0gZnVuY3Rpb24gKHBsYWNlbWVudCwgcG9zLCBhY3R1YWxXaWR0aCwgYWN0dWFsSGVpZ2h0KSB7XG4gICAgdmFyIGRlbHRhID0geyB0b3A6IDAsIGxlZnQ6IDAgfVxuICAgIGlmICghdGhpcy4kdmlld3BvcnQpIHJldHVybiBkZWx0YVxuXG4gICAgdmFyIHZpZXdwb3J0UGFkZGluZyA9IHRoaXMub3B0aW9ucy52aWV3cG9ydCAmJiB0aGlzLm9wdGlvbnMudmlld3BvcnQucGFkZGluZyB8fCAwXG4gICAgdmFyIHZpZXdwb3J0RGltZW5zaW9ucyA9IHRoaXMuZ2V0UG9zaXRpb24odGhpcy4kdmlld3BvcnQpXG5cbiAgICBpZiAoL3JpZ2h0fGxlZnQvLnRlc3QocGxhY2VtZW50KSkge1xuICAgICAgdmFyIHRvcEVkZ2VPZmZzZXQgICAgPSBwb3MudG9wIC0gdmlld3BvcnRQYWRkaW5nIC0gdmlld3BvcnREaW1lbnNpb25zLnNjcm9sbFxuICAgICAgdmFyIGJvdHRvbUVkZ2VPZmZzZXQgPSBwb3MudG9wICsgdmlld3BvcnRQYWRkaW5nIC0gdmlld3BvcnREaW1lbnNpb25zLnNjcm9sbCArIGFjdHVhbEhlaWdodFxuICAgICAgaWYgKHRvcEVkZ2VPZmZzZXQgPCB2aWV3cG9ydERpbWVuc2lvbnMudG9wKSB7IC8vIHRvcCBvdmVyZmxvd1xuICAgICAgICBkZWx0YS50b3AgPSB2aWV3cG9ydERpbWVuc2lvbnMudG9wIC0gdG9wRWRnZU9mZnNldFxuICAgICAgfSBlbHNlIGlmIChib3R0b21FZGdlT2Zmc2V0ID4gdmlld3BvcnREaW1lbnNpb25zLnRvcCArIHZpZXdwb3J0RGltZW5zaW9ucy5oZWlnaHQpIHsgLy8gYm90dG9tIG92ZXJmbG93XG4gICAgICAgIGRlbHRhLnRvcCA9IHZpZXdwb3J0RGltZW5zaW9ucy50b3AgKyB2aWV3cG9ydERpbWVuc2lvbnMuaGVpZ2h0IC0gYm90dG9tRWRnZU9mZnNldFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbGVmdEVkZ2VPZmZzZXQgID0gcG9zLmxlZnQgLSB2aWV3cG9ydFBhZGRpbmdcbiAgICAgIHZhciByaWdodEVkZ2VPZmZzZXQgPSBwb3MubGVmdCArIHZpZXdwb3J0UGFkZGluZyArIGFjdHVhbFdpZHRoXG4gICAgICBpZiAobGVmdEVkZ2VPZmZzZXQgPCB2aWV3cG9ydERpbWVuc2lvbnMubGVmdCkgeyAvLyBsZWZ0IG92ZXJmbG93XG4gICAgICAgIGRlbHRhLmxlZnQgPSB2aWV3cG9ydERpbWVuc2lvbnMubGVmdCAtIGxlZnRFZGdlT2Zmc2V0XG4gICAgICB9IGVsc2UgaWYgKHJpZ2h0RWRnZU9mZnNldCA+IHZpZXdwb3J0RGltZW5zaW9ucy5yaWdodCkgeyAvLyByaWdodCBvdmVyZmxvd1xuICAgICAgICBkZWx0YS5sZWZ0ID0gdmlld3BvcnREaW1lbnNpb25zLmxlZnQgKyB2aWV3cG9ydERpbWVuc2lvbnMud2lkdGggLSByaWdodEVkZ2VPZmZzZXRcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGVsdGFcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmdldFRpdGxlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0aXRsZVxuICAgIHZhciAkZSA9IHRoaXMuJGVsZW1lbnRcbiAgICB2YXIgbyAgPSB0aGlzLm9wdGlvbnNcblxuICAgIHRpdGxlID0gJGUuYXR0cignZGF0YS1vcmlnaW5hbC10aXRsZScpXG4gICAgICB8fCAodHlwZW9mIG8udGl0bGUgPT0gJ2Z1bmN0aW9uJyA/IG8udGl0bGUuY2FsbCgkZVswXSkgOiAgby50aXRsZSlcblxuICAgIHJldHVybiB0aXRsZVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0VUlEID0gZnVuY3Rpb24gKHByZWZpeCkge1xuICAgIGRvIHByZWZpeCArPSB+fihNYXRoLnJhbmRvbSgpICogMTAwMDAwMClcbiAgICB3aGlsZSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJlZml4KSlcbiAgICByZXR1cm4gcHJlZml4XG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS50aXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLiR0aXApIHtcbiAgICAgIHRoaXMuJHRpcCA9ICQodGhpcy5vcHRpb25zLnRlbXBsYXRlKVxuICAgICAgaWYgKHRoaXMuJHRpcC5sZW5ndGggIT0gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy50eXBlICsgJyBgdGVtcGxhdGVgIG9wdGlvbiBtdXN0IGNvbnNpc3Qgb2YgZXhhY3RseSAxIHRvcC1sZXZlbCBlbGVtZW50IScpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLiR0aXBcbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmFycm93ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAodGhpcy4kYXJyb3cgPSB0aGlzLiRhcnJvdyB8fCB0aGlzLnRpcCgpLmZpbmQoJy50b29sdGlwLWFycm93JykpXG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZVxuICB9XG5cbiAgVG9vbHRpcC5wcm90b3R5cGUudG9nZ2xlRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVuYWJsZWQgPSAhdGhpcy5lbmFibGVkXG4gIH1cblxuICBUb29sdGlwLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIGlmIChlKSB7XG4gICAgICBzZWxmID0gJChlLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2JzLicgKyB0aGlzLnR5cGUpXG4gICAgICBpZiAoIXNlbGYpIHtcbiAgICAgICAgc2VsZiA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGUuY3VycmVudFRhcmdldCwgdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSlcbiAgICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2JzLicgKyB0aGlzLnR5cGUsIHNlbGYpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGUpIHtcbiAgICAgIHNlbGYuaW5TdGF0ZS5jbGljayA9ICFzZWxmLmluU3RhdGUuY2xpY2tcbiAgICAgIGlmIChzZWxmLmlzSW5TdGF0ZVRydWUoKSkgc2VsZi5lbnRlcihzZWxmKVxuICAgICAgZWxzZSBzZWxmLmxlYXZlKHNlbGYpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYudGlwKCkuaGFzQ2xhc3MoJ2luJykgPyBzZWxmLmxlYXZlKHNlbGYpIDogc2VsZi5lbnRlcihzZWxmKVxuICAgIH1cbiAgfVxuXG4gIFRvb2x0aXAucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dClcbiAgICB0aGlzLmhpZGUoZnVuY3Rpb24gKCkge1xuICAgICAgdGhhdC4kZWxlbWVudC5vZmYoJy4nICsgdGhhdC50eXBlKS5yZW1vdmVEYXRhKCdicy4nICsgdGhhdC50eXBlKVxuICAgICAgaWYgKHRoYXQuJHRpcCkge1xuICAgICAgICB0aGF0LiR0aXAuZGV0YWNoKClcbiAgICAgIH1cbiAgICAgIHRoYXQuJHRpcCA9IG51bGxcbiAgICAgIHRoYXQuJGFycm93ID0gbnVsbFxuICAgICAgdGhhdC4kdmlld3BvcnQgPSBudWxsXG4gICAgfSlcbiAgfVxuXG5cbiAgLy8gVE9PTFRJUCBQTFVHSU4gREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG4gICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2JzLnRvb2x0aXAnKVxuICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvblxuXG4gICAgICBpZiAoIWRhdGEgJiYgL2Rlc3Ryb3l8aGlkZS8udGVzdChvcHRpb24pKSByZXR1cm5cbiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMudG9vbHRpcCcsIChkYXRhID0gbmV3IFRvb2x0aXAodGhpcywgb3B0aW9ucykpKVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXG4gICAgfSlcbiAgfVxuXG4gIHZhciBvbGQgPSAkLmZuLnRvb2x0aXBcblxuICAkLmZuLnRvb2x0aXAgICAgICAgICAgICAgPSBQbHVnaW5cbiAgJC5mbi50b29sdGlwLkNvbnN0cnVjdG9yID0gVG9vbHRpcFxuXG5cbiAgLy8gVE9PTFRJUCBOTyBDT05GTElDVFxuICAvLyA9PT09PT09PT09PT09PT09PT09XG5cbiAgJC5mbi50b29sdGlwLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbi50b29sdGlwID0gb2xkXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG59KGpRdWVyeSk7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQm9vdHN0cmFwOiBwb3BvdmVyLmpzIHYzLjMuNlxuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jcG9wb3ZlcnNcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weXJpZ2h0IDIwMTEtMjAxNSBUd2l0dGVyLCBJbmMuXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cblxuK2Z1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBQT1BPVkVSIFBVQkxJQyBDTEFTUyBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgUG9wb3ZlciA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5pbml0KCdwb3BvdmVyJywgZWxlbWVudCwgb3B0aW9ucylcbiAgfVxuXG4gIGlmICghJC5mbi50b29sdGlwKSB0aHJvdyBuZXcgRXJyb3IoJ1BvcG92ZXIgcmVxdWlyZXMgdG9vbHRpcC5qcycpXG5cbiAgUG9wb3Zlci5WRVJTSU9OICA9ICczLjMuNidcblxuICBQb3BvdmVyLkRFRkFVTFRTID0gJC5leHRlbmQoe30sICQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5ERUZBVUxUUywge1xuICAgIHBsYWNlbWVudDogJ3JpZ2h0JyxcbiAgICB0cmlnZ2VyOiAnY2xpY2snLFxuICAgIGNvbnRlbnQ6ICcnLFxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cInBvcG92ZXJcIiByb2xlPVwidG9vbHRpcFwiPjxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PjxoMyBjbGFzcz1cInBvcG92ZXItdGl0bGVcIj48L2gzPjxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIj48L2Rpdj48L2Rpdj4nXG4gIH0pXG5cblxuICAvLyBOT1RFOiBQT1BPVkVSIEVYVEVORFMgdG9vbHRpcC5qc1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIFBvcG92ZXIucHJvdG90eXBlID0gJC5leHRlbmQoe30sICQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5wcm90b3R5cGUpXG5cbiAgUG9wb3Zlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQb3BvdmVyXG5cbiAgUG9wb3Zlci5wcm90b3R5cGUuZ2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFBvcG92ZXIuREVGQVVMVFNcbiAgfVxuXG4gIFBvcG92ZXIucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyICR0aXAgICAgPSB0aGlzLnRpcCgpXG4gICAgdmFyIHRpdGxlICAgPSB0aGlzLmdldFRpdGxlKClcbiAgICB2YXIgY29udGVudCA9IHRoaXMuZ2V0Q29udGVudCgpXG5cbiAgICAkdGlwLmZpbmQoJy5wb3BvdmVyLXRpdGxlJylbdGhpcy5vcHRpb25zLmh0bWwgPyAnaHRtbCcgOiAndGV4dCddKHRpdGxlKVxuICAgICR0aXAuZmluZCgnLnBvcG92ZXItY29udGVudCcpLmNoaWxkcmVuKCkuZGV0YWNoKCkuZW5kKClbIC8vIHdlIHVzZSBhcHBlbmQgZm9yIGh0bWwgb2JqZWN0cyB0byBtYWludGFpbiBqcyBldmVudHNcbiAgICAgIHRoaXMub3B0aW9ucy5odG1sID8gKHR5cGVvZiBjb250ZW50ID09ICdzdHJpbmcnID8gJ2h0bWwnIDogJ2FwcGVuZCcpIDogJ3RleHQnXG4gICAgXShjb250ZW50KVxuXG4gICAgJHRpcC5yZW1vdmVDbGFzcygnZmFkZSB0b3AgYm90dG9tIGxlZnQgcmlnaHQgaW4nKVxuXG4gICAgLy8gSUU4IGRvZXNuJ3QgYWNjZXB0IGhpZGluZyB2aWEgdGhlIGA6ZW1wdHlgIHBzZXVkbyBzZWxlY3Rvciwgd2UgaGF2ZSB0byBkb1xuICAgIC8vIHRoaXMgbWFudWFsbHkgYnkgY2hlY2tpbmcgdGhlIGNvbnRlbnRzLlxuICAgIGlmICghJHRpcC5maW5kKCcucG9wb3Zlci10aXRsZScpLmh0bWwoKSkgJHRpcC5maW5kKCcucG9wb3Zlci10aXRsZScpLmhpZGUoKVxuICB9XG5cbiAgUG9wb3Zlci5wcm90b3R5cGUuaGFzQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUaXRsZSgpIHx8IHRoaXMuZ2V0Q29udGVudCgpXG4gIH1cblxuICBQb3BvdmVyLnByb3RvdHlwZS5nZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciAkZSA9IHRoaXMuJGVsZW1lbnRcbiAgICB2YXIgbyAgPSB0aGlzLm9wdGlvbnNcblxuICAgIHJldHVybiAkZS5hdHRyKCdkYXRhLWNvbnRlbnQnKVxuICAgICAgfHwgKHR5cGVvZiBvLmNvbnRlbnQgPT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICBvLmNvbnRlbnQuY2FsbCgkZVswXSkgOlxuICAgICAgICAgICAgby5jb250ZW50KVxuICB9XG5cbiAgUG9wb3Zlci5wcm90b3R5cGUuYXJyb3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0aGlzLiRhcnJvdyA9IHRoaXMuJGFycm93IHx8IHRoaXMudGlwKCkuZmluZCgnLmFycm93JykpXG4gIH1cblxuXG4gIC8vIFBPUE9WRVIgUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKVxuICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5wb3BvdmVyJylcbiAgICAgIHZhciBvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb25cblxuICAgICAgaWYgKCFkYXRhICYmIC9kZXN0cm95fGhpZGUvLnRlc3Qob3B0aW9uKSkgcmV0dXJuXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLnBvcG92ZXInLCAoZGF0YSA9IG5ldyBQb3BvdmVyKHRoaXMsIG9wdGlvbnMpKSlcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKVxuICAgIH0pXG4gIH1cblxuICB2YXIgb2xkID0gJC5mbi5wb3BvdmVyXG5cbiAgJC5mbi5wb3BvdmVyICAgICAgICAgICAgID0gUGx1Z2luXG4gICQuZm4ucG9wb3Zlci5Db25zdHJ1Y3RvciA9IFBvcG92ZXJcblxuXG4gIC8vIFBPUE9WRVIgTk8gQ09ORkxJQ1RcbiAgLy8gPT09PT09PT09PT09PT09PT09PVxuXG4gICQuZm4ucG9wb3Zlci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm4ucG9wb3ZlciA9IG9sZFxuICAgIHJldHVybiB0aGlzXG4gIH1cblxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogc2Nyb2xsc3B5LmpzIHYzLjMuNlxuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jc2Nyb2xsc3B5XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHlyaWdodCAyMDExLTIwMTUgVHdpdHRlciwgSW5jLlxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5cbitmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gU0NST0xMU1BZIENMQVNTIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBTY3JvbGxTcHkoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMuJGJvZHkgICAgICAgICAgPSAkKGRvY3VtZW50LmJvZHkpXG4gICAgdGhpcy4kc2Nyb2xsRWxlbWVudCA9ICQoZWxlbWVudCkuaXMoZG9jdW1lbnQuYm9keSkgPyAkKHdpbmRvdykgOiAkKGVsZW1lbnQpXG4gICAgdGhpcy5vcHRpb25zICAgICAgICA9ICQuZXh0ZW5kKHt9LCBTY3JvbGxTcHkuREVGQVVMVFMsIG9wdGlvbnMpXG4gICAgdGhpcy5zZWxlY3RvciAgICAgICA9ICh0aGlzLm9wdGlvbnMudGFyZ2V0IHx8ICcnKSArICcgLm5hdiBsaSA+IGEnXG4gICAgdGhpcy5vZmZzZXRzICAgICAgICA9IFtdXG4gICAgdGhpcy50YXJnZXRzICAgICAgICA9IFtdXG4gICAgdGhpcy5hY3RpdmVUYXJnZXQgICA9IG51bGxcbiAgICB0aGlzLnNjcm9sbEhlaWdodCAgID0gMFxuXG4gICAgdGhpcy4kc2Nyb2xsRWxlbWVudC5vbignc2Nyb2xsLmJzLnNjcm9sbHNweScsICQucHJveHkodGhpcy5wcm9jZXNzLCB0aGlzKSlcbiAgICB0aGlzLnJlZnJlc2goKVxuICAgIHRoaXMucHJvY2VzcygpXG4gIH1cblxuICBTY3JvbGxTcHkuVkVSU0lPTiAgPSAnMy4zLjYnXG5cbiAgU2Nyb2xsU3B5LkRFRkFVTFRTID0ge1xuICAgIG9mZnNldDogMTBcbiAgfVxuXG4gIFNjcm9sbFNweS5wcm90b3R5cGUuZ2V0U2Nyb2xsSGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLiRzY3JvbGxFbGVtZW50WzBdLnNjcm9sbEhlaWdodCB8fCBNYXRoLm1heCh0aGlzLiRib2R5WzBdLnNjcm9sbEhlaWdodCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodClcbiAgfVxuXG4gIFNjcm9sbFNweS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCAgICAgICAgICA9IHRoaXNcbiAgICB2YXIgb2Zmc2V0TWV0aG9kICA9ICdvZmZzZXQnXG4gICAgdmFyIG9mZnNldEJhc2UgICAgPSAwXG5cbiAgICB0aGlzLm9mZnNldHMgICAgICA9IFtdXG4gICAgdGhpcy50YXJnZXRzICAgICAgPSBbXVxuICAgIHRoaXMuc2Nyb2xsSGVpZ2h0ID0gdGhpcy5nZXRTY3JvbGxIZWlnaHQoKVxuXG4gICAgaWYgKCEkLmlzV2luZG93KHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0pKSB7XG4gICAgICBvZmZzZXRNZXRob2QgPSAncG9zaXRpb24nXG4gICAgICBvZmZzZXRCYXNlICAgPSB0aGlzLiRzY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgpXG4gICAgfVxuXG4gICAgdGhpcy4kYm9keVxuICAgICAgLmZpbmQodGhpcy5zZWxlY3RvcilcbiAgICAgIC5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJGVsICAgPSAkKHRoaXMpXG4gICAgICAgIHZhciBocmVmICA9ICRlbC5kYXRhKCd0YXJnZXQnKSB8fCAkZWwuYXR0cignaHJlZicpXG4gICAgICAgIHZhciAkaHJlZiA9IC9eIy4vLnRlc3QoaHJlZikgJiYgJChocmVmKVxuXG4gICAgICAgIHJldHVybiAoJGhyZWZcbiAgICAgICAgICAmJiAkaHJlZi5sZW5ndGhcbiAgICAgICAgICAmJiAkaHJlZi5pcygnOnZpc2libGUnKVxuICAgICAgICAgICYmIFtbJGhyZWZbb2Zmc2V0TWV0aG9kXSgpLnRvcCArIG9mZnNldEJhc2UsIGhyZWZdXSkgfHwgbnVsbFxuICAgICAgfSlcbiAgICAgIC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhWzBdIC0gYlswXSB9KVxuICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGF0Lm9mZnNldHMucHVzaCh0aGlzWzBdKVxuICAgICAgICB0aGF0LnRhcmdldHMucHVzaCh0aGlzWzFdKVxuICAgICAgfSlcbiAgfVxuXG4gIFNjcm9sbFNweS5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2Nyb2xsVG9wICAgID0gdGhpcy4kc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoKSArIHRoaXMub3B0aW9ucy5vZmZzZXRcbiAgICB2YXIgc2Nyb2xsSGVpZ2h0ID0gdGhpcy5nZXRTY3JvbGxIZWlnaHQoKVxuICAgIHZhciBtYXhTY3JvbGwgICAgPSB0aGlzLm9wdGlvbnMub2Zmc2V0ICsgc2Nyb2xsSGVpZ2h0IC0gdGhpcy4kc2Nyb2xsRWxlbWVudC5oZWlnaHQoKVxuICAgIHZhciBvZmZzZXRzICAgICAgPSB0aGlzLm9mZnNldHNcbiAgICB2YXIgdGFyZ2V0cyAgICAgID0gdGhpcy50YXJnZXRzXG4gICAgdmFyIGFjdGl2ZVRhcmdldCA9IHRoaXMuYWN0aXZlVGFyZ2V0XG4gICAgdmFyIGlcblxuICAgIGlmICh0aGlzLnNjcm9sbEhlaWdodCAhPSBzY3JvbGxIZWlnaHQpIHtcbiAgICAgIHRoaXMucmVmcmVzaCgpXG4gICAgfVxuXG4gICAgaWYgKHNjcm9sbFRvcCA+PSBtYXhTY3JvbGwpIHtcbiAgICAgIHJldHVybiBhY3RpdmVUYXJnZXQgIT0gKGkgPSB0YXJnZXRzW3RhcmdldHMubGVuZ3RoIC0gMV0pICYmIHRoaXMuYWN0aXZhdGUoaSlcbiAgICB9XG5cbiAgICBpZiAoYWN0aXZlVGFyZ2V0ICYmIHNjcm9sbFRvcCA8IG9mZnNldHNbMF0pIHtcbiAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0ID0gbnVsbFxuICAgICAgcmV0dXJuIHRoaXMuY2xlYXIoKVxuICAgIH1cblxuICAgIGZvciAoaSA9IG9mZnNldHMubGVuZ3RoOyBpLS07KSB7XG4gICAgICBhY3RpdmVUYXJnZXQgIT0gdGFyZ2V0c1tpXVxuICAgICAgICAmJiBzY3JvbGxUb3AgPj0gb2Zmc2V0c1tpXVxuICAgICAgICAmJiAob2Zmc2V0c1tpICsgMV0gPT09IHVuZGVmaW5lZCB8fCBzY3JvbGxUb3AgPCBvZmZzZXRzW2kgKyAxXSlcbiAgICAgICAgJiYgdGhpcy5hY3RpdmF0ZSh0YXJnZXRzW2ldKVxuICAgIH1cbiAgfVxuXG4gIFNjcm9sbFNweS5wcm90b3R5cGUuYWN0aXZhdGUgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgdGhpcy5hY3RpdmVUYXJnZXQgPSB0YXJnZXRcblxuICAgIHRoaXMuY2xlYXIoKVxuXG4gICAgdmFyIHNlbGVjdG9yID0gdGhpcy5zZWxlY3RvciArXG4gICAgICAnW2RhdGEtdGFyZ2V0PVwiJyArIHRhcmdldCArICdcIl0sJyArXG4gICAgICB0aGlzLnNlbGVjdG9yICsgJ1tocmVmPVwiJyArIHRhcmdldCArICdcIl0nXG5cbiAgICB2YXIgYWN0aXZlID0gJChzZWxlY3RvcilcbiAgICAgIC5wYXJlbnRzKCdsaScpXG4gICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXG5cbiAgICBpZiAoYWN0aXZlLnBhcmVudCgnLmRyb3Bkb3duLW1lbnUnKS5sZW5ndGgpIHtcbiAgICAgIGFjdGl2ZSA9IGFjdGl2ZVxuICAgICAgICAuY2xvc2VzdCgnbGkuZHJvcGRvd24nKVxuICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXG4gICAgfVxuXG4gICAgYWN0aXZlLnRyaWdnZXIoJ2FjdGl2YXRlLmJzLnNjcm9sbHNweScpXG4gIH1cblxuICBTY3JvbGxTcHkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICQodGhpcy5zZWxlY3RvcilcbiAgICAgIC5wYXJlbnRzVW50aWwodGhpcy5vcHRpb25zLnRhcmdldCwgJy5hY3RpdmUnKVxuICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuICB9XG5cblxuICAvLyBTQ1JPTExTUFkgUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG4gICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2JzLnNjcm9sbHNweScpXG4gICAgICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uXG5cbiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuc2Nyb2xsc3B5JywgKGRhdGEgPSBuZXcgU2Nyb2xsU3B5KHRoaXMsIG9wdGlvbnMpKSlcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKVxuICAgIH0pXG4gIH1cblxuICB2YXIgb2xkID0gJC5mbi5zY3JvbGxzcHlcblxuICAkLmZuLnNjcm9sbHNweSAgICAgICAgICAgICA9IFBsdWdpblxuICAkLmZuLnNjcm9sbHNweS5Db25zdHJ1Y3RvciA9IFNjcm9sbFNweVxuXG5cbiAgLy8gU0NST0xMU1BZIE5PIENPTkZMSUNUXG4gIC8vID09PT09PT09PT09PT09PT09PT09PVxuXG4gICQuZm4uc2Nyb2xsc3B5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgJC5mbi5zY3JvbGxzcHkgPSBvbGRcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvLyBTQ1JPTExTUFkgREFUQS1BUElcbiAgLy8gPT09PT09PT09PT09PT09PT09XG5cbiAgJCh3aW5kb3cpLm9uKCdsb2FkLmJzLnNjcm9sbHNweS5kYXRhLWFwaScsIGZ1bmN0aW9uICgpIHtcbiAgICAkKCdbZGF0YS1zcHk9XCJzY3JvbGxcIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkc3B5ID0gJCh0aGlzKVxuICAgICAgUGx1Z2luLmNhbGwoJHNweSwgJHNweS5kYXRhKCkpXG4gICAgfSlcbiAgfSlcblxufShqUXVlcnkpO1xuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEJvb3RzdHJhcDogdGFiLmpzIHYzLjMuNlxuICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jdGFic1xuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE1IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuXG4rZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIFRBQiBDTEFTUyBERUZJTklUSU9OXG4gIC8vID09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIFRhYiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgLy8ganNjczpkaXNhYmxlIHJlcXVpcmVEb2xsYXJCZWZvcmVqUXVlcnlBc3NpZ25tZW50XG4gICAgdGhpcy5lbGVtZW50ID0gJChlbGVtZW50KVxuICAgIC8vIGpzY3M6ZW5hYmxlIHJlcXVpcmVEb2xsYXJCZWZvcmVqUXVlcnlBc3NpZ25tZW50XG4gIH1cblxuICBUYWIuVkVSU0lPTiA9ICczLjMuNidcblxuICBUYWIuVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MFxuXG4gIFRhYi5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHRoaXMgICAgPSB0aGlzLmVsZW1lbnRcbiAgICB2YXIgJHVsICAgICAgPSAkdGhpcy5jbG9zZXN0KCd1bDpub3QoLmRyb3Bkb3duLW1lbnUpJylcbiAgICB2YXIgc2VsZWN0b3IgPSAkdGhpcy5kYXRhKCd0YXJnZXQnKVxuXG4gICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgc2VsZWN0b3IgPSAkdGhpcy5hdHRyKCdocmVmJylcbiAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgJiYgc2VsZWN0b3IucmVwbGFjZSgvLiooPz0jW15cXHNdKiQpLywgJycpIC8vIHN0cmlwIGZvciBpZTdcbiAgICB9XG5cbiAgICBpZiAoJHRoaXMucGFyZW50KCdsaScpLmhhc0NsYXNzKCdhY3RpdmUnKSkgcmV0dXJuXG5cbiAgICB2YXIgJHByZXZpb3VzID0gJHVsLmZpbmQoJy5hY3RpdmU6bGFzdCBhJylcbiAgICB2YXIgaGlkZUV2ZW50ID0gJC5FdmVudCgnaGlkZS5icy50YWInLCB7XG4gICAgICByZWxhdGVkVGFyZ2V0OiAkdGhpc1swXVxuICAgIH0pXG4gICAgdmFyIHNob3dFdmVudCA9ICQuRXZlbnQoJ3Nob3cuYnMudGFiJywge1xuICAgICAgcmVsYXRlZFRhcmdldDogJHByZXZpb3VzWzBdXG4gICAgfSlcblxuICAgICRwcmV2aW91cy50cmlnZ2VyKGhpZGVFdmVudClcbiAgICAkdGhpcy50cmlnZ2VyKHNob3dFdmVudClcblxuICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgIHZhciAkdGFyZ2V0ID0gJChzZWxlY3RvcilcblxuICAgIHRoaXMuYWN0aXZhdGUoJHRoaXMuY2xvc2VzdCgnbGknKSwgJHVsKVxuICAgIHRoaXMuYWN0aXZhdGUoJHRhcmdldCwgJHRhcmdldC5wYXJlbnQoKSwgZnVuY3Rpb24gKCkge1xuICAgICAgJHByZXZpb3VzLnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAnaGlkZGVuLmJzLnRhYicsXG4gICAgICAgIHJlbGF0ZWRUYXJnZXQ6ICR0aGlzWzBdXG4gICAgICB9KVxuICAgICAgJHRoaXMudHJpZ2dlcih7XG4gICAgICAgIHR5cGU6ICdzaG93bi5icy50YWInLFxuICAgICAgICByZWxhdGVkVGFyZ2V0OiAkcHJldmlvdXNbMF1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIFRhYi5wcm90b3R5cGUuYWN0aXZhdGUgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuICAgIHZhciAkYWN0aXZlICAgID0gY29udGFpbmVyLmZpbmQoJz4gLmFjdGl2ZScpXG4gICAgdmFyIHRyYW5zaXRpb24gPSBjYWxsYmFja1xuICAgICAgJiYgJC5zdXBwb3J0LnRyYW5zaXRpb25cbiAgICAgICYmICgkYWN0aXZlLmxlbmd0aCAmJiAkYWN0aXZlLmhhc0NsYXNzKCdmYWRlJykgfHwgISFjb250YWluZXIuZmluZCgnPiAuZmFkZScpLmxlbmd0aClcblxuICAgIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAkYWN0aXZlXG4gICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgICAgLmZpbmQoJz4gLmRyb3Bkb3duLW1lbnUgPiAuYWN0aXZlJylcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAgIC5lbmQoKVxuICAgICAgICAuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJylcbiAgICAgICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIGZhbHNlKVxuXG4gICAgICBlbGVtZW50XG4gICAgICAgIC5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgICAgLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScpXG4gICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKVxuXG4gICAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICBlbGVtZW50WzBdLm9mZnNldFdpZHRoIC8vIHJlZmxvdyBmb3IgdHJhbnNpdGlvblxuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdpbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdmYWRlJylcbiAgICAgIH1cblxuICAgICAgaWYgKGVsZW1lbnQucGFyZW50KCcuZHJvcGRvd24tbWVudScpLmxlbmd0aCkge1xuICAgICAgICBlbGVtZW50XG4gICAgICAgICAgLmNsb3Nlc3QoJ2xpLmRyb3Bkb3duJylcbiAgICAgICAgICAgIC5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgICAgICAuZW5kKClcbiAgICAgICAgICAuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJylcbiAgICAgICAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSlcbiAgICAgIH1cblxuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuICAgIH1cblxuICAgICRhY3RpdmUubGVuZ3RoICYmIHRyYW5zaXRpb24gP1xuICAgICAgJGFjdGl2ZVxuICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBuZXh0KVxuICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoVGFiLlRSQU5TSVRJT05fRFVSQVRJT04pIDpcbiAgICAgIG5leHQoKVxuXG4gICAgJGFjdGl2ZS5yZW1vdmVDbGFzcygnaW4nKVxuICB9XG5cblxuICAvLyBUQUIgUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKVxuICAgICAgdmFyIGRhdGEgID0gJHRoaXMuZGF0YSgnYnMudGFiJylcblxuICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy50YWInLCAoZGF0YSA9IG5ldyBUYWIodGhpcykpKVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXG4gICAgfSlcbiAgfVxuXG4gIHZhciBvbGQgPSAkLmZuLnRhYlxuXG4gICQuZm4udGFiICAgICAgICAgICAgID0gUGx1Z2luXG4gICQuZm4udGFiLkNvbnN0cnVjdG9yID0gVGFiXG5cblxuICAvLyBUQUIgTk8gQ09ORkxJQ1RcbiAgLy8gPT09PT09PT09PT09PT09XG5cbiAgJC5mbi50YWIubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuLnRhYiA9IG9sZFxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuXG4gIC8vIFRBQiBEQVRBLUFQSVxuICAvLyA9PT09PT09PT09PT1cblxuICB2YXIgY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBQbHVnaW4uY2FsbCgkKHRoaXMpLCAnc2hvdycpXG4gIH1cblxuICAkKGRvY3VtZW50KVxuICAgIC5vbignY2xpY2suYnMudGFiLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScsIGNsaWNrSGFuZGxlcilcbiAgICAub24oJ2NsaWNrLmJzLnRhYi5kYXRhLWFwaScsICdbZGF0YS10b2dnbGU9XCJwaWxsXCJdJywgY2xpY2tIYW5kbGVyKVxuXG59KGpRdWVyeSk7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQm9vdHN0cmFwOiBhZmZpeC5qcyB2My4zLjZcbiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2FmZml4XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHlyaWdodCAyMDExLTIwMTUgVHdpdHRlciwgSW5jLlxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5cbitmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gQUZGSVggQ0xBU1MgREVGSU5JVElPTlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIEFmZml4ID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQWZmaXguREVGQVVMVFMsIG9wdGlvbnMpXG5cbiAgICB0aGlzLiR0YXJnZXQgPSAkKHRoaXMub3B0aW9ucy50YXJnZXQpXG4gICAgICAub24oJ3Njcm9sbC5icy5hZmZpeC5kYXRhLWFwaScsICQucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLCB0aGlzKSlcbiAgICAgIC5vbignY2xpY2suYnMuYWZmaXguZGF0YS1hcGknLCAgJC5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wLCB0aGlzKSlcblxuICAgIHRoaXMuJGVsZW1lbnQgICAgID0gJChlbGVtZW50KVxuICAgIHRoaXMuYWZmaXhlZCAgICAgID0gbnVsbFxuICAgIHRoaXMudW5waW4gICAgICAgID0gbnVsbFxuICAgIHRoaXMucGlubmVkT2Zmc2V0ID0gbnVsbFxuXG4gICAgdGhpcy5jaGVja1Bvc2l0aW9uKClcbiAgfVxuXG4gIEFmZml4LlZFUlNJT04gID0gJzMuMy42J1xuXG4gIEFmZml4LlJFU0VUICAgID0gJ2FmZml4IGFmZml4LXRvcCBhZmZpeC1ib3R0b20nXG5cbiAgQWZmaXguREVGQVVMVFMgPSB7XG4gICAgb2Zmc2V0OiAwLFxuICAgIHRhcmdldDogd2luZG93XG4gIH1cblxuICBBZmZpeC5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoc2Nyb2xsSGVpZ2h0LCBoZWlnaHQsIG9mZnNldFRvcCwgb2Zmc2V0Qm90dG9tKSB7XG4gICAgdmFyIHNjcm9sbFRvcCAgICA9IHRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKVxuICAgIHZhciBwb3NpdGlvbiAgICAgPSB0aGlzLiRlbGVtZW50Lm9mZnNldCgpXG4gICAgdmFyIHRhcmdldEhlaWdodCA9IHRoaXMuJHRhcmdldC5oZWlnaHQoKVxuXG4gICAgaWYgKG9mZnNldFRvcCAhPSBudWxsICYmIHRoaXMuYWZmaXhlZCA9PSAndG9wJykgcmV0dXJuIHNjcm9sbFRvcCA8IG9mZnNldFRvcCA/ICd0b3AnIDogZmFsc2VcblxuICAgIGlmICh0aGlzLmFmZml4ZWQgPT0gJ2JvdHRvbScpIHtcbiAgICAgIGlmIChvZmZzZXRUb3AgIT0gbnVsbCkgcmV0dXJuIChzY3JvbGxUb3AgKyB0aGlzLnVucGluIDw9IHBvc2l0aW9uLnRvcCkgPyBmYWxzZSA6ICdib3R0b20nXG4gICAgICByZXR1cm4gKHNjcm9sbFRvcCArIHRhcmdldEhlaWdodCA8PSBzY3JvbGxIZWlnaHQgLSBvZmZzZXRCb3R0b20pID8gZmFsc2UgOiAnYm90dG9tJ1xuICAgIH1cblxuICAgIHZhciBpbml0aWFsaXppbmcgICA9IHRoaXMuYWZmaXhlZCA9PSBudWxsXG4gICAgdmFyIGNvbGxpZGVyVG9wICAgID0gaW5pdGlhbGl6aW5nID8gc2Nyb2xsVG9wIDogcG9zaXRpb24udG9wXG4gICAgdmFyIGNvbGxpZGVySGVpZ2h0ID0gaW5pdGlhbGl6aW5nID8gdGFyZ2V0SGVpZ2h0IDogaGVpZ2h0XG5cbiAgICBpZiAob2Zmc2V0VG9wICE9IG51bGwgJiYgc2Nyb2xsVG9wIDw9IG9mZnNldFRvcCkgcmV0dXJuICd0b3AnXG4gICAgaWYgKG9mZnNldEJvdHRvbSAhPSBudWxsICYmIChjb2xsaWRlclRvcCArIGNvbGxpZGVySGVpZ2h0ID49IHNjcm9sbEhlaWdodCAtIG9mZnNldEJvdHRvbSkpIHJldHVybiAnYm90dG9tJ1xuXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBBZmZpeC5wcm90b3R5cGUuZ2V0UGlubmVkT2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnBpbm5lZE9mZnNldCkgcmV0dXJuIHRoaXMucGlubmVkT2Zmc2V0XG4gICAgdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhBZmZpeC5SRVNFVCkuYWRkQ2xhc3MoJ2FmZml4JylcbiAgICB2YXIgc2Nyb2xsVG9wID0gdGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpXG4gICAgdmFyIHBvc2l0aW9uICA9IHRoaXMuJGVsZW1lbnQub2Zmc2V0KClcbiAgICByZXR1cm4gKHRoaXMucGlubmVkT2Zmc2V0ID0gcG9zaXRpb24udG9wIC0gc2Nyb2xsVG9wKVxuICB9XG5cbiAgQWZmaXgucHJvdG90eXBlLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wID0gZnVuY3Rpb24gKCkge1xuICAgIHNldFRpbWVvdXQoJC5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb24sIHRoaXMpLCAxKVxuICB9XG5cbiAgQWZmaXgucHJvdG90eXBlLmNoZWNrUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLiRlbGVtZW50LmlzKCc6dmlzaWJsZScpKSByZXR1cm5cblxuICAgIHZhciBoZWlnaHQgICAgICAgPSB0aGlzLiRlbGVtZW50LmhlaWdodCgpXG4gICAgdmFyIG9mZnNldCAgICAgICA9IHRoaXMub3B0aW9ucy5vZmZzZXRcbiAgICB2YXIgb2Zmc2V0VG9wICAgID0gb2Zmc2V0LnRvcFxuICAgIHZhciBvZmZzZXRCb3R0b20gPSBvZmZzZXQuYm90dG9tXG4gICAgdmFyIHNjcm9sbEhlaWdodCA9IE1hdGgubWF4KCQoZG9jdW1lbnQpLmhlaWdodCgpLCAkKGRvY3VtZW50LmJvZHkpLmhlaWdodCgpKVxuXG4gICAgaWYgKHR5cGVvZiBvZmZzZXQgIT0gJ29iamVjdCcpICAgICAgICAgb2Zmc2V0Qm90dG9tID0gb2Zmc2V0VG9wID0gb2Zmc2V0XG4gICAgaWYgKHR5cGVvZiBvZmZzZXRUb3AgPT0gJ2Z1bmN0aW9uJykgICAgb2Zmc2V0VG9wICAgID0gb2Zmc2V0LnRvcCh0aGlzLiRlbGVtZW50KVxuICAgIGlmICh0eXBlb2Ygb2Zmc2V0Qm90dG9tID09ICdmdW5jdGlvbicpIG9mZnNldEJvdHRvbSA9IG9mZnNldC5ib3R0b20odGhpcy4kZWxlbWVudClcblxuICAgIHZhciBhZmZpeCA9IHRoaXMuZ2V0U3RhdGUoc2Nyb2xsSGVpZ2h0LCBoZWlnaHQsIG9mZnNldFRvcCwgb2Zmc2V0Qm90dG9tKVxuXG4gICAgaWYgKHRoaXMuYWZmaXhlZCAhPSBhZmZpeCkge1xuICAgICAgaWYgKHRoaXMudW5waW4gIT0gbnVsbCkgdGhpcy4kZWxlbWVudC5jc3MoJ3RvcCcsICcnKVxuXG4gICAgICB2YXIgYWZmaXhUeXBlID0gJ2FmZml4JyArIChhZmZpeCA/ICctJyArIGFmZml4IDogJycpXG4gICAgICB2YXIgZSAgICAgICAgID0gJC5FdmVudChhZmZpeFR5cGUgKyAnLmJzLmFmZml4JylcblxuICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpXG5cbiAgICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm5cblxuICAgICAgdGhpcy5hZmZpeGVkID0gYWZmaXhcbiAgICAgIHRoaXMudW5waW4gPSBhZmZpeCA9PSAnYm90dG9tJyA/IHRoaXMuZ2V0UGlubmVkT2Zmc2V0KCkgOiBudWxsXG5cbiAgICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgICAgLnJlbW92ZUNsYXNzKEFmZml4LlJFU0VUKVxuICAgICAgICAuYWRkQ2xhc3MoYWZmaXhUeXBlKVxuICAgICAgICAudHJpZ2dlcihhZmZpeFR5cGUucmVwbGFjZSgnYWZmaXgnLCAnYWZmaXhlZCcpICsgJy5icy5hZmZpeCcpXG4gICAgfVxuXG4gICAgaWYgKGFmZml4ID09ICdib3R0b20nKSB7XG4gICAgICB0aGlzLiRlbGVtZW50Lm9mZnNldCh7XG4gICAgICAgIHRvcDogc2Nyb2xsSGVpZ2h0IC0gaGVpZ2h0IC0gb2Zmc2V0Qm90dG9tXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG5cbiAgLy8gQUZGSVggUExVR0lOIERFRklOSVRJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcbiAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuYWZmaXgnKVxuICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvblxuXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmFmZml4JywgKGRhdGEgPSBuZXcgQWZmaXgodGhpcywgb3B0aW9ucykpKVxuICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpXG4gICAgfSlcbiAgfVxuXG4gIHZhciBvbGQgPSAkLmZuLmFmZml4XG5cbiAgJC5mbi5hZmZpeCAgICAgICAgICAgICA9IFBsdWdpblxuICAkLmZuLmFmZml4LkNvbnN0cnVjdG9yID0gQWZmaXhcblxuXG4gIC8vIEFGRklYIE5PIENPTkZMSUNUXG4gIC8vID09PT09PT09PT09PT09PT09XG5cbiAgJC5mbi5hZmZpeC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm4uYWZmaXggPSBvbGRcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvLyBBRkZJWCBEQVRBLUFQSVxuICAvLyA9PT09PT09PT09PT09PVxuXG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAkKCdbZGF0YS1zcHk9XCJhZmZpeFwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICRzcHkgPSAkKHRoaXMpXG4gICAgICB2YXIgZGF0YSA9ICRzcHkuZGF0YSgpXG5cbiAgICAgIGRhdGEub2Zmc2V0ID0gZGF0YS5vZmZzZXQgfHwge31cblxuICAgICAgaWYgKGRhdGEub2Zmc2V0Qm90dG9tICE9IG51bGwpIGRhdGEub2Zmc2V0LmJvdHRvbSA9IGRhdGEub2Zmc2V0Qm90dG9tXG4gICAgICBpZiAoZGF0YS5vZmZzZXRUb3AgICAgIT0gbnVsbCkgZGF0YS5vZmZzZXQudG9wICAgID0gZGF0YS5vZmZzZXRUb3BcblxuICAgICAgUGx1Z2luLmNhbGwoJHNweSwgZGF0YSlcbiAgICB9KVxuICB9KVxuXG59KGpRdWVyeSk7XG4iLCIiLCIoZnVuY3Rpb24oKXtmdW5jdGlvbiBvKG4pe3ZhciBpPWU7biYmKGVbbl18fChlW25dPXt9KSxpPWVbbl0pO2lmKCFpLmRlZmluZXx8IWkuZGVmaW5lLnBhY2thZ2VkKXQub3JpZ2luYWw9aS5kZWZpbmUsaS5kZWZpbmU9dCxpLmRlZmluZS5wYWNrYWdlZD0hMDtpZighaS5yZXF1aXJlfHwhaS5yZXF1aXJlLnBhY2thZ2VkKXIub3JpZ2luYWw9aS5yZXF1aXJlLGkucmVxdWlyZT1yLGkucmVxdWlyZS5wYWNrYWdlZD0hMH12YXIgQUNFX05BTUVTUEFDRT1cIlwiLGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTshZSYmdHlwZW9mIHdpbmRvdyE9XCJ1bmRlZmluZWRcIiYmKGU9d2luZG93KTtpZighQUNFX05BTUVTUEFDRSYmdHlwZW9mIHJlcXVpcmVqcyE9XCJ1bmRlZmluZWRcIilyZXR1cm47dmFyIHQ9ZnVuY3Rpb24oZSxuLHIpe2lmKHR5cGVvZiBlIT1cInN0cmluZ1wiKXt0Lm9yaWdpbmFsP3Qub3JpZ2luYWwuYXBwbHkodGhpcyxhcmd1bWVudHMpOihjb25zb2xlLmVycm9yKFwiZHJvcHBpbmcgbW9kdWxlIGJlY2F1c2UgZGVmaW5lIHdhc24ndCBhIHN0cmluZy5cIiksY29uc29sZS50cmFjZSgpKTtyZXR1cm59YXJndW1lbnRzLmxlbmd0aD09MiYmKHI9biksdC5tb2R1bGVzW2VdfHwodC5wYXlsb2Fkc1tlXT1yLHQubW9kdWxlc1tlXT1udWxsKX07dC5tb2R1bGVzPXt9LHQucGF5bG9hZHM9e307dmFyIG49ZnVuY3Rpb24oZSx0LG4pe2lmKHR5cGVvZiB0PT1cInN0cmluZ1wiKXt2YXIgaT1zKGUsdCk7aWYoaSE9dW5kZWZpbmVkKXJldHVybiBuJiZuKCksaX1lbHNlIGlmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KT09PVwiW29iamVjdCBBcnJheV1cIil7dmFyIG89W107Zm9yKHZhciB1PTAsYT10Lmxlbmd0aDt1PGE7Kyt1KXt2YXIgZj1zKGUsdFt1XSk7aWYoZj09dW5kZWZpbmVkJiZyLm9yaWdpbmFsKXJldHVybjtvLnB1c2goZil9cmV0dXJuIG4mJm4uYXBwbHkobnVsbCxvKXx8ITB9fSxyPWZ1bmN0aW9uKGUsdCl7dmFyIGk9bihcIlwiLGUsdCk7cmV0dXJuIGk9PXVuZGVmaW5lZCYmci5vcmlnaW5hbD9yLm9yaWdpbmFsLmFwcGx5KHRoaXMsYXJndW1lbnRzKTppfSxpPWZ1bmN0aW9uKGUsdCl7aWYodC5pbmRleE9mKFwiIVwiKSE9PS0xKXt2YXIgbj10LnNwbGl0KFwiIVwiKTtyZXR1cm4gaShlLG5bMF0pK1wiIVwiK2koZSxuWzFdKX1pZih0LmNoYXJBdCgwKT09XCIuXCIpe3ZhciByPWUuc3BsaXQoXCIvXCIpLnNsaWNlKDAsLTEpLmpvaW4oXCIvXCIpO3Q9citcIi9cIit0O3doaWxlKHQuaW5kZXhPZihcIi5cIikhPT0tMSYmcyE9dCl7dmFyIHM9dDt0PXQucmVwbGFjZSgvXFwvXFwuXFwvLyxcIi9cIikucmVwbGFjZSgvW15cXC9dK1xcL1xcLlxcLlxcLy8sXCJcIil9fXJldHVybiB0fSxzPWZ1bmN0aW9uKGUscil7cj1pKGUscik7dmFyIHM9dC5tb2R1bGVzW3JdO2lmKCFzKXtzPXQucGF5bG9hZHNbcl07aWYodHlwZW9mIHM9PVwiZnVuY3Rpb25cIil7dmFyIG89e30sdT17aWQ6cix1cmk6XCJcIixleHBvcnRzOm8scGFja2FnZWQ6ITB9LGE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbihyLGUsdCl9LGY9cyhhLG8sdSk7bz1mfHx1LmV4cG9ydHMsdC5tb2R1bGVzW3JdPW8sZGVsZXRlIHQucGF5bG9hZHNbcl19cz10Lm1vZHVsZXNbcl09b3x8c31yZXR1cm4gc307byhBQ0VfTkFNRVNQQUNFKX0pKCksZGVmaW5lKFwiYWNlL2xpYi9yZWdleHBcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSl7cmV0dXJuKGUuZ2xvYmFsP1wiZ1wiOlwiXCIpKyhlLmlnbm9yZUNhc2U/XCJpXCI6XCJcIikrKGUubXVsdGlsaW5lP1wibVwiOlwiXCIpKyhlLmV4dGVuZGVkP1wieFwiOlwiXCIpKyhlLnN0aWNreT9cInlcIjpcIlwiKX1mdW5jdGlvbiB1KGUsdCxuKXtpZihBcnJheS5wcm90b3R5cGUuaW5kZXhPZilyZXR1cm4gZS5pbmRleE9mKHQsbik7Zm9yKHZhciByPW58fDA7cjxlLmxlbmd0aDtyKyspaWYoZVtyXT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9dmFyIHI9e2V4ZWM6UmVnRXhwLnByb3RvdHlwZS5leGVjLHRlc3Q6UmVnRXhwLnByb3RvdHlwZS50ZXN0LG1hdGNoOlN0cmluZy5wcm90b3R5cGUubWF0Y2gscmVwbGFjZTpTdHJpbmcucHJvdG90eXBlLnJlcGxhY2Usc3BsaXQ6U3RyaW5nLnByb3RvdHlwZS5zcGxpdH0saT1yLmV4ZWMuY2FsbCgvKCk/Py8sXCJcIilbMV09PT11bmRlZmluZWQscz1mdW5jdGlvbigpe3ZhciBlPS9eL2c7cmV0dXJuIHIudGVzdC5jYWxsKGUsXCJcIiksIWUubGFzdEluZGV4fSgpO2lmKHMmJmkpcmV0dXJuO1JlZ0V4cC5wcm90b3R5cGUuZXhlYz1mdW5jdGlvbihlKXt2YXIgdD1yLmV4ZWMuYXBwbHkodGhpcyxhcmd1bWVudHMpLG4sYTtpZih0eXBlb2YgZT09XCJzdHJpbmdcIiYmdCl7IWkmJnQubGVuZ3RoPjEmJnUodCxcIlwiKT4tMSYmKGE9UmVnRXhwKHRoaXMuc291cmNlLHIucmVwbGFjZS5jYWxsKG8odGhpcyksXCJnXCIsXCJcIikpLHIucmVwbGFjZS5jYWxsKGUuc2xpY2UodC5pbmRleCksYSxmdW5jdGlvbigpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aC0yO2UrKylhcmd1bWVudHNbZV09PT11bmRlZmluZWQmJih0W2VdPXVuZGVmaW5lZCl9KSk7aWYodGhpcy5feHJlZ2V4cCYmdGhpcy5feHJlZ2V4cC5jYXB0dXJlTmFtZXMpZm9yKHZhciBmPTE7Zjx0Lmxlbmd0aDtmKyspbj10aGlzLl94cmVnZXhwLmNhcHR1cmVOYW1lc1tmLTFdLG4mJih0W25dPXRbZl0pOyFzJiZ0aGlzLmdsb2JhbCYmIXRbMF0ubGVuZ3RoJiZ0aGlzLmxhc3RJbmRleD50LmluZGV4JiZ0aGlzLmxhc3RJbmRleC0tfXJldHVybiB0fSxzfHwoUmVnRXhwLnByb3RvdHlwZS50ZXN0PWZ1bmN0aW9uKGUpe3ZhciB0PXIuZXhlYy5jYWxsKHRoaXMsZSk7cmV0dXJuIHQmJnRoaXMuZ2xvYmFsJiYhdFswXS5sZW5ndGgmJnRoaXMubGFzdEluZGV4PnQuaW5kZXgmJnRoaXMubGFzdEluZGV4LS0sISF0fSl9KSxkZWZpbmUoXCJhY2UvbGliL2VzNS1zaGltXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCJdLGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKCl7fWZ1bmN0aW9uIHcoZSl7dHJ5e3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcInNlbnRpbmVsXCIse30pLFwic2VudGluZWxcImluIGV9Y2F0Y2godCl7fX1mdW5jdGlvbiBIKGUpe3JldHVybiBlPStlLGUhPT1lP2U9MDplIT09MCYmZSE9PTEvMCYmZSE9PS0xLzAmJihlPShlPjB8fC0xKSpNYXRoLmZsb29yKE1hdGguYWJzKGUpKSksZX1mdW5jdGlvbiBCKGUpe3ZhciB0PXR5cGVvZiBlO3JldHVybiBlPT09bnVsbHx8dD09PVwidW5kZWZpbmVkXCJ8fHQ9PT1cImJvb2xlYW5cInx8dD09PVwibnVtYmVyXCJ8fHQ9PT1cInN0cmluZ1wifWZ1bmN0aW9uIGooZSl7dmFyIHQsbixyO2lmKEIoZSkpcmV0dXJuIGU7bj1lLnZhbHVlT2Y7aWYodHlwZW9mIG49PVwiZnVuY3Rpb25cIil7dD1uLmNhbGwoZSk7aWYoQih0KSlyZXR1cm4gdH1yPWUudG9TdHJpbmc7aWYodHlwZW9mIHI9PVwiZnVuY3Rpb25cIil7dD1yLmNhbGwoZSk7aWYoQih0KSlyZXR1cm4gdH10aHJvdyBuZXcgVHlwZUVycm9yfUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcztpZih0eXBlb2YgbiE9XCJmdW5jdGlvblwiKXRocm93IG5ldyBUeXBlRXJyb3IoXCJGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBjYWxsZWQgb24gaW5jb21wYXRpYmxlIFwiK24pO3ZhciBpPXUuY2FsbChhcmd1bWVudHMsMSkscz1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBzKXt2YXIgZT1uLmFwcGx5KHRoaXMsaS5jb25jYXQodS5jYWxsKGFyZ3VtZW50cykpKTtyZXR1cm4gT2JqZWN0KGUpPT09ZT9lOnRoaXN9cmV0dXJuIG4uYXBwbHkodCxpLmNvbmNhdCh1LmNhbGwoYXJndW1lbnRzKSkpfTtyZXR1cm4gbi5wcm90b3R5cGUmJihyLnByb3RvdHlwZT1uLnByb3RvdHlwZSxzLnByb3RvdHlwZT1uZXcgcixyLnByb3RvdHlwZT1udWxsKSxzfSk7dmFyIGk9RnVuY3Rpb24ucHJvdG90eXBlLmNhbGwscz1BcnJheS5wcm90b3R5cGUsbz1PYmplY3QucHJvdG90eXBlLHU9cy5zbGljZSxhPWkuYmluZChvLnRvU3RyaW5nKSxmPWkuYmluZChvLmhhc093blByb3BlcnR5KSxsLGMsaCxwLGQ7aWYoZD1mKG8sXCJfX2RlZmluZUdldHRlcl9fXCIpKWw9aS5iaW5kKG8uX19kZWZpbmVHZXR0ZXJfXyksYz1pLmJpbmQoby5fX2RlZmluZVNldHRlcl9fKSxoPWkuYmluZChvLl9fbG9va3VwR2V0dGVyX18pLHA9aS5iaW5kKG8uX19sb29rdXBTZXR0ZXJfXyk7aWYoWzEsMl0uc3BsaWNlKDApLmxlbmd0aCE9MilpZighZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PW5ldyBBcnJheShlKzIpO3JldHVybiB0WzBdPXRbMV09MCx0fXZhciB0PVtdLG47dC5zcGxpY2UuYXBwbHkodCxlKDIwKSksdC5zcGxpY2UuYXBwbHkodCxlKDI2KSksbj10Lmxlbmd0aCx0LnNwbGljZSg1LDAsXCJYWFhcIiksbisxPT10Lmxlbmd0aDtpZihuKzE9PXQubGVuZ3RoKXJldHVybiEwfSgpKUFycmF5LnByb3RvdHlwZS5zcGxpY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmxlbmd0aDtlPjA/ZT5uJiYoZT1uKTplPT12b2lkIDA/ZT0wOmU8MCYmKGU9TWF0aC5tYXgobitlLDApKSxlK3Q8bnx8KHQ9bi1lKTt2YXIgcj10aGlzLnNsaWNlKGUsZSt0KSxpPXUuY2FsbChhcmd1bWVudHMsMikscz1pLmxlbmd0aDtpZihlPT09bilzJiZ0aGlzLnB1c2guYXBwbHkodGhpcyxpKTtlbHNle3ZhciBvPU1hdGgubWluKHQsbi1lKSxhPWUrbyxmPWErcy1vLGw9bi1hLGM9bi1vO2lmKGY8YSlmb3IodmFyIGg9MDtoPGw7KytoKXRoaXNbZitoXT10aGlzW2EraF07ZWxzZSBpZihmPmEpZm9yKGg9bDtoLS07KXRoaXNbZitoXT10aGlzW2EraF07aWYocyYmZT09PWMpdGhpcy5sZW5ndGg9Yyx0aGlzLnB1c2guYXBwbHkodGhpcyxpKTtlbHNle3RoaXMubGVuZ3RoPWMrcztmb3IoaD0wO2g8czsrK2gpdGhpc1tlK2hdPWlbaF19fXJldHVybiByfTtlbHNle3ZhciB2PUFycmF5LnByb3RvdHlwZS5zcGxpY2U7QXJyYXkucHJvdG90eXBlLnNwbGljZT1mdW5jdGlvbihlLHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP3YuYXBwbHkodGhpcyxbZT09PXZvaWQgMD8wOmUsdD09PXZvaWQgMD90aGlzLmxlbmd0aC1lOnRdLmNvbmNhdCh1LmNhbGwoYXJndW1lbnRzLDIpKSk6W119fUFycmF5LmlzQXJyYXl8fChBcnJheS5pc0FycmF5PWZ1bmN0aW9uKHQpe3JldHVybiBhKHQpPT1cIltvYmplY3QgQXJyYXldXCJ9KTt2YXIgbT1PYmplY3QoXCJhXCIpLGc9bVswXSE9XCJhXCJ8fCEoMCBpbiBtKTtBcnJheS5wcm90b3R5cGUuZm9yRWFjaHx8KEFycmF5LnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe3ZhciBuPUYodGhpcykscj1nJiZhKHRoaXMpPT1cIltvYmplY3QgU3RyaW5nXVwiP3RoaXMuc3BsaXQoXCJcIik6bixpPWFyZ3VtZW50c1sxXSxzPS0xLG89ci5sZW5ndGg+Pj4wO2lmKGEodCkhPVwiW29iamVjdCBGdW5jdGlvbl1cIil0aHJvdyBuZXcgVHlwZUVycm9yO3doaWxlKCsrczxvKXMgaW4gciYmdC5jYWxsKGkscltzXSxzLG4pfSksQXJyYXkucHJvdG90eXBlLm1hcHx8KEFycmF5LnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49Rih0aGlzKSxyPWcmJmEodGhpcyk9PVwiW29iamVjdCBTdHJpbmddXCI/dGhpcy5zcGxpdChcIlwiKTpuLGk9ci5sZW5ndGg+Pj4wLHM9QXJyYXkoaSksbz1hcmd1bWVudHNbMV07aWYoYSh0KSE9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiKXRocm93IG5ldyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtmb3IodmFyIHU9MDt1PGk7dSsrKXUgaW4gciYmKHNbdV09dC5jYWxsKG8sclt1XSx1LG4pKTtyZXR1cm4gc30pLEFycmF5LnByb3RvdHlwZS5maWx0ZXJ8fChBcnJheS5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKHQpe3ZhciBuPUYodGhpcykscj1nJiZhKHRoaXMpPT1cIltvYmplY3QgU3RyaW5nXVwiP3RoaXMuc3BsaXQoXCJcIik6bixpPXIubGVuZ3RoPj4+MCxzPVtdLG8sdT1hcmd1bWVudHNbMV07aWYoYSh0KSE9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiKXRocm93IG5ldyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtmb3IodmFyIGY9MDtmPGk7ZisrKWYgaW4gciYmKG89cltmXSx0LmNhbGwodSxvLGYsbikmJnMucHVzaChvKSk7cmV0dXJuIHN9KSxBcnJheS5wcm90b3R5cGUuZXZlcnl8fChBcnJheS5wcm90b3R5cGUuZXZlcnk9ZnVuY3Rpb24odCl7dmFyIG49Rih0aGlzKSxyPWcmJmEodGhpcyk9PVwiW29iamVjdCBTdHJpbmddXCI/dGhpcy5zcGxpdChcIlwiKTpuLGk9ci5sZW5ndGg+Pj4wLHM9YXJndW1lbnRzWzFdO2lmKGEodCkhPVwiW29iamVjdCBGdW5jdGlvbl1cIil0aHJvdyBuZXcgVHlwZUVycm9yKHQrXCIgaXMgbm90IGEgZnVuY3Rpb25cIik7Zm9yKHZhciBvPTA7bzxpO28rKylpZihvIGluIHImJiF0LmNhbGwocyxyW29dLG8sbikpcmV0dXJuITE7cmV0dXJuITB9KSxBcnJheS5wcm90b3R5cGUuc29tZXx8KEFycmF5LnByb3RvdHlwZS5zb21lPWZ1bmN0aW9uKHQpe3ZhciBuPUYodGhpcykscj1nJiZhKHRoaXMpPT1cIltvYmplY3QgU3RyaW5nXVwiP3RoaXMuc3BsaXQoXCJcIik6bixpPXIubGVuZ3RoPj4+MCxzPWFyZ3VtZW50c1sxXTtpZihhKHQpIT1cIltvYmplY3QgRnVuY3Rpb25dXCIpdGhyb3cgbmV3IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO2Zvcih2YXIgbz0wO288aTtvKyspaWYobyBpbiByJiZ0LmNhbGwocyxyW29dLG8sbikpcmV0dXJuITA7cmV0dXJuITF9KSxBcnJheS5wcm90b3R5cGUucmVkdWNlfHwoQXJyYXkucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbih0KXt2YXIgbj1GKHRoaXMpLHI9ZyYmYSh0aGlzKT09XCJbb2JqZWN0IFN0cmluZ11cIj90aGlzLnNwbGl0KFwiXCIpOm4saT1yLmxlbmd0aD4+PjA7aWYoYSh0KSE9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiKXRocm93IG5ldyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtpZighaSYmYXJndW1lbnRzLmxlbmd0aD09MSl0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVkdWNlIG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZVwiKTt2YXIgcz0wLG87aWYoYXJndW1lbnRzLmxlbmd0aD49MilvPWFyZ3VtZW50c1sxXTtlbHNlIGRve2lmKHMgaW4gcil7bz1yW3MrK107YnJlYWt9aWYoKytzPj1pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJyZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlXCIpfXdoaWxlKCEwKTtmb3IoO3M8aTtzKyspcyBpbiByJiYobz10LmNhbGwodm9pZCAwLG8scltzXSxzLG4pKTtyZXR1cm4gb30pLEFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodHx8KEFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodD1mdW5jdGlvbih0KXt2YXIgbj1GKHRoaXMpLHI9ZyYmYSh0aGlzKT09XCJbb2JqZWN0IFN0cmluZ11cIj90aGlzLnNwbGl0KFwiXCIpOm4saT1yLmxlbmd0aD4+PjA7aWYoYSh0KSE9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiKXRocm93IG5ldyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtpZighaSYmYXJndW1lbnRzLmxlbmd0aD09MSl0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVkdWNlUmlnaHQgb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlXCIpO3ZhciBzLG89aS0xO2lmKGFyZ3VtZW50cy5sZW5ndGg+PTIpcz1hcmd1bWVudHNbMV07ZWxzZSBkb3tpZihvIGluIHIpe3M9cltvLS1dO2JyZWFrfWlmKC0tbzwwKXRocm93IG5ldyBUeXBlRXJyb3IoXCJyZWR1Y2VSaWdodCBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIil9d2hpbGUoITApO2RvIG8gaW4gdGhpcyYmKHM9dC5jYWxsKHZvaWQgMCxzLHJbb10sbyxuKSk7d2hpbGUoby0tKTtyZXR1cm4gc30pO2lmKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8WzAsMV0uaW5kZXhPZigxLDIpIT0tMSlBcnJheS5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbih0KXt2YXIgbj1nJiZhKHRoaXMpPT1cIltvYmplY3QgU3RyaW5nXVwiP3RoaXMuc3BsaXQoXCJcIik6Rih0aGlzKSxyPW4ubGVuZ3RoPj4+MDtpZighcilyZXR1cm4tMTt2YXIgaT0wO2FyZ3VtZW50cy5sZW5ndGg+MSYmKGk9SChhcmd1bWVudHNbMV0pKSxpPWk+PTA/aTpNYXRoLm1heCgwLHIraSk7Zm9yKDtpPHI7aSsrKWlmKGkgaW4gbiYmbltpXT09PXQpcmV0dXJuIGk7cmV0dXJuLTF9O2lmKCFBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2Z8fFswLDFdLmxhc3RJbmRleE9mKDAsLTMpIT0tMSlBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2Y9ZnVuY3Rpb24odCl7dmFyIG49ZyYmYSh0aGlzKT09XCJbb2JqZWN0IFN0cmluZ11cIj90aGlzLnNwbGl0KFwiXCIpOkYodGhpcykscj1uLmxlbmd0aD4+PjA7aWYoIXIpcmV0dXJuLTE7dmFyIGk9ci0xO2FyZ3VtZW50cy5sZW5ndGg+MSYmKGk9TWF0aC5taW4oaSxIKGFyZ3VtZW50c1sxXSkpKSxpPWk+PTA/aTpyLU1hdGguYWJzKGkpO2Zvcig7aT49MDtpLS0paWYoaSBpbiBuJiZ0PT09bltpXSlyZXR1cm4gaTtyZXR1cm4tMX07T2JqZWN0LmdldFByb3RvdHlwZU9mfHwoT2JqZWN0LmdldFByb3RvdHlwZU9mPWZ1bmN0aW9uKHQpe3JldHVybiB0Ll9fcHJvdG9fX3x8KHQuY29uc3RydWN0b3I/dC5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6byl9KTtpZighT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcil7dmFyIHk9XCJPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIGNhbGxlZCBvbiBhIG5vbi1vYmplY3Q6IFwiO09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I9ZnVuY3Rpb24odCxuKXtpZih0eXBlb2YgdCE9XCJvYmplY3RcIiYmdHlwZW9mIHQhPVwiZnVuY3Rpb25cInx8dD09PW51bGwpdGhyb3cgbmV3IFR5cGVFcnJvcih5K3QpO2lmKCFmKHQsbikpcmV0dXJuO3ZhciByLGkscztyPXtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH07aWYoZCl7dmFyIHU9dC5fX3Byb3RvX187dC5fX3Byb3RvX189bzt2YXIgaT1oKHQsbikscz1wKHQsbik7dC5fX3Byb3RvX189dTtpZihpfHxzKXJldHVybiBpJiYoci5nZXQ9aSkscyYmKHIuc2V0PXMpLHJ9cmV0dXJuIHIudmFsdWU9dFtuXSxyfX1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc3x8KE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Qua2V5cyh0KX0pO2lmKCFPYmplY3QuY3JlYXRlKXt2YXIgYjtPYmplY3QucHJvdG90eXBlLl9fcHJvdG9fXz09PW51bGw/Yj1mdW5jdGlvbigpe3JldHVybntfX3Byb3RvX186bnVsbH19OmI9ZnVuY3Rpb24oKXt2YXIgZT17fTtmb3IodmFyIHQgaW4gZSllW3RdPW51bGw7cmV0dXJuIGUuY29uc3RydWN0b3I9ZS5oYXNPd25Qcm9wZXJ0eT1lLnByb3BlcnR5SXNFbnVtZXJhYmxlPWUuaXNQcm90b3R5cGVPZj1lLnRvTG9jYWxlU3RyaW5nPWUudG9TdHJpbmc9ZS52YWx1ZU9mPWUuX19wcm90b19fPW51bGwsZX0sT2JqZWN0LmNyZWF0ZT1mdW5jdGlvbih0LG4pe3ZhciByO2lmKHQ9PT1udWxsKXI9YigpO2Vsc2V7aWYodHlwZW9mIHQhPVwib2JqZWN0XCIpdGhyb3cgbmV3IFR5cGVFcnJvcihcInR5cGVvZiBwcm90b3R5cGVbXCIrdHlwZW9mIHQrXCJdICE9ICdvYmplY3QnXCIpO3ZhciBpPWZ1bmN0aW9uKCl7fTtpLnByb3RvdHlwZT10LHI9bmV3IGksci5fX3Byb3RvX189dH1yZXR1cm4gbiE9PXZvaWQgMCYmT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocixuKSxyfX1pZihPYmplY3QuZGVmaW5lUHJvcGVydHkpe3ZhciBFPXcoe30pLFM9dHlwZW9mIGRvY3VtZW50PT1cInVuZGVmaW5lZFwifHx3KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO2lmKCFFfHwhUyl2YXIgeD1PYmplY3QuZGVmaW5lUHJvcGVydHl9aWYoIU9iamVjdC5kZWZpbmVQcm9wZXJ0eXx8eCl7dmFyIFQ9XCJQcm9wZXJ0eSBkZXNjcmlwdGlvbiBtdXN0IGJlIGFuIG9iamVjdDogXCIsTj1cIk9iamVjdC5kZWZpbmVQcm9wZXJ0eSBjYWxsZWQgb24gbm9uLW9iamVjdDogXCIsQz1cImdldHRlcnMgJiBzZXR0ZXJzIGNhbiBub3QgYmUgZGVmaW5lZCBvbiB0aGlzIGphdmFzY3JpcHQgZW5naW5lXCI7T2JqZWN0LmRlZmluZVByb3BlcnR5PWZ1bmN0aW9uKHQsbixyKXtpZih0eXBlb2YgdCE9XCJvYmplY3RcIiYmdHlwZW9mIHQhPVwiZnVuY3Rpb25cInx8dD09PW51bGwpdGhyb3cgbmV3IFR5cGVFcnJvcihOK3QpO2lmKHR5cGVvZiByIT1cIm9iamVjdFwiJiZ0eXBlb2YgciE9XCJmdW5jdGlvblwifHxyPT09bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKFQrcik7aWYoeCl0cnl7cmV0dXJuIHguY2FsbChPYmplY3QsdCxuLHIpfWNhdGNoKGkpe31pZihmKHIsXCJ2YWx1ZVwiKSlpZihkJiYoaCh0LG4pfHxwKHQsbikpKXt2YXIgcz10Ll9fcHJvdG9fXzt0Ll9fcHJvdG9fXz1vLGRlbGV0ZSB0W25dLHRbbl09ci52YWx1ZSx0Ll9fcHJvdG9fXz1zfWVsc2UgdFtuXT1yLnZhbHVlO2Vsc2V7aWYoIWQpdGhyb3cgbmV3IFR5cGVFcnJvcihDKTtmKHIsXCJnZXRcIikmJmwodCxuLHIuZ2V0KSxmKHIsXCJzZXRcIikmJmModCxuLHIuc2V0KX1yZXR1cm4gdH19T2JqZWN0LmRlZmluZVByb3BlcnRpZXN8fChPYmplY3QuZGVmaW5lUHJvcGVydGllcz1mdW5jdGlvbih0LG4pe2Zvcih2YXIgciBpbiBuKWYobixyKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixuW3JdKTtyZXR1cm4gdH0pLE9iamVjdC5zZWFsfHwoT2JqZWN0LnNlYWw9ZnVuY3Rpb24odCl7cmV0dXJuIHR9KSxPYmplY3QuZnJlZXplfHwoT2JqZWN0LmZyZWV6ZT1mdW5jdGlvbih0KXtyZXR1cm4gdH0pO3RyeXtPYmplY3QuZnJlZXplKGZ1bmN0aW9uKCl7fSl9Y2F0Y2goayl7T2JqZWN0LmZyZWV6ZT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHR5cGVvZiBuPT1cImZ1bmN0aW9uXCI/bjp0KG4pfX0oT2JqZWN0LmZyZWV6ZSl9T2JqZWN0LnByZXZlbnRFeHRlbnNpb25zfHwoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zPWZ1bmN0aW9uKHQpe3JldHVybiB0fSksT2JqZWN0LmlzU2VhbGVkfHwoT2JqZWN0LmlzU2VhbGVkPWZ1bmN0aW9uKHQpe3JldHVybiExfSksT2JqZWN0LmlzRnJvemVufHwoT2JqZWN0LmlzRnJvemVuPWZ1bmN0aW9uKHQpe3JldHVybiExfSksT2JqZWN0LmlzRXh0ZW5zaWJsZXx8KE9iamVjdC5pc0V4dGVuc2libGU9ZnVuY3Rpb24odCl7aWYoT2JqZWN0KHQpPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yO3ZhciBuPVwiXCI7d2hpbGUoZih0LG4pKW4rPVwiP1wiO3Rbbl09ITA7dmFyIHI9Zih0LG4pO3JldHVybiBkZWxldGUgdFtuXSxyfSk7aWYoIU9iamVjdC5rZXlzKXt2YXIgTD0hMCxBPVtcInRvU3RyaW5nXCIsXCJ0b0xvY2FsZVN0cmluZ1wiLFwidmFsdWVPZlwiLFwiaGFzT3duUHJvcGVydHlcIixcImlzUHJvdG90eXBlT2ZcIixcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsXCJjb25zdHJ1Y3RvclwiXSxPPUEubGVuZ3RoO2Zvcih2YXIgTSBpbnt0b1N0cmluZzpudWxsfSlMPSExO09iamVjdC5rZXlzPWZ1bmN0aW9uIEkoZSl7aWYodHlwZW9mIGUhPVwib2JqZWN0XCImJnR5cGVvZiBlIT1cImZ1bmN0aW9uXCJ8fGU9PT1udWxsKXRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3Qua2V5cyBjYWxsZWQgb24gYSBub24tb2JqZWN0XCIpO3ZhciBJPVtdO2Zvcih2YXIgdCBpbiBlKWYoZSx0KSYmSS5wdXNoKHQpO2lmKEwpZm9yKHZhciBuPTAscj1PO248cjtuKyspe3ZhciBpPUFbbl07ZihlLGkpJiZJLnB1c2goaSl9cmV0dXJuIEl9fURhdGUubm93fHwoRGF0ZS5ub3c9ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX0pO3ZhciBfPVwiXHRcXG5cdTAwMGJcXGZcXHIgXFx1MDBhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOVxcdWZlZmZcIjtpZighU3RyaW5nLnByb3RvdHlwZS50cmltfHxfLnRyaW0oKSl7Xz1cIltcIitfK1wiXVwiO3ZhciBEPW5ldyBSZWdFeHAoXCJeXCIrXytfK1wiKlwiKSxQPW5ldyBSZWdFeHAoXytfK1wiKiRcIik7U3RyaW5nLnByb3RvdHlwZS50cmltPWZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZyh0aGlzKS5yZXBsYWNlKEQsXCJcIikucmVwbGFjZShQLFwiXCIpfX12YXIgRj1mdW5jdGlvbihlKXtpZihlPT1udWxsKXRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW4ndCBjb252ZXJ0IFwiK2UrXCIgdG8gb2JqZWN0XCIpO3JldHVybiBPYmplY3QoZSl9fSksZGVmaW5lKFwiYWNlL2xpYi9maXhvbGRicm93c2Vyc1wiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9yZWdleHBcIixcImFjZS9saWIvZXM1LXNoaW1cIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2UoXCIuL3JlZ2V4cFwiKSxlKFwiLi9lczUtc2hpbVwiKX0pLGRlZmluZShcImFjZS9saWIvZG9tXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIjt0LmdldERvY3VtZW50SGVhZD1mdW5jdGlvbihlKXtyZXR1cm4gZXx8KGU9ZG9jdW1lbnQpLGUuaGVhZHx8ZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF18fGUuZG9jdW1lbnRFbGVtZW50fSx0LmNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh0fHxyLGUpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZSl9LHQuaGFzQ3NzQ2xhc3M9ZnVuY3Rpb24oZSx0KXt2YXIgbj0oZS5jbGFzc05hbWV8fFwiXCIpLnNwbGl0KC9cXHMrL2cpO3JldHVybiBuLmluZGV4T2YodCkhPT0tMX0sdC5hZGRDc3NDbGFzcz1mdW5jdGlvbihlLG4pe3QuaGFzQ3NzQ2xhc3MoZSxuKXx8KGUuY2xhc3NOYW1lKz1cIiBcIituKX0sdC5yZW1vdmVDc3NDbGFzcz1mdW5jdGlvbihlLHQpe3ZhciBuPWUuY2xhc3NOYW1lLnNwbGl0KC9cXHMrL2cpO2Zvcig7Oyl7dmFyIHI9bi5pbmRleE9mKHQpO2lmKHI9PS0xKWJyZWFrO24uc3BsaWNlKHIsMSl9ZS5jbGFzc05hbWU9bi5qb2luKFwiIFwiKX0sdC50b2dnbGVDc3NDbGFzcz1mdW5jdGlvbihlLHQpe3ZhciBuPWUuY2xhc3NOYW1lLnNwbGl0KC9cXHMrL2cpLHI9ITA7Zm9yKDs7KXt2YXIgaT1uLmluZGV4T2YodCk7aWYoaT09LTEpYnJlYWs7cj0hMSxuLnNwbGljZShpLDEpfXJldHVybiByJiZuLnB1c2godCksZS5jbGFzc05hbWU9bi5qb2luKFwiIFwiKSxyfSx0LnNldENzc0NsYXNzPWZ1bmN0aW9uKGUsbixyKXtyP3QuYWRkQ3NzQ2xhc3MoZSxuKTp0LnJlbW92ZUNzc0NsYXNzKGUsbil9LHQuaGFzQ3NzU3RyaW5nPWZ1bmN0aW9uKGUsdCl7dmFyIG49MCxyO3Q9dHx8ZG9jdW1lbnQ7aWYodC5jcmVhdGVTdHlsZVNoZWV0JiYocj10LnN0eWxlU2hlZXRzKSl7d2hpbGUobjxyLmxlbmd0aClpZihyW24rK10ub3duaW5nRWxlbWVudC5pZD09PWUpcmV0dXJuITB9ZWxzZSBpZihyPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHlsZVwiKSl3aGlsZShuPHIubGVuZ3RoKWlmKHJbbisrXS5pZD09PWUpcmV0dXJuITA7cmV0dXJuITF9LHQuaW1wb3J0Q3NzU3RyaW5nPWZ1bmN0aW9uKG4scixpKXtpPWl8fGRvY3VtZW50O2lmKHImJnQuaGFzQ3NzU3RyaW5nKHIsaSkpcmV0dXJuIG51bGw7dmFyIHM7ciYmKG4rPVwiXFxuLyojIHNvdXJjZVVSTD1hY2UvY3NzL1wiK3IrXCIgKi9cIiksaS5jcmVhdGVTdHlsZVNoZWV0PyhzPWkuY3JlYXRlU3R5bGVTaGVldCgpLHMuY3NzVGV4dD1uLHImJihzLm93bmluZ0VsZW1lbnQuaWQ9cikpOihzPXQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLHMuYXBwZW5kQ2hpbGQoaS5jcmVhdGVUZXh0Tm9kZShuKSksciYmKHMuaWQ9ciksdC5nZXREb2N1bWVudEhlYWQoaSkuYXBwZW5kQ2hpbGQocykpfSx0LmltcG9ydENzc1N0eWxzaGVldD1mdW5jdGlvbihlLG4pe2lmKG4uY3JlYXRlU3R5bGVTaGVldCluLmNyZWF0ZVN0eWxlU2hlZXQoZSk7ZWxzZXt2YXIgcj10LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO3IucmVsPVwic3R5bGVzaGVldFwiLHIuaHJlZj1lLHQuZ2V0RG9jdW1lbnRIZWFkKG4pLmFwcGVuZENoaWxkKHIpfX0sdC5nZXRJbm5lcldpZHRoPWZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludCh0LmNvbXB1dGVkU3R5bGUoZSxcInBhZGRpbmdMZWZ0XCIpLDEwKStwYXJzZUludCh0LmNvbXB1dGVkU3R5bGUoZSxcInBhZGRpbmdSaWdodFwiKSwxMCkrZS5jbGllbnRXaWR0aH0sdC5nZXRJbm5lckhlaWdodD1mdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQodC5jb21wdXRlZFN0eWxlKGUsXCJwYWRkaW5nVG9wXCIpLDEwKStwYXJzZUludCh0LmNvbXB1dGVkU3R5bGUoZSxcInBhZGRpbmdCb3R0b21cIiksMTApK2UuY2xpZW50SGVpZ2h0fSx0LnNjcm9sbGJhcldpZHRoPWZ1bmN0aW9uKGUpe3ZhciBuPXQuY3JlYXRlRWxlbWVudChcImFjZV9pbm5lclwiKTtuLnN0eWxlLndpZHRoPVwiMTAwJVwiLG4uc3R5bGUubWluV2lkdGg9XCIwcHhcIixuLnN0eWxlLmhlaWdodD1cIjIwMHB4XCIsbi5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjt2YXIgcj10LmNyZWF0ZUVsZW1lbnQoXCJhY2Vfb3V0ZXJcIiksaT1yLnN0eWxlO2kucG9zaXRpb249XCJhYnNvbHV0ZVwiLGkubGVmdD1cIi0xMDAwMHB4XCIsaS5vdmVyZmxvdz1cImhpZGRlblwiLGkud2lkdGg9XCIyMDBweFwiLGkubWluV2lkdGg9XCIwcHhcIixpLmhlaWdodD1cIjE1MHB4XCIsaS5kaXNwbGF5PVwiYmxvY2tcIixyLmFwcGVuZENoaWxkKG4pO3ZhciBzPWUuZG9jdW1lbnRFbGVtZW50O3MuYXBwZW5kQ2hpbGQocik7dmFyIG89bi5vZmZzZXRXaWR0aDtpLm92ZXJmbG93PVwic2Nyb2xsXCI7dmFyIHU9bi5vZmZzZXRXaWR0aDtyZXR1cm4gbz09dSYmKHU9ci5jbGllbnRXaWR0aCkscy5yZW1vdmVDaGlsZChyKSxvLXV9O2lmKHR5cGVvZiBkb2N1bWVudD09XCJ1bmRlZmluZWRcIil7dC5pbXBvcnRDc3NTdHJpbmc9ZnVuY3Rpb24oKXt9O3JldHVybn13aW5kb3cucGFnZVlPZmZzZXQhPT11bmRlZmluZWQ/KHQuZ2V0UGFnZVNjcm9sbFRvcD1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cucGFnZVlPZmZzZXR9LHQuZ2V0UGFnZVNjcm9sbExlZnQ9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LnBhZ2VYT2Zmc2V0fSk6KHQuZ2V0UGFnZVNjcm9sbFRvcD1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcH0sdC5nZXRQYWdlU2Nyb2xsTGVmdD1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnR9KSx3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZT90LmNvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD8od2luZG93LmdldENvbXB1dGVkU3R5bGUoZSxcIlwiKXx8e30pW3RdfHxcIlwiOndpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUsXCJcIil8fHt9fTp0LmNvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9lLmN1cnJlbnRTdHlsZVt0XTplLmN1cnJlbnRTdHlsZX0sdC5zZXRJbm5lckh0bWw9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNsb25lTm9kZSghMSk7cmV0dXJuIG4uaW5uZXJIVE1MPXQsZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuLGUpLG59LFwidGV4dENvbnRlbnRcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudD8odC5zZXRJbm5lclRleHQ9ZnVuY3Rpb24oZSx0KXtlLnRleHRDb250ZW50PXR9LHQuZ2V0SW5uZXJUZXh0PWZ1bmN0aW9uKGUpe3JldHVybiBlLnRleHRDb250ZW50fSk6KHQuc2V0SW5uZXJUZXh0PWZ1bmN0aW9uKGUsdCl7ZS5pbm5lclRleHQ9dH0sdC5nZXRJbm5lclRleHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJUZXh0fSksdC5nZXRQYXJlbnRXaW5kb3c9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGVmYXVsdFZpZXd8fGUucGFyZW50V2luZG93fX0pLGRlZmluZShcImFjZS9saWIvb29wXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt0LmluaGVyaXRzPWZ1bmN0aW9uKGUsdCl7ZS5zdXBlcl89dCxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KX0sdC5taXhpbj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX0sdC5pbXBsZW1lbnQ9ZnVuY3Rpb24oZSxuKXt0Lm1peGluKGUsbil9fSksZGVmaW5lKFwiYWNlL2xpYi9rZXlzXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvbGliL2ZpeG9sZGJyb3dzZXJzXCIsXCJhY2UvbGliL29vcFwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZShcIi4vZml4b2xkYnJvd3NlcnNcIik7dmFyIHI9ZShcIi4vb29wXCIpLGk9ZnVuY3Rpb24oKXt2YXIgZT17TU9ESUZJRVJfS0VZUzp7MTY6XCJTaGlmdFwiLDE3OlwiQ3RybFwiLDE4OlwiQWx0XCIsMjI0OlwiTWV0YVwifSxLRVlfTU9EUzp7Y3RybDoxLGFsdDoyLG9wdGlvbjoyLHNoaWZ0OjQsXCJzdXBlclwiOjgsbWV0YTo4LGNvbW1hbmQ6OCxjbWQ6OH0sRlVOQ1RJT05fS0VZUzp7ODpcIkJhY2tzcGFjZVwiLDk6XCJUYWJcIiwxMzpcIlJldHVyblwiLDE5OlwiUGF1c2VcIiwyNzpcIkVzY1wiLDMyOlwiU3BhY2VcIiwzMzpcIlBhZ2VVcFwiLDM0OlwiUGFnZURvd25cIiwzNTpcIkVuZFwiLDM2OlwiSG9tZVwiLDM3OlwiTGVmdFwiLDM4OlwiVXBcIiwzOTpcIlJpZ2h0XCIsNDA6XCJEb3duXCIsNDQ6XCJQcmludFwiLDQ1OlwiSW5zZXJ0XCIsNDY6XCJEZWxldGVcIiw5NjpcIk51bXBhZDBcIiw5NzpcIk51bXBhZDFcIiw5ODpcIk51bXBhZDJcIiw5OTpcIk51bXBhZDNcIiwxMDA6XCJOdW1wYWQ0XCIsMTAxOlwiTnVtcGFkNVwiLDEwMjpcIk51bXBhZDZcIiwxMDM6XCJOdW1wYWQ3XCIsMTA0OlwiTnVtcGFkOFwiLDEwNTpcIk51bXBhZDlcIixcIi0xM1wiOlwiTnVtcGFkRW50ZXJcIiwxMTI6XCJGMVwiLDExMzpcIkYyXCIsMTE0OlwiRjNcIiwxMTU6XCJGNFwiLDExNjpcIkY1XCIsMTE3OlwiRjZcIiwxMTg6XCJGN1wiLDExOTpcIkY4XCIsMTIwOlwiRjlcIiwxMjE6XCJGMTBcIiwxMjI6XCJGMTFcIiwxMjM6XCJGMTJcIiwxNDQ6XCJOdW1sb2NrXCIsMTQ1OlwiU2Nyb2xsbG9ja1wifSxQUklOVEFCTEVfS0VZUzp7MzI6XCIgXCIsNDg6XCIwXCIsNDk6XCIxXCIsNTA6XCIyXCIsNTE6XCIzXCIsNTI6XCI0XCIsNTM6XCI1XCIsNTQ6XCI2XCIsNTU6XCI3XCIsNTY6XCI4XCIsNTc6XCI5XCIsNTk6XCI7XCIsNjE6XCI9XCIsNjU6XCJhXCIsNjY6XCJiXCIsNjc6XCJjXCIsNjg6XCJkXCIsNjk6XCJlXCIsNzA6XCJmXCIsNzE6XCJnXCIsNzI6XCJoXCIsNzM6XCJpXCIsNzQ6XCJqXCIsNzU6XCJrXCIsNzY6XCJsXCIsNzc6XCJtXCIsNzg6XCJuXCIsNzk6XCJvXCIsODA6XCJwXCIsODE6XCJxXCIsODI6XCJyXCIsODM6XCJzXCIsODQ6XCJ0XCIsODU6XCJ1XCIsODY6XCJ2XCIsODc6XCJ3XCIsODg6XCJ4XCIsODk6XCJ5XCIsOTA6XCJ6XCIsMTA3OlwiK1wiLDEwOTpcIi1cIiwxMTA6XCIuXCIsMTg2OlwiO1wiLDE4NzpcIj1cIiwxODg6XCIsXCIsMTg5OlwiLVwiLDE5MDpcIi5cIiwxOTE6XCIvXCIsMTkyOlwiYFwiLDIxOTpcIltcIiwyMjA6XCJcXFxcXCIsMjIxOlwiXVwiLDIyMjpcIidcIiwxMTE6XCIvXCIsMTA2OlwiKlwifX0sdCxuO2ZvcihuIGluIGUuRlVOQ1RJT05fS0VZUyl0PWUuRlVOQ1RJT05fS0VZU1tuXS50b0xvd2VyQ2FzZSgpLGVbdF09cGFyc2VJbnQobiwxMCk7Zm9yKG4gaW4gZS5QUklOVEFCTEVfS0VZUyl0PWUuUFJJTlRBQkxFX0tFWVNbbl0udG9Mb3dlckNhc2UoKSxlW3RdPXBhcnNlSW50KG4sMTApO3JldHVybiByLm1peGluKGUsZS5NT0RJRklFUl9LRVlTKSxyLm1peGluKGUsZS5QUklOVEFCTEVfS0VZUyksci5taXhpbihlLGUuRlVOQ1RJT05fS0VZUyksZS5lbnRlcj1lW1wicmV0dXJuXCJdLGUuZXNjYXBlPWUuZXNjLGUuZGVsPWVbXCJkZWxldGVcIl0sZVsxNzNdPVwiLVwiLGZ1bmN0aW9uKCl7dmFyIHQ9W1wiY21kXCIsXCJjdHJsXCIsXCJhbHRcIixcInNoaWZ0XCJdO2Zvcih2YXIgbj1NYXRoLnBvdygyLHQubGVuZ3RoKTtuLS07KWUuS0VZX01PRFNbbl09dC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIG4mZS5LRVlfTU9EU1t0XX0pLmpvaW4oXCItXCIpK1wiLVwifSgpLGUuS0VZX01PRFNbMF09XCJcIixlLktFWV9NT0RTWy0xXT1cImlucHV0LVwiLGV9KCk7ci5taXhpbih0LGkpLHQua2V5Q29kZVRvU3RyaW5nPWZ1bmN0aW9uKGUpe3ZhciB0PWlbZV07cmV0dXJuIHR5cGVvZiB0IT1cInN0cmluZ1wiJiYodD1TdHJpbmcuZnJvbUNoYXJDb2RlKGUpKSx0LnRvTG93ZXJDYXNlKCl9fSksZGVmaW5lKFwiYWNlL2xpYi91c2VyYWdlbnRcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3QuT1M9e0xJTlVYOlwiTElOVVhcIixNQUM6XCJNQUNcIixXSU5ET1dTOlwiV0lORE9XU1wifSx0LmdldE9TPWZ1bmN0aW9uKCl7cmV0dXJuIHQuaXNNYWM/dC5PUy5NQUM6dC5pc0xpbnV4P3QuT1MuTElOVVg6dC5PUy5XSU5ET1dTfTtpZih0eXBlb2YgbmF2aWdhdG9yIT1cIm9iamVjdFwiKXJldHVybjt2YXIgcj0obmF2aWdhdG9yLnBsYXRmb3JtLm1hdGNoKC9tYWN8d2lufGxpbnV4L2kpfHxbXCJvdGhlclwiXSlbMF0udG9Mb3dlckNhc2UoKSxpPW5hdmlnYXRvci51c2VyQWdlbnQ7dC5pc1dpbj1yPT1cIndpblwiLHQuaXNNYWM9cj09XCJtYWNcIix0LmlzTGludXg9cj09XCJsaW51eFwiLHQuaXNJRT1uYXZpZ2F0b3IuYXBwTmFtZT09XCJNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXJcInx8bmF2aWdhdG9yLmFwcE5hbWUuaW5kZXhPZihcIk1TQXBwSG9zdFwiKT49MD9wYXJzZUZsb2F0KChpLm1hdGNoKC8oPzpNU0lFIHxUcmlkZW50XFwvWzAtOV0rW1xcLjAtOV0rOy4qcnY6KShbMC05XStbXFwuMC05XSspLyl8fFtdKVsxXSk6cGFyc2VGbG9hdCgoaS5tYXRjaCgvKD86VHJpZGVudFxcL1swLTldK1tcXC4wLTldKzsuKnJ2OikoWzAtOV0rW1xcLjAtOV0rKS8pfHxbXSlbMV0pLHQuaXNPbGRJRT10LmlzSUUmJnQuaXNJRTw5LHQuaXNHZWNrbz10LmlzTW96aWxsYT0od2luZG93LkNvbnRyb2xsZXJzfHx3aW5kb3cuY29udHJvbGxlcnMpJiZ3aW5kb3cubmF2aWdhdG9yLnByb2R1Y3Q9PT1cIkdlY2tvXCIsdC5pc09sZEdlY2tvPXQuaXNHZWNrbyYmcGFyc2VJbnQoKGkubWF0Y2goL3J2XFw6KFxcZCspLyl8fFtdKVsxXSwxMCk8NCx0LmlzT3BlcmE9d2luZG93Lm9wZXJhJiZPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93Lm9wZXJhKT09XCJbb2JqZWN0IE9wZXJhXVwiLHQuaXNXZWJLaXQ9cGFyc2VGbG9hdChpLnNwbGl0KFwiV2ViS2l0L1wiKVsxXSl8fHVuZGVmaW5lZCx0LmlzQ2hyb21lPXBhcnNlRmxvYXQoaS5zcGxpdChcIiBDaHJvbWUvXCIpWzFdKXx8dW5kZWZpbmVkLHQuaXNBSVI9aS5pbmRleE9mKFwiQWRvYmVBSVJcIik+PTAsdC5pc0lQYWQ9aS5pbmRleE9mKFwiaVBhZFwiKT49MCx0LmlzVG91Y2hQYWQ9aS5pbmRleE9mKFwiVG91Y2hQYWRcIik+PTAsdC5pc0Nocm9tZU9TPWkuaW5kZXhPZihcIiBDck9TIFwiKT49MH0pLGRlZmluZShcImFjZS9saWIvZXZlbnRcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIva2V5c1wiLFwiYWNlL2xpYi91c2VyYWdlbnRcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGEoZSx0LG4pe3ZhciBhPXUodCk7aWYoIWkuaXNNYWMmJnMpe3MuT1NLZXkmJihhfD04KTtpZihzLmFsdEdyKXtpZigoMyZhKT09MylyZXR1cm47cy5hbHRHcj0wfWlmKG49PT0xOHx8bj09PTE3KXt2YXIgZj1cImxvY2F0aW9uXCJpbiB0P3QubG9jYXRpb246dC5rZXlMb2NhdGlvbjtpZihuPT09MTcmJmY9PT0xKXNbbl09PTEmJihvPXQudGltZVN0YW1wKTtlbHNlIGlmKG49PT0xOCYmYT09PTMmJmY9PT0yKXt2YXIgbD10LnRpbWVTdGFtcC1vO2w8NTAmJihzLmFsdEdyPSEwKX19fW4gaW4gci5NT0RJRklFUl9LRVlTJiYobj0tMSksYSY4JiYobj09PTkxfHxuPT09OTIpJiYobj0tMSk7aWYoIWEmJm49PT0xMyl7dmFyIGY9XCJsb2NhdGlvblwiaW4gdD90LmxvY2F0aW9uOnQua2V5TG9jYXRpb247aWYoZj09PTMpe2UodCxhLC1uKTtpZih0LmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJufX1pZihpLmlzQ2hyb21lT1MmJmEmOCl7ZSh0LGEsbik7aWYodC5kZWZhdWx0UHJldmVudGVkKXJldHVybjthJj0tOX1yZXR1cm4hIWF8fG4gaW4gci5GVU5DVElPTl9LRVlTfHxuIGluIHIuUFJJTlRBQkxFX0tFWVM/ZSh0LGEsbik6ITF9ZnVuY3Rpb24gZigpe3M9T2JqZWN0LmNyZWF0ZShudWxsKSxzLmNvdW50PTAscy5sYXN0VD0wfXZhciByPWUoXCIuL2tleXNcIiksaT1lKFwiLi91c2VyYWdlbnRcIikscz1udWxsLG89MDt0LmFkZExpc3RlbmVyPWZ1bmN0aW9uKGUsdCxuKXtpZihlLmFkZEV2ZW50TGlzdGVuZXIpcmV0dXJuIGUuYWRkRXZlbnRMaXN0ZW5lcih0LG4sITEpO2lmKGUuYXR0YWNoRXZlbnQpe3ZhciByPWZ1bmN0aW9uKCl7bi5jYWxsKGUsd2luZG93LmV2ZW50KX07bi5fd3JhcHBlcj1yLGUuYXR0YWNoRXZlbnQoXCJvblwiK3Qscil9fSx0LnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCxuKXtpZihlLnJlbW92ZUV2ZW50TGlzdGVuZXIpcmV0dXJuIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG4sITEpO2UuZGV0YWNoRXZlbnQmJmUuZGV0YWNoRXZlbnQoXCJvblwiK3Qsbi5fd3JhcHBlcnx8bil9LHQuc3RvcEV2ZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0LnN0b3BQcm9wYWdhdGlvbihlKSx0LnByZXZlbnREZWZhdWx0KGUpLCExfSx0LnN0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbj9lLnN0b3BQcm9wYWdhdGlvbigpOmUuY2FuY2VsQnViYmxlPSEwfSx0LnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQ/ZS5wcmV2ZW50RGVmYXVsdCgpOmUucmV0dXJuVmFsdWU9ITF9LHQuZ2V0QnV0dG9uPWZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PVwiZGJsY2xpY2tcIj8wOmUudHlwZT09XCJjb250ZXh0bWVudVwifHxpLmlzTWFjJiZlLmN0cmxLZXkmJiFlLmFsdEtleSYmIWUuc2hpZnRLZXk/MjplLnByZXZlbnREZWZhdWx0P2UuYnV0dG9uOnsxOjAsMjoyLDQ6MX1bZS5idXR0b25dfSx0LmNhcHR1cmU9ZnVuY3Rpb24oZSxuLHIpe2Z1bmN0aW9uIGkoZSl7biYmbihlKSxyJiZyKGUpLHQucmVtb3ZlTGlzdGVuZXIoZG9jdW1lbnQsXCJtb3VzZW1vdmVcIixuLCEwKSx0LnJlbW92ZUxpc3RlbmVyKGRvY3VtZW50LFwibW91c2V1cFwiLGksITApLHQucmVtb3ZlTGlzdGVuZXIoZG9jdW1lbnQsXCJkcmFnc3RhcnRcIixpLCEwKX1yZXR1cm4gdC5hZGRMaXN0ZW5lcihkb2N1bWVudCxcIm1vdXNlbW92ZVwiLG4sITApLHQuYWRkTGlzdGVuZXIoZG9jdW1lbnQsXCJtb3VzZXVwXCIsaSwhMCksdC5hZGRMaXN0ZW5lcihkb2N1bWVudCxcImRyYWdzdGFydFwiLGksITApLGl9LHQuYWRkVG91Y2hNb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSxuKXtpZihcIm9udG91Y2htb3ZlXCJpbiBlKXt2YXIgcixpO3QuYWRkTGlzdGVuZXIoZSxcInRvdWNoc3RhcnRcIixmdW5jdGlvbihlKXt2YXIgdD1lLmNoYW5nZWRUb3VjaGVzWzBdO3I9dC5jbGllbnRYLGk9dC5jbGllbnRZfSksdC5hZGRMaXN0ZW5lcihlLFwidG91Y2htb3ZlXCIsZnVuY3Rpb24oZSl7dmFyIHQ9MSxzPWUuY2hhbmdlZFRvdWNoZXNbMF07ZS53aGVlbFg9LShzLmNsaWVudFgtcikvdCxlLndoZWVsWT0tKHMuY2xpZW50WS1pKS90LHI9cy5jbGllbnRYLGk9cy5jbGllbnRZLG4oZSl9KX19LHQuYWRkTW91c2VXaGVlbExpc3RlbmVyPWZ1bmN0aW9uKGUsbil7XCJvbm1vdXNld2hlZWxcImluIGU/dC5hZGRMaXN0ZW5lcihlLFwibW91c2V3aGVlbFwiLGZ1bmN0aW9uKGUpe3ZhciB0PTg7ZS53aGVlbERlbHRhWCE9PXVuZGVmaW5lZD8oZS53aGVlbFg9LWUud2hlZWxEZWx0YVgvdCxlLndoZWVsWT0tZS53aGVlbERlbHRhWS90KTooZS53aGVlbFg9MCxlLndoZWVsWT0tZS53aGVlbERlbHRhL3QpLG4oZSl9KTpcIm9ud2hlZWxcImluIGU/dC5hZGRMaXN0ZW5lcihlLFwid2hlZWxcIixmdW5jdGlvbihlKXt2YXIgdD0uMzU7c3dpdGNoKGUuZGVsdGFNb2RlKXtjYXNlIGUuRE9NX0RFTFRBX1BJWEVMOmUud2hlZWxYPWUuZGVsdGFYKnR8fDAsZS53aGVlbFk9ZS5kZWx0YVkqdHx8MDticmVhaztjYXNlIGUuRE9NX0RFTFRBX0xJTkU6Y2FzZSBlLkRPTV9ERUxUQV9QQUdFOmUud2hlZWxYPShlLmRlbHRhWHx8MCkqNSxlLndoZWVsWT0oZS5kZWx0YVl8fDApKjV9bihlKX0pOnQuYWRkTGlzdGVuZXIoZSxcIkRPTU1vdXNlU2Nyb2xsXCIsZnVuY3Rpb24oZSl7ZS5heGlzJiZlLmF4aXM9PWUuSE9SSVpPTlRBTF9BWElTPyhlLndoZWVsWD0oZS5kZXRhaWx8fDApKjUsZS53aGVlbFk9MCk6KGUud2hlZWxYPTAsZS53aGVlbFk9KGUuZGV0YWlsfHwwKSo1KSxuKGUpfSl9LHQuYWRkTXVsdGlNb3VzZURvd25MaXN0ZW5lcj1mdW5jdGlvbihlLG4scixzKXt2YXIgbz0wLHUsYSxmLGw9ezI6XCJkYmxjbGlja1wiLDM6XCJ0cmlwbGVjbGlja1wiLDQ6XCJxdWFkY2xpY2tcIn07dC5hZGRMaXN0ZW5lcihlLFwibW91c2Vkb3duXCIsZnVuY3Rpb24oZSl7dC5nZXRCdXR0b24oZSkhPT0wP289MDplLmRldGFpbD4xPyhvKyssbz40JiYobz0xKSk6bz0xO2lmKGkuaXNJRSl7dmFyIGM9TWF0aC5hYnMoZS5jbGllbnRYLXUpPjV8fE1hdGguYWJzKGUuY2xpZW50WS1hKT41O2lmKCFmfHxjKW89MTtmJiZjbGVhclRpbWVvdXQoZiksZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsfSxuW28tMV18fDYwMCksbz09MSYmKHU9ZS5jbGllbnRYLGE9ZS5jbGllbnRZKX1lLl9jbGlja3M9byxyW3NdKFwibW91c2Vkb3duXCIsZSk7aWYobz40KW89MDtlbHNlIGlmKG8+MSlyZXR1cm4gcltzXShsW29dLGUpfSksaS5pc09sZElFJiZ0LmFkZExpc3RlbmVyKGUsXCJkYmxjbGlja1wiLGZ1bmN0aW9uKGUpe289MixmJiZjbGVhclRpbWVvdXQoZiksZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsfSxuW28tMV18fDYwMCkscltzXShcIm1vdXNlZG93blwiLGUpLHJbc10obFtvXSxlKX0pfTt2YXIgdT0haS5pc01hY3x8IWkuaXNPcGVyYXx8XCJLZXlib2FyZEV2ZW50XCJpbiB3aW5kb3c/ZnVuY3Rpb24oZSl7cmV0dXJuIDB8KGUuY3RybEtleT8xOjApfChlLmFsdEtleT8yOjApfChlLnNoaWZ0S2V5PzQ6MCl8KGUubWV0YUtleT84OjApfTpmdW5jdGlvbihlKXtyZXR1cm4gMHwoZS5tZXRhS2V5PzE6MCl8KGUuYWx0S2V5PzI6MCl8KGUuc2hpZnRLZXk/NDowKXwoZS5jdHJsS2V5Pzg6MCl9O3QuZ2V0TW9kaWZpZXJTdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuS0VZX01PRFNbdShlKV19LHQuYWRkQ29tbWFuZEtleUxpc3RlbmVyPWZ1bmN0aW9uKGUsbil7dmFyIHI9dC5hZGRMaXN0ZW5lcjtpZihpLmlzT2xkR2Vja298fGkuaXNPcGVyYSYmIShcIktleWJvYXJkRXZlbnRcImluIHdpbmRvdykpe3ZhciBvPW51bGw7cihlLFwia2V5ZG93blwiLGZ1bmN0aW9uKGUpe289ZS5rZXlDb2RlfSkscihlLFwia2V5cHJlc3NcIixmdW5jdGlvbihlKXtyZXR1cm4gYShuLGUsbyl9KX1lbHNle3ZhciB1PW51bGw7cihlLFwia2V5ZG93blwiLGZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5Q29kZTtzW3RdPShzW3RdfHwwKSsxLHQ9PTkxfHx0PT05Mj9zLk9TS2V5PSEwOnMuT1NLZXkmJmUudGltZVN0YW1wLXMubGFzdFQ+MjAwJiZzLmNvdW50PT0xJiZmKCksc1t0XT09MSYmcy5jb3VudCsrLHMubGFzdFQ9ZS50aW1lU3RhbXA7dmFyIHI9YShuLGUsdCk7cmV0dXJuIHU9ZS5kZWZhdWx0UHJldmVudGVkLHJ9KSxyKGUsXCJrZXlwcmVzc1wiLGZ1bmN0aW9uKGUpe3UmJihlLmN0cmxLZXl8fGUuYWx0S2V5fHxlLnNoaWZ0S2V5fHxlLm1ldGFLZXkpJiYodC5zdG9wRXZlbnQoZSksdT1udWxsKX0pLHIoZSxcImtleXVwXCIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXlDb2RlO3NbdF0/cy5jb3VudD1NYXRoLm1heChzLmNvdW50LTEsMCk6ZigpO2lmKHQ9PTkxfHx0PT05MilzLk9TS2V5PSExO3NbdF09bnVsbH0pLHN8fChmKCkscih3aW5kb3csXCJmb2N1c1wiLGYpKX19O2lmKHR5cGVvZiB3aW5kb3c9PVwib2JqZWN0XCImJndpbmRvdy5wb3N0TWVzc2FnZSYmIWkuaXNPbGRJRSl7dmFyIGw9MTt0Lm5leHRUaWNrPWZ1bmN0aW9uKGUsbil7bj1ufHx3aW5kb3c7dmFyIHI9XCJ6ZXJvLXRpbWVvdXQtbWVzc2FnZS1cIitsO3QuYWRkTGlzdGVuZXIobixcIm1lc3NhZ2VcIixmdW5jdGlvbiBpKHMpe3MuZGF0YT09ciYmKHQuc3RvcFByb3BhZ2F0aW9uKHMpLHQucmVtb3ZlTGlzdGVuZXIobixcIm1lc3NhZ2VcIixpKSxlKCkpfSksbi5wb3N0TWVzc2FnZShyLFwiKlwiKX19dC5uZXh0RnJhbWU9dHlwZW9mIHdpbmRvdz09XCJvYmplY3RcIiYmKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUpLHQubmV4dEZyYW1lP3QubmV4dEZyYW1lPXQubmV4dEZyYW1lLmJpbmQod2luZG93KTp0Lm5leHRGcmFtZT1mdW5jdGlvbihlKXtzZXRUaW1lb3V0KGUsMTcpfX0pLGRlZmluZShcImFjZS9saWIvbGFuZ1wiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dC5sYXN0PWZ1bmN0aW9uKGUpe3JldHVybiBlW2UubGVuZ3RoLTFdfSx0LnN0cmluZ1JldmVyc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BsaXQoXCJcIikucmV2ZXJzZSgpLmpvaW4oXCJcIil9LHQuc3RyaW5nUmVwZWF0PWZ1bmN0aW9uKGUsdCl7dmFyIG49XCJcIjt3aGlsZSh0PjApe3QmMSYmKG4rPWUpO2lmKHQ+Pj0xKWUrPWV9cmV0dXJuIG59O3ZhciByPS9eXFxzXFxzKi8saT0vXFxzXFxzKiQvO3Quc3RyaW5nVHJpbUxlZnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShyLFwiXCIpfSx0LnN0cmluZ1RyaW1SaWdodD1mdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKGksXCJcIil9LHQuY29weU9iamVjdD1mdW5jdGlvbihlKXt2YXIgdD17fTtmb3IodmFyIG4gaW4gZSl0W25dPWVbbl07cmV0dXJuIHR9LHQuY29weUFycmF5PWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyllW25dJiZ0eXBlb2YgZVtuXT09XCJvYmplY3RcIj90W25dPXRoaXMuY29weU9iamVjdChlW25dKTp0W25dPWVbbl07cmV0dXJuIHR9LHQuZGVlcENvcHk9ZnVuY3Rpb24gcyhlKXtpZih0eXBlb2YgZSE9XCJvYmplY3RcInx8IWUpcmV0dXJuIGU7dmFyIHQ7aWYoQXJyYXkuaXNBcnJheShlKSl7dD1bXTtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl0W25dPXMoZVtuXSk7cmV0dXJuIHR9dmFyIHI9ZS5jb25zdHJ1Y3RvcjtpZihyPT09UmVnRXhwKXJldHVybiBlO3Q9cigpO2Zvcih2YXIgbiBpbiBlKXRbbl09cyhlW25dKTtyZXR1cm4gdH0sdC5hcnJheVRvTWFwPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXRbZVtuXV09MTtyZXR1cm4gdH0sdC5jcmVhdGVNYXA9ZnVuY3Rpb24oZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG4gaW4gZSl0W25dPWVbbl07cmV0dXJuIHR9LHQuYXJyYXlSZW1vdmU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MDtuPD1lLmxlbmd0aDtuKyspdD09PWVbbl0mJmUuc3BsaWNlKG4sMSl9LHQuZXNjYXBlUmVnRXhwPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoLyhbLiorP14ke30oKXxbXFxdXFwvXFxcXF0pL2csXCJcXFxcJDFcIil9LHQuZXNjYXBlSFRNTD1mdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC8mL2csXCImIzM4O1wiKS5yZXBsYWNlKC9cIi9nLFwiJiMzNDtcIikucmVwbGFjZSgvJy9nLFwiJiMzOTtcIikucmVwbGFjZSgvPC9nLFwiJiM2MDtcIil9LHQuZ2V0TWF0Y2hPZmZzZXRzPWZ1bmN0aW9uKGUsdCl7dmFyIG49W107cmV0dXJuIGUucmVwbGFjZSh0LGZ1bmN0aW9uKGUpe24ucHVzaCh7b2Zmc2V0OmFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoLTJdLGxlbmd0aDplLmxlbmd0aH0pfSksbn0sdC5kZWZlcnJlZENhbGw9ZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbCxuPWZ1bmN0aW9uKCl7dD1udWxsLGUoKX0scj1mdW5jdGlvbihlKXtyZXR1cm4gci5jYW5jZWwoKSx0PXNldFRpbWVvdXQobixlfHwwKSxyfTtyZXR1cm4gci5zY2hlZHVsZT1yLHIuY2FsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbmNlbCgpLGUoKSxyfSxyLmNhbmNlbD1mdW5jdGlvbigpe3JldHVybiBjbGVhclRpbWVvdXQodCksdD1udWxsLHJ9LHIuaXNQZW5kaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHR9LHJ9LHQuZGVsYXllZENhbGw9ZnVuY3Rpb24oZSx0KXt2YXIgbj1udWxsLHI9ZnVuY3Rpb24oKXtuPW51bGwsZSgpfSxpPWZ1bmN0aW9uKGUpe249PW51bGwmJihuPXNldFRpbWVvdXQocixlfHx0KSl9O3JldHVybiBpLmRlbGF5PWZ1bmN0aW9uKGUpe24mJmNsZWFyVGltZW91dChuKSxuPXNldFRpbWVvdXQocixlfHx0KX0saS5zY2hlZHVsZT1pLGkuY2FsbD1mdW5jdGlvbigpe3RoaXMuY2FuY2VsKCksZSgpfSxpLmNhbmNlbD1mdW5jdGlvbigpe24mJmNsZWFyVGltZW91dChuKSxuPW51bGx9LGkuaXNQZW5kaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIG59LGl9fSksZGVmaW5lKFwiYWNlL2tleWJvYXJkL3RleHRpbnB1dFwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9ldmVudFwiLFwiYWNlL2xpYi91c2VyYWdlbnRcIixcImFjZS9saWIvZG9tXCIsXCJhY2UvbGliL2xhbmdcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciByPWUoXCIuLi9saWIvZXZlbnRcIiksaT1lKFwiLi4vbGliL3VzZXJhZ2VudFwiKSxzPWUoXCIuLi9saWIvZG9tXCIpLG89ZShcIi4uL2xpYi9sYW5nXCIpLHU9aS5pc0Nocm9tZTwxOCxhPWkuaXNJRSxmPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gYihlKXtpZihoKXJldHVybjtoPSEwO2lmKGspdD0wLHI9ZT8wOm4udmFsdWUubGVuZ3RoLTE7ZWxzZSB2YXIgdD1lPzI6MSxyPTI7dHJ5e24uc2V0U2VsZWN0aW9uUmFuZ2UodCxyKX1jYXRjaChpKXt9aD0hMX1mdW5jdGlvbiB3KCl7aWYoaClyZXR1cm47bi52YWx1ZT1mLGkuaXNXZWJLaXQmJnkuc2NoZWR1bGUoKX1mdW5jdGlvbiBSKCl7Y2xlYXJUaW1lb3V0KHEpLHE9c2V0VGltZW91dChmdW5jdGlvbigpe3AmJihuLnN0eWxlLmNzc1RleHQ9cCxwPVwiXCIpLHQucmVuZGVyZXIuJGtlZXBUZXh0QXJlYUF0Q3Vyc29yPT1udWxsJiYodC5yZW5kZXJlci4ka2VlcFRleHRBcmVhQXRDdXJzb3I9ITAsdC5yZW5kZXJlci4kbW92ZVRleHRBcmVhVG9DdXJzb3IoKSl9LGkuaXNPbGRJRT8yMDA6MCl9dmFyIG49cy5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7bi5jbGFzc05hbWU9XCJhY2VfdGV4dC1pbnB1dFwiLGkuaXNUb3VjaFBhZCYmbi5zZXRBdHRyaWJ1dGUoXCJ4LXBhbG0tZGlzYWJsZS1hdXRvLWNhcFwiLCEwKSxuLnNldEF0dHJpYnV0ZShcIndyYXBcIixcIm9mZlwiKSxuLnNldEF0dHJpYnV0ZShcImF1dG9jb3JyZWN0XCIsXCJvZmZcIiksbi5zZXRBdHRyaWJ1dGUoXCJhdXRvY2FwaXRhbGl6ZVwiLFwib2ZmXCIpLG4uc2V0QXR0cmlidXRlKFwic3BlbGxjaGVja1wiLCExKSxuLnN0eWxlLm9wYWNpdHk9XCIwXCIsaS5pc09sZElFJiYobi5zdHlsZS50b3A9XCItMTAwMHB4XCIpLGUuaW5zZXJ0QmVmb3JlKG4sZS5maXJzdENoaWxkKTt2YXIgZj1cIlx1MDAwMVx1MDAwMVwiLGw9ITEsYz0hMSxoPSExLHA9XCJcIixkPSEwO3RyeXt2YXIgdj1kb2N1bWVudC5hY3RpdmVFbGVtZW50PT09bn1jYXRjaChtKXt9ci5hZGRMaXN0ZW5lcihuLFwiYmx1clwiLGZ1bmN0aW9uKGUpe3Qub25CbHVyKGUpLHY9ITF9KSxyLmFkZExpc3RlbmVyKG4sXCJmb2N1c1wiLGZ1bmN0aW9uKGUpe3Y9ITAsdC5vbkZvY3VzKGUpLGIoKX0pLHRoaXMuZm9jdXM9ZnVuY3Rpb24oKXtpZihwKXJldHVybiBuLmZvY3VzKCk7dmFyIGU9bi5zdHlsZS50b3A7bi5zdHlsZS5wb3NpdGlvbj1cImZpeGVkXCIsbi5zdHlsZS50b3A9XCItMTAwMHB4XCIsbi5mb2N1cygpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLnN0eWxlLnBvc2l0aW9uPVwiXCIsbi5zdHlsZS50b3A9PVwiLTEwMDBweFwiJiYobi5zdHlsZS50b3A9ZSl9LDApfSx0aGlzLmJsdXI9ZnVuY3Rpb24oKXtuLmJsdXIoKX0sdGhpcy5pc0ZvY3VzZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdn07dmFyIGc9by5kZWxheWVkQ2FsbChmdW5jdGlvbigpe3YmJmIoZCl9KSx5PW8uZGVsYXllZENhbGwoZnVuY3Rpb24oKXtofHwobi52YWx1ZT1mLHYmJmIoKSl9KTtpLmlzV2ViS2l0fHx0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VTZWxlY3Rpb25cIixmdW5jdGlvbigpe3Quc2VsZWN0aW9uLmlzRW1wdHkoKSE9ZCYmKGQ9IWQsZy5zY2hlZHVsZSgpKX0pLHcoKSx2JiZ0Lm9uRm9jdXMoKTt2YXIgRT1mdW5jdGlvbihlKXtyZXR1cm4gZS5zZWxlY3Rpb25TdGFydD09PTAmJmUuc2VsZWN0aW9uRW5kPT09ZS52YWx1ZS5sZW5ndGh9OyFuLnNldFNlbGVjdGlvblJhbmdlJiZuLmNyZWF0ZVRleHRSYW5nZSYmKG4uc2V0U2VsZWN0aW9uUmFuZ2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmNyZWF0ZVRleHRSYW5nZSgpO24uY29sbGFwc2UoITApLG4ubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsZSksbi5tb3ZlRW5kKFwiY2hhcmFjdGVyXCIsdCksbi5zZWxlY3QoKX0sRT1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9ZS5vd25lckRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpfWNhdGNoKG4pe31yZXR1cm4hdHx8dC5wYXJlbnRFbGVtZW50KCkhPWU/ITE6dC50ZXh0PT1lLnZhbHVlfSk7aWYoaS5pc09sZElFKXt2YXIgUz0hMSx4PWZ1bmN0aW9uKGUpe2lmKFMpcmV0dXJuO3ZhciB0PW4udmFsdWU7aWYoaHx8IXR8fHQ9PWYpcmV0dXJuO2lmKGUmJnQ9PWZbMF0pcmV0dXJuIFQuc2NoZWR1bGUoKTtBKHQpLFM9ITAsdygpLFM9ITF9LFQ9by5kZWxheWVkQ2FsbCh4KTtyLmFkZExpc3RlbmVyKG4sXCJwcm9wZXJ0eWNoYW5nZVwiLHgpO3ZhciBOPXsxMzoxLDI3OjF9O3IuYWRkTGlzdGVuZXIobixcImtleXVwXCIsZnVuY3Rpb24oZSl7aCYmKCFuLnZhbHVlfHxOW2Uua2V5Q29kZV0pJiZzZXRUaW1lb3V0KEYsMCk7aWYoKG4udmFsdWUuY2hhckNvZGVBdCgwKXx8MCk8MTI5KXJldHVybiBULmNhbGwoKTtoP2ooKTpCKCl9KSxyLmFkZExpc3RlbmVyKG4sXCJrZXlkb3duXCIsZnVuY3Rpb24oZSl7VC5zY2hlZHVsZSg1MCl9KX12YXIgQz1mdW5jdGlvbihlKXtsP2w9ITE6RShuKT8odC5zZWxlY3RBbGwoKSxiKCkpOmsmJmIodC5zZWxlY3Rpb24uaXNFbXB0eSgpKX0saz1udWxsO3RoaXMuc2V0SW5wdXRIYW5kbGVyPWZ1bmN0aW9uKGUpe2s9ZX0sdGhpcy5nZXRJbnB1dEhhbmRsZXI9ZnVuY3Rpb24oKXtyZXR1cm4ga307dmFyIEw9ITEsQT1mdW5jdGlvbihlKXtrJiYoZT1rKGUpLGs9bnVsbCksYz8oYigpLGUmJnQub25QYXN0ZShlKSxjPSExKTplPT1mLmNoYXJBdCgwKT9MP3QuZXhlY0NvbW1hbmQoXCJkZWxcIix7c291cmNlOlwiYWNlXCJ9KTp0LmV4ZWNDb21tYW5kKFwiYmFja3NwYWNlXCIse3NvdXJjZTpcImFjZVwifSk6KGUuc3Vic3RyaW5nKDAsMik9PWY/ZT1lLnN1YnN0cigyKTplLmNoYXJBdCgwKT09Zi5jaGFyQXQoMCk/ZT1lLnN1YnN0cigxKTplLmNoYXJBdChlLmxlbmd0aC0xKT09Zi5jaGFyQXQoMCkmJihlPWUuc2xpY2UoMCwtMSkpLGUuY2hhckF0KGUubGVuZ3RoLTEpPT1mLmNoYXJBdCgwKSYmKGU9ZS5zbGljZSgwLC0xKSksZSYmdC5vblRleHRJbnB1dChlKSksTCYmKEw9ITEpfSxPPWZ1bmN0aW9uKGUpe2lmKGgpcmV0dXJuO3ZhciB0PW4udmFsdWU7QSh0KSx3KCl9LE09ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNsaXBib2FyZERhdGF8fHdpbmRvdy5jbGlwYm9hcmREYXRhO2lmKCFufHx1KXJldHVybjt2YXIgcj1hP1wiVGV4dFwiOlwidGV4dC9wbGFpblwiO3JldHVybiB0P24uc2V0RGF0YShyLHQpIT09ITE6bi5nZXREYXRhKHIpfSxfPWZ1bmN0aW9uKGUsaSl7dmFyIHM9dC5nZXRDb3B5VGV4dCgpO2lmKCFzKXJldHVybiByLnByZXZlbnREZWZhdWx0KGUpO00oZSxzKT8oaT90Lm9uQ3V0KCk6dC5vbkNvcHkoKSxyLnByZXZlbnREZWZhdWx0KGUpKToobD0hMCxuLnZhbHVlPXMsbi5zZWxlY3QoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bD0hMSx3KCksYigpLGk/dC5vbkN1dCgpOnQub25Db3B5KCl9KSl9LEQ9ZnVuY3Rpb24oZSl7XyhlLCEwKX0sUD1mdW5jdGlvbihlKXtfKGUsITEpfSxIPWZ1bmN0aW9uKGUpe3ZhciBzPU0oZSk7dHlwZW9mIHM9PVwic3RyaW5nXCI/KHMmJnQub25QYXN0ZShzLGUpLGkuaXNJRSYmc2V0VGltZW91dChiKSxyLnByZXZlbnREZWZhdWx0KGUpKToobi52YWx1ZT1cIlwiLGM9ITApfTtyLmFkZENvbW1hbmRLZXlMaXN0ZW5lcihuLHQub25Db21tYW5kS2V5LmJpbmQodCkpLHIuYWRkTGlzdGVuZXIobixcInNlbGVjdFwiLEMpLHIuYWRkTGlzdGVuZXIobixcImlucHV0XCIsTyksci5hZGRMaXN0ZW5lcihuLFwiY3V0XCIsRCksci5hZGRMaXN0ZW5lcihuLFwiY29weVwiLFApLHIuYWRkTGlzdGVuZXIobixcInBhc3RlXCIsSCksKCEoXCJvbmN1dFwiaW4gbil8fCEoXCJvbmNvcHlcImluIG4pfHwhKFwib25wYXN0ZVwiaW4gbikpJiZyLmFkZExpc3RlbmVyKGUsXCJrZXlkb3duXCIsZnVuY3Rpb24oZSl7aWYoaS5pc01hYyYmIWUubWV0YUtleXx8IWUuY3RybEtleSlyZXR1cm47c3dpdGNoKGUua2V5Q29kZSl7Y2FzZSA2NzpQKGUpO2JyZWFrO2Nhc2UgODY6SChlKTticmVhaztjYXNlIDg4OkQoZSl9fSk7dmFyIEI9ZnVuY3Rpb24oZSl7aWYoaHx8IXQub25Db21wb3NpdGlvblN0YXJ0fHx0LiRyZWFkT25seSlyZXR1cm47aD17fSx0Lm9uQ29tcG9zaXRpb25TdGFydCgpLHNldFRpbWVvdXQoaiwwKSx0Lm9uKFwibW91c2Vkb3duXCIsRiksdC5zZWxlY3Rpb24uaXNFbXB0eSgpfHwodC5pbnNlcnQoXCJcIiksdC5zZXNzaW9uLm1hcmtVbmRvR3JvdXAoKSx0LnNlbGVjdGlvbi5jbGVhclNlbGVjdGlvbigpKSx0LnNlc3Npb24ubWFya1VuZG9Hcm91cCgpfSxqPWZ1bmN0aW9uKCl7aWYoIWh8fCF0Lm9uQ29tcG9zaXRpb25VcGRhdGV8fHQuJHJlYWRPbmx5KXJldHVybjt2YXIgZT1uLnZhbHVlLnJlcGxhY2UoL1xceDAxL2csXCJcIik7aWYoaC5sYXN0VmFsdWU9PT1lKXJldHVybjt0Lm9uQ29tcG9zaXRpb25VcGRhdGUoZSksaC5sYXN0VmFsdWUmJnQudW5kbygpLGgubGFzdFZhbHVlPWU7aWYoaC5sYXN0VmFsdWUpe3ZhciByPXQuc2VsZWN0aW9uLmdldFJhbmdlKCk7dC5pbnNlcnQoaC5sYXN0VmFsdWUpLHQuc2Vzc2lvbi5tYXJrVW5kb0dyb3VwKCksaC5yYW5nZT10LnNlbGVjdGlvbi5nZXRSYW5nZSgpLHQuc2VsZWN0aW9uLnNldFJhbmdlKHIpLHQuc2VsZWN0aW9uLmNsZWFyU2VsZWN0aW9uKCl9fSxGPWZ1bmN0aW9uKGUpe2lmKCF0Lm9uQ29tcG9zaXRpb25FbmR8fHQuJHJlYWRPbmx5KXJldHVybjt2YXIgcj1oO2g9ITE7dmFyIGk9c2V0VGltZW91dChmdW5jdGlvbigpe2k9bnVsbDt2YXIgZT1uLnZhbHVlLnJlcGxhY2UoL1xceDAxL2csXCJcIik7aWYoaClyZXR1cm47ZT09ci5sYXN0VmFsdWU/dygpOiFyLmxhc3RWYWx1ZSYmZSYmKHcoKSxBKGUpKX0pO2s9ZnVuY3Rpb24obil7cmV0dXJuIGkmJmNsZWFyVGltZW91dChpKSxuPW4ucmVwbGFjZSgvXFx4MDEvZyxcIlwiKSxuPT1yLmxhc3RWYWx1ZT9cIlwiOihyLmxhc3RWYWx1ZSYmaSYmdC51bmRvKCksbil9LHQub25Db21wb3NpdGlvbkVuZCgpLHQucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZWRvd25cIixGKSxlLnR5cGU9PVwiY29tcG9zaXRpb25lbmRcIiYmci5yYW5nZSYmdC5zZWxlY3Rpb24uc2V0UmFuZ2Uoci5yYW5nZSl9LEk9by5kZWxheWVkQ2FsbChqLDUwKTtyLmFkZExpc3RlbmVyKG4sXCJjb21wb3NpdGlvbnN0YXJ0XCIsQiksaS5pc0dlY2tvP3IuYWRkTGlzdGVuZXIobixcInRleHRcIixmdW5jdGlvbigpe0kuc2NoZWR1bGUoKX0pOihyLmFkZExpc3RlbmVyKG4sXCJrZXl1cFwiLGZ1bmN0aW9uKCl7SS5zY2hlZHVsZSgpfSksci5hZGRMaXN0ZW5lcihuLFwia2V5ZG93blwiLGZ1bmN0aW9uKCl7SS5zY2hlZHVsZSgpfSkpLHIuYWRkTGlzdGVuZXIobixcImNvbXBvc2l0aW9uZW5kXCIsRiksdGhpcy5nZXRFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIG59LHRoaXMuc2V0UmVhZE9ubHk9ZnVuY3Rpb24oZSl7bi5yZWFkT25seT1lfSx0aGlzLm9uQ29udGV4dE1lbnU9ZnVuY3Rpb24oZSl7TD0hMCxiKHQuc2VsZWN0aW9uLmlzRW1wdHkoKSksdC5fZW1pdChcIm5hdGl2ZWNvbnRleHRtZW51XCIse3RhcmdldDp0LGRvbUV2ZW50OmV9KSx0aGlzLm1vdmVUb01vdXNlKGUsITApfSx0aGlzLm1vdmVUb01vdXNlPWZ1bmN0aW9uKGUsbyl7aWYoIW8mJmkuaXNPbGRJRSlyZXR1cm47cHx8KHA9bi5zdHlsZS5jc3NUZXh0KSxuLnN0eWxlLmNzc1RleHQ9KG8/XCJ6LWluZGV4OjEwMDAwMDtcIjpcIlwiKStcImhlaWdodDpcIituLnN0eWxlLmhlaWdodCtcIjtcIisoaS5pc0lFP1wib3BhY2l0eTowLjE7XCI6XCJcIik7dmFyIHU9dC5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYT1zLmNvbXB1dGVkU3R5bGUodC5jb250YWluZXIpLGY9dS50b3ArKHBhcnNlSW50KGEuYm9yZGVyVG9wV2lkdGgpfHwwKSxsPXUubGVmdCsocGFyc2VJbnQodS5ib3JkZXJMZWZ0V2lkdGgpfHwwKSxjPXUuYm90dG9tLWYtbi5jbGllbnRIZWlnaHQtMixoPWZ1bmN0aW9uKGUpe24uc3R5bGUubGVmdD1lLmNsaWVudFgtbC0yK1wicHhcIixuLnN0eWxlLnRvcD1NYXRoLm1pbihlLmNsaWVudFktZi0yLGMpK1wicHhcIn07aChlKTtpZihlLnR5cGUhPVwibW91c2Vkb3duXCIpcmV0dXJuO3QucmVuZGVyZXIuJGtlZXBUZXh0QXJlYUF0Q3Vyc29yJiYodC5yZW5kZXJlci4ka2VlcFRleHRBcmVhQXRDdXJzb3I9bnVsbCksaS5pc1dpbiYmIWkuaXNPbGRJRSYmci5jYXB0dXJlKHQuY29udGFpbmVyLGgsUil9LHRoaXMub25Db250ZXh0TWVudUNsb3NlPVI7dmFyIHEsVT1mdW5jdGlvbihlKXt0LnRleHRJbnB1dC5vbkNvbnRleHRNZW51KGUpLFIoKX07ci5hZGRMaXN0ZW5lcih0LnJlbmRlcmVyLnNjcm9sbGVyLFwiY29udGV4dG1lbnVcIixVKSxyLmFkZExpc3RlbmVyKG4sXCJjb250ZXh0bWVudVwiLFUpfTt0LlRleHRJbnB1dD1mfSksZGVmaW5lKFwiYWNlL21vdXNlL2RlZmF1bHRfaGFuZGxlcnNcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIvZG9tXCIsXCJhY2UvbGliL2V2ZW50XCIsXCJhY2UvbGliL3VzZXJhZ2VudFwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdShlKXtlLiRjbGlja1NlbGVjdGlvbj1udWxsO3ZhciB0PWUuZWRpdG9yO3Quc2V0RGVmYXVsdEhhbmRsZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uTW91c2VEb3duLmJpbmQoZSkpLHQuc2V0RGVmYXVsdEhhbmRsZXIoXCJkYmxjbGlja1wiLHRoaXMub25Eb3VibGVDbGljay5iaW5kKGUpKSx0LnNldERlZmF1bHRIYW5kbGVyKFwidHJpcGxlY2xpY2tcIix0aGlzLm9uVHJpcGxlQ2xpY2suYmluZChlKSksdC5zZXREZWZhdWx0SGFuZGxlcihcInF1YWRjbGlja1wiLHRoaXMub25RdWFkQ2xpY2suYmluZChlKSksdC5zZXREZWZhdWx0SGFuZGxlcihcIm1vdXNld2hlZWxcIix0aGlzLm9uTW91c2VXaGVlbC5iaW5kKGUpKSx0LnNldERlZmF1bHRIYW5kbGVyKFwidG91Y2htb3ZlXCIsdGhpcy5vblRvdWNoTW92ZS5iaW5kKGUpKTt2YXIgbj1bXCJzZWxlY3RcIixcInN0YXJ0U2VsZWN0XCIsXCJzZWxlY3RFbmRcIixcInNlbGVjdEFsbEVuZFwiLFwic2VsZWN0QnlXb3Jkc0VuZFwiLFwic2VsZWN0QnlMaW5lc0VuZFwiLFwiZHJhZ1dhaXRcIixcImRyYWdXYWl0RW5kXCIsXCJmb2N1c1dhaXRcIl07bi5mb3JFYWNoKGZ1bmN0aW9uKHQpe2VbdF09dGhpc1t0XX0sdGhpcyksZS5zZWxlY3RCeUxpbmVzPXRoaXMuZXh0ZW5kU2VsZWN0aW9uQnkuYmluZChlLFwiZ2V0TGluZVJhbmdlXCIpLGUuc2VsZWN0QnlXb3Jkcz10aGlzLmV4dGVuZFNlbGVjdGlvbkJ5LmJpbmQoZSxcImdldFdvcmRSYW5nZVwiKX1mdW5jdGlvbiBhKGUsdCxuLHIpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3cobi1lLDIpK01hdGgucG93KHItdCwyKSl9ZnVuY3Rpb24gZihlLHQpe2lmKGUuc3RhcnQucm93PT1lLmVuZC5yb3cpdmFyIG49Mip0LmNvbHVtbi1lLnN0YXJ0LmNvbHVtbi1lLmVuZC5jb2x1bW47ZWxzZSBpZihlLnN0YXJ0LnJvdz09ZS5lbmQucm93LTEmJiFlLnN0YXJ0LmNvbHVtbiYmIWUuZW5kLmNvbHVtbil2YXIgbj10LmNvbHVtbi00O2Vsc2UgdmFyIG49Mip0LnJvdy1lLnN0YXJ0LnJvdy1lLmVuZC5yb3c7cmV0dXJuIG48MD97Y3Vyc29yOmUuc3RhcnQsYW5jaG9yOmUuZW5kfTp7Y3Vyc29yOmUuZW5kLGFuY2hvcjplLnN0YXJ0fX12YXIgcj1lKFwiLi4vbGliL2RvbVwiKSxpPWUoXCIuLi9saWIvZXZlbnRcIikscz1lKFwiLi4vbGliL3VzZXJhZ2VudFwiKSxvPTA7KGZ1bmN0aW9uKCl7dGhpcy5vbk1vdXNlRG93bj1mdW5jdGlvbihlKXt2YXIgdD1lLmluU2VsZWN0aW9uKCksbj1lLmdldERvY3VtZW50UG9zaXRpb24oKTt0aGlzLm1vdXNlZG93bkV2ZW50PWU7dmFyIHI9dGhpcy5lZGl0b3IsaT1lLmdldEJ1dHRvbigpO2lmKGkhPT0wKXt2YXIgcz1yLmdldFNlbGVjdGlvblJhbmdlKCksbz1zLmlzRW1wdHkoKTtyLiRibG9ja1Njcm9sbGluZysrLG8mJnIuc2VsZWN0aW9uLm1vdmVUb1Bvc2l0aW9uKG4pLHIuJGJsb2NrU2Nyb2xsaW5nLS0sci50ZXh0SW5wdXQub25Db250ZXh0TWVudShlLmRvbUV2ZW50KTtyZXR1cm59dGhpcy5tb3VzZWRvd25FdmVudC50aW1lPURhdGUubm93KCk7aWYodCYmIXIuaXNGb2N1c2VkKCkpe3IuZm9jdXMoKTtpZih0aGlzLiRmb2N1c1RpbW91dCYmIXRoaXMuJGNsaWNrU2VsZWN0aW9uJiYhci5pbk11bHRpU2VsZWN0TW9kZSl7dGhpcy5zZXRTdGF0ZShcImZvY3VzV2FpdFwiKSx0aGlzLmNhcHR1cmVNb3VzZShlKTtyZXR1cm59fXJldHVybiB0aGlzLmNhcHR1cmVNb3VzZShlKSx0aGlzLnN0YXJ0U2VsZWN0KG4sZS5kb21FdmVudC5fY2xpY2tzPjEpLGUucHJldmVudERlZmF1bHQoKX0sdGhpcy5zdGFydFNlbGVjdD1mdW5jdGlvbihlLHQpe2U9ZXx8dGhpcy5lZGl0b3IucmVuZGVyZXIuc2NyZWVuVG9UZXh0Q29vcmRpbmF0ZXModGhpcy54LHRoaXMueSk7dmFyIG49dGhpcy5lZGl0b3I7bi4kYmxvY2tTY3JvbGxpbmcrKyx0aGlzLm1vdXNlZG93bkV2ZW50LmdldFNoaWZ0S2V5KCk/bi5zZWxlY3Rpb24uc2VsZWN0VG9Qb3NpdGlvbihlKTp0fHxuLnNlbGVjdGlvbi5tb3ZlVG9Qb3NpdGlvbihlKSx0fHx0aGlzLnNlbGVjdCgpLG4ucmVuZGVyZXIuc2Nyb2xsZXIuc2V0Q2FwdHVyZSYmbi5yZW5kZXJlci5zY3JvbGxlci5zZXRDYXB0dXJlKCksbi5zZXRTdHlsZShcImFjZV9zZWxlY3RpbmdcIiksdGhpcy5zZXRTdGF0ZShcInNlbGVjdFwiKSxuLiRibG9ja1Njcm9sbGluZy0tfSx0aGlzLnNlbGVjdD1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5lZGl0b3Isbj10LnJlbmRlcmVyLnNjcmVlblRvVGV4dENvb3JkaW5hdGVzKHRoaXMueCx0aGlzLnkpO3QuJGJsb2NrU2Nyb2xsaW5nKys7aWYodGhpcy4kY2xpY2tTZWxlY3Rpb24pe3ZhciByPXRoaXMuJGNsaWNrU2VsZWN0aW9uLmNvbXBhcmVQb2ludChuKTtpZihyPT0tMSllPXRoaXMuJGNsaWNrU2VsZWN0aW9uLmVuZDtlbHNlIGlmKHI9PTEpZT10aGlzLiRjbGlja1NlbGVjdGlvbi5zdGFydDtlbHNle3ZhciBpPWYodGhpcy4kY2xpY2tTZWxlY3Rpb24sbik7bj1pLmN1cnNvcixlPWkuYW5jaG9yfXQuc2VsZWN0aW9uLnNldFNlbGVjdGlvbkFuY2hvcihlLnJvdyxlLmNvbHVtbil9dC5zZWxlY3Rpb24uc2VsZWN0VG9Qb3NpdGlvbihuKSx0LiRibG9ja1Njcm9sbGluZy0tLHQucmVuZGVyZXIuc2Nyb2xsQ3Vyc29ySW50b1ZpZXcoKX0sdGhpcy5leHRlbmRTZWxlY3Rpb25CeT1mdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuZWRpdG9yLHI9bi5yZW5kZXJlci5zY3JlZW5Ub1RleHRDb29yZGluYXRlcyh0aGlzLngsdGhpcy55KSxpPW4uc2VsZWN0aW9uW2VdKHIucm93LHIuY29sdW1uKTtuLiRibG9ja1Njcm9sbGluZysrO2lmKHRoaXMuJGNsaWNrU2VsZWN0aW9uKXt2YXIgcz10aGlzLiRjbGlja1NlbGVjdGlvbi5jb21wYXJlUG9pbnQoaS5zdGFydCksbz10aGlzLiRjbGlja1NlbGVjdGlvbi5jb21wYXJlUG9pbnQoaS5lbmQpO2lmKHM9PS0xJiZvPD0wKXt0PXRoaXMuJGNsaWNrU2VsZWN0aW9uLmVuZDtpZihpLmVuZC5yb3chPXIucm93fHxpLmVuZC5jb2x1bW4hPXIuY29sdW1uKXI9aS5zdGFydH1lbHNlIGlmKG89PTEmJnM+PTApe3Q9dGhpcy4kY2xpY2tTZWxlY3Rpb24uc3RhcnQ7aWYoaS5zdGFydC5yb3chPXIucm93fHxpLnN0YXJ0LmNvbHVtbiE9ci5jb2x1bW4pcj1pLmVuZH1lbHNlIGlmKHM9PS0xJiZvPT0xKXI9aS5lbmQsdD1pLnN0YXJ0O2Vsc2V7dmFyIHU9Zih0aGlzLiRjbGlja1NlbGVjdGlvbixyKTtyPXUuY3Vyc29yLHQ9dS5hbmNob3J9bi5zZWxlY3Rpb24uc2V0U2VsZWN0aW9uQW5jaG9yKHQucm93LHQuY29sdW1uKX1uLnNlbGVjdGlvbi5zZWxlY3RUb1Bvc2l0aW9uKHIpLG4uJGJsb2NrU2Nyb2xsaW5nLS0sbi5yZW5kZXJlci5zY3JvbGxDdXJzb3JJbnRvVmlldygpfSx0aGlzLnNlbGVjdEVuZD10aGlzLnNlbGVjdEFsbEVuZD10aGlzLnNlbGVjdEJ5V29yZHNFbmQ9dGhpcy5zZWxlY3RCeUxpbmVzRW5kPWZ1bmN0aW9uKCl7dGhpcy4kY2xpY2tTZWxlY3Rpb249bnVsbCx0aGlzLmVkaXRvci51bnNldFN0eWxlKFwiYWNlX3NlbGVjdGluZ1wiKSx0aGlzLmVkaXRvci5yZW5kZXJlci5zY3JvbGxlci5yZWxlYXNlQ2FwdHVyZSYmdGhpcy5lZGl0b3IucmVuZGVyZXIuc2Nyb2xsZXIucmVsZWFzZUNhcHR1cmUoKX0sdGhpcy5mb2N1c1dhaXQ9ZnVuY3Rpb24oKXt2YXIgZT1hKHRoaXMubW91c2Vkb3duRXZlbnQueCx0aGlzLm1vdXNlZG93bkV2ZW50LnksdGhpcy54LHRoaXMueSksdD1EYXRlLm5vdygpOyhlPm98fHQtdGhpcy5tb3VzZWRvd25FdmVudC50aW1lPnRoaXMuJGZvY3VzVGltb3V0KSYmdGhpcy5zdGFydFNlbGVjdCh0aGlzLm1vdXNlZG93bkV2ZW50LmdldERvY3VtZW50UG9zaXRpb24oKSl9LHRoaXMub25Eb3VibGVDbGljaz1mdW5jdGlvbihlKXt2YXIgdD1lLmdldERvY3VtZW50UG9zaXRpb24oKSxuPXRoaXMuZWRpdG9yLHI9bi5zZXNzaW9uLGk9ci5nZXRCcmFja2V0UmFuZ2UodCk7aT8oaS5pc0VtcHR5KCkmJihpLnN0YXJ0LmNvbHVtbi0tLGkuZW5kLmNvbHVtbisrKSx0aGlzLnNldFN0YXRlKFwic2VsZWN0XCIpKTooaT1uLnNlbGVjdGlvbi5nZXRXb3JkUmFuZ2UodC5yb3csdC5jb2x1bW4pLHRoaXMuc2V0U3RhdGUoXCJzZWxlY3RCeVdvcmRzXCIpKSx0aGlzLiRjbGlja1NlbGVjdGlvbj1pLHRoaXMuc2VsZWN0KCl9LHRoaXMub25UcmlwbGVDbGljaz1mdW5jdGlvbihlKXt2YXIgdD1lLmdldERvY3VtZW50UG9zaXRpb24oKSxuPXRoaXMuZWRpdG9yO3RoaXMuc2V0U3RhdGUoXCJzZWxlY3RCeUxpbmVzXCIpO3ZhciByPW4uZ2V0U2VsZWN0aW9uUmFuZ2UoKTtyLmlzTXVsdGlMaW5lKCkmJnIuY29udGFpbnModC5yb3csdC5jb2x1bW4pPyh0aGlzLiRjbGlja1NlbGVjdGlvbj1uLnNlbGVjdGlvbi5nZXRMaW5lUmFuZ2Uoci5zdGFydC5yb3cpLHRoaXMuJGNsaWNrU2VsZWN0aW9uLmVuZD1uLnNlbGVjdGlvbi5nZXRMaW5lUmFuZ2Uoci5lbmQucm93KS5lbmQpOnRoaXMuJGNsaWNrU2VsZWN0aW9uPW4uc2VsZWN0aW9uLmdldExpbmVSYW5nZSh0LnJvdyksdGhpcy5zZWxlY3QoKX0sdGhpcy5vblF1YWRDbGljaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmVkaXRvcjt0LnNlbGVjdEFsbCgpLHRoaXMuJGNsaWNrU2VsZWN0aW9uPXQuZ2V0U2VsZWN0aW9uUmFuZ2UoKSx0aGlzLnNldFN0YXRlKFwic2VsZWN0QWxsXCIpfSx0aGlzLm9uTW91c2VXaGVlbD1mdW5jdGlvbihlKXtpZihlLmdldEFjY2VsS2V5KCkpcmV0dXJuO2UuZ2V0U2hpZnRLZXkoKSYmZS53aGVlbFkmJiFlLndoZWVsWCYmKGUud2hlZWxYPWUud2hlZWxZLGUud2hlZWxZPTApO3ZhciB0PWUuZG9tRXZlbnQudGltZVN0YW1wLG49dC0odGhpcy4kbGFzdFNjcm9sbFRpbWV8fDApLHI9dGhpcy5lZGl0b3IsaT1yLnJlbmRlcmVyLmlzU2Nyb2xsYWJsZUJ5KGUud2hlZWxYKmUuc3BlZWQsZS53aGVlbFkqZS5zcGVlZCk7aWYoaXx8bjwyMDApcmV0dXJuIHRoaXMuJGxhc3RTY3JvbGxUaW1lPXQsci5yZW5kZXJlci5zY3JvbGxCeShlLndoZWVsWCplLnNwZWVkLGUud2hlZWxZKmUuc3BlZWQpLGUuc3RvcCgpfSx0aGlzLm9uVG91Y2hNb3ZlPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZG9tRXZlbnQudGltZVN0YW1wLG49dC0odGhpcy4kbGFzdFNjcm9sbFRpbWV8fDApLHI9dGhpcy5lZGl0b3IsaT1yLnJlbmRlcmVyLmlzU2Nyb2xsYWJsZUJ5KGUud2hlZWxYKmUuc3BlZWQsZS53aGVlbFkqZS5zcGVlZCk7aWYoaXx8bjwyMDApcmV0dXJuIHRoaXMuJGxhc3RTY3JvbGxUaW1lPXQsci5yZW5kZXJlci5zY3JvbGxCeShlLndoZWVsWCplLnNwZWVkLGUud2hlZWxZKmUuc3BlZWQpLGUuc3RvcCgpfX0pLmNhbGwodS5wcm90b3R5cGUpLHQuRGVmYXVsdEhhbmRsZXJzPXV9KSxkZWZpbmUoXCJhY2UvdG9vbHRpcFwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9vb3BcIixcImFjZS9saWIvZG9tXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBzKGUpe3RoaXMuaXNPcGVuPSExLHRoaXMuJGVsZW1lbnQ9bnVsbCx0aGlzLiRwYXJlbnROb2RlPWV9dmFyIHI9ZShcIi4vbGliL29vcFwiKSxpPWUoXCIuL2xpYi9kb21cIik7KGZ1bmN0aW9uKCl7dGhpcy4kaW5pdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRlbGVtZW50PWkuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLiRlbGVtZW50LmNsYXNzTmFtZT1cImFjZV90b29sdGlwXCIsdGhpcy4kZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuJHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy4kZWxlbWVudCksdGhpcy4kZWxlbWVudH0sdGhpcy5nZXRFbGVtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVsZW1lbnR8fHRoaXMuJGluaXQoKX0sdGhpcy5zZXRUZXh0PWZ1bmN0aW9uKGUpe2kuc2V0SW5uZXJUZXh0KHRoaXMuZ2V0RWxlbWVudCgpLGUpfSx0aGlzLnNldEh0bWw9ZnVuY3Rpb24oZSl7dGhpcy5nZXRFbGVtZW50KCkuaW5uZXJIVE1MPWV9LHRoaXMuc2V0UG9zaXRpb249ZnVuY3Rpb24oZSx0KXt0aGlzLmdldEVsZW1lbnQoKS5zdHlsZS5sZWZ0PWUrXCJweFwiLHRoaXMuZ2V0RWxlbWVudCgpLnN0eWxlLnRvcD10K1wicHhcIn0sdGhpcy5zZXRDbGFzc05hbWU9ZnVuY3Rpb24oZSl7aS5hZGRDc3NDbGFzcyh0aGlzLmdldEVsZW1lbnQoKSxlKX0sdGhpcy5zaG93PWZ1bmN0aW9uKGUsdCxuKXtlIT1udWxsJiZ0aGlzLnNldFRleHQoZSksdCE9bnVsbCYmbiE9bnVsbCYmdGhpcy5zZXRQb3NpdGlvbih0LG4pLHRoaXMuaXNPcGVufHwodGhpcy5nZXRFbGVtZW50KCkuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsdGhpcy5pc09wZW49ITApfSx0aGlzLmhpZGU9ZnVuY3Rpb24oKXt0aGlzLmlzT3BlbiYmKHRoaXMuZ2V0RWxlbWVudCgpLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5pc09wZW49ITEpfSx0aGlzLmdldEhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEVsZW1lbnQoKS5vZmZzZXRIZWlnaHR9LHRoaXMuZ2V0V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFbGVtZW50KCkub2Zmc2V0V2lkdGh9fSkuY2FsbChzLnByb3RvdHlwZSksdC5Ub29sdGlwPXN9KSxkZWZpbmUoXCJhY2UvbW91c2UvZGVmYXVsdF9ndXR0ZXJfaGFuZGxlclwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9kb21cIixcImFjZS9saWIvb29wXCIsXCJhY2UvbGliL2V2ZW50XCIsXCJhY2UvdG9vbHRpcFwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdShlKXtmdW5jdGlvbiBsKCl7dmFyIHI9dS5nZXREb2N1bWVudFBvc2l0aW9uKCkucm93LHM9bi4kYW5ub3RhdGlvbnNbcl07aWYoIXMpcmV0dXJuIGMoKTt2YXIgbz10LnNlc3Npb24uZ2V0TGVuZ3RoKCk7aWYocj09byl7dmFyIGE9dC5yZW5kZXJlci5waXhlbFRvU2NyZWVuQ29vcmRpbmF0ZXMoMCx1LnkpLnJvdyxsPXUuJHBvcztpZihhPnQuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUm93KGwucm93LGwuY29sdW1uKSlyZXR1cm4gYygpfWlmKGY9PXMpcmV0dXJuO2Y9cy50ZXh0LmpvaW4oXCI8YnIvPlwiKSxpLnNldEh0bWwoZiksaS5zaG93KCksdC5vbihcIm1vdXNld2hlZWxcIixjKTtpZihlLiR0b29sdGlwRm9sbG93c01vdXNlKWgodSk7ZWxzZXt2YXIgcD11LmRvbUV2ZW50LnRhcmdldCxkPXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdj1pLmdldEVsZW1lbnQoKS5zdHlsZTt2LmxlZnQ9ZC5yaWdodCtcInB4XCIsdi50b3A9ZC5ib3R0b20rXCJweFwifX1mdW5jdGlvbiBjKCl7byYmKG89Y2xlYXJUaW1lb3V0KG8pKSxmJiYoaS5oaWRlKCksZj1udWxsLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIixjKSl9ZnVuY3Rpb24gaChlKXtpLnNldFBvc2l0aW9uKGUueCxlLnkpfXZhciB0PWUuZWRpdG9yLG49dC5yZW5kZXJlci4kZ3V0dGVyTGF5ZXIsaT1uZXcgYSh0LmNvbnRhaW5lcik7ZS5lZGl0b3Iuc2V0RGVmYXVsdEhhbmRsZXIoXCJndXR0ZXJtb3VzZWRvd25cIixmdW5jdGlvbihyKXtpZighdC5pc0ZvY3VzZWQoKXx8ci5nZXRCdXR0b24oKSE9MClyZXR1cm47dmFyIGk9bi5nZXRSZWdpb24ocik7aWYoaT09XCJmb2xkV2lkZ2V0c1wiKXJldHVybjt2YXIgcz1yLmdldERvY3VtZW50UG9zaXRpb24oKS5yb3csbz10LnNlc3Npb24uc2VsZWN0aW9uO2lmKHIuZ2V0U2hpZnRLZXkoKSlvLnNlbGVjdFRvKHMsMCk7ZWxzZXtpZihyLmRvbUV2ZW50LmRldGFpbD09MilyZXR1cm4gdC5zZWxlY3RBbGwoKSxyLnByZXZlbnREZWZhdWx0KCk7ZS4kY2xpY2tTZWxlY3Rpb249dC5zZWxlY3Rpb24uZ2V0TGluZVJhbmdlKHMpfXJldHVybiBlLnNldFN0YXRlKFwic2VsZWN0QnlMaW5lc1wiKSxlLmNhcHR1cmVNb3VzZShyKSxyLnByZXZlbnREZWZhdWx0KCl9KTt2YXIgbyx1LGY7ZS5lZGl0b3Iuc2V0RGVmYXVsdEhhbmRsZXIoXCJndXR0ZXJtb3VzZW1vdmVcIixmdW5jdGlvbih0KXt2YXIgbj10LmRvbUV2ZW50LnRhcmdldHx8dC5kb21FdmVudC5zcmNFbGVtZW50O2lmKHIuaGFzQ3NzQ2xhc3MobixcImFjZV9mb2xkLXdpZGdldFwiKSlyZXR1cm4gYygpO2YmJmUuJHRvb2x0aXBGb2xsb3dzTW91c2UmJmgodCksdT10O2lmKG8pcmV0dXJuO289c2V0VGltZW91dChmdW5jdGlvbigpe289bnVsbCx1JiYhZS5pc01vdXNlUHJlc3NlZD9sKCk6YygpfSw1MCl9KSxzLmFkZExpc3RlbmVyKHQucmVuZGVyZXIuJGd1dHRlcixcIm1vdXNlb3V0XCIsZnVuY3Rpb24oZSl7dT1udWxsO2lmKCFmfHxvKXJldHVybjtvPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtvPW51bGwsYygpfSw1MCl9KSx0Lm9uKFwiY2hhbmdlU2Vzc2lvblwiLGMpfWZ1bmN0aW9uIGEoZSl7by5jYWxsKHRoaXMsZSl9dmFyIHI9ZShcIi4uL2xpYi9kb21cIiksaT1lKFwiLi4vbGliL29vcFwiKSxzPWUoXCIuLi9saWIvZXZlbnRcIiksbz1lKFwiLi4vdG9vbHRpcFwiKS5Ub29sdGlwO2kuaW5oZXJpdHMoYSxvKSxmdW5jdGlvbigpe3RoaXMuc2V0UG9zaXRpb249ZnVuY3Rpb24oZSx0KXt2YXIgbj13aW5kb3cuaW5uZXJXaWR0aHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLHI9d2luZG93LmlubmVySGVpZ2h0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LGk9dGhpcy5nZXRXaWR0aCgpLHM9dGhpcy5nZXRIZWlnaHQoKTtlKz0xNSx0Kz0xNSxlK2k+biYmKGUtPWUraS1uKSx0K3M+ciYmKHQtPTIwK3MpLG8ucHJvdG90eXBlLnNldFBvc2l0aW9uLmNhbGwodGhpcyxlLHQpfX0uY2FsbChhLnByb3RvdHlwZSksdC5HdXR0ZXJIYW5kbGVyPXV9KSxkZWZpbmUoXCJhY2UvbW91c2UvbW91c2VfZXZlbnRcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIvZXZlbnRcIixcImFjZS9saWIvdXNlcmFnZW50XCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi4vbGliL2V2ZW50XCIpLGk9ZShcIi4uL2xpYi91c2VyYWdlbnRcIikscz10Lk1vdXNlRXZlbnQ9ZnVuY3Rpb24oZSx0KXt0aGlzLmRvbUV2ZW50PWUsdGhpcy5lZGl0b3I9dCx0aGlzLng9dGhpcy5jbGllbnRYPWUuY2xpZW50WCx0aGlzLnk9dGhpcy5jbGllbnRZPWUuY2xpZW50WSx0aGlzLiRwb3M9bnVsbCx0aGlzLiRpblNlbGVjdGlvbj1udWxsLHRoaXMucHJvcGFnYXRpb25TdG9wcGVkPSExLHRoaXMuZGVmYXVsdFByZXZlbnRlZD0hMX07KGZ1bmN0aW9uKCl7dGhpcy5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXtyLnN0b3BQcm9wYWdhdGlvbih0aGlzLmRvbUV2ZW50KSx0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZD0hMH0sdGhpcy5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe3IucHJldmVudERlZmF1bHQodGhpcy5kb21FdmVudCksdGhpcy5kZWZhdWx0UHJldmVudGVkPSEwfSx0aGlzLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLnN0b3BQcm9wYWdhdGlvbigpLHRoaXMucHJldmVudERlZmF1bHQoKX0sdGhpcy5nZXREb2N1bWVudFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHBvcz90aGlzLiRwb3M6KHRoaXMuJHBvcz10aGlzLmVkaXRvci5yZW5kZXJlci5zY3JlZW5Ub1RleHRDb29yZGluYXRlcyh0aGlzLmNsaWVudFgsdGhpcy5jbGllbnRZKSx0aGlzLiRwb3MpfSx0aGlzLmluU2VsZWN0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy4kaW5TZWxlY3Rpb24hPT1udWxsKXJldHVybiB0aGlzLiRpblNlbGVjdGlvbjt2YXIgZT10aGlzLmVkaXRvcix0PWUuZ2V0U2VsZWN0aW9uUmFuZ2UoKTtpZih0LmlzRW1wdHkoKSl0aGlzLiRpblNlbGVjdGlvbj0hMTtlbHNle3ZhciBuPXRoaXMuZ2V0RG9jdW1lbnRQb3NpdGlvbigpO3RoaXMuJGluU2VsZWN0aW9uPXQuY29udGFpbnMobi5yb3csbi5jb2x1bW4pfXJldHVybiB0aGlzLiRpblNlbGVjdGlvbn0sdGhpcy5nZXRCdXR0b249ZnVuY3Rpb24oKXtyZXR1cm4gci5nZXRCdXR0b24odGhpcy5kb21FdmVudCl9LHRoaXMuZ2V0U2hpZnRLZXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21FdmVudC5zaGlmdEtleX0sdGhpcy5nZXRBY2NlbEtleT1pLmlzTWFjP2Z1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tRXZlbnQubWV0YUtleX06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21FdmVudC5jdHJsS2V5fX0pLmNhbGwocy5wcm90b3R5cGUpfSksZGVmaW5lKFwiYWNlL21vdXNlL2RyYWdkcm9wX2hhbmRsZXJcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIvZG9tXCIsXCJhY2UvbGliL2V2ZW50XCIsXCJhY2UvbGliL3VzZXJhZ2VudFwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZihlKXtmdW5jdGlvbiBUKGUsbil7dmFyIHI9RGF0ZS5ub3coKSxpPSFufHxlLnJvdyE9bi5yb3cscz0hbnx8ZS5jb2x1bW4hPW4uY29sdW1uO2lmKCFTfHxpfHxzKXQuJGJsb2NrU2Nyb2xsaW5nKz0xLHQubW92ZUN1cnNvclRvUG9zaXRpb24oZSksdC4kYmxvY2tTY3JvbGxpbmctPTEsUz1yLHg9e3g6cCx5OmR9O2Vsc2V7dmFyIG89bCh4LngseC55LHAsZCk7bz5hP1M9bnVsbDpyLVM+PXUmJih0LnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KCksUz1udWxsKX19ZnVuY3Rpb24gTihlLG4pe3ZhciByPURhdGUubm93KCksaT10LnJlbmRlcmVyLmxheWVyQ29uZmlnLmxpbmVIZWlnaHQscz10LnJlbmRlcmVyLmxheWVyQ29uZmlnLmNoYXJhY3RlcldpZHRoLHU9dC5yZW5kZXJlci5zY3JvbGxlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxhPXt4OntsZWZ0OnAtdS5sZWZ0LHJpZ2h0OnUucmlnaHQtcH0seTp7dG9wOmQtdS50b3AsYm90dG9tOnUuYm90dG9tLWR9fSxmPU1hdGgubWluKGEueC5sZWZ0LGEueC5yaWdodCksbD1NYXRoLm1pbihhLnkudG9wLGEueS5ib3R0b20pLGM9e3JvdzplLnJvdyxjb2x1bW46ZS5jb2x1bW59O2Yvczw9MiYmKGMuY29sdW1uKz1hLngubGVmdDxhLngucmlnaHQ/LTM6MiksbC9pPD0xJiYoYy5yb3crPWEueS50b3A8YS55LmJvdHRvbT8tMToxKTt2YXIgaD1lLnJvdyE9Yy5yb3csdj1lLmNvbHVtbiE9Yy5jb2x1bW4sbT0hbnx8ZS5yb3chPW4ucm93O2h8fHYmJiFtP0U/ci1FPj1vJiZ0LnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KGMpOkU9cjpFPW51bGx9ZnVuY3Rpb24gQygpe3ZhciBlPWc7Zz10LnJlbmRlcmVyLnNjcmVlblRvVGV4dENvb3JkaW5hdGVzKHAsZCksVChnLGUpLE4oZyxlKX1mdW5jdGlvbiBrKCl7bT10LnNlbGVjdGlvbi50b09yaWVudGVkUmFuZ2UoKSxoPXQuc2Vzc2lvbi5hZGRNYXJrZXIobSxcImFjZV9zZWxlY3Rpb25cIix0LmdldFNlbGVjdGlvblN0eWxlKCkpLHQuY2xlYXJTZWxlY3Rpb24oKSx0LmlzRm9jdXNlZCgpJiZ0LnJlbmRlcmVyLiRjdXJzb3JMYXllci5zZXRCbGlua2luZyghMSksY2xlYXJJbnRlcnZhbCh2KSxDKCksdj1zZXRJbnRlcnZhbChDLDIwKSx5PTAsaS5hZGRMaXN0ZW5lcihkb2N1bWVudCxcIm1vdXNlbW92ZVwiLE8pfWZ1bmN0aW9uIEwoKXtjbGVhckludGVydmFsKHYpLHQuc2Vzc2lvbi5yZW1vdmVNYXJrZXIoaCksaD1udWxsLHQuJGJsb2NrU2Nyb2xsaW5nKz0xLHQuc2VsZWN0aW9uLmZyb21PcmllbnRlZFJhbmdlKG0pLHQuJGJsb2NrU2Nyb2xsaW5nLT0xLHQuaXNGb2N1c2VkKCkmJiF3JiZ0LnJlbmRlcmVyLiRjdXJzb3JMYXllci5zZXRCbGlua2luZyghdC5nZXRSZWFkT25seSgpKSxtPW51bGwsZz1udWxsLHk9MCxFPW51bGwsUz1udWxsLGkucmVtb3ZlTGlzdGVuZXIoZG9jdW1lbnQsXCJtb3VzZW1vdmVcIixPKX1mdW5jdGlvbiBPKCl7QT09bnVsbCYmKEE9c2V0VGltZW91dChmdW5jdGlvbigpe0EhPW51bGwmJmgmJkwoKX0sMjApKX1mdW5jdGlvbiBNKGUpe3ZhciB0PWUudHlwZXM7cmV0dXJuIXR8fEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwodCxmdW5jdGlvbihlKXtyZXR1cm4gZT09XCJ0ZXh0L3BsYWluXCJ8fGU9PVwiVGV4dFwifSl9ZnVuY3Rpb24gXyhlKXt2YXIgdD1bXCJjb3B5XCIsXCJjb3B5bW92ZVwiLFwiYWxsXCIsXCJ1bmluaXRpYWxpemVkXCJdLG49W1wibW92ZVwiLFwiY29weW1vdmVcIixcImxpbmttb3ZlXCIsXCJhbGxcIixcInVuaW5pdGlhbGl6ZWRcIl0scj1zLmlzTWFjP2UuYWx0S2V5OmUuY3RybEtleSxpPVwidW5pbml0aWFsaXplZFwiO3RyeXtpPWUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQudG9Mb3dlckNhc2UoKX1jYXRjaChlKXt9dmFyIG89XCJub25lXCI7cmV0dXJuIHImJnQuaW5kZXhPZihpKT49MD9vPVwiY29weVwiOm4uaW5kZXhPZihpKT49MD9vPVwibW92ZVwiOnQuaW5kZXhPZihpKT49MCYmKG89XCJjb3B5XCIpLG99dmFyIHQ9ZS5lZGl0b3Isbj1yLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7bi5zcmM9XCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUFBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PVwiLHMuaXNPcGVyYSYmKG4uc3R5bGUuY3NzVGV4dD1cIndpZHRoOjFweDtoZWlnaHQ6MXB4O3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt6LWluZGV4OjIxNDc0ODM2NDc7b3BhY2l0eTowO1wiKTt2YXIgZj1bXCJkcmFnV2FpdFwiLFwiZHJhZ1dhaXRFbmRcIixcInN0YXJ0RHJhZ1wiLFwiZHJhZ1JlYWR5RW5kXCIsXCJvbk1vdXNlRHJhZ1wiXTtmLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT10aGlzW3RdfSx0aGlzKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uTW91c2VEb3duLmJpbmQoZSkpO3ZhciBjPXQuY29udGFpbmVyLGgscCxkLHYsbSxnLHk9MCxiLHcsRSxTLHg7dGhpcy5vbkRyYWdTdGFydD1mdW5jdGlvbihlKXtpZih0aGlzLmNhbmNlbERyYWd8fCFjLmRyYWdnYWJsZSl7dmFyIHI9dGhpcztyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3Iuc3RhcnRTZWxlY3QoKSxyLmNhcHR1cmVNb3VzZShlKX0sMCksZS5wcmV2ZW50RGVmYXVsdCgpfW09dC5nZXRTZWxlY3Rpb25SYW5nZSgpO3ZhciBpPWUuZGF0YVRyYW5zZmVyO2kuZWZmZWN0QWxsb3dlZD10LmdldFJlYWRPbmx5KCk/XCJjb3B5XCI6XCJjb3B5TW92ZVwiLHMuaXNPcGVyYSYmKHQuY29udGFpbmVyLmFwcGVuZENoaWxkKG4pLG4uc2Nyb2xsVG9wPTApLGkuc2V0RHJhZ0ltYWdlJiZpLnNldERyYWdJbWFnZShuLDAsMCkscy5pc09wZXJhJiZ0LmNvbnRhaW5lci5yZW1vdmVDaGlsZChuKSxpLmNsZWFyRGF0YSgpLGkuc2V0RGF0YShcIlRleHRcIix0LnNlc3Npb24uZ2V0VGV4dFJhbmdlKCkpLHc9ITAsdGhpcy5zZXRTdGF0ZShcImRyYWdcIil9LHRoaXMub25EcmFnRW5kPWZ1bmN0aW9uKGUpe2MuZHJhZ2dhYmxlPSExLHc9ITEsdGhpcy5zZXRTdGF0ZShudWxsKTtpZighdC5nZXRSZWFkT25seSgpKXt2YXIgbj1lLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0OyFiJiZuPT1cIm1vdmVcIiYmdC5zZXNzaW9uLnJlbW92ZSh0LmdldFNlbGVjdGlvblJhbmdlKCkpLHQucmVuZGVyZXIuJGN1cnNvckxheWVyLnNldEJsaW5raW5nKCEwKX10aGlzLmVkaXRvci51bnNldFN0eWxlKFwiYWNlX2RyYWdnaW5nXCIpLHRoaXMuZWRpdG9yLnJlbmRlcmVyLnNldEN1cnNvclN0eWxlKFwiXCIpfSx0aGlzLm9uRHJhZ0VudGVyPWZ1bmN0aW9uKGUpe2lmKHQuZ2V0UmVhZE9ubHkoKXx8IU0oZS5kYXRhVHJhbnNmZXIpKXJldHVybjtyZXR1cm4gcD1lLmNsaWVudFgsZD1lLmNsaWVudFksaHx8aygpLHkrKyxlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0PWI9XyhlKSxpLnByZXZlbnREZWZhdWx0KGUpfSx0aGlzLm9uRHJhZ092ZXI9ZnVuY3Rpb24oZSl7aWYodC5nZXRSZWFkT25seSgpfHwhTShlLmRhdGFUcmFuc2ZlcikpcmV0dXJuO3JldHVybiBwPWUuY2xpZW50WCxkPWUuY2xpZW50WSxofHwoaygpLHkrKyksQSE9PW51bGwmJihBPW51bGwpLGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3Q9Yj1fKGUpLGkucHJldmVudERlZmF1bHQoZSl9LHRoaXMub25EcmFnTGVhdmU9ZnVuY3Rpb24oZSl7eS0tO2lmKHk8PTAmJmgpcmV0dXJuIEwoKSxiPW51bGwsaS5wcmV2ZW50RGVmYXVsdChlKX0sdGhpcy5vbkRyb3A9ZnVuY3Rpb24oZSl7aWYoIWcpcmV0dXJuO3ZhciBuPWUuZGF0YVRyYW5zZmVyO2lmKHcpc3dpdGNoKGIpe2Nhc2VcIm1vdmVcIjptLmNvbnRhaW5zKGcucm93LGcuY29sdW1uKT9tPXtzdGFydDpnLGVuZDpnfTptPXQubW92ZVRleHQobSxnKTticmVhaztjYXNlXCJjb3B5XCI6bT10Lm1vdmVUZXh0KG0sZywhMCl9ZWxzZXt2YXIgcj1uLmdldERhdGEoXCJUZXh0XCIpO209e3N0YXJ0OmcsZW5kOnQuc2Vzc2lvbi5pbnNlcnQoZyxyKX0sdC5mb2N1cygpLGI9bnVsbH1yZXR1cm4gTCgpLGkucHJldmVudERlZmF1bHQoZSl9LGkuYWRkTGlzdGVuZXIoYyxcImRyYWdzdGFydFwiLHRoaXMub25EcmFnU3RhcnQuYmluZChlKSksaS5hZGRMaXN0ZW5lcihjLFwiZHJhZ2VuZFwiLHRoaXMub25EcmFnRW5kLmJpbmQoZSkpLGkuYWRkTGlzdGVuZXIoYyxcImRyYWdlbnRlclwiLHRoaXMub25EcmFnRW50ZXIuYmluZChlKSksaS5hZGRMaXN0ZW5lcihjLFwiZHJhZ292ZXJcIix0aGlzLm9uRHJhZ092ZXIuYmluZChlKSksaS5hZGRMaXN0ZW5lcihjLFwiZHJhZ2xlYXZlXCIsdGhpcy5vbkRyYWdMZWF2ZS5iaW5kKGUpKSxpLmFkZExpc3RlbmVyKGMsXCJkcm9wXCIsdGhpcy5vbkRyb3AuYmluZChlKSk7dmFyIEE9bnVsbH1mdW5jdGlvbiBsKGUsdCxuLHIpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3cobi1lLDIpK01hdGgucG93KHItdCwyKSl9dmFyIHI9ZShcIi4uL2xpYi9kb21cIiksaT1lKFwiLi4vbGliL2V2ZW50XCIpLHM9ZShcIi4uL2xpYi91c2VyYWdlbnRcIiksbz0yMDAsdT0yMDAsYT01OyhmdW5jdGlvbigpe3RoaXMuZHJhZ1dhaXQ9ZnVuY3Rpb24oKXt2YXIgZT1EYXRlLm5vdygpLXRoaXMubW91c2Vkb3duRXZlbnQudGltZTtlPnRoaXMuZWRpdG9yLmdldERyYWdEZWxheSgpJiZ0aGlzLnN0YXJ0RHJhZygpfSx0aGlzLmRyYWdXYWl0RW5kPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lZGl0b3IuY29udGFpbmVyO2UuZHJhZ2dhYmxlPSExLHRoaXMuc3RhcnRTZWxlY3QodGhpcy5tb3VzZWRvd25FdmVudC5nZXREb2N1bWVudFBvc2l0aW9uKCkpLHRoaXMuc2VsZWN0RW5kKCl9LHRoaXMuZHJhZ1JlYWR5RW5kPWZ1bmN0aW9uKGUpe3RoaXMuZWRpdG9yLnJlbmRlcmVyLiRjdXJzb3JMYXllci5zZXRCbGlua2luZyghdGhpcy5lZGl0b3IuZ2V0UmVhZE9ubHkoKSksdGhpcy5lZGl0b3IudW5zZXRTdHlsZShcImFjZV9kcmFnZ2luZ1wiKSx0aGlzLmVkaXRvci5yZW5kZXJlci5zZXRDdXJzb3JTdHlsZShcIlwiKSx0aGlzLmRyYWdXYWl0RW5kKCl9LHRoaXMuc3RhcnREcmFnPWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxEcmFnPSExO3ZhciBlPXRoaXMuZWRpdG9yLHQ9ZS5jb250YWluZXI7dC5kcmFnZ2FibGU9ITAsZS5yZW5kZXJlci4kY3Vyc29yTGF5ZXIuc2V0QmxpbmtpbmcoITEpLGUuc2V0U3R5bGUoXCJhY2VfZHJhZ2dpbmdcIik7dmFyIG49cy5pc1dpbj9cImRlZmF1bHRcIjpcIm1vdmVcIjtlLnJlbmRlcmVyLnNldEN1cnNvclN0eWxlKG4pLHRoaXMuc2V0U3RhdGUoXCJkcmFnUmVhZHlcIil9LHRoaXMub25Nb3VzZURyYWc9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lZGl0b3IuY29udGFpbmVyO2lmKHMuaXNJRSYmdGhpcy5zdGF0ZT09XCJkcmFnUmVhZHlcIil7dmFyIG49bCh0aGlzLm1vdXNlZG93bkV2ZW50LngsdGhpcy5tb3VzZWRvd25FdmVudC55LHRoaXMueCx0aGlzLnkpO24+MyYmdC5kcmFnRHJvcCgpfWlmKHRoaXMuc3RhdGU9PT1cImRyYWdXYWl0XCIpe3ZhciBuPWwodGhpcy5tb3VzZWRvd25FdmVudC54LHRoaXMubW91c2Vkb3duRXZlbnQueSx0aGlzLngsdGhpcy55KTtuPjAmJih0LmRyYWdnYWJsZT0hMSx0aGlzLnN0YXJ0U2VsZWN0KHRoaXMubW91c2Vkb3duRXZlbnQuZ2V0RG9jdW1lbnRQb3NpdGlvbigpKSl9fSx0aGlzLm9uTW91c2VEb3duPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLiRkcmFnRW5hYmxlZClyZXR1cm47dGhpcy5tb3VzZWRvd25FdmVudD1lO3ZhciB0PXRoaXMuZWRpdG9yLG49ZS5pblNlbGVjdGlvbigpLHI9ZS5nZXRCdXR0b24oKSxpPWUuZG9tRXZlbnQuZGV0YWlsfHwxO2lmKGk9PT0xJiZyPT09MCYmbil7aWYoZS5lZGl0b3IuaW5NdWx0aVNlbGVjdE1vZGUmJihlLmdldEFjY2VsS2V5KCl8fGUuZ2V0U2hpZnRLZXkoKSkpcmV0dXJuO3RoaXMubW91c2Vkb3duRXZlbnQudGltZT1EYXRlLm5vdygpO3ZhciBvPWUuZG9tRXZlbnQudGFyZ2V0fHxlLmRvbUV2ZW50LnNyY0VsZW1lbnQ7XCJ1bnNlbGVjdGFibGVcImluIG8mJihvLnVuc2VsZWN0YWJsZT1cIm9uXCIpO2lmKHQuZ2V0RHJhZ0RlbGF5KCkpe2lmKHMuaXNXZWJLaXQpe3RoaXMuY2FuY2VsRHJhZz0hMDt2YXIgdT10LmNvbnRhaW5lcjt1LmRyYWdnYWJsZT0hMH10aGlzLnNldFN0YXRlKFwiZHJhZ1dhaXRcIil9ZWxzZSB0aGlzLnN0YXJ0RHJhZygpO3RoaXMuY2FwdHVyZU1vdXNlKGUsdGhpcy5vbk1vdXNlRHJhZy5iaW5kKHRoaXMpKSxlLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9fX0pLmNhbGwoZi5wcm90b3R5cGUpLHQuRHJhZ2Ryb3BIYW5kbGVyPWZ9KSxkZWZpbmUoXCJhY2UvbGliL25ldFwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9kb21cIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciByPWUoXCIuL2RvbVwiKTt0LmdldD1mdW5jdGlvbihlLHQpe3ZhciBuPW5ldyBYTUxIdHRwUmVxdWVzdDtuLm9wZW4oXCJHRVRcIixlLCEwKSxuLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe24ucmVhZHlTdGF0ZT09PTQmJnQobi5yZXNwb25zZVRleHQpfSxuLnNlbmQobnVsbCl9LHQubG9hZFNjcmlwdD1mdW5jdGlvbihlLHQpe3ZhciBuPXIuZ2V0RG9jdW1lbnRIZWFkKCksaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO2kuc3JjPWUsbi5hcHBlbmRDaGlsZChpKSxpLm9ubG9hZD1pLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihlLG4pe2lmKG58fCFpLnJlYWR5U3RhdGV8fGkucmVhZHlTdGF0ZT09XCJsb2FkZWRcInx8aS5yZWFkeVN0YXRlPT1cImNvbXBsZXRlXCIpaT1pLm9ubG9hZD1pLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLG58fHQoKX19LHQucXVhbGlmeVVSTD1mdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtyZXR1cm4gdC5ocmVmPWUsdC5ocmVmfX0pLGRlZmluZShcImFjZS9saWIvZXZlbnRfZW1pdHRlclwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9e30saT1mdW5jdGlvbigpe3RoaXMucHJvcGFnYXRpb25TdG9wcGVkPSEwfSxzPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwfTtyLl9lbWl0PXIuX2Rpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9ldmVudFJlZ2lzdHJ5fHwodGhpcy5fZXZlbnRSZWdpc3RyeT17fSksdGhpcy5fZGVmYXVsdEhhbmRsZXJzfHwodGhpcy5fZGVmYXVsdEhhbmRsZXJzPXt9KTt2YXIgbj10aGlzLl9ldmVudFJlZ2lzdHJ5W2VdfHxbXSxyPXRoaXMuX2RlZmF1bHRIYW5kbGVyc1tlXTtpZighbi5sZW5ndGgmJiFyKXJldHVybjtpZih0eXBlb2YgdCE9XCJvYmplY3RcInx8IXQpdD17fTt0LnR5cGV8fCh0LnR5cGU9ZSksdC5zdG9wUHJvcGFnYXRpb258fCh0LnN0b3BQcm9wYWdhdGlvbj1pKSx0LnByZXZlbnREZWZhdWx0fHwodC5wcmV2ZW50RGVmYXVsdD1zKSxuPW4uc2xpY2UoKTtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl7bltvXSh0LHRoaXMpO2lmKHQucHJvcGFnYXRpb25TdG9wcGVkKWJyZWFrfWlmKHImJiF0LmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuIHIodCx0aGlzKX0sci5fc2lnbmFsPWZ1bmN0aW9uKGUsdCl7dmFyIG49KHRoaXMuX2V2ZW50UmVnaXN0cnl8fHt9KVtlXTtpZighbilyZXR1cm47bj1uLnNsaWNlKCk7Zm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspbltyXSh0LHRoaXMpfSxyLm9uY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3QmJnRoaXMuYWRkRXZlbnRMaXN0ZW5lcihlLGZ1bmN0aW9uIHIoKXtuLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxyKSx0LmFwcGx5KG51bGwsYXJndW1lbnRzKX0pfSxyLnNldERlZmF1bHRIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fZGVmYXVsdEhhbmRsZXJzO258fChuPXRoaXMuX2RlZmF1bHRIYW5kbGVycz17X2Rpc2FibGVkXzp7fX0pO2lmKG5bZV0pe3ZhciByPW5bZV0saT1uLl9kaXNhYmxlZF9bZV07aXx8KG4uX2Rpc2FibGVkX1tlXT1pPVtdKSxpLnB1c2gocik7dmFyIHM9aS5pbmRleE9mKHQpO3MhPS0xJiZpLnNwbGljZShzLDEpfW5bZV09dH0sci5yZW1vdmVEZWZhdWx0SGFuZGxlcj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2RlZmF1bHRIYW5kbGVycztpZighbilyZXR1cm47dmFyIHI9bi5fZGlzYWJsZWRfW2VdO2lmKG5bZV09PXQpe3ZhciBpPW5bZV07ciYmdGhpcy5zZXREZWZhdWx0SGFuZGxlcihlLHIucG9wKCkpfWVsc2UgaWYocil7dmFyIHM9ci5pbmRleE9mKHQpO3MhPS0xJiZyLnNwbGljZShzLDEpfX0sci5vbj1yLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oZSx0LG4pe3RoaXMuX2V2ZW50UmVnaXN0cnk9dGhpcy5fZXZlbnRSZWdpc3RyeXx8e307dmFyIHI9dGhpcy5fZXZlbnRSZWdpc3RyeVtlXTtyZXR1cm4gcnx8KHI9dGhpcy5fZXZlbnRSZWdpc3RyeVtlXT1bXSksci5pbmRleE9mKHQpPT0tMSYmcltuP1widW5zaGlmdFwiOlwicHVzaFwiXSh0KSx0fSxyLm9mZj1yLnJlbW92ZUxpc3RlbmVyPXIucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3RoaXMuX2V2ZW50UmVnaXN0cnk9dGhpcy5fZXZlbnRSZWdpc3RyeXx8e307dmFyIG49dGhpcy5fZXZlbnRSZWdpc3RyeVtlXTtpZighbilyZXR1cm47dmFyIHI9bi5pbmRleE9mKHQpO3IhPT0tMSYmbi5zcGxpY2UociwxKX0sci5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dGhpcy5fZXZlbnRSZWdpc3RyeSYmKHRoaXMuX2V2ZW50UmVnaXN0cnlbZV09W10pfSx0LkV2ZW50RW1pdHRlcj1yfSksZGVmaW5lKFwiYWNlL2xpYi9hcHBfY29uZmlnXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvbGliL29vcFwiLFwiYWNlL2xpYi9ldmVudF9lbWl0dGVyXCJdLGZ1bmN0aW9uKGUsdCxuKXtcIm5vIHVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKGUpe3R5cGVvZiBjb25zb2xlIT1cInVuZGVmaW5lZFwiJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9ZnVuY3Rpb24gdShlLHQpe3ZhciBuPW5ldyBFcnJvcihlKTtuLmRhdGE9dCx0eXBlb2YgY29uc29sZT09XCJvYmplY3RcIiYmY29uc29sZS5lcnJvciYmY29uc29sZS5lcnJvcihuKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgbn0pfXZhciByPWUoXCIuL29vcFwiKSxpPWUoXCIuL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyLHM9e3NldE9wdGlvbnM6ZnVuY3Rpb24oZSl7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXt0aGlzLnNldE9wdGlvbih0LGVbdF0pfSx0aGlzKX0sZ2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gZT9BcnJheS5pc0FycmF5KGUpfHwodD1lLGU9T2JqZWN0LmtleXModCkpOmU9T2JqZWN0LmtleXModGhpcy4kb3B0aW9ucyksZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RbZV09dGhpcy5nZXRPcHRpb24oZSl9LHRoaXMpLHR9LHNldE9wdGlvbjpmdW5jdGlvbihlLHQpe2lmKHRoaXNbXCIkXCIrZV09PT10KXJldHVybjt2YXIgbj10aGlzLiRvcHRpb25zW2VdO2lmKCFuKXJldHVybiBvKCdtaXNzcGVsbGVkIG9wdGlvbiBcIicrZSsnXCInKTtpZihuLmZvcndhcmRUbylyZXR1cm4gdGhpc1tuLmZvcndhcmRUb10mJnRoaXNbbi5mb3J3YXJkVG9dLnNldE9wdGlvbihlLHQpO24uaGFuZGxlc1NldHx8KHRoaXNbXCIkXCIrZV09dCksbiYmbi5zZXQmJm4uc2V0LmNhbGwodGhpcyx0KX0sZ2V0T3B0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuJG9wdGlvbnNbZV07cmV0dXJuIHQ/dC5mb3J3YXJkVG8/dGhpc1t0LmZvcndhcmRUb10mJnRoaXNbdC5mb3J3YXJkVG9dLmdldE9wdGlvbihlKTp0JiZ0LmdldD90LmdldC5jYWxsKHRoaXMpOnRoaXNbXCIkXCIrZV06bygnbWlzc3BlbGxlZCBvcHRpb24gXCInK2UrJ1wiJyl9fSxhPWZ1bmN0aW9uKCl7dGhpcy4kZGVmYXVsdE9wdGlvbnM9e319OyhmdW5jdGlvbigpe3IuaW1wbGVtZW50KHRoaXMsaSksdGhpcy5kZWZpbmVPcHRpb25zPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS4kb3B0aW9uc3x8KHRoaXMuJGRlZmF1bHRPcHRpb25zW3RdPWUuJG9wdGlvbnM9e30pLE9iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9blt0XTt0eXBlb2Ygcj09XCJzdHJpbmdcIiYmKHI9e2ZvcndhcmRUbzpyfSksci5uYW1lfHwoci5uYW1lPXQpLGUuJG9wdGlvbnNbci5uYW1lXT1yLFwiaW5pdGlhbFZhbHVlXCJpbiByJiYoZVtcIiRcIityLm5hbWVdPXIuaW5pdGlhbFZhbHVlKX0pLHIuaW1wbGVtZW50KGUscyksdGhpc30sdGhpcy5yZXNldE9wdGlvbnM9ZnVuY3Rpb24oZSl7T2JqZWN0LmtleXMoZS4kb3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj1lLiRvcHRpb25zW3RdO1widmFsdWVcImluIG4mJmUuc2V0T3B0aW9uKHQsbi52YWx1ZSl9KX0sdGhpcy5zZXREZWZhdWx0VmFsdWU9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMuJGRlZmF1bHRPcHRpb25zW2VdfHwodGhpcy4kZGVmYXVsdE9wdGlvbnNbZV09e30pO3JbdF0mJihyLmZvcndhcmRUbz90aGlzLnNldERlZmF1bHRWYWx1ZShyLmZvcndhcmRUbyx0LG4pOnJbdF0udmFsdWU9bil9LHRoaXMuc2V0RGVmYXVsdFZhbHVlcz1mdW5jdGlvbihlLHQpe09iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7dGhpcy5zZXREZWZhdWx0VmFsdWUoZSxuLHRbbl0pfSx0aGlzKX0sdGhpcy53YXJuPW8sdGhpcy5yZXBvcnRFcnJvcj11fSkuY2FsbChhLnByb3RvdHlwZSksdC5BcHBDb25maWc9YX0pLGRlZmluZShcImFjZS9jb25maWdcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIvbGFuZ1wiLFwiYWNlL2xpYi9vb3BcIixcImFjZS9saWIvbmV0XCIsXCJhY2UvbGliL2FwcF9jb25maWdcIl0sZnVuY3Rpb24oZSx0LG4pe1wibm8gdXNlIHN0cmljdFwiO2Z1bmN0aW9uIGYocil7YS5wYWNrYWdlZD1yfHxlLnBhY2thZ2VkfHxuLnBhY2thZ2VkfHx1LmRlZmluZSYmZGVmaW5lLnBhY2thZ2VkO2lmKCF1LmRvY3VtZW50KXJldHVyblwiXCI7dmFyIGk9e30scz1cIlwiLG89ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQuX2N1cnJlbnRTY3JpcHQsZj1vJiZvLm93bmVyRG9jdW1lbnR8fGRvY3VtZW50LGM9Zi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtmb3IodmFyIGg9MDtoPGMubGVuZ3RoO2grKyl7dmFyIHA9Y1toXSxkPXAuc3JjfHxwLmdldEF0dHJpYnV0ZShcInNyY1wiKTtpZighZCljb250aW51ZTt2YXIgdj1wLmF0dHJpYnV0ZXM7Zm9yKHZhciBtPTAsZz12Lmxlbmd0aDttPGc7bSsrKXt2YXIgeT12W21dO3kubmFtZS5pbmRleE9mKFwiZGF0YS1hY2UtXCIpPT09MCYmKGlbbCh5Lm5hbWUucmVwbGFjZSgvXmRhdGEtYWNlLS8sXCJcIikpXT15LnZhbHVlKX12YXIgYj1kLm1hdGNoKC9eKC4qKVxcL2FjZShcXC1cXHcrKT9cXC5qcyhcXD98JCkvKTtiJiYocz1iWzFdKX1zJiYoaS5iYXNlPWkuYmFzZXx8cyxpLnBhY2thZ2VkPSEwKSxpLmJhc2VQYXRoPWkuYmFzZSxpLndvcmtlclBhdGg9aS53b3JrZXJQYXRofHxpLmJhc2UsaS5tb2RlUGF0aD1pLm1vZGVQYXRofHxpLmJhc2UsaS50aGVtZVBhdGg9aS50aGVtZVBhdGh8fGkuYmFzZSxkZWxldGUgaS5iYXNlO2Zvcih2YXIgdyBpbiBpKXR5cGVvZiBpW3ddIT1cInVuZGVmaW5lZFwiJiZ0LnNldCh3LGlbd10pfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGUucmVwbGFjZSgvLSguKS9nLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX0pfXZhciByPWUoXCIuL2xpYi9sYW5nXCIpLGk9ZShcIi4vbGliL29vcFwiKSxzPWUoXCIuL2xpYi9uZXRcIiksbz1lKFwiLi9saWIvYXBwX2NvbmZpZ1wiKS5BcHBDb25maWc7bi5leHBvcnRzPXQ9bmV3IG87dmFyIHU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc3x8dHlwZW9mIHdpbmRvdyE9XCJ1bmRlZmluZWRcIiYmd2luZG93fSgpLGE9e3BhY2thZ2VkOiExLHdvcmtlclBhdGg6bnVsbCxtb2RlUGF0aDpudWxsLHRoZW1lUGF0aDpudWxsLGJhc2VQYXRoOlwiXCIsc3VmZml4OlwiLmpzXCIsJG1vZHVsZVVybHM6e319O3QuZ2V0PWZ1bmN0aW9uKGUpe2lmKCFhLmhhc093blByb3BlcnR5KGUpKXRocm93IG5ldyBFcnJvcihcIlVua25vd24gY29uZmlnIGtleTogXCIrZSk7cmV0dXJuIGFbZV19LHQuc2V0PWZ1bmN0aW9uKGUsdCl7aWYoIWEuaGFzT3duUHJvcGVydHkoZSkpdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBjb25maWcga2V5OiBcIitlKTthW2VdPXR9LHQuYWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHIuY29weU9iamVjdChhKX0sdC5tb2R1bGVVcmw9ZnVuY3Rpb24oZSx0KXtpZihhLiRtb2R1bGVVcmxzW2VdKXJldHVybiBhLiRtb2R1bGVVcmxzW2VdO3ZhciBuPWUuc3BsaXQoXCIvXCIpO3Q9dHx8bltuLmxlbmd0aC0yXXx8XCJcIjt2YXIgcj10PT1cInNuaXBwZXRzXCI/XCIvXCI6XCItXCIsaT1uW24ubGVuZ3RoLTFdO2lmKHQ9PVwid29ya2VyXCImJnI9PVwiLVwiKXt2YXIgcz1uZXcgUmVnRXhwKFwiXlwiK3QrXCJbXFxcXC1fXXxbXFxcXC1fXVwiK3QrXCIkXCIsXCJnXCIpO2k9aS5yZXBsYWNlKHMsXCJcIil9KCFpfHxpPT10KSYmbi5sZW5ndGg+MSYmKGk9bltuLmxlbmd0aC0yXSk7dmFyIG89YVt0K1wiUGF0aFwiXTtyZXR1cm4gbz09bnVsbD9vPWEuYmFzZVBhdGg6cj09XCIvXCImJih0PXI9XCJcIiksbyYmby5zbGljZSgtMSkhPVwiL1wiJiYobys9XCIvXCIpLG8rdCtyK2krdGhpcy5nZXQoXCJzdWZmaXhcIil9LHQuc2V0TW9kdWxlVXJsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEuJG1vZHVsZVVybHNbZV09dH0sdC4kbG9hZGluZz17fSx0LmxvYWRNb2R1bGU9ZnVuY3Rpb24obixyKXt2YXIgaSxvO0FycmF5LmlzQXJyYXkobikmJihvPW5bMF0sbj1uWzFdKTt0cnl7aT1lKG4pfWNhdGNoKHUpe31pZihpJiYhdC4kbG9hZGluZ1tuXSlyZXR1cm4gciYmcihpKTt0LiRsb2FkaW5nW25dfHwodC4kbG9hZGluZ1tuXT1bXSksdC4kbG9hZGluZ1tuXS5wdXNoKHIpO2lmKHQuJGxvYWRpbmdbbl0ubGVuZ3RoPjEpcmV0dXJuO3ZhciBhPWZ1bmN0aW9uKCl7ZShbbl0sZnVuY3Rpb24oZSl7dC5fZW1pdChcImxvYWQubW9kdWxlXCIse25hbWU6bixtb2R1bGU6ZX0pO3ZhciByPXQuJGxvYWRpbmdbbl07dC4kbG9hZGluZ1tuXT1udWxsLHIuZm9yRWFjaChmdW5jdGlvbih0KXt0JiZ0KGUpfSl9KX07aWYoIXQuZ2V0KFwicGFja2FnZWRcIikpcmV0dXJuIGEoKTtzLmxvYWRTY3JpcHQodC5tb2R1bGVVcmwobixvKSxhKX0sdC5pbml0PWZ9KSxkZWZpbmUoXCJhY2UvbW91c2UvbW91c2VfaGFuZGxlclwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9ldmVudFwiLFwiYWNlL2xpYi91c2VyYWdlbnRcIixcImFjZS9tb3VzZS9kZWZhdWx0X2hhbmRsZXJzXCIsXCJhY2UvbW91c2UvZGVmYXVsdF9ndXR0ZXJfaGFuZGxlclwiLFwiYWNlL21vdXNlL21vdXNlX2V2ZW50XCIsXCJhY2UvbW91c2UvZHJhZ2Ryb3BfaGFuZGxlclwiLFwiYWNlL2NvbmZpZ1wiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZShcIi4uL2xpYi9ldmVudFwiKSxpPWUoXCIuLi9saWIvdXNlcmFnZW50XCIpLHM9ZShcIi4vZGVmYXVsdF9oYW5kbGVyc1wiKS5EZWZhdWx0SGFuZGxlcnMsbz1lKFwiLi9kZWZhdWx0X2d1dHRlcl9oYW5kbGVyXCIpLkd1dHRlckhhbmRsZXIsdT1lKFwiLi9tb3VzZV9ldmVudFwiKS5Nb3VzZUV2ZW50LGE9ZShcIi4vZHJhZ2Ryb3BfaGFuZGxlclwiKS5EcmFnZHJvcEhhbmRsZXIsZj1lKFwiLi4vY29uZmlnXCIpLGw9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLmVkaXRvcj1lLG5ldyBzKHRoaXMpLG5ldyBvKHRoaXMpLG5ldyBhKHRoaXMpO3ZhciBuPWZ1bmN0aW9uKHQpeyghZG9jdW1lbnQuaGFzRm9jdXN8fCFkb2N1bWVudC5oYXNGb2N1cygpKSYmd2luZG93LmZvY3VzKCksZS5mb2N1cygpLGUuaXNGb2N1c2VkKCl8fHdpbmRvdy5mb2N1cygpfSx1PWUucmVuZGVyZXIuZ2V0TW91c2VFdmVudFRhcmdldCgpO3IuYWRkTGlzdGVuZXIodSxcImNsaWNrXCIsdGhpcy5vbk1vdXNlRXZlbnQuYmluZCh0aGlzLFwiY2xpY2tcIikpLHIuYWRkTGlzdGVuZXIodSxcIm1vdXNlbW92ZVwiLHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzLFwibW91c2Vtb3ZlXCIpKSxyLmFkZE11bHRpTW91c2VEb3duTGlzdGVuZXIodSxbNDAwLDMwMCwyNTBdLHRoaXMsXCJvbk1vdXNlRXZlbnRcIiksZS5yZW5kZXJlci5zY3JvbGxCYXJWJiYoci5hZGRNdWx0aU1vdXNlRG93bkxpc3RlbmVyKGUucmVuZGVyZXIuc2Nyb2xsQmFyVi5pbm5lcixbNDAwLDMwMCwyNTBdLHRoaXMsXCJvbk1vdXNlRXZlbnRcIiksci5hZGRNdWx0aU1vdXNlRG93bkxpc3RlbmVyKGUucmVuZGVyZXIuc2Nyb2xsQmFySC5pbm5lcixbNDAwLDMwMCwyNTBdLHRoaXMsXCJvbk1vdXNlRXZlbnRcIiksaS5pc0lFJiYoci5hZGRMaXN0ZW5lcihlLnJlbmRlcmVyLnNjcm9sbEJhclYuZWxlbWVudCxcIm1vdXNlZG93blwiLG4pLHIuYWRkTGlzdGVuZXIoZS5yZW5kZXJlci5zY3JvbGxCYXJILmVsZW1lbnQsXCJtb3VzZWRvd25cIixuKSkpLHIuYWRkTW91c2VXaGVlbExpc3RlbmVyKGUuY29udGFpbmVyLHRoaXMub25Nb3VzZVdoZWVsLmJpbmQodGhpcyxcIm1vdXNld2hlZWxcIikpLHIuYWRkVG91Y2hNb3ZlTGlzdGVuZXIoZS5jb250YWluZXIsdGhpcy5vblRvdWNoTW92ZS5iaW5kKHRoaXMsXCJ0b3VjaG1vdmVcIikpO3ZhciBmPWUucmVuZGVyZXIuJGd1dHRlcjtyLmFkZExpc3RlbmVyKGYsXCJtb3VzZWRvd25cIix0aGlzLm9uTW91c2VFdmVudC5iaW5kKHRoaXMsXCJndXR0ZXJtb3VzZWRvd25cIikpLHIuYWRkTGlzdGVuZXIoZixcImNsaWNrXCIsdGhpcy5vbk1vdXNlRXZlbnQuYmluZCh0aGlzLFwiZ3V0dGVyY2xpY2tcIikpLHIuYWRkTGlzdGVuZXIoZixcImRibGNsaWNrXCIsdGhpcy5vbk1vdXNlRXZlbnQuYmluZCh0aGlzLFwiZ3V0dGVyZGJsY2xpY2tcIikpLHIuYWRkTGlzdGVuZXIoZixcIm1vdXNlbW92ZVwiLHRoaXMub25Nb3VzZUV2ZW50LmJpbmQodGhpcyxcImd1dHRlcm1vdXNlbW92ZVwiKSksci5hZGRMaXN0ZW5lcih1LFwibW91c2Vkb3duXCIsbiksci5hZGRMaXN0ZW5lcihmLFwibW91c2Vkb3duXCIsZnVuY3Rpb24odCl7cmV0dXJuIGUuZm9jdXMoKSxyLnByZXZlbnREZWZhdWx0KHQpfSksZS5vbihcIm1vdXNlbW92ZVwiLGZ1bmN0aW9uKG4pe2lmKHQuc3RhdGV8fHQuJGRyYWdEZWxheXx8IXQuJGRyYWdFbmFibGVkKXJldHVybjt2YXIgcj1lLnJlbmRlcmVyLnNjcmVlblRvVGV4dENvb3JkaW5hdGVzKG4ueCxuLnkpLGk9ZS5zZXNzaW9uLnNlbGVjdGlvbi5nZXRSYW5nZSgpLHM9ZS5yZW5kZXJlcjshaS5pc0VtcHR5KCkmJmkuaW5zaWRlU3RhcnQoci5yb3csci5jb2x1bW4pP3Muc2V0Q3Vyc29yU3R5bGUoXCJkZWZhdWx0XCIpOnMuc2V0Q3Vyc29yU3R5bGUoXCJcIil9KX07KGZ1bmN0aW9uKCl7dGhpcy5vbk1vdXNlRXZlbnQ9ZnVuY3Rpb24oZSx0KXt0aGlzLmVkaXRvci5fZW1pdChlLG5ldyB1KHQsdGhpcy5lZGl0b3IpKX0sdGhpcy5vbk1vdXNlTW92ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZWRpdG9yLl9ldmVudFJlZ2lzdHJ5JiZ0aGlzLmVkaXRvci5fZXZlbnRSZWdpc3RyeS5tb3VzZW1vdmU7aWYoIW58fCFuLmxlbmd0aClyZXR1cm47dGhpcy5lZGl0b3IuX2VtaXQoZSxuZXcgdSh0LHRoaXMuZWRpdG9yKSl9LHRoaXMub25Nb3VzZVdoZWVsPWZ1bmN0aW9uKGUsdCl7dmFyIG49bmV3IHUodCx0aGlzLmVkaXRvcik7bi5zcGVlZD10aGlzLiRzY3JvbGxTcGVlZCoyLG4ud2hlZWxYPXQud2hlZWxYLG4ud2hlZWxZPXQud2hlZWxZLHRoaXMuZWRpdG9yLl9lbWl0KGUsbil9LHRoaXMub25Ub3VjaE1vdmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgdSh0LHRoaXMuZWRpdG9yKTtuLnNwZWVkPTEsbi53aGVlbFg9dC53aGVlbFgsbi53aGVlbFk9dC53aGVlbFksdGhpcy5lZGl0b3IuX2VtaXQoZSxuKX0sdGhpcy5zZXRTdGF0ZT1mdW5jdGlvbihlKXt0aGlzLnN0YXRlPWV9LHRoaXMuY2FwdHVyZU1vdXNlPWZ1bmN0aW9uKGUsdCl7dGhpcy54PWUueCx0aGlzLnk9ZS55LHRoaXMuaXNNb3VzZVByZXNzZWQ9ITA7dmFyIG49dGhpcy5lZGl0b3IucmVuZGVyZXI7bi4ka2VlcFRleHRBcmVhQXRDdXJzb3ImJihuLiRrZWVwVGV4dEFyZWFBdEN1cnNvcj1udWxsKTt2YXIgcz10aGlzLG89ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuO2lmKGkuaXNXZWJLaXQmJiFlLndoaWNoJiZzLnJlbGVhc2VNb3VzZSlyZXR1cm4gcy5yZWxlYXNlTW91c2UoKTtzLng9ZS5jbGllbnRYLHMueT1lLmNsaWVudFksdCYmdChlKSxzLm1vdXNlRXZlbnQ9bmV3IHUoZSxzLmVkaXRvcikscy4kbW91c2VNb3ZlZD0hMH0sYT1mdW5jdGlvbihlKXtjbGVhckludGVydmFsKGwpLGYoKSxzW3Muc3RhdGUrXCJFbmRcIl0mJnNbcy5zdGF0ZStcIkVuZFwiXShlKSxzLnN0YXRlPVwiXCIsbi4ka2VlcFRleHRBcmVhQXRDdXJzb3I9PW51bGwmJihuLiRrZWVwVGV4dEFyZWFBdEN1cnNvcj0hMCxuLiRtb3ZlVGV4dEFyZWFUb0N1cnNvcigpKSxzLmlzTW91c2VQcmVzc2VkPSExLHMuJG9uQ2FwdHVyZU1vdXNlTW92ZT1zLnJlbGVhc2VNb3VzZT1udWxsLGUmJnMub25Nb3VzZUV2ZW50KFwibW91c2V1cFwiLGUpfSxmPWZ1bmN0aW9uKCl7c1tzLnN0YXRlXSYmc1tzLnN0YXRlXSgpLHMuJG1vdXNlTW92ZWQ9ITF9O2lmKGkuaXNPbGRJRSYmZS5kb21FdmVudC50eXBlPT1cImRibGNsaWNrXCIpcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXthKGUpfSk7cy4kb25DYXB0dXJlTW91c2VNb3ZlPW8scy5yZWxlYXNlTW91c2U9ci5jYXB0dXJlKHRoaXMuZWRpdG9yLmNvbnRhaW5lcixvLGEpO3ZhciBsPXNldEludGVydmFsKGYsMjApfSx0aGlzLnJlbGVhc2VNb3VzZT1udWxsLHRoaXMuY2FuY2VsQ29udGV4dE1lbnU9ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0KXtpZih0JiZ0LmRvbUV2ZW50JiZ0LmRvbUV2ZW50LnR5cGUhPVwiY29udGV4dG1lbnVcIilyZXR1cm47dGhpcy5lZGl0b3Iub2ZmKFwibmF0aXZlY29udGV4dG1lbnVcIixlKSx0JiZ0LmRvbUV2ZW50JiZyLnN0b3BFdmVudCh0LmRvbUV2ZW50KX0uYmluZCh0aGlzKTtzZXRUaW1lb3V0KGUsMTApLHRoaXMuZWRpdG9yLm9uKFwibmF0aXZlY29udGV4dG1lbnVcIixlKX19KS5jYWxsKGwucHJvdG90eXBlKSxmLmRlZmluZU9wdGlvbnMobC5wcm90b3R5cGUsXCJtb3VzZUhhbmRsZXJcIix7c2Nyb2xsU3BlZWQ6e2luaXRpYWxWYWx1ZToyfSxkcmFnRGVsYXk6e2luaXRpYWxWYWx1ZTppLmlzTWFjPzE1MDowfSxkcmFnRW5hYmxlZDp7aW5pdGlhbFZhbHVlOiEwfSxmb2N1c1RpbW91dDp7aW5pdGlhbFZhbHVlOjB9LHRvb2x0aXBGb2xsb3dzTW91c2U6e2luaXRpYWxWYWx1ZTohMH19KSx0Lk1vdXNlSGFuZGxlcj1sfSksZGVmaW5lKFwiYWNlL21vdXNlL2ZvbGRfaGFuZGxlclwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcihlKXtlLm9uKFwiY2xpY2tcIixmdW5jdGlvbih0KXt2YXIgbj10LmdldERvY3VtZW50UG9zaXRpb24oKSxyPWUuc2Vzc2lvbixpPXIuZ2V0Rm9sZEF0KG4ucm93LG4uY29sdW1uLDEpO2kmJih0LmdldEFjY2VsS2V5KCk/ci5yZW1vdmVGb2xkKGkpOnIuZXhwYW5kRm9sZChpKSx0LnN0b3AoKSl9KSxlLm9uKFwiZ3V0dGVyY2xpY2tcIixmdW5jdGlvbih0KXt2YXIgbj1lLnJlbmRlcmVyLiRndXR0ZXJMYXllci5nZXRSZWdpb24odCk7aWYobj09XCJmb2xkV2lkZ2V0c1wiKXt2YXIgcj10LmdldERvY3VtZW50UG9zaXRpb24oKS5yb3csaT1lLnNlc3Npb247aS5mb2xkV2lkZ2V0cyYmaS5mb2xkV2lkZ2V0c1tyXSYmZS5zZXNzaW9uLm9uRm9sZFdpZGdldENsaWNrKHIsdCksZS5pc0ZvY3VzZWQoKXx8ZS5mb2N1cygpLHQuc3RvcCgpfX0pLGUub24oXCJndXR0ZXJkYmxjbGlja1wiLGZ1bmN0aW9uKHQpe3ZhciBuPWUucmVuZGVyZXIuJGd1dHRlckxheWVyLmdldFJlZ2lvbih0KTtpZihuPT1cImZvbGRXaWRnZXRzXCIpe3ZhciByPXQuZ2V0RG9jdW1lbnRQb3NpdGlvbigpLnJvdyxpPWUuc2Vzc2lvbixzPWkuZ2V0UGFyZW50Rm9sZFJhbmdlRGF0YShyLCEwKSxvPXMucmFuZ2V8fHMuZmlyc3RSYW5nZTtpZihvKXtyPW8uc3RhcnQucm93O3ZhciB1PWkuZ2V0Rm9sZEF0KHIsaS5nZXRMaW5lKHIpLmxlbmd0aCwxKTt1P2kucmVtb3ZlRm9sZCh1KTooaS5hZGRGb2xkKFwiLi4uXCIsbyksZS5yZW5kZXJlci5zY3JvbGxDdXJzb3JJbnRvVmlldyh7cm93Om8uc3RhcnQucm93LGNvbHVtbjowfSkpfXQuc3RvcCgpfX0pfXQuRm9sZEhhbmRsZXI9cn0pLGRlZmluZShcImFjZS9rZXlib2FyZC9rZXliaW5kaW5nXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvbGliL2tleXNcIixcImFjZS9saWIvZXZlbnRcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciByPWUoXCIuLi9saWIva2V5c1wiKSxpPWUoXCIuLi9saWIvZXZlbnRcIikscz1mdW5jdGlvbihlKXt0aGlzLiRlZGl0b3I9ZSx0aGlzLiRkYXRhPXtlZGl0b3I6ZX0sdGhpcy4kaGFuZGxlcnM9W10sdGhpcy5zZXREZWZhdWx0SGFuZGxlcihlLmNvbW1hbmRzKX07KGZ1bmN0aW9uKCl7dGhpcy5zZXREZWZhdWx0SGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLnJlbW92ZUtleWJvYXJkSGFuZGxlcih0aGlzLiRkZWZhdWx0SGFuZGxlciksdGhpcy4kZGVmYXVsdEhhbmRsZXI9ZSx0aGlzLmFkZEtleWJvYXJkSGFuZGxlcihlLDApfSx0aGlzLnNldEtleWJvYXJkSGFuZGxlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLiRoYW5kbGVycztpZih0W3QubGVuZ3RoLTFdPT1lKXJldHVybjt3aGlsZSh0W3QubGVuZ3RoLTFdJiZ0W3QubGVuZ3RoLTFdIT10aGlzLiRkZWZhdWx0SGFuZGxlcil0aGlzLnJlbW92ZUtleWJvYXJkSGFuZGxlcih0W3QubGVuZ3RoLTFdKTt0aGlzLmFkZEtleWJvYXJkSGFuZGxlcihlLDEpfSx0aGlzLmFkZEtleWJvYXJkSGFuZGxlcj1mdW5jdGlvbihlLHQpe2lmKCFlKXJldHVybjt0eXBlb2YgZT09XCJmdW5jdGlvblwiJiYhZS5oYW5kbGVLZXlib2FyZCYmKGUuaGFuZGxlS2V5Ym9hcmQ9ZSk7dmFyIG49dGhpcy4kaGFuZGxlcnMuaW5kZXhPZihlKTtuIT0tMSYmdGhpcy4kaGFuZGxlcnMuc3BsaWNlKG4sMSksdD09dW5kZWZpbmVkP3RoaXMuJGhhbmRsZXJzLnB1c2goZSk6dGhpcy4kaGFuZGxlcnMuc3BsaWNlKHQsMCxlKSxuPT0tMSYmZS5hdHRhY2gmJmUuYXR0YWNoKHRoaXMuJGVkaXRvcil9LHRoaXMucmVtb3ZlS2V5Ym9hcmRIYW5kbGVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuJGhhbmRsZXJzLmluZGV4T2YoZSk7cmV0dXJuIHQ9PS0xPyExOih0aGlzLiRoYW5kbGVycy5zcGxpY2UodCwxKSxlLmRldGFjaCYmZS5kZXRhY2godGhpcy4kZWRpdG9yKSwhMCl9LHRoaXMuZ2V0S2V5Ym9hcmRIYW5kbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGhhbmRsZXJzW3RoaXMuJGhhbmRsZXJzLmxlbmd0aC0xXX0sdGhpcy5nZXRTdGF0dXNUZXh0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kZGF0YSx0PWUuZWRpdG9yO3JldHVybiB0aGlzLiRoYW5kbGVycy5tYXAoZnVuY3Rpb24obil7cmV0dXJuIG4uZ2V0U3RhdHVzVGV4dCYmbi5nZXRTdGF0dXNUZXh0KHQsZSl8fFwiXCJ9KS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIil9LHRoaXMuJGNhbGxLZXlib2FyZEhhbmRsZXJzPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBzLG89ITEsdT10aGlzLiRlZGl0b3IuY29tbWFuZHM7Zm9yKHZhciBhPXRoaXMuJGhhbmRsZXJzLmxlbmd0aDthLS07KXtzPXRoaXMuJGhhbmRsZXJzW2FdLmhhbmRsZUtleWJvYXJkKHRoaXMuJGRhdGEsZSx0LG4scik7aWYoIXN8fCFzLmNvbW1hbmQpY29udGludWU7cy5jb21tYW5kPT1cIm51bGxcIj9vPSEwOm89dS5leGVjKHMuY29tbWFuZCx0aGlzLiRlZGl0b3Iscy5hcmdzLHIpLG8mJnImJmUhPS0xJiZzLnBhc3NFdmVudCE9MSYmcy5jb21tYW5kLnBhc3NFdmVudCE9MSYmaS5zdG9wRXZlbnQocik7aWYobylicmVha31yZXR1cm4hbyYmZT09LTEmJihzPXtjb21tYW5kOlwiaW5zZXJ0c3RyaW5nXCJ9LG89dS5leGVjKFwiaW5zZXJ0c3RyaW5nXCIsdGhpcy4kZWRpdG9yLHQpKSxvJiZ0aGlzLiRlZGl0b3IuX3NpZ25hbChcImtleWJvYXJkQWN0aXZpdHlcIixzKSxvfSx0aGlzLm9uQ29tbWFuZEtleT1mdW5jdGlvbihlLHQsbil7dmFyIGk9ci5rZXlDb2RlVG9TdHJpbmcobik7dGhpcy4kY2FsbEtleWJvYXJkSGFuZGxlcnModCxpLG4sZSl9LHRoaXMub25UZXh0SW5wdXQ9ZnVuY3Rpb24oZSl7dGhpcy4kY2FsbEtleWJvYXJkSGFuZGxlcnMoLTEsZSl9fSkuY2FsbChzLnByb3RvdHlwZSksdC5LZXlCaW5kaW5nPXN9KSxkZWZpbmUoXCJhY2UvcmFuZ2VcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciByPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUucm93LXQucm93fHxlLmNvbHVtbi10LmNvbHVtbn0saT1mdW5jdGlvbihlLHQsbixyKXt0aGlzLnN0YXJ0PXtyb3c6ZSxjb2x1bW46dH0sdGhpcy5lbmQ9e3JvdzpuLGNvbHVtbjpyfX07KGZ1bmN0aW9uKCl7dGhpcy5pc0VxdWFsPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnN0YXJ0LnJvdz09PWUuc3RhcnQucm93JiZ0aGlzLmVuZC5yb3c9PT1lLmVuZC5yb3cmJnRoaXMuc3RhcnQuY29sdW1uPT09ZS5zdGFydC5jb2x1bW4mJnRoaXMuZW5kLmNvbHVtbj09PWUuZW5kLmNvbHVtbn0sdGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiUmFuZ2U6IFtcIit0aGlzLnN0YXJ0LnJvdytcIi9cIit0aGlzLnN0YXJ0LmNvbHVtbitcIl0gLT4gW1wiK3RoaXMuZW5kLnJvdytcIi9cIit0aGlzLmVuZC5jb2x1bW4rXCJdXCJ9LHRoaXMuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5jb21wYXJlKGUsdCk9PTB9LHRoaXMuY29tcGFyZVJhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5lbmQscj1lLnN0YXJ0O3JldHVybiB0PXRoaXMuY29tcGFyZShuLnJvdyxuLmNvbHVtbiksdD09MT8odD10aGlzLmNvbXBhcmUoci5yb3csci5jb2x1bW4pLHQ9PTE/Mjp0PT0wPzE6MCk6dD09LTE/LTI6KHQ9dGhpcy5jb21wYXJlKHIucm93LHIuY29sdW1uKSx0PT0tMT8tMTp0PT0xPzQyOjApfSx0aGlzLmNvbXBhcmVQb2ludD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb21wYXJlKGUucm93LGUuY29sdW1uKX0sdGhpcy5jb250YWluc1JhbmdlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbXBhcmVQb2ludChlLnN0YXJ0KT09MCYmdGhpcy5jb21wYXJlUG9pbnQoZS5lbmQpPT0wfSx0aGlzLmludGVyc2VjdHM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb21wYXJlUmFuZ2UoZSk7cmV0dXJuIHQ9PS0xfHx0PT0wfHx0PT0xfSx0aGlzLmlzRW5kPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5kLnJvdz09ZSYmdGhpcy5lbmQuY29sdW1uPT10fSx0aGlzLmlzU3RhcnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zdGFydC5yb3c9PWUmJnRoaXMuc3RhcnQuY29sdW1uPT10fSx0aGlzLnNldFN0YXJ0PWZ1bmN0aW9uKGUsdCl7dHlwZW9mIGU9PVwib2JqZWN0XCI/KHRoaXMuc3RhcnQuY29sdW1uPWUuY29sdW1uLHRoaXMuc3RhcnQucm93PWUucm93KToodGhpcy5zdGFydC5yb3c9ZSx0aGlzLnN0YXJ0LmNvbHVtbj10KX0sdGhpcy5zZXRFbmQ9ZnVuY3Rpb24oZSx0KXt0eXBlb2YgZT09XCJvYmplY3RcIj8odGhpcy5lbmQuY29sdW1uPWUuY29sdW1uLHRoaXMuZW5kLnJvdz1lLnJvdyk6KHRoaXMuZW5kLnJvdz1lLHRoaXMuZW5kLmNvbHVtbj10KX0sdGhpcy5pbnNpZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5jb21wYXJlKGUsdCk9PTA/dGhpcy5pc0VuZChlLHQpfHx0aGlzLmlzU3RhcnQoZSx0KT8hMTohMDohMX0sdGhpcy5pbnNpZGVTdGFydD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmNvbXBhcmUoZSx0KT09MD90aGlzLmlzRW5kKGUsdCk/ITE6ITA6ITF9LHRoaXMuaW5zaWRlRW5kPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuY29tcGFyZShlLHQpPT0wP3RoaXMuaXNTdGFydChlLHQpPyExOiEwOiExfSx0aGlzLmNvbXBhcmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hdGhpcy5pc011bHRpTGluZSgpJiZlPT09dGhpcy5zdGFydC5yb3c/dDx0aGlzLnN0YXJ0LmNvbHVtbj8tMTp0PnRoaXMuZW5kLmNvbHVtbj8xOjA6ZTx0aGlzLnN0YXJ0LnJvdz8tMTplPnRoaXMuZW5kLnJvdz8xOnRoaXMuc3RhcnQucm93PT09ZT90Pj10aGlzLnN0YXJ0LmNvbHVtbj8wOi0xOnRoaXMuZW5kLnJvdz09PWU/dDw9dGhpcy5lbmQuY29sdW1uPzA6MTowfSx0aGlzLmNvbXBhcmVTdGFydD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnN0YXJ0LnJvdz09ZSYmdGhpcy5zdGFydC5jb2x1bW49PXQ/LTE6dGhpcy5jb21wYXJlKGUsdCl9LHRoaXMuY29tcGFyZUVuZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmVuZC5yb3c9PWUmJnRoaXMuZW5kLmNvbHVtbj09dD8xOnRoaXMuY29tcGFyZShlLHQpfSx0aGlzLmNvbXBhcmVJbnNpZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lbmQucm93PT1lJiZ0aGlzLmVuZC5jb2x1bW49PXQ/MTp0aGlzLnN0YXJ0LnJvdz09ZSYmdGhpcy5zdGFydC5jb2x1bW49PXQ/LTE6dGhpcy5jb21wYXJlKGUsdCl9LHRoaXMuY2xpcFJvd3M9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLmVuZC5yb3c+dCl2YXIgbj17cm93OnQrMSxjb2x1bW46MH07ZWxzZSBpZih0aGlzLmVuZC5yb3c8ZSl2YXIgbj17cm93OmUsY29sdW1uOjB9O2lmKHRoaXMuc3RhcnQucm93PnQpdmFyIHI9e3Jvdzp0KzEsY29sdW1uOjB9O2Vsc2UgaWYodGhpcy5zdGFydC5yb3c8ZSl2YXIgcj17cm93OmUsY29sdW1uOjB9O3JldHVybiBpLmZyb21Qb2ludHMocnx8dGhpcy5zdGFydCxufHx0aGlzLmVuZCl9LHRoaXMuZXh0ZW5kPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jb21wYXJlKGUsdCk7aWYobj09MClyZXR1cm4gdGhpcztpZihuPT0tMSl2YXIgcj17cm93OmUsY29sdW1uOnR9O2Vsc2UgdmFyIHM9e3JvdzplLGNvbHVtbjp0fTtyZXR1cm4gaS5mcm9tUG9pbnRzKHJ8fHRoaXMuc3RhcnQsc3x8dGhpcy5lbmQpfSx0aGlzLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydC5yb3c9PT10aGlzLmVuZC5yb3cmJnRoaXMuc3RhcnQuY29sdW1uPT09dGhpcy5lbmQuY29sdW1ufSx0aGlzLmlzTXVsdGlMaW5lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQucm93IT09dGhpcy5lbmQucm93fSx0aGlzLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIGkuZnJvbVBvaW50cyh0aGlzLnN0YXJ0LHRoaXMuZW5kKX0sdGhpcy5jb2xsYXBzZVJvd3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmQuY29sdW1uPT0wP25ldyBpKHRoaXMuc3RhcnQucm93LDAsTWF0aC5tYXgodGhpcy5zdGFydC5yb3csdGhpcy5lbmQucm93LTEpLDApOm5ldyBpKHRoaXMuc3RhcnQucm93LDAsdGhpcy5lbmQucm93LDApfSx0aGlzLnRvU2NyZWVuUmFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24odGhpcy5zdGFydCksbj1lLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbih0aGlzLmVuZCk7cmV0dXJuIG5ldyBpKHQucm93LHQuY29sdW1uLG4ucm93LG4uY29sdW1uKX0sdGhpcy5tb3ZlQnk9ZnVuY3Rpb24oZSx0KXt0aGlzLnN0YXJ0LnJvdys9ZSx0aGlzLnN0YXJ0LmNvbHVtbis9dCx0aGlzLmVuZC5yb3crPWUsdGhpcy5lbmQuY29sdW1uKz10fX0pLmNhbGwoaS5wcm90b3R5cGUpLGkuZnJvbVBvaW50cz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgaShlLnJvdyxlLmNvbHVtbix0LnJvdyx0LmNvbHVtbil9LGkuY29tcGFyZVBvaW50cz1yLGkuY29tcGFyZVBvaW50cz1mdW5jdGlvbihlLHQpe3JldHVybiBlLnJvdy10LnJvd3x8ZS5jb2x1bW4tdC5jb2x1bW59LHQuUmFuZ2U9aX0pLGRlZmluZShcImFjZS9zZWxlY3Rpb25cIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIvb29wXCIsXCJhY2UvbGliL2xhbmdcIixcImFjZS9saWIvZXZlbnRfZW1pdHRlclwiLFwiYWNlL3JhbmdlXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi9saWIvb29wXCIpLGk9ZShcIi4vbGliL2xhbmdcIikscz1lKFwiLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXIsbz1lKFwiLi9yYW5nZVwiKS5SYW5nZSx1PWZ1bmN0aW9uKGUpe3RoaXMuc2Vzc2lvbj1lLHRoaXMuZG9jPWUuZ2V0RG9jdW1lbnQoKSx0aGlzLmNsZWFyU2VsZWN0aW9uKCksdGhpcy5sZWFkPXRoaXMuc2VsZWN0aW9uTGVhZD10aGlzLmRvYy5jcmVhdGVBbmNob3IoMCwwKSx0aGlzLmFuY2hvcj10aGlzLnNlbGVjdGlvbkFuY2hvcj10aGlzLmRvYy5jcmVhdGVBbmNob3IoMCwwKTt2YXIgdD10aGlzO3RoaXMubGVhZC5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKGUpe3QuX2VtaXQoXCJjaGFuZ2VDdXJzb3JcIiksdC4kaXNFbXB0eXx8dC5fZW1pdChcImNoYW5nZVNlbGVjdGlvblwiKSwhdC4ka2VlcERlc2lyZWRDb2x1bW5PbkNoYW5nZSYmZS5vbGQuY29sdW1uIT1lLnZhbHVlLmNvbHVtbiYmKHQuJGRlc2lyZWRDb2x1bW49bnVsbCl9KSx0aGlzLnNlbGVjdGlvbkFuY2hvci5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7dC4kaXNFbXB0eXx8dC5fZW1pdChcImNoYW5nZVNlbGVjdGlvblwiKX0pfTsoZnVuY3Rpb24oKXtyLmltcGxlbWVudCh0aGlzLHMpLHRoaXMuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRpc0VtcHR5fHx0aGlzLmFuY2hvci5yb3c9PXRoaXMubGVhZC5yb3cmJnRoaXMuYW5jaG9yLmNvbHVtbj09dGhpcy5sZWFkLmNvbHVtbn0sdGhpcy5pc011bHRpTGluZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRW1wdHkoKT8hMTp0aGlzLmdldFJhbmdlKCkuaXNNdWx0aUxpbmUoKX0sdGhpcy5nZXRDdXJzb3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZWFkLmdldFBvc2l0aW9uKCl9LHRoaXMuc2V0U2VsZWN0aW9uQW5jaG9yPWZ1bmN0aW9uKGUsdCl7dGhpcy5hbmNob3Iuc2V0UG9zaXRpb24oZSx0KSx0aGlzLiRpc0VtcHR5JiYodGhpcy4kaXNFbXB0eT0hMSx0aGlzLl9lbWl0KFwiY2hhbmdlU2VsZWN0aW9uXCIpKX0sdGhpcy5nZXRTZWxlY3Rpb25BbmNob3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kaXNFbXB0eT90aGlzLmdldFNlbGVjdGlvbkxlYWQoKTp0aGlzLmFuY2hvci5nZXRQb3NpdGlvbigpfSx0aGlzLmdldFNlbGVjdGlvbkxlYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZWFkLmdldFBvc2l0aW9uKCl9LHRoaXMuc2hpZnRTZWxlY3Rpb249ZnVuY3Rpb24oZSl7aWYodGhpcy4kaXNFbXB0eSl7dGhpcy5tb3ZlQ3Vyc29yVG8odGhpcy5sZWFkLnJvdyx0aGlzLmxlYWQuY29sdW1uK2UpO3JldHVybn12YXIgdD10aGlzLmdldFNlbGVjdGlvbkFuY2hvcigpLG49dGhpcy5nZXRTZWxlY3Rpb25MZWFkKCkscj10aGlzLmlzQmFja3dhcmRzKCk7KCFyfHx0LmNvbHVtbiE9PTApJiZ0aGlzLnNldFNlbGVjdGlvbkFuY2hvcih0LnJvdyx0LmNvbHVtbitlKSwocnx8bi5jb2x1bW4hPT0wKSYmdGhpcy4kbW92ZVNlbGVjdGlvbihmdW5jdGlvbigpe3RoaXMubW92ZUN1cnNvclRvKG4ucm93LG4uY29sdW1uK2UpfSl9LHRoaXMuaXNCYWNrd2FyZHM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmFuY2hvcix0PXRoaXMubGVhZDtyZXR1cm4gZS5yb3c+dC5yb3d8fGUucm93PT10LnJvdyYmZS5jb2x1bW4+dC5jb2x1bW59LHRoaXMuZ2V0UmFuZ2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmFuY2hvcix0PXRoaXMubGVhZDtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/by5mcm9tUG9pbnRzKHQsdCk6dGhpcy5pc0JhY2t3YXJkcygpP28uZnJvbVBvaW50cyh0LGUpOm8uZnJvbVBvaW50cyhlLHQpfSx0aGlzLmNsZWFyU2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy4kaXNFbXB0eXx8KHRoaXMuJGlzRW1wdHk9ITAsdGhpcy5fZW1pdChcImNoYW5nZVNlbGVjdGlvblwiKSl9LHRoaXMuc2VsZWN0QWxsPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kb2MuZ2V0TGVuZ3RoKCktMTt0aGlzLnNldFNlbGVjdGlvbkFuY2hvcigwLDApLHRoaXMubW92ZUN1cnNvclRvKGUsdGhpcy5kb2MuZ2V0TGluZShlKS5sZW5ndGgpfSx0aGlzLnNldFJhbmdlPXRoaXMuc2V0U2VsZWN0aW9uUmFuZ2U9ZnVuY3Rpb24oZSx0KXt0Pyh0aGlzLnNldFNlbGVjdGlvbkFuY2hvcihlLmVuZC5yb3csZS5lbmQuY29sdW1uKSx0aGlzLnNlbGVjdFRvKGUuc3RhcnQucm93LGUuc3RhcnQuY29sdW1uKSk6KHRoaXMuc2V0U2VsZWN0aW9uQW5jaG9yKGUuc3RhcnQucm93LGUuc3RhcnQuY29sdW1uKSx0aGlzLnNlbGVjdFRvKGUuZW5kLnJvdyxlLmVuZC5jb2x1bW4pKSx0aGlzLmdldFJhbmdlKCkuaXNFbXB0eSgpJiYodGhpcy4kaXNFbXB0eT0hMCksdGhpcy4kZGVzaXJlZENvbHVtbj1udWxsfSx0aGlzLiRtb3ZlU2VsZWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGVhZDt0aGlzLiRpc0VtcHR5JiZ0aGlzLnNldFNlbGVjdGlvbkFuY2hvcih0LnJvdyx0LmNvbHVtbiksZS5jYWxsKHRoaXMpfSx0aGlzLnNlbGVjdFRvPWZ1bmN0aW9uKGUsdCl7dGhpcy4kbW92ZVNlbGVjdGlvbihmdW5jdGlvbigpe3RoaXMubW92ZUN1cnNvclRvKGUsdCl9KX0sdGhpcy5zZWxlY3RUb1Bvc2l0aW9uPWZ1bmN0aW9uKGUpe3RoaXMuJG1vdmVTZWxlY3Rpb24oZnVuY3Rpb24oKXt0aGlzLm1vdmVDdXJzb3JUb1Bvc2l0aW9uKGUpfSl9LHRoaXMubW92ZVRvPWZ1bmN0aW9uKGUsdCl7dGhpcy5jbGVhclNlbGVjdGlvbigpLHRoaXMubW92ZUN1cnNvclRvKGUsdCl9LHRoaXMubW92ZVRvUG9zaXRpb249ZnVuY3Rpb24oZSl7dGhpcy5jbGVhclNlbGVjdGlvbigpLHRoaXMubW92ZUN1cnNvclRvUG9zaXRpb24oZSl9LHRoaXMuc2VsZWN0VXA9ZnVuY3Rpb24oKXt0aGlzLiRtb3ZlU2VsZWN0aW9uKHRoaXMubW92ZUN1cnNvclVwKX0sdGhpcy5zZWxlY3REb3duPWZ1bmN0aW9uKCl7dGhpcy4kbW92ZVNlbGVjdGlvbih0aGlzLm1vdmVDdXJzb3JEb3duKX0sdGhpcy5zZWxlY3RSaWdodD1mdW5jdGlvbigpe3RoaXMuJG1vdmVTZWxlY3Rpb24odGhpcy5tb3ZlQ3Vyc29yUmlnaHQpfSx0aGlzLnNlbGVjdExlZnQ9ZnVuY3Rpb24oKXt0aGlzLiRtb3ZlU2VsZWN0aW9uKHRoaXMubW92ZUN1cnNvckxlZnQpfSx0aGlzLnNlbGVjdExpbmVTdGFydD1mdW5jdGlvbigpe3RoaXMuJG1vdmVTZWxlY3Rpb24odGhpcy5tb3ZlQ3Vyc29yTGluZVN0YXJ0KX0sdGhpcy5zZWxlY3RMaW5lRW5kPWZ1bmN0aW9uKCl7dGhpcy4kbW92ZVNlbGVjdGlvbih0aGlzLm1vdmVDdXJzb3JMaW5lRW5kKX0sdGhpcy5zZWxlY3RGaWxlRW5kPWZ1bmN0aW9uKCl7dGhpcy4kbW92ZVNlbGVjdGlvbih0aGlzLm1vdmVDdXJzb3JGaWxlRW5kKX0sdGhpcy5zZWxlY3RGaWxlU3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLiRtb3ZlU2VsZWN0aW9uKHRoaXMubW92ZUN1cnNvckZpbGVTdGFydCl9LHRoaXMuc2VsZWN0V29yZFJpZ2h0PWZ1bmN0aW9uKCl7dGhpcy4kbW92ZVNlbGVjdGlvbih0aGlzLm1vdmVDdXJzb3JXb3JkUmlnaHQpfSx0aGlzLnNlbGVjdFdvcmRMZWZ0PWZ1bmN0aW9uKCl7dGhpcy4kbW92ZVNlbGVjdGlvbih0aGlzLm1vdmVDdXJzb3JXb3JkTGVmdCl9LHRoaXMuZ2V0V29yZFJhbmdlPWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQ9PVwidW5kZWZpbmVkXCIpe3ZhciBuPWV8fHRoaXMubGVhZDtlPW4ucm93LHQ9bi5jb2x1bW59cmV0dXJuIHRoaXMuc2Vzc2lvbi5nZXRXb3JkUmFuZ2UoZSx0KX0sdGhpcy5zZWxlY3RXb3JkPWZ1bmN0aW9uKCl7dGhpcy5zZXRTZWxlY3Rpb25SYW5nZSh0aGlzLmdldFdvcmRSYW5nZSgpKX0sdGhpcy5zZWxlY3RBV29yZD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q3Vyc29yKCksdD10aGlzLnNlc3Npb24uZ2V0QVdvcmRSYW5nZShlLnJvdyxlLmNvbHVtbik7dGhpcy5zZXRTZWxlY3Rpb25SYW5nZSh0KX0sdGhpcy5nZXRMaW5lUmFuZ2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2YgZT09XCJudW1iZXJcIj9lOnRoaXMubGVhZC5yb3cscixpPXRoaXMuc2Vzc2lvbi5nZXRGb2xkTGluZShuKTtyZXR1cm4gaT8obj1pLnN0YXJ0LnJvdyxyPWkuZW5kLnJvdyk6cj1uLHQ9PT0hMD9uZXcgbyhuLDAscix0aGlzLnNlc3Npb24uZ2V0TGluZShyKS5sZW5ndGgpOm5ldyBvKG4sMCxyKzEsMCl9LHRoaXMuc2VsZWN0TGluZT1mdW5jdGlvbigpe3RoaXMuc2V0U2VsZWN0aW9uUmFuZ2UodGhpcy5nZXRMaW5lUmFuZ2UoKSl9LHRoaXMubW92ZUN1cnNvclVwPWZ1bmN0aW9uKCl7dGhpcy5tb3ZlQ3Vyc29yQnkoLTEsMCl9LHRoaXMubW92ZUN1cnNvckRvd249ZnVuY3Rpb24oKXt0aGlzLm1vdmVDdXJzb3JCeSgxLDApfSx0aGlzLm1vdmVDdXJzb3JMZWZ0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZWFkLmdldFBvc2l0aW9uKCksdDtpZih0PXRoaXMuc2Vzc2lvbi5nZXRGb2xkQXQoZS5yb3csZS5jb2x1bW4sLTEpKXRoaXMubW92ZUN1cnNvclRvKHQuc3RhcnQucm93LHQuc3RhcnQuY29sdW1uKTtlbHNlIGlmKGUuY29sdW1uPT09MCllLnJvdz4wJiZ0aGlzLm1vdmVDdXJzb3JUbyhlLnJvdy0xLHRoaXMuZG9jLmdldExpbmUoZS5yb3ctMSkubGVuZ3RoKTtlbHNle3ZhciBuPXRoaXMuc2Vzc2lvbi5nZXRUYWJTaXplKCk7dGhpcy5zZXNzaW9uLmlzVGFiU3RvcChlKSYmdGhpcy5kb2MuZ2V0TGluZShlLnJvdykuc2xpY2UoZS5jb2x1bW4tbixlLmNvbHVtbikuc3BsaXQoXCIgXCIpLmxlbmd0aC0xPT1uP3RoaXMubW92ZUN1cnNvckJ5KDAsLW4pOnRoaXMubW92ZUN1cnNvckJ5KDAsLTEpfX0sdGhpcy5tb3ZlQ3Vyc29yUmlnaHQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlYWQuZ2V0UG9zaXRpb24oKSx0O2lmKHQ9dGhpcy5zZXNzaW9uLmdldEZvbGRBdChlLnJvdyxlLmNvbHVtbiwxKSl0aGlzLm1vdmVDdXJzb3JUbyh0LmVuZC5yb3csdC5lbmQuY29sdW1uKTtlbHNlIGlmKHRoaXMubGVhZC5jb2x1bW49PXRoaXMuZG9jLmdldExpbmUodGhpcy5sZWFkLnJvdykubGVuZ3RoKXRoaXMubGVhZC5yb3c8dGhpcy5kb2MuZ2V0TGVuZ3RoKCktMSYmdGhpcy5tb3ZlQ3Vyc29yVG8odGhpcy5sZWFkLnJvdysxLDApO2Vsc2V7dmFyIG49dGhpcy5zZXNzaW9uLmdldFRhYlNpemUoKSxlPXRoaXMubGVhZDt0aGlzLnNlc3Npb24uaXNUYWJTdG9wKGUpJiZ0aGlzLmRvYy5nZXRMaW5lKGUucm93KS5zbGljZShlLmNvbHVtbixlLmNvbHVtbituKS5zcGxpdChcIiBcIikubGVuZ3RoLTE9PW4/dGhpcy5tb3ZlQ3Vyc29yQnkoMCxuKTp0aGlzLm1vdmVDdXJzb3JCeSgwLDEpfX0sdGhpcy5tb3ZlQ3Vyc29yTGluZVN0YXJ0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZWFkLnJvdyx0PXRoaXMubGVhZC5jb2x1bW4sbj10aGlzLnNlc3Npb24uZG9jdW1lbnRUb1NjcmVlblJvdyhlLHQpLHI9dGhpcy5zZXNzaW9uLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbihuLDApLGk9dGhpcy5zZXNzaW9uLmdldERpc3BsYXlMaW5lKGUsbnVsbCxyLnJvdyxyLmNvbHVtbikscz1pLm1hdGNoKC9eXFxzKi8pO3NbMF0ubGVuZ3RoIT10JiYhdGhpcy5zZXNzaW9uLiR1c2VFbWFjc1N0eWxlTGluZVN0YXJ0JiYoci5jb2x1bW4rPXNbMF0ubGVuZ3RoKSx0aGlzLm1vdmVDdXJzb3JUb1Bvc2l0aW9uKHIpfSx0aGlzLm1vdmVDdXJzb3JMaW5lRW5kPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZWFkLHQ9dGhpcy5zZXNzaW9uLmdldERvY3VtZW50TGFzdFJvd0NvbHVtblBvc2l0aW9uKGUucm93LGUuY29sdW1uKTtpZih0aGlzLmxlYWQuY29sdW1uPT10LmNvbHVtbil7dmFyIG49dGhpcy5zZXNzaW9uLmdldExpbmUodC5yb3cpO2lmKHQuY29sdW1uPT1uLmxlbmd0aCl7dmFyIHI9bi5zZWFyY2goL1xccyskLyk7cj4wJiYodC5jb2x1bW49cil9fXRoaXMubW92ZUN1cnNvclRvKHQucm93LHQuY29sdW1uKX0sdGhpcy5tb3ZlQ3Vyc29yRmlsZUVuZD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZG9jLmdldExlbmd0aCgpLTEsdD10aGlzLmRvYy5nZXRMaW5lKGUpLmxlbmd0aDt0aGlzLm1vdmVDdXJzb3JUbyhlLHQpfSx0aGlzLm1vdmVDdXJzb3JGaWxlU3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLm1vdmVDdXJzb3JUbygwLDApfSx0aGlzLm1vdmVDdXJzb3JMb25nV29yZFJpZ2h0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZWFkLnJvdyx0PXRoaXMubGVhZC5jb2x1bW4sbj10aGlzLmRvYy5nZXRMaW5lKGUpLHI9bi5zdWJzdHJpbmcodCksaTt0aGlzLnNlc3Npb24ubm9uVG9rZW5SZS5sYXN0SW5kZXg9MCx0aGlzLnNlc3Npb24udG9rZW5SZS5sYXN0SW5kZXg9MDt2YXIgcz10aGlzLnNlc3Npb24uZ2V0Rm9sZEF0KGUsdCwxKTtpZihzKXt0aGlzLm1vdmVDdXJzb3JUbyhzLmVuZC5yb3cscy5lbmQuY29sdW1uKTtyZXR1cm59aWYoaT10aGlzLnNlc3Npb24ubm9uVG9rZW5SZS5leGVjKHIpKXQrPXRoaXMuc2Vzc2lvbi5ub25Ub2tlblJlLmxhc3RJbmRleCx0aGlzLnNlc3Npb24ubm9uVG9rZW5SZS5sYXN0SW5kZXg9MCxyPW4uc3Vic3RyaW5nKHQpO2lmKHQ+PW4ubGVuZ3RoKXt0aGlzLm1vdmVDdXJzb3JUbyhlLG4ubGVuZ3RoKSx0aGlzLm1vdmVDdXJzb3JSaWdodCgpLGU8dGhpcy5kb2MuZ2V0TGVuZ3RoKCktMSYmdGhpcy5tb3ZlQ3Vyc29yV29yZFJpZ2h0KCk7cmV0dXJufWlmKGk9dGhpcy5zZXNzaW9uLnRva2VuUmUuZXhlYyhyKSl0Kz10aGlzLnNlc3Npb24udG9rZW5SZS5sYXN0SW5kZXgsdGhpcy5zZXNzaW9uLnRva2VuUmUubGFzdEluZGV4PTA7dGhpcy5tb3ZlQ3Vyc29yVG8oZSx0KX0sdGhpcy5tb3ZlQ3Vyc29yTG9uZ1dvcmRMZWZ0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZWFkLnJvdyx0PXRoaXMubGVhZC5jb2x1bW4sbjtpZihuPXRoaXMuc2Vzc2lvbi5nZXRGb2xkQXQoZSx0LC0xKSl7dGhpcy5tb3ZlQ3Vyc29yVG8obi5zdGFydC5yb3csbi5zdGFydC5jb2x1bW4pO3JldHVybn12YXIgcj10aGlzLnNlc3Npb24uZ2V0Rm9sZFN0cmluZ0F0KGUsdCwtMSk7cj09bnVsbCYmKHI9dGhpcy5kb2MuZ2V0TGluZShlKS5zdWJzdHJpbmcoMCx0KSk7dmFyIHM9aS5zdHJpbmdSZXZlcnNlKHIpLG87dGhpcy5zZXNzaW9uLm5vblRva2VuUmUubGFzdEluZGV4PTAsdGhpcy5zZXNzaW9uLnRva2VuUmUubGFzdEluZGV4PTA7aWYobz10aGlzLnNlc3Npb24ubm9uVG9rZW5SZS5leGVjKHMpKXQtPXRoaXMuc2Vzc2lvbi5ub25Ub2tlblJlLmxhc3RJbmRleCxzPXMuc2xpY2UodGhpcy5zZXNzaW9uLm5vblRva2VuUmUubGFzdEluZGV4KSx0aGlzLnNlc3Npb24ubm9uVG9rZW5SZS5sYXN0SW5kZXg9MDtpZih0PD0wKXt0aGlzLm1vdmVDdXJzb3JUbyhlLDApLHRoaXMubW92ZUN1cnNvckxlZnQoKSxlPjAmJnRoaXMubW92ZUN1cnNvcldvcmRMZWZ0KCk7cmV0dXJufWlmKG89dGhpcy5zZXNzaW9uLnRva2VuUmUuZXhlYyhzKSl0LT10aGlzLnNlc3Npb24udG9rZW5SZS5sYXN0SW5kZXgsdGhpcy5zZXNzaW9uLnRva2VuUmUubGFzdEluZGV4PTA7dGhpcy5tb3ZlQ3Vyc29yVG8oZSx0KX0sdGhpcy4kc2hvcnRXb3JkRW5kSW5kZXg9ZnVuY3Rpb24oZSl7dmFyIHQsbj0wLHIsaT0vXFxzLyxzPXRoaXMuc2Vzc2lvbi50b2tlblJlO3MubGFzdEluZGV4PTA7aWYodD10aGlzLnNlc3Npb24udG9rZW5SZS5leGVjKGUpKW49dGhpcy5zZXNzaW9uLnRva2VuUmUubGFzdEluZGV4O2Vsc2V7d2hpbGUoKHI9ZVtuXSkmJmkudGVzdChyKSluKys7aWYobjwxKXtzLmxhc3RJbmRleD0wO3doaWxlKChyPWVbbl0pJiYhcy50ZXN0KHIpKXtzLmxhc3RJbmRleD0wLG4rKztpZihpLnRlc3Qocikpe2lmKG4+Mil7bi0tO2JyZWFrfXdoaWxlKChyPWVbbl0pJiZpLnRlc3QocikpbisrO2lmKG4+MilicmVha319fX1yZXR1cm4gcy5sYXN0SW5kZXg9MCxufSx0aGlzLm1vdmVDdXJzb3JTaG9ydFdvcmRSaWdodD1mdW5jdGlvbigpe3ZhciBlPXRoaXMubGVhZC5yb3csdD10aGlzLmxlYWQuY29sdW1uLG49dGhpcy5kb2MuZ2V0TGluZShlKSxyPW4uc3Vic3RyaW5nKHQpLGk9dGhpcy5zZXNzaW9uLmdldEZvbGRBdChlLHQsMSk7aWYoaSlyZXR1cm4gdGhpcy5tb3ZlQ3Vyc29yVG8oaS5lbmQucm93LGkuZW5kLmNvbHVtbik7aWYodD09bi5sZW5ndGgpe3ZhciBzPXRoaXMuZG9jLmdldExlbmd0aCgpO2RvIGUrKyxyPXRoaXMuZG9jLmdldExpbmUoZSk7d2hpbGUoZTxzJiYvXlxccyokLy50ZXN0KHIpKTsvXlxccysvLnRlc3Qocil8fChyPVwiXCIpLHQ9MH12YXIgbz10aGlzLiRzaG9ydFdvcmRFbmRJbmRleChyKTt0aGlzLm1vdmVDdXJzb3JUbyhlLHQrbyl9LHRoaXMubW92ZUN1cnNvclNob3J0V29yZExlZnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlYWQucm93LHQ9dGhpcy5sZWFkLmNvbHVtbixuO2lmKG49dGhpcy5zZXNzaW9uLmdldEZvbGRBdChlLHQsLTEpKXJldHVybiB0aGlzLm1vdmVDdXJzb3JUbyhuLnN0YXJ0LnJvdyxuLnN0YXJ0LmNvbHVtbik7dmFyIHI9dGhpcy5zZXNzaW9uLmdldExpbmUoZSkuc3Vic3RyaW5nKDAsdCk7aWYodD09PTApe2RvIGUtLSxyPXRoaXMuZG9jLmdldExpbmUoZSk7d2hpbGUoZT4wJiYvXlxccyokLy50ZXN0KHIpKTt0PXIubGVuZ3RoLC9cXHMrJC8udGVzdChyKXx8KHI9XCJcIil9dmFyIHM9aS5zdHJpbmdSZXZlcnNlKHIpLG89dGhpcy4kc2hvcnRXb3JkRW5kSW5kZXgocyk7cmV0dXJuIHRoaXMubW92ZUN1cnNvclRvKGUsdC1vKX0sdGhpcy5tb3ZlQ3Vyc29yV29yZFJpZ2h0PWZ1bmN0aW9uKCl7dGhpcy5zZXNzaW9uLiRzZWxlY3RMb25nV29yZHM/dGhpcy5tb3ZlQ3Vyc29yTG9uZ1dvcmRSaWdodCgpOnRoaXMubW92ZUN1cnNvclNob3J0V29yZFJpZ2h0KCl9LHRoaXMubW92ZUN1cnNvcldvcmRMZWZ0PWZ1bmN0aW9uKCl7dGhpcy5zZXNzaW9uLiRzZWxlY3RMb25nV29yZHM/dGhpcy5tb3ZlQ3Vyc29yTG9uZ1dvcmRMZWZ0KCk6dGhpcy5tb3ZlQ3Vyc29yU2hvcnRXb3JkTGVmdCgpfSx0aGlzLm1vdmVDdXJzb3JCeT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24odGhpcy5sZWFkLnJvdyx0aGlzLmxlYWQuY29sdW1uKTt0PT09MCYmKHRoaXMuJGRlc2lyZWRDb2x1bW4/bi5jb2x1bW49dGhpcy4kZGVzaXJlZENvbHVtbjp0aGlzLiRkZXNpcmVkQ29sdW1uPW4uY29sdW1uKTt2YXIgcj10aGlzLnNlc3Npb24uc2NyZWVuVG9Eb2N1bWVudFBvc2l0aW9uKG4ucm93K2Usbi5jb2x1bW4pO2UhPT0wJiZ0PT09MCYmci5yb3c9PT10aGlzLmxlYWQucm93JiZyLmNvbHVtbj09PXRoaXMubGVhZC5jb2x1bW4mJnRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0cyYmdGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzW3Iucm93XSYmci5yb3crKyx0aGlzLm1vdmVDdXJzb3JUbyhyLnJvdyxyLmNvbHVtbit0LHQ9PT0wKX0sdGhpcy5tb3ZlQ3Vyc29yVG9Qb3NpdGlvbj1mdW5jdGlvbihlKXt0aGlzLm1vdmVDdXJzb3JUbyhlLnJvdyxlLmNvbHVtbil9LHRoaXMubW92ZUN1cnNvclRvPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10aGlzLnNlc3Npb24uZ2V0Rm9sZEF0KGUsdCwxKTtyJiYoZT1yLnN0YXJ0LnJvdyx0PXIuc3RhcnQuY29sdW1uKSx0aGlzLiRrZWVwRGVzaXJlZENvbHVtbk9uQ2hhbmdlPSEwLHRoaXMubGVhZC5zZXRQb3NpdGlvbihlLHQpLHRoaXMuJGtlZXBEZXNpcmVkQ29sdW1uT25DaGFuZ2U9ITEsbnx8KHRoaXMuJGRlc2lyZWRDb2x1bW49bnVsbCl9LHRoaXMubW92ZUN1cnNvclRvU2NyZWVuPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10aGlzLnNlc3Npb24uc2NyZWVuVG9Eb2N1bWVudFBvc2l0aW9uKGUsdCk7dGhpcy5tb3ZlQ3Vyc29yVG8oci5yb3csci5jb2x1bW4sbil9LHRoaXMuZGV0YWNoPWZ1bmN0aW9uKCl7dGhpcy5sZWFkLmRldGFjaCgpLHRoaXMuYW5jaG9yLmRldGFjaCgpLHRoaXMuc2Vzc2lvbj10aGlzLmRvYz1udWxsfSx0aGlzLmZyb21PcmllbnRlZFJhbmdlPWZ1bmN0aW9uKGUpe3RoaXMuc2V0U2VsZWN0aW9uUmFuZ2UoZSxlLmN1cnNvcj09ZS5zdGFydCksdGhpcy4kZGVzaXJlZENvbHVtbj1lLmRlc2lyZWRDb2x1bW58fHRoaXMuJGRlc2lyZWRDb2x1bW59LHRoaXMudG9PcmllbnRlZFJhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0UmFuZ2UoKTtyZXR1cm4gZT8oZS5zdGFydC5jb2x1bW49dC5zdGFydC5jb2x1bW4sZS5zdGFydC5yb3c9dC5zdGFydC5yb3csZS5lbmQuY29sdW1uPXQuZW5kLmNvbHVtbixlLmVuZC5yb3c9dC5lbmQucm93KTplPXQsZS5jdXJzb3I9dGhpcy5pc0JhY2t3YXJkcygpP2Uuc3RhcnQ6ZS5lbmQsZS5kZXNpcmVkQ29sdW1uPXRoaXMuJGRlc2lyZWRDb2x1bW4sZX0sdGhpcy5nZXRSYW5nZU9mTW92ZW1lbnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0Q3Vyc29yKCk7dHJ5e2UuY2FsbChudWxsLHRoaXMpO3ZhciBuPXRoaXMuZ2V0Q3Vyc29yKCk7cmV0dXJuIG8uZnJvbVBvaW50cyh0LG4pfWNhdGNoKHIpe3JldHVybiBvLmZyb21Qb2ludHModCx0KX1maW5hbGx5e3RoaXMubW92ZUN1cnNvclRvUG9zaXRpb24odCl9fSx0aGlzLnRvSlNPTj1mdW5jdGlvbigpe2lmKHRoaXMucmFuZ2VDb3VudCl2YXIgZT10aGlzLnJhbmdlcy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jbG9uZSgpO3JldHVybiB0LmlzQmFja3dhcmRzPWUuY3Vyc29yPT1lLnN0YXJ0LHR9KTtlbHNle3ZhciBlPXRoaXMuZ2V0UmFuZ2UoKTtlLmlzQmFja3dhcmRzPXRoaXMuaXNCYWNrd2FyZHMoKX1yZXR1cm4gZX0sdGhpcy5mcm9tSlNPTj1mdW5jdGlvbihlKXtpZihlLnN0YXJ0PT11bmRlZmluZWQpe2lmKHRoaXMucmFuZ2VMaXN0KXt0aGlzLnRvU2luZ2xlUmFuZ2UoZVswXSk7Zm9yKHZhciB0PWUubGVuZ3RoO3QtLTspe3ZhciBuPW8uZnJvbVBvaW50cyhlW3RdLnN0YXJ0LGVbdF0uZW5kKTtlW3RdLmlzQmFja3dhcmRzJiYobi5jdXJzb3I9bi5zdGFydCksdGhpcy5hZGRSYW5nZShuLCEwKX1yZXR1cm59ZT1lWzBdfXRoaXMucmFuZ2VMaXN0JiZ0aGlzLnRvU2luZ2xlUmFuZ2UoZSksdGhpcy5zZXRTZWxlY3Rpb25SYW5nZShlLGUuaXNCYWNrd2FyZHMpfSx0aGlzLmlzRXF1YWw9ZnVuY3Rpb24oZSl7aWYoKGUubGVuZ3RofHx0aGlzLnJhbmdlQ291bnQpJiZlLmxlbmd0aCE9dGhpcy5yYW5nZUNvdW50KXJldHVybiExO2lmKCFlLmxlbmd0aHx8IXRoaXMucmFuZ2VzKXJldHVybiB0aGlzLmdldFJhbmdlKCkuaXNFcXVhbChlKTtmb3IodmFyIHQ9dGhpcy5yYW5nZXMubGVuZ3RoO3QtLTspaWYoIXRoaXMucmFuZ2VzW3RdLmlzRXF1YWwoZVt0XSkpcmV0dXJuITE7cmV0dXJuITB9fSkuY2FsbCh1LnByb3RvdHlwZSksdC5TZWxlY3Rpb249dX0pLGRlZmluZShcImFjZS90b2tlbml6ZXJcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9jb25maWdcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciByPWUoXCIuL2NvbmZpZ1wiKSxpPTJlMyxzPWZ1bmN0aW9uKGUpe3RoaXMuc3RhdGVzPWUsdGhpcy5yZWdFeHBzPXt9LHRoaXMubWF0Y2hNYXBwaW5ncz17fTtmb3IodmFyIHQgaW4gdGhpcy5zdGF0ZXMpe3ZhciBuPXRoaXMuc3RhdGVzW3RdLHI9W10saT0wLHM9dGhpcy5tYXRjaE1hcHBpbmdzW3RdPXtkZWZhdWx0VG9rZW46XCJ0ZXh0XCJ9LG89XCJnXCIsdT1bXTtmb3IodmFyIGE9MDthPG4ubGVuZ3RoO2ErKyl7dmFyIGY9blthXTtmLmRlZmF1bHRUb2tlbiYmKHMuZGVmYXVsdFRva2VuPWYuZGVmYXVsdFRva2VuKSxmLmNhc2VJbnNlbnNpdGl2ZSYmKG89XCJnaVwiKTtpZihmLnJlZ2V4PT1udWxsKWNvbnRpbnVlO2YucmVnZXggaW5zdGFuY2VvZiBSZWdFeHAmJihmLnJlZ2V4PWYucmVnZXgudG9TdHJpbmcoKS5zbGljZSgxLC0xKSk7dmFyIGw9Zi5yZWdleCxjPShuZXcgUmVnRXhwKFwiKD86KFwiK2wrXCIpfCguKSlcIikpLmV4ZWMoXCJhXCIpLmxlbmd0aC0yO0FycmF5LmlzQXJyYXkoZi50b2tlbik/Zi50b2tlbi5sZW5ndGg9PTF8fGM9PTE/Zi50b2tlbj1mLnRva2VuWzBdOmMtMSE9Zi50b2tlbi5sZW5ndGg/KHRoaXMucmVwb3J0RXJyb3IoXCJudW1iZXIgb2YgY2xhc3NlcyBhbmQgcmVnZXhwIGdyb3VwcyBkb2Vzbid0IG1hdGNoXCIse3J1bGU6Zixncm91cENvdW50OmMtMX0pLGYudG9rZW49Zi50b2tlblswXSk6KGYudG9rZW5BcnJheT1mLnRva2VuLGYudG9rZW49bnVsbCxmLm9uTWF0Y2g9dGhpcy4kYXJyYXlUb2tlbnMpOnR5cGVvZiBmLnRva2VuPT1cImZ1bmN0aW9uXCImJiFmLm9uTWF0Y2gmJihjPjE/Zi5vbk1hdGNoPXRoaXMuJGFwcGx5VG9rZW46Zi5vbk1hdGNoPWYudG9rZW4pLGM+MSYmKC9cXFxcXFxkLy50ZXN0KGYucmVnZXgpP2w9Zi5yZWdleC5yZXBsYWNlKC9cXFxcKFswLTldKykvZyxmdW5jdGlvbihlLHQpe3JldHVyblwiXFxcXFwiKyhwYXJzZUludCh0LDEwKStpKzEpfSk6KGM9MSxsPXRoaXMucmVtb3ZlQ2FwdHVyaW5nR3JvdXBzKGYucmVnZXgpKSwhZi5zcGxpdFJlZ2V4JiZ0eXBlb2YgZi50b2tlbiE9XCJzdHJpbmdcIiYmdS5wdXNoKGYpKSxzW2ldPWEsaSs9YyxyLnB1c2gobCksZi5vbk1hdGNofHwoZi5vbk1hdGNoPW51bGwpfXIubGVuZ3RofHwoc1swXT0wLHIucHVzaChcIiRcIikpLHUuZm9yRWFjaChmdW5jdGlvbihlKXtlLnNwbGl0UmVnZXg9dGhpcy5jcmVhdGVTcGxpdHRlclJlZ2V4cChlLnJlZ2V4LG8pfSx0aGlzKSx0aGlzLnJlZ0V4cHNbdF09bmV3IFJlZ0V4cChcIihcIityLmpvaW4oXCIpfChcIikrXCIpfCgkKVwiLG8pfX07KGZ1bmN0aW9uKCl7dGhpcy4kc2V0TWF4VG9rZW5Db3VudD1mdW5jdGlvbihlKXtpPWV8MH0sdGhpcy4kYXBwbHlUb2tlbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnNwbGl0UmVnZXguZXhlYyhlKS5zbGljZSgxKSxuPXRoaXMudG9rZW4uYXBwbHkodGhpcyx0KTtpZih0eXBlb2Ygbj09XCJzdHJpbmdcIilyZXR1cm5be3R5cGU6bix2YWx1ZTplfV07dmFyIHI9W107Zm9yKHZhciBpPTAscz1uLmxlbmd0aDtpPHM7aSsrKXRbaV0mJihyW3IubGVuZ3RoXT17dHlwZTpuW2ldLHZhbHVlOnRbaV19KTtyZXR1cm4gcn0sdGhpcy4kYXJyYXlUb2tlbnM9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuW107dmFyIHQ9dGhpcy5zcGxpdFJlZ2V4LmV4ZWMoZSk7aWYoIXQpcmV0dXJuXCJ0ZXh0XCI7dmFyIG49W10scj10aGlzLnRva2VuQXJyYXk7Zm9yKHZhciBpPTAscz1yLmxlbmd0aDtpPHM7aSsrKXRbaSsxXSYmKG5bbi5sZW5ndGhdPXt0eXBlOnJbaV0sdmFsdWU6dFtpKzFdfSk7cmV0dXJuIG59LHRoaXMucmVtb3ZlQ2FwdHVyaW5nR3JvdXBzPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZSgvXFxbKD86XFxcXC58W15cXF1dKSo/XFxdfFxcXFwufFxcKFxcP1s6PSFdfChcXCgpL2csZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9cIig/OlwiOmV9KTtyZXR1cm4gdH0sdGhpcy5jcmVhdGVTcGxpdHRlclJlZ2V4cD1mdW5jdGlvbihlLHQpe2lmKGUuaW5kZXhPZihcIig/PVwiKSE9LTEpe3ZhciBuPTAscj0hMSxpPXt9O2UucmVwbGFjZSgvKFxcXFwuKXwoXFwoKD86XFw/Wz0hXSk/KXwoXFwpKXwoW1xcW1xcXV0pL2csZnVuY3Rpb24oZSx0LHMsbyx1LGEpe3JldHVybiByP3I9dSE9XCJdXCI6dT9yPSEwOm8/KG49PWkuc3RhY2smJihpLmVuZD1hKzEsaS5zdGFjaz0tMSksbi0tKTpzJiYobisrLHMubGVuZ3RoIT0xJiYoaS5zdGFjaz1uLGkuc3RhcnQ9YSkpLGV9KSxpLmVuZCE9bnVsbCYmL15cXCkqJC8udGVzdChlLnN1YnN0cihpLmVuZCkpJiYoZT1lLnN1YnN0cmluZygwLGkuc3RhcnQpK2Uuc3Vic3RyKGkuZW5kKSl9cmV0dXJuIGUuY2hhckF0KDApIT1cIl5cIiYmKGU9XCJeXCIrZSksZS5jaGFyQXQoZS5sZW5ndGgtMSkhPVwiJFwiJiYoZSs9XCIkXCIpLG5ldyBSZWdFeHAoZSwodHx8XCJcIikucmVwbGFjZShcImdcIixcIlwiKSl9LHRoaXMuZ2V0TGluZVRva2Vucz1mdW5jdGlvbihlLHQpe2lmKHQmJnR5cGVvZiB0IT1cInN0cmluZ1wiKXt2YXIgbj10LnNsaWNlKDApO3Q9blswXSx0PT09XCIjdG1wXCImJihuLnNoaWZ0KCksdD1uLnNoaWZ0KCkpfWVsc2UgdmFyIG49W107dmFyIHI9dHx8XCJzdGFydFwiLHM9dGhpcy5zdGF0ZXNbcl07c3x8KHI9XCJzdGFydFwiLHM9dGhpcy5zdGF0ZXNbcl0pO3ZhciBvPXRoaXMubWF0Y2hNYXBwaW5nc1tyXSx1PXRoaXMucmVnRXhwc1tyXTt1Lmxhc3RJbmRleD0wO3ZhciBhLGY9W10sbD0wLGM9MCxoPXt0eXBlOm51bGwsdmFsdWU6XCJcIn07d2hpbGUoYT11LmV4ZWMoZSkpe3ZhciBwPW8uZGVmYXVsdFRva2VuLGQ9bnVsbCx2PWFbMF0sbT11Lmxhc3RJbmRleDtpZihtLXYubGVuZ3RoPmwpe3ZhciBnPWUuc3Vic3RyaW5nKGwsbS12Lmxlbmd0aCk7aC50eXBlPT1wP2gudmFsdWUrPWc6KGgudHlwZSYmZi5wdXNoKGgpLGg9e3R5cGU6cCx2YWx1ZTpnfSl9Zm9yKHZhciB5PTA7eTxhLmxlbmd0aC0yO3krKyl7aWYoYVt5KzFdPT09dW5kZWZpbmVkKWNvbnRpbnVlO2Q9c1tvW3ldXSxkLm9uTWF0Y2g/cD1kLm9uTWF0Y2godixyLG4pOnA9ZC50b2tlbixkLm5leHQmJih0eXBlb2YgZC5uZXh0PT1cInN0cmluZ1wiP3I9ZC5uZXh0OnI9ZC5uZXh0KHIsbikscz10aGlzLnN0YXRlc1tyXSxzfHwodGhpcy5yZXBvcnRFcnJvcihcInN0YXRlIGRvZXNuJ3QgZXhpc3RcIixyKSxyPVwic3RhcnRcIixzPXRoaXMuc3RhdGVzW3JdKSxvPXRoaXMubWF0Y2hNYXBwaW5nc1tyXSxsPW0sdT10aGlzLnJlZ0V4cHNbcl0sdS5sYXN0SW5kZXg9bSk7YnJlYWt9aWYodilpZih0eXBlb2YgcD09XCJzdHJpbmdcIikhIWQmJmQubWVyZ2U9PT0hMXx8aC50eXBlIT09cD8oaC50eXBlJiZmLnB1c2goaCksaD17dHlwZTpwLHZhbHVlOnZ9KTpoLnZhbHVlKz12O2Vsc2UgaWYocCl7aC50eXBlJiZmLnB1c2goaCksaD17dHlwZTpudWxsLHZhbHVlOlwiXCJ9O2Zvcih2YXIgeT0wO3k8cC5sZW5ndGg7eSsrKWYucHVzaChwW3ldKX1pZihsPT1lLmxlbmd0aClicmVhaztsPW07aWYoYysrPmkpe2M+MiplLmxlbmd0aCYmdGhpcy5yZXBvcnRFcnJvcihcImluZmluaXRlIGxvb3Agd2l0aCBpbiBhY2UgdG9rZW5pemVyXCIse3N0YXJ0U3RhdGU6dCxsaW5lOmV9KTt3aGlsZShsPGUubGVuZ3RoKWgudHlwZSYmZi5wdXNoKGgpLGg9e3ZhbHVlOmUuc3Vic3RyaW5nKGwsbCs9MmUzKSx0eXBlOlwib3ZlcmZsb3dcIn07cj1cInN0YXJ0XCIsbj1bXTticmVha319cmV0dXJuIGgudHlwZSYmZi5wdXNoKGgpLG4ubGVuZ3RoPjEmJm5bMF0hPT1yJiZuLnVuc2hpZnQoXCIjdG1wXCIscikse3Rva2VuczpmLHN0YXRlOm4ubGVuZ3RoP246cn19LHRoaXMucmVwb3J0RXJyb3I9ci5yZXBvcnRFcnJvcn0pLmNhbGwocy5wcm90b3R5cGUpLHQuVG9rZW5pemVyPXN9KSxkZWZpbmUoXCJhY2UvbW9kZS90ZXh0X2hpZ2hsaWdodF9ydWxlc1wiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9sYW5nXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi4vbGliL2xhbmdcIiksaT1mdW5jdGlvbigpe3RoaXMuJHJ1bGVzPXtzdGFydDpbe3Rva2VuOlwiZW1wdHlfbGluZVwiLHJlZ2V4OlwiXiRcIn0se2RlZmF1bHRUb2tlbjpcInRleHRcIn1dfX07KGZ1bmN0aW9uKCl7dGhpcy5hZGRSdWxlcz1mdW5jdGlvbihlLHQpe2lmKCF0KXtmb3IodmFyIG4gaW4gZSl0aGlzLiRydWxlc1tuXT1lW25dO3JldHVybn1mb3IodmFyIG4gaW4gZSl7dmFyIHI9ZVtuXTtmb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIHM9cltpXTtpZihzLm5leHR8fHMub25NYXRjaCl0eXBlb2Ygcy5uZXh0PT1cInN0cmluZ1wiJiZzLm5leHQuaW5kZXhPZih0KSE9PTAmJihzLm5leHQ9dCtzLm5leHQpLHMubmV4dFN0YXRlJiZzLm5leHRTdGF0ZS5pbmRleE9mKHQpIT09MCYmKHMubmV4dFN0YXRlPXQrcy5uZXh0U3RhdGUpfXRoaXMuJHJ1bGVzW3Qrbl09cn19LHRoaXMuZ2V0UnVsZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcnVsZXN9LHRoaXMuZW1iZWRSdWxlcz1mdW5jdGlvbihlLHQsbixpLHMpe3ZhciBvPXR5cGVvZiBlPT1cImZ1bmN0aW9uXCI/KG5ldyBlKS5nZXRSdWxlcygpOmU7aWYoaSlmb3IodmFyIHU9MDt1PGkubGVuZ3RoO3UrKylpW3VdPXQraVt1XTtlbHNle2k9W107Zm9yKHZhciBhIGluIG8paS5wdXNoKHQrYSl9dGhpcy5hZGRSdWxlcyhvLHQpO2lmKG4pe3ZhciBmPUFycmF5LnByb3RvdHlwZVtzP1wicHVzaFwiOlwidW5zaGlmdFwiXTtmb3IodmFyIHU9MDt1PGkubGVuZ3RoO3UrKylmLmFwcGx5KHRoaXMuJHJ1bGVzW2lbdV1dLHIuZGVlcENvcHkobikpfXRoaXMuJGVtYmVkc3x8KHRoaXMuJGVtYmVkcz1bXSksdGhpcy4kZW1iZWRzLnB1c2godCl9LHRoaXMuZ2V0RW1iZWRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVtYmVkc307dmFyIGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZSE9XCJzdGFydFwifHx0Lmxlbmd0aCkmJnQudW5zaGlmdCh0aGlzLm5leHRTdGF0ZSxlKSx0aGlzLm5leHRTdGF0ZX0sdD1mdW5jdGlvbihlLHQpe3JldHVybiB0LnNoaWZ0KCksdC5zaGlmdCgpfHxcInN0YXJ0XCJ9O3RoaXMubm9ybWFsaXplUnVsZXM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKHMpe3ZhciBvPXJbc107by5wcm9jZXNzZWQ9ITA7Zm9yKHZhciB1PTA7dTxvLmxlbmd0aDt1Kyspe3ZhciBhPW9bdV07IWEucmVnZXgmJmEuc3RhcnQmJihhLnJlZ2V4PWEuc3RhcnQsYS5uZXh0fHwoYS5uZXh0PVtdKSxhLm5leHQucHVzaCh7ZGVmYXVsdFRva2VuOmEudG9rZW59LHt0b2tlbjphLnRva2VuK1wiLmVuZFwiLHJlZ2V4OmEuZW5kfHxhLnN0YXJ0LG5leHQ6XCJwb3BcIn0pLGEudG9rZW49YS50b2tlbitcIi5zdGFydFwiLGEucHVzaD0hMCk7dmFyIGY9YS5uZXh0fHxhLnB1c2g7aWYoZiYmQXJyYXkuaXNBcnJheShmKSl7dmFyIGw9YS5zdGF0ZU5hbWU7bHx8KGw9YS50b2tlbix0eXBlb2YgbCE9XCJzdHJpbmdcIiYmKGw9bFswXXx8XCJcIikscltsXSYmKGwrPW4rKykpLHJbbF09ZixhLm5leHQ9bCxpKGwpfWVsc2UgZj09XCJwb3BcIiYmKGEubmV4dD10KTthLnB1c2gmJihhLm5leHRTdGF0ZT1hLm5leHR8fGEucHVzaCxhLm5leHQ9ZSxkZWxldGUgYS5wdXNoKTtpZihhLnJ1bGVzKWZvcih2YXIgYyBpbiBhLnJ1bGVzKXJbY10/cltjXS5wdXNoJiZyW2NdLnB1c2guYXBwbHkocltjXSxhLnJ1bGVzW2NdKTpyW2NdPWEucnVsZXNbY107aWYoYS5pbmNsdWRlfHx0eXBlb2YgYT09XCJzdHJpbmdcIil2YXIgaD1hLmluY2x1ZGV8fGEscD1yW2hdO2Vsc2UgQXJyYXkuaXNBcnJheShhKSYmKHA9YSk7aWYocCl7dmFyIGQ9W3UsMV0uY29uY2F0KHApO2Eubm9Fc2NhcGUmJihkPWQuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLm5leHR9KSksby5zcGxpY2UuYXBwbHkobyxkKSx1LS0scD1udWxsfWEua2V5d29yZE1hcCYmKGEudG9rZW49dGhpcy5jcmVhdGVLZXl3b3JkTWFwcGVyKGEua2V5d29yZE1hcCxhLmRlZmF1bHRUb2tlbnx8XCJ0ZXh0XCIsYS5jYXNlSW5zZW5zaXRpdmUpLGRlbGV0ZSBhLmRlZmF1bHRUb2tlbil9fXZhciBuPTAscj10aGlzLiRydWxlcztPYmplY3Qua2V5cyhyKS5mb3JFYWNoKGksdGhpcyl9LHRoaXMuY3JlYXRlS2V5d29yZE1hcHBlcj1mdW5jdGlvbihlLHQsbixyKXt2YXIgaT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBzPWVbdF07biYmKHM9cy50b0xvd2VyQ2FzZSgpKTt2YXIgbz1zLnNwbGl0KHJ8fFwifFwiKTtmb3IodmFyIHU9by5sZW5ndGg7dS0tOylpW29bdV1dPXR9KSxPYmplY3QuZ2V0UHJvdG90eXBlT2YoaSkmJihpLl9fcHJvdG9fXz1udWxsKSx0aGlzLiRrZXl3b3JkTGlzdD1PYmplY3Qua2V5cyhpKSxlPW51bGwsbj9mdW5jdGlvbihlKXtyZXR1cm4gaVtlLnRvTG93ZXJDYXNlKCldfHx0fTpmdW5jdGlvbihlKXtyZXR1cm4gaVtlXXx8dH19LHRoaXMuZ2V0S2V5d29yZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4ka2V5d29yZHN9fSkuY2FsbChpLnByb3RvdHlwZSksdC5UZXh0SGlnaGxpZ2h0UnVsZXM9aX0pLGRlZmluZShcImFjZS9tb2RlL2JlaGF2aW91clwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZnVuY3Rpb24oKXt0aGlzLiRiZWhhdmlvdXJzPXt9fTsoZnVuY3Rpb24oKXt0aGlzLmFkZD1mdW5jdGlvbihlLHQsbil7c3dpdGNoKHVuZGVmaW5lZCl7Y2FzZSB0aGlzLiRiZWhhdmlvdXJzOnRoaXMuJGJlaGF2aW91cnM9e307Y2FzZSB0aGlzLiRiZWhhdmlvdXJzW2VdOnRoaXMuJGJlaGF2aW91cnNbZV09e319dGhpcy4kYmVoYXZpb3Vyc1tlXVt0XT1ufSx0aGlzLmFkZEJlaGF2aW91cnM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpZm9yKHZhciBuIGluIGVbdF0pdGhpcy5hZGQodCxuLGVbdF1bbl0pfSx0aGlzLnJlbW92ZT1mdW5jdGlvbihlKXt0aGlzLiRiZWhhdmlvdXJzJiZ0aGlzLiRiZWhhdmlvdXJzW2VdJiZkZWxldGUgdGhpcy4kYmVoYXZpb3Vyc1tlXX0sdGhpcy5pbmhlcml0PWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIGU9PVwiZnVuY3Rpb25cIil2YXIgbj0obmV3IGUpLmdldEJlaGF2aW91cnModCk7ZWxzZSB2YXIgbj1lLmdldEJlaGF2aW91cnModCk7dGhpcy5hZGRCZWhhdmlvdXJzKG4pfSx0aGlzLmdldEJlaGF2aW91cnM9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIHRoaXMuJGJlaGF2aW91cnM7dmFyIHQ9e307Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspdGhpcy4kYmVoYXZpb3Vyc1tlW25dXSYmKHRbZVtuXV09dGhpcy4kYmVoYXZpb3Vyc1tlW25dXSk7cmV0dXJuIHR9fSkuY2FsbChyLnByb3RvdHlwZSksdC5CZWhhdmlvdXI9cn0pLGRlZmluZShcImFjZS91bmljb2RlXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKGUpe3ZhciBuPS9cXHd7NH0vZztmb3IodmFyIHIgaW4gZSl0LnBhY2thZ2VzW3JdPWVbcl0ucmVwbGFjZShuLFwiXFxcXHUkJlwiKX10LnBhY2thZ2VzPXt9LHIoe0w6XCIwMDQxLTAwNUEwMDYxLTAwN0EwMEFBMDBCNTAwQkEwMEMwLTAwRDYwMEQ4LTAwRjYwMEY4LTAyQzEwMkM2LTAyRDEwMkUwLTAyRTQwMkVDMDJFRTAzNzAtMDM3NDAzNzYwMzc3MDM3QS0wMzdEMDM4NjAzODgtMDM4QTAzOEMwMzhFLTAzQTEwM0EzLTAzRjUwM0Y3LTA0ODEwNDhBLTA1MjUwNTMxLTA1NTYwNTU5MDU2MS0wNTg3MDVEMC0wNUVBMDVGMC0wNUYyMDYyMS0wNjRBMDY2RTA2NkYwNjcxLTA2RDMwNkQ1MDZFNTA2RTYwNkVFMDZFRjA2RkEtMDZGQzA2RkYwNzEwMDcxMi0wNzJGMDc0RC0wN0E1MDdCMTA3Q0EtMDdFQTA3RjQwN0Y1MDdGQTA4MDAtMDgxNTA4MUEwODI0MDgyODA5MDQtMDkzOTA5M0QwOTUwMDk1OC0wOTYxMDk3MTA5NzIwOTc5LTA5N0YwOTg1LTA5OEMwOThGMDk5MDA5OTMtMDlBODA5QUEtMDlCMDA5QjIwOUI2LTA5QjkwOUJEMDlDRTA5REMwOUREMDlERi0wOUUxMDlGMDA5RjEwQTA1LTBBMEEwQTBGMEExMDBBMTMtMEEyODBBMkEtMEEzMDBBMzIwQTMzMEEzNTBBMzYwQTM4MEEzOTBBNTktMEE1QzBBNUUwQTcyLTBBNzQwQTg1LTBBOEQwQThGLTBBOTEwQTkzLTBBQTgwQUFBLTBBQjAwQUIyMEFCMzBBQjUtMEFCOTBBQkQwQUQwMEFFMDBBRTEwQjA1LTBCMEMwQjBGMEIxMDBCMTMtMEIyODBCMkEtMEIzMDBCMzIwQjMzMEIzNS0wQjM5MEIzRDBCNUMwQjVEMEI1Ri0wQjYxMEI3MTBCODMwQjg1LTBCOEEwQjhFLTBCOTAwQjkyLTBCOTUwQjk5MEI5QTBCOUMwQjlFMEI5RjBCQTMwQkE0MEJBOC0wQkFBMEJBRS0wQkI5MEJEMDBDMDUtMEMwQzBDMEUtMEMxMDBDMTItMEMyODBDMkEtMEMzMzBDMzUtMEMzOTBDM0QwQzU4MEM1OTBDNjAwQzYxMEM4NS0wQzhDMEM4RS0wQzkwMEM5Mi0wQ0E4MENBQS0wQ0IzMENCNS0wQ0I5MENCRDBDREUwQ0UwMENFMTBEMDUtMEQwQzBEMEUtMEQxMDBEMTItMEQyODBEMkEtMEQzOTBEM0QwRDYwMEQ2MTBEN0EtMEQ3RjBEODUtMEQ5NjBEOUEtMERCMTBEQjMtMERCQjBEQkQwREMwLTBEQzYwRTAxLTBFMzAwRTMyMEUzMzBFNDAtMEU0NjBFODEwRTgyMEU4NDBFODcwRTg4MEU4QTBFOEQwRTk0LTBFOTcwRTk5LTBFOUYwRUExLTBFQTMwRUE1MEVBNzBFQUEwRUFCMEVBRC0wRUIwMEVCMjBFQjMwRUJEMEVDMC0wRUM0MEVDNjBFREMwRUREMEYwMDBGNDAtMEY0NzBGNDktMEY2QzBGODgtMEY4QjEwMDAtMTAyQTEwM0YxMDUwLTEwNTUxMDVBLTEwNUQxMDYxMTA2NTEwNjYxMDZFLTEwNzAxMDc1LTEwODExMDhFMTBBMC0xMEM1MTBEMC0xMEZBMTBGQzExMDAtMTI0ODEyNEEtMTI0RDEyNTAtMTI1NjEyNTgxMjVBLTEyNUQxMjYwLTEyODgxMjhBLTEyOEQxMjkwLTEyQjAxMkIyLTEyQjUxMkI4LTEyQkUxMkMwMTJDMi0xMkM1MTJDOC0xMkQ2MTJEOC0xMzEwMTMxMi0xMzE1MTMxOC0xMzVBMTM4MC0xMzhGMTNBMC0xM0Y0MTQwMS0xNjZDMTY2Ri0xNjdGMTY4MS0xNjlBMTZBMC0xNkVBMTcwMC0xNzBDMTcwRS0xNzExMTcyMC0xNzMxMTc0MC0xNzUxMTc2MC0xNzZDMTc2RS0xNzcwMTc4MC0xN0IzMTdENzE3REMxODIwLTE4NzcxODgwLTE4QTgxOEFBMThCMC0xOEY1MTkwMC0xOTFDMTk1MC0xOTZEMTk3MC0xOTc0MTk4MC0xOUFCMTlDMS0xOUM3MUEwMC0xQTE2MUEyMC0xQTU0MUFBNzFCMDUtMUIzMzFCNDUtMUI0QjFCODMtMUJBMDFCQUUxQkFGMUMwMC0xQzIzMUM0RC0xQzRGMUM1QS0xQzdEMUNFOS0xQ0VDMUNFRS0xQ0YxMUQwMC0xREJGMUUwMC0xRjE1MUYxOC0xRjFEMUYyMC0xRjQ1MUY0OC0xRjREMUY1MC0xRjU3MUY1OTFGNUIxRjVEMUY1Ri0xRjdEMUY4MC0xRkI0MUZCNi0xRkJDMUZCRTFGQzItMUZDNDFGQzYtMUZDQzFGRDAtMUZEMzFGRDYtMUZEQjFGRTAtMUZFQzFGRjItMUZGNDFGRjYtMUZGQzIwNzEyMDdGMjA5MC0yMDk0MjEwMjIxMDcyMTBBLTIxMTMyMTE1MjExOS0yMTFEMjEyNDIxMjYyMTI4MjEyQS0yMTJEMjEyRi0yMTM5MjEzQy0yMTNGMjE0NS0yMTQ5MjE0RTIxODMyMTg0MkMwMC0yQzJFMkMzMC0yQzVFMkM2MC0yQ0U0MkNFQi0yQ0VFMkQwMC0yRDI1MkQzMC0yRDY1MkQ2RjJEODAtMkQ5NjJEQTAtMkRBNjJEQTgtMkRBRTJEQjAtMkRCNjJEQjgtMkRCRTJEQzAtMkRDNjJEQzgtMkRDRTJERDAtMkRENjJERDgtMkRERTJFMkYzMDA1MzAwNjMwMzEtMzAzNTMwM0IzMDNDMzA0MS0zMDk2MzA5RC0zMDlGMzBBMS0zMEZBMzBGQy0zMEZGMzEwNS0zMTJEMzEzMS0zMThFMzFBMC0zMUI3MzFGMC0zMUZGMzQwMC00REI1NEUwMC05RkNCQTAwMC1BNDhDQTREMC1BNEZEQTUwMC1BNjBDQTYxMC1BNjFGQTYyQUE2MkJBNjQwLUE2NUZBNjYyLUE2NkVBNjdGLUE2OTdBNkEwLUE2RTVBNzE3LUE3MUZBNzIyLUE3ODhBNzhCQTc4Q0E3RkItQTgwMUE4MDMtQTgwNUE4MDctQTgwQUE4MEMtQTgyMkE4NDAtQTg3M0E4ODItQThCM0E4RjItQThGN0E4RkJBOTBBLUE5MjVBOTMwLUE5NDZBOTYwLUE5N0NBOTg0LUE5QjJBOUNGQUEwMC1BQTI4QUE0MC1BQTQyQUE0NC1BQTRCQUE2MC1BQTc2QUE3QUFBODAtQUFBRkFBQjFBQUI1QUFCNkFBQjktQUFCREFBQzBBQUMyQUFEQi1BQUREQUJDMC1BQkUyQUMwMC1EN0EzRDdCMC1EN0M2RDdDQi1EN0ZCRjkwMC1GQTJERkEzMC1GQTZERkE3MC1GQUQ5RkIwMC1GQjA2RkIxMy1GQjE3RkIxREZCMUYtRkIyOEZCMkEtRkIzNkZCMzgtRkIzQ0ZCM0VGQjQwRkI0MUZCNDNGQjQ0RkI0Ni1GQkIxRkJEMy1GRDNERkQ1MC1GRDhGRkQ5Mi1GREM3RkRGMC1GREZCRkU3MC1GRTc0RkU3Ni1GRUZDRkYyMS1GRjNBRkY0MS1GRjVBRkY2Ni1GRkJFRkZDMi1GRkM3RkZDQS1GRkNGRkZEMi1GRkQ3RkZEQS1GRkRDXCIsTGw6XCIwMDYxLTAwN0EwMEFBMDBCNTAwQkEwMERGLTAwRjYwMEY4LTAwRkYwMTAxMDEwMzAxMDUwMTA3MDEwOTAxMEIwMTBEMDEwRjAxMTEwMTEzMDExNTAxMTcwMTE5MDExQjAxMUQwMTFGMDEyMTAxMjMwMTI1MDEyNzAxMjkwMTJCMDEyRDAxMkYwMTMxMDEzMzAxMzUwMTM3MDEzODAxM0EwMTNDMDEzRTAxNDAwMTQyMDE0NDAxNDYwMTQ4MDE0OTAxNEIwMTREMDE0RjAxNTEwMTUzMDE1NTAxNTcwMTU5MDE1QjAxNUQwMTVGMDE2MTAxNjMwMTY1MDE2NzAxNjkwMTZCMDE2RDAxNkYwMTcxMDE3MzAxNzUwMTc3MDE3QTAxN0MwMTdFLTAxODAwMTgzMDE4NTAxODgwMThDMDE4RDAxOTIwMTk1MDE5OS0wMTlCMDE5RTAxQTEwMUEzMDFBNTAxQTgwMUFBMDFBQjAxQUQwMUIwMDFCNDAxQjYwMUI5MDFCQTAxQkQtMDFCRjAxQzYwMUM5MDFDQzAxQ0UwMUQwMDFEMjAxRDQwMUQ2MDFEODAxREEwMURDMDFERDAxREYwMUUxMDFFMzAxRTUwMUU3MDFFOTAxRUIwMUVEMDFFRjAxRjAwMUYzMDFGNTAxRjkwMUZCMDFGRDAxRkYwMjAxMDIwMzAyMDUwMjA3MDIwOTAyMEIwMjBEMDIwRjAyMTEwMjEzMDIxNTAyMTcwMjE5MDIxQjAyMUQwMjFGMDIyMTAyMjMwMjI1MDIyNzAyMjkwMjJCMDIyRDAyMkYwMjMxMDIzMy0wMjM5MDIzQzAyM0YwMjQwMDI0MjAyNDcwMjQ5MDI0QjAyNEQwMjRGLTAyOTMwMjk1LTAyQUYwMzcxMDM3MzAzNzcwMzdCLTAzN0QwMzkwMDNBQy0wM0NFMDNEMDAzRDEwM0Q1LTAzRDcwM0Q5MDNEQjAzREQwM0RGMDNFMTAzRTMwM0U1MDNFNzAzRTkwM0VCMDNFRDAzRUYtMDNGMzAzRjUwM0Y4MDNGQjAzRkMwNDMwLTA0NUYwNDYxMDQ2MzA0NjUwNDY3MDQ2OTA0NkIwNDZEMDQ2RjA0NzEwNDczMDQ3NTA0NzcwNDc5MDQ3QjA0N0QwNDdGMDQ4MTA0OEIwNDhEMDQ4RjA0OTEwNDkzMDQ5NTA0OTcwNDk5MDQ5QjA0OUQwNDlGMDRBMTA0QTMwNEE1MDRBNzA0QTkwNEFCMDRBRDA0QUYwNEIxMDRCMzA0QjUwNEI3MDRCOTA0QkIwNEJEMDRCRjA0QzIwNEM0MDRDNjA0QzgwNENBMDRDQzA0Q0UwNENGMDREMTA0RDMwNEQ1MDRENzA0RDkwNERCMDRERDA0REYwNEUxMDRFMzA0RTUwNEU3MDRFOTA0RUIwNEVEMDRFRjA0RjEwNEYzMDRGNTA0RjcwNEY5MDRGQjA0RkQwNEZGMDUwMTA1MDMwNTA1MDUwNzA1MDkwNTBCMDUwRDA1MEYwNTExMDUxMzA1MTUwNTE3MDUxOTA1MUIwNTFEMDUxRjA1MjEwNTIzMDUyNTA1NjEtMDU4NzFEMDAtMUQyQjFENjItMUQ3NzFENzktMUQ5QTFFMDExRTAzMUUwNTFFMDcxRTA5MUUwQjFFMEQxRTBGMUUxMTFFMTMxRTE1MUUxNzFFMTkxRTFCMUUxRDFFMUYxRTIxMUUyMzFFMjUxRTI3MUUyOTFFMkIxRTJEMUUyRjFFMzExRTMzMUUzNTFFMzcxRTM5MUUzQjFFM0QxRTNGMUU0MTFFNDMxRTQ1MUU0NzFFNDkxRTRCMUU0RDFFNEYxRTUxMUU1MzFFNTUxRTU3MUU1OTFFNUIxRTVEMUU1RjFFNjExRTYzMUU2NTFFNjcxRTY5MUU2QjFFNkQxRTZGMUU3MTFFNzMxRTc1MUU3NzFFNzkxRTdCMUU3RDFFN0YxRTgxMUU4MzFFODUxRTg3MUU4OTFFOEIxRThEMUU4RjFFOTExRTkzMUU5NS0xRTlEMUU5RjFFQTExRUEzMUVBNTFFQTcxRUE5MUVBQjFFQUQxRUFGMUVCMTFFQjMxRUI1MUVCNzFFQjkxRUJCMUVCRDFFQkYxRUMxMUVDMzFFQzUxRUM3MUVDOTFFQ0IxRUNEMUVDRjFFRDExRUQzMUVENTFFRDcxRUQ5MUVEQjFFREQxRURGMUVFMTFFRTMxRUU1MUVFNzFFRTkxRUVCMUVFRDFFRUYxRUYxMUVGMzFFRjUxRUY3MUVGOTFFRkIxRUZEMUVGRi0xRjA3MUYxMC0xRjE1MUYyMC0xRjI3MUYzMC0xRjM3MUY0MC0xRjQ1MUY1MC0xRjU3MUY2MC0xRjY3MUY3MC0xRjdEMUY4MC0xRjg3MUY5MC0xRjk3MUZBMC0xRkE3MUZCMC0xRkI0MUZCNjFGQjcxRkJFMUZDMi0xRkM0MUZDNjFGQzcxRkQwLTFGRDMxRkQ2MUZENzFGRTAtMUZFNzFGRjItMUZGNDFGRjYxRkY3MjEwQTIxMEUyMTBGMjExMzIxMkYyMTM0MjEzOTIxM0MyMTNEMjE0Ni0yMTQ5MjE0RTIxODQyQzMwLTJDNUUyQzYxMkM2NTJDNjYyQzY4MkM2QTJDNkMyQzcxMkM3MzJDNzQyQzc2LTJDN0MyQzgxMkM4MzJDODUyQzg3MkM4OTJDOEIyQzhEMkM4RjJDOTEyQzkzMkM5NTJDOTcyQzk5MkM5QjJDOUQyQzlGMkNBMTJDQTMyQ0E1MkNBNzJDQTkyQ0FCMkNBRDJDQUYyQ0IxMkNCMzJDQjUyQ0I3MkNCOTJDQkIyQ0JEMkNCRjJDQzEyQ0MzMkNDNTJDQzcyQ0M5MkNDQjJDQ0QyQ0NGMkNEMTJDRDMyQ0Q1MkNENzJDRDkyQ0RCMkNERDJDREYyQ0UxMkNFMzJDRTQyQ0VDMkNFRTJEMDAtMkQyNUE2NDFBNjQzQTY0NUE2NDdBNjQ5QTY0QkE2NERBNjRGQTY1MUE2NTNBNjU1QTY1N0E2NTlBNjVCQTY1REE2NUZBNjYzQTY2NUE2NjdBNjY5QTY2QkE2NkRBNjgxQTY4M0E2ODVBNjg3QTY4OUE2OEJBNjhEQTY4RkE2OTFBNjkzQTY5NUE2OTdBNzIzQTcyNUE3MjdBNzI5QTcyQkE3MkRBNzJGLUE3MzFBNzMzQTczNUE3MzdBNzM5QTczQkE3M0RBNzNGQTc0MUE3NDNBNzQ1QTc0N0E3NDlBNzRCQTc0REE3NEZBNzUxQTc1M0E3NTVBNzU3QTc1OUE3NUJBNzVEQTc1RkE3NjFBNzYzQTc2NUE3NjdBNzY5QTc2QkE3NkRBNzZGQTc3MS1BNzc4QTc3QUE3N0NBNzdGQTc4MUE3ODNBNzg1QTc4N0E3OENGQjAwLUZCMDZGQjEzLUZCMTdGRjQxLUZGNUFcIixMdTpcIjAwNDEtMDA1QTAwQzAtMDBENjAwRDgtMDBERTAxMDAwMTAyMDEwNDAxMDYwMTA4MDEwQTAxMEMwMTBFMDExMDAxMTIwMTE0MDExNjAxMTgwMTFBMDExQzAxMUUwMTIwMDEyMjAxMjQwMTI2MDEyODAxMkEwMTJDMDEyRTAxMzAwMTMyMDEzNDAxMzYwMTM5MDEzQjAxM0QwMTNGMDE0MTAxNDMwMTQ1MDE0NzAxNEEwMTRDMDE0RTAxNTAwMTUyMDE1NDAxNTYwMTU4MDE1QTAxNUMwMTVFMDE2MDAxNjIwMTY0MDE2NjAxNjgwMTZBMDE2QzAxNkUwMTcwMDE3MjAxNzQwMTc2MDE3ODAxNzkwMTdCMDE3RDAxODEwMTgyMDE4NDAxODYwMTg3MDE4OS0wMThCMDE4RS0wMTkxMDE5MzAxOTQwMTk2LTAxOTgwMTlDMDE5RDAxOUYwMUEwMDFBMjAxQTQwMUE2MDFBNzAxQTkwMUFDMDFBRTAxQUYwMUIxLTAxQjMwMUI1MDFCNzAxQjgwMUJDMDFDNDAxQzcwMUNBMDFDRDAxQ0YwMUQxMDFEMzAxRDUwMUQ3MDFEOTAxREIwMURFMDFFMDAxRTIwMUU0MDFFNjAxRTgwMUVBMDFFQzAxRUUwMUYxMDFGNDAxRjYtMDFGODAxRkEwMUZDMDFGRTAyMDAwMjAyMDIwNDAyMDYwMjA4MDIwQTAyMEMwMjBFMDIxMDAyMTIwMjE0MDIxNjAyMTgwMjFBMDIxQzAyMUUwMjIwMDIyMjAyMjQwMjI2MDIyODAyMkEwMjJDMDIyRTAyMzAwMjMyMDIzQTAyM0IwMjNEMDIzRTAyNDEwMjQzLTAyNDYwMjQ4MDI0QTAyNEMwMjRFMDM3MDAzNzIwMzc2MDM4NjAzODgtMDM4QTAzOEMwMzhFMDM4RjAzOTEtMDNBMTAzQTMtMDNBQjAzQ0YwM0QyLTAzRDQwM0Q4MDNEQTAzREMwM0RFMDNFMDAzRTIwM0U0MDNFNjAzRTgwM0VBMDNFQzAzRUUwM0Y0MDNGNzAzRjkwM0ZBMDNGRC0wNDJGMDQ2MDA0NjIwNDY0MDQ2NjA0NjgwNDZBMDQ2QzA0NkUwNDcwMDQ3MjA0NzQwNDc2MDQ3ODA0N0EwNDdDMDQ3RTA0ODAwNDhBMDQ4QzA0OEUwNDkwMDQ5MjA0OTQwNDk2MDQ5ODA0OUEwNDlDMDQ5RTA0QTAwNEEyMDRBNDA0QTYwNEE4MDRBQTA0QUMwNEFFMDRCMDA0QjIwNEI0MDRCNjA0QjgwNEJBMDRCQzA0QkUwNEMwMDRDMTA0QzMwNEM1MDRDNzA0QzkwNENCMDRDRDA0RDAwNEQyMDRENDA0RDYwNEQ4MDREQTA0REMwNERFMDRFMDA0RTIwNEU0MDRFNjA0RTgwNEVBMDRFQzA0RUUwNEYwMDRGMjA0RjQwNEY2MDRGODA0RkEwNEZDMDRGRTA1MDAwNTAyMDUwNDA1MDYwNTA4MDUwQTA1MEMwNTBFMDUxMDA1MTIwNTE0MDUxNjA1MTgwNTFBMDUxQzA1MUUwNTIwMDUyMjA1MjQwNTMxLTA1NTYxMEEwLTEwQzUxRTAwMUUwMjFFMDQxRTA2MUUwODFFMEExRTBDMUUwRTFFMTAxRTEyMUUxNDFFMTYxRTE4MUUxQTFFMUMxRTFFMUUyMDFFMjIxRTI0MUUyNjFFMjgxRTJBMUUyQzFFMkUxRTMwMUUzMjFFMzQxRTM2MUUzODFFM0ExRTNDMUUzRTFFNDAxRTQyMUU0NDFFNDYxRTQ4MUU0QTFFNEMxRTRFMUU1MDFFNTIxRTU0MUU1NjFFNTgxRTVBMUU1QzFFNUUxRTYwMUU2MjFFNjQxRTY2MUU2ODFFNkExRTZDMUU2RTFFNzAxRTcyMUU3NDFFNzYxRTc4MUU3QTFFN0MxRTdFMUU4MDFFODIxRTg0MUU4NjFFODgxRThBMUU4QzFFOEUxRTkwMUU5MjFFOTQxRTlFMUVBMDFFQTIxRUE0MUVBNjFFQTgxRUFBMUVBQzFFQUUxRUIwMUVCMjFFQjQxRUI2MUVCODFFQkExRUJDMUVCRTFFQzAxRUMyMUVDNDFFQzYxRUM4MUVDQTFFQ0MxRUNFMUVEMDFFRDIxRUQ0MUVENjFFRDgxRURBMUVEQzFFREUxRUUwMUVFMjFFRTQxRUU2MUVFODFFRUExRUVDMUVFRTFFRjAxRUYyMUVGNDFFRjYxRUY4MUVGQTFFRkMxRUZFMUYwOC0xRjBGMUYxOC0xRjFEMUYyOC0xRjJGMUYzOC0xRjNGMUY0OC0xRjREMUY1OTFGNUIxRjVEMUY1RjFGNjgtMUY2RjFGQjgtMUZCQjFGQzgtMUZDQjFGRDgtMUZEQjFGRTgtMUZFQzFGRjgtMUZGQjIxMDIyMTA3MjEwQi0yMTBEMjExMC0yMTEyMjExNTIxMTktMjExRDIxMjQyMTI2MjEyODIxMkEtMjEyRDIxMzAtMjEzMzIxM0UyMTNGMjE0NTIxODMyQzAwLTJDMkUyQzYwMkM2Mi0yQzY0MkM2NzJDNjkyQzZCMkM2RC0yQzcwMkM3MjJDNzUyQzdFLTJDODAyQzgyMkM4NDJDODYyQzg4MkM4QTJDOEMyQzhFMkM5MDJDOTIyQzk0MkM5NjJDOTgyQzlBMkM5QzJDOUUyQ0EwMkNBMjJDQTQyQ0E2MkNBODJDQUEyQ0FDMkNBRTJDQjAyQ0IyMkNCNDJDQjYyQ0I4MkNCQTJDQkMyQ0JFMkNDMDJDQzIyQ0M0MkNDNjJDQzgyQ0NBMkNDQzJDQ0UyQ0QwMkNEMjJDRDQyQ0Q2MkNEODJDREEyQ0RDMkNERTJDRTAyQ0UyMkNFQjJDRURBNjQwQTY0MkE2NDRBNjQ2QTY0OEE2NEFBNjRDQTY0RUE2NTBBNjUyQTY1NEE2NTZBNjU4QTY1QUE2NUNBNjVFQTY2MkE2NjRBNjY2QTY2OEE2NkFBNjZDQTY4MEE2ODJBNjg0QTY4NkE2ODhBNjhBQTY4Q0E2OEVBNjkwQTY5MkE2OTRBNjk2QTcyMkE3MjRBNzI2QTcyOEE3MkFBNzJDQTcyRUE3MzJBNzM0QTczNkE3MzhBNzNBQTczQ0E3M0VBNzQwQTc0MkE3NDRBNzQ2QTc0OEE3NEFBNzRDQTc0RUE3NTBBNzUyQTc1NEE3NTZBNzU4QTc1QUE3NUNBNzVFQTc2MEE3NjJBNzY0QTc2NkE3NjhBNzZBQTc2Q0E3NkVBNzc5QTc3QkE3N0RBNzdFQTc4MEE3ODJBNzg0QTc4NkE3OEJGRjIxLUZGM0FcIixMdDpcIjAxQzUwMUM4MDFDQjAxRjIxRjg4LTFGOEYxRjk4LTFGOUYxRkE4LTFGQUYxRkJDMUZDQzFGRkNcIixMbTpcIjAyQjAtMDJDMTAyQzYtMDJEMTAyRTAtMDJFNDAyRUMwMkVFMDM3NDAzN0EwNTU5MDY0MDA2RTUwNkU2MDdGNDA3RjUwN0ZBMDgxQTA4MjQwODI4MDk3MTBFNDYwRUM2MTBGQzE3RDcxODQzMUFBNzFDNzgtMUM3RDFEMkMtMUQ2MTFENzgxRDlCLTFEQkYyMDcxMjA3RjIwOTAtMjA5NDJDN0QyRDZGMkUyRjMwMDUzMDMxLTMwMzUzMDNCMzA5RDMwOUUzMEZDLTMwRkVBMDE1QTRGOC1BNEZEQTYwQ0E2N0ZBNzE3LUE3MUZBNzcwQTc4OEE5Q0ZBQTcwQUFEREZGNzBGRjlFRkY5RlwiLExvOlwiMDFCQjAxQzAtMDFDMzAyOTQwNUQwLTA1RUEwNUYwLTA1RjIwNjIxLTA2M0YwNjQxLTA2NEEwNjZFMDY2RjA2NzEtMDZEMzA2RDUwNkVFMDZFRjA2RkEtMDZGQzA2RkYwNzEwMDcxMi0wNzJGMDc0RC0wN0E1MDdCMTA3Q0EtMDdFQTA4MDAtMDgxNTA5MDQtMDkzOTA5M0QwOTUwMDk1OC0wOTYxMDk3MjA5NzktMDk3RjA5ODUtMDk4QzA5OEYwOTkwMDk5My0wOUE4MDlBQS0wOUIwMDlCMjA5QjYtMDlCOTA5QkQwOUNFMDlEQzA5REQwOURGLTA5RTEwOUYwMDlGMTBBMDUtMEEwQTBBMEYwQTEwMEExMy0wQTI4MEEyQS0wQTMwMEEzMjBBMzMwQTM1MEEzNjBBMzgwQTM5MEE1OS0wQTVDMEE1RTBBNzItMEE3NDBBODUtMEE4RDBBOEYtMEE5MTBBOTMtMEFBODBBQUEtMEFCMDBBQjIwQUIzMEFCNS0wQUI5MEFCRDBBRDAwQUUwMEFFMTBCMDUtMEIwQzBCMEYwQjEwMEIxMy0wQjI4MEIyQS0wQjMwMEIzMjBCMzMwQjM1LTBCMzkwQjNEMEI1QzBCNUQwQjVGLTBCNjEwQjcxMEI4MzBCODUtMEI4QTBCOEUtMEI5MDBCOTItMEI5NTBCOTkwQjlBMEI5QzBCOUUwQjlGMEJBMzBCQTQwQkE4LTBCQUEwQkFFLTBCQjkwQkQwMEMwNS0wQzBDMEMwRS0wQzEwMEMxMi0wQzI4MEMyQS0wQzMzMEMzNS0wQzM5MEMzRDBDNTgwQzU5MEM2MDBDNjEwQzg1LTBDOEMwQzhFLTBDOTAwQzkyLTBDQTgwQ0FBLTBDQjMwQ0I1LTBDQjkwQ0JEMENERTBDRTAwQ0UxMEQwNS0wRDBDMEQwRS0wRDEwMEQxMi0wRDI4MEQyQS0wRDM5MEQzRDBENjAwRDYxMEQ3QS0wRDdGMEQ4NS0wRDk2MEQ5QS0wREIxMERCMy0wREJCMERCRDBEQzAtMERDNjBFMDEtMEUzMDBFMzIwRTMzMEU0MC0wRTQ1MEU4MTBFODIwRTg0MEU4NzBFODgwRThBMEU4RDBFOTQtMEU5NzBFOTktMEU5RjBFQTEtMEVBMzBFQTUwRUE3MEVBQTBFQUIwRUFELTBFQjAwRUIyMEVCMzBFQkQwRUMwLTBFQzQwRURDMEVERDBGMDAwRjQwLTBGNDcwRjQ5LTBGNkMwRjg4LTBGOEIxMDAwLTEwMkExMDNGMTA1MC0xMDU1MTA1QS0xMDVEMTA2MTEwNjUxMDY2MTA2RS0xMDcwMTA3NS0xMDgxMTA4RTEwRDAtMTBGQTExMDAtMTI0ODEyNEEtMTI0RDEyNTAtMTI1NjEyNTgxMjVBLTEyNUQxMjYwLTEyODgxMjhBLTEyOEQxMjkwLTEyQjAxMkIyLTEyQjUxMkI4LTEyQkUxMkMwMTJDMi0xMkM1MTJDOC0xMkQ2MTJEOC0xMzEwMTMxMi0xMzE1MTMxOC0xMzVBMTM4MC0xMzhGMTNBMC0xM0Y0MTQwMS0xNjZDMTY2Ri0xNjdGMTY4MS0xNjlBMTZBMC0xNkVBMTcwMC0xNzBDMTcwRS0xNzExMTcyMC0xNzMxMTc0MC0xNzUxMTc2MC0xNzZDMTc2RS0xNzcwMTc4MC0xN0IzMTdEQzE4MjAtMTg0MjE4NDQtMTg3NzE4ODAtMThBODE4QUExOEIwLTE4RjUxOTAwLTE5MUMxOTUwLTE5NkQxOTcwLTE5NzQxOTgwLTE5QUIxOUMxLTE5QzcxQTAwLTFBMTYxQTIwLTFBNTQxQjA1LTFCMzMxQjQ1LTFCNEIxQjgzLTFCQTAxQkFFMUJBRjFDMDAtMUMyMzFDNEQtMUM0RjFDNUEtMUM3NzFDRTktMUNFQzFDRUUtMUNGMTIxMzUtMjEzODJEMzAtMkQ2NTJEODAtMkQ5NjJEQTAtMkRBNjJEQTgtMkRBRTJEQjAtMkRCNjJEQjgtMkRCRTJEQzAtMkRDNjJEQzgtMkRDRTJERDAtMkRENjJERDgtMkRERTMwMDYzMDNDMzA0MS0zMDk2MzA5RjMwQTEtMzBGQTMwRkYzMTA1LTMxMkQzMTMxLTMxOEUzMUEwLTMxQjczMUYwLTMxRkYzNDAwLTREQjU0RTAwLTlGQ0JBMDAwLUEwMTRBMDE2LUE0OENBNEQwLUE0RjdBNTAwLUE2MEJBNjEwLUE2MUZBNjJBQTYyQkE2NkVBNkEwLUE2RTVBN0ZCLUE4MDFBODAzLUE4MDVBODA3LUE4MEFBODBDLUE4MjJBODQwLUE4NzNBODgyLUE4QjNBOEYyLUE4RjdBOEZCQTkwQS1BOTI1QTkzMC1BOTQ2QTk2MC1BOTdDQTk4NC1BOUIyQUEwMC1BQTI4QUE0MC1BQTQyQUE0NC1BQTRCQUE2MC1BQTZGQUE3MS1BQTc2QUE3QUFBODAtQUFBRkFBQjFBQUI1QUFCNkFBQjktQUFCREFBQzBBQUMyQUFEQkFBRENBQkMwLUFCRTJBQzAwLUQ3QTNEN0IwLUQ3QzZEN0NCLUQ3RkJGOTAwLUZBMkRGQTMwLUZBNkRGQTcwLUZBRDlGQjFERkIxRi1GQjI4RkIyQS1GQjM2RkIzOC1GQjNDRkIzRUZCNDBGQjQxRkI0M0ZCNDRGQjQ2LUZCQjFGQkQzLUZEM0RGRDUwLUZEOEZGRDkyLUZEQzdGREYwLUZERkJGRTcwLUZFNzRGRTc2LUZFRkNGRjY2LUZGNkZGRjcxLUZGOURGRkEwLUZGQkVGRkMyLUZGQzdGRkNBLUZGQ0ZGRkQyLUZGRDdGRkRBLUZGRENcIixNOlwiMDMwMC0wMzZGMDQ4My0wNDg5MDU5MS0wNUJEMDVCRjA1QzEwNUMyMDVDNDA1QzUwNUM3MDYxMC0wNjFBMDY0Qi0wNjVFMDY3MDA2RDYtMDZEQzA2REUtMDZFNDA2RTcwNkU4MDZFQS0wNkVEMDcxMTA3MzAtMDc0QTA3QTYtMDdCMDA3RUItMDdGMzA4MTYtMDgxOTA4MUItMDgyMzA4MjUtMDgyNzA4MjktMDgyRDA5MDAtMDkwMzA5M0MwOTNFLTA5NEUwOTUxLTA5NTUwOTYyMDk2MzA5ODEtMDk4MzA5QkMwOUJFLTA5QzQwOUM3MDlDODA5Q0ItMDlDRDA5RDcwOUUyMDlFMzBBMDEtMEEwMzBBM0MwQTNFLTBBNDIwQTQ3MEE0ODBBNEItMEE0RDBBNTEwQTcwMEE3MTBBNzUwQTgxLTBBODMwQUJDMEFCRS0wQUM1MEFDNy0wQUM5MEFDQi0wQUNEMEFFMjBBRTMwQjAxLTBCMDMwQjNDMEIzRS0wQjQ0MEI0NzBCNDgwQjRCLTBCNEQwQjU2MEI1NzBCNjIwQjYzMEI4MjBCQkUtMEJDMjBCQzYtMEJDODBCQ0EtMEJDRDBCRDcwQzAxLTBDMDMwQzNFLTBDNDQwQzQ2LTBDNDgwQzRBLTBDNEQwQzU1MEM1NjBDNjIwQzYzMEM4MjBDODMwQ0JDMENCRS0wQ0M0MENDNi0wQ0M4MENDQS0wQ0NEMENENTBDRDYwQ0UyMENFMzBEMDIwRDAzMEQzRS0wRDQ0MEQ0Ni0wRDQ4MEQ0QS0wRDREMEQ1NzBENjIwRDYzMEQ4MjBEODMwRENBMERDRi0wREQ0MERENjBERDgtMERERjBERjIwREYzMEUzMTBFMzQtMEUzQTBFNDctMEU0RTBFQjEwRUI0LTBFQjkwRUJCMEVCQzBFQzgtMEVDRDBGMTgwRjE5MEYzNTBGMzcwRjM5MEYzRTBGM0YwRjcxLTBGODQwRjg2MEY4NzBGOTAtMEY5NzBGOTktMEZCQzBGQzYxMDJCLTEwM0UxMDU2LTEwNTkxMDVFLTEwNjAxMDYyLTEwNjQxMDY3LTEwNkQxMDcxLTEwNzQxMDgyLTEwOEQxMDhGMTA5QS0xMDlEMTM1RjE3MTItMTcxNDE3MzItMTczNDE3NTIxNzUzMTc3MjE3NzMxN0I2LTE3RDMxN0REMTgwQi0xODBEMThBOTE5MjAtMTkyQjE5MzAtMTkzQjE5QjAtMTlDMDE5QzgxOUM5MUExNy0xQTFCMUE1NS0xQTVFMUE2MC0xQTdDMUE3RjFCMDAtMUIwNDFCMzQtMUI0NDFCNkItMUI3MzFCODAtMUI4MjFCQTEtMUJBQTFDMjQtMUMzNzFDRDAtMUNEMjFDRDQtMUNFODFDRUQxQ0YyMURDMC0xREU2MURGRC0xREZGMjBEMC0yMEYwMkNFRi0yQ0YxMkRFMC0yREZGMzAyQS0zMDJGMzA5OTMwOUFBNjZGLUE2NzJBNjdDQTY3REE2RjBBNkYxQTgwMkE4MDZBODBCQTgyMy1BODI3QTg4MEE4ODFBOEI0LUE4QzRBOEUwLUE4RjFBOTI2LUE5MkRBOTQ3LUE5NTNBOTgwLUE5ODNBOUIzLUE5QzBBQTI5LUFBMzZBQTQzQUE0Q0FBNERBQTdCQUFCMEFBQjItQUFCNEFBQjdBQUI4QUFCRUFBQkZBQUMxQUJFMy1BQkVBQUJFQ0FCRURGQjFFRkUwMC1GRTBGRkUyMC1GRTI2XCIsTW46XCIwMzAwLTAzNkYwNDgzLTA0ODcwNTkxLTA1QkQwNUJGMDVDMTA1QzIwNUM0MDVDNTA1QzcwNjEwLTA2MUEwNjRCLTA2NUUwNjcwMDZENi0wNkRDMDZERi0wNkU0MDZFNzA2RTgwNkVBLTA2RUQwNzExMDczMC0wNzRBMDdBNi0wN0IwMDdFQi0wN0YzMDgxNi0wODE5MDgxQi0wODIzMDgyNS0wODI3MDgyOS0wODJEMDkwMC0wOTAyMDkzQzA5NDEtMDk0ODA5NEQwOTUxLTA5NTUwOTYyMDk2MzA5ODEwOUJDMDlDMS0wOUM0MDlDRDA5RTIwOUUzMEEwMTBBMDIwQTNDMEE0MTBBNDIwQTQ3MEE0ODBBNEItMEE0RDBBNTEwQTcwMEE3MTBBNzUwQTgxMEE4MjBBQkMwQUMxLTBBQzUwQUM3MEFDODBBQ0QwQUUyMEFFMzBCMDEwQjNDMEIzRjBCNDEtMEI0NDBCNEQwQjU2MEI2MjBCNjMwQjgyMEJDMDBCQ0QwQzNFLTBDNDAwQzQ2LTBDNDgwQzRBLTBDNEQwQzU1MEM1NjBDNjIwQzYzMENCQzBDQkYwQ0M2MENDQzBDQ0QwQ0UyMENFMzBENDEtMEQ0NDBENEQwRDYyMEQ2MzBEQ0EwREQyLTBERDQwREQ2MEUzMTBFMzQtMEUzQTBFNDctMEU0RTBFQjEwRUI0LTBFQjkwRUJCMEVCQzBFQzgtMEVDRDBGMTgwRjE5MEYzNTBGMzcwRjM5MEY3MS0wRjdFMEY4MC0wRjg0MEY4NjBGODcwRjkwLTBGOTcwRjk5LTBGQkMwRkM2MTAyRC0xMDMwMTAzMi0xMDM3MTAzOTEwM0ExMDNEMTAzRTEwNTgxMDU5MTA1RS0xMDYwMTA3MS0xMDc0MTA4MjEwODUxMDg2MTA4RDEwOUQxMzVGMTcxMi0xNzE0MTczMi0xNzM0MTc1MjE3NTMxNzcyMTc3MzE3QjctMTdCRDE3QzYxN0M5LTE3RDMxN0REMTgwQi0xODBEMThBOTE5MjAtMTkyMjE5MjcxOTI4MTkzMjE5MzktMTkzQjFBMTcxQTE4MUE1NjFBNTgtMUE1RTFBNjAxQTYyMUE2NS0xQTZDMUE3My0xQTdDMUE3RjFCMDAtMUIwMzFCMzQxQjM2LTFCM0ExQjNDMUI0MjFCNkItMUI3MzFCODAxQjgxMUJBMi0xQkE1MUJBODFCQTkxQzJDLTFDMzMxQzM2MUMzNzFDRDAtMUNEMjFDRDQtMUNFMDFDRTItMUNFODFDRUQxREMwLTFERTYxREZELTFERkYyMEQwLTIwREMyMEUxMjBFNS0yMEYwMkNFRi0yQ0YxMkRFMC0yREZGMzAyQS0zMDJGMzA5OTMwOUFBNjZGQTY3Q0E2N0RBNkYwQTZGMUE4MDJBODA2QTgwQkE4MjVBODI2QThDNEE4RTAtQThGMUE5MjYtQTkyREE5NDctQTk1MUE5ODAtQTk4MkE5QjNBOUI2LUE5QjlBOUJDQUEyOS1BQTJFQUEzMUFBMzJBQTM1QUEzNkFBNDNBQTRDQUFCMEFBQjItQUFCNEFBQjdBQUI4QUFCRUFBQkZBQUMxQUJFNUFCRThBQkVERkIxRUZFMDAtRkUwRkZFMjAtRkUyNlwiLE1jOlwiMDkwMzA5M0UtMDk0MDA5NDktMDk0QzA5NEUwOTgyMDk4MzA5QkUtMDlDMDA5QzcwOUM4MDlDQjA5Q0MwOUQ3MEEwMzBBM0UtMEE0MDBBODMwQUJFLTBBQzAwQUM5MEFDQjBBQ0MwQjAyMEIwMzBCM0UwQjQwMEI0NzBCNDgwQjRCMEI0QzBCNTcwQkJFMEJCRjBCQzEwQkMyMEJDNi0wQkM4MEJDQS0wQkNDMEJENzBDMDEtMEMwMzBDNDEtMEM0NDBDODIwQzgzMENCRTBDQzAtMENDNDBDQzcwQ0M4MENDQTBDQ0IwQ0Q1MENENjBEMDIwRDAzMEQzRS0wRDQwMEQ0Ni0wRDQ4MEQ0QS0wRDRDMEQ1NzBEODIwRDgzMERDRi0wREQxMEREOC0wRERGMERGMjBERjMwRjNFMEYzRjBGN0YxMDJCMTAyQzEwMzExMDM4MTAzQjEwM0MxMDU2MTA1NzEwNjItMTA2NDEwNjctMTA2RDEwODMxMDg0MTA4Ny0xMDhDMTA4RjEwOUEtMTA5QzE3QjYxN0JFLTE3QzUxN0M3MTdDODE5MjMtMTkyNjE5MjktMTkyQjE5MzAxOTMxMTkzMy0xOTM4MTlCMC0xOUMwMTlDODE5QzkxQTE5LTFBMUIxQTU1MUE1NzFBNjExQTYzMUE2NDFBNkQtMUE3MjFCMDQxQjM1MUIzQjFCM0QtMUI0MTFCNDMxQjQ0MUI4MjFCQTExQkE2MUJBNzFCQUExQzI0LTFDMkIxQzM0MUMzNTFDRTExQ0YyQTgyM0E4MjRBODI3QTg4MEE4ODFBOEI0LUE4QzNBOTUyQTk1M0E5ODNBOUI0QTlCNUE5QkFBOUJCQTlCRC1BOUMwQUEyRkFBMzBBQTMzQUEzNEFBNERBQTdCQUJFM0FCRTRBQkU2QUJFN0FCRTlBQkVBQUJFQ1wiLE1lOlwiMDQ4ODA0ODkwNkRFMjBERC0yMEUwMjBFMi0yMEU0QTY3MC1BNjcyXCIsTjpcIjAwMzAtMDAzOTAwQjIwMEIzMDBCOTAwQkMtMDBCRTA2NjAtMDY2OTA2RjAtMDZGOTA3QzAtMDdDOTA5NjYtMDk2RjA5RTYtMDlFRjA5RjQtMDlGOTBBNjYtMEE2RjBBRTYtMEFFRjBCNjYtMEI2RjBCRTYtMEJGMjBDNjYtMEM2RjBDNzgtMEM3RTBDRTYtMENFRjBENjYtMEQ3NTBFNTAtMEU1OTBFRDAtMEVEOTBGMjAtMEYzMzEwNDAtMTA0OTEwOTAtMTA5OTEzNjktMTM3QzE2RUUtMTZGMDE3RTAtMTdFOTE3RjAtMTdGOTE4MTAtMTgxOTE5NDYtMTk0RjE5RDAtMTlEQTFBODAtMUE4OTFBOTAtMUE5OTFCNTAtMUI1OTFCQjAtMUJCOTFDNDAtMUM0OTFDNTAtMUM1OTIwNzAyMDc0LTIwNzkyMDgwLTIwODkyMTUwLTIxODIyMTg1LTIxODkyNDYwLTI0OUIyNEVBLTI0RkYyNzc2LTI3OTMyQ0ZEMzAwNzMwMjEtMzAyOTMwMzgtMzAzQTMxOTItMzE5NTMyMjAtMzIyOTMyNTEtMzI1RjMyODAtMzI4OTMyQjEtMzJCRkE2MjAtQTYyOUE2RTYtQTZFRkE4MzAtQTgzNUE4RDAtQThEOUE5MDAtQTkwOUE5RDAtQTlEOUFBNTAtQUE1OUFCRjAtQUJGOUZGMTAtRkYxOVwiLE5kOlwiMDAzMC0wMDM5MDY2MC0wNjY5MDZGMC0wNkY5MDdDMC0wN0M5MDk2Ni0wOTZGMDlFNi0wOUVGMEE2Ni0wQTZGMEFFNi0wQUVGMEI2Ni0wQjZGMEJFNi0wQkVGMEM2Ni0wQzZGMENFNi0wQ0VGMEQ2Ni0wRDZGMEU1MC0wRTU5MEVEMC0wRUQ5MEYyMC0wRjI5MTA0MC0xMDQ5MTA5MC0xMDk5MTdFMC0xN0U5MTgxMC0xODE5MTk0Ni0xOTRGMTlEMC0xOURBMUE4MC0xQTg5MUE5MC0xQTk5MUI1MC0xQjU5MUJCMC0xQkI5MUM0MC0xQzQ5MUM1MC0xQzU5QTYyMC1BNjI5QThEMC1BOEQ5QTkwMC1BOTA5QTlEMC1BOUQ5QUE1MC1BQTU5QUJGMC1BQkY5RkYxMC1GRjE5XCIsTmw6XCIxNkVFLTE2RjAyMTYwLTIxODIyMTg1LTIxODgzMDA3MzAyMS0zMDI5MzAzOC0zMDNBQTZFNi1BNkVGXCIsTm86XCIwMEIyMDBCMzAwQjkwMEJDLTAwQkUwOUY0LTA5RjkwQkYwLTBCRjIwQzc4LTBDN0UwRDcwLTBENzUwRjJBLTBGMzMxMzY5LTEzN0MxN0YwLTE3RjkyMDcwMjA3NC0yMDc5MjA4MC0yMDg5MjE1MC0yMTVGMjE4OTI0NjAtMjQ5QjI0RUEtMjRGRjI3NzYtMjc5MzJDRkQzMTkyLTMxOTUzMjIwLTMyMjkzMjUxLTMyNUYzMjgwLTMyODkzMkIxLTMyQkZBODMwLUE4MzVcIixQOlwiMDAyMS0wMDIzMDAyNS0wMDJBMDAyQy0wMDJGMDAzQTAwM0IwMDNGMDA0MDAwNUItMDA1RDAwNUYwMDdCMDA3RDAwQTEwMEFCMDBCNzAwQkIwMEJGMDM3RTAzODcwNTVBLTA1NUYwNTg5MDU4QTA1QkUwNUMwMDVDMzA1QzYwNUYzMDVGNDA2MDkwNjBBMDYwQzA2MEQwNjFCMDYxRTA2MUYwNjZBLTA2NkQwNkQ0MDcwMC0wNzBEMDdGNy0wN0Y5MDgzMC0wODNFMDk2NDA5NjUwOTcwMERGNDBFNEYwRTVBMEU1QjBGMDQtMEYxMjBGM0EtMEYzRDBGODUwRkQwLTBGRDQxMDRBLTEwNEYxMEZCMTM2MS0xMzY4MTQwMDE2NkQxNjZFMTY5QjE2OUMxNkVCLTE2RUQxNzM1MTczNjE3RDQtMTdENjE3RDgtMTdEQTE4MDAtMTgwQTE5NDQxOTQ1MTlERTE5REYxQTFFMUExRjFBQTAtMUFBNjFBQTgtMUFBRDFCNUEtMUI2MDFDM0ItMUMzRjFDN0UxQzdGMUNEMzIwMTAtMjAyNzIwMzAtMjA0MzIwNDUtMjA1MTIwNTMtMjA1RTIwN0QyMDdFMjA4RDIwOEUyMzI5MjMyQTI3NjgtMjc3NTI3QzUyN0M2MjdFNi0yN0VGMjk4My0yOTk4MjlEOC0yOURCMjlGQzI5RkQyQ0Y5LTJDRkMyQ0ZFMkNGRjJFMDAtMkUyRTJFMzAyRTMxMzAwMS0zMDAzMzAwOC0zMDExMzAxNC0zMDFGMzAzMDMwM0QzMEEwMzBGQkE0RkVBNEZGQTYwRC1BNjBGQTY3M0E2N0VBNkYyLUE2RjdBODc0LUE4NzdBOENFQThDRkE4RjgtQThGQUE5MkVBOTJGQTk1RkE5QzEtQTlDREE5REVBOURGQUE1Qy1BQTVGQUFERUFBREZBQkVCRkQzRUZEM0ZGRTEwLUZFMTlGRTMwLUZFNTJGRTU0LUZFNjFGRTYzRkU2OEZFNkFGRTZCRkYwMS1GRjAzRkYwNS1GRjBBRkYwQy1GRjBGRkYxQUZGMUJGRjFGRkYyMEZGM0ItRkYzREZGM0ZGRjVCRkY1REZGNUYtRkY2NVwiLFBkOlwiMDAyRDA1OEEwNUJFMTQwMDE4MDYyMDEwLTIwMTUyRTE3MkUxQTMwMUMzMDMwMzBBMEZFMzFGRTMyRkU1OEZFNjNGRjBEXCIsUHM6XCIwMDI4MDA1QjAwN0IwRjNBMEYzQzE2OUIyMDFBMjAxRTIwNDUyMDdEMjA4RDIzMjkyNzY4Mjc2QTI3NkMyNzZFMjc3MDI3NzIyNzc0MjdDNTI3RTYyN0U4MjdFQTI3RUMyN0VFMjk4MzI5ODUyOTg3Mjk4OTI5OEIyOThEMjk4RjI5OTEyOTkzMjk5NTI5OTcyOUQ4MjlEQTI5RkMyRTIyMkUyNDJFMjYyRTI4MzAwODMwMEEzMDBDMzAwRTMwMTAzMDE0MzAxNjMwMTgzMDFBMzAxREZEM0VGRTE3RkUzNUZFMzdGRTM5RkUzQkZFM0RGRTNGRkU0MUZFNDNGRTQ3RkU1OUZFNUJGRTVERkYwOEZGM0JGRjVCRkY1RkZGNjJcIixQZTpcIjAwMjkwMDVEMDA3RDBGM0IwRjNEMTY5QzIwNDYyMDdFMjA4RTIzMkEyNzY5Mjc2QjI3NkQyNzZGMjc3MTI3NzMyNzc1MjdDNjI3RTcyN0U5MjdFQjI3RUQyN0VGMjk4NDI5ODYyOTg4Mjk4QTI5OEMyOThFMjk5MDI5OTIyOTk0Mjk5NjI5OTgyOUQ5MjlEQjI5RkQyRTIzMkUyNTJFMjcyRTI5MzAwOTMwMEIzMDBEMzAwRjMwMTEzMDE1MzAxNzMwMTkzMDFCMzAxRTMwMUZGRDNGRkUxOEZFMzZGRTM4RkUzQUZFM0NGRTNFRkU0MEZFNDJGRTQ0RkU0OEZFNUFGRTVDRkU1RUZGMDlGRjNERkY1REZGNjBGRjYzXCIsUGk6XCIwMEFCMjAxODIwMUIyMDFDMjAxRjIwMzkyRTAyMkUwNDJFMDkyRTBDMkUxQzJFMjBcIixQZjpcIjAwQkIyMDE5MjAxRDIwM0EyRTAzMkUwNTJFMEEyRTBEMkUxRDJFMjFcIixQYzpcIjAwNUYyMDNGMjA0MDIwNTRGRTMzRkUzNEZFNEQtRkU0RkZGM0ZcIixQbzpcIjAwMjEtMDAyMzAwMjUtMDAyNzAwMkEwMDJDMDAyRTAwMkYwMDNBMDAzQjAwM0YwMDQwMDA1QzAwQTEwMEI3MDBCRjAzN0UwMzg3MDU1QS0wNTVGMDU4OTA1QzAwNUMzMDVDNjA1RjMwNUY0MDYwOTA2MEEwNjBDMDYwRDA2MUIwNjFFMDYxRjA2NkEtMDY2RDA2RDQwNzAwLTA3MEQwN0Y3LTA3RjkwODMwLTA4M0UwOTY0MDk2NTA5NzAwREY0MEU0RjBFNUEwRTVCMEYwNC0wRjEyMEY4NTBGRDAtMEZENDEwNEEtMTA0RjEwRkIxMzYxLTEzNjgxNjZEMTY2RTE2RUItMTZFRDE3MzUxNzM2MTdENC0xN0Q2MTdEOC0xN0RBMTgwMC0xODA1MTgwNy0xODBBMTk0NDE5NDUxOURFMTlERjFBMUUxQTFGMUFBMC0xQUE2MUFBOC0xQUFEMUI1QS0xQjYwMUMzQi0xQzNGMUM3RTFDN0YxQ0QzMjAxNjIwMTcyMDIwLTIwMjcyMDMwLTIwMzgyMDNCLTIwM0UyMDQxLTIwNDMyMDQ3LTIwNTEyMDUzMjA1NS0yMDVFMkNGOS0yQ0ZDMkNGRTJDRkYyRTAwMkUwMTJFMDYtMkUwODJFMEIyRTBFLTJFMTYyRTE4MkUxOTJFMUIyRTFFMkUxRjJFMkEtMkUyRTJFMzAyRTMxMzAwMS0zMDAzMzAzRDMwRkJBNEZFQTRGRkE2MEQtQTYwRkE2NzNBNjdFQTZGMi1BNkY3QTg3NC1BODc3QThDRUE4Q0ZBOEY4LUE4RkFBOTJFQTkyRkE5NUZBOUMxLUE5Q0RBOURFQTlERkFBNUMtQUE1RkFBREVBQURGQUJFQkZFMTAtRkUxNkZFMTlGRTMwRkU0NUZFNDZGRTQ5LUZFNENGRTUwLUZFNTJGRTU0LUZFNTdGRTVGLUZFNjFGRTY4RkU2QUZFNkJGRjAxLUZGMDNGRjA1LUZGMDdGRjBBRkYwQ0ZGMEVGRjBGRkYxQUZGMUJGRjFGRkYyMEZGM0NGRjYxRkY2NEZGNjVcIixTOlwiMDAyNDAwMkIwMDNDLTAwM0UwMDVFMDA2MDAwN0MwMDdFMDBBMi0wMEE5MDBBQzAwQUUtMDBCMTAwQjQwMEI2MDBCODAwRDcwMEY3MDJDMi0wMkM1MDJEMi0wMkRGMDJFNS0wMkVCMDJFRDAyRUYtMDJGRjAzNzUwMzg0MDM4NTAzRjYwNDgyMDYwNi0wNjA4MDYwQjA2MEUwNjBGMDZFOTA2RkQwNkZFMDdGNjA5RjIwOUYzMDlGQTA5RkIwQUYxMEI3MDBCRjMtMEJGQTBDN0YwQ0YxMENGMjBENzkwRTNGMEYwMS0wRjAzMEYxMy0wRjE3MEYxQS0wRjFGMEYzNDBGMzYwRjM4MEZCRS0wRkM1MEZDNy0wRkNDMEZDRTBGQ0YwRkQ1LTBGRDgxMDlFMTA5RjEzNjAxMzkwLTEzOTkxN0RCMTk0MDE5RTAtMTlGRjFCNjEtMUI2QTFCNzQtMUI3QzFGQkQxRkJGLTFGQzExRkNELTFGQ0YxRkRELTFGREYxRkVELTFGRUYxRkZEMUZGRTIwNDQyMDUyMjA3QS0yMDdDMjA4QS0yMDhDMjBBMC0yMEI4MjEwMDIxMDEyMTAzLTIxMDYyMTA4MjEwOTIxMTQyMTE2LTIxMTgyMTFFLTIxMjMyMTI1MjEyNzIxMjkyMTJFMjEzQTIxM0IyMTQwLTIxNDQyMTRBLTIxNEQyMTRGMjE5MC0yMzI4MjMyQi0yM0U4MjQwMC0yNDI2MjQ0MC0yNDRBMjQ5Qy0yNEU5MjUwMC0yNkNEMjZDRi0yNkUxMjZFMzI2RTgtMjZGRjI3MDEtMjcwNDI3MDYtMjcwOTI3MEMtMjcyNzI3MjktMjc0QjI3NEQyNzRGLTI3NTIyNzU2LTI3NUUyNzYxLTI3NjcyNzk0Mjc5OC0yN0FGMjdCMS0yN0JFMjdDMC0yN0M0MjdDNy0yN0NBMjdDQzI3RDAtMjdFNTI3RjAtMjk4MjI5OTktMjlENzI5REMtMjlGQjI5RkUtMkI0QzJCNTAtMkI1OTJDRTUtMkNFQTJFODAtMkU5OTJFOUItMkVGMzJGMDAtMkZENTJGRjAtMkZGQjMwMDQzMDEyMzAxMzMwMjAzMDM2MzAzNzMwM0UzMDNGMzA5QjMwOUMzMTkwMzE5MTMxOTYtMzE5RjMxQzAtMzFFMzMyMDAtMzIxRTMyMkEtMzI1MDMyNjAtMzI3RjMyOEEtMzJCMDMyQzAtMzJGRTMzMDAtMzNGRjREQzAtNERGRkE0OTAtQTRDNkE3MDAtQTcxNkE3MjBBNzIxQTc4OUE3OEFBODI4LUE4MkJBODM2LUE4MzlBQTc3LUFBNzlGQjI5RkRGQ0ZERkRGRTYyRkU2NC1GRTY2RkU2OUZGMDRGRjBCRkYxQy1GRjFFRkYzRUZGNDBGRjVDRkY1RUZGRTAtRkZFNkZGRTgtRkZFRUZGRkNGRkZEXCIsU206XCIwMDJCMDAzQy0wMDNFMDA3QzAwN0UwMEFDMDBCMTAwRDcwMEY3MDNGNjA2MDYtMDYwODIwNDQyMDUyMjA3QS0yMDdDMjA4QS0yMDhDMjE0MC0yMTQ0MjE0QjIxOTAtMjE5NDIxOUEyMTlCMjFBMDIxQTMyMUE2MjFBRTIxQ0UyMUNGMjFEMjIxRDQyMUY0LTIyRkYyMzA4LTIzMEIyMzIwMjMyMTIzN0MyMzlCLTIzQjMyM0RDLTIzRTEyNUI3MjVDMTI1RjgtMjVGRjI2NkYyN0MwLTI3QzQyN0M3LTI3Q0EyN0NDMjdEMC0yN0U1MjdGMC0yN0ZGMjkwMC0yOTgyMjk5OS0yOUQ3MjlEQy0yOUZCMjlGRS0yQUZGMkIzMC0yQjQ0MkI0Ny0yQjRDRkIyOUZFNjJGRTY0LUZFNjZGRjBCRkYxQy1GRjFFRkY1Q0ZGNUVGRkUyRkZFOS1GRkVDXCIsU2M6XCIwMDI0MDBBMi0wMEE1MDYwQjA5RjIwOUYzMDlGQjBBRjEwQkY5MEUzRjE3REIyMEEwLTIwQjhBODM4RkRGQ0ZFNjlGRjA0RkZFMEZGRTFGRkU1RkZFNlwiLFNrOlwiMDA1RTAwNjAwMEE4MDBBRjAwQjQwMEI4MDJDMi0wMkM1MDJEMi0wMkRGMDJFNS0wMkVCMDJFRDAyRUYtMDJGRjAzNzUwMzg0MDM4NTFGQkQxRkJGLTFGQzExRkNELTFGQ0YxRkRELTFGREYxRkVELTFGRUYxRkZEMUZGRTMwOUIzMDlDQTcwMC1BNzE2QTcyMEE3MjFBNzg5QTc4QUZGM0VGRjQwRkZFM1wiLFNvOlwiMDBBNjAwQTcwMEE5MDBBRTAwQjAwMEI2MDQ4MjA2MEUwNjBGMDZFOTA2RkQwNkZFMDdGNjA5RkEwQjcwMEJGMy0wQkY4MEJGQTBDN0YwQ0YxMENGMjBENzkwRjAxLTBGMDMwRjEzLTBGMTcwRjFBLTBGMUYwRjM0MEYzNjBGMzgwRkJFLTBGQzUwRkM3LTBGQ0MwRkNFMEZDRjBGRDUtMEZEODEwOUUxMDlGMTM2MDEzOTAtMTM5OTE5NDAxOUUwLTE5RkYxQjYxLTFCNkExQjc0LTFCN0MyMTAwMjEwMTIxMDMtMjEwNjIxMDgyMTA5MjExNDIxMTYtMjExODIxMUUtMjEyMzIxMjUyMTI3MjEyOTIxMkUyMTNBMjEzQjIxNEEyMTRDMjE0RDIxNEYyMTk1LTIxOTkyMTlDLTIxOUYyMUExMjFBMjIxQTQyMUE1MjFBNy0yMUFEMjFBRi0yMUNEMjFEMDIxRDEyMUQzMjFENS0yMUYzMjMwMC0yMzA3MjMwQy0yMzFGMjMyMi0yMzI4MjMyQi0yMzdCMjM3RC0yMzlBMjNCNC0yM0RCMjNFMi0yM0U4MjQwMC0yNDI2MjQ0MC0yNDRBMjQ5Qy0yNEU5MjUwMC0yNUI2MjVCOC0yNUMwMjVDMi0yNUY3MjYwMC0yNjZFMjY3MC0yNkNEMjZDRi0yNkUxMjZFMzI2RTgtMjZGRjI3MDEtMjcwNDI3MDYtMjcwOTI3MEMtMjcyNzI3MjktMjc0QjI3NEQyNzRGLTI3NTIyNzU2LTI3NUUyNzYxLTI3NjcyNzk0Mjc5OC0yN0FGMjdCMS0yN0JFMjgwMC0yOEZGMkIwMC0yQjJGMkI0NTJCNDYyQjUwLTJCNTkyQ0U1LTJDRUEyRTgwLTJFOTkyRTlCLTJFRjMyRjAwLTJGRDUyRkYwLTJGRkIzMDA0MzAxMjMwMTMzMDIwMzAzNjMwMzczMDNFMzAzRjMxOTAzMTkxMzE5Ni0zMTlGMzFDMC0zMUUzMzIwMC0zMjFFMzIyQS0zMjUwMzI2MC0zMjdGMzI4QS0zMkIwMzJDMC0zMkZFMzMwMC0zM0ZGNERDMC00REZGQTQ5MC1BNEM2QTgyOC1BODJCQTgzNkE4MzdBODM5QUE3Ny1BQTc5RkRGREZGRTRGRkU4RkZFREZGRUVGRkZDRkZGRFwiLFo6XCIwMDIwMDBBMDE2ODAxODBFMjAwMC0yMDBBMjAyODIwMjkyMDJGMjA1RjMwMDBcIixaczpcIjAwMjAwMEEwMTY4MDE4MEUyMDAwLTIwMEEyMDJGMjA1RjMwMDBcIixabDpcIjIwMjhcIixacDpcIjIwMjlcIixDOlwiMDAwMC0wMDFGMDA3Ri0wMDlGMDBBRDAzNzgwMzc5MDM3Ri0wMzgzMDM4QjAzOEQwM0EyMDUyNi0wNTMwMDU1NzA1NTgwNTYwMDU4ODA1OEItMDU5MDA1QzgtMDVDRjA1RUItMDVFRjA1RjUtMDYwNTA2MUMwNjFEMDYyMDA2NUYwNkREMDcwRTA3MEYwNzRCMDc0QzA3QjItMDdCRjA3RkItMDdGRjA4MkUwODJGMDgzRi0wOEZGMDkzQTA5M0IwOTRGMDk1NjA5NTcwOTczLTA5NzgwOTgwMDk4NDA5OEQwOThFMDk5MTA5OTIwOUE5MDlCMTA5QjMtMDlCNTA5QkEwOUJCMDlDNTA5QzYwOUM5MDlDQTA5Q0YtMDlENjA5RDgtMDlEQjA5REUwOUU0MDlFNTA5RkMtMEEwMDBBMDQwQTBCLTBBMEUwQTExMEExMjBBMjkwQTMxMEEzNDBBMzcwQTNBMEEzQjBBM0QwQTQzLTBBNDYwQTQ5MEE0QTBBNEUtMEE1MDBBNTItMEE1ODBBNUQwQTVGLTBBNjUwQTc2LTBBODAwQTg0MEE4RTBBOTIwQUE5MEFCMTBBQjQwQUJBMEFCQjBBQzYwQUNBMEFDRTBBQ0YwQUQxLTBBREYwQUU0MEFFNTBBRjAwQUYyLTBCMDAwQjA0MEIwRDBCMEUwQjExMEIxMjBCMjkwQjMxMEIzNDBCM0EwQjNCMEI0NTBCNDYwQjQ5MEI0QTBCNEUtMEI1NTBCNTgtMEI1QjBCNUUwQjY0MEI2NTBCNzItMEI4MTBCODQwQjhCLTBCOEQwQjkxMEI5Ni0wQjk4MEI5QjBCOUQwQkEwLTBCQTIwQkE1LTBCQTcwQkFCLTBCQUQwQkJBLTBCQkQwQkMzLTBCQzUwQkM5MEJDRTBCQ0YwQkQxLTBCRDYwQkQ4LTBCRTUwQkZCLTBDMDAwQzA0MEMwRDBDMTEwQzI5MEMzNDBDM0EtMEMzQzBDNDUwQzQ5MEM0RS0wQzU0MEM1NzBDNUEtMEM1RjBDNjQwQzY1MEM3MC0wQzc3MEM4MDBDODEwQzg0MEM4RDBDOTEwQ0E5MENCNDBDQkEwQ0JCMENDNTBDQzkwQ0NFLTBDRDQwQ0Q3LTBDREQwQ0RGMENFNDBDRTUwQ0YwMENGMy0wRDAxMEQwNDBEMEQwRDExMEQyOTBEM0EtMEQzQzBENDUwRDQ5MEQ0RS0wRDU2MEQ1OC0wRDVGMEQ2NDBENjUwRDc2LTBENzgwRDgwMEQ4MTBEODQwRDk3LTBEOTkwREIyMERCQzBEQkUwREJGMERDNy0wREM5MERDQi0wRENFMERENTBERDcwREUwLTBERjEwREY1LTBFMDAwRTNCLTBFM0UwRTVDLTBFODAwRTgzMEU4NTBFODYwRTg5MEU4QjBFOEMwRThFLTBFOTMwRTk4MEVBMDBFQTQwRUE2MEVBODBFQTkwRUFDMEVCQTBFQkUwRUJGMEVDNTBFQzcwRUNFMEVDRjBFREEwRURCMEVERS0wRUZGMEY0ODBGNkQtMEY3MDBGOEMtMEY4RjBGOTgwRkJEMEZDRDBGRDktMEZGRjEwQzYtMTBDRjEwRkQtMTBGRjEyNDkxMjRFMTI0RjEyNTcxMjU5MTI1RTEyNUYxMjg5MTI4RTEyOEYxMkIxMTJCNjEyQjcxMkJGMTJDMTEyQzYxMkM3MTJENzEzMTExMzE2MTMxNzEzNUItMTM1RTEzN0QtMTM3RjEzOUEtMTM5RjEzRjUtMTNGRjE2OUQtMTY5RjE2RjEtMTZGRjE3MEQxNzE1LTE3MUYxNzM3LTE3M0YxNzU0LTE3NUYxNzZEMTc3MTE3NzQtMTc3RjE3QjQxN0I1MTdERTE3REYxN0VBLTE3RUYxN0ZBLTE3RkYxODBGMTgxQS0xODFGMTg3OC0xODdGMThBQi0xOEFGMThGNi0xOEZGMTkxRC0xOTFGMTkyQy0xOTJGMTkzQy0xOTNGMTk0MS0xOTQzMTk2RTE5NkYxOTc1LTE5N0YxOUFDLTE5QUYxOUNBLTE5Q0YxOURCLTE5REQxQTFDMUExRDFBNUYxQTdEMUE3RTFBOEEtMUE4RjFBOUEtMUE5RjFBQUUtMUFGRjFCNEMtMUI0RjFCN0QtMUI3RjFCQUItMUJBRDFCQkEtMUJGRjFDMzgtMUMzQTFDNEEtMUM0QzFDODAtMUNDRjFDRjMtMUNGRjFERTctMURGQzFGMTYxRjE3MUYxRTFGMUYxRjQ2MUY0NzFGNEUxRjRGMUY1ODFGNUExRjVDMUY1RTFGN0UxRjdGMUZCNTFGQzUxRkQ0MUZENTFGREMxRkYwMUZGMTFGRjUxRkZGMjAwQi0yMDBGMjAyQS0yMDJFMjA2MC0yMDZGMjA3MjIwNzMyMDhGMjA5NS0yMDlGMjBCOS0yMENGMjBGMS0yMEZGMjE4QS0yMThGMjNFOS0yM0ZGMjQyNy0yNDNGMjQ0Qi0yNDVGMjZDRTI2RTIyNkU0LTI2RTcyNzAwMjcwNTI3MEEyNzBCMjcyODI3NEMyNzRFMjc1My0yNzU1Mjc1RjI3NjAyNzk1LTI3OTcyN0IwMjdCRjI3Q0IyN0NELTI3Q0YyQjRELTJCNEYyQjVBLTJCRkYyQzJGMkM1RjJDRjItMkNGODJEMjYtMkQyRjJENjYtMkQ2RTJENzAtMkQ3RjJEOTctMkQ5RjJEQTcyREFGMkRCNzJEQkYyREM3MkRDRjJERDcyRERGMkUzMi0yRTdGMkU5QTJFRjQtMkVGRjJGRDYtMkZFRjJGRkMtMkZGRjMwNDAzMDk3MzA5ODMxMDAtMzEwNDMxMkUtMzEzMDMxOEYzMUI4LTMxQkYzMUU0LTMxRUYzMjFGMzJGRjREQjYtNERCRjlGQ0MtOUZGRkE0OEQtQTQ4RkE0QzctQTRDRkE2MkMtQTYzRkE2NjBBNjYxQTY3NC1BNjdCQTY5OC1BNjlGQTZGOC1BNkZGQTc4RC1BN0ZBQTgyQy1BODJGQTgzQS1BODNGQTg3OC1BODdGQThDNS1BOENEQThEQS1BOERGQThGQy1BOEZGQTk1NC1BOTVFQTk3RC1BOTdGQTlDRUE5REEtQTlEREE5RTAtQTlGRkFBMzctQUEzRkFBNEVBQTRGQUE1QUFBNUJBQTdDLUFBN0ZBQUMzLUFBREFBQUUwLUFCQkZBQkVFQUJFRkFCRkEtQUJGRkQ3QTQtRDdBRkQ3QzctRDdDQUQ3RkMtRjhGRkZBMkVGQTJGRkE2RUZBNkZGQURBLUZBRkZGQjA3LUZCMTJGQjE4LUZCMUNGQjM3RkIzREZCM0ZGQjQyRkI0NUZCQjItRkJEMkZENDAtRkQ0RkZEOTBGRDkxRkRDOC1GREVGRkRGRUZERkZGRTFBLUZFMUZGRTI3LUZFMkZGRTUzRkU2N0ZFNkMtRkU2RkZFNzVGRUZELUZGMDBGRkJGLUZGQzFGRkM4RkZDOUZGRDBGRkQxRkZEOEZGRDlGRkRELUZGREZGRkU3RkZFRi1GRkZCRkZGRUZGRkZcIixDYzpcIjAwMDAtMDAxRjAwN0YtMDA5RlwiLENmOlwiMDBBRDA2MDAtMDYwMzA2REQwNzBGMTdCNDE3QjUyMDBCLTIwMEYyMDJBLTIwMkUyMDYwLTIwNjQyMDZBLTIwNkZGRUZGRkZGOS1GRkZCXCIsQ286XCJFMDAwLUY4RkZcIixDczpcIkQ4MDAtREZGRlwiLENuOlwiMDM3ODAzNzkwMzdGLTAzODMwMzhCMDM4RDAzQTIwNTI2LTA1MzAwNTU3MDU1ODA1NjAwNTg4MDU4Qi0wNTkwMDVDOC0wNUNGMDVFQi0wNUVGMDVGNS0wNUZGMDYwNDA2MDUwNjFDMDYxRDA2MjAwNjVGMDcwRTA3NEIwNzRDMDdCMi0wN0JGMDdGQi0wN0ZGMDgyRTA4MkYwODNGLTA4RkYwOTNBMDkzQjA5NEYwOTU2MDk1NzA5NzMtMDk3ODA5ODAwOTg0MDk4RDA5OEUwOTkxMDk5MjA5QTkwOUIxMDlCMy0wOUI1MDlCQTA5QkIwOUM1MDlDNjA5QzkwOUNBMDlDRi0wOUQ2MDlEOC0wOURCMDlERTA5RTQwOUU1MDlGQy0wQTAwMEEwNDBBMEItMEEwRTBBMTEwQTEyMEEyOTBBMzEwQTM0MEEzNzBBM0EwQTNCMEEzRDBBNDMtMEE0NjBBNDkwQTRBMEE0RS0wQTUwMEE1Mi0wQTU4MEE1RDBBNUYtMEE2NTBBNzYtMEE4MDBBODQwQThFMEE5MjBBQTkwQUIxMEFCNDBBQkEwQUJCMEFDNjBBQ0EwQUNFMEFDRjBBRDEtMEFERjBBRTQwQUU1MEFGMDBBRjItMEIwMDBCMDQwQjBEMEIwRTBCMTEwQjEyMEIyOTBCMzEwQjM0MEIzQTBCM0IwQjQ1MEI0NjBCNDkwQjRBMEI0RS0wQjU1MEI1OC0wQjVCMEI1RTBCNjQwQjY1MEI3Mi0wQjgxMEI4NDBCOEItMEI4RDBCOTEwQjk2LTBCOTgwQjlCMEI5RDBCQTAtMEJBMjBCQTUtMEJBNzBCQUItMEJBRDBCQkEtMEJCRDBCQzMtMEJDNTBCQzkwQkNFMEJDRjBCRDEtMEJENjBCRDgtMEJFNTBCRkItMEMwMDBDMDQwQzBEMEMxMTBDMjkwQzM0MEMzQS0wQzNDMEM0NTBDNDkwQzRFLTBDNTQwQzU3MEM1QS0wQzVGMEM2NDBDNjUwQzcwLTBDNzcwQzgwMEM4MTBDODQwQzhEMEM5MTBDQTkwQ0I0MENCQTBDQkIwQ0M1MENDOTBDQ0UtMENENDBDRDctMENERDBDREYwQ0U0MENFNTBDRjAwQ0YzLTBEMDEwRDA0MEQwRDBEMTEwRDI5MEQzQS0wRDNDMEQ0NTBENDkwRDRFLTBENTYwRDU4LTBENUYwRDY0MEQ2NTBENzYtMEQ3ODBEODAwRDgxMEQ4NDBEOTctMEQ5OTBEQjIwREJDMERCRTBEQkYwREM3LTBEQzkwRENCLTBEQ0UwREQ1MERENzBERTAtMERGMTBERjUtMEUwMDBFM0ItMEUzRTBFNUMtMEU4MDBFODMwRTg1MEU4NjBFODkwRThCMEU4QzBFOEUtMEU5MzBFOTgwRUEwMEVBNDBFQTYwRUE4MEVBOTBFQUMwRUJBMEVCRTBFQkYwRUM1MEVDNzBFQ0UwRUNGMEVEQTBFREIwRURFLTBFRkYwRjQ4MEY2RC0wRjcwMEY4Qy0wRjhGMEY5ODBGQkQwRkNEMEZEOS0wRkZGMTBDNi0xMENGMTBGRC0xMEZGMTI0OTEyNEUxMjRGMTI1NzEyNTkxMjVFMTI1RjEyODkxMjhFMTI4RjEyQjExMkI2MTJCNzEyQkYxMkMxMTJDNjEyQzcxMkQ3MTMxMTEzMTYxMzE3MTM1Qi0xMzVFMTM3RC0xMzdGMTM5QS0xMzlGMTNGNS0xM0ZGMTY5RC0xNjlGMTZGMS0xNkZGMTcwRDE3MTUtMTcxRjE3MzctMTczRjE3NTQtMTc1RjE3NkQxNzcxMTc3NC0xNzdGMTdERTE3REYxN0VBLTE3RUYxN0ZBLTE3RkYxODBGMTgxQS0xODFGMTg3OC0xODdGMThBQi0xOEFGMThGNi0xOEZGMTkxRC0xOTFGMTkyQy0xOTJGMTkzQy0xOTNGMTk0MS0xOTQzMTk2RTE5NkYxOTc1LTE5N0YxOUFDLTE5QUYxOUNBLTE5Q0YxOURCLTE5REQxQTFDMUExRDFBNUYxQTdEMUE3RTFBOEEtMUE4RjFBOUEtMUE5RjFBQUUtMUFGRjFCNEMtMUI0RjFCN0QtMUI3RjFCQUItMUJBRDFCQkEtMUJGRjFDMzgtMUMzQTFDNEEtMUM0QzFDODAtMUNDRjFDRjMtMUNGRjFERTctMURGQzFGMTYxRjE3MUYxRTFGMUYxRjQ2MUY0NzFGNEUxRjRGMUY1ODFGNUExRjVDMUY1RTFGN0UxRjdGMUZCNTFGQzUxRkQ0MUZENTFGREMxRkYwMUZGMTFGRjUxRkZGMjA2NS0yMDY5MjA3MjIwNzMyMDhGMjA5NS0yMDlGMjBCOS0yMENGMjBGMS0yMEZGMjE4QS0yMThGMjNFOS0yM0ZGMjQyNy0yNDNGMjQ0Qi0yNDVGMjZDRTI2RTIyNkU0LTI2RTcyNzAwMjcwNTI3MEEyNzBCMjcyODI3NEMyNzRFMjc1My0yNzU1Mjc1RjI3NjAyNzk1LTI3OTcyN0IwMjdCRjI3Q0IyN0NELTI3Q0YyQjRELTJCNEYyQjVBLTJCRkYyQzJGMkM1RjJDRjItMkNGODJEMjYtMkQyRjJENjYtMkQ2RTJENzAtMkQ3RjJEOTctMkQ5RjJEQTcyREFGMkRCNzJEQkYyREM3MkRDRjJERDcyRERGMkUzMi0yRTdGMkU5QTJFRjQtMkVGRjJGRDYtMkZFRjJGRkMtMkZGRjMwNDAzMDk3MzA5ODMxMDAtMzEwNDMxMkUtMzEzMDMxOEYzMUI4LTMxQkYzMUU0LTMxRUYzMjFGMzJGRjREQjYtNERCRjlGQ0MtOUZGRkE0OEQtQTQ4RkE0QzctQTRDRkE2MkMtQTYzRkE2NjBBNjYxQTY3NC1BNjdCQTY5OC1BNjlGQTZGOC1BNkZGQTc4RC1BN0ZBQTgyQy1BODJGQTgzQS1BODNGQTg3OC1BODdGQThDNS1BOENEQThEQS1BOERGQThGQy1BOEZGQTk1NC1BOTVFQTk3RC1BOTdGQTlDRUE5REEtQTlEREE5RTAtQTlGRkFBMzctQUEzRkFBNEVBQTRGQUE1QUFBNUJBQTdDLUFBN0ZBQUMzLUFBREFBQUUwLUFCQkZBQkVFQUJFRkFCRkEtQUJGRkQ3QTQtRDdBRkQ3QzctRDdDQUQ3RkMtRDdGRkZBMkVGQTJGRkE2RUZBNkZGQURBLUZBRkZGQjA3LUZCMTJGQjE4LUZCMUNGQjM3RkIzREZCM0ZGQjQyRkI0NUZCQjItRkJEMkZENDAtRkQ0RkZEOTBGRDkxRkRDOC1GREVGRkRGRUZERkZGRTFBLUZFMUZGRTI3LUZFMkZGRTUzRkU2N0ZFNkMtRkU2RkZFNzVGRUZERkVGRUZGMDBGRkJGLUZGQzFGRkM4RkZDOUZGRDBGRkQxRkZEOEZGRDlGRkRELUZGREZGRkU3RkZFRi1GRkY4RkZGRUZGRkZcIn0pfSksZGVmaW5lKFwiYWNlL3Rva2VuX2l0ZXJhdG9yXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1mdW5jdGlvbihlLHQsbil7dGhpcy4kc2Vzc2lvbj1lLHRoaXMuJHJvdz10LHRoaXMuJHJvd1Rva2Vucz1lLmdldFRva2Vucyh0KTt2YXIgcj1lLmdldFRva2VuQXQodCxuKTt0aGlzLiR0b2tlbkluZGV4PXI/ci5pbmRleDotMX07KGZ1bmN0aW9uKCl7dGhpcy5zdGVwQmFja3dhcmQ9ZnVuY3Rpb24oKXt0aGlzLiR0b2tlbkluZGV4LT0xO3doaWxlKHRoaXMuJHRva2VuSW5kZXg8MCl7dGhpcy4kcm93LT0xO2lmKHRoaXMuJHJvdzwwKXJldHVybiB0aGlzLiRyb3c9MCxudWxsO3RoaXMuJHJvd1Rva2Vucz10aGlzLiRzZXNzaW9uLmdldFRva2Vucyh0aGlzLiRyb3cpLHRoaXMuJHRva2VuSW5kZXg9dGhpcy4kcm93VG9rZW5zLmxlbmd0aC0xfXJldHVybiB0aGlzLiRyb3dUb2tlbnNbdGhpcy4kdG9rZW5JbmRleF19LHRoaXMuc3RlcEZvcndhcmQ9ZnVuY3Rpb24oKXt0aGlzLiR0b2tlbkluZGV4Kz0xO3ZhciBlO3doaWxlKHRoaXMuJHRva2VuSW5kZXg+PXRoaXMuJHJvd1Rva2Vucy5sZW5ndGgpe3RoaXMuJHJvdys9MSxlfHwoZT10aGlzLiRzZXNzaW9uLmdldExlbmd0aCgpKTtpZih0aGlzLiRyb3c+PWUpcmV0dXJuIHRoaXMuJHJvdz1lLTEsbnVsbDt0aGlzLiRyb3dUb2tlbnM9dGhpcy4kc2Vzc2lvbi5nZXRUb2tlbnModGhpcy4kcm93KSx0aGlzLiR0b2tlbkluZGV4PTB9cmV0dXJuIHRoaXMuJHJvd1Rva2Vuc1t0aGlzLiR0b2tlbkluZGV4XX0sdGhpcy5nZXRDdXJyZW50VG9rZW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcm93VG9rZW5zW3RoaXMuJHRva2VuSW5kZXhdfSx0aGlzLmdldEN1cnJlbnRUb2tlblJvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRyb3d9LHRoaXMuZ2V0Q3VycmVudFRva2VuQ29sdW1uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kcm93VG9rZW5zLHQ9dGhpcy4kdG9rZW5JbmRleCxuPWVbdF0uc3RhcnQ7aWYobiE9PXVuZGVmaW5lZClyZXR1cm4gbjtuPTA7d2hpbGUodD4wKXQtPTEsbis9ZVt0XS52YWx1ZS5sZW5ndGg7cmV0dXJuIG59LHRoaXMuZ2V0Q3VycmVudFRva2VuUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm57cm93OnRoaXMuJHJvdyxjb2x1bW46dGhpcy5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKX19fSkuY2FsbChyLnByb3RvdHlwZSksdC5Ub2tlbkl0ZXJhdG9yPXJ9KSxkZWZpbmUoXCJhY2UvbW9kZS90ZXh0XCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvdG9rZW5pemVyXCIsXCJhY2UvbW9kZS90ZXh0X2hpZ2hsaWdodF9ydWxlc1wiLFwiYWNlL21vZGUvYmVoYXZpb3VyXCIsXCJhY2UvdW5pY29kZVwiLFwiYWNlL2xpYi9sYW5nXCIsXCJhY2UvdG9rZW5faXRlcmF0b3JcIixcImFjZS9yYW5nZVwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZShcIi4uL3Rva2VuaXplclwiKS5Ub2tlbml6ZXIsaT1lKFwiLi90ZXh0X2hpZ2hsaWdodF9ydWxlc1wiKS5UZXh0SGlnaGxpZ2h0UnVsZXMscz1lKFwiLi9iZWhhdmlvdXJcIikuQmVoYXZpb3VyLG89ZShcIi4uL3VuaWNvZGVcIiksdT1lKFwiLi4vbGliL2xhbmdcIiksYT1lKFwiLi4vdG9rZW5faXRlcmF0b3JcIikuVG9rZW5JdGVyYXRvcixmPWUoXCIuLi9yYW5nZVwiKS5SYW5nZSxsPWZ1bmN0aW9uKCl7dGhpcy5IaWdobGlnaHRSdWxlcz1pLHRoaXMuJGJlaGF2aW91cj1uZXcgc307KGZ1bmN0aW9uKCl7dGhpcy50b2tlblJlPW5ldyBSZWdFeHAoXCJeW1wiK28ucGFja2FnZXMuTCtvLnBhY2thZ2VzLk1uK28ucGFja2FnZXMuTWMrby5wYWNrYWdlcy5OZCtvLnBhY2thZ2VzLlBjK1wiXFxcXCRfXStcIixcImdcIiksdGhpcy5ub25Ub2tlblJlPW5ldyBSZWdFeHAoXCJeKD86W15cIitvLnBhY2thZ2VzLkwrby5wYWNrYWdlcy5NbitvLnBhY2thZ2VzLk1jK28ucGFja2FnZXMuTmQrby5wYWNrYWdlcy5QYytcIlxcXFwkX118XFxcXHNdKStcIixcImdcIiksdGhpcy5nZXRUb2tlbml6ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG9rZW5pemVyfHwodGhpcy4kaGlnaGxpZ2h0UnVsZXM9dGhpcy4kaGlnaGxpZ2h0UnVsZXN8fG5ldyB0aGlzLkhpZ2hsaWdodFJ1bGVzLHRoaXMuJHRva2VuaXplcj1uZXcgcih0aGlzLiRoaWdobGlnaHRSdWxlcy5nZXRSdWxlcygpKSksdGhpcy4kdG9rZW5pemVyfSx0aGlzLmxpbmVDb21tZW50U3RhcnQ9XCJcIix0aGlzLmJsb2NrQ29tbWVudD1cIlwiLHRoaXMudG9nZ2xlQ29tbWVudExpbmVzPWZ1bmN0aW9uKGUsdCxuLHIpe2Z1bmN0aW9uIHcoZSl7Zm9yKHZhciB0PW47dDw9cjt0KyspZShpLmdldExpbmUodCksdCl9dmFyIGk9dC5kb2Mscz0hMCxvPSEwLGE9SW5maW5pdHksZj10LmdldFRhYlNpemUoKSxsPSExO2lmKCF0aGlzLmxpbmVDb21tZW50U3RhcnQpe2lmKCF0aGlzLmJsb2NrQ29tbWVudClyZXR1cm4hMTt2YXIgYz10aGlzLmJsb2NrQ29tbWVudC5zdGFydCxoPXRoaXMuYmxvY2tDb21tZW50LmVuZCxwPW5ldyBSZWdFeHAoXCJeKFxcXFxzKikoPzpcIit1LmVzY2FwZVJlZ0V4cChjKStcIilcIiksZD1uZXcgUmVnRXhwKFwiKD86XCIrdS5lc2NhcGVSZWdFeHAoaCkrXCIpXFxcXHMqJFwiKSx2PWZ1bmN0aW9uKGUsdCl7aWYoZyhlLHQpKXJldHVybjtpZighc3x8L1xcUy8udGVzdChlKSlpLmluc2VydEluTGluZSh7cm93OnQsY29sdW1uOmUubGVuZ3RofSxoKSxpLmluc2VydEluTGluZSh7cm93OnQsY29sdW1uOmF9LGMpfSxtPWZ1bmN0aW9uKGUsdCl7dmFyIG47KG49ZS5tYXRjaChkKSkmJmkucmVtb3ZlSW5MaW5lKHQsZS5sZW5ndGgtblswXS5sZW5ndGgsZS5sZW5ndGgpLChuPWUubWF0Y2gocCkpJiZpLnJlbW92ZUluTGluZSh0LG5bMV0ubGVuZ3RoLG5bMF0ubGVuZ3RoKX0sZz1mdW5jdGlvbihlLG4pe2lmKHAudGVzdChlKSlyZXR1cm4hMDt2YXIgcj10LmdldFRva2VucyhuKTtmb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krKylpZihyW2ldLnR5cGU9PT1cImNvbW1lbnRcIilyZXR1cm4hMH19ZWxzZXtpZihBcnJheS5pc0FycmF5KHRoaXMubGluZUNvbW1lbnRTdGFydCkpdmFyIHA9dGhpcy5saW5lQ29tbWVudFN0YXJ0Lm1hcCh1LmVzY2FwZVJlZ0V4cCkuam9pbihcInxcIiksYz10aGlzLmxpbmVDb21tZW50U3RhcnRbMF07ZWxzZSB2YXIgcD11LmVzY2FwZVJlZ0V4cCh0aGlzLmxpbmVDb21tZW50U3RhcnQpLGM9dGhpcy5saW5lQ29tbWVudFN0YXJ0O3A9bmV3IFJlZ0V4cChcIl4oXFxcXHMqKSg/OlwiK3ArXCIpID9cIiksbD10LmdldFVzZVNvZnRUYWJzKCk7dmFyIG09ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLm1hdGNoKHApO2lmKCFuKXJldHVybjt2YXIgcj1uWzFdLmxlbmd0aCxzPW5bMF0ubGVuZ3RoOyFiKGUscixzKSYmblswXVtzLTFdPT1cIiBcIiYmcy0tLGkucmVtb3ZlSW5MaW5lKHQscixzKX0seT1jK1wiIFwiLHY9ZnVuY3Rpb24oZSx0KXtpZighc3x8L1xcUy8udGVzdChlKSliKGUsYSxhKT9pLmluc2VydEluTGluZSh7cm93OnQsY29sdW1uOmF9LHkpOmkuaW5zZXJ0SW5MaW5lKHtyb3c6dCxjb2x1bW46YX0sYyl9LGc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcC50ZXN0KGUpfSxiPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0wO3doaWxlKHQtLSYmZS5jaGFyQXQodCk9PVwiIFwiKXIrKztpZihyJWYhPTApcmV0dXJuITE7dmFyIHI9MDt3aGlsZShlLmNoYXJBdChuKyspPT1cIiBcIilyKys7cmV0dXJuIGY+Mj9yJWYhPWYtMTpyJWY9PTB9fXZhciBFPUluZmluaXR5O3coZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnNlYXJjaCgvXFxTLyk7biE9PS0xPyhuPGEmJihhPW4pLG8mJiFnKGUsdCkmJihvPSExKSk6RT5lLmxlbmd0aCYmKEU9ZS5sZW5ndGgpfSksYT09SW5maW5pdHkmJihhPUUscz0hMSxvPSExKSxsJiZhJWYhPTAmJihhPU1hdGguZmxvb3IoYS9mKSpmKSx3KG8/bTp2KX0sdGhpcy50b2dnbGVCbG9ja0NvbW1lbnQ9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9dGhpcy5ibG9ja0NvbW1lbnQ7aWYoIWkpcmV0dXJuOyFpLnN0YXJ0JiZpWzBdJiYoaT1pWzBdKTt2YXIgcz1uZXcgYSh0LHIucm93LHIuY29sdW1uKSxvPXMuZ2V0Q3VycmVudFRva2VuKCksdT10LnNlbGVjdGlvbixsPXQuc2VsZWN0aW9uLnRvT3JpZW50ZWRSYW5nZSgpLGMsaDtpZihvJiYvY29tbWVudC8udGVzdChvLnR5cGUpKXt2YXIgcCxkO3doaWxlKG8mJi9jb21tZW50Ly50ZXN0KG8udHlwZSkpe3ZhciB2PW8udmFsdWUuaW5kZXhPZihpLnN0YXJ0KTtpZih2IT0tMSl7dmFyIG09cy5nZXRDdXJyZW50VG9rZW5Sb3coKSxnPXMuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCkrdjtwPW5ldyBmKG0sZyxtLGcraS5zdGFydC5sZW5ndGgpO2JyZWFrfW89cy5zdGVwQmFja3dhcmQoKX12YXIgcz1uZXcgYSh0LHIucm93LHIuY29sdW1uKSxvPXMuZ2V0Q3VycmVudFRva2VuKCk7d2hpbGUobyYmL2NvbW1lbnQvLnRlc3Qoby50eXBlKSl7dmFyIHY9by52YWx1ZS5pbmRleE9mKGkuZW5kKTtpZih2IT0tMSl7dmFyIG09cy5nZXRDdXJyZW50VG9rZW5Sb3coKSxnPXMuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCkrdjtkPW5ldyBmKG0sZyxtLGcraS5lbmQubGVuZ3RoKTticmVha31vPXMuc3RlcEZvcndhcmQoKX1kJiZ0LnJlbW92ZShkKSxwJiYodC5yZW1vdmUocCksYz1wLnN0YXJ0LnJvdyxoPS1pLnN0YXJ0Lmxlbmd0aCl9ZWxzZSBoPWkuc3RhcnQubGVuZ3RoLGM9bi5zdGFydC5yb3csdC5pbnNlcnQobi5lbmQsaS5lbmQpLHQuaW5zZXJ0KG4uc3RhcnQsaS5zdGFydCk7bC5zdGFydC5yb3c9PWMmJihsLnN0YXJ0LmNvbHVtbis9aCksbC5lbmQucm93PT1jJiYobC5lbmQuY29sdW1uKz1oKSx0LnNlbGVjdGlvbi5mcm9tT3JpZW50ZWRSYW5nZShsKX0sdGhpcy5nZXROZXh0TGluZUluZGVudD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuJGdldEluZGVudCh0KX0sdGhpcy5jaGVja091dGRlbnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiExfSx0aGlzLmF1dG9PdXRkZW50PWZ1bmN0aW9uKGUsdCxuKXt9LHRoaXMuJGdldEluZGVudD1mdW5jdGlvbihlKXtyZXR1cm4gZS5tYXRjaCgvXlxccyovKVswXX0sdGhpcy5jcmVhdGVXb3JrZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGx9LHRoaXMuY3JlYXRlTW9kZURlbGVnYXRlcz1mdW5jdGlvbihlKXt0aGlzLiRlbWJlZHM9W10sdGhpcy4kbW9kZXM9e307Zm9yKHZhciB0IGluIGUpZVt0XSYmKHRoaXMuJGVtYmVkcy5wdXNoKHQpLHRoaXMuJG1vZGVzW3RdPW5ldyBlW3RdKTt2YXIgbj1bXCJ0b2dnbGVCbG9ja0NvbW1lbnRcIixcInRvZ2dsZUNvbW1lbnRMaW5lc1wiLFwiZ2V0TmV4dExpbmVJbmRlbnRcIixcImNoZWNrT3V0ZGVudFwiLFwiYXV0b091dGRlbnRcIixcInRyYW5zZm9ybUFjdGlvblwiLFwiZ2V0Q29tcGxldGlvbnNcIl07Zm9yKHZhciB0PTA7dDxuLmxlbmd0aDt0KyspKGZ1bmN0aW9uKGUpe3ZhciByPW5bdF0saT1lW3JdO2Vbblt0XV09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZGVsZWdhdG9yKHIsYXJndW1lbnRzLGkpfX0pKHRoaXMpfSx0aGlzLiRkZWxlZ2F0b3I9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRbMF07dHlwZW9mIHIhPVwic3RyaW5nXCImJihyPXJbMF0pO2Zvcih2YXIgaT0wO2k8dGhpcy4kZW1iZWRzLmxlbmd0aDtpKyspe2lmKCF0aGlzLiRtb2Rlc1t0aGlzLiRlbWJlZHNbaV1dKWNvbnRpbnVlO3ZhciBzPXIuc3BsaXQodGhpcy4kZW1iZWRzW2ldKTtpZighc1swXSYmc1sxXSl7dFswXT1zWzFdO3ZhciBvPXRoaXMuJG1vZGVzW3RoaXMuJGVtYmVkc1tpXV07cmV0dXJuIG9bZV0uYXBwbHkobyx0KX19dmFyIHU9bi5hcHBseSh0aGlzLHQpO3JldHVybiBuP3U6dW5kZWZpbmVkfSx0aGlzLnRyYW5zZm9ybUFjdGlvbj1mdW5jdGlvbihlLHQsbixyLGkpe2lmKHRoaXMuJGJlaGF2aW91cil7dmFyIHM9dGhpcy4kYmVoYXZpb3VyLmdldEJlaGF2aW91cnMoKTtmb3IodmFyIG8gaW4gcylpZihzW29dW3RdKXt2YXIgdT1zW29dW3RdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih1KXJldHVybiB1fX19LHRoaXMuZ2V0S2V5d29yZHM9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuY29tcGxldGlvbktleXdvcmRzKXt2YXIgdD10aGlzLiR0b2tlbml6ZXIucnVsZXMsbj1bXTtmb3IodmFyIHIgaW4gdCl7dmFyIGk9dFtyXTtmb3IodmFyIHM9MCxvPWkubGVuZ3RoO3M8bztzKyspaWYodHlwZW9mIGlbc10udG9rZW49PVwic3RyaW5nXCIpL2tleXdvcmR8c3VwcG9ydHxzdG9yYWdlLy50ZXN0KGlbc10udG9rZW4pJiZuLnB1c2goaVtzXS5yZWdleCk7ZWxzZSBpZih0eXBlb2YgaVtzXS50b2tlbj09XCJvYmplY3RcIilmb3IodmFyIHU9MCxhPWlbc10udG9rZW4ubGVuZ3RoO3U8YTt1KyspaWYoL2tleXdvcmR8c3VwcG9ydHxzdG9yYWdlLy50ZXN0KGlbc10udG9rZW5bdV0pKXt2YXIgcj1pW3NdLnJlZ2V4Lm1hdGNoKC9cXCguKz9cXCkvZylbdV07bi5wdXNoKHIuc3Vic3RyKDEsci5sZW5ndGgtMikpfX10aGlzLmNvbXBsZXRpb25LZXl3b3Jkcz1ufXJldHVybiBlP24uY29uY2F0KHRoaXMuJGtleXdvcmRMaXN0fHxbXSk6dGhpcy4ka2V5d29yZExpc3R9LHRoaXMuJGNyZWF0ZUtleXdvcmRMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGhpZ2hsaWdodFJ1bGVzfHx0aGlzLmdldFRva2VuaXplcigpLHRoaXMuJGtleXdvcmRMaXN0PXRoaXMuJGhpZ2hsaWdodFJ1bGVzLiRrZXl3b3JkTGlzdHx8W119LHRoaXMuZ2V0Q29tcGxldGlvbnM9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9dGhpcy4ka2V5d29yZExpc3R8fHRoaXMuJGNyZWF0ZUtleXdvcmRMaXN0KCk7cmV0dXJuIGkubWFwKGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOmUsdmFsdWU6ZSxzY29yZTowLG1ldGE6XCJrZXl3b3JkXCJ9fSl9LHRoaXMuJGlkPVwiYWNlL21vZGUvdGV4dFwifSkuY2FsbChsLnByb3RvdHlwZSksdC5Nb2RlPWx9KSxkZWZpbmUoXCJhY2UvYXBwbHlfZGVsdGFcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoZSx0KXt0aHJvdyBjb25zb2xlLmxvZyhcIkludmFsaWQgRGVsdGE6XCIsZSksXCJJbnZhbGlkIERlbHRhOiBcIit0fWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gdC5yb3c+PTAmJnQucm93PGUubGVuZ3RoJiZ0LmNvbHVtbj49MCYmdC5jb2x1bW48PWVbdC5yb3ddLmxlbmd0aH1mdW5jdGlvbiBzKGUsdCl7dC5hY3Rpb24hPVwiaW5zZXJ0XCImJnQuYWN0aW9uIT1cInJlbW92ZVwiJiZyKHQsXCJkZWx0YS5hY3Rpb24gbXVzdCBiZSAnaW5zZXJ0JyBvciAncmVtb3ZlJ1wiKSx0LmxpbmVzIGluc3RhbmNlb2YgQXJyYXl8fHIodCxcImRlbHRhLmxpbmVzIG11c3QgYmUgYW4gQXJyYXlcIiksKCF0LnN0YXJ0fHwhdC5lbmQpJiZyKHQsXCJkZWx0YS5zdGFydC9lbmQgbXVzdCBiZSBhbiBwcmVzZW50XCIpO3ZhciBuPXQuc3RhcnQ7aShlLHQuc3RhcnQpfHxyKHQsXCJkZWx0YS5zdGFydCBtdXN0IGJlIGNvbnRhaW5lZCBpbiBkb2N1bWVudFwiKTt2YXIgcz10LmVuZDt0LmFjdGlvbj09XCJyZW1vdmVcIiYmIWkoZSxzKSYmcih0LFwiZGVsdGEuZW5kIG11c3QgY29udGFpbmVkIGluIGRvY3VtZW50IGZvciAncmVtb3ZlJyBhY3Rpb25zXCIpO3ZhciBvPXMucm93LW4ucm93LHU9cy5jb2x1bW4tKG89PTA/bi5jb2x1bW46MCk7KG8hPXQubGluZXMubGVuZ3RoLTF8fHQubGluZXNbb10ubGVuZ3RoIT11KSYmcih0LFwiZGVsdGEucmFuZ2UgbXVzdCBtYXRjaCBkZWx0YSBsaW5lc1wiKX10LmFwcGx5RGVsdGE9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuc3RhcnQucm93LGk9dC5zdGFydC5jb2x1bW4scz1lW3JdfHxcIlwiO3N3aXRjaCh0LmFjdGlvbil7Y2FzZVwiaW5zZXJ0XCI6dmFyIG89dC5saW5lcztpZihvLmxlbmd0aD09PTEpZVtyXT1zLnN1YnN0cmluZygwLGkpK3QubGluZXNbMF0rcy5zdWJzdHJpbmcoaSk7ZWxzZXt2YXIgdT1bciwxXS5jb25jYXQodC5saW5lcyk7ZS5zcGxpY2UuYXBwbHkoZSx1KSxlW3JdPXMuc3Vic3RyaW5nKDAsaSkrZVtyXSxlW3IrdC5saW5lcy5sZW5ndGgtMV0rPXMuc3Vic3RyaW5nKGkpfWJyZWFrO2Nhc2VcInJlbW92ZVwiOnZhciBhPXQuZW5kLmNvbHVtbixmPXQuZW5kLnJvdztyPT09Zj9lW3JdPXMuc3Vic3RyaW5nKDAsaSkrcy5zdWJzdHJpbmcoYSk6ZS5zcGxpY2UocixmLXIrMSxzLnN1YnN0cmluZygwLGkpK2VbZl0uc3Vic3RyaW5nKGEpKX19fSksZGVmaW5lKFwiYWNlL2FuY2hvclwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9vb3BcIixcImFjZS9saWIvZXZlbnRfZW1pdHRlclwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZShcIi4vbGliL29vcFwiKSxpPWUoXCIuL2xpYi9ldmVudF9lbWl0dGVyXCIpLkV2ZW50RW1pdHRlcixzPXQuQW5jaG9yPWZ1bmN0aW9uKGUsdCxuKXt0aGlzLiRvbkNoYW5nZT10aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyksdGhpcy5hdHRhY2goZSksdHlwZW9mIG49PVwidW5kZWZpbmVkXCI/dGhpcy5zZXRQb3NpdGlvbih0LnJvdyx0LmNvbHVtbik6dGhpcy5zZXRQb3NpdGlvbih0LG4pfTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuKXt2YXIgcj1uP2UuY29sdW1uPD10LmNvbHVtbjplLmNvbHVtbjx0LmNvbHVtbjtyZXR1cm4gZS5yb3c8dC5yb3d8fGUucm93PT10LnJvdyYmcn1mdW5jdGlvbiB0KHQsbixyKXt2YXIgaT10LmFjdGlvbj09XCJpbnNlcnRcIixzPShpPzE6LTEpKih0LmVuZC5yb3ctdC5zdGFydC5yb3cpLG89KGk/MTotMSkqKHQuZW5kLmNvbHVtbi10LnN0YXJ0LmNvbHVtbiksdT10LnN0YXJ0LGE9aT91OnQuZW5kO3JldHVybiBlKG4sdSxyKT97cm93Om4ucm93LGNvbHVtbjpuLmNvbHVtbn06ZShhLG4sIXIpP3tyb3c6bi5yb3crcyxjb2x1bW46bi5jb2x1bW4rKG4ucm93PT1hLnJvdz9vOjApfTp7cm93OnUucm93LGNvbHVtbjp1LmNvbHVtbn19ci5pbXBsZW1lbnQodGhpcyxpKSx0aGlzLmdldFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGNsaXBQb3NpdGlvblRvRG9jdW1lbnQodGhpcy5yb3csdGhpcy5jb2x1bW4pfSx0aGlzLmdldERvY3VtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9jdW1lbnR9LHRoaXMuJGluc2VydFJpZ2h0PSExLHRoaXMub25DaGFuZ2U9ZnVuY3Rpb24oZSl7aWYoZS5zdGFydC5yb3c9PWUuZW5kLnJvdyYmZS5zdGFydC5yb3chPXRoaXMucm93KXJldHVybjtpZihlLnN0YXJ0LnJvdz50aGlzLnJvdylyZXR1cm47dmFyIG49dChlLHtyb3c6dGhpcy5yb3csY29sdW1uOnRoaXMuY29sdW1ufSx0aGlzLiRpbnNlcnRSaWdodCk7dGhpcy5zZXRQb3NpdGlvbihuLnJvdyxuLmNvbHVtbiwhMCl9LHRoaXMuc2V0UG9zaXRpb249ZnVuY3Rpb24oZSx0LG4pe3ZhciByO24/cj17cm93OmUsY29sdW1uOnR9OnI9dGhpcy4kY2xpcFBvc2l0aW9uVG9Eb2N1bWVudChlLHQpO2lmKHRoaXMucm93PT1yLnJvdyYmdGhpcy5jb2x1bW49PXIuY29sdW1uKXJldHVybjt2YXIgaT17cm93OnRoaXMucm93LGNvbHVtbjp0aGlzLmNvbHVtbn07dGhpcy5yb3c9ci5yb3csdGhpcy5jb2x1bW49ci5jb2x1bW4sdGhpcy5fc2lnbmFsKFwiY2hhbmdlXCIse29sZDppLHZhbHVlOnJ9KX0sdGhpcy5kZXRhY2g9ZnVuY3Rpb24oKXt0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIix0aGlzLiRvbkNoYW5nZSl9LHRoaXMuYXR0YWNoPWZ1bmN0aW9uKGUpe3RoaXMuZG9jdW1lbnQ9ZXx8dGhpcy5kb2N1bWVudCx0aGlzLmRvY3VtZW50Lm9uKFwiY2hhbmdlXCIsdGhpcy4kb25DaGFuZ2UpfSx0aGlzLiRjbGlwUG9zaXRpb25Ub0RvY3VtZW50PWZ1bmN0aW9uKGUsdCl7dmFyIG49e307cmV0dXJuIGU+PXRoaXMuZG9jdW1lbnQuZ2V0TGVuZ3RoKCk/KG4ucm93PU1hdGgubWF4KDAsdGhpcy5kb2N1bWVudC5nZXRMZW5ndGgoKS0xKSxuLmNvbHVtbj10aGlzLmRvY3VtZW50LmdldExpbmUobi5yb3cpLmxlbmd0aCk6ZTwwPyhuLnJvdz0wLG4uY29sdW1uPTApOihuLnJvdz1lLG4uY29sdW1uPU1hdGgubWluKHRoaXMuZG9jdW1lbnQuZ2V0TGluZShuLnJvdykubGVuZ3RoLE1hdGgubWF4KDAsdCkpKSx0PDAmJihuLmNvbHVtbj0wKSxufX0pLmNhbGwocy5wcm90b3R5cGUpfSksZGVmaW5lKFwiYWNlL2RvY3VtZW50XCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvbGliL29vcFwiLFwiYWNlL2FwcGx5X2RlbHRhXCIsXCJhY2UvbGliL2V2ZW50X2VtaXR0ZXJcIixcImFjZS9yYW5nZVwiLFwiYWNlL2FuY2hvclwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZShcIi4vbGliL29vcFwiKSxpPWUoXCIuL2FwcGx5X2RlbHRhXCIpLmFwcGx5RGVsdGEscz1lKFwiLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXIsbz1lKFwiLi9yYW5nZVwiKS5SYW5nZSx1PWUoXCIuL2FuY2hvclwiKS5BbmNob3IsYT1mdW5jdGlvbihlKXt0aGlzLiRsaW5lcz1bXCJcIl0sZS5sZW5ndGg9PT0wP3RoaXMuJGxpbmVzPVtcIlwiXTpBcnJheS5pc0FycmF5KGUpP3RoaXMuaW5zZXJ0TWVyZ2VkTGluZXMoe3JvdzowLGNvbHVtbjowfSxlKTp0aGlzLmluc2VydCh7cm93OjAsY29sdW1uOjB9LGUpfTsoZnVuY3Rpb24oKXtyLmltcGxlbWVudCh0aGlzLHMpLHRoaXMuc2V0VmFsdWU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRMZW5ndGgoKS0xO3RoaXMucmVtb3ZlKG5ldyBvKDAsMCx0LHRoaXMuZ2V0TGluZSh0KS5sZW5ndGgpKSx0aGlzLmluc2VydCh7cm93OjAsY29sdW1uOjB9LGUpfSx0aGlzLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QWxsTGluZXMoKS5qb2luKHRoaXMuZ2V0TmV3TGluZUNoYXJhY3RlcigpKX0sdGhpcy5jcmVhdGVBbmNob3I9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHUodGhpcyxlLHQpfSxcImFhYVwiLnNwbGl0KC9hLykubGVuZ3RoPT09MD90aGlzLiRzcGxpdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC9cXHJcXG58XFxyL2csXCJcXG5cIikuc3BsaXQoXCJcXG5cIil9OnRoaXMuJHNwbGl0PWZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KC9cXHJcXG58XFxyfFxcbi8pfSx0aGlzLiRkZXRlY3ROZXdMaW5lPWZ1bmN0aW9uKGUpe3ZhciB0PWUubWF0Y2goL14uKj8oXFxyXFxufFxccnxcXG4pL20pO3RoaXMuJGF1dG9OZXdMaW5lPXQ/dFsxXTpcIlxcblwiLHRoaXMuX3NpZ25hbChcImNoYW5nZU5ld0xpbmVNb2RlXCIpfSx0aGlzLmdldE5ld0xpbmVDaGFyYWN0ZXI9ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy4kbmV3TGluZU1vZGUpe2Nhc2VcIndpbmRvd3NcIjpyZXR1cm5cIlxcclxcblwiO2Nhc2VcInVuaXhcIjpyZXR1cm5cIlxcblwiO2RlZmF1bHQ6cmV0dXJuIHRoaXMuJGF1dG9OZXdMaW5lfHxcIlxcblwifX0sdGhpcy4kYXV0b05ld0xpbmU9XCJcIix0aGlzLiRuZXdMaW5lTW9kZT1cImF1dG9cIix0aGlzLnNldE5ld0xpbmVNb2RlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuJG5ld0xpbmVNb2RlPT09ZSlyZXR1cm47dGhpcy4kbmV3TGluZU1vZGU9ZSx0aGlzLl9zaWduYWwoXCJjaGFuZ2VOZXdMaW5lTW9kZVwiKX0sdGhpcy5nZXROZXdMaW5lTW9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRuZXdMaW5lTW9kZX0sdGhpcy5pc05ld0xpbmU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PVwiXFxyXFxuXCJ8fGU9PVwiXFxyXCJ8fGU9PVwiXFxuXCJ9LHRoaXMuZ2V0TGluZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy4kbGluZXNbZV18fFwiXCJ9LHRoaXMuZ2V0TGluZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy4kbGluZXMuc2xpY2UoZSx0KzEpfSx0aGlzLmdldEFsbExpbmVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGluZXMoMCx0aGlzLmdldExlbmd0aCgpKX0sdGhpcy5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kbGluZXMubGVuZ3RofSx0aGlzLmdldFRleHRSYW5nZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRMaW5lc0ZvclJhbmdlKGUpLmpvaW4odGhpcy5nZXROZXdMaW5lQ2hhcmFjdGVyKCkpfSx0aGlzLmdldExpbmVzRm9yUmFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZS5zdGFydC5yb3c9PT1lLmVuZC5yb3cpdD1bdGhpcy5nZXRMaW5lKGUuc3RhcnQucm93KS5zdWJzdHJpbmcoZS5zdGFydC5jb2x1bW4sZS5lbmQuY29sdW1uKV07ZWxzZXt0PXRoaXMuZ2V0TGluZXMoZS5zdGFydC5yb3csZS5lbmQucm93KSx0WzBdPSh0WzBdfHxcIlwiKS5zdWJzdHJpbmcoZS5zdGFydC5jb2x1bW4pO3ZhciBuPXQubGVuZ3RoLTE7ZS5lbmQucm93LWUuc3RhcnQucm93PT1uJiYodFtuXT10W25dLnN1YnN0cmluZygwLGUuZW5kLmNvbHVtbikpfXJldHVybiB0fSx0aGlzLmluc2VydExpbmVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGNvbnNvbGUud2FybihcIlVzZSBvZiBkb2N1bWVudC5pbnNlcnRMaW5lcyBpcyBkZXByZWNhdGVkLiBVc2UgdGhlIGluc2VydEZ1bGxMaW5lcyBtZXRob2QgaW5zdGVhZC5cIiksdGhpcy5pbnNlcnRGdWxsTGluZXMoZSx0KX0sdGhpcy5yZW1vdmVMaW5lcz1mdW5jdGlvbihlLHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJVc2Ugb2YgZG9jdW1lbnQucmVtb3ZlTGluZXMgaXMgZGVwcmVjYXRlZC4gVXNlIHRoZSByZW1vdmVGdWxsTGluZXMgbWV0aG9kIGluc3RlYWQuXCIpLHRoaXMucmVtb3ZlRnVsbExpbmVzKGUsdCl9LHRoaXMuaW5zZXJ0TmV3TGluZT1mdW5jdGlvbihlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVXNlIG9mIGRvY3VtZW50Lmluc2VydE5ld0xpbmUgaXMgZGVwcmVjYXRlZC4gVXNlIGluc2VydE1lcmdlZExpbmVzKHBvc2l0aW9uLCBbJycsICcnXSkgaW5zdGVhZC5cIiksdGhpcy5pbnNlcnRNZXJnZWRMaW5lcyhlLFtcIlwiLFwiXCJdKX0sdGhpcy5pbnNlcnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5nZXRMZW5ndGgoKTw9MSYmdGhpcy4kZGV0ZWN0TmV3TGluZSh0KSx0aGlzLmluc2VydE1lcmdlZExpbmVzKGUsdGhpcy4kc3BsaXQodCkpfSx0aGlzLmluc2VydEluTGluZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY2xpcHBlZFBvcyhlLnJvdyxlLmNvbHVtbikscj10aGlzLnBvcyhlLnJvdyxlLmNvbHVtbit0Lmxlbmd0aCk7cmV0dXJuIHRoaXMuYXBwbHlEZWx0YSh7c3RhcnQ6bixlbmQ6cixhY3Rpb246XCJpbnNlcnRcIixsaW5lczpbdF19LCEwKSx0aGlzLmNsb25lUG9zKHIpfSx0aGlzLmNsaXBwZWRQb3M9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmdldExlbmd0aCgpO2U9PT11bmRlZmluZWQ/ZT1uOmU8MD9lPTA6ZT49biYmKGU9bi0xLHQ9dW5kZWZpbmVkKTt2YXIgcj10aGlzLmdldExpbmUoZSk7cmV0dXJuIHQ9PXVuZGVmaW5lZCYmKHQ9ci5sZW5ndGgpLHQ9TWF0aC5taW4oTWF0aC5tYXgodCwwKSxyLmxlbmd0aCkse3JvdzplLGNvbHVtbjp0fX0sdGhpcy5jbG9uZVBvcz1mdW5jdGlvbihlKXtyZXR1cm57cm93OmUucm93LGNvbHVtbjplLmNvbHVtbn19LHRoaXMucG9zPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3JvdzplLGNvbHVtbjp0fX0sdGhpcy4kY2xpcFBvc2l0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TGVuZ3RoKCk7cmV0dXJuIGUucm93Pj10PyhlLnJvdz1NYXRoLm1heCgwLHQtMSksZS5jb2x1bW49dGhpcy5nZXRMaW5lKHQtMSkubGVuZ3RoKTooZS5yb3c9TWF0aC5tYXgoMCxlLnJvdyksZS5jb2x1bW49TWF0aC5taW4oTWF0aC5tYXgoZS5jb2x1bW4sMCksdGhpcy5nZXRMaW5lKGUucm93KS5sZW5ndGgpKSxlfSx0aGlzLmluc2VydEZ1bGxMaW5lcz1mdW5jdGlvbihlLHQpe2U9TWF0aC5taW4oTWF0aC5tYXgoZSwwKSx0aGlzLmdldExlbmd0aCgpKTt2YXIgbj0wO2U8dGhpcy5nZXRMZW5ndGgoKT8odD10LmNvbmNhdChbXCJcIl0pLG49MCk6KHQ9W1wiXCJdLmNvbmNhdCh0KSxlLS0sbj10aGlzLiRsaW5lc1tlXS5sZW5ndGgpLHRoaXMuaW5zZXJ0TWVyZ2VkTGluZXMoe3JvdzplLGNvbHVtbjpufSx0KX0sdGhpcy5pbnNlcnRNZXJnZWRMaW5lcz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY2xpcHBlZFBvcyhlLnJvdyxlLmNvbHVtbikscj17cm93Om4ucm93K3QubGVuZ3RoLTEsY29sdW1uOih0Lmxlbmd0aD09MT9uLmNvbHVtbjowKSt0W3QubGVuZ3RoLTFdLmxlbmd0aH07cmV0dXJuIHRoaXMuYXBwbHlEZWx0YSh7c3RhcnQ6bixlbmQ6cixhY3Rpb246XCJpbnNlcnRcIixsaW5lczp0fSksdGhpcy5jbG9uZVBvcyhyKX0sdGhpcy5yZW1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jbGlwcGVkUG9zKGUuc3RhcnQucm93LGUuc3RhcnQuY29sdW1uKSxuPXRoaXMuY2xpcHBlZFBvcyhlLmVuZC5yb3csZS5lbmQuY29sdW1uKTtyZXR1cm4gdGhpcy5hcHBseURlbHRhKHtzdGFydDp0LGVuZDpuLGFjdGlvbjpcInJlbW92ZVwiLGxpbmVzOnRoaXMuZ2V0TGluZXNGb3JSYW5nZSh7c3RhcnQ6dCxlbmQ6bn0pfSksdGhpcy5jbG9uZVBvcyh0KX0sdGhpcy5yZW1vdmVJbkxpbmU9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMuY2xpcHBlZFBvcyhlLHQpLGk9dGhpcy5jbGlwcGVkUG9zKGUsbik7cmV0dXJuIHRoaXMuYXBwbHlEZWx0YSh7c3RhcnQ6cixlbmQ6aSxhY3Rpb246XCJyZW1vdmVcIixsaW5lczp0aGlzLmdldExpbmVzRm9yUmFuZ2Uoe3N0YXJ0OnIsZW5kOml9KX0sITApLHRoaXMuY2xvbmVQb3Mocil9LHRoaXMucmVtb3ZlRnVsbExpbmVzPWZ1bmN0aW9uKGUsdCl7ZT1NYXRoLm1pbihNYXRoLm1heCgwLGUpLHRoaXMuZ2V0TGVuZ3RoKCktMSksdD1NYXRoLm1pbihNYXRoLm1heCgwLHQpLHRoaXMuZ2V0TGVuZ3RoKCktMSk7dmFyIG49dD09dGhpcy5nZXRMZW5ndGgoKS0xJiZlPjAscj10PHRoaXMuZ2V0TGVuZ3RoKCktMSxpPW4/ZS0xOmUscz1uP3RoaXMuZ2V0TGluZShpKS5sZW5ndGg6MCx1PXI/dCsxOnQsYT1yPzA6dGhpcy5nZXRMaW5lKHUpLmxlbmd0aCxmPW5ldyBvKGkscyx1LGEpLGw9dGhpcy4kbGluZXMuc2xpY2UoZSx0KzEpO3JldHVybiB0aGlzLmFwcGx5RGVsdGEoe3N0YXJ0OmYuc3RhcnQsZW5kOmYuZW5kLGFjdGlvbjpcInJlbW92ZVwiLGxpbmVzOnRoaXMuZ2V0TGluZXNGb3JSYW5nZShmKX0pLGx9LHRoaXMucmVtb3ZlTmV3TGluZT1mdW5jdGlvbihlKXtlPHRoaXMuZ2V0TGVuZ3RoKCktMSYmZT49MCYmdGhpcy5hcHBseURlbHRhKHtzdGFydDp0aGlzLnBvcyhlLHRoaXMuZ2V0TGluZShlKS5sZW5ndGgpLGVuZDp0aGlzLnBvcyhlKzEsMCksYWN0aW9uOlwicmVtb3ZlXCIsbGluZXM6W1wiXCIsXCJcIl19KX0sdGhpcy5yZXBsYWNlPWZ1bmN0aW9uKGUsdCl7ZSBpbnN0YW5jZW9mIG98fChlPW8uZnJvbVBvaW50cyhlLnN0YXJ0LGUuZW5kKSk7aWYodC5sZW5ndGg9PT0wJiZlLmlzRW1wdHkoKSlyZXR1cm4gZS5zdGFydDtpZih0PT10aGlzLmdldFRleHRSYW5nZShlKSlyZXR1cm4gZS5lbmQ7dGhpcy5yZW1vdmUoZSk7dmFyIG47cmV0dXJuIHQ/bj10aGlzLmluc2VydChlLnN0YXJ0LHQpOm49ZS5zdGFydCxufSx0aGlzLmFwcGx5RGVsdGFzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKXRoaXMuYXBwbHlEZWx0YShlW3RdKX0sdGhpcy5yZXZlcnREZWx0YXM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLTE7dD49MDt0LS0pdGhpcy5yZXZlcnREZWx0YShlW3RdKX0sdGhpcy5hcHBseURlbHRhPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5hY3Rpb249PVwiaW5zZXJ0XCI7aWYobj9lLmxpbmVzLmxlbmd0aDw9MSYmIWUubGluZXNbMF06IW8uY29tcGFyZVBvaW50cyhlLnN0YXJ0LGUuZW5kKSlyZXR1cm47biYmZS5saW5lcy5sZW5ndGg+MmU0JiZ0aGlzLiRzcGxpdEFuZGFwcGx5TGFyZ2VEZWx0YShlLDJlNCksaSh0aGlzLiRsaW5lcyxlLHQpLHRoaXMuX3NpZ25hbChcImNoYW5nZVwiLGUpfSx0aGlzLiRzcGxpdEFuZGFwcGx5TGFyZ2VEZWx0YT1mdW5jdGlvbihlLHQpe3ZhciBuPWUubGluZXMscj1uLmxlbmd0aCxpPWUuc3RhcnQucm93LHM9ZS5zdGFydC5jb2x1bW4sbz0wLHU9MDtkb3tvPXUsdSs9dC0xO3ZhciBhPW4uc2xpY2Uobyx1KTtpZih1PnIpe2UubGluZXM9YSxlLnN0YXJ0LnJvdz1pK28sZS5zdGFydC5jb2x1bW49czticmVha31hLnB1c2goXCJcIiksdGhpcy5hcHBseURlbHRhKHtzdGFydDp0aGlzLnBvcyhpK28scyksZW5kOnRoaXMucG9zKGkrdSxzPTApLGFjdGlvbjplLmFjdGlvbixsaW5lczphfSwhMCl9d2hpbGUoITApfSx0aGlzLnJldmVydERlbHRhPWZ1bmN0aW9uKGUpe3RoaXMuYXBwbHlEZWx0YSh7c3RhcnQ6dGhpcy5jbG9uZVBvcyhlLnN0YXJ0KSxlbmQ6dGhpcy5jbG9uZVBvcyhlLmVuZCksYWN0aW9uOmUuYWN0aW9uPT1cImluc2VydFwiP1wicmVtb3ZlXCI6XCJpbnNlcnRcIixsaW5lczplLmxpbmVzLnNsaWNlKCl9KX0sdGhpcy5pbmRleFRvUG9zaXRpb249ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLiRsaW5lc3x8dGhpcy5nZXRBbGxMaW5lcygpLHI9dGhpcy5nZXROZXdMaW5lQ2hhcmFjdGVyKCkubGVuZ3RoO2Zvcih2YXIgaT10fHwwLHM9bi5sZW5ndGg7aTxzO2krKyl7ZS09bltpXS5sZW5ndGgrcjtpZihlPDApcmV0dXJue3JvdzppLGNvbHVtbjplK25baV0ubGVuZ3RoK3J9fXJldHVybntyb3c6cy0xLGNvbHVtbjpuW3MtMV0ubGVuZ3RofX0sdGhpcy5wb3NpdGlvblRvSW5kZXg9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLiRsaW5lc3x8dGhpcy5nZXRBbGxMaW5lcygpLHI9dGhpcy5nZXROZXdMaW5lQ2hhcmFjdGVyKCkubGVuZ3RoLGk9MCxzPU1hdGgubWluKGUucm93LG4ubGVuZ3RoKTtmb3IodmFyIG89dHx8MDtvPHM7KytvKWkrPW5bb10ubGVuZ3RoK3I7cmV0dXJuIGkrZS5jb2x1bW59fSkuY2FsbChhLnByb3RvdHlwZSksdC5Eb2N1bWVudD1hfSksZGVmaW5lKFwiYWNlL2JhY2tncm91bmRfdG9rZW5pemVyXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvbGliL29vcFwiLFwiYWNlL2xpYi9ldmVudF9lbWl0dGVyXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi9saWIvb29wXCIpLGk9ZShcIi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyLHM9ZnVuY3Rpb24oZSx0KXt0aGlzLnJ1bm5pbmc9ITEsdGhpcy5saW5lcz1bXSx0aGlzLnN0YXRlcz1bXSx0aGlzLmN1cnJlbnRMaW5lPTAsdGhpcy50b2tlbml6ZXI9ZTt2YXIgbj10aGlzO3RoaXMuJHdvcmtlcj1mdW5jdGlvbigpe2lmKCFuLnJ1bm5pbmcpcmV0dXJuO3ZhciBlPW5ldyBEYXRlLHQ9bi5jdXJyZW50TGluZSxyPS0xLGk9bi5kb2Mscz10O3doaWxlKG4ubGluZXNbdF0pdCsrO3ZhciBvPWkuZ2V0TGVuZ3RoKCksdT0wO24ucnVubmluZz0hMTt3aGlsZSh0PG8pe24uJHRva2VuaXplUm93KHQpLHI9dDtkbyB0Kys7d2hpbGUobi5saW5lc1t0XSk7dSsrO2lmKHUlNT09PTAmJm5ldyBEYXRlLWU+MjApe24ucnVubmluZz1zZXRUaW1lb3V0KG4uJHdvcmtlciwyMCk7YnJlYWt9fW4uY3VycmVudExpbmU9dCxzPD1yJiZuLmZpcmVVcGRhdGVFdmVudChzLHIpfX07KGZ1bmN0aW9uKCl7ci5pbXBsZW1lbnQodGhpcyxpKSx0aGlzLnNldFRva2VuaXplcj1mdW5jdGlvbihlKXt0aGlzLnRva2VuaXplcj1lLHRoaXMubGluZXM9W10sdGhpcy5zdGF0ZXM9W10sdGhpcy5zdGFydCgwKX0sdGhpcy5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt0aGlzLmRvYz1lLHRoaXMubGluZXM9W10sdGhpcy5zdGF0ZXM9W10sdGhpcy5zdG9wKCl9LHRoaXMuZmlyZVVwZGF0ZUV2ZW50PWZ1bmN0aW9uKGUsdCl7dmFyIG49e2ZpcnN0OmUsbGFzdDp0fTt0aGlzLl9zaWduYWwoXCJ1cGRhdGVcIix7ZGF0YTpufSl9LHRoaXMuc3RhcnQ9ZnVuY3Rpb24oZSl7dGhpcy5jdXJyZW50TGluZT1NYXRoLm1pbihlfHwwLHRoaXMuY3VycmVudExpbmUsdGhpcy5kb2MuZ2V0TGVuZ3RoKCkpLHRoaXMubGluZXMuc3BsaWNlKHRoaXMuY3VycmVudExpbmUsdGhpcy5saW5lcy5sZW5ndGgpLHRoaXMuc3RhdGVzLnNwbGljZSh0aGlzLmN1cnJlbnRMaW5lLHRoaXMuc3RhdGVzLmxlbmd0aCksdGhpcy5zdG9wKCksdGhpcy5ydW5uaW5nPXNldFRpbWVvdXQodGhpcy4kd29ya2VyLDcwMCl9LHRoaXMuc2NoZWR1bGVTdGFydD1mdW5jdGlvbigpe3RoaXMucnVubmluZ3x8KHRoaXMucnVubmluZz1zZXRUaW1lb3V0KHRoaXMuJHdvcmtlciw3MDApKX0sdGhpcy4kdXBkYXRlT25DaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdGFydC5yb3csbj1lLmVuZC5yb3ctdDtpZihuPT09MCl0aGlzLmxpbmVzW3RdPW51bGw7ZWxzZSBpZihlLmFjdGlvbj09XCJyZW1vdmVcIil0aGlzLmxpbmVzLnNwbGljZSh0LG4rMSxudWxsKSx0aGlzLnN0YXRlcy5zcGxpY2UodCxuKzEsbnVsbCk7ZWxzZXt2YXIgcj1BcnJheShuKzEpO3IudW5zaGlmdCh0LDEpLHRoaXMubGluZXMuc3BsaWNlLmFwcGx5KHRoaXMubGluZXMsciksdGhpcy5zdGF0ZXMuc3BsaWNlLmFwcGx5KHRoaXMuc3RhdGVzLHIpfXRoaXMuY3VycmVudExpbmU9TWF0aC5taW4odCx0aGlzLmN1cnJlbnRMaW5lLHRoaXMuZG9jLmdldExlbmd0aCgpKSx0aGlzLnN0b3AoKX0sdGhpcy5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5ydW5uaW5nJiZjbGVhclRpbWVvdXQodGhpcy5ydW5uaW5nKSx0aGlzLnJ1bm5pbmc9ITF9LHRoaXMuZ2V0VG9rZW5zPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxpbmVzW2VdfHx0aGlzLiR0b2tlbml6ZVJvdyhlKX0sdGhpcy5nZXRTdGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jdXJyZW50TGluZT09ZSYmdGhpcy4kdG9rZW5pemVSb3coZSksdGhpcy5zdGF0ZXNbZV18fFwic3RhcnRcIn0sdGhpcy4kdG9rZW5pemVSb3c9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kb2MuZ2V0TGluZShlKSxuPXRoaXMuc3RhdGVzW2UtMV0scj10aGlzLnRva2VuaXplci5nZXRMaW5lVG9rZW5zKHQsbixlKTtyZXR1cm4gdGhpcy5zdGF0ZXNbZV0rXCJcIiE9ci5zdGF0ZStcIlwiPyh0aGlzLnN0YXRlc1tlXT1yLnN0YXRlLHRoaXMubGluZXNbZSsxXT1udWxsLHRoaXMuY3VycmVudExpbmU+ZSsxJiYodGhpcy5jdXJyZW50TGluZT1lKzEpKTp0aGlzLmN1cnJlbnRMaW5lPT1lJiYodGhpcy5jdXJyZW50TGluZT1lKzEpLHRoaXMubGluZXNbZV09ci50b2tlbnN9fSkuY2FsbChzLnByb3RvdHlwZSksdC5CYWNrZ3JvdW5kVG9rZW5pemVyPXN9KSxkZWZpbmUoXCJhY2Uvc2VhcmNoX2hpZ2hsaWdodFwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9sYW5nXCIsXCJhY2UvbGliL29vcFwiLFwiYWNlL3JhbmdlXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi9saWIvbGFuZ1wiKSxpPWUoXCIuL2xpYi9vb3BcIikscz1lKFwiLi9yYW5nZVwiKS5SYW5nZSxvPWZ1bmN0aW9uKGUsdCxuKXt0aGlzLnNldFJlZ2V4cChlKSx0aGlzLmNsYXp6PXQsdGhpcy50eXBlPW58fFwidGV4dFwifTsoZnVuY3Rpb24oKXt0aGlzLk1BWF9SQU5HRVM9NTAwLHRoaXMuc2V0UmVnZXhwPWZ1bmN0aW9uKGUpe2lmKHRoaXMucmVnRXhwK1wiXCI9PWUrXCJcIilyZXR1cm47dGhpcy5yZWdFeHA9ZSx0aGlzLmNhY2hlPVtdfSx0aGlzLnVwZGF0ZT1mdW5jdGlvbihlLHQsbixpKXtpZighdGhpcy5yZWdFeHApcmV0dXJuO3ZhciBvPWkuZmlyc3RSb3csdT1pLmxhc3RSb3c7Zm9yKHZhciBhPW87YTw9dTthKyspe3ZhciBmPXRoaXMuY2FjaGVbYV07Zj09bnVsbCYmKGY9ci5nZXRNYXRjaE9mZnNldHMobi5nZXRMaW5lKGEpLHRoaXMucmVnRXhwKSxmLmxlbmd0aD50aGlzLk1BWF9SQU5HRVMmJihmPWYuc2xpY2UoMCx0aGlzLk1BWF9SQU5HRVMpKSxmPWYubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgcyhhLGUub2Zmc2V0LGEsZS5vZmZzZXQrZS5sZW5ndGgpfSksdGhpcy5jYWNoZVthXT1mLmxlbmd0aD9mOlwiXCIpO2Zvcih2YXIgbD1mLmxlbmd0aDtsLS07KXQuZHJhd1NpbmdsZUxpbmVNYXJrZXIoZSxmW2xdLnRvU2NyZWVuUmFuZ2UobiksdGhpcy5jbGF6eixpKX19fSkuY2FsbChvLnByb3RvdHlwZSksdC5TZWFyY2hIaWdobGlnaHQ9b30pLGRlZmluZShcImFjZS9lZGl0X3Nlc3Npb24vZm9sZF9saW5lXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvcmFuZ2VcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoZSx0KXt0aGlzLmZvbGREYXRhPWUsQXJyYXkuaXNBcnJheSh0KT90aGlzLmZvbGRzPXQ6dD10aGlzLmZvbGRzPVt0XTt2YXIgbj10W3QubGVuZ3RoLTFdO3RoaXMucmFuZ2U9bmV3IHIodFswXS5zdGFydC5yb3csdFswXS5zdGFydC5jb2x1bW4sbi5lbmQucm93LG4uZW5kLmNvbHVtbiksdGhpcy5zdGFydD10aGlzLnJhbmdlLnN0YXJ0LHRoaXMuZW5kPXRoaXMucmFuZ2UuZW5kLHRoaXMuZm9sZHMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnNldEZvbGRMaW5lKHRoaXMpfSx0aGlzKX12YXIgcj1lKFwiLi4vcmFuZ2VcIikuUmFuZ2U7KGZ1bmN0aW9uKCl7dGhpcy5zaGlmdFJvdz1mdW5jdGlvbihlKXt0aGlzLnN0YXJ0LnJvdys9ZSx0aGlzLmVuZC5yb3crPWUsdGhpcy5mb2xkcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Quc3RhcnQucm93Kz1lLHQuZW5kLnJvdys9ZX0pfSx0aGlzLmFkZEZvbGQ9ZnVuY3Rpb24oZSl7aWYoZS5zYW1lUm93KXtpZihlLnN0YXJ0LnJvdzx0aGlzLnN0YXJ0Um93fHxlLmVuZFJvdz50aGlzLmVuZFJvdyl0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBhZGQgYSBmb2xkIHRvIHRoaXMgRm9sZExpbmUgYXMgaXQgaGFzIG5vIGNvbm5lY3Rpb25cIik7dGhpcy5mb2xkcy5wdXNoKGUpLHRoaXMuZm9sZHMuc29ydChmdW5jdGlvbihlLHQpe3JldHVybi1lLnJhbmdlLmNvbXBhcmVFbmQodC5zdGFydC5yb3csdC5zdGFydC5jb2x1bW4pfSksdGhpcy5yYW5nZS5jb21wYXJlRW5kKGUuc3RhcnQucm93LGUuc3RhcnQuY29sdW1uKT4wPyh0aGlzLmVuZC5yb3c9ZS5lbmQucm93LHRoaXMuZW5kLmNvbHVtbj1lLmVuZC5jb2x1bW4pOnRoaXMucmFuZ2UuY29tcGFyZVN0YXJ0KGUuZW5kLnJvdyxlLmVuZC5jb2x1bW4pPDAmJih0aGlzLnN0YXJ0LnJvdz1lLnN0YXJ0LnJvdyx0aGlzLnN0YXJ0LmNvbHVtbj1lLnN0YXJ0LmNvbHVtbil9ZWxzZSBpZihlLnN0YXJ0LnJvdz09dGhpcy5lbmQucm93KXRoaXMuZm9sZHMucHVzaChlKSx0aGlzLmVuZC5yb3c9ZS5lbmQucm93LHRoaXMuZW5kLmNvbHVtbj1lLmVuZC5jb2x1bW47ZWxzZXtpZihlLmVuZC5yb3chPXRoaXMuc3RhcnQucm93KXRocm93IG5ldyBFcnJvcihcIlRyeWluZyB0byBhZGQgZm9sZCB0byBGb2xkUm93IHRoYXQgZG9lc24ndCBoYXZlIGEgbWF0Y2hpbmcgcm93XCIpO3RoaXMuZm9sZHMudW5zaGlmdChlKSx0aGlzLnN0YXJ0LnJvdz1lLnN0YXJ0LnJvdyx0aGlzLnN0YXJ0LmNvbHVtbj1lLnN0YXJ0LmNvbHVtbn1lLmZvbGRMaW5lPXRoaXN9LHRoaXMuY29udGFpbnNSb3c9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PXRoaXMuc3RhcnQucm93JiZlPD10aGlzLmVuZC5yb3d9LHRoaXMud2Fsaz1mdW5jdGlvbihlLHQsbil7dmFyIHI9MCxpPXRoaXMuZm9sZHMscyxvLHUsYT0hMDt0PT1udWxsJiYodD10aGlzLmVuZC5yb3csbj10aGlzLmVuZC5jb2x1bW4pO2Zvcih2YXIgZj0wO2Y8aS5sZW5ndGg7ZisrKXtzPWlbZl0sbz1zLnJhbmdlLmNvbXBhcmVTdGFydCh0LG4pO2lmKG89PS0xKXtlKG51bGwsdCxuLHIsYSk7cmV0dXJufXU9ZShudWxsLHMuc3RhcnQucm93LHMuc3RhcnQuY29sdW1uLHIsYSksdT0hdSYmZShzLnBsYWNlaG9sZGVyLHMuc3RhcnQucm93LHMuc3RhcnQuY29sdW1uLHIpO2lmKHV8fG89PT0wKXJldHVybjthPSFzLnNhbWVSb3cscj1zLmVuZC5jb2x1bW59ZShudWxsLHQsbixyLGEpfSx0aGlzLmdldE5leHRGb2xkVG89ZnVuY3Rpb24oZSx0KXt2YXIgbixyO2Zvcih2YXIgaT0wO2k8dGhpcy5mb2xkcy5sZW5ndGg7aSsrKXtuPXRoaXMuZm9sZHNbaV0scj1uLnJhbmdlLmNvbXBhcmVFbmQoZSx0KTtpZihyPT0tMSlyZXR1cm57Zm9sZDpuLGtpbmQ6XCJhZnRlclwifTtpZihyPT09MClyZXR1cm57Zm9sZDpuLGtpbmQ6XCJpbnNpZGVcIn19cmV0dXJuIG51bGx9LHRoaXMuYWRkUmVtb3ZlQ2hhcnM9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMuZ2V0TmV4dEZvbGRUbyhlLHQpLGkscztpZihyKXtpPXIuZm9sZDtpZihyLmtpbmQ9PVwiaW5zaWRlXCImJmkuc3RhcnQuY29sdW1uIT10JiZpLnN0YXJ0LnJvdyE9ZSl3aW5kb3cuY29uc29sZSYmd2luZG93LmNvbnNvbGUubG9nKGUsdCxpKTtlbHNlIGlmKGkuc3RhcnQucm93PT1lKXtzPXRoaXMuZm9sZHM7dmFyIG89cy5pbmRleE9mKGkpO289PT0wJiYodGhpcy5zdGFydC5jb2x1bW4rPW4pO2ZvcihvO288cy5sZW5ndGg7bysrKXtpPXNbb10saS5zdGFydC5jb2x1bW4rPW47aWYoIWkuc2FtZVJvdylyZXR1cm47aS5lbmQuY29sdW1uKz1ufXRoaXMuZW5kLmNvbHVtbis9bn19fSx0aGlzLnNwbGl0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5nZXROZXh0Rm9sZFRvKGUsdCk7aWYoIW58fG4ua2luZD09XCJpbnNpZGVcIilyZXR1cm4gbnVsbDt2YXIgcj1uLmZvbGQscz10aGlzLmZvbGRzLG89dGhpcy5mb2xkRGF0YSx1PXMuaW5kZXhPZihyKSxhPXNbdS0xXTt0aGlzLmVuZC5yb3c9YS5lbmQucm93LHRoaXMuZW5kLmNvbHVtbj1hLmVuZC5jb2x1bW4scz1zLnNwbGljZSh1LHMubGVuZ3RoLXUpO3ZhciBmPW5ldyBpKG8scyk7cmV0dXJuIG8uc3BsaWNlKG8uaW5kZXhPZih0aGlzKSsxLDAsZiksZn0sdGhpcy5tZXJnZT1mdW5jdGlvbihlKXt2YXIgdD1lLmZvbGRzO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXRoaXMuYWRkRm9sZCh0W25dKTt2YXIgcj10aGlzLmZvbGREYXRhO3Iuc3BsaWNlKHIuaW5kZXhPZihlKSwxKX0sdGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBlPVt0aGlzLnJhbmdlLnRvU3RyaW5nKCkrXCI6IFtcIl07cmV0dXJuIHRoaXMuZm9sZHMuZm9yRWFjaChmdW5jdGlvbih0KXtlLnB1c2goXCIgIFwiK3QudG9TdHJpbmcoKSl9KSxlLnB1c2goXCJdXCIpLGUuam9pbihcIlxcblwiKX0sdGhpcy5pZHhUb1Bvc2l0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PTA7Zm9yKHZhciBuPTA7bjx0aGlzLmZvbGRzLmxlbmd0aDtuKyspe3ZhciByPXRoaXMuZm9sZHNbbl07ZS09ci5zdGFydC5jb2x1bW4tdDtpZihlPDApcmV0dXJue3JvdzpyLnN0YXJ0LnJvdyxjb2x1bW46ci5zdGFydC5jb2x1bW4rZX07ZS09ci5wbGFjZWhvbGRlci5sZW5ndGg7aWYoZTwwKXJldHVybiByLnN0YXJ0O3Q9ci5lbmQuY29sdW1ufXJldHVybntyb3c6dGhpcy5lbmQucm93LGNvbHVtbjp0aGlzLmVuZC5jb2x1bW4rZX19fSkuY2FsbChpLnByb3RvdHlwZSksdC5Gb2xkTGluZT1pfSksZGVmaW5lKFwiYWNlL3JhbmdlX2xpc3RcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9yYW5nZVwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZShcIi4vcmFuZ2VcIikuUmFuZ2UsaT1yLmNvbXBhcmVQb2ludHMscz1mdW5jdGlvbigpe3RoaXMucmFuZ2VzPVtdfTsoZnVuY3Rpb24oKXt0aGlzLmNvbXBhcmVQb2ludHM9aSx0aGlzLnBvaW50SW5kZXg9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMucmFuZ2VzO2Zvcih2YXIgcz1ufHwwO3M8ci5sZW5ndGg7cysrKXt2YXIgbz1yW3NdLHU9aShlLG8uZW5kKTtpZih1PjApY29udGludWU7dmFyIGE9aShlLG8uc3RhcnQpO3JldHVybiB1PT09MD90JiZhIT09MD8tcy0yOnM6YT4wfHxhPT09MCYmIXQ/czotcy0xfXJldHVybi1zLTF9LHRoaXMuYWRkPWZ1bmN0aW9uKGUpe3ZhciB0PSFlLmlzRW1wdHkoKSxuPXRoaXMucG9pbnRJbmRleChlLnN0YXJ0LHQpO248MCYmKG49LW4tMSk7dmFyIHI9dGhpcy5wb2ludEluZGV4KGUuZW5kLHQsbik7cmV0dXJuIHI8MD9yPS1yLTE6cisrLHRoaXMucmFuZ2VzLnNwbGljZShuLHItbixlKX0sdGhpcy5hZGRMaXN0PWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgbj1lLmxlbmd0aDtuLS07KXQucHVzaC5jYWxsKHQsdGhpcy5hZGQoZVtuXSkpO3JldHVybiB0fSx0aGlzLnN1YnN0cmFjdFBvaW50PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucG9pbnRJbmRleChlKTtpZih0Pj0wKXJldHVybiB0aGlzLnJhbmdlcy5zcGxpY2UodCwxKX0sdGhpcy5tZXJnZT1mdW5jdGlvbigpe3ZhciBlPVtdLHQ9dGhpcy5yYW5nZXM7dD10LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gaShlLnN0YXJ0LHQuc3RhcnQpfSk7dmFyIG49dFswXSxyO2Zvcih2YXIgcz0xO3M8dC5sZW5ndGg7cysrKXtyPW4sbj10W3NdO3ZhciBvPWkoci5lbmQsbi5zdGFydCk7aWYobzwwKWNvbnRpbnVlO2lmKG89PTAmJiFyLmlzRW1wdHkoKSYmIW4uaXNFbXB0eSgpKWNvbnRpbnVlO2koci5lbmQsbi5lbmQpPDAmJihyLmVuZC5yb3c9bi5lbmQucm93LHIuZW5kLmNvbHVtbj1uLmVuZC5jb2x1bW4pLHQuc3BsaWNlKHMsMSksZS5wdXNoKG4pLG49cixzLS19cmV0dXJuIHRoaXMucmFuZ2VzPXQsZX0sdGhpcy5jb250YWlucz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnBvaW50SW5kZXgoe3JvdzplLGNvbHVtbjp0fSk+PTB9LHRoaXMuY29udGFpbnNQb2ludD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wb2ludEluZGV4KGUpPj0wfSx0aGlzLnJhbmdlQXRQb2ludD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnBvaW50SW5kZXgoZSk7aWYodD49MClyZXR1cm4gdGhpcy5yYW5nZXNbdF19LHRoaXMuY2xpcFJvd3M9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLnJhbmdlcztpZihuWzBdLnN0YXJ0LnJvdz50fHxuW24ubGVuZ3RoLTFdLnN0YXJ0LnJvdzxlKXJldHVybltdO3ZhciByPXRoaXMucG9pbnRJbmRleCh7cm93OmUsY29sdW1uOjB9KTtyPDAmJihyPS1yLTEpO3ZhciBpPXRoaXMucG9pbnRJbmRleCh7cm93OnQsY29sdW1uOjB9LHIpO2k8MCYmKGk9LWktMSk7dmFyIHM9W107Zm9yKHZhciBvPXI7bzxpO28rKylzLnB1c2gobltvXSk7cmV0dXJuIHN9LHRoaXMucmVtb3ZlQWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmFuZ2VzLnNwbGljZSgwLHRoaXMucmFuZ2VzLmxlbmd0aCl9LHRoaXMuYXR0YWNoPWZ1bmN0aW9uKGUpe3RoaXMuc2Vzc2lvbiYmdGhpcy5kZXRhY2goKSx0aGlzLnNlc3Npb249ZSx0aGlzLm9uQ2hhbmdlPXRoaXMuJG9uQ2hhbmdlLmJpbmQodGhpcyksdGhpcy5zZXNzaW9uLm9uKFwiY2hhbmdlXCIsdGhpcy5vbkNoYW5nZSl9LHRoaXMuZGV0YWNoPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc2Vzc2lvbilyZXR1cm47dGhpcy5zZXNzaW9uLnJlbW92ZUxpc3RlbmVyKFwiY2hhbmdlXCIsdGhpcy5vbkNoYW5nZSksdGhpcy5zZXNzaW9uPW51bGx9LHRoaXMuJG9uQ2hhbmdlPWZ1bmN0aW9uKGUpe2lmKGUuYWN0aW9uPT1cImluc2VydFwiKXZhciB0PWUuc3RhcnQsbj1lLmVuZDtlbHNlIHZhciBuPWUuc3RhcnQsdD1lLmVuZDt2YXIgcj10LnJvdyxpPW4ucm93LHM9aS1yLG89LXQuY29sdW1uK24uY29sdW1uLHU9dGhpcy5yYW5nZXM7Zm9yKHZhciBhPTAsZj11Lmxlbmd0aDthPGY7YSsrKXt2YXIgbD11W2FdO2lmKGwuZW5kLnJvdzxyKWNvbnRpbnVlO2lmKGwuc3RhcnQucm93PnIpYnJlYWs7bC5zdGFydC5yb3c9PXImJmwuc3RhcnQuY29sdW1uPj10LmNvbHVtbiYmKGwuc3RhcnQuY29sdW1uIT10LmNvbHVtbnx8IXRoaXMuJGluc2VydFJpZ2h0KSYmKGwuc3RhcnQuY29sdW1uKz1vLGwuc3RhcnQucm93Kz1zKTtpZihsLmVuZC5yb3c9PXImJmwuZW5kLmNvbHVtbj49dC5jb2x1bW4pe2lmKGwuZW5kLmNvbHVtbj09dC5jb2x1bW4mJnRoaXMuJGluc2VydFJpZ2h0KWNvbnRpbnVlO2wuZW5kLmNvbHVtbj09dC5jb2x1bW4mJm8+MCYmYTxmLTEmJmwuZW5kLmNvbHVtbj5sLnN0YXJ0LmNvbHVtbiYmbC5lbmQuY29sdW1uPT11W2ErMV0uc3RhcnQuY29sdW1uJiYobC5lbmQuY29sdW1uLT1vKSxsLmVuZC5jb2x1bW4rPW8sbC5lbmQucm93Kz1zfX1pZihzIT0wJiZhPGYpZm9yKDthPGY7YSsrKXt2YXIgbD11W2FdO2wuc3RhcnQucm93Kz1zLGwuZW5kLnJvdys9c319fSkuY2FsbChzLnByb3RvdHlwZSksdC5SYW5nZUxpc3Q9c30pLGRlZmluZShcImFjZS9lZGl0X3Nlc3Npb24vZm9sZFwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL3JhbmdlXCIsXCJhY2UvcmFuZ2VfbGlzdFwiLFwiYWNlL2xpYi9vb3BcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHUoZSx0KXtlLnJvdy09dC5yb3csZS5yb3c9PTAmJihlLmNvbHVtbi09dC5jb2x1bW4pfWZ1bmN0aW9uIGEoZSx0KXt1KGUuc3RhcnQsdCksdShlLmVuZCx0KX1mdW5jdGlvbiBmKGUsdCl7ZS5yb3c9PTAmJihlLmNvbHVtbis9dC5jb2x1bW4pLGUucm93Kz10LnJvd31mdW5jdGlvbiBsKGUsdCl7ZihlLnN0YXJ0LHQpLGYoZS5lbmQsdCl9dmFyIHI9ZShcIi4uL3JhbmdlXCIpLlJhbmdlLGk9ZShcIi4uL3JhbmdlX2xpc3RcIikuUmFuZ2VMaXN0LHM9ZShcIi4uL2xpYi9vb3BcIiksbz10LkZvbGQ9ZnVuY3Rpb24oZSx0KXt0aGlzLmZvbGRMaW5lPW51bGwsdGhpcy5wbGFjZWhvbGRlcj10LHRoaXMucmFuZ2U9ZSx0aGlzLnN0YXJ0PWUuc3RhcnQsdGhpcy5lbmQ9ZS5lbmQsdGhpcy5zYW1lUm93PWUuc3RhcnQucm93PT1lLmVuZC5yb3csdGhpcy5zdWJGb2xkcz10aGlzLnJhbmdlcz1bXX07cy5pbmhlcml0cyhvLGkpLGZ1bmN0aW9uKCl7dGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybidcIicrdGhpcy5wbGFjZWhvbGRlcisnXCIgJyt0aGlzLnJhbmdlLnRvU3RyaW5nKCl9LHRoaXMuc2V0Rm9sZExpbmU9ZnVuY3Rpb24oZSl7dGhpcy5mb2xkTGluZT1lLHRoaXMuc3ViRm9sZHMuZm9yRWFjaChmdW5jdGlvbih0KXt0LnNldEZvbGRMaW5lKGUpfSl9LHRoaXMuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJhbmdlLmNsb25lKCksdD1uZXcgbyhlLHRoaXMucGxhY2Vob2xkZXIpO3JldHVybiB0aGlzLnN1YkZvbGRzLmZvckVhY2goZnVuY3Rpb24oZSl7dC5zdWJGb2xkcy5wdXNoKGUuY2xvbmUoKSl9KSx0LmNvbGxhcHNlQ2hpbGRyZW49dGhpcy5jb2xsYXBzZUNoaWxkcmVuLHR9LHRoaXMuYWRkU3ViRm9sZD1mdW5jdGlvbihlKXtpZih0aGlzLnJhbmdlLmlzRXF1YWwoZSkpcmV0dXJuO2lmKCF0aGlzLnJhbmdlLmNvbnRhaW5zUmFuZ2UoZSkpdGhyb3cgbmV3IEVycm9yKFwiQSBmb2xkIGNhbid0IGludGVyc2VjdCBhbHJlYWR5IGV4aXN0aW5nIGZvbGRcIitlLnJhbmdlK3RoaXMucmFuZ2UpO2EoZSx0aGlzLnN0YXJ0KTt2YXIgdD1lLnN0YXJ0LnJvdyxuPWUuc3RhcnQuY29sdW1uO2Zvcih2YXIgcj0wLGk9LTE7cjx0aGlzLnN1YkZvbGRzLmxlbmd0aDtyKyspe2k9dGhpcy5zdWJGb2xkc1tyXS5yYW5nZS5jb21wYXJlKHQsbik7aWYoaSE9MSlicmVha312YXIgcz10aGlzLnN1YkZvbGRzW3JdO2lmKGk9PTApcmV0dXJuIHMuYWRkU3ViRm9sZChlKTt2YXIgdD1lLnJhbmdlLmVuZC5yb3csbj1lLnJhbmdlLmVuZC5jb2x1bW47Zm9yKHZhciBvPXIsaT0tMTtvPHRoaXMuc3ViRm9sZHMubGVuZ3RoO28rKyl7aT10aGlzLnN1YkZvbGRzW29dLnJhbmdlLmNvbXBhcmUodCxuKTtpZihpIT0xKWJyZWFrfXZhciB1PXRoaXMuc3ViRm9sZHNbb107aWYoaT09MCl0aHJvdyBuZXcgRXJyb3IoXCJBIGZvbGQgY2FuJ3QgaW50ZXJzZWN0IGFscmVhZHkgZXhpc3RpbmcgZm9sZFwiK2UucmFuZ2UrdGhpcy5yYW5nZSk7dmFyIGY9dGhpcy5zdWJGb2xkcy5zcGxpY2UocixvLXIsZSk7cmV0dXJuIGUuc2V0Rm9sZExpbmUodGhpcy5mb2xkTGluZSksZX0sdGhpcy5yZXN0b3JlUmFuZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGwoZSx0aGlzLnN0YXJ0KX19LmNhbGwoby5wcm90b3R5cGUpfSksZGVmaW5lKFwiYWNlL2VkaXRfc2Vzc2lvbi9mb2xkaW5nXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvcmFuZ2VcIixcImFjZS9lZGl0X3Nlc3Npb24vZm9sZF9saW5lXCIsXCJhY2UvZWRpdF9zZXNzaW9uL2ZvbGRcIixcImFjZS90b2tlbl9pdGVyYXRvclwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdSgpe3RoaXMuZ2V0Rm9sZEF0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10aGlzLmdldEZvbGRMaW5lKGUpO2lmKCFyKXJldHVybiBudWxsO3ZhciBpPXIuZm9sZHM7Zm9yKHZhciBzPTA7czxpLmxlbmd0aDtzKyspe3ZhciBvPWlbc107aWYoby5yYW5nZS5jb250YWlucyhlLHQpKXtpZihuPT0xJiZvLnJhbmdlLmlzRW5kKGUsdCkpY29udGludWU7aWYobj09LTEmJm8ucmFuZ2UuaXNTdGFydChlLHQpKWNvbnRpbnVlO3JldHVybiBvfX19LHRoaXMuZ2V0Rm9sZHNJblJhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhcnQsbj1lLmVuZCxyPXRoaXMuJGZvbGREYXRhLGk9W107dC5jb2x1bW4rPTEsbi5jb2x1bW4tPTE7Zm9yKHZhciBzPTA7czxyLmxlbmd0aDtzKyspe3ZhciBvPXJbc10ucmFuZ2UuY29tcGFyZVJhbmdlKGUpO2lmKG89PTIpY29udGludWU7aWYobz09LTIpYnJlYWs7dmFyIHU9cltzXS5mb2xkcztmb3IodmFyIGE9MDthPHUubGVuZ3RoO2ErKyl7dmFyIGY9dVthXTtvPWYucmFuZ2UuY29tcGFyZVJhbmdlKGUpO2lmKG89PS0yKWJyZWFrO2lmKG89PTIpY29udGludWU7aWYobz09NDIpYnJlYWs7aS5wdXNoKGYpfX1yZXR1cm4gdC5jb2x1bW4tPTEsbi5jb2x1bW4rPTEsaX0sdGhpcy5nZXRGb2xkc0luUmFuZ2VMaXN0PWZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe3ZhciB0PVtdO2UuZm9yRWFjaChmdW5jdGlvbihlKXt0PXQuY29uY2F0KHRoaXMuZ2V0Rm9sZHNJblJhbmdlKGUpKX0sdGhpcyl9ZWxzZSB2YXIgdD10aGlzLmdldEZvbGRzSW5SYW5nZShlKTtyZXR1cm4gdH0sdGhpcy5nZXRBbGxGb2xkcz1mdW5jdGlvbigpe3ZhciBlPVtdLHQ9dGhpcy4kZm9sZERhdGE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspZm9yKHZhciByPTA7cjx0W25dLmZvbGRzLmxlbmd0aDtyKyspZS5wdXNoKHRbbl0uZm9sZHNbcl0pO3JldHVybiBlfSx0aGlzLmdldEZvbGRTdHJpbmdBdD1mdW5jdGlvbihlLHQsbixyKXtyPXJ8fHRoaXMuZ2V0Rm9sZExpbmUoZSk7aWYoIXIpcmV0dXJuIG51bGw7dmFyIGk9e2VuZDp7Y29sdW1uOjB9fSxzLG87Zm9yKHZhciB1PTA7dTxyLmZvbGRzLmxlbmd0aDt1Kyspe289ci5mb2xkc1t1XTt2YXIgYT1vLnJhbmdlLmNvbXBhcmVFbmQoZSx0KTtpZihhPT0tMSl7cz10aGlzLmdldExpbmUoby5zdGFydC5yb3cpLnN1YnN0cmluZyhpLmVuZC5jb2x1bW4sby5zdGFydC5jb2x1bW4pO2JyZWFrfWlmKGE9PT0wKXJldHVybiBudWxsO2k9b31yZXR1cm4gc3x8KHM9dGhpcy5nZXRMaW5lKG8uc3RhcnQucm93KS5zdWJzdHJpbmcoaS5lbmQuY29sdW1uKSksbj09LTE/cy5zdWJzdHJpbmcoMCx0LWkuZW5kLmNvbHVtbik6bj09MT9zLnN1YnN0cmluZyh0LWkuZW5kLmNvbHVtbik6c30sdGhpcy5nZXRGb2xkTGluZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuJGZvbGREYXRhLHI9MDt0JiYocj1uLmluZGV4T2YodCkpLHI9PS0xJiYocj0wKTtmb3IocjtyPG4ubGVuZ3RoO3IrKyl7dmFyIGk9bltyXTtpZihpLnN0YXJ0LnJvdzw9ZSYmaS5lbmQucm93Pj1lKXJldHVybiBpO2lmKGkuZW5kLnJvdz5lKXJldHVybiBudWxsfXJldHVybiBudWxsfSx0aGlzLmdldE5leHRGb2xkTGluZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuJGZvbGREYXRhLHI9MDt0JiYocj1uLmluZGV4T2YodCkpLHI9PS0xJiYocj0wKTtmb3IocjtyPG4ubGVuZ3RoO3IrKyl7dmFyIGk9bltyXTtpZihpLmVuZC5yb3c+PWUpcmV0dXJuIGl9cmV0dXJuIG51bGx9LHRoaXMuZ2V0Rm9sZGVkUm93Q291bnQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLiRmb2xkRGF0YSxyPXQtZSsxO2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXt2YXIgcz1uW2ldLG89cy5lbmQucm93LHU9cy5zdGFydC5yb3c7aWYobz49dCl7dTx0JiYodT49ZT9yLT10LXU6cj0wKTticmVha31vPj1lJiYodT49ZT9yLT1vLXU6ci09by1lKzEpfXJldHVybiByfSx0aGlzLiRhZGRGb2xkTGluZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy4kZm9sZERhdGEucHVzaChlKSx0aGlzLiRmb2xkRGF0YS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3RhcnQucm93LXQuc3RhcnQucm93fSksZX0sdGhpcy5hZGRGb2xkPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy4kZm9sZERhdGEscj0hMSxvO2UgaW5zdGFuY2VvZiBzP289ZToobz1uZXcgcyh0LGUpLG8uY29sbGFwc2VDaGlsZHJlbj10LmNvbGxhcHNlQ2hpbGRyZW4pLHRoaXMuJGNsaXBSYW5nZVRvRG9jdW1lbnQoby5yYW5nZSk7dmFyIHU9by5zdGFydC5yb3csYT1vLnN0YXJ0LmNvbHVtbixmPW8uZW5kLnJvdyxsPW8uZW5kLmNvbHVtbjtpZih1PGZ8fHU9PWYmJmE8PWwtMil7dmFyIGM9dGhpcy5nZXRGb2xkQXQodSxhLDEpLGg9dGhpcy5nZXRGb2xkQXQoZixsLC0xKTtpZihjJiZoPT1jKXJldHVybiBjLmFkZFN1YkZvbGQobyk7YyYmIWMucmFuZ2UuaXNTdGFydCh1LGEpJiZ0aGlzLnJlbW92ZUZvbGQoYyksaCYmIWgucmFuZ2UuaXNFbmQoZixsKSYmdGhpcy5yZW1vdmVGb2xkKGgpO3ZhciBwPXRoaXMuZ2V0Rm9sZHNJblJhbmdlKG8ucmFuZ2UpO3AubGVuZ3RoPjAmJih0aGlzLnJlbW92ZUZvbGRzKHApLHAuZm9yRWFjaChmdW5jdGlvbihlKXtvLmFkZFN1YkZvbGQoZSl9KSk7Zm9yKHZhciBkPTA7ZDxuLmxlbmd0aDtkKyspe3ZhciB2PW5bZF07aWYoZj09di5zdGFydC5yb3cpe3YuYWRkRm9sZChvKSxyPSEwO2JyZWFrfWlmKHU9PXYuZW5kLnJvdyl7di5hZGRGb2xkKG8pLHI9ITA7aWYoIW8uc2FtZVJvdyl7dmFyIG09bltkKzFdO2lmKG0mJm0uc3RhcnQucm93PT1mKXt2Lm1lcmdlKG0pO2JyZWFrfX1icmVha31pZihmPD12LnN0YXJ0LnJvdylicmVha31yZXR1cm4gcnx8KHY9dGhpcy4kYWRkRm9sZExpbmUobmV3IGkodGhpcy4kZm9sZERhdGEsbykpKSx0aGlzLiR1c2VXcmFwTW9kZT90aGlzLiR1cGRhdGVXcmFwRGF0YSh2LnN0YXJ0LnJvdyx2LnN0YXJ0LnJvdyk6dGhpcy4kdXBkYXRlUm93TGVuZ3RoQ2FjaGUodi5zdGFydC5yb3csdi5zdGFydC5yb3cpLHRoaXMuJG1vZGlmaWVkPSEwLHRoaXMuX3NpZ25hbChcImNoYW5nZUZvbGRcIix7ZGF0YTpvLGFjdGlvbjpcImFkZFwifSksb310aHJvdyBuZXcgRXJyb3IoXCJUaGUgcmFuZ2UgaGFzIHRvIGJlIGF0IGxlYXN0IDIgY2hhcmFjdGVycyB3aWR0aFwiKX0sdGhpcy5hZGRGb2xkcz1mdW5jdGlvbihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7dGhpcy5hZGRGb2xkKGUpfSx0aGlzKX0sdGhpcy5yZW1vdmVGb2xkPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZm9sZExpbmUsbj10LnN0YXJ0LnJvdyxyPXQuZW5kLnJvdyxpPXRoaXMuJGZvbGREYXRhLHM9dC5mb2xkcztpZihzLmxlbmd0aD09MSlpLnNwbGljZShpLmluZGV4T2YodCksMSk7ZWxzZSBpZih0LnJhbmdlLmlzRW5kKGUuZW5kLnJvdyxlLmVuZC5jb2x1bW4pKXMucG9wKCksdC5lbmQucm93PXNbcy5sZW5ndGgtMV0uZW5kLnJvdyx0LmVuZC5jb2x1bW49c1tzLmxlbmd0aC0xXS5lbmQuY29sdW1uO2Vsc2UgaWYodC5yYW5nZS5pc1N0YXJ0KGUuc3RhcnQucm93LGUuc3RhcnQuY29sdW1uKSlzLnNoaWZ0KCksdC5zdGFydC5yb3c9c1swXS5zdGFydC5yb3csdC5zdGFydC5jb2x1bW49c1swXS5zdGFydC5jb2x1bW47ZWxzZSBpZihlLnNhbWVSb3cpcy5zcGxpY2Uocy5pbmRleE9mKGUpLDEpO2Vsc2V7dmFyIG89dC5zcGxpdChlLnN0YXJ0LnJvdyxlLnN0YXJ0LmNvbHVtbik7cz1vLmZvbGRzLHMuc2hpZnQoKSxvLnN0YXJ0LnJvdz1zWzBdLnN0YXJ0LnJvdyxvLnN0YXJ0LmNvbHVtbj1zWzBdLnN0YXJ0LmNvbHVtbn10aGlzLiR1cGRhdGluZ3x8KHRoaXMuJHVzZVdyYXBNb2RlP3RoaXMuJHVwZGF0ZVdyYXBEYXRhKG4scik6dGhpcy4kdXBkYXRlUm93TGVuZ3RoQ2FjaGUobixyKSksdGhpcy4kbW9kaWZpZWQ9ITAsdGhpcy5fc2lnbmFsKFwiY2hhbmdlRm9sZFwiLHtkYXRhOmUsYWN0aW9uOlwicmVtb3ZlXCJ9KX0sdGhpcy5yZW1vdmVGb2xkcz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl0LnB1c2goZVtuXSk7dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RoaXMucmVtb3ZlRm9sZChlKX0sdGhpcyksdGhpcy4kbW9kaWZpZWQ9ITB9LHRoaXMuZXhwYW5kRm9sZD1mdW5jdGlvbihlKXt0aGlzLnJlbW92ZUZvbGQoZSksZS5zdWJGb2xkcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UucmVzdG9yZVJhbmdlKHQpLHRoaXMuYWRkRm9sZCh0KX0sdGhpcyksZS5jb2xsYXBzZUNoaWxkcmVuPjAmJnRoaXMuZm9sZEFsbChlLnN0YXJ0LnJvdysxLGUuZW5kLnJvdyxlLmNvbGxhcHNlQ2hpbGRyZW4tMSksZS5zdWJGb2xkcz1bXX0sdGhpcy5leHBhbmRGb2xkcz1mdW5jdGlvbihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7dGhpcy5leHBhbmRGb2xkKGUpfSx0aGlzKX0sdGhpcy51bmZvbGQ9ZnVuY3Rpb24oZSx0KXt2YXIgbixpO2U9PW51bGw/KG49bmV3IHIoMCwwLHRoaXMuZ2V0TGVuZ3RoKCksMCksdD0hMCk6dHlwZW9mIGU9PVwibnVtYmVyXCI/bj1uZXcgcihlLDAsZSx0aGlzLmdldExpbmUoZSkubGVuZ3RoKTpcInJvd1wiaW4gZT9uPXIuZnJvbVBvaW50cyhlLGUpOm49ZSxpPXRoaXMuZ2V0Rm9sZHNJblJhbmdlTGlzdChuKTtpZih0KXRoaXMucmVtb3ZlRm9sZHMoaSk7ZWxzZXt2YXIgcz1pO3doaWxlKHMubGVuZ3RoKXRoaXMuZXhwYW5kRm9sZHMocykscz10aGlzLmdldEZvbGRzSW5SYW5nZUxpc3Qobil9aWYoaS5sZW5ndGgpcmV0dXJuIGl9LHRoaXMuaXNSb3dGb2xkZWQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIXRoaXMuZ2V0Rm9sZExpbmUoZSx0KX0sdGhpcy5nZXRSb3dGb2xkRW5kPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5nZXRGb2xkTGluZShlLHQpO3JldHVybiBuP24uZW5kLnJvdzplfSx0aGlzLmdldFJvd0ZvbGRTdGFydD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZ2V0Rm9sZExpbmUoZSx0KTtyZXR1cm4gbj9uLnN0YXJ0LnJvdzplfSx0aGlzLmdldEZvbGREaXNwbGF5TGluZT1mdW5jdGlvbihlLHQsbixyLGkpe3I9PW51bGwmJihyPWUuc3RhcnQucm93KSxpPT1udWxsJiYoaT0wKSx0PT1udWxsJiYodD1lLmVuZC5yb3cpLG49PW51bGwmJihuPXRoaXMuZ2V0TGluZSh0KS5sZW5ndGgpO3ZhciBzPXRoaXMuZG9jLG89XCJcIjtyZXR1cm4gZS53YWxrKGZ1bmN0aW9uKGUsdCxuLHUpe2lmKHQ8cilyZXR1cm47aWYodD09cil7aWYobjxpKXJldHVybjt1PU1hdGgubWF4KGksdSl9ZSE9bnVsbD9vKz1lOm8rPXMuZ2V0TGluZSh0KS5zdWJzdHJpbmcodSxuKX0sdCxuKSxvfSx0aGlzLmdldERpc3BsYXlMaW5lPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPXRoaXMuZ2V0Rm9sZExpbmUoZSk7aWYoIWkpe3ZhciBzO3JldHVybiBzPXRoaXMuZG9jLmdldExpbmUoZSkscy5zdWJzdHJpbmcocnx8MCx0fHxzLmxlbmd0aCl9cmV0dXJuIHRoaXMuZ2V0Rm9sZERpc3BsYXlMaW5lKGksZSx0LG4scil9LHRoaXMuJGNsb25lRm9sZERhdGE9ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gZT10aGlzLiRmb2xkRGF0YS5tYXAoZnVuY3Rpb24odCl7dmFyIG49dC5mb2xkcy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xvbmUoKX0pO3JldHVybiBuZXcgaShlLG4pfSksZX0sdGhpcy50b2dnbGVGb2xkPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2VsZWN0aW9uLG49dC5nZXRSYW5nZSgpLHIsaTtpZihuLmlzRW1wdHkoKSl7dmFyIHM9bi5zdGFydDtyPXRoaXMuZ2V0Rm9sZEF0KHMucm93LHMuY29sdW1uKTtpZihyKXt0aGlzLmV4cGFuZEZvbGQocik7cmV0dXJufShpPXRoaXMuZmluZE1hdGNoaW5nQnJhY2tldChzKSk/bi5jb21wYXJlUG9pbnQoaSk9PTE/bi5lbmQ9aToobi5zdGFydD1pLG4uc3RhcnQuY29sdW1uKyssbi5lbmQuY29sdW1uLS0pOihpPXRoaXMuZmluZE1hdGNoaW5nQnJhY2tldCh7cm93OnMucm93LGNvbHVtbjpzLmNvbHVtbisxfSkpPyhuLmNvbXBhcmVQb2ludChpKT09MT9uLmVuZD1pOm4uc3RhcnQ9aSxuLnN0YXJ0LmNvbHVtbisrKTpuPXRoaXMuZ2V0Q29tbWVudEZvbGRSYW5nZShzLnJvdyxzLmNvbHVtbil8fG59ZWxzZXt2YXIgbz10aGlzLmdldEZvbGRzSW5SYW5nZShuKTtpZihlJiZvLmxlbmd0aCl7dGhpcy5leHBhbmRGb2xkcyhvKTtyZXR1cm59by5sZW5ndGg9PTEmJihyPW9bMF0pfXJ8fChyPXRoaXMuZ2V0Rm9sZEF0KG4uc3RhcnQucm93LG4uc3RhcnQuY29sdW1uKSk7aWYociYmci5yYW5nZS50b1N0cmluZygpPT1uLnRvU3RyaW5nKCkpe3RoaXMuZXhwYW5kRm9sZChyKTtyZXR1cm59dmFyIHU9XCIuLi5cIjtpZighbi5pc011bHRpTGluZSgpKXt1PXRoaXMuZ2V0VGV4dFJhbmdlKG4pO2lmKHUubGVuZ3RoPDQpcmV0dXJuO3U9dS50cmltKCkuc3Vic3RyaW5nKDAsMikrXCIuLlwifXRoaXMuYWRkRm9sZCh1LG4pfSx0aGlzLmdldENvbW1lbnRGb2xkUmFuZ2U9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW5ldyBvKHRoaXMsZSx0KSxzPWkuZ2V0Q3VycmVudFRva2VuKCk7aWYocyYmL15jb21tZW50fHN0cmluZy8udGVzdChzLnR5cGUpKXt2YXIgdT1uZXcgcixhPW5ldyBSZWdFeHAocy50eXBlLnJlcGxhY2UoL1xcLi4qLyxcIlxcXFwuXCIpKTtpZihuIT0xKXtkbyBzPWkuc3RlcEJhY2t3YXJkKCk7d2hpbGUocyYmYS50ZXN0KHMudHlwZSkpO2kuc3RlcEZvcndhcmQoKX11LnN0YXJ0LnJvdz1pLmdldEN1cnJlbnRUb2tlblJvdygpLHUuc3RhcnQuY29sdW1uPWkuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCkrMixpPW5ldyBvKHRoaXMsZSx0KTtpZihuIT0tMSl7ZG8gcz1pLnN0ZXBGb3J3YXJkKCk7d2hpbGUocyYmYS50ZXN0KHMudHlwZSkpO3M9aS5zdGVwQmFja3dhcmQoKX1lbHNlIHM9aS5nZXRDdXJyZW50VG9rZW4oKTtyZXR1cm4gdS5lbmQucm93PWkuZ2V0Q3VycmVudFRva2VuUm93KCksdS5lbmQuY29sdW1uPWkuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCkrcy52YWx1ZS5sZW5ndGgtMix1fX0sdGhpcy5mb2xkQWxsPWZ1bmN0aW9uKGUsdCxuKXtuPT11bmRlZmluZWQmJihuPTFlNSk7dmFyIHI9dGhpcy5mb2xkV2lkZ2V0cztpZighcilyZXR1cm47dD10fHx0aGlzLmdldExlbmd0aCgpLGU9ZXx8MDtmb3IodmFyIGk9ZTtpPHQ7aSsrKXtyW2ldPT1udWxsJiYocltpXT10aGlzLmdldEZvbGRXaWRnZXQoaSkpO2lmKHJbaV0hPVwic3RhcnRcIiljb250aW51ZTt2YXIgcz10aGlzLmdldEZvbGRXaWRnZXRSYW5nZShpKTtpZihzJiZzLmlzTXVsdGlMaW5lKCkmJnMuZW5kLnJvdzw9dCYmcy5zdGFydC5yb3c+PWUpe2k9cy5lbmQucm93O3RyeXt2YXIgbz10aGlzLmFkZEZvbGQoXCIuLi5cIixzKTtvJiYoby5jb2xsYXBzZUNoaWxkcmVuPW4pfWNhdGNoKHUpe319fX0sdGhpcy4kZm9sZFN0eWxlcz17bWFudWFsOjEsbWFya2JlZ2luOjEsbWFya2JlZ2luZW5kOjF9LHRoaXMuJGZvbGRTdHlsZT1cIm1hcmtiZWdpblwiLHRoaXMuc2V0Rm9sZFN0eWxlPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLiRmb2xkU3R5bGVzW2VdKXRocm93IG5ldyBFcnJvcihcImludmFsaWQgZm9sZCBzdHlsZTogXCIrZStcIltcIitPYmplY3Qua2V5cyh0aGlzLiRmb2xkU3R5bGVzKS5qb2luKFwiLCBcIikrXCJdXCIpO2lmKHRoaXMuJGZvbGRTdHlsZT09ZSlyZXR1cm47dGhpcy4kZm9sZFN0eWxlPWUsZT09XCJtYW51YWxcIiYmdGhpcy51bmZvbGQoKTt2YXIgdD10aGlzLiRmb2xkTW9kZTt0aGlzLiRzZXRGb2xkaW5nKG51bGwpLHRoaXMuJHNldEZvbGRpbmcodCl9LHRoaXMuJHNldEZvbGRpbmc9ZnVuY3Rpb24oZSl7aWYodGhpcy4kZm9sZE1vZGU9PWUpcmV0dXJuO3RoaXMuJGZvbGRNb2RlPWUsdGhpcy5vZmYoXCJjaGFuZ2VcIix0aGlzLiR1cGRhdGVGb2xkV2lkZ2V0cyksdGhpcy5vZmYoXCJ0b2tlbml6ZXJVcGRhdGVcIix0aGlzLiR0b2tlbml6ZXJVcGRhdGVGb2xkV2lkZ2V0cyksdGhpcy5fc2lnbmFsKFwiY2hhbmdlQW5ub3RhdGlvblwiKTtpZighZXx8dGhpcy4kZm9sZFN0eWxlPT1cIm1hbnVhbFwiKXt0aGlzLmZvbGRXaWRnZXRzPW51bGw7cmV0dXJufXRoaXMuZm9sZFdpZGdldHM9W10sdGhpcy5nZXRGb2xkV2lkZ2V0PWUuZ2V0Rm9sZFdpZGdldC5iaW5kKGUsdGhpcyx0aGlzLiRmb2xkU3R5bGUpLHRoaXMuZ2V0Rm9sZFdpZGdldFJhbmdlPWUuZ2V0Rm9sZFdpZGdldFJhbmdlLmJpbmQoZSx0aGlzLHRoaXMuJGZvbGRTdHlsZSksdGhpcy4kdXBkYXRlRm9sZFdpZGdldHM9dGhpcy51cGRhdGVGb2xkV2lkZ2V0cy5iaW5kKHRoaXMpLHRoaXMuJHRva2VuaXplclVwZGF0ZUZvbGRXaWRnZXRzPXRoaXMudG9rZW5pemVyVXBkYXRlRm9sZFdpZGdldHMuYmluZCh0aGlzKSx0aGlzLm9uKFwiY2hhbmdlXCIsdGhpcy4kdXBkYXRlRm9sZFdpZGdldHMpLHRoaXMub24oXCJ0b2tlbml6ZXJVcGRhdGVcIix0aGlzLiR0b2tlbml6ZXJVcGRhdGVGb2xkV2lkZ2V0cyl9LHRoaXMuZ2V0UGFyZW50Rm9sZFJhbmdlRGF0YT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZm9sZFdpZGdldHM7aWYoIW58fHQmJm5bZV0pcmV0dXJue307dmFyIHI9ZS0xLGk7d2hpbGUocj49MCl7dmFyIHM9bltyXTtzPT1udWxsJiYocz1uW3JdPXRoaXMuZ2V0Rm9sZFdpZGdldChyKSk7aWYocz09XCJzdGFydFwiKXt2YXIgbz10aGlzLmdldEZvbGRXaWRnZXRSYW5nZShyKTtpfHwoaT1vKTtpZihvJiZvLmVuZC5yb3c+PWUpYnJlYWt9ci0tfXJldHVybntyYW5nZTpyIT09LTEmJm8sZmlyc3RSYW5nZTppfX0sdGhpcy5vbkZvbGRXaWRnZXRDbGljaz1mdW5jdGlvbihlLHQpe3Q9dC5kb21FdmVudDt2YXIgbj17Y2hpbGRyZW46dC5zaGlmdEtleSxhbGw6dC5jdHJsS2V5fHx0Lm1ldGFLZXksc2libGluZ3M6dC5hbHRLZXl9LHI9dGhpcy4kdG9nZ2xlRm9sZFdpZGdldChlLG4pO2lmKCFyKXt2YXIgaT10LnRhcmdldHx8dC5zcmNFbGVtZW50O2kmJi9hY2VfZm9sZC13aWRnZXQvLnRlc3QoaS5jbGFzc05hbWUpJiYoaS5jbGFzc05hbWUrPVwiIGFjZV9pbnZhbGlkXCIpfX0sdGhpcy4kdG9nZ2xlRm9sZFdpZGdldD1mdW5jdGlvbihlLHQpe2lmKCF0aGlzLmdldEZvbGRXaWRnZXQpcmV0dXJuO3ZhciBuPXRoaXMuZ2V0Rm9sZFdpZGdldChlKSxyPXRoaXMuZ2V0TGluZShlKSxpPW49PT1cImVuZFwiPy0xOjEscz10aGlzLmdldEZvbGRBdChlLGk9PT0tMT8wOnIubGVuZ3RoLGkpO2lmKHMpe3QuY2hpbGRyZW58fHQuYWxsP3RoaXMucmVtb3ZlRm9sZChzKTp0aGlzLmV4cGFuZEZvbGQocyk7cmV0dXJufXZhciBvPXRoaXMuZ2V0Rm9sZFdpZGdldFJhbmdlKGUsITApO2lmKG8mJiFvLmlzTXVsdGlMaW5lKCkpe3M9dGhpcy5nZXRGb2xkQXQoby5zdGFydC5yb3csby5zdGFydC5jb2x1bW4sMSk7aWYocyYmby5pc0VxdWFsKHMucmFuZ2UpKXt0aGlzLnJlbW92ZUZvbGQocyk7cmV0dXJufX1pZih0LnNpYmxpbmdzKXt2YXIgdT10aGlzLmdldFBhcmVudEZvbGRSYW5nZURhdGEoZSk7aWYodS5yYW5nZSl2YXIgYT11LnJhbmdlLnN0YXJ0LnJvdysxLGY9dS5yYW5nZS5lbmQucm93O3RoaXMuZm9sZEFsbChhLGYsdC5hbGw/MWU0OjApfWVsc2UgdC5jaGlsZHJlbj8oZj1vP28uZW5kLnJvdzp0aGlzLmdldExlbmd0aCgpLHRoaXMuZm9sZEFsbChlKzEsZix0LmFsbD8xZTQ6MCkpOm8mJih0LmFsbCYmKG8uY29sbGFwc2VDaGlsZHJlbj0xZTQpLHRoaXMuYWRkRm9sZChcIi4uLlwiLG8pKTtyZXR1cm4gb30sdGhpcy50b2dnbGVGb2xkV2lkZ2V0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2VsZWN0aW9uLmdldEN1cnNvcigpLnJvdzt0PXRoaXMuZ2V0Um93Rm9sZFN0YXJ0KHQpO3ZhciBuPXRoaXMuJHRvZ2dsZUZvbGRXaWRnZXQodCx7fSk7aWYobilyZXR1cm47dmFyIHI9dGhpcy5nZXRQYXJlbnRGb2xkUmFuZ2VEYXRhKHQsITApO249ci5yYW5nZXx8ci5maXJzdFJhbmdlO2lmKG4pe3Q9bi5zdGFydC5yb3c7dmFyIGk9dGhpcy5nZXRGb2xkQXQodCx0aGlzLmdldExpbmUodCkubGVuZ3RoLDEpO2k/dGhpcy5yZW1vdmVGb2xkKGkpOnRoaXMuYWRkRm9sZChcIi4uLlwiLG4pfX0sdGhpcy51cGRhdGVGb2xkV2lkZ2V0cz1mdW5jdGlvbihlKXt2YXIgdD1lLnN0YXJ0LnJvdyxuPWUuZW5kLnJvdy10O2lmKG49PT0wKXRoaXMuZm9sZFdpZGdldHNbdF09bnVsbDtlbHNlIGlmKGUuYWN0aW9uPT1cInJlbW92ZVwiKXRoaXMuZm9sZFdpZGdldHMuc3BsaWNlKHQsbisxLG51bGwpO2Vsc2V7dmFyIHI9QXJyYXkobisxKTtyLnVuc2hpZnQodCwxKSx0aGlzLmZvbGRXaWRnZXRzLnNwbGljZS5hcHBseSh0aGlzLmZvbGRXaWRnZXRzLHIpfX0sdGhpcy50b2tlbml6ZXJVcGRhdGVGb2xkV2lkZ2V0cz1mdW5jdGlvbihlKXt2YXIgdD1lLmRhdGE7dC5maXJzdCE9dC5sYXN0JiZ0aGlzLmZvbGRXaWRnZXRzLmxlbmd0aD50LmZpcnN0JiZ0aGlzLmZvbGRXaWRnZXRzLnNwbGljZSh0LmZpcnN0LHRoaXMuZm9sZFdpZGdldHMubGVuZ3RoKX19dmFyIHI9ZShcIi4uL3JhbmdlXCIpLlJhbmdlLGk9ZShcIi4vZm9sZF9saW5lXCIpLkZvbGRMaW5lLHM9ZShcIi4vZm9sZFwiKS5Gb2xkLG89ZShcIi4uL3Rva2VuX2l0ZXJhdG9yXCIpLlRva2VuSXRlcmF0b3I7dC5Gb2xkaW5nPXV9KSxkZWZpbmUoXCJhY2UvZWRpdF9zZXNzaW9uL2JyYWNrZXRfbWF0Y2hcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS90b2tlbl9pdGVyYXRvclwiLFwiYWNlL3JhbmdlXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBzKCl7dGhpcy5maW5kTWF0Y2hpbmdCcmFja2V0PWZ1bmN0aW9uKGUsdCl7aWYoZS5jb2x1bW49PTApcmV0dXJuIG51bGw7dmFyIG49dHx8dGhpcy5nZXRMaW5lKGUucm93KS5jaGFyQXQoZS5jb2x1bW4tMSk7aWYobj09XCJcIilyZXR1cm4gbnVsbDt2YXIgcj1uLm1hdGNoKC8oW1xcKFxcW1xce10pfChbXFwpXFxdXFx9XSkvKTtyZXR1cm4gcj9yWzFdP3RoaXMuJGZpbmRDbG9zaW5nQnJhY2tldChyWzFdLGUpOnRoaXMuJGZpbmRPcGVuaW5nQnJhY2tldChyWzJdLGUpOm51bGx9LHRoaXMuZ2V0QnJhY2tldFJhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0TGluZShlLnJvdyksbj0hMCxyLHM9dC5jaGFyQXQoZS5jb2x1bW4tMSksbz1zJiZzLm1hdGNoKC8oW1xcKFxcW1xce10pfChbXFwpXFxdXFx9XSkvKTtvfHwocz10LmNoYXJBdChlLmNvbHVtbiksZT17cm93OmUucm93LGNvbHVtbjplLmNvbHVtbisxfSxvPXMmJnMubWF0Y2goLyhbXFwoXFxbXFx7XSl8KFtcXClcXF1cXH1dKS8pLG49ITEpO2lmKCFvKXJldHVybiBudWxsO2lmKG9bMV0pe3ZhciB1PXRoaXMuJGZpbmRDbG9zaW5nQnJhY2tldChvWzFdLGUpO2lmKCF1KXJldHVybiBudWxsO3I9aS5mcm9tUG9pbnRzKGUsdSksbnx8KHIuZW5kLmNvbHVtbisrLHIuc3RhcnQuY29sdW1uLS0pLHIuY3Vyc29yPXIuZW5kfWVsc2V7dmFyIHU9dGhpcy4kZmluZE9wZW5pbmdCcmFja2V0KG9bMl0sZSk7aWYoIXUpcmV0dXJuIG51bGw7cj1pLmZyb21Qb2ludHModSxlKSxufHwoci5zdGFydC5jb2x1bW4rKyxyLmVuZC5jb2x1bW4tLSksci5jdXJzb3I9ci5zdGFydH1yZXR1cm4gcn0sdGhpcy4kYnJhY2tldHM9e1wiKVwiOlwiKFwiLFwiKFwiOlwiKVwiLFwiXVwiOlwiW1wiLFwiW1wiOlwiXVwiLFwie1wiOlwifVwiLFwifVwiOlwie1wifSx0aGlzLiRmaW5kT3BlbmluZ0JyYWNrZXQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuJGJyYWNrZXRzW2VdLHM9MSxvPW5ldyByKHRoaXMsdC5yb3csdC5jb2x1bW4pLHU9by5nZXRDdXJyZW50VG9rZW4oKTt1fHwodT1vLnN0ZXBGb3J3YXJkKCkpO2lmKCF1KXJldHVybjtufHwobj1uZXcgUmVnRXhwKFwiKFxcXFwuP1wiK3UudHlwZS5yZXBsYWNlKFwiLlwiLFwiXFxcXC5cIikucmVwbGFjZShcInJwYXJlblwiLFwiLnBhcmVuXCIpLnJlcGxhY2UoL1xcYig/OmVuZClcXGIvLFwiKD86c3RhcnR8YmVnaW58ZW5kKVwiKStcIikrXCIpKTt2YXIgYT10LmNvbHVtbi1vLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpLTIsZj11LnZhbHVlO2Zvcig7Oyl7d2hpbGUoYT49MCl7dmFyIGw9Zi5jaGFyQXQoYSk7aWYobD09aSl7cy09MTtpZihzPT0wKXJldHVybntyb3c6by5nZXRDdXJyZW50VG9rZW5Sb3coKSxjb2x1bW46YStvLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpfX1lbHNlIGw9PWUmJihzKz0xKTthLT0xfWRvIHU9by5zdGVwQmFja3dhcmQoKTt3aGlsZSh1JiYhbi50ZXN0KHUudHlwZSkpO2lmKHU9PW51bGwpYnJlYWs7Zj11LnZhbHVlLGE9Zi5sZW5ndGgtMX1yZXR1cm4gbnVsbH0sdGhpcy4kZmluZENsb3NpbmdCcmFja2V0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLiRicmFja2V0c1tlXSxzPTEsbz1uZXcgcih0aGlzLHQucm93LHQuY29sdW1uKSx1PW8uZ2V0Q3VycmVudFRva2VuKCk7dXx8KHU9by5zdGVwRm9yd2FyZCgpKTtpZighdSlyZXR1cm47bnx8KG49bmV3IFJlZ0V4cChcIihcXFxcLj9cIit1LnR5cGUucmVwbGFjZShcIi5cIixcIlxcXFwuXCIpLnJlcGxhY2UoXCJscGFyZW5cIixcIi5wYXJlblwiKS5yZXBsYWNlKC9cXGIoPzpzdGFydHxiZWdpbilcXGIvLFwiKD86c3RhcnR8YmVnaW58ZW5kKVwiKStcIikrXCIpKTt2YXIgYT10LmNvbHVtbi1vLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpO2Zvcig7Oyl7dmFyIGY9dS52YWx1ZSxsPWYubGVuZ3RoO3doaWxlKGE8bCl7dmFyIGM9Zi5jaGFyQXQoYSk7aWYoYz09aSl7cy09MTtpZihzPT0wKXJldHVybntyb3c6by5nZXRDdXJyZW50VG9rZW5Sb3coKSxjb2x1bW46YStvLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpfX1lbHNlIGM9PWUmJihzKz0xKTthKz0xfWRvIHU9by5zdGVwRm9yd2FyZCgpO3doaWxlKHUmJiFuLnRlc3QodS50eXBlKSk7aWYodT09bnVsbClicmVhazthPTB9cmV0dXJuIG51bGx9fXZhciByPWUoXCIuLi90b2tlbl9pdGVyYXRvclwiKS5Ub2tlbkl0ZXJhdG9yLGk9ZShcIi4uL3JhbmdlXCIpLlJhbmdlO3QuQnJhY2tldE1hdGNoPXN9KSxkZWZpbmUoXCJhY2UvZWRpdF9zZXNzaW9uXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvbGliL29vcFwiLFwiYWNlL2xpYi9sYW5nXCIsXCJhY2UvY29uZmlnXCIsXCJhY2UvbGliL2V2ZW50X2VtaXR0ZXJcIixcImFjZS9zZWxlY3Rpb25cIixcImFjZS9tb2RlL3RleHRcIixcImFjZS9yYW5nZVwiLFwiYWNlL2RvY3VtZW50XCIsXCJhY2UvYmFja2dyb3VuZF90b2tlbml6ZXJcIixcImFjZS9zZWFyY2hfaGlnaGxpZ2h0XCIsXCJhY2UvZWRpdF9zZXNzaW9uL2ZvbGRpbmdcIixcImFjZS9lZGl0X3Nlc3Npb24vYnJhY2tldF9tYXRjaFwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZShcIi4vbGliL29vcFwiKSxpPWUoXCIuL2xpYi9sYW5nXCIpLHM9ZShcIi4vY29uZmlnXCIpLG89ZShcIi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyLHU9ZShcIi4vc2VsZWN0aW9uXCIpLlNlbGVjdGlvbixhPWUoXCIuL21vZGUvdGV4dFwiKS5Nb2RlLGY9ZShcIi4vcmFuZ2VcIikuUmFuZ2UsbD1lKFwiLi9kb2N1bWVudFwiKS5Eb2N1bWVudCxjPWUoXCIuL2JhY2tncm91bmRfdG9rZW5pemVyXCIpLkJhY2tncm91bmRUb2tlbml6ZXIsaD1lKFwiLi9zZWFyY2hfaGlnaGxpZ2h0XCIpLlNlYXJjaEhpZ2hsaWdodCxwPWZ1bmN0aW9uKGUsdCl7dGhpcy4kYnJlYWtwb2ludHM9W10sdGhpcy4kZGVjb3JhdGlvbnM9W10sdGhpcy4kZnJvbnRNYXJrZXJzPXt9LHRoaXMuJGJhY2tNYXJrZXJzPXt9LHRoaXMuJG1hcmtlcklkPTEsdGhpcy4kdW5kb1NlbGVjdD0hMCx0aGlzLiRmb2xkRGF0YT1bXSx0aGlzLiRmb2xkRGF0YS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmpvaW4oXCJcXG5cIil9LHRoaXMub24oXCJjaGFuZ2VGb2xkXCIsdGhpcy5vbkNoYW5nZUZvbGQuYmluZCh0aGlzKSksdGhpcy4kb25DaGFuZ2U9dGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO2lmKHR5cGVvZiBlIT1cIm9iamVjdFwifHwhZS5nZXRMaW5lKWU9bmV3IGwoZSk7dGhpcy5zZXREb2N1bWVudChlKSx0aGlzLnNlbGVjdGlvbj1uZXcgdSh0aGlzKSxzLnJlc2V0T3B0aW9ucyh0aGlzKSx0aGlzLnNldE1vZGUodCkscy5fc2lnbmFsKFwic2Vzc2lvblwiLHRoaXMpfTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBtKGUpe3JldHVybiBlPDQzNTI/ITE6ZT49NDM1MiYmZTw9NDQ0N3x8ZT49NDUxNSYmZTw9NDUxOXx8ZT49NDYwMiYmZTw9NDYwN3x8ZT49OTAwMSYmZTw9OTAwMnx8ZT49MTE5MDQmJmU8PTExOTI5fHxlPj0xMTkzMSYmZTw9MTIwMTl8fGU+PTEyMDMyJiZlPD0xMjI0NXx8ZT49MTIyNzImJmU8PTEyMjgzfHxlPj0xMjI4OCYmZTw9MTIzNTB8fGU+PTEyMzUzJiZlPD0xMjQzOHx8ZT49MTI0NDEmJmU8PTEyNTQzfHxlPj0xMjU0OSYmZTw9MTI1ODl8fGU+PTEyNTkzJiZlPD0xMjY4Nnx8ZT49MTI2ODgmJmU8PTEyNzMwfHxlPj0xMjczNiYmZTw9MTI3NzF8fGU+PTEyNzg0JiZlPD0xMjgzMHx8ZT49MTI4MzImJmU8PTEyODcxfHxlPj0xMjg4MCYmZTw9MTMwNTR8fGU+PTEzMDU2JiZlPD0xOTkwM3x8ZT49MTk5NjgmJmU8PTQyMTI0fHxlPj00MjEyOCYmZTw9NDIxODJ8fGU+PTQzMzYwJiZlPD00MzM4OHx8ZT49NDQwMzImJmU8PTU1MjAzfHxlPj01NTIxNiYmZTw9NTUyMzh8fGU+PTU1MjQzJiZlPD01NTI5MXx8ZT49NjM3NDQmJmU8PTY0MjU1fHxlPj02NTA0MCYmZTw9NjUwNDl8fGU+PTY1MDcyJiZlPD02NTEwNnx8ZT49NjUxMDgmJmU8PTY1MTI2fHxlPj02NTEyOCYmZTw9NjUxMzF8fGU+PTY1MjgxJiZlPD02NTM3Nnx8ZT49NjU1MDQmJmU8PTY1NTEwfXIuaW1wbGVtZW50KHRoaXMsbyksdGhpcy5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt0aGlzLmRvYyYmdGhpcy5kb2MucmVtb3ZlTGlzdGVuZXIoXCJjaGFuZ2VcIix0aGlzLiRvbkNoYW5nZSksdGhpcy5kb2M9ZSxlLm9uKFwiY2hhbmdlXCIsdGhpcy4kb25DaGFuZ2UpLHRoaXMuYmdUb2tlbml6ZXImJnRoaXMuYmdUb2tlbml6ZXIuc2V0RG9jdW1lbnQodGhpcy5nZXREb2N1bWVudCgpKSx0aGlzLnJlc2V0Q2FjaGVzKCl9LHRoaXMuZ2V0RG9jdW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb2N9LHRoaXMuJHJlc2V0Um93Q2FjaGU9ZnVuY3Rpb24oZSl7aWYoIWUpe3RoaXMuJGRvY1Jvd0NhY2hlPVtdLHRoaXMuJHNjcmVlblJvd0NhY2hlPVtdO3JldHVybn12YXIgdD10aGlzLiRkb2NSb3dDYWNoZS5sZW5ndGgsbj10aGlzLiRnZXRSb3dDYWNoZUluZGV4KHRoaXMuJGRvY1Jvd0NhY2hlLGUpKzE7dD5uJiYodGhpcy4kZG9jUm93Q2FjaGUuc3BsaWNlKG4sdCksdGhpcy4kc2NyZWVuUm93Q2FjaGUuc3BsaWNlKG4sdCkpfSx0aGlzLiRnZXRSb3dDYWNoZUluZGV4PWZ1bmN0aW9uKGUsdCl7dmFyIG49MCxyPWUubGVuZ3RoLTE7d2hpbGUobjw9cil7dmFyIGk9bityPj4xLHM9ZVtpXTtpZih0PnMpbj1pKzE7ZWxzZXtpZighKHQ8cykpcmV0dXJuIGk7cj1pLTF9fXJldHVybiBuLTF9LHRoaXMucmVzZXRDYWNoZXM9ZnVuY3Rpb24oKXt0aGlzLiRtb2RpZmllZD0hMCx0aGlzLiR3cmFwRGF0YT1bXSx0aGlzLiRyb3dMZW5ndGhDYWNoZT1bXSx0aGlzLiRyZXNldFJvd0NhY2hlKDApLHRoaXMuYmdUb2tlbml6ZXImJnRoaXMuYmdUb2tlbml6ZXIuc3RhcnQoMCl9LHRoaXMub25DaGFuZ2VGb2xkPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YTt0aGlzLiRyZXNldFJvd0NhY2hlKHQuc3RhcnQucm93KX0sdGhpcy5vbkNoYW5nZT1mdW5jdGlvbihlKXt0aGlzLiRtb2RpZmllZD0hMCx0aGlzLiRyZXNldFJvd0NhY2hlKGUuc3RhcnQucm93KTt2YXIgdD10aGlzLiR1cGRhdGVJbnRlcm5hbERhdGFPbkNoYW5nZShlKTshdGhpcy4kZnJvbVVuZG8mJnRoaXMuJHVuZG9NYW5hZ2VyJiYhZS5pZ25vcmUmJih0aGlzLiRkZWx0YXNEb2MucHVzaChlKSx0JiZ0Lmxlbmd0aCE9MCYmdGhpcy4kZGVsdGFzRm9sZC5wdXNoKHthY3Rpb246XCJyZW1vdmVGb2xkc1wiLGZvbGRzOnR9KSx0aGlzLiRpbmZvcm1VbmRvTWFuYWdlci5zY2hlZHVsZSgpKSx0aGlzLmJnVG9rZW5pemVyJiZ0aGlzLmJnVG9rZW5pemVyLiR1cGRhdGVPbkNoYW5nZShlKSx0aGlzLl9zaWduYWwoXCJjaGFuZ2VcIixlKX0sdGhpcy5zZXRWYWx1ZT1mdW5jdGlvbihlKXt0aGlzLmRvYy5zZXRWYWx1ZShlKSx0aGlzLnNlbGVjdGlvbi5tb3ZlVG8oMCwwKSx0aGlzLiRyZXNldFJvd0NhY2hlKDApLHRoaXMuJGRlbHRhcz1bXSx0aGlzLiRkZWx0YXNEb2M9W10sdGhpcy4kZGVsdGFzRm9sZD1bXSx0aGlzLnNldFVuZG9NYW5hZ2VyKHRoaXMuJHVuZG9NYW5hZ2VyKSx0aGlzLmdldFVuZG9NYW5hZ2VyKCkucmVzZXQoKX0sdGhpcy5nZXRWYWx1ZT10aGlzLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9jLmdldFZhbHVlKCl9LHRoaXMuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9ufSx0aGlzLmdldFN0YXRlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmJnVG9rZW5pemVyLmdldFN0YXRlKGUpfSx0aGlzLmdldFRva2Vucz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5iZ1Rva2VuaXplci5nZXRUb2tlbnMoZSl9LHRoaXMuZ2V0VG9rZW5BdD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuYmdUb2tlbml6ZXIuZ2V0VG9rZW5zKGUpLHIsaT0wO2lmKHQ9PW51bGwpcz1uLmxlbmd0aC0xLGk9dGhpcy5nZXRMaW5lKGUpLmxlbmd0aDtlbHNlIGZvcih2YXIgcz0wO3M8bi5sZW5ndGg7cysrKXtpKz1uW3NdLnZhbHVlLmxlbmd0aDtpZihpPj10KWJyZWFrfXJldHVybiByPW5bc10scj8oci5pbmRleD1zLHIuc3RhcnQ9aS1yLnZhbHVlLmxlbmd0aCxyKTpudWxsfSx0aGlzLnNldFVuZG9NYW5hZ2VyPWZ1bmN0aW9uKGUpe3RoaXMuJHVuZG9NYW5hZ2VyPWUsdGhpcy4kZGVsdGFzPVtdLHRoaXMuJGRlbHRhc0RvYz1bXSx0aGlzLiRkZWx0YXNGb2xkPVtdLHRoaXMuJGluZm9ybVVuZG9NYW5hZ2VyJiZ0aGlzLiRpbmZvcm1VbmRvTWFuYWdlci5jYW5jZWwoKTtpZihlKXt2YXIgdD10aGlzO3RoaXMuJHN5bmNJbmZvcm1VbmRvTWFuYWdlcj1mdW5jdGlvbigpe3QuJGluZm9ybVVuZG9NYW5hZ2VyLmNhbmNlbCgpLHQuJGRlbHRhc0ZvbGQubGVuZ3RoJiYodC4kZGVsdGFzLnB1c2goe2dyb3VwOlwiZm9sZFwiLGRlbHRhczp0LiRkZWx0YXNGb2xkfSksdC4kZGVsdGFzRm9sZD1bXSksdC4kZGVsdGFzRG9jLmxlbmd0aCYmKHQuJGRlbHRhcy5wdXNoKHtncm91cDpcImRvY1wiLGRlbHRhczp0LiRkZWx0YXNEb2N9KSx0LiRkZWx0YXNEb2M9W10pLHQuJGRlbHRhcy5sZW5ndGg+MCYmZS5leGVjdXRlKHthY3Rpb246XCJhY2V1cGRhdGVcIixhcmdzOlt0LiRkZWx0YXMsdF0sbWVyZ2U6dC5tZXJnZVVuZG9EZWx0YXN9KSx0Lm1lcmdlVW5kb0RlbHRhcz0hMSx0LiRkZWx0YXM9W119LHRoaXMuJGluZm9ybVVuZG9NYW5hZ2VyPWkuZGVsYXllZENhbGwodGhpcy4kc3luY0luZm9ybVVuZG9NYW5hZ2VyKX19LHRoaXMubWFya1VuZG9Hcm91cD1mdW5jdGlvbigpe3RoaXMuJHN5bmNJbmZvcm1VbmRvTWFuYWdlciYmdGhpcy4kc3luY0luZm9ybVVuZG9NYW5hZ2VyKCl9LHRoaXMuJGRlZmF1bHRVbmRvTWFuYWdlcj17dW5kbzpmdW5jdGlvbigpe30scmVkbzpmdW5jdGlvbigpe30scmVzZXQ6ZnVuY3Rpb24oKXt9fSx0aGlzLmdldFVuZG9NYW5hZ2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHVuZG9NYW5hZ2VyfHx0aGlzLiRkZWZhdWx0VW5kb01hbmFnZXJ9LHRoaXMuZ2V0VGFiU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VXNlU29mdFRhYnMoKT9pLnN0cmluZ1JlcGVhdChcIiBcIix0aGlzLmdldFRhYlNpemUoKSk6XCJcdFwifSx0aGlzLnNldFVzZVNvZnRUYWJzPWZ1bmN0aW9uKGUpe3RoaXMuc2V0T3B0aW9uKFwidXNlU29mdFRhYnNcIixlKX0sdGhpcy5nZXRVc2VTb2Z0VGFicz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR1c2VTb2Z0VGFicyYmIXRoaXMuJG1vZGUuJGluZGVudFdpdGhUYWJzfSx0aGlzLnNldFRhYlNpemU9ZnVuY3Rpb24oZSl7dGhpcy5zZXRPcHRpb24oXCJ0YWJTaXplXCIsZSl9LHRoaXMuZ2V0VGFiU2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0YWJTaXplfSx0aGlzLmlzVGFiU3RvcD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy4kdXNlU29mdFRhYnMmJmUuY29sdW1uJXRoaXMuJHRhYlNpemU9PT0wfSx0aGlzLiRvdmVyd3JpdGU9ITEsdGhpcy5zZXRPdmVyd3JpdGU9ZnVuY3Rpb24oZSl7dGhpcy5zZXRPcHRpb24oXCJvdmVyd3JpdGVcIixlKX0sdGhpcy5nZXRPdmVyd3JpdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kb3ZlcndyaXRlfSx0aGlzLnRvZ2dsZU92ZXJ3cml0ZT1mdW5jdGlvbigpe3RoaXMuc2V0T3ZlcndyaXRlKCF0aGlzLiRvdmVyd3JpdGUpfSx0aGlzLmFkZEd1dHRlckRlY29yYXRpb249ZnVuY3Rpb24oZSx0KXt0aGlzLiRkZWNvcmF0aW9uc1tlXXx8KHRoaXMuJGRlY29yYXRpb25zW2VdPVwiXCIpLHRoaXMuJGRlY29yYXRpb25zW2VdKz1cIiBcIit0LHRoaXMuX3NpZ25hbChcImNoYW5nZUJyZWFrcG9pbnRcIix7fSl9LHRoaXMucmVtb3ZlR3V0dGVyRGVjb3JhdGlvbj1mdW5jdGlvbihlLHQpe3RoaXMuJGRlY29yYXRpb25zW2VdPSh0aGlzLiRkZWNvcmF0aW9uc1tlXXx8XCJcIikucmVwbGFjZShcIiBcIit0LFwiXCIpLHRoaXMuX3NpZ25hbChcImNoYW5nZUJyZWFrcG9pbnRcIix7fSl9LHRoaXMuZ2V0QnJlYWtwb2ludHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYnJlYWtwb2ludHN9LHRoaXMuc2V0QnJlYWtwb2ludHM9ZnVuY3Rpb24oZSl7dGhpcy4kYnJlYWtwb2ludHM9W107Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspdGhpcy4kYnJlYWtwb2ludHNbZVt0XV09XCJhY2VfYnJlYWtwb2ludFwiO3RoaXMuX3NpZ25hbChcImNoYW5nZUJyZWFrcG9pbnRcIix7fSl9LHRoaXMuY2xlYXJCcmVha3BvaW50cz1mdW5jdGlvbigpe3RoaXMuJGJyZWFrcG9pbnRzPVtdLHRoaXMuX3NpZ25hbChcImNoYW5nZUJyZWFrcG9pbnRcIix7fSl9LHRoaXMuc2V0QnJlYWtwb2ludD1mdW5jdGlvbihlLHQpe3Q9PT11bmRlZmluZWQmJih0PVwiYWNlX2JyZWFrcG9pbnRcIiksdD90aGlzLiRicmVha3BvaW50c1tlXT10OmRlbGV0ZSB0aGlzLiRicmVha3BvaW50c1tlXSx0aGlzLl9zaWduYWwoXCJjaGFuZ2VCcmVha3BvaW50XCIse30pfSx0aGlzLmNsZWFyQnJlYWtwb2ludD1mdW5jdGlvbihlKXtkZWxldGUgdGhpcy4kYnJlYWtwb2ludHNbZV0sdGhpcy5fc2lnbmFsKFwiY2hhbmdlQnJlYWtwb2ludFwiLHt9KX0sdGhpcy5hZGRNYXJrZXI9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9dGhpcy4kbWFya2VySWQrKyxzPXtyYW5nZTplLHR5cGU6bnx8XCJsaW5lXCIscmVuZGVyZXI6dHlwZW9mIG49PVwiZnVuY3Rpb25cIj9uOm51bGwsY2xheno6dCxpbkZyb250OiEhcixpZDppfTtyZXR1cm4gcj8odGhpcy4kZnJvbnRNYXJrZXJzW2ldPXMsdGhpcy5fc2lnbmFsKFwiY2hhbmdlRnJvbnRNYXJrZXJcIikpOih0aGlzLiRiYWNrTWFya2Vyc1tpXT1zLHRoaXMuX3NpZ25hbChcImNoYW5nZUJhY2tNYXJrZXJcIikpLGl9LHRoaXMuYWRkRHluYW1pY01hcmtlcj1mdW5jdGlvbihlLHQpe2lmKCFlLnVwZGF0ZSlyZXR1cm47dmFyIG49dGhpcy4kbWFya2VySWQrKztyZXR1cm4gZS5pZD1uLGUuaW5Gcm9udD0hIXQsdD8odGhpcy4kZnJvbnRNYXJrZXJzW25dPWUsdGhpcy5fc2lnbmFsKFwiY2hhbmdlRnJvbnRNYXJrZXJcIikpOih0aGlzLiRiYWNrTWFya2Vyc1tuXT1lLHRoaXMuX3NpZ25hbChcImNoYW5nZUJhY2tNYXJrZXJcIikpLGV9LHRoaXMucmVtb3ZlTWFya2VyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuJGZyb250TWFya2Vyc1tlXXx8dGhpcy4kYmFja01hcmtlcnNbZV07aWYoIXQpcmV0dXJuO3ZhciBuPXQuaW5Gcm9udD90aGlzLiRmcm9udE1hcmtlcnM6dGhpcy4kYmFja01hcmtlcnM7dCYmKGRlbGV0ZSBuW2VdLHRoaXMuX3NpZ25hbCh0LmluRnJvbnQ/XCJjaGFuZ2VGcm9udE1hcmtlclwiOlwiY2hhbmdlQmFja01hcmtlclwiKSl9LHRoaXMuZ2V0TWFya2Vycz1mdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLiRmcm9udE1hcmtlcnM6dGhpcy4kYmFja01hcmtlcnN9LHRoaXMuaGlnaGxpZ2h0PWZ1bmN0aW9uKGUpe2lmKCF0aGlzLiRzZWFyY2hIaWdobGlnaHQpe3ZhciB0PW5ldyBoKG51bGwsXCJhY2Vfc2VsZWN0ZWQtd29yZFwiLFwidGV4dFwiKTt0aGlzLiRzZWFyY2hIaWdobGlnaHQ9dGhpcy5hZGREeW5hbWljTWFya2VyKHQpfXRoaXMuJHNlYXJjaEhpZ2hsaWdodC5zZXRSZWdleHAoZSl9LHRoaXMuaGlnaGxpZ2h0TGluZXM9ZnVuY3Rpb24oZSx0LG4scil7dHlwZW9mIHQhPVwibnVtYmVyXCImJihuPXQsdD1lKSxufHwobj1cImFjZV9zdGVwXCIpO3ZhciBpPW5ldyBmKGUsMCx0LEluZmluaXR5KTtyZXR1cm4gaS5pZD10aGlzLmFkZE1hcmtlcihpLG4sXCJmdWxsTGluZVwiLHIpLGl9LHRoaXMuc2V0QW5ub3RhdGlvbnM9ZnVuY3Rpb24oZSl7dGhpcy4kYW5ub3RhdGlvbnM9ZSx0aGlzLl9zaWduYWwoXCJjaGFuZ2VBbm5vdGF0aW9uXCIse30pfSx0aGlzLmdldEFubm90YXRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFubm90YXRpb25zfHxbXX0sdGhpcy5jbGVhckFubm90YXRpb25zPWZ1bmN0aW9uKCl7dGhpcy5zZXRBbm5vdGF0aW9ucyhbXSl9LHRoaXMuJGRldGVjdE5ld0xpbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tYXRjaCgvXi4qPyhcXHI/XFxuKS9tKTt0P3RoaXMuJGF1dG9OZXdMaW5lPXRbMV06dGhpcy4kYXV0b05ld0xpbmU9XCJcXG5cIn0sdGhpcy5nZXRXb3JkUmFuZ2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmdldExpbmUoZSkscj0hMTt0PjAmJihyPSEhbi5jaGFyQXQodC0xKS5tYXRjaCh0aGlzLnRva2VuUmUpKSxyfHwocj0hIW4uY2hhckF0KHQpLm1hdGNoKHRoaXMudG9rZW5SZSkpO2lmKHIpdmFyIGk9dGhpcy50b2tlblJlO2Vsc2UgaWYoL15cXHMrJC8udGVzdChuLnNsaWNlKHQtMSx0KzEpKSl2YXIgaT0vXFxzLztlbHNlIHZhciBpPXRoaXMubm9uVG9rZW5SZTt2YXIgcz10O2lmKHM+MCl7ZG8gcy0tO3doaWxlKHM+PTAmJm4uY2hhckF0KHMpLm1hdGNoKGkpKTtzKyt9dmFyIG89dDt3aGlsZShvPG4ubGVuZ3RoJiZuLmNoYXJBdChvKS5tYXRjaChpKSlvKys7cmV0dXJuIG5ldyBmKGUscyxlLG8pfSx0aGlzLmdldEFXb3JkUmFuZ2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmdldFdvcmRSYW5nZShlLHQpLHI9dGhpcy5nZXRMaW5lKG4uZW5kLnJvdyk7d2hpbGUoci5jaGFyQXQobi5lbmQuY29sdW1uKS5tYXRjaCgvWyBcXHRdLykpbi5lbmQuY29sdW1uKz0xO3JldHVybiBufSx0aGlzLnNldE5ld0xpbmVNb2RlPWZ1bmN0aW9uKGUpe3RoaXMuZG9jLnNldE5ld0xpbmVNb2RlKGUpfSx0aGlzLmdldE5ld0xpbmVNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9jLmdldE5ld0xpbmVNb2RlKCl9LHRoaXMuc2V0VXNlV29ya2VyPWZ1bmN0aW9uKGUpe3RoaXMuc2V0T3B0aW9uKFwidXNlV29ya2VyXCIsZSl9LHRoaXMuZ2V0VXNlV29ya2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHVzZVdvcmtlcn0sdGhpcy5vblJlbG9hZFRva2VuaXplcj1mdW5jdGlvbihlKXt2YXIgdD1lLmRhdGE7dGhpcy5iZ1Rva2VuaXplci5zdGFydCh0LmZpcnN0KSx0aGlzLl9zaWduYWwoXCJ0b2tlbml6ZXJVcGRhdGVcIixlKX0sdGhpcy4kbW9kZXM9e30sdGhpcy4kbW9kZT1udWxsLHRoaXMuJG1vZGVJZD1udWxsLHRoaXMuc2V0TW9kZT1mdW5jdGlvbihlLHQpe2lmKGUmJnR5cGVvZiBlPT1cIm9iamVjdFwiKXtpZihlLmdldFRva2VuaXplcilyZXR1cm4gdGhpcy4kb25DaGFuZ2VNb2RlKGUpO3ZhciBuPWUscj1uLnBhdGh9ZWxzZSByPWV8fFwiYWNlL21vZGUvdGV4dFwiO3RoaXMuJG1vZGVzW1wiYWNlL21vZGUvdGV4dFwiXXx8KHRoaXMuJG1vZGVzW1wiYWNlL21vZGUvdGV4dFwiXT1uZXcgYSk7aWYodGhpcy4kbW9kZXNbcl0mJiFuKXt0aGlzLiRvbkNoYW5nZU1vZGUodGhpcy4kbW9kZXNbcl0pLHQmJnQoKTtyZXR1cm59dGhpcy4kbW9kZUlkPXIscy5sb2FkTW9kdWxlKFtcIm1vZGVcIixyXSxmdW5jdGlvbihlKXtpZih0aGlzLiRtb2RlSWQhPT1yKXJldHVybiB0JiZ0KCk7dGhpcy4kbW9kZXNbcl0mJiFuP3RoaXMuJG9uQ2hhbmdlTW9kZSh0aGlzLiRtb2Rlc1tyXSk6ZSYmZS5Nb2RlJiYoZT1uZXcgZS5Nb2RlKG4pLG58fCh0aGlzLiRtb2Rlc1tyXT1lLGUuJGlkPXIpLHRoaXMuJG9uQ2hhbmdlTW9kZShlKSksdCYmdCgpfS5iaW5kKHRoaXMpKSx0aGlzLiRtb2RlfHx0aGlzLiRvbkNoYW5nZU1vZGUodGhpcy4kbW9kZXNbXCJhY2UvbW9kZS90ZXh0XCJdLCEwKX0sdGhpcy4kb25DaGFuZ2VNb2RlPWZ1bmN0aW9uKGUsdCl7dHx8KHRoaXMuJG1vZGVJZD1lLiRpZCk7aWYodGhpcy4kbW9kZT09PWUpcmV0dXJuO3RoaXMuJG1vZGU9ZSx0aGlzLiRzdG9wV29ya2VyKCksdGhpcy4kdXNlV29ya2VyJiZ0aGlzLiRzdGFydFdvcmtlcigpO3ZhciBuPWUuZ2V0VG9rZW5pemVyKCk7aWYobi5hZGRFdmVudExpc3RlbmVyIT09dW5kZWZpbmVkKXt2YXIgcj10aGlzLm9uUmVsb2FkVG9rZW5pemVyLmJpbmQodGhpcyk7bi5hZGRFdmVudExpc3RlbmVyKFwidXBkYXRlXCIscil9aWYoIXRoaXMuYmdUb2tlbml6ZXIpe3RoaXMuYmdUb2tlbml6ZXI9bmV3IGMobik7dmFyIGk9dGhpczt0aGlzLmJnVG9rZW5pemVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVcIixmdW5jdGlvbihlKXtpLl9zaWduYWwoXCJ0b2tlbml6ZXJVcGRhdGVcIixlKX0pfWVsc2UgdGhpcy5iZ1Rva2VuaXplci5zZXRUb2tlbml6ZXIobik7dGhpcy5iZ1Rva2VuaXplci5zZXREb2N1bWVudCh0aGlzLmdldERvY3VtZW50KCkpLHRoaXMudG9rZW5SZT1lLnRva2VuUmUsdGhpcy5ub25Ub2tlblJlPWUubm9uVG9rZW5SZSx0fHwoZS5hdHRhY2hUb1Nlc3Npb24mJmUuYXR0YWNoVG9TZXNzaW9uKHRoaXMpLHRoaXMuJG9wdGlvbnMud3JhcE1ldGhvZC5zZXQuY2FsbCh0aGlzLHRoaXMuJHdyYXBNZXRob2QpLHRoaXMuJHNldEZvbGRpbmcoZS5mb2xkaW5nUnVsZXMpLHRoaXMuYmdUb2tlbml6ZXIuc3RhcnQoMCksdGhpcy5fZW1pdChcImNoYW5nZU1vZGVcIikpfSx0aGlzLiRzdG9wV29ya2VyPWZ1bmN0aW9uKCl7dGhpcy4kd29ya2VyJiYodGhpcy4kd29ya2VyLnRlcm1pbmF0ZSgpLHRoaXMuJHdvcmtlcj1udWxsKX0sdGhpcy4kc3RhcnRXb3JrZXI9ZnVuY3Rpb24oKXt0cnl7dGhpcy4kd29ya2VyPXRoaXMuJG1vZGUuY3JlYXRlV29ya2VyKHRoaXMpfWNhdGNoKGUpe3Mud2FybihcIkNvdWxkIG5vdCBsb2FkIHdvcmtlclwiLGUpLHRoaXMuJHdvcmtlcj1udWxsfX0sdGhpcy5nZXRNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJG1vZGV9LHRoaXMuJHNjcm9sbFRvcD0wLHRoaXMuc2V0U2Nyb2xsVG9wPWZ1bmN0aW9uKGUpe2lmKHRoaXMuJHNjcm9sbFRvcD09PWV8fGlzTmFOKGUpKXJldHVybjt0aGlzLiRzY3JvbGxUb3A9ZSx0aGlzLl9zaWduYWwoXCJjaGFuZ2VTY3JvbGxUb3BcIixlKX0sdGhpcy5nZXRTY3JvbGxUb3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2Nyb2xsVG9wfSx0aGlzLiRzY3JvbGxMZWZ0PTAsdGhpcy5zZXRTY3JvbGxMZWZ0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuJHNjcm9sbExlZnQ9PT1lfHxpc05hTihlKSlyZXR1cm47dGhpcy4kc2Nyb2xsTGVmdD1lLHRoaXMuX3NpZ25hbChcImNoYW5nZVNjcm9sbExlZnRcIixlKX0sdGhpcy5nZXRTY3JvbGxMZWZ0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHNjcm9sbExlZnR9LHRoaXMuZ2V0U2NyZWVuV2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kY29tcHV0ZVdpZHRoKCksdGhpcy5saW5lV2lkZ2V0cz9NYXRoLm1heCh0aGlzLmdldExpbmVXaWRnZXRNYXhXaWR0aCgpLHRoaXMuc2NyZWVuV2lkdGgpOnRoaXMuc2NyZWVuV2lkdGh9LHRoaXMuZ2V0TGluZVdpZGdldE1heFdpZHRoPWZ1bmN0aW9uKCl7aWYodGhpcy5saW5lV2lkZ2V0c1dpZHRoIT1udWxsKXJldHVybiB0aGlzLmxpbmVXaWRnZXRzV2lkdGg7dmFyIGU9MDtyZXR1cm4gdGhpcy5saW5lV2lkZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QmJnQuc2NyZWVuV2lkdGg+ZSYmKGU9dC5zY3JlZW5XaWR0aCl9KSx0aGlzLmxpbmVXaWRnZXRXaWR0aD1lfSx0aGlzLiRjb21wdXRlV2lkdGg9ZnVuY3Rpb24oZSl7aWYodGhpcy4kbW9kaWZpZWR8fGUpe3RoaXMuJG1vZGlmaWVkPSExO2lmKHRoaXMuJHVzZVdyYXBNb2RlKXJldHVybiB0aGlzLnNjcmVlbldpZHRoPXRoaXMuJHdyYXBMaW1pdDt2YXIgdD10aGlzLmRvYy5nZXRBbGxMaW5lcygpLG49dGhpcy4kcm93TGVuZ3RoQ2FjaGUscj0wLGk9MCxzPXRoaXMuJGZvbGREYXRhW2ldLG89cz9zLnN0YXJ0LnJvdzpJbmZpbml0eSx1PXQubGVuZ3RoO2Zvcih2YXIgYT0wO2E8dTthKyspe2lmKGE+byl7YT1zLmVuZC5yb3crMTtpZihhPj11KWJyZWFrO3M9dGhpcy4kZm9sZERhdGFbaSsrXSxvPXM/cy5zdGFydC5yb3c6SW5maW5pdHl9blthXT09bnVsbCYmKG5bYV09dGhpcy4kZ2V0U3RyaW5nU2NyZWVuV2lkdGgodFthXSlbMF0pLG5bYV0+ciYmKHI9blthXSl9dGhpcy5zY3JlZW5XaWR0aD1yfX0sdGhpcy5nZXRMaW5lPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRvYy5nZXRMaW5lKGUpfSx0aGlzLmdldExpbmVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZG9jLmdldExpbmVzKGUsdCl9LHRoaXMuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9jLmdldExlbmd0aCgpfSx0aGlzLmdldFRleHRSYW5nZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kb2MuZ2V0VGV4dFJhbmdlKGV8fHRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCkpfSx0aGlzLmluc2VydD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmRvYy5pbnNlcnQoZSx0KX0sdGhpcy5yZW1vdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZG9jLnJlbW92ZShlKX0sdGhpcy5yZW1vdmVGdWxsTGluZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5kb2MucmVtb3ZlRnVsbExpbmVzKGUsdCl9LHRoaXMudW5kb0NoYW5nZXM9ZnVuY3Rpb24oZSx0KXtpZighZS5sZW5ndGgpcmV0dXJuO3RoaXMuJGZyb21VbmRvPSEwO3ZhciBuPW51bGw7Zm9yKHZhciByPWUubGVuZ3RoLTE7ciE9LTE7ci0tKXt2YXIgaT1lW3JdO2kuZ3JvdXA9PVwiZG9jXCI/KHRoaXMuZG9jLnJldmVydERlbHRhcyhpLmRlbHRhcyksbj10aGlzLiRnZXRVbmRvU2VsZWN0aW9uKGkuZGVsdGFzLCEwLG4pKTppLmRlbHRhcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RoaXMuYWRkRm9sZHMoZS5mb2xkcyl9LHRoaXMpfXJldHVybiB0aGlzLiRmcm9tVW5kbz0hMSxuJiZ0aGlzLiR1bmRvU2VsZWN0JiYhdCYmdGhpcy5zZWxlY3Rpb24uc2V0U2VsZWN0aW9uUmFuZ2Uobiksbn0sdGhpcy5yZWRvQ2hhbmdlcz1mdW5jdGlvbihlLHQpe2lmKCFlLmxlbmd0aClyZXR1cm47dGhpcy4kZnJvbVVuZG89ITA7dmFyIG49bnVsbDtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGk9ZVtyXTtpLmdyb3VwPT1cImRvY1wiJiYodGhpcy5kb2MuYXBwbHlEZWx0YXMoaS5kZWx0YXMpLG49dGhpcy4kZ2V0VW5kb1NlbGVjdGlvbihpLmRlbHRhcywhMSxuKSl9cmV0dXJuIHRoaXMuJGZyb21VbmRvPSExLG4mJnRoaXMuJHVuZG9TZWxlY3QmJiF0JiZ0aGlzLnNlbGVjdGlvbi5zZXRTZWxlY3Rpb25SYW5nZShuKSxufSx0aGlzLnNldFVuZG9TZWxlY3Q9ZnVuY3Rpb24oZSl7dGhpcy4kdW5kb1NlbGVjdD1lfSx0aGlzLiRnZXRVbmRvU2VsZWN0aW9uPWZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUpe3JldHVybiB0P2UuYWN0aW9uIT09XCJpbnNlcnRcIjplLmFjdGlvbj09PVwiaW5zZXJ0XCJ9dmFyIGk9ZVswXSxzLG8sdT0hMTtyKGkpPyhzPWYuZnJvbVBvaW50cyhpLnN0YXJ0LGkuZW5kKSx1PSEwKToocz1mLmZyb21Qb2ludHMoaS5zdGFydCxpLnN0YXJ0KSx1PSExKTtmb3IodmFyIGE9MTthPGUubGVuZ3RoO2ErKylpPWVbYV0scihpKT8obz1pLnN0YXJ0LHMuY29tcGFyZShvLnJvdyxvLmNvbHVtbik9PS0xJiZzLnNldFN0YXJ0KG8pLG89aS5lbmQscy5jb21wYXJlKG8ucm93LG8uY29sdW1uKT09MSYmcy5zZXRFbmQobyksdT0hMCk6KG89aS5zdGFydCxzLmNvbXBhcmUoby5yb3csby5jb2x1bW4pPT0tMSYmKHM9Zi5mcm9tUG9pbnRzKGkuc3RhcnQsaS5zdGFydCkpLHU9ITEpO2lmKG4hPW51bGwpe2YuY29tcGFyZVBvaW50cyhuLnN0YXJ0LHMuc3RhcnQpPT09MCYmKG4uc3RhcnQuY29sdW1uKz1zLmVuZC5jb2x1bW4tcy5zdGFydC5jb2x1bW4sbi5lbmQuY29sdW1uKz1zLmVuZC5jb2x1bW4tcy5zdGFydC5jb2x1bW4pO3ZhciBsPW4uY29tcGFyZVJhbmdlKHMpO2w9PTE/cy5zZXRTdGFydChuLnN0YXJ0KTpsPT0tMSYmcy5zZXRFbmQobi5lbmQpfXJldHVybiBzfSx0aGlzLnJlcGxhY2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5kb2MucmVwbGFjZShlLHQpfSx0aGlzLm1vdmVUZXh0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10aGlzLmdldFRleHRSYW5nZShlKSxpPXRoaXMuZ2V0Rm9sZHNJblJhbmdlKGUpLHM9Zi5mcm9tUG9pbnRzKHQsdCk7aWYoIW4pe3RoaXMucmVtb3ZlKGUpO3ZhciBvPWUuc3RhcnQucm93LWUuZW5kLnJvdyx1PW8/LWUuZW5kLmNvbHVtbjplLnN0YXJ0LmNvbHVtbi1lLmVuZC5jb2x1bW47dSYmKHMuc3RhcnQucm93PT1lLmVuZC5yb3cmJnMuc3RhcnQuY29sdW1uPmUuZW5kLmNvbHVtbiYmKHMuc3RhcnQuY29sdW1uKz11KSxzLmVuZC5yb3c9PWUuZW5kLnJvdyYmcy5lbmQuY29sdW1uPmUuZW5kLmNvbHVtbiYmKHMuZW5kLmNvbHVtbis9dSkpLG8mJnMuc3RhcnQucm93Pj1lLmVuZC5yb3cmJihzLnN0YXJ0LnJvdys9byxzLmVuZC5yb3crPW8pfXMuZW5kPXRoaXMuaW5zZXJ0KHMuc3RhcnQscik7aWYoaS5sZW5ndGgpe3ZhciBhPWUuc3RhcnQsbD1zLnN0YXJ0LG89bC5yb3ctYS5yb3csdT1sLmNvbHVtbi1hLmNvbHVtbjt0aGlzLmFkZEZvbGRzKGkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlPWUuY2xvbmUoKSxlLnN0YXJ0LnJvdz09YS5yb3cmJihlLnN0YXJ0LmNvbHVtbis9dSksZS5lbmQucm93PT1hLnJvdyYmKGUuZW5kLmNvbHVtbis9dSksZS5zdGFydC5yb3crPW8sZS5lbmQucm93Kz1vLGV9KSl9cmV0dXJuIHN9LHRoaXMuaW5kZW50Um93cz1mdW5jdGlvbihlLHQsbil7bj1uLnJlcGxhY2UoL1xcdC9nLHRoaXMuZ2V0VGFiU3RyaW5nKCkpO2Zvcih2YXIgcj1lO3I8PXQ7cisrKXRoaXMuZG9jLmluc2VydEluTGluZSh7cm93OnIsY29sdW1uOjB9LG4pfSx0aGlzLm91dGRlbnRSb3dzPWZ1bmN0aW9uKGUpe3ZhciB0PWUuY29sbGFwc2VSb3dzKCksbj1uZXcgZigwLDAsMCwwKSxyPXRoaXMuZ2V0VGFiU2l6ZSgpO2Zvcih2YXIgaT10LnN0YXJ0LnJvdztpPD10LmVuZC5yb3c7KytpKXt2YXIgcz10aGlzLmdldExpbmUoaSk7bi5zdGFydC5yb3c9aSxuLmVuZC5yb3c9aTtmb3IodmFyIG89MDtvPHI7KytvKWlmKHMuY2hhckF0KG8pIT1cIiBcIilicmVhaztvPHImJnMuY2hhckF0KG8pPT1cIlx0XCI/KG4uc3RhcnQuY29sdW1uPW8sbi5lbmQuY29sdW1uPW8rMSk6KG4uc3RhcnQuY29sdW1uPTAsbi5lbmQuY29sdW1uPW8pLHRoaXMucmVtb3ZlKG4pfX0sdGhpcy4kbW92ZUxpbmVzPWZ1bmN0aW9uKGUsdCxuKXtlPXRoaXMuZ2V0Um93Rm9sZFN0YXJ0KGUpLHQ9dGhpcy5nZXRSb3dGb2xkRW5kKHQpO2lmKG48MCl7dmFyIHI9dGhpcy5nZXRSb3dGb2xkU3RhcnQoZStuKTtpZihyPDApcmV0dXJuIDA7dmFyIGk9ci1lfWVsc2UgaWYobj4wKXt2YXIgcj10aGlzLmdldFJvd0ZvbGRFbmQodCtuKTtpZihyPnRoaXMuZG9jLmdldExlbmd0aCgpLTEpcmV0dXJuIDA7dmFyIGk9ci10fWVsc2V7ZT10aGlzLiRjbGlwUm93VG9Eb2N1bWVudChlKSx0PXRoaXMuJGNsaXBSb3dUb0RvY3VtZW50KHQpO3ZhciBpPXQtZSsxfXZhciBzPW5ldyBmKGUsMCx0LE51bWJlci5NQVhfVkFMVUUpLG89dGhpcy5nZXRGb2xkc0luUmFuZ2UocykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlPWUuY2xvbmUoKSxlLnN0YXJ0LnJvdys9aSxlLmVuZC5yb3crPWksZX0pLHU9bj09MD90aGlzLmRvYy5nZXRMaW5lcyhlLHQpOnRoaXMuZG9jLnJlbW92ZUZ1bGxMaW5lcyhlLHQpO3JldHVybiB0aGlzLmRvYy5pbnNlcnRGdWxsTGluZXMoZStpLHUpLG8ubGVuZ3RoJiZ0aGlzLmFkZEZvbGRzKG8pLGl9LHRoaXMubW92ZUxpbmVzVXA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy4kbW92ZUxpbmVzKGUsdCwtMSl9LHRoaXMubW92ZUxpbmVzRG93bj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLiRtb3ZlTGluZXMoZSx0LDEpfSx0aGlzLmR1cGxpY2F0ZUxpbmVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuJG1vdmVMaW5lcyhlLHQsMCl9LHRoaXMuJGNsaXBSb3dUb0RvY3VtZW50PWZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLm1heCgwLE1hdGgubWluKGUsdGhpcy5kb2MuZ2V0TGVuZ3RoKCktMSkpfSx0aGlzLiRjbGlwQ29sdW1uVG9Sb3c9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdDwwPzA6TWF0aC5taW4odGhpcy5kb2MuZ2V0TGluZShlKS5sZW5ndGgsdCl9LHRoaXMuJGNsaXBQb3NpdGlvblRvRG9jdW1lbnQ9ZnVuY3Rpb24oZSx0KXt0PU1hdGgubWF4KDAsdCk7aWYoZTwwKWU9MCx0PTA7ZWxzZXt2YXIgbj10aGlzLmRvYy5nZXRMZW5ndGgoKTtlPj1uPyhlPW4tMSx0PXRoaXMuZG9jLmdldExpbmUobi0xKS5sZW5ndGgpOnQ9TWF0aC5taW4odGhpcy5kb2MuZ2V0TGluZShlKS5sZW5ndGgsdCl9cmV0dXJue3JvdzplLGNvbHVtbjp0fX0sdGhpcy4kY2xpcFJhbmdlVG9Eb2N1bWVudD1mdW5jdGlvbihlKXtlLnN0YXJ0LnJvdzwwPyhlLnN0YXJ0LnJvdz0wLGUuc3RhcnQuY29sdW1uPTApOmUuc3RhcnQuY29sdW1uPXRoaXMuJGNsaXBDb2x1bW5Ub1JvdyhlLnN0YXJ0LnJvdyxlLnN0YXJ0LmNvbHVtbik7dmFyIHQ9dGhpcy5kb2MuZ2V0TGVuZ3RoKCktMTtyZXR1cm4gZS5lbmQucm93PnQ/KGUuZW5kLnJvdz10LGUuZW5kLmNvbHVtbj10aGlzLmRvYy5nZXRMaW5lKHQpLmxlbmd0aCk6ZS5lbmQuY29sdW1uPXRoaXMuJGNsaXBDb2x1bW5Ub1JvdyhlLmVuZC5yb3csZS5lbmQuY29sdW1uKSxlfSx0aGlzLiR3cmFwTGltaXQ9ODAsdGhpcy4kdXNlV3JhcE1vZGU9ITEsdGhpcy4kd3JhcExpbWl0UmFuZ2U9e21pbjpudWxsLG1heDpudWxsfSx0aGlzLnNldFVzZVdyYXBNb2RlPWZ1bmN0aW9uKGUpe2lmKGUhPXRoaXMuJHVzZVdyYXBNb2RlKXt0aGlzLiR1c2VXcmFwTW9kZT1lLHRoaXMuJG1vZGlmaWVkPSEwLHRoaXMuJHJlc2V0Um93Q2FjaGUoMCk7aWYoZSl7dmFyIHQ9dGhpcy5nZXRMZW5ndGgoKTt0aGlzLiR3cmFwRGF0YT1BcnJheSh0KSx0aGlzLiR1cGRhdGVXcmFwRGF0YSgwLHQtMSl9dGhpcy5fc2lnbmFsKFwiY2hhbmdlV3JhcE1vZGVcIil9fSx0aGlzLmdldFVzZVdyYXBNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHVzZVdyYXBNb2RlfSx0aGlzLnNldFdyYXBMaW1pdFJhbmdlPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy4kd3JhcExpbWl0UmFuZ2UubWluIT09ZXx8dGhpcy4kd3JhcExpbWl0UmFuZ2UubWF4IT09dCl0aGlzLiR3cmFwTGltaXRSYW5nZT17bWluOmUsbWF4OnR9LHRoaXMuJG1vZGlmaWVkPSEwLHRoaXMuJHVzZVdyYXBNb2RlJiZ0aGlzLl9zaWduYWwoXCJjaGFuZ2VXcmFwTW9kZVwiKX0sdGhpcy5hZGp1c3RXcmFwTGltaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLiR3cmFwTGltaXRSYW5nZTtuLm1heDwwJiYobj17bWluOnQsbWF4OnR9KTt2YXIgcj10aGlzLiRjb25zdHJhaW5XcmFwTGltaXQoZSxuLm1pbixuLm1heCk7cmV0dXJuIHIhPXRoaXMuJHdyYXBMaW1pdCYmcj4xPyh0aGlzLiR3cmFwTGltaXQ9cix0aGlzLiRtb2RpZmllZD0hMCx0aGlzLiR1c2VXcmFwTW9kZSYmKHRoaXMuJHVwZGF0ZVdyYXBEYXRhKDAsdGhpcy5nZXRMZW5ndGgoKS0xKSx0aGlzLiRyZXNldFJvd0NhY2hlKDApLHRoaXMuX3NpZ25hbChcImNoYW5nZVdyYXBMaW1pdFwiKSksITApOiExfSx0aGlzLiRjb25zdHJhaW5XcmFwTGltaXQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0JiYoZT1NYXRoLm1heCh0LGUpKSxuJiYoZT1NYXRoLm1pbihuLGUpKSxlfSx0aGlzLmdldFdyYXBMaW1pdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR3cmFwTGltaXR9LHRoaXMuc2V0V3JhcExpbWl0PWZ1bmN0aW9uKGUpe3RoaXMuc2V0V3JhcExpbWl0UmFuZ2UoZSxlKX0sdGhpcy5nZXRXcmFwTGltaXRSYW5nZT1mdW5jdGlvbigpe3JldHVybnttaW46dGhpcy4kd3JhcExpbWl0UmFuZ2UubWluLG1heDp0aGlzLiR3cmFwTGltaXRSYW5nZS5tYXh9fSx0aGlzLiR1cGRhdGVJbnRlcm5hbERhdGFPbkNoYW5nZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLiR1c2VXcmFwTW9kZSxuPWUuYWN0aW9uLHI9ZS5zdGFydCxpPWUuZW5kLHM9ci5yb3csbz1pLnJvdyx1PW8tcyxhPW51bGw7dGhpcy4kdXBkYXRpbmc9ITA7aWYodSE9MClpZihuPT09XCJyZW1vdmVcIil7dGhpc1t0P1wiJHdyYXBEYXRhXCI6XCIkcm93TGVuZ3RoQ2FjaGVcIl0uc3BsaWNlKHMsdSk7dmFyIGY9dGhpcy4kZm9sZERhdGE7YT10aGlzLmdldEZvbGRzSW5SYW5nZShlKSx0aGlzLnJlbW92ZUZvbGRzKGEpO3ZhciBsPXRoaXMuZ2V0Rm9sZExpbmUoaS5yb3cpLGM9MDtpZihsKXtsLmFkZFJlbW92ZUNoYXJzKGkucm93LGkuY29sdW1uLHIuY29sdW1uLWkuY29sdW1uKSxsLnNoaWZ0Um93KC11KTt2YXIgaD10aGlzLmdldEZvbGRMaW5lKHMpO2gmJmghPT1sJiYoaC5tZXJnZShsKSxsPWgpLGM9Zi5pbmRleE9mKGwpKzF9Zm9yKGM7YzxmLmxlbmd0aDtjKyspe3ZhciBsPWZbY107bC5zdGFydC5yb3c+PWkucm93JiZsLnNoaWZ0Um93KC11KX1vPXN9ZWxzZXt2YXIgcD1BcnJheSh1KTtwLnVuc2hpZnQocywwKTt2YXIgZD10P3RoaXMuJHdyYXBEYXRhOnRoaXMuJHJvd0xlbmd0aENhY2hlO2Quc3BsaWNlLmFwcGx5KGQscCk7dmFyIGY9dGhpcy4kZm9sZERhdGEsbD10aGlzLmdldEZvbGRMaW5lKHMpLGM9MDtpZihsKXt2YXIgdj1sLnJhbmdlLmNvbXBhcmVJbnNpZGUoci5yb3csci5jb2x1bW4pO3Y9PTA/KGw9bC5zcGxpdChyLnJvdyxyLmNvbHVtbiksbCYmKGwuc2hpZnRSb3codSksbC5hZGRSZW1vdmVDaGFycyhvLDAsaS5jb2x1bW4tci5jb2x1bW4pKSk6dj09LTEmJihsLmFkZFJlbW92ZUNoYXJzKHMsMCxpLmNvbHVtbi1yLmNvbHVtbiksbC5zaGlmdFJvdyh1KSksYz1mLmluZGV4T2YobCkrMX1mb3IoYztjPGYubGVuZ3RoO2MrKyl7dmFyIGw9ZltjXTtsLnN0YXJ0LnJvdz49cyYmbC5zaGlmdFJvdyh1KX19ZWxzZXt1PU1hdGguYWJzKGUuc3RhcnQuY29sdW1uLWUuZW5kLmNvbHVtbiksbj09PVwicmVtb3ZlXCImJihhPXRoaXMuZ2V0Rm9sZHNJblJhbmdlKGUpLHRoaXMucmVtb3ZlRm9sZHMoYSksdT0tdSk7dmFyIGw9dGhpcy5nZXRGb2xkTGluZShzKTtsJiZsLmFkZFJlbW92ZUNoYXJzKHMsci5jb2x1bW4sdSl9cmV0dXJuIHQmJnRoaXMuJHdyYXBEYXRhLmxlbmd0aCE9dGhpcy5kb2MuZ2V0TGVuZ3RoKCkmJmNvbnNvbGUuZXJyb3IoXCJkb2MuZ2V0TGVuZ3RoKCkgYW5kICR3cmFwRGF0YS5sZW5ndGggaGF2ZSB0byBiZSB0aGUgc2FtZSFcIiksdGhpcy4kdXBkYXRpbmc9ITEsdD90aGlzLiR1cGRhdGVXcmFwRGF0YShzLG8pOnRoaXMuJHVwZGF0ZVJvd0xlbmd0aENhY2hlKHMsbyksYX0sdGhpcy4kdXBkYXRlUm93TGVuZ3RoQ2FjaGU9ZnVuY3Rpb24oZSx0LG4pe3RoaXMuJHJvd0xlbmd0aENhY2hlW2VdPW51bGwsdGhpcy4kcm93TGVuZ3RoQ2FjaGVbdF09bnVsbH0sdGhpcy4kdXBkYXRlV3JhcERhdGE9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmRvYy5nZXRBbGxMaW5lcygpLGk9dGhpcy5nZXRUYWJTaXplKCkscz10aGlzLiR3cmFwRGF0YSxvPXRoaXMuJHdyYXBMaW1pdCxhLGYsbD1lO3Q9TWF0aC5taW4odCxyLmxlbmd0aC0xKTt3aGlsZShsPD10KWY9dGhpcy5nZXRGb2xkTGluZShsLGYpLGY/KGE9W10sZi53YWxrKGZ1bmN0aW9uKGUsdCxpLHMpe3ZhciBvO2lmKGUhPW51bGwpe289dGhpcy4kZ2V0RGlzcGxheVRva2VucyhlLGEubGVuZ3RoKSxvWzBdPW47Zm9yKHZhciBmPTE7ZjxvLmxlbmd0aDtmKyspb1tmXT11fWVsc2Ugbz10aGlzLiRnZXREaXNwbGF5VG9rZW5zKHJbdF0uc3Vic3RyaW5nKHMsaSksYS5sZW5ndGgpO2E9YS5jb25jYXQobyl9LmJpbmQodGhpcyksZi5lbmQucm93LHJbZi5lbmQucm93XS5sZW5ndGgrMSksc1tmLnN0YXJ0LnJvd109dGhpcy4kY29tcHV0ZVdyYXBTcGxpdHMoYSxvLGkpLGw9Zi5lbmQucm93KzEpOihhPXRoaXMuJGdldERpc3BsYXlUb2tlbnMocltsXSksc1tsXT10aGlzLiRjb21wdXRlV3JhcFNwbGl0cyhhLG8saSksbCsrKX07dmFyIGU9MSx0PTIsbj0zLHU9NCxsPTkscD0xMCxkPTExLHY9MTI7dGhpcy4kY29tcHV0ZVdyYXBTcGxpdHM9ZnVuY3Rpb24oZSxyLGkpe2Z1bmN0aW9uIGcoKXt2YXIgdD0wO2lmKG09PT0wKXJldHVybiB0O2lmKGgpZm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07aWYocj09cCl0Kz0xO2Vsc2V7aWYociE9ZCl7aWYocj09diljb250aW51ZTticmVha310Kz1pfX1yZXR1cm4gYyYmaCE9PSExJiYodCs9aSksTWF0aC5taW4odCxtKX1mdW5jdGlvbiB5KHQpe3ZhciBuPWUuc2xpY2UoYSx0KSxyPW4ubGVuZ3RoO24uam9pbihcIlwiKS5yZXBsYWNlKC8xMi9nLGZ1bmN0aW9uKCl7ci09MX0pLnJlcGxhY2UoLzIvZyxmdW5jdGlvbigpe3ItPTF9KSxzLmxlbmd0aHx8KGI9ZygpLHMuaW5kZW50PWIpLGYrPXIscy5wdXNoKGYpLGE9dH1pZihlLmxlbmd0aD09MClyZXR1cm5bXTt2YXIgcz1bXSxvPWUubGVuZ3RoLGE9MCxmPTAsYz10aGlzLiR3cmFwQXNDb2RlLGg9dGhpcy4kaW5kZW50ZWRTb2Z0V3JhcCxtPXI8PU1hdGgubWF4KDIqaSw4KXx8aD09PSExPzA6TWF0aC5mbG9vcihyLzIpLGI9MDt3aGlsZShvLWE+ci1iKXt2YXIgdz1hK3ItYjtpZihlW3ctMV0+PXAmJmVbd10+PXApe3kodyk7Y29udGludWV9aWYoZVt3XT09bnx8ZVt3XT09dSl7Zm9yKHc7dyE9YS0xO3ctLSlpZihlW3ddPT1uKWJyZWFrO2lmKHc+YSl7eSh3KTtjb250aW51ZX13PWErcjtmb3Iodzt3PGUubGVuZ3RoO3crKylpZihlW3ddIT11KWJyZWFrO2lmKHc9PWUubGVuZ3RoKWJyZWFrO3kodyk7Y29udGludWV9dmFyIEU9TWF0aC5tYXgody0oci0ocj4+MikpLGEtMSk7d2hpbGUodz5FJiZlW3ddPG4pdy0tO2lmKGMpe3doaWxlKHc+RSYmZVt3XTxuKXctLTt3aGlsZSh3PkUmJmVbd109PWwpdy0tfWVsc2Ugd2hpbGUodz5FJiZlW3ddPHApdy0tO2lmKHc+RSl7eSgrK3cpO2NvbnRpbnVlfXc9YStyLGVbd109PXQmJnctLSx5KHctYil9cmV0dXJuIHN9LHRoaXMuJGdldERpc3BsYXlUb2tlbnM9ZnVuY3Rpb24obixyKXt2YXIgaT1bXSxzO3I9cnx8MDtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl7dmFyIHU9bi5jaGFyQ29kZUF0KG8pO2lmKHU9PTkpe3M9dGhpcy5nZXRTY3JlZW5UYWJTaXplKGkubGVuZ3RoK3IpLGkucHVzaChkKTtmb3IodmFyIGE9MTthPHM7YSsrKWkucHVzaCh2KX1lbHNlIHU9PTMyP2kucHVzaChwKTp1PjM5JiZ1PDQ4fHx1PjU3JiZ1PDY0P2kucHVzaChsKTp1Pj00MzUyJiZtKHUpP2kucHVzaChlLHQpOmkucHVzaChlKX1yZXR1cm4gaX0sdGhpcy4kZ2V0U3RyaW5nU2NyZWVuV2lkdGg9ZnVuY3Rpb24oZSx0LG4pe2lmKHQ9PTApcmV0dXJuWzAsMF07dD09bnVsbCYmKHQ9SW5maW5pdHkpLG49bnx8MDt2YXIgcixpO2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspe3I9ZS5jaGFyQ29kZUF0KGkpLHI9PTk/bis9dGhpcy5nZXRTY3JlZW5UYWJTaXplKG4pOnI+PTQzNTImJm0ocik/bis9MjpuKz0xO2lmKG4+dClicmVha31yZXR1cm5bbixpXX0sdGhpcy5saW5lV2lkZ2V0cz1udWxsLHRoaXMuZ2V0Um93TGVuZ3RoPWZ1bmN0aW9uKGUpe2lmKHRoaXMubGluZVdpZGdldHMpdmFyIHQ9dGhpcy5saW5lV2lkZ2V0c1tlXSYmdGhpcy5saW5lV2lkZ2V0c1tlXS5yb3dDb3VudHx8MDtlbHNlIHQ9MDtyZXR1cm4hdGhpcy4kdXNlV3JhcE1vZGV8fCF0aGlzLiR3cmFwRGF0YVtlXT8xK3Q6dGhpcy4kd3JhcERhdGFbZV0ubGVuZ3RoKzErdH0sdGhpcy5nZXRSb3dMaW5lQ291bnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIXRoaXMuJHVzZVdyYXBNb2RlfHwhdGhpcy4kd3JhcERhdGFbZV0/MTp0aGlzLiR3cmFwRGF0YVtlXS5sZW5ndGgrMX0sdGhpcy5nZXRSb3dXcmFwSW5kZW50PWZ1bmN0aW9uKGUpe2lmKHRoaXMuJHVzZVdyYXBNb2RlKXt2YXIgdD10aGlzLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbihlLE51bWJlci5NQVhfVkFMVUUpLG49dGhpcy4kd3JhcERhdGFbdC5yb3ddO3JldHVybiBuLmxlbmd0aCYmblswXTx0LmNvbHVtbj9uLmluZGVudDowfXJldHVybiAwfSx0aGlzLmdldFNjcmVlbkxhc3RSb3dDb2x1bW49ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zY3JlZW5Ub0RvY3VtZW50UG9zaXRpb24oZSxOdW1iZXIuTUFYX1ZBTFVFKTtyZXR1cm4gdGhpcy5kb2N1bWVudFRvU2NyZWVuQ29sdW1uKHQucm93LHQuY29sdW1uKX0sdGhpcy5nZXREb2N1bWVudExhc3RSb3dDb2x1bW49ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmRvY3VtZW50VG9TY3JlZW5Sb3coZSx0KTtyZXR1cm4gdGhpcy5nZXRTY3JlZW5MYXN0Um93Q29sdW1uKG4pfSx0aGlzLmdldERvY3VtZW50TGFzdFJvd0NvbHVtblBvc2l0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5kb2N1bWVudFRvU2NyZWVuUm93KGUsdCk7cmV0dXJuIHRoaXMuc2NyZWVuVG9Eb2N1bWVudFBvc2l0aW9uKG4sTnVtYmVyLk1BWF9WQUxVRS8xMCl9LHRoaXMuZ2V0Um93U3BsaXREYXRhPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLiR1c2VXcmFwTW9kZT90aGlzLiR3cmFwRGF0YVtlXTp1bmRlZmluZWR9LHRoaXMuZ2V0U2NyZWVuVGFiU2l6ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy4kdGFiU2l6ZS1lJXRoaXMuJHRhYlNpemV9LHRoaXMuc2NyZWVuVG9Eb2N1bWVudFJvdz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbihlLHQpLnJvd30sdGhpcy5zY3JlZW5Ub0RvY3VtZW50Q29sdW1uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc2NyZWVuVG9Eb2N1bWVudFBvc2l0aW9uKGUsdCkuY29sdW1ufSx0aGlzLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbj1mdW5jdGlvbihlLHQpe2lmKGU8MClyZXR1cm57cm93OjAsY29sdW1uOjB9O3ZhciBuLHI9MCxpPTAscyxvPTAsdT0wLGE9dGhpcy4kc2NyZWVuUm93Q2FjaGUsZj10aGlzLiRnZXRSb3dDYWNoZUluZGV4KGEsZSksbD1hLmxlbmd0aDtpZihsJiZmPj0wKXZhciBvPWFbZl0scj10aGlzLiRkb2NSb3dDYWNoZVtmXSxjPWU+YVtsLTFdO2Vsc2UgdmFyIGM9IWw7dmFyIGg9dGhpcy5nZXRMZW5ndGgoKS0xLHA9dGhpcy5nZXROZXh0Rm9sZExpbmUociksZD1wP3Auc3RhcnQucm93OkluZmluaXR5O3doaWxlKG88PWUpe3U9dGhpcy5nZXRSb3dMZW5ndGgocik7aWYobyt1PmV8fHI+PWgpYnJlYWs7bys9dSxyKysscj5kJiYocj1wLmVuZC5yb3crMSxwPXRoaXMuZ2V0TmV4dEZvbGRMaW5lKHIscCksZD1wP3Auc3RhcnQucm93OkluZmluaXR5KSxjJiYodGhpcy4kZG9jUm93Q2FjaGUucHVzaChyKSx0aGlzLiRzY3JlZW5Sb3dDYWNoZS5wdXNoKG8pKX1pZihwJiZwLnN0YXJ0LnJvdzw9ciluPXRoaXMuZ2V0Rm9sZERpc3BsYXlMaW5lKHApLHI9cC5zdGFydC5yb3c7ZWxzZXtpZihvK3U8PWV8fHI+aClyZXR1cm57cm93OmgsY29sdW1uOnRoaXMuZ2V0TGluZShoKS5sZW5ndGh9O249dGhpcy5nZXRMaW5lKHIpLHA9bnVsbH12YXIgdj0wO2lmKHRoaXMuJHVzZVdyYXBNb2RlKXt2YXIgbT10aGlzLiR3cmFwRGF0YVtyXTtpZihtKXt2YXIgZz1NYXRoLmZsb29yKGUtbyk7cz1tW2ddLGc+MCYmbS5sZW5ndGgmJih2PW0uaW5kZW50LGk9bVtnLTFdfHxtW20ubGVuZ3RoLTFdLG49bi5zdWJzdHJpbmcoaSkpfX1yZXR1cm4gaSs9dGhpcy4kZ2V0U3RyaW5nU2NyZWVuV2lkdGgobix0LXYpWzFdLHRoaXMuJHVzZVdyYXBNb2RlJiZpPj1zJiYoaT1zLTEpLHA/cC5pZHhUb1Bvc2l0aW9uKGkpOntyb3c6cixjb2x1bW46aX19LHRoaXMuZG9jdW1lbnRUb1NjcmVlblBvc2l0aW9uPWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQ9PVwidW5kZWZpbmVkXCIpdmFyIG49dGhpcy4kY2xpcFBvc2l0aW9uVG9Eb2N1bWVudChlLnJvdyxlLmNvbHVtbik7ZWxzZSBuPXRoaXMuJGNsaXBQb3NpdGlvblRvRG9jdW1lbnQoZSx0KTtlPW4ucm93LHQ9bi5jb2x1bW47dmFyIHI9MCxpPW51bGwscz1udWxsO3M9dGhpcy5nZXRGb2xkQXQoZSx0LDEpLHMmJihlPXMuc3RhcnQucm93LHQ9cy5zdGFydC5jb2x1bW4pO3ZhciBvLHU9MCxhPXRoaXMuJGRvY1Jvd0NhY2hlLGY9dGhpcy4kZ2V0Um93Q2FjaGVJbmRleChhLGUpLGw9YS5sZW5ndGg7aWYobCYmZj49MCl2YXIgdT1hW2ZdLHI9dGhpcy4kc2NyZWVuUm93Q2FjaGVbZl0sYz1lPmFbbC0xXTtlbHNlIHZhciBjPSFsO3ZhciBoPXRoaXMuZ2V0TmV4dEZvbGRMaW5lKHUpLHA9aD9oLnN0YXJ0LnJvdzpJbmZpbml0eTt3aGlsZSh1PGUpe2lmKHU+PXApe289aC5lbmQucm93KzE7aWYobz5lKWJyZWFrO2g9dGhpcy5nZXROZXh0Rm9sZExpbmUobyxoKSxwPWg/aC5zdGFydC5yb3c6SW5maW5pdHl9ZWxzZSBvPXUrMTtyKz10aGlzLmdldFJvd0xlbmd0aCh1KSx1PW8sYyYmKHRoaXMuJGRvY1Jvd0NhY2hlLnB1c2godSksdGhpcy4kc2NyZWVuUm93Q2FjaGUucHVzaChyKSl9dmFyIGQ9XCJcIjtoJiZ1Pj1wPyhkPXRoaXMuZ2V0Rm9sZERpc3BsYXlMaW5lKGgsZSx0KSxpPWguc3RhcnQucm93KTooZD10aGlzLmdldExpbmUoZSkuc3Vic3RyaW5nKDAsdCksaT1lKTt2YXIgdj0wO2lmKHRoaXMuJHVzZVdyYXBNb2RlKXt2YXIgbT10aGlzLiR3cmFwRGF0YVtpXTtpZihtKXt2YXIgZz0wO3doaWxlKGQubGVuZ3RoPj1tW2ddKXIrKyxnKys7ZD1kLnN1YnN0cmluZyhtW2ctMV18fDAsZC5sZW5ndGgpLHY9Zz4wP20uaW5kZW50OjB9fXJldHVybntyb3c6cixjb2x1bW46dit0aGlzLiRnZXRTdHJpbmdTY3JlZW5XaWR0aChkKVswXX19LHRoaXMuZG9jdW1lbnRUb1NjcmVlbkNvbHVtbj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbihlLHQpLmNvbHVtbn0sdGhpcy5kb2N1bWVudFRvU2NyZWVuUm93PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZG9jdW1lbnRUb1NjcmVlblBvc2l0aW9uKGUsdCkucm93fSx0aGlzLmdldFNjcmVlbkxlbmd0aD1mdW5jdGlvbigpe3ZhciBlPTAsdD1udWxsO2lmKCF0aGlzLiR1c2VXcmFwTW9kZSl7ZT10aGlzLmdldExlbmd0aCgpO3ZhciBuPXRoaXMuJGZvbGREYXRhO2Zvcih2YXIgcj0wO3I8bi5sZW5ndGg7cisrKXQ9bltyXSxlLT10LmVuZC5yb3ctdC5zdGFydC5yb3d9ZWxzZXt2YXIgaT10aGlzLiR3cmFwRGF0YS5sZW5ndGgscz0wLHI9MCx0PXRoaXMuJGZvbGREYXRhW3IrK10sbz10P3Quc3RhcnQucm93OkluZmluaXR5O3doaWxlKHM8aSl7dmFyIHU9dGhpcy4kd3JhcERhdGFbc107ZSs9dT91Lmxlbmd0aCsxOjEscysrLHM+byYmKHM9dC5lbmQucm93KzEsdD10aGlzLiRmb2xkRGF0YVtyKytdLG89dD90LnN0YXJ0LnJvdzpJbmZpbml0eSl9fXJldHVybiB0aGlzLmxpbmVXaWRnZXRzJiYoZSs9dGhpcy4kZ2V0V2lkZ2V0U2NyZWVuTGVuZ3RoKCkpLGV9LHRoaXMuJHNldEZvbnRNZXRyaWNzPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLiRlbmFibGVWYXJDaGFyKXJldHVybjt0aGlzLiRnZXRTdHJpbmdTY3JlZW5XaWR0aD1mdW5jdGlvbih0LG4scil7aWYobj09PTApcmV0dXJuWzAsMF07bnx8KG49SW5maW5pdHkpLHI9cnx8MDt2YXIgaSxzO2ZvcihzPTA7czx0Lmxlbmd0aDtzKyspe2k9dC5jaGFyQXQocyksaT09PVwiXHRcIj9yKz10aGlzLmdldFNjcmVlblRhYlNpemUocik6cis9ZS5nZXRDaGFyYWN0ZXJXaWR0aChpKTtpZihyPm4pYnJlYWt9cmV0dXJuW3Isc119fSx0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmJnVG9rZW5pemVyJiYodGhpcy5iZ1Rva2VuaXplci5zZXREb2N1bWVudChudWxsKSx0aGlzLmJnVG9rZW5pemVyPW51bGwpLHRoaXMuJHN0b3BXb3JrZXIoKX19KS5jYWxsKHAucHJvdG90eXBlKSxlKFwiLi9lZGl0X3Nlc3Npb24vZm9sZGluZ1wiKS5Gb2xkaW5nLmNhbGwocC5wcm90b3R5cGUpLGUoXCIuL2VkaXRfc2Vzc2lvbi9icmFja2V0X21hdGNoXCIpLkJyYWNrZXRNYXRjaC5jYWxsKHAucHJvdG90eXBlKSxzLmRlZmluZU9wdGlvbnMocC5wcm90b3R5cGUsXCJzZXNzaW9uXCIse3dyYXA6e3NldDpmdW5jdGlvbihlKXshZXx8ZT09XCJvZmZcIj9lPSExOmU9PVwiZnJlZVwiP2U9ITA6ZT09XCJwcmludE1hcmdpblwiP2U9LTE6dHlwZW9mIGU9PVwic3RyaW5nXCImJihlPXBhcnNlSW50KGUsMTApfHwhMSk7aWYodGhpcy4kd3JhcD09ZSlyZXR1cm47dGhpcy4kd3JhcD1lO2lmKCFlKXRoaXMuc2V0VXNlV3JhcE1vZGUoITEpO2Vsc2V7dmFyIHQ9dHlwZW9mIGU9PVwibnVtYmVyXCI/ZTpudWxsO3RoaXMuc2V0V3JhcExpbWl0UmFuZ2UodCx0KSx0aGlzLnNldFVzZVdyYXBNb2RlKCEwKX19LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFVzZVdyYXBNb2RlKCk/dGhpcy4kd3JhcD09LTE/XCJwcmludE1hcmdpblwiOnRoaXMuZ2V0V3JhcExpbWl0UmFuZ2UoKS5taW4/dGhpcy4kd3JhcDpcImZyZWVcIjpcIm9mZlwifSxoYW5kbGVzU2V0OiEwfSx3cmFwTWV0aG9kOntzZXQ6ZnVuY3Rpb24oZSl7ZT1lPT1cImF1dG9cIj90aGlzLiRtb2RlLnR5cGUhPVwidGV4dFwiOmUhPVwidGV4dFwiLGUhPXRoaXMuJHdyYXBBc0NvZGUmJih0aGlzLiR3cmFwQXNDb2RlPWUsdGhpcy4kdXNlV3JhcE1vZGUmJih0aGlzLiRtb2RpZmllZD0hMCx0aGlzLiRyZXNldFJvd0NhY2hlKDApLHRoaXMuJHVwZGF0ZVdyYXBEYXRhKDAsdGhpcy5nZXRMZW5ndGgoKS0xKSkpfSxpbml0aWFsVmFsdWU6XCJhdXRvXCJ9LGluZGVudGVkU29mdFdyYXA6e2luaXRpYWxWYWx1ZTohMH0sZmlyc3RMaW5lTnVtYmVyOntzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9zaWduYWwoXCJjaGFuZ2VCcmVha3BvaW50XCIpfSxpbml0aWFsVmFsdWU6MX0sdXNlV29ya2VyOntzZXQ6ZnVuY3Rpb24oZSl7dGhpcy4kdXNlV29ya2VyPWUsdGhpcy4kc3RvcFdvcmtlcigpLGUmJnRoaXMuJHN0YXJ0V29ya2VyKCl9LGluaXRpYWxWYWx1ZTohMH0sdXNlU29mdFRhYnM6e2luaXRpYWxWYWx1ZTohMH0sdGFiU2l6ZTp7c2V0OmZ1bmN0aW9uKGUpe2lmKGlzTmFOKGUpfHx0aGlzLiR0YWJTaXplPT09ZSlyZXR1cm47dGhpcy4kbW9kaWZpZWQ9ITAsdGhpcy4kcm93TGVuZ3RoQ2FjaGU9W10sdGhpcy4kdGFiU2l6ZT1lLHRoaXMuX3NpZ25hbChcImNoYW5nZVRhYlNpemVcIil9LGluaXRpYWxWYWx1ZTo0LGhhbmRsZXNTZXQ6ITB9LG92ZXJ3cml0ZTp7c2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3NpZ25hbChcImNoYW5nZU92ZXJ3cml0ZVwiKX0saW5pdGlhbFZhbHVlOiExfSxuZXdMaW5lTW9kZTp7c2V0OmZ1bmN0aW9uKGUpe3RoaXMuZG9jLnNldE5ld0xpbmVNb2RlKGUpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb2MuZ2V0TmV3TGluZU1vZGUoKX0saGFuZGxlc1NldDohMH0sbW9kZTp7c2V0OmZ1bmN0aW9uKGUpe3RoaXMuc2V0TW9kZShlKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJG1vZGVJZH19fSksdC5FZGl0U2Vzc2lvbj1wfSksZGVmaW5lKFwiYWNlL3NlYXJjaFwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9sYW5nXCIsXCJhY2UvbGliL29vcFwiLFwiYWNlL3JhbmdlXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi9saWIvbGFuZ1wiKSxpPWUoXCIuL2xpYi9vb3BcIikscz1lKFwiLi9yYW5nZVwiKS5SYW5nZSxvPWZ1bmN0aW9uKCl7dGhpcy4kb3B0aW9ucz17fX07KGZ1bmN0aW9uKCl7dGhpcy5zZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGkubWl4aW4odGhpcy4kb3B0aW9ucyxlKSx0aGlzfSx0aGlzLmdldE9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gci5jb3B5T2JqZWN0KHRoaXMuJG9wdGlvbnMpfSx0aGlzLnNldE9wdGlvbnM9ZnVuY3Rpb24oZSl7dGhpcy4kb3B0aW9ucz1lfSx0aGlzLmZpbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy4kb3B0aW9ucyxuPXRoaXMuJG1hdGNoSXRlcmF0b3IoZSx0KTtpZighbilyZXR1cm4hMTt2YXIgcj1udWxsO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24oZSxuLGkpe2lmKCFlLnN0YXJ0KXt2YXIgbz1lLm9mZnNldCsoaXx8MCk7cj1uZXcgcyhuLG8sbixvK2UubGVuZ3RoKTtpZighZS5sZW5ndGgmJnQuc3RhcnQmJnQuc3RhcnQuc3RhcnQmJnQuc2tpcEN1cnJlbnQhPTAmJnIuaXNFcXVhbCh0LnN0YXJ0KSlyZXR1cm4gcj1udWxsLCExfWVsc2Ugcj1lO3JldHVybiEwfSkscn0sdGhpcy5maW5kQWxsPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuJG9wdGlvbnM7aWYoIXQubmVlZGxlKXJldHVybltdO3RoaXMuJGFzc2VtYmxlUmVnRXhwKHQpO3ZhciBuPXQucmFuZ2UsaT1uP2UuZ2V0TGluZXMobi5zdGFydC5yb3csbi5lbmQucm93KTplLmRvYy5nZXRBbGxMaW5lcygpLG89W10sdT10LnJlO2lmKHQuJGlzTXVsdGlMaW5lKXt2YXIgYT11Lmxlbmd0aCxmPWkubGVuZ3RoLWEsbDtlOmZvcih2YXIgYz11Lm9mZnNldHx8MDtjPD1mO2MrKyl7Zm9yKHZhciBoPTA7aDxhO2grKylpZihpW2MraF0uc2VhcmNoKHVbaF0pPT0tMSljb250aW51ZSBlO3ZhciBwPWlbY10sZD1pW2MrYS0xXSx2PXAubGVuZ3RoLXAubWF0Y2godVswXSlbMF0ubGVuZ3RoLG09ZC5tYXRjaCh1W2EtMV0pWzBdLmxlbmd0aDtpZihsJiZsLmVuZC5yb3c9PT1jJiZsLmVuZC5jb2x1bW4+diljb250aW51ZTtvLnB1c2gobD1uZXcgcyhjLHYsYythLTEsbSkpLGE+MiYmKGM9YythLTIpfX1lbHNlIGZvcih2YXIgZz0wO2c8aS5sZW5ndGg7ZysrKXt2YXIgeT1yLmdldE1hdGNoT2Zmc2V0cyhpW2ddLHUpO2Zvcih2YXIgaD0wO2g8eS5sZW5ndGg7aCsrKXt2YXIgYj15W2hdO28ucHVzaChuZXcgcyhnLGIub2Zmc2V0LGcsYi5vZmZzZXQrYi5sZW5ndGgpKX19aWYobil7dmFyIHc9bi5zdGFydC5jb2x1bW4sRT1uLnN0YXJ0LmNvbHVtbixnPTAsaD1vLmxlbmd0aC0xO3doaWxlKGc8aCYmb1tnXS5zdGFydC5jb2x1bW48dyYmb1tnXS5zdGFydC5yb3c9PW4uc3RhcnQucm93KWcrKzt3aGlsZShnPGgmJm9baF0uZW5kLmNvbHVtbj5FJiZvW2hdLmVuZC5yb3c9PW4uZW5kLnJvdyloLS07bz1vLnNsaWNlKGcsaCsxKTtmb3IoZz0wLGg9by5sZW5ndGg7ZzxoO2crKylvW2ddLnN0YXJ0LnJvdys9bi5zdGFydC5yb3csb1tnXS5lbmQucm93Kz1uLnN0YXJ0LnJvd31yZXR1cm4gb30sdGhpcy5yZXBsYWNlPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy4kb3B0aW9ucyxyPXRoaXMuJGFzc2VtYmxlUmVnRXhwKG4pO2lmKG4uJGlzTXVsdGlMaW5lKXJldHVybiB0O2lmKCFyKXJldHVybjt2YXIgaT1yLmV4ZWMoZSk7aWYoIWl8fGlbMF0ubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4gbnVsbDt0PWUucmVwbGFjZShyLHQpO2lmKG4ucHJlc2VydmVDYXNlKXt0PXQuc3BsaXQoXCJcIik7Zm9yKHZhciBzPU1hdGgubWluKGUubGVuZ3RoLGUubGVuZ3RoKTtzLS07KXt2YXIgbz1lW3NdO28mJm8udG9Mb3dlckNhc2UoKSE9bz90W3NdPXRbc10udG9VcHBlckNhc2UoKTp0W3NdPXRbc10udG9Mb3dlckNhc2UoKX10PXQuam9pbihcIlwiKX1yZXR1cm4gdH0sdGhpcy4kbWF0Y2hJdGVyYXRvcj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuJGFzc2VtYmxlUmVnRXhwKHQpO2lmKCFuKXJldHVybiExO3ZhciBpO2lmKHQuJGlzTXVsdGlMaW5lKXZhciBvPW4ubGVuZ3RoLHU9ZnVuY3Rpb24odCxyLHUpe3ZhciBhPXQuc2VhcmNoKG5bMF0pO2lmKGE9PS0xKXJldHVybjtmb3IodmFyIGY9MTtmPG87ZisrKXt0PWUuZ2V0TGluZShyK2YpO2lmKHQuc2VhcmNoKG5bZl0pPT0tMSlyZXR1cm59dmFyIGw9dC5tYXRjaChuW28tMV0pWzBdLmxlbmd0aCxjPW5ldyBzKHIsYSxyK28tMSxsKTtuLm9mZnNldD09MT8oYy5zdGFydC5yb3ctLSxjLnN0YXJ0LmNvbHVtbj1OdW1iZXIuTUFYX1ZBTFVFKTp1JiYoYy5zdGFydC5jb2x1bW4rPXUpO2lmKGkoYykpcmV0dXJuITB9O2Vsc2UgaWYodC5iYWNrd2FyZHMpdmFyIHU9ZnVuY3Rpb24oZSx0LHMpe3ZhciBvPXIuZ2V0TWF0Y2hPZmZzZXRzKGUsbik7Zm9yKHZhciB1PW8ubGVuZ3RoLTE7dT49MDt1LS0paWYoaShvW3VdLHQscykpcmV0dXJuITB9O2Vsc2UgdmFyIHU9ZnVuY3Rpb24oZSx0LHMpe3ZhciBvPXIuZ2V0TWF0Y2hPZmZzZXRzKGUsbik7Zm9yKHZhciB1PTA7dTxvLmxlbmd0aDt1KyspaWYoaShvW3VdLHQscykpcmV0dXJuITB9O3ZhciBhPXRoaXMuJGxpbmVJdGVyYXRvcihlLHQpO3JldHVybntmb3JFYWNoOmZ1bmN0aW9uKGUpe2k9ZSxhLmZvckVhY2godSl9fX0sdGhpcy4kYXNzZW1ibGVSZWdFeHA9ZnVuY3Rpb24oZSx0KXtpZihlLm5lZWRsZSBpbnN0YW5jZW9mIFJlZ0V4cClyZXR1cm4gZS5yZT1lLm5lZWRsZTt2YXIgbj1lLm5lZWRsZTtpZighZS5uZWVkbGUpcmV0dXJuIGUucmU9ITE7ZS5yZWdFeHB8fChuPXIuZXNjYXBlUmVnRXhwKG4pKSxlLndob2xlV29yZCYmKG49XCJcXFxcYlwiK24rXCJcXFxcYlwiKTt2YXIgaT1lLmNhc2VTZW5zaXRpdmU/XCJnbVwiOlwiZ21pXCI7ZS4kaXNNdWx0aUxpbmU9IXQmJi9bXFxuXFxyXS8udGVzdChuKTtpZihlLiRpc011bHRpTGluZSlyZXR1cm4gZS5yZT10aGlzLiRhc3NlbWJsZU11bHRpbGluZVJlZ0V4cChuLGkpO3RyeXt2YXIgcz1uZXcgUmVnRXhwKG4saSl9Y2F0Y2gobyl7cz0hMX1yZXR1cm4gZS5yZT1zfSx0aGlzLiRhc3NlbWJsZU11bHRpbGluZVJlZ0V4cD1mdW5jdGlvbihlLHQpe3ZhciBuPWUucmVwbGFjZSgvXFxyXFxufFxccnxcXG4vZyxcIiRcXG5eXCIpLnNwbGl0KFwiXFxuXCIpLHI9W107Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspdHJ5e3IucHVzaChuZXcgUmVnRXhwKG5baV0sdCkpfWNhdGNoKHMpe3JldHVybiExfXJldHVybiBuWzBdPT1cIlwiPyhyLnNoaWZ0KCksci5vZmZzZXQ9MSk6ci5vZmZzZXQ9MCxyfSx0aGlzLiRsaW5lSXRlcmF0b3I9ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmJhY2t3YXJkcz09MSxyPXQuc2tpcEN1cnJlbnQhPTAsaT10LnJhbmdlLHM9dC5zdGFydDtzfHwocz1pP2lbbj9cImVuZFwiOlwic3RhcnRcIl06ZS5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSkscy5zdGFydCYmKHM9c1tyIT1uP1wiZW5kXCI6XCJzdGFydFwiXSk7dmFyIG89aT9pLnN0YXJ0LnJvdzowLHU9aT9pLmVuZC5yb3c6ZS5nZXRMZW5ndGgoKS0xLGE9bj9mdW5jdGlvbihuKXt2YXIgcj1zLnJvdyxpPWUuZ2V0TGluZShyKS5zdWJzdHJpbmcoMCxzLmNvbHVtbik7aWYobihpLHIpKXJldHVybjtmb3Ioci0tO3I+PW87ci0tKWlmKG4oZS5nZXRMaW5lKHIpLHIpKXJldHVybjtpZih0LndyYXA9PTApcmV0dXJuO2ZvcihyPXUsbz1zLnJvdztyPj1vO3ItLSlpZihuKGUuZ2V0TGluZShyKSxyKSlyZXR1cm59OmZ1bmN0aW9uKG4pe3ZhciByPXMucm93LGk9ZS5nZXRMaW5lKHIpLnN1YnN0cihzLmNvbHVtbik7aWYobihpLHIscy5jb2x1bW4pKXJldHVybjtmb3Iocis9MTtyPD11O3IrKylpZihuKGUuZ2V0TGluZShyKSxyKSlyZXR1cm47aWYodC53cmFwPT0wKXJldHVybjtmb3Iocj1vLHU9cy5yb3c7cjw9dTtyKyspaWYobihlLmdldExpbmUocikscikpcmV0dXJufTtyZXR1cm57Zm9yRWFjaDphfX19KS5jYWxsKG8ucHJvdG90eXBlKSx0LlNlYXJjaD1vfSksZGVmaW5lKFwiYWNlL2tleWJvYXJkL2hhc2hfaGFuZGxlclwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9rZXlzXCIsXCJhY2UvbGliL3VzZXJhZ2VudFwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlLHQpe3RoaXMucGxhdGZvcm09dHx8KGkuaXNNYWM/XCJtYWNcIjpcIndpblwiKSx0aGlzLmNvbW1hbmRzPXt9LHRoaXMuY29tbWFuZEtleUJpbmRpbmc9e30sdGhpcy5hZGRDb21tYW5kcyhlKSx0aGlzLiRzaW5nbGVDb21tYW5kPSEwfWZ1bmN0aW9uIHUoZSx0KXtvLmNhbGwodGhpcyxlLHQpLHRoaXMuJHNpbmdsZUNvbW1hbmQ9ITF9dmFyIHI9ZShcIi4uL2xpYi9rZXlzXCIpLGk9ZShcIi4uL2xpYi91c2VyYWdlbnRcIikscz1yLktFWV9NT0RTO3UucHJvdG90eXBlPW8ucHJvdG90eXBlLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdHlwZW9mIGU9PVwib2JqZWN0XCImJmUuYmluZEtleSYmZS5iaW5kS2V5LnBvc2l0aW9ufHwwfXRoaXMuYWRkQ29tbWFuZD1mdW5jdGlvbihlKXt0aGlzLmNvbW1hbmRzW2UubmFtZV0mJnRoaXMucmVtb3ZlQ29tbWFuZChlKSx0aGlzLmNvbW1hbmRzW2UubmFtZV09ZSxlLmJpbmRLZXkmJnRoaXMuX2J1aWxkS2V5SGFzaChlKX0sdGhpcy5yZW1vdmVDb21tYW5kPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZSYmKHR5cGVvZiBlPT1cInN0cmluZ1wiP2U6ZS5uYW1lKTtlPXRoaXMuY29tbWFuZHNbbl0sdHx8ZGVsZXRlIHRoaXMuY29tbWFuZHNbbl07dmFyIHI9dGhpcy5jb21tYW5kS2V5QmluZGluZztmb3IodmFyIGkgaW4gcil7dmFyIHM9cltpXTtpZihzPT1lKWRlbGV0ZSByW2ldO2Vsc2UgaWYoQXJyYXkuaXNBcnJheShzKSl7dmFyIG89cy5pbmRleE9mKGUpO28hPS0xJiYocy5zcGxpY2UobywxKSxzLmxlbmd0aD09MSYmKHJbaV09c1swXSkpfX19LHRoaXMuYmluZEtleT1mdW5jdGlvbihlLHQsbil7dHlwZW9mIGU9PVwib2JqZWN0XCImJihuPT11bmRlZmluZWQmJihuPWUucG9zaXRpb24pLGU9ZVt0aGlzLnBsYXRmb3JtXSk7aWYoIWUpcmV0dXJuO2lmKHR5cGVvZiB0PT1cImZ1bmN0aW9uXCIpcmV0dXJuIHRoaXMuYWRkQ29tbWFuZCh7ZXhlYzp0LGJpbmRLZXk6ZSxuYW1lOnQubmFtZXx8ZX0pO2Uuc3BsaXQoXCJ8XCIpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9XCJcIjtpZihlLmluZGV4T2YoXCIgXCIpIT0tMSl7dmFyIGk9ZS5zcGxpdCgvXFxzKy8pO2U9aS5wb3AoKSxpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJzZUtleXMoZSksbj1zW3QuaGFzaElkXSt0LmtleTtyKz0ocj9cIiBcIjpcIlwiKStuLHRoaXMuX2FkZENvbW1hbmRUb0JpbmRpbmcocixcImNoYWluS2V5c1wiKX0sdGhpcykscis9XCIgXCJ9dmFyIG89dGhpcy5wYXJzZUtleXMoZSksdT1zW28uaGFzaElkXStvLmtleTt0aGlzLl9hZGRDb21tYW5kVG9CaW5kaW5nKHIrdSx0LG4pfSx0aGlzKX0sdGhpcy5fYWRkQ29tbWFuZFRvQmluZGluZz1mdW5jdGlvbih0LG4scil7dmFyIGk9dGhpcy5jb21tYW5kS2V5QmluZGluZyxzO2lmKCFuKWRlbGV0ZSBpW3RdO2Vsc2UgaWYoIWlbdF18fHRoaXMuJHNpbmdsZUNvbW1hbmQpaVt0XT1uO2Vsc2V7QXJyYXkuaXNBcnJheShpW3RdKT8ocz1pW3RdLmluZGV4T2YobikpIT0tMSYmaVt0XS5zcGxpY2UocywxKTppW3RdPVtpW3RdXSx0eXBlb2YgciE9XCJudW1iZXJcIiYmKHJ8fG4uaXNEZWZhdWx0P3I9LTEwMDpyPWUobikpO3ZhciBvPWlbdF07Zm9yKHM9MDtzPG8ubGVuZ3RoO3MrKyl7dmFyIHU9b1tzXSxhPWUodSk7aWYoYT5yKWJyZWFrfW8uc3BsaWNlKHMsMCxuKX19LHRoaXMuYWRkQ29tbWFuZHM9ZnVuY3Rpb24oZSl7ZSYmT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj1lW3RdO2lmKCFuKXJldHVybjtpZih0eXBlb2Ygbj09XCJzdHJpbmdcIilyZXR1cm4gdGhpcy5iaW5kS2V5KG4sdCk7dHlwZW9mIG49PVwiZnVuY3Rpb25cIiYmKG49e2V4ZWM6bn0pO2lmKHR5cGVvZiBuIT1cIm9iamVjdFwiKXJldHVybjtuLm5hbWV8fChuLm5hbWU9dCksdGhpcy5hZGRDb21tYW5kKG4pfSx0aGlzKX0sdGhpcy5yZW1vdmVDb21tYW5kcz1mdW5jdGlvbihlKXtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RoaXMucmVtb3ZlQ29tbWFuZChlW3RdKX0sdGhpcyl9LHRoaXMuYmluZEtleXM9ZnVuY3Rpb24oZSl7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXt0aGlzLmJpbmRLZXkodCxlW3RdKX0sdGhpcyl9LHRoaXMuX2J1aWxkS2V5SGFzaD1mdW5jdGlvbihlKXt0aGlzLmJpbmRLZXkoZS5iaW5kS2V5LGUpfSx0aGlzLnBhcnNlS2V5cz1mdW5jdGlvbihlKXt2YXIgdD1lLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1tcXC1cXCtdKFtcXC1cXCtdKT8vKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxuPXQucG9wKCksaT1yW25dO2lmKHIuRlVOQ1RJT05fS0VZU1tpXSluPXIuRlVOQ1RJT05fS0VZU1tpXS50b0xvd2VyQ2FzZSgpO2Vsc2V7aWYoIXQubGVuZ3RoKXJldHVybntrZXk6bixoYXNoSWQ6LTF9O2lmKHQubGVuZ3RoPT0xJiZ0WzBdPT1cInNoaWZ0XCIpcmV0dXJue2tleTpuLnRvVXBwZXJDYXNlKCksaGFzaElkOi0xfX12YXIgcz0wO2Zvcih2YXIgbz10Lmxlbmd0aDtvLS07KXt2YXIgdT1yLktFWV9NT0RTW3Rbb11dO2lmKHU9PW51bGwpcmV0dXJuIHR5cGVvZiBjb25zb2xlIT1cInVuZGVmaW5lZFwiJiZjb25zb2xlLmVycm9yKFwiaW52YWxpZCBtb2RpZmllciBcIit0W29dK1wiIGluIFwiK2UpLCExO3N8PXV9cmV0dXJue2tleTpuLGhhc2hJZDpzfX0sdGhpcy5maW5kS2V5Q29tbWFuZD1mdW5jdGlvbih0LG4pe3ZhciByPXNbdF0rbjtyZXR1cm4gdGhpcy5jb21tYW5kS2V5QmluZGluZ1tyXX0sdGhpcy5oYW5kbGVLZXlib2FyZD1mdW5jdGlvbihlLHQsbixyKXtpZihyPDApcmV0dXJuO3ZhciBpPXNbdF0rbixvPXRoaXMuY29tbWFuZEtleUJpbmRpbmdbaV07ZS4ka2V5Q2hhaW4mJihlLiRrZXlDaGFpbis9XCIgXCIraSxvPXRoaXMuY29tbWFuZEtleUJpbmRpbmdbZS4ka2V5Q2hhaW5dfHxvKTtpZihvKWlmKG89PVwiY2hhaW5LZXlzXCJ8fG9bby5sZW5ndGgtMV09PVwiY2hhaW5LZXlzXCIpcmV0dXJuIGUuJGtleUNoYWluPWUuJGtleUNoYWlufHxpLHtjb21tYW5kOlwibnVsbFwifTtpZihlLiRrZXlDaGFpbilpZighIXQmJnQhPTR8fG4ubGVuZ3RoIT0xKXtpZih0PT0tMXx8cj4wKWUuJGtleUNoYWluPVwiXCJ9ZWxzZSBlLiRrZXlDaGFpbj1lLiRrZXlDaGFpbi5zbGljZSgwLC1pLmxlbmd0aC0xKTtyZXR1cm57Y29tbWFuZDpvfX0sdGhpcy5nZXRTdGF0dXNUZXh0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuJGtleUNoYWlufHxcIlwifX0uY2FsbChvLnByb3RvdHlwZSksdC5IYXNoSGFuZGxlcj1vLHQuTXVsdGlIYXNoSGFuZGxlcj11fSksZGVmaW5lKFwiYWNlL2NvbW1hbmRzL2NvbW1hbmRfbWFuYWdlclwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9vb3BcIixcImFjZS9rZXlib2FyZC9oYXNoX2hhbmRsZXJcIixcImFjZS9saWIvZXZlbnRfZW1pdHRlclwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZShcIi4uL2xpYi9vb3BcIiksaT1lKFwiLi4va2V5Ym9hcmQvaGFzaF9oYW5kbGVyXCIpLk11bHRpSGFzaEhhbmRsZXIscz1lKFwiLi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyLG89ZnVuY3Rpb24oZSx0KXtpLmNhbGwodGhpcyx0LGUpLHRoaXMuYnlOYW1lPXRoaXMuY29tbWFuZHMsdGhpcy5zZXREZWZhdWx0SGFuZGxlcihcImV4ZWNcIixmdW5jdGlvbihlKXtyZXR1cm4gZS5jb21tYW5kLmV4ZWMoZS5lZGl0b3IsZS5hcmdzfHx7fSl9KX07ci5pbmhlcml0cyhvLGkpLGZ1bmN0aW9uKCl7ci5pbXBsZW1lbnQodGhpcyxzKSx0aGlzLmV4ZWM9ZnVuY3Rpb24oZSx0LG4pe2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgcj1lLmxlbmd0aDtyLS07KWlmKHRoaXMuZXhlYyhlW3JdLHQsbikpcmV0dXJuITA7cmV0dXJuITF9dHlwZW9mIGU9PVwic3RyaW5nXCImJihlPXRoaXMuY29tbWFuZHNbZV0pO2lmKCFlKXJldHVybiExO2lmKHQmJnQuJHJlYWRPbmx5JiYhZS5yZWFkT25seSlyZXR1cm4hMTt2YXIgaT17ZWRpdG9yOnQsY29tbWFuZDplLGFyZ3M6bn07cmV0dXJuIGkucmV0dXJuVmFsdWU9dGhpcy5fZW1pdChcImV4ZWNcIixpKSx0aGlzLl9zaWduYWwoXCJhZnRlckV4ZWNcIixpKSxpLnJldHVyblZhbHVlPT09ITE/ITE6ITB9LHRoaXMudG9nZ2xlUmVjb3JkaW5nPWZ1bmN0aW9uKGUpe2lmKHRoaXMuJGluUmVwbGF5KXJldHVybjtyZXR1cm4gZSYmZS5fZW1pdChcImNoYW5nZVN0YXR1c1wiKSx0aGlzLnJlY29yZGluZz8odGhpcy5tYWNyby5wb3AoKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJleGVjXCIsdGhpcy4kYWRkQ29tbWFuZFRvTWFjcm8pLHRoaXMubWFjcm8ubGVuZ3RofHwodGhpcy5tYWNybz10aGlzLm9sZE1hY3JvKSx0aGlzLnJlY29yZGluZz0hMSk6KHRoaXMuJGFkZENvbW1hbmRUb01hY3JvfHwodGhpcy4kYWRkQ29tbWFuZFRvTWFjcm89ZnVuY3Rpb24oZSl7dGhpcy5tYWNyby5wdXNoKFtlLmNvbW1hbmQsZS5hcmdzXSl9LmJpbmQodGhpcykpLHRoaXMub2xkTWFjcm89dGhpcy5tYWNybyx0aGlzLm1hY3JvPVtdLHRoaXMub24oXCJleGVjXCIsdGhpcy4kYWRkQ29tbWFuZFRvTWFjcm8pLHRoaXMucmVjb3JkaW5nPSEwKX0sdGhpcy5yZXBsYXk9ZnVuY3Rpb24oZSl7aWYodGhpcy4kaW5SZXBsYXl8fCF0aGlzLm1hY3JvKXJldHVybjtpZih0aGlzLnJlY29yZGluZylyZXR1cm4gdGhpcy50b2dnbGVSZWNvcmRpbmcoZSk7dHJ5e3RoaXMuJGluUmVwbGF5PSEwLHRoaXMubWFjcm8uZm9yRWFjaChmdW5jdGlvbih0KXt0eXBlb2YgdD09XCJzdHJpbmdcIj90aGlzLmV4ZWModCxlKTp0aGlzLmV4ZWModFswXSxlLHRbMV0pfSx0aGlzKX1maW5hbGx5e3RoaXMuJGluUmVwbGF5PSExfX0sdGhpcy50cmltTWFjcm89ZnVuY3Rpb24oZSl7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZVswXSE9XCJzdHJpbmdcIiYmKGVbMF09ZVswXS5uYW1lKSxlWzFdfHwoZT1lWzBdKSxlfSl9fS5jYWxsKG8ucHJvdG90eXBlKSx0LkNvbW1hbmRNYW5hZ2VyPW99KSxkZWZpbmUoXCJhY2UvY29tbWFuZHMvZGVmYXVsdF9jb21tYW5kc1wiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9sYW5nXCIsXCJhY2UvY29uZmlnXCIsXCJhY2UvcmFuZ2VcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSx0KXtyZXR1cm57d2luOmUsbWFjOnR9fXZhciByPWUoXCIuLi9saWIvbGFuZ1wiKSxpPWUoXCIuLi9jb25maWdcIikscz1lKFwiLi4vcmFuZ2VcIikuUmFuZ2U7dC5jb21tYW5kcz1be25hbWU6XCJzaG93U2V0dGluZ3NNZW51XCIsYmluZEtleTpvKFwiQ3RybC0sXCIsXCJDb21tYW5kLSxcIiksZXhlYzpmdW5jdGlvbihlKXtpLmxvYWRNb2R1bGUoXCJhY2UvZXh0L3NldHRpbmdzX21lbnVcIixmdW5jdGlvbih0KXt0LmluaXQoZSksZS5zaG93U2V0dGluZ3NNZW51KCl9KX0scmVhZE9ubHk6ITB9LHtuYW1lOlwiZ29Ub05leHRFcnJvclwiLGJpbmRLZXk6byhcIkFsdC1FXCIsXCJDdHJsLUVcIiksZXhlYzpmdW5jdGlvbihlKXtpLmxvYWRNb2R1bGUoXCJhY2UvZXh0L2Vycm9yX21hcmtlclwiLGZ1bmN0aW9uKHQpe3Quc2hvd0Vycm9yTWFya2VyKGUsMSl9KX0sc2Nyb2xsSW50b1ZpZXc6XCJhbmltYXRlXCIscmVhZE9ubHk6ITB9LHtuYW1lOlwiZ29Ub1ByZXZpb3VzRXJyb3JcIixiaW5kS2V5Om8oXCJBbHQtU2hpZnQtRVwiLFwiQ3RybC1TaGlmdC1FXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7aS5sb2FkTW9kdWxlKFwiYWNlL2V4dC9lcnJvcl9tYXJrZXJcIixmdW5jdGlvbih0KXt0LnNob3dFcnJvck1hcmtlcihlLC0xKX0pfSxzY3JvbGxJbnRvVmlldzpcImFuaW1hdGVcIixyZWFkT25seTohMH0se25hbWU6XCJzZWxlY3RhbGxcIixiaW5kS2V5Om8oXCJDdHJsLUFcIixcIkNvbW1hbmQtQVwiKSxleGVjOmZ1bmN0aW9uKGUpe2Uuc2VsZWN0QWxsKCl9LHJlYWRPbmx5OiEwfSx7bmFtZTpcImNlbnRlcnNlbGVjdGlvblwiLGJpbmRLZXk6byhudWxsLFwiQ3RybC1MXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5jZW50ZXJTZWxlY3Rpb24oKX0scmVhZE9ubHk6ITB9LHtuYW1lOlwiZ290b2xpbmVcIixiaW5kS2V5Om8oXCJDdHJsLUxcIixcIkNvbW1hbmQtTFwiKSxleGVjOmZ1bmN0aW9uKGUpe3ZhciB0PXBhcnNlSW50KHByb21wdChcIkVudGVyIGxpbmUgbnVtYmVyOlwiKSwxMCk7aXNOYU4odCl8fGUuZ290b0xpbmUodCl9LHJlYWRPbmx5OiEwfSx7bmFtZTpcImZvbGRcIixiaW5kS2V5Om8oXCJBbHQtTHxDdHJsLUYxXCIsXCJDb21tYW5kLUFsdC1MfENvbW1hbmQtRjFcIiksZXhlYzpmdW5jdGlvbihlKXtlLnNlc3Npb24udG9nZ2xlRm9sZCghMSl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHNjcm9sbEludG9WaWV3OlwiY2VudGVyXCIscmVhZE9ubHk6ITB9LHtuYW1lOlwidW5mb2xkXCIsYmluZEtleTpvKFwiQWx0LVNoaWZ0LUx8Q3RybC1TaGlmdC1GMVwiLFwiQ29tbWFuZC1BbHQtU2hpZnQtTHxDb21tYW5kLVNoaWZ0LUYxXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5zZXNzaW9uLnRvZ2dsZUZvbGQoITApfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImNlbnRlclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcInRvZ2dsZUZvbGRXaWRnZXRcIixiaW5kS2V5Om8oXCJGMlwiLFwiRjJcIiksZXhlYzpmdW5jdGlvbihlKXtlLnNlc3Npb24udG9nZ2xlRm9sZFdpZGdldCgpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImNlbnRlclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcInRvZ2dsZVBhcmVudEZvbGRXaWRnZXRcIixiaW5kS2V5Om8oXCJBbHQtRjJcIixcIkFsdC1GMlwiKSxleGVjOmZ1bmN0aW9uKGUpe2Uuc2Vzc2lvbi50b2dnbGVGb2xkV2lkZ2V0KCEwKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjZW50ZXJcIixyZWFkT25seTohMH0se25hbWU6XCJmb2xkYWxsXCIsYmluZEtleTpvKG51bGwsXCJDdHJsLUNvbW1hbmQtT3B0aW9uLTBcIiksZXhlYzpmdW5jdGlvbihlKXtlLnNlc3Npb24uZm9sZEFsbCgpfSxzY3JvbGxJbnRvVmlldzpcImNlbnRlclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcImZvbGRPdGhlclwiLGJpbmRLZXk6byhcIkFsdC0wXCIsXCJDb21tYW5kLU9wdGlvbi0wXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5zZXNzaW9uLmZvbGRBbGwoKSxlLnNlc3Npb24udW5mb2xkKGUuc2VsZWN0aW9uLmdldEFsbFJhbmdlcygpKX0sc2Nyb2xsSW50b1ZpZXc6XCJjZW50ZXJcIixyZWFkT25seTohMH0se25hbWU6XCJ1bmZvbGRhbGxcIixiaW5kS2V5Om8oXCJBbHQtU2hpZnQtMFwiLFwiQ29tbWFuZC1PcHRpb24tU2hpZnQtMFwiKSxleGVjOmZ1bmN0aW9uKGUpe2Uuc2Vzc2lvbi51bmZvbGQoKX0sc2Nyb2xsSW50b1ZpZXc6XCJjZW50ZXJcIixyZWFkT25seTohMH0se25hbWU6XCJmaW5kbmV4dFwiLGJpbmRLZXk6byhcIkN0cmwtS1wiLFwiQ29tbWFuZC1HXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5maW5kTmV4dCgpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImNlbnRlclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcImZpbmRwcmV2aW91c1wiLGJpbmRLZXk6byhcIkN0cmwtU2hpZnQtS1wiLFwiQ29tbWFuZC1TaGlmdC1HXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5maW5kUHJldmlvdXMoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjZW50ZXJcIixyZWFkT25seTohMH0se25hbWU6XCJzZWxlY3RPckZpbmROZXh0XCIsYmluZEtleTpvKFwiQWx0LUtcIixcIkN0cmwtR1wiKSxleGVjOmZ1bmN0aW9uKGUpe2Uuc2VsZWN0aW9uLmlzRW1wdHkoKT9lLnNlbGVjdGlvbi5zZWxlY3RXb3JkKCk6ZS5maW5kTmV4dCgpfSxyZWFkT25seTohMH0se25hbWU6XCJzZWxlY3RPckZpbmRQcmV2aW91c1wiLGJpbmRLZXk6byhcIkFsdC1TaGlmdC1LXCIsXCJDdHJsLVNoaWZ0LUdcIiksZXhlYzpmdW5jdGlvbihlKXtlLnNlbGVjdGlvbi5pc0VtcHR5KCk/ZS5zZWxlY3Rpb24uc2VsZWN0V29yZCgpOmUuZmluZFByZXZpb3VzKCl9LHJlYWRPbmx5OiEwfSx7bmFtZTpcImZpbmRcIixiaW5kS2V5Om8oXCJDdHJsLUZcIixcIkNvbW1hbmQtRlwiKSxleGVjOmZ1bmN0aW9uKGUpe2kubG9hZE1vZHVsZShcImFjZS9leHQvc2VhcmNoYm94XCIsZnVuY3Rpb24odCl7dC5TZWFyY2goZSl9KX0scmVhZE9ubHk6ITB9LHtuYW1lOlwib3ZlcndyaXRlXCIsYmluZEtleTpcIkluc2VydFwiLGV4ZWM6ZnVuY3Rpb24oZSl7ZS50b2dnbGVPdmVyd3JpdGUoKX0scmVhZE9ubHk6ITB9LHtuYW1lOlwic2VsZWN0dG9zdGFydFwiLGJpbmRLZXk6byhcIkN0cmwtU2hpZnQtSG9tZVwiLFwiQ29tbWFuZC1TaGlmdC1VcFwiKSxleGVjOmZ1bmN0aW9uKGUpe2UuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0RmlsZVN0YXJ0KCl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHJlYWRPbmx5OiEwLHNjcm9sbEludG9WaWV3OlwiYW5pbWF0ZVwiLGFjZUNvbW1hbmRHcm91cDpcImZpbGVKdW1wXCJ9LHtuYW1lOlwiZ290b3N0YXJ0XCIsYmluZEtleTpvKFwiQ3RybC1Ib21lXCIsXCJDb21tYW5kLUhvbWV8Q29tbWFuZC1VcFwiKSxleGVjOmZ1bmN0aW9uKGUpe2UubmF2aWdhdGVGaWxlU3RhcnQoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIscmVhZE9ubHk6ITAsc2Nyb2xsSW50b1ZpZXc6XCJhbmltYXRlXCIsYWNlQ29tbWFuZEdyb3VwOlwiZmlsZUp1bXBcIn0se25hbWU6XCJzZWxlY3R1cFwiLGJpbmRLZXk6byhcIlNoaWZ0LVVwXCIsXCJTaGlmdC1VcFwiKSxleGVjOmZ1bmN0aW9uKGUpe2UuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0VXAoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJnb2xpbmV1cFwiLGJpbmRLZXk6byhcIlVwXCIsXCJVcHxDdHJsLVBcIiksZXhlYzpmdW5jdGlvbihlLHQpe2UubmF2aWdhdGVVcCh0LnRpbWVzKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJzZWxlY3R0b2VuZFwiLGJpbmRLZXk6byhcIkN0cmwtU2hpZnQtRW5kXCIsXCJDb21tYW5kLVNoaWZ0LURvd25cIiksZXhlYzpmdW5jdGlvbihlKXtlLmdldFNlbGVjdGlvbigpLnNlbGVjdEZpbGVFbmQoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIscmVhZE9ubHk6ITAsc2Nyb2xsSW50b1ZpZXc6XCJhbmltYXRlXCIsYWNlQ29tbWFuZEdyb3VwOlwiZmlsZUp1bXBcIn0se25hbWU6XCJnb3RvZW5kXCIsYmluZEtleTpvKFwiQ3RybC1FbmRcIixcIkNvbW1hbmQtRW5kfENvbW1hbmQtRG93blwiKSxleGVjOmZ1bmN0aW9uKGUpe2UubmF2aWdhdGVGaWxlRW5kKCl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHJlYWRPbmx5OiEwLHNjcm9sbEludG9WaWV3OlwiYW5pbWF0ZVwiLGFjZUNvbW1hbmRHcm91cDpcImZpbGVKdW1wXCJ9LHtuYW1lOlwic2VsZWN0ZG93blwiLGJpbmRLZXk6byhcIlNoaWZ0LURvd25cIixcIlNoaWZ0LURvd25cIiksZXhlYzpmdW5jdGlvbihlKXtlLmdldFNlbGVjdGlvbigpLnNlbGVjdERvd24oKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJnb2xpbmVkb3duXCIsYmluZEtleTpvKFwiRG93blwiLFwiRG93bnxDdHJsLU5cIiksZXhlYzpmdW5jdGlvbihlLHQpe2UubmF2aWdhdGVEb3duKHQudGltZXMpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImN1cnNvclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcInNlbGVjdHdvcmRsZWZ0XCIsYmluZEtleTpvKFwiQ3RybC1TaGlmdC1MZWZ0XCIsXCJPcHRpb24tU2hpZnQtTGVmdFwiKSxleGVjOmZ1bmN0aW9uKGUpe2UuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0V29yZExlZnQoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJnb3Rvd29yZGxlZnRcIixiaW5kS2V5Om8oXCJDdHJsLUxlZnRcIixcIk9wdGlvbi1MZWZ0XCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5uYXZpZ2F0ZVdvcmRMZWZ0KCl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCIscmVhZE9ubHk6ITB9LHtuYW1lOlwic2VsZWN0dG9saW5lc3RhcnRcIixiaW5kS2V5Om8oXCJBbHQtU2hpZnQtTGVmdFwiLFwiQ29tbWFuZC1TaGlmdC1MZWZ0XCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5nZXRTZWxlY3Rpb24oKS5zZWxlY3RMaW5lU3RhcnQoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJnb3RvbGluZXN0YXJ0XCIsYmluZEtleTpvKFwiQWx0LUxlZnR8SG9tZVwiLFwiQ29tbWFuZC1MZWZ0fEhvbWV8Q3RybC1BXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5uYXZpZ2F0ZUxpbmVTdGFydCgpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImN1cnNvclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcInNlbGVjdGxlZnRcIixiaW5kS2V5Om8oXCJTaGlmdC1MZWZ0XCIsXCJTaGlmdC1MZWZ0XCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5nZXRTZWxlY3Rpb24oKS5zZWxlY3RMZWZ0KCl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCIscmVhZE9ubHk6ITB9LHtuYW1lOlwiZ290b2xlZnRcIixiaW5kS2V5Om8oXCJMZWZ0XCIsXCJMZWZ0fEN0cmwtQlwiKSxleGVjOmZ1bmN0aW9uKGUsdCl7ZS5uYXZpZ2F0ZUxlZnQodC50aW1lcyl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCIscmVhZE9ubHk6ITB9LHtuYW1lOlwic2VsZWN0d29yZHJpZ2h0XCIsYmluZEtleTpvKFwiQ3RybC1TaGlmdC1SaWdodFwiLFwiT3B0aW9uLVNoaWZ0LVJpZ2h0XCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5nZXRTZWxlY3Rpb24oKS5zZWxlY3RXb3JkUmlnaHQoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJnb3Rvd29yZHJpZ2h0XCIsYmluZEtleTpvKFwiQ3RybC1SaWdodFwiLFwiT3B0aW9uLVJpZ2h0XCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5uYXZpZ2F0ZVdvcmRSaWdodCgpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImN1cnNvclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcInNlbGVjdHRvbGluZWVuZFwiLGJpbmRLZXk6byhcIkFsdC1TaGlmdC1SaWdodFwiLFwiQ29tbWFuZC1TaGlmdC1SaWdodFwiKSxleGVjOmZ1bmN0aW9uKGUpe2UuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0TGluZUVuZCgpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImN1cnNvclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcImdvdG9saW5lZW5kXCIsYmluZEtleTpvKFwiQWx0LVJpZ2h0fEVuZFwiLFwiQ29tbWFuZC1SaWdodHxFbmR8Q3RybC1FXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5uYXZpZ2F0ZUxpbmVFbmQoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJzZWxlY3RyaWdodFwiLGJpbmRLZXk6byhcIlNoaWZ0LVJpZ2h0XCIsXCJTaGlmdC1SaWdodFwiKSxleGVjOmZ1bmN0aW9uKGUpe2UuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0UmlnaHQoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJnb3RvcmlnaHRcIixiaW5kS2V5Om8oXCJSaWdodFwiLFwiUmlnaHR8Q3RybC1GXCIpLGV4ZWM6ZnVuY3Rpb24oZSx0KXtlLm5hdmlnYXRlUmlnaHQodC50aW1lcyl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCIscmVhZE9ubHk6ITB9LHtuYW1lOlwic2VsZWN0cGFnZWRvd25cIixiaW5kS2V5OlwiU2hpZnQtUGFnZURvd25cIixleGVjOmZ1bmN0aW9uKGUpe2Uuc2VsZWN0UGFnZURvd24oKX0scmVhZE9ubHk6ITB9LHtuYW1lOlwicGFnZWRvd25cIixiaW5kS2V5Om8obnVsbCxcIk9wdGlvbi1QYWdlRG93blwiKSxleGVjOmZ1bmN0aW9uKGUpe2Uuc2Nyb2xsUGFnZURvd24oKX0scmVhZE9ubHk6ITB9LHtuYW1lOlwiZ290b3BhZ2Vkb3duXCIsYmluZEtleTpvKFwiUGFnZURvd25cIixcIlBhZ2VEb3dufEN0cmwtVlwiKSxleGVjOmZ1bmN0aW9uKGUpe2UuZ290b1BhZ2VEb3duKCl9LHJlYWRPbmx5OiEwfSx7bmFtZTpcInNlbGVjdHBhZ2V1cFwiLGJpbmRLZXk6XCJTaGlmdC1QYWdlVXBcIixleGVjOmZ1bmN0aW9uKGUpe2Uuc2VsZWN0UGFnZVVwKCl9LHJlYWRPbmx5OiEwfSx7bmFtZTpcInBhZ2V1cFwiLGJpbmRLZXk6byhudWxsLFwiT3B0aW9uLVBhZ2VVcFwiKSxleGVjOmZ1bmN0aW9uKGUpe2Uuc2Nyb2xsUGFnZVVwKCl9LHJlYWRPbmx5OiEwfSx7bmFtZTpcImdvdG9wYWdldXBcIixiaW5kS2V5OlwiUGFnZVVwXCIsZXhlYzpmdW5jdGlvbihlKXtlLmdvdG9QYWdlVXAoKX0scmVhZE9ubHk6ITB9LHtuYW1lOlwic2Nyb2xsdXBcIixiaW5kS2V5Om8oXCJDdHJsLVVwXCIsbnVsbCksZXhlYzpmdW5jdGlvbihlKXtlLnJlbmRlcmVyLnNjcm9sbEJ5KDAsLTIqZS5yZW5kZXJlci5sYXllckNvbmZpZy5saW5lSGVpZ2h0KX0scmVhZE9ubHk6ITB9LHtuYW1lOlwic2Nyb2xsZG93blwiLGJpbmRLZXk6byhcIkN0cmwtRG93blwiLG51bGwpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5yZW5kZXJlci5zY3JvbGxCeSgwLDIqZS5yZW5kZXJlci5sYXllckNvbmZpZy5saW5lSGVpZ2h0KX0scmVhZE9ubHk6ITB9LHtuYW1lOlwic2VsZWN0bGluZXN0YXJ0XCIsYmluZEtleTpcIlNoaWZ0LUhvbWVcIixleGVjOmZ1bmN0aW9uKGUpe2UuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0TGluZVN0YXJ0KCl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCIscmVhZE9ubHk6ITB9LHtuYW1lOlwic2VsZWN0bGluZWVuZFwiLGJpbmRLZXk6XCJTaGlmdC1FbmRcIixleGVjOmZ1bmN0aW9uKGUpe2UuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0TGluZUVuZCgpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImN1cnNvclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcInRvZ2dsZXJlY29yZGluZ1wiLGJpbmRLZXk6byhcIkN0cmwtQWx0LUVcIixcIkNvbW1hbmQtT3B0aW9uLUVcIiksZXhlYzpmdW5jdGlvbihlKXtlLmNvbW1hbmRzLnRvZ2dsZVJlY29yZGluZyhlKX0scmVhZE9ubHk6ITB9LHtuYW1lOlwicmVwbGF5bWFjcm9cIixiaW5kS2V5Om8oXCJDdHJsLVNoaWZ0LUVcIixcIkNvbW1hbmQtU2hpZnQtRVwiKSxleGVjOmZ1bmN0aW9uKGUpe2UuY29tbWFuZHMucmVwbGF5KGUpfSxyZWFkT25seTohMH0se25hbWU6XCJqdW1wdG9tYXRjaGluZ1wiLGJpbmRLZXk6byhcIkN0cmwtUFwiLFwiQ3RybC1QXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5qdW1wVG9NYXRjaGluZygpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImFuaW1hdGVcIixyZWFkT25seTohMH0se25hbWU6XCJzZWxlY3R0b21hdGNoaW5nXCIsYmluZEtleTpvKFwiQ3RybC1TaGlmdC1QXCIsXCJDdHJsLVNoaWZ0LVBcIiksZXhlYzpmdW5jdGlvbihlKXtlLmp1bXBUb01hdGNoaW5nKCEwKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJhbmltYXRlXCIscmVhZE9ubHk6ITB9LHtuYW1lOlwiZXhwYW5kVG9NYXRjaGluZ1wiLGJpbmRLZXk6byhcIkN0cmwtU2hpZnQtTVwiLFwiQ3RybC1TaGlmdC1NXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5qdW1wVG9NYXRjaGluZyghMCwhMCl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHNjcm9sbEludG9WaWV3OlwiYW5pbWF0ZVwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcInBhc3NLZXlzVG9Ccm93c2VyXCIsYmluZEtleTpvKG51bGwsbnVsbCksZXhlYzpmdW5jdGlvbigpe30scGFzc0V2ZW50OiEwLHJlYWRPbmx5OiEwfSx7bmFtZTpcImNvcHlcIixleGVjOmZ1bmN0aW9uKGUpe30scmVhZE9ubHk6ITB9LHtuYW1lOlwiY3V0XCIsZXhlYzpmdW5jdGlvbihlKXt2YXIgdD1lLmdldFNlbGVjdGlvblJhbmdlKCk7ZS5fZW1pdChcImN1dFwiLHQpLGUuc2VsZWN0aW9uLmlzRW1wdHkoKXx8KGUuc2Vzc2lvbi5yZW1vdmUodCksZS5jbGVhclNlbGVjdGlvbigpKX0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIn0se25hbWU6XCJwYXN0ZVwiLGV4ZWM6ZnVuY3Rpb24oZSx0KXtlLiRoYW5kbGVQYXN0ZSh0KX0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIn0se25hbWU6XCJyZW1vdmVsaW5lXCIsYmluZEtleTpvKFwiQ3RybC1EXCIsXCJDb21tYW5kLURcIiksZXhlYzpmdW5jdGlvbihlKXtlLnJlbW92ZUxpbmVzKCl9LHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCIsbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoTGluZVwifSx7bmFtZTpcImR1cGxpY2F0ZVNlbGVjdGlvblwiLGJpbmRLZXk6byhcIkN0cmwtU2hpZnQtRFwiLFwiQ29tbWFuZC1TaGlmdC1EXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5kdXBsaWNhdGVTZWxlY3Rpb24oKX0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIn0se25hbWU6XCJzb3J0bGluZXNcIixiaW5kS2V5Om8oXCJDdHJsLUFsdC1TXCIsXCJDb21tYW5kLUFsdC1TXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5zb3J0TGluZXMoKX0sc2Nyb2xsSW50b1ZpZXc6XCJzZWxlY3Rpb25cIixtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hMaW5lXCJ9LHtuYW1lOlwidG9nZ2xlY29tbWVudFwiLGJpbmRLZXk6byhcIkN0cmwtL1wiLFwiQ29tbWFuZC0vXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS50b2dnbGVDb21tZW50TGluZXMoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoTGluZVwiLHNjcm9sbEludG9WaWV3Olwic2VsZWN0aW9uUGFydFwifSx7bmFtZTpcInRvZ2dsZUJsb2NrQ29tbWVudFwiLGJpbmRLZXk6byhcIkN0cmwtU2hpZnQtL1wiLFwiQ29tbWFuZC1TaGlmdC0vXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS50b2dnbGVCbG9ja0NvbW1lbnQoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJzZWxlY3Rpb25QYXJ0XCJ9LHtuYW1lOlwibW9kaWZ5TnVtYmVyVXBcIixiaW5kS2V5Om8oXCJDdHJsLVNoaWZ0LVVwXCIsXCJBbHQtU2hpZnQtVXBcIiksZXhlYzpmdW5jdGlvbihlKXtlLm1vZGlmeU51bWJlcigxKX0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIn0se25hbWU6XCJtb2RpZnlOdW1iZXJEb3duXCIsYmluZEtleTpvKFwiQ3RybC1TaGlmdC1Eb3duXCIsXCJBbHQtU2hpZnQtRG93blwiKSxleGVjOmZ1bmN0aW9uKGUpe2UubW9kaWZ5TnVtYmVyKC0xKX0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIn0se25hbWU6XCJyZXBsYWNlXCIsYmluZEtleTpvKFwiQ3RybC1IXCIsXCJDb21tYW5kLU9wdGlvbi1GXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7aS5sb2FkTW9kdWxlKFwiYWNlL2V4dC9zZWFyY2hib3hcIixmdW5jdGlvbih0KXt0LlNlYXJjaChlLCEwKX0pfX0se25hbWU6XCJ1bmRvXCIsYmluZEtleTpvKFwiQ3RybC1aXCIsXCJDb21tYW5kLVpcIiksZXhlYzpmdW5jdGlvbihlKXtlLnVuZG8oKX19LHtuYW1lOlwicmVkb1wiLGJpbmRLZXk6byhcIkN0cmwtU2hpZnQtWnxDdHJsLVlcIixcIkNvbW1hbmQtU2hpZnQtWnxDb21tYW5kLVlcIiksZXhlYzpmdW5jdGlvbihlKXtlLnJlZG8oKX19LHtuYW1lOlwiY29weWxpbmVzdXBcIixiaW5kS2V5Om8oXCJBbHQtU2hpZnQtVXBcIixcIkNvbW1hbmQtT3B0aW9uLVVwXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5jb3B5TGluZXNVcCgpfSxzY3JvbGxJbnRvVmlldzpcImN1cnNvclwifSx7bmFtZTpcIm1vdmVsaW5lc3VwXCIsYmluZEtleTpvKFwiQWx0LVVwXCIsXCJPcHRpb24tVXBcIiksZXhlYzpmdW5jdGlvbihlKXtlLm1vdmVMaW5lc1VwKCl9LHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCJ9LHtuYW1lOlwiY29weWxpbmVzZG93blwiLGJpbmRLZXk6byhcIkFsdC1TaGlmdC1Eb3duXCIsXCJDb21tYW5kLU9wdGlvbi1Eb3duXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5jb3B5TGluZXNEb3duKCl9LHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCJ9LHtuYW1lOlwibW92ZWxpbmVzZG93blwiLGJpbmRLZXk6byhcIkFsdC1Eb3duXCIsXCJPcHRpb24tRG93blwiKSxleGVjOmZ1bmN0aW9uKGUpe2UubW92ZUxpbmVzRG93bigpfSxzY3JvbGxJbnRvVmlldzpcImN1cnNvclwifSx7bmFtZTpcImRlbFwiLGJpbmRLZXk6byhcIkRlbGV0ZVwiLFwiRGVsZXRlfEN0cmwtRHxTaGlmdC1EZWxldGVcIiksZXhlYzpmdW5jdGlvbihlKXtlLnJlbW92ZShcInJpZ2h0XCIpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImN1cnNvclwifSx7bmFtZTpcImJhY2tzcGFjZVwiLGJpbmRLZXk6byhcIlNoaWZ0LUJhY2tzcGFjZXxCYWNrc3BhY2VcIixcIkN0cmwtQmFja3NwYWNlfFNoaWZ0LUJhY2tzcGFjZXxCYWNrc3BhY2V8Q3RybC1IXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5yZW1vdmUoXCJsZWZ0XCIpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImN1cnNvclwifSx7bmFtZTpcImN1dF9vcl9kZWxldGVcIixiaW5kS2V5Om8oXCJTaGlmdC1EZWxldGVcIixudWxsKSxleGVjOmZ1bmN0aW9uKGUpe2lmKCFlLnNlbGVjdGlvbi5pc0VtcHR5KCkpcmV0dXJuITE7ZS5yZW1vdmUoXCJsZWZ0XCIpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImN1cnNvclwifSx7bmFtZTpcInJlbW92ZXRvbGluZXN0YXJ0XCIsYmluZEtleTpvKFwiQWx0LUJhY2tzcGFjZVwiLFwiQ29tbWFuZC1CYWNrc3BhY2VcIiksZXhlYzpmdW5jdGlvbihlKXtlLnJlbW92ZVRvTGluZVN0YXJ0KCl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCJ9LHtuYW1lOlwicmVtb3ZldG9saW5lZW5kXCIsYmluZEtleTpvKFwiQWx0LURlbGV0ZVwiLFwiQ3RybC1LXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5yZW1vdmVUb0xpbmVFbmQoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIn0se25hbWU6XCJyZW1vdmV3b3JkbGVmdFwiLGJpbmRLZXk6byhcIkN0cmwtQmFja3NwYWNlXCIsXCJBbHQtQmFja3NwYWNlfEN0cmwtQWx0LUJhY2tzcGFjZVwiKSxleGVjOmZ1bmN0aW9uKGUpe2UucmVtb3ZlV29yZExlZnQoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIn0se25hbWU6XCJyZW1vdmV3b3JkcmlnaHRcIixiaW5kS2V5Om8oXCJDdHJsLURlbGV0ZVwiLFwiQWx0LURlbGV0ZVwiKSxleGVjOmZ1bmN0aW9uKGUpe2UucmVtb3ZlV29yZFJpZ2h0KCl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCJ9LHtuYW1lOlwib3V0ZGVudFwiLGJpbmRLZXk6byhcIlNoaWZ0LVRhYlwiLFwiU2hpZnQtVGFiXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5ibG9ja091dGRlbnQoKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJzZWxlY3Rpb25QYXJ0XCJ9LHtuYW1lOlwiaW5kZW50XCIsYmluZEtleTpvKFwiVGFiXCIsXCJUYWJcIiksZXhlYzpmdW5jdGlvbihlKXtlLmluZGVudCgpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcInNlbGVjdGlvblBhcnRcIn0se25hbWU6XCJibG9ja291dGRlbnRcIixiaW5kS2V5Om8oXCJDdHJsLVtcIixcIkN0cmwtW1wiKSxleGVjOmZ1bmN0aW9uKGUpe2UuYmxvY2tPdXRkZW50KCl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaExpbmVcIixzY3JvbGxJbnRvVmlldzpcInNlbGVjdGlvblBhcnRcIn0se25hbWU6XCJibG9ja2luZGVudFwiLGJpbmRLZXk6byhcIkN0cmwtXVwiLFwiQ3RybC1dXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5ibG9ja0luZGVudCgpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hMaW5lXCIsc2Nyb2xsSW50b1ZpZXc6XCJzZWxlY3Rpb25QYXJ0XCJ9LHtuYW1lOlwiaW5zZXJ0c3RyaW5nXCIsZXhlYzpmdW5jdGlvbihlLHQpe2UuaW5zZXJ0KHQpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImN1cnNvclwifSx7bmFtZTpcImluc2VydHRleHRcIixleGVjOmZ1bmN0aW9uKGUsdCl7ZS5pbnNlcnQoci5zdHJpbmdSZXBlYXQodC50ZXh0fHxcIlwiLHQudGltZXN8fDEpKX0sbXVsdGlTZWxlY3RBY3Rpb246XCJmb3JFYWNoXCIsc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIn0se25hbWU6XCJzcGxpdGxpbmVcIixiaW5kS2V5Om8obnVsbCxcIkN0cmwtT1wiKSxleGVjOmZ1bmN0aW9uKGUpe2Uuc3BsaXRMaW5lKCl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCJ9LHtuYW1lOlwidHJhbnNwb3NlbGV0dGVyc1wiLGJpbmRLZXk6byhcIkN0cmwtVFwiLFwiQ3RybC1UXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS50cmFuc3Bvc2VMZXR0ZXJzKCl9LG11bHRpU2VsZWN0QWN0aW9uOmZ1bmN0aW9uKGUpe2UudHJhbnNwb3NlU2VsZWN0aW9ucygxKX0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIn0se25hbWU6XCJ0b3VwcGVyY2FzZVwiLGJpbmRLZXk6byhcIkN0cmwtVVwiLFwiQ3RybC1VXCIpLGV4ZWM6ZnVuY3Rpb24oZSl7ZS50b1VwcGVyQ2FzZSgpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImN1cnNvclwifSx7bmFtZTpcInRvbG93ZXJjYXNlXCIsYmluZEtleTpvKFwiQ3RybC1TaGlmdC1VXCIsXCJDdHJsLVNoaWZ0LVVcIiksZXhlYzpmdW5jdGlvbihlKXtlLnRvTG93ZXJDYXNlKCl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCJ9LHtuYW1lOlwiZXhwYW5kdG9saW5lXCIsYmluZEtleTpvKFwiQ3RybC1TaGlmdC1MXCIsXCJDb21tYW5kLVNoaWZ0LUxcIiksZXhlYzpmdW5jdGlvbihlKXt2YXIgdD1lLnNlbGVjdGlvbi5nZXRSYW5nZSgpO3Quc3RhcnQuY29sdW1uPXQuZW5kLmNvbHVtbj0wLHQuZW5kLnJvdysrLGUuc2VsZWN0aW9uLnNldFJhbmdlKHQsITEpfSxtdWx0aVNlbGVjdEFjdGlvbjpcImZvckVhY2hcIixzY3JvbGxJbnRvVmlldzpcImN1cnNvclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcImpvaW5saW5lc1wiLGJpbmRLZXk6byhudWxsLG51bGwpLGV4ZWM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZWxlY3Rpb24uaXNCYWNrd2FyZHMoKSxuPXQ/ZS5zZWxlY3Rpb24uZ2V0U2VsZWN0aW9uTGVhZCgpOmUuc2VsZWN0aW9uLmdldFNlbGVjdGlvbkFuY2hvcigpLGk9dD9lLnNlbGVjdGlvbi5nZXRTZWxlY3Rpb25BbmNob3IoKTplLnNlbGVjdGlvbi5nZXRTZWxlY3Rpb25MZWFkKCksbz1lLnNlc3Npb24uZG9jLmdldExpbmUobi5yb3cpLmxlbmd0aCx1PWUuc2Vzc2lvbi5kb2MuZ2V0VGV4dFJhbmdlKGUuc2VsZWN0aW9uLmdldFJhbmdlKCkpLGE9dS5yZXBsYWNlKC9cXG5cXHMqLyxcIiBcIikubGVuZ3RoLGY9ZS5zZXNzaW9uLmRvYy5nZXRMaW5lKG4ucm93KTtmb3IodmFyIGw9bi5yb3crMTtsPD1pLnJvdysxO2wrKyl7dmFyIGM9ci5zdHJpbmdUcmltTGVmdChyLnN0cmluZ1RyaW1SaWdodChlLnNlc3Npb24uZG9jLmdldExpbmUobCkpKTtjLmxlbmd0aCE9PTAmJihjPVwiIFwiK2MpLGYrPWN9aS5yb3crMTxlLnNlc3Npb24uZG9jLmdldExlbmd0aCgpLTEmJihmKz1lLnNlc3Npb24uZG9jLmdldE5ld0xpbmVDaGFyYWN0ZXIoKSksZS5jbGVhclNlbGVjdGlvbigpLGUuc2Vzc2lvbi5kb2MucmVwbGFjZShuZXcgcyhuLnJvdywwLGkucm93KzIsMCksZiksYT4wPyhlLnNlbGVjdGlvbi5tb3ZlQ3Vyc29yVG8obi5yb3csbi5jb2x1bW4pLGUuc2VsZWN0aW9uLnNlbGVjdFRvKG4ucm93LG4uY29sdW1uK2EpKToobz1lLnNlc3Npb24uZG9jLmdldExpbmUobi5yb3cpLmxlbmd0aD5vP28rMTpvLGUuc2VsZWN0aW9uLm1vdmVDdXJzb3JUbyhuLnJvdyxvKSl9LG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcImludmVydFNlbGVjdGlvblwiLGJpbmRLZXk6byhudWxsLG51bGwpLGV4ZWM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZXNzaW9uLmRvYy5nZXRMZW5ndGgoKS0xLG49ZS5zZXNzaW9uLmRvYy5nZXRMaW5lKHQpLmxlbmd0aCxyPWUuc2VsZWN0aW9uLnJhbmdlTGlzdC5yYW5nZXMsaT1bXTtyLmxlbmd0aDwxJiYocj1bZS5zZWxlY3Rpb24uZ2V0UmFuZ2UoKV0pO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKW89PXIubGVuZ3RoLTEmJihyW29dLmVuZC5yb3chPT10fHxyW29dLmVuZC5jb2x1bW4hPT1uKSYmaS5wdXNoKG5ldyBzKHJbb10uZW5kLnJvdyxyW29dLmVuZC5jb2x1bW4sdCxuKSksbz09PTA/KHJbb10uc3RhcnQucm93IT09MHx8cltvXS5zdGFydC5jb2x1bW4hPT0wKSYmaS5wdXNoKG5ldyBzKDAsMCxyW29dLnN0YXJ0LnJvdyxyW29dLnN0YXJ0LmNvbHVtbikpOmkucHVzaChuZXcgcyhyW28tMV0uZW5kLnJvdyxyW28tMV0uZW5kLmNvbHVtbixyW29dLnN0YXJ0LnJvdyxyW29dLnN0YXJ0LmNvbHVtbikpO2UuZXhpdE11bHRpU2VsZWN0TW9kZSgpLGUuY2xlYXJTZWxlY3Rpb24oKTtmb3IodmFyIG89MDtvPGkubGVuZ3RoO28rKyllLnNlbGVjdGlvbi5hZGRSYW5nZShpW29dLCExKX0scmVhZE9ubHk6ITAsc2Nyb2xsSW50b1ZpZXc6XCJub25lXCJ9XX0pLGRlZmluZShcImFjZS9lZGl0b3JcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIvZml4b2xkYnJvd3NlcnNcIixcImFjZS9saWIvb29wXCIsXCJhY2UvbGliL2RvbVwiLFwiYWNlL2xpYi9sYW5nXCIsXCJhY2UvbGliL3VzZXJhZ2VudFwiLFwiYWNlL2tleWJvYXJkL3RleHRpbnB1dFwiLFwiYWNlL21vdXNlL21vdXNlX2hhbmRsZXJcIixcImFjZS9tb3VzZS9mb2xkX2hhbmRsZXJcIixcImFjZS9rZXlib2FyZC9rZXliaW5kaW5nXCIsXCJhY2UvZWRpdF9zZXNzaW9uXCIsXCJhY2Uvc2VhcmNoXCIsXCJhY2UvcmFuZ2VcIixcImFjZS9saWIvZXZlbnRfZW1pdHRlclwiLFwiYWNlL2NvbW1hbmRzL2NvbW1hbmRfbWFuYWdlclwiLFwiYWNlL2NvbW1hbmRzL2RlZmF1bHRfY29tbWFuZHNcIixcImFjZS9jb25maWdcIixcImFjZS90b2tlbl9pdGVyYXRvclwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZShcIi4vbGliL2ZpeG9sZGJyb3dzZXJzXCIpO3ZhciByPWUoXCIuL2xpYi9vb3BcIiksaT1lKFwiLi9saWIvZG9tXCIpLHM9ZShcIi4vbGliL2xhbmdcIiksbz1lKFwiLi9saWIvdXNlcmFnZW50XCIpLHU9ZShcIi4va2V5Ym9hcmQvdGV4dGlucHV0XCIpLlRleHRJbnB1dCxhPWUoXCIuL21vdXNlL21vdXNlX2hhbmRsZXJcIikuTW91c2VIYW5kbGVyLGY9ZShcIi4vbW91c2UvZm9sZF9oYW5kbGVyXCIpLkZvbGRIYW5kbGVyLGw9ZShcIi4va2V5Ym9hcmQva2V5YmluZGluZ1wiKS5LZXlCaW5kaW5nLGM9ZShcIi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9uLGg9ZShcIi4vc2VhcmNoXCIpLlNlYXJjaCxwPWUoXCIuL3JhbmdlXCIpLlJhbmdlLGQ9ZShcIi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyLHY9ZShcIi4vY29tbWFuZHMvY29tbWFuZF9tYW5hZ2VyXCIpLkNvbW1hbmRNYW5hZ2VyLG09ZShcIi4vY29tbWFuZHMvZGVmYXVsdF9jb21tYW5kc1wiKS5jb21tYW5kcyxnPWUoXCIuL2NvbmZpZ1wiKSx5PWUoXCIuL3Rva2VuX2l0ZXJhdG9yXCIpLlRva2VuSXRlcmF0b3IsYj1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZ2V0Q29udGFpbmVyRWxlbWVudCgpO3RoaXMuY29udGFpbmVyPW4sdGhpcy5yZW5kZXJlcj1lLHRoaXMuY29tbWFuZHM9bmV3IHYoby5pc01hYz9cIm1hY1wiOlwid2luXCIsbSksdGhpcy50ZXh0SW5wdXQ9bmV3IHUoZS5nZXRUZXh0QXJlYUNvbnRhaW5lcigpLHRoaXMpLHRoaXMucmVuZGVyZXIudGV4dGFyZWE9dGhpcy50ZXh0SW5wdXQuZ2V0RWxlbWVudCgpLHRoaXMua2V5QmluZGluZz1uZXcgbCh0aGlzKSx0aGlzLiRtb3VzZUhhbmRsZXI9bmV3IGEodGhpcyksbmV3IGYodGhpcyksdGhpcy4kYmxvY2tTY3JvbGxpbmc9MCx0aGlzLiRzZWFyY2g9KG5ldyBoKS5zZXQoe3dyYXA6ITB9KSx0aGlzLiRoaXN0b3J5VHJhY2tlcj10aGlzLiRoaXN0b3J5VHJhY2tlci5iaW5kKHRoaXMpLHRoaXMuY29tbWFuZHMub24oXCJleGVjXCIsdGhpcy4kaGlzdG9yeVRyYWNrZXIpLHRoaXMuJGluaXRPcGVyYXRpb25MaXN0ZW5lcnMoKSx0aGlzLl8kZW1pdElucHV0RXZlbnQ9cy5kZWxheWVkQ2FsbChmdW5jdGlvbigpe3RoaXMuX3NpZ25hbChcImlucHV0XCIse30pLHRoaXMuc2Vzc2lvbiYmdGhpcy5zZXNzaW9uLmJnVG9rZW5pemVyJiZ0aGlzLnNlc3Npb24uYmdUb2tlbml6ZXIuc2NoZWR1bGVTdGFydCgpfS5iaW5kKHRoaXMpKSx0aGlzLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oZSx0KXt0Ll8kZW1pdElucHV0RXZlbnQuc2NoZWR1bGUoMzEpfSksdGhpcy5zZXRTZXNzaW9uKHR8fG5ldyBjKFwiXCIpKSxnLnJlc2V0T3B0aW9ucyh0aGlzKSxnLl9zaWduYWwoXCJlZGl0b3JcIix0aGlzKX07KGZ1bmN0aW9uKCl7ci5pbXBsZW1lbnQodGhpcyxkKSx0aGlzLiRpbml0T3BlcmF0aW9uTGlzdGVuZXJzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZVtlLmxlbmd0aC0xXX10aGlzLnNlbGVjdGlvbnM9W10sdGhpcy5jb21tYW5kcy5vbihcImV4ZWNcIix0aGlzLnN0YXJ0T3BlcmF0aW9uLmJpbmQodGhpcyksITApLHRoaXMuY29tbWFuZHMub24oXCJhZnRlckV4ZWNcIix0aGlzLmVuZE9wZXJhdGlvbi5iaW5kKHRoaXMpLCEwKSx0aGlzLiRvcFJlc2V0VGltZXI9cy5kZWxheWVkQ2FsbCh0aGlzLmVuZE9wZXJhdGlvbi5iaW5kKHRoaXMpKSx0aGlzLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXt0aGlzLmN1ck9wfHx0aGlzLnN0YXJ0T3BlcmF0aW9uKCksdGhpcy5jdXJPcC5kb2NDaGFuZ2VkPSEwfS5iaW5kKHRoaXMpLCEwKSx0aGlzLm9uKFwiY2hhbmdlU2VsZWN0aW9uXCIsZnVuY3Rpb24oKXt0aGlzLmN1ck9wfHx0aGlzLnN0YXJ0T3BlcmF0aW9uKCksdGhpcy5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkPSEwfS5iaW5kKHRoaXMpLCEwKX0sdGhpcy5jdXJPcD1udWxsLHRoaXMucHJldk9wPXt9LHRoaXMuc3RhcnRPcGVyYXRpb249ZnVuY3Rpb24oZSl7aWYodGhpcy5jdXJPcCl7aWYoIWV8fHRoaXMuY3VyT3AuY29tbWFuZClyZXR1cm47dGhpcy5wcmV2T3A9dGhpcy5jdXJPcH1lfHwodGhpcy5wcmV2aW91c0NvbW1hbmQ9bnVsbCxlPXt9KSx0aGlzLiRvcFJlc2V0VGltZXIuc2NoZWR1bGUoKSx0aGlzLmN1ck9wPXtjb21tYW5kOmUuY29tbWFuZHx8e30sYXJnczplLmFyZ3Msc2Nyb2xsVG9wOnRoaXMucmVuZGVyZXIuc2Nyb2xsVG9wfSx0aGlzLmN1ck9wLmNvbW1hbmQubmFtZSYmdGhpcy5jdXJPcC5jb21tYW5kLnNjcm9sbEludG9WaWV3IT09dW5kZWZpbmVkJiZ0aGlzLiRibG9ja1Njcm9sbGluZysrfSx0aGlzLmVuZE9wZXJhdGlvbj1mdW5jdGlvbihlKXtpZih0aGlzLmN1ck9wKXtpZihlJiZlLnJldHVyblZhbHVlPT09ITEpcmV0dXJuIHRoaXMuY3VyT3A9bnVsbDt0aGlzLl9zaWduYWwoXCJiZWZvcmVFbmRPcGVyYXRpb25cIik7dmFyIHQ9dGhpcy5jdXJPcC5jb21tYW5kO3QubmFtZSYmdGhpcy4kYmxvY2tTY3JvbGxpbmc+MCYmdGhpcy4kYmxvY2tTY3JvbGxpbmctLTt2YXIgbj10JiZ0LnNjcm9sbEludG9WaWV3O2lmKG4pe3N3aXRjaChuKXtjYXNlXCJjZW50ZXItYW5pbWF0ZVwiOm49XCJhbmltYXRlXCI7Y2FzZVwiY2VudGVyXCI6dGhpcy5yZW5kZXJlci5zY3JvbGxDdXJzb3JJbnRvVmlldyhudWxsLC41KTticmVhaztjYXNlXCJhbmltYXRlXCI6Y2FzZVwiY3Vyc29yXCI6dGhpcy5yZW5kZXJlci5zY3JvbGxDdXJzb3JJbnRvVmlldygpO2JyZWFrO2Nhc2VcInNlbGVjdGlvblBhcnRcIjp2YXIgcj10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLGk9dGhpcy5yZW5kZXJlci5sYXllckNvbmZpZzsoci5zdGFydC5yb3c+PWkubGFzdFJvd3x8ci5lbmQucm93PD1pLmZpcnN0Um93KSYmdGhpcy5yZW5kZXJlci5zY3JvbGxTZWxlY3Rpb25JbnRvVmlldyh0aGlzLnNlbGVjdGlvbi5hbmNob3IsdGhpcy5zZWxlY3Rpb24ubGVhZCk7YnJlYWs7ZGVmYXVsdDp9bj09XCJhbmltYXRlXCImJnRoaXMucmVuZGVyZXIuYW5pbWF0ZVNjcm9sbGluZyh0aGlzLmN1ck9wLnNjcm9sbFRvcCl9dGhpcy5wcmV2T3A9dGhpcy5jdXJPcCx0aGlzLmN1ck9wPW51bGx9fSx0aGlzLiRtZXJnZWFibGVDb21tYW5kcz1bXCJiYWNrc3BhY2VcIixcImRlbFwiLFwiaW5zZXJ0c3RyaW5nXCJdLHRoaXMuJGhpc3RvcnlUcmFja2VyPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLiRtZXJnZVVuZG9EZWx0YXMpcmV0dXJuO3ZhciB0PXRoaXMucHJldk9wLG49dGhpcy4kbWVyZ2VhYmxlQ29tbWFuZHMscj10LmNvbW1hbmQmJmUuY29tbWFuZC5uYW1lPT10LmNvbW1hbmQubmFtZTtpZihlLmNvbW1hbmQubmFtZT09XCJpbnNlcnRzdHJpbmdcIil7dmFyIGk9ZS5hcmdzO3RoaXMubWVyZ2VOZXh0Q29tbWFuZD09PXVuZGVmaW5lZCYmKHRoaXMubWVyZ2VOZXh0Q29tbWFuZD0hMCkscj1yJiZ0aGlzLm1lcmdlTmV4dENvbW1hbmQmJighL1xccy8udGVzdChpKXx8L1xccy8udGVzdCh0LmFyZ3MpKSx0aGlzLm1lcmdlTmV4dENvbW1hbmQ9ITB9ZWxzZSByPXImJm4uaW5kZXhPZihlLmNvbW1hbmQubmFtZSkhPT0tMTt0aGlzLiRtZXJnZVVuZG9EZWx0YXMhPVwiYWx3YXlzXCImJkRhdGUubm93KCktdGhpcy5zZXF1ZW5jZVN0YXJ0VGltZT4yZTMmJihyPSExKSxyP3RoaXMuc2Vzc2lvbi5tZXJnZVVuZG9EZWx0YXM9ITA6bi5pbmRleE9mKGUuY29tbWFuZC5uYW1lKSE9PS0xJiYodGhpcy5zZXF1ZW5jZVN0YXJ0VGltZT1EYXRlLm5vdygpKX0sdGhpcy5zZXRLZXlib2FyZEhhbmRsZXI9ZnVuY3Rpb24oZSx0KXtpZihlJiZ0eXBlb2YgZT09XCJzdHJpbmdcIil7dGhpcy4ka2V5YmluZGluZ0lkPWU7dmFyIG49dGhpcztnLmxvYWRNb2R1bGUoW1wia2V5YmluZGluZ1wiLGVdLGZ1bmN0aW9uKHIpe24uJGtleWJpbmRpbmdJZD09ZSYmbi5rZXlCaW5kaW5nLnNldEtleWJvYXJkSGFuZGxlcihyJiZyLmhhbmRsZXIpLHQmJnQoKX0pfWVsc2UgdGhpcy4ka2V5YmluZGluZ0lkPW51bGwsdGhpcy5rZXlCaW5kaW5nLnNldEtleWJvYXJkSGFuZGxlcihlKSx0JiZ0KCl9LHRoaXMuZ2V0S2V5Ym9hcmRIYW5kbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua2V5QmluZGluZy5nZXRLZXlib2FyZEhhbmRsZXIoKX0sdGhpcy5zZXRTZXNzaW9uPWZ1bmN0aW9uKGUpe2lmKHRoaXMuc2Vzc2lvbj09ZSlyZXR1cm47dGhpcy5jdXJPcCYmdGhpcy5lbmRPcGVyYXRpb24oKSx0aGlzLmN1ck9wPXt9O3ZhciB0PXRoaXMuc2Vzc2lvbjtpZih0KXt0aGlzLnNlc3Npb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLHRoaXMuJG9uRG9jdW1lbnRDaGFuZ2UpLHRoaXMuc2Vzc2lvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlTW9kZVwiLHRoaXMuJG9uQ2hhbmdlTW9kZSksdGhpcy5zZXNzaW9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b2tlbml6ZXJVcGRhdGVcIix0aGlzLiRvblRva2VuaXplclVwZGF0ZSksdGhpcy5zZXNzaW9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VUYWJTaXplXCIsdGhpcy4kb25DaGFuZ2VUYWJTaXplKSx0aGlzLnNlc3Npb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVdyYXBMaW1pdFwiLHRoaXMuJG9uQ2hhbmdlV3JhcExpbWl0KSx0aGlzLnNlc3Npb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVdyYXBNb2RlXCIsdGhpcy4kb25DaGFuZ2VXcmFwTW9kZSksdGhpcy5zZXNzaW9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbkNoYW5nZUZvbGRcIix0aGlzLiRvbkNoYW5nZUZvbGQpLHRoaXMuc2Vzc2lvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlRnJvbnRNYXJrZXJcIix0aGlzLiRvbkNoYW5nZUZyb250TWFya2VyKSx0aGlzLnNlc3Npb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZUJhY2tNYXJrZXJcIix0aGlzLiRvbkNoYW5nZUJhY2tNYXJrZXIpLHRoaXMuc2Vzc2lvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlQnJlYWtwb2ludFwiLHRoaXMuJG9uQ2hhbmdlQnJlYWtwb2ludCksdGhpcy5zZXNzaW9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VBbm5vdGF0aW9uXCIsdGhpcy4kb25DaGFuZ2VBbm5vdGF0aW9uKSx0aGlzLnNlc3Npb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZU92ZXJ3cml0ZVwiLHRoaXMuJG9uQ3Vyc29yQ2hhbmdlKSx0aGlzLnNlc3Npb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVNjcm9sbFRvcFwiLHRoaXMuJG9uU2Nyb2xsVG9wQ2hhbmdlKSx0aGlzLnNlc3Npb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVNjcm9sbExlZnRcIix0aGlzLiRvblNjcm9sbExlZnRDaGFuZ2UpO3ZhciBuPXRoaXMuc2Vzc2lvbi5nZXRTZWxlY3Rpb24oKTtuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VDdXJzb3JcIix0aGlzLiRvbkN1cnNvckNoYW5nZSksbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlU2VsZWN0aW9uXCIsdGhpcy4kb25TZWxlY3Rpb25DaGFuZ2UpfXRoaXMuc2Vzc2lvbj1lLGU/KHRoaXMuJG9uRG9jdW1lbnRDaGFuZ2U9dGhpcy5vbkRvY3VtZW50Q2hhbmdlLmJpbmQodGhpcyksZS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsdGhpcy4kb25Eb2N1bWVudENoYW5nZSksdGhpcy5yZW5kZXJlci5zZXRTZXNzaW9uKGUpLHRoaXMuJG9uQ2hhbmdlTW9kZT10aGlzLm9uQ2hhbmdlTW9kZS5iaW5kKHRoaXMpLGUuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZU1vZGVcIix0aGlzLiRvbkNoYW5nZU1vZGUpLHRoaXMuJG9uVG9rZW5pemVyVXBkYXRlPXRoaXMub25Ub2tlbml6ZXJVcGRhdGUuYmluZCh0aGlzKSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b2tlbml6ZXJVcGRhdGVcIix0aGlzLiRvblRva2VuaXplclVwZGF0ZSksdGhpcy4kb25DaGFuZ2VUYWJTaXplPXRoaXMucmVuZGVyZXIub25DaGFuZ2VUYWJTaXplLmJpbmQodGhpcy5yZW5kZXJlciksZS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlVGFiU2l6ZVwiLHRoaXMuJG9uQ2hhbmdlVGFiU2l6ZSksdGhpcy4kb25DaGFuZ2VXcmFwTGltaXQ9dGhpcy5vbkNoYW5nZVdyYXBMaW1pdC5iaW5kKHRoaXMpLGUuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVdyYXBMaW1pdFwiLHRoaXMuJG9uQ2hhbmdlV3JhcExpbWl0KSx0aGlzLiRvbkNoYW5nZVdyYXBNb2RlPXRoaXMub25DaGFuZ2VXcmFwTW9kZS5iaW5kKHRoaXMpLGUuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVdyYXBNb2RlXCIsdGhpcy4kb25DaGFuZ2VXcmFwTW9kZSksdGhpcy4kb25DaGFuZ2VGb2xkPXRoaXMub25DaGFuZ2VGb2xkLmJpbmQodGhpcyksZS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlRm9sZFwiLHRoaXMuJG9uQ2hhbmdlRm9sZCksdGhpcy4kb25DaGFuZ2VGcm9udE1hcmtlcj10aGlzLm9uQ2hhbmdlRnJvbnRNYXJrZXIuYmluZCh0aGlzKSx0aGlzLnNlc3Npb24uYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZUZyb250TWFya2VyXCIsdGhpcy4kb25DaGFuZ2VGcm9udE1hcmtlciksdGhpcy4kb25DaGFuZ2VCYWNrTWFya2VyPXRoaXMub25DaGFuZ2VCYWNrTWFya2VyLmJpbmQodGhpcyksdGhpcy5zZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VCYWNrTWFya2VyXCIsdGhpcy4kb25DaGFuZ2VCYWNrTWFya2VyKSx0aGlzLiRvbkNoYW5nZUJyZWFrcG9pbnQ9dGhpcy5vbkNoYW5nZUJyZWFrcG9pbnQuYmluZCh0aGlzKSx0aGlzLnNlc3Npb24uYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZUJyZWFrcG9pbnRcIix0aGlzLiRvbkNoYW5nZUJyZWFrcG9pbnQpLHRoaXMuJG9uQ2hhbmdlQW5ub3RhdGlvbj10aGlzLm9uQ2hhbmdlQW5ub3RhdGlvbi5iaW5kKHRoaXMpLHRoaXMuc2Vzc2lvbi5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlQW5ub3RhdGlvblwiLHRoaXMuJG9uQ2hhbmdlQW5ub3RhdGlvbiksdGhpcy4kb25DdXJzb3JDaGFuZ2U9dGhpcy5vbkN1cnNvckNoYW5nZS5iaW5kKHRoaXMpLHRoaXMuc2Vzc2lvbi5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlT3ZlcndyaXRlXCIsdGhpcy4kb25DdXJzb3JDaGFuZ2UpLHRoaXMuJG9uU2Nyb2xsVG9wQ2hhbmdlPXRoaXMub25TY3JvbGxUb3BDaGFuZ2UuYmluZCh0aGlzKSx0aGlzLnNlc3Npb24uYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVNjcm9sbFRvcFwiLHRoaXMuJG9uU2Nyb2xsVG9wQ2hhbmdlKSx0aGlzLiRvblNjcm9sbExlZnRDaGFuZ2U9dGhpcy5vblNjcm9sbExlZnRDaGFuZ2UuYmluZCh0aGlzKSx0aGlzLnNlc3Npb24uYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVNjcm9sbExlZnRcIix0aGlzLiRvblNjcm9sbExlZnRDaGFuZ2UpLHRoaXMuc2VsZWN0aW9uPWUuZ2V0U2VsZWN0aW9uKCksdGhpcy5zZWxlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZUN1cnNvclwiLHRoaXMuJG9uQ3Vyc29yQ2hhbmdlKSx0aGlzLiRvblNlbGVjdGlvbkNoYW5nZT10aGlzLm9uU2VsZWN0aW9uQ2hhbmdlLmJpbmQodGhpcyksdGhpcy5zZWxlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVNlbGVjdGlvblwiLHRoaXMuJG9uU2VsZWN0aW9uQ2hhbmdlKSx0aGlzLm9uQ2hhbmdlTW9kZSgpLHRoaXMuJGJsb2NrU2Nyb2xsaW5nKz0xLHRoaXMub25DdXJzb3JDaGFuZ2UoKSx0aGlzLiRibG9ja1Njcm9sbGluZy09MSx0aGlzLm9uU2Nyb2xsVG9wQ2hhbmdlKCksdGhpcy5vblNjcm9sbExlZnRDaGFuZ2UoKSx0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKCksdGhpcy5vbkNoYW5nZUZyb250TWFya2VyKCksdGhpcy5vbkNoYW5nZUJhY2tNYXJrZXIoKSx0aGlzLm9uQ2hhbmdlQnJlYWtwb2ludCgpLHRoaXMub25DaGFuZ2VBbm5vdGF0aW9uKCksdGhpcy5zZXNzaW9uLmdldFVzZVdyYXBNb2RlKCkmJnRoaXMucmVuZGVyZXIuYWRqdXN0V3JhcExpbWl0KCksdGhpcy5yZW5kZXJlci51cGRhdGVGdWxsKCkpOih0aGlzLnNlbGVjdGlvbj1udWxsLHRoaXMucmVuZGVyZXIuc2V0U2Vzc2lvbihlKSksdGhpcy5fc2lnbmFsKFwiY2hhbmdlU2Vzc2lvblwiLHtzZXNzaW9uOmUsb2xkU2Vzc2lvbjp0fSksdGhpcy5jdXJPcD1udWxsLHQmJnQuX3NpZ25hbChcImNoYW5nZUVkaXRvclwiLHtvbGRFZGl0b3I6dGhpc30pLGUmJmUuX3NpZ25hbChcImNoYW5nZUVkaXRvclwiLHtlZGl0b3I6dGhpc30pfSx0aGlzLmdldFNlc3Npb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXNzaW9ufSx0aGlzLnNldFZhbHVlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc2Vzc2lvbi5kb2Muc2V0VmFsdWUoZSksdD90PT0xP3RoaXMubmF2aWdhdGVGaWxlRW5kKCk6dD09LTEmJnRoaXMubmF2aWdhdGVGaWxlU3RhcnQoKTp0aGlzLnNlbGVjdEFsbCgpLGV9LHRoaXMuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXNzaW9uLmdldFZhbHVlKCl9LHRoaXMuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9ufSx0aGlzLnJlc2l6ZT1mdW5jdGlvbihlKXt0aGlzLnJlbmRlcmVyLm9uUmVzaXplKGUpfSx0aGlzLnNldFRoZW1lPWZ1bmN0aW9uKGUsdCl7dGhpcy5yZW5kZXJlci5zZXRUaGVtZShlLHQpfSx0aGlzLmdldFRoZW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZXIuZ2V0VGhlbWUoKX0sdGhpcy5zZXRTdHlsZT1mdW5jdGlvbihlKXt0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGUpfSx0aGlzLnVuc2V0U3R5bGU9ZnVuY3Rpb24oZSl7dGhpcy5yZW5kZXJlci51bnNldFN0eWxlKGUpfSx0aGlzLmdldEZvbnRTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwiZm9udFNpemVcIil8fGkuY29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRhaW5lcixcImZvbnRTaXplXCIpfSx0aGlzLnNldEZvbnRTaXplPWZ1bmN0aW9uKGUpe3RoaXMuc2V0T3B0aW9uKFwiZm9udFNpemVcIixlKX0sdGhpcy4kaGlnaGxpZ2h0QnJhY2tldHM9ZnVuY3Rpb24oKXt0aGlzLnNlc3Npb24uJGJyYWNrZXRIaWdobGlnaHQmJih0aGlzLnNlc3Npb24ucmVtb3ZlTWFya2VyKHRoaXMuc2Vzc2lvbi4kYnJhY2tldEhpZ2hsaWdodCksdGhpcy5zZXNzaW9uLiRicmFja2V0SGlnaGxpZ2h0PW51bGwpO2lmKHRoaXMuJGhpZ2hsaWdodFBlbmRpbmcpcmV0dXJuO3ZhciBlPXRoaXM7dGhpcy4kaGlnaGxpZ2h0UGVuZGluZz0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS4kaGlnaGxpZ2h0UGVuZGluZz0hMTt2YXIgdD1lLnNlc3Npb247aWYoIXR8fCF0LmJnVG9rZW5pemVyKXJldHVybjt2YXIgbj10LmZpbmRNYXRjaGluZ0JyYWNrZXQoZS5nZXRDdXJzb3JQb3NpdGlvbigpKTtpZihuKXZhciByPW5ldyBwKG4ucm93LG4uY29sdW1uLG4ucm93LG4uY29sdW1uKzEpO2Vsc2UgaWYodC4kbW9kZS5nZXRNYXRjaGluZyl2YXIgcj10LiRtb2RlLmdldE1hdGNoaW5nKGUuc2Vzc2lvbik7ciYmKHQuJGJyYWNrZXRIaWdobGlnaHQ9dC5hZGRNYXJrZXIocixcImFjZV9icmFja2V0XCIsXCJ0ZXh0XCIpKX0sNTApfSx0aGlzLiRoaWdobGlnaHRUYWdzPWZ1bmN0aW9uKCl7aWYodGhpcy4kaGlnaGxpZ2h0VGFnUGVuZGluZylyZXR1cm47dmFyIGU9dGhpczt0aGlzLiRoaWdobGlnaHRUYWdQZW5kaW5nPSEwLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLiRoaWdobGlnaHRUYWdQZW5kaW5nPSExO3ZhciB0PWUuc2Vzc2lvbjtpZighdHx8IXQuYmdUb2tlbml6ZXIpcmV0dXJuO3ZhciBuPWUuZ2V0Q3Vyc29yUG9zaXRpb24oKSxyPW5ldyB5KGUuc2Vzc2lvbixuLnJvdyxuLmNvbHVtbiksaT1yLmdldEN1cnJlbnRUb2tlbigpO2lmKCFpfHwhL1xcYig/OnRhZy1vcGVufHRhZy1uYW1lKS8udGVzdChpLnR5cGUpKXt0LnJlbW92ZU1hcmtlcih0LiR0YWdIaWdobGlnaHQpLHQuJHRhZ0hpZ2hsaWdodD1udWxsO3JldHVybn1pZihpLnR5cGUuaW5kZXhPZihcInRhZy1vcGVuXCIpIT0tMSl7aT1yLnN0ZXBGb3J3YXJkKCk7aWYoIWkpcmV0dXJufXZhciBzPWkudmFsdWUsbz0wLHU9ci5zdGVwQmFja3dhcmQoKTtpZih1LnZhbHVlPT1cIjxcIil7ZG8gdT1pLGk9ci5zdGVwRm9yd2FyZCgpLGkmJmkudmFsdWU9PT1zJiZpLnR5cGUuaW5kZXhPZihcInRhZy1uYW1lXCIpIT09LTEmJih1LnZhbHVlPT09XCI8XCI/bysrOnUudmFsdWU9PT1cIjwvXCImJm8tLSk7d2hpbGUoaSYmbz49MCl9ZWxzZXtkbyBpPXUsdT1yLnN0ZXBCYWNrd2FyZCgpLGkmJmkudmFsdWU9PT1zJiZpLnR5cGUuaW5kZXhPZihcInRhZy1uYW1lXCIpIT09LTEmJih1LnZhbHVlPT09XCI8XCI/bysrOnUudmFsdWU9PT1cIjwvXCImJm8tLSk7d2hpbGUodSYmbzw9MCk7ci5zdGVwRm9yd2FyZCgpfWlmKCFpKXt0LnJlbW92ZU1hcmtlcih0LiR0YWdIaWdobGlnaHQpLHQuJHRhZ0hpZ2hsaWdodD1udWxsO3JldHVybn12YXIgYT1yLmdldEN1cnJlbnRUb2tlblJvdygpLGY9ci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSxsPW5ldyBwKGEsZixhLGYraS52YWx1ZS5sZW5ndGgpO3QuJHRhZ0hpZ2hsaWdodCYmbC5jb21wYXJlUmFuZ2UodC4kYmFja01hcmtlcnNbdC4kdGFnSGlnaGxpZ2h0XS5yYW5nZSkhPT0wJiYodC5yZW1vdmVNYXJrZXIodC4kdGFnSGlnaGxpZ2h0KSx0LiR0YWdIaWdobGlnaHQ9bnVsbCksbCYmIXQuJHRhZ0hpZ2hsaWdodCYmKHQuJHRhZ0hpZ2hsaWdodD10LmFkZE1hcmtlcihsLFwiYWNlX2JyYWNrZXRcIixcInRleHRcIikpfSw1MCl9LHRoaXMuZm9jdXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnRleHRJbnB1dC5mb2N1cygpfSksdGhpcy50ZXh0SW5wdXQuZm9jdXMoKX0sdGhpcy5pc0ZvY3VzZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0SW5wdXQuaXNGb2N1c2VkKCl9LHRoaXMuYmx1cj1mdW5jdGlvbigpe3RoaXMudGV4dElucHV0LmJsdXIoKX0sdGhpcy5vbkZvY3VzPWZ1bmN0aW9uKGUpe2lmKHRoaXMuJGlzRm9jdXNlZClyZXR1cm47dGhpcy4kaXNGb2N1c2VkPSEwLHRoaXMucmVuZGVyZXIuc2hvd0N1cnNvcigpLHRoaXMucmVuZGVyZXIudmlzdWFsaXplRm9jdXMoKSx0aGlzLl9lbWl0KFwiZm9jdXNcIixlKX0sdGhpcy5vbkJsdXI9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuJGlzRm9jdXNlZClyZXR1cm47dGhpcy4kaXNGb2N1c2VkPSExLHRoaXMucmVuZGVyZXIuaGlkZUN1cnNvcigpLHRoaXMucmVuZGVyZXIudmlzdWFsaXplQmx1cigpLHRoaXMuX2VtaXQoXCJibHVyXCIsZSl9LHRoaXMuJGN1cnNvckNoYW5nZT1mdW5jdGlvbigpe3RoaXMucmVuZGVyZXIudXBkYXRlQ3Vyc29yKCl9LHRoaXMub25Eb2N1bWVudENoYW5nZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlc3Npb24uJHVzZVdyYXBNb2RlLG49ZS5zdGFydC5yb3c9PWUuZW5kLnJvdz9lLmVuZC5yb3c6SW5maW5pdHk7dGhpcy5yZW5kZXJlci51cGRhdGVMaW5lcyhlLnN0YXJ0LnJvdyxuLHQpLHRoaXMuX3NpZ25hbChcImNoYW5nZVwiLGUpLHRoaXMuJGN1cnNvckNoYW5nZSgpLHRoaXMuJHVwZGF0ZUhpZ2hsaWdodEFjdGl2ZUxpbmUoKX0sdGhpcy5vblRva2VuaXplclVwZGF0ZT1mdW5jdGlvbihlKXt2YXIgdD1lLmRhdGE7dGhpcy5yZW5kZXJlci51cGRhdGVMaW5lcyh0LmZpcnN0LHQubGFzdCl9LHRoaXMub25TY3JvbGxUb3BDaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLnNjcm9sbFRvWSh0aGlzLnNlc3Npb24uZ2V0U2Nyb2xsVG9wKCkpfSx0aGlzLm9uU2Nyb2xsTGVmdENoYW5nZT1mdW5jdGlvbigpe3RoaXMucmVuZGVyZXIuc2Nyb2xsVG9YKHRoaXMuc2Vzc2lvbi5nZXRTY3JvbGxMZWZ0KCkpfSx0aGlzLm9uQ3Vyc29yQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy4kY3Vyc29yQ2hhbmdlKCksdGhpcy4kYmxvY2tTY3JvbGxpbmd8fChnLndhcm4oXCJBdXRvbWF0aWNhbGx5IHNjcm9sbGluZyBjdXJzb3IgaW50byB2aWV3IGFmdGVyIHNlbGVjdGlvbiBjaGFuZ2VcIixcInRoaXMgd2lsbCBiZSBkaXNhYmxlZCBpbiB0aGUgbmV4dCB2ZXJzaW9uXCIsXCJzZXQgZWRpdG9yLiRibG9ja1Njcm9sbGluZyA9IEluZmluaXR5IHRvIGRpc2FibGUgdGhpcyBtZXNzYWdlXCIpLHRoaXMucmVuZGVyZXIuc2Nyb2xsQ3Vyc29ySW50b1ZpZXcoKSksdGhpcy4kaGlnaGxpZ2h0QnJhY2tldHMoKSx0aGlzLiRoaWdobGlnaHRUYWdzKCksdGhpcy4kdXBkYXRlSGlnaGxpZ2h0QWN0aXZlTGluZSgpLHRoaXMuX3NpZ25hbChcImNoYW5nZVNlbGVjdGlvblwiKX0sdGhpcy4kdXBkYXRlSGlnaGxpZ2h0QWN0aXZlTGluZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0U2Vzc2lvbigpLHQ7aWYodGhpcy4kaGlnaGxpZ2h0QWN0aXZlTGluZSl7aWYodGhpcy4kc2VsZWN0aW9uU3R5bGUhPVwibGluZVwifHwhdGhpcy5zZWxlY3Rpb24uaXNNdWx0aUxpbmUoKSl0PXRoaXMuZ2V0Q3Vyc29yUG9zaXRpb24oKTt0aGlzLnJlbmRlcmVyLiRtYXhMaW5lcyYmdGhpcy5zZXNzaW9uLmdldExlbmd0aCgpPT09MSYmISh0aGlzLnJlbmRlcmVyLiRtaW5MaW5lcz4xKSYmKHQ9ITEpfWlmKGUuJGhpZ2hsaWdodExpbmVNYXJrZXImJiF0KWUucmVtb3ZlTWFya2VyKGUuJGhpZ2hsaWdodExpbmVNYXJrZXIuaWQpLGUuJGhpZ2hsaWdodExpbmVNYXJrZXI9bnVsbDtlbHNlIGlmKCFlLiRoaWdobGlnaHRMaW5lTWFya2VyJiZ0KXt2YXIgbj1uZXcgcCh0LnJvdyx0LmNvbHVtbix0LnJvdyxJbmZpbml0eSk7bi5pZD1lLmFkZE1hcmtlcihuLFwiYWNlX2FjdGl2ZS1saW5lXCIsXCJzY3JlZW5MaW5lXCIpLGUuJGhpZ2hsaWdodExpbmVNYXJrZXI9bn1lbHNlIHQmJihlLiRoaWdobGlnaHRMaW5lTWFya2VyLnN0YXJ0LnJvdz10LnJvdyxlLiRoaWdobGlnaHRMaW5lTWFya2VyLmVuZC5yb3c9dC5yb3csZS4kaGlnaGxpZ2h0TGluZU1hcmtlci5zdGFydC5jb2x1bW49dC5jb2x1bW4sZS5fc2lnbmFsKFwiY2hhbmdlQmFja01hcmtlclwiKSl9LHRoaXMub25TZWxlY3Rpb25DaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zZXNzaW9uO3QuJHNlbGVjdGlvbk1hcmtlciYmdC5yZW1vdmVNYXJrZXIodC4kc2VsZWN0aW9uTWFya2VyKSx0LiRzZWxlY3Rpb25NYXJrZXI9bnVsbDtpZighdGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpKXt2YXIgbj10aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpLHI9dGhpcy5nZXRTZWxlY3Rpb25TdHlsZSgpO3QuJHNlbGVjdGlvbk1hcmtlcj10LmFkZE1hcmtlcihuLFwiYWNlX3NlbGVjdGlvblwiLHIpfWVsc2UgdGhpcy4kdXBkYXRlSGlnaGxpZ2h0QWN0aXZlTGluZSgpO3ZhciBpPXRoaXMuJGhpZ2hsaWdodFNlbGVjdGVkV29yZCYmdGhpcy4kZ2V0U2VsZWN0aW9uSGlnaExpZ2h0UmVnZXhwKCk7dGhpcy5zZXNzaW9uLmhpZ2hsaWdodChpKSx0aGlzLl9zaWduYWwoXCJjaGFuZ2VTZWxlY3Rpb25cIil9LHRoaXMuJGdldFNlbGVjdGlvbkhpZ2hMaWdodFJlZ2V4cD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuc2Vzc2lvbix0PXRoaXMuZ2V0U2VsZWN0aW9uUmFuZ2UoKTtpZih0LmlzRW1wdHkoKXx8dC5pc011bHRpTGluZSgpKXJldHVybjt2YXIgbj10LnN0YXJ0LmNvbHVtbi0xLHI9dC5lbmQuY29sdW1uKzEsaT1lLmdldExpbmUodC5zdGFydC5yb3cpLHM9aS5sZW5ndGgsbz1pLnN1YnN0cmluZyhNYXRoLm1heChuLDApLE1hdGgubWluKHIscykpO2lmKG4+PTAmJi9eW1xcd1xcZF0vLnRlc3Qobyl8fHI8PXMmJi9bXFx3XFxkXSQvLnRlc3QobykpcmV0dXJuO289aS5zdWJzdHJpbmcodC5zdGFydC5jb2x1bW4sdC5lbmQuY29sdW1uKTtpZighL15bXFx3XFxkXSskLy50ZXN0KG8pKXJldHVybjt2YXIgdT10aGlzLiRzZWFyY2guJGFzc2VtYmxlUmVnRXhwKHt3aG9sZVdvcmQ6ITAsY2FzZVNlbnNpdGl2ZTohMCxuZWVkbGU6b30pO3JldHVybiB1fSx0aGlzLm9uQ2hhbmdlRnJvbnRNYXJrZXI9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLnVwZGF0ZUZyb250TWFya2VycygpfSx0aGlzLm9uQ2hhbmdlQmFja01hcmtlcj1mdW5jdGlvbigpe3RoaXMucmVuZGVyZXIudXBkYXRlQmFja01hcmtlcnMoKX0sdGhpcy5vbkNoYW5nZUJyZWFrcG9pbnQ9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLnVwZGF0ZUJyZWFrcG9pbnRzKCl9LHRoaXMub25DaGFuZ2VBbm5vdGF0aW9uPWZ1bmN0aW9uKCl7dGhpcy5yZW5kZXJlci5zZXRBbm5vdGF0aW9ucyh0aGlzLnNlc3Npb24uZ2V0QW5ub3RhdGlvbnMoKSl9LHRoaXMub25DaGFuZ2VNb2RlPWZ1bmN0aW9uKGUpe3RoaXMucmVuZGVyZXIudXBkYXRlVGV4dCgpLHRoaXMuX2VtaXQoXCJjaGFuZ2VNb2RlXCIsZSl9LHRoaXMub25DaGFuZ2VXcmFwTGltaXQ9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLnVwZGF0ZUZ1bGwoKX0sdGhpcy5vbkNoYW5nZVdyYXBNb2RlPWZ1bmN0aW9uKCl7dGhpcy5yZW5kZXJlci5vblJlc2l6ZSghMCl9LHRoaXMub25DaGFuZ2VGb2xkPWZ1bmN0aW9uKCl7dGhpcy4kdXBkYXRlSGlnaGxpZ2h0QWN0aXZlTGluZSgpLHRoaXMucmVuZGVyZXIudXBkYXRlRnVsbCgpfSx0aGlzLmdldFNlbGVjdGVkVGV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlc3Npb24uZ2V0VGV4dFJhbmdlKHRoaXMuZ2V0U2VsZWN0aW9uUmFuZ2UoKSl9LHRoaXMuZ2V0Q29weVRleHQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldFNlbGVjdGVkVGV4dCgpO3JldHVybiB0aGlzLl9zaWduYWwoXCJjb3B5XCIsZSksZX0sdGhpcy5vbkNvcHk9ZnVuY3Rpb24oKXt0aGlzLmNvbW1hbmRzLmV4ZWMoXCJjb3B5XCIsdGhpcyl9LHRoaXMub25DdXQ9ZnVuY3Rpb24oKXt0aGlzLmNvbW1hbmRzLmV4ZWMoXCJjdXRcIix0aGlzKX0sdGhpcy5vblBhc3RlPWZ1bmN0aW9uKGUsdCl7dmFyIG49e3RleHQ6ZSxldmVudDp0fTt0aGlzLmNvbW1hbmRzLmV4ZWMoXCJwYXN0ZVwiLHRoaXMsbil9LHRoaXMuJGhhbmRsZVBhc3RlPWZ1bmN0aW9uKGUpe3R5cGVvZiBlPT1cInN0cmluZ1wiJiYoZT17dGV4dDplfSksdGhpcy5fc2lnbmFsKFwicGFzdGVcIixlKTt2YXIgdD1lLnRleHQ7aWYoIXRoaXMuaW5NdWx0aVNlbGVjdE1vZGV8fHRoaXMuaW5WaXJ0dWFsU2VsZWN0aW9uTW9kZSl0aGlzLmluc2VydCh0KTtlbHNle3ZhciBuPXQuc3BsaXQoL1xcclxcbnxcXHJ8XFxuLykscj10aGlzLnNlbGVjdGlvbi5yYW5nZUxpc3QucmFuZ2VzO2lmKG4ubGVuZ3RoPnIubGVuZ3RofHxuLmxlbmd0aDwyfHwhblsxXSlyZXR1cm4gdGhpcy5jb21tYW5kcy5leGVjKFwiaW5zZXJ0c3RyaW5nXCIsdGhpcyx0KTtmb3IodmFyIGk9ci5sZW5ndGg7aS0tOyl7dmFyIHM9cltpXTtzLmlzRW1wdHkoKXx8dGhpcy5zZXNzaW9uLnJlbW92ZShzKSx0aGlzLnNlc3Npb24uaW5zZXJ0KHMuc3RhcnQsbltpXSl9fX0sdGhpcy5leGVjQ29tbWFuZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmNvbW1hbmRzLmV4ZWMoZSx0aGlzLHQpfSx0aGlzLmluc2VydD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuc2Vzc2lvbixyPW4uZ2V0TW9kZSgpLGk9dGhpcy5nZXRDdXJzb3JQb3NpdGlvbigpO2lmKHRoaXMuZ2V0QmVoYXZpb3Vyc0VuYWJsZWQoKSYmIXQpe3ZhciBzPXIudHJhbnNmb3JtQWN0aW9uKG4uZ2V0U3RhdGUoaS5yb3cpLFwiaW5zZXJ0aW9uXCIsdGhpcyxuLGUpO3MmJihlIT09cy50ZXh0JiYodGhpcy5zZXNzaW9uLm1lcmdlVW5kb0RlbHRhcz0hMSx0aGlzLiRtZXJnZU5leHRDb21tYW5kPSExKSxlPXMudGV4dCl9ZT09XCJcdFwiJiYoZT10aGlzLnNlc3Npb24uZ2V0VGFiU3RyaW5nKCkpO2lmKCF0aGlzLnNlbGVjdGlvbi5pc0VtcHR5KCkpe3ZhciBvPXRoaXMuZ2V0U2VsZWN0aW9uUmFuZ2UoKTtpPXRoaXMuc2Vzc2lvbi5yZW1vdmUobyksdGhpcy5jbGVhclNlbGVjdGlvbigpfWVsc2UgaWYodGhpcy5zZXNzaW9uLmdldE92ZXJ3cml0ZSgpKXt2YXIgbz1uZXcgcC5mcm9tUG9pbnRzKGksaSk7by5lbmQuY29sdW1uKz1lLmxlbmd0aCx0aGlzLnNlc3Npb24ucmVtb3ZlKG8pfWlmKGU9PVwiXFxuXCJ8fGU9PVwiXFxyXFxuXCIpe3ZhciB1PW4uZ2V0TGluZShpLnJvdyk7aWYoaS5jb2x1bW4+dS5zZWFyY2goL1xcU3wkLykpe3ZhciBhPXUuc3Vic3RyKGkuY29sdW1uKS5zZWFyY2goL1xcU3wkLyk7bi5kb2MucmVtb3ZlSW5MaW5lKGkucm93LGkuY29sdW1uLGkuY29sdW1uK2EpfX10aGlzLmNsZWFyU2VsZWN0aW9uKCk7dmFyIGY9aS5jb2x1bW4sbD1uLmdldFN0YXRlKGkucm93KSx1PW4uZ2V0TGluZShpLnJvdyksYz1yLmNoZWNrT3V0ZGVudChsLHUsZSksaD1uLmluc2VydChpLGUpO3MmJnMuc2VsZWN0aW9uJiYocy5zZWxlY3Rpb24ubGVuZ3RoPT0yP3RoaXMuc2VsZWN0aW9uLnNldFNlbGVjdGlvblJhbmdlKG5ldyBwKGkucm93LGYrcy5zZWxlY3Rpb25bMF0saS5yb3csZitzLnNlbGVjdGlvblsxXSkpOnRoaXMuc2VsZWN0aW9uLnNldFNlbGVjdGlvblJhbmdlKG5ldyBwKGkucm93K3Muc2VsZWN0aW9uWzBdLHMuc2VsZWN0aW9uWzFdLGkucm93K3Muc2VsZWN0aW9uWzJdLHMuc2VsZWN0aW9uWzNdKSkpO2lmKG4uZ2V0RG9jdW1lbnQoKS5pc05ld0xpbmUoZSkpe3ZhciBkPXIuZ2V0TmV4dExpbmVJbmRlbnQobCx1LnNsaWNlKDAsaS5jb2x1bW4pLG4uZ2V0VGFiU3RyaW5nKCkpO24uaW5zZXJ0KHtyb3c6aS5yb3crMSxjb2x1bW46MH0sZCl9YyYmci5hdXRvT3V0ZGVudChsLG4saS5yb3cpfSx0aGlzLm9uVGV4dElucHV0PWZ1bmN0aW9uKGUpe3RoaXMua2V5QmluZGluZy5vblRleHRJbnB1dChlKX0sdGhpcy5vbkNvbW1hbmRLZXk9ZnVuY3Rpb24oZSx0LG4pe3RoaXMua2V5QmluZGluZy5vbkNvbW1hbmRLZXkoZSx0LG4pfSx0aGlzLnNldE92ZXJ3cml0ZT1mdW5jdGlvbihlKXt0aGlzLnNlc3Npb24uc2V0T3ZlcndyaXRlKGUpfSx0aGlzLmdldE92ZXJ3cml0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlc3Npb24uZ2V0T3ZlcndyaXRlKCl9LHRoaXMudG9nZ2xlT3ZlcndyaXRlPWZ1bmN0aW9uKCl7dGhpcy5zZXNzaW9uLnRvZ2dsZU92ZXJ3cml0ZSgpfSx0aGlzLnNldFNjcm9sbFNwZWVkPWZ1bmN0aW9uKGUpe3RoaXMuc2V0T3B0aW9uKFwic2Nyb2xsU3BlZWRcIixlKX0sdGhpcy5nZXRTY3JvbGxTcGVlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE9wdGlvbihcInNjcm9sbFNwZWVkXCIpfSx0aGlzLnNldERyYWdEZWxheT1mdW5jdGlvbihlKXt0aGlzLnNldE9wdGlvbihcImRyYWdEZWxheVwiLGUpfSx0aGlzLmdldERyYWdEZWxheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE9wdGlvbihcImRyYWdEZWxheVwiKX0sdGhpcy5zZXRTZWxlY3Rpb25TdHlsZT1mdW5jdGlvbihlKXt0aGlzLnNldE9wdGlvbihcInNlbGVjdGlvblN0eWxlXCIsZSl9LHRoaXMuZ2V0U2VsZWN0aW9uU3R5bGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJzZWxlY3Rpb25TdHlsZVwiKX0sdGhpcy5zZXRIaWdobGlnaHRBY3RpdmVMaW5lPWZ1bmN0aW9uKGUpe3RoaXMuc2V0T3B0aW9uKFwiaGlnaGxpZ2h0QWN0aXZlTGluZVwiLGUpfSx0aGlzLmdldEhpZ2hsaWdodEFjdGl2ZUxpbmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJoaWdobGlnaHRBY3RpdmVMaW5lXCIpfSx0aGlzLnNldEhpZ2hsaWdodEd1dHRlckxpbmU9ZnVuY3Rpb24oZSl7dGhpcy5zZXRPcHRpb24oXCJoaWdobGlnaHRHdXR0ZXJMaW5lXCIsZSl9LHRoaXMuZ2V0SGlnaGxpZ2h0R3V0dGVyTGluZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE9wdGlvbihcImhpZ2hsaWdodEd1dHRlckxpbmVcIil9LHRoaXMuc2V0SGlnaGxpZ2h0U2VsZWN0ZWRXb3JkPWZ1bmN0aW9uKGUpe3RoaXMuc2V0T3B0aW9uKFwiaGlnaGxpZ2h0U2VsZWN0ZWRXb3JkXCIsZSl9LHRoaXMuZ2V0SGlnaGxpZ2h0U2VsZWN0ZWRXb3JkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGhpZ2hsaWdodFNlbGVjdGVkV29yZH0sdGhpcy5zZXRBbmltYXRlZFNjcm9sbD1mdW5jdGlvbihlKXt0aGlzLnJlbmRlcmVyLnNldEFuaW1hdGVkU2Nyb2xsKGUpfSx0aGlzLmdldEFuaW1hdGVkU2Nyb2xsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZXIuZ2V0QW5pbWF0ZWRTY3JvbGwoKX0sdGhpcy5zZXRTaG93SW52aXNpYmxlcz1mdW5jdGlvbihlKXt0aGlzLnJlbmRlcmVyLnNldFNob3dJbnZpc2libGVzKGUpfSx0aGlzLmdldFNob3dJbnZpc2libGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZXIuZ2V0U2hvd0ludmlzaWJsZXMoKX0sdGhpcy5zZXREaXNwbGF5SW5kZW50R3VpZGVzPWZ1bmN0aW9uKGUpe3RoaXMucmVuZGVyZXIuc2V0RGlzcGxheUluZGVudEd1aWRlcyhlKX0sdGhpcy5nZXREaXNwbGF5SW5kZW50R3VpZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZXIuZ2V0RGlzcGxheUluZGVudEd1aWRlcygpfSx0aGlzLnNldFNob3dQcmludE1hcmdpbj1mdW5jdGlvbihlKXt0aGlzLnJlbmRlcmVyLnNldFNob3dQcmludE1hcmdpbihlKX0sdGhpcy5nZXRTaG93UHJpbnRNYXJnaW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW5kZXJlci5nZXRTaG93UHJpbnRNYXJnaW4oKX0sdGhpcy5zZXRQcmludE1hcmdpbkNvbHVtbj1mdW5jdGlvbihlKXt0aGlzLnJlbmRlcmVyLnNldFByaW50TWFyZ2luQ29sdW1uKGUpfSx0aGlzLmdldFByaW50TWFyZ2luQ29sdW1uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZXIuZ2V0UHJpbnRNYXJnaW5Db2x1bW4oKX0sdGhpcy5zZXRSZWFkT25seT1mdW5jdGlvbihlKXt0aGlzLnNldE9wdGlvbihcInJlYWRPbmx5XCIsZSl9LHRoaXMuZ2V0UmVhZE9ubHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJyZWFkT25seVwiKX0sdGhpcy5zZXRCZWhhdmlvdXJzRW5hYmxlZD1mdW5jdGlvbihlKXt0aGlzLnNldE9wdGlvbihcImJlaGF2aW91cnNFbmFibGVkXCIsZSl9LHRoaXMuZ2V0QmVoYXZpb3Vyc0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJiZWhhdmlvdXJzRW5hYmxlZFwiKX0sdGhpcy5zZXRXcmFwQmVoYXZpb3Vyc0VuYWJsZWQ9ZnVuY3Rpb24oZSl7dGhpcy5zZXRPcHRpb24oXCJ3cmFwQmVoYXZpb3Vyc0VuYWJsZWRcIixlKX0sdGhpcy5nZXRXcmFwQmVoYXZpb3Vyc0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJ3cmFwQmVoYXZpb3Vyc0VuYWJsZWRcIil9LHRoaXMuc2V0U2hvd0ZvbGRXaWRnZXRzPWZ1bmN0aW9uKGUpe3RoaXMuc2V0T3B0aW9uKFwic2hvd0ZvbGRXaWRnZXRzXCIsZSl9LHRoaXMuZ2V0U2hvd0ZvbGRXaWRnZXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwic2hvd0ZvbGRXaWRnZXRzXCIpfSx0aGlzLnNldEZhZGVGb2xkV2lkZ2V0cz1mdW5jdGlvbihlKXt0aGlzLnNldE9wdGlvbihcImZhZGVGb2xkV2lkZ2V0c1wiLGUpfSx0aGlzLmdldEZhZGVGb2xkV2lkZ2V0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE9wdGlvbihcImZhZGVGb2xkV2lkZ2V0c1wiKX0sdGhpcy5yZW1vdmU9ZnVuY3Rpb24oZSl7dGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpJiYoZT09XCJsZWZ0XCI/dGhpcy5zZWxlY3Rpb24uc2VsZWN0TGVmdCgpOnRoaXMuc2VsZWN0aW9uLnNlbGVjdFJpZ2h0KCkpO3ZhciB0PXRoaXMuZ2V0U2VsZWN0aW9uUmFuZ2UoKTtpZih0aGlzLmdldEJlaGF2aW91cnNFbmFibGVkKCkpe3ZhciBuPXRoaXMuc2Vzc2lvbixyPW4uZ2V0U3RhdGUodC5zdGFydC5yb3cpLGk9bi5nZXRNb2RlKCkudHJhbnNmb3JtQWN0aW9uKHIsXCJkZWxldGlvblwiLHRoaXMsbix0KTtpZih0LmVuZC5jb2x1bW49PT0wKXt2YXIgcz1uLmdldFRleHRSYW5nZSh0KTtpZihzW3MubGVuZ3RoLTFdPT1cIlxcblwiKXt2YXIgbz1uLmdldExpbmUodC5lbmQucm93KTsvXlxccyskLy50ZXN0KG8pJiYodC5lbmQuY29sdW1uPW8ubGVuZ3RoKX19aSYmKHQ9aSl9dGhpcy5zZXNzaW9uLnJlbW92ZSh0KSx0aGlzLmNsZWFyU2VsZWN0aW9uKCl9LHRoaXMucmVtb3ZlV29yZFJpZ2h0PWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpJiZ0aGlzLnNlbGVjdGlvbi5zZWxlY3RXb3JkUmlnaHQoKSx0aGlzLnNlc3Npb24ucmVtb3ZlKHRoaXMuZ2V0U2VsZWN0aW9uUmFuZ2UoKSksdGhpcy5jbGVhclNlbGVjdGlvbigpfSx0aGlzLnJlbW92ZVdvcmRMZWZ0PWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpJiZ0aGlzLnNlbGVjdGlvbi5zZWxlY3RXb3JkTGVmdCgpLHRoaXMuc2Vzc2lvbi5yZW1vdmUodGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpKSx0aGlzLmNsZWFyU2VsZWN0aW9uKCl9LHRoaXMucmVtb3ZlVG9MaW5lU3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGlvbi5pc0VtcHR5KCkmJnRoaXMuc2VsZWN0aW9uLnNlbGVjdExpbmVTdGFydCgpLHRoaXMuc2Vzc2lvbi5yZW1vdmUodGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpKSx0aGlzLmNsZWFyU2VsZWN0aW9uKCl9LHRoaXMucmVtb3ZlVG9MaW5lRW5kPWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpJiZ0aGlzLnNlbGVjdGlvbi5zZWxlY3RMaW5lRW5kKCk7dmFyIGU9dGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpO2Uuc3RhcnQuY29sdW1uPT1lLmVuZC5jb2x1bW4mJmUuc3RhcnQucm93PT1lLmVuZC5yb3cmJihlLmVuZC5jb2x1bW49MCxlLmVuZC5yb3crKyksdGhpcy5zZXNzaW9uLnJlbW92ZShlKSx0aGlzLmNsZWFyU2VsZWN0aW9uKCl9LHRoaXMuc3BsaXRMaW5lPWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpfHwodGhpcy5zZXNzaW9uLnJlbW92ZSh0aGlzLmdldFNlbGVjdGlvblJhbmdlKCkpLHRoaXMuY2xlYXJTZWxlY3Rpb24oKSk7dmFyIGU9dGhpcy5nZXRDdXJzb3JQb3NpdGlvbigpO3RoaXMuaW5zZXJ0KFwiXFxuXCIpLHRoaXMubW92ZUN1cnNvclRvUG9zaXRpb24oZSl9LHRoaXMudHJhbnNwb3NlTGV0dGVycz1mdW5jdGlvbigpe2lmKCF0aGlzLnNlbGVjdGlvbi5pc0VtcHR5KCkpcmV0dXJuO3ZhciBlPXRoaXMuZ2V0Q3Vyc29yUG9zaXRpb24oKSx0PWUuY29sdW1uO2lmKHQ9PT0wKXJldHVybjt2YXIgbj10aGlzLnNlc3Npb24uZ2V0TGluZShlLnJvdykscixpO3Q8bi5sZW5ndGg/KHI9bi5jaGFyQXQodCkrbi5jaGFyQXQodC0xKSxpPW5ldyBwKGUucm93LHQtMSxlLnJvdyx0KzEpKToocj1uLmNoYXJBdCh0LTEpK24uY2hhckF0KHQtMiksaT1uZXcgcChlLnJvdyx0LTIsZS5yb3csdCkpLHRoaXMuc2Vzc2lvbi5yZXBsYWNlKGkscil9LHRoaXMudG9Mb3dlckNhc2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldFNlbGVjdGlvblJhbmdlKCk7dGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpJiZ0aGlzLnNlbGVjdGlvbi5zZWxlY3RXb3JkKCk7dmFyIHQ9dGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpLG49dGhpcy5zZXNzaW9uLmdldFRleHRSYW5nZSh0KTt0aGlzLnNlc3Npb24ucmVwbGFjZSh0LG4udG9Mb3dlckNhc2UoKSksdGhpcy5zZWxlY3Rpb24uc2V0U2VsZWN0aW9uUmFuZ2UoZSl9LHRoaXMudG9VcHBlckNhc2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldFNlbGVjdGlvblJhbmdlKCk7dGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpJiZ0aGlzLnNlbGVjdGlvbi5zZWxlY3RXb3JkKCk7dmFyIHQ9dGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpLG49dGhpcy5zZXNzaW9uLmdldFRleHRSYW5nZSh0KTt0aGlzLnNlc3Npb24ucmVwbGFjZSh0LG4udG9VcHBlckNhc2UoKSksdGhpcy5zZWxlY3Rpb24uc2V0U2VsZWN0aW9uUmFuZ2UoZSl9LHRoaXMuaW5kZW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZXNzaW9uLHQ9dGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpO2lmKHQuc3RhcnQucm93PHQuZW5kLnJvdyl7dmFyIG49dGhpcy4kZ2V0U2VsZWN0ZWRSb3dzKCk7ZS5pbmRlbnRSb3dzKG4uZmlyc3Qsbi5sYXN0LFwiXHRcIik7cmV0dXJufWlmKHQuc3RhcnQuY29sdW1uPHQuZW5kLmNvbHVtbil7dmFyIHI9ZS5nZXRUZXh0UmFuZ2UodCk7aWYoIS9eXFxzKyQvLnRlc3Qocikpe3ZhciBuPXRoaXMuJGdldFNlbGVjdGVkUm93cygpO2UuaW5kZW50Um93cyhuLmZpcnN0LG4ubGFzdCxcIlx0XCIpO3JldHVybn19dmFyIGk9ZS5nZXRMaW5lKHQuc3RhcnQucm93KSxvPXQuc3RhcnQsdT1lLmdldFRhYlNpemUoKSxhPWUuZG9jdW1lbnRUb1NjcmVlbkNvbHVtbihvLnJvdyxvLmNvbHVtbik7aWYodGhpcy5zZXNzaW9uLmdldFVzZVNvZnRUYWJzKCkpdmFyIGY9dS1hJXUsbD1zLnN0cmluZ1JlcGVhdChcIiBcIixmKTtlbHNle3ZhciBmPWEldTt3aGlsZShpW3Quc3RhcnQuY29sdW1uXT09XCIgXCImJmYpdC5zdGFydC5jb2x1bW4tLSxmLS07dGhpcy5zZWxlY3Rpb24uc2V0U2VsZWN0aW9uUmFuZ2UodCksbD1cIlx0XCJ9cmV0dXJuIHRoaXMuaW5zZXJ0KGwpfSx0aGlzLmJsb2NrSW5kZW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kZ2V0U2VsZWN0ZWRSb3dzKCk7dGhpcy5zZXNzaW9uLmluZGVudFJvd3MoZS5maXJzdCxlLmxhc3QsXCJcdFwiKX0sdGhpcy5ibG9ja091dGRlbnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNlc3Npb24uZ2V0U2VsZWN0aW9uKCk7dGhpcy5zZXNzaW9uLm91dGRlbnRSb3dzKGUuZ2V0UmFuZ2UoKSl9LHRoaXMuc29ydExpbmVzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kZ2V0U2VsZWN0ZWRSb3dzKCksdD10aGlzLnNlc3Npb24sbj1bXTtmb3IoaT1lLmZpcnN0O2k8PWUubGFzdDtpKyspbi5wdXNoKHQuZ2V0TGluZShpKSk7bi5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudG9Mb3dlckNhc2UoKTx0LnRvTG93ZXJDYXNlKCk/LTE6ZS50b0xvd2VyQ2FzZSgpPnQudG9Mb3dlckNhc2UoKT8xOjB9KTt2YXIgcj1uZXcgcCgwLDAsMCwwKTtmb3IodmFyIGk9ZS5maXJzdDtpPD1lLmxhc3Q7aSsrKXt2YXIgcz10LmdldExpbmUoaSk7ci5zdGFydC5yb3c9aSxyLmVuZC5yb3c9aSxyLmVuZC5jb2x1bW49cy5sZW5ndGgsdC5yZXBsYWNlKHIsbltpLWUuZmlyc3RdKX19LHRoaXMudG9nZ2xlQ29tbWVudExpbmVzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZXNzaW9uLmdldFN0YXRlKHRoaXMuZ2V0Q3Vyc29yUG9zaXRpb24oKS5yb3cpLHQ9dGhpcy4kZ2V0U2VsZWN0ZWRSb3dzKCk7dGhpcy5zZXNzaW9uLmdldE1vZGUoKS50b2dnbGVDb21tZW50TGluZXMoZSx0aGlzLnNlc3Npb24sdC5maXJzdCx0Lmxhc3QpfSx0aGlzLnRvZ2dsZUJsb2NrQ29tbWVudD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q3Vyc29yUG9zaXRpb24oKSx0PXRoaXMuc2Vzc2lvbi5nZXRTdGF0ZShlLnJvdyksbj10aGlzLmdldFNlbGVjdGlvblJhbmdlKCk7dGhpcy5zZXNzaW9uLmdldE1vZGUoKS50b2dnbGVCbG9ja0NvbW1lbnQodCx0aGlzLnNlc3Npb24sbixlKX0sdGhpcy5nZXROdW1iZXJBdD1mdW5jdGlvbihlLHQpe3ZhciBuPS9bXFwtXT9bMC05XSsoPzpcXC5bMC05XSspPy9nO24ubGFzdEluZGV4PTA7dmFyIHI9dGhpcy5zZXNzaW9uLmdldExpbmUoZSk7d2hpbGUobi5sYXN0SW5kZXg8dCl7dmFyIGk9bi5leGVjKHIpO2lmKGkuaW5kZXg8PXQmJmkuaW5kZXgraVswXS5sZW5ndGg+PXQpe3ZhciBzPXt2YWx1ZTppWzBdLHN0YXJ0OmkuaW5kZXgsZW5kOmkuaW5kZXgraVswXS5sZW5ndGh9O3JldHVybiBzfX1yZXR1cm4gbnVsbH0sdGhpcy5tb2RpZnlOdW1iZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zZWxlY3Rpb24uZ2V0Q3Vyc29yKCkucm93LG49dGhpcy5zZWxlY3Rpb24uZ2V0Q3Vyc29yKCkuY29sdW1uLHI9bmV3IHAodCxuLTEsdCxuKSxpPXRoaXMuc2Vzc2lvbi5nZXRUZXh0UmFuZ2Uocik7aWYoIWlzTmFOKHBhcnNlRmxvYXQoaSkpJiZpc0Zpbml0ZShpKSl7dmFyIHM9dGhpcy5nZXROdW1iZXJBdCh0LG4pO2lmKHMpe3ZhciBvPXMudmFsdWUuaW5kZXhPZihcIi5cIik+PTA/cy5zdGFydCtzLnZhbHVlLmluZGV4T2YoXCIuXCIpKzE6cy5lbmQsdT1zLnN0YXJ0K3MudmFsdWUubGVuZ3RoLW8sYT1wYXJzZUZsb2F0KHMudmFsdWUpO2EqPU1hdGgucG93KDEwLHUpLG8hPT1zLmVuZCYmbjxvP2UqPU1hdGgucG93KDEwLHMuZW5kLW4tMSk6ZSo9TWF0aC5wb3coMTAscy5lbmQtbiksYSs9ZSxhLz1NYXRoLnBvdygxMCx1KTt2YXIgZj1hLnRvRml4ZWQodSksbD1uZXcgcCh0LHMuc3RhcnQsdCxzLmVuZCk7dGhpcy5zZXNzaW9uLnJlcGxhY2UobCxmKSx0aGlzLm1vdmVDdXJzb3JUbyh0LE1hdGgubWF4KHMuc3RhcnQrMSxuK2YubGVuZ3RoLXMudmFsdWUubGVuZ3RoKSl9fX0sdGhpcy5yZW1vdmVMaW5lcz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuJGdldFNlbGVjdGVkUm93cygpO3RoaXMuc2Vzc2lvbi5yZW1vdmVGdWxsTGluZXMoZS5maXJzdCxlLmxhc3QpLHRoaXMuY2xlYXJTZWxlY3Rpb24oKX0sdGhpcy5kdXBsaWNhdGVTZWxlY3Rpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNlbGVjdGlvbix0PXRoaXMuc2Vzc2lvbixuPWUuZ2V0UmFuZ2UoKSxyPWUuaXNCYWNrd2FyZHMoKTtpZihuLmlzRW1wdHkoKSl7dmFyIGk9bi5zdGFydC5yb3c7dC5kdXBsaWNhdGVMaW5lcyhpLGkpfWVsc2V7dmFyIHM9cj9uLnN0YXJ0Om4uZW5kLG89dC5pbnNlcnQocyx0LmdldFRleHRSYW5nZShuKSwhMSk7bi5zdGFydD1zLG4uZW5kPW8sZS5zZXRTZWxlY3Rpb25SYW5nZShuLHIpfX0sdGhpcy5tb3ZlTGluZXNEb3duPWZ1bmN0aW9uKCl7dGhpcy4kbW92ZUxpbmVzKDEsITEpfSx0aGlzLm1vdmVMaW5lc1VwPWZ1bmN0aW9uKCl7dGhpcy4kbW92ZUxpbmVzKC0xLCExKX0sdGhpcy5tb3ZlVGV4dD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuc2Vzc2lvbi5tb3ZlVGV4dChlLHQsbil9LHRoaXMuY29weUxpbmVzVXA9ZnVuY3Rpb24oKXt0aGlzLiRtb3ZlTGluZXMoLTEsITApfSx0aGlzLmNvcHlMaW5lc0Rvd249ZnVuY3Rpb24oKXt0aGlzLiRtb3ZlTGluZXMoMSwhMCl9LHRoaXMuJG1vdmVMaW5lcz1mdW5jdGlvbihlLHQpe3ZhciBuLHIsaT10aGlzLnNlbGVjdGlvbjtpZighaS5pbk11bHRpU2VsZWN0TW9kZXx8dGhpcy5pblZpcnR1YWxTZWxlY3Rpb25Nb2RlKXt2YXIgcz1pLnRvT3JpZW50ZWRSYW5nZSgpO249dGhpcy4kZ2V0U2VsZWN0ZWRSb3dzKHMpLHI9dGhpcy5zZXNzaW9uLiRtb3ZlTGluZXMobi5maXJzdCxuLmxhc3QsdD8wOmUpLHQmJmU9PS0xJiYocj0wKSxzLm1vdmVCeShyLDApLGkuZnJvbU9yaWVudGVkUmFuZ2Uocyl9ZWxzZXt2YXIgbz1pLnJhbmdlTGlzdC5yYW5nZXM7aS5yYW5nZUxpc3QuZGV0YWNoKHRoaXMuc2Vzc2lvbiksdGhpcy5pblZpcnR1YWxTZWxlY3Rpb25Nb2RlPSEwO3ZhciB1PTAsYT0wLGY9by5sZW5ndGg7Zm9yKHZhciBsPTA7bDxmO2wrKyl7dmFyIGM9bDtvW2xdLm1vdmVCeSh1LDApLG49dGhpcy4kZ2V0U2VsZWN0ZWRSb3dzKG9bbF0pO3ZhciBoPW4uZmlyc3QscD1uLmxhc3Q7d2hpbGUoKytsPGYpe2EmJm9bbF0ubW92ZUJ5KGEsMCk7dmFyIGQ9dGhpcy4kZ2V0U2VsZWN0ZWRSb3dzKG9bbF0pO2lmKHQmJmQuZmlyc3QhPXApYnJlYWs7aWYoIXQmJmQuZmlyc3Q+cCsxKWJyZWFrO3A9ZC5sYXN0fWwtLSx1PXRoaXMuc2Vzc2lvbi4kbW92ZUxpbmVzKGgscCx0PzA6ZSksdCYmZT09LTEmJihjPWwrMSk7d2hpbGUoYzw9bClvW2NdLm1vdmVCeSh1LDApLGMrKzt0fHwodT0wKSxhKz11fWkuZnJvbU9yaWVudGVkUmFuZ2UoaS5yYW5nZXNbMF0pLGkucmFuZ2VMaXN0LmF0dGFjaCh0aGlzLnNlc3Npb24pLHRoaXMuaW5WaXJ0dWFsU2VsZWN0aW9uTW9kZT0hMX19LHRoaXMuJGdldFNlbGVjdGVkUm93cz1mdW5jdGlvbihlKXtyZXR1cm4gZT0oZXx8dGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpKS5jb2xsYXBzZVJvd3MoKSx7Zmlyc3Q6dGhpcy5zZXNzaW9uLmdldFJvd0ZvbGRTdGFydChlLnN0YXJ0LnJvdyksbGFzdDp0aGlzLnNlc3Npb24uZ2V0Um93Rm9sZEVuZChlLmVuZC5yb3cpfX0sdGhpcy5vbkNvbXBvc2l0aW9uU3RhcnQ9ZnVuY3Rpb24oZSl7dGhpcy5yZW5kZXJlci5zaG93Q29tcG9zaXRpb24odGhpcy5nZXRDdXJzb3JQb3NpdGlvbigpKX0sdGhpcy5vbkNvbXBvc2l0aW9uVXBkYXRlPWZ1bmN0aW9uKGUpe3RoaXMucmVuZGVyZXIuc2V0Q29tcG9zaXRpb25UZXh0KGUpfSx0aGlzLm9uQ29tcG9zaXRpb25FbmQ9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLmhpZGVDb21wb3NpdGlvbigpfSx0aGlzLmdldEZpcnN0VmlzaWJsZVJvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbmRlcmVyLmdldEZpcnN0VmlzaWJsZVJvdygpfSx0aGlzLmdldExhc3RWaXNpYmxlUm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZXIuZ2V0TGFzdFZpc2libGVSb3coKX0sdGhpcy5pc1Jvd1Zpc2libGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PXRoaXMuZ2V0Rmlyc3RWaXNpYmxlUm93KCkmJmU8PXRoaXMuZ2V0TGFzdFZpc2libGVSb3coKX0sdGhpcy5pc1Jvd0Z1bGx5VmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4gZT49dGhpcy5yZW5kZXJlci5nZXRGaXJzdEZ1bGx5VmlzaWJsZVJvdygpJiZlPD10aGlzLnJlbmRlcmVyLmdldExhc3RGdWxseVZpc2libGVSb3coKX0sdGhpcy4kZ2V0VmlzaWJsZVJvd0NvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZXIuZ2V0U2Nyb2xsQm90dG9tUm93KCktdGhpcy5yZW5kZXJlci5nZXRTY3JvbGxUb3BSb3coKSsxfSx0aGlzLiRtb3ZlQnlQYWdlPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5yZW5kZXJlcixyPXRoaXMucmVuZGVyZXIubGF5ZXJDb25maWcsaT1lKk1hdGguZmxvb3Ioci5oZWlnaHQvci5saW5lSGVpZ2h0KTt0aGlzLiRibG9ja1Njcm9sbGluZysrLHQ9PT0hMD90aGlzLnNlbGVjdGlvbi4kbW92ZVNlbGVjdGlvbihmdW5jdGlvbigpe3RoaXMubW92ZUN1cnNvckJ5KGksMCl9KTp0PT09ITEmJih0aGlzLnNlbGVjdGlvbi5tb3ZlQ3Vyc29yQnkoaSwwKSx0aGlzLnNlbGVjdGlvbi5jbGVhclNlbGVjdGlvbigpKSx0aGlzLiRibG9ja1Njcm9sbGluZy0tO3ZhciBzPW4uc2Nyb2xsVG9wO24uc2Nyb2xsQnkoMCxpKnIubGluZUhlaWdodCksdCE9bnVsbCYmbi5zY3JvbGxDdXJzb3JJbnRvVmlldyhudWxsLC41KSxuLmFuaW1hdGVTY3JvbGxpbmcocyl9LHRoaXMuc2VsZWN0UGFnZURvd249ZnVuY3Rpb24oKXt0aGlzLiRtb3ZlQnlQYWdlKDEsITApfSx0aGlzLnNlbGVjdFBhZ2VVcD1mdW5jdGlvbigpe3RoaXMuJG1vdmVCeVBhZ2UoLTEsITApfSx0aGlzLmdvdG9QYWdlRG93bj1mdW5jdGlvbigpe3RoaXMuJG1vdmVCeVBhZ2UoMSwhMSl9LHRoaXMuZ290b1BhZ2VVcD1mdW5jdGlvbigpe3RoaXMuJG1vdmVCeVBhZ2UoLTEsITEpfSx0aGlzLnNjcm9sbFBhZ2VEb3duPWZ1bmN0aW9uKCl7dGhpcy4kbW92ZUJ5UGFnZSgxKX0sdGhpcy5zY3JvbGxQYWdlVXA9ZnVuY3Rpb24oKXt0aGlzLiRtb3ZlQnlQYWdlKC0xKX0sdGhpcy5zY3JvbGxUb1Jvdz1mdW5jdGlvbihlKXt0aGlzLnJlbmRlcmVyLnNjcm9sbFRvUm93KGUpfSx0aGlzLnNjcm9sbFRvTGluZT1mdW5jdGlvbihlLHQsbixyKXt0aGlzLnJlbmRlcmVyLnNjcm9sbFRvTGluZShlLHQsbixyKX0sdGhpcy5jZW50ZXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldFNlbGVjdGlvblJhbmdlKCksdD17cm93Ok1hdGguZmxvb3IoZS5zdGFydC5yb3crKGUuZW5kLnJvdy1lLnN0YXJ0LnJvdykvMiksY29sdW1uOk1hdGguZmxvb3IoZS5zdGFydC5jb2x1bW4rKGUuZW5kLmNvbHVtbi1lLnN0YXJ0LmNvbHVtbikvMil9O3RoaXMucmVuZGVyZXIuYWxpZ25DdXJzb3IodCwuNSl9LHRoaXMuZ2V0Q3Vyc29yUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24uZ2V0Q3Vyc29yKCl9LHRoaXMuZ2V0Q3Vyc29yUG9zaXRpb25TY3JlZW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbih0aGlzLmdldEN1cnNvclBvc2l0aW9uKCkpfSx0aGlzLmdldFNlbGVjdGlvblJhbmdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCl9LHRoaXMuc2VsZWN0QWxsPWZ1bmN0aW9uKCl7dGhpcy4kYmxvY2tTY3JvbGxpbmcrPTEsdGhpcy5zZWxlY3Rpb24uc2VsZWN0QWxsKCksdGhpcy4kYmxvY2tTY3JvbGxpbmctPTF9LHRoaXMuY2xlYXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGlvbi5jbGVhclNlbGVjdGlvbigpfSx0aGlzLm1vdmVDdXJzb3JUbz1mdW5jdGlvbihlLHQpe3RoaXMuc2VsZWN0aW9uLm1vdmVDdXJzb3JUbyhlLHQpfSx0aGlzLm1vdmVDdXJzb3JUb1Bvc2l0aW9uPWZ1bmN0aW9uKGUpe3RoaXMuc2VsZWN0aW9uLm1vdmVDdXJzb3JUb1Bvc2l0aW9uKGUpfSx0aGlzLmp1bXBUb01hdGNoaW5nPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5nZXRDdXJzb3JQb3NpdGlvbigpLHI9bmV3IHkodGhpcy5zZXNzaW9uLG4ucm93LG4uY29sdW1uKSxpPXIuZ2V0Q3VycmVudFRva2VuKCkscz1pfHxyLnN0ZXBGb3J3YXJkKCk7aWYoIXMpcmV0dXJuO3ZhciBvLHU9ITEsYT17fSxmPW4uY29sdW1uLXMuc3RhcnQsbCxjPXtcIilcIjpcIihcIixcIihcIjpcIihcIixcIl1cIjpcIltcIixcIltcIjpcIltcIixcIntcIjpcIntcIixcIn1cIjpcIntcIn07ZG97aWYocy52YWx1ZS5tYXRjaCgvW3t9KClcXFtcXF1dL2cpKWZvcig7ZjxzLnZhbHVlLmxlbmd0aCYmIXU7ZisrKXtpZighY1tzLnZhbHVlW2ZdXSljb250aW51ZTtsPWNbcy52YWx1ZVtmXV0rXCIuXCIrcy50eXBlLnJlcGxhY2UoXCJycGFyZW5cIixcImxwYXJlblwiKSxpc05hTihhW2xdKSYmKGFbbF09MCk7c3dpdGNoKHMudmFsdWVbZl0pe2Nhc2VcIihcIjpjYXNlXCJbXCI6Y2FzZVwie1wiOmFbbF0rKzticmVhaztjYXNlXCIpXCI6Y2FzZVwiXVwiOmNhc2VcIn1cIjphW2xdLS0sYVtsXT09PS0xJiYobz1cImJyYWNrZXRcIix1PSEwKX19ZWxzZSBzJiZzLnR5cGUuaW5kZXhPZihcInRhZy1uYW1lXCIpIT09LTEmJihpc05hTihhW3MudmFsdWVdKSYmKGFbcy52YWx1ZV09MCksaS52YWx1ZT09PVwiPFwiP2Fbcy52YWx1ZV0rKzppLnZhbHVlPT09XCI8L1wiJiZhW3MudmFsdWVdLS0sYVtzLnZhbHVlXT09PS0xJiYobz1cInRhZ1wiLHU9ITApKTt1fHwoaT1zLHM9ci5zdGVwRm9yd2FyZCgpLGY9MCl9d2hpbGUocyYmIXUpO2lmKCFvKXJldHVybjt2YXIgaCxkO2lmKG89PT1cImJyYWNrZXRcIil7aD10aGlzLnNlc3Npb24uZ2V0QnJhY2tldFJhbmdlKG4pO2lmKCFoKXtoPW5ldyBwKHIuZ2V0Q3VycmVudFRva2VuUm93KCksci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKStmLTEsci5nZXRDdXJyZW50VG9rZW5Sb3coKSxyLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpK2YtMSksZD1oLnN0YXJ0O2lmKHR8fGQucm93PT09bi5yb3cmJk1hdGguYWJzKGQuY29sdW1uLW4uY29sdW1uKTwyKWg9dGhpcy5zZXNzaW9uLmdldEJyYWNrZXRSYW5nZShkKX19ZWxzZSBpZihvPT09XCJ0YWdcIil7aWYoIXN8fHMudHlwZS5pbmRleE9mKFwidGFnLW5hbWVcIik9PT0tMSlyZXR1cm47dmFyIHY9cy52YWx1ZTtoPW5ldyBwKHIuZ2V0Q3VycmVudFRva2VuUm93KCksci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKS0yLHIuZ2V0Q3VycmVudFRva2VuUm93KCksci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKS0yKTtpZihoLmNvbXBhcmUobi5yb3csbi5jb2x1bW4pPT09MCl7dT0hMTtkbyBzPWksaT1yLnN0ZXBCYWNrd2FyZCgpLGkmJihpLnR5cGUuaW5kZXhPZihcInRhZy1jbG9zZVwiKSE9PS0xJiZoLnNldEVuZChyLmdldEN1cnJlbnRUb2tlblJvdygpLHIuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCkrMSkscy52YWx1ZT09PXYmJnMudHlwZS5pbmRleE9mKFwidGFnLW5hbWVcIikhPT0tMSYmKGkudmFsdWU9PT1cIjxcIj9hW3ZdKys6aS52YWx1ZT09PVwiPC9cIiYmYVt2XS0tLGFbdl09PT0wJiYodT0hMCkpKTt3aGlsZShpJiYhdSl9cyYmcy50eXBlLmluZGV4T2YoXCJ0YWctbmFtZVwiKSYmKGQ9aC5zdGFydCxkLnJvdz09bi5yb3cmJk1hdGguYWJzKGQuY29sdW1uLW4uY29sdW1uKTwyJiYoZD1oLmVuZCkpfWQ9aCYmaC5jdXJzb3J8fGQsZCYmKGU/aCYmdD90aGlzLnNlbGVjdGlvbi5zZXRSYW5nZShoKTpoJiZoLmlzRXF1YWwodGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpKT90aGlzLmNsZWFyU2VsZWN0aW9uKCk6dGhpcy5zZWxlY3Rpb24uc2VsZWN0VG8oZC5yb3csZC5jb2x1bW4pOnRoaXMuc2VsZWN0aW9uLm1vdmVUbyhkLnJvdyxkLmNvbHVtbikpfSx0aGlzLmdvdG9MaW5lPWZ1bmN0aW9uKGUsdCxuKXt0aGlzLnNlbGVjdGlvbi5jbGVhclNlbGVjdGlvbigpLHRoaXMuc2Vzc2lvbi51bmZvbGQoe3JvdzplLTEsY29sdW1uOnR8fDB9KSx0aGlzLiRibG9ja1Njcm9sbGluZys9MSx0aGlzLmV4aXRNdWx0aVNlbGVjdE1vZGUmJnRoaXMuZXhpdE11bHRpU2VsZWN0TW9kZSgpLHRoaXMubW92ZUN1cnNvclRvKGUtMSx0fHwwKSx0aGlzLiRibG9ja1Njcm9sbGluZy09MSx0aGlzLmlzUm93RnVsbHlWaXNpYmxlKGUtMSl8fHRoaXMuc2Nyb2xsVG9MaW5lKGUtMSwhMCxuKX0sdGhpcy5uYXZpZ2F0ZVRvPWZ1bmN0aW9uKGUsdCl7dGhpcy5zZWxlY3Rpb24ubW92ZVRvKGUsdCl9LHRoaXMubmF2aWdhdGVVcD1mdW5jdGlvbihlKXtpZih0aGlzLnNlbGVjdGlvbi5pc011bHRpTGluZSgpJiYhdGhpcy5zZWxlY3Rpb24uaXNCYWNrd2FyZHMoKSl7dmFyIHQ9dGhpcy5zZWxlY3Rpb24uYW5jaG9yLmdldFBvc2l0aW9uKCk7cmV0dXJuIHRoaXMubW92ZUN1cnNvclRvUG9zaXRpb24odCl9dGhpcy5zZWxlY3Rpb24uY2xlYXJTZWxlY3Rpb24oKSx0aGlzLnNlbGVjdGlvbi5tb3ZlQ3Vyc29yQnkoLWV8fC0xLDApfSx0aGlzLm5hdmlnYXRlRG93bj1mdW5jdGlvbihlKXtpZih0aGlzLnNlbGVjdGlvbi5pc011bHRpTGluZSgpJiZ0aGlzLnNlbGVjdGlvbi5pc0JhY2t3YXJkcygpKXt2YXIgdD10aGlzLnNlbGVjdGlvbi5hbmNob3IuZ2V0UG9zaXRpb24oKTtyZXR1cm4gdGhpcy5tb3ZlQ3Vyc29yVG9Qb3NpdGlvbih0KX10aGlzLnNlbGVjdGlvbi5jbGVhclNlbGVjdGlvbigpLHRoaXMuc2VsZWN0aW9uLm1vdmVDdXJzb3JCeShlfHwxLDApfSx0aGlzLm5hdmlnYXRlTGVmdD1mdW5jdGlvbihlKXtpZighdGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpKXt2YXIgdD10aGlzLmdldFNlbGVjdGlvblJhbmdlKCkuc3RhcnQ7dGhpcy5tb3ZlQ3Vyc29yVG9Qb3NpdGlvbih0KX1lbHNle2U9ZXx8MTt3aGlsZShlLS0pdGhpcy5zZWxlY3Rpb24ubW92ZUN1cnNvckxlZnQoKX10aGlzLmNsZWFyU2VsZWN0aW9uKCl9LHRoaXMubmF2aWdhdGVSaWdodD1mdW5jdGlvbihlKXtpZighdGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpKXt2YXIgdD10aGlzLmdldFNlbGVjdGlvblJhbmdlKCkuZW5kO3RoaXMubW92ZUN1cnNvclRvUG9zaXRpb24odCl9ZWxzZXtlPWV8fDE7d2hpbGUoZS0tKXRoaXMuc2VsZWN0aW9uLm1vdmVDdXJzb3JSaWdodCgpfXRoaXMuY2xlYXJTZWxlY3Rpb24oKX0sdGhpcy5uYXZpZ2F0ZUxpbmVTdGFydD1mdW5jdGlvbigpe3RoaXMuc2VsZWN0aW9uLm1vdmVDdXJzb3JMaW5lU3RhcnQoKSx0aGlzLmNsZWFyU2VsZWN0aW9uKCl9LHRoaXMubmF2aWdhdGVMaW5lRW5kPWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb24ubW92ZUN1cnNvckxpbmVFbmQoKSx0aGlzLmNsZWFyU2VsZWN0aW9uKCl9LHRoaXMubmF2aWdhdGVGaWxlRW5kPWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb24ubW92ZUN1cnNvckZpbGVFbmQoKSx0aGlzLmNsZWFyU2VsZWN0aW9uKCl9LHRoaXMubmF2aWdhdGVGaWxlU3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGlvbi5tb3ZlQ3Vyc29yRmlsZVN0YXJ0KCksdGhpcy5jbGVhclNlbGVjdGlvbigpfSx0aGlzLm5hdmlnYXRlV29yZFJpZ2h0PWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb24ubW92ZUN1cnNvcldvcmRSaWdodCgpLHRoaXMuY2xlYXJTZWxlY3Rpb24oKX0sdGhpcy5uYXZpZ2F0ZVdvcmRMZWZ0PWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb24ubW92ZUN1cnNvcldvcmRMZWZ0KCksdGhpcy5jbGVhclNlbGVjdGlvbigpfSx0aGlzLnJlcGxhY2U9ZnVuY3Rpb24oZSx0KXt0JiZ0aGlzLiRzZWFyY2guc2V0KHQpO3ZhciBuPXRoaXMuJHNlYXJjaC5maW5kKHRoaXMuc2Vzc2lvbikscj0wO3JldHVybiBuPyh0aGlzLiR0cnlSZXBsYWNlKG4sZSkmJihyPTEpLG4hPT1udWxsJiYodGhpcy5zZWxlY3Rpb24uc2V0U2VsZWN0aW9uUmFuZ2UobiksdGhpcy5yZW5kZXJlci5zY3JvbGxTZWxlY3Rpb25JbnRvVmlldyhuLnN0YXJ0LG4uZW5kKSkscik6cn0sdGhpcy5yZXBsYWNlQWxsPWZ1bmN0aW9uKGUsdCl7dCYmdGhpcy4kc2VhcmNoLnNldCh0KTt2YXIgbj10aGlzLiRzZWFyY2guZmluZEFsbCh0aGlzLnNlc3Npb24pLHI9MDtpZighbi5sZW5ndGgpcmV0dXJuIHI7dGhpcy4kYmxvY2tTY3JvbGxpbmcrPTE7dmFyIGk9dGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpO3RoaXMuc2VsZWN0aW9uLm1vdmVUbygwLDApO2Zvcih2YXIgcz1uLmxlbmd0aC0xO3M+PTA7LS1zKXRoaXMuJHRyeVJlcGxhY2UobltzXSxlKSYmcisrO3JldHVybiB0aGlzLnNlbGVjdGlvbi5zZXRTZWxlY3Rpb25SYW5nZShpKSx0aGlzLiRibG9ja1Njcm9sbGluZy09MSxyfSx0aGlzLiR0cnlSZXBsYWNlPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5zZXNzaW9uLmdldFRleHRSYW5nZShlKTtyZXR1cm4gdD10aGlzLiRzZWFyY2gucmVwbGFjZShuLHQpLHQhPT1udWxsPyhlLmVuZD10aGlzLnNlc3Npb24ucmVwbGFjZShlLHQpLGUpOm51bGx9LHRoaXMuZ2V0TGFzdFNlYXJjaE9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2VhcmNoLmdldE9wdGlvbnMoKX0sdGhpcy5maW5kPWZ1bmN0aW9uKGUsdCxuKXt0fHwodD17fSksdHlwZW9mIGU9PVwic3RyaW5nXCJ8fGUgaW5zdGFuY2VvZiBSZWdFeHA/dC5uZWVkbGU9ZTp0eXBlb2YgZT09XCJvYmplY3RcIiYmci5taXhpbih0LGUpO3ZhciBpPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCk7dC5uZWVkbGU9PW51bGwmJihlPXRoaXMuc2Vzc2lvbi5nZXRUZXh0UmFuZ2UoaSl8fHRoaXMuJHNlYXJjaC4kb3B0aW9ucy5uZWVkbGUsZXx8KGk9dGhpcy5zZXNzaW9uLmdldFdvcmRSYW5nZShpLnN0YXJ0LnJvdyxpLnN0YXJ0LmNvbHVtbiksZT10aGlzLnNlc3Npb24uZ2V0VGV4dFJhbmdlKGkpKSx0aGlzLiRzZWFyY2guc2V0KHtuZWVkbGU6ZX0pKSx0aGlzLiRzZWFyY2guc2V0KHQpLHQuc3RhcnR8fHRoaXMuJHNlYXJjaC5zZXQoe3N0YXJ0Oml9KTt2YXIgcz10aGlzLiRzZWFyY2guZmluZCh0aGlzLnNlc3Npb24pO2lmKHQucHJldmVudFNjcm9sbClyZXR1cm4gcztpZihzKXJldHVybiB0aGlzLnJldmVhbFJhbmdlKHMsbiksczt0LmJhY2t3YXJkcz9pLnN0YXJ0PWkuZW5kOmkuZW5kPWkuc3RhcnQsdGhpcy5zZWxlY3Rpb24uc2V0UmFuZ2UoaSl9LHRoaXMuZmluZE5leHQ9ZnVuY3Rpb24oZSx0KXt0aGlzLmZpbmQoe3NraXBDdXJyZW50OiEwLGJhY2t3YXJkczohMX0sZSx0KX0sdGhpcy5maW5kUHJldmlvdXM9ZnVuY3Rpb24oZSx0KXt0aGlzLmZpbmQoZSx7c2tpcEN1cnJlbnQ6ITAsYmFja3dhcmRzOiEwfSx0KX0sdGhpcy5yZXZlYWxSYW5nZT1mdW5jdGlvbihlLHQpe3RoaXMuJGJsb2NrU2Nyb2xsaW5nKz0xLHRoaXMuc2Vzc2lvbi51bmZvbGQoZSksdGhpcy5zZWxlY3Rpb24uc2V0U2VsZWN0aW9uUmFuZ2UoZSksdGhpcy4kYmxvY2tTY3JvbGxpbmctPTE7dmFyIG49dGhpcy5yZW5kZXJlci5zY3JvbGxUb3A7dGhpcy5yZW5kZXJlci5zY3JvbGxTZWxlY3Rpb25JbnRvVmlldyhlLnN0YXJ0LGUuZW5kLC41KSx0IT09ITEmJnRoaXMucmVuZGVyZXIuYW5pbWF0ZVNjcm9sbGluZyhuKX0sdGhpcy51bmRvPWZ1bmN0aW9uKCl7dGhpcy4kYmxvY2tTY3JvbGxpbmcrKyx0aGlzLnNlc3Npb24uZ2V0VW5kb01hbmFnZXIoKS51bmRvKCksdGhpcy4kYmxvY2tTY3JvbGxpbmctLSx0aGlzLnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KG51bGwsLjUpfSx0aGlzLnJlZG89ZnVuY3Rpb24oKXt0aGlzLiRibG9ja1Njcm9sbGluZysrLHRoaXMuc2Vzc2lvbi5nZXRVbmRvTWFuYWdlcigpLnJlZG8oKSx0aGlzLiRibG9ja1Njcm9sbGluZy0tLHRoaXMucmVuZGVyZXIuc2Nyb2xsQ3Vyc29ySW50b1ZpZXcobnVsbCwuNSl9LHRoaXMuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMucmVuZGVyZXIuZGVzdHJveSgpLHRoaXMuX3NpZ25hbChcImRlc3Ryb3lcIix0aGlzKSx0aGlzLnNlc3Npb24mJnRoaXMuc2Vzc2lvbi5kZXN0cm95KCl9LHRoaXMuc2V0QXV0b1Njcm9sbEVkaXRvckludG9WaWV3PWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybjt2YXIgdCxuPXRoaXMscj0hMTt0aGlzLiRzY3JvbGxBbmNob3J8fCh0aGlzLiRzY3JvbGxBbmNob3I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7dmFyIGk9dGhpcy4kc2Nyb2xsQW5jaG9yO2kuc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmFic29sdXRlXCIsdGhpcy5jb250YWluZXIuaW5zZXJ0QmVmb3JlKGksdGhpcy5jb250YWluZXIuZmlyc3RDaGlsZCk7dmFyIHM9dGhpcy5vbihcImNoYW5nZVNlbGVjdGlvblwiLGZ1bmN0aW9uKCl7cj0hMH0pLG89dGhpcy5yZW5kZXJlci5vbihcImJlZm9yZVJlbmRlclwiLGZ1bmN0aW9uKCl7ciYmKHQ9bi5yZW5kZXJlci5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpfSksdT10aGlzLnJlbmRlcmVyLm9uKFwiYWZ0ZXJSZW5kZXJcIixmdW5jdGlvbigpe2lmKHImJnQmJihuLmlzRm9jdXNlZCgpfHxuLnNlYXJjaEJveCYmbi5zZWFyY2hCb3guaXNGb2N1c2VkKCkpKXt2YXIgZT1uLnJlbmRlcmVyLHM9ZS4kY3Vyc29yTGF5ZXIuJHBpeGVsUG9zLG89ZS5sYXllckNvbmZpZyx1PXMudG9wLW8ub2Zmc2V0O3MudG9wPj0wJiZ1K3QudG9wPDA/cj0hMDpzLnRvcDxvLmhlaWdodCYmcy50b3ArdC50b3Arby5saW5lSGVpZ2h0PndpbmRvdy5pbm5lckhlaWdodD9yPSExOnI9bnVsbCxyIT1udWxsJiYoaS5zdHlsZS50b3A9dStcInB4XCIsaS5zdHlsZS5sZWZ0PXMubGVmdCtcInB4XCIsaS5zdHlsZS5oZWlnaHQ9by5saW5lSGVpZ2h0K1wicHhcIixpLnNjcm9sbEludG9WaWV3KHIpKSxyPXQ9bnVsbH19KTt0aGlzLnNldEF1dG9TY3JvbGxFZGl0b3JJbnRvVmlldz1mdW5jdGlvbihlKXtpZihlKXJldHVybjtkZWxldGUgdGhpcy5zZXRBdXRvU2Nyb2xsRWRpdG9ySW50b1ZpZXcsdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlU2VsZWN0aW9uXCIscyksdGhpcy5yZW5kZXJlci5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWZ0ZXJSZW5kZXJcIix1KSx0aGlzLnJlbmRlcmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJiZWZvcmVSZW5kZXJcIixvKX19LHRoaXMuJHJlc2V0Q3Vyc29yU3R5bGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLiRjdXJzb3JTdHlsZXx8XCJhY2VcIix0PXRoaXMucmVuZGVyZXIuJGN1cnNvckxheWVyO2lmKCF0KXJldHVybjt0LnNldFNtb290aEJsaW5raW5nKC9zbW9vdGgvLnRlc3QoZSkpLHQuaXNCbGlua2luZz0hdGhpcy4kcmVhZE9ubHkmJmUhPVwid2lkZVwiLGkuc2V0Q3NzQ2xhc3ModC5lbGVtZW50LFwiYWNlX3NsaW0tY3Vyc29yc1wiLC9zbGltLy50ZXN0KGUpKX19KS5jYWxsKGIucHJvdG90eXBlKSxnLmRlZmluZU9wdGlvbnMoYi5wcm90b3R5cGUsXCJlZGl0b3JcIix7c2VsZWN0aW9uU3R5bGU6e3NldDpmdW5jdGlvbihlKXt0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKCksdGhpcy5fc2lnbmFsKFwiY2hhbmdlU2VsZWN0aW9uU3R5bGVcIix7ZGF0YTplfSl9LGluaXRpYWxWYWx1ZTpcImxpbmVcIn0saGlnaGxpZ2h0QWN0aXZlTGluZTp7c2V0OmZ1bmN0aW9uKCl7dGhpcy4kdXBkYXRlSGlnaGxpZ2h0QWN0aXZlTGluZSgpfSxpbml0aWFsVmFsdWU6ITB9LGhpZ2hsaWdodFNlbGVjdGVkV29yZDp7c2V0OmZ1bmN0aW9uKGUpe3RoaXMuJG9uU2VsZWN0aW9uQ2hhbmdlKCl9LGluaXRpYWxWYWx1ZTohMH0scmVhZE9ubHk6e3NldDpmdW5jdGlvbihlKXt0aGlzLiRyZXNldEN1cnNvclN0eWxlKCl9LGluaXRpYWxWYWx1ZTohMX0sY3Vyc29yU3R5bGU6e3NldDpmdW5jdGlvbihlKXt0aGlzLiRyZXNldEN1cnNvclN0eWxlKCl9LHZhbHVlczpbXCJhY2VcIixcInNsaW1cIixcInNtb290aFwiLFwid2lkZVwiXSxpbml0aWFsVmFsdWU6XCJhY2VcIn0sbWVyZ2VVbmRvRGVsdGFzOnt2YWx1ZXM6WyExLCEwLFwiYWx3YXlzXCJdLGluaXRpYWxWYWx1ZTohMH0sYmVoYXZpb3Vyc0VuYWJsZWQ6e2luaXRpYWxWYWx1ZTohMH0sd3JhcEJlaGF2aW91cnNFbmFibGVkOntpbml0aWFsVmFsdWU6ITB9LGF1dG9TY3JvbGxFZGl0b3JJbnRvVmlldzp7c2V0OmZ1bmN0aW9uKGUpe3RoaXMuc2V0QXV0b1Njcm9sbEVkaXRvckludG9WaWV3KGUpfX0saFNjcm9sbEJhckFsd2F5c1Zpc2libGU6XCJyZW5kZXJlclwiLHZTY3JvbGxCYXJBbHdheXNWaXNpYmxlOlwicmVuZGVyZXJcIixoaWdobGlnaHRHdXR0ZXJMaW5lOlwicmVuZGVyZXJcIixhbmltYXRlZFNjcm9sbDpcInJlbmRlcmVyXCIsc2hvd0ludmlzaWJsZXM6XCJyZW5kZXJlclwiLHNob3dQcmludE1hcmdpbjpcInJlbmRlcmVyXCIscHJpbnRNYXJnaW5Db2x1bW46XCJyZW5kZXJlclwiLHByaW50TWFyZ2luOlwicmVuZGVyZXJcIixmYWRlRm9sZFdpZGdldHM6XCJyZW5kZXJlclwiLHNob3dGb2xkV2lkZ2V0czpcInJlbmRlcmVyXCIsc2hvd0xpbmVOdW1iZXJzOlwicmVuZGVyZXJcIixzaG93R3V0dGVyOlwicmVuZGVyZXJcIixkaXNwbGF5SW5kZW50R3VpZGVzOlwicmVuZGVyZXJcIixmb250U2l6ZTpcInJlbmRlcmVyXCIsZm9udEZhbWlseTpcInJlbmRlcmVyXCIsbWF4TGluZXM6XCJyZW5kZXJlclwiLG1pbkxpbmVzOlwicmVuZGVyZXJcIixzY3JvbGxQYXN0RW5kOlwicmVuZGVyZXJcIixmaXhlZFdpZHRoR3V0dGVyOlwicmVuZGVyZXJcIix0aGVtZTpcInJlbmRlcmVyXCIsc2Nyb2xsU3BlZWQ6XCIkbW91c2VIYW5kbGVyXCIsZHJhZ0RlbGF5OlwiJG1vdXNlSGFuZGxlclwiLGRyYWdFbmFibGVkOlwiJG1vdXNlSGFuZGxlclwiLGZvY3VzVGltb3V0OlwiJG1vdXNlSGFuZGxlclwiLHRvb2x0aXBGb2xsb3dzTW91c2U6XCIkbW91c2VIYW5kbGVyXCIsZmlyc3RMaW5lTnVtYmVyOlwic2Vzc2lvblwiLG92ZXJ3cml0ZTpcInNlc3Npb25cIixuZXdMaW5lTW9kZTpcInNlc3Npb25cIix1c2VXb3JrZXI6XCJzZXNzaW9uXCIsdXNlU29mdFRhYnM6XCJzZXNzaW9uXCIsdGFiU2l6ZTpcInNlc3Npb25cIix3cmFwOlwic2Vzc2lvblwiLGluZGVudGVkU29mdFdyYXA6XCJzZXNzaW9uXCIsZm9sZFN0eWxlOlwic2Vzc2lvblwiLG1vZGU6XCJzZXNzaW9uXCJ9KSx0LkVkaXRvcj1ifSksZGVmaW5lKFwiYWNlL3VuZG9tYW5hZ2VyXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1mdW5jdGlvbigpe3RoaXMucmVzZXQoKX07KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm57YWN0aW9uOmUuYWN0aW9uLHN0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kLGxpbmVzOmUubGluZXMubGVuZ3RoPT0xP251bGw6ZS5saW5lcyx0ZXh0OmUubGluZXMubGVuZ3RoPT0xP2UubGluZXNbMF06bnVsbH19ZnVuY3Rpb24gdChlKXtyZXR1cm57YWN0aW9uOmUuYWN0aW9uLHN0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kLGxpbmVzOmUubGluZXN8fFtlLnRleHRdfX1mdW5jdGlvbiBuKGUsdCl7dmFyIG49bmV3IEFycmF5KGUubGVuZ3RoKTtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGk9ZVtyXSxzPXtncm91cDppLmdyb3VwLGRlbHRhczpuZXcgQXJyYXkoaS5sZW5ndGgpfTtmb3IodmFyIG89MDtvPGkuZGVsdGFzLmxlbmd0aDtvKyspe3ZhciB1PWkuZGVsdGFzW29dO3MuZGVsdGFzW29dPXQodSl9bltyXT1zfXJldHVybiBufXRoaXMuZXhlY3V0ZT1mdW5jdGlvbihlKXt2YXIgdD1lLmFyZ3NbMF07dGhpcy4kZG9jPWUuYXJnc1sxXSxlLm1lcmdlJiZ0aGlzLmhhc1VuZG8oKSYmKHRoaXMuZGlydHlDb3VudGVyLS0sdD10aGlzLiR1bmRvU3RhY2sucG9wKCkuY29uY2F0KHQpKSx0aGlzLiR1bmRvU3RhY2sucHVzaCh0KSx0aGlzLiRyZWRvU3RhY2s9W10sdGhpcy5kaXJ0eUNvdW50ZXI8MCYmKHRoaXMuZGlydHlDb3VudGVyPU5hTiksdGhpcy5kaXJ0eUNvdW50ZXIrK30sdGhpcy51bmRvPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuJHVuZG9TdGFjay5wb3AoKSxuPW51bGw7cmV0dXJuIHQmJihuPXRoaXMuJGRvYy51bmRvQ2hhbmdlcyh0LGUpLHRoaXMuJHJlZG9TdGFjay5wdXNoKHQpLHRoaXMuZGlydHlDb3VudGVyLS0pLG59LHRoaXMucmVkbz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLiRyZWRvU3RhY2sucG9wKCksbj1udWxsO3JldHVybiB0JiYobj10aGlzLiRkb2MucmVkb0NoYW5nZXModGhpcy4kZGVzZXJpYWxpemVEZWx0YXModCksZSksdGhpcy4kdW5kb1N0YWNrLnB1c2godCksdGhpcy5kaXJ0eUNvdW50ZXIrKyksbn0sdGhpcy5yZXNldD1mdW5jdGlvbigpe3RoaXMuJHVuZG9TdGFjaz1bXSx0aGlzLiRyZWRvU3RhY2s9W10sdGhpcy5kaXJ0eUNvdW50ZXI9MH0sdGhpcy5oYXNVbmRvPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHVuZG9TdGFjay5sZW5ndGg+MH0sdGhpcy5oYXNSZWRvPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHJlZG9TdGFjay5sZW5ndGg+MH0sdGhpcy5tYXJrQ2xlYW49ZnVuY3Rpb24oKXt0aGlzLmRpcnR5Q291bnRlcj0wfSx0aGlzLmlzQ2xlYW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXJ0eUNvdW50ZXI9PT0wfSx0aGlzLiRzZXJpYWxpemVEZWx0YXM9ZnVuY3Rpb24odCl7cmV0dXJuIG4odCxlKX0sdGhpcy4kZGVzZXJpYWxpemVEZWx0YXM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSx0KX19KS5jYWxsKHIucHJvdG90eXBlKSx0LlVuZG9NYW5hZ2VyPXJ9KSxkZWZpbmUoXCJhY2UvbGF5ZXIvZ3V0dGVyXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvbGliL2RvbVwiLFwiYWNlL2xpYi9vb3BcIixcImFjZS9saWIvbGFuZ1wiLFwiYWNlL2xpYi9ldmVudF9lbWl0dGVyXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi4vbGliL2RvbVwiKSxpPWUoXCIuLi9saWIvb29wXCIpLHM9ZShcIi4uL2xpYi9sYW5nXCIpLG89ZShcIi4uL2xpYi9ldmVudF9lbWl0dGVyXCIpLkV2ZW50RW1pdHRlcix1PWZ1bmN0aW9uKGUpe3RoaXMuZWxlbWVudD1yLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5lbGVtZW50LmNsYXNzTmFtZT1cImFjZV9sYXllciBhY2VfZ3V0dGVyLWxheWVyXCIsZS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuc2V0U2hvd0ZvbGRXaWRnZXRzKHRoaXMuJHNob3dGb2xkV2lkZ2V0cyksdGhpcy5ndXR0ZXJXaWR0aD0wLHRoaXMuJGFubm90YXRpb25zPVtdLHRoaXMuJHVwZGF0ZUFubm90YXRpb25zPXRoaXMuJHVwZGF0ZUFubm90YXRpb25zLmJpbmQodGhpcyksdGhpcy4kY2VsbHM9W119OyhmdW5jdGlvbigpe2kuaW1wbGVtZW50KHRoaXMsbyksdGhpcy5zZXRTZXNzaW9uPWZ1bmN0aW9uKGUpe3RoaXMuc2Vzc2lvbiYmdGhpcy5zZXNzaW9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIix0aGlzLiR1cGRhdGVBbm5vdGF0aW9ucyksdGhpcy5zZXNzaW9uPWUsZSYmZS5vbihcImNoYW5nZVwiLHRoaXMuJHVwZGF0ZUFubm90YXRpb25zKX0sdGhpcy5hZGRHdXR0ZXJEZWNvcmF0aW9uPWZ1bmN0aW9uKGUsdCl7d2luZG93LmNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKFwiZGVwcmVjYXRlZCB1c2Ugc2Vzc2lvbi5hZGRHdXR0ZXJEZWNvcmF0aW9uXCIpLHRoaXMuc2Vzc2lvbi5hZGRHdXR0ZXJEZWNvcmF0aW9uKGUsdCl9LHRoaXMucmVtb3ZlR3V0dGVyRGVjb3JhdGlvbj1mdW5jdGlvbihlLHQpe3dpbmRvdy5jb25zb2xlJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybihcImRlcHJlY2F0ZWQgdXNlIHNlc3Npb24ucmVtb3ZlR3V0dGVyRGVjb3JhdGlvblwiKSx0aGlzLnNlc3Npb24ucmVtb3ZlR3V0dGVyRGVjb3JhdGlvbihlLHQpfSx0aGlzLnNldEFubm90YXRpb25zPWZ1bmN0aW9uKGUpe3RoaXMuJGFubm90YXRpb25zPVtdO2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgbj1lW3RdLHI9bi5yb3csaT10aGlzLiRhbm5vdGF0aW9uc1tyXTtpfHwoaT10aGlzLiRhbm5vdGF0aW9uc1tyXT17dGV4dDpbXX0pO3ZhciBvPW4udGV4dDtvPW8/cy5lc2NhcGVIVE1MKG8pOm4uaHRtbHx8XCJcIixpLnRleHQuaW5kZXhPZihvKT09PS0xJiZpLnRleHQucHVzaChvKTt2YXIgdT1uLnR5cGU7dT09XCJlcnJvclwiP2kuY2xhc3NOYW1lPVwiIGFjZV9lcnJvclwiOnU9PVwid2FybmluZ1wiJiZpLmNsYXNzTmFtZSE9XCIgYWNlX2Vycm9yXCI/aS5jbGFzc05hbWU9XCIgYWNlX3dhcm5pbmdcIjp1PT1cImluZm9cIiYmIWkuY2xhc3NOYW1lJiYoaS5jbGFzc05hbWU9XCIgYWNlX2luZm9cIil9fSx0aGlzLiR1cGRhdGVBbm5vdGF0aW9ucz1mdW5jdGlvbihlKXtpZighdGhpcy4kYW5ub3RhdGlvbnMubGVuZ3RoKXJldHVybjt2YXIgdD1lLnN0YXJ0LnJvdyxuPWUuZW5kLnJvdy10O2lmKG4hPT0wKWlmKGUuYWN0aW9uPT1cInJlbW92ZVwiKXRoaXMuJGFubm90YXRpb25zLnNwbGljZSh0LG4rMSxudWxsKTtlbHNle3ZhciByPW5ldyBBcnJheShuKzEpO3IudW5zaGlmdCh0LDEpLHRoaXMuJGFubm90YXRpb25zLnNwbGljZS5hcHBseSh0aGlzLiRhbm5vdGF0aW9ucyxyKX19LHRoaXMudXBkYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2Vzc2lvbixuPWUuZmlyc3RSb3csaT1NYXRoLm1pbihlLmxhc3RSb3crZS5ndXR0ZXJPZmZzZXQsdC5nZXRMZW5ndGgoKS0xKSxzPXQuZ2V0TmV4dEZvbGRMaW5lKG4pLG89cz9zLnN0YXJ0LnJvdzpJbmZpbml0eSx1PXRoaXMuJHNob3dGb2xkV2lkZ2V0cyYmdC5mb2xkV2lkZ2V0cyxhPXQuJGJyZWFrcG9pbnRzLGY9dC4kZGVjb3JhdGlvbnMsbD10LiRmaXJzdExpbmVOdW1iZXIsYz0wLGg9dC5ndXR0ZXJSZW5kZXJlcnx8dGhpcy4kcmVuZGVyZXIscD1udWxsLGQ9LTEsdj1uO2Zvcig7Oyl7dj5vJiYodj1zLmVuZC5yb3crMSxzPXQuZ2V0TmV4dEZvbGRMaW5lKHYscyksbz1zP3Muc3RhcnQucm93OkluZmluaXR5KTtpZih2Pmkpe3doaWxlKHRoaXMuJGNlbGxzLmxlbmd0aD5kKzEpcD10aGlzLiRjZWxscy5wb3AoKSx0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQocC5lbGVtZW50KTticmVha31wPXRoaXMuJGNlbGxzWysrZF0scHx8KHA9e2VsZW1lbnQ6bnVsbCx0ZXh0Tm9kZTpudWxsLGZvbGRXaWRnZXQ6bnVsbH0scC5lbGVtZW50PXIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxwLnRleHROb2RlPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpLHAuZWxlbWVudC5hcHBlbmRDaGlsZChwLnRleHROb2RlKSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQocC5lbGVtZW50KSx0aGlzLiRjZWxsc1tkXT1wKTt2YXIgbT1cImFjZV9ndXR0ZXItY2VsbCBcIjthW3ZdJiYobSs9YVt2XSksZlt2XSYmKG0rPWZbdl0pLHRoaXMuJGFubm90YXRpb25zW3ZdJiYobSs9dGhpcy4kYW5ub3RhdGlvbnNbdl0uY2xhc3NOYW1lKSxwLmVsZW1lbnQuY2xhc3NOYW1lIT1tJiYocC5lbGVtZW50LmNsYXNzTmFtZT1tKTt2YXIgZz10LmdldFJvd0xlbmd0aCh2KSplLmxpbmVIZWlnaHQrXCJweFwiO2chPXAuZWxlbWVudC5zdHlsZS5oZWlnaHQmJihwLmVsZW1lbnQuc3R5bGUuaGVpZ2h0PWcpO2lmKHUpe3ZhciB5PXVbdl07eT09bnVsbCYmKHk9dVt2XT10LmdldEZvbGRXaWRnZXQodikpfWlmKHkpe3AuZm9sZFdpZGdldHx8KHAuZm9sZFdpZGdldD1yLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHAuZWxlbWVudC5hcHBlbmRDaGlsZChwLmZvbGRXaWRnZXQpKTt2YXIgbT1cImFjZV9mb2xkLXdpZGdldCBhY2VfXCIreTt5PT1cInN0YXJ0XCImJnY9PW8mJnY8cy5lbmQucm93P20rPVwiIGFjZV9jbG9zZWRcIjptKz1cIiBhY2Vfb3BlblwiLHAuZm9sZFdpZGdldC5jbGFzc05hbWUhPW0mJihwLmZvbGRXaWRnZXQuY2xhc3NOYW1lPW0pO3ZhciBnPWUubGluZUhlaWdodCtcInB4XCI7cC5mb2xkV2lkZ2V0LnN0eWxlLmhlaWdodCE9ZyYmKHAuZm9sZFdpZGdldC5zdHlsZS5oZWlnaHQ9Zyl9ZWxzZSBwLmZvbGRXaWRnZXQmJihwLmVsZW1lbnQucmVtb3ZlQ2hpbGQocC5mb2xkV2lkZ2V0KSxwLmZvbGRXaWRnZXQ9bnVsbCk7dmFyIGI9Yz1oP2guZ2V0VGV4dCh0LHYpOnYrbDtiIT1wLnRleHROb2RlLmRhdGEmJihwLnRleHROb2RlLmRhdGE9YiksdisrfXRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQ9ZS5taW5IZWlnaHQrXCJweFwiO2lmKHRoaXMuJGZpeGVkV2lkdGh8fHQuJHVzZVdyYXBNb2RlKWM9dC5nZXRMZW5ndGgoKStsO3ZhciB3PWg/aC5nZXRXaWR0aCh0LGMsZSk6Yy50b1N0cmluZygpLmxlbmd0aCplLmNoYXJhY3RlcldpZHRoLEU9dGhpcy4kcGFkZGluZ3x8dGhpcy4kY29tcHV0ZVBhZGRpbmcoKTt3Kz1FLmxlZnQrRS5yaWdodCx3IT09dGhpcy5ndXR0ZXJXaWR0aCYmIWlzTmFOKHcpJiYodGhpcy5ndXR0ZXJXaWR0aD13LHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aD1NYXRoLmNlaWwodGhpcy5ndXR0ZXJXaWR0aCkrXCJweFwiLHRoaXMuX2VtaXQoXCJjaGFuZ2VHdXR0ZXJXaWR0aFwiLHcpKX0sdGhpcy4kZml4ZWRXaWR0aD0hMSx0aGlzLiRzaG93TGluZU51bWJlcnM9ITAsdGhpcy4kcmVuZGVyZXI9XCJcIix0aGlzLnNldFNob3dMaW5lTnVtYmVycz1mdW5jdGlvbihlKXt0aGlzLiRyZW5kZXJlcj0hZSYme2dldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuXCJcIn0sZ2V0VGV4dDpmdW5jdGlvbigpe3JldHVyblwiXCJ9fX0sdGhpcy5nZXRTaG93TGluZU51bWJlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2hvd0xpbmVOdW1iZXJzfSx0aGlzLiRzaG93Rm9sZFdpZGdldHM9ITAsdGhpcy5zZXRTaG93Rm9sZFdpZGdldHM9ZnVuY3Rpb24oZSl7ZT9yLmFkZENzc0NsYXNzKHRoaXMuZWxlbWVudCxcImFjZV9mb2xkaW5nLWVuYWJsZWRcIik6ci5yZW1vdmVDc3NDbGFzcyh0aGlzLmVsZW1lbnQsXCJhY2VfZm9sZGluZy1lbmFibGVkXCIpLHRoaXMuJHNob3dGb2xkV2lkZ2V0cz1lLHRoaXMuJHBhZGRpbmc9bnVsbH0sdGhpcy5nZXRTaG93Rm9sZFdpZGdldHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2hvd0ZvbGRXaWRnZXRzfSx0aGlzLiRjb21wdXRlUGFkZGluZz1mdW5jdGlvbigpe2lmKCF0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZClyZXR1cm57bGVmdDowLHJpZ2h0OjB9O3ZhciBlPXIuY29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCk7cmV0dXJuIHRoaXMuJHBhZGRpbmc9e30sdGhpcy4kcGFkZGluZy5sZWZ0PXBhcnNlSW50KGUucGFkZGluZ0xlZnQpKzF8fDAsdGhpcy4kcGFkZGluZy5yaWdodD1wYXJzZUludChlLnBhZGRpbmdSaWdodCl8fDAsdGhpcy4kcGFkZGluZ30sdGhpcy5nZXRSZWdpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy4kcGFkZGluZ3x8dGhpcy4kY29tcHV0ZVBhZGRpbmcoKSxuPXRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihlLng8dC5sZWZ0K24ubGVmdClyZXR1cm5cIm1hcmtlcnNcIjtpZih0aGlzLiRzaG93Rm9sZFdpZGdldHMmJmUueD5uLnJpZ2h0LXQucmlnaHQpcmV0dXJuXCJmb2xkV2lkZ2V0c1wifX0pLmNhbGwodS5wcm90b3R5cGUpLHQuR3V0dGVyPXV9KSxkZWZpbmUoXCJhY2UvbGF5ZXIvbWFya2VyXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvcmFuZ2VcIixcImFjZS9saWIvZG9tXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi4vcmFuZ2VcIikuUmFuZ2UsaT1lKFwiLi4vbGliL2RvbVwiKSxzPWZ1bmN0aW9uKGUpe3RoaXMuZWxlbWVudD1pLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5lbGVtZW50LmNsYXNzTmFtZT1cImFjZV9sYXllciBhY2VfbWFya2VyLWxheWVyXCIsZS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpfTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuLHIpe3JldHVybihlPzE6MCl8KHQ/MjowKXwobj80OjApfChyPzg6MCl9dGhpcy4kcGFkZGluZz0wLHRoaXMuc2V0UGFkZGluZz1mdW5jdGlvbihlKXt0aGlzLiRwYWRkaW5nPWV9LHRoaXMuc2V0U2Vzc2lvbj1mdW5jdGlvbihlKXt0aGlzLnNlc3Npb249ZX0sdGhpcy5zZXRNYXJrZXJzPWZ1bmN0aW9uKGUpe3RoaXMubWFya2Vycz1lfSx0aGlzLnVwZGF0ZT1mdW5jdGlvbihlKXt2YXIgZT1lfHx0aGlzLmNvbmZpZztpZighZSlyZXR1cm47dGhpcy5jb25maWc9ZTt2YXIgdD1bXTtmb3IodmFyIG4gaW4gdGhpcy5tYXJrZXJzKXt2YXIgcj10aGlzLm1hcmtlcnNbbl07aWYoIXIucmFuZ2Upe3IudXBkYXRlKHQsdGhpcyx0aGlzLnNlc3Npb24sZSk7Y29udGludWV9dmFyIGk9ci5yYW5nZS5jbGlwUm93cyhlLmZpcnN0Um93LGUubGFzdFJvdyk7aWYoaS5pc0VtcHR5KCkpY29udGludWU7aT1pLnRvU2NyZWVuUmFuZ2UodGhpcy5zZXNzaW9uKTtpZihyLnJlbmRlcmVyKXt2YXIgcz10aGlzLiRnZXRUb3AoaS5zdGFydC5yb3csZSksbz10aGlzLiRwYWRkaW5nK2kuc3RhcnQuY29sdW1uKmUuY2hhcmFjdGVyV2lkdGg7ci5yZW5kZXJlcih0LGksbyxzLGUpfWVsc2Ugci50eXBlPT1cImZ1bGxMaW5lXCI/dGhpcy5kcmF3RnVsbExpbmVNYXJrZXIodCxpLHIuY2xhenosZSk6ci50eXBlPT1cInNjcmVlbkxpbmVcIj90aGlzLmRyYXdTY3JlZW5MaW5lTWFya2VyKHQsaSxyLmNsYXp6LGUpOmkuaXNNdWx0aUxpbmUoKT9yLnR5cGU9PVwidGV4dFwiP3RoaXMuZHJhd1RleHRNYXJrZXIodCxpLHIuY2xhenosZSk6dGhpcy5kcmF3TXVsdGlMaW5lTWFya2VyKHQsaSxyLmNsYXp6LGUpOnRoaXMuZHJhd1NpbmdsZUxpbmVNYXJrZXIodCxpLHIuY2xhenorXCIgYWNlX3N0YXJ0XCIrXCIgYWNlX2JyMTVcIixlKX10aGlzLmVsZW1lbnQuaW5uZXJIVE1MPXQuam9pbihcIlwiKX0sdGhpcy4kZ2V0VG9wPWZ1bmN0aW9uKGUsdCl7cmV0dXJuKGUtdC5maXJzdFJvd1NjcmVlbikqdC5saW5lSGVpZ2h0fSx0aGlzLmRyYXdUZXh0TWFya2VyPWZ1bmN0aW9uKHQsbixpLHMsbyl7dmFyIHU9dGhpcy5zZXNzaW9uLGE9bi5zdGFydC5yb3csZj1uLmVuZC5yb3csbD1hLGM9MCxoPTAscD11LmdldFNjcmVlbkxhc3RSb3dDb2x1bW4obCksZD1uZXcgcihsLG4uc3RhcnQuY29sdW1uLGwsaCk7Zm9yKDtsPD1mO2wrKylkLnN0YXJ0LnJvdz1kLmVuZC5yb3c9bCxkLnN0YXJ0LmNvbHVtbj1sPT1hP24uc3RhcnQuY29sdW1uOnUuZ2V0Um93V3JhcEluZGVudChsKSxkLmVuZC5jb2x1bW49cCxjPWgsaD1wLHA9bCsxPGY/dS5nZXRTY3JlZW5MYXN0Um93Q29sdW1uKGwrMSk6bD09Zj8wOm4uZW5kLmNvbHVtbix0aGlzLmRyYXdTaW5nbGVMaW5lTWFya2VyKHQsZCxpKyhsPT1hP1wiIGFjZV9zdGFydFwiOlwiXCIpK1wiIGFjZV9iclwiK2UobD09YXx8bD09YSsxJiZuLnN0YXJ0LmNvbHVtbixjPGgsaD5wLGw9PWYpLHMsbD09Zj8wOjEsbyl9LHRoaXMuZHJhd011bHRpTGluZU1hcmtlcj1mdW5jdGlvbihlLHQsbixyLGkpe3ZhciBzPXRoaXMuJHBhZGRpbmcsbz1yLmxpbmVIZWlnaHQsdT10aGlzLiRnZXRUb3AodC5zdGFydC5yb3csciksYT1zK3Quc3RhcnQuY29sdW1uKnIuY2hhcmFjdGVyV2lkdGg7aT1pfHxcIlwiLGUucHVzaChcIjxkaXYgY2xhc3M9J1wiLG4sXCIgYWNlX2JyMSBhY2Vfc3RhcnQnIHN0eWxlPSdcIixcImhlaWdodDpcIixvLFwicHg7XCIsXCJyaWdodDowO1wiLFwidG9wOlwiLHUsXCJweDtcIixcImxlZnQ6XCIsYSxcInB4O1wiLGksXCInPjwvZGl2PlwiKSx1PXRoaXMuJGdldFRvcCh0LmVuZC5yb3cscik7dmFyIGY9dC5lbmQuY29sdW1uKnIuY2hhcmFjdGVyV2lkdGg7ZS5wdXNoKFwiPGRpdiBjbGFzcz0nXCIsbixcIiBhY2VfYnIxMicgc3R5bGU9J1wiLFwiaGVpZ2h0OlwiLG8sXCJweDtcIixcIndpZHRoOlwiLGYsXCJweDtcIixcInRvcDpcIix1LFwicHg7XCIsXCJsZWZ0OlwiLHMsXCJweDtcIixpLFwiJz48L2Rpdj5cIiksbz0odC5lbmQucm93LXQuc3RhcnQucm93LTEpKnIubGluZUhlaWdodDtpZihvPD0wKXJldHVybjt1PXRoaXMuJGdldFRvcCh0LnN0YXJ0LnJvdysxLHIpO3ZhciBsPSh0LnN0YXJ0LmNvbHVtbj8xOjApfCh0LmVuZC5jb2x1bW4/MDo4KTtlLnB1c2goXCI8ZGl2IGNsYXNzPSdcIixuLGw/XCIgYWNlX2JyXCIrbDpcIlwiLFwiJyBzdHlsZT0nXCIsXCJoZWlnaHQ6XCIsbyxcInB4O1wiLFwicmlnaHQ6MDtcIixcInRvcDpcIix1LFwicHg7XCIsXCJsZWZ0OlwiLHMsXCJweDtcIixpLFwiJz48L2Rpdj5cIil9LHRoaXMuZHJhd1NpbmdsZUxpbmVNYXJrZXI9ZnVuY3Rpb24oZSx0LG4scixpLHMpe3ZhciBvPXIubGluZUhlaWdodCx1PSh0LmVuZC5jb2x1bW4rKGl8fDApLXQuc3RhcnQuY29sdW1uKSpyLmNoYXJhY3RlcldpZHRoLGE9dGhpcy4kZ2V0VG9wKHQuc3RhcnQucm93LHIpLGY9dGhpcy4kcGFkZGluZyt0LnN0YXJ0LmNvbHVtbipyLmNoYXJhY3RlcldpZHRoO2UucHVzaChcIjxkaXYgY2xhc3M9J1wiLG4sXCInIHN0eWxlPSdcIixcImhlaWdodDpcIixvLFwicHg7XCIsXCJ3aWR0aDpcIix1LFwicHg7XCIsXCJ0b3A6XCIsYSxcInB4O1wiLFwibGVmdDpcIixmLFwicHg7XCIsc3x8XCJcIixcIic+PC9kaXY+XCIpfSx0aGlzLmRyYXdGdWxsTGluZU1hcmtlcj1mdW5jdGlvbihlLHQsbixyLGkpe3ZhciBzPXRoaXMuJGdldFRvcCh0LnN0YXJ0LnJvdyxyKSxvPXIubGluZUhlaWdodDt0LnN0YXJ0LnJvdyE9dC5lbmQucm93JiYobys9dGhpcy4kZ2V0VG9wKHQuZW5kLnJvdyxyKS1zKSxlLnB1c2goXCI8ZGl2IGNsYXNzPSdcIixuLFwiJyBzdHlsZT0nXCIsXCJoZWlnaHQ6XCIsbyxcInB4O1wiLFwidG9wOlwiLHMsXCJweDtcIixcImxlZnQ6MDtyaWdodDowO1wiLGl8fFwiXCIsXCInPjwvZGl2PlwiKX0sdGhpcy5kcmF3U2NyZWVuTGluZU1hcmtlcj1mdW5jdGlvbihlLHQsbixyLGkpe3ZhciBzPXRoaXMuJGdldFRvcCh0LnN0YXJ0LnJvdyxyKSxvPXIubGluZUhlaWdodDtlLnB1c2goXCI8ZGl2IGNsYXNzPSdcIixuLFwiJyBzdHlsZT0nXCIsXCJoZWlnaHQ6XCIsbyxcInB4O1wiLFwidG9wOlwiLHMsXCJweDtcIixcImxlZnQ6MDtyaWdodDowO1wiLGl8fFwiXCIsXCInPjwvZGl2PlwiKX19KS5jYWxsKHMucHJvdG90eXBlKSx0Lk1hcmtlcj1zfSksZGVmaW5lKFwiYWNlL2xheWVyL3RleHRcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIvb29wXCIsXCJhY2UvbGliL2RvbVwiLFwiYWNlL2xpYi9sYW5nXCIsXCJhY2UvbGliL3VzZXJhZ2VudFwiLFwiYWNlL2xpYi9ldmVudF9lbWl0dGVyXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi4vbGliL29vcFwiKSxpPWUoXCIuLi9saWIvZG9tXCIpLHM9ZShcIi4uL2xpYi9sYW5nXCIpLG89ZShcIi4uL2xpYi91c2VyYWdlbnRcIiksdT1lKFwiLi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyLGE9ZnVuY3Rpb24oZSl7dGhpcy5lbGVtZW50PWkuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLmVsZW1lbnQuY2xhc3NOYW1lPVwiYWNlX2xheWVyIGFjZV90ZXh0LWxheWVyXCIsZS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuJHVwZGF0ZUVvbENoYXI9dGhpcy4kdXBkYXRlRW9sQ2hhci5iaW5kKHRoaXMpfTsoZnVuY3Rpb24oKXtyLmltcGxlbWVudCh0aGlzLHUpLHRoaXMuRU9GX0NIQVI9XCJcXHUwMGI2XCIsdGhpcy5FT0xfQ0hBUl9MRj1cIlxcdTAwYWNcIix0aGlzLkVPTF9DSEFSX0NSTEY9XCJcXHUwMGE0XCIsdGhpcy5FT0xfQ0hBUj10aGlzLkVPTF9DSEFSX0xGLHRoaXMuVEFCX0NIQVI9XCJcXHUyMDE0XCIsdGhpcy5TUEFDRV9DSEFSPVwiXFx1MDBiN1wiLHRoaXMuJHBhZGRpbmc9MCx0aGlzLiR1cGRhdGVFb2xDaGFyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZXNzaW9uLmRvYy5nZXROZXdMaW5lQ2hhcmFjdGVyKCk9PVwiXFxuXCI/dGhpcy5FT0xfQ0hBUl9MRjp0aGlzLkVPTF9DSEFSX0NSTEY7aWYodGhpcy5FT0xfQ0hBUiE9ZSlyZXR1cm4gdGhpcy5FT0xfQ0hBUj1lLCEwfSx0aGlzLnNldFBhZGRpbmc9ZnVuY3Rpb24oZSl7dGhpcy4kcGFkZGluZz1lLHRoaXMuZWxlbWVudC5zdHlsZS5wYWRkaW5nPVwiMCBcIitlK1wicHhcIn0sdGhpcy5nZXRMaW5lSGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZvbnRNZXRyaWNzLiRjaGFyYWN0ZXJTaXplLmhlaWdodHx8MH0sdGhpcy5nZXRDaGFyYWN0ZXJXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmb250TWV0cmljcy4kY2hhcmFjdGVyU2l6ZS53aWR0aHx8MH0sdGhpcy4kc2V0Rm9udE1ldHJpY3M9ZnVuY3Rpb24oZSl7dGhpcy4kZm9udE1ldHJpY3M9ZSx0aGlzLiRmb250TWV0cmljcy5vbihcImNoYW5nZUNoYXJhY3RlclNpemVcIixmdW5jdGlvbihlKXt0aGlzLl9zaWduYWwoXCJjaGFuZ2VDaGFyYWN0ZXJTaXplXCIsZSl9LmJpbmQodGhpcykpLHRoaXMuJHBvbGxTaXplQ2hhbmdlcygpfSx0aGlzLmNoZWNrRm9yU2l6ZUNoYW5nZXM9ZnVuY3Rpb24oKXt0aGlzLiRmb250TWV0cmljcy5jaGVja0ZvclNpemVDaGFuZ2VzKCl9LHRoaXMuJHBvbGxTaXplQ2hhbmdlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRwb2xsU2l6ZUNoYW5nZXNUaW1lcj10aGlzLiRmb250TWV0cmljcy4kcG9sbFNpemVDaGFuZ2VzKCl9LHRoaXMuc2V0U2Vzc2lvbj1mdW5jdGlvbihlKXt0aGlzLnNlc3Npb249ZSxlJiZ0aGlzLiRjb21wdXRlVGFiU3RyaW5nKCl9LHRoaXMuc2hvd0ludmlzaWJsZXM9ITEsdGhpcy5zZXRTaG93SW52aXNpYmxlcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaG93SW52aXNpYmxlcz09ZT8hMToodGhpcy5zaG93SW52aXNpYmxlcz1lLHRoaXMuJGNvbXB1dGVUYWJTdHJpbmcoKSwhMCl9LHRoaXMuZGlzcGxheUluZGVudEd1aWRlcz0hMCx0aGlzLnNldERpc3BsYXlJbmRlbnRHdWlkZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGlzcGxheUluZGVudEd1aWRlcz09ZT8hMToodGhpcy5kaXNwbGF5SW5kZW50R3VpZGVzPWUsdGhpcy4kY29tcHV0ZVRhYlN0cmluZygpLCEwKX0sdGhpcy4kdGFiU3RyaW5ncz1bXSx0aGlzLm9uQ2hhbmdlVGFiU2l6ZT10aGlzLiRjb21wdXRlVGFiU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZXNzaW9uLmdldFRhYlNpemUoKTt0aGlzLnRhYlNpemU9ZTt2YXIgdD10aGlzLiR0YWJTdHJpbmdzPVswXTtmb3IodmFyIG49MTtuPGUrMTtuKyspdGhpcy5zaG93SW52aXNpYmxlcz90LnB1c2goXCI8c3BhbiBjbGFzcz0nYWNlX2ludmlzaWJsZSBhY2VfaW52aXNpYmxlX3RhYic+XCIrcy5zdHJpbmdSZXBlYXQodGhpcy5UQUJfQ0hBUixuKStcIjwvc3Bhbj5cIik6dC5wdXNoKHMuc3RyaW5nUmVwZWF0KFwiIFwiLG4pKTtpZih0aGlzLmRpc3BsYXlJbmRlbnRHdWlkZXMpe3RoaXMuJGluZGVudEd1aWRlUmU9L1xcc1xcU3wgXFx0fFxcdCB8XFxzJC87dmFyIHI9XCJhY2VfaW5kZW50LWd1aWRlXCIsaT1cIlwiLG89XCJcIjtpZih0aGlzLnNob3dJbnZpc2libGVzKXtyKz1cIiBhY2VfaW52aXNpYmxlXCIsaT1cIiBhY2VfaW52aXNpYmxlX3NwYWNlXCIsbz1cIiBhY2VfaW52aXNpYmxlX3RhYlwiO3ZhciB1PXMuc3RyaW5nUmVwZWF0KHRoaXMuU1BBQ0VfQ0hBUix0aGlzLnRhYlNpemUpLGE9cy5zdHJpbmdSZXBlYXQodGhpcy5UQUJfQ0hBUix0aGlzLnRhYlNpemUpfWVsc2UgdmFyIHU9cy5zdHJpbmdSZXBlYXQoXCIgXCIsdGhpcy50YWJTaXplKSxhPXU7dGhpcy4kdGFiU3RyaW5nc1tcIiBcIl09XCI8c3BhbiBjbGFzcz0nXCIrcitpK1wiJz5cIit1K1wiPC9zcGFuPlwiLHRoaXMuJHRhYlN0cmluZ3NbXCJcdFwiXT1cIjxzcGFuIGNsYXNzPSdcIityK28rXCInPlwiK2ErXCI8L3NwYW4+XCJ9fSx0aGlzLnVwZGF0ZUxpbmVzPWZ1bmN0aW9uKGUsdCxuKXsodGhpcy5jb25maWcubGFzdFJvdyE9ZS5sYXN0Um93fHx0aGlzLmNvbmZpZy5maXJzdFJvdyE9ZS5maXJzdFJvdykmJnRoaXMuc2Nyb2xsTGluZXMoZSksdGhpcy5jb25maWc9ZTt2YXIgcj1NYXRoLm1heCh0LGUuZmlyc3RSb3cpLGk9TWF0aC5taW4obixlLmxhc3RSb3cpLHM9dGhpcy5lbGVtZW50LmNoaWxkTm9kZXMsbz0wO2Zvcih2YXIgdT1lLmZpcnN0Um93O3U8cjt1Kyspe3ZhciBhPXRoaXMuc2Vzc2lvbi5nZXRGb2xkTGluZSh1KTtpZihhKXtpZihhLmNvbnRhaW5zUm93KHIpKXtyPWEuc3RhcnQucm93O2JyZWFrfXU9YS5lbmQucm93fW8rK312YXIgdT1yLGE9dGhpcy5zZXNzaW9uLmdldE5leHRGb2xkTGluZSh1KSxmPWE/YS5zdGFydC5yb3c6SW5maW5pdHk7Zm9yKDs7KXt1PmYmJih1PWEuZW5kLnJvdysxLGE9dGhpcy5zZXNzaW9uLmdldE5leHRGb2xkTGluZSh1LGEpLGY9YT9hLnN0YXJ0LnJvdzpJbmZpbml0eSk7aWYodT5pKWJyZWFrO3ZhciBsPXNbbysrXTtpZihsKXt2YXIgYz1bXTt0aGlzLiRyZW5kZXJMaW5lKGMsdSwhdGhpcy4kdXNlTGluZUdyb3VwcygpLHU9PWY/YTohMSksbC5zdHlsZS5oZWlnaHQ9ZS5saW5lSGVpZ2h0KnRoaXMuc2Vzc2lvbi5nZXRSb3dMZW5ndGgodSkrXCJweFwiLGwuaW5uZXJIVE1MPWMuam9pbihcIlwiKX11Kyt9fSx0aGlzLnNjcm9sbExpbmVzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29uZmlnO3RoaXMuY29uZmlnPWU7aWYoIXR8fHQubGFzdFJvdzxlLmZpcnN0Um93KXJldHVybiB0aGlzLnVwZGF0ZShlKTtpZihlLmxhc3RSb3c8dC5maXJzdFJvdylyZXR1cm4gdGhpcy51cGRhdGUoZSk7dmFyIG49dGhpcy5lbGVtZW50O2lmKHQuZmlyc3RSb3c8ZS5maXJzdFJvdylmb3IodmFyIHI9dGhpcy5zZXNzaW9uLmdldEZvbGRlZFJvd0NvdW50KHQuZmlyc3RSb3csZS5maXJzdFJvdy0xKTtyPjA7ci0tKW4ucmVtb3ZlQ2hpbGQobi5maXJzdENoaWxkKTtpZih0Lmxhc3RSb3c+ZS5sYXN0Um93KWZvcih2YXIgcj10aGlzLnNlc3Npb24uZ2V0Rm9sZGVkUm93Q291bnQoZS5sYXN0Um93KzEsdC5sYXN0Um93KTtyPjA7ci0tKW4ucmVtb3ZlQ2hpbGQobi5sYXN0Q2hpbGQpO2lmKGUuZmlyc3RSb3c8dC5maXJzdFJvdyl7dmFyIGk9dGhpcy4kcmVuZGVyTGluZXNGcmFnbWVudChlLGUuZmlyc3RSb3csdC5maXJzdFJvdy0xKTtuLmZpcnN0Q2hpbGQ/bi5pbnNlcnRCZWZvcmUoaSxuLmZpcnN0Q2hpbGQpOm4uYXBwZW5kQ2hpbGQoaSl9aWYoZS5sYXN0Um93PnQubGFzdFJvdyl7dmFyIGk9dGhpcy4kcmVuZGVyTGluZXNGcmFnbWVudChlLHQubGFzdFJvdysxLGUubGFzdFJvdyk7bi5hcHBlbmRDaGlsZChpKX19LHRoaXMuJHJlbmRlckxpbmVzRnJhZ21lbnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxzPXQsbz10aGlzLnNlc3Npb24uZ2V0TmV4dEZvbGRMaW5lKHMpLHU9bz9vLnN0YXJ0LnJvdzpJbmZpbml0eTtmb3IoOzspe3M+dSYmKHM9by5lbmQucm93KzEsbz10aGlzLnNlc3Npb24uZ2V0TmV4dEZvbGRMaW5lKHMsbyksdT1vP28uc3RhcnQucm93OkluZmluaXR5KTtpZihzPm4pYnJlYWs7dmFyIGE9aS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGY9W107dGhpcy4kcmVuZGVyTGluZShmLHMsITEscz09dT9vOiExKSxhLmlubmVySFRNTD1mLmpvaW4oXCJcIik7aWYodGhpcy4kdXNlTGluZUdyb3VwcygpKWEuY2xhc3NOYW1lPVwiYWNlX2xpbmVfZ3JvdXBcIixyLmFwcGVuZENoaWxkKGEpLGEuc3R5bGUuaGVpZ2h0PWUubGluZUhlaWdodCp0aGlzLnNlc3Npb24uZ2V0Um93TGVuZ3RoKHMpK1wicHhcIjtlbHNlIHdoaWxlKGEuZmlyc3RDaGlsZClyLmFwcGVuZENoaWxkKGEuZmlyc3RDaGlsZCk7cysrfXJldHVybiByfSx0aGlzLnVwZGF0ZT1mdW5jdGlvbihlKXt0aGlzLmNvbmZpZz1lO3ZhciB0PVtdLG49ZS5maXJzdFJvdyxyPWUubGFzdFJvdyxpPW4scz10aGlzLnNlc3Npb24uZ2V0TmV4dEZvbGRMaW5lKGkpLG89cz9zLnN0YXJ0LnJvdzpJbmZpbml0eTtmb3IoOzspe2k+byYmKGk9cy5lbmQucm93KzEscz10aGlzLnNlc3Npb24uZ2V0TmV4dEZvbGRMaW5lKGkscyksbz1zP3Muc3RhcnQucm93OkluZmluaXR5KTtpZihpPnIpYnJlYWs7dGhpcy4kdXNlTGluZUdyb3VwcygpJiZ0LnB1c2goXCI8ZGl2IGNsYXNzPSdhY2VfbGluZV9ncm91cCcgc3R5bGU9J2hlaWdodDpcIixlLmxpbmVIZWlnaHQqdGhpcy5zZXNzaW9uLmdldFJvd0xlbmd0aChpKSxcInB4Jz5cIiksdGhpcy4kcmVuZGVyTGluZSh0LGksITEsaT09bz9zOiExKSx0aGlzLiR1c2VMaW5lR3JvdXBzKCkmJnQucHVzaChcIjwvZGl2PlwiKSxpKyt9dGhpcy5lbGVtZW50LmlubmVySFRNTD10LmpvaW4oXCJcIil9LHRoaXMuJHRleHRUb2tlbj17dGV4dDohMCxycGFyZW46ITAsbHBhcmVuOiEwfSx0aGlzLiRyZW5kZXJUb2tlbj1mdW5jdGlvbihlLHQsbixyKXt2YXIgaT10aGlzLG89L1xcdHwmfDx8PnwoICspfChbXFx4MDAtXFx4MWZcXHg4MC1cXHhhMFxceGFkXFx1MTY4MFxcdTE4MEVcXHUyMDAwLVxcdTIwMGZcXHUyMDI4XFx1MjAyOVxcdTIwMkZcXHUyMDVGXFx1MzAwMFxcdUZFRkZcXHVGRkY5LVxcdUZGRkNdKXxbXFx1MTEwMC1cXHUxMTVGXFx1MTFBMy1cXHUxMUE3XFx1MTFGQS1cXHUxMUZGXFx1MjMyOS1cXHUyMzJBXFx1MkU4MC1cXHUyRTk5XFx1MkU5Qi1cXHUyRUYzXFx1MkYwMC1cXHUyRkQ1XFx1MkZGMC1cXHUyRkZCXFx1MzAwMC1cXHUzMDNFXFx1MzA0MS1cXHUzMDk2XFx1MzA5OS1cXHUzMEZGXFx1MzEwNS1cXHUzMTJEXFx1MzEzMS1cXHUzMThFXFx1MzE5MC1cXHUzMUJBXFx1MzFDMC1cXHUzMUUzXFx1MzFGMC1cXHUzMjFFXFx1MzIyMC1cXHUzMjQ3XFx1MzI1MC1cXHUzMkZFXFx1MzMwMC1cXHU0REJGXFx1NEUwMC1cXHVBNDhDXFx1QTQ5MC1cXHVBNEM2XFx1QTk2MC1cXHVBOTdDXFx1QUMwMC1cXHVEN0EzXFx1RDdCMC1cXHVEN0M2XFx1RDdDQi1cXHVEN0ZCXFx1RjkwMC1cXHVGQUZGXFx1RkUxMC1cXHVGRTE5XFx1RkUzMC1cXHVGRTUyXFx1RkU1NC1cXHVGRTY2XFx1RkU2OC1cXHVGRTZCXFx1RkYwMS1cXHVGRjYwXFx1RkZFMC1cXHVGRkU2XS9nLHU9ZnVuY3Rpb24oZSxuLHIsbyx1KXtpZihuKXJldHVybiBpLnNob3dJbnZpc2libGVzP1wiPHNwYW4gY2xhc3M9J2FjZV9pbnZpc2libGUgYWNlX2ludmlzaWJsZV9zcGFjZSc+XCIrcy5zdHJpbmdSZXBlYXQoaS5TUEFDRV9DSEFSLGUubGVuZ3RoKStcIjwvc3Bhbj5cIjplO2lmKGU9PVwiJlwiKXJldHVyblwiJiMzODtcIjtpZihlPT1cIjxcIilyZXR1cm5cIiYjNjA7XCI7aWYoZT09XCI+XCIpcmV0dXJuXCImIzYyO1wiO2lmKGU9PVwiXHRcIil7dmFyIGE9aS5zZXNzaW9uLmdldFNjcmVlblRhYlNpemUodCtvKTtyZXR1cm4gdCs9YS0xLGkuJHRhYlN0cmluZ3NbYV19aWYoZT09XCJcXHUzMDAwXCIpe3ZhciBmPWkuc2hvd0ludmlzaWJsZXM/XCJhY2VfY2prIGFjZV9pbnZpc2libGUgYWNlX2ludmlzaWJsZV9zcGFjZVwiOlwiYWNlX2Nqa1wiLGw9aS5zaG93SW52aXNpYmxlcz9pLlNQQUNFX0NIQVI6XCJcIjtyZXR1cm4gdCs9MSxcIjxzcGFuIGNsYXNzPSdcIitmK1wiJyBzdHlsZT0nd2lkdGg6XCIraS5jb25maWcuY2hhcmFjdGVyV2lkdGgqMitcInB4Jz5cIitsK1wiPC9zcGFuPlwifXJldHVybiByP1wiPHNwYW4gY2xhc3M9J2FjZV9pbnZpc2libGUgYWNlX2ludmlzaWJsZV9zcGFjZSBhY2VfaW52YWxpZCc+XCIraS5TUEFDRV9DSEFSK1wiPC9zcGFuPlwiOih0Kz0xLFwiPHNwYW4gY2xhc3M9J2FjZV9jamsnIHN0eWxlPSd3aWR0aDpcIitpLmNvbmZpZy5jaGFyYWN0ZXJXaWR0aCoyK1wicHgnPlwiK2UrXCI8L3NwYW4+XCIpfSxhPXIucmVwbGFjZShvLHUpO2lmKCF0aGlzLiR0ZXh0VG9rZW5bbi50eXBlXSl7dmFyIGY9XCJhY2VfXCIrbi50eXBlLnJlcGxhY2UoL1xcLi9nLFwiIGFjZV9cIiksbD1cIlwiO24udHlwZT09XCJmb2xkXCImJihsPVwiIHN0eWxlPSd3aWR0aDpcIituLnZhbHVlLmxlbmd0aCp0aGlzLmNvbmZpZy5jaGFyYWN0ZXJXaWR0aCtcInB4OycgXCIpLGUucHVzaChcIjxzcGFuIGNsYXNzPSdcIixmLFwiJ1wiLGwsXCI+XCIsYSxcIjwvc3Bhbj5cIil9ZWxzZSBlLnB1c2goYSk7cmV0dXJuIHQrci5sZW5ndGh9LHRoaXMucmVuZGVySW5kZW50R3VpZGU9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuc2VhcmNoKHRoaXMuJGluZGVudEd1aWRlUmUpO3JldHVybiByPD0wfHxyPj1uP3Q6dFswXT09XCIgXCI/KHItPXIldGhpcy50YWJTaXplLGUucHVzaChzLnN0cmluZ1JlcGVhdCh0aGlzLiR0YWJTdHJpbmdzW1wiIFwiXSxyL3RoaXMudGFiU2l6ZSkpLHQuc3Vic3RyKHIpKTp0WzBdPT1cIlx0XCI/KGUucHVzaChzLnN0cmluZ1JlcGVhdCh0aGlzLiR0YWJTdHJpbmdzW1wiXHRcIl0scikpLHQuc3Vic3RyKHIpKTp0fSx0aGlzLiRyZW5kZXJXcmFwcGVkTGluZT1mdW5jdGlvbihlLHQsbixyKXt2YXIgaT0wLG89MCx1PW5bMF0sYT0wO2Zvcih2YXIgZj0wO2Y8dC5sZW5ndGg7ZisrKXt2YXIgbD10W2ZdLGM9bC52YWx1ZTtpZihmPT0wJiZ0aGlzLmRpc3BsYXlJbmRlbnRHdWlkZXMpe2k9Yy5sZW5ndGgsYz10aGlzLnJlbmRlckluZGVudEd1aWRlKGUsYyx1KTtpZighYyljb250aW51ZTtpLT1jLmxlbmd0aH1pZihpK2MubGVuZ3RoPHUpYT10aGlzLiRyZW5kZXJUb2tlbihlLGEsbCxjKSxpKz1jLmxlbmd0aDtlbHNle3doaWxlKGkrYy5sZW5ndGg+PXUpYT10aGlzLiRyZW5kZXJUb2tlbihlLGEsbCxjLnN1YnN0cmluZygwLHUtaSkpLGM9Yy5zdWJzdHJpbmcodS1pKSxpPXUscnx8ZS5wdXNoKFwiPC9kaXY+XCIsXCI8ZGl2IGNsYXNzPSdhY2VfbGluZScgc3R5bGU9J2hlaWdodDpcIix0aGlzLmNvbmZpZy5saW5lSGVpZ2h0LFwicHgnPlwiKSxlLnB1c2gocy5zdHJpbmdSZXBlYXQoXCJcXHUwMGEwXCIsbi5pbmRlbnQpKSxvKyssYT0wLHU9bltvXXx8TnVtYmVyLk1BWF9WQUxVRTtjLmxlbmd0aCE9MCYmKGkrPWMubGVuZ3RoLGE9dGhpcy4kcmVuZGVyVG9rZW4oZSxhLGwsYykpfX19LHRoaXMuJHJlbmRlclNpbXBsZUxpbmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj0wLHI9dFswXSxpPXIudmFsdWU7dGhpcy5kaXNwbGF5SW5kZW50R3VpZGVzJiYoaT10aGlzLnJlbmRlckluZGVudEd1aWRlKGUsaSkpLGkmJihuPXRoaXMuJHJlbmRlclRva2VuKGUsbixyLGkpKTtmb3IodmFyIHM9MTtzPHQubGVuZ3RoO3MrKylyPXRbc10saT1yLnZhbHVlLG49dGhpcy4kcmVuZGVyVG9rZW4oZSxuLHIsaSl9LHRoaXMuJHJlbmRlckxpbmU9ZnVuY3Rpb24oZSx0LG4scil7IXImJnIhPTAmJihyPXRoaXMuc2Vzc2lvbi5nZXRGb2xkTGluZSh0KSk7aWYocil2YXIgaT10aGlzLiRnZXRGb2xkTGluZVRva2Vucyh0LHIpO2Vsc2UgdmFyIGk9dGhpcy5zZXNzaW9uLmdldFRva2Vucyh0KTtufHxlLnB1c2goXCI8ZGl2IGNsYXNzPSdhY2VfbGluZScgc3R5bGU9J2hlaWdodDpcIix0aGlzLmNvbmZpZy5saW5lSGVpZ2h0Kih0aGlzLiR1c2VMaW5lR3JvdXBzKCk/MTp0aGlzLnNlc3Npb24uZ2V0Um93TGVuZ3RoKHQpKSxcInB4Jz5cIik7aWYoaS5sZW5ndGgpe3ZhciBzPXRoaXMuc2Vzc2lvbi5nZXRSb3dTcGxpdERhdGEodCk7cyYmcy5sZW5ndGg/dGhpcy4kcmVuZGVyV3JhcHBlZExpbmUoZSxpLHMsbik6dGhpcy4kcmVuZGVyU2ltcGxlTGluZShlLGkpfXRoaXMuc2hvd0ludmlzaWJsZXMmJihyJiYodD1yLmVuZC5yb3cpLGUucHVzaChcIjxzcGFuIGNsYXNzPSdhY2VfaW52aXNpYmxlIGFjZV9pbnZpc2libGVfZW9sJz5cIix0PT10aGlzLnNlc3Npb24uZ2V0TGVuZ3RoKCktMT90aGlzLkVPRl9DSEFSOnRoaXMuRU9MX0NIQVIsXCI8L3NwYW4+XCIpKSxufHxlLnB1c2goXCI8L2Rpdj5cIil9LHRoaXMuJGdldEZvbGRMaW5lVG9rZW5zPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gaShlLHQsbil7dmFyIGk9MCxzPTA7d2hpbGUocytlW2ldLnZhbHVlLmxlbmd0aDx0KXtzKz1lW2ldLnZhbHVlLmxlbmd0aCxpKys7aWYoaT09ZS5sZW5ndGgpcmV0dXJufWlmKHMhPXQpe3ZhciBvPWVbaV0udmFsdWUuc3Vic3RyaW5nKHQtcyk7by5sZW5ndGg+bi10JiYobz1vLnN1YnN0cmluZygwLG4tdCkpLHIucHVzaCh7dHlwZTplW2ldLnR5cGUsdmFsdWU6b30pLHM9dCtvLmxlbmd0aCxpKz0xfXdoaWxlKHM8biYmaTxlLmxlbmd0aCl7dmFyIG89ZVtpXS52YWx1ZTtvLmxlbmd0aCtzPm4/ci5wdXNoKHt0eXBlOmVbaV0udHlwZSx2YWx1ZTpvLnN1YnN0cmluZygwLG4tcyl9KTpyLnB1c2goZVtpXSkscys9by5sZW5ndGgsaSs9MX19dmFyIG49dGhpcy5zZXNzaW9uLHI9W10scz1uLmdldFRva2VucyhlKTtyZXR1cm4gdC53YWxrKGZ1bmN0aW9uKGUsdCxvLHUsYSl7ZSE9bnVsbD9yLnB1c2goe3R5cGU6XCJmb2xkXCIsdmFsdWU6ZX0pOihhJiYocz1uLmdldFRva2Vucyh0KSkscy5sZW5ndGgmJmkocyx1LG8pKX0sdC5lbmQucm93LHRoaXMuc2Vzc2lvbi5nZXRMaW5lKHQuZW5kLnJvdykubGVuZ3RoKSxyfSx0aGlzLiR1c2VMaW5lR3JvdXBzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Vzc2lvbi5nZXRVc2VXcmFwTW9kZSgpfSx0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuJHBvbGxTaXplQ2hhbmdlc1RpbWVyKSx0aGlzLiRtZWFzdXJlTm9kZSYmdGhpcy4kbWVhc3VyZU5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLiRtZWFzdXJlTm9kZSksZGVsZXRlIHRoaXMuJG1lYXN1cmVOb2RlfX0pLmNhbGwoYS5wcm90b3R5cGUpLHQuVGV4dD1hfSksZGVmaW5lKFwiYWNlL2xheWVyL2N1cnNvclwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9kb21cIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciByPWUoXCIuLi9saWIvZG9tXCIpLGkscz1mdW5jdGlvbihlKXt0aGlzLmVsZW1lbnQ9ci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuZWxlbWVudC5jbGFzc05hbWU9XCJhY2VfbGF5ZXIgYWNlX2N1cnNvci1sYXllclwiLGUuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KSxpPT09dW5kZWZpbmVkJiYoaT0hKFwib3BhY2l0eVwiaW4gdGhpcy5lbGVtZW50LnN0eWxlKSksdGhpcy5pc1Zpc2libGU9ITEsdGhpcy5pc0JsaW5raW5nPSEwLHRoaXMuYmxpbmtJbnRlcnZhbD0xZTMsdGhpcy5zbW9vdGhCbGlua2luZz0hMSx0aGlzLmN1cnNvcnM9W10sdGhpcy5jdXJzb3I9dGhpcy5hZGRDdXJzb3IoKSxyLmFkZENzc0NsYXNzKHRoaXMuZWxlbWVudCxcImFjZV9oaWRkZW4tY3Vyc29yc1wiKSx0aGlzLiR1cGRhdGVDdXJzb3JzPShpP3RoaXMuJHVwZGF0ZVZpc2liaWxpdHk6dGhpcy4kdXBkYXRlT3BhY2l0eSkuYmluZCh0aGlzKX07KGZ1bmN0aW9uKCl7dGhpcy4kdXBkYXRlVmlzaWJpbGl0eT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmN1cnNvcnM7Zm9yKHZhciBuPXQubGVuZ3RoO24tLTspdFtuXS5zdHlsZS52aXNpYmlsaXR5PWU/XCJcIjpcImhpZGRlblwifSx0aGlzLiR1cGRhdGVPcGFjaXR5PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY3Vyc29ycztmb3IodmFyIG49dC5sZW5ndGg7bi0tOyl0W25dLnN0eWxlLm9wYWNpdHk9ZT9cIlwiOlwiMFwifSx0aGlzLiRwYWRkaW5nPTAsdGhpcy5zZXRQYWRkaW5nPWZ1bmN0aW9uKGUpe3RoaXMuJHBhZGRpbmc9ZX0sdGhpcy5zZXRTZXNzaW9uPWZ1bmN0aW9uKGUpe3RoaXMuc2Vzc2lvbj1lfSx0aGlzLnNldEJsaW5raW5nPWZ1bmN0aW9uKGUpe2UhPXRoaXMuaXNCbGlua2luZyYmKHRoaXMuaXNCbGlua2luZz1lLHRoaXMucmVzdGFydFRpbWVyKCkpfSx0aGlzLnNldEJsaW5rSW50ZXJ2YWw9ZnVuY3Rpb24oZSl7ZSE9dGhpcy5ibGlua0ludGVydmFsJiYodGhpcy5ibGlua0ludGVydmFsPWUsdGhpcy5yZXN0YXJ0VGltZXIoKSl9LHRoaXMuc2V0U21vb3RoQmxpbmtpbmc9ZnVuY3Rpb24oZSl7ZSE9dGhpcy5zbW9vdGhCbGlua2luZyYmIWkmJih0aGlzLnNtb290aEJsaW5raW5nPWUsci5zZXRDc3NDbGFzcyh0aGlzLmVsZW1lbnQsXCJhY2Vfc21vb3RoLWJsaW5raW5nXCIsZSksdGhpcy4kdXBkYXRlQ3Vyc29ycyghMCksdGhpcy4kdXBkYXRlQ3Vyc29ycz10aGlzLiR1cGRhdGVPcGFjaXR5LmJpbmQodGhpcyksdGhpcy5yZXN0YXJ0VGltZXIoKSl9LHRoaXMuYWRkQ3Vyc29yPWZ1bmN0aW9uKCl7dmFyIGU9ci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBlLmNsYXNzTmFtZT1cImFjZV9jdXJzb3JcIix0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZSksdGhpcy5jdXJzb3JzLnB1c2goZSksZX0sdGhpcy5yZW1vdmVDdXJzb3I9ZnVuY3Rpb24oKXtpZih0aGlzLmN1cnNvcnMubGVuZ3RoPjEpe3ZhciBlPXRoaXMuY3Vyc29ycy5wb3AoKTtyZXR1cm4gZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpLGV9fSx0aGlzLmhpZGVDdXJzb3I9ZnVuY3Rpb24oKXt0aGlzLmlzVmlzaWJsZT0hMSxyLmFkZENzc0NsYXNzKHRoaXMuZWxlbWVudCxcImFjZV9oaWRkZW4tY3Vyc29yc1wiKSx0aGlzLnJlc3RhcnRUaW1lcigpfSx0aGlzLnNob3dDdXJzb3I9ZnVuY3Rpb24oKXt0aGlzLmlzVmlzaWJsZT0hMCxyLnJlbW92ZUNzc0NsYXNzKHRoaXMuZWxlbWVudCxcImFjZV9oaWRkZW4tY3Vyc29yc1wiKSx0aGlzLnJlc3RhcnRUaW1lcigpfSx0aGlzLnJlc3RhcnRUaW1lcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuJHVwZGF0ZUN1cnNvcnM7Y2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpLGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCksdGhpcy5zbW9vdGhCbGlua2luZyYmci5yZW1vdmVDc3NDbGFzcyh0aGlzLmVsZW1lbnQsXCJhY2Vfc21vb3RoLWJsaW5raW5nXCIpLGUoITApO2lmKCF0aGlzLmlzQmxpbmtpbmd8fCF0aGlzLmJsaW5rSW50ZXJ2YWx8fCF0aGlzLmlzVmlzaWJsZSlyZXR1cm47dGhpcy5zbW9vdGhCbGlua2luZyYmc2V0VGltZW91dChmdW5jdGlvbigpe3IuYWRkQ3NzQ2xhc3ModGhpcy5lbGVtZW50LFwiYWNlX3Ntb290aC1ibGlua2luZ1wiKX0uYmluZCh0aGlzKSk7dmFyIHQ9ZnVuY3Rpb24oKXt0aGlzLnRpbWVvdXRJZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZSghMSl9LC42KnRoaXMuYmxpbmtJbnRlcnZhbCl9LmJpbmQodGhpcyk7dGhpcy5pbnRlcnZhbElkPXNldEludGVydmFsKGZ1bmN0aW9uKCl7ZSghMCksdCgpfSx0aGlzLmJsaW5rSW50ZXJ2YWwpLHQoKX0sdGhpcy5nZXRQaXhlbFBvc2l0aW9uPWZ1bmN0aW9uKGUsdCl7aWYoIXRoaXMuY29uZmlnfHwhdGhpcy5zZXNzaW9uKXJldHVybntsZWZ0OjAsdG9wOjB9O2V8fChlPXRoaXMuc2Vzc2lvbi5zZWxlY3Rpb24uZ2V0Q3Vyc29yKCkpO3ZhciBuPXRoaXMuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24oZSkscj10aGlzLiRwYWRkaW5nK24uY29sdW1uKnRoaXMuY29uZmlnLmNoYXJhY3RlcldpZHRoLGk9KG4ucm93LSh0P3RoaXMuY29uZmlnLmZpcnN0Um93U2NyZWVuOjApKSp0aGlzLmNvbmZpZy5saW5lSGVpZ2h0O3JldHVybntsZWZ0OnIsdG9wOml9fSx0aGlzLnVwZGF0ZT1mdW5jdGlvbihlKXt0aGlzLmNvbmZpZz1lO3ZhciB0PXRoaXMuc2Vzc2lvbi4kc2VsZWN0aW9uTWFya2VycyxuPTAscj0wO2lmKHQ9PT11bmRlZmluZWR8fHQubGVuZ3RoPT09MCl0PVt7Y3Vyc29yOm51bGx9XTtmb3IodmFyIG49MCxpPXQubGVuZ3RoO248aTtuKyspe3ZhciBzPXRoaXMuZ2V0UGl4ZWxQb3NpdGlvbih0W25dLmN1cnNvciwhMCk7aWYoKHMudG9wPmUuaGVpZ2h0K2Uub2Zmc2V0fHxzLnRvcDwwKSYmbj4xKWNvbnRpbnVlO3ZhciBvPSh0aGlzLmN1cnNvcnNbcisrXXx8dGhpcy5hZGRDdXJzb3IoKSkuc3R5bGU7dGhpcy5kcmF3Q3Vyc29yP3RoaXMuZHJhd0N1cnNvcihvLHMsZSx0W25dLHRoaXMuc2Vzc2lvbik6KG8ubGVmdD1zLmxlZnQrXCJweFwiLG8udG9wPXMudG9wK1wicHhcIixvLndpZHRoPWUuY2hhcmFjdGVyV2lkdGgrXCJweFwiLG8uaGVpZ2h0PWUubGluZUhlaWdodCtcInB4XCIpfXdoaWxlKHRoaXMuY3Vyc29ycy5sZW5ndGg+cil0aGlzLnJlbW92ZUN1cnNvcigpO3ZhciB1PXRoaXMuc2Vzc2lvbi5nZXRPdmVyd3JpdGUoKTt0aGlzLiRzZXRPdmVyd3JpdGUodSksdGhpcy4kcGl4ZWxQb3M9cyx0aGlzLnJlc3RhcnRUaW1lcigpfSx0aGlzLmRyYXdDdXJzb3I9bnVsbCx0aGlzLiRzZXRPdmVyd3JpdGU9ZnVuY3Rpb24oZSl7ZSE9dGhpcy5vdmVyd3JpdGUmJih0aGlzLm92ZXJ3cml0ZT1lLGU/ci5hZGRDc3NDbGFzcyh0aGlzLmVsZW1lbnQsXCJhY2Vfb3ZlcndyaXRlLWN1cnNvcnNcIik6ci5yZW1vdmVDc3NDbGFzcyh0aGlzLmVsZW1lbnQsXCJhY2Vfb3ZlcndyaXRlLWN1cnNvcnNcIikpfSx0aGlzLmRlc3Ryb3k9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCksY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkKX19KS5jYWxsKHMucHJvdG90eXBlKSx0LkN1cnNvcj1zfSksZGVmaW5lKFwiYWNlL3Njcm9sbGJhclwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9vb3BcIixcImFjZS9saWIvZG9tXCIsXCJhY2UvbGliL2V2ZW50XCIsXCJhY2UvbGliL2V2ZW50X2VtaXR0ZXJcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciByPWUoXCIuL2xpYi9vb3BcIiksaT1lKFwiLi9saWIvZG9tXCIpLHM9ZShcIi4vbGliL2V2ZW50XCIpLG89ZShcIi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyLHU9ZnVuY3Rpb24oZSl7dGhpcy5lbGVtZW50PWkuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLmVsZW1lbnQuY2xhc3NOYW1lPVwiYWNlX3Njcm9sbGJhciBhY2Vfc2Nyb2xsYmFyXCIrdGhpcy5jbGFzc1N1ZmZpeCx0aGlzLmlubmVyPWkuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLmlubmVyLmNsYXNzTmFtZT1cImFjZV9zY3JvbGxiYXItaW5uZXJcIix0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5pbm5lciksZS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuc2V0VmlzaWJsZSghMSksdGhpcy5za2lwRXZlbnQ9ITEscy5hZGRMaXN0ZW5lcih0aGlzLmVsZW1lbnQsXCJzY3JvbGxcIix0aGlzLm9uU2Nyb2xsLmJpbmQodGhpcykpLHMuYWRkTGlzdGVuZXIodGhpcy5lbGVtZW50LFwibW91c2Vkb3duXCIscy5wcmV2ZW50RGVmYXVsdCl9OyhmdW5jdGlvbigpe3IuaW1wbGVtZW50KHRoaXMsbyksdGhpcy5zZXRWaXNpYmxlPWZ1bmN0aW9uKGUpe3RoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PWU/XCJcIjpcIm5vbmVcIix0aGlzLmlzVmlzaWJsZT1lfX0pLmNhbGwodS5wcm90b3R5cGUpO3ZhciBhPWZ1bmN0aW9uKGUsdCl7dS5jYWxsKHRoaXMsZSksdGhpcy5zY3JvbGxUb3A9MCx0LiRzY3JvbGxiYXJXaWR0aD10aGlzLndpZHRoPWkuc2Nyb2xsYmFyV2lkdGgoZS5vd25lckRvY3VtZW50KSx0aGlzLmlubmVyLnN0eWxlLndpZHRoPXRoaXMuZWxlbWVudC5zdHlsZS53aWR0aD0odGhpcy53aWR0aHx8MTUpKzUrXCJweFwifTtyLmluaGVyaXRzKGEsdSksZnVuY3Rpb24oKXt0aGlzLmNsYXNzU3VmZml4PVwiLXZcIix0aGlzLm9uU2Nyb2xsPWZ1bmN0aW9uKCl7dGhpcy5za2lwRXZlbnR8fCh0aGlzLnNjcm9sbFRvcD10aGlzLmVsZW1lbnQuc2Nyb2xsVG9wLHRoaXMuX2VtaXQoXCJzY3JvbGxcIix7ZGF0YTp0aGlzLnNjcm9sbFRvcH0pKSx0aGlzLnNraXBFdmVudD0hMX0sdGhpcy5nZXRXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmlzaWJsZT90aGlzLndpZHRoOjB9LHRoaXMuc2V0SGVpZ2h0PWZ1bmN0aW9uKGUpe3RoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQ9ZStcInB4XCJ9LHRoaXMuc2V0SW5uZXJIZWlnaHQ9ZnVuY3Rpb24oZSl7dGhpcy5pbm5lci5zdHlsZS5oZWlnaHQ9ZStcInB4XCJ9LHRoaXMuc2V0U2Nyb2xsSGVpZ2h0PWZ1bmN0aW9uKGUpe3RoaXMuaW5uZXIuc3R5bGUuaGVpZ2h0PWUrXCJweFwifSx0aGlzLnNldFNjcm9sbFRvcD1mdW5jdGlvbihlKXt0aGlzLnNjcm9sbFRvcCE9ZSYmKHRoaXMuc2tpcEV2ZW50PSEwLHRoaXMuc2Nyb2xsVG9wPXRoaXMuZWxlbWVudC5zY3JvbGxUb3A9ZSl9fS5jYWxsKGEucHJvdG90eXBlKTt2YXIgZj1mdW5jdGlvbihlLHQpe3UuY2FsbCh0aGlzLGUpLHRoaXMuc2Nyb2xsTGVmdD0wLHRoaXMuaGVpZ2h0PXQuJHNjcm9sbGJhcldpZHRoLHRoaXMuaW5uZXIuc3R5bGUuaGVpZ2h0PXRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQ9KHRoaXMuaGVpZ2h0fHwxNSkrNStcInB4XCJ9O3IuaW5oZXJpdHMoZix1KSxmdW5jdGlvbigpe3RoaXMuY2xhc3NTdWZmaXg9XCItaFwiLHRoaXMub25TY3JvbGw9ZnVuY3Rpb24oKXt0aGlzLnNraXBFdmVudHx8KHRoaXMuc2Nyb2xsTGVmdD10aGlzLmVsZW1lbnQuc2Nyb2xsTGVmdCx0aGlzLl9lbWl0KFwic2Nyb2xsXCIse2RhdGE6dGhpcy5zY3JvbGxMZWZ0fSkpLHRoaXMuc2tpcEV2ZW50PSExfSx0aGlzLmdldEhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmlzaWJsZT90aGlzLmhlaWdodDowfSx0aGlzLnNldFdpZHRoPWZ1bmN0aW9uKGUpe3RoaXMuZWxlbWVudC5zdHlsZS53aWR0aD1lK1wicHhcIn0sdGhpcy5zZXRJbm5lcldpZHRoPWZ1bmN0aW9uKGUpe3RoaXMuaW5uZXIuc3R5bGUud2lkdGg9ZStcInB4XCJ9LHRoaXMuc2V0U2Nyb2xsV2lkdGg9ZnVuY3Rpb24oZSl7dGhpcy5pbm5lci5zdHlsZS53aWR0aD1lK1wicHhcIn0sdGhpcy5zZXRTY3JvbGxMZWZ0PWZ1bmN0aW9uKGUpe3RoaXMuc2Nyb2xsTGVmdCE9ZSYmKHRoaXMuc2tpcEV2ZW50PSEwLHRoaXMuc2Nyb2xsTGVmdD10aGlzLmVsZW1lbnQuc2Nyb2xsTGVmdD1lKX19LmNhbGwoZi5wcm90b3R5cGUpLHQuU2Nyb2xsQmFyPWEsdC5TY3JvbGxCYXJWPWEsdC5TY3JvbGxCYXJIPWYsdC5WU2Nyb2xsQmFyPWEsdC5IU2Nyb2xsQmFyPWZ9KSxkZWZpbmUoXCJhY2UvcmVuZGVybG9vcFwiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9ldmVudFwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZShcIi4vbGliL2V2ZW50XCIpLGk9ZnVuY3Rpb24oZSx0KXt0aGlzLm9uUmVuZGVyPWUsdGhpcy5wZW5kaW5nPSExLHRoaXMuY2hhbmdlcz0wLHRoaXMud2luZG93PXR8fHdpbmRvd307KGZ1bmN0aW9uKCl7dGhpcy5zY2hlZHVsZT1mdW5jdGlvbihlKXt0aGlzLmNoYW5nZXM9dGhpcy5jaGFuZ2VzfGU7aWYoIXRoaXMucGVuZGluZyYmdGhpcy5jaGFuZ2VzKXt0aGlzLnBlbmRpbmc9ITA7dmFyIHQ9dGhpcztyLm5leHRGcmFtZShmdW5jdGlvbigpe3QucGVuZGluZz0hMTt2YXIgZTt3aGlsZShlPXQuY2hhbmdlcyl0LmNoYW5nZXM9MCx0Lm9uUmVuZGVyKGUpfSx0aGlzLndpbmRvdyl9fX0pLmNhbGwoaS5wcm90b3R5cGUpLHQuUmVuZGVyTG9vcD1pfSksZGVmaW5lKFwiYWNlL2xheWVyL2ZvbnRfbWV0cmljc1wiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9vb3BcIixcImFjZS9saWIvZG9tXCIsXCJhY2UvbGliL2xhbmdcIixcImFjZS9saWIvdXNlcmFnZW50XCIsXCJhY2UvbGliL2V2ZW50X2VtaXR0ZXJcIl0sZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUoXCIuLi9saWIvb29wXCIpLGk9ZShcIi4uL2xpYi9kb21cIikscz1lKFwiLi4vbGliL2xhbmdcIiksbz1lKFwiLi4vbGliL3VzZXJhZ2VudFwiKSx1PWUoXCIuLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXIsYT0wLGY9dC5Gb250TWV0cmljcz1mdW5jdGlvbihlLHQpe3RoaXMuZWw9aS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuJHNldE1lYXN1cmVOb2RlU3R5bGVzKHRoaXMuZWwuc3R5bGUsITApLHRoaXMuJG1haW49aS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuJHNldE1lYXN1cmVOb2RlU3R5bGVzKHRoaXMuJG1haW4uc3R5bGUpLHRoaXMuJG1lYXN1cmVOb2RlPWkuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLiRzZXRNZWFzdXJlTm9kZVN0eWxlcyh0aGlzLiRtZWFzdXJlTm9kZS5zdHlsZSksdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLiRtYWluKSx0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMuJG1lYXN1cmVOb2RlKSxlLmFwcGVuZENoaWxkKHRoaXMuZWwpLGF8fHRoaXMuJHRlc3RGcmFjdGlvbmFsUmVjdCgpLHRoaXMuJG1lYXN1cmVOb2RlLmlubmVySFRNTD1zLnN0cmluZ1JlcGVhdChcIlhcIixhKSx0aGlzLiRjaGFyYWN0ZXJTaXplPXt3aWR0aDowLGhlaWdodDowfSx0aGlzLmNoZWNrRm9yU2l6ZUNoYW5nZXMoKX07KGZ1bmN0aW9uKCl7ci5pbXBsZW1lbnQodGhpcyx1KSx0aGlzLiRjaGFyYWN0ZXJTaXplPXt3aWR0aDowLGhlaWdodDowfSx0aGlzLiR0ZXN0RnJhY3Rpb25hbFJlY3Q9ZnVuY3Rpb24oKXt2YXIgZT1pLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dGhpcy4kc2V0TWVhc3VyZU5vZGVTdHlsZXMoZS5zdHlsZSksZS5zdHlsZS53aWR0aD1cIjAuMnB4XCIsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGUpO3ZhciB0PWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7dD4wJiZ0PDE/YT01MDphPTEwMCxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSl9LHRoaXMuJHNldE1lYXN1cmVOb2RlU3R5bGVzPWZ1bmN0aW9uKGUsdCl7ZS53aWR0aD1lLmhlaWdodD1cImF1dG9cIixlLmxlZnQ9ZS50b3A9XCIwcHhcIixlLnZpc2liaWxpdHk9XCJoaWRkZW5cIixlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixlLndoaXRlU3BhY2U9XCJwcmVcIixvLmlzSUU8OD9lW1wiZm9udC1mYW1pbHlcIl09XCJpbmhlcml0XCI6ZS5mb250PVwiaW5oZXJpdFwiLGUub3ZlcmZsb3c9dD9cImhpZGRlblwiOlwidmlzaWJsZVwifSx0aGlzLmNoZWNrRm9yU2l6ZUNoYW5nZXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLiRtZWFzdXJlU2l6ZXMoKTtpZihlJiYodGhpcy4kY2hhcmFjdGVyU2l6ZS53aWR0aCE9PWUud2lkdGh8fHRoaXMuJGNoYXJhY3RlclNpemUuaGVpZ2h0IT09ZS5oZWlnaHQpKXt0aGlzLiRtZWFzdXJlTm9kZS5zdHlsZS5mb250V2VpZ2h0PVwiYm9sZFwiO3ZhciB0PXRoaXMuJG1lYXN1cmVTaXplcygpO3RoaXMuJG1lYXN1cmVOb2RlLnN0eWxlLmZvbnRXZWlnaHQ9XCJcIix0aGlzLiRjaGFyYWN0ZXJTaXplPWUsdGhpcy5jaGFyU2l6ZXM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLmFsbG93Qm9sZEZvbnRzPXQmJnQud2lkdGg9PT1lLndpZHRoJiZ0LmhlaWdodD09PWUuaGVpZ2h0LHRoaXMuX2VtaXQoXCJjaGFuZ2VDaGFyYWN0ZXJTaXplXCIse2RhdGE6ZX0pfX0sdGhpcy4kcG9sbFNpemVDaGFuZ2VzPWZ1bmN0aW9uKCl7aWYodGhpcy4kcG9sbFNpemVDaGFuZ2VzVGltZXIpcmV0dXJuIHRoaXMuJHBvbGxTaXplQ2hhbmdlc1RpbWVyO3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuJHBvbGxTaXplQ2hhbmdlc1RpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7ZS5jaGVja0ZvclNpemVDaGFuZ2VzKCl9LDUwMCl9LHRoaXMuc2V0UG9sbGluZz1mdW5jdGlvbihlKXtlP3RoaXMuJHBvbGxTaXplQ2hhbmdlcygpOnRoaXMuJHBvbGxTaXplQ2hhbmdlc1RpbWVyJiYoY2xlYXJJbnRlcnZhbCh0aGlzLiRwb2xsU2l6ZUNoYW5nZXNUaW1lciksdGhpcy4kcG9sbFNpemVDaGFuZ2VzVGltZXI9MCl9LHRoaXMuJG1lYXN1cmVTaXplcz1mdW5jdGlvbigpe2lmKGE9PT01MCl7dmFyIGU9bnVsbDt0cnl7ZT10aGlzLiRtZWFzdXJlTm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1jYXRjaCh0KXtlPXt3aWR0aDowLGhlaWdodDowfX12YXIgbj17aGVpZ2h0OmUuaGVpZ2h0LHdpZHRoOmUud2lkdGgvYX19ZWxzZSB2YXIgbj17aGVpZ2h0OnRoaXMuJG1lYXN1cmVOb2RlLmNsaWVudEhlaWdodCx3aWR0aDp0aGlzLiRtZWFzdXJlTm9kZS5jbGllbnRXaWR0aC9hfTtyZXR1cm4gbi53aWR0aD09PTB8fG4uaGVpZ2h0PT09MD9udWxsOm59LHRoaXMuJG1lYXN1cmVDaGFyV2lkdGg9ZnVuY3Rpb24oZSl7dGhpcy4kbWFpbi5pbm5lckhUTUw9cy5zdHJpbmdSZXBlYXQoZSxhKTt2YXIgdD10aGlzLiRtYWluLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiB0LndpZHRoL2F9LHRoaXMuZ2V0Q2hhcmFjdGVyV2lkdGg9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jaGFyU2l6ZXNbZV07cmV0dXJuIHQ9PT11bmRlZmluZWQmJih0aGlzLmNoYXJTaXplc1tlXT10aGlzLiRtZWFzdXJlQ2hhcldpZHRoKGUpL3RoaXMuJGNoYXJhY3RlclNpemUud2lkdGgpLHR9LHRoaXMuZGVzdHJveT1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwodGhpcy4kcG9sbFNpemVDaGFuZ2VzVGltZXIpLHRoaXMuZWwmJnRoaXMuZWwucGFyZW50Tm9kZSYmdGhpcy5lbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWwpfX0pLmNhbGwoZi5wcm90b3R5cGUpfSksZGVmaW5lKFwiYWNlL3ZpcnR1YWxfcmVuZGVyZXJcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIvb29wXCIsXCJhY2UvbGliL2RvbVwiLFwiYWNlL2NvbmZpZ1wiLFwiYWNlL2xpYi91c2VyYWdlbnRcIixcImFjZS9sYXllci9ndXR0ZXJcIixcImFjZS9sYXllci9tYXJrZXJcIixcImFjZS9sYXllci90ZXh0XCIsXCJhY2UvbGF5ZXIvY3Vyc29yXCIsXCJhY2Uvc2Nyb2xsYmFyXCIsXCJhY2Uvc2Nyb2xsYmFyXCIsXCJhY2UvcmVuZGVybG9vcFwiLFwiYWNlL2xheWVyL2ZvbnRfbWV0cmljc1wiLFwiYWNlL2xpYi9ldmVudF9lbWl0dGVyXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi9saWIvb29wXCIpLGk9ZShcIi4vbGliL2RvbVwiKSxzPWUoXCIuL2NvbmZpZ1wiKSxvPWUoXCIuL2xpYi91c2VyYWdlbnRcIiksdT1lKFwiLi9sYXllci9ndXR0ZXJcIikuR3V0dGVyLGE9ZShcIi4vbGF5ZXIvbWFya2VyXCIpLk1hcmtlcixmPWUoXCIuL2xheWVyL3RleHRcIikuVGV4dCxsPWUoXCIuL2xheWVyL2N1cnNvclwiKS5DdXJzb3IsYz1lKFwiLi9zY3JvbGxiYXJcIikuSFNjcm9sbEJhcixoPWUoXCIuL3Njcm9sbGJhclwiKS5WU2Nyb2xsQmFyLHA9ZShcIi4vcmVuZGVybG9vcFwiKS5SZW5kZXJMb29wLGQ9ZShcIi4vbGF5ZXIvZm9udF9tZXRyaWNzXCIpLkZvbnRNZXRyaWNzLHY9ZShcIi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyLG09Jy5hY2VfZWRpdG9yIHtwb3NpdGlvbjogcmVsYXRpdmU7b3ZlcmZsb3c6IGhpZGRlbjtmb250OiAxMnB4L25vcm1hbCBcXCdNb25hY29cXCcsIFxcJ01lbmxvXFwnLCBcXCdVYnVudHUgTW9ub1xcJywgXFwnQ29uc29sYXNcXCcsIFxcJ3NvdXJjZS1jb2RlLXByb1xcJywgbW9ub3NwYWNlO2RpcmVjdGlvbjogbHRyO30uYWNlX3Njcm9sbGVyIHtwb3NpdGlvbjogYWJzb2x1dGU7b3ZlcmZsb3c6IGhpZGRlbjt0b3A6IDA7Ym90dG9tOiAwO2JhY2tncm91bmQtY29sb3I6IGluaGVyaXQ7LW1zLXVzZXItc2VsZWN0OiBub25lOy1tb3otdXNlci1zZWxlY3Q6IG5vbmU7LXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTt1c2VyLXNlbGVjdDogbm9uZTtjdXJzb3I6IHRleHQ7fS5hY2VfY29udGVudCB7cG9zaXRpb246IGFic29sdXRlOy1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDstd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7Ym94LXNpemluZzogYm9yZGVyLWJveDttaW4td2lkdGg6IDEwMCU7fS5hY2VfZHJhZ2dpbmcgLmFjZV9zY3JvbGxlcjpiZWZvcmV7cG9zaXRpb246IGFic29sdXRlO3RvcDogMDtsZWZ0OiAwO3JpZ2h0OiAwO2JvdHRvbTogMDtjb250ZW50OiBcXCdcXCc7YmFja2dyb3VuZDogcmdiYSgyNTAsIDI1MCwgMjUwLCAwLjAxKTt6LWluZGV4OiAxMDAwO30uYWNlX2RyYWdnaW5nLmFjZV9kYXJrIC5hY2Vfc2Nyb2xsZXI6YmVmb3Jle2JhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wMSk7fS5hY2Vfc2VsZWN0aW5nLCAuYWNlX3NlbGVjdGluZyAqIHtjdXJzb3I6IHRleHQgIWltcG9ydGFudDt9LmFjZV9ndXR0ZXIge3Bvc2l0aW9uOiBhYnNvbHV0ZTtvdmVyZmxvdyA6IGhpZGRlbjt3aWR0aDogYXV0bzt0b3A6IDA7Ym90dG9tOiAwO2xlZnQ6IDA7Y3Vyc29yOiBkZWZhdWx0O3otaW5kZXg6IDQ7LW1zLXVzZXItc2VsZWN0OiBub25lOy1tb3otdXNlci1zZWxlY3Q6IG5vbmU7LXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTt1c2VyLXNlbGVjdDogbm9uZTt9LmFjZV9ndXR0ZXItYWN0aXZlLWxpbmUge3Bvc2l0aW9uOiBhYnNvbHV0ZTtsZWZ0OiAwO3JpZ2h0OiAwO30uYWNlX3Njcm9sbGVyLmFjZV9zY3JvbGwtbGVmdCB7Ym94LXNoYWRvdzogMTdweCAwIDE2cHggLTE2cHggcmdiYSgwLCAwLCAwLCAwLjQpIGluc2V0O30uYWNlX2d1dHRlci1jZWxsIHtwYWRkaW5nLWxlZnQ6IDE5cHg7cGFkZGluZy1yaWdodDogNnB4O2JhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7fS5hY2VfZ3V0dGVyLWNlbGwuYWNlX2Vycm9yIHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQU1BQUFBb0xROVRBQUFCT0ZCTVZFWC8vLy8vLy8vL1FSc3dGQWIvVWk0d0ZBWXdGQVl3RkFhV0dBZkRSeW16T1NIL1B4c3dGQWIvU2lVd0ZBWXdGQWJVUFJ2alFpRGxsb2c1SGhIZFJ5YnNUaTMvVHl2OVRpcitTeWovVUMzLy8vL1h1cmViTUJJd0ZBYi9SU0hiUHgvZ1V6ZmR3TDNrek1pdktCQXdGQWJidmJuaFB4NjZOaG93RkFZd0ZBYVpKZzh3RkFheEtCRFp1cmYvUkI2bU14Yi9TQ013RkFZd0ZBYnhRQjMrUkI0d0ZBYi9RaHk0T2grNFFpZmJOUmN3RkFZd0ZBWXdGQWIvUVJ6ZE5oZ3dGQVl3RkFiYXY3di9VeTdvYUU2OE1CSzVMeExld3IvcjJOWGV3THN3RkFheEp3NHdGQWJrUFJ5MlB5WXdGQWF4S2hMbTF0TXdGQWF6UGlRd0ZBYVVHQWIvUUJyZk94M2J2cnYvVkMvbWFFNHdGQWJSUEJxNk1STzhReW5ldzhEcDJ0amZ3YjB3RkFieDZlanU1K2J5NnVuczR1SDkvZjM2K3ZyL0drSGpBQUFBWW5SU1RsTUFHdCs2NHJuV3UvYm84ZUFBNEluSDMrRHdvTjdqNGVMaTR4UDk5TmZnNCtiKy91OUIvZURzMU1EMW1PNys0UEhnMk1YYTM0N2c3dkRpek1MTjRlRytQdjdpNWV2cy92Nzl5dTdTMy9EVjcvNDk4WXYyNGVIKzR1ZlEzT3p1L3Y3K3kxM3NScXdBQUFETFNVUkJWSGphWmMvWERzRmdHSUJodERyc2hsaXRtazJJcmJIRnFMMnB2WGYvKzc4RFBva2o3K0Z6OXFwVS85VVhKSWxobVBhVGFRNlFQYXowbW0rNWd3a2dvdmNWNkdaemQ1SnRDUXdnc3hvSE92Sk8xNWtsZVJMQW5NZ0hGSUVTVUVQbWF3QjluZ21lbFR0aXB3d2ZBU2lseE9MeWlWNVVWVXlWQWZiRzBjQ1BIaWcrR0JrekFFTkhTMEFzdFZGNmJhY1pJT3pnTG14c0hidDJPZWNOZ0pDODNKRVJtZVBVWXE4QVJHa0p4Nlh0RnNkZGRCUWdaRTJuUFI2Q0lDWmhhd2pBNEZiL2NodiszOTlrZlIrTU1NREdPUUFBQUFCSlJVNUVya0pnZ2c9PVwiKTtiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246IDJweCBjZW50ZXI7fS5hY2VfZ3V0dGVyLWNlbGwuYWNlX3dhcm5pbmcge2JhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUNBTUFBQUFvTFE5VEFBQUFtVkJNVkVYLy8vOEFBQUQvLy84QUFBQUFBQUJQU3piLzVzQUFBQUIvYmxILzczei91bGtBQUFBQUFBRDg1cGtBQUFBQUFBQUNBZ1Avdkd6L3JrRGVyR2JHclY3L3BrUUlDQWYvLy8vZTBJc0FBQUQvb0VEL3FUdmhyblVBQUFEL3lIRC9uamNBQUFEdXYyci9uei8vb1RqL3AwNjRvR2YvekhBQUFBQTlOaXIvdEZJQUFBRC90bFRpdVdmL3RrSUFBQUN5blhFQUFBQUFBQUF0SVJXN3pCcEJBQUFBTTNSU1RsTUFBQlIxbTdSWE84TG4zMVozNnpUK25lWGU1T3pvb1JEZm4rVFo0cDNoMmhUZjR0M2szdWN5ck4xSzUrWGFrczUyU2ZzOUNYZ3JBQUFBamtsRVFWUjQybzNQYlErQ0lCUUZZRXdib1BoU1lnb1l1bklxcUxuNi96OHVZZEg4Vm1kbnU5dno0V3dYZ04veFRQUkQyK3NnT2NaanNnZS93aFhaZ1VhWVl2VDhRbnVKYVVyanJIVVFyZUdjenVFYWZRQ08vU0pUdWZUYnJvV3NQZ3NsbFZocTN3SkVrMmpVU3pYM0NVRURKQzg0NzA3ZGpSYzVNVEFReG9MZ3VwV1J3VzZVQjVmUysrTlY4QWJPWmduc0M3QnBFQUFBQUFCSlJVNUVya0pnZ2c9PVwiKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOiAycHggY2VudGVyO30uYWNlX2d1dHRlci1jZWxsLmFjZV9pbmZvIHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQUFBQUFBNm1LQzlBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQUFKMFVrNVRBQUIyazgwNEFBQUFQa2xFUVZRWTAyTmdJQjY4UXVPM3RpTHpuakF3cEtUZ055RGJNZWd3aXNDSFpVRVRVWlYwWnFPcXVCcFhqMnJ0bnBTSlQxQUVublJtTDJPZ0dnQUFJS2tSUWFwMmh0Z0FBQUFBU1VWT1JLNUNZSUk9XCIpO2JhY2tncm91bmQtcG9zaXRpb246IDJweCBjZW50ZXI7fS5hY2VfZGFyayAuYWNlX2d1dHRlci1jZWxsLmFjZV9pbmZvIHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFCQU1BQUFEdDNlSlNBQUFBSkZCTVZFVUFBQUNob2FHQWdJQXFLaXErdnI2dHJhMVpXVm1VbEpTYm01czhQRHh1Ym01NmVucmRnemczQUFBQUFYUlNUbE1BUU9iWVpnQUFBQ2xKUkVGVWVOcGpZTUFQZHNNWUhlZ3lKWkZRQmxzVWxNRlZDV1VZS2tBWk14WkFHZHhsRE1RQkFHK1RCUDRCNlJ5SkFBQUFBRWxGVGtTdVFtQ0NcIik7fS5hY2Vfc2Nyb2xsYmFyIHtwb3NpdGlvbjogYWJzb2x1dGU7cmlnaHQ6IDA7Ym90dG9tOiAwO3otaW5kZXg6IDY7fS5hY2Vfc2Nyb2xsYmFyLWlubmVyIHtwb3NpdGlvbjogYWJzb2x1dGU7Y3Vyc29yOiB0ZXh0O2xlZnQ6IDA7dG9wOiAwO30uYWNlX3Njcm9sbGJhci12e292ZXJmbG93LXg6IGhpZGRlbjtvdmVyZmxvdy15OiBzY3JvbGw7dG9wOiAwO30uYWNlX3Njcm9sbGJhci1oIHtvdmVyZmxvdy14OiBzY3JvbGw7b3ZlcmZsb3cteTogaGlkZGVuO2xlZnQ6IDA7fS5hY2VfcHJpbnQtbWFyZ2luIHtwb3NpdGlvbjogYWJzb2x1dGU7aGVpZ2h0OiAxMDAlO30uYWNlX3RleHQtaW5wdXQge3Bvc2l0aW9uOiBhYnNvbHV0ZTt6LWluZGV4OiAwO3dpZHRoOiAwLjVlbTtoZWlnaHQ6IDFlbTtvcGFjaXR5OiAwO2JhY2tncm91bmQ6IHRyYW5zcGFyZW50Oy1tb3otYXBwZWFyYW5jZTogbm9uZTthcHBlYXJhbmNlOiBub25lO2JvcmRlcjogbm9uZTtyZXNpemU6IG5vbmU7b3V0bGluZTogbm9uZTtvdmVyZmxvdzogaGlkZGVuO2ZvbnQ6IGluaGVyaXQ7cGFkZGluZzogMCAxcHg7bWFyZ2luOiAwIC0xcHg7dGV4dC1pbmRlbnQ6IC0xZW07LW1zLXVzZXItc2VsZWN0OiB0ZXh0Oy1tb3otdXNlci1zZWxlY3Q6IHRleHQ7LXdlYmtpdC11c2VyLXNlbGVjdDogdGV4dDt1c2VyLXNlbGVjdDogdGV4dDt3aGl0ZS1zcGFjZTogcHJlIWltcG9ydGFudDt9LmFjZV90ZXh0LWlucHV0LmFjZV9jb21wb3NpdGlvbiB7YmFja2dyb3VuZDogaW5oZXJpdDtjb2xvcjogaW5oZXJpdDt6LWluZGV4OiAxMDAwO29wYWNpdHk6IDE7dGV4dC1pbmRlbnQ6IDA7fS5hY2VfbGF5ZXIge3otaW5kZXg6IDE7cG9zaXRpb246IGFic29sdXRlO292ZXJmbG93OiBoaWRkZW47d29yZC13cmFwOiBub3JtYWw7d2hpdGUtc3BhY2U6IHByZTtoZWlnaHQ6IDEwMCU7d2lkdGg6IDEwMCU7LW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Oy13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDtib3gtc2l6aW5nOiBib3JkZXItYm94O3BvaW50ZXItZXZlbnRzOiBub25lO30uYWNlX2d1dHRlci1sYXllciB7cG9zaXRpb246IHJlbGF0aXZlO3dpZHRoOiBhdXRvO3RleHQtYWxpZ246IHJpZ2h0O3BvaW50ZXItZXZlbnRzOiBhdXRvO30uYWNlX3RleHQtbGF5ZXIge2ZvbnQ6IGluaGVyaXQgIWltcG9ydGFudDt9LmFjZV9jamsge2Rpc3BsYXk6IGlubGluZS1ibG9jazt0ZXh0LWFsaWduOiBjZW50ZXI7fS5hY2VfY3Vyc29yLWxheWVyIHt6LWluZGV4OiA0O30uYWNlX2N1cnNvciB7ei1pbmRleDogNDtwb3NpdGlvbjogYWJzb2x1dGU7LW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Oy13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDtib3gtc2l6aW5nOiBib3JkZXItYm94O2JvcmRlci1sZWZ0OiAycHggc29saWQ7dHJhbnNmb3JtOiB0cmFuc2xhdGV6KDApO30uYWNlX3NsaW0tY3Vyc29ycyAuYWNlX2N1cnNvciB7Ym9yZGVyLWxlZnQtd2lkdGg6IDFweDt9LmFjZV9vdmVyd3JpdGUtY3Vyc29ycyAuYWNlX2N1cnNvciB7Ym9yZGVyLWxlZnQtd2lkdGg6IDA7Ym9yZGVyLWJvdHRvbTogMXB4IHNvbGlkO30uYWNlX2hpZGRlbi1jdXJzb3JzIC5hY2VfY3Vyc29yIHtvcGFjaXR5OiAwLjI7fS5hY2Vfc21vb3RoLWJsaW5raW5nIC5hY2VfY3Vyc29yIHstd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC4xOHM7dHJhbnNpdGlvbjogb3BhY2l0eSAwLjE4czt9LmFjZV9lZGl0b3IuYWNlX211bHRpc2VsZWN0IC5hY2VfY3Vyc29yIHtib3JkZXItbGVmdC13aWR0aDogMXB4O30uYWNlX21hcmtlci1sYXllciAuYWNlX3N0ZXAsIC5hY2VfbWFya2VyLWxheWVyIC5hY2Vfc3RhY2sge3Bvc2l0aW9uOiBhYnNvbHV0ZTt6LWluZGV4OiAzO30uYWNlX21hcmtlci1sYXllciAuYWNlX3NlbGVjdGlvbiB7cG9zaXRpb246IGFic29sdXRlO3otaW5kZXg6IDU7fS5hY2VfbWFya2VyLWxheWVyIC5hY2VfYnJhY2tldCB7cG9zaXRpb246IGFic29sdXRlO3otaW5kZXg6IDY7fS5hY2VfbWFya2VyLWxheWVyIC5hY2VfYWN0aXZlLWxpbmUge3Bvc2l0aW9uOiBhYnNvbHV0ZTt6LWluZGV4OiAyO30uYWNlX21hcmtlci1sYXllciAuYWNlX3NlbGVjdGVkLXdvcmQge3Bvc2l0aW9uOiBhYnNvbHV0ZTt6LWluZGV4OiA0Oy1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDstd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7Ym94LXNpemluZzogYm9yZGVyLWJveDt9LmFjZV9saW5lIC5hY2VfZm9sZCB7LW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Oy13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDtib3gtc2l6aW5nOiBib3JkZXItYm94O2Rpc3BsYXk6IGlubGluZS1ibG9jaztoZWlnaHQ6IDExcHg7bWFyZ2luLXRvcDogLTJweDt2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCRUFBQUFKQ0FZQUFBRFU2TWNNQUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFKcEpSRUZVZU5waS9QLy9Qd09sZ0FYR1lHUmtsQVZTb2tEOEdtandZMXdhc0tsalFwWUFDdHBDRmVBRGNIVlFmUXlNUUF3endBWkkzd0pLdkNMa2ZLQmFNU0NsQmxSN0JPUWlrQ0ZHUUVFcklIMFZxa2FiaUdDQXF3VWFkQXpaSlJ4UXIvMGd3aVhJYWw4elFRUG5OVlRnSjFUZGF3TDBUNWdCSVAxTVVKTmhCdjJIS29RSEhqcU5yQTRXTzR6WTBnbHlOS0xUMktJZklNQUFRc2RnR2lYdmduWUFBQUFBU1VWT1JLNUNZSUk9XCIpLHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBM0NBWUFBQUROTmlBNUFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBQ0pKUkVGVWVOcGkrUC8vZnhnVEF3UERCeER4RDA3OFJTWCtZZUV5REZNQ0lNQUFJM0lObVhpd2YyWUFBQUFBU1VWT1JLNUNZSUk9XCIpO2JhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQsIHJlcGVhdC14O2JhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXIsIHRvcCBsZWZ0O2NvbG9yOiB0cmFuc3BhcmVudDtib3JkZXI6IDFweCBzb2xpZCBibGFjaztib3JkZXItcmFkaXVzOiAycHg7Y3Vyc29yOiBwb2ludGVyO3BvaW50ZXItZXZlbnRzOiBhdXRvO30uYWNlX2RhcmsgLmFjZV9mb2xkIHt9LmFjZV9mb2xkOmhvdmVye2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCRUFBQUFKQ0FZQUFBRFU2TWNNQUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFKcEpSRUZVZU5waS9QLy9Qd09sZ0FYR1lHUmtsQVZTb2tEOEdtandZMXdhc0tsalFwWUFDdHBDRmVBRGNIVlFmUXlNUUF3endBWkkzd0pLdkNMa2ZLQmFNU0NsQmxSN0JPUWlrQ0ZHUUVFcklIMFZxa2FiaUdDQXF3VWFkQXpaSlJ4UXIvMGd3aVhJYWw4elFRUG5OVlRnSjFUZGF3TDBUNWdCSVAxTVVKTmhCdjJIS29RSEhqcU5yQTRXTzR6WTBnbHlOS0xUMktJZklNQUFRc2RnR2lYdmduWUFBQUFBU1VWT1JLNUNZSUk9XCIpLHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBM0NBWUFBQUROTmlBNUFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBQ0JKUkVGVWVOcGkrUC8vZno0VEF3UERaeER4RDVYNGk1ZkxNRXdKZ0FBREFFUFZEYmpOdzg3WkFBQUFBRWxGVGtTdVFtQ0NcIik7fS5hY2VfdG9vbHRpcCB7YmFja2dyb3VuZC1jb2xvcjogI0ZGRjtiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsIHRyYW5zcGFyZW50LCByZ2JhKDAsIDAsIDAsIDAuMSkpO2JhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHRyYW5zcGFyZW50LCByZ2JhKDAsIDAsIDAsIDAuMSkpO2JvcmRlcjogMXB4IHNvbGlkIGdyYXk7Ym9yZGVyLXJhZGl1czogMXB4O2JveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMyk7Y29sb3I6IGJsYWNrO21heC13aWR0aDogMTAwJTtwYWRkaW5nOiAzcHggNHB4O3Bvc2l0aW9uOiBmaXhlZDt6LWluZGV4OiA5OTk5OTk7LW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Oy13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDtib3gtc2l6aW5nOiBib3JkZXItYm94O2N1cnNvcjogZGVmYXVsdDt3aGl0ZS1zcGFjZTogcHJlO3dvcmQtd3JhcDogYnJlYWstd29yZDtsaW5lLWhlaWdodDogbm9ybWFsO2ZvbnQtc3R5bGU6IG5vcm1hbDtmb250LXdlaWdodDogbm9ybWFsO2xldHRlci1zcGFjaW5nOiBub3JtYWw7cG9pbnRlci1ldmVudHM6IG5vbmU7fS5hY2VfZm9sZGluZy1lbmFibGVkID4gLmFjZV9ndXR0ZXItY2VsbCB7cGFkZGluZy1yaWdodDogMTNweDt9LmFjZV9mb2xkLXdpZGdldCB7LW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Oy13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDtib3gtc2l6aW5nOiBib3JkZXItYm94O21hcmdpbjogMCAtMTJweCAwIDFweDtkaXNwbGF5OiBub25lO3dpZHRoOiAxMXB4O3ZlcnRpY2FsLWFsaWduOiB0b3A7YmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBVUFBQUFGQ0FZQUFBQ05ieWJsQUFBQU5FbEVRVlI0Mm1XS3NRMEFNQXpDOGl4TGxyelFqem1CaUVqcDBBNld3QkNTUGdLQVhvTGtxU290N25OM3lNd1I3cFozMk56cEtrVm9EQlV4S0FBQUFBQkpSVTVFcmtKZ2dnPT1cIik7YmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7Ym9yZGVyLXJhZGl1czogM3B4O2JvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O2N1cnNvcjogcG9pbnRlcjt9LmFjZV9mb2xkaW5nLWVuYWJsZWQgLmFjZV9mb2xkLXdpZGdldCB7ZGlzcGxheTogaW5saW5lLWJsb2NrOyAgIH0uYWNlX2ZvbGQtd2lkZ2V0LmFjZV9lbmQge2JhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQVVBQUFBRkNBWUFBQUNOYnlibEFBQUFORWxFUVZSNDJtM0h3UWtBTUFoRDBZenNSY2hGS0k3c0Fpa2VXa3J4d1NjRUIwbmg1ZTdLVFBXaW1aa2k0dFlmVmJYK01ObDRweVpYZWpVTzFRQUFBQUJKUlU1RXJrSmdnZz09XCIpO30uYWNlX2ZvbGQtd2lkZ2V0LmFjZV9jbG9zZWQge2JhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQU1BQUFBR0NBWUFBQUFHNVNRTUFBQUFPVWxFUVZSNDJqWEt3UWtBTUFnRHdLd3FLRDRFd1EyNnNTT2tWV2pnSUlIQXpQaUNnYXFpcW5KSFpuS0lDQkVSSE4xOTRPNWI5dmJMdUFWUkwrbDBZV25aQUFBQUFFbEZUa1N1UW1DQ1hBPT1cIik7fS5hY2VfZm9sZC13aWRnZXQ6aG92ZXIge2JvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKTtiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7Ym94LXNoYWRvdzogMCAxcHggMXB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTt9LmFjZV9mb2xkLXdpZGdldDphY3RpdmUge2JvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC40KTtiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMDUpO2JveC1zaGFkb3c6IDAgMXB4IDFweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCk7fS5hY2VfZGFyayAuYWNlX2ZvbGQtd2lkZ2V0IHtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFVQUFBQUZDQVlBQUFDTmJ5YmxBQUFBSGtsRVFWUUlXMlA0Ly84L0F6b0dFUTdvR0NhTExBaFdpU3dCMTQ2QkFRQ1NUUFlvY3FUMEFBQUFBRWxGVGtTdVFtQ0NcIik7fS5hY2VfZGFyayAuYWNlX2ZvbGQtd2lkZ2V0LmFjZV9lbmQge2JhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQVVBQUFBRkNBWUFBQUNOYnlibEFBQUFIMGxFUVZRSVcyUDQvLzgvQXhRN3dOaklBakRNZ0M0QXhqQ1ZLQmlySUFBRjBrejJybGh4cEFBQUFBQkpSVTVFcmtKZ2dnPT1cIik7fS5hY2VfZGFyayAuYWNlX2ZvbGQtd2lkZ2V0LmFjZV9jbG9zZWQge2JhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQU1BQUFBRkNBWUFBQUNBY1ZhaUFBQUFIRWxFUVZRSVcyUDQvLysvQXhBemdEQURsT09Bem5IQUtnUFdBd0FSamk4VUlEVGZRUUFBQUFCSlJVNUVya0pnZ2c9PVwiKTt9LmFjZV9kYXJrIC5hY2VfZm9sZC13aWRnZXQ6aG92ZXIge2JveC1zaGFkb3c6IDAgMXB4IDFweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7YmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpO30uYWNlX2RhcmsgLmFjZV9mb2xkLXdpZGdldDphY3RpdmUge2JveC1zaGFkb3c6IDAgMXB4IDFweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7fS5hY2VfZm9sZC13aWRnZXQuYWNlX2ludmFsaWQge2JhY2tncm91bmQtY29sb3I6ICNGRkI0QjQ7Ym9yZGVyLWNvbG9yOiAjREU1NTU1O30uYWNlX2ZhZGUtZm9sZC13aWRnZXRzIC5hY2VfZm9sZC13aWRnZXQgey13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjRzIGVhc2UgMC4wNXM7dHJhbnNpdGlvbjogb3BhY2l0eSAwLjRzIGVhc2UgMC4wNXM7b3BhY2l0eTogMDt9LmFjZV9mYWRlLWZvbGQtd2lkZ2V0czpob3ZlciAuYWNlX2ZvbGQtd2lkZ2V0IHstd2Via2l0LXRyYW5zaXRpb246IG9wYWNpdHkgMC4wNXMgZWFzZSAwLjA1czt0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMDVzIGVhc2UgMC4wNXM7b3BhY2l0eToxO30uYWNlX3VuZGVybGluZSB7dGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7fS5hY2VfYm9sZCB7Zm9udC13ZWlnaHQ6IGJvbGQ7fS5hY2Vfbm9ib2xkIC5hY2VfYm9sZCB7Zm9udC13ZWlnaHQ6IG5vcm1hbDt9LmFjZV9pdGFsaWMge2ZvbnQtc3R5bGU6IGl0YWxpYzt9LmFjZV9lcnJvci1tYXJrZXIge2JhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAwLCAwLDAuMik7cG9zaXRpb246IGFic29sdXRlO3otaW5kZXg6IDk7fS5hY2VfaGlnaGxpZ2h0LW1hcmtlciB7YmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMCwwLjIpO3Bvc2l0aW9uOiBhYnNvbHV0ZTt6LWluZGV4OiA4O30uYWNlX2JyMSB7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1cyAgICA6IDNweDt9LmFjZV9icjIge2JvcmRlci10b3AtcmlnaHQtcmFkaXVzICAgOiAzcHg7fS5hY2VfYnIzIHtib3JkZXItdG9wLWxlZnQtcmFkaXVzICAgIDogM3B4OyBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogICAgM3B4O30uYWNlX2JyNCB7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDt9LmFjZV9icjUge2JvcmRlci10b3AtbGVmdC1yYWRpdXMgICAgOiAzcHg7IGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAzcHg7fS5hY2VfYnI2IHtib3JkZXItdG9wLXJpZ2h0LXJhZGl1cyAgIDogM3B4OyBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogM3B4O30uYWNlX2JyNyB7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1cyAgICA6IDNweDsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6ICAgIDNweDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDt9LmFjZV9icjgge2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXMgOiAzcHg7fS5hY2VfYnI5IHtib3JkZXItdG9wLWxlZnQtcmFkaXVzICAgIDogM3B4OyBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAgM3B4O30uYWNlX2JyMTB7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXMgICA6IDNweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogIDNweDt9LmFjZV9icjExe2JvcmRlci10b3AtbGVmdC1yYWRpdXMgICAgOiAzcHg7IGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAgICAzcHg7IGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6ICAzcHg7fS5hY2VfYnIxMntib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogM3B4OyBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAgM3B4O30uYWNlX2JyMTN7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1cyAgICA6IDNweDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogIDNweDt9LmFjZV9icjE0e2JvcmRlci10b3AtcmlnaHQtcmFkaXVzICAgOiAzcHg7IGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAzcHg7IGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6ICAzcHg7fS5hY2VfYnIxNXtib3JkZXItdG9wLWxlZnQtcmFkaXVzICAgIDogM3B4OyBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogICAgM3B4OyBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogM3B4OyBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAzcHg7fSc7aS5pbXBvcnRDc3NTdHJpbmcobSxcImFjZV9lZGl0b3IuY3NzXCIpO3ZhciBnPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt0aGlzLmNvbnRhaW5lcj1lfHxpLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy4ka2VlcFRleHRBcmVhQXRDdXJzb3I9IW8uaXNPbGRJRSxpLmFkZENzc0NsYXNzKHRoaXMuY29udGFpbmVyLFwiYWNlX2VkaXRvclwiKSx0aGlzLnNldFRoZW1lKHQpLHRoaXMuJGd1dHRlcj1pLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy4kZ3V0dGVyLmNsYXNzTmFtZT1cImFjZV9ndXR0ZXJcIix0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLiRndXR0ZXIpLHRoaXMuc2Nyb2xsZXI9aS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuc2Nyb2xsZXIuY2xhc3NOYW1lPVwiYWNlX3Njcm9sbGVyXCIsdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5zY3JvbGxlciksdGhpcy5jb250ZW50PWkuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLmNvbnRlbnQuY2xhc3NOYW1lPVwiYWNlX2NvbnRlbnRcIix0aGlzLnNjcm9sbGVyLmFwcGVuZENoaWxkKHRoaXMuY29udGVudCksdGhpcy4kZ3V0dGVyTGF5ZXI9bmV3IHUodGhpcy4kZ3V0dGVyKSx0aGlzLiRndXR0ZXJMYXllci5vbihcImNoYW5nZUd1dHRlcldpZHRoXCIsdGhpcy5vbkd1dHRlclJlc2l6ZS5iaW5kKHRoaXMpKSx0aGlzLiRtYXJrZXJCYWNrPW5ldyBhKHRoaXMuY29udGVudCk7dmFyIHI9dGhpcy4kdGV4dExheWVyPW5ldyBmKHRoaXMuY29udGVudCk7dGhpcy5jYW52YXM9ci5lbGVtZW50LHRoaXMuJG1hcmtlckZyb250PW5ldyBhKHRoaXMuY29udGVudCksdGhpcy4kY3Vyc29yTGF5ZXI9bmV3IGwodGhpcy5jb250ZW50KSx0aGlzLiRob3JpelNjcm9sbD0hMSx0aGlzLiR2U2Nyb2xsPSExLHRoaXMuc2Nyb2xsQmFyPXRoaXMuc2Nyb2xsQmFyVj1uZXcgaCh0aGlzLmNvbnRhaW5lcix0aGlzKSx0aGlzLnNjcm9sbEJhckg9bmV3IGModGhpcy5jb250YWluZXIsdGhpcyksdGhpcy5zY3JvbGxCYXJWLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIixmdW5jdGlvbihlKXtuLiRzY3JvbGxBbmltYXRpb258fG4uc2Vzc2lvbi5zZXRTY3JvbGxUb3AoZS5kYXRhLW4uc2Nyb2xsTWFyZ2luLnRvcCl9KSx0aGlzLnNjcm9sbEJhckguYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLGZ1bmN0aW9uKGUpe24uJHNjcm9sbEFuaW1hdGlvbnx8bi5zZXNzaW9uLnNldFNjcm9sbExlZnQoZS5kYXRhLW4uc2Nyb2xsTWFyZ2luLmxlZnQpfSksdGhpcy5zY3JvbGxUb3A9MCx0aGlzLnNjcm9sbExlZnQ9MCx0aGlzLmN1cnNvclBvcz17cm93OjAsY29sdW1uOjB9LHRoaXMuJGZvbnRNZXRyaWNzPW5ldyBkKHRoaXMuY29udGFpbmVyLDUwMCksdGhpcy4kdGV4dExheWVyLiRzZXRGb250TWV0cmljcyh0aGlzLiRmb250TWV0cmljcyksdGhpcy4kdGV4dExheWVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VDaGFyYWN0ZXJTaXplXCIsZnVuY3Rpb24oZSl7bi51cGRhdGVDaGFyYWN0ZXJTaXplKCksbi5vblJlc2l6ZSghMCxuLmd1dHRlcldpZHRoLG4uJHNpemUud2lkdGgsbi4kc2l6ZS5oZWlnaHQpLG4uX3NpZ25hbChcImNoYW5nZUNoYXJhY3RlclNpemVcIixlKX0pLHRoaXMuJHNpemU9e3dpZHRoOjAsaGVpZ2h0OjAsc2Nyb2xsZXJIZWlnaHQ6MCxzY3JvbGxlcldpZHRoOjAsJGRpcnR5OiEwfSx0aGlzLmxheWVyQ29uZmlnPXt3aWR0aDoxLHBhZGRpbmc6MCxmaXJzdFJvdzowLGZpcnN0Um93U2NyZWVuOjAsbGFzdFJvdzowLGxpbmVIZWlnaHQ6MCxjaGFyYWN0ZXJXaWR0aDowLG1pbkhlaWdodDoxLG1heEhlaWdodDoxLG9mZnNldDowLGhlaWdodDoxLGd1dHRlck9mZnNldDoxfSx0aGlzLnNjcm9sbE1hcmdpbj17bGVmdDowLHJpZ2h0OjAsdG9wOjAsYm90dG9tOjAsdjowLGg6MH0sdGhpcy4kbG9vcD1uZXcgcCh0aGlzLiRyZW5kZXJDaGFuZ2VzLmJpbmQodGhpcyksdGhpcy5jb250YWluZXIub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyksdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9GVUxMKSx0aGlzLnVwZGF0ZUNoYXJhY3RlclNpemUoKSx0aGlzLnNldFBhZGRpbmcoNCkscy5yZXNldE9wdGlvbnModGhpcykscy5fZW1pdChcInJlbmRlcmVyXCIsdGhpcyl9OyhmdW5jdGlvbigpe3RoaXMuQ0hBTkdFX0NVUlNPUj0xLHRoaXMuQ0hBTkdFX01BUktFUj0yLHRoaXMuQ0hBTkdFX0dVVFRFUj00LHRoaXMuQ0hBTkdFX1NDUk9MTD04LHRoaXMuQ0hBTkdFX0xJTkVTPTE2LHRoaXMuQ0hBTkdFX1RFWFQ9MzIsdGhpcy5DSEFOR0VfU0laRT02NCx0aGlzLkNIQU5HRV9NQVJLRVJfQkFDSz0xMjgsdGhpcy5DSEFOR0VfTUFSS0VSX0ZST05UPTI1Nix0aGlzLkNIQU5HRV9GVUxMPTUxMix0aGlzLkNIQU5HRV9IX1NDUk9MTD0xMDI0LHIuaW1wbGVtZW50KHRoaXMsdiksdGhpcy51cGRhdGVDaGFyYWN0ZXJTaXplPWZ1bmN0aW9uKCl7dGhpcy4kdGV4dExheWVyLmFsbG93Qm9sZEZvbnRzIT10aGlzLiRhbGxvd0JvbGRGb250cyYmKHRoaXMuJGFsbG93Qm9sZEZvbnRzPXRoaXMuJHRleHRMYXllci5hbGxvd0JvbGRGb250cyx0aGlzLnNldFN0eWxlKFwiYWNlX25vYm9sZFwiLCF0aGlzLiRhbGxvd0JvbGRGb250cykpLHRoaXMubGF5ZXJDb25maWcuY2hhcmFjdGVyV2lkdGg9dGhpcy5jaGFyYWN0ZXJXaWR0aD10aGlzLiR0ZXh0TGF5ZXIuZ2V0Q2hhcmFjdGVyV2lkdGgoKSx0aGlzLmxheWVyQ29uZmlnLmxpbmVIZWlnaHQ9dGhpcy5saW5lSGVpZ2h0PXRoaXMuJHRleHRMYXllci5nZXRMaW5lSGVpZ2h0KCksdGhpcy4kdXBkYXRlUHJpbnRNYXJnaW4oKX0sdGhpcy5zZXRTZXNzaW9uPWZ1bmN0aW9uKGUpe3RoaXMuc2Vzc2lvbiYmdGhpcy5zZXNzaW9uLmRvYy5vZmYoXCJjaGFuZ2VOZXdMaW5lTW9kZVwiLHRoaXMub25DaGFuZ2VOZXdMaW5lTW9kZSksdGhpcy5zZXNzaW9uPWUsZSYmdGhpcy5zY3JvbGxNYXJnaW4udG9wJiZlLmdldFNjcm9sbFRvcCgpPD0wJiZlLnNldFNjcm9sbFRvcCgtdGhpcy5zY3JvbGxNYXJnaW4udG9wKSx0aGlzLiRjdXJzb3JMYXllci5zZXRTZXNzaW9uKGUpLHRoaXMuJG1hcmtlckJhY2suc2V0U2Vzc2lvbihlKSx0aGlzLiRtYXJrZXJGcm9udC5zZXRTZXNzaW9uKGUpLHRoaXMuJGd1dHRlckxheWVyLnNldFNlc3Npb24oZSksdGhpcy4kdGV4dExheWVyLnNldFNlc3Npb24oZSk7aWYoIWUpcmV0dXJuO3RoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfRlVMTCksdGhpcy5zZXNzaW9uLiRzZXRGb250TWV0cmljcyh0aGlzLiRmb250TWV0cmljcyksdGhpcy5vbkNoYW5nZU5ld0xpbmVNb2RlPXRoaXMub25DaGFuZ2VOZXdMaW5lTW9kZS5iaW5kKHRoaXMpLHRoaXMub25DaGFuZ2VOZXdMaW5lTW9kZSgpLHRoaXMuc2Vzc2lvbi5kb2Mub24oXCJjaGFuZ2VOZXdMaW5lTW9kZVwiLHRoaXMub25DaGFuZ2VOZXdMaW5lTW9kZSl9LHRoaXMudXBkYXRlTGluZXM9ZnVuY3Rpb24oZSx0LG4pe3Q9PT11bmRlZmluZWQmJih0PUluZmluaXR5KSx0aGlzLiRjaGFuZ2VkTGluZXM/KHRoaXMuJGNoYW5nZWRMaW5lcy5maXJzdFJvdz5lJiYodGhpcy4kY2hhbmdlZExpbmVzLmZpcnN0Um93PWUpLHRoaXMuJGNoYW5nZWRMaW5lcy5sYXN0Um93PHQmJih0aGlzLiRjaGFuZ2VkTGluZXMubGFzdFJvdz10KSk6dGhpcy4kY2hhbmdlZExpbmVzPXtmaXJzdFJvdzplLGxhc3RSb3c6dH07aWYodGhpcy4kY2hhbmdlZExpbmVzLmxhc3RSb3c8dGhpcy5sYXllckNvbmZpZy5maXJzdFJvdyl7aWYoIW4pcmV0dXJuO3RoaXMuJGNoYW5nZWRMaW5lcy5sYXN0Um93PXRoaXMubGF5ZXJDb25maWcubGFzdFJvd31pZih0aGlzLiRjaGFuZ2VkTGluZXMuZmlyc3RSb3c+dGhpcy5sYXllckNvbmZpZy5sYXN0Um93KXJldHVybjt0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX0xJTkVTKX0sdGhpcy5vbkNoYW5nZU5ld0xpbmVNb2RlPWZ1bmN0aW9uKCl7dGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9URVhUKSx0aGlzLiR0ZXh0TGF5ZXIuJHVwZGF0ZUVvbENoYXIoKX0sdGhpcy5vbkNoYW5nZVRhYlNpemU9ZnVuY3Rpb24oKXt0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX1RFWFR8dGhpcy5DSEFOR0VfTUFSS0VSKSx0aGlzLiR0ZXh0TGF5ZXIub25DaGFuZ2VUYWJTaXplKCl9LHRoaXMudXBkYXRlVGV4dD1mdW5jdGlvbigpe3RoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfVEVYVCl9LHRoaXMudXBkYXRlRnVsbD1mdW5jdGlvbihlKXtlP3RoaXMuJHJlbmRlckNoYW5nZXModGhpcy5DSEFOR0VfRlVMTCwhMCk6dGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9GVUxMKX0sdGhpcy51cGRhdGVGb250U2l6ZT1mdW5jdGlvbigpe3RoaXMuJHRleHRMYXllci5jaGVja0ZvclNpemVDaGFuZ2VzKCl9LHRoaXMuJGNoYW5nZXM9MCx0aGlzLiR1cGRhdGVTaXplQXN5bmM9ZnVuY3Rpb24oKXt0aGlzLiRsb29wLnBlbmRpbmc/dGhpcy4kc2l6ZS4kZGlydHk9ITA6dGhpcy5vblJlc2l6ZSgpfSx0aGlzLm9uUmVzaXplPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKHRoaXMucmVzaXppbmc+MilyZXR1cm47dGhpcy5yZXNpemluZz4wP3RoaXMucmVzaXppbmcrKzp0aGlzLnJlc2l6aW5nPWU/MTowO3ZhciBpPXRoaXMuY29udGFpbmVyO3J8fChyPWkuY2xpZW50SGVpZ2h0fHxpLnNjcm9sbEhlaWdodCksbnx8KG49aS5jbGllbnRXaWR0aHx8aS5zY3JvbGxXaWR0aCk7dmFyIHM9dGhpcy4kdXBkYXRlQ2FjaGVkU2l6ZShlLHQsbixyKTtpZighdGhpcy4kc2l6ZS5zY3JvbGxlckhlaWdodHx8IW4mJiFyKXJldHVybiB0aGlzLnJlc2l6aW5nPTA7ZSYmKHRoaXMuJGd1dHRlckxheWVyLiRwYWRkaW5nPW51bGwpLGU/dGhpcy4kcmVuZGVyQ2hhbmdlcyhzfHRoaXMuJGNoYW5nZXMsITApOnRoaXMuJGxvb3Auc2NoZWR1bGUoc3x0aGlzLiRjaGFuZ2VzKSx0aGlzLnJlc2l6aW5nJiYodGhpcy5yZXNpemluZz0wKSx0aGlzLnNjcm9sbEJhclYuc2Nyb2xsTGVmdD10aGlzLnNjcm9sbEJhclYuc2Nyb2xsVG9wPW51bGx9LHRoaXMuJHVwZGF0ZUNhY2hlZFNpemU9ZnVuY3Rpb24oZSx0LG4scil7ci09dGhpcy4kZXh0cmFIZWlnaHR8fDA7dmFyIGk9MCxzPXRoaXMuJHNpemUsbz17d2lkdGg6cy53aWR0aCxoZWlnaHQ6cy5oZWlnaHQsc2Nyb2xsZXJIZWlnaHQ6cy5zY3JvbGxlckhlaWdodCxzY3JvbGxlcldpZHRoOnMuc2Nyb2xsZXJXaWR0aH07ciYmKGV8fHMuaGVpZ2h0IT1yKSYmKHMuaGVpZ2h0PXIsaXw9dGhpcy5DSEFOR0VfU0laRSxzLnNjcm9sbGVySGVpZ2h0PXMuaGVpZ2h0LHRoaXMuJGhvcml6U2Nyb2xsJiYocy5zY3JvbGxlckhlaWdodC09dGhpcy5zY3JvbGxCYXJILmdldEhlaWdodCgpKSx0aGlzLnNjcm9sbEJhclYuZWxlbWVudC5zdHlsZS5ib3R0b209dGhpcy5zY3JvbGxCYXJILmdldEhlaWdodCgpK1wicHhcIixpfD10aGlzLkNIQU5HRV9TQ1JPTEwpO2lmKG4mJihlfHxzLndpZHRoIT1uKSl7aXw9dGhpcy5DSEFOR0VfU0laRSxzLndpZHRoPW4sdD09bnVsbCYmKHQ9dGhpcy4kc2hvd0d1dHRlcj90aGlzLiRndXR0ZXIub2Zmc2V0V2lkdGg6MCksdGhpcy5ndXR0ZXJXaWR0aD10LHRoaXMuc2Nyb2xsQmFySC5lbGVtZW50LnN0eWxlLmxlZnQ9dGhpcy5zY3JvbGxlci5zdHlsZS5sZWZ0PXQrXCJweFwiLHMuc2Nyb2xsZXJXaWR0aD1NYXRoLm1heCgwLG4tdC10aGlzLnNjcm9sbEJhclYuZ2V0V2lkdGgoKSksdGhpcy5zY3JvbGxCYXJILmVsZW1lbnQuc3R5bGUucmlnaHQ9dGhpcy5zY3JvbGxlci5zdHlsZS5yaWdodD10aGlzLnNjcm9sbEJhclYuZ2V0V2lkdGgoKStcInB4XCIsdGhpcy5zY3JvbGxlci5zdHlsZS5ib3R0b209dGhpcy5zY3JvbGxCYXJILmdldEhlaWdodCgpK1wicHhcIjtpZih0aGlzLnNlc3Npb24mJnRoaXMuc2Vzc2lvbi5nZXRVc2VXcmFwTW9kZSgpJiZ0aGlzLmFkanVzdFdyYXBMaW1pdCgpfHxlKWl8PXRoaXMuQ0hBTkdFX0ZVTEx9cmV0dXJuIHMuJGRpcnR5PSFufHwhcixpJiZ0aGlzLl9zaWduYWwoXCJyZXNpemVcIixvKSxpfSx0aGlzLm9uR3V0dGVyUmVzaXplPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kc2hvd0d1dHRlcj90aGlzLiRndXR0ZXIub2Zmc2V0V2lkdGg6MDtlIT10aGlzLmd1dHRlcldpZHRoJiYodGhpcy4kY2hhbmdlc3w9dGhpcy4kdXBkYXRlQ2FjaGVkU2l6ZSghMCxlLHRoaXMuJHNpemUud2lkdGgsdGhpcy4kc2l6ZS5oZWlnaHQpKSx0aGlzLnNlc3Npb24uZ2V0VXNlV3JhcE1vZGUoKSYmdGhpcy5hZGp1c3RXcmFwTGltaXQoKT90aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX0ZVTEwpOnRoaXMuJHNpemUuJGRpcnR5P3RoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfRlVMTCk6KHRoaXMuJGNvbXB1dGVMYXllckNvbmZpZygpLHRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfTUFSS0VSKSl9LHRoaXMuYWRqdXN0V3JhcExpbWl0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kc2l6ZS5zY3JvbGxlcldpZHRoLXRoaXMuJHBhZGRpbmcqMix0PU1hdGguZmxvb3IoZS90aGlzLmNoYXJhY3RlcldpZHRoKTtyZXR1cm4gdGhpcy5zZXNzaW9uLmFkanVzdFdyYXBMaW1pdCh0LHRoaXMuJHNob3dQcmludE1hcmdpbiYmdGhpcy4kcHJpbnRNYXJnaW5Db2x1bW4pfSx0aGlzLnNldEFuaW1hdGVkU2Nyb2xsPWZ1bmN0aW9uKGUpe3RoaXMuc2V0T3B0aW9uKFwiYW5pbWF0ZWRTY3JvbGxcIixlKX0sdGhpcy5nZXRBbmltYXRlZFNjcm9sbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRhbmltYXRlZFNjcm9sbH0sdGhpcy5zZXRTaG93SW52aXNpYmxlcz1mdW5jdGlvbihlKXt0aGlzLnNldE9wdGlvbihcInNob3dJbnZpc2libGVzXCIsZSl9LHRoaXMuZ2V0U2hvd0ludmlzaWJsZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJzaG93SW52aXNpYmxlc1wiKX0sdGhpcy5nZXREaXNwbGF5SW5kZW50R3VpZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwiZGlzcGxheUluZGVudEd1aWRlc1wiKX0sdGhpcy5zZXREaXNwbGF5SW5kZW50R3VpZGVzPWZ1bmN0aW9uKGUpe3RoaXMuc2V0T3B0aW9uKFwiZGlzcGxheUluZGVudEd1aWRlc1wiLGUpfSx0aGlzLnNldFNob3dQcmludE1hcmdpbj1mdW5jdGlvbihlKXt0aGlzLnNldE9wdGlvbihcInNob3dQcmludE1hcmdpblwiLGUpfSx0aGlzLmdldFNob3dQcmludE1hcmdpbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldE9wdGlvbihcInNob3dQcmludE1hcmdpblwiKX0sdGhpcy5zZXRQcmludE1hcmdpbkNvbHVtbj1mdW5jdGlvbihlKXt0aGlzLnNldE9wdGlvbihcInByaW50TWFyZ2luQ29sdW1uXCIsZSl9LHRoaXMuZ2V0UHJpbnRNYXJnaW5Db2x1bW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJwcmludE1hcmdpbkNvbHVtblwiKX0sdGhpcy5nZXRTaG93R3V0dGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwic2hvd0d1dHRlclwiKX0sdGhpcy5zZXRTaG93R3V0dGVyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldE9wdGlvbihcInNob3dHdXR0ZXJcIixlKX0sdGhpcy5nZXRGYWRlRm9sZFdpZGdldHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJmYWRlRm9sZFdpZGdldHNcIil9LHRoaXMuc2V0RmFkZUZvbGRXaWRnZXRzPWZ1bmN0aW9uKGUpe3RoaXMuc2V0T3B0aW9uKFwiZmFkZUZvbGRXaWRnZXRzXCIsZSl9LHRoaXMuc2V0SGlnaGxpZ2h0R3V0dGVyTGluZT1mdW5jdGlvbihlKXt0aGlzLnNldE9wdGlvbihcImhpZ2hsaWdodEd1dHRlckxpbmVcIixlKX0sdGhpcy5nZXRIaWdobGlnaHRHdXR0ZXJMaW5lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwiaGlnaGxpZ2h0R3V0dGVyTGluZVwiKX0sdGhpcy4kdXBkYXRlR3V0dGVyTGluZUhpZ2hsaWdodD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuJGN1cnNvckxheWVyLiRwaXhlbFBvcyx0PXRoaXMubGF5ZXJDb25maWcubGluZUhlaWdodDtpZih0aGlzLnNlc3Npb24uZ2V0VXNlV3JhcE1vZGUoKSl7dmFyIG49dGhpcy5zZXNzaW9uLnNlbGVjdGlvbi5nZXRDdXJzb3IoKTtuLmNvbHVtbj0wLGU9dGhpcy4kY3Vyc29yTGF5ZXIuZ2V0UGl4ZWxQb3NpdGlvbihuLCEwKSx0Kj10aGlzLnNlc3Npb24uZ2V0Um93TGVuZ3RoKG4ucm93KX10aGlzLiRndXR0ZXJMaW5lSGlnaGxpZ2h0LnN0eWxlLnRvcD1lLnRvcC10aGlzLmxheWVyQ29uZmlnLm9mZnNldCtcInB4XCIsdGhpcy4kZ3V0dGVyTGluZUhpZ2hsaWdodC5zdHlsZS5oZWlnaHQ9dCtcInB4XCJ9LHRoaXMuJHVwZGF0ZVByaW50TWFyZ2luPWZ1bmN0aW9uKCl7aWYoIXRoaXMuJHNob3dQcmludE1hcmdpbiYmIXRoaXMuJHByaW50TWFyZ2luRWwpcmV0dXJuO2lmKCF0aGlzLiRwcmludE1hcmdpbkVsKXt2YXIgZT1pLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5jbGFzc05hbWU9XCJhY2VfbGF5ZXIgYWNlX3ByaW50LW1hcmdpbi1sYXllclwiLHRoaXMuJHByaW50TWFyZ2luRWw9aS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuJHByaW50TWFyZ2luRWwuY2xhc3NOYW1lPVwiYWNlX3ByaW50LW1hcmdpblwiLGUuYXBwZW5kQ2hpbGQodGhpcy4kcHJpbnRNYXJnaW5FbCksdGhpcy5jb250ZW50Lmluc2VydEJlZm9yZShlLHRoaXMuY29udGVudC5maXJzdENoaWxkKX12YXIgdD10aGlzLiRwcmludE1hcmdpbkVsLnN0eWxlO3QubGVmdD10aGlzLmNoYXJhY3RlcldpZHRoKnRoaXMuJHByaW50TWFyZ2luQ29sdW1uK3RoaXMuJHBhZGRpbmcrXCJweFwiLHQudmlzaWJpbGl0eT10aGlzLiRzaG93UHJpbnRNYXJnaW4/XCJ2aXNpYmxlXCI6XCJoaWRkZW5cIix0aGlzLnNlc3Npb24mJnRoaXMuc2Vzc2lvbi4kd3JhcD09LTEmJnRoaXMuYWRqdXN0V3JhcExpbWl0KCl9LHRoaXMuZ2V0Q29udGFpbmVyRWxlbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lcn0sdGhpcy5nZXRNb3VzZUV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsZXJ9LHRoaXMuZ2V0VGV4dEFyZWFDb250YWluZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250YWluZXJ9LHRoaXMuJG1vdmVUZXh0QXJlYVRvQ3Vyc29yPWZ1bmN0aW9uKCl7aWYoIXRoaXMuJGtlZXBUZXh0QXJlYUF0Q3Vyc29yKXJldHVybjt2YXIgZT10aGlzLmxheWVyQ29uZmlnLHQ9dGhpcy4kY3Vyc29yTGF5ZXIuJHBpeGVsUG9zLnRvcCxuPXRoaXMuJGN1cnNvckxheWVyLiRwaXhlbFBvcy5sZWZ0O3QtPWUub2Zmc2V0O3ZhciByPXRoaXMudGV4dGFyZWEuc3R5bGUsaT10aGlzLmxpbmVIZWlnaHQ7aWYodDwwfHx0PmUuaGVpZ2h0LWkpe3IudG9wPXIubGVmdD1cIjBcIjtyZXR1cm59dmFyIHM9dGhpcy5jaGFyYWN0ZXJXaWR0aDtpZih0aGlzLiRjb21wb3NpdGlvbil7dmFyIG89dGhpcy50ZXh0YXJlYS52YWx1ZS5yZXBsYWNlKC9eXFx4MDErLyxcIlwiKTtzKj10aGlzLnNlc3Npb24uJGdldFN0cmluZ1NjcmVlbldpZHRoKG8pWzBdKzIsaSs9Mn1uLT10aGlzLnNjcm9sbExlZnQsbj50aGlzLiRzaXplLnNjcm9sbGVyV2lkdGgtcyYmKG49dGhpcy4kc2l6ZS5zY3JvbGxlcldpZHRoLXMpLG4rPXRoaXMuZ3V0dGVyV2lkdGgsci5oZWlnaHQ9aStcInB4XCIsci53aWR0aD1zK1wicHhcIixyLmxlZnQ9TWF0aC5taW4obix0aGlzLiRzaXplLnNjcm9sbGVyV2lkdGgtcykrXCJweFwiLHIudG9wPU1hdGgubWluKHQsdGhpcy4kc2l6ZS5oZWlnaHQtaSkrXCJweFwifSx0aGlzLmdldEZpcnN0VmlzaWJsZVJvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxheWVyQ29uZmlnLmZpcnN0Um93fSx0aGlzLmdldEZpcnN0RnVsbHlWaXNpYmxlUm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGF5ZXJDb25maWcuZmlyc3RSb3crKHRoaXMubGF5ZXJDb25maWcub2Zmc2V0PT09MD8wOjEpfSx0aGlzLmdldExhc3RGdWxseVZpc2libGVSb3c9ZnVuY3Rpb24oKXt2YXIgZT1NYXRoLmZsb29yKCh0aGlzLmxheWVyQ29uZmlnLmhlaWdodCt0aGlzLmxheWVyQ29uZmlnLm9mZnNldCkvdGhpcy5sYXllckNvbmZpZy5saW5lSGVpZ2h0KTtyZXR1cm4gdGhpcy5sYXllckNvbmZpZy5maXJzdFJvdy0xK2V9LHRoaXMuZ2V0TGFzdFZpc2libGVSb3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXllckNvbmZpZy5sYXN0Um93fSx0aGlzLiRwYWRkaW5nPW51bGwsdGhpcy5zZXRQYWRkaW5nPWZ1bmN0aW9uKGUpe3RoaXMuJHBhZGRpbmc9ZSx0aGlzLiR0ZXh0TGF5ZXIuc2V0UGFkZGluZyhlKSx0aGlzLiRjdXJzb3JMYXllci5zZXRQYWRkaW5nKGUpLHRoaXMuJG1hcmtlckZyb250LnNldFBhZGRpbmcoZSksdGhpcy4kbWFya2VyQmFjay5zZXRQYWRkaW5nKGUpLHRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfRlVMTCksdGhpcy4kdXBkYXRlUHJpbnRNYXJnaW4oKX0sdGhpcy5zZXRTY3JvbGxNYXJnaW49ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9dGhpcy5zY3JvbGxNYXJnaW47aS50b3A9ZXwwLGkuYm90dG9tPXR8MCxpLnJpZ2h0PXJ8MCxpLmxlZnQ9bnwwLGkudj1pLnRvcCtpLmJvdHRvbSxpLmg9aS5sZWZ0K2kucmlnaHQsaS50b3AmJnRoaXMuc2Nyb2xsVG9wPD0wJiZ0aGlzLnNlc3Npb24mJnRoaXMuc2Vzc2lvbi5zZXRTY3JvbGxUb3AoLWkudG9wKSx0aGlzLnVwZGF0ZUZ1bGwoKX0sdGhpcy5nZXRIU2Nyb2xsQmFyQWx3YXlzVmlzaWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRoU2Nyb2xsQmFyQWx3YXlzVmlzaWJsZX0sdGhpcy5zZXRIU2Nyb2xsQmFyQWx3YXlzVmlzaWJsZT1mdW5jdGlvbihlKXt0aGlzLnNldE9wdGlvbihcImhTY3JvbGxCYXJBbHdheXNWaXNpYmxlXCIsZSl9LHRoaXMuZ2V0VlNjcm9sbEJhckFsd2F5c1Zpc2libGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdlNjcm9sbEJhckFsd2F5c1Zpc2libGV9LHRoaXMuc2V0VlNjcm9sbEJhckFsd2F5c1Zpc2libGU9ZnVuY3Rpb24oZSl7dGhpcy5zZXRPcHRpb24oXCJ2U2Nyb2xsQmFyQWx3YXlzVmlzaWJsZVwiLGUpfSx0aGlzLiR1cGRhdGVTY3JvbGxCYXJWPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sYXllckNvbmZpZy5tYXhIZWlnaHQsdD10aGlzLiRzaXplLnNjcm9sbGVySGVpZ2h0OyF0aGlzLiRtYXhMaW5lcyYmdGhpcy4kc2Nyb2xsUGFzdEVuZCYmKGUtPSh0LXRoaXMubGluZUhlaWdodCkqdGhpcy4kc2Nyb2xsUGFzdEVuZCx0aGlzLnNjcm9sbFRvcD5lLXQmJihlPXRoaXMuc2Nyb2xsVG9wK3QsdGhpcy5zY3JvbGxCYXJWLnNjcm9sbFRvcD1udWxsKSksdGhpcy5zY3JvbGxCYXJWLnNldFNjcm9sbEhlaWdodChlK3RoaXMuc2Nyb2xsTWFyZ2luLnYpLHRoaXMuc2Nyb2xsQmFyVi5zZXRTY3JvbGxUb3AodGhpcy5zY3JvbGxUb3ArdGhpcy5zY3JvbGxNYXJnaW4udG9wKX0sdGhpcy4kdXBkYXRlU2Nyb2xsQmFySD1mdW5jdGlvbigpe3RoaXMuc2Nyb2xsQmFySC5zZXRTY3JvbGxXaWR0aCh0aGlzLmxheWVyQ29uZmlnLndpZHRoKzIqdGhpcy4kcGFkZGluZyt0aGlzLnNjcm9sbE1hcmdpbi5oKSx0aGlzLnNjcm9sbEJhckguc2V0U2Nyb2xsTGVmdCh0aGlzLnNjcm9sbExlZnQrdGhpcy5zY3JvbGxNYXJnaW4ubGVmdCl9LHRoaXMuJGZyb3plbj0hMSx0aGlzLmZyZWV6ZT1mdW5jdGlvbigpe3RoaXMuJGZyb3plbj0hMH0sdGhpcy51bmZyZWV6ZT1mdW5jdGlvbigpe3RoaXMuJGZyb3plbj0hMX0sdGhpcy4kcmVuZGVyQ2hhbmdlcz1mdW5jdGlvbihlLHQpe3RoaXMuJGNoYW5nZXMmJihlfD10aGlzLiRjaGFuZ2VzLHRoaXMuJGNoYW5nZXM9MCk7aWYoIXRoaXMuc2Vzc2lvbnx8IXRoaXMuY29udGFpbmVyLm9mZnNldFdpZHRofHx0aGlzLiRmcm96ZW58fCFlJiYhdCl7dGhpcy4kY2hhbmdlc3w9ZTtyZXR1cm59aWYodGhpcy4kc2l6ZS4kZGlydHkpcmV0dXJuIHRoaXMuJGNoYW5nZXN8PWUsdGhpcy5vblJlc2l6ZSghMCk7dGhpcy5saW5lSGVpZ2h0fHx0aGlzLiR0ZXh0TGF5ZXIuY2hlY2tGb3JTaXplQ2hhbmdlcygpLHRoaXMuX3NpZ25hbChcImJlZm9yZVJlbmRlclwiKTt2YXIgbj10aGlzLmxheWVyQ29uZmlnO2lmKGUmdGhpcy5DSEFOR0VfRlVMTHx8ZSZ0aGlzLkNIQU5HRV9TSVpFfHxlJnRoaXMuQ0hBTkdFX1RFWFR8fGUmdGhpcy5DSEFOR0VfTElORVN8fGUmdGhpcy5DSEFOR0VfU0NST0xMfHxlJnRoaXMuQ0hBTkdFX0hfU0NST0xMKXtlfD10aGlzLiRjb21wdXRlTGF5ZXJDb25maWcoKTtpZihuLmZpcnN0Um93IT10aGlzLmxheWVyQ29uZmlnLmZpcnN0Um93JiZuLmZpcnN0Um93U2NyZWVuPT10aGlzLmxheWVyQ29uZmlnLmZpcnN0Um93U2NyZWVuKXt2YXIgcj10aGlzLnNjcm9sbFRvcCsobi5maXJzdFJvdy10aGlzLmxheWVyQ29uZmlnLmZpcnN0Um93KSp0aGlzLmxpbmVIZWlnaHQ7cj4wJiYodGhpcy5zY3JvbGxUb3A9cixlfD10aGlzLkNIQU5HRV9TQ1JPTEwsZXw9dGhpcy4kY29tcHV0ZUxheWVyQ29uZmlnKCkpfW49dGhpcy5sYXllckNvbmZpZyx0aGlzLiR1cGRhdGVTY3JvbGxCYXJWKCksZSZ0aGlzLkNIQU5HRV9IX1NDUk9MTCYmdGhpcy4kdXBkYXRlU2Nyb2xsQmFySCgpLHRoaXMuJGd1dHRlckxheWVyLmVsZW1lbnQuc3R5bGUubWFyZ2luVG9wPS1uLm9mZnNldCtcInB4XCIsdGhpcy5jb250ZW50LnN0eWxlLm1hcmdpblRvcD0tbi5vZmZzZXQrXCJweFwiLHRoaXMuY29udGVudC5zdHlsZS53aWR0aD1uLndpZHRoKzIqdGhpcy4kcGFkZGluZytcInB4XCIsdGhpcy5jb250ZW50LnN0eWxlLmhlaWdodD1uLm1pbkhlaWdodCtcInB4XCJ9ZSZ0aGlzLkNIQU5HRV9IX1NDUk9MTCYmKHRoaXMuY29udGVudC5zdHlsZS5tYXJnaW5MZWZ0PS10aGlzLnNjcm9sbExlZnQrXCJweFwiLHRoaXMuc2Nyb2xsZXIuY2xhc3NOYW1lPXRoaXMuc2Nyb2xsTGVmdDw9MD9cImFjZV9zY3JvbGxlclwiOlwiYWNlX3Njcm9sbGVyIGFjZV9zY3JvbGwtbGVmdFwiKTtpZihlJnRoaXMuQ0hBTkdFX0ZVTEwpe3RoaXMuJHRleHRMYXllci51cGRhdGUobiksdGhpcy4kc2hvd0d1dHRlciYmdGhpcy4kZ3V0dGVyTGF5ZXIudXBkYXRlKG4pLHRoaXMuJG1hcmtlckJhY2sudXBkYXRlKG4pLHRoaXMuJG1hcmtlckZyb250LnVwZGF0ZShuKSx0aGlzLiRjdXJzb3JMYXllci51cGRhdGUobiksdGhpcy4kbW92ZVRleHRBcmVhVG9DdXJzb3IoKSx0aGlzLiRoaWdobGlnaHRHdXR0ZXJMaW5lJiZ0aGlzLiR1cGRhdGVHdXR0ZXJMaW5lSGlnaGxpZ2h0KCksdGhpcy5fc2lnbmFsKFwiYWZ0ZXJSZW5kZXJcIik7cmV0dXJufWlmKGUmdGhpcy5DSEFOR0VfU0NST0xMKXtlJnRoaXMuQ0hBTkdFX1RFWFR8fGUmdGhpcy5DSEFOR0VfTElORVM/dGhpcy4kdGV4dExheWVyLnVwZGF0ZShuKTp0aGlzLiR0ZXh0TGF5ZXIuc2Nyb2xsTGluZXMobiksdGhpcy4kc2hvd0d1dHRlciYmdGhpcy4kZ3V0dGVyTGF5ZXIudXBkYXRlKG4pLHRoaXMuJG1hcmtlckJhY2sudXBkYXRlKG4pLHRoaXMuJG1hcmtlckZyb250LnVwZGF0ZShuKSx0aGlzLiRjdXJzb3JMYXllci51cGRhdGUobiksdGhpcy4kaGlnaGxpZ2h0R3V0dGVyTGluZSYmdGhpcy4kdXBkYXRlR3V0dGVyTGluZUhpZ2hsaWdodCgpLHRoaXMuJG1vdmVUZXh0QXJlYVRvQ3Vyc29yKCksdGhpcy5fc2lnbmFsKFwiYWZ0ZXJSZW5kZXJcIik7cmV0dXJufWUmdGhpcy5DSEFOR0VfVEVYVD8odGhpcy4kdGV4dExheWVyLnVwZGF0ZShuKSx0aGlzLiRzaG93R3V0dGVyJiZ0aGlzLiRndXR0ZXJMYXllci51cGRhdGUobikpOmUmdGhpcy5DSEFOR0VfTElORVM/KHRoaXMuJHVwZGF0ZUxpbmVzKCl8fGUmdGhpcy5DSEFOR0VfR1VUVEVSJiZ0aGlzLiRzaG93R3V0dGVyKSYmdGhpcy4kZ3V0dGVyTGF5ZXIudXBkYXRlKG4pOihlJnRoaXMuQ0hBTkdFX1RFWFR8fGUmdGhpcy5DSEFOR0VfR1VUVEVSKSYmdGhpcy4kc2hvd0d1dHRlciYmdGhpcy4kZ3V0dGVyTGF5ZXIudXBkYXRlKG4pLGUmdGhpcy5DSEFOR0VfQ1VSU09SJiYodGhpcy4kY3Vyc29yTGF5ZXIudXBkYXRlKG4pLHRoaXMuJG1vdmVUZXh0QXJlYVRvQ3Vyc29yKCksdGhpcy4kaGlnaGxpZ2h0R3V0dGVyTGluZSYmdGhpcy4kdXBkYXRlR3V0dGVyTGluZUhpZ2hsaWdodCgpKSxlJih0aGlzLkNIQU5HRV9NQVJLRVJ8dGhpcy5DSEFOR0VfTUFSS0VSX0ZST05UKSYmdGhpcy4kbWFya2VyRnJvbnQudXBkYXRlKG4pLGUmKHRoaXMuQ0hBTkdFX01BUktFUnx0aGlzLkNIQU5HRV9NQVJLRVJfQkFDSykmJnRoaXMuJG1hcmtlckJhY2sudXBkYXRlKG4pLHRoaXMuX3NpZ25hbChcImFmdGVyUmVuZGVyXCIpfSx0aGlzLiRhdXRvc2l6ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuc2Vzc2lvbi5nZXRTY3JlZW5MZW5ndGgoKSp0aGlzLmxpbmVIZWlnaHQsdD10aGlzLiRtYXhMaW5lcyp0aGlzLmxpbmVIZWlnaHQsbj1NYXRoLm1heCgodGhpcy4kbWluTGluZXN8fDEpKnRoaXMubGluZUhlaWdodCxNYXRoLm1pbih0LGUpKSt0aGlzLnNjcm9sbE1hcmdpbi52Kyh0aGlzLiRleHRyYUhlaWdodHx8MCk7dGhpcy4kaG9yaXpTY3JvbGwmJihuKz10aGlzLnNjcm9sbEJhckguZ2V0SGVpZ2h0KCkpO3ZhciByPWU+dDtpZihuIT10aGlzLmRlc2lyZWRIZWlnaHR8fHRoaXMuJHNpemUuaGVpZ2h0IT10aGlzLmRlc2lyZWRIZWlnaHR8fHIhPXRoaXMuJHZTY3JvbGwpe3IhPXRoaXMuJHZTY3JvbGwmJih0aGlzLiR2U2Nyb2xsPXIsdGhpcy5zY3JvbGxCYXJWLnNldFZpc2libGUocikpO3ZhciBpPXRoaXMuY29udGFpbmVyLmNsaWVudFdpZHRoO3RoaXMuY29udGFpbmVyLnN0eWxlLmhlaWdodD1uK1wicHhcIix0aGlzLiR1cGRhdGVDYWNoZWRTaXplKCEwLHRoaXMuJGd1dHRlcldpZHRoLGksbiksdGhpcy5kZXNpcmVkSGVpZ2h0PW4sdGhpcy5fc2lnbmFsKFwiYXV0b3NpemVcIil9fSx0aGlzLiRjb21wdXRlTGF5ZXJDb25maWc9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNlc3Npb24sdD10aGlzLiRzaXplLG49dC5oZWlnaHQ8PTIqdGhpcy5saW5lSGVpZ2h0LHI9dGhpcy5zZXNzaW9uLmdldFNjcmVlbkxlbmd0aCgpLGk9cip0aGlzLmxpbmVIZWlnaHQscz10aGlzLiRnZXRMb25nZXN0TGluZSgpLG89IW4mJih0aGlzLiRoU2Nyb2xsQmFyQWx3YXlzVmlzaWJsZXx8dC5zY3JvbGxlcldpZHRoLXMtMip0aGlzLiRwYWRkaW5nPDApLHU9dGhpcy4kaG9yaXpTY3JvbGwhPT1vO3UmJih0aGlzLiRob3JpelNjcm9sbD1vLHRoaXMuc2Nyb2xsQmFySC5zZXRWaXNpYmxlKG8pKTt2YXIgYT10aGlzLiR2U2Nyb2xsO3RoaXMuJG1heExpbmVzJiZ0aGlzLmxpbmVIZWlnaHQ+MSYmdGhpcy4kYXV0b3NpemUoKTt2YXIgZj10aGlzLnNjcm9sbFRvcCV0aGlzLmxpbmVIZWlnaHQsbD10LnNjcm9sbGVySGVpZ2h0K3RoaXMubGluZUhlaWdodCxjPSF0aGlzLiRtYXhMaW5lcyYmdGhpcy4kc2Nyb2xsUGFzdEVuZD8odC5zY3JvbGxlckhlaWdodC10aGlzLmxpbmVIZWlnaHQpKnRoaXMuJHNjcm9sbFBhc3RFbmQ6MDtpKz1jO3ZhciBoPXRoaXMuc2Nyb2xsTWFyZ2luO3RoaXMuc2Vzc2lvbi5zZXRTY3JvbGxUb3AoTWF0aC5tYXgoLWgudG9wLE1hdGgubWluKHRoaXMuc2Nyb2xsVG9wLGktdC5zY3JvbGxlckhlaWdodCtoLmJvdHRvbSkpKSx0aGlzLnNlc3Npb24uc2V0U2Nyb2xsTGVmdChNYXRoLm1heCgtaC5sZWZ0LE1hdGgubWluKHRoaXMuc2Nyb2xsTGVmdCxzKzIqdGhpcy4kcGFkZGluZy10LnNjcm9sbGVyV2lkdGgraC5yaWdodCkpKTt2YXIgcD0hbiYmKHRoaXMuJHZTY3JvbGxCYXJBbHdheXNWaXNpYmxlfHx0LnNjcm9sbGVySGVpZ2h0LWkrYzwwfHx0aGlzLnNjcm9sbFRvcD5oLnRvcCksZD1hIT09cDtkJiYodGhpcy4kdlNjcm9sbD1wLHRoaXMuc2Nyb2xsQmFyVi5zZXRWaXNpYmxlKHApKTt2YXIgdj1NYXRoLmNlaWwobC90aGlzLmxpbmVIZWlnaHQpLTEsbT1NYXRoLm1heCgwLE1hdGgucm91bmQoKHRoaXMuc2Nyb2xsVG9wLWYpL3RoaXMubGluZUhlaWdodCkpLGc9bSt2LHksYix3PXRoaXMubGluZUhlaWdodDttPWUuc2NyZWVuVG9Eb2N1bWVudFJvdyhtLDApO3ZhciBFPWUuZ2V0Rm9sZExpbmUobSk7RSYmKG09RS5zdGFydC5yb3cpLHk9ZS5kb2N1bWVudFRvU2NyZWVuUm93KG0sMCksYj1lLmdldFJvd0xlbmd0aChtKSp3LGc9TWF0aC5taW4oZS5zY3JlZW5Ub0RvY3VtZW50Um93KGcsMCksZS5nZXRMZW5ndGgoKS0xKSxsPXQuc2Nyb2xsZXJIZWlnaHQrZS5nZXRSb3dMZW5ndGgoZykqdytiLGY9dGhpcy5zY3JvbGxUb3AteSp3O3ZhciBTPTA7dGhpcy5sYXllckNvbmZpZy53aWR0aCE9cyYmKFM9dGhpcy5DSEFOR0VfSF9TQ1JPTEwpO2lmKHV8fGQpUz10aGlzLiR1cGRhdGVDYWNoZWRTaXplKCEwLHRoaXMuZ3V0dGVyV2lkdGgsdC53aWR0aCx0LmhlaWdodCksdGhpcy5fc2lnbmFsKFwic2Nyb2xsYmFyVmlzaWJpbGl0eUNoYW5nZWRcIiksZCYmKHM9dGhpcy4kZ2V0TG9uZ2VzdExpbmUoKSk7cmV0dXJuIHRoaXMubGF5ZXJDb25maWc9e3dpZHRoOnMscGFkZGluZzp0aGlzLiRwYWRkaW5nLGZpcnN0Um93Om0sZmlyc3RSb3dTY3JlZW46eSxsYXN0Um93OmcsbGluZUhlaWdodDp3LGNoYXJhY3RlcldpZHRoOnRoaXMuY2hhcmFjdGVyV2lkdGgsbWluSGVpZ2h0OmwsbWF4SGVpZ2h0Omksb2Zmc2V0OmYsZ3V0dGVyT2Zmc2V0Ok1hdGgubWF4KDAsTWF0aC5jZWlsKChmK3QuaGVpZ2h0LXQuc2Nyb2xsZXJIZWlnaHQpL3cpKSxoZWlnaHQ6dGhpcy4kc2l6ZS5zY3JvbGxlckhlaWdodH0sU30sdGhpcy4kdXBkYXRlTGluZXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLiRjaGFuZ2VkTGluZXMuZmlyc3RSb3csdD10aGlzLiRjaGFuZ2VkTGluZXMubGFzdFJvdzt0aGlzLiRjaGFuZ2VkTGluZXM9bnVsbDt2YXIgbj10aGlzLmxheWVyQ29uZmlnO2lmKGU+bi5sYXN0Um93KzEpcmV0dXJuO2lmKHQ8bi5maXJzdFJvdylyZXR1cm47aWYodD09PUluZmluaXR5KXt0aGlzLiRzaG93R3V0dGVyJiZ0aGlzLiRndXR0ZXJMYXllci51cGRhdGUobiksdGhpcy4kdGV4dExheWVyLnVwZGF0ZShuKTtyZXR1cm59cmV0dXJuIHRoaXMuJHRleHRMYXllci51cGRhdGVMaW5lcyhuLGUsdCksITB9LHRoaXMuJGdldExvbmdlc3RMaW5lPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZXNzaW9uLmdldFNjcmVlbldpZHRoKCk7cmV0dXJuIHRoaXMuc2hvd0ludmlzaWJsZXMmJiF0aGlzLnNlc3Npb24uJHVzZVdyYXBNb2RlJiYoZSs9MSksTWF0aC5tYXgodGhpcy4kc2l6ZS5zY3JvbGxlcldpZHRoLTIqdGhpcy4kcGFkZGluZyxNYXRoLnJvdW5kKGUqdGhpcy5jaGFyYWN0ZXJXaWR0aCkpfSx0aGlzLnVwZGF0ZUZyb250TWFya2Vycz1mdW5jdGlvbigpe3RoaXMuJG1hcmtlckZyb250LnNldE1hcmtlcnModGhpcy5zZXNzaW9uLmdldE1hcmtlcnMoITApKSx0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX01BUktFUl9GUk9OVCl9LHRoaXMudXBkYXRlQmFja01hcmtlcnM9ZnVuY3Rpb24oKXt0aGlzLiRtYXJrZXJCYWNrLnNldE1hcmtlcnModGhpcy5zZXNzaW9uLmdldE1hcmtlcnMoKSksdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9NQVJLRVJfQkFDSyl9LHRoaXMuYWRkR3V0dGVyRGVjb3JhdGlvbj1mdW5jdGlvbihlLHQpe3RoaXMuJGd1dHRlckxheWVyLmFkZEd1dHRlckRlY29yYXRpb24oZSx0KX0sdGhpcy5yZW1vdmVHdXR0ZXJEZWNvcmF0aW9uPWZ1bmN0aW9uKGUsdCl7dGhpcy4kZ3V0dGVyTGF5ZXIucmVtb3ZlR3V0dGVyRGVjb3JhdGlvbihlLHQpfSx0aGlzLnVwZGF0ZUJyZWFrcG9pbnRzPWZ1bmN0aW9uKGUpe3RoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfR1VUVEVSKX0sdGhpcy5zZXRBbm5vdGF0aW9ucz1mdW5jdGlvbihlKXt0aGlzLiRndXR0ZXJMYXllci5zZXRBbm5vdGF0aW9ucyhlKSx0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX0dVVFRFUil9LHRoaXMudXBkYXRlQ3Vyc29yPWZ1bmN0aW9uKCl7dGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9DVVJTT1IpfSx0aGlzLmhpZGVDdXJzb3I9ZnVuY3Rpb24oKXt0aGlzLiRjdXJzb3JMYXllci5oaWRlQ3Vyc29yKCl9LHRoaXMuc2hvd0N1cnNvcj1mdW5jdGlvbigpe3RoaXMuJGN1cnNvckxheWVyLnNob3dDdXJzb3IoKX0sdGhpcy5zY3JvbGxTZWxlY3Rpb25JbnRvVmlldz1mdW5jdGlvbihlLHQsbil7dGhpcy5zY3JvbGxDdXJzb3JJbnRvVmlldyhlLG4pLHRoaXMuc2Nyb2xsQ3Vyc29ySW50b1ZpZXcodCxuKX0sdGhpcy5zY3JvbGxDdXJzb3JJbnRvVmlldz1mdW5jdGlvbihlLHQsbil7aWYodGhpcy4kc2l6ZS5zY3JvbGxlckhlaWdodD09PTApcmV0dXJuO3ZhciByPXRoaXMuJGN1cnNvckxheWVyLmdldFBpeGVsUG9zaXRpb24oZSksaT1yLmxlZnQscz1yLnRvcCxvPW4mJm4udG9wfHwwLHU9biYmbi5ib3R0b218fDAsYT10aGlzLiRzY3JvbGxBbmltYXRpb24/dGhpcy5zZXNzaW9uLmdldFNjcm9sbFRvcCgpOnRoaXMuc2Nyb2xsVG9wO2Erbz5zPyh0JiYocy09dCp0aGlzLiRzaXplLnNjcm9sbGVySGVpZ2h0KSxzPT09MCYmKHM9LXRoaXMuc2Nyb2xsTWFyZ2luLnRvcCksdGhpcy5zZXNzaW9uLnNldFNjcm9sbFRvcChzKSk6YSt0aGlzLiRzaXplLnNjcm9sbGVySGVpZ2h0LXU8cyt0aGlzLmxpbmVIZWlnaHQmJih0JiYocys9dCp0aGlzLiRzaXplLnNjcm9sbGVySGVpZ2h0KSx0aGlzLnNlc3Npb24uc2V0U2Nyb2xsVG9wKHMrdGhpcy5saW5lSGVpZ2h0LXRoaXMuJHNpemUuc2Nyb2xsZXJIZWlnaHQpKTt2YXIgZj10aGlzLnNjcm9sbExlZnQ7Zj5pPyhpPHRoaXMuJHBhZGRpbmcrMip0aGlzLmxheWVyQ29uZmlnLmNoYXJhY3RlcldpZHRoJiYoaT0tdGhpcy5zY3JvbGxNYXJnaW4ubGVmdCksdGhpcy5zZXNzaW9uLnNldFNjcm9sbExlZnQoaSkpOmYrdGhpcy4kc2l6ZS5zY3JvbGxlcldpZHRoPGkrdGhpcy5jaGFyYWN0ZXJXaWR0aD90aGlzLnNlc3Npb24uc2V0U2Nyb2xsTGVmdChNYXRoLnJvdW5kKGkrdGhpcy5jaGFyYWN0ZXJXaWR0aC10aGlzLiRzaXplLnNjcm9sbGVyV2lkdGgpKTpmPD10aGlzLiRwYWRkaW5nJiZpLWY8dGhpcy5jaGFyYWN0ZXJXaWR0aCYmdGhpcy5zZXNzaW9uLnNldFNjcm9sbExlZnQoMCl9LHRoaXMuZ2V0U2Nyb2xsVG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Vzc2lvbi5nZXRTY3JvbGxUb3AoKX0sdGhpcy5nZXRTY3JvbGxMZWZ0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Vzc2lvbi5nZXRTY3JvbGxMZWZ0KCl9LHRoaXMuZ2V0U2Nyb2xsVG9wUm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsVG9wL3RoaXMubGluZUhlaWdodH0sdGhpcy5nZXRTY3JvbGxCb3R0b21Sb3c9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgoMCxNYXRoLmZsb29yKCh0aGlzLnNjcm9sbFRvcCt0aGlzLiRzaXplLnNjcm9sbGVySGVpZ2h0KS90aGlzLmxpbmVIZWlnaHQpLTEpfSx0aGlzLnNjcm9sbFRvUm93PWZ1bmN0aW9uKGUpe3RoaXMuc2Vzc2lvbi5zZXRTY3JvbGxUb3AoZSp0aGlzLmxpbmVIZWlnaHQpfSx0aGlzLmFsaWduQ3Vyc29yPWZ1bmN0aW9uKGUsdCl7dHlwZW9mIGU9PVwibnVtYmVyXCImJihlPXtyb3c6ZSxjb2x1bW46MH0pO3ZhciBuPXRoaXMuJGN1cnNvckxheWVyLmdldFBpeGVsUG9zaXRpb24oZSkscj10aGlzLiRzaXplLnNjcm9sbGVySGVpZ2h0LXRoaXMubGluZUhlaWdodCxpPW4udG9wLXIqKHR8fDApO3JldHVybiB0aGlzLnNlc3Npb24uc2V0U2Nyb2xsVG9wKGkpLGl9LHRoaXMuU1RFUFM9OCx0aGlzLiRjYWxjU3RlcHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj0wLHI9dGhpcy5TVEVQUyxpPVtdLHM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuKihNYXRoLnBvdyhlLTEsMykrMSkrdH07Zm9yKG49MDtuPHI7KytuKWkucHVzaChzKG4vdGhpcy5TVEVQUyxlLHQtZSkpO3JldHVybiBpfSx0aGlzLnNjcm9sbFRvTGluZT1mdW5jdGlvbihlLHQsbixyKXt2YXIgaT10aGlzLiRjdXJzb3JMYXllci5nZXRQaXhlbFBvc2l0aW9uKHtyb3c6ZSxjb2x1bW46MH0pLHM9aS50b3A7dCYmKHMtPXRoaXMuJHNpemUuc2Nyb2xsZXJIZWlnaHQvMik7dmFyIG89dGhpcy5zY3JvbGxUb3A7dGhpcy5zZXNzaW9uLnNldFNjcm9sbFRvcChzKSxuIT09ITEmJnRoaXMuYW5pbWF0ZVNjcm9sbGluZyhvLHIpfSx0aGlzLmFuaW1hdGVTY3JvbGxpbmc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLnNjcm9sbFRvcDtpZighdGhpcy4kYW5pbWF0ZWRTY3JvbGwpcmV0dXJuO3ZhciByPXRoaXM7aWYoZT09bilyZXR1cm47aWYodGhpcy4kc2Nyb2xsQW5pbWF0aW9uKXt2YXIgaT10aGlzLiRzY3JvbGxBbmltYXRpb24uc3RlcHM7aWYoaS5sZW5ndGgpe2U9aVswXTtpZihlPT1uKXJldHVybn19dmFyIHM9ci4kY2FsY1N0ZXBzKGUsbik7dGhpcy4kc2Nyb2xsQW5pbWF0aW9uPXtmcm9tOmUsdG86bixzdGVwczpzfSxjbGVhckludGVydmFsKHRoaXMuJHRpbWVyKSxyLnNlc3Npb24uc2V0U2Nyb2xsVG9wKHMuc2hpZnQoKSksci5zZXNzaW9uLiRzY3JvbGxUb3A9bix0aGlzLiR0aW1lcj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3MubGVuZ3RoPyhyLnNlc3Npb24uc2V0U2Nyb2xsVG9wKHMuc2hpZnQoKSksci5zZXNzaW9uLiRzY3JvbGxUb3A9bik6biE9bnVsbD8oci5zZXNzaW9uLiRzY3JvbGxUb3A9LTEsci5zZXNzaW9uLnNldFNjcm9sbFRvcChuKSxuPW51bGwpOihyLiR0aW1lcj1jbGVhckludGVydmFsKHIuJHRpbWVyKSxyLiRzY3JvbGxBbmltYXRpb249bnVsbCx0JiZ0KCkpfSwxMCl9LHRoaXMuc2Nyb2xsVG9ZPWZ1bmN0aW9uKGUpe3RoaXMuc2Nyb2xsVG9wIT09ZSYmKHRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfU0NST0xMKSx0aGlzLnNjcm9sbFRvcD1lKX0sdGhpcy5zY3JvbGxUb1g9ZnVuY3Rpb24oZSl7dGhpcy5zY3JvbGxMZWZ0IT09ZSYmKHRoaXMuc2Nyb2xsTGVmdD1lKSx0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX0hfU0NST0xMKX0sdGhpcy5zY3JvbGxUbz1mdW5jdGlvbihlLHQpe3RoaXMuc2Vzc2lvbi5zZXRTY3JvbGxUb3AodCksdGhpcy5zZXNzaW9uLnNldFNjcm9sbExlZnQodCl9LHRoaXMuc2Nyb2xsQnk9ZnVuY3Rpb24oZSx0KXt0JiZ0aGlzLnNlc3Npb24uc2V0U2Nyb2xsVG9wKHRoaXMuc2Vzc2lvbi5nZXRTY3JvbGxUb3AoKSt0KSxlJiZ0aGlzLnNlc3Npb24uc2V0U2Nyb2xsTGVmdCh0aGlzLnNlc3Npb24uZ2V0U2Nyb2xsTGVmdCgpK2UpfSx0aGlzLmlzU2Nyb2xsYWJsZUJ5PWZ1bmN0aW9uKGUsdCl7aWYodDwwJiZ0aGlzLnNlc3Npb24uZ2V0U2Nyb2xsVG9wKCk+PTEtdGhpcy5zY3JvbGxNYXJnaW4udG9wKXJldHVybiEwO2lmKHQ+MCYmdGhpcy5zZXNzaW9uLmdldFNjcm9sbFRvcCgpK3RoaXMuJHNpemUuc2Nyb2xsZXJIZWlnaHQtdGhpcy5sYXllckNvbmZpZy5tYXhIZWlnaHQ8LTErdGhpcy5zY3JvbGxNYXJnaW4uYm90dG9tKXJldHVybiEwO2lmKGU8MCYmdGhpcy5zZXNzaW9uLmdldFNjcm9sbExlZnQoKT49MS10aGlzLnNjcm9sbE1hcmdpbi5sZWZ0KXJldHVybiEwO2lmKGU+MCYmdGhpcy5zZXNzaW9uLmdldFNjcm9sbExlZnQoKSt0aGlzLiRzaXplLnNjcm9sbGVyV2lkdGgtdGhpcy5sYXllckNvbmZpZy53aWR0aDwtMSt0aGlzLnNjcm9sbE1hcmdpbi5yaWdodClyZXR1cm4hMH0sdGhpcy5waXhlbFRvU2NyZWVuQ29vcmRpbmF0ZXM9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLnNjcm9sbGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHI9KGUrdGhpcy5zY3JvbGxMZWZ0LW4ubGVmdC10aGlzLiRwYWRkaW5nKS90aGlzLmNoYXJhY3RlcldpZHRoLGk9TWF0aC5mbG9vcigodCt0aGlzLnNjcm9sbFRvcC1uLnRvcCkvdGhpcy5saW5lSGVpZ2h0KSxzPU1hdGgucm91bmQocik7cmV0dXJue3JvdzppLGNvbHVtbjpzLHNpZGU6ci1zPjA/MTotMX19LHRoaXMuc2NyZWVuVG9UZXh0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLnNjcm9sbGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHI9TWF0aC5yb3VuZCgoZSt0aGlzLnNjcm9sbExlZnQtbi5sZWZ0LXRoaXMuJHBhZGRpbmcpL3RoaXMuY2hhcmFjdGVyV2lkdGgpLGk9KHQrdGhpcy5zY3JvbGxUb3Atbi50b3ApL3RoaXMubGluZUhlaWdodDtyZXR1cm4gdGhpcy5zZXNzaW9uLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbihpLE1hdGgubWF4KHIsMCkpfSx0aGlzLnRleHRUb1NjcmVlbkNvb3JkaW5hdGVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5zY3JvbGxlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxyPXRoaXMuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24oZSx0KSxpPXRoaXMuJHBhZGRpbmcrTWF0aC5yb3VuZChyLmNvbHVtbip0aGlzLmNoYXJhY3RlcldpZHRoKSxzPXIucm93KnRoaXMubGluZUhlaWdodDtyZXR1cm57cGFnZVg6bi5sZWZ0K2ktdGhpcy5zY3JvbGxMZWZ0LHBhZ2VZOm4udG9wK3MtdGhpcy5zY3JvbGxUb3B9fSx0aGlzLnZpc3VhbGl6ZUZvY3VzPWZ1bmN0aW9uKCl7aS5hZGRDc3NDbGFzcyh0aGlzLmNvbnRhaW5lcixcImFjZV9mb2N1c1wiKX0sdGhpcy52aXN1YWxpemVCbHVyPWZ1bmN0aW9uKCl7aS5yZW1vdmVDc3NDbGFzcyh0aGlzLmNvbnRhaW5lcixcImFjZV9mb2N1c1wiKX0sdGhpcy5zaG93Q29tcG9zaXRpb249ZnVuY3Rpb24oZSl7dGhpcy4kY29tcG9zaXRpb258fCh0aGlzLiRjb21wb3NpdGlvbj17a2VlcFRleHRBcmVhQXRDdXJzb3I6dGhpcy4ka2VlcFRleHRBcmVhQXRDdXJzb3IsY3NzVGV4dDp0aGlzLnRleHRhcmVhLnN0eWxlLmNzc1RleHR9KSx0aGlzLiRrZWVwVGV4dEFyZWFBdEN1cnNvcj0hMCxpLmFkZENzc0NsYXNzKHRoaXMudGV4dGFyZWEsXCJhY2VfY29tcG9zaXRpb25cIiksdGhpcy50ZXh0YXJlYS5zdHlsZS5jc3NUZXh0PVwiXCIsdGhpcy4kbW92ZVRleHRBcmVhVG9DdXJzb3IoKX0sdGhpcy5zZXRDb21wb3NpdGlvblRleHQ9ZnVuY3Rpb24oZSl7dGhpcy4kbW92ZVRleHRBcmVhVG9DdXJzb3IoKX0sdGhpcy5oaWRlQ29tcG9zaXRpb249ZnVuY3Rpb24oKXtpZighdGhpcy4kY29tcG9zaXRpb24pcmV0dXJuO2kucmVtb3ZlQ3NzQ2xhc3ModGhpcy50ZXh0YXJlYSxcImFjZV9jb21wb3NpdGlvblwiKSx0aGlzLiRrZWVwVGV4dEFyZWFBdEN1cnNvcj10aGlzLiRjb21wb3NpdGlvbi5rZWVwVGV4dEFyZWFBdEN1cnNvcix0aGlzLnRleHRhcmVhLnN0eWxlLmNzc1RleHQ9dGhpcy4kY29tcG9zaXRpb24uY3NzVGV4dCx0aGlzLiRjb21wb3NpdGlvbj1udWxsfSx0aGlzLnNldFRoZW1lPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbyhyKXtpZihuLiR0aGVtZUlkIT1lKXJldHVybiB0JiZ0KCk7aWYoIXIuY3NzQ2xhc3MpcmV0dXJuO2kuaW1wb3J0Q3NzU3RyaW5nKHIuY3NzVGV4dCxyLmNzc0NsYXNzLG4uY29udGFpbmVyLm93bmVyRG9jdW1lbnQpLG4udGhlbWUmJmkucmVtb3ZlQ3NzQ2xhc3Mobi5jb250YWluZXIsbi50aGVtZS5jc3NDbGFzcyk7dmFyIHM9XCJwYWRkaW5nXCJpbiByP3IucGFkZGluZzpcInBhZGRpbmdcImluKG4udGhlbWV8fHt9KT80Om4uJHBhZGRpbmc7bi4kcGFkZGluZyYmcyE9bi4kcGFkZGluZyYmbi5zZXRQYWRkaW5nKHMpLG4uJHRoZW1lPXIuY3NzQ2xhc3Msbi50aGVtZT1yLGkuYWRkQ3NzQ2xhc3Mobi5jb250YWluZXIsci5jc3NDbGFzcyksaS5zZXRDc3NDbGFzcyhuLmNvbnRhaW5lcixcImFjZV9kYXJrXCIsci5pc0RhcmspLG4uJHNpemUmJihuLiRzaXplLndpZHRoPTAsbi4kdXBkYXRlU2l6ZUFzeW5jKCkpLG4uX2Rpc3BhdGNoRXZlbnQoXCJ0aGVtZUxvYWRlZFwiLHt0aGVtZTpyfSksdCYmdCgpfXZhciBuPXRoaXM7dGhpcy4kdGhlbWVJZD1lLG4uX2Rpc3BhdGNoRXZlbnQoXCJ0aGVtZUNoYW5nZVwiLHt0aGVtZTplfSk7aWYoIWV8fHR5cGVvZiBlPT1cInN0cmluZ1wiKXt2YXIgcj1lfHx0aGlzLiRvcHRpb25zLnRoZW1lLmluaXRpYWxWYWx1ZTtzLmxvYWRNb2R1bGUoW1widGhlbWVcIixyXSxvKX1lbHNlIG8oZSl9LHRoaXMuZ2V0VGhlbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdGhlbWVJZH0sdGhpcy5zZXRTdHlsZT1mdW5jdGlvbihlLHQpe2kuc2V0Q3NzQ2xhc3ModGhpcy5jb250YWluZXIsZSx0IT09ITEpfSx0aGlzLnVuc2V0U3R5bGU9ZnVuY3Rpb24oZSl7aS5yZW1vdmVDc3NDbGFzcyh0aGlzLmNvbnRhaW5lcixlKX0sdGhpcy5zZXRDdXJzb3JTdHlsZT1mdW5jdGlvbihlKXt0aGlzLnNjcm9sbGVyLnN0eWxlLmN1cnNvciE9ZSYmKHRoaXMuc2Nyb2xsZXIuc3R5bGUuY3Vyc29yPWUpfSx0aGlzLnNldE1vdXNlQ3Vyc29yPWZ1bmN0aW9uKGUpe3RoaXMuc2Nyb2xsZXIuc3R5bGUuY3Vyc29yPWV9LHRoaXMuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuJHRleHRMYXllci5kZXN0cm95KCksdGhpcy4kY3Vyc29yTGF5ZXIuZGVzdHJveSgpfX0pLmNhbGwoZy5wcm90b3R5cGUpLHMuZGVmaW5lT3B0aW9ucyhnLnByb3RvdHlwZSxcInJlbmRlcmVyXCIse2FuaW1hdGVkU2Nyb2xsOntpbml0aWFsVmFsdWU6ITF9LHNob3dJbnZpc2libGVzOntzZXQ6ZnVuY3Rpb24oZSl7dGhpcy4kdGV4dExheWVyLnNldFNob3dJbnZpc2libGVzKGUpJiZ0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX1RFWFQpfSxpbml0aWFsVmFsdWU6ITF9LHNob3dQcmludE1hcmdpbjp7c2V0OmZ1bmN0aW9uKCl7dGhpcy4kdXBkYXRlUHJpbnRNYXJnaW4oKX0saW5pdGlhbFZhbHVlOiEwfSxwcmludE1hcmdpbkNvbHVtbjp7c2V0OmZ1bmN0aW9uKCl7dGhpcy4kdXBkYXRlUHJpbnRNYXJnaW4oKX0saW5pdGlhbFZhbHVlOjgwfSxwcmludE1hcmdpbjp7c2V0OmZ1bmN0aW9uKGUpe3R5cGVvZiBlPT1cIm51bWJlclwiJiYodGhpcy4kcHJpbnRNYXJnaW5Db2x1bW49ZSksdGhpcy4kc2hvd1ByaW50TWFyZ2luPSEhZSx0aGlzLiR1cGRhdGVQcmludE1hcmdpbigpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2hvd1ByaW50TWFyZ2luJiZ0aGlzLiRwcmludE1hcmdpbkNvbHVtbn19LHNob3dHdXR0ZXI6e3NldDpmdW5jdGlvbihlKXt0aGlzLiRndXR0ZXIuc3R5bGUuZGlzcGxheT1lP1wiYmxvY2tcIjpcIm5vbmVcIix0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX0ZVTEwpLHRoaXMub25HdXR0ZXJSZXNpemUoKX0saW5pdGlhbFZhbHVlOiEwfSxmYWRlRm9sZFdpZGdldHM6e3NldDpmdW5jdGlvbihlKXtpLnNldENzc0NsYXNzKHRoaXMuJGd1dHRlcixcImFjZV9mYWRlLWZvbGQtd2lkZ2V0c1wiLGUpfSxpbml0aWFsVmFsdWU6ITF9LHNob3dGb2xkV2lkZ2V0czp7c2V0OmZ1bmN0aW9uKGUpe3RoaXMuJGd1dHRlckxheWVyLnNldFNob3dGb2xkV2lkZ2V0cyhlKX0saW5pdGlhbFZhbHVlOiEwfSxzaG93TGluZU51bWJlcnM6e3NldDpmdW5jdGlvbihlKXt0aGlzLiRndXR0ZXJMYXllci5zZXRTaG93TGluZU51bWJlcnMoZSksdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9HVVRURVIpfSxpbml0aWFsVmFsdWU6ITB9LGRpc3BsYXlJbmRlbnRHdWlkZXM6e3NldDpmdW5jdGlvbihlKXt0aGlzLiR0ZXh0TGF5ZXIuc2V0RGlzcGxheUluZGVudEd1aWRlcyhlKSYmdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9URVhUKX0saW5pdGlhbFZhbHVlOiEwfSxoaWdobGlnaHRHdXR0ZXJMaW5lOntzZXQ6ZnVuY3Rpb24oZSl7aWYoIXRoaXMuJGd1dHRlckxpbmVIaWdobGlnaHQpe3RoaXMuJGd1dHRlckxpbmVIaWdobGlnaHQ9aS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuJGd1dHRlckxpbmVIaWdobGlnaHQuY2xhc3NOYW1lPVwiYWNlX2d1dHRlci1hY3RpdmUtbGluZVwiLHRoaXMuJGd1dHRlci5hcHBlbmRDaGlsZCh0aGlzLiRndXR0ZXJMaW5lSGlnaGxpZ2h0KTtyZXR1cm59dGhpcy4kZ3V0dGVyTGluZUhpZ2hsaWdodC5zdHlsZS5kaXNwbGF5PWU/XCJcIjpcIm5vbmVcIix0aGlzLiRjdXJzb3JMYXllci4kcGl4ZWxQb3MmJnRoaXMuJHVwZGF0ZUd1dHRlckxpbmVIaWdobGlnaHQoKX0saW5pdGlhbFZhbHVlOiExLHZhbHVlOiEwfSxoU2Nyb2xsQmFyQWx3YXlzVmlzaWJsZTp7c2V0OmZ1bmN0aW9uKGUpeyghdGhpcy4kaFNjcm9sbEJhckFsd2F5c1Zpc2libGV8fCF0aGlzLiRob3JpelNjcm9sbCkmJnRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfU0NST0xMKX0saW5pdGlhbFZhbHVlOiExfSx2U2Nyb2xsQmFyQWx3YXlzVmlzaWJsZTp7c2V0OmZ1bmN0aW9uKGUpeyghdGhpcy4kdlNjcm9sbEJhckFsd2F5c1Zpc2libGV8fCF0aGlzLiR2U2Nyb2xsKSYmdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9TQ1JPTEwpfSxpbml0aWFsVmFsdWU6ITF9LGZvbnRTaXplOntzZXQ6ZnVuY3Rpb24oZSl7dHlwZW9mIGU9PVwibnVtYmVyXCImJihlKz1cInB4XCIpLHRoaXMuY29udGFpbmVyLnN0eWxlLmZvbnRTaXplPWUsdGhpcy51cGRhdGVGb250U2l6ZSgpfSxpbml0aWFsVmFsdWU6MTJ9LGZvbnRGYW1pbHk6e3NldDpmdW5jdGlvbihlKXt0aGlzLmNvbnRhaW5lci5zdHlsZS5mb250RmFtaWx5PWUsdGhpcy51cGRhdGVGb250U2l6ZSgpfX0sbWF4TGluZXM6e3NldDpmdW5jdGlvbihlKXt0aGlzLnVwZGF0ZUZ1bGwoKX19LG1pbkxpbmVzOntzZXQ6ZnVuY3Rpb24oZSl7dGhpcy51cGRhdGVGdWxsKCl9fSxzY3JvbGxQYXN0RW5kOntzZXQ6ZnVuY3Rpb24oZSl7ZT0rZXx8MDtpZih0aGlzLiRzY3JvbGxQYXN0RW5kPT1lKXJldHVybjt0aGlzLiRzY3JvbGxQYXN0RW5kPWUsdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9TQ1JPTEwpfSxpbml0aWFsVmFsdWU6MCxoYW5kbGVzU2V0OiEwfSxmaXhlZFdpZHRoR3V0dGVyOntzZXQ6ZnVuY3Rpb24oZSl7dGhpcy4kZ3V0dGVyTGF5ZXIuJGZpeGVkV2lkdGg9ISFlLHRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfR1VUVEVSKX19LHRoZW1lOntzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5zZXRUaGVtZShlKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRoZW1lSWR8fHRoaXMudGhlbWV9LGluaXRpYWxWYWx1ZTpcIi4vdGhlbWUvdGV4dG1hdGVcIixoYW5kbGVzU2V0OiEwfX0pLHQuVmlydHVhbFJlbmRlcmVyPWd9KSxkZWZpbmUoXCJhY2Uvd29ya2VyL3dvcmtlcl9jbGllbnRcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIvb29wXCIsXCJhY2UvbGliL25ldFwiLFwiYWNlL2xpYi9ldmVudF9lbWl0dGVyXCIsXCJhY2UvY29uZmlnXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi4vbGliL29vcFwiKSxpPWUoXCIuLi9saWIvbmV0XCIpLHM9ZShcIi4uL2xpYi9ldmVudF9lbWl0dGVyXCIpLkV2ZW50RW1pdHRlcixvPWUoXCIuLi9jb25maWdcIiksdT1mdW5jdGlvbih0LG4scixpKXt0aGlzLiRzZW5kRGVsdGFRdWV1ZT10aGlzLiRzZW5kRGVsdGFRdWV1ZS5iaW5kKHRoaXMpLHRoaXMuY2hhbmdlTGlzdGVuZXI9dGhpcy5jaGFuZ2VMaXN0ZW5lci5iaW5kKHRoaXMpLHRoaXMub25NZXNzYWdlPXRoaXMub25NZXNzYWdlLmJpbmQodGhpcyksZS5uYW1lVG9VcmwmJiFlLnRvVXJsJiYoZS50b1VybD1lLm5hbWVUb1VybCk7aWYoby5nZXQoXCJwYWNrYWdlZFwiKXx8IWUudG9VcmwpaT1pfHxvLm1vZHVsZVVybChuLFwid29ya2VyXCIpO2Vsc2V7dmFyIHM9dGhpcy4kbm9ybWFsaXplUGF0aDtpPWl8fHMoZS50b1VybChcImFjZS93b3JrZXIvd29ya2VyLmpzXCIsbnVsbCxcIl9cIikpO3ZhciB1PXt9O3QuZm9yRWFjaChmdW5jdGlvbih0KXt1W3RdPXMoZS50b1VybCh0LG51bGwsXCJfXCIpLnJlcGxhY2UoLyhcXC5qcyk/KFxcPy4qKT8kLyxcIlwiKSl9KX10cnl7dGhpcy4kd29ya2VyPW5ldyBXb3JrZXIoaSl9Y2F0Y2goYSl7aWYoIShhIGluc3RhbmNlb2Ygd2luZG93LkRPTUV4Y2VwdGlvbikpdGhyb3cgYTt2YXIgZj10aGlzLiR3b3JrZXJCbG9iKGkpLGw9d2luZG93LlVSTHx8d2luZG93LndlYmtpdFVSTCxjPWwuY3JlYXRlT2JqZWN0VVJMKGYpO3RoaXMuJHdvcmtlcj1uZXcgV29ya2VyKGMpLGwucmV2b2tlT2JqZWN0VVJMKGMpfXRoaXMuJHdvcmtlci5wb3N0TWVzc2FnZSh7aW5pdDohMCx0bG5zOnUsbW9kdWxlOm4sY2xhc3NuYW1lOnJ9KSx0aGlzLmNhbGxiYWNrSWQ9MSx0aGlzLmNhbGxiYWNrcz17fSx0aGlzLiR3b3JrZXIub25tZXNzYWdlPXRoaXMub25NZXNzYWdlfTsoZnVuY3Rpb24oKXtyLmltcGxlbWVudCh0aGlzLHMpLHRoaXMub25NZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YTtzd2l0Y2godC50eXBlKXtjYXNlXCJldmVudFwiOnRoaXMuX3NpZ25hbCh0Lm5hbWUse2RhdGE6dC5kYXRhfSk7YnJlYWs7Y2FzZVwiY2FsbFwiOnZhciBuPXRoaXMuY2FsbGJhY2tzW3QuaWRdO24mJihuKHQuZGF0YSksZGVsZXRlIHRoaXMuY2FsbGJhY2tzW3QuaWRdKTticmVhaztjYXNlXCJlcnJvclwiOnRoaXMucmVwb3J0RXJyb3IodC5kYXRhKTticmVhaztjYXNlXCJsb2dcIjp3aW5kb3cuY29uc29sZSYmY29uc29sZS5sb2cmJmNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsdC5kYXRhKX19LHRoaXMucmVwb3J0RXJyb3I9ZnVuY3Rpb24oZSl7d2luZG93LmNvbnNvbGUmJmNvbnNvbGUuZXJyb3ImJmNvbnNvbGUuZXJyb3IoZSl9LHRoaXMuJG5vcm1hbGl6ZVBhdGg9ZnVuY3Rpb24oZSl7cmV0dXJuIGkucXVhbGlmeVVSTChlKX0sdGhpcy50ZXJtaW5hdGU9ZnVuY3Rpb24oKXt0aGlzLl9zaWduYWwoXCJ0ZXJtaW5hdGVcIix7fSksdGhpcy5kZWx0YVF1ZXVlPW51bGwsdGhpcy4kd29ya2VyLnRlcm1pbmF0ZSgpLHRoaXMuJHdvcmtlcj1udWxsLHRoaXMuJGRvYyYmdGhpcy4kZG9jLm9mZihcImNoYW5nZVwiLHRoaXMuY2hhbmdlTGlzdGVuZXIpLHRoaXMuJGRvYz1udWxsfSx0aGlzLnNlbmQ9ZnVuY3Rpb24oZSx0KXt0aGlzLiR3b3JrZXIucG9zdE1lc3NhZ2Uoe2NvbW1hbmQ6ZSxhcmdzOnR9KX0sdGhpcy5jYWxsPWZ1bmN0aW9uKGUsdCxuKXtpZihuKXt2YXIgcj10aGlzLmNhbGxiYWNrSWQrKzt0aGlzLmNhbGxiYWNrc1tyXT1uLHQucHVzaChyKX10aGlzLnNlbmQoZSx0KX0sdGhpcy5lbWl0PWZ1bmN0aW9uKGUsdCl7dHJ5e3RoaXMuJHdvcmtlci5wb3N0TWVzc2FnZSh7ZXZlbnQ6ZSxkYXRhOntkYXRhOnQuZGF0YX19KX1jYXRjaChuKXtjb25zb2xlLmVycm9yKG4uc3RhY2spfX0sdGhpcy5hdHRhY2hUb0RvY3VtZW50PWZ1bmN0aW9uKGUpe3RoaXMuJGRvYyYmdGhpcy50ZXJtaW5hdGUoKSx0aGlzLiRkb2M9ZSx0aGlzLmNhbGwoXCJzZXRWYWx1ZVwiLFtlLmdldFZhbHVlKCldKSxlLm9uKFwiY2hhbmdlXCIsdGhpcy5jaGFuZ2VMaXN0ZW5lcil9LHRoaXMuY2hhbmdlTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dGhpcy5kZWx0YVF1ZXVlfHwodGhpcy5kZWx0YVF1ZXVlPVtdLHNldFRpbWVvdXQodGhpcy4kc2VuZERlbHRhUXVldWUsMCkpLGUuYWN0aW9uPT1cImluc2VydFwiP3RoaXMuZGVsdGFRdWV1ZS5wdXNoKGUuc3RhcnQsZS5saW5lcyk6dGhpcy5kZWx0YVF1ZXVlLnB1c2goZS5zdGFydCxlLmVuZCl9LHRoaXMuJHNlbmREZWx0YVF1ZXVlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kZWx0YVF1ZXVlO2lmKCFlKXJldHVybjt0aGlzLmRlbHRhUXVldWU9bnVsbCxlLmxlbmd0aD41MCYmZS5sZW5ndGg+dGhpcy4kZG9jLmdldExlbmd0aCgpPj4xP3RoaXMuY2FsbChcInNldFZhbHVlXCIsW3RoaXMuJGRvYy5nZXRWYWx1ZSgpXSk6dGhpcy5lbWl0KFwiY2hhbmdlXCIse2RhdGE6ZX0pfSx0aGlzLiR3b3JrZXJCbG9iPWZ1bmN0aW9uKGUpe3ZhciB0PVwiaW1wb3J0U2NyaXB0cygnXCIraS5xdWFsaWZ5VVJMKGUpK1wiJyk7XCI7dHJ5e3JldHVybiBuZXcgQmxvYihbdF0se3R5cGU6XCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0XCJ9KX1jYXRjaChuKXt2YXIgcj13aW5kb3cuQmxvYkJ1aWxkZXJ8fHdpbmRvdy5XZWJLaXRCbG9iQnVpbGRlcnx8d2luZG93Lk1vekJsb2JCdWlsZGVyLHM9bmV3IHI7cmV0dXJuIHMuYXBwZW5kKHQpLHMuZ2V0QmxvYihcImFwcGxpY2F0aW9uL2phdmFzY3JpcHRcIil9fX0pLmNhbGwodS5wcm90b3R5cGUpO3ZhciBhPWZ1bmN0aW9uKGUsdCxuKXt0aGlzLiRzZW5kRGVsdGFRdWV1ZT10aGlzLiRzZW5kRGVsdGFRdWV1ZS5iaW5kKHRoaXMpLHRoaXMuY2hhbmdlTGlzdGVuZXI9dGhpcy5jaGFuZ2VMaXN0ZW5lci5iaW5kKHRoaXMpLHRoaXMuY2FsbGJhY2tJZD0xLHRoaXMuY2FsbGJhY2tzPXt9LHRoaXMubWVzc2FnZUJ1ZmZlcj1bXTt2YXIgcj1udWxsLGk9ITEsdT1PYmplY3QuY3JlYXRlKHMpLGE9dGhpczt0aGlzLiR3b3JrZXI9e30sdGhpcy4kd29ya2VyLnRlcm1pbmF0ZT1mdW5jdGlvbigpe30sdGhpcy4kd29ya2VyLnBvc3RNZXNzYWdlPWZ1bmN0aW9uKGUpe2EubWVzc2FnZUJ1ZmZlci5wdXNoKGUpLHImJihpP3NldFRpbWVvdXQoZik6ZigpKX0sdGhpcy5zZXRFbWl0U3luYz1mdW5jdGlvbihlKXtpPWV9O3ZhciBmPWZ1bmN0aW9uKCl7dmFyIGU9YS5tZXNzYWdlQnVmZmVyLnNoaWZ0KCk7ZS5jb21tYW5kP3JbZS5jb21tYW5kXS5hcHBseShyLGUuYXJncyk6ZS5ldmVudCYmdS5fc2lnbmFsKGUuZXZlbnQsZS5kYXRhKX07dS5wb3N0TWVzc2FnZT1mdW5jdGlvbihlKXthLm9uTWVzc2FnZSh7ZGF0YTplfSl9LHUuY2FsbGJhY2s9ZnVuY3Rpb24oZSx0KXt0aGlzLnBvc3RNZXNzYWdlKHt0eXBlOlwiY2FsbFwiLGlkOnQsZGF0YTplfSl9LHUuZW1pdD1mdW5jdGlvbihlLHQpe3RoaXMucG9zdE1lc3NhZ2Uoe3R5cGU6XCJldmVudFwiLG5hbWU6ZSxkYXRhOnR9KX0sby5sb2FkTW9kdWxlKFtcIndvcmtlclwiLHRdLGZ1bmN0aW9uKGUpe3I9bmV3IGVbbl0odSk7d2hpbGUoYS5tZXNzYWdlQnVmZmVyLmxlbmd0aClmKCl9KX07YS5wcm90b3R5cGU9dS5wcm90b3R5cGUsdC5VSVdvcmtlckNsaWVudD1hLHQuV29ya2VyQ2xpZW50PXV9KSxkZWZpbmUoXCJhY2UvcGxhY2Vob2xkZXJcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9yYW5nZVwiLFwiYWNlL2xpYi9ldmVudF9lbWl0dGVyXCIsXCJhY2UvbGliL29vcFwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZShcIi4vcmFuZ2VcIikuUmFuZ2UsaT1lKFwiLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXIscz1lKFwiLi9saWIvb29wXCIpLG89ZnVuY3Rpb24oZSx0LG4scixpLHMpe3ZhciBvPXRoaXM7dGhpcy5sZW5ndGg9dCx0aGlzLnNlc3Npb249ZSx0aGlzLmRvYz1lLmdldERvY3VtZW50KCksdGhpcy5tYWluQ2xhc3M9aSx0aGlzLm90aGVyc0NsYXNzPXMsdGhpcy4kb25VcGRhdGU9dGhpcy5vblVwZGF0ZS5iaW5kKHRoaXMpLHRoaXMuZG9jLm9uKFwiY2hhbmdlXCIsdGhpcy4kb25VcGRhdGUpLHRoaXMuJG90aGVycz1yLHRoaXMuJG9uQ3Vyc29yQ2hhbmdlPWZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe28ub25DdXJzb3JDaGFuZ2UoKX0pfSx0aGlzLiRwb3M9bjt2YXIgdT1lLmdldFVuZG9NYW5hZ2VyKCkuJHVuZG9TdGFja3x8ZS5nZXRVbmRvTWFuYWdlcigpLiR1bmRvc3RhY2t8fHtsZW5ndGg6LTF9O3RoaXMuJHVuZG9TdGFja0RlcHRoPXUubGVuZ3RoLHRoaXMuc2V0dXAoKSxlLnNlbGVjdGlvbi5vbihcImNoYW5nZUN1cnNvclwiLHRoaXMuJG9uQ3Vyc29yQ2hhbmdlKX07KGZ1bmN0aW9uKCl7cy5pbXBsZW1lbnQodGhpcyxpKSx0aGlzLnNldHVwPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuZG9jLG49dGhpcy5zZXNzaW9uLGk9dGhpcy4kcG9zO3RoaXMuc2VsZWN0aW9uQmVmb3JlPW4uc2VsZWN0aW9uLnRvSlNPTigpLG4uc2VsZWN0aW9uLmluTXVsdGlTZWxlY3RNb2RlJiZuLnNlbGVjdGlvbi50b1NpbmdsZVJhbmdlKCksdGhpcy5wb3M9dC5jcmVhdGVBbmNob3IoaS5yb3csaS5jb2x1bW4pLHRoaXMubWFya2VySWQ9bi5hZGRNYXJrZXIobmV3IHIoaS5yb3csaS5jb2x1bW4saS5yb3csaS5jb2x1bW4rdGhpcy5sZW5ndGgpLHRoaXMubWFpbkNsYXNzLG51bGwsITEpLHRoaXMucG9zLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24odCl7bi5yZW1vdmVNYXJrZXIoZS5tYXJrZXJJZCksZS5tYXJrZXJJZD1uLmFkZE1hcmtlcihuZXcgcih0LnZhbHVlLnJvdyx0LnZhbHVlLmNvbHVtbix0LnZhbHVlLnJvdyx0LnZhbHVlLmNvbHVtbitlLmxlbmd0aCksZS5tYWluQ2xhc3MsbnVsbCwhMSl9KSx0aGlzLm90aGVycz1bXSx0aGlzLiRvdGhlcnMuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgcj10LmNyZWF0ZUFuY2hvcihuLnJvdyxuLmNvbHVtbik7ZS5vdGhlcnMucHVzaChyKX0pLG4uc2V0VW5kb1NlbGVjdCghMSl9LHRoaXMuc2hvd090aGVyTWFya2Vycz1mdW5jdGlvbigpe2lmKHRoaXMub3RoZXJzQWN0aXZlKXJldHVybjt2YXIgZT10aGlzLnNlc3Npb24sdD10aGlzO3RoaXMub3RoZXJzQWN0aXZlPSEwLHRoaXMub3RoZXJzLmZvckVhY2goZnVuY3Rpb24obil7bi5tYXJrZXJJZD1lLmFkZE1hcmtlcihuZXcgcihuLnJvdyxuLmNvbHVtbixuLnJvdyxuLmNvbHVtbit0Lmxlbmd0aCksdC5vdGhlcnNDbGFzcyxudWxsLCExKSxuLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oaSl7ZS5yZW1vdmVNYXJrZXIobi5tYXJrZXJJZCksbi5tYXJrZXJJZD1lLmFkZE1hcmtlcihuZXcgcihpLnZhbHVlLnJvdyxpLnZhbHVlLmNvbHVtbixpLnZhbHVlLnJvdyxpLnZhbHVlLmNvbHVtbit0Lmxlbmd0aCksdC5vdGhlcnNDbGFzcyxudWxsLCExKX0pfSl9LHRoaXMuaGlkZU90aGVyTWFya2Vycz1mdW5jdGlvbigpe2lmKCF0aGlzLm90aGVyc0FjdGl2ZSlyZXR1cm47dGhpcy5vdGhlcnNBY3RpdmU9ITE7Zm9yKHZhciBlPTA7ZTx0aGlzLm90aGVycy5sZW5ndGg7ZSsrKXRoaXMuc2Vzc2lvbi5yZW1vdmVNYXJrZXIodGhpcy5vdGhlcnNbZV0ubWFya2VySWQpfSx0aGlzLm9uVXBkYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PWU7aWYodC5zdGFydC5yb3chPT10LmVuZC5yb3cpcmV0dXJuO2lmKHQuc3RhcnQucm93IT09dGhpcy5wb3Mucm93KXJldHVybjtpZih0aGlzLiR1cGRhdGluZylyZXR1cm47dGhpcy4kdXBkYXRpbmc9ITA7dmFyIG49ZS5hY3Rpb249PT1cImluc2VydFwiP3QuZW5kLmNvbHVtbi10LnN0YXJ0LmNvbHVtbjp0LnN0YXJ0LmNvbHVtbi10LmVuZC5jb2x1bW47aWYodC5zdGFydC5jb2x1bW4+PXRoaXMucG9zLmNvbHVtbiYmdC5zdGFydC5jb2x1bW48PXRoaXMucG9zLmNvbHVtbit0aGlzLmxlbmd0aCsxKXt2YXIgaT10LnN0YXJ0LmNvbHVtbi10aGlzLnBvcy5jb2x1bW47dGhpcy5sZW5ndGgrPW47aWYoIXRoaXMuc2Vzc2lvbi4kZnJvbVVuZG8pe2lmKGUuYWN0aW9uPT09XCJpbnNlcnRcIilmb3IodmFyIHM9dGhpcy5vdGhlcnMubGVuZ3RoLTE7cz49MDtzLS0pe3ZhciBvPXRoaXMub3RoZXJzW3NdLHU9e3JvdzpvLnJvdyxjb2x1bW46by5jb2x1bW4raX07by5yb3c9PT10LnN0YXJ0LnJvdyYmdC5zdGFydC5jb2x1bW48by5jb2x1bW4mJih1LmNvbHVtbis9biksdGhpcy5kb2MuaW5zZXJ0TWVyZ2VkTGluZXModSxlLmxpbmVzKX1lbHNlIGlmKGUuYWN0aW9uPT09XCJyZW1vdmVcIilmb3IodmFyIHM9dGhpcy5vdGhlcnMubGVuZ3RoLTE7cz49MDtzLS0pe3ZhciBvPXRoaXMub3RoZXJzW3NdLHU9e3JvdzpvLnJvdyxjb2x1bW46by5jb2x1bW4raX07by5yb3c9PT10LnN0YXJ0LnJvdyYmdC5zdGFydC5jb2x1bW48by5jb2x1bW4mJih1LmNvbHVtbis9biksdGhpcy5kb2MucmVtb3ZlKG5ldyByKHUucm93LHUuY29sdW1uLHUucm93LHUuY29sdW1uLW4pKX10LnN0YXJ0LmNvbHVtbj09PXRoaXMucG9zLmNvbHVtbiYmZS5hY3Rpb249PT1cImluc2VydFwiP3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnBvcy5zZXRQb3NpdGlvbih0aGlzLnBvcy5yb3csdGhpcy5wb3MuY29sdW1uLW4pO2Zvcih2YXIgZT0wO2U8dGhpcy5vdGhlcnMubGVuZ3RoO2UrKyl7dmFyIHI9dGhpcy5vdGhlcnNbZV0saT17cm93OnIucm93LGNvbHVtbjpyLmNvbHVtbi1ufTtyLnJvdz09PXQuc3RhcnQucm93JiZ0LnN0YXJ0LmNvbHVtbjxyLmNvbHVtbiYmKGkuY29sdW1uKz1uKSxyLnNldFBvc2l0aW9uKGkucm93LGkuY29sdW1uKX19LmJpbmQodGhpcyksMCk6dC5zdGFydC5jb2x1bW49PT10aGlzLnBvcy5jb2x1bW4mJmUuYWN0aW9uPT09XCJyZW1vdmVcIiYmc2V0VGltZW91dChmdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8dGhpcy5vdGhlcnMubGVuZ3RoO2UrKyl7dmFyIHI9dGhpcy5vdGhlcnNbZV07ci5yb3c9PT10LnN0YXJ0LnJvdyYmdC5zdGFydC5jb2x1bW48ci5jb2x1bW4mJnIuc2V0UG9zaXRpb24oci5yb3csci5jb2x1bW4tbil9fS5iaW5kKHRoaXMpLDApfXRoaXMucG9zLl9lbWl0KFwiY2hhbmdlXCIse3ZhbHVlOnRoaXMucG9zfSk7Zm9yKHZhciBzPTA7czx0aGlzLm90aGVycy5sZW5ndGg7cysrKXRoaXMub3RoZXJzW3NdLl9lbWl0KFwiY2hhbmdlXCIse3ZhbHVlOnRoaXMub3RoZXJzW3NdfSl9dGhpcy4kdXBkYXRpbmc9ITF9LHRoaXMub25DdXJzb3JDaGFuZ2U9ZnVuY3Rpb24oZSl7aWYodGhpcy4kdXBkYXRpbmd8fCF0aGlzLnNlc3Npb24pcmV0dXJuO3ZhciB0PXRoaXMuc2Vzc2lvbi5zZWxlY3Rpb24uZ2V0Q3Vyc29yKCk7dC5yb3c9PT10aGlzLnBvcy5yb3cmJnQuY29sdW1uPj10aGlzLnBvcy5jb2x1bW4mJnQuY29sdW1uPD10aGlzLnBvcy5jb2x1bW4rdGhpcy5sZW5ndGg/KHRoaXMuc2hvd090aGVyTWFya2VycygpLHRoaXMuX2VtaXQoXCJjdXJzb3JFbnRlclwiLGUpKToodGhpcy5oaWRlT3RoZXJNYXJrZXJzKCksdGhpcy5fZW1pdChcImN1cnNvckxlYXZlXCIsZSkpfSx0aGlzLmRldGFjaD1mdW5jdGlvbigpe3RoaXMuc2Vzc2lvbi5yZW1vdmVNYXJrZXIodGhpcy5tYXJrZXJJZCksdGhpcy5oaWRlT3RoZXJNYXJrZXJzKCksdGhpcy5kb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLHRoaXMuJG9uVXBkYXRlKSx0aGlzLnNlc3Npb24uc2VsZWN0aW9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VDdXJzb3JcIix0aGlzLiRvbkN1cnNvckNoYW5nZSksdGhpcy5wb3MuZGV0YWNoKCk7Zm9yKHZhciBlPTA7ZTx0aGlzLm90aGVycy5sZW5ndGg7ZSsrKXRoaXMub3RoZXJzW2VdLmRldGFjaCgpO3RoaXMuc2Vzc2lvbi5zZXRVbmRvU2VsZWN0KCEwKSx0aGlzLnNlc3Npb249bnVsbH0sdGhpcy5jYW5jZWw9ZnVuY3Rpb24oKXtpZih0aGlzLiR1bmRvU3RhY2tEZXB0aD09PS0xKXRocm93IEVycm9yKFwiQ2FuY2VsaW5nIHBsYWNlaG9sZGVycyBvbmx5IHN1cHBvcnRlZCB3aXRoIHVuZG8gbWFuYWdlciBhdHRhY2hlZCB0byBzZXNzaW9uLlwiKTt2YXIgZT10aGlzLnNlc3Npb24uZ2V0VW5kb01hbmFnZXIoKSx0PShlLiR1bmRvU3RhY2t8fGUuJHVuZG9zdGFjaykubGVuZ3RoLXRoaXMuJHVuZG9TdGFja0RlcHRoO2Zvcih2YXIgbj0wO248dDtuKyspZS51bmRvKCEwKTt0aGlzLnNlbGVjdGlvbkJlZm9yZSYmdGhpcy5zZXNzaW9uLnNlbGVjdGlvbi5mcm9tSlNPTih0aGlzLnNlbGVjdGlvbkJlZm9yZSl9fSkuY2FsbChvLnByb3RvdHlwZSksdC5QbGFjZUhvbGRlcj1vfSksZGVmaW5lKFwiYWNlL21vdXNlL211bHRpX3NlbGVjdF9oYW5kbGVyXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvbGliL2V2ZW50XCIsXCJhY2UvbGliL3VzZXJhZ2VudFwiXSxmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcyhlLHQpe3JldHVybiBlLnJvdz09dC5yb3cmJmUuY29sdW1uPT10LmNvbHVtbn1mdW5jdGlvbiBvKGUpe3ZhciB0PWUuZG9tRXZlbnQsbj10LmFsdEtleSxvPXQuc2hpZnRLZXksdT10LmN0cmxLZXksYT1lLmdldEFjY2VsS2V5KCksZj1lLmdldEJ1dHRvbigpO3UmJmkuaXNNYWMmJihmPXQuYnV0dG9uKTtpZihlLmVkaXRvci5pbk11bHRpU2VsZWN0TW9kZSYmZj09Mil7ZS5lZGl0b3IudGV4dElucHV0Lm9uQ29udGV4dE1lbnUoZS5kb21FdmVudCk7cmV0dXJufWlmKCF1JiYhbiYmIWEpe2Y9PT0wJiZlLmVkaXRvci5pbk11bHRpU2VsZWN0TW9kZSYmZS5lZGl0b3IuZXhpdE11bHRpU2VsZWN0TW9kZSgpO3JldHVybn1pZihmIT09MClyZXR1cm47dmFyIGw9ZS5lZGl0b3IsYz1sLnNlbGVjdGlvbixoPWwuaW5NdWx0aVNlbGVjdE1vZGUscD1lLmdldERvY3VtZW50UG9zaXRpb24oKSxkPWMuZ2V0Q3Vyc29yKCksdj1lLmluU2VsZWN0aW9uKCl8fGMuaXNFbXB0eSgpJiZzKHAsZCksbT1lLngsZz1lLnkseT1mdW5jdGlvbihlKXttPWUuY2xpZW50WCxnPWUuY2xpZW50WX0sYj1sLnNlc3Npb24sdz1sLnJlbmRlcmVyLnBpeGVsVG9TY3JlZW5Db29yZGluYXRlcyhtLGcpLEU9dyxTO2lmKGwuJG1vdXNlSGFuZGxlci4kZW5hYmxlSnVtcFRvRGVmKXUmJm58fGEmJm4/Uz1vP1wiYmxvY2tcIjpcImFkZFwiOm4mJmwuJGJsb2NrU2VsZWN0RW5hYmxlZCYmKFM9XCJibG9ja1wiKTtlbHNlIGlmKGEmJiFuKXtTPVwiYWRkXCI7aWYoIWgmJm8pcmV0dXJufWVsc2UgbiYmbC4kYmxvY2tTZWxlY3RFbmFibGVkJiYoUz1cImJsb2NrXCIpO1MmJmkuaXNNYWMmJnQuY3RybEtleSYmbC4kbW91c2VIYW5kbGVyLmNhbmNlbENvbnRleHRNZW51KCk7aWYoUz09XCJhZGRcIil7aWYoIWgmJnYpcmV0dXJuO2lmKCFoKXt2YXIgeD1jLnRvT3JpZW50ZWRSYW5nZSgpO2wuYWRkU2VsZWN0aW9uTWFya2VyKHgpfXZhciBUPWMucmFuZ2VMaXN0LnJhbmdlQXRQb2ludChwKTtsLiRibG9ja1Njcm9sbGluZysrLGwuaW5WaXJ0dWFsU2VsZWN0aW9uTW9kZT0hMCxvJiYoVD1udWxsLHg9Yy5yYW5nZXNbMF18fHgsbC5yZW1vdmVTZWxlY3Rpb25NYXJrZXIoeCkpLGwub25jZShcIm1vdXNldXBcIixmdW5jdGlvbigpe3ZhciBlPWMudG9PcmllbnRlZFJhbmdlKCk7VCYmZS5pc0VtcHR5KCkmJnMoVC5jdXJzb3IsZS5jdXJzb3IpP2Muc3Vic3RyYWN0UG9pbnQoZS5jdXJzb3IpOihvP2Muc3Vic3RyYWN0UG9pbnQoeC5jdXJzb3IpOngmJihsLnJlbW92ZVNlbGVjdGlvbk1hcmtlcih4KSxjLmFkZFJhbmdlKHgpKSxjLmFkZFJhbmdlKGUpKSxsLiRibG9ja1Njcm9sbGluZy0tLGwuaW5WaXJ0dWFsU2VsZWN0aW9uTW9kZT0hMX0pfWVsc2UgaWYoUz09XCJibG9ja1wiKXtlLnN0b3AoKSxsLmluVmlydHVhbFNlbGVjdGlvbk1vZGU9ITA7dmFyIE4sQz1bXSxrPWZ1bmN0aW9uKCl7dmFyIGU9bC5yZW5kZXJlci5waXhlbFRvU2NyZWVuQ29vcmRpbmF0ZXMobSxnKSx0PWIuc2NyZWVuVG9Eb2N1bWVudFBvc2l0aW9uKGUucm93LGUuY29sdW1uKTtpZihzKEUsZSkmJnModCxjLmxlYWQpKXJldHVybjtFPWUsbC4kYmxvY2tTY3JvbGxpbmcrKyxsLnNlbGVjdGlvbi5tb3ZlVG9Qb3NpdGlvbih0KSxsLnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KCksbC5yZW1vdmVTZWxlY3Rpb25NYXJrZXJzKEMpLEM9Yy5yZWN0YW5ndWxhclJhbmdlQmxvY2soRSx3KSxsLiRtb3VzZUhhbmRsZXIuJGNsaWNrU2VsZWN0aW9uJiZDLmxlbmd0aD09MSYmQ1swXS5pc0VtcHR5KCkmJihDWzBdPWwuJG1vdXNlSGFuZGxlci4kY2xpY2tTZWxlY3Rpb24uY2xvbmUoKSksQy5mb3JFYWNoKGwuYWRkU2VsZWN0aW9uTWFya2VyLGwpLGwudXBkYXRlU2VsZWN0aW9uTWFya2VycygpLGwuJGJsb2NrU2Nyb2xsaW5nLS19O2wuJGJsb2NrU2Nyb2xsaW5nKyssaCYmIWE/Yy50b1NpbmdsZVJhbmdlKCk6IWgmJmEmJihOPWMudG9PcmllbnRlZFJhbmdlKCksbC5hZGRTZWxlY3Rpb25NYXJrZXIoTikpLG8/dz1iLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbihjLmxlYWQpOmMubW92ZVRvUG9zaXRpb24ocCksbC4kYmxvY2tTY3JvbGxpbmctLSxFPXtyb3c6LTEsY29sdW1uOi0xfTt2YXIgTD1mdW5jdGlvbihlKXtjbGVhckludGVydmFsKE8pLGwucmVtb3ZlU2VsZWN0aW9uTWFya2VycyhDKSxDLmxlbmd0aHx8KEM9W2MudG9PcmllbnRlZFJhbmdlKCldKSxsLiRibG9ja1Njcm9sbGluZysrLE4mJihsLnJlbW92ZVNlbGVjdGlvbk1hcmtlcihOKSxjLnRvU2luZ2xlUmFuZ2UoTikpO2Zvcih2YXIgdD0wO3Q8Qy5sZW5ndGg7dCsrKWMuYWRkUmFuZ2UoQ1t0XSk7bC5pblZpcnR1YWxTZWxlY3Rpb25Nb2RlPSExLGwuJG1vdXNlSGFuZGxlci4kY2xpY2tTZWxlY3Rpb249bnVsbCxsLiRibG9ja1Njcm9sbGluZy0tfSxBPWs7ci5jYXB0dXJlKGwuY29udGFpbmVyLHksTCk7dmFyIE89c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtBKCl9LDIwKTtyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpfX12YXIgcj1lKFwiLi4vbGliL2V2ZW50XCIpLGk9ZShcIi4uL2xpYi91c2VyYWdlbnRcIik7dC5vbk1vdXNlRG93bj1vfSksZGVmaW5lKFwiYWNlL2NvbW1hbmRzL211bHRpX3NlbGVjdF9jb21tYW5kc1wiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2tleWJvYXJkL2hhc2hfaGFuZGxlclwiXSxmdW5jdGlvbihlLHQsbil7dC5kZWZhdWx0Q29tbWFuZHM9W3tuYW1lOlwiYWRkQ3Vyc29yQWJvdmVcIixleGVjOmZ1bmN0aW9uKGUpe2Uuc2VsZWN0TW9yZUxpbmVzKC0xKX0sYmluZEtleTp7d2luOlwiQ3RybC1BbHQtVXBcIixtYWM6XCJDdHJsLUFsdC1VcFwifSxzY3JvbGxJbnRvVmlldzpcImN1cnNvclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcImFkZEN1cnNvckJlbG93XCIsZXhlYzpmdW5jdGlvbihlKXtlLnNlbGVjdE1vcmVMaW5lcygxKX0sYmluZEtleTp7d2luOlwiQ3RybC1BbHQtRG93blwiLG1hYzpcIkN0cmwtQWx0LURvd25cIn0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJhZGRDdXJzb3JBYm92ZVNraXBDdXJyZW50XCIsZXhlYzpmdW5jdGlvbihlKXtlLnNlbGVjdE1vcmVMaW5lcygtMSwhMCl9LGJpbmRLZXk6e3dpbjpcIkN0cmwtQWx0LVNoaWZ0LVVwXCIsbWFjOlwiQ3RybC1BbHQtU2hpZnQtVXBcIn0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJhZGRDdXJzb3JCZWxvd1NraXBDdXJyZW50XCIsZXhlYzpmdW5jdGlvbihlKXtlLnNlbGVjdE1vcmVMaW5lcygxLCEwKX0sYmluZEtleTp7d2luOlwiQ3RybC1BbHQtU2hpZnQtRG93blwiLG1hYzpcIkN0cmwtQWx0LVNoaWZ0LURvd25cIn0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJzZWxlY3RNb3JlQmVmb3JlXCIsZXhlYzpmdW5jdGlvbihlKXtlLnNlbGVjdE1vcmUoLTEpfSxiaW5kS2V5Ont3aW46XCJDdHJsLUFsdC1MZWZ0XCIsbWFjOlwiQ3RybC1BbHQtTGVmdFwifSxzY3JvbGxJbnRvVmlldzpcImN1cnNvclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcInNlbGVjdE1vcmVBZnRlclwiLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5zZWxlY3RNb3JlKDEpfSxiaW5kS2V5Ont3aW46XCJDdHJsLUFsdC1SaWdodFwiLG1hYzpcIkN0cmwtQWx0LVJpZ2h0XCJ9LHNjcm9sbEludG9WaWV3OlwiY3Vyc29yXCIscmVhZE9ubHk6ITB9LHtuYW1lOlwic2VsZWN0TmV4dEJlZm9yZVwiLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5zZWxlY3RNb3JlKC0xLCEwKX0sYmluZEtleTp7d2luOlwiQ3RybC1BbHQtU2hpZnQtTGVmdFwiLG1hYzpcIkN0cmwtQWx0LVNoaWZ0LUxlZnRcIn0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH0se25hbWU6XCJzZWxlY3ROZXh0QWZ0ZXJcIixleGVjOmZ1bmN0aW9uKGUpe2Uuc2VsZWN0TW9yZSgxLCEwKX0sYmluZEtleTp7d2luOlwiQ3RybC1BbHQtU2hpZnQtUmlnaHRcIixtYWM6XCJDdHJsLUFsdC1TaGlmdC1SaWdodFwifSxzY3JvbGxJbnRvVmlldzpcImN1cnNvclwiLHJlYWRPbmx5OiEwfSx7bmFtZTpcInNwbGl0SW50b0xpbmVzXCIsZXhlYzpmdW5jdGlvbihlKXtlLm11bHRpU2VsZWN0LnNwbGl0SW50b0xpbmVzKCl9LGJpbmRLZXk6e3dpbjpcIkN0cmwtQWx0LUxcIixtYWM6XCJDdHJsLUFsdC1MXCJ9LHJlYWRPbmx5OiEwfSx7bmFtZTpcImFsaWduQ3Vyc29yc1wiLGV4ZWM6ZnVuY3Rpb24oZSl7ZS5hbGlnbkN1cnNvcnMoKX0sYmluZEtleTp7d2luOlwiQ3RybC1BbHQtQVwiLG1hYzpcIkN0cmwtQWx0LUFcIn0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIn0se25hbWU6XCJmaW5kQWxsXCIsZXhlYzpmdW5jdGlvbihlKXtlLmZpbmRBbGwoKX0sYmluZEtleTp7d2luOlwiQ3RybC1BbHQtS1wiLG1hYzpcIkN0cmwtQWx0LUdcIn0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMH1dLHQubXVsdGlTZWxlY3RDb21tYW5kcz1be25hbWU6XCJzaW5nbGVTZWxlY3Rpb25cIixiaW5kS2V5OlwiZXNjXCIsZXhlYzpmdW5jdGlvbihlKXtlLmV4aXRNdWx0aVNlbGVjdE1vZGUoKX0sc2Nyb2xsSW50b1ZpZXc6XCJjdXJzb3JcIixyZWFkT25seTohMCxpc0F2YWlsYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5pbk11bHRpU2VsZWN0TW9kZX19XTt2YXIgcj1lKFwiLi4va2V5Ym9hcmQvaGFzaF9oYW5kbGVyXCIpLkhhc2hIYW5kbGVyO3Qua2V5Ym9hcmRIYW5kbGVyPW5ldyByKHQubXVsdGlTZWxlY3RDb21tYW5kcyl9KSxkZWZpbmUoXCJhY2UvbXVsdGlfc2VsZWN0XCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvcmFuZ2VfbGlzdFwiLFwiYWNlL3JhbmdlXCIsXCJhY2Uvc2VsZWN0aW9uXCIsXCJhY2UvbW91c2UvbXVsdGlfc2VsZWN0X2hhbmRsZXJcIixcImFjZS9saWIvZXZlbnRcIixcImFjZS9saWIvbGFuZ1wiLFwiYWNlL2NvbW1hbmRzL211bHRpX3NlbGVjdF9jb21tYW5kc1wiLFwiYWNlL3NlYXJjaFwiLFwiYWNlL2VkaXRfc2Vzc2lvblwiLFwiYWNlL2VkaXRvclwiLFwiYWNlL2NvbmZpZ1wiXSxmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gaChlLHQsbil7cmV0dXJuIGMuJG9wdGlvbnMud3JhcD0hMCxjLiRvcHRpb25zLm5lZWRsZT10LGMuJG9wdGlvbnMuYmFja3dhcmRzPW49PS0xLGMuZmluZChlKX1mdW5jdGlvbiB2KGUsdCl7cmV0dXJuIGUucm93PT10LnJvdyYmZS5jb2x1bW49PXQuY29sdW1ufWZ1bmN0aW9uIG0oZSl7aWYoZS4kbXVsdGlzZWxlY3RPblNlc3Npb25DaGFuZ2UpcmV0dXJuO2UuJG9uQWRkUmFuZ2U9ZS4kb25BZGRSYW5nZS5iaW5kKGUpLGUuJG9uUmVtb3ZlUmFuZ2U9ZS4kb25SZW1vdmVSYW5nZS5iaW5kKGUpLGUuJG9uTXVsdGlTZWxlY3Q9ZS4kb25NdWx0aVNlbGVjdC5iaW5kKGUpLGUuJG9uU2luZ2xlU2VsZWN0PWUuJG9uU2luZ2xlU2VsZWN0LmJpbmQoZSksZS4kbXVsdGlzZWxlY3RPblNlc3Npb25DaGFuZ2U9dC5vblNlc3Npb25DaGFuZ2UuYmluZChlKSxlLiRjaGVja011bHRpc2VsZWN0Q2hhbmdlPWUuJGNoZWNrTXVsdGlzZWxlY3RDaGFuZ2UuYmluZChlKSxlLiRtdWx0aXNlbGVjdE9uU2Vzc2lvbkNoYW5nZShlKSxlLm9uKFwiY2hhbmdlU2Vzc2lvblwiLGUuJG11bHRpc2VsZWN0T25TZXNzaW9uQ2hhbmdlKSxlLm9uKFwibW91c2Vkb3duXCIsbyksZS5jb21tYW5kcy5hZGRDb21tYW5kcyhmLmRlZmF1bHRDb21tYW5kcyksZyhlKX1mdW5jdGlvbiBnKGUpe2Z1bmN0aW9uIHIodCl7biYmKGUucmVuZGVyZXIuc2V0TW91c2VDdXJzb3IoXCJcIiksbj0hMSl9dmFyIHQ9ZS50ZXh0SW5wdXQuZ2V0RWxlbWVudCgpLG49ITE7dS5hZGRMaXN0ZW5lcih0LFwia2V5ZG93blwiLGZ1bmN0aW9uKHQpe3ZhciBpPXQua2V5Q29kZT09MTgmJiEodC5jdHJsS2V5fHx0LnNoaWZ0S2V5fHx0Lm1ldGFLZXkpO2UuJGJsb2NrU2VsZWN0RW5hYmxlZCYmaT9ufHwoZS5yZW5kZXJlci5zZXRNb3VzZUN1cnNvcihcImNyb3NzaGFpclwiKSxuPSEwKTpuJiZyKCl9KSx1LmFkZExpc3RlbmVyKHQsXCJrZXl1cFwiLHIpLHUuYWRkTGlzdGVuZXIodCxcImJsdXJcIixyKX12YXIgcj1lKFwiLi9yYW5nZV9saXN0XCIpLlJhbmdlTGlzdCxpPWUoXCIuL3JhbmdlXCIpLlJhbmdlLHM9ZShcIi4vc2VsZWN0aW9uXCIpLlNlbGVjdGlvbixvPWUoXCIuL21vdXNlL211bHRpX3NlbGVjdF9oYW5kbGVyXCIpLm9uTW91c2VEb3duLHU9ZShcIi4vbGliL2V2ZW50XCIpLGE9ZShcIi4vbGliL2xhbmdcIiksZj1lKFwiLi9jb21tYW5kcy9tdWx0aV9zZWxlY3RfY29tbWFuZHNcIik7dC5jb21tYW5kcz1mLmRlZmF1bHRDb21tYW5kcy5jb25jYXQoZi5tdWx0aVNlbGVjdENvbW1hbmRzKTt2YXIgbD1lKFwiLi9zZWFyY2hcIikuU2VhcmNoLGM9bmV3IGwscD1lKFwiLi9lZGl0X3Nlc3Npb25cIikuRWRpdFNlc3Npb247KGZ1bmN0aW9uKCl7dGhpcy5nZXRTZWxlY3Rpb25NYXJrZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHNlbGVjdGlvbk1hcmtlcnN9fSkuY2FsbChwLnByb3RvdHlwZSksZnVuY3Rpb24oKXt0aGlzLnJhbmdlcz1udWxsLHRoaXMucmFuZ2VMaXN0PW51bGwsdGhpcy5hZGRSYW5nZT1mdW5jdGlvbihlLHQpe2lmKCFlKXJldHVybjtpZighdGhpcy5pbk11bHRpU2VsZWN0TW9kZSYmdGhpcy5yYW5nZUNvdW50PT09MCl7dmFyIG49dGhpcy50b09yaWVudGVkUmFuZ2UoKTt0aGlzLnJhbmdlTGlzdC5hZGQobiksdGhpcy5yYW5nZUxpc3QuYWRkKGUpO2lmKHRoaXMucmFuZ2VMaXN0LnJhbmdlcy5sZW5ndGghPTIpcmV0dXJuIHRoaXMucmFuZ2VMaXN0LnJlbW92ZUFsbCgpLHR8fHRoaXMuZnJvbU9yaWVudGVkUmFuZ2UoZSk7dGhpcy5yYW5nZUxpc3QucmVtb3ZlQWxsKCksdGhpcy5yYW5nZUxpc3QuYWRkKG4pLHRoaXMuJG9uQWRkUmFuZ2Uobil9ZS5jdXJzb3J8fChlLmN1cnNvcj1lLmVuZCk7dmFyIHI9dGhpcy5yYW5nZUxpc3QuYWRkKGUpO3JldHVybiB0aGlzLiRvbkFkZFJhbmdlKGUpLHIubGVuZ3RoJiZ0aGlzLiRvblJlbW92ZVJhbmdlKHIpLHRoaXMucmFuZ2VDb3VudD4xJiYhdGhpcy5pbk11bHRpU2VsZWN0TW9kZSYmKHRoaXMuX3NpZ25hbChcIm11bHRpU2VsZWN0XCIpLHRoaXMuaW5NdWx0aVNlbGVjdE1vZGU9ITAsdGhpcy5zZXNzaW9uLiR1bmRvU2VsZWN0PSExLHRoaXMucmFuZ2VMaXN0LmF0dGFjaCh0aGlzLnNlc3Npb24pKSx0fHx0aGlzLmZyb21PcmllbnRlZFJhbmdlKGUpfSx0aGlzLnRvU2luZ2xlUmFuZ2U9ZnVuY3Rpb24oZSl7ZT1lfHx0aGlzLnJhbmdlc1swXTt2YXIgdD10aGlzLnJhbmdlTGlzdC5yZW1vdmVBbGwoKTt0Lmxlbmd0aCYmdGhpcy4kb25SZW1vdmVSYW5nZSh0KSxlJiZ0aGlzLmZyb21PcmllbnRlZFJhbmdlKGUpfSx0aGlzLnN1YnN0cmFjdFBvaW50PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucmFuZ2VMaXN0LnN1YnN0cmFjdFBvaW50KGUpO2lmKHQpcmV0dXJuIHRoaXMuJG9uUmVtb3ZlUmFuZ2UodCksdFswXX0sdGhpcy5tZXJnZU92ZXJsYXBwaW5nUmFuZ2VzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yYW5nZUxpc3QubWVyZ2UoKTtlLmxlbmd0aD90aGlzLiRvblJlbW92ZVJhbmdlKGUpOnRoaXMucmFuZ2VzWzBdJiZ0aGlzLmZyb21PcmllbnRlZFJhbmdlKHRoaXMucmFuZ2VzWzBdKX0sdGhpcy4kb25BZGRSYW5nZT1mdW5jdGlvbihlKXt0aGlzLnJhbmdlQ291bnQ9dGhpcy5yYW5nZUxpc3QucmFuZ2VzLmxlbmd0aCx0aGlzLnJhbmdlcy51bnNoaWZ0KGUpLHRoaXMuX3NpZ25hbChcImFkZFJhbmdlXCIse3JhbmdlOmV9KX0sdGhpcy4kb25SZW1vdmVSYW5nZT1mdW5jdGlvbihlKXt0aGlzLnJhbmdlQ291bnQ9dGhpcy5yYW5nZUxpc3QucmFuZ2VzLmxlbmd0aDtpZih0aGlzLnJhbmdlQ291bnQ9PTEmJnRoaXMuaW5NdWx0aVNlbGVjdE1vZGUpe3ZhciB0PXRoaXMucmFuZ2VMaXN0LnJhbmdlcy5wb3AoKTtlLnB1c2godCksdGhpcy5yYW5nZUNvdW50PTB9Zm9yKHZhciBuPWUubGVuZ3RoO24tLTspe3ZhciByPXRoaXMucmFuZ2VzLmluZGV4T2YoZVtuXSk7dGhpcy5yYW5nZXMuc3BsaWNlKHIsMSl9dGhpcy5fc2lnbmFsKFwicmVtb3ZlUmFuZ2VcIix7cmFuZ2VzOmV9KSx0aGlzLnJhbmdlQ291bnQ9PT0wJiZ0aGlzLmluTXVsdGlTZWxlY3RNb2RlJiYodGhpcy5pbk11bHRpU2VsZWN0TW9kZT0hMSx0aGlzLl9zaWduYWwoXCJzaW5nbGVTZWxlY3RcIiksdGhpcy5zZXNzaW9uLiR1bmRvU2VsZWN0PSEwLHRoaXMucmFuZ2VMaXN0LmRldGFjaCh0aGlzLnNlc3Npb24pKSx0PXR8fHRoaXMucmFuZ2VzWzBdLHQmJiF0LmlzRXF1YWwodGhpcy5nZXRSYW5nZSgpKSYmdGhpcy5mcm9tT3JpZW50ZWRSYW5nZSh0KX0sdGhpcy4kaW5pdFJhbmdlTGlzdD1mdW5jdGlvbigpe2lmKHRoaXMucmFuZ2VMaXN0KXJldHVybjt0aGlzLnJhbmdlTGlzdD1uZXcgcix0aGlzLnJhbmdlcz1bXSx0aGlzLnJhbmdlQ291bnQ9MH0sdGhpcy5nZXRBbGxSYW5nZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZUNvdW50P3RoaXMucmFuZ2VMaXN0LnJhbmdlcy5jb25jYXQoKTpbdGhpcy5nZXRSYW5nZSgpXX0sdGhpcy5zcGxpdEludG9MaW5lcz1mdW5jdGlvbigpe2lmKHRoaXMucmFuZ2VDb3VudD4xKXt2YXIgZT10aGlzLnJhbmdlTGlzdC5yYW5nZXMsdD1lW2UubGVuZ3RoLTFdLG49aS5mcm9tUG9pbnRzKGVbMF0uc3RhcnQsdC5lbmQpO3RoaXMudG9TaW5nbGVSYW5nZSgpLHRoaXMuc2V0U2VsZWN0aW9uUmFuZ2Uobix0LmN1cnNvcj09dC5zdGFydCl9ZWxzZXt2YXIgbj10aGlzLmdldFJhbmdlKCkscj10aGlzLmlzQmFja3dhcmRzKCkscz1uLnN0YXJ0LnJvdyxvPW4uZW5kLnJvdztpZihzPT1vKXtpZihyKXZhciB1PW4uZW5kLGE9bi5zdGFydDtlbHNlIHZhciB1PW4uc3RhcnQsYT1uLmVuZDt0aGlzLmFkZFJhbmdlKGkuZnJvbVBvaW50cyhhLGEpKSx0aGlzLmFkZFJhbmdlKGkuZnJvbVBvaW50cyh1LHUpKTtyZXR1cm59dmFyIGY9W10sbD10aGlzLmdldExpbmVSYW5nZShzLCEwKTtsLnN0YXJ0LmNvbHVtbj1uLnN0YXJ0LmNvbHVtbixmLnB1c2gobCk7Zm9yKHZhciBjPXMrMTtjPG87YysrKWYucHVzaCh0aGlzLmdldExpbmVSYW5nZShjLCEwKSk7bD10aGlzLmdldExpbmVSYW5nZShvLCEwKSxsLmVuZC5jb2x1bW49bi5lbmQuY29sdW1uLGYucHVzaChsKSxmLmZvckVhY2godGhpcy5hZGRSYW5nZSx0aGlzKX19LHRoaXMudG9nZ2xlQmxvY2tTZWxlY3Rpb249ZnVuY3Rpb24oKXtpZih0aGlzLnJhbmdlQ291bnQ+MSl7dmFyIGU9dGhpcy5yYW5nZUxpc3QucmFuZ2VzLHQ9ZVtlLmxlbmd0aC0xXSxuPWkuZnJvbVBvaW50cyhlWzBdLnN0YXJ0LHQuZW5kKTt0aGlzLnRvU2luZ2xlUmFuZ2UoKSx0aGlzLnNldFNlbGVjdGlvblJhbmdlKG4sdC5jdXJzb3I9PXQuc3RhcnQpfWVsc2V7dmFyIHI9dGhpcy5zZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbih0aGlzLnNlbGVjdGlvbkxlYWQpLHM9dGhpcy5zZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbih0aGlzLnNlbGVjdGlvbkFuY2hvciksbz10aGlzLnJlY3Rhbmd1bGFyUmFuZ2VCbG9jayhyLHMpO28uZm9yRWFjaCh0aGlzLmFkZFJhbmdlLHRoaXMpfX0sdGhpcy5yZWN0YW5ndWxhclJhbmdlQmxvY2s9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVtdLHM9ZS5jb2x1bW48dC5jb2x1bW47aWYocyl2YXIgbz1lLmNvbHVtbix1PXQuY29sdW1uO2Vsc2UgdmFyIG89dC5jb2x1bW4sdT1lLmNvbHVtbjt2YXIgYT1lLnJvdzx0LnJvdztpZihhKXZhciBmPWUucm93LGw9dC5yb3c7ZWxzZSB2YXIgZj10LnJvdyxsPWUucm93O288MCYmKG89MCksZjwwJiYoZj0wKSxmPT1sJiYobj0hMCk7Zm9yKHZhciBjPWY7Yzw9bDtjKyspe3ZhciBoPWkuZnJvbVBvaW50cyh0aGlzLnNlc3Npb24uc2NyZWVuVG9Eb2N1bWVudFBvc2l0aW9uKGMsbyksdGhpcy5zZXNzaW9uLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbihjLHUpKTtpZihoLmlzRW1wdHkoKSl7aWYocCYmdihoLmVuZCxwKSlicmVhazt2YXIgcD1oLmVuZH1oLmN1cnNvcj1zP2guc3RhcnQ6aC5lbmQsci5wdXNoKGgpfWEmJnIucmV2ZXJzZSgpO2lmKCFuKXt2YXIgZD1yLmxlbmd0aC0xO3doaWxlKHJbZF0uaXNFbXB0eSgpJiZkPjApZC0tO2lmKGQ+MCl7dmFyIG09MDt3aGlsZShyW21dLmlzRW1wdHkoKSltKyt9Zm9yKHZhciBnPWQ7Zz49bTtnLS0pcltnXS5pc0VtcHR5KCkmJnIuc3BsaWNlKGcsMSl9cmV0dXJuIHJ9fS5jYWxsKHMucHJvdG90eXBlKTt2YXIgZD1lKFwiLi9lZGl0b3JcIikuRWRpdG9yOyhmdW5jdGlvbigpe3RoaXMudXBkYXRlU2VsZWN0aW9uTWFya2Vycz1mdW5jdGlvbigpe3RoaXMucmVuZGVyZXIudXBkYXRlQ3Vyc29yKCksdGhpcy5yZW5kZXJlci51cGRhdGVCYWNrTWFya2VycygpfSx0aGlzLmFkZFNlbGVjdGlvbk1hcmtlcj1mdW5jdGlvbihlKXtlLmN1cnNvcnx8KGUuY3Vyc29yPWUuZW5kKTt2YXIgdD10aGlzLmdldFNlbGVjdGlvblN0eWxlKCk7cmV0dXJuIGUubWFya2VyPXRoaXMuc2Vzc2lvbi5hZGRNYXJrZXIoZSxcImFjZV9zZWxlY3Rpb25cIix0KSx0aGlzLnNlc3Npb24uJHNlbGVjdGlvbk1hcmtlcnMucHVzaChlKSx0aGlzLnNlc3Npb24uc2VsZWN0aW9uTWFya2VyQ291bnQ9dGhpcy5zZXNzaW9uLiRzZWxlY3Rpb25NYXJrZXJzLmxlbmd0aCxlfSx0aGlzLnJlbW92ZVNlbGVjdGlvbk1hcmtlcj1mdW5jdGlvbihlKXtpZighZS5tYXJrZXIpcmV0dXJuO3RoaXMuc2Vzc2lvbi5yZW1vdmVNYXJrZXIoZS5tYXJrZXIpO3ZhciB0PXRoaXMuc2Vzc2lvbi4kc2VsZWN0aW9uTWFya2Vycy5pbmRleE9mKGUpO3QhPS0xJiZ0aGlzLnNlc3Npb24uJHNlbGVjdGlvbk1hcmtlcnMuc3BsaWNlKHQsMSksdGhpcy5zZXNzaW9uLnNlbGVjdGlvbk1hcmtlckNvdW50PXRoaXMuc2Vzc2lvbi4kc2VsZWN0aW9uTWFya2Vycy5sZW5ndGh9LHRoaXMucmVtb3ZlU2VsZWN0aW9uTWFya2Vycz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlc3Npb24uJHNlbGVjdGlvbk1hcmtlcnM7Zm9yKHZhciBuPWUubGVuZ3RoO24tLTspe3ZhciByPWVbbl07aWYoIXIubWFya2VyKWNvbnRpbnVlO3RoaXMuc2Vzc2lvbi5yZW1vdmVNYXJrZXIoci5tYXJrZXIpO3ZhciBpPXQuaW5kZXhPZihyKTtpIT0tMSYmdC5zcGxpY2UoaSwxKX10aGlzLnNlc3Npb24uc2VsZWN0aW9uTWFya2VyQ291bnQ9dC5sZW5ndGh9LHRoaXMuJG9uQWRkUmFuZ2U9ZnVuY3Rpb24oZSl7dGhpcy5hZGRTZWxlY3Rpb25NYXJrZXIoZS5yYW5nZSksdGhpcy5yZW5kZXJlci51cGRhdGVDdXJzb3IoKSx0aGlzLnJlbmRlcmVyLnVwZGF0ZUJhY2tNYXJrZXJzKCl9LHRoaXMuJG9uUmVtb3ZlUmFuZ2U9ZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmVTZWxlY3Rpb25NYXJrZXJzKGUucmFuZ2VzKSx0aGlzLnJlbmRlcmVyLnVwZGF0ZUN1cnNvcigpLHRoaXMucmVuZGVyZXIudXBkYXRlQmFja01hcmtlcnMoKX0sdGhpcy4kb25NdWx0aVNlbGVjdD1mdW5jdGlvbihlKXtpZih0aGlzLmluTXVsdGlTZWxlY3RNb2RlKXJldHVybjt0aGlzLmluTXVsdGlTZWxlY3RNb2RlPSEwLHRoaXMuc2V0U3R5bGUoXCJhY2VfbXVsdGlzZWxlY3RcIiksdGhpcy5rZXlCaW5kaW5nLmFkZEtleWJvYXJkSGFuZGxlcihmLmtleWJvYXJkSGFuZGxlciksdGhpcy5jb21tYW5kcy5zZXREZWZhdWx0SGFuZGxlcihcImV4ZWNcIix0aGlzLiRvbk11bHRpU2VsZWN0RXhlYyksdGhpcy5yZW5kZXJlci51cGRhdGVDdXJzb3IoKSx0aGlzLnJlbmRlcmVyLnVwZGF0ZUJhY2tNYXJrZXJzKCl9LHRoaXMuJG9uU2luZ2xlU2VsZWN0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuc2Vzc2lvbi5tdWx0aVNlbGVjdC5pblZpcnR1YWxNb2RlKXJldHVybjt0aGlzLmluTXVsdGlTZWxlY3RNb2RlPSExLHRoaXMudW5zZXRTdHlsZShcImFjZV9tdWx0aXNlbGVjdFwiKSx0aGlzLmtleUJpbmRpbmcucmVtb3ZlS2V5Ym9hcmRIYW5kbGVyKGYua2V5Ym9hcmRIYW5kbGVyKSx0aGlzLmNvbW1hbmRzLnJlbW92ZURlZmF1bHRIYW5kbGVyKFwiZXhlY1wiLHRoaXMuJG9uTXVsdGlTZWxlY3RFeGVjKSx0aGlzLnJlbmRlcmVyLnVwZGF0ZUN1cnNvcigpLHRoaXMucmVuZGVyZXIudXBkYXRlQmFja01hcmtlcnMoKSx0aGlzLl9lbWl0KFwiY2hhbmdlU2VsZWN0aW9uXCIpfSx0aGlzLiRvbk11bHRpU2VsZWN0RXhlYz1mdW5jdGlvbihlKXt2YXIgdD1lLmNvbW1hbmQsbj1lLmVkaXRvcjtpZighbi5tdWx0aVNlbGVjdClyZXR1cm47aWYoIXQubXVsdGlTZWxlY3RBY3Rpb24pe3ZhciByPXQuZXhlYyhuLGUuYXJnc3x8e30pO24ubXVsdGlTZWxlY3QuYWRkUmFuZ2Uobi5tdWx0aVNlbGVjdC50b09yaWVudGVkUmFuZ2UoKSksbi5tdWx0aVNlbGVjdC5tZXJnZU92ZXJsYXBwaW5nUmFuZ2VzKCl9ZWxzZSB0Lm11bHRpU2VsZWN0QWN0aW9uPT1cImZvckVhY2hcIj9yPW4uZm9yRWFjaFNlbGVjdGlvbih0LGUuYXJncyk6dC5tdWx0aVNlbGVjdEFjdGlvbj09XCJmb3JFYWNoTGluZVwiP3I9bi5mb3JFYWNoU2VsZWN0aW9uKHQsZS5hcmdzLCEwKTp0Lm11bHRpU2VsZWN0QWN0aW9uPT1cInNpbmdsZVwiPyhuLmV4aXRNdWx0aVNlbGVjdE1vZGUoKSxyPXQuZXhlYyhuLGUuYXJnc3x8e30pKTpyPXQubXVsdGlTZWxlY3RBY3Rpb24obixlLmFyZ3N8fHt9KTtyZXR1cm4gcn0sdGhpcy5mb3JFYWNoU2VsZWN0aW9uPWZ1bmN0aW9uKGUsdCxuKXtpZih0aGlzLmluVmlydHVhbFNlbGVjdGlvbk1vZGUpcmV0dXJuO3ZhciByPW4mJm4ua2VlcE9yZGVyLGk9bj09MXx8biYmbi4kYnlMaW5lcyxvPXRoaXMuc2Vzc2lvbix1PXRoaXMuc2VsZWN0aW9uLGE9dS5yYW5nZUxpc3QsZj0ocj91OmEpLnJhbmdlcyxsO2lmKCFmLmxlbmd0aClyZXR1cm4gZS5leGVjP2UuZXhlYyh0aGlzLHR8fHt9KTplKHRoaXMsdHx8e30pO3ZhciBjPXUuX2V2ZW50UmVnaXN0cnk7dS5fZXZlbnRSZWdpc3RyeT17fTt2YXIgaD1uZXcgcyhvKTt0aGlzLmluVmlydHVhbFNlbGVjdGlvbk1vZGU9ITA7Zm9yKHZhciBwPWYubGVuZ3RoO3AtLTspe2lmKGkpd2hpbGUocD4wJiZmW3BdLnN0YXJ0LnJvdz09ZltwLTFdLmVuZC5yb3cpcC0tO2guZnJvbU9yaWVudGVkUmFuZ2UoZltwXSksaC5pbmRleD1wLHRoaXMuc2VsZWN0aW9uPW8uc2VsZWN0aW9uPWg7dmFyIGQ9ZS5leGVjP2UuZXhlYyh0aGlzLHR8fHt9KTplKHRoaXMsdHx8e30pOyFsJiZkIT09dW5kZWZpbmVkJiYobD1kKSxoLnRvT3JpZW50ZWRSYW5nZShmW3BdKX1oLmRldGFjaCgpLHRoaXMuc2VsZWN0aW9uPW8uc2VsZWN0aW9uPXUsdGhpcy5pblZpcnR1YWxTZWxlY3Rpb25Nb2RlPSExLHUuX2V2ZW50UmVnaXN0cnk9Yyx1Lm1lcmdlT3ZlcmxhcHBpbmdSYW5nZXMoKTt2YXIgdj10aGlzLnJlbmRlcmVyLiRzY3JvbGxBbmltYXRpb247cmV0dXJuIHRoaXMub25DdXJzb3JDaGFuZ2UoKSx0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKCksdiYmdi5mcm9tPT12LnRvJiZ0aGlzLnJlbmRlcmVyLmFuaW1hdGVTY3JvbGxpbmcodi5mcm9tKSxsfSx0aGlzLmV4aXRNdWx0aVNlbGVjdE1vZGU9ZnVuY3Rpb24oKXtpZighdGhpcy5pbk11bHRpU2VsZWN0TW9kZXx8dGhpcy5pblZpcnR1YWxTZWxlY3Rpb25Nb2RlKXJldHVybjt0aGlzLm11bHRpU2VsZWN0LnRvU2luZ2xlUmFuZ2UoKX0sdGhpcy5nZXRTZWxlY3RlZFRleHQ9ZnVuY3Rpb24oKXt2YXIgZT1cIlwiO2lmKHRoaXMuaW5NdWx0aVNlbGVjdE1vZGUmJiF0aGlzLmluVmlydHVhbFNlbGVjdGlvbk1vZGUpe3ZhciB0PXRoaXMubXVsdGlTZWxlY3QucmFuZ2VMaXN0LnJhbmdlcyxuPVtdO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKW4ucHVzaCh0aGlzLnNlc3Npb24uZ2V0VGV4dFJhbmdlKHRbcl0pKTt2YXIgaT10aGlzLnNlc3Npb24uZ2V0RG9jdW1lbnQoKS5nZXROZXdMaW5lQ2hhcmFjdGVyKCk7ZT1uLmpvaW4oaSksZS5sZW5ndGg9PShuLmxlbmd0aC0xKSppLmxlbmd0aCYmKGU9XCJcIil9ZWxzZSB0aGlzLnNlbGVjdGlvbi5pc0VtcHR5KCl8fChlPXRoaXMuc2Vzc2lvbi5nZXRUZXh0UmFuZ2UodGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpKSk7cmV0dXJuIGV9LHRoaXMuJGNoZWNrTXVsdGlzZWxlY3RDaGFuZ2U9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLmluTXVsdGlTZWxlY3RNb2RlJiYhdGhpcy5pblZpcnR1YWxTZWxlY3Rpb25Nb2RlKXt2YXIgbj10aGlzLm11bHRpU2VsZWN0LnJhbmdlc1swXTtpZih0aGlzLm11bHRpU2VsZWN0LmlzRW1wdHkoKSYmdD09dGhpcy5tdWx0aVNlbGVjdC5hbmNob3IpcmV0dXJuO3ZhciByPXQ9PXRoaXMubXVsdGlTZWxlY3QuYW5jaG9yP24uY3Vyc29yPT1uLnN0YXJ0P24uZW5kOm4uc3RhcnQ6bi5jdXJzb3I7KHIucm93IT10LnJvd3x8dGhpcy5zZXNzaW9uLiRjbGlwUG9zaXRpb25Ub0RvY3VtZW50KHIucm93LHIuY29sdW1uKS5jb2x1bW4hPXQuY29sdW1uKSYmdGhpcy5tdWx0aVNlbGVjdC50b1NpbmdsZVJhbmdlKHRoaXMubXVsdGlTZWxlY3QudG9PcmllbnRlZFJhbmdlKCkpfX0sdGhpcy5maW5kQWxsPWZ1bmN0aW9uKGUsdCxuKXt0PXR8fHt9LHQubmVlZGxlPWV8fHQubmVlZGxlO2lmKHQubmVlZGxlPT11bmRlZmluZWQpe3ZhciByPXRoaXMuc2VsZWN0aW9uLmlzRW1wdHkoKT90aGlzLnNlbGVjdGlvbi5nZXRXb3JkUmFuZ2UoKTp0aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO3QubmVlZGxlPXRoaXMuc2Vzc2lvbi5nZXRUZXh0UmFuZ2Uocil9dGhpcy4kc2VhcmNoLnNldCh0KTt2YXIgaT10aGlzLiRzZWFyY2guZmluZEFsbCh0aGlzLnNlc3Npb24pO2lmKCFpLmxlbmd0aClyZXR1cm4gMDt0aGlzLiRibG9ja1Njcm9sbGluZys9MTt2YXIgcz10aGlzLm11bHRpU2VsZWN0O258fHMudG9TaW5nbGVSYW5nZShpWzBdKTtmb3IodmFyIG89aS5sZW5ndGg7by0tOylzLmFkZFJhbmdlKGlbb10sITApO3JldHVybiByJiZzLnJhbmdlTGlzdC5yYW5nZUF0UG9pbnQoci5zdGFydCkmJnMuYWRkUmFuZ2UociwhMCksdGhpcy4kYmxvY2tTY3JvbGxpbmctPTEsaS5sZW5ndGh9LHRoaXMuc2VsZWN0TW9yZUxpbmVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5zZWxlY3Rpb24udG9PcmllbnRlZFJhbmdlKCkscj1uLmN1cnNvcj09bi5lbmQscz10aGlzLnNlc3Npb24uZG9jdW1lbnRUb1NjcmVlblBvc2l0aW9uKG4uY3Vyc29yKTt0aGlzLnNlbGVjdGlvbi4kZGVzaXJlZENvbHVtbiYmKHMuY29sdW1uPXRoaXMuc2VsZWN0aW9uLiRkZXNpcmVkQ29sdW1uKTt2YXIgbz10aGlzLnNlc3Npb24uc2NyZWVuVG9Eb2N1bWVudFBvc2l0aW9uKHMucm93K2Uscy5jb2x1bW4pO2lmKCFuLmlzRW1wdHkoKSl2YXIgdT10aGlzLnNlc3Npb24uZG9jdW1lbnRUb1NjcmVlblBvc2l0aW9uKHI/bi5lbmQ6bi5zdGFydCksYT10aGlzLnNlc3Npb24uc2NyZWVuVG9Eb2N1bWVudFBvc2l0aW9uKHUucm93K2UsdS5jb2x1bW4pO2Vsc2UgdmFyIGE9bztpZihyKXt2YXIgZj1pLmZyb21Qb2ludHMobyxhKTtmLmN1cnNvcj1mLnN0YXJ0fWVsc2V7dmFyIGY9aS5mcm9tUG9pbnRzKGEsbyk7Zi5jdXJzb3I9Zi5lbmR9Zi5kZXNpcmVkQ29sdW1uPXMuY29sdW1uO2lmKCF0aGlzLnNlbGVjdGlvbi5pbk11bHRpU2VsZWN0TW9kZSl0aGlzLnNlbGVjdGlvbi5hZGRSYW5nZShuKTtlbHNlIGlmKHQpdmFyIGw9bi5jdXJzb3I7dGhpcy5zZWxlY3Rpb24uYWRkUmFuZ2UoZiksbCYmdGhpcy5zZWxlY3Rpb24uc3Vic3RyYWN0UG9pbnQobCl9LHRoaXMudHJhbnNwb3NlU2VsZWN0aW9ucz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnNlc3Npb24sbj10Lm11bHRpU2VsZWN0LHI9bi5yYW5nZXM7Zm9yKHZhciBpPXIubGVuZ3RoO2ktLTspe3ZhciBzPXJbaV07aWYocy5pc0VtcHR5KCkpe3ZhciBvPXQuZ2V0V29yZFJhbmdlKHMuc3RhcnQucm93LHMuc3RhcnQuY29sdW1uKTtzLnN0YXJ0LnJvdz1vLnN0YXJ0LnJvdyxzLnN0YXJ0LmNvbHVtbj1vLnN0YXJ0LmNvbHVtbixzLmVuZC5yb3c9by5lbmQucm93LHMuZW5kLmNvbHVtbj1vLmVuZC5jb2x1bW59fW4ubWVyZ2VPdmVybGFwcGluZ1JhbmdlcygpO3ZhciB1PVtdO2Zvcih2YXIgaT1yLmxlbmd0aDtpLS07KXt2YXIgcz1yW2ldO3UudW5zaGlmdCh0LmdldFRleHRSYW5nZShzKSl9ZTwwP3UudW5zaGlmdCh1LnBvcCgpKTp1LnB1c2godS5zaGlmdCgpKTtmb3IodmFyIGk9ci5sZW5ndGg7aS0tOyl7dmFyIHM9cltpXSxvPXMuY2xvbmUoKTt0LnJlcGxhY2Uocyx1W2ldKSxzLnN0YXJ0LnJvdz1vLnN0YXJ0LnJvdyxzLnN0YXJ0LmNvbHVtbj1vLnN0YXJ0LmNvbHVtbn19LHRoaXMuc2VsZWN0TW9yZT1mdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcy5zZXNzaW9uLGk9ci5tdWx0aVNlbGVjdCxzPWkudG9PcmllbnRlZFJhbmdlKCk7aWYocy5pc0VtcHR5KCkpe3M9ci5nZXRXb3JkUmFuZ2Uocy5zdGFydC5yb3cscy5zdGFydC5jb2x1bW4pLHMuY3Vyc29yPWU9PS0xP3Muc3RhcnQ6cy5lbmQsdGhpcy5tdWx0aVNlbGVjdC5hZGRSYW5nZShzKTtpZihuKXJldHVybn12YXIgbz1yLmdldFRleHRSYW5nZShzKSx1PWgocixvLGUpO3UmJih1LmN1cnNvcj1lPT0tMT91LnN0YXJ0OnUuZW5kLHRoaXMuJGJsb2NrU2Nyb2xsaW5nKz0xLHRoaXMuc2Vzc2lvbi51bmZvbGQodSksdGhpcy5tdWx0aVNlbGVjdC5hZGRSYW5nZSh1KSx0aGlzLiRibG9ja1Njcm9sbGluZy09MSx0aGlzLnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KG51bGwsLjUpKSx0JiZ0aGlzLm11bHRpU2VsZWN0LnN1YnN0cmFjdFBvaW50KHMuY3Vyc29yKX0sdGhpcy5hbGlnbkN1cnNvcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNlc3Npb24sdD1lLm11bHRpU2VsZWN0LG49dC5yYW5nZXMscj0tMSxzPW4uZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKGUuY3Vyc29yLnJvdz09cilyZXR1cm4hMDtyPWUuY3Vyc29yLnJvd30pO2lmKCFuLmxlbmd0aHx8cy5sZW5ndGg9PW4ubGVuZ3RoLTEpe3ZhciBvPXRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCksdT1vLnN0YXJ0LnJvdyxmPW8uZW5kLnJvdyxsPXU9PWY7aWYobCl7dmFyIGM9dGhpcy5zZXNzaW9uLmdldExlbmd0aCgpLGg7ZG8gaD10aGlzLnNlc3Npb24uZ2V0TGluZShmKTt3aGlsZSgvWz06XS8udGVzdChoKSYmKytmPGMpO2RvIGg9dGhpcy5zZXNzaW9uLmdldExpbmUodSk7d2hpbGUoL1s9Ol0vLnRlc3QoaCkmJi0tdT4wKTt1PDAmJih1PTApLGY+PWMmJihmPWMtMSl9dmFyIHA9dGhpcy5zZXNzaW9uLnJlbW92ZUZ1bGxMaW5lcyh1LGYpO3A9dGhpcy4kcmVBbGlnblRleHQocCxsKSx0aGlzLnNlc3Npb24uaW5zZXJ0KHtyb3c6dSxjb2x1bW46MH0scC5qb2luKFwiXFxuXCIpK1wiXFxuXCIpLGx8fChvLnN0YXJ0LmNvbHVtbj0wLG8uZW5kLmNvbHVtbj1wW3AubGVuZ3RoLTFdLmxlbmd0aCksdGhpcy5zZWxlY3Rpb24uc2V0UmFuZ2Uobyl9ZWxzZXtzLmZvckVhY2goZnVuY3Rpb24oZSl7dC5zdWJzdHJhY3RQb2ludChlLmN1cnNvcil9KTt2YXIgZD0wLHY9SW5maW5pdHksbT1uLm1hcChmdW5jdGlvbih0KXt2YXIgbj10LmN1cnNvcixyPWUuZ2V0TGluZShuLnJvdyksaT1yLnN1YnN0cihuLmNvbHVtbikuc2VhcmNoKC9cXFMvZyk7cmV0dXJuIGk9PS0xJiYoaT0wKSxuLmNvbHVtbj5kJiYoZD1uLmNvbHVtbiksaTx2JiYodj1pKSxpfSk7bi5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7dmFyIHI9dC5jdXJzb3Iscz1kLXIuY29sdW1uLG89bVtuXS12O3M+bz9lLmluc2VydChyLGEuc3RyaW5nUmVwZWF0KFwiIFwiLHMtbykpOmUucmVtb3ZlKG5ldyBpKHIucm93LHIuY29sdW1uLHIucm93LHIuY29sdW1uLXMrbykpLHQuc3RhcnQuY29sdW1uPXQuZW5kLmNvbHVtbj1kLHQuc3RhcnQucm93PXQuZW5kLnJvdz1yLnJvdyx0LmN1cnNvcj10LmVuZH0pLHQuZnJvbU9yaWVudGVkUmFuZ2UoblswXSksdGhpcy5yZW5kZXJlci51cGRhdGVDdXJzb3IoKSx0aGlzLnJlbmRlcmVyLnVwZGF0ZUJhY2tNYXJrZXJzKCl9fSx0aGlzLiRyZUFsaWduVGV4dD1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHUoZSl7cmV0dXJuIGEuc3RyaW5nUmVwZWF0KFwiIFwiLGUpfWZ1bmN0aW9uIGYoZSl7cmV0dXJuIGVbMl0/dShpKStlWzJdK3Uocy1lWzJdLmxlbmd0aCtvKStlWzRdLnJlcGxhY2UoL14oWz06XSlcXHMrLyxcIiQxIFwiKTplWzBdfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGVbMl0/dShpK3MtZVsyXS5sZW5ndGgpK2VbMl0rdShvLFwiIFwiKStlWzRdLnJlcGxhY2UoL14oWz06XSlcXHMrLyxcIiQxIFwiKTplWzBdfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGVbMl0/dShpKStlWzJdK3UobykrZVs0XS5yZXBsYWNlKC9eKFs9Ol0pXFxzKy8sXCIkMSBcIik6ZVswXX12YXIgbj0hMCxyPSEwLGkscyxvO3JldHVybiBlLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKC8oXFxzKikoLio/KShcXHMqKShbPTpdLiopLyk7cmV0dXJuIHQ/aT09bnVsbD8oaT10WzFdLmxlbmd0aCxzPXRbMl0ubGVuZ3RoLG89dFszXS5sZW5ndGgsdCk6KGkrcytvIT10WzFdLmxlbmd0aCt0WzJdLmxlbmd0aCt0WzNdLmxlbmd0aCYmKHI9ITEpLGkhPXRbMV0ubGVuZ3RoJiYobj0hMSksaT50WzFdLmxlbmd0aCYmKGk9dFsxXS5sZW5ndGgpLHM8dFsyXS5sZW5ndGgmJihzPXRbMl0ubGVuZ3RoKSxvPnRbM10ubGVuZ3RoJiYobz10WzNdLmxlbmd0aCksdCk6W2VdfSkubWFwKHQ/ZjpuP3I/bDpmOmMpfX0pLmNhbGwoZC5wcm90b3R5cGUpLHQub25TZXNzaW9uQ2hhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc2Vzc2lvbjt0JiYhdC5tdWx0aVNlbGVjdCYmKHQuJHNlbGVjdGlvbk1hcmtlcnM9W10sdC5zZWxlY3Rpb24uJGluaXRSYW5nZUxpc3QoKSx0Lm11bHRpU2VsZWN0PXQuc2VsZWN0aW9uKSx0aGlzLm11bHRpU2VsZWN0PXQmJnQubXVsdGlTZWxlY3Q7dmFyIG49ZS5vbGRTZXNzaW9uO24mJihuLm11bHRpU2VsZWN0Lm9mZihcImFkZFJhbmdlXCIsdGhpcy4kb25BZGRSYW5nZSksbi5tdWx0aVNlbGVjdC5vZmYoXCJyZW1vdmVSYW5nZVwiLHRoaXMuJG9uUmVtb3ZlUmFuZ2UpLG4ubXVsdGlTZWxlY3Qub2ZmKFwibXVsdGlTZWxlY3RcIix0aGlzLiRvbk11bHRpU2VsZWN0KSxuLm11bHRpU2VsZWN0Lm9mZihcInNpbmdsZVNlbGVjdFwiLHRoaXMuJG9uU2luZ2xlU2VsZWN0KSxuLm11bHRpU2VsZWN0LmxlYWQub2ZmKFwiY2hhbmdlXCIsdGhpcy4kY2hlY2tNdWx0aXNlbGVjdENoYW5nZSksbi5tdWx0aVNlbGVjdC5hbmNob3Iub2ZmKFwiY2hhbmdlXCIsdGhpcy4kY2hlY2tNdWx0aXNlbGVjdENoYW5nZSkpLHQmJih0Lm11bHRpU2VsZWN0Lm9uKFwiYWRkUmFuZ2VcIix0aGlzLiRvbkFkZFJhbmdlKSx0Lm11bHRpU2VsZWN0Lm9uKFwicmVtb3ZlUmFuZ2VcIix0aGlzLiRvblJlbW92ZVJhbmdlKSx0Lm11bHRpU2VsZWN0Lm9uKFwibXVsdGlTZWxlY3RcIix0aGlzLiRvbk11bHRpU2VsZWN0KSx0Lm11bHRpU2VsZWN0Lm9uKFwic2luZ2xlU2VsZWN0XCIsdGhpcy4kb25TaW5nbGVTZWxlY3QpLHQubXVsdGlTZWxlY3QubGVhZC5vbihcImNoYW5nZVwiLHRoaXMuJGNoZWNrTXVsdGlzZWxlY3RDaGFuZ2UpLHQubXVsdGlTZWxlY3QuYW5jaG9yLm9uKFwiY2hhbmdlXCIsdGhpcy4kY2hlY2tNdWx0aXNlbGVjdENoYW5nZSkpLHQmJnRoaXMuaW5NdWx0aVNlbGVjdE1vZGUhPXQuc2VsZWN0aW9uLmluTXVsdGlTZWxlY3RNb2RlJiYodC5zZWxlY3Rpb24uaW5NdWx0aVNlbGVjdE1vZGU/dGhpcy4kb25NdWx0aVNlbGVjdCgpOnRoaXMuJG9uU2luZ2xlU2VsZWN0KCkpfSx0Lk11bHRpU2VsZWN0PW0sZShcIi4vY29uZmlnXCIpLmRlZmluZU9wdGlvbnMoZC5wcm90b3R5cGUsXCJlZGl0b3JcIix7ZW5hYmxlTXVsdGlzZWxlY3Q6e3NldDpmdW5jdGlvbihlKXttKHRoaXMpLGU/KHRoaXMub24oXCJjaGFuZ2VTZXNzaW9uXCIsdGhpcy4kbXVsdGlzZWxlY3RPblNlc3Npb25DaGFuZ2UpLHRoaXMub24oXCJtb3VzZWRvd25cIixvKSk6KHRoaXMub2ZmKFwiY2hhbmdlU2Vzc2lvblwiLHRoaXMuJG11bHRpc2VsZWN0T25TZXNzaW9uQ2hhbmdlKSx0aGlzLm9mZihcIm1vdXNlZG93blwiLG8pKX0sdmFsdWU6ITB9LGVuYWJsZUJsb2NrU2VsZWN0OntzZXQ6ZnVuY3Rpb24oZSl7dGhpcy4kYmxvY2tTZWxlY3RFbmFibGVkPWV9LHZhbHVlOiEwfX0pfSksZGVmaW5lKFwiYWNlL21vZGUvZm9sZGluZy9mb2xkX21vZGVcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9yYW5nZVwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZShcIi4uLy4uL3JhbmdlXCIpLlJhbmdlLGk9dC5Gb2xkTW9kZT1mdW5jdGlvbigpe307KGZ1bmN0aW9uKCl7dGhpcy5mb2xkaW5nU3RhcnRNYXJrZXI9bnVsbCx0aGlzLmZvbGRpbmdTdG9wTWFya2VyPW51bGwsdGhpcy5nZXRGb2xkV2lkZ2V0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmdldExpbmUobik7cmV0dXJuIHRoaXMuZm9sZGluZ1N0YXJ0TWFya2VyLnRlc3Qocik/XCJzdGFydFwiOnQ9PVwibWFya2JlZ2luZW5kXCImJnRoaXMuZm9sZGluZ1N0b3BNYXJrZXImJnRoaXMuZm9sZGluZ1N0b3BNYXJrZXIudGVzdChyKT9cImVuZFwiOlwiXCJ9LHRoaXMuZ2V0Rm9sZFdpZGdldFJhbmdlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbH0sdGhpcy5pbmRlbnRhdGlvbkJsb2NrPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT0vXFxTLyxzPWUuZ2V0TGluZSh0KSxvPXMuc2VhcmNoKGkpO2lmKG89PS0xKXJldHVybjt2YXIgdT1ufHxzLmxlbmd0aCxhPWUuZ2V0TGVuZ3RoKCksZj10LGw9dDt3aGlsZSgrK3Q8YSl7dmFyIGM9ZS5nZXRMaW5lKHQpLnNlYXJjaChpKTtpZihjPT0tMSljb250aW51ZTtpZihjPD1vKWJyZWFrO2w9dH1pZihsPmYpe3ZhciBoPWUuZ2V0TGluZShsKS5sZW5ndGg7cmV0dXJuIG5ldyByKGYsdSxsLGgpfX0sdGhpcy5vcGVuaW5nQnJhY2tldEJsb2NrPWZ1bmN0aW9uKGUsdCxuLGkscyl7dmFyIG89e3JvdzpuLGNvbHVtbjppKzF9LHU9ZS4kZmluZENsb3NpbmdCcmFja2V0KHQsbyxzKTtpZighdSlyZXR1cm47dmFyIGE9ZS5mb2xkV2lkZ2V0c1t1LnJvd107cmV0dXJuIGE9PW51bGwmJihhPWUuZ2V0Rm9sZFdpZGdldCh1LnJvdykpLGE9PVwic3RhcnRcIiYmdS5yb3c+by5yb3cmJih1LnJvdy0tLHUuY29sdW1uPWUuZ2V0TGluZSh1LnJvdykubGVuZ3RoKSxyLmZyb21Qb2ludHMobyx1KX0sdGhpcy5jbG9zaW5nQnJhY2tldEJsb2NrPWZ1bmN0aW9uKGUsdCxuLGkscyl7dmFyIG89e3JvdzpuLGNvbHVtbjppfSx1PWUuJGZpbmRPcGVuaW5nQnJhY2tldCh0LG8pO2lmKCF1KXJldHVybjtyZXR1cm4gdS5jb2x1bW4rKyxvLmNvbHVtbi0tLHIuZnJvbVBvaW50cyh1LG8pfX0pLmNhbGwoaS5wcm90b3R5cGUpfSksZGVmaW5lKFwiYWNlL3RoZW1lL3RleHRtYXRlXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvbGliL2RvbVwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dC5pc0Rhcms9ITEsdC5jc3NDbGFzcz1cImFjZS10bVwiLHQuY3NzVGV4dD0nLmFjZS10bSAuYWNlX2d1dHRlciB7YmFja2dyb3VuZDogI2YwZjBmMDtjb2xvcjogIzMzMzt9LmFjZS10bSAuYWNlX3ByaW50LW1hcmdpbiB7d2lkdGg6IDFweDtiYWNrZ3JvdW5kOiAjZThlOGU4O30uYWNlLXRtIC5hY2VfZm9sZCB7YmFja2dyb3VuZC1jb2xvcjogIzZCNzJFNjt9LmFjZS10bSB7YmFja2dyb3VuZC1jb2xvcjogI0ZGRkZGRjtjb2xvcjogYmxhY2s7fS5hY2UtdG0gLmFjZV9jdXJzb3Ige2NvbG9yOiBibGFjazt9LmFjZS10bSAuYWNlX2ludmlzaWJsZSB7Y29sb3I6IHJnYigxOTEsIDE5MSwgMTkxKTt9LmFjZS10bSAuYWNlX3N0b3JhZ2UsLmFjZS10bSAuYWNlX2tleXdvcmQge2NvbG9yOiBibHVlO30uYWNlLXRtIC5hY2VfY29uc3RhbnQge2NvbG9yOiByZ2IoMTk3LCA2LCAxMSk7fS5hY2UtdG0gLmFjZV9jb25zdGFudC5hY2VfYnVpbGRpbiB7Y29sb3I6IHJnYig4OCwgNzIsIDI0Nik7fS5hY2UtdG0gLmFjZV9jb25zdGFudC5hY2VfbGFuZ3VhZ2Uge2NvbG9yOiByZ2IoODgsIDkyLCAyNDYpO30uYWNlLXRtIC5hY2VfY29uc3RhbnQuYWNlX2xpYnJhcnkge2NvbG9yOiByZ2IoNiwgMTUwLCAxNCk7fS5hY2UtdG0gLmFjZV9pbnZhbGlkIHtiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMCwgMCwgMC4xKTtjb2xvcjogcmVkO30uYWNlLXRtIC5hY2Vfc3VwcG9ydC5hY2VfZnVuY3Rpb24ge2NvbG9yOiByZ2IoNjAsIDc2LCAxMTQpO30uYWNlLXRtIC5hY2Vfc3VwcG9ydC5hY2VfY29uc3RhbnQge2NvbG9yOiByZ2IoNiwgMTUwLCAxNCk7fS5hY2UtdG0gLmFjZV9zdXBwb3J0LmFjZV90eXBlLC5hY2UtdG0gLmFjZV9zdXBwb3J0LmFjZV9jbGFzcyB7Y29sb3I6IHJnYigxMDksIDEyMSwgMjIyKTt9LmFjZS10bSAuYWNlX2tleXdvcmQuYWNlX29wZXJhdG9yIHtjb2xvcjogcmdiKDEwNCwgMTE4LCAxMzUpO30uYWNlLXRtIC5hY2Vfc3RyaW5nIHtjb2xvcjogcmdiKDMsIDEwNiwgNyk7fS5hY2UtdG0gLmFjZV9jb21tZW50IHtjb2xvcjogcmdiKDc2LCAxMzYsIDEwNyk7fS5hY2UtdG0gLmFjZV9jb21tZW50LmFjZV9kb2Mge2NvbG9yOiByZ2IoMCwgMTAyLCAyNTUpO30uYWNlLXRtIC5hY2VfY29tbWVudC5hY2VfZG9jLmFjZV90YWcge2NvbG9yOiByZ2IoMTI4LCAxNTksIDE5MSk7fS5hY2UtdG0gLmFjZV9jb25zdGFudC5hY2VfbnVtZXJpYyB7Y29sb3I6IHJnYigwLCAwLCAyMDUpO30uYWNlLXRtIC5hY2VfdmFyaWFibGUge2NvbG9yOiByZ2IoNDksIDEzMiwgMTQ5KTt9LmFjZS10bSAuYWNlX3htbC1wZSB7Y29sb3I6IHJnYigxMDQsIDEwNCwgOTEpO30uYWNlLXRtIC5hY2VfZW50aXR5LmFjZV9uYW1lLmFjZV9mdW5jdGlvbiB7Y29sb3I6ICMwMDAwQTI7fS5hY2UtdG0gLmFjZV9oZWFkaW5nIHtjb2xvcjogcmdiKDEyLCA3LCAyNTUpO30uYWNlLXRtIC5hY2VfbGlzdCB7Y29sb3I6cmdiKDE4NSwgNiwgMTQ0KTt9LmFjZS10bSAuYWNlX21ldGEuYWNlX3RhZyB7Y29sb3I6cmdiKDAsIDIyLCAxNDIpO30uYWNlLXRtIC5hY2Vfc3RyaW5nLmFjZV9yZWdleCB7Y29sb3I6IHJnYigyNTUsIDAsIDApfS5hY2UtdG0gLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zZWxlY3Rpb24ge2JhY2tncm91bmQ6IHJnYigxODEsIDIxMywgMjU1KTt9LmFjZS10bS5hY2VfbXVsdGlzZWxlY3QgLmFjZV9zZWxlY3Rpb24uYWNlX3N0YXJ0IHtib3gtc2hhZG93OiAwIDAgM3B4IDBweCB3aGl0ZTt9LmFjZS10bSAuYWNlX21hcmtlci1sYXllciAuYWNlX3N0ZXAge2JhY2tncm91bmQ6IHJnYigyNTIsIDI1NSwgMCk7fS5hY2UtdG0gLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zdGFjayB7YmFja2dyb3VuZDogcmdiKDE2NCwgMjI5LCAxMDEpO30uYWNlLXRtIC5hY2VfbWFya2VyLWxheWVyIC5hY2VfYnJhY2tldCB7bWFyZ2luOiAtMXB4IDAgMCAtMXB4O2JvcmRlcjogMXB4IHNvbGlkIHJnYigxOTIsIDE5MiwgMTkyKTt9LmFjZS10bSAuYWNlX21hcmtlci1sYXllciAuYWNlX2FjdGl2ZS1saW5lIHtiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDcpO30uYWNlLXRtIC5hY2VfZ3V0dGVyLWFjdGl2ZS1saW5lIHtiYWNrZ3JvdW5kLWNvbG9yIDogI2RjZGNkYzt9LmFjZS10bSAuYWNlX21hcmtlci1sYXllciAuYWNlX3NlbGVjdGVkLXdvcmQge2JhY2tncm91bmQ6IHJnYigyNTAsIDI1MCwgMjU1KTtib3JkZXI6IDFweCBzb2xpZCByZ2IoMjAwLCAyMDAsIDI1MCk7fS5hY2UtdG0gLmFjZV9pbmRlbnQtZ3VpZGUge2JhY2tncm91bmQ6IHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQ0NBWUFBQUNaZ2JZbkFBQUFFMGxFUVZRSW1XUDQvLy8vZjRiTGx5Ly9Cd0FtVmdkMS93MTEvZ0FBQUFCSlJVNUVya0pnZ2c9PVwiKSByaWdodCByZXBlYXQteTt9Jzt2YXIgcj1lKFwiLi4vbGliL2RvbVwiKTtyLmltcG9ydENzc1N0cmluZyh0LmNzc1RleHQsdC5jc3NDbGFzcyl9KSxkZWZpbmUoXCJhY2UvbGluZV93aWRnZXRzXCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2UvbGliL29vcFwiLFwiYWNlL2xpYi9kb21cIixcImFjZS9yYW5nZVwiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbyhlKXt0aGlzLnNlc3Npb249ZSx0aGlzLnNlc3Npb24ud2lkZ2V0TWFuYWdlcj10aGlzLHRoaXMuc2Vzc2lvbi5nZXRSb3dMZW5ndGg9dGhpcy5nZXRSb3dMZW5ndGgsdGhpcy5zZXNzaW9uLiRnZXRXaWRnZXRTY3JlZW5MZW5ndGg9dGhpcy4kZ2V0V2lkZ2V0U2NyZWVuTGVuZ3RoLHRoaXMudXBkYXRlT25DaGFuZ2U9dGhpcy51cGRhdGVPbkNoYW5nZS5iaW5kKHRoaXMpLHRoaXMucmVuZGVyV2lkZ2V0cz10aGlzLnJlbmRlcldpZGdldHMuYmluZCh0aGlzKSx0aGlzLm1lYXN1cmVXaWRnZXRzPXRoaXMubWVhc3VyZVdpZGdldHMuYmluZCh0aGlzKSx0aGlzLnNlc3Npb24uX2NoYW5nZWRXaWRnZXRzPVtdLHRoaXMuJG9uQ2hhbmdlRWRpdG9yPXRoaXMuJG9uQ2hhbmdlRWRpdG9yLmJpbmQodGhpcyksdGhpcy5zZXNzaW9uLm9uKFwiY2hhbmdlXCIsdGhpcy51cGRhdGVPbkNoYW5nZSksdGhpcy5zZXNzaW9uLm9uKFwiY2hhbmdlRm9sZFwiLHRoaXMudXBkYXRlT25Gb2xkKSx0aGlzLnNlc3Npb24ub24oXCJjaGFuZ2VFZGl0b3JcIix0aGlzLiRvbkNoYW5nZUVkaXRvcil9dmFyIHI9ZShcIi4vbGliL29vcFwiKSxpPWUoXCIuL2xpYi9kb21cIikscz1lKFwiLi9yYW5nZVwiKS5SYW5nZTsoZnVuY3Rpb24oKXt0aGlzLmdldFJvd0xlbmd0aD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdGhpcy5saW5lV2lkZ2V0cz90PXRoaXMubGluZVdpZGdldHNbZV0mJnRoaXMubGluZVdpZGdldHNbZV0ucm93Q291bnR8fDA6dD0wLCF0aGlzLiR1c2VXcmFwTW9kZXx8IXRoaXMuJHdyYXBEYXRhW2VdPzErdDp0aGlzLiR3cmFwRGF0YVtlXS5sZW5ndGgrMSt0fSx0aGlzLiRnZXRXaWRnZXRTY3JlZW5MZW5ndGg9ZnVuY3Rpb24oKXt2YXIgZT0wO3JldHVybiB0aGlzLmxpbmVXaWRnZXRzLmZvckVhY2goZnVuY3Rpb24odCl7dCYmdC5yb3dDb3VudCYmIXQuaGlkZGVuJiYoZSs9dC5yb3dDb3VudCl9KSxlfSx0aGlzLiRvbkNoYW5nZUVkaXRvcj1mdW5jdGlvbihlKXt0aGlzLmF0dGFjaChlLmVkaXRvcil9LHRoaXMuYXR0YWNoPWZ1bmN0aW9uKGUpe2UmJmUud2lkZ2V0TWFuYWdlciYmZS53aWRnZXRNYW5hZ2VyIT10aGlzJiZlLndpZGdldE1hbmFnZXIuZGV0YWNoKCk7aWYodGhpcy5lZGl0b3I9PWUpcmV0dXJuO3RoaXMuZGV0YWNoKCksdGhpcy5lZGl0b3I9ZSxlJiYoZS53aWRnZXRNYW5hZ2VyPXRoaXMsZS5yZW5kZXJlci5vbihcImJlZm9yZVJlbmRlclwiLHRoaXMubWVhc3VyZVdpZGdldHMpLGUucmVuZGVyZXIub24oXCJhZnRlclJlbmRlclwiLHRoaXMucmVuZGVyV2lkZ2V0cykpfSx0aGlzLmRldGFjaD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmVkaXRvcjtpZighdClyZXR1cm47dGhpcy5lZGl0b3I9bnVsbCx0LndpZGdldE1hbmFnZXI9bnVsbCx0LnJlbmRlcmVyLm9mZihcImJlZm9yZVJlbmRlclwiLHRoaXMubWVhc3VyZVdpZGdldHMpLHQucmVuZGVyZXIub2ZmKFwiYWZ0ZXJSZW5kZXJcIix0aGlzLnJlbmRlcldpZGdldHMpO3ZhciBuPXRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0cztuJiZuLmZvckVhY2goZnVuY3Rpb24oZSl7ZSYmZS5lbCYmZS5lbC5wYXJlbnROb2RlJiYoZS5faW5Eb2N1bWVudD0hMSxlLmVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZS5lbCkpfSl9LHRoaXMudXBkYXRlT25Gb2xkPWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5saW5lV2lkZ2V0cztpZighbnx8IWUuYWN0aW9uKXJldHVybjt2YXIgcj1lLmRhdGEsaT1yLnN0YXJ0LnJvdyxzPXIuZW5kLnJvdyxvPWUuYWN0aW9uPT1cImFkZFwiO2Zvcih2YXIgdT1pKzE7dTxzO3UrKyluW3VdJiYoblt1XS5oaWRkZW49byk7bltzXSYmKG8/bltpXT9uW3NdLmhpZGRlbj1vOm5baV09bltzXToobltpXT09bltzXSYmKG5baV09dW5kZWZpbmVkKSxuW3NdLmhpZGRlbj1vKSl9LHRoaXMudXBkYXRlT25DaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzO2lmKCF0KXJldHVybjt2YXIgbj1lLnN0YXJ0LnJvdyxyPWUuZW5kLnJvdy1uO2lmKHIhPT0wKWlmKGUuYWN0aW9uPT1cInJlbW92ZVwiKXt2YXIgaT10LnNwbGljZShuKzEscik7aS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UmJnRoaXMucmVtb3ZlTGluZVdpZGdldChlKX0sdGhpcyksdGhpcy4kdXBkYXRlUm93cygpfWVsc2V7dmFyIHM9bmV3IEFycmF5KHIpO3MudW5zaGlmdChuLDApLHQuc3BsaWNlLmFwcGx5KHQscyksdGhpcy4kdXBkYXRlUm93cygpfX0sdGhpcy4kdXBkYXRlUm93cz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0cztpZighZSlyZXR1cm47dmFyIHQ9ITA7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUsbil7aWYoZSl7dD0hMSxlLnJvdz1uO3doaWxlKGUuJG9sZFdpZGdldCllLiRvbGRXaWRnZXQucm93PW4sZT1lLiRvbGRXaWRnZXR9fSksdCYmKHRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0cz1udWxsKX0sdGhpcy5hZGRMaW5lV2lkZ2V0PWZ1bmN0aW9uKGUpe3RoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0c3x8KHRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0cz1uZXcgQXJyYXkodGhpcy5zZXNzaW9uLmdldExlbmd0aCgpKSk7dmFyIHQ9dGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzW2Uucm93XTt0JiYoZS4kb2xkV2lkZ2V0PXQsdC5lbCYmdC5lbC5wYXJlbnROb2RlJiYodC5lbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQuZWwpLHQuX2luRG9jdW1lbnQ9ITEpKSx0aGlzLnNlc3Npb24ubGluZVdpZGdldHNbZS5yb3ddPWUsZS5zZXNzaW9uPXRoaXMuc2Vzc2lvbjt2YXIgbj10aGlzLmVkaXRvci5yZW5kZXJlcjtlLmh0bWwmJiFlLmVsJiYoZS5lbD1pLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZS5lbC5pbm5lckhUTUw9ZS5odG1sKSxlLmVsJiYoaS5hZGRDc3NDbGFzcyhlLmVsLFwiYWNlX2xpbmVXaWRnZXRDb250YWluZXJcIiksZS5lbC5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsZS5lbC5zdHlsZS56SW5kZXg9NSxuLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlLmVsKSxlLl9pbkRvY3VtZW50PSEwKSxlLmNvdmVyR3V0dGVyfHwoZS5lbC5zdHlsZS56SW5kZXg9MyksZS5waXhlbEhlaWdodHx8KGUucGl4ZWxIZWlnaHQ9ZS5lbC5vZmZzZXRIZWlnaHQpLGUucm93Q291bnQ9PW51bGwmJihlLnJvd0NvdW50PWUucGl4ZWxIZWlnaHQvbi5sYXllckNvbmZpZy5saW5lSGVpZ2h0KTt2YXIgcj10aGlzLnNlc3Npb24uZ2V0Rm9sZEF0KGUucm93LDApO2UuJGZvbGQ9cjtpZihyKXt2YXIgcz10aGlzLnNlc3Npb24ubGluZVdpZGdldHM7ZS5yb3c9PXIuZW5kLnJvdyYmIXNbci5zdGFydC5yb3ddP3Nbci5zdGFydC5yb3ddPWU6ZS5oaWRkZW49ITB9cmV0dXJuIHRoaXMuc2Vzc2lvbi5fZW1pdChcImNoYW5nZUZvbGRcIix7ZGF0YTp7c3RhcnQ6e3JvdzplLnJvd319fSksdGhpcy4kdXBkYXRlUm93cygpLHRoaXMucmVuZGVyV2lkZ2V0cyhudWxsLG4pLHRoaXMub25XaWRnZXRDaGFuZ2VkKGUpLGV9LHRoaXMucmVtb3ZlTGluZVdpZGdldD1mdW5jdGlvbihlKXtlLl9pbkRvY3VtZW50PSExLGUuc2Vzc2lvbj1udWxsLGUuZWwmJmUuZWwucGFyZW50Tm9kZSYmZS5lbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUuZWwpO2lmKGUuZWRpdG9yJiZlLmVkaXRvci5kZXN0cm95KXRyeXtlLmVkaXRvci5kZXN0cm95KCl9Y2F0Y2godCl7fWlmKHRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0cyl7dmFyIG49dGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzW2Uucm93XTtpZihuPT1lKXRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0c1tlLnJvd109ZS4kb2xkV2lkZ2V0LGUuJG9sZFdpZGdldCYmdGhpcy5vbldpZGdldENoYW5nZWQoZS4kb2xkV2lkZ2V0KTtlbHNlIHdoaWxlKG4pe2lmKG4uJG9sZFdpZGdldD09ZSl7bi4kb2xkV2lkZ2V0PWUuJG9sZFdpZGdldDticmVha31uPW4uJG9sZFdpZGdldH19dGhpcy5zZXNzaW9uLl9lbWl0KFwiY2hhbmdlRm9sZFwiLHtkYXRhOntzdGFydDp7cm93OmUucm93fX19KSx0aGlzLiR1cGRhdGVSb3dzKCl9LHRoaXMuZ2V0V2lkZ2V0c0F0Um93PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0cyxuPXQmJnRbZV0scj1bXTt3aGlsZShuKXIucHVzaChuKSxuPW4uJG9sZFdpZGdldDtyZXR1cm4gcn0sdGhpcy5vbldpZGdldENoYW5nZWQ9ZnVuY3Rpb24oZSl7dGhpcy5zZXNzaW9uLl9jaGFuZ2VkV2lkZ2V0cy5wdXNoKGUpLHRoaXMuZWRpdG9yJiZ0aGlzLmVkaXRvci5yZW5kZXJlci51cGRhdGVGdWxsKCl9LHRoaXMubWVhc3VyZVdpZGdldHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLnNlc3Npb24uX2NoYW5nZWRXaWRnZXRzLHI9dC5sYXllckNvbmZpZztpZighbnx8IW4ubGVuZ3RoKXJldHVybjt2YXIgaT1JbmZpbml0eTtmb3IodmFyIHM9MDtzPG4ubGVuZ3RoO3MrKyl7dmFyIG89bltzXTtpZighb3x8IW8uZWwpY29udGludWU7aWYoby5zZXNzaW9uIT10aGlzLnNlc3Npb24pY29udGludWU7by5faW5Eb2N1bWVudHx8KG8uX2luRG9jdW1lbnQ9ITAsdC5jb250YWluZXIuYXBwZW5kQ2hpbGQoby5lbCkpLG8uaD1vLmVsLm9mZnNldEhlaWdodCxvLmZpeGVkV2lkdGh8fChvLnc9by5lbC5vZmZzZXRXaWR0aCxvLnNjcmVlbldpZHRoPU1hdGguY2VpbChvLncvci5jaGFyYWN0ZXJXaWR0aCkpO3ZhciB1PW8uaC9yLmxpbmVIZWlnaHQ7by5jb3ZlckxpbmUmJih1LT10aGlzLnNlc3Npb24uZ2V0Um93TGluZUNvdW50KG8ucm93KSx1PDAmJih1PTApKSxvLnJvd0NvdW50IT11JiYoby5yb3dDb3VudD11LG8ucm93PGkmJihpPW8ucm93KSl9aSE9SW5maW5pdHkmJih0aGlzLnNlc3Npb24uX2VtaXQoXCJjaGFuZ2VGb2xkXCIse2RhdGE6e3N0YXJ0Ontyb3c6aX19fSksdGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRXaWR0aD1udWxsKSx0aGlzLnNlc3Npb24uX2NoYW5nZWRXaWRnZXRzPVtdfSx0aGlzLnJlbmRlcldpZGdldHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmxheWVyQ29uZmlnLHI9dGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzO2lmKCFyKXJldHVybjt2YXIgaT1NYXRoLm1pbih0aGlzLmZpcnN0Um93LG4uZmlyc3RSb3cpLHM9TWF0aC5tYXgodGhpcy5sYXN0Um93LG4ubGFzdFJvdyxyLmxlbmd0aCk7d2hpbGUoaT4wJiYhcltpXSlpLS07dGhpcy5maXJzdFJvdz1uLmZpcnN0Um93LHRoaXMubGFzdFJvdz1uLmxhc3RSb3csdC4kY3Vyc29yTGF5ZXIuY29uZmlnPW47Zm9yKHZhciBvPWk7bzw9cztvKyspe3ZhciB1PXJbb107aWYoIXV8fCF1LmVsKWNvbnRpbnVlO2lmKHUuaGlkZGVuKXt1LmVsLnN0eWxlLnRvcD0tMTAwLSh1LnBpeGVsSGVpZ2h0fHwwKStcInB4XCI7Y29udGludWV9dS5faW5Eb2N1bWVudHx8KHUuX2luRG9jdW1lbnQ9ITAsdC5jb250YWluZXIuYXBwZW5kQ2hpbGQodS5lbCkpO3ZhciBhPXQuJGN1cnNvckxheWVyLmdldFBpeGVsUG9zaXRpb24oe3JvdzpvLGNvbHVtbjowfSwhMCkudG9wO3UuY292ZXJMaW5lfHwoYSs9bi5saW5lSGVpZ2h0KnRoaXMuc2Vzc2lvbi5nZXRSb3dMaW5lQ291bnQodS5yb3cpKSx1LmVsLnN0eWxlLnRvcD1hLW4ub2Zmc2V0K1wicHhcIjt2YXIgZj11LmNvdmVyR3V0dGVyPzA6dC5ndXR0ZXJXaWR0aDt1LmZpeGVkV2lkdGh8fChmLT10LnNjcm9sbExlZnQpLHUuZWwuc3R5bGUubGVmdD1mK1wicHhcIix1LmZ1bGxXaWR0aCYmdS5zY3JlZW5XaWR0aCYmKHUuZWwuc3R5bGUubWluV2lkdGg9bi53aWR0aCsyKm4ucGFkZGluZytcInB4XCIpLHUuZml4ZWRXaWR0aD91LmVsLnN0eWxlLnJpZ2h0PXQuc2Nyb2xsQmFyLmdldFdpZHRoKCkrXCJweFwiOnUuZWwuc3R5bGUucmlnaHQ9XCJcIn19fSkuY2FsbChvLnByb3RvdHlwZSksdC5MaW5lV2lkZ2V0cz1vfSksZGVmaW5lKFwiYWNlL2V4dC9lcnJvcl9tYXJrZXJcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saW5lX3dpZGdldHNcIixcImFjZS9saWIvZG9tXCIsXCJhY2UvcmFuZ2VcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG8oZSx0LG4pe3ZhciByPTAsaT1lLmxlbmd0aC0xO3doaWxlKHI8PWkpe3ZhciBzPXIraT4+MSxvPW4odCxlW3NdKTtpZihvPjApcj1zKzE7ZWxzZXtpZighKG88MCkpcmV0dXJuIHM7aT1zLTF9fXJldHVybi0ocisxKX1mdW5jdGlvbiB1KGUsdCxuKXt2YXIgcj1lLmdldEFubm90YXRpb25zKCkuc29ydChzLmNvbXBhcmVQb2ludHMpO2lmKCFyLmxlbmd0aClyZXR1cm47dmFyIGk9byhyLHtyb3c6dCxjb2x1bW46LTF9LHMuY29tcGFyZVBvaW50cyk7aTwwJiYoaT0taS0xKSxpPj1yLmxlbmd0aD9pPW4+MD8wOnIubGVuZ3RoLTE6aT09PTAmJm48MCYmKGk9ci5sZW5ndGgtMSk7dmFyIHU9cltpXTtpZighdXx8IW4pcmV0dXJuO2lmKHUucm93PT09dCl7ZG8gdT1yW2krPW5dO3doaWxlKHUmJnUucm93PT09dCk7aWYoIXUpcmV0dXJuIHIuc2xpY2UoKX12YXIgYT1bXTt0PXUucm93O2RvIGFbbjwwP1widW5zaGlmdFwiOlwicHVzaFwiXSh1KSx1PXJbaSs9bl07d2hpbGUodSYmdS5yb3c9PXQpO3JldHVybiBhLmxlbmd0aCYmYX12YXIgcj1lKFwiLi4vbGluZV93aWRnZXRzXCIpLkxpbmVXaWRnZXRzLGk9ZShcIi4uL2xpYi9kb21cIikscz1lKFwiLi4vcmFuZ2VcIikuUmFuZ2U7dC5zaG93RXJyb3JNYXJrZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnNlc3Npb247bi53aWRnZXRNYW5hZ2VyfHwobi53aWRnZXRNYW5hZ2VyPW5ldyByKG4pLG4ud2lkZ2V0TWFuYWdlci5hdHRhY2goZSkpO3ZhciBzPWUuZ2V0Q3Vyc29yUG9zaXRpb24oKSxvPXMucm93LGE9bi53aWRnZXRNYW5hZ2VyLmdldFdpZGdldHNBdFJvdyhvKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHlwZT09XCJlcnJvck1hcmtlclwifSlbMF07YT9hLmRlc3Ryb3koKTpvLT10O3ZhciBmPXUobixvLHQpLGw7aWYoZil7dmFyIGM9ZlswXTtzLmNvbHVtbj0oYy5wb3MmJnR5cGVvZiBjLmNvbHVtbiE9XCJudW1iZXJcIj9jLnBvcy5zYzpjLmNvbHVtbil8fDAscy5yb3c9Yy5yb3csbD1lLnJlbmRlcmVyLiRndXR0ZXJMYXllci4kYW5ub3RhdGlvbnNbcy5yb3ddfWVsc2V7aWYoYSlyZXR1cm47bD17dGV4dDpbXCJMb29rcyBnb29kIVwiXSxjbGFzc05hbWU6XCJhY2Vfb2tcIn19ZS5zZXNzaW9uLnVuZm9sZChzLnJvdyksZS5zZWxlY3Rpb24ubW92ZVRvUG9zaXRpb24ocyk7dmFyIGg9e3JvdzpzLnJvdyxmaXhlZFdpZHRoOiEwLGNvdmVyR3V0dGVyOiEwLGVsOmkuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0eXBlOlwiZXJyb3JNYXJrZXJcIn0scD1oLmVsLmFwcGVuZENoaWxkKGkuY3JlYXRlRWxlbWVudChcImRpdlwiKSksZD1oLmVsLmFwcGVuZENoaWxkKGkuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7ZC5jbGFzc05hbWU9XCJlcnJvcl93aWRnZXRfYXJyb3cgXCIrbC5jbGFzc05hbWU7dmFyIHY9ZS5yZW5kZXJlci4kY3Vyc29yTGF5ZXIuZ2V0UGl4ZWxQb3NpdGlvbihzKS5sZWZ0O2Quc3R5bGUubGVmdD12K2UucmVuZGVyZXIuZ3V0dGVyV2lkdGgtNStcInB4XCIsaC5lbC5jbGFzc05hbWU9XCJlcnJvcl93aWRnZXRfd3JhcHBlclwiLHAuY2xhc3NOYW1lPVwiZXJyb3Jfd2lkZ2V0IFwiK2wuY2xhc3NOYW1lLHAuaW5uZXJIVE1MPWwudGV4dC5qb2luKFwiPGJyPlwiKSxwLmFwcGVuZENoaWxkKGkuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7dmFyIG09ZnVuY3Rpb24oZSx0LG4pe2lmKHQ9PT0wJiYobj09PVwiZXNjXCJ8fG49PT1cInJldHVyblwiKSlyZXR1cm4gaC5kZXN0cm95KCkse2NvbW1hbmQ6XCJudWxsXCJ9fTtoLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZihlLiRtb3VzZUhhbmRsZXIuaXNNb3VzZVByZXNzZWQpcmV0dXJuO2Uua2V5QmluZGluZy5yZW1vdmVLZXlib2FyZEhhbmRsZXIobSksbi53aWRnZXRNYW5hZ2VyLnJlbW92ZUxpbmVXaWRnZXQoaCksZS5vZmYoXCJjaGFuZ2VTZWxlY3Rpb25cIixoLmRlc3Ryb3kpLGUub2ZmKFwiY2hhbmdlU2Vzc2lvblwiLGguZGVzdHJveSksZS5vZmYoXCJtb3VzZXVwXCIsaC5kZXN0cm95KSxlLm9mZihcImNoYW5nZVwiLGguZGVzdHJveSl9LGUua2V5QmluZGluZy5hZGRLZXlib2FyZEhhbmRsZXIobSksZS5vbihcImNoYW5nZVNlbGVjdGlvblwiLGguZGVzdHJveSksZS5vbihcImNoYW5nZVNlc3Npb25cIixoLmRlc3Ryb3kpLGUub24oXCJtb3VzZXVwXCIsaC5kZXN0cm95KSxlLm9uKFwiY2hhbmdlXCIsaC5kZXN0cm95KSxlLnNlc3Npb24ud2lkZ2V0TWFuYWdlci5hZGRMaW5lV2lkZ2V0KGgpLGguZWwub25tb3VzZWRvd249ZS5mb2N1cy5iaW5kKGUpLGUucmVuZGVyZXIuc2Nyb2xsQ3Vyc29ySW50b1ZpZXcobnVsbCwuNSx7Ym90dG9tOmguZWwub2Zmc2V0SGVpZ2h0fSl9LGkuaW1wb3J0Q3NzU3RyaW5nKFwiICAgIC5lcnJvcl93aWRnZXRfd3JhcHBlciB7ICAgICAgICBiYWNrZ3JvdW5kOiBpbmhlcml0OyAgICAgICAgY29sb3I6IGluaGVyaXQ7ICAgICAgICBib3JkZXI6bm9uZSAgICB9ICAgIC5lcnJvcl93aWRnZXQgeyAgICAgICAgYm9yZGVyLXRvcDogc29saWQgMnB4OyAgICAgICAgYm9yZGVyLWJvdHRvbTogc29saWQgMnB4OyAgICAgICAgbWFyZ2luOiA1cHggMDsgICAgICAgIHBhZGRpbmc6IDEwcHggNDBweDsgICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsgICAgfSAgICAuZXJyb3Jfd2lkZ2V0LmFjZV9lcnJvciwgLmVycm9yX3dpZGdldF9hcnJvdy5hY2VfZXJyb3J7ICAgICAgICBib3JkZXItY29sb3I6ICNmZjVhNWEgICAgfSAgICAuZXJyb3Jfd2lkZ2V0LmFjZV93YXJuaW5nLCAuZXJyb3Jfd2lkZ2V0X2Fycm93LmFjZV93YXJuaW5neyAgICAgICAgYm9yZGVyLWNvbG9yOiAjRjFEODE3ICAgIH0gICAgLmVycm9yX3dpZGdldC5hY2VfaW5mbywgLmVycm9yX3dpZGdldF9hcnJvdy5hY2VfaW5mb3sgICAgICAgIGJvcmRlci1jb2xvcjogIzVhNWE1YSAgICB9ICAgIC5lcnJvcl93aWRnZXQuYWNlX29rLCAuZXJyb3Jfd2lkZ2V0X2Fycm93LmFjZV9va3sgICAgICAgIGJvcmRlci1jb2xvcjogIzVhYWE1YSAgICB9ICAgIC5lcnJvcl93aWRnZXRfYXJyb3cgeyAgICAgICAgcG9zaXRpb246IGFic29sdXRlOyAgICAgICAgYm9yZGVyOiBzb2xpZCA1cHg7ICAgICAgICBib3JkZXItdG9wLWNvbG9yOiB0cmFuc3BhcmVudCFpbXBvcnRhbnQ7ICAgICAgICBib3JkZXItcmlnaHQtY29sb3I6IHRyYW5zcGFyZW50IWltcG9ydGFudDsgICAgICAgIGJvcmRlci1sZWZ0LWNvbG9yOiB0cmFuc3BhcmVudCFpbXBvcnRhbnQ7ICAgICAgICB0b3A6IC01cHg7ICAgIH1cIixcIlwiKX0pLGRlZmluZShcImFjZS9hY2VcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIvZml4b2xkYnJvd3NlcnNcIixcImFjZS9saWIvZG9tXCIsXCJhY2UvbGliL2V2ZW50XCIsXCJhY2UvZWRpdG9yXCIsXCJhY2UvZWRpdF9zZXNzaW9uXCIsXCJhY2UvdW5kb21hbmFnZXJcIixcImFjZS92aXJ0dWFsX3JlbmRlcmVyXCIsXCJhY2Uvd29ya2VyL3dvcmtlcl9jbGllbnRcIixcImFjZS9rZXlib2FyZC9oYXNoX2hhbmRsZXJcIixcImFjZS9wbGFjZWhvbGRlclwiLFwiYWNlL211bHRpX3NlbGVjdFwiLFwiYWNlL21vZGUvZm9sZGluZy9mb2xkX21vZGVcIixcImFjZS90aGVtZS90ZXh0bWF0ZVwiLFwiYWNlL2V4dC9lcnJvcl9tYXJrZXJcIixcImFjZS9jb25maWdcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2UoXCIuL2xpYi9maXhvbGRicm93c2Vyc1wiKTt2YXIgcj1lKFwiLi9saWIvZG9tXCIpLGk9ZShcIi4vbGliL2V2ZW50XCIpLHM9ZShcIi4vZWRpdG9yXCIpLkVkaXRvcixvPWUoXCIuL2VkaXRfc2Vzc2lvblwiKS5FZGl0U2Vzc2lvbix1PWUoXCIuL3VuZG9tYW5hZ2VyXCIpLlVuZG9NYW5hZ2VyLGE9ZShcIi4vdmlydHVhbF9yZW5kZXJlclwiKS5WaXJ0dWFsUmVuZGVyZXI7ZShcIi4vd29ya2VyL3dvcmtlcl9jbGllbnRcIiksZShcIi4va2V5Ym9hcmQvaGFzaF9oYW5kbGVyXCIpLGUoXCIuL3BsYWNlaG9sZGVyXCIpLGUoXCIuL211bHRpX3NlbGVjdFwiKSxlKFwiLi9tb2RlL2ZvbGRpbmcvZm9sZF9tb2RlXCIpLGUoXCIuL3RoZW1lL3RleHRtYXRlXCIpLGUoXCIuL2V4dC9lcnJvcl9tYXJrZXJcIiksdC5jb25maWc9ZShcIi4vY29uZmlnXCIpLHQucmVxdWlyZT1lLHQuZWRpdD1mdW5jdGlvbihlKXtpZih0eXBlb2YgZT09XCJzdHJpbmdcIil7dmFyIG49ZTtlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG4pO2lmKCFlKXRocm93IG5ldyBFcnJvcihcImFjZS5lZGl0IGNhbid0IGZpbmQgZGl2ICNcIituKX1pZihlJiZlLmVudiYmZS5lbnYuZWRpdG9yIGluc3RhbmNlb2YgcylyZXR1cm4gZS5lbnYuZWRpdG9yO3ZhciBvPVwiXCI7aWYoZSYmL2lucHV0fHRleHRhcmVhL2kudGVzdChlLnRhZ05hbWUpKXt2YXIgdT1lO289dS52YWx1ZSxlPXIuY3JlYXRlRWxlbWVudChcInByZVwiKSx1LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGUsdSl9ZWxzZSBlJiYobz1yLmdldElubmVyVGV4dChlKSxlLmlubmVySFRNTD1cIlwiKTt2YXIgZj10LmNyZWF0ZUVkaXRTZXNzaW9uKG8pLGw9bmV3IHMobmV3IGEoZSkpO2wuc2V0U2Vzc2lvbihmKTt2YXIgYz17ZG9jdW1lbnQ6ZixlZGl0b3I6bCxvblJlc2l6ZTpsLnJlc2l6ZS5iaW5kKGwsbnVsbCl9O3JldHVybiB1JiYoYy50ZXh0YXJlYT11KSxpLmFkZExpc3RlbmVyKHdpbmRvdyxcInJlc2l6ZVwiLGMub25SZXNpemUpLGwub24oXCJkZXN0cm95XCIsZnVuY3Rpb24oKXtpLnJlbW92ZUxpc3RlbmVyKHdpbmRvdyxcInJlc2l6ZVwiLGMub25SZXNpemUpLGMuZWRpdG9yLmNvbnRhaW5lci5lbnY9bnVsbH0pLGwuY29udGFpbmVyLmVudj1sLmVudj1jLGx9LHQuY3JlYXRlRWRpdFNlc3Npb249ZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgbyhlLHQpO3JldHVybiBuLnNldFVuZG9NYW5hZ2VyKG5ldyB1KSxufSx0LkVkaXRTZXNzaW9uPW8sdC5VbmRvTWFuYWdlcj11fSk7XG4gICAgICAgICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlcXVpcmUoW1wiYWNlL2FjZVwiXSwgZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgICAgICAgICBhICYmIGEuY29uZmlnLmluaXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93LmFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hY2UgPSBhO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYSkgaWYgKGEuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hY2Vba2V5XSA9IGFba2V5XTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pKCk7XG4gICAgICAgIFxuIiwiLy9QbGFjZSBoZXJlIHlvdXIgcGVyc29uYWwgQWNjZXNzIFRva2VuLCB5b3UgY2FuIGdvIHRvIG91ciBSZWFkbWUgaWYgeW91IG5lZWQgaGVscFxuXHR2YXIgQWNjZXNzVG9rZW4gPSAnZDk2ZDBlMDU5MmVjYWU3MDY5NThlY2IyYTNlNTlhOTMxNjhiNDI2Mic7XG5cbi8vSHRtbCB0YWIgc2l6ZVxuXHR2YXIgaHRtbEVkaXRvclRhYlNpemUgPSAnMic7XG4iLCIoZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZyxoLGk9W10uc2xpY2Usaj17fS5oYXNPd25Qcm9wZXJ0eSxrPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe3RoaXMuY29uc3RydWN0b3I9YX1mb3IodmFyIGQgaW4gYilqLmNhbGwoYixkKSYmKGFbZF09YltkXSk7cmV0dXJuIGMucHJvdG90eXBlPWIucHJvdG90eXBlLGEucHJvdG90eXBlPW5ldyBjLGEuX19zdXBlcl9fPWIucHJvdG90eXBlLGF9O2c9ZnVuY3Rpb24oKXt9LGI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7fXJldHVybiBhLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWEucHJvdG90eXBlLm9uLGEucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LHRoaXMuX2NhbGxiYWNrc1thXXx8KHRoaXMuX2NhbGxiYWNrc1thXT1bXSksdGhpcy5fY2FsbGJhY2tzW2FdLnB1c2goYiksdGhpc30sYS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZjtpZihkPWFyZ3VtZW50c1swXSxhPTI8PWFyZ3VtZW50cy5sZW5ndGg/aS5jYWxsKGFyZ3VtZW50cywxKTpbXSx0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSxjPXRoaXMuX2NhbGxiYWNrc1tkXSlmb3IoZT0wLGY9Yy5sZW5ndGg7Zj5lO2UrKyliPWNbZV0sYi5hcHBseSh0aGlzLGEpO3JldHVybiB0aGlzfSxhLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1hLnByb3RvdHlwZS5vZmYsYS5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWEucHJvdG90eXBlLm9mZixhLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWEucHJvdG90eXBlLm9mZixhLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnO2lmKCF0aGlzLl9jYWxsYmFja3N8fDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl9jYWxsYmFja3M9e30sdGhpcztpZihkPXRoaXMuX2NhbGxiYWNrc1thXSwhZClyZXR1cm4gdGhpcztpZigxPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1thXSx0aGlzO2ZvcihlPWY9MCxnPWQubGVuZ3RoO2c+ZjtlPSsrZilpZihjPWRbZV0sYz09PWIpe2Quc3BsaWNlKGUsMSk7YnJlYWt9cmV0dXJuIHRoaXN9LGF9KCksYT1mdW5jdGlvbihhKXtmdW5jdGlvbiBjKGEsYil7dmFyIGUsZixnO2lmKHRoaXMuZWxlbWVudD1hLHRoaXMudmVyc2lvbj1jLnZlcnNpb24sdGhpcy5kZWZhdWx0T3B0aW9ucy5wcmV2aWV3VGVtcGxhdGU9dGhpcy5kZWZhdWx0T3B0aW9ucy5wcmV2aWV3VGVtcGxhdGUucmVwbGFjZSgvXFxuKi9nLFwiXCIpLHRoaXMuY2xpY2thYmxlRWxlbWVudHM9W10sdGhpcy5saXN0ZW5lcnM9W10sdGhpcy5maWxlcz1bXSxcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5lbGVtZW50JiYodGhpcy5lbGVtZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5lbGVtZW50KSksIXRoaXMuZWxlbWVudHx8bnVsbD09dGhpcy5lbGVtZW50Lm5vZGVUeXBlKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZHJvcHpvbmUgZWxlbWVudC5cIik7aWYodGhpcy5lbGVtZW50LmRyb3B6b25lKXRocm93IG5ldyBFcnJvcihcIkRyb3B6b25lIGFscmVhZHkgYXR0YWNoZWQuXCIpO2lmKGMuaW5zdGFuY2VzLnB1c2godGhpcyksdGhpcy5lbGVtZW50LmRyb3B6b25lPXRoaXMsZT1udWxsIT0oZz1jLm9wdGlvbnNGb3JFbGVtZW50KHRoaXMuZWxlbWVudCkpP2c6e30sdGhpcy5vcHRpb25zPWQoe30sdGhpcy5kZWZhdWx0T3B0aW9ucyxlLG51bGwhPWI/Yjp7fSksdGhpcy5vcHRpb25zLmZvcmNlRmFsbGJhY2t8fCFjLmlzQnJvd3NlclN1cHBvcnRlZCgpKXJldHVybiB0aGlzLm9wdGlvbnMuZmFsbGJhY2suY2FsbCh0aGlzKTtpZihudWxsPT10aGlzLm9wdGlvbnMudXJsJiYodGhpcy5vcHRpb25zLnVybD10aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiYWN0aW9uXCIpKSwhdGhpcy5vcHRpb25zLnVybCl0aHJvdyBuZXcgRXJyb3IoXCJObyBVUkwgcHJvdmlkZWQuXCIpO2lmKHRoaXMub3B0aW9ucy5hY2NlcHRlZEZpbGVzJiZ0aGlzLm9wdGlvbnMuYWNjZXB0ZWRNaW1lVHlwZXMpdGhyb3cgbmV3IEVycm9yKFwiWW91IGNhbid0IHByb3ZpZGUgYm90aCAnYWNjZXB0ZWRGaWxlcycgYW5kICdhY2NlcHRlZE1pbWVUeXBlcycuICdhY2NlcHRlZE1pbWVUeXBlcycgaXMgZGVwcmVjYXRlZC5cIik7dGhpcy5vcHRpb25zLmFjY2VwdGVkTWltZVR5cGVzJiYodGhpcy5vcHRpb25zLmFjY2VwdGVkRmlsZXM9dGhpcy5vcHRpb25zLmFjY2VwdGVkTWltZVR5cGVzLGRlbGV0ZSB0aGlzLm9wdGlvbnMuYWNjZXB0ZWRNaW1lVHlwZXMpLHRoaXMub3B0aW9ucy5tZXRob2Q9dGhpcy5vcHRpb25zLm1ldGhvZC50b1VwcGVyQ2FzZSgpLChmPXRoaXMuZ2V0RXhpc3RpbmdGYWxsYmFjaygpKSYmZi5wYXJlbnROb2RlJiZmLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZiksdGhpcy5vcHRpb25zLnByZXZpZXdzQ29udGFpbmVyIT09ITEmJih0aGlzLnByZXZpZXdzQ29udGFpbmVyPXRoaXMub3B0aW9ucy5wcmV2aWV3c0NvbnRhaW5lcj9jLmdldEVsZW1lbnQodGhpcy5vcHRpb25zLnByZXZpZXdzQ29udGFpbmVyLFwicHJldmlld3NDb250YWluZXJcIik6dGhpcy5lbGVtZW50KSx0aGlzLm9wdGlvbnMuY2xpY2thYmxlJiYodGhpcy5jbGlja2FibGVFbGVtZW50cz10aGlzLm9wdGlvbnMuY2xpY2thYmxlPT09ITA/W3RoaXMuZWxlbWVudF06Yy5nZXRFbGVtZW50cyh0aGlzLm9wdGlvbnMuY2xpY2thYmxlLFwiY2xpY2thYmxlXCIpKSx0aGlzLmluaXQoKX12YXIgZCxlO3JldHVybiBrKGMsYSksYy5wcm90b3R5cGUuRW1pdHRlcj1iLGMucHJvdG90eXBlLmV2ZW50cz1bXCJkcm9wXCIsXCJkcmFnc3RhcnRcIixcImRyYWdlbmRcIixcImRyYWdlbnRlclwiLFwiZHJhZ292ZXJcIixcImRyYWdsZWF2ZVwiLFwiYWRkZWRmaWxlXCIsXCJhZGRlZGZpbGVzXCIsXCJyZW1vdmVkZmlsZVwiLFwidGh1bWJuYWlsXCIsXCJlcnJvclwiLFwiZXJyb3JtdWx0aXBsZVwiLFwicHJvY2Vzc2luZ1wiLFwicHJvY2Vzc2luZ211bHRpcGxlXCIsXCJ1cGxvYWRwcm9ncmVzc1wiLFwidG90YWx1cGxvYWRwcm9ncmVzc1wiLFwic2VuZGluZ1wiLFwic2VuZGluZ211bHRpcGxlXCIsXCJzdWNjZXNzXCIsXCJzdWNjZXNzbXVsdGlwbGVcIixcImNhbmNlbGVkXCIsXCJjYW5jZWxlZG11bHRpcGxlXCIsXCJjb21wbGV0ZVwiLFwiY29tcGxldGVtdWx0aXBsZVwiLFwicmVzZXRcIixcIm1heGZpbGVzZXhjZWVkZWRcIixcIm1heGZpbGVzcmVhY2hlZFwiLFwicXVldWVjb21wbGV0ZVwiXSxjLnByb3RvdHlwZS5kZWZhdWx0T3B0aW9ucz17dXJsOm51bGwsbWV0aG9kOlwicG9zdFwiLHdpdGhDcmVkZW50aWFsczohMSxwYXJhbGxlbFVwbG9hZHM6Mix1cGxvYWRNdWx0aXBsZTohMSxtYXhGaWxlc2l6ZToyNTYscGFyYW1OYW1lOlwiZmlsZVwiLGNyZWF0ZUltYWdlVGh1bWJuYWlsczohMCxtYXhUaHVtYm5haWxGaWxlc2l6ZToxMCx0aHVtYm5haWxXaWR0aDoxMjAsdGh1bWJuYWlsSGVpZ2h0OjEyMCxmaWxlc2l6ZUJhc2U6MWUzLG1heEZpbGVzOm51bGwscGFyYW1zOnt9LGNsaWNrYWJsZTohMCxpZ25vcmVIaWRkZW5GaWxlczohMCxhY2NlcHRlZEZpbGVzOm51bGwsYWNjZXB0ZWRNaW1lVHlwZXM6bnVsbCxhdXRvUHJvY2Vzc1F1ZXVlOiEwLGF1dG9RdWV1ZTohMCxhZGRSZW1vdmVMaW5rczohMSxwcmV2aWV3c0NvbnRhaW5lcjpudWxsLGhpZGRlbklucHV0Q29udGFpbmVyOlwiYm9keVwiLGNhcHR1cmU6bnVsbCxkaWN0RGVmYXVsdE1lc3NhZ2U6XCJEcm9wIGZpbGVzIGhlcmUgdG8gdXBsb2FkXCIsZGljdEZhbGxiYWNrTWVzc2FnZTpcIllvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGRyYWcnbidkcm9wIGZpbGUgdXBsb2Fkcy5cIixkaWN0RmFsbGJhY2tUZXh0OlwiUGxlYXNlIHVzZSB0aGUgZmFsbGJhY2sgZm9ybSBiZWxvdyB0byB1cGxvYWQgeW91ciBmaWxlcyBsaWtlIGluIHRoZSBvbGRlbiBkYXlzLlwiLGRpY3RGaWxlVG9vQmlnOlwiRmlsZSBpcyB0b28gYmlnICh7e2ZpbGVzaXplfX1NaUIpLiBNYXggZmlsZXNpemU6IHt7bWF4RmlsZXNpemV9fU1pQi5cIixkaWN0SW52YWxpZEZpbGVUeXBlOlwiWW91IGNhbid0IHVwbG9hZCBmaWxlcyBvZiB0aGlzIHR5cGUuXCIsZGljdFJlc3BvbnNlRXJyb3I6XCJTZXJ2ZXIgcmVzcG9uZGVkIHdpdGgge3tzdGF0dXNDb2RlfX0gY29kZS5cIixkaWN0Q2FuY2VsVXBsb2FkOlwiQ2FuY2VsIHVwbG9hZFwiLGRpY3RDYW5jZWxVcGxvYWRDb25maXJtYXRpb246XCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY2FuY2VsIHRoaXMgdXBsb2FkP1wiLGRpY3RSZW1vdmVGaWxlOlwiUmVtb3ZlIGZpbGVcIixkaWN0UmVtb3ZlRmlsZUNvbmZpcm1hdGlvbjpudWxsLGRpY3RNYXhGaWxlc0V4Y2VlZGVkOlwiWW91IGNhbiBub3QgdXBsb2FkIGFueSBtb3JlIGZpbGVzLlwiLGFjY2VwdDpmdW5jdGlvbihhLGIpe3JldHVybiBiKCl9LGluaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZ30sZm9yY2VGYWxsYmFjazohMSxmYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhLGIsZCxlLGYsZztmb3IodGhpcy5lbGVtZW50LmNsYXNzTmFtZT1cIlwiK3RoaXMuZWxlbWVudC5jbGFzc05hbWUrXCIgZHotYnJvd3Nlci1ub3Qtc3VwcG9ydGVkXCIsZz10aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkaXZcIiksZT0wLGY9Zy5sZW5ndGg7Zj5lO2UrKylhPWdbZV0sLyhefCApZHotbWVzc2FnZSgkfCApLy50ZXN0KGEuY2xhc3NOYW1lKSYmKGI9YSxhLmNsYXNzTmFtZT1cImR6LW1lc3NhZ2VcIik7cmV0dXJuIGJ8fChiPWMuY3JlYXRlRWxlbWVudCgnPGRpdiBjbGFzcz1cImR6LW1lc3NhZ2VcIj48c3Bhbj48L3NwYW4+PC9kaXY+JyksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGIpKSxkPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzcGFuXCIpWzBdLGQmJihudWxsIT1kLnRleHRDb250ZW50P2QudGV4dENvbnRlbnQ9dGhpcy5vcHRpb25zLmRpY3RGYWxsYmFja01lc3NhZ2U6bnVsbCE9ZC5pbm5lclRleHQmJihkLmlubmVyVGV4dD10aGlzLm9wdGlvbnMuZGljdEZhbGxiYWNrTWVzc2FnZSkpLHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmdldEZhbGxiYWNrRm9ybSgpKX0scmVzaXplOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZDtyZXR1cm4gYj17c3JjWDowLHNyY1k6MCxzcmNXaWR0aDphLndpZHRoLHNyY0hlaWdodDphLmhlaWdodH0sYz1hLndpZHRoL2EuaGVpZ2h0LGIub3B0V2lkdGg9dGhpcy5vcHRpb25zLnRodW1ibmFpbFdpZHRoLGIub3B0SGVpZ2h0PXRoaXMub3B0aW9ucy50aHVtYm5haWxIZWlnaHQsbnVsbD09Yi5vcHRXaWR0aCYmbnVsbD09Yi5vcHRIZWlnaHQ/KGIub3B0V2lkdGg9Yi5zcmNXaWR0aCxiLm9wdEhlaWdodD1iLnNyY0hlaWdodCk6bnVsbD09Yi5vcHRXaWR0aD9iLm9wdFdpZHRoPWMqYi5vcHRIZWlnaHQ6bnVsbD09Yi5vcHRIZWlnaHQmJihiLm9wdEhlaWdodD0xL2MqYi5vcHRXaWR0aCksZD1iLm9wdFdpZHRoL2Iub3B0SGVpZ2h0LGEuaGVpZ2h0PGIub3B0SGVpZ2h0fHxhLndpZHRoPGIub3B0V2lkdGg/KGIudHJnSGVpZ2h0PWIuc3JjSGVpZ2h0LGIudHJnV2lkdGg9Yi5zcmNXaWR0aCk6Yz5kPyhiLnNyY0hlaWdodD1hLmhlaWdodCxiLnNyY1dpZHRoPWIuc3JjSGVpZ2h0KmQpOihiLnNyY1dpZHRoPWEud2lkdGgsYi5zcmNIZWlnaHQ9Yi5zcmNXaWR0aC9kKSxiLnNyY1g9KGEud2lkdGgtYi5zcmNXaWR0aCkvMixiLnNyY1k9KGEuaGVpZ2h0LWIuc3JjSGVpZ2h0KS8yLGJ9LGRyb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkei1kcmFnLWhvdmVyXCIpfSxkcmFnc3RhcnQ6ZyxkcmFnZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZHotZHJhZy1ob3ZlclwiKX0sZHJhZ2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZHotZHJhZy1ob3ZlclwiKX0sZHJhZ292ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkei1kcmFnLWhvdmVyXCIpfSxkcmFnbGVhdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkei1kcmFnLWhvdmVyXCIpfSxwYXN0ZTpnLHJlc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZHotc3RhcnRlZFwiKX0sYWRkZWRmaWxlOmZ1bmN0aW9uKGEpe3ZhciBiLGQsZSxmLGcsaCxpLGosayxsLG0sbixvO2lmKHRoaXMuZWxlbWVudD09PXRoaXMucHJldmlld3NDb250YWluZXImJnRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZHotc3RhcnRlZFwiKSx0aGlzLnByZXZpZXdzQ29udGFpbmVyKXtmb3IoYS5wcmV2aWV3RWxlbWVudD1jLmNyZWF0ZUVsZW1lbnQodGhpcy5vcHRpb25zLnByZXZpZXdUZW1wbGF0ZS50cmltKCkpLGEucHJldmlld1RlbXBsYXRlPWEucHJldmlld0VsZW1lbnQsdGhpcy5wcmV2aWV3c0NvbnRhaW5lci5hcHBlbmRDaGlsZChhLnByZXZpZXdFbGVtZW50KSxsPWEucHJldmlld0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWR6LW5hbWVdXCIpLGY9MCxpPWwubGVuZ3RoO2k+ZjtmKyspYj1sW2ZdLGIudGV4dENvbnRlbnQ9YS5uYW1lO2ZvcihtPWEucHJldmlld0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWR6LXNpemVdXCIpLGc9MCxqPW0ubGVuZ3RoO2o+ZztnKyspYj1tW2ddLGIuaW5uZXJIVE1MPXRoaXMuZmlsZXNpemUoYS5zaXplKTtmb3IodGhpcy5vcHRpb25zLmFkZFJlbW92ZUxpbmtzJiYoYS5fcmVtb3ZlTGluaz1jLmNyZWF0ZUVsZW1lbnQoJzxhIGNsYXNzPVwiZHotcmVtb3ZlXCIgaHJlZj1cImphdmFzY3JpcHQ6dW5kZWZpbmVkO1wiIGRhdGEtZHotcmVtb3ZlPicrdGhpcy5vcHRpb25zLmRpY3RSZW1vdmVGaWxlK1wiPC9hPlwiKSxhLnByZXZpZXdFbGVtZW50LmFwcGVuZENoaWxkKGEuX3JlbW92ZUxpbmspKSxkPWZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gZC5wcmV2ZW50RGVmYXVsdCgpLGQuc3RvcFByb3BhZ2F0aW9uKCksYS5zdGF0dXM9PT1jLlVQTE9BRElORz9jLmNvbmZpcm0oYi5vcHRpb25zLmRpY3RDYW5jZWxVcGxvYWRDb25maXJtYXRpb24sZnVuY3Rpb24oKXtyZXR1cm4gYi5yZW1vdmVGaWxlKGEpfSk6Yi5vcHRpb25zLmRpY3RSZW1vdmVGaWxlQ29uZmlybWF0aW9uP2MuY29uZmlybShiLm9wdGlvbnMuZGljdFJlbW92ZUZpbGVDb25maXJtYXRpb24sZnVuY3Rpb24oKXtyZXR1cm4gYi5yZW1vdmVGaWxlKGEpfSk6Yi5yZW1vdmVGaWxlKGEpfX0odGhpcyksbj1hLnByZXZpZXdFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1kei1yZW1vdmVdXCIpLG89W10saD0wLGs9bi5sZW5ndGg7az5oO2grKyllPW5baF0sby5wdXNoKGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZCkpO3JldHVybiBvfX0scmVtb3ZlZGZpbGU6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGEucHJldmlld0VsZW1lbnQmJm51bGwhPShiPWEucHJldmlld0VsZW1lbnQpJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYS5wcmV2aWV3RWxlbWVudCksdGhpcy5fdXBkYXRlTWF4RmlsZXNSZWFjaGVkQ2xhc3MoKX0sdGh1bWJuYWlsOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY7aWYoYS5wcmV2aWV3RWxlbWVudCl7Zm9yKGEucHJldmlld0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImR6LWZpbGUtcHJldmlld1wiKSxmPWEucHJldmlld0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWR6LXRodW1ibmFpbF1cIiksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyljPWZbZF0sYy5hbHQ9YS5uYW1lLGMuc3JjPWI7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZHotaW1hZ2UtcHJldmlld1wiKX19KHRoaXMpLDEpfX0sZXJyb3I6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnO2lmKGEucHJldmlld0VsZW1lbnQpe2ZvcihhLnByZXZpZXdFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkei1lcnJvclwiKSxcIlN0cmluZ1wiIT10eXBlb2YgYiYmYi5lcnJvciYmKGI9Yi5lcnJvciksZj1hLnByZXZpZXdFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1kei1lcnJvcm1lc3NhZ2VdXCIpLGc9W10sZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyljPWZbZF0sZy5wdXNoKGMudGV4dENvbnRlbnQ9Yik7cmV0dXJuIGd9fSxlcnJvcm11bHRpcGxlOmcscHJvY2Vzc2luZzpmdW5jdGlvbihhKXtyZXR1cm4gYS5wcmV2aWV3RWxlbWVudCYmKGEucHJldmlld0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcImR6LXByb2Nlc3NpbmdcIiksYS5fcmVtb3ZlTGluayk/YS5fcmVtb3ZlTGluay50ZXh0Q29udGVudD10aGlzLm9wdGlvbnMuZGljdENhbmNlbFVwbG9hZDp2b2lkIDB9LHByb2Nlc3NpbmdtdWx0aXBsZTpnLHVwbG9hZHByb2dyZXNzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZztpZihhLnByZXZpZXdFbGVtZW50KXtmb3IoZj1hLnByZXZpZXdFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1kei11cGxvYWRwcm9ncmVzc11cIiksZz1bXSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKWM9ZltkXSxnLnB1c2goXCJQUk9HUkVTU1wiPT09Yy5ub2RlTmFtZT9jLnZhbHVlPWI6Yy5zdHlsZS53aWR0aD1cIlwiK2IrXCIlXCIpO3JldHVybiBnfX0sdG90YWx1cGxvYWRwcm9ncmVzczpnLHNlbmRpbmc6ZyxzZW5kaW5nbXVsdGlwbGU6ZyxzdWNjZXNzOmZ1bmN0aW9uKGEpe3JldHVybiBhLnByZXZpZXdFbGVtZW50P2EucHJldmlld0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcImR6LXN1Y2Nlc3NcIik6dm9pZCAwfSxzdWNjZXNzbXVsdGlwbGU6ZyxjYW5jZWxlZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lbWl0KFwiZXJyb3JcIixhLFwiVXBsb2FkIGNhbmNlbGVkLlwiKX0sY2FuY2VsZWRtdWx0aXBsZTpnLGNvbXBsZXRlOmZ1bmN0aW9uKGEpe3JldHVybiBhLl9yZW1vdmVMaW5rJiYoYS5fcmVtb3ZlTGluay50ZXh0Q29udGVudD10aGlzLm9wdGlvbnMuZGljdFJlbW92ZUZpbGUpLGEucHJldmlld0VsZW1lbnQ/YS5wcmV2aWV3RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZHotY29tcGxldGVcIik6dm9pZCAwfSxjb21wbGV0ZW11bHRpcGxlOmcsbWF4ZmlsZXNleGNlZWRlZDpnLG1heGZpbGVzcmVhY2hlZDpnLHF1ZXVlY29tcGxldGU6ZyxhZGRlZGZpbGVzOmcscHJldmlld1RlbXBsYXRlOic8ZGl2IGNsYXNzPVwiZHotcHJldmlldyBkei1maWxlLXByZXZpZXdcIj5cXG4gIDxkaXYgY2xhc3M9XCJkei1pbWFnZVwiPjxpbWcgZGF0YS1kei10aHVtYm5haWwgLz48L2Rpdj5cXG4gIDxkaXYgY2xhc3M9XCJkei1kZXRhaWxzXCI+XFxuICAgIDxkaXYgY2xhc3M9XCJkei1zaXplXCI+PHNwYW4gZGF0YS1kei1zaXplPjwvc3Bhbj48L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cImR6LWZpbGVuYW1lXCI+PHNwYW4gZGF0YS1kei1uYW1lPjwvc3Bhbj48L2Rpdj5cXG4gIDwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cImR6LXByb2dyZXNzXCI+PHNwYW4gY2xhc3M9XCJkei11cGxvYWRcIiBkYXRhLWR6LXVwbG9hZHByb2dyZXNzPjwvc3Bhbj48L2Rpdj5cXG4gIDxkaXYgY2xhc3M9XCJkei1lcnJvci1tZXNzYWdlXCI+PHNwYW4gZGF0YS1kei1lcnJvcm1lc3NhZ2U+PC9zcGFuPjwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cImR6LXN1Y2Nlc3MtbWFya1wiPlxcbiAgICA8c3ZnIHdpZHRoPVwiNTRweFwiIGhlaWdodD1cIjU0cHhcIiB2aWV3Qm94PVwiMCAwIDU0IDU0XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4bWxuczpza2V0Y2g9XCJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnNcIj5cXG4gICAgICA8dGl0bGU+Q2hlY2s8L3RpdGxlPlxcbiAgICAgIDxkZWZzPjwvZGVmcz5cXG4gICAgICA8ZyBpZD1cIlBhZ2UtMVwiIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCIgc2tldGNoOnR5cGU9XCJNU1BhZ2VcIj5cXG4gICAgICAgIDxwYXRoIGQ9XCJNMjMuNSwzMS44NDMxNDU4IEwxNy41ODUyNDE5LDI1LjkyODM4NzcgQzE2LjAyNDgyNTMsMjQuMzY3OTcxMSAxMy40OTEwMjk0LDI0LjM2NjgzNSAxMS45Mjg5MzIyLDI1LjkyODkzMjIgQzEwLjM3MDAxMzYsMjcuNDg3ODUwOCAxMC4zNjY1OTEyLDMwLjAyMzQ0NTUgMTEuOTI4Mzg3NywzMS41ODUyNDE5IEwyMC40MTQ3NTgxLDQwLjA3MTYxMjMgQzIwLjUxMzM5OTksNDAuMTcwMjU0MSAyMC42MTU5MzE1LDQwLjI2MjY2NDkgMjAuNzIxODYxNSw0MC4zNDg4NDM1IEMyMi4yODM1NjY5LDQxLjg3MjU2NTEgMjQuNzk0MjM0LDQxLjg2MjYyMDIgMjYuMzQ2MTU2NCw0MC4zMTA2OTc4IEw0My4zMTA2OTc4LDIzLjM0NjE1NjQgQzQ0Ljg3NzEwMjEsMjEuNzc5NzUyMSA0NC44NzU4MDU3LDE5LjI0ODM4ODcgNDMuMzEzNzA4NSwxNy42ODYyOTE1IEM0MS43NTQ3ODk5LDE2LjEyNzM3MjkgMzkuMjE3NjAzNSwxNi4xMjU1NDIyIDM3LjY1Mzg0MzYsMTcuNjg5MzAyMiBMMjMuNSwzMS44NDMxNDU4IFogTTI3LDUzIEM0MS4zNTk0MDM1LDUzIDUzLDQxLjM1OTQwMzUgNTMsMjcgQzUzLDEyLjY0MDU5NjUgNDEuMzU5NDAzNSwxIDI3LDEgQzEyLjY0MDU5NjUsMSAxLDEyLjY0MDU5NjUgMSwyNyBDMSw0MS4zNTk0MDM1IDEyLjY0MDU5NjUsNTMgMjcsNTMgWlwiIGlkPVwiT3ZhbC0yXCIgc3Ryb2tlLW9wYWNpdHk9XCIwLjE5ODc5NDE1OFwiIHN0cm9rZT1cIiM3NDc0NzRcIiBmaWxsLW9wYWNpdHk9XCIwLjgxNjUxOTQ3NVwiIGZpbGw9XCIjRkZGRkZGXCIgc2tldGNoOnR5cGU9XCJNU1NoYXBlR3JvdXBcIj48L3BhdGg+XFxuICAgICAgPC9nPlxcbiAgICA8L3N2Zz5cXG4gIDwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cImR6LWVycm9yLW1hcmtcIj5cXG4gICAgPHN2ZyB3aWR0aD1cIjU0cHhcIiBoZWlnaHQ9XCI1NHB4XCIgdmlld0JveD1cIjAgMCA1NCA1NFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeG1sbnM6c2tldGNoPVwiaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zXCI+XFxuICAgICAgPHRpdGxlPkVycm9yPC90aXRsZT5cXG4gICAgICA8ZGVmcz48L2RlZnM+XFxuICAgICAgPGcgaWQ9XCJQYWdlLTFcIiBzdHJva2U9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIGZpbGw9XCJub25lXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiIHNrZXRjaDp0eXBlPVwiTVNQYWdlXCI+XFxuICAgICAgICA8ZyBpZD1cIkNoZWNrLSstT3ZhbC0yXCIgc2tldGNoOnR5cGU9XCJNU0xheWVyR3JvdXBcIiBzdHJva2U9XCIjNzQ3NDc0XCIgc3Ryb2tlLW9wYWNpdHk9XCIwLjE5ODc5NDE1OFwiIGZpbGw9XCIjRkZGRkZGXCIgZmlsbC1vcGFjaXR5PVwiMC44MTY1MTk0NzVcIj5cXG4gICAgICAgICAgPHBhdGggZD1cIk0zMi42NTY4NTQyLDI5IEwzOC4zMTA2OTc4LDIzLjM0NjE1NjQgQzM5Ljg3NzEwMjEsMjEuNzc5NzUyMSAzOS44NzU4MDU3LDE5LjI0ODM4ODcgMzguMzEzNzA4NSwxNy42ODYyOTE1IEMzNi43NTQ3ODk5LDE2LjEyNzM3MjkgMzQuMjE3NjAzNSwxNi4xMjU1NDIyIDMyLjY1Mzg0MzYsMTcuNjg5MzAyMiBMMjcsMjMuMzQzMTQ1OCBMMjEuMzQ2MTU2NCwxNy42ODkzMDIyIEMxOS43ODIzOTY1LDE2LjEyNTU0MjIgMTcuMjQ1MjEwMSwxNi4xMjczNzI5IDE1LjY4NjI5MTUsMTcuNjg2MjkxNSBDMTQuMTI0MTk0MywxOS4yNDgzODg3IDE0LjEyMjg5NzksMjEuNzc5NzUyMSAxNS42ODkzMDIyLDIzLjM0NjE1NjQgTDIxLjM0MzE0NTgsMjkgTDE1LjY4OTMwMjIsMzQuNjUzODQzNiBDMTQuMTIyODk3OSwzNi4yMjAyNDc5IDE0LjEyNDE5NDMsMzguNzUxNjExMyAxNS42ODYyOTE1LDQwLjMxMzcwODUgQzE3LjI0NTIxMDEsNDEuODcyNjI3MSAxOS43ODIzOTY1LDQxLjg3NDQ1NzggMjEuMzQ2MTU2NCw0MC4zMTA2OTc4IEwyNywzNC42NTY4NTQyIEwzMi42NTM4NDM2LDQwLjMxMDY5NzggQzM0LjIxNzYwMzUsNDEuODc0NDU3OCAzNi43NTQ3ODk5LDQxLjg3MjYyNzEgMzguMzEzNzA4NSw0MC4zMTM3MDg1IEMzOS44NzU4MDU3LDM4Ljc1MTYxMTMgMzkuODc3MTAyMSwzNi4yMjAyNDc5IDM4LjMxMDY5NzgsMzQuNjUzODQzNiBMMzIuNjU2ODU0MiwyOSBaIE0yNyw1MyBDNDEuMzU5NDAzNSw1MyA1Myw0MS4zNTk0MDM1IDUzLDI3IEM1MywxMi42NDA1OTY1IDQxLjM1OTQwMzUsMSAyNywxIEMxMi42NDA1OTY1LDEgMSwxMi42NDA1OTY1IDEsMjcgQzEsNDEuMzU5NDAzNSAxMi42NDA1OTY1LDUzIDI3LDUzIFpcIiBpZD1cIk92YWwtMlwiIHNrZXRjaDp0eXBlPVwiTVNTaGFwZUdyb3VwXCI+PC9wYXRoPlxcbiAgICAgICAgPC9nPlxcbiAgICAgIDwvZz5cXG4gICAgPC9zdmc+XFxuICA8L2Rpdj5cXG48L2Rpdj4nfSxkPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc7Zm9yKGQ9YXJndW1lbnRzWzBdLGM9Mjw9YXJndW1lbnRzLmxlbmd0aD9pLmNhbGwoYXJndW1lbnRzLDEpOltdLGY9MCxnPWMubGVuZ3RoO2c+ZjtmKyspe2I9Y1tmXTtmb3IoYSBpbiBiKWU9YlthXSxkW2FdPWV9cmV0dXJuIGR9LGMucHJvdG90eXBlLmdldEFjY2VwdGVkRmlsZXM9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlO2ZvcihkPXRoaXMuZmlsZXMsZT1bXSxiPTAsYz1kLmxlbmd0aDtjPmI7YisrKWE9ZFtiXSxhLmFjY2VwdGVkJiZlLnB1c2goYSk7cmV0dXJuIGV9LGMucHJvdG90eXBlLmdldFJlamVjdGVkRmlsZXM9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlO2ZvcihkPXRoaXMuZmlsZXMsZT1bXSxiPTAsYz1kLmxlbmd0aDtjPmI7YisrKWE9ZFtiXSxhLmFjY2VwdGVkfHxlLnB1c2goYSk7cmV0dXJuIGV9LGMucHJvdG90eXBlLmdldEZpbGVzV2l0aFN0YXR1cz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmO2ZvcihlPXRoaXMuZmlsZXMsZj1bXSxjPTAsZD1lLmxlbmd0aDtkPmM7YysrKWI9ZVtjXSxiLnN0YXR1cz09PWEmJmYucHVzaChiKTtyZXR1cm4gZn0sYy5wcm90b3R5cGUuZ2V0UXVldWVkRmlsZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRGaWxlc1dpdGhTdGF0dXMoYy5RVUVVRUQpfSxjLnByb3RvdHlwZS5nZXRVcGxvYWRpbmdGaWxlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEZpbGVzV2l0aFN0YXR1cyhjLlVQTE9BRElORyl9LGMucHJvdG90eXBlLmdldEFkZGVkRmlsZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRGaWxlc1dpdGhTdGF0dXMoYy5BRERFRCl9LGMucHJvdG90eXBlLmdldEFjdGl2ZUZpbGVzPWZ1bmN0aW9uKCl7dmFyIGEsYixkLGUsZjtmb3IoZT10aGlzLmZpbGVzLGY9W10sYj0wLGQ9ZS5sZW5ndGg7ZD5iO2IrKylhPWVbYl0sKGEuc3RhdHVzPT09Yy5VUExPQURJTkd8fGEuc3RhdHVzPT09Yy5RVUVVRUQpJiZmLnB1c2goYSk7cmV0dXJuIGZ9LGMucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGQsZSxmLGcsaDtmb3IoXCJmb3JtXCI9PT10aGlzLmVsZW1lbnQudGFnTmFtZSYmdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImVuY3R5cGVcIixcIm11bHRpcGFydC9mb3JtLWRhdGFcIiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImRyb3B6b25lXCIpJiYhdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZHotbWVzc2FnZVwiKSYmdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGMuY3JlYXRlRWxlbWVudCgnPGRpdiBjbGFzcz1cImR6LWRlZmF1bHQgZHotbWVzc2FnZVwiPjxzcGFuPicrdGhpcy5vcHRpb25zLmRpY3REZWZhdWx0TWVzc2FnZStcIjwvc3Bhbj48L2Rpdj5cIikpLHRoaXMuY2xpY2thYmxlRWxlbWVudHMubGVuZ3RoJiYoZD1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5oaWRkZW5GaWxlSW5wdXQmJmEuaGlkZGVuRmlsZUlucHV0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYS5oaWRkZW5GaWxlSW5wdXQpLGEuaGlkZGVuRmlsZUlucHV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxhLmhpZGRlbkZpbGVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJmaWxlXCIpLChudWxsPT1hLm9wdGlvbnMubWF4RmlsZXN8fGEub3B0aW9ucy5tYXhGaWxlcz4xKSYmYS5oaWRkZW5GaWxlSW5wdXQuc2V0QXR0cmlidXRlKFwibXVsdGlwbGVcIixcIm11bHRpcGxlXCIpLGEuaGlkZGVuRmlsZUlucHV0LmNsYXNzTmFtZT1cImR6LWhpZGRlbi1pbnB1dFwiLG51bGwhPWEub3B0aW9ucy5hY2NlcHRlZEZpbGVzJiZhLmhpZGRlbkZpbGVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJhY2NlcHRcIixhLm9wdGlvbnMuYWNjZXB0ZWRGaWxlcyksbnVsbCE9YS5vcHRpb25zLmNhcHR1cmUmJmEuaGlkZGVuRmlsZUlucHV0LnNldEF0dHJpYnV0ZShcImNhcHR1cmVcIixhLm9wdGlvbnMuY2FwdHVyZSksYS5oaWRkZW5GaWxlSW5wdXQuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLGEuaGlkZGVuRmlsZUlucHV0LnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixhLmhpZGRlbkZpbGVJbnB1dC5zdHlsZS50b3A9XCIwXCIsYS5oaWRkZW5GaWxlSW5wdXQuc3R5bGUubGVmdD1cIjBcIixhLmhpZGRlbkZpbGVJbnB1dC5zdHlsZS5oZWlnaHQ9XCIwXCIsYS5oaWRkZW5GaWxlSW5wdXQuc3R5bGUud2lkdGg9XCIwXCIsZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhLm9wdGlvbnMuaGlkZGVuSW5wdXRDb250YWluZXIpLmFwcGVuZENoaWxkKGEuaGlkZGVuRmlsZUlucHV0KSxhLmhpZGRlbkZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXt2YXIgYixjLGUsZjtpZihjPWEuaGlkZGVuRmlsZUlucHV0LmZpbGVzLGMubGVuZ3RoKWZvcihlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKWI9Y1tlXSxhLmFkZEZpbGUoYik7cmV0dXJuIGEuZW1pdChcImFkZGVkZmlsZXNcIixjKSxkKCl9KX19KHRoaXMpKSgpLHRoaXMuVVJMPW51bGwhPShnPXdpbmRvdy5VUkwpP2c6d2luZG93LndlYmtpdFVSTCxoPXRoaXMuZXZlbnRzLGU9MCxmPWgubGVuZ3RoO2Y+ZTtlKyspYT1oW2VdLHRoaXMub24oYSx0aGlzLm9wdGlvbnNbYV0pO3JldHVybiB0aGlzLm9uKFwidXBsb2FkcHJvZ3Jlc3NcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS51cGRhdGVUb3RhbFVwbG9hZFByb2dyZXNzKCl9fSh0aGlzKSksdGhpcy5vbihcInJlbW92ZWRmaWxlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEudXBkYXRlVG90YWxVcGxvYWRQcm9ncmVzcygpfX0odGhpcykpLHRoaXMub24oXCJjYW5jZWxlZFwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5lbWl0KFwiY29tcGxldGVcIixiKX19KHRoaXMpKSx0aGlzLm9uKFwiY29tcGxldGVcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gMD09PWEuZ2V0QWRkZWRGaWxlcygpLmxlbmd0aCYmMD09PWEuZ2V0VXBsb2FkaW5nRmlsZXMoKS5sZW5ndGgmJjA9PT1hLmdldFF1ZXVlZEZpbGVzKCkubGVuZ3RoP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gYS5lbWl0KFwicXVldWVjb21wbGV0ZVwiKX0sMCk6dm9pZCAwfX0odGhpcykpLGI9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMX0sdGhpcy5saXN0ZW5lcnM9W3tlbGVtZW50OnRoaXMuZWxlbWVudCxldmVudHM6e2RyYWdzdGFydDpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuZW1pdChcImRyYWdzdGFydFwiLGIpfX0odGhpcyksZHJhZ2VudGVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4gYihjKSxhLmVtaXQoXCJkcmFnZW50ZXJcIixjKX19KHRoaXMpLGRyYWdvdmVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXt2YXIgZDt0cnl7ZD1jLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkfWNhdGNoKGUpe31yZXR1cm4gYy5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD1cIm1vdmVcIj09PWR8fFwibGlua01vdmVcIj09PWQ/XCJtb3ZlXCI6XCJjb3B5XCIsYihjKSxhLmVtaXQoXCJkcmFnb3ZlclwiLGMpfX0odGhpcyksZHJhZ2xlYXZlOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5lbWl0KFwiZHJhZ2xlYXZlXCIsYil9fSh0aGlzKSxkcm9wOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4gYihjKSxhLmRyb3AoYyl9fSh0aGlzKSxkcmFnZW5kOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5lbWl0KFwiZHJhZ2VuZFwiLGIpfX0odGhpcyl9fV0sdGhpcy5jbGlja2FibGVFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5saXN0ZW5lcnMucHVzaCh7ZWxlbWVudDpiLGV2ZW50czp7Y2xpY2s6ZnVuY3Rpb24oZCl7cmV0dXJuKGIhPT1hLmVsZW1lbnR8fGQudGFyZ2V0PT09YS5lbGVtZW50fHxjLmVsZW1lbnRJbnNpZGUoZC50YXJnZXQsYS5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZHotbWVzc2FnZVwiKSkpJiZhLmhpZGRlbkZpbGVJbnB1dC5jbGljaygpLCEwfX19KX19KHRoaXMpKSx0aGlzLmVuYWJsZSgpLHRoaXMub3B0aW9ucy5pbml0LmNhbGwodGhpcyl9LGMucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gdGhpcy5kaXNhYmxlKCksdGhpcy5yZW1vdmVBbGxGaWxlcyghMCksKG51bGwhPShhPXRoaXMuaGlkZGVuRmlsZUlucHV0KT9hLnBhcmVudE5vZGU6dm9pZCAwKSYmKHRoaXMuaGlkZGVuRmlsZUlucHV0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5oaWRkZW5GaWxlSW5wdXQpLHRoaXMuaGlkZGVuRmlsZUlucHV0PW51bGwpLGRlbGV0ZSB0aGlzLmVsZW1lbnQuZHJvcHpvbmUsYy5pbnN0YW5jZXMuc3BsaWNlKGMuaW5zdGFuY2VzLmluZGV4T2YodGhpcyksMSl9LGMucHJvdG90eXBlLnVwZGF0ZVRvdGFsVXBsb2FkUHJvZ3Jlc3M9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZyxoO2lmKGQ9MCxjPTAsYT10aGlzLmdldEFjdGl2ZUZpbGVzKCksYS5sZW5ndGgpe2ZvcihoPXRoaXMuZ2V0QWN0aXZlRmlsZXMoKSxmPTAsZz1oLmxlbmd0aDtnPmY7ZisrKWI9aFtmXSxkKz1iLnVwbG9hZC5ieXRlc1NlbnQsYys9Yi51cGxvYWQudG90YWw7ZT0xMDAqZC9jfWVsc2UgZT0xMDA7cmV0dXJuIHRoaXMuZW1pdChcInRvdGFsdXBsb2FkcHJvZ3Jlc3NcIixlLGMsZCl9LGMucHJvdG90eXBlLl9nZXRQYXJhbU5hbWU9ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5vcHRpb25zLnBhcmFtTmFtZT90aGlzLm9wdGlvbnMucGFyYW1OYW1lKGEpOlwiXCIrdGhpcy5vcHRpb25zLnBhcmFtTmFtZSsodGhpcy5vcHRpb25zLnVwbG9hZE11bHRpcGxlP1wiW1wiK2ErXCJdXCI6XCJcIil9LGMucHJvdG90eXBlLmdldEZhbGxiYWNrRm9ybT1mdW5jdGlvbigpe3ZhciBhLGIsZCxlO3JldHVybihhPXRoaXMuZ2V0RXhpc3RpbmdGYWxsYmFjaygpKT9hOihkPSc8ZGl2IGNsYXNzPVwiZHotZmFsbGJhY2tcIj4nLHRoaXMub3B0aW9ucy5kaWN0RmFsbGJhY2tUZXh0JiYoZCs9XCI8cD5cIit0aGlzLm9wdGlvbnMuZGljdEZhbGxiYWNrVGV4dCtcIjwvcD5cIiksZCs9JzxpbnB1dCB0eXBlPVwiZmlsZVwiIG5hbWU9XCInK3RoaXMuX2dldFBhcmFtTmFtZSgwKSsnXCIgJysodGhpcy5vcHRpb25zLnVwbG9hZE11bHRpcGxlPydtdWx0aXBsZT1cIm11bHRpcGxlXCInOnZvaWQgMCkrJyAvPjxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJVcGxvYWQhXCI+PC9kaXY+JyxiPWMuY3JlYXRlRWxlbWVudChkKSxcIkZPUk1cIiE9PXRoaXMuZWxlbWVudC50YWdOYW1lPyhlPWMuY3JlYXRlRWxlbWVudCgnPGZvcm0gYWN0aW9uPVwiJyt0aGlzLm9wdGlvbnMudXJsKydcIiBlbmN0eXBlPVwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiIG1ldGhvZD1cIicrdGhpcy5vcHRpb25zLm1ldGhvZCsnXCI+PC9mb3JtPicpLGUuYXBwZW5kQ2hpbGQoYikpOih0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZW5jdHlwZVwiLFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiKSx0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWV0aG9kXCIsdGhpcy5vcHRpb25zLm1ldGhvZCkpLG51bGwhPWU/ZTpiKX0sYy5wcm90b3R5cGUuZ2V0RXhpc3RpbmdGYWxsYmFjaz1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZjtmb3IoYj1mdW5jdGlvbihhKXt2YXIgYixjLGQ7Zm9yKGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYj1hW2NdLC8oXnwgKWZhbGxiYWNrKCR8ICkvLnRlc3QoYi5jbGFzc05hbWUpKXJldHVybiBifSxmPVtcImRpdlwiLFwiZm9ybVwiXSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKWlmKGM9ZltkXSxhPWIodGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGMpKSlyZXR1cm4gYX0sYy5wcm90b3R5cGUuc2V0dXBFdmVudExpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnO2ZvcihmPXRoaXMubGlzdGVuZXJzLGc9W10sZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKylhPWZbZF0sZy5wdXNoKGZ1bmN0aW9uKCl7dmFyIGQsZTtkPWEuZXZlbnRzLGU9W107Zm9yKGIgaW4gZCljPWRbYl0sZS5wdXNoKGEuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGIsYywhMSkpO3JldHVybiBlfSgpKTtyZXR1cm4gZ30sYy5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZztmb3IoZj10aGlzLmxpc3RlbmVycyxnPVtdLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspYT1mW2RdLGcucHVzaChmdW5jdGlvbigpe3ZhciBkLGU7ZD1hLmV2ZW50cyxlPVtdO2ZvcihiIGluIGQpYz1kW2JdLGUucHVzaChhLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpKTtyZXR1cm4gZX0oKSk7cmV0dXJuIGd9LGMucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlO2Zvcih0aGlzLmNsaWNrYWJsZUVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2xhc3NMaXN0LnJlbW92ZShcImR6LWNsaWNrYWJsZVwiKX0pLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSxkPXRoaXMuZmlsZXMsZT1bXSxiPTAsYz1kLmxlbmd0aDtjPmI7YisrKWE9ZFtiXSxlLnB1c2godGhpcy5jYW5jZWxVcGxvYWQoYSkpO3JldHVybiBlfSxjLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbGlja2FibGVFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNsYXNzTGlzdC5hZGQoXCJkei1jbGlja2FibGVcIil9KSx0aGlzLnNldHVwRXZlbnRMaXN0ZW5lcnMoKX0sYy5wcm90b3R5cGUuZmlsZXNpemU9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaTtpZihkPTAsZT1cImJcIixhPjApe2ZvcihnPVtcIlRCXCIsXCJHQlwiLFwiTUJcIixcIktCXCIsXCJiXCJdLGM9aD0wLGk9Zy5sZW5ndGg7aT5oO2M9KytoKWlmKGY9Z1tjXSxiPU1hdGgucG93KHRoaXMub3B0aW9ucy5maWxlc2l6ZUJhc2UsNC1jKS8xMCxhPj1iKXtkPWEvTWF0aC5wb3codGhpcy5vcHRpb25zLmZpbGVzaXplQmFzZSw0LWMpLGU9ZjticmVha31kPU1hdGgucm91bmQoMTAqZCkvMTB9cmV0dXJuXCI8c3Ryb25nPlwiK2QrXCI8L3N0cm9uZz4gXCIrZX0sYy5wcm90b3R5cGUuX3VwZGF0ZU1heEZpbGVzUmVhY2hlZENsYXNzPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPXRoaXMub3B0aW9ucy5tYXhGaWxlcyYmdGhpcy5nZXRBY2NlcHRlZEZpbGVzKCkubGVuZ3RoPj10aGlzLm9wdGlvbnMubWF4RmlsZXM/KHRoaXMuZ2V0QWNjZXB0ZWRGaWxlcygpLmxlbmd0aD09PXRoaXMub3B0aW9ucy5tYXhGaWxlcyYmdGhpcy5lbWl0KFwibWF4ZmlsZXNyZWFjaGVkXCIsdGhpcy5maWxlcyksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkei1tYXgtZmlsZXMtcmVhY2hlZFwiKSk6dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkei1tYXgtZmlsZXMtcmVhY2hlZFwiKX0sYy5wcm90b3R5cGUuZHJvcD1mdW5jdGlvbihhKXt2YXIgYixjO2EuZGF0YVRyYW5zZmVyJiYodGhpcy5lbWl0KFwiZHJvcFwiLGEpLGI9YS5kYXRhVHJhbnNmZXIuZmlsZXMsdGhpcy5lbWl0KFwiYWRkZWRmaWxlc1wiLGIpLGIubGVuZ3RoJiYoYz1hLmRhdGFUcmFuc2Zlci5pdGVtcyxjJiZjLmxlbmd0aCYmbnVsbCE9Y1swXS53ZWJraXRHZXRBc0VudHJ5P3RoaXMuX2FkZEZpbGVzRnJvbUl0ZW1zKGMpOnRoaXMuaGFuZGxlRmlsZXMoYikpKX0sYy5wcm90b3R5cGUucGFzdGU9ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihudWxsIT0obnVsbCE9YSYmbnVsbCE9KGM9YS5jbGlwYm9hcmREYXRhKT9jLml0ZW1zOnZvaWQgMCkpcmV0dXJuIHRoaXMuZW1pdChcInBhc3RlXCIsYSksYj1hLmNsaXBib2FyZERhdGEuaXRlbXMsYi5sZW5ndGg/dGhpcy5fYWRkRmlsZXNGcm9tSXRlbXMoYik6dm9pZCAwfSxjLnByb3RvdHlwZS5oYW5kbGVGaWxlcz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZTtmb3IoZT1bXSxjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWI9YVtjXSxlLnB1c2godGhpcy5hZGRGaWxlKGIpKTtyZXR1cm4gZX0sYy5wcm90b3R5cGUuX2FkZEZpbGVzRnJvbUl0ZW1zPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGY7Zm9yKGY9W10sZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyljPWFbZF0sZi5wdXNoKG51bGwhPWMud2Via2l0R2V0QXNFbnRyeSYmKGI9Yy53ZWJraXRHZXRBc0VudHJ5KCkpP2IuaXNGaWxlP3RoaXMuYWRkRmlsZShjLmdldEFzRmlsZSgpKTpiLmlzRGlyZWN0b3J5P3RoaXMuX2FkZEZpbGVzRnJvbURpcmVjdG9yeShiLGIubmFtZSk6dm9pZCAwOm51bGwhPWMuZ2V0QXNGaWxlP251bGw9PWMua2luZHx8XCJmaWxlXCI9PT1jLmtpbmQ/dGhpcy5hZGRGaWxlKGMuZ2V0QXNGaWxlKCkpOnZvaWQgMDp2b2lkIDApO3JldHVybiBmfSxjLnByb3RvdHlwZS5fYWRkRmlsZXNGcm9tRGlyZWN0b3J5PWZ1bmN0aW9uKGEsYil7dmFyIGMsZDtyZXR1cm4gYz1hLmNyZWF0ZVJlYWRlcigpLGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkLGUsZjtmb3IoZT0wLGY9Yy5sZW5ndGg7Zj5lO2UrKylkPWNbZV0sZC5pc0ZpbGU/ZC5maWxlKGZ1bmN0aW9uKGMpe3JldHVybiBhLm9wdGlvbnMuaWdub3JlSGlkZGVuRmlsZXMmJlwiLlwiPT09Yy5uYW1lLnN1YnN0cmluZygwLDEpP3ZvaWQgMDooYy5mdWxsUGF0aD1cIlwiK2IrXCIvXCIrYy5uYW1lLGEuYWRkRmlsZShjKSl9KTpkLmlzRGlyZWN0b3J5JiZhLl9hZGRGaWxlc0Zyb21EaXJlY3RvcnkoZCxcIlwiK2IrXCIvXCIrZC5uYW1lKX19KHRoaXMpLGMucmVhZEVudHJpZXMoZCxmdW5jdGlvbihhKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgY29uc29sZSYmbnVsbCE9PWNvbnNvbGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGNvbnNvbGUubG9nP2NvbnNvbGUubG9nKGEpOnZvaWQgMH0pfSxjLnByb3RvdHlwZS5hY2NlcHQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5zaXplPjEwMjQqdGhpcy5vcHRpb25zLm1heEZpbGVzaXplKjEwMjQ/Yih0aGlzLm9wdGlvbnMuZGljdEZpbGVUb29CaWcucmVwbGFjZShcInt7ZmlsZXNpemV9fVwiLE1hdGgucm91bmQoYS5zaXplLzEwMjQvMTAuMjQpLzEwMCkucmVwbGFjZShcInt7bWF4RmlsZXNpemV9fVwiLHRoaXMub3B0aW9ucy5tYXhGaWxlc2l6ZSkpOmMuaXNWYWxpZEZpbGUoYSx0aGlzLm9wdGlvbnMuYWNjZXB0ZWRGaWxlcyk/bnVsbCE9dGhpcy5vcHRpb25zLm1heEZpbGVzJiZ0aGlzLmdldEFjY2VwdGVkRmlsZXMoKS5sZW5ndGg+PXRoaXMub3B0aW9ucy5tYXhGaWxlcz8oYih0aGlzLm9wdGlvbnMuZGljdE1heEZpbGVzRXhjZWVkZWQucmVwbGFjZShcInt7bWF4RmlsZXN9fVwiLHRoaXMub3B0aW9ucy5tYXhGaWxlcykpLHRoaXMuZW1pdChcIm1heGZpbGVzZXhjZWVkZWRcIixhKSk6dGhpcy5vcHRpb25zLmFjY2VwdC5jYWxsKHRoaXMsYSxiKTpiKHRoaXMub3B0aW9ucy5kaWN0SW52YWxpZEZpbGVUeXBlKX0sYy5wcm90b3R5cGUuYWRkRmlsZT1mdW5jdGlvbihhKXtyZXR1cm4gYS51cGxvYWQ9e3Byb2dyZXNzOjAsdG90YWw6YS5zaXplLGJ5dGVzU2VudDowfSx0aGlzLmZpbGVzLnB1c2goYSksYS5zdGF0dXM9Yy5BRERFRCx0aGlzLmVtaXQoXCJhZGRlZGZpbGVcIixhKSx0aGlzLl9lbnF1ZXVlVGh1bWJuYWlsKGEpLHRoaXMuYWNjZXB0KGEsZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBjPyhhLmFjY2VwdGVkPSExLGIuX2Vycm9yUHJvY2Vzc2luZyhbYV0sYykpOihhLmFjY2VwdGVkPSEwLGIub3B0aW9ucy5hdXRvUXVldWUmJmIuZW5xdWV1ZUZpbGUoYSkpLGIuX3VwZGF0ZU1heEZpbGVzUmVhY2hlZENsYXNzKCl9fSh0aGlzKSl9LGMucHJvdG90eXBlLmVucXVldWVGaWxlcz1mdW5jdGlvbihhKXt2YXIgYixjLGQ7Zm9yKGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspYj1hW2NdLHRoaXMuZW5xdWV1ZUZpbGUoYik7cmV0dXJuIG51bGx9LGMucHJvdG90eXBlLmVucXVldWVGaWxlPWZ1bmN0aW9uKGEpe2lmKGEuc3RhdHVzIT09Yy5BRERFRHx8YS5hY2NlcHRlZCE9PSEwKXRocm93IG5ldyBFcnJvcihcIlRoaXMgZmlsZSBjYW4ndCBiZSBxdWV1ZWQgYmVjYXVzZSBpdCBoYXMgYWxyZWFkeSBiZWVuIHByb2Nlc3NlZCBvciB3YXMgcmVqZWN0ZWQuXCIpO3JldHVybiBhLnN0YXR1cz1jLlFVRVVFRCx0aGlzLm9wdGlvbnMuYXV0b1Byb2Nlc3NRdWV1ZT9zZXRUaW1lb3V0KGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLnByb2Nlc3NRdWV1ZSgpfX0odGhpcyksMCk6dm9pZCAwfSxjLnByb3RvdHlwZS5fdGh1bWJuYWlsUXVldWU9W10sYy5wcm90b3R5cGUuX3Byb2Nlc3NpbmdUaHVtYm5haWw9ITEsYy5wcm90b3R5cGUuX2VucXVldWVUaHVtYm5haWw9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub3B0aW9ucy5jcmVhdGVJbWFnZVRodW1ibmFpbHMmJmEudHlwZS5tYXRjaCgvaW1hZ2UuKi8pJiZhLnNpemU8PTEwMjQqdGhpcy5vcHRpb25zLm1heFRodW1ibmFpbEZpbGVzaXplKjEwMjQ/KHRoaXMuX3RodW1ibmFpbFF1ZXVlLnB1c2goYSksc2V0VGltZW91dChmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5fcHJvY2Vzc1RodW1ibmFpbFF1ZXVlKCl9fSh0aGlzKSwwKSk6dm9pZCAwfSxjLnByb3RvdHlwZS5fcHJvY2Vzc1RodW1ibmFpbFF1ZXVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb2Nlc3NpbmdUaHVtYm5haWx8fDA9PT10aGlzLl90aHVtYm5haWxRdWV1ZS5sZW5ndGg/dm9pZCAwOih0aGlzLl9wcm9jZXNzaW5nVGh1bWJuYWlsPSEwLHRoaXMuY3JlYXRlVGh1bWJuYWlsKHRoaXMuX3RodW1ibmFpbFF1ZXVlLnNoaWZ0KCksZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuX3Byb2Nlc3NpbmdUaHVtYm5haWw9ITEsYS5fcHJvY2Vzc1RodW1ibmFpbFF1ZXVlKCl9fSh0aGlzKSkpfSxjLnByb3RvdHlwZS5yZW1vdmVGaWxlPWZ1bmN0aW9uKGEpe3JldHVybiBhLnN0YXR1cz09PWMuVVBMT0FESU5HJiZ0aGlzLmNhbmNlbFVwbG9hZChhKSx0aGlzLmZpbGVzPWgodGhpcy5maWxlcyxhKSx0aGlzLmVtaXQoXCJyZW1vdmVkZmlsZVwiLGEpLDA9PT10aGlzLmZpbGVzLmxlbmd0aD90aGlzLmVtaXQoXCJyZXNldFwiKTp2b2lkIDB9LGMucHJvdG90eXBlLnJlbW92ZUFsbEZpbGVzPWZ1bmN0aW9uKGEpe3ZhciBiLGQsZSxmO2ZvcihudWxsPT1hJiYoYT0hMSksZj10aGlzLmZpbGVzLnNsaWNlKCksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyliPWZbZF0sKGIuc3RhdHVzIT09Yy5VUExPQURJTkd8fGEpJiZ0aGlzLnJlbW92ZUZpbGUoYik7cmV0dXJuIG51bGx9LGMucHJvdG90eXBlLmNyZWF0ZVRodW1ibmFpbD1mdW5jdGlvbihhLGIpe3ZhciBjO3JldHVybiBjPW5ldyBGaWxlUmVhZGVyLGMub25sb2FkPWZ1bmN0aW9uKGQpe3JldHVybiBmdW5jdGlvbigpe3JldHVyblwiaW1hZ2Uvc3ZnK3htbFwiPT09YS50eXBlPyhkLmVtaXQoXCJ0aHVtYm5haWxcIixhLGMucmVzdWx0KSx2b2lkKG51bGwhPWImJmIoKSkpOmQuY3JlYXRlVGh1bWJuYWlsRnJvbVVybChhLGMucmVzdWx0LGIpfX0odGhpcyksYy5yZWFkQXNEYXRhVVJMKGEpfSxjLnByb3RvdHlwZS5jcmVhdGVUaHVtYm5haWxGcm9tVXJsPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlO3JldHVybiBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiksZCYmKGUuY3Jvc3NPcmlnaW49ZCksZS5vbmxvYWQ9ZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQsZyxoLGksaixrLGwsbTtyZXR1cm4gYS53aWR0aD1lLndpZHRoLGEuaGVpZ2h0PWUuaGVpZ2h0LGg9Yi5vcHRpb25zLnJlc2l6ZS5jYWxsKGIsYSksbnVsbD09aC50cmdXaWR0aCYmKGgudHJnV2lkdGg9aC5vcHRXaWR0aCksbnVsbD09aC50cmdIZWlnaHQmJihoLnRyZ0hlaWdodD1oLm9wdEhlaWdodCksZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLGc9ZC5nZXRDb250ZXh0KFwiMmRcIiksZC53aWR0aD1oLnRyZ1dpZHRoLGQuaGVpZ2h0PWgudHJnSGVpZ2h0LGYoZyxlLG51bGwhPShqPWguc3JjWCk/ajowLG51bGwhPShrPWguc3JjWSk/azowLGguc3JjV2lkdGgsaC5zcmNIZWlnaHQsbnVsbCE9KGw9aC50cmdYKT9sOjAsbnVsbCE9KG09aC50cmdZKT9tOjAsaC50cmdXaWR0aCxoLnRyZ0hlaWdodCksaT1kLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKSxiLmVtaXQoXCJ0aHVtYm5haWxcIixhLGkpLG51bGwhPWM/YygpOnZvaWQgMH19KHRoaXMpLG51bGwhPWMmJihlLm9uZXJyb3I9YyksZS5zcmM9Yn0sYy5wcm90b3R5cGUucHJvY2Vzc1F1ZXVlPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQ7aWYoYj10aGlzLm9wdGlvbnMucGFyYWxsZWxVcGxvYWRzLGM9dGhpcy5nZXRVcGxvYWRpbmdGaWxlcygpLmxlbmd0aCxhPWMsIShjPj1iKSYmKGQ9dGhpcy5nZXRRdWV1ZWRGaWxlcygpLGQubGVuZ3RoPjApKXtpZih0aGlzLm9wdGlvbnMudXBsb2FkTXVsdGlwbGUpcmV0dXJuIHRoaXMucHJvY2Vzc0ZpbGVzKGQuc2xpY2UoMCxiLWMpKTtmb3IoO2I+YTspe2lmKCFkLmxlbmd0aClyZXR1cm47dGhpcy5wcm9jZXNzRmlsZShkLnNoaWZ0KCkpLGErK319fSxjLnByb3RvdHlwZS5wcm9jZXNzRmlsZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wcm9jZXNzRmlsZXMoW2FdKX0sYy5wcm90b3R5cGUucHJvY2Vzc0ZpbGVzPWZ1bmN0aW9uKGEpe3ZhciBiLGQsZTtmb3IoZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyliPWFbZF0sYi5wcm9jZXNzaW5nPSEwLGIuc3RhdHVzPWMuVVBMT0FESU5HLHRoaXMuZW1pdChcInByb2Nlc3NpbmdcIixiKTtyZXR1cm4gdGhpcy5vcHRpb25zLnVwbG9hZE11bHRpcGxlJiZ0aGlzLmVtaXQoXCJwcm9jZXNzaW5nbXVsdGlwbGVcIixhKSx0aGlzLnVwbG9hZEZpbGVzKGEpfSxjLnByb3RvdHlwZS5fZ2V0RmlsZXNXaXRoWGhyPWZ1bmN0aW9uKGEpe3ZhciBiLGM7cmV0dXJuIGM9ZnVuY3Rpb24oKXt2YXIgYyxkLGUsZjtmb3IoZT10aGlzLmZpbGVzLGY9W10sYz0wLGQ9ZS5sZW5ndGg7ZD5jO2MrKyliPWVbY10sYi54aHI9PT1hJiZmLnB1c2goYik7cmV0dXJuIGZ9LmNhbGwodGhpcyl9LGMucHJvdG90eXBlLmNhbmNlbFVwbG9hZD1mdW5jdGlvbihhKXt2YXIgYixkLGUsZixnLGgsaTtpZihhLnN0YXR1cz09PWMuVVBMT0FESU5HKXtmb3IoZD10aGlzLl9nZXRGaWxlc1dpdGhYaHIoYS54aHIpLGU9MCxnPWQubGVuZ3RoO2c+ZTtlKyspYj1kW2VdLGIuc3RhdHVzPWMuQ0FOQ0VMRUQ7Zm9yKGEueGhyLmFib3J0KCksZj0wLGg9ZC5sZW5ndGg7aD5mO2YrKyliPWRbZl0sdGhpcy5lbWl0KFwiY2FuY2VsZWRcIixiKTt0aGlzLm9wdGlvbnMudXBsb2FkTXVsdGlwbGUmJnRoaXMuZW1pdChcImNhbmNlbGVkbXVsdGlwbGVcIixkKX1lbHNlKChpPWEuc3RhdHVzKT09PWMuQURERUR8fGk9PT1jLlFVRVVFRCkmJihhLnN0YXR1cz1jLkNBTkNFTEVELHRoaXMuZW1pdChcImNhbmNlbGVkXCIsYSksdGhpcy5vcHRpb25zLnVwbG9hZE11bHRpcGxlJiZ0aGlzLmVtaXQoXCJjYW5jZWxlZG11bHRpcGxlXCIsW2FdKSk7cmV0dXJuIHRoaXMub3B0aW9ucy5hdXRvUHJvY2Vzc1F1ZXVlP3RoaXMucHJvY2Vzc1F1ZXVlKCk6dm9pZCAwfSxlPWZ1bmN0aW9uKCl7dmFyIGEsYjtyZXR1cm4gYj1hcmd1bWVudHNbMF0sYT0yPD1hcmd1bWVudHMubGVuZ3RoP2kuY2FsbChhcmd1bWVudHMsMSk6W10sXCJmdW5jdGlvblwiPT10eXBlb2YgYj9iLmFwcGx5KHRoaXMsYSk6Yn0sYy5wcm90b3R5cGUudXBsb2FkRmlsZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy51cGxvYWRGaWxlcyhbYV0pfSxjLnByb3RvdHlwZS51cGxvYWRGaWxlcz1mdW5jdGlvbihhKXt2YXIgYixmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1LHYsdyx4LHkseixBLEIsQyxELEUsRixHLEgsSSxKLEssTDtmb3Iodz1uZXcgWE1MSHR0cFJlcXVlc3QseD0wLEI9YS5sZW5ndGg7Qj54O3grKyliPWFbeF0sYi54aHI9dztwPWUodGhpcy5vcHRpb25zLm1ldGhvZCxhKSx1PWUodGhpcy5vcHRpb25zLnVybCxhKSx3Lm9wZW4ocCx1LCEwKSx3LndpdGhDcmVkZW50aWFscz0hIXRoaXMub3B0aW9ucy53aXRoQ3JlZGVudGlhbHMscz1udWxsLGc9ZnVuY3Rpb24oYyl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQsZSxmO2ZvcihmPVtdLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYj1hW2RdLGYucHVzaChjLl9lcnJvclByb2Nlc3NpbmcoYSxzfHxjLm9wdGlvbnMuZGljdFJlc3BvbnNlRXJyb3IucmVwbGFjZShcInt7c3RhdHVzQ29kZX19XCIsdy5zdGF0dXMpLHcpKTtyZXR1cm4gZn19KHRoaXMpLHQ9ZnVuY3Rpb24oYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlLGYsZyxoLGksaixrLGwsbTtpZihudWxsIT1kKWZvcihmPTEwMCpkLmxvYWRlZC9kLnRvdGFsLGc9MCxqPWEubGVuZ3RoO2o+ZztnKyspYj1hW2ddLGIudXBsb2FkPXtwcm9ncmVzczpmLHRvdGFsOmQudG90YWwsYnl0ZXNTZW50OmQubG9hZGVkfTtlbHNle2ZvcihlPSEwLGY9MTAwLGg9MCxrPWEubGVuZ3RoO2s+aDtoKyspYj1hW2hdLCgxMDAhPT1iLnVwbG9hZC5wcm9ncmVzc3x8Yi51cGxvYWQuYnl0ZXNTZW50IT09Yi51cGxvYWQudG90YWwpJiYoZT0hMSksYi51cGxvYWQucHJvZ3Jlc3M9ZixiLnVwbG9hZC5ieXRlc1NlbnQ9Yi51cGxvYWQudG90YWw7aWYoZSlyZXR1cm59Zm9yKG09W10saT0wLGw9YS5sZW5ndGg7bD5pO2krKyliPWFbaV0sbS5wdXNoKGMuZW1pdChcInVwbG9hZHByb2dyZXNzXCIsYixmLGIudXBsb2FkLmJ5dGVzU2VudCkpO3JldHVybiBtfX0odGhpcyksdy5vbmxvYWQ9ZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlO2lmKGFbMF0uc3RhdHVzIT09Yy5DQU5DRUxFRCYmND09PXcucmVhZHlTdGF0ZSl7aWYocz13LnJlc3BvbnNlVGV4dCx3LmdldFJlc3BvbnNlSGVhZGVyKFwiY29udGVudC10eXBlXCIpJiZ+dy5nZXRSZXNwb25zZUhlYWRlcihcImNvbnRlbnQtdHlwZVwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24vanNvblwiKSl0cnl7cz1KU09OLnBhcnNlKHMpfWNhdGNoKGYpe2Q9ZixzPVwiSW52YWxpZCBKU09OIHJlc3BvbnNlIGZyb20gc2VydmVyLlwifXJldHVybiB0KCksMjAwPD0oZT13LnN0YXR1cykmJjMwMD5lP2IuX2ZpbmlzaGVkKGEscyxkKTpnKCl9fX0odGhpcyksdy5vbmVycm9yPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGFbMF0uc3RhdHVzIT09Yy5DQU5DRUxFRD9nKCk6dm9pZCAwfX0odGhpcykscj1udWxsIT0oRz13LnVwbG9hZCk/Rzp3LHIub25wcm9ncmVzcz10LGo9e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIixcIkNhY2hlLUNvbnRyb2xcIjpcIm5vLWNhY2hlXCIsXCJYLVJlcXVlc3RlZC1XaXRoXCI6XCJYTUxIdHRwUmVxdWVzdFwifSx0aGlzLm9wdGlvbnMuaGVhZGVycyYmZChqLHRoaXMub3B0aW9ucy5oZWFkZXJzKTtmb3IoaCBpbiBqKWk9altoXSxpJiZ3LnNldFJlcXVlc3RIZWFkZXIoaCxpKTtpZihmPW5ldyBGb3JtRGF0YSx0aGlzLm9wdGlvbnMucGFyYW1zKXtIPXRoaXMub3B0aW9ucy5wYXJhbXM7Zm9yKG8gaW4gSCl2PUhbb10sZi5hcHBlbmQobyx2KX1mb3IoeT0wLEM9YS5sZW5ndGg7Qz55O3krKyliPWFbeV0sdGhpcy5lbWl0KFwic2VuZGluZ1wiLGIsdyxmKTtpZih0aGlzLm9wdGlvbnMudXBsb2FkTXVsdGlwbGUmJnRoaXMuZW1pdChcInNlbmRpbmdtdWx0aXBsZVwiLGEsdyxmKSxcIkZPUk1cIj09PXRoaXMuZWxlbWVudC50YWdOYW1lKWZvcihJPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QsIGJ1dHRvblwiKSx6PTAsRD1JLmxlbmd0aDtEPno7eisrKWlmKGw9SVt6XSxtPWwuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSxuPWwuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSxcIlNFTEVDVFwiPT09bC50YWdOYW1lJiZsLmhhc0F0dHJpYnV0ZShcIm11bHRpcGxlXCIpKWZvcihKPWwub3B0aW9ucyxBPTAsRT1KLmxlbmd0aDtFPkE7QSsrKXE9SltBXSxxLnNlbGVjdGVkJiZmLmFwcGVuZChtLHEudmFsdWUpO2Vsc2UoIW58fFwiY2hlY2tib3hcIiE9PShLPW4udG9Mb3dlckNhc2UoKSkmJlwicmFkaW9cIiE9PUt8fGwuY2hlY2tlZCkmJmYuYXBwZW5kKG0sbC52YWx1ZSk7Zm9yKGs9Rj0wLEw9YS5sZW5ndGgtMTtMPj0wP0w+PUY6Rj49TDtrPUw+PTA/KytGOi0tRilmLmFwcGVuZCh0aGlzLl9nZXRQYXJhbU5hbWUoayksYVtrXSxhW2tdLm5hbWUpO3JldHVybiB0aGlzLnN1Ym1pdFJlcXVlc3QodyxmLGEpfSxjLnByb3RvdHlwZS5zdWJtaXRSZXF1ZXN0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuc2VuZChiKX0sYy5wcm90b3R5cGUuX2ZpbmlzaGVkPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmLGc7Zm9yKGY9MCxnPWEubGVuZ3RoO2c+ZjtmKyspZT1hW2ZdLGUuc3RhdHVzPWMuU1VDQ0VTUyx0aGlzLmVtaXQoXCJzdWNjZXNzXCIsZSxiLGQpLHRoaXMuZW1pdChcImNvbXBsZXRlXCIsZSk7cmV0dXJuIHRoaXMub3B0aW9ucy51cGxvYWRNdWx0aXBsZSYmKHRoaXMuZW1pdChcInN1Y2Nlc3NtdWx0aXBsZVwiLGEsYixkKSx0aGlzLmVtaXQoXCJjb21wbGV0ZW11bHRpcGxlXCIsYSkpLHRoaXMub3B0aW9ucy5hdXRvUHJvY2Vzc1F1ZXVlP3RoaXMucHJvY2Vzc1F1ZXVlKCk6dm9pZCAwfSxjLnByb3RvdHlwZS5fZXJyb3JQcm9jZXNzaW5nPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmLGc7Zm9yKGY9MCxnPWEubGVuZ3RoO2c+ZjtmKyspZT1hW2ZdLGUuc3RhdHVzPWMuRVJST1IsdGhpcy5lbWl0KFwiZXJyb3JcIixlLGIsZCksdGhpcy5lbWl0KFwiY29tcGxldGVcIixlKTtyZXR1cm4gdGhpcy5vcHRpb25zLnVwbG9hZE11bHRpcGxlJiYodGhpcy5lbWl0KFwiZXJyb3JtdWx0aXBsZVwiLGEsYixkKSx0aGlzLmVtaXQoXCJjb21wbGV0ZW11bHRpcGxlXCIsYSkpLHRoaXMub3B0aW9ucy5hdXRvUHJvY2Vzc1F1ZXVlP3RoaXMucHJvY2Vzc1F1ZXVlKCk6dm9pZCAwfSxjfShiKSxhLnZlcnNpb249XCI0LjIuMFwiLGEub3B0aW9ucz17fSxhLm9wdGlvbnNGb3JFbGVtZW50PWZ1bmN0aW9uKGIpe3JldHVybiBiLmdldEF0dHJpYnV0ZShcImlkXCIpP2Eub3B0aW9uc1tjKGIuZ2V0QXR0cmlidXRlKFwiaWRcIikpXTp2b2lkIDB9LGEuaW5zdGFuY2VzPVtdLGEuZm9yRWxlbWVudD1mdW5jdGlvbihhKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhKSksbnVsbD09KG51bGwhPWE/YS5kcm9wem9uZTp2b2lkIDApKXRocm93IG5ldyBFcnJvcihcIk5vIERyb3B6b25lIGZvdW5kIGZvciBnaXZlbiBlbGVtZW50LiBUaGlzIGlzIHByb2JhYmx5IGJlY2F1c2UgeW91J3JlIHRyeWluZyB0byBhY2Nlc3MgaXQgYmVmb3JlIERyb3B6b25lIGhhZCB0aGUgdGltZSB0byBpbml0aWFsaXplLiBVc2UgdGhlIGBpbml0YCBvcHRpb24gdG8gc2V0dXAgYW55IGFkZGl0aW9uYWwgb2JzZXJ2ZXJzIG9uIHlvdXIgRHJvcHpvbmUuXCIpO3JldHVybiBhLmRyb3B6b25lfSxhLmF1dG9EaXNjb3Zlcj0hMCxhLmRpc2NvdmVyPWZ1bmN0aW9uKCl7dmFyIGIsYyxkLGUsZixnO2Zvcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsP2Q9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kcm9wem9uZVwiKTooZD1bXSxiPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZSxmO2ZvcihmPVtdLGM9MCxlPWEubGVuZ3RoO2U+YztjKyspYj1hW2NdLGYucHVzaCgvKF58IClkcm9wem9uZSgkfCApLy50ZXN0KGIuY2xhc3NOYW1lKT9kLnB1c2goYik6dm9pZCAwKTtyZXR1cm4gZn0sYihkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRpdlwiKSksYihkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImZvcm1cIikpKSxnPVtdLGU9MCxmPWQubGVuZ3RoO2Y+ZTtlKyspYz1kW2VdLGcucHVzaChhLm9wdGlvbnNGb3JFbGVtZW50KGMpIT09ITE/bmV3IGEoYyk6dm9pZCAwKTtyZXR1cm4gZ30sYS5ibGFja2xpc3RlZEJyb3dzZXJzPVsvb3BlcmEuKk1hY2ludG9zaC4qdmVyc2lvblxcLzEyL2ldLGEuaXNCcm93c2VyU3VwcG9ydGVkPWZ1bmN0aW9uKCl7dmFyIGIsYyxkLGUsZjtpZihiPSEwLHdpbmRvdy5GaWxlJiZ3aW5kb3cuRmlsZVJlYWRlciYmd2luZG93LkZpbGVMaXN0JiZ3aW5kb3cuQmxvYiYmd2luZG93LkZvcm1EYXRhJiZkb2N1bWVudC5xdWVyeVNlbGVjdG9yKWlmKFwiY2xhc3NMaXN0XCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSlmb3IoZj1hLmJsYWNrbGlzdGVkQnJvd3NlcnMsZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyljPWZbZF0sYy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYoYj0hMSk7ZWxzZSBiPSExO2Vsc2UgYj0hMTtyZXR1cm4gYn0saD1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmO2ZvcihmPVtdLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLGMhPT1iJiZmLnB1c2goYyk7cmV0dXJuIGZ9LGM9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvW1xcLV9dKFxcdykvZyxmdW5jdGlvbihhKXtyZXR1cm4gYS5jaGFyQXQoMSkudG9VcHBlckNhc2UoKX0pfSxhLmNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxiLmlubmVySFRNTD1hLGIuY2hpbGROb2Rlc1swXX0sYS5lbGVtZW50SW5zaWRlPWZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuITA7Zm9yKDthPWEucGFyZW50Tm9kZTspaWYoYT09PWIpcmV0dXJuITA7cmV0dXJuITF9LGEuZ2V0RWxlbWVudD1mdW5jdGlvbihhLGIpe3ZhciBjO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhP2M9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhKTpudWxsIT1hLm5vZGVUeXBlJiYoYz1hKSxudWxsPT1jKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYFwiK2IrXCJgIG9wdGlvbiBwcm92aWRlZC4gUGxlYXNlIHByb3ZpZGUgYSBDU1Mgc2VsZWN0b3Igb3IgYSBwbGFpbiBIVE1MIGVsZW1lbnQuXCIpO3JldHVybiBjfSxhLmdldEVsZW1lbnRzPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksajtpZihhIGluc3RhbmNlb2YgQXJyYXkpe2U9W107dHJ5e2ZvcihmPTAsaD1hLmxlbmd0aDtoPmY7ZisrKWQ9YVtmXSxlLnB1c2godGhpcy5nZXRFbGVtZW50KGQsYikpfWNhdGNoKGspe2M9ayxlPW51bGx9fWVsc2UgaWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpZm9yKGU9W10saj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGEpLGc9MCxpPWoubGVuZ3RoO2k+ZztnKyspZD1qW2ddLGUucHVzaChkKTtlbHNlIG51bGwhPWEubm9kZVR5cGUmJihlPVthXSk7aWYobnVsbD09ZXx8IWUubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYFwiK2IrXCJgIG9wdGlvbiBwcm92aWRlZC4gUGxlYXNlIHByb3ZpZGUgYSBDU1Mgc2VsZWN0b3IsIGEgcGxhaW4gSFRNTCBlbGVtZW50IG9yIGEgbGlzdCBvZiB0aG9zZS5cIik7cmV0dXJuIGV9LGEuY29uZmlybT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIHdpbmRvdy5jb25maXJtKGEpP2IoKTpudWxsIT1jP2MoKTp2b2lkIDB9LGEuaXNWYWxpZEZpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnO2lmKCFiKXJldHVybiEwO2ZvcihiPWIuc3BsaXQoXCIsXCIpLGQ9YS50eXBlLGM9ZC5yZXBsYWNlKC9cXC8uKiQvLFwiXCIpLGY9MCxnPWIubGVuZ3RoO2c+ZjtmKyspaWYoZT1iW2ZdLGU9ZS50cmltKCksXCIuXCI9PT1lLmNoYXJBdCgwKSl7aWYoLTEhPT1hLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGUudG9Mb3dlckNhc2UoKSxhLm5hbWUubGVuZ3RoLWUubGVuZ3RoKSlyZXR1cm4hMH1lbHNlIGlmKC9cXC9cXCokLy50ZXN0KGUpKXtpZihjPT09ZS5yZXBsYWNlKC9cXC8uKiQvLFwiXCIpKXJldHVybiEwfWVsc2UgaWYoZD09PWUpcmV0dXJuITA7cmV0dXJuITF9LFwidW5kZWZpbmVkXCIhPXR5cGVvZiBqUXVlcnkmJm51bGwhPT1qUXVlcnkmJihqUXVlcnkuZm4uZHJvcHpvbmU9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3JldHVybiBuZXcgYSh0aGlzLGIpfSl9KSxcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZudWxsIT09bW9kdWxlP21vZHVsZS5leHBvcnRzPWE6d2luZG93LkRyb3B6b25lPWEsYS5BRERFRD1cImFkZGVkXCIsYS5RVUVVRUQ9XCJxdWV1ZWRcIixhLkFDQ0VQVEVEPWEuUVVFVUVELGEuVVBMT0FESU5HPVwidXBsb2FkaW5nXCIsYS5QUk9DRVNTSU5HPWEuVVBMT0FESU5HLGEuQ0FOQ0VMRUQ9XCJjYW5jZWxlZFwiLGEuRVJST1I9XCJlcnJvclwiLGEuU1VDQ0VTUz1cInN1Y2Nlc3NcIixlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrO1xuZm9yKGg9YS5uYXR1cmFsV2lkdGgsZz1hLm5hdHVyYWxIZWlnaHQsYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLGMud2lkdGg9MSxjLmhlaWdodD1nLGQ9Yy5nZXRDb250ZXh0KFwiMmRcIiksZC5kcmF3SW1hZ2UoYSwwLDApLGU9ZC5nZXRJbWFnZURhdGEoMCwwLDEsZykuZGF0YSxrPTAsZj1nLGk9ZztpPms7KWI9ZVs0KihpLTEpKzNdLDA9PT1iP2Y9aTprPWksaT1mK2s+PjE7cmV0dXJuIGo9aS9nLDA9PT1qPzE6an0sZj1mdW5jdGlvbihhLGIsYyxkLGYsZyxoLGksaixrKXt2YXIgbDtyZXR1cm4gbD1lKGIpLGEuZHJhd0ltYWdlKGIsYyxkLGYsZyxoLGksaixrL2wpfSxkPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksaixrO2lmKGU9ITEsaz0hMCxkPWEuZG9jdW1lbnQsaj1kLmRvY3VtZW50RWxlbWVudCxjPWQuYWRkRXZlbnRMaXN0ZW5lcj9cImFkZEV2ZW50TGlzdGVuZXJcIjpcImF0dGFjaEV2ZW50XCIsaT1kLmFkZEV2ZW50TGlzdGVuZXI/XCJyZW1vdmVFdmVudExpc3RlbmVyXCI6XCJkZXRhY2hFdmVudFwiLGg9ZC5hZGRFdmVudExpc3RlbmVyP1wiXCI6XCJvblwiLGY9ZnVuY3Rpb24oYyl7cmV0dXJuXCJyZWFkeXN0YXRlY2hhbmdlXCIhPT1jLnR5cGV8fFwiY29tcGxldGVcIj09PWQucmVhZHlTdGF0ZT8oKFwibG9hZFwiPT09Yy50eXBlP2E6ZClbaV0oaCtjLnR5cGUsZiwhMSksIWUmJihlPSEwKT9iLmNhbGwoYSxjLnR5cGV8fGMpOnZvaWQgMCk6dm9pZCAwfSxnPWZ1bmN0aW9uKCl7dmFyIGE7dHJ5e2ouZG9TY3JvbGwoXCJsZWZ0XCIpfWNhdGNoKGIpe3JldHVybiBhPWIsdm9pZCBzZXRUaW1lb3V0KGcsNTApfXJldHVybiBmKFwicG9sbFwiKX0sXCJjb21wbGV0ZVwiIT09ZC5yZWFkeVN0YXRlKXtpZihkLmNyZWF0ZUV2ZW50T2JqZWN0JiZqLmRvU2Nyb2xsKXt0cnl7az0hYS5mcmFtZUVsZW1lbnR9Y2F0Y2gobCl7fWsmJmcoKX1yZXR1cm4gZFtjXShoK1wiRE9NQ29udGVudExvYWRlZFwiLGYsITEpLGRbY10oaCtcInJlYWR5c3RhdGVjaGFuZ2VcIixmLCExKSxhW2NdKGgrXCJsb2FkXCIsZiwhMSl9fSxhLl9hdXRvRGlzY292ZXJGdW5jdGlvbj1mdW5jdGlvbigpe3JldHVybiBhLmF1dG9EaXNjb3Zlcj9hLmRpc2NvdmVyKCk6dm9pZCAwfSxkKHdpbmRvdyxhLl9hdXRvRGlzY292ZXJGdW5jdGlvbil9KS5jYWxsKHRoaXMpO1xuIiwiLy8gICAgIFVuZGVyc2NvcmUuanMgMS4zLjNcbi8vICAgICAoYykgMjAwOS0yMDEyIEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBJbmMuXG4vLyAgICAgVW5kZXJzY29yZSBpcyBmcmVlbHkgZGlzdHJpYnV0YWJsZSB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyAgICAgUG9ydGlvbnMgb2YgVW5kZXJzY29yZSBhcmUgaW5zcGlyZWQgb3IgYm9ycm93ZWQgZnJvbSBQcm90b3R5cGUsXG4vLyAgICAgT2xpdmVyIFN0ZWVsZSdzIEZ1bmN0aW9uYWwsIGFuZCBKb2huIFJlc2lnJ3MgTWljcm8tVGVtcGxhdGluZy5cbi8vICAgICBGb3IgYWxsIGRldGFpbHMgYW5kIGRvY3VtZW50YXRpb246XG4vLyAgICAgaHR0cDovL2RvY3VtZW50Y2xvdWQuZ2l0aHViLmNvbS91bmRlcnNjb3JlXG5cbnZhciBfID0gKGZ1bmN0aW9uKCkge1xuXG4gIC8vIEJhc2VsaW5lIHNldHVwXG4gIC8vIC0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gRXN0YWJsaXNoIHRoZSByb290IG9iamVjdCwgYHdpbmRvd2AgaW4gdGhlIGJyb3dzZXIsIG9yIGBnbG9iYWxgIG9uIHRoZSBzZXJ2ZXIuXG4gIHZhciByb290ID0gdGhpcztcblxuICAvLyBTYXZlIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYF9gIHZhcmlhYmxlLlxuICB2YXIgcHJldmlvdXNVbmRlcnNjb3JlID0gcm9vdC5fO1xuXG4gIC8vIEVzdGFibGlzaCB0aGUgb2JqZWN0IHRoYXQgZ2V0cyByZXR1cm5lZCB0byBicmVhayBvdXQgb2YgYSBsb29wIGl0ZXJhdGlvbi5cbiAgdmFyIGJyZWFrZXIgPSB7fTtcblxuICAvLyBTYXZlIGJ5dGVzIGluIHRoZSBtaW5pZmllZCAoYnV0IG5vdCBnemlwcGVkKSB2ZXJzaW9uOlxuICB2YXIgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSwgT2JqUHJvdG8gPSBPYmplY3QucHJvdG90eXBlLCBGdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGU7XG5cbiAgLy8gQ3JlYXRlIHF1aWNrIHJlZmVyZW5jZSB2YXJpYWJsZXMgZm9yIHNwZWVkIGFjY2VzcyB0byBjb3JlIHByb3RvdHlwZXMuXG4gIHZhciBzbGljZSAgICAgICAgICAgID0gQXJyYXlQcm90by5zbGljZSxcbiAgICAgIHVuc2hpZnQgICAgICAgICAgPSBBcnJheVByb3RvLnVuc2hpZnQsXG4gICAgICB0b1N0cmluZyAgICAgICAgID0gT2JqUHJvdG8udG9TdHJpbmcsXG4gICAgICBoYXNPd25Qcm9wZXJ0eSAgID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbiAgLy8gQWxsICoqRUNNQVNjcmlwdCA1KiogbmF0aXZlIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9ucyB0aGF0IHdlIGhvcGUgdG8gdXNlXG4gIC8vIGFyZSBkZWNsYXJlZCBoZXJlLlxuICB2YXJcbiAgICBuYXRpdmVGb3JFYWNoICAgICAgPSBBcnJheVByb3RvLmZvckVhY2gsXG4gICAgbmF0aXZlTWFwICAgICAgICAgID0gQXJyYXlQcm90by5tYXAsXG4gICAgbmF0aXZlUmVkdWNlICAgICAgID0gQXJyYXlQcm90by5yZWR1Y2UsXG4gICAgbmF0aXZlUmVkdWNlUmlnaHQgID0gQXJyYXlQcm90by5yZWR1Y2VSaWdodCxcbiAgICBuYXRpdmVGaWx0ZXIgICAgICAgPSBBcnJheVByb3RvLmZpbHRlcixcbiAgICBuYXRpdmVFdmVyeSAgICAgICAgPSBBcnJheVByb3RvLmV2ZXJ5LFxuICAgIG5hdGl2ZVNvbWUgICAgICAgICA9IEFycmF5UHJvdG8uc29tZSxcbiAgICBuYXRpdmVJbmRleE9mICAgICAgPSBBcnJheVByb3RvLmluZGV4T2YsXG4gICAgbmF0aXZlTGFzdEluZGV4T2YgID0gQXJyYXlQcm90by5sYXN0SW5kZXhPZixcbiAgICBuYXRpdmVJc0FycmF5ICAgICAgPSBBcnJheS5pc0FycmF5LFxuICAgIG5hdGl2ZUtleXMgICAgICAgICA9IE9iamVjdC5rZXlzLFxuICAgIG5hdGl2ZUJpbmQgICAgICAgICA9IEZ1bmNQcm90by5iaW5kO1xuXG4gIC8vIENyZWF0ZSBhIHNhZmUgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgdXNlIGJlbG93LlxuICB2YXIgXyA9IGZ1bmN0aW9uKG9iaikgeyByZXR1cm4gbmV3IHdyYXBwZXIob2JqKTsgfTtcblxuICAvLyBFeHBvcnQgdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciAqKk5vZGUuanMqKiwgd2l0aFxuICAvLyBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBmb3IgdGhlIG9sZCBgcmVxdWlyZSgpYCBBUEkuIElmIHdlJ3JlIGluXG4gIC8vIHRoZSBicm93c2VyLCBhZGQgYF9gIGFzIGEgZ2xvYmFsIG9iamVjdCB2aWEgYSBzdHJpbmcgaWRlbnRpZmllcixcbiAgLy8gZm9yIENsb3N1cmUgQ29tcGlsZXIgXCJhZHZhbmNlZFwiIG1vZGUuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF87XG4gICAgfVxuICAgIGV4cG9ydHMuXyA9IF87XG4gIH0gZWxzZSB7XG4gICAgcm9vdFsnXyddID0gXztcbiAgfVxuXG4gIC8vIEN1cnJlbnQgdmVyc2lvbi5cbiAgXy5WRVJTSU9OID0gJzEuMy4zJztcblxuICAvLyBDb2xsZWN0aW9uIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFRoZSBjb3JuZXJzdG9uZSwgYW4gYGVhY2hgIGltcGxlbWVudGF0aW9uLCBha2EgYGZvckVhY2hgLlxuICAvLyBIYW5kbGVzIG9iamVjdHMgd2l0aCB0aGUgYnVpbHQtaW4gYGZvckVhY2hgLCBhcnJheXMsIGFuZCByYXcgb2JqZWN0cy5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYGZvckVhY2hgIGlmIGF2YWlsYWJsZS5cbiAgdmFyIGVhY2ggPSBfLmVhY2ggPSBfLmZvckVhY2ggPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm47XG4gICAgaWYgKG5hdGl2ZUZvckVhY2ggJiYgb2JqLmZvckVhY2ggPT09IG5hdGl2ZUZvckVhY2gpIHtcbiAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0KTtcbiAgICB9IGVsc2UgaWYgKG9iai5sZW5ndGggPT09ICtvYmoubGVuZ3RoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGkgaW4gb2JqICYmIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopID09PSBicmVha2VyKSByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKF8uaGFzKG9iaiwga2V5KSkge1xuICAgICAgICAgIGlmIChpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaikgPT09IGJyZWFrZXIpIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHMgb2YgYXBwbHlpbmcgdGhlIGl0ZXJhdG9yIHRvIGVhY2ggZWxlbWVudC5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYG1hcGAgaWYgYXZhaWxhYmxlLlxuICBfLm1hcCA9IF8uY29sbGVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdHM7XG4gICAgaWYgKG5hdGl2ZU1hcCAmJiBvYmoubWFwID09PSBuYXRpdmVNYXApIHJldHVybiBvYmoubWFwKGl0ZXJhdG9yLCBjb250ZXh0KTtcbiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICByZXN1bHRzW3Jlc3VsdHMubGVuZ3RoXSA9IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBsaXN0KTtcbiAgICB9KTtcbiAgICBpZiAob2JqLmxlbmd0aCA9PT0gK29iai5sZW5ndGgpIHJlc3VsdHMubGVuZ3RoID0gb2JqLmxlbmd0aDtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyAqKlJlZHVjZSoqIGJ1aWxkcyB1cCBhIHNpbmdsZSByZXN1bHQgZnJvbSBhIGxpc3Qgb2YgdmFsdWVzLCBha2EgYGluamVjdGAsXG4gIC8vIG9yIGBmb2xkbGAuIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGByZWR1Y2VgIGlmIGF2YWlsYWJsZS5cbiAgXy5yZWR1Y2UgPSBfLmZvbGRsID0gXy5pbmplY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBtZW1vLCBjb250ZXh0KSB7XG4gICAgdmFyIGluaXRpYWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMjtcbiAgICBpZiAob2JqID09IG51bGwpIG9iaiA9IFtdO1xuICAgIGlmIChuYXRpdmVSZWR1Y2UgJiYgb2JqLnJlZHVjZSA9PT0gbmF0aXZlUmVkdWNlKSB7XG4gICAgICBpZiAoY29udGV4dCkgaXRlcmF0b3IgPSBfLmJpbmQoaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgICAgcmV0dXJuIGluaXRpYWwgPyBvYmoucmVkdWNlKGl0ZXJhdG9yLCBtZW1vKSA6IG9iai5yZWR1Y2UoaXRlcmF0b3IpO1xuICAgIH1cbiAgICBlYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICBpZiAoIWluaXRpYWwpIHtcbiAgICAgICAgbWVtbyA9IHZhbHVlO1xuICAgICAgICBpbml0aWFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lbW8gPSBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG1lbW8sIHZhbHVlLCBpbmRleCwgbGlzdCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFpbml0aWFsKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdSZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlJyk7XG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG5cbiAgLy8gVGhlIHJpZ2h0LWFzc29jaWF0aXZlIHZlcnNpb24gb2YgcmVkdWNlLCBhbHNvIGtub3duIGFzIGBmb2xkcmAuXG4gIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGByZWR1Y2VSaWdodGAgaWYgYXZhaWxhYmxlLlxuICBfLnJlZHVjZVJpZ2h0ID0gXy5mb2xkciA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0b3IsIG1lbW8sIGNvbnRleHQpIHtcbiAgICB2YXIgaW5pdGlhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyO1xuICAgIGlmIChvYmogPT0gbnVsbCkgb2JqID0gW107XG4gICAgaWYgKG5hdGl2ZVJlZHVjZVJpZ2h0ICYmIG9iai5yZWR1Y2VSaWdodCA9PT0gbmF0aXZlUmVkdWNlUmlnaHQpIHtcbiAgICAgIGlmIChjb250ZXh0KSBpdGVyYXRvciA9IF8uYmluZChpdGVyYXRvciwgY29udGV4dCk7XG4gICAgICByZXR1cm4gaW5pdGlhbCA/IG9iai5yZWR1Y2VSaWdodChpdGVyYXRvciwgbWVtbykgOiBvYmoucmVkdWNlUmlnaHQoaXRlcmF0b3IpO1xuICAgIH1cbiAgICB2YXIgcmV2ZXJzZWQgPSBfLnRvQXJyYXkob2JqKS5yZXZlcnNlKCk7XG4gICAgaWYgKGNvbnRleHQgJiYgIWluaXRpYWwpIGl0ZXJhdG9yID0gXy5iaW5kKGl0ZXJhdG9yLCBjb250ZXh0KTtcbiAgICByZXR1cm4gaW5pdGlhbCA/IF8ucmVkdWNlKHJldmVyc2VkLCBpdGVyYXRvciwgbWVtbywgY29udGV4dCkgOiBfLnJlZHVjZShyZXZlcnNlZCwgaXRlcmF0b3IpO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgZmlyc3QgdmFsdWUgd2hpY2ggcGFzc2VzIGEgdHJ1dGggdGVzdC4gQWxpYXNlZCBhcyBgZGV0ZWN0YC5cbiAgXy5maW5kID0gXy5kZXRlY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICBhbnkob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIGlmIChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpIHtcbiAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgdGhhdCBwYXNzIGEgdHJ1dGggdGVzdC5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYGZpbHRlcmAgaWYgYXZhaWxhYmxlLlxuICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLlxuICBfLmZpbHRlciA9IF8uc2VsZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0cztcbiAgICBpZiAobmF0aXZlRmlsdGVyICYmIG9iai5maWx0ZXIgPT09IG5hdGl2ZUZpbHRlcikgcmV0dXJuIG9iai5maWx0ZXIoaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIGlmIChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHNbcmVzdWx0cy5sZW5ndGhdID0gdmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIGEgdHJ1dGggdGVzdCBmYWlscy5cbiAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiByZXN1bHRzO1xuICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIGlmICghaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGxpc3QpKSByZXN1bHRzW3Jlc3VsdHMubGVuZ3RoXSA9IHZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIERldGVybWluZSB3aGV0aGVyIGFsbCBvZiB0aGUgZWxlbWVudHMgbWF0Y2ggYSB0cnV0aCB0ZXN0LlxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgZXZlcnlgIGlmIGF2YWlsYWJsZS5cbiAgLy8gQWxpYXNlZCBhcyBgYWxsYC5cbiAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHQgPSB0cnVlO1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAobmF0aXZlRXZlcnkgJiYgb2JqLmV2ZXJ5ID09PSBuYXRpdmVFdmVyeSkgcmV0dXJuIG9iai5ldmVyeShpdGVyYXRvciwgY29udGV4dCk7XG4gICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgaWYgKCEocmVzdWx0ID0gcmVzdWx0ICYmIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBsaXN0KSkpIHJldHVybiBicmVha2VyO1xuICAgIH0pO1xuICAgIHJldHVybiAhIXJlc3VsdDtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgYXQgbGVhc3Qgb25lIGVsZW1lbnQgaW4gdGhlIG9iamVjdCBtYXRjaGVzIGEgdHJ1dGggdGVzdC5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYHNvbWVgIGlmIGF2YWlsYWJsZS5cbiAgLy8gQWxpYXNlZCBhcyBgYW55YC5cbiAgdmFyIGFueSA9IF8uc29tZSA9IF8uYW55ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIGl0ZXJhdG9yIHx8IChpdGVyYXRvciA9IF8uaWRlbnRpdHkpO1xuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiByZXN1bHQ7XG4gICAgaWYgKG5hdGl2ZVNvbWUgJiYgb2JqLnNvbWUgPT09IG5hdGl2ZVNvbWUpIHJldHVybiBvYmouc29tZShpdGVyYXRvciwgY29udGV4dCk7XG4gICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgaWYgKHJlc3VsdCB8fCAocmVzdWx0ID0gaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGxpc3QpKSkgcmV0dXJuIGJyZWFrZXI7XG4gICAgfSk7XG4gICAgcmV0dXJuICEhcmVzdWx0O1xuICB9O1xuXG4gIC8vIERldGVybWluZSBpZiBhIGdpdmVuIHZhbHVlIGlzIGluY2x1ZGVkIGluIHRoZSBhcnJheSBvciBvYmplY3QgdXNpbmcgYD09PWAuXG4gIC8vIEFsaWFzZWQgYXMgYGNvbnRhaW5zYC5cbiAgXy5pbmNsdWRlID0gXy5jb250YWlucyA9IGZ1bmN0aW9uKG9iaiwgdGFyZ2V0KSB7XG4gICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gZm91bmQ7XG4gICAgaWYgKG5hdGl2ZUluZGV4T2YgJiYgb2JqLmluZGV4T2YgPT09IG5hdGl2ZUluZGV4T2YpIHJldHVybiBvYmouaW5kZXhPZih0YXJnZXQpICE9IC0xO1xuICAgIGZvdW5kID0gYW55KG9iaiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gdGFyZ2V0O1xuICAgIH0pO1xuICAgIHJldHVybiBmb3VuZDtcbiAgfTtcblxuICAvLyBJbnZva2UgYSBtZXRob2QgKHdpdGggYXJndW1lbnRzKSBvbiBldmVyeSBpdGVtIGluIGEgY29sbGVjdGlvbi5cbiAgXy5pbnZva2UgPSBmdW5jdGlvbihvYmosIG1ldGhvZCkge1xuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIHJldHVybiBfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gKF8uaXNGdW5jdGlvbihtZXRob2QpID8gbWV0aG9kIHx8IHZhbHVlIDogdmFsdWVbbWV0aG9kXSkuYXBwbHkodmFsdWUsIGFyZ3MpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYG1hcGA6IGZldGNoaW5nIGEgcHJvcGVydHkuXG4gIF8ucGx1Y2sgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIHJldHVybiBfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlKXsgcmV0dXJuIHZhbHVlW2tleV07IH0pO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbWF4aW11bSBlbGVtZW50IG9yIChlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cbiAgXy5tYXggPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgaWYgKCFpdGVyYXRvciAmJiBfLmlzQXJyYXkob2JqKSAmJiBvYmpbMF0gPT09ICtvYmpbMF0pIHJldHVybiBNYXRoLm1heC5hcHBseShNYXRoLCBvYmopO1xuICAgIGlmICghaXRlcmF0b3IgJiYgXy5pc0VtcHR5KG9iaikpIHJldHVybiAtSW5maW5pdHk7XG4gICAgdmFyIHJlc3VsdCA9IHtjb21wdXRlZCA6IC1JbmZpbml0eX07XG4gICAgZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgdmFyIGNvbXB1dGVkID0gaXRlcmF0b3IgPyBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkgOiB2YWx1ZTtcbiAgICAgIGNvbXB1dGVkID49IHJlc3VsdC5jb21wdXRlZCAmJiAocmVzdWx0ID0ge3ZhbHVlIDogdmFsdWUsIGNvbXB1dGVkIDogY29tcHV0ZWR9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbWluaW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cbiAgXy5taW4gPSBmdW5jdGlvbihvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgaWYgKCFpdGVyYXRvciAmJiBfLmlzQXJyYXkob2JqKSAmJiBvYmpbMF0gPT09ICtvYmpbMF0pIHJldHVybiBNYXRoLm1pbi5hcHBseShNYXRoLCBvYmopO1xuICAgIGlmICghaXRlcmF0b3IgJiYgXy5pc0VtcHR5KG9iaikpIHJldHVybiBJbmZpbml0eTtcbiAgICB2YXIgcmVzdWx0ID0ge2NvbXB1dGVkIDogSW5maW5pdHl9O1xuICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIHZhciBjb21wdXRlZCA9IGl0ZXJhdG9yID8gaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGxpc3QpIDogdmFsdWU7XG4gICAgICBjb21wdXRlZCA8IHJlc3VsdC5jb21wdXRlZCAmJiAocmVzdWx0ID0ge3ZhbHVlIDogdmFsdWUsIGNvbXB1dGVkIDogY29tcHV0ZWR9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xuICB9O1xuXG4gIC8vIFNodWZmbGUgYW4gYXJyYXkuXG4gIF8uc2h1ZmZsZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBzaHVmZmxlZCA9IFtdLCByYW5kO1xuICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIHJhbmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaW5kZXggKyAxKSk7XG4gICAgICBzaHVmZmxlZFtpbmRleF0gPSBzaHVmZmxlZFtyYW5kXTtcbiAgICAgIHNodWZmbGVkW3JhbmRdID0gdmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNodWZmbGVkO1xuICB9O1xuXG4gIC8vIFNvcnQgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiBwcm9kdWNlZCBieSBhbiBpdGVyYXRvci5cbiAgXy5zb3J0QnkgPSBmdW5jdGlvbihvYmosIHZhbCwgY29udGV4dCkge1xuICAgIHZhciBpdGVyYXRvciA9IF8uaXNGdW5jdGlvbih2YWwpID8gdmFsIDogZnVuY3Rpb24ob2JqKSB7IHJldHVybiBvYmpbdmFsXTsgfTtcbiAgICByZXR1cm4gXy5wbHVjayhfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWUgOiB2YWx1ZSxcbiAgICAgICAgY3JpdGVyaWEgOiBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdClcbiAgICAgIH07XG4gICAgfSkuc29ydChmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgICAgdmFyIGEgPSBsZWZ0LmNyaXRlcmlhLCBiID0gcmlnaHQuY3JpdGVyaWE7XG4gICAgICBpZiAoYSA9PT0gdm9pZCAwKSByZXR1cm4gMTtcbiAgICAgIGlmIChiID09PSB2b2lkIDApIHJldHVybiAtMTtcbiAgICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMDtcbiAgICB9KSwgJ3ZhbHVlJyk7XG4gIH07XG5cbiAgLy8gR3JvdXBzIHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24uIFBhc3MgZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZVxuICAvLyB0byBncm91cCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGNyaXRlcmlvbi5cbiAgXy5ncm91cEJ5ID0gZnVuY3Rpb24ob2JqLCB2YWwpIHtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgdmFyIGl0ZXJhdG9yID0gXy5pc0Z1bmN0aW9uKHZhbCkgPyB2YWwgOiBmdW5jdGlvbihvYmopIHsgcmV0dXJuIG9ialt2YWxdOyB9O1xuICAgIGVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcbiAgICAgIHZhciBrZXkgPSBpdGVyYXRvcih2YWx1ZSwgaW5kZXgpO1xuICAgICAgKHJlc3VsdFtrZXldIHx8IChyZXN1bHRba2V5XSA9IFtdKSkucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBVc2UgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgYXQgd2hhdCBpbmRleCBhbiBvYmplY3Qgc2hvdWxkXG4gIC8vIGJlIGluc2VydGVkIHNvIGFzIHRvIG1haW50YWluIG9yZGVyLiBVc2VzIGJpbmFyeSBzZWFyY2guXG4gIF8uc29ydGVkSW5kZXggPSBmdW5jdGlvbihhcnJheSwgb2JqLCBpdGVyYXRvcikge1xuICAgIGl0ZXJhdG9yIHx8IChpdGVyYXRvciA9IF8uaWRlbnRpdHkpO1xuICAgIHZhciBsb3cgPSAwLCBoaWdoID0gYXJyYXkubGVuZ3RoO1xuICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICB2YXIgbWlkID0gKGxvdyArIGhpZ2gpID4+IDE7XG4gICAgICBpdGVyYXRvcihhcnJheVttaWRdKSA8IGl0ZXJhdG9yKG9iaikgPyBsb3cgPSBtaWQgKyAxIDogaGlnaCA9IG1pZDtcbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbiAgfTtcblxuICAvLyBTYWZlbHkgY29udmVydCBhbnl0aGluZyBpdGVyYWJsZSBpbnRvIGEgcmVhbCwgbGl2ZSBhcnJheS5cbiAgXy50b0FycmF5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFvYmopICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICBpZiAoXy5pc0FycmF5KG9iaikpICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNsaWNlLmNhbGwob2JqKTtcbiAgICBpZiAoXy5pc0FyZ3VtZW50cyhvYmopKSAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNsaWNlLmNhbGwob2JqKTtcbiAgICBpZiAob2JqLnRvQXJyYXkgJiYgXy5pc0Z1bmN0aW9uKG9iai50b0FycmF5KSkgcmV0dXJuIG9iai50b0FycmF5KCk7XG4gICAgcmV0dXJuIF8udmFsdWVzKG9iaik7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYW4gb2JqZWN0LlxuICBfLnNpemUgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gXy5pc0FycmF5KG9iaikgPyBvYmoubGVuZ3RoIDogXy5rZXlzKG9iaikubGVuZ3RoO1xuICB9O1xuXG4gIC8vIEFycmF5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgaGVhZGAgYW5kIGB0YWtlYC4gVGhlICoqZ3VhcmQqKiBjaGVja1xuICAvLyBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG4gIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gKG4gIT0gbnVsbCkgJiYgIWd1YXJkID8gc2xpY2UuY2FsbChhcnJheSwgMCwgbikgOiBhcnJheVswXTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBsYXN0IGVudHJ5IG9mIHRoZSBhcnJheS4gRXNwZWNjaWFseSB1c2VmdWwgb25cbiAgLy8gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gYWxsIHRoZSB2YWx1ZXMgaW5cbiAgLy8gdGhlIGFycmF5LCBleGNsdWRpbmcgdGhlIGxhc3QgTi4gVGhlICoqZ3VhcmQqKiBjaGVjayBhbGxvd3MgaXQgdG8gd29yayB3aXRoXG4gIC8vIGBfLm1hcGAuXG4gIF8uaW5pdGlhbCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCAwLCBhcnJheS5sZW5ndGggLSAoKG4gPT0gbnVsbCkgfHwgZ3VhcmQgPyAxIDogbikpO1xuICB9O1xuXG4gIC8vIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBsYXN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS4gVGhlICoqZ3VhcmQqKiBjaGVjayBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG4gIF8ubGFzdCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIGlmICgobiAhPSBudWxsKSAmJiAhZ3VhcmQpIHtcbiAgICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCBNYXRoLm1heChhcnJheS5sZW5ndGggLSBuLCAwKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgZmlyc3QgZW50cnkgb2YgdGhlIGFycmF5LiBBbGlhc2VkIGFzIGB0YWlsYC5cbiAgLy8gRXNwZWNpYWxseSB1c2VmdWwgb24gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgYW4gKippbmRleCoqIHdpbGwgcmV0dXJuXG4gIC8vIHRoZSByZXN0IG9mIHRoZSB2YWx1ZXMgaW4gdGhlIGFycmF5IGZyb20gdGhhdCBpbmRleCBvbndhcmQuIFRoZSAqKmd1YXJkKipcbiAgLy8gY2hlY2sgYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgXy5tYXBgLlxuICBfLnJlc3QgPSBfLnRhaWwgPSBmdW5jdGlvbihhcnJheSwgaW5kZXgsIGd1YXJkKSB7XG4gICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIChpbmRleCA9PSBudWxsKSB8fCBndWFyZCA/IDEgOiBpbmRleCk7XG4gIH07XG5cbiAgLy8gVHJpbSBvdXQgYWxsIGZhbHN5IHZhbHVlcyBmcm9tIGFuIGFycmF5LlxuICBfLmNvbXBhY3QgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgZnVuY3Rpb24odmFsdWUpeyByZXR1cm4gISF2YWx1ZTsgfSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgY29tcGxldGVseSBmbGF0dGVuZWQgdmVyc2lvbiBvZiBhbiBhcnJheS5cbiAgXy5mbGF0dGVuID0gZnVuY3Rpb24oYXJyYXksIHNoYWxsb3cpIHtcbiAgICByZXR1cm4gXy5yZWR1Y2UoYXJyYXksIGZ1bmN0aW9uKG1lbW8sIHZhbHVlKSB7XG4gICAgICBpZiAoXy5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIG1lbW8uY29uY2F0KHNoYWxsb3cgPyB2YWx1ZSA6IF8uZmxhdHRlbih2YWx1ZSkpO1xuICAgICAgbWVtb1ttZW1vLmxlbmd0aF0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH0sIFtdKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSB2ZXJzaW9uIG9mIHRoZSBhcnJheSB0aGF0IGRvZXMgbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCB2YWx1ZShzKS5cbiAgXy53aXRob3V0ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICByZXR1cm4gXy5kaWZmZXJlbmNlKGFycmF5LCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYSBkdXBsaWNhdGUtZnJlZSB2ZXJzaW9uIG9mIHRoZSBhcnJheS4gSWYgdGhlIGFycmF5IGhhcyBhbHJlYWR5XG4gIC8vIGJlZW4gc29ydGVkLCB5b3UgaGF2ZSB0aGUgb3B0aW9uIG9mIHVzaW5nIGEgZmFzdGVyIGFsZ29yaXRobS5cbiAgLy8gQWxpYXNlZCBhcyBgdW5pcXVlYC5cbiAgXy51bmlxID0gXy51bmlxdWUgPSBmdW5jdGlvbihhcnJheSwgaXNTb3J0ZWQsIGl0ZXJhdG9yKSB7XG4gICAgdmFyIGluaXRpYWwgPSBpdGVyYXRvciA/IF8ubWFwKGFycmF5LCBpdGVyYXRvcikgOiBhcnJheTtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIC8vIFRoZSBgaXNTb3J0ZWRgIGZsYWcgaXMgaXJyZWxldmFudCBpZiB0aGUgYXJyYXkgb25seSBjb250YWlucyB0d28gZWxlbWVudHMuXG4gICAgaWYgKGFycmF5Lmxlbmd0aCA8IDMpIGlzU29ydGVkID0gdHJ1ZTtcbiAgICBfLnJlZHVjZShpbml0aWFsLCBmdW5jdGlvbiAobWVtbywgdmFsdWUsIGluZGV4KSB7XG4gICAgICBpZiAoaXNTb3J0ZWQgPyBfLmxhc3QobWVtbykgIT09IHZhbHVlIHx8ICFtZW1vLmxlbmd0aCA6ICFfLmluY2x1ZGUobWVtbywgdmFsdWUpKSB7XG4gICAgICAgIG1lbW8ucHVzaCh2YWx1ZSk7XG4gICAgICAgIHJlc3VsdHMucHVzaChhcnJheVtpbmRleF0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfSwgW10pO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyB0aGUgdW5pb246IGVhY2ggZGlzdGluY3QgZWxlbWVudCBmcm9tIGFsbCBvZlxuICAvLyB0aGUgcGFzc2VkLWluIGFycmF5cy5cbiAgXy51bmlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBfLnVuaXEoXy5mbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSkpO1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyBldmVyeSBpdGVtIHNoYXJlZCBiZXR3ZWVuIGFsbCB0aGVcbiAgLy8gcGFzc2VkLWluIGFycmF5cy4gKEFsaWFzZWQgYXMgXCJpbnRlcnNlY3RcIiBmb3IgYmFjay1jb21wYXQuKVxuICBfLmludGVyc2VjdGlvbiA9IF8uaW50ZXJzZWN0ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgcmVzdCA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICByZXR1cm4gXy5maWx0ZXIoXy51bmlxKGFycmF5KSwgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgcmV0dXJuIF8uZXZlcnkocmVzdCwgZnVuY3Rpb24ob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIF8uaW5kZXhPZihvdGhlciwgaXRlbSkgPj0gMDtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFRha2UgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBvbmUgYXJyYXkgYW5kIGEgbnVtYmVyIG9mIG90aGVyIGFycmF5cy5cbiAgLy8gT25seSB0aGUgZWxlbWVudHMgcHJlc2VudCBpbiBqdXN0IHRoZSBmaXJzdCBhcnJheSB3aWxsIHJlbWFpbi5cbiAgXy5kaWZmZXJlbmNlID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgcmVzdCA9IF8uZmxhdHRlbihzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIHRydWUpO1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgZnVuY3Rpb24odmFsdWUpeyByZXR1cm4gIV8uaW5jbHVkZShyZXN0LCB2YWx1ZSk7IH0pO1xuICB9O1xuXG4gIC8vIFppcCB0b2dldGhlciBtdWx0aXBsZSBsaXN0cyBpbnRvIGEgc2luZ2xlIGFycmF5IC0tIGVsZW1lbnRzIHRoYXQgc2hhcmVcbiAgLy8gYW4gaW5kZXggZ28gdG9nZXRoZXIuXG4gIF8uemlwID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgdmFyIGxlbmd0aCA9IF8ubWF4KF8ucGx1Y2soYXJncywgJ2xlbmd0aCcpKTtcbiAgICB2YXIgcmVzdWx0cyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHJlc3VsdHNbaV0gPSBfLnBsdWNrKGFyZ3MsIFwiXCIgKyBpKTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBJZiB0aGUgYnJvd3NlciBkb2Vzbid0IHN1cHBseSB1cyB3aXRoIGluZGV4T2YgKEknbSBsb29raW5nIGF0IHlvdSwgKipNU0lFKiopLFxuICAvLyB3ZSBuZWVkIHRoaXMgZnVuY3Rpb24uIFJldHVybiB0aGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW5cbiAgLy8gaXRlbSBpbiBhbiBhcnJheSwgb3IgLTEgaWYgdGhlIGl0ZW0gaXMgbm90IGluY2x1ZGVkIGluIHRoZSBhcnJheS5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYGluZGV4T2ZgIGlmIGF2YWlsYWJsZS5cbiAgLy8gSWYgdGhlIGFycmF5IGlzIGxhcmdlIGFuZCBhbHJlYWR5IGluIHNvcnQgb3JkZXIsIHBhc3MgYHRydWVgXG4gIC8vIGZvciAqKmlzU29ydGVkKiogdG8gdXNlIGJpbmFyeSBzZWFyY2guXG4gIF8uaW5kZXhPZiA9IGZ1bmN0aW9uKGFycmF5LCBpdGVtLCBpc1NvcnRlZCkge1xuICAgIGlmIChhcnJheSA9PSBudWxsKSByZXR1cm4gLTE7XG4gICAgdmFyIGksIGw7XG4gICAgaWYgKGlzU29ydGVkKSB7XG4gICAgICBpID0gXy5zb3J0ZWRJbmRleChhcnJheSwgaXRlbSk7XG4gICAgICByZXR1cm4gYXJyYXlbaV0gPT09IGl0ZW0gPyBpIDogLTE7XG4gICAgfVxuICAgIGlmIChuYXRpdmVJbmRleE9mICYmIGFycmF5LmluZGV4T2YgPT09IG5hdGl2ZUluZGV4T2YpIHJldHVybiBhcnJheS5pbmRleE9mKGl0ZW0pO1xuICAgIGZvciAoaSA9IDAsIGwgPSBhcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIGlmIChpIGluIGFycmF5ICYmIGFycmF5W2ldID09PSBpdGVtKSByZXR1cm4gaTtcbiAgICByZXR1cm4gLTE7XG4gIH07XG5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYGxhc3RJbmRleE9mYCBpZiBhdmFpbGFibGUuXG4gIF8ubGFzdEluZGV4T2YgPSBmdW5jdGlvbihhcnJheSwgaXRlbSkge1xuICAgIGlmIChhcnJheSA9PSBudWxsKSByZXR1cm4gLTE7XG4gICAgaWYgKG5hdGl2ZUxhc3RJbmRleE9mICYmIGFycmF5Lmxhc3RJbmRleE9mID09PSBuYXRpdmVMYXN0SW5kZXhPZikgcmV0dXJuIGFycmF5Lmxhc3RJbmRleE9mKGl0ZW0pO1xuICAgIHZhciBpID0gYXJyYXkubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIGlmIChpIGluIGFycmF5ICYmIGFycmF5W2ldID09PSBpdGVtKSByZXR1cm4gaTtcbiAgICByZXR1cm4gLTE7XG4gIH07XG5cbiAgLy8gR2VuZXJhdGUgYW4gaW50ZWdlciBBcnJheSBjb250YWluaW5nIGFuIGFyaXRobWV0aWMgcHJvZ3Jlc3Npb24uIEEgcG9ydCBvZlxuICAvLyB0aGUgbmF0aXZlIFB5dGhvbiBgcmFuZ2UoKWAgZnVuY3Rpb24uIFNlZVxuICAvLyBbdGhlIFB5dGhvbiBkb2N1bWVudGF0aW9uXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvZnVuY3Rpb25zLmh0bWwjcmFuZ2UpLlxuICBfLnJhbmdlID0gZnVuY3Rpb24oc3RhcnQsIHN0b3AsIHN0ZXApIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8PSAxKSB7XG4gICAgICBzdG9wID0gc3RhcnQgfHwgMDtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICB9XG4gICAgc3RlcCA9IGFyZ3VtZW50c1syXSB8fCAxO1xuXG4gICAgdmFyIGxlbiA9IE1hdGgubWF4KE1hdGguY2VpbCgoc3RvcCAtIHN0YXJ0KSAvIHN0ZXApLCAwKTtcbiAgICB2YXIgaWR4ID0gMDtcbiAgICB2YXIgcmFuZ2UgPSBuZXcgQXJyYXkobGVuKTtcblxuICAgIHdoaWxlKGlkeCA8IGxlbikge1xuICAgICAgcmFuZ2VbaWR4KytdID0gc3RhcnQ7XG4gICAgICBzdGFydCArPSBzdGVwO1xuICAgIH1cblxuICAgIHJldHVybiByYW5nZTtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiAoYWhlbSkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJldXNhYmxlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGZvciBwcm90b3R5cGUgc2V0dGluZy5cbiAgdmFyIGN0b3IgPSBmdW5jdGlvbigpe307XG5cbiAgLy8gQ3JlYXRlIGEgZnVuY3Rpb24gYm91bmQgdG8gYSBnaXZlbiBvYmplY3QgKGFzc2lnbmluZyBgdGhpc2AsIGFuZCBhcmd1bWVudHMsXG4gIC8vIG9wdGlvbmFsbHkpLiBCaW5kaW5nIHdpdGggYXJndW1lbnRzIGlzIGFsc28ga25vd24gYXMgYGN1cnJ5YC5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYEZ1bmN0aW9uLmJpbmRgIGlmIGF2YWlsYWJsZS5cbiAgLy8gV2UgY2hlY2sgZm9yIGBmdW5jLmJpbmRgIGZpcnN0LCB0byBmYWlsIGZhc3Qgd2hlbiBgZnVuY2AgaXMgdW5kZWZpbmVkLlxuICBfLmJpbmQgPSBmdW5jdGlvbiBiaW5kKGZ1bmMsIGNvbnRleHQpIHtcbiAgICB2YXIgYm91bmQsIGFyZ3M7XG4gICAgaWYgKGZ1bmMuYmluZCA9PT0gbmF0aXZlQmluZCAmJiBuYXRpdmVCaW5kKSByZXR1cm4gbmF0aXZlQmluZC5hcHBseShmdW5jLCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIGlmICghXy5pc0Z1bmN0aW9uKGZ1bmMpKSB0aHJvdyBuZXcgVHlwZUVycm9yO1xuICAgIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgcmV0dXJuIGJvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgYm91bmQpKSByZXR1cm4gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgIGN0b3IucHJvdG90eXBlID0gZnVuYy5wcm90b3R5cGU7XG4gICAgICB2YXIgc2VsZiA9IG5ldyBjdG9yO1xuICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkoc2VsZiwgYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgICBpZiAoT2JqZWN0KHJlc3VsdCkgPT09IHJlc3VsdCkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQmluZCBhbGwgb2YgYW4gb2JqZWN0J3MgbWV0aG9kcyB0byB0aGF0IG9iamVjdC4gVXNlZnVsIGZvciBlbnN1cmluZyB0aGF0XG4gIC8vIGFsbCBjYWxsYmFja3MgZGVmaW5lZCBvbiBhbiBvYmplY3QgYmVsb25nIHRvIGl0LlxuICBfLmJpbmRBbGwgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgZnVuY3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgaWYgKGZ1bmNzLmxlbmd0aCA9PSAwKSBmdW5jcyA9IF8uZnVuY3Rpb25zKG9iaik7XG4gICAgZWFjaChmdW5jcywgZnVuY3Rpb24oZikgeyBvYmpbZl0gPSBfLmJpbmQob2JqW2ZdLCBvYmopOyB9KTtcbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIE1lbW9pemUgYW4gZXhwZW5zaXZlIGZ1bmN0aW9uIGJ5IHN0b3JpbmcgaXRzIHJlc3VsdHMuXG4gIF8ubWVtb2l6ZSA9IGZ1bmN0aW9uKGZ1bmMsIGhhc2hlcikge1xuICAgIHZhciBtZW1vID0ge307XG4gICAgaGFzaGVyIHx8IChoYXNoZXIgPSBfLmlkZW50aXR5KTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIga2V5ID0gaGFzaGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gXy5oYXMobWVtbywga2V5KSA/IG1lbW9ba2V5XSA6IChtZW1vW2tleV0gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gRGVsYXlzIGEgZnVuY3Rpb24gZm9yIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCBhbmQgdGhlbiBjYWxsc1xuICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuXG4gIF8uZGVsYXkgPSBmdW5jdGlvbihmdW5jLCB3YWl0KSB7XG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncyk7IH0sIHdhaXQpO1xuICB9O1xuXG4gIC8vIERlZmVycyBhIGZ1bmN0aW9uLCBzY2hlZHVsaW5nIGl0IHRvIHJ1biBhZnRlciB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhc1xuICAvLyBjbGVhcmVkLlxuICBfLmRlZmVyID0gZnVuY3Rpb24oZnVuYykge1xuICAgIHJldHVybiBfLmRlbGF5LmFwcGx5KF8sIFtmdW5jLCAxXS5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXG4gIC8vIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLlxuICBfLnRocm90dGxlID0gZnVuY3Rpb24oZnVuYywgd2FpdCkge1xuICAgIHZhciBjb250ZXh0LCBhcmdzLCB0aW1lb3V0LCB0aHJvdHRsaW5nLCBtb3JlLCByZXN1bHQ7XG4gICAgdmFyIHdoZW5Eb25lID0gXy5kZWJvdW5jZShmdW5jdGlvbigpeyBtb3JlID0gdGhyb3R0bGluZyA9IGZhbHNlOyB9LCB3YWl0KTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBjb250ZXh0ID0gdGhpczsgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgaWYgKG1vcmUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIHdoZW5Eb25lKCk7XG4gICAgICB9O1xuICAgICAgaWYgKCF0aW1lb3V0KSB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgICBpZiAodGhyb3R0bGluZykge1xuICAgICAgICBtb3JlID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICB9XG4gICAgICB3aGVuRG9uZSgpO1xuICAgICAgdGhyb3R0bGluZyA9IHRydWU7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuICAvLyBiZSB0cmlnZ2VyZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBpdCBzdG9wcyBiZWluZyBjYWxsZWQgZm9yXG4gIC8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuICAvLyBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLlxuICBfLmRlYm91bmNlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgdmFyIHRpbWVvdXQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIH07XG4gICAgICBpZiAoaW1tZWRpYXRlICYmICF0aW1lb3V0KSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93XG4gIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uXG4gIF8ub25jZSA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICB2YXIgcmFuID0gZmFsc2UsIG1lbW87XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHJhbikgcmV0dXJuIG1lbW87XG4gICAgICByYW4gPSB0cnVlO1xuICAgICAgcmV0dXJuIG1lbW8gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBmdW5jdGlvbiBwYXNzZWQgYXMgYW4gYXJndW1lbnQgdG8gdGhlIHNlY29uZCxcbiAgLy8gYWxsb3dpbmcgeW91IHRvIGFkanVzdCBhcmd1bWVudHMsIHJ1biBjb2RlIGJlZm9yZSBhbmQgYWZ0ZXIsIGFuZFxuICAvLyBjb25kaXRpb25hbGx5IGV4ZWN1dGUgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLlxuICBfLndyYXAgPSBmdW5jdGlvbihmdW5jLCB3cmFwcGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBbZnVuY10uY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICByZXR1cm4gd3JhcHBlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBhIGxpc3Qgb2YgZnVuY3Rpb25zLCBlYWNoXG4gIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuXG4gIF8uY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmdW5jcyA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGZvciAodmFyIGkgPSBmdW5jcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBhcmdzID0gW2Z1bmNzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhcmdzWzBdO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIGFmdGVyIGJlaW5nIGNhbGxlZCBOIHRpbWVzLlxuICBfLmFmdGVyID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICBpZiAodGltZXMgPD0gMCkgcmV0dXJuIGZ1bmMoKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA8IDEpIHsgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuICAgIH07XG4gIH07XG5cbiAgLy8gT2JqZWN0IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gUmV0cmlldmUgdGhlIG5hbWVzIG9mIGFuIG9iamVjdCdzIHByb3BlcnRpZXMuXG4gIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBPYmplY3Qua2V5c2BcbiAgXy5rZXlzID0gbmF0aXZlS2V5cyB8fCBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqICE9PSBPYmplY3Qob2JqKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBvYmplY3QnKTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChfLmhhcyhvYmosIGtleSkpIGtleXNba2V5cy5sZW5ndGhdID0ga2V5O1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgXy52YWx1ZXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gXy5tYXAob2JqLCBfLmlkZW50aXR5KTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBzb3J0ZWQgbGlzdCBvZiB0aGUgZnVuY3Rpb24gbmFtZXMgYXZhaWxhYmxlIG9uIHRoZSBvYmplY3QuXG4gIC8vIEFsaWFzZWQgYXMgYG1ldGhvZHNgXG4gIF8uZnVuY3Rpb25zID0gXy5tZXRob2RzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIG5hbWVzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihvYmpba2V5XSkpIG5hbWVzLnB1c2goa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWVzLnNvcnQoKTtcbiAgfTtcblxuICAvLyBFeHRlbmQgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIHByb3BlcnRpZXMgaW4gcGFzc2VkLWluIG9iamVjdChzKS5cbiAgXy5leHRlbmQgPSBmdW5jdGlvbihvYmopIHtcbiAgICBlYWNoKHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSwgZnVuY3Rpb24oc291cmNlKSB7XG4gICAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICBvYmpbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgb25seSBjb250YWluaW5nIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0aWVzLlxuICBfLnBpY2sgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgZWFjaChfLmZsYXR0ZW4oc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKSwgZnVuY3Rpb24oa2V5KSB7XG4gICAgICBpZiAoa2V5IGluIG9iaikgcmVzdWx0W2tleV0gPSBvYmpba2V5XTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIEZpbGwgaW4gYSBnaXZlbiBvYmplY3Qgd2l0aCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gIF8uZGVmYXVsdHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBlYWNoKHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSwgZnVuY3Rpb24oc291cmNlKSB7XG4gICAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICBpZiAob2JqW3Byb3BdID09IG51bGwpIG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIChzaGFsbG93LWNsb25lZCkgZHVwbGljYXRlIG9mIGFuIG9iamVjdC5cbiAgXy5jbG9uZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gb2JqO1xuICAgIHJldHVybiBfLmlzQXJyYXkob2JqKSA/IG9iai5zbGljZSgpIDogXy5leHRlbmQoe30sIG9iaik7XG4gIH07XG5cbiAgLy8gSW52b2tlcyBpbnRlcmNlcHRvciB3aXRoIHRoZSBvYmosIGFuZCB0aGVuIHJldHVybnMgb2JqLlxuICAvLyBUaGUgcHJpbWFyeSBwdXJwb3NlIG9mIHRoaXMgbWV0aG9kIGlzIHRvIFwidGFwIGludG9cIiBhIG1ldGhvZCBjaGFpbiwgaW5cbiAgLy8gb3JkZXIgdG8gcGVyZm9ybSBvcGVyYXRpb25zIG9uIGludGVybWVkaWF0ZSByZXN1bHRzIHdpdGhpbiB0aGUgY2hhaW4uXG4gIF8udGFwID0gZnVuY3Rpb24ob2JqLCBpbnRlcmNlcHRvcikge1xuICAgIGludGVyY2VwdG9yKG9iaik7XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBJbnRlcm5hbCByZWN1cnNpdmUgY29tcGFyaXNvbiBmdW5jdGlvbi5cbiAgZnVuY3Rpb24gZXEoYSwgYiwgc3RhY2spIHtcbiAgICAvLyBJZGVudGljYWwgb2JqZWN0cyBhcmUgZXF1YWwuIGAwID09PSAtMGAsIGJ1dCB0aGV5IGFyZW4ndCBpZGVudGljYWwuXG4gICAgLy8gU2VlIHRoZSBIYXJtb255IGBlZ2FsYCBwcm9wb3NhbDogaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9aGFybW9ueTplZ2FsLlxuICAgIGlmIChhID09PSBiKSByZXR1cm4gYSAhPT0gMCB8fCAxIC8gYSA9PSAxIC8gYjtcbiAgICAvLyBBIHN0cmljdCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGBudWxsID09IHVuZGVmaW5lZGAuXG4gICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBhID09PSBiO1xuICAgIC8vIFVud3JhcCBhbnkgd3JhcHBlZCBvYmplY3RzLlxuICAgIGlmIChhLl9jaGFpbikgYSA9IGEuX3dyYXBwZWQ7XG4gICAgaWYgKGIuX2NoYWluKSBiID0gYi5fd3JhcHBlZDtcbiAgICAvLyBJbnZva2UgYSBjdXN0b20gYGlzRXF1YWxgIG1ldGhvZCBpZiBvbmUgaXMgcHJvdmlkZWQuXG4gICAgaWYgKGEuaXNFcXVhbCAmJiBfLmlzRnVuY3Rpb24oYS5pc0VxdWFsKSkgcmV0dXJuIGEuaXNFcXVhbChiKTtcbiAgICBpZiAoYi5pc0VxdWFsICYmIF8uaXNGdW5jdGlvbihiLmlzRXF1YWwpKSByZXR1cm4gYi5pc0VxdWFsKGEpO1xuICAgIC8vIENvbXBhcmUgYFtbQ2xhc3NdXWAgbmFtZXMuXG4gICAgdmFyIGNsYXNzTmFtZSA9IHRvU3RyaW5nLmNhbGwoYSk7XG4gICAgaWYgKGNsYXNzTmFtZSAhPSB0b1N0cmluZy5jYWxsKGIpKSByZXR1cm4gZmFsc2U7XG4gICAgc3dpdGNoIChjbGFzc05hbWUpIHtcbiAgICAgIC8vIFN0cmluZ3MsIG51bWJlcnMsIGRhdGVzLCBhbmQgYm9vbGVhbnMgYXJlIGNvbXBhcmVkIGJ5IHZhbHVlLlxuICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcbiAgICAgICAgLy8gUHJpbWl0aXZlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBvYmplY3Qgd3JhcHBlcnMgYXJlIGVxdWl2YWxlbnQ7IHRodXMsIGBcIjVcImAgaXNcbiAgICAgICAgLy8gZXF1aXZhbGVudCB0byBgbmV3IFN0cmluZyhcIjVcIilgLlxuICAgICAgICByZXR1cm4gYSA9PSBTdHJpbmcoYik7XG4gICAgICBjYXNlICdbb2JqZWN0IE51bWJlcl0nOlxuICAgICAgICAvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLiBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yXG4gICAgICAgIC8vIG90aGVyIG51bWVyaWMgdmFsdWVzLlxuICAgICAgICByZXR1cm4gYSAhPSArYSA/IGIgIT0gK2IgOiAoYSA9PSAwID8gMSAvIGEgPT0gMSAvIGIgOiBhID09ICtiKTtcbiAgICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6XG4gICAgICAgIC8vIENvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtZXJpYyBwcmltaXRpdmUgdmFsdWVzLiBEYXRlcyBhcmUgY29tcGFyZWQgYnkgdGhlaXJcbiAgICAgICAgLy8gbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zLiBOb3RlIHRoYXQgaW52YWxpZCBkYXRlcyB3aXRoIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9uc1xuICAgICAgICAvLyBvZiBgTmFOYCBhcmUgbm90IGVxdWl2YWxlbnQuXG4gICAgICAgIHJldHVybiArYSA9PSArYjtcbiAgICAgIC8vIFJlZ0V4cHMgYXJlIGNvbXBhcmVkIGJ5IHRoZWlyIHNvdXJjZSBwYXR0ZXJucyBhbmQgZmxhZ3MuXG4gICAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOlxuICAgICAgICByZXR1cm4gYS5zb3VyY2UgPT0gYi5zb3VyY2UgJiZcbiAgICAgICAgICAgICAgIGEuZ2xvYmFsID09IGIuZ2xvYmFsICYmXG4gICAgICAgICAgICAgICBhLm11bHRpbGluZSA9PSBiLm11bHRpbGluZSAmJlxuICAgICAgICAgICAgICAgYS5pZ25vcmVDYXNlID09IGIuaWdub3JlQ2FzZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhICE9ICdvYmplY3QnIHx8IHR5cGVvZiBiICE9ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gQXNzdW1lIGVxdWFsaXR5IGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpY1xuICAgIC8vIHN0cnVjdHVyZXMgaXMgYWRhcHRlZCBmcm9tIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMsIGFic3RyYWN0IG9wZXJhdGlvbiBgSk9gLlxuICAgIHZhciBsZW5ndGggPSBzdGFjay5sZW5ndGg7XG4gICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAvLyBMaW5lYXIgc2VhcmNoLiBQZXJmb3JtYW5jZSBpcyBpbnZlcnNlbHkgcHJvcG9ydGlvbmFsIHRvIHRoZSBudW1iZXIgb2ZcbiAgICAgIC8vIHVuaXF1ZSBuZXN0ZWQgc3RydWN0dXJlcy5cbiAgICAgIGlmIChzdGFja1tsZW5ndGhdID09IGEpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgc3RhY2sucHVzaChhKTtcbiAgICB2YXIgc2l6ZSA9IDAsIHJlc3VsdCA9IHRydWU7XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIGFuZCBhcnJheXMuXG4gICAgaWYgKGNsYXNzTmFtZSA9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICAvLyBDb21wYXJlIGFycmF5IGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeS5cbiAgICAgIHNpemUgPSBhLmxlbmd0aDtcbiAgICAgIHJlc3VsdCA9IHNpemUgPT0gYi5sZW5ndGg7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuXG4gICAgICAgIHdoaWxlIChzaXplLS0pIHtcbiAgICAgICAgICAvLyBFbnN1cmUgY29tbXV0YXRpdmUgZXF1YWxpdHkgZm9yIHNwYXJzZSBhcnJheXMuXG4gICAgICAgICAgaWYgKCEocmVzdWx0ID0gc2l6ZSBpbiBhID09IHNpemUgaW4gYiAmJiBlcShhW3NpemVdLCBiW3NpemVdLCBzdGFjaykpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPYmplY3RzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWl2YWxlbnQuXG4gICAgICBpZiAoJ2NvbnN0cnVjdG9yJyBpbiBhICE9ICdjb25zdHJ1Y3RvcicgaW4gYiB8fCBhLmNvbnN0cnVjdG9yICE9IGIuY29uc3RydWN0b3IpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLlxuICAgICAgZm9yICh2YXIga2V5IGluIGEpIHtcbiAgICAgICAgaWYgKF8uaGFzKGEsIGtleSkpIHtcbiAgICAgICAgICAvLyBDb3VudCB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHByb3BlcnRpZXMuXG4gICAgICAgICAgc2l6ZSsrO1xuICAgICAgICAgIC8vIERlZXAgY29tcGFyZSBlYWNoIG1lbWJlci5cbiAgICAgICAgICBpZiAoIShyZXN1bHQgPSBfLmhhcyhiLCBrZXkpICYmIGVxKGFba2V5XSwgYltrZXldLCBzdGFjaykpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMuXG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIGZvciAoa2V5IGluIGIpIHtcbiAgICAgICAgICBpZiAoXy5oYXMoYiwga2V5KSAmJiAhKHNpemUtLSkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9ICFzaXplO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBSZW1vdmUgdGhlIGZpcnN0IG9iamVjdCBmcm9tIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICBzdGFjay5wb3AoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gUGVyZm9ybSBhIGRlZXAgY29tcGFyaXNvbiB0byBjaGVjayBpZiB0d28gb2JqZWN0cyBhcmUgZXF1YWwuXG4gIF8uaXNFcXVhbCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gZXEoYSwgYiwgW10pO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gYXJyYXksIHN0cmluZywgb3Igb2JqZWN0IGVtcHR5P1xuICAvLyBBbiBcImVtcHR5XCIgb2JqZWN0IGhhcyBubyBlbnVtZXJhYmxlIG93bi1wcm9wZXJ0aWVzLlxuICBfLmlzRW1wdHkgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB0cnVlO1xuICAgIGlmIChfLmlzQXJyYXkob2JqKSB8fCBfLmlzU3RyaW5nKG9iaikpIHJldHVybiBvYmoubGVuZ3RoID09PSAwO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChfLmhhcyhvYmosIGtleSkpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgRE9NIGVsZW1lbnQ/XG4gIF8uaXNFbGVtZW50ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuICEhKG9iaiAmJiBvYmoubm9kZVR5cGUgPT0gMSk7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT9cbiAgLy8gRGVsZWdhdGVzIHRvIEVDTUE1J3MgbmF0aXZlIEFycmF5LmlzQXJyYXlcbiAgXy5pc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/XG4gIF8uaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSBPYmplY3Qob2JqKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhcmlhYmxlIGFuIGFyZ3VtZW50cyBvYmplY3Q/XG4gIF8uaXNBcmd1bWVudHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuICB9O1xuICBpZiAoIV8uaXNBcmd1bWVudHMoYXJndW1lbnRzKSkge1xuICAgIF8uaXNBcmd1bWVudHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiAhIShvYmogJiYgXy5oYXMob2JqLCAnY2FsbGVlJykpO1xuICAgIH07XG4gIH1cblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgZnVuY3Rpb24/XG4gIF8uaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgc3RyaW5nP1xuICBfLmlzU3RyaW5nID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PSAnW29iamVjdCBTdHJpbmddJztcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgbnVtYmVyP1xuICBfLmlzTnVtYmVyID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PSAnW29iamVjdCBOdW1iZXJdJztcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIG9iamVjdCBhIGZpbml0ZSBudW1iZXI/XG4gIF8uaXNGaW5pdGUgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gXy5pc051bWJlcihvYmopICYmIGlzRmluaXRlKG9iaik7XG4gIH07XG5cbiAgLy8gSXMgdGhlIGdpdmVuIHZhbHVlIGBOYU5gP1xuICBfLmlzTmFOID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgLy8gYE5hTmAgaXMgdGhlIG9ubHkgdmFsdWUgZm9yIHdoaWNoIGA9PT1gIGlzIG5vdCByZWZsZXhpdmUuXG4gICAgcmV0dXJuIG9iaiAhPT0gb2JqO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBib29sZWFuP1xuICBfLmlzQm9vbGVhbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IHRydWUgfHwgb2JqID09PSBmYWxzZSB8fCB0b1N0cmluZy5jYWxsKG9iaikgPT0gJ1tvYmplY3QgQm9vbGVhbl0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBkYXRlP1xuICBfLmlzRGF0ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT0gJ1tvYmplY3QgRGF0ZV0nO1xuICB9O1xuXG4gIC8vIElzIHRoZSBnaXZlbiB2YWx1ZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbj9cbiAgXy5pc1JlZ0V4cCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT0gJ1tvYmplY3QgUmVnRXhwXSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBlcXVhbCB0byBudWxsP1xuICBfLmlzTnVsbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IG51bGw7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSB1bmRlZmluZWQ/XG4gIF8uaXNVbmRlZmluZWQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSB2b2lkIDA7XG4gIH07XG5cbiAgLy8gSGFzIG93biBwcm9wZXJ0eT9cbiAgXy5oYXMgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbiAgfTtcblxuICAvLyBVdGlsaXR5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJ1biBVbmRlcnNjb3JlLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHNcbiAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290Ll8gPSBwcmV2aW91c1VuZGVyc2NvcmU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdG9ycy5cbiAgXy5pZGVudGl0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8vIFJ1biBhIGZ1bmN0aW9uICoqbioqIHRpbWVzLlxuICBfLnRpbWVzID0gZnVuY3Rpb24gKG4sIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgaSk7XG4gIH07XG5cbiAgLy8gRXNjYXBlIGEgc3RyaW5nIGZvciBIVE1MIGludGVycG9sYXRpb24uXG4gIF8uZXNjYXBlID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgcmV0dXJuICgnJytzdHJpbmcpLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKS5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JykucmVwbGFjZSgvJy9nLCAnJiN4Mjc7JykucmVwbGFjZSgvXFwvL2csJyYjeDJGOycpO1xuICB9O1xuXG4gIC8vIElmIHRoZSB2YWx1ZSBvZiB0aGUgbmFtZWQgcHJvcGVydHkgaXMgYSBmdW5jdGlvbiB0aGVuIGludm9rZSBpdDtcbiAgLy8gb3RoZXJ3aXNlLCByZXR1cm4gaXQuXG4gIF8ucmVzdWx0ID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgdmFyIHZhbHVlID0gb2JqZWN0W3Byb3BlcnR5XTtcbiAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlLmNhbGwob2JqZWN0KSA6IHZhbHVlO1xuICB9O1xuXG4gIC8vIEFkZCB5b3VyIG93biBjdXN0b20gZnVuY3Rpb25zIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdCwgZW5zdXJpbmcgdGhhdFxuICAvLyB0aGV5J3JlIGNvcnJlY3RseSBhZGRlZCB0byB0aGUgT09QIHdyYXBwZXIgYXMgd2VsbC5cbiAgXy5taXhpbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGVhY2goXy5mdW5jdGlvbnMob2JqKSwgZnVuY3Rpb24obmFtZSl7XG4gICAgICBhZGRUb1dyYXBwZXIobmFtZSwgX1tuYW1lXSA9IG9ialtuYW1lXSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaW50ZWdlciBpZCAodW5pcXVlIHdpdGhpbiB0aGUgZW50aXJlIGNsaWVudCBzZXNzaW9uKS5cbiAgLy8gVXNlZnVsIGZvciB0ZW1wb3JhcnkgRE9NIGlkcy5cbiAgdmFyIGlkQ291bnRlciA9IDA7XG4gIF8udW5pcXVlSWQgPSBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICB2YXIgaWQgPSBpZENvdW50ZXIrKztcbiAgICByZXR1cm4gcHJlZml4ID8gcHJlZml4ICsgaWQgOiBpZDtcbiAgfTtcblxuICAvLyBCeSBkZWZhdWx0LCBVbmRlcnNjb3JlIHVzZXMgRVJCLXN0eWxlIHRlbXBsYXRlIGRlbGltaXRlcnMsIGNoYW5nZSB0aGVcbiAgLy8gZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLlxuICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgZXZhbHVhdGUgICAgOiAvPCUoW1xcc1xcU10rPyklPi9nLFxuICAgIGludGVycG9sYXRlIDogLzwlPShbXFxzXFxTXSs/KSU+L2csXG4gICAgZXNjYXBlICAgICAgOiAvPCUtKFtcXHNcXFNdKz8pJT4vZ1xuICB9O1xuXG4gIC8vIFdoZW4gY3VzdG9taXppbmcgYHRlbXBsYXRlU2V0dGluZ3NgLCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBkZWZpbmUgYW5cbiAgLy8gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiBvciBlc2NhcGluZyByZWdleCwgd2UgbmVlZCBvbmUgdGhhdCBpc1xuICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC5cbiAgdmFyIG5vTWF0Y2ggPSAvLl4vO1xuXG4gIC8vIENlcnRhaW4gY2hhcmFjdGVycyBuZWVkIHRvIGJlIGVzY2FwZWQgc28gdGhhdCB0aGV5IGNhbiBiZSBwdXQgaW50byBhXG4gIC8vIHN0cmluZyBsaXRlcmFsLlxuICB2YXIgZXNjYXBlcyA9IHtcbiAgICAnXFxcXCc6ICdcXFxcJyxcbiAgICBcIidcIjogXCInXCIsXG4gICAgJ3InOiAnXFxyJyxcbiAgICAnbic6ICdcXG4nLFxuICAgICd0JzogJ1xcdCcsXG4gICAgJ3UyMDI4JzogJ1xcdTIwMjgnLFxuICAgICd1MjAyOSc6ICdcXHUyMDI5J1xuICB9O1xuXG4gIGZvciAodmFyIHAgaW4gZXNjYXBlcykgZXNjYXBlc1tlc2NhcGVzW3BdXSA9IHA7XG4gIHZhciBlc2NhcGVyID0gL1xcXFx8J3xcXHJ8XFxufFxcdHxcXHUyMDI4fFxcdTIwMjkvZztcbiAgdmFyIHVuZXNjYXBlciA9IC9cXFxcKFxcXFx8J3xyfG58dHx1MjAyOHx1MjAyOSkvZztcblxuICAvLyBXaXRoaW4gYW4gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiwgb3IgZXNjYXBpbmcsIHJlbW92ZSBIVE1MIGVzY2FwaW5nXG4gIC8vIHRoYXQgaGFkIGJlZW4gcHJldmlvdXNseSBhZGRlZC5cbiAgdmFyIHVuZXNjYXBlID0gZnVuY3Rpb24oY29kZSkge1xuICAgIHJldHVybiBjb2RlLnJlcGxhY2UodW5lc2NhcGVyLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlKSB7XG4gICAgICByZXR1cm4gZXNjYXBlc1tlc2NhcGVdO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEphdmFTY3JpcHQgbWljcm8tdGVtcGxhdGluZywgc2ltaWxhciB0byBKb2huIFJlc2lnJ3MgaW1wbGVtZW50YXRpb24uXG4gIC8vIFVuZGVyc2NvcmUgdGVtcGxhdGluZyBoYW5kbGVzIGFyYml0cmFyeSBkZWxpbWl0ZXJzLCBwcmVzZXJ2ZXMgd2hpdGVzcGFjZSxcbiAgLy8gYW5kIGNvcnJlY3RseSBlc2NhcGVzIHF1b3RlcyB3aXRoaW4gaW50ZXJwb2xhdGVkIGNvZGUuXG4gIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBkYXRhLCBzZXR0aW5ncykge1xuICAgIHNldHRpbmdzID0gXy5kZWZhdWx0cyhzZXR0aW5ncyB8fCB7fSwgXy50ZW1wbGF0ZVNldHRpbmdzKTtcblxuICAgIC8vIENvbXBpbGUgdGhlIHRlbXBsYXRlIHNvdXJjZSwgdGFraW5nIGNhcmUgdG8gZXNjYXBlIGNoYXJhY3RlcnMgdGhhdFxuICAgIC8vIGNhbm5vdCBiZSBpbmNsdWRlZCBpbiBhIHN0cmluZyBsaXRlcmFsIGFuZCB0aGVuIHVuZXNjYXBlIHRoZW0gaW4gY29kZVxuICAgIC8vIGJsb2Nrcy5cbiAgICB2YXIgc291cmNlID0gXCJfX3ArPSdcIiArIHRleHRcbiAgICAgIC5yZXBsYWNlKGVzY2FwZXIsIGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiAnXFxcXCcgKyBlc2NhcGVzW21hdGNoXTtcbiAgICAgIH0pXG4gICAgICAucmVwbGFjZShzZXR0aW5ncy5lc2NhcGUgfHwgbm9NYXRjaCwgZnVuY3Rpb24obWF0Y2gsIGNvZGUpIHtcbiAgICAgICAgcmV0dXJuIFwiJytcXG5fLmVzY2FwZShcIiArIHVuZXNjYXBlKGNvZGUpICsgXCIpK1xcbidcIjtcbiAgICAgIH0pXG4gICAgICAucmVwbGFjZShzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoLCBmdW5jdGlvbihtYXRjaCwgY29kZSkge1xuICAgICAgICByZXR1cm4gXCInK1xcbihcIiArIHVuZXNjYXBlKGNvZGUpICsgXCIpK1xcbidcIjtcbiAgICAgIH0pXG4gICAgICAucmVwbGFjZShzZXR0aW5ncy5ldmFsdWF0ZSB8fCBub01hdGNoLCBmdW5jdGlvbihtYXRjaCwgY29kZSkge1xuICAgICAgICByZXR1cm4gXCInO1xcblwiICsgdW5lc2NhcGUoY29kZSkgKyBcIlxcbjtfX3ArPSdcIjtcbiAgICAgIH0pICsgXCInO1xcblwiO1xuXG4gICAgLy8gSWYgYSB2YXJpYWJsZSBpcyBub3Qgc3BlY2lmaWVkLCBwbGFjZSBkYXRhIHZhbHVlcyBpbiBsb2NhbCBzY29wZS5cbiAgICBpZiAoIXNldHRpbmdzLnZhcmlhYmxlKSBzb3VyY2UgPSAnd2l0aChvYmp8fHt9KXtcXG4nICsgc291cmNlICsgJ31cXG4nO1xuXG4gICAgc291cmNlID0gXCJ2YXIgX19wPScnO1wiICtcbiAgICAgIFwidmFyIHByaW50PWZ1bmN0aW9uKCl7X19wKz1BcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKGFyZ3VtZW50cywgJycpfTtcXG5cIiArXG4gICAgICBzb3VyY2UgKyBcInJldHVybiBfX3A7XFxuXCI7XG5cbiAgICB2YXIgcmVuZGVyID0gbmV3IEZ1bmN0aW9uKHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonLCAnXycsIHNvdXJjZSk7XG4gICAgaWYgKGRhdGEpIHJldHVybiByZW5kZXIoZGF0YSwgXyk7XG4gICAgdmFyIHRlbXBsYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pO1xuICAgIH07XG5cbiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBmdW5jdGlvbiBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgYnVpbGQgdGltZVxuICAgIC8vIHByZWNvbXBpbGF0aW9uLlxuICAgIHRlbXBsYXRlLnNvdXJjZSA9ICdmdW5jdGlvbignICsgKHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonKSArICcpe1xcbicgK1xuICAgICAgc291cmNlICsgJ30nO1xuXG4gICAgcmV0dXJuIHRlbXBsYXRlO1xuICB9O1xuXG4gIC8vIEFkZCBhIFwiY2hhaW5cIiBmdW5jdGlvbiwgd2hpY2ggd2lsbCBkZWxlZ2F0ZSB0byB0aGUgd3JhcHBlci5cbiAgXy5jaGFpbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBfKG9iaikuY2hhaW4oKTtcbiAgfTtcblxuICAvLyBUaGUgT09QIFdyYXBwZXJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gSWYgVW5kZXJzY29yZSBpcyBjYWxsZWQgYXMgYSBmdW5jdGlvbiwgaXQgcmV0dXJucyBhIHdyYXBwZWQgb2JqZWN0IHRoYXRcbiAgLy8gY2FuIGJlIHVzZWQgT08tc3R5bGUuIFRoaXMgd3JhcHBlciBob2xkcyBhbHRlcmVkIHZlcnNpb25zIG9mIGFsbCB0aGVcbiAgLy8gdW5kZXJzY29yZSBmdW5jdGlvbnMuIFdyYXBwZWQgb2JqZWN0cyBtYXkgYmUgY2hhaW5lZC5cbiAgdmFyIHdyYXBwZXIgPSBmdW5jdGlvbihvYmopIHsgdGhpcy5fd3JhcHBlZCA9IG9iajsgfTtcblxuICAvLyBFeHBvc2UgYHdyYXBwZXIucHJvdG90eXBlYCBhcyBgXy5wcm90b3R5cGVgXG4gIF8ucHJvdG90eXBlID0gd3JhcHBlci5wcm90b3R5cGU7XG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnRpbnVlIGNoYWluaW5nIGludGVybWVkaWF0ZSByZXN1bHRzLlxuICB2YXIgcmVzdWx0ID0gZnVuY3Rpb24ob2JqLCBjaGFpbikge1xuICAgIHJldHVybiBjaGFpbiA/IF8ob2JqKS5jaGFpbigpIDogb2JqO1xuICB9O1xuXG4gIC8vIEEgbWV0aG9kIHRvIGVhc2lseSBhZGQgZnVuY3Rpb25zIHRvIHRoZSBPT1Agd3JhcHBlci5cbiAgdmFyIGFkZFRvV3JhcHBlciA9IGZ1bmN0aW9uKG5hbWUsIGZ1bmMpIHtcbiAgICB3cmFwcGVyLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICB1bnNoaWZ0LmNhbGwoYXJncywgdGhpcy5fd3JhcHBlZCk7XG4gICAgICByZXR1cm4gcmVzdWx0KGZ1bmMuYXBwbHkoXywgYXJncyksIHRoaXMuX2NoYWluKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEFkZCBhbGwgb2YgdGhlIFVuZGVyc2NvcmUgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgXy5taXhpbihfKTtcblxuICAvLyBBZGQgYWxsIG11dGF0b3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLlxuICBlYWNoKFsncG9wJywgJ3B1c2gnLCAncmV2ZXJzZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICB3cmFwcGVyLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHdyYXBwZWQgPSB0aGlzLl93cmFwcGVkO1xuICAgICAgbWV0aG9kLmFwcGx5KHdyYXBwZWQsIGFyZ3VtZW50cyk7XG4gICAgICB2YXIgbGVuZ3RoID0gd3JhcHBlZC5sZW5ndGg7XG4gICAgICBpZiAoKG5hbWUgPT0gJ3NoaWZ0JyB8fCBuYW1lID09ICdzcGxpY2UnKSAmJiBsZW5ndGggPT09IDApIGRlbGV0ZSB3cmFwcGVkWzBdO1xuICAgICAgcmV0dXJuIHJlc3VsdCh3cmFwcGVkLCB0aGlzLl9jaGFpbik7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWRkIGFsbCBhY2Nlc3NvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIGVhY2goWydjb25jYXQnLCAnam9pbicsICdzbGljZSddLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIG1ldGhvZCA9IEFycmF5UHJvdG9bbmFtZV07XG4gICAgd3JhcHBlci5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiByZXN1bHQobWV0aG9kLmFwcGx5KHRoaXMuX3dyYXBwZWQsIGFyZ3VtZW50cyksIHRoaXMuX2NoYWluKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBTdGFydCBjaGFpbmluZyBhIHdyYXBwZWQgVW5kZXJzY29yZSBvYmplY3QuXG4gIHdyYXBwZXIucHJvdG90eXBlLmNoYWluID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fY2hhaW4gPSB0cnVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIEV4dHJhY3RzIHRoZSByZXN1bHQgZnJvbSBhIHdyYXBwZWQgYW5kIGNoYWluZWQgb2JqZWN0LlxuICB3cmFwcGVyLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl93cmFwcGVkO1xuICB9O1xuICByZXR1cm4gXztcbn0pLmNhbGwoe30pO1xuLyoqXG4gKiBDb3JlIEVtbWV0IG9iamVjdCwgYXZhaWxhYmxlIGluIGdsb2JhbCBzY29wZVxuICovXG52YXIgZW1tZXQgPSAoZnVuY3Rpb24oZ2xvYmFsKSB7XG5cdHZhciBkZWZhdWx0U3ludGF4ID0gJ2h0bWwnO1xuXHR2YXIgZGVmYXVsdFByb2ZpbGUgPSAncGxhaW4nO1xuXG5cdGlmICh0eXBlb2YgXyA9PSAndW5kZWZpbmVkJykge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBhdm9pZCBjb2xsaXNpb25zIHdpdGggUmVxdWlyZUpTIGxvYWRlclxuXHRcdFx0Ly8gYWxzbywgSlMgb2JmdXNjYXRvcnMgdGVuZHMgdG8gdHJhbnNsYXRlXG5cdFx0XHQvLyBhW1wibmFtZVwiXSB0byBhLm5hbWUsIHdoaWNoIGFsc28gYnJlYWtzIFJlcXVpcmVKU1xuXHRcdFx0XyA9IGdsb2JhbFtbJ3JlcXVpcmUnXVswXV0oJ3VuZGVyc2NvcmUnKTsgLy8gbm9kZS5qc1xuXHRcdH0gY2F0Y2ggKGUpIHt9XG5cdH1cblxuXHRpZiAodHlwZW9mIF8gPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHR0aHJvdyAnQ2Fubm90IGFjY2VzcyB0byBVbmRlcnNjb3JlLmpzIGxpYic7XG5cdH1cblxuXHQvKiogTGlzdCBvZiByZWdpc3RlcmVkIG1vZHVsZXMgKi9cblx0dmFyIG1vZHVsZXMgPSB7XG5cdFx0XyA6IF9cblx0fTtcblxuXHQvKipcblx0ICogU2hhcmVkIGVtcHR5IGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGFpZCBpbiBwcm90b3R5cGUtY2hhaW4gY3JlYXRpb24uXG5cdCAqL1xuXHR2YXIgY3RvciA9IGZ1bmN0aW9uKCl7fTtcblxuXHQvKipcblx0ICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvcnJlY3RseSBzZXQgdXAgdGhlIHByb3RvdHlwZSBjaGFpbiwgZm9yIHN1YmNsYXNzZXMuXG5cdCAqIFNpbWlsYXIgdG8gYGdvb2cuaW5oZXJpdHNgLCBidXQgdXNlcyBhIGhhc2ggb2YgcHJvdG90eXBlIHByb3BlcnRpZXMgYW5kXG5cdCAqIGNsYXNzIHByb3BlcnRpZXMgdG8gYmUgZXh0ZW5kZWQuXG5cdCAqIFRvb2sgaXQgZnJvbSBCYWNrYm9uZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvdG9Qcm9wc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gc3RhdGljUHJvcHNcblx0ICogQHJldHVybnMge09iamVjdH1cblx0ICovXG5cdGZ1bmN0aW9uIGluaGVyaXRzKHBhcmVudCwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0XHR2YXIgY2hpbGQ7XG5cblx0XHQvLyBUaGUgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yIHRoZSBuZXcgc3ViY2xhc3MgaXMgZWl0aGVyIGRlZmluZWQgYnlcblx0XHQvLyB5b3UgKHRoZSBcImNvbnN0cnVjdG9yXCIgcHJvcGVydHkgaW4geW91ciBgZXh0ZW5kYCBkZWZpbml0aW9uKSwgb3Jcblx0XHQvLyBkZWZhdWx0ZWQgYnkgdXMgdG8gc2ltcGx5IGNhbGwgdGhlIHBhcmVudCdzIGNvbnN0cnVjdG9yLlxuXHRcdGlmIChwcm90b1Byb3BzICYmIHByb3RvUHJvcHMuaGFzT3duUHJvcGVydHkoJ2NvbnN0cnVjdG9yJykpIHtcblx0XHRcdGNoaWxkID0gcHJvdG9Qcm9wcy5jb25zdHJ1Y3Rvcjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y2hpbGQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0cGFyZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIEluaGVyaXQgY2xhc3MgKHN0YXRpYykgcHJvcGVydGllcyBmcm9tIHBhcmVudC5cblx0XHRfLmV4dGVuZChjaGlsZCwgcGFyZW50KTtcblxuXHRcdC8vIFNldCB0aGUgcHJvdG90eXBlIGNoYWluIHRvIGluaGVyaXQgZnJvbSBgcGFyZW50YCwgd2l0aG91dCBjYWxsaW5nXG5cdFx0Ly8gYHBhcmVudGAncyBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cblx0XHRjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7XG5cdFx0Y2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTtcblxuXHRcdC8vIEFkZCBwcm90b3R5cGUgcHJvcGVydGllcyAoaW5zdGFuY2UgcHJvcGVydGllcykgdG8gdGhlIHN1YmNsYXNzLFxuXHRcdC8vIGlmIHN1cHBsaWVkLlxuXHRcdGlmIChwcm90b1Byb3BzKVxuXHRcdFx0Xy5leHRlbmQoY2hpbGQucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcblxuXHRcdC8vIEFkZCBzdGF0aWMgcHJvcGVydGllcyB0byB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb24sIGlmIHN1cHBsaWVkLlxuXHRcdGlmIChzdGF0aWNQcm9wcylcblx0XHRcdF8uZXh0ZW5kKGNoaWxkLCBzdGF0aWNQcm9wcyk7XG5cblx0XHQvLyBDb3JyZWN0bHkgc2V0IGNoaWxkJ3MgYHByb3RvdHlwZS5jb25zdHJ1Y3RvcmAuXG5cdFx0Y2hpbGQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY2hpbGQ7XG5cblx0XHQvLyBTZXQgYSBjb252ZW5pZW5jZSBwcm9wZXJ0eSBpbiBjYXNlIHRoZSBwYXJlbnQncyBwcm90b3R5cGUgaXMgbmVlZGVkXG5cdFx0Ly8gbGF0ZXIuXG5cdFx0Y2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTtcblxuXHRcdHJldHVybiBjaGlsZDtcblx0fTtcblxuXHQvKipcblx0ICogQHR5cGUgRnVuY3Rpb24gRnVuY3Rpb24gdGhhdCBsb2FkcyBtb2R1bGUgZGVmaW5pdGlvbiBpZiBpdCdzIG5vdCBkZWZpbmVkXG5cdCAqL1xuXHR2YXIgbW9kdWxlTG9hZGVyID0gbnVsbDtcblxuXHQvKipcblx0ICogR2VuZXJpYyBFbW1ldCBtb2R1bGUgbG9hZGVyIChhY3R1YWxseSwgaXQgZG9lc27igJl0IGxvYWQgYW55dGhpbmcsIGp1c3Rcblx0ICogcmV0dXJucyBtb2R1bGUgcmVmZXJlbmNlKS4gTm90IHVzaW5nIGByZXF1aXJlYCBuYW1lIHRvIGF2b2lkIGNvbmZsaWN0c1xuXHQgKiB3aXRoIE5vZGUuanMgYW5kIFJlcXVpcmVKU1xuXHQgKi9cblx0ZnVuY3Rpb24gcihuYW1lKSB7XG5cdFx0aWYgKCEobmFtZSBpbiBtb2R1bGVzKSAmJiBtb2R1bGVMb2FkZXIpXG5cdFx0XHRtb2R1bGVMb2FkZXIobmFtZSk7XG5cblx0XHRyZXR1cm4gbW9kdWxlc1tuYW1lXTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0LyoqXG5cdFx0ICogU2ltcGxlLCBBTUQtbGlrZSBtb2R1bGUgZGVmaW5pdGlvbi4gVGhlIG1vZHVsZSB3aWxsIGJlIGFkZGVkIGludG9cblx0XHQgKiA8Y29kZT5lbW1ldDwvY29kZT4gb2JqZWN0IGFuZCB3aWxsIGJlIGF2YWlsYWJsZSB2aWFcblx0XHQgKiA8Y29kZT5lbW1ldC5yZXF1aXJlKG5hbWUpPC9jb2RlPiBvciA8Y29kZT5lbW1ldFtuYW1lXTwvY29kZT5cblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZhY3Rvcnlcblx0XHQgKiBAbWVtYmVyT2YgZW1tZXRcblx0XHQgKi9cblx0XHRkZWZpbmU6IGZ1bmN0aW9uKG5hbWUsIGZhY3RvcnkpIHtcblx0XHRcdC8vIGRvIG5vdCBsZXQgcmVkZWZpbmUgZXhpc3RpbmcgcHJvcGVydGllc1xuXHRcdFx0aWYgKCEobmFtZSBpbiBtb2R1bGVzKSkge1xuXHRcdFx0XHRtb2R1bGVzW25hbWVdID0gXy5pc0Z1bmN0aW9uKGZhY3RvcnkpXG5cdFx0XHRcdFx0PyB0aGlzLmV4ZWMoZmFjdG9yeSlcblx0XHRcdFx0XHQ6IGZhY3Rvcnk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgcmVmZXJlbmNlIHRvIEVtbWV0IG1vZHVsZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE1vZHVsZSBuYW1lXG5cdFx0ICovXG5cdFx0cmVxdWlyZTogcixcblxuXHRcdC8qKlxuXHRcdCAqIEhlbHBlciBtZXRob2QgdGhhdCBqdXN0IGV4ZWN1dGVzIHBhc3NlZCBmdW5jdGlvbiBidXQgd2l0aCBhbGxcblx0XHQgKiBpbXBvcnRhbnQgYXJndW1lbnRzIGxpa2UgJ3JlcXVpcmUnIGFuZCAnXydcblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0IEV4ZWN1dGlvbiBjb250ZXh0XG5cdFx0ICovXG5cdFx0ZXhlYzogZnVuY3Rpb24oZm4sIGNvbnRleHQpIHtcblx0XHRcdHJldHVybiBmbi5jYWxsKGNvbnRleHQgfHwgZ2xvYmFsLCBfLmJpbmQociwgdGhpcyksIF8sIHRoaXMpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBUaGUgc2VsZi1wcm9wYWdhdGluZyBleHRlbmQgZnVuY3Rpb24gZm9yIGNsYXNzZXMuXG5cdFx0ICogVG9vayBpdCBmcm9tIEJhY2tib25lXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IHByb3RvUHJvcHNcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gY2xhc3NQcm9wc1xuXHRcdCAqIEByZXR1cm5zIHtPYmplY3R9XG5cdFx0ICovXG5cdFx0ZXh0ZW5kOiBmdW5jdGlvbihwcm90b1Byb3BzLCBjbGFzc1Byb3BzKSB7XG5cdFx0XHR2YXIgY2hpbGQgPSBpbmhlcml0cyh0aGlzLCBwcm90b1Byb3BzLCBjbGFzc1Byb3BzKTtcblx0XHRcdGNoaWxkLmV4dGVuZCA9IHRoaXMuZXh0ZW5kO1xuXHRcdFx0Ly8gYSBoYWNrIHJlcXVpcmVkIHRvIFdTSCBpbmhlcml0IGB0b1N0cmluZ2AgbWV0aG9kXG5cdFx0XHRpZiAocHJvdG9Qcm9wcy5oYXNPd25Qcm9wZXJ0eSgndG9TdHJpbmcnKSlcblx0XHRcdFx0Y2hpbGQucHJvdG90eXBlLnRvU3RyaW5nID0gcHJvdG9Qcm9wcy50b1N0cmluZztcblx0XHRcdHJldHVybiBjaGlsZDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVGhlIGVzc2VudGlhbCBmdW5jdGlvbiB0aGF0IGV4cGFuZHMgRW1tZXQgYWJicmV2aWF0aW9uXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGFiYnIgQWJicmV2aWF0aW9uIHRvIHBhcnNlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bnRheCBBYmJyZXZpYXRpb24ncyBjb250ZXh0IHN5bnRheFxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9maWxlIE91dHB1dCBwcm9maWxlIChvciBpdHMgbmFtZSlcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dE5vZGUgQ29udGV4dHVhbCBub2RlIHdoZXJlIGFiYnJldmlhdGlvbiBpc1xuXHRcdCAqIHdyaXR0ZW5cblx0XHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0ZXhwYW5kQWJicmV2aWF0aW9uOiBmdW5jdGlvbihhYmJyLCBzeW50YXgsIHByb2ZpbGUsIGNvbnRleHROb2RlKSB7XG5cdFx0XHRpZiAoIWFiYnIpIHJldHVybiAnJztcblxuXHRcdFx0c3ludGF4ID0gc3ludGF4IHx8IGRlZmF1bHRTeW50YXg7XG4vL1x0XHRcdHByb2ZpbGUgPSBwcm9maWxlIHx8IGRlZmF1bHRQcm9maWxlO1xuXG5cdFx0XHR2YXIgZmlsdGVycyA9IHIoJ2ZpbHRlcnMnKTtcblx0XHRcdHZhciBwYXJzZXIgPSByKCdhYmJyZXZpYXRpb25QYXJzZXInKTtcblxuXHRcdFx0cHJvZmlsZSA9IHIoJ3Byb2ZpbGUnKS5nZXQocHJvZmlsZSwgc3ludGF4KTtcblx0XHRcdHIoJ3RhYlN0b3BzJykucmVzZXRUYWJzdG9wSW5kZXgoKTtcblxuXHRcdFx0dmFyIGRhdGEgPSBmaWx0ZXJzLmV4dHJhY3RGcm9tQWJicmV2aWF0aW9uKGFiYnIpO1xuXHRcdFx0dmFyIG91dHB1dFRyZWUgPSBwYXJzZXIucGFyc2UoZGF0YVswXSwge1xuXHRcdFx0XHRzeW50YXg6IHN5bnRheCxcblx0XHRcdFx0Y29udGV4dE5vZGU6IGNvbnRleHROb2RlXG5cdFx0XHR9KTtcblxuXHRcdFx0dmFyIGZpbHRlcnNMaXN0ID0gZmlsdGVycy5jb21wb3NlTGlzdChzeW50YXgsIHByb2ZpbGUsIGRhdGFbMV0pO1xuXHRcdFx0ZmlsdGVycy5hcHBseShvdXRwdXRUcmVlLCBmaWx0ZXJzTGlzdCwgcHJvZmlsZSk7XG5cdFx0XHRyZXR1cm4gb3V0cHV0VHJlZS50b1N0cmluZygpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGRlZmF1bHQgc3ludGF4IG5hbWUgdXNlZCBpbiBhYmJyZXZpYXRpb24gZW5naW5lXG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRkZWZhdWx0U3ludGF4OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBkZWZhdWx0U3ludGF4O1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGRlZmF1bHQgcHJvZmlsZSBuYW1lIHVzZWQgaW4gYWJicmV2aWF0aW9uIGVuZ2luZVxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0ZGVmYXVsdFByb2ZpbGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGRlZmF1bHRQcm9maWxlO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBMb2cgbWVzc2FnZSBpbnRvIGNvbnNvbGUgaWYgaXQgZXhpc3RzXG5cdFx0ICovXG5cdFx0bG9nOiBmdW5jdGlvbigpIHtcblx0XHRcdGlmIChnbG9iYWwuY29uc29sZSAmJiBnbG9iYWwuY29uc29sZS5sb2cpXG5cdFx0XHRcdGdsb2JhbC5jb25zb2xlLmxvZy5hcHBseShnbG9iYWwuY29uc29sZSwgYXJndW1lbnRzKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2V0dXBzIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIHN5bmNocm9ub3VzbHkgbG9hZCB1bmRlZmluZWQgbW9kdWxlc1xuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdFx0ICovXG5cdFx0c2V0TW9kdWxlTG9hZGVyOiBmdW5jdGlvbihmbikge1xuXHRcdFx0bW9kdWxlTG9hZGVyID0gZm47XG5cdFx0fVxuXHR9O1xufSkodGhpcyk7XG5cbi8vIGV4cG9ydCBjb3JlIGZvciBOb2RlLkpTXG5pZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGVtbWV0O1xuXHR9XG5cdGV4cG9ydHMuZW1tZXQgPSBlbW1ldDtcbn1cblxuLy8gZXhwb3J0IGFzIFJlcXVpcmUuanMgbW9kdWxlXG5pZiAodHlwZW9mIGRlZmluZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ZGVmaW5lKCdlbW1ldCcsIFtdLCBlbW1ldCk7XG59LyoqXG4gKiBFbW1ldCBhYmJyZXZpYXRpb24gcGFyc2VyLlxuICogVGFrZXMgc3RyaW5nIGFiYnJldmlhdGlvbiBhbmQgcmVjdXJzaXZlbHkgcGFyc2VzIGl0IGludG8gYSB0cmVlLiBUaGUgcGFyc2VkXG4gKiB0cmVlIGNhbiBiZSB0cmFuc2Zvcm1lZCBpbnRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIHdpdGhcbiAqIDxjb2RlPnRvU3RyaW5nKCk8L2NvZGU+IG1ldGhvZC4gTm90ZSB0aGF0IHN0cmluZyByZXByZXNlbnRhdGlvbiBpcyBkZWZpbmVkXG4gKiBieSBjdXN0b20gcHJvY2Vzc29ycyAoY2FsbGVkIDxpPmZpbHRlcnM8L2k+KSwgbm90IGJ5IGFiYnJldmlhdGlvbiBwYXJzZXJcbiAqIGl0c2VsZi5cbiAqXG4gKiBUaGlzIG1vZHVsZSBjYW4gYmUgZXh0ZW5kZWQgd2l0aCBjdXN0b20gcHJlLS9wb3N0LXByb2Nlc3NvcnMgdG8gc2hhcGUtdXBcbiAqIGZpbmFsIHRyZWUgb3IgaXRzIHJlcHJlc2VudGF0aW9uLiBBY3R1YWxseSwgbWFueSBmZWF0dXJlcyBvZiBhYmJyZXZpYXRpb25cbiAqIGVuZ2luZSBhcmUgZGVmaW5lZCBpbiBvdGhlciBtb2R1bGVzIGFzIHRyZWUgcHJvY2Vzc29yc1xuICpcbiAqXG4gKiBAYXV0aG9yIFNlcmdleSBDaGlrdXlvbm9rIChzZXJnZS5jaGVAZ21haWwuY29tKVxuICogQGxpbmsgaHR0cDovL2NoaWt1eW9ub2sucnVcbiAqIEBtZW1iZXJPZiBfX2FiYnJldmlhdGlvblBhcnNlclxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZGVmaW5lKCdhYmJyZXZpYXRpb25QYXJzZXInLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHZhciByZVZhbGlkTmFtZSA9IC9eW1xcd1xcLVxcJFxcOkBcXCElXStcXCs/JC9pO1xuXHR2YXIgcmVXb3JkID0gL1tcXHdcXC06XFwkQF0vO1xuXG5cdHZhciBwYWlycyA9IHtcblx0XHQnWyc6ICddJyxcblx0XHQnKCc6ICcpJyxcblx0XHQneyc6ICd9J1xuXHR9O1xuXG5cdHZhciBzcGxpY2VGbiA9IEFycmF5LnByb3RvdHlwZS5zcGxpY2U7XG5cblx0dmFyIHByZXByb2Nlc3NvcnMgPSBbXTtcblx0dmFyIHBvc3Rwcm9jZXNzb3JzID0gW107XG5cdHZhciBvdXRwdXRQcm9jZXNzb3JzID0gW107XG5cblx0LyoqXG5cdCAqIEB0eXBlIEFiYnJldmlhdGlvbk5vZGVcblx0ICovXG5cdGZ1bmN0aW9uIEFiYnJldmlhdGlvbk5vZGUocGFyZW50KSB7XG5cdFx0LyoqIEB0eXBlIEFiYnJldmlhdGlvbk5vZGUgKi9cblx0XHR0aGlzLnBhcmVudCA9IG51bGw7XG5cdFx0dGhpcy5jaGlsZHJlbiA9IFtdO1xuXHRcdHRoaXMuX2F0dHJpYnV0ZXMgPSBbXTtcblxuXHRcdC8qKiBAdHlwZSBTdHJpbmcgUmF3IGFiYnJldmlhdGlvbiBmb3IgY3VycmVudCBub2RlICovXG5cdFx0dGhpcy5hYmJyZXZpYXRpb24gPSAnJztcblx0XHR0aGlzLmNvdW50ZXIgPSAxO1xuXHRcdHRoaXMuX25hbWUgPSBudWxsO1xuXHRcdHRoaXMuX3RleHQgPSAnJztcblx0XHR0aGlzLnJlcGVhdENvdW50ID0gMTtcblx0XHR0aGlzLmhhc0ltcGxpY2l0UmVwZWF0ID0gZmFsc2U7XG5cblx0XHQvKiogQ3VzdG9tIGRhdGEgZGljdGlvbmFyeSAqL1xuXHRcdHRoaXMuX2RhdGEgPSB7fTtcblxuXHRcdC8vIG91dHB1dCBwcm9wZXJ0aWVzXG5cdFx0dGhpcy5zdGFydCA9ICcnO1xuXHRcdHRoaXMuZW5kID0gJyc7XG5cdFx0dGhpcy5jb250ZW50ID0gJyc7XG5cdFx0dGhpcy5wYWRkaW5nID0gJyc7XG5cdH1cblxuXHRBYmJyZXZpYXRpb25Ob2RlLnByb3RvdHlwZSA9IHtcblx0XHQvKipcblx0XHQgKiBBZGRzIHBhc3NlZCBub2RlIGFzIGNoaWxkIG9yIGNyZWF0ZXMgbmV3IGNoaWxkXG5cdFx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBjaGlsZFxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvbiBJbmRleCBpbiBjaGlsZHJlbiBhcnJheSB3aGVyZSBjaGlsZCBzaG91bGRcblx0XHQgKiBiZSBpbnNlcnRlZFxuXHRcdCAqIEByZXR1cm4ge0FiYnJldmlhdGlvbk5vZGV9XG5cdFx0ICovXG5cdFx0YWRkQ2hpbGQ6IGZ1bmN0aW9uKGNoaWxkLCBwb3NpdGlvbikge1xuXHRcdFx0Y2hpbGQgPSBjaGlsZCB8fCBuZXcgQWJicmV2aWF0aW9uTm9kZTtcblx0XHRcdGNoaWxkLnBhcmVudCA9IHRoaXM7XG5cblx0XHRcdGlmIChfLmlzVW5kZWZpbmVkKHBvc2l0aW9uKSkge1xuXHRcdFx0XHR0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5jaGlsZHJlbi5zcGxpY2UocG9zaXRpb24sIDAsIGNoaWxkKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGNoaWxkO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIGN1cnJlbnQgbm9kZVxuXHRcdCAqIEByZXR1cm5zIHtBYmJyZXZpYXRpb25Ob2RlfVxuXHRcdCAqL1xuXHRcdGNsb25lOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBub2RlID0gbmV3IEFiYnJldmlhdGlvbk5vZGUoKTtcblx0XHRcdHZhciBhdHRycyA9IFsnYWJicmV2aWF0aW9uJywgJ2NvdW50ZXInLCAnX25hbWUnLCAnX3RleHQnLCAncmVwZWF0Q291bnQnLCAnaGFzSW1wbGljaXRSZXBlYXQnLCAnc3RhcnQnLCAnZW5kJywgJ2NvbnRlbnQnLCAncGFkZGluZyddO1xuXHRcdFx0Xy5lYWNoKGF0dHJzLCBmdW5jdGlvbihhKSB7XG5cdFx0XHRcdG5vZGVbYV0gPSB0aGlzW2FdO1xuXHRcdFx0fSwgdGhpcyk7XG5cblx0XHRcdC8vIGNsb25lIGF0dHJpYnV0ZXNcblx0XHRcdG5vZGUuX2F0dHJpYnV0ZXMgPSBfLm1hcCh0aGlzLl9hdHRyaWJ1dGVzLCBmdW5jdGlvbihhdHRyKSB7XG5cdFx0XHRcdHJldHVybiBfLmNsb25lKGF0dHIpO1xuXHRcdFx0fSk7XG5cblx0XHRcdG5vZGUuX2RhdGEgPSBfLmNsb25lKHRoaXMuX2RhdGEpO1xuXG5cdFx0XHQvLyBjbG9uZSBjaGlsZHJlblxuXHRcdFx0bm9kZS5jaGlsZHJlbiA9IF8ubWFwKHRoaXMuY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKSB7XG5cdFx0XHRcdGNoaWxkID0gY2hpbGQuY2xvbmUoKTtcblx0XHRcdFx0Y2hpbGQucGFyZW50ID0gbm9kZTtcblx0XHRcdFx0cmV0dXJuIGNoaWxkO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBub2RlO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZW1vdmVzIGN1cnJlbnQgbm9kZSBmcm9tIHBhcmVudOKAmHMgY2hpbGQgbGlzdFxuXHRcdCAqIEByZXR1cm5zIHtBYmJyZXZpYXRpb25Ob2RlfSBDdXJyZW50IG5vZGUgaXRzZWxmXG5cdFx0ICovXG5cdFx0cmVtb3ZlOiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICh0aGlzLnBhcmVudCkge1xuXHRcdFx0XHR0aGlzLnBhcmVudC5jaGlsZHJlbiA9IF8ud2l0aG91dCh0aGlzLnBhcmVudC5jaGlsZHJlbiwgdGhpcyk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXBsYWNlcyBjdXJyZW50IG5vZGUgaW4gcGFyZW504oCYcyBjaGlsZHJlbiBsaXN0IHdpdGggcGFzc2VkIG5vZGVzXG5cdFx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBub2RlIFJlcGxhY2VtZW50IG5vZGUgb3IgYXJyYXkgb2Ygbm9kZXNcblx0XHQgKi9cblx0XHRyZXBsYWNlOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudDtcblx0XHRcdHZhciBpeCA9IF8uaW5kZXhPZihwYXJlbnQuY2hpbGRyZW4sIHRoaXMpO1xuXHRcdFx0dmFyIGl0ZW1zID0gXy5mbGF0dGVuKGFyZ3VtZW50cyk7XG5cdFx0XHRzcGxpY2VGbi5hcHBseShwYXJlbnQuY2hpbGRyZW4sIFtpeCwgMV0uY29uY2F0KGl0ZW1zKSk7XG5cblx0XHRcdC8vIHVwZGF0ZSBwYXJlbnRcblx0XHRcdF8uZWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRpdGVtLnBhcmVudCA9IHBhcmVudDtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZWN1cnNpdmVseSBzZXRzIDxjb2RlPnByb3BlcnR5PC9jb2RlPiB0byA8Y29kZT52YWx1ZTwvY29kZT4gb2YgY3VycmVudFxuXHRcdCAqIG5vZGUgYW5kIGl0cyBjaGlsZHJlblxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFByb3BlcnR5IHRvIHVwZGF0ZVxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSBOZXcgcHJvcGVydHkgdmFsdWVcblx0XHQgKi9cblx0XHR1cGRhdGVQcm9wZXJ0eTogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcblx0XHRcdHRoaXNbbmFtZV0gPSB2YWx1ZTtcblx0XHRcdF8uZWFjaCh0aGlzLmNoaWxkcmVuLCBmdW5jdGlvbihjaGlsZCkge1xuXHRcdFx0XHRjaGlsZC51cGRhdGVQcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEZpbmRzIGZpcnN0IGNoaWxkIG5vZGUgdGhhdCBtYXRjaGVzIHRydXRoIHRlc3QgZm9yIHBhc3NlZFxuXHRcdCAqIDxjb2RlPmZuPC9jb2RlPiBmdW5jdGlvblxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdFx0ICogQHJldHVybnMge0FiYnJldmlhdGlvbk5vZGV9XG5cdFx0ICovXG5cdFx0ZmluZDogZnVuY3Rpb24oZm4pIHtcblx0XHRcdHJldHVybiB0aGlzLmZpbmRBbGwoZm4pWzBdO1xuLy9cdFx0XHRpZiAoIV8uaXNGdW5jdGlvbihmbikpIHtcbi8vXHRcdFx0XHR2YXIgZWxlbU5hbWUgPSBmbi50b0xvd2VyQ2FzZSgpO1xuLy9cdFx0XHRcdGZuID0gZnVuY3Rpb24oaXRlbSkge3JldHVybiBpdGVtLm5hbWUoKS50b0xvd2VyQ2FzZSgpID09IGVsZW1OYW1lO307XG4vL1x0XHRcdH1cbi8vXG4vL1x0XHRcdHZhciByZXN1bHQgPSBudWxsO1xuLy9cdFx0XHRfLmZpbmQodGhpcy5jaGlsZHJlbiwgZnVuY3Rpb24oY2hpbGQpIHtcbi8vXHRcdFx0XHRpZiAoZm4oY2hpbGQpKSB7XG4vL1x0XHRcdFx0XHRyZXR1cm4gcmVzdWx0ID0gY2hpbGQ7XG4vL1x0XHRcdFx0fVxuLy9cbi8vXHRcdFx0XHRyZXR1cm4gcmVzdWx0ID0gY2hpbGQuZmluZChmbik7XG4vL1x0XHRcdH0pO1xuLy9cbi8vXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogRmluZHMgYWxsIGNoaWxkIG5vZGVzIHRoYXQgbWF0Y2hlcyB0cnV0aCB0ZXN0IGZvciBwYXNzZWRcblx0XHQgKiA8Y29kZT5mbjwvY29kZT4gZnVuY3Rpb25cblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHRcdCAqIEByZXR1cm5zIHtBcnJheX1cblx0XHQgKi9cblx0XHRmaW5kQWxsOiBmdW5jdGlvbihmbikge1xuXHRcdFx0aWYgKCFfLmlzRnVuY3Rpb24oZm4pKSB7XG5cdFx0XHRcdHZhciBlbGVtTmFtZSA9IGZuLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdGZuID0gZnVuY3Rpb24oaXRlbSkge3JldHVybiBpdGVtLm5hbWUoKS50b0xvd2VyQ2FzZSgpID09IGVsZW1OYW1lO307XG5cdFx0XHR9XG5cblx0XHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHRcdF8uZWFjaCh0aGlzLmNoaWxkcmVuLCBmdW5jdGlvbihjaGlsZCkge1xuXHRcdFx0XHRpZiAoZm4oY2hpbGQpKVxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGNoaWxkKTtcblxuXHRcdFx0XHRyZXN1bHQgPSByZXN1bHQuY29uY2F0KGNoaWxkLmZpbmRBbGwoZm4pKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gXy5jb21wYWN0KHJlc3VsdCk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFNldHMvZ2V0cyBjdXN0b20gZGF0YVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG5cdFx0ICogQHJldHVybnMge09iamVjdH1cblx0XHQgKi9cblx0XHRkYXRhOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuXHRcdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikge1xuXHRcdFx0XHR0aGlzLl9kYXRhW25hbWVdID0gdmFsdWU7XG5cblx0XHRcdFx0aWYgKG5hbWUgPT0gJ3Jlc291cmNlJyAmJiByZXF1aXJlKCdlbGVtZW50cycpLmlzKHZhbHVlLCAnc25pcHBldCcpKSB7XG5cdFx0XHRcdFx0Ly8gc2V0dGluZyBzbmlwcGV0IGFzIG1hdGNoZWQgcmVzb3VyY2U6IHVwZGF0ZSBgY29udGVudGBcblx0XHRcdFx0XHQvLyBwcm9wZXJ0eSB3aXRoIHNuaXBwZXQgdmFsdWVcblx0XHRcdFx0XHR0aGlzLmNvbnRlbnQgPSB2YWx1ZS5kYXRhO1xuXHRcdFx0XHRcdGlmICh0aGlzLl90ZXh0KSB7XG5cdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnQgPSByZXF1aXJlKCdhYmJyZXZpYXRpb25VdGlscycpXG5cdFx0XHRcdFx0XHRcdC5pbnNlcnRDaGlsZENvbnRlbnQodmFsdWUuZGF0YSwgdGhpcy5fdGV4dCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzLl9kYXRhW25hbWVdO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIG5hbWUgb2YgY3VycmVudCBub2RlXG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRuYW1lOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciByZXMgPSB0aGlzLm1hdGNoZWRSZXNvdXJjZSgpO1xuXHRcdFx0aWYgKHJlcXVpcmUoJ2VsZW1lbnRzJykuaXMocmVzLCAnZWxlbWVudCcpKSB7XG5cdFx0XHRcdHJldHVybiByZXMubmFtZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRoaXMuX25hbWU7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgbGlzdCBvZiBhdHRyaWJ1dGVzIGZvciBjdXJyZW50IG5vZGVcblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdFx0ICovXG5cdFx0YXR0cmlidXRlTGlzdDogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgYXR0cnMgPSBbXTtcblxuXHRcdFx0dmFyIHJlcyA9IHRoaXMubWF0Y2hlZFJlc291cmNlKCk7XG5cdFx0XHRpZiAocmVxdWlyZSgnZWxlbWVudHMnKS5pcyhyZXMsICdlbGVtZW50JykgJiYgXy5pc0FycmF5KHJlcy5hdHRyaWJ1dGVzKSkge1xuXHRcdFx0XHRhdHRycyA9IGF0dHJzLmNvbmNhdChyZXMuYXR0cmlidXRlcyk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBvcHRpbWl6ZUF0dHJpYnV0ZXMoYXR0cnMuY29uY2F0KHRoaXMuX2F0dHJpYnV0ZXMpKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBvciBzZXRzIGF0dHJpYnV0ZSB2YWx1ZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIEF0dHJpYnV0ZSBuYW1lXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIE5ldyBhdHRyaWJ1dGUgdmFsdWVcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGF0dHJpYnV0ZTogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHtcblx0XHRcdFx0Ly8gbW9kaWZ5aW5nIGF0dHJpYnV0ZVxuXHRcdFx0XHR2YXIgaXggPSBfLmluZGV4T2YoXy5wbHVjayh0aGlzLl9hdHRyaWJ1dGVzLCAnbmFtZScpLCBuYW1lLnRvTG93ZXJDYXNlKCkpO1xuXHRcdFx0XHRpZiAofml4KSB7XG5cdFx0XHRcdFx0dGhpcy5fYXR0cmlidXRlc1tpeF0udmFsdWUgPSB2YWx1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLl9hdHRyaWJ1dGVzLnB1c2goe1xuXHRcdFx0XHRcdFx0bmFtZTogbmFtZSxcblx0XHRcdFx0XHRcdHZhbHVlOiB2YWx1ZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAoXy5maW5kKHRoaXMuYXR0cmlidXRlTGlzdCgpLCBmdW5jdGlvbihhdHRyKSB7XG5cdFx0XHRcdHJldHVybiBhdHRyLm5hbWUgPT0gbmFtZTtcblx0XHRcdH0pIHx8IHt9KS52YWx1ZTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyByZWZlcmVuY2UgdG8gdGhlIG1hdGNoZWQgPGNvZGU+ZWxlbWVudDwvY29kZT4sIGlmIGFueS5cblx0XHQgKiBTZWUge0BsaW5rIGVsZW1lbnRzfSBtb2R1bGUgZm9yIGEgbGlzdCBvZiBhdmFpbGFibGUgZWxlbWVudHNcblx0XHQgKiBAcmV0dXJucyB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdG1hdGNoZWRSZXNvdXJjZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5kYXRhKCdyZXNvdXJjZScpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGluZGV4IG9mIGN1cnJlbnQgbm9kZSBpbiBwYXJlbnTigJhzIGNoaWxkcmVuIGxpc3Rcblx0XHQgKiBAcmV0dXJucyB7TnVtYmVyfVxuXHRcdCAqL1xuXHRcdGluZGV4OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLnBhcmVudCA/IF8uaW5kZXhPZih0aGlzLnBhcmVudC5jaGlsZHJlbiwgdGhpcykgOiAtMTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2V0cyBob3cgbWFueSB0aW1lcyBjdXJyZW50IGVsZW1lbnQgc2hvdWxkIGJlIHJlcGVhdGVkXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKi9cblx0XHRfc2V0UmVwZWF0OiBmdW5jdGlvbihjb3VudCkge1xuXHRcdFx0aWYgKGNvdW50KSB7XG5cdFx0XHRcdHRoaXMucmVwZWF0Q291bnQgPSBwYXJzZUludChjb3VudCwgMTApIHx8IDE7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmhhc0ltcGxpY2l0UmVwZWF0ID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2V0cyBhYmJyZXZpYXRpb24gdGhhdCBiZWxvbmdzIHRvIGN1cnJlbnQgbm9kZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBhYmJyXG5cdFx0ICovXG5cdFx0c2V0QWJicmV2aWF0aW9uOiBmdW5jdGlvbihhYmJyKSB7XG5cdFx0XHRhYmJyID0gYWJiciB8fCAnJztcblxuXHRcdFx0dmFyIHRoYXQgPSB0aGlzO1xuXG5cdFx0XHQvLyBmaW5kIG11bHRpcGxpZXJcblx0XHRcdGFiYnIgPSBhYmJyLnJlcGxhY2UoL1xcKihcXGQrKT8kLywgZnVuY3Rpb24oc3RyLCByZXBlYXRDb3VudCkge1xuXHRcdFx0XHR0aGF0Ll9zZXRSZXBlYXQocmVwZWF0Q291bnQpO1xuXHRcdFx0XHRyZXR1cm4gJyc7XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5hYmJyZXZpYXRpb24gPSBhYmJyO1xuXG5cdFx0XHR2YXIgYWJiclRleHQgPSBleHRyYWN0VGV4dChhYmJyKTtcblx0XHRcdGlmIChhYmJyVGV4dCkge1xuXHRcdFx0XHRhYmJyID0gYWJiclRleHQuZWxlbWVudDtcblx0XHRcdFx0dGhpcy5jb250ZW50ID0gdGhpcy5fdGV4dCA9IGFiYnJUZXh0LnRleHQ7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBhYmJyQXR0cnMgPSBwYXJzZUF0dHJpYnV0ZXMoYWJicik7XG5cdFx0XHRpZiAoYWJickF0dHJzKSB7XG5cdFx0XHRcdGFiYnIgPSBhYmJyQXR0cnMuZWxlbWVudDtcblx0XHRcdFx0dGhpcy5fYXR0cmlidXRlcyA9IGFiYnJBdHRycy5hdHRyaWJ1dGVzO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9uYW1lID0gYWJicjtcblxuXHRcdFx0Ly8gdmFsaWRhdGUgbmFtZVxuXHRcdFx0aWYgKHRoaXMuX25hbWUgJiYgIXJlVmFsaWROYW1lLnRlc3QodGhpcy5fbmFtZSkpIHtcblx0XHRcdFx0dGhyb3cgJ0ludmFsaWQgYWJicmV2aWF0aW9uJztcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgY3VycmVudCBub2RlXG5cdFx0ICogQHJldHVybiB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciB1dGlscyA9IHJlcXVpcmUoJ3V0aWxzJyk7XG5cblx0XHRcdHZhciBzdGFydCA9IHRoaXMuc3RhcnQ7XG5cdFx0XHR2YXIgZW5kID0gdGhpcy5lbmQ7XG5cdFx0XHR2YXIgY29udGVudCA9IHRoaXMuY29udGVudDtcblxuXHRcdFx0Ly8gYXBwbHkgb3V0cHV0IHByb2Nlc3NvcnNcblx0XHRcdHZhciBub2RlID0gdGhpcztcblx0XHRcdF8uZWFjaChvdXRwdXRQcm9jZXNzb3JzLCBmdW5jdGlvbihmbikge1xuXHRcdFx0XHRzdGFydCA9IGZuKHN0YXJ0LCBub2RlLCAnc3RhcnQnKTtcblx0XHRcdFx0Y29udGVudCA9IGZuKGNvbnRlbnQsIG5vZGUsICdjb250ZW50Jyk7XG5cdFx0XHRcdGVuZCA9IGZuKGVuZCwgbm9kZSwgJ2VuZCcpO1xuXHRcdFx0fSk7XG5cblxuXHRcdFx0dmFyIGlubmVyQ29udGVudCA9IF8ubWFwKHRoaXMuY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKSB7XG5cdFx0XHRcdHJldHVybiBjaGlsZC50b1N0cmluZygpO1xuXHRcdFx0fSkuam9pbignJyk7XG5cblx0XHRcdGNvbnRlbnQgPSByZXF1aXJlKCdhYmJyZXZpYXRpb25VdGlscycpLmluc2VydENoaWxkQ29udGVudChjb250ZW50LCBpbm5lckNvbnRlbnQsIHtcblx0XHRcdFx0a2VlcFZhcmlhYmxlOiBmYWxzZVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBzdGFydCArIHV0aWxzLnBhZFN0cmluZyhjb250ZW50LCB0aGlzLnBhZGRpbmcpICsgZW5kO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDaGVjayBpZiBjdXJyZW50IG5vZGUgY29udGFpbnMgY2hpbGRyZW4gd2l0aCBlbXB0eSA8Y29kZT5leHByPC9jb2RlPlxuXHRcdCAqIHByb3BlcnR5XG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRoYXNFbXB0eUNoaWxkcmVuOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAhIV8uZmluZCh0aGlzLmNoaWxkcmVuLCBmdW5jdGlvbihjaGlsZCkge1xuXHRcdFx0XHRyZXR1cm4gY2hpbGQuaXNFbXB0eSgpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIENoZWNrIGlmIGN1cnJlbnQgbm9kZSBoYXMgaW1wbGllZCBuYW1lIHRoYXQgc2hvdWxkIGJlIHJlc29sdmVkXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aGFzSW1wbGljaXROYW1lOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAhdGhpcy5fbmFtZSAmJiAhdGhpcy5pc1RleHROb2RlKCk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEluZGljYXRlcyB0aGF0IGN1cnJlbnQgZWxlbWVudCBpcyBhIGdyb3VwaW5nIG9uZSwgZS5nLiBoYXMgbm9cblx0XHQgKiByZXByZXNlbnRhdGlvbiBidXQgc2VydmVzIGFzIGEgY29udGFpbmVyIGZvciBvdGhlciBub2Rlc1xuXHRcdCAqIEByZXR1cm5zIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdGlzR3JvdXA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuICF0aGlzLmFiYnJldmlhdGlvbjtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogSW5kaWNhdGVzIGVtcHR5IG5vZGUgKGkuZS4gd2l0aG91dCBhYmJyZXZpYXRpb24pLiBJdCBtYXkgYmUgYVxuXHRcdCAqIGdyb3VwaW5nIG5vZGUgYW5kIHNob3VsZCBub3QgYmUgb3V0cHV0dGVkXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRpc0VtcHR5OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAhdGhpcy5hYmJyZXZpYXRpb24gJiYgIXRoaXMuY2hpbGRyZW4ubGVuZ3RoO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBJbmRpY2F0ZXMgdGhhdCBjdXJyZW50IG5vZGUgc2hvdWxkIGJlIHJlcGVhdGVkXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aXNSZXBlYXRpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMucmVwZWF0Q291bnQgPiAxIHx8IHRoaXMuaGFzSW1wbGljaXRSZXBlYXQ7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIENoZWNrIGlmIGN1cnJlbnQgbm9kZSBpcyBhIHRleHQtb25seSBub2RlXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRpc1RleHROb2RlOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAhdGhpcy5uYW1lKCkgJiYgIXRoaXMuYXR0cmlidXRlTGlzdCgpLmxlbmd0aDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogSW5kaWNhdGVzIHdoZXRoZXIgdGhpcyBub2RlIG1heSBiZSB1c2VkIHRvIGJ1aWxkIGVsZW1lbnRzIG9yIHNuaXBwZXRzXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aXNFbGVtZW50OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAhdGhpcy5pc0VtcHR5KCkgJiYgIXRoaXMuaXNUZXh0Tm9kZSgpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGxhdGVzdCBhbmQgZGVlcGVzdCBjaGlsZCBvZiBjdXJyZW50IHRyZWVcblx0XHQgKiBAcmV0dXJucyB7QWJicmV2aWF0aW9uTm9kZX1cblx0XHQgKi9cblx0XHRkZWVwZXN0Q2hpbGQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCF0aGlzLmNoaWxkcmVuLmxlbmd0aClcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRcdHZhciBkZWVwZXN0Q2hpbGQgPSB0aGlzO1xuXHRcdFx0d2hpbGUgKGRlZXBlc3RDaGlsZC5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0ZGVlcGVzdENoaWxkID0gXy5sYXN0KGRlZXBlc3RDaGlsZC5jaGlsZHJlbik7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkZWVwZXN0Q2hpbGQ7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHN0cmlwcGVkIHN0cmluZzogYSBzdHJpbmcgd2l0aG91dCBmaXJzdCBhbmQgbGFzdCBjaGFyYWN0ZXIuXG5cdCAqIFVzZWQgZm9yIOKAnHVucXVvdGluZ+KAnSBzdHJpbmdzXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybnMge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIHN0cmlwcGVkKHN0cikge1xuXHRcdHJldHVybiBzdHIuc3Vic3RyaW5nKDEsIHN0ci5sZW5ndGggLSAxKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNvbnN1bWVRdW90ZWRWYWx1ZShzdHJlYW0sIHF1b3RlKSB7XG5cdFx0dmFyIGNoO1xuXHRcdHdoaWxlIChjaCA9IHN0cmVhbS5uZXh0KCkpIHtcblx0XHRcdGlmIChjaCA9PT0gcXVvdGUpXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0XHRpZiAoY2ggPT0gJ1xcXFwnKVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogUGFyc2VzIGFiYnJldmlhdGlvbiBpbnRvIGEgdHJlZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYWJiclxuXHQgKiBAcmV0dXJucyB7QWJicmV2aWF0aW9uTm9kZX1cblx0ICovXG5cdGZ1bmN0aW9uIHBhcnNlQWJicmV2aWF0aW9uKGFiYnIpIHtcblx0XHRhYmJyID0gcmVxdWlyZSgndXRpbHMnKS50cmltKGFiYnIpO1xuXG5cdFx0dmFyIHJvb3QgPSBuZXcgQWJicmV2aWF0aW9uTm9kZTtcblx0XHR2YXIgY29udGV4dCA9IHJvb3QuYWRkQ2hpbGQoKSwgY2g7XG5cblx0XHQvKiogQHR5cGUgU3RyaW5nU3RyZWFtICovXG5cdFx0dmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmluZ1N0cmVhbScpLmNyZWF0ZShhYmJyKTtcblx0XHR2YXIgbG9vcFByb3RlY3RvciA9IDEwMDAsIG11bHRpcGxpZXI7XG5cblx0XHR3aGlsZSAoIXN0cmVhbS5lb2woKSAmJiAtLWxvb3BQcm90ZWN0b3IgPiAwKSB7XG5cdFx0XHRjaCA9IHN0cmVhbS5wZWVrKCk7XG5cblx0XHRcdHN3aXRjaCAoY2gpIHtcblx0XHRcdFx0Y2FzZSAnKCc6IC8vIGFiYnJldmlhdGlvbiBncm91cFxuXHRcdFx0XHRcdHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG5cdFx0XHRcdFx0aWYgKHN0cmVhbS5za2lwVG9QYWlyKCcoJywgJyknKSkge1xuXHRcdFx0XHRcdFx0dmFyIGlubmVyID0gcGFyc2VBYmJyZXZpYXRpb24oc3RyaXBwZWQoc3RyZWFtLmN1cnJlbnQoKSkpO1xuXHRcdFx0XHRcdFx0aWYgKG11bHRpcGxpZXIgPSBzdHJlYW0ubWF0Y2goL15cXCooXFxkKyk/LywgdHJ1ZSkpIHtcblx0XHRcdFx0XHRcdFx0Y29udGV4dC5fc2V0UmVwZWF0KG11bHRpcGxpZXJbMV0pO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRfLmVhY2goaW5uZXIuY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRleHQuYWRkQ2hpbGQoY2hpbGQpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRocm93ICdJbnZhbGlkIGFiYnJldmlhdGlvbjogbW8gbWF0Y2hpbmcgXCIpXCIgZm91bmQgZm9yIGNoYXJhY3RlciBhdCAnICsgc3RyZWFtLnBvcztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnPic6IC8vIGNoaWxkIG9wZXJhdG9yXG5cdFx0XHRcdFx0Y29udGV4dCA9IGNvbnRleHQuYWRkQ2hpbGQoKTtcblx0XHRcdFx0XHRzdHJlYW0ubmV4dCgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJysnOiAvLyBzaWJsaW5nIG9wZXJhdG9yXG5cdFx0XHRcdFx0Y29udGV4dCA9IGNvbnRleHQucGFyZW50LmFkZENoaWxkKCk7XG5cdFx0XHRcdFx0c3RyZWFtLm5leHQoKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdeJzogLy8gY2xpbWIgdXAgb3BlcmF0b3Jcblx0XHRcdFx0XHR2YXIgcGFyZW50ID0gY29udGV4dC5wYXJlbnQgfHwgY29udGV4dDtcblx0XHRcdFx0XHRjb250ZXh0ID0gKHBhcmVudC5wYXJlbnQgfHwgcGFyZW50KS5hZGRDaGlsZCgpO1xuXHRcdFx0XHRcdHN0cmVhbS5uZXh0KCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0ZGVmYXVsdDogLy8gY29uc3VtZSBhYmJyZXZpYXRpb25cblx0XHRcdFx0XHRzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuXHRcdFx0XHRcdHN0cmVhbS5lYXRXaGlsZShmdW5jdGlvbihjKSB7XG5cdFx0XHRcdFx0XHRpZiAoYyA9PSAnWycgfHwgYyA9PSAneycpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHN0cmVhbS5za2lwVG9QYWlyKGMsIHBhaXJzW2NdKSkge1xuXHRcdFx0XHRcdFx0XHRcdHN0cmVhbS5iYWNrVXAoMSk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR0aHJvdyAnSW52YWxpZCBhYmJyZXZpYXRpb246IG1vIG1hdGNoaW5nIFwiJyArIHBhaXJzW2NdICsgJ1wiIGZvdW5kIGZvciBjaGFyYWN0ZXIgYXQgJyArIHN0cmVhbS5wb3M7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChjID09ICcrJykge1xuXHRcdFx0XHRcdFx0XHQvLyBsZXQncyBzZWUgaWYgdGhpcyBpcyBhbiBleHBhbmRvIG1hcmtlclxuXHRcdFx0XHRcdFx0XHRzdHJlYW0ubmV4dCgpO1xuXHRcdFx0XHRcdFx0XHR2YXIgaXNNYXJrZXIgPSBzdHJlYW0uZW9sKCkgfHwgIH4nKz5eKicuaW5kZXhPZihzdHJlYW0ucGVlaygpKTtcblx0XHRcdFx0XHRcdFx0c3RyZWFtLmJhY2tVcCgxKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGlzTWFya2VyO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gYyAhPSAnKCcgJiYgaXNBbGxvd2VkQ2hhcihjKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdGNvbnRleHQuc2V0QWJicmV2aWF0aW9uKHN0cmVhbS5jdXJyZW50KCkpO1xuXHRcdFx0XHRcdHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGxvb3BQcm90ZWN0b3IgPCAxKVxuXHRcdFx0dGhyb3cgJ0VuZGxlc3MgbG9vcCBkZXRlY3RlZCc7XG5cblx0XHRyZXR1cm4gcm9vdDtcblx0fVxuXG5cdC8qKlxuXHQgKiBFeHRyYWN0IGF0dHJpYnV0ZXMgYW5kIHRoZWlyIHZhbHVlcyBmcm9tIGF0dHJpYnV0ZSBzZXQ6XG5cdCAqIDxjb2RlPlthdHRyIGNvbD0zIHRpdGxlPVwiUXVvdGVkIHN0cmluZ1wiXTwvY29kZT5cblx0ICogQHBhcmFtIHtTdHJpbmd9IGF0dHJTZXRcblx0ICogQHJldHVybnMge0FycmF5fVxuXHQgKi9cblx0ZnVuY3Rpb24gZXh0cmFjdEF0dHJpYnV0ZXMoYXR0clNldCwgYXR0cnMpIHtcblx0XHRhdHRyU2V0ID0gcmVxdWlyZSgndXRpbHMnKS50cmltKGF0dHJTZXQpO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblxuXHRcdC8qKiBAdHlwZSBTdHJpbmdTdHJlYW0gKi9cblx0XHR2YXIgc3RyZWFtID0gcmVxdWlyZSgnc3RyaW5nU3RyZWFtJykuY3JlYXRlKGF0dHJTZXQpO1xuXHRcdHN0cmVhbS5lYXRTcGFjZSgpO1xuXG5cdFx0d2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcblx0XHRcdHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG5cdFx0XHRpZiAoc3RyZWFtLmVhdFdoaWxlKHJlV29yZCkpIHtcblx0XHRcdFx0dmFyIGF0dHJOYW1lID0gc3RyZWFtLmN1cnJlbnQoKTtcblx0XHRcdFx0dmFyIGF0dHJWYWx1ZSA9ICcnO1xuXHRcdFx0XHRpZiAoc3RyZWFtLnBlZWsoKSA9PSAnPScpIHtcblx0XHRcdFx0XHRzdHJlYW0ubmV4dCgpO1xuXHRcdFx0XHRcdHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG5cdFx0XHRcdFx0dmFyIHF1b3RlID0gc3RyZWFtLnBlZWsoKTtcblxuXHRcdFx0XHRcdGlmIChxdW90ZSA9PSAnXCInIHx8IHF1b3RlID09IFwiJ1wiKSB7XG5cdFx0XHRcdFx0XHRzdHJlYW0ubmV4dCgpO1xuXHRcdFx0XHRcdFx0aWYgKGNvbnN1bWVRdW90ZWRWYWx1ZShzdHJlYW0sIHF1b3RlKSkge1xuXHRcdFx0XHRcdFx0XHRhdHRyVmFsdWUgPSBzdHJlYW0uY3VycmVudCgpO1xuXHRcdFx0XHRcdFx0XHQvLyBzdHJpcCBxdW90ZXNcblx0XHRcdFx0XHRcdFx0YXR0clZhbHVlID0gYXR0clZhbHVlLnN1YnN0cmluZygxLCBhdHRyVmFsdWUubGVuZ3RoIC0gMSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyAnSW52YWxpZCBhdHRyaWJ1dGUgdmFsdWUnO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoc3RyZWFtLmVhdFdoaWxlKC9bXlxcc1xcXV0vKSkge1xuXHRcdFx0XHRcdFx0YXR0clZhbHVlID0gc3RyZWFtLmN1cnJlbnQoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhyb3cgJ0ludmFsaWQgYXR0cmlidXRlIHZhbHVlJztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXN1bHQucHVzaCh7XG5cdFx0XHRcdFx0bmFtZTogYXR0ck5hbWUsXG5cdFx0XHRcdFx0dmFsdWU6IGF0dHJWYWx1ZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c3RyZWFtLmVhdFNwYWNlKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0LyoqXG5cdCAqIFBhcnNlcyB0YWcgYXR0cmlidXRlcyBleHRyYWN0ZWQgZnJvbSBhYmJyZXZpYXRpb24uIElmIGF0dHJpYnV0ZXMgZm91bmQsXG5cdCAqIHJldHVybnMgb2JqZWN0IHdpdGggPGNvZGU+ZWxlbWVudDwvY29kZT4gYW5kIDxjb2RlPmF0dHJpYnV0ZXM8L2NvZGU+XG5cdCAqIHByb3BlcnRpZXNcblx0ICogQHBhcmFtIHtTdHJpbmd9IGFiYnJcblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyA8Y29kZT5udWxsPC9jb2RlPiBpZiBubyBhdHRyaWJ1dGVzIGZvdW5kIGluXG5cdCAqIGFiYnJldmlhdGlvblxuXHQgKi9cblx0ZnVuY3Rpb24gcGFyc2VBdHRyaWJ1dGVzKGFiYnIpIHtcblx0XHQvKlxuXHRcdCAqIEV4YW1wbGUgb2YgaW5jb21pbmcgZGF0YTpcblx0XHQgKiAjaGVhZGVyXG5cdFx0ICogLnNvbWUuZGF0YVxuXHRcdCAqIC5zb21lLmRhdGEjaGVhZGVyXG5cdFx0ICogW2F0dHJdXG5cdFx0ICogI2l0ZW1bYXR0cj1IZWxsbyBvdGhlcj1cIldvcmxkXCJdLmNsYXNzXG5cdFx0ICovXG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdHZhciBhdHRyTWFwID0geycjJzogJ2lkJywgJy4nOiAnY2xhc3MnfTtcblx0XHR2YXIgbmFtZUVuZCA9IG51bGw7XG5cblx0XHQvKiogQHR5cGUgU3RyaW5nU3RyZWFtICovXG5cdFx0dmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmluZ1N0cmVhbScpLmNyZWF0ZShhYmJyKTtcblx0XHR3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuXHRcdFx0c3dpdGNoIChzdHJlYW0ucGVlaygpKSB7XG5cdFx0XHRcdGNhc2UgJyMnOiAvLyBpZFxuXHRcdFx0XHRjYXNlICcuJzogLy8gY2xhc3Ncblx0XHRcdFx0XHRpZiAobmFtZUVuZCA9PT0gbnVsbClcblx0XHRcdFx0XHRcdG5hbWVFbmQgPSBzdHJlYW0ucG9zO1xuXG5cdFx0XHRcdFx0dmFyIGF0dHJOYW1lID0gYXR0ck1hcFtzdHJlYW0ucGVlaygpXTtcblxuXHRcdFx0XHRcdHN0cmVhbS5uZXh0KCk7XG5cdFx0XHRcdFx0c3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcblx0XHRcdFx0XHRzdHJlYW0uZWF0V2hpbGUocmVXb3JkKTtcblx0XHRcdFx0XHRyZXN1bHQucHVzaCh7XG5cdFx0XHRcdFx0XHRuYW1lOiBhdHRyTmFtZSxcblx0XHRcdFx0XHRcdHZhbHVlOiBzdHJlYW0uY3VycmVudCgpXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ1snOiAvL2JlZ2luIGF0dHJpYnV0ZSBzZXRcblx0XHRcdFx0XHRpZiAobmFtZUVuZCA9PT0gbnVsbClcblx0XHRcdFx0XHRcdG5hbWVFbmQgPSBzdHJlYW0ucG9zO1xuXG5cdFx0XHRcdFx0c3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcblx0XHRcdFx0XHRpZiAoIXN0cmVhbS5za2lwVG9QYWlyKCdbJywgJ10nKSlcblx0XHRcdFx0XHRcdHRocm93ICdJbnZhbGlkIGF0dHJpYnV0ZSBzZXQgZGVmaW5pdGlvbic7XG5cblx0XHRcdFx0XHRyZXN1bHQgPSByZXN1bHQuY29uY2F0KFxuXHRcdFx0XHRcdFx0ZXh0cmFjdEF0dHJpYnV0ZXMoc3RyaXBwZWQoc3RyZWFtLmN1cnJlbnQoKSkpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRzdHJlYW0ubmV4dCgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghcmVzdWx0Lmxlbmd0aClcblx0XHRcdHJldHVybiBudWxsO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGVsZW1lbnQ6IGFiYnIuc3Vic3RyaW5nKDAsIG5hbWVFbmQpLFxuXHRcdFx0YXR0cmlidXRlczogb3B0aW1pemVBdHRyaWJ1dGVzKHJlc3VsdClcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIE9wdGltaXplIGF0dHJpYnV0ZSBzZXQ6IHJlbW92ZSBkdXBsaWNhdGVzIGFuZCBtZXJnZSBjbGFzcyBhdHRyaWJ1dGVzXG5cdCAqIEBwYXJhbSBhdHRyc1xuXHQgKi9cblx0ZnVuY3Rpb24gb3B0aW1pemVBdHRyaWJ1dGVzKGF0dHJzKSB7XG5cdFx0Ly8gY2xvbmUgYWxsIGF0dHJpYnV0ZXMgdG8gbWFrZSBzdXJlIHRoYXQgb3JpZ2luYWwgb2JqZWN0cyBhcmVcblx0XHQvLyBub3QgbW9kaWZpZWRcblx0XHRhdHRycyAgPSBfLm1hcChhdHRycywgZnVuY3Rpb24oYXR0cikge1xuXHRcdFx0cmV0dXJuIF8uY2xvbmUoYXR0cik7XG5cdFx0fSk7XG5cblx0XHR2YXIgbG9va3VwID0ge307XG5cdFx0cmV0dXJuIF8uZmlsdGVyKGF0dHJzLCBmdW5jdGlvbihhdHRyKSB7XG5cdFx0XHRpZiAoIShhdHRyLm5hbWUgaW4gbG9va3VwKSkge1xuXHRcdFx0XHRyZXR1cm4gbG9va3VwW2F0dHIubmFtZV0gPSBhdHRyO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgbGEgPSBsb29rdXBbYXR0ci5uYW1lXTtcblxuXHRcdFx0aWYgKGF0dHIubmFtZS50b0xvd2VyQ2FzZSgpID09ICdjbGFzcycpIHtcblx0XHRcdFx0bGEudmFsdWUgKz0gKGxhLnZhbHVlLmxlbmd0aCA/ICcgJyA6ICcnKSArIGF0dHIudmFsdWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRsYS52YWx1ZSA9IGF0dHIudmFsdWU7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBFeHRyYWN0IHRleHQgZGF0YSBmcm9tIGFiYnJldmlhdGlvbjogaWYgPGNvZGU+YXtoZWxsb308L2NvZGU+IGFiYnJldmlhdGlvblxuXHQgKiBpcyBwYXNzZWQsIHJldHVybnMgb2JqZWN0IDxjb2RlPntlbGVtZW50OiAnYScsIHRleHQ6ICdoZWxsbyd9PC9jb2RlPi5cblx0ICogSWYgbm90aGluZyBmb3VuZCwgcmV0dXJucyA8Y29kZT5udWxsPC9jb2RlPlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYWJiclxuXHQgKlxuXHQgKi9cblx0ZnVuY3Rpb24gZXh0cmFjdFRleHQoYWJicikge1xuXHRcdGlmICghfmFiYnIuaW5kZXhPZigneycpKVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHQvKiogQHR5cGUgU3RyaW5nU3RyZWFtICovXG5cdFx0dmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmluZ1N0cmVhbScpLmNyZWF0ZShhYmJyKTtcblx0XHR3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuXHRcdFx0c3dpdGNoIChzdHJlYW0ucGVlaygpKSB7XG5cdFx0XHRcdGNhc2UgJ1snOlxuXHRcdFx0XHRjYXNlICcoJzpcblx0XHRcdFx0XHRzdHJlYW0uc2tpcFRvUGFpcihzdHJlYW0ucGVlaygpLCBwYWlyc1tzdHJlYW0ucGVlaygpXSk7IGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3snOlxuXHRcdFx0XHRcdHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG5cdFx0XHRcdFx0c3RyZWFtLnNraXBUb1BhaXIoJ3snLCAnfScpO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRlbGVtZW50OiBhYmJyLnN1YnN0cmluZygwLCBzdHJlYW0uc3RhcnQpLFxuXHRcdFx0XHRcdFx0dGV4dDogc3RyaXBwZWQoc3RyZWFtLmN1cnJlbnQoKSlcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0c3RyZWFtLm5leHQoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICog4oCcVW4tcm9sbHPigJwgY29udGVudHMgb2YgY3VycmVudCBub2RlOiByZWN1cnNpdmVseSByZXBsYWNlcyBhbGwgcmVwZWF0aW5nXG5cdCAqIGNoaWxkcmVuIHdpdGggdGhlaXIgcmVwZWF0ZWQgY2xvbmVzXG5cdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJucyB7QWJicmV2aWF0aW9uTm9kZX1cblx0ICovXG5cdGZ1bmN0aW9uIHVucm9sbChub2RlKSB7XG5cdFx0Zm9yICh2YXIgaSA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgaiwgY2hpbGQsIG1heENvdW50OyBpID49IDA7IGktLSkge1xuXHRcdFx0Y2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xuXG5cdFx0XHRpZiAoY2hpbGQuaXNSZXBlYXRpbmcoKSkge1xuXHRcdFx0XHRtYXhDb3VudCA9IGogPSBjaGlsZC5yZXBlYXRDb3VudDtcblx0XHRcdFx0Y2hpbGQucmVwZWF0Q291bnQgPSAxO1xuXHRcdFx0XHRjaGlsZC51cGRhdGVQcm9wZXJ0eSgnY291bnRlcicsIDEpO1xuXHRcdFx0XHRjaGlsZC51cGRhdGVQcm9wZXJ0eSgnbWF4Q291bnQnLCBtYXhDb3VudCk7XG5cdFx0XHRcdHdoaWxlICgtLWogPiAwKSB7XG5cdFx0XHRcdFx0Y2hpbGQucGFyZW50LmFkZENoaWxkKGNoaWxkLmNsb25lKCksIGkgKyAxKVxuXHRcdFx0XHRcdFx0LnVwZGF0ZVByb3BlcnR5KCdjb3VudGVyJywgaiArIDEpXG5cdFx0XHRcdFx0XHQudXBkYXRlUHJvcGVydHkoJ21heENvdW50JywgbWF4Q291bnQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gdG8ga2VlcCBwcm9wZXIgJ2NvdW50ZXInIHByb3BlcnR5LCB3ZSBuZWVkIHRvIHdhbGtcblx0XHQvLyBvbiBjaGlsZHJlbiBvbmNlIGFnYWluXG5cdFx0Xy5lYWNoKG5vZGUuY2hpbGRyZW4sIHVucm9sbCk7XG5cblx0XHRyZXR1cm4gbm9kZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBPcHRpbWl6ZXMgdHJlZSBub2RlOiByZXBsYWNlcyBlbXB0eSBub2RlcyB3aXRoIHRoZWlyIGNoaWxkcmVuXG5cdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtBYmJyZXZpYXRpb25Ob2RlfVxuXHQgKi9cblx0ZnVuY3Rpb24gc3F1YXNoKG5vZGUpIHtcblx0XHRmb3IgKHZhciBpID0gbm9kZS5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0LyoqIEB0eXBlIEFiYnJldmlhdGlvbk5vZGUgKi9cblx0XHRcdHZhciBuID0gbm9kZS5jaGlsZHJlbltpXTtcblx0XHRcdGlmIChuLmlzR3JvdXAoKSkge1xuXHRcdFx0XHRuLnJlcGxhY2Uoc3F1YXNoKG4pLmNoaWxkcmVuKTtcblx0XHRcdH0gZWxzZSBpZiAobi5pc0VtcHR5KCkpIHtcblx0XHRcdFx0bi5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRfLmVhY2gobm9kZS5jaGlsZHJlbiwgc3F1YXNoKTtcblxuXHRcdHJldHVybiBub2RlO1xuXHR9XG5cblx0ZnVuY3Rpb24gaXNBbGxvd2VkQ2hhcihjaCkge1xuXHRcdHZhciBjaGFyQ29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG5cdFx0dmFyIHNwZWNpYWxDaGFycyA9ICcjLio6JC1fIUB8JSc7XG5cblx0XHRyZXR1cm4gKGNoYXJDb2RlID4gNjQgJiYgY2hhckNvZGUgPCA5MSkgICAgICAgLy8gdXBwZXJjYXNlIGxldHRlclxuXHRcdFx0XHR8fCAoY2hhckNvZGUgPiA5NiAmJiBjaGFyQ29kZSA8IDEyMykgIC8vIGxvd2VyY2FzZSBsZXR0ZXJcblx0XHRcdFx0fHwgKGNoYXJDb2RlID4gNDcgJiYgY2hhckNvZGUgPCA1OCkgICAvLyBudW1iZXJcblx0XHRcdFx0fHwgc3BlY2lhbENoYXJzLmluZGV4T2YoY2gpICE9IC0xOyAgICAvLyBzcGVjaWFsIGNoYXJhY3RlclxuXHR9XG5cblx0Ly8gWFhYIGFkZCBjb3VudGVyIHJlcGxhY2VyIGZ1bmN0aW9uIGFzIG91dHB1dCBwcm9jZXNzb3Jcblx0b3V0cHV0UHJvY2Vzc29ycy5wdXNoKGZ1bmN0aW9uKHRleHQsIG5vZGUpIHtcblx0XHRyZXR1cm4gcmVxdWlyZSgndXRpbHMnKS5yZXBsYWNlQ291bnRlcih0ZXh0LCBub2RlLmNvdW50ZXIsIG5vZGUubWF4Q291bnQpO1xuXHR9KTtcblxuXHRyZXR1cm4ge1xuXHRcdC8qKlxuXHRcdCAqIFBhcnNlcyBhYmJyZXZpYXRpb24gaW50byB0cmVlIHdpdGggcmVzcGVjdCBvZiBncm91cHMsXG5cdFx0ICogdGV4dCBub2RlcyBhbmQgYXR0cmlidXRlcy4gRWFjaCBub2RlIG9mIHRoZSB0cmVlIGlzIGEgc2luZ2xlXG5cdFx0ICogYWJicmV2aWF0aW9uLiBUcmVlIHJlcHJlc2VudHMgYWN0dWFsIHN0cnVjdHVyZSBvZiB0aGUgb3V0cHV0dGVkXG5cdFx0ICogcmVzdWx0XG5cdFx0ICogQG1lbWJlck9mIGFiYnJldmlhdGlvblBhcnNlclxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBhYmJyIEFiYnJldmlhdGlvbiB0byBwYXJzZVxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIEFkZGl0aW9uYWwgb3B0aW9ucyBmb3IgcGFyc2VyIGFuZCBwcm9jZXNzb3JzXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuIHtBYmJyZXZpYXRpb25Ob2RlfVxuXHRcdCAqL1xuXHRcdHBhcnNlOiBmdW5jdGlvbihhYmJyLCBvcHRpb25zKSB7XG5cdFx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRcdFx0dmFyIHRyZWUgPSBwYXJzZUFiYnJldmlhdGlvbihhYmJyKTtcblxuXHRcdFx0aWYgKG9wdGlvbnMuY29udGV4dE5vZGUpIHtcblx0XHRcdFx0Ly8gYWRkIGluZm8gYWJvdXQgY29udGV4dCBub2RlIOKAk1xuXHRcdFx0XHQvLyBhIHBhcmVudCBYSFRNTCBub2RlIGluIGVkaXRvciBpbnNpZGUgd2hpY2ggYWJicmV2aWF0aW9uIGlzXG5cdFx0XHRcdC8vIGV4cGFuZGVkXG5cdFx0XHRcdHRyZWUuX25hbWUgPSBvcHRpb25zLmNvbnRleHROb2RlLm5hbWU7XG5cdFx0XHRcdHZhciBhdHRyTG9va3VwID0ge307XG5cdFx0XHRcdF8uZWFjaCh0cmVlLl9hdHRyaWJ1dGVzLCBmdW5jdGlvbihhdHRyKSB7XG5cdFx0XHRcdFx0YXR0ckxvb2t1cFthdHRyLm5hbWVdID0gYXR0cjtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Xy5lYWNoKG9wdGlvbnMuY29udGV4dE5vZGUuYXR0cmlidXRlcywgZnVuY3Rpb24oYXR0cikge1xuXHRcdFx0XHRcdGlmIChhdHRyLm5hbWUgaW4gYXR0ckxvb2t1cCkge1xuXHRcdFx0XHRcdFx0YXR0ckxvb2t1cFthdHRyLm5hbWVdLnZhbHVlID0gYXR0ci52YWx1ZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YXR0ciA9IF8uY2xvbmUoYXR0cik7XG5cdFx0XHRcdFx0XHR0cmVlLl9hdHRyaWJ1dGVzLnB1c2goYXR0cik7XG5cdFx0XHRcdFx0XHRhdHRyTG9va3VwW2F0dHIubmFtZV0gPSBhdHRyO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblxuXHRcdFx0Ly8gYXBwbHkgcHJlcHJvY2Vzc29yc1xuXHRcdFx0Xy5lYWNoKHByZXByb2Nlc3NvcnMsIGZ1bmN0aW9uKGZuKSB7XG5cdFx0XHRcdGZuKHRyZWUsIG9wdGlvbnMpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHRyZWUgPSBzcXVhc2godW5yb2xsKHRyZWUpKTtcblxuXHRcdFx0Ly8gYXBwbHkgcG9zdHByb2Nlc3NvcnNcblx0XHRcdF8uZWFjaChwb3N0cHJvY2Vzc29ycywgZnVuY3Rpb24oZm4pIHtcblx0XHRcdFx0Zm4odHJlZSwgb3B0aW9ucyk7XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHRyZWU7XG5cdFx0fSxcblxuXHRcdEFiYnJldmlhdGlvbk5vZGU6IEFiYnJldmlhdGlvbk5vZGUsXG5cblx0XHQvKipcblx0XHQgKiBBZGQgbmV3IGFiYnJldmlhdGlvbiBwcmVwcm9jZXNzb3IuIDxpPlByZXByb2Nlc3NvcjwvaT4gaXMgYSBmdW5jdGlvblxuXHRcdCAqIHRoYXQgYXBwbGllcyB0byBhIHBhcnNlZCBhYmJyZXZpYXRpb24gdHJlZSByaWdodCBhZnRlciBpdCBnZXQgcGFyc2VkLlxuXHRcdCAqIFRoZSBwYXNzZWQgdHJlZSBpcyBpbiB1bm9wdGltaXplZCBzdGF0ZS5cblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQcmVwcm9jZXNzb3IgZnVuY3Rpb24uIFRoaXMgZnVuY3Rpb24gcmVjZWl2ZXNcblx0XHQgKiB0d28gYXJndW1lbnRzOiBwYXJzZWQgYWJicmV2aWF0aW9uIHRyZWUgKDxjb2RlPkFiYnJldmlhdGlvbk5vZGU8L2NvZGU+KVxuXHRcdCAqIGFuZCA8Y29kZT5vcHRpb25zPC9jb2RlPiBoYXNoIHRoYXQgd2FzIHBhc3NlZCB0byA8Y29kZT5wYXJzZTwvY29kZT5cblx0XHQgKiBtZXRob2Rcblx0XHQgKi9cblx0XHRhZGRQcmVwcm9jZXNzb3I6IGZ1bmN0aW9uKGZuKSB7XG5cdFx0XHRpZiAoIV8uaW5jbHVkZShwcmVwcm9jZXNzb3JzLCBmbikpXG5cdFx0XHRcdHByZXByb2Nlc3NvcnMucHVzaChmbik7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlbW92ZXMgcmVnaXN0ZXJlZCBwcmVwcm9jZXNzb3Jcblx0XHQgKi9cblx0XHRyZW1vdmVGaWx0ZXI6IGZ1bmN0aW9uKGZuKSB7XG5cdFx0XHRwcmVwcm9jZXNzb3IgPSBfLndpdGhvdXQocHJlcHJvY2Vzc29ycywgZm4pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBBZGRzIG5ldyBhYmJyZXZpYXRpb24gcG9zdHByb2Nlc3Nvci4gPGk+UG9zdHByb2Nlc3NvcjwvaT4gaXMgYVxuXHRcdCAqIGZ1bmN0aW5vbiB0aGF0IGFwcGxpZXMgdG8gPGk+b3B0aW1pemVkPC9pPiBwYXJzZWQgYWJicmV2aWF0aW9uIHRyZWVcblx0XHQgKiByaWdodCBiZWZvcmUgaXQgcmV0dXJucyBmcm9tIDxjb2RlPnBhcnNlKCk8L2NvZGU+IG1ldGhvZFxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBvc3Rwcm9jZXNzb3IgZnVuY3Rpb24uIFRoaXMgZnVuY3Rpb24gcmVjZWl2ZXNcblx0XHQgKiB0d28gYXJndW1lbnRzOiBwYXJzZWQgYWJicmV2aWF0aW9uIHRyZWUgKDxjb2RlPkFiYnJldmlhdGlvbk5vZGU8L2NvZGU+KVxuXHRcdCAqIGFuZCA8Y29kZT5vcHRpb25zPC9jb2RlPiBoYXNoIHRoYXQgd2FzIHBhc3NlZCB0byA8Y29kZT5wYXJzZTwvY29kZT5cblx0XHQgKiBtZXRob2Rcblx0XHQgKi9cblx0XHRhZGRQb3N0cHJvY2Vzc29yOiBmdW5jdGlvbihmbikge1xuXHRcdFx0aWYgKCFfLmluY2x1ZGUocG9zdHByb2Nlc3NvcnMsIGZuKSlcblx0XHRcdFx0cG9zdHByb2Nlc3NvcnMucHVzaChmbik7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlbW92ZXMgcmVnaXN0ZXJlZCBwb3N0cHJvY2Vzc29yIGZ1bmN0aW9uXG5cdFx0ICovXG5cdFx0cmVtb3ZlUG9zdHByb2Nlc3NvcjogZnVuY3Rpb24oZm4pIHtcblx0XHRcdHBvc3Rwcm9jZXNzb3JzID0gXy53aXRob3V0KHBvc3Rwcm9jZXNzb3JzLCBmbik7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlZ2lzdGVycyBvdXRwdXQgcG9zdHByb2Nlc3Nvci4gPGk+T3V0cHV0IHByb2Nlc3NvcjwvaT4gaXMgYVxuXHRcdCAqIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyB0byBvdXRwdXQgcGFydCAoPGNvZGU+c3RhcnQ8L2NvZGU+LFxuXHRcdCAqIDxjb2RlPmVuZDwvY29kZT4gYW5kIDxjb2RlPmNvbnRlbnQ8L2NvZGU+KSB3aGVuXG5cdFx0ICogPGNvZGU+QWJicmV2aWF0aW9uTm9kZS50b1N0cmluZygpPC9jb2RlPiBtZXRob2QgaXMgY2FsbGVkXG5cdFx0ICovXG5cdFx0YWRkT3V0cHV0UHJvY2Vzc29yOiBmdW5jdGlvbihmbikge1xuXHRcdFx0aWYgKCFfLmluY2x1ZGUob3V0cHV0UHJvY2Vzc29ycywgZm4pKVxuXHRcdFx0XHRvdXRwdXRQcm9jZXNzb3JzLnB1c2goZm4pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZW1vdmVzIHJlZ2lzdGVyZWQgb3V0cHV0IHByb2Nlc3NvclxuXHRcdCAqL1xuXHRcdHJlbW92ZU91dHB1dFByb2Nlc3NvcjogZnVuY3Rpb24oZm4pIHtcblx0XHRcdG91dHB1dFByb2Nlc3NvcnMgPSBfLndpdGhvdXQob3V0cHV0UHJvY2Vzc29ycywgZm4pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDaGVjayBpZiBwYXNzZWQgc3ltYm9sIGlzIHZhbGlkIHN5bWJvbCBmb3IgYWJicmV2aWF0aW9uIGV4cHJlc3Npb25cblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gY2hcblx0XHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdGlzQWxsb3dlZENoYXI6IGZ1bmN0aW9uKGNoKSB7XG5cdFx0XHRjaCA9IFN0cmluZyhjaCk7IC8vIGNvbnZlcnQgSmF2YSBvYmplY3QgdG8gSlNcblx0XHRcdHJldHVybiBpc0FsbG93ZWRDaGFyKGNoKSB8fCB+Jz4rXltdKCl7fScuaW5kZXhPZihjaCk7XG5cdFx0fVxuXHR9O1xufSk7LyoqXG4gKiBQcm9jZXNzb3IgZnVuY3Rpb24gdGhhdCBtYXRjaGVzIHBhcnNlZCA8Y29kZT5BYmJyZXZpYXRpb25Ob2RlPC9jb2RlPlxuICogYWdhaW5zdCByZXNvdXJjZXMgZGVmaW5lZCBpbiA8Y29kZT5yZXNvdXJjZTwvY29kZT4gbW9kdWxlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZXhlYyhmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdC8qKlxuXHQgKiBGaW5kcyBtYXRjaGVkIHJlc291cmNlcyBmb3IgY2hpbGQgbm9kZXMgb2YgcGFzc2VkIDxjb2RlPm5vZGU8L2NvZGU+XG5cdCAqIGVsZW1lbnQuIEEgbWF0Y2hlZCByZXNvdXJjZSBpcyBhIHJlZmVyZW5jZSB0byA8aT5zbmlwcGV0cy5qc29uPC9pPiBlbnRyeVxuXHQgKiB0aGF0IGRlc2NyaWJlcyBvdXRwdXQgb2YgcGFyc2VkIG5vZGVcblx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzeW50YXhcblx0ICovXG5cdGZ1bmN0aW9uIG1hdGNoUmVzb3VyY2VzKG5vZGUsIHN5bnRheCkge1xuXHRcdHZhciByZXNvdXJjZXMgPSByZXF1aXJlKCdyZXNvdXJjZXMnKTtcblx0XHR2YXIgZWxlbWVudHMgPSByZXF1aXJlKCdlbGVtZW50cycpO1xuXHRcdHZhciBwYXJzZXIgPSByZXF1aXJlKCdhYmJyZXZpYXRpb25QYXJzZXInKTtcblxuXHRcdC8vIGRvIGEgc2hhbGxvdyBjb3B5IGJlY2F1c2UgdGhlIGNoaWxkcmVuIGxpc3QgY2FuIGJlIG1vZGlmaWVkIGR1cmluZ1xuXHRcdC8vIHJlc291cmNlIG1hdGNoaW5nXG5cdFx0Xy5lYWNoKF8uY2xvbmUobm9kZS5jaGlsZHJlbiksIC8qKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IGNoaWxkICovIGZ1bmN0aW9uKGNoaWxkKSB7XG5cdFx0XHR2YXIgciA9IHJlc291cmNlcy5nZXRNYXRjaGVkUmVzb3VyY2UoY2hpbGQsIHN5bnRheCk7XG5cdFx0XHRpZiAoXy5pc1N0cmluZyhyKSkge1xuXHRcdFx0XHRjaGlsZC5kYXRhKCdyZXNvdXJjZScsIGVsZW1lbnRzLmNyZWF0ZSgnc25pcHBldCcsIHIpKTtcblx0XHRcdH0gZWxzZSBpZiAoZWxlbWVudHMuaXMociwgJ3JlZmVyZW5jZScpKSB7XG5cdFx0XHRcdC8vIGl04oCZcyBhIHJlZmVyZW5jZSB0byBhbm90aGVyIGFiYnJldmlhdGlvbjpcblx0XHRcdFx0Ly8gcGFyc2UgaXQgYW5kIGluc2VydCBpbnN0ZWFkIG9mIGN1cnJlbnQgY2hpbGRcblx0XHRcdFx0LyoqIEB0eXBlIEFiYnJldmlhdGlvbk5vZGUgKi9cblx0XHRcdFx0dmFyIHN1YnRyZWUgPSBwYXJzZXIucGFyc2Uoci5kYXRhLCB7XG5cdFx0XHRcdFx0c3ludGF4OiBzeW50YXhcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gaWYgY29udGV4dCBlbGVtZW50IHNob3VsZCBiZSByZXBlYXRlZCwgY2hlY2sgaWYgd2UgbmVlZCB0b1xuXHRcdFx0XHQvLyB0cmFuc2ZlciByZXBlYXRlZCBlbGVtZW50IHRvIHNwZWNpZmljIGNoaWxkIG5vZGVcblx0XHRcdFx0aWYgKGNoaWxkLnJlcGVhdENvdW50ID4gMSkge1xuXHRcdFx0XHRcdHZhciByZXBlYXRlZENoaWxkcmVuID0gc3VidHJlZS5maW5kQWxsKGZ1bmN0aW9uKG5vZGUpIHtcblx0XHRcdFx0XHRcdHJldHVybiBub2RlLmhhc0ltcGxpY2l0UmVwZWF0O1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Xy5lYWNoKHJlcGVhdGVkQ2hpbGRyZW4sIGZ1bmN0aW9uKG5vZGUpIHtcblx0XHRcdFx0XHRcdG5vZGUucmVwZWF0Q291bnQgPSBjaGlsZC5yZXBlYXRDb3VudDtcblx0XHRcdFx0XHRcdG5vZGUuaGFzSW1wbGljaXRSZXBlYXQgPSBmYWxzZTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIG1vdmUgY2hpbGTigJhzIGNoaWxkcmVuIGludG8gdGhlIGRlZXBlc3QgY2hpbGQgb2YgbmV3IHN1YnRyZWVcblx0XHRcdFx0dmFyIGRlZXBlc3RDaGlsZCA9IHN1YnRyZWUuZGVlcGVzdENoaWxkKCk7XG5cdFx0XHRcdGlmIChkZWVwZXN0Q2hpbGQpIHtcblx0XHRcdFx0XHRfLmVhY2goY2hpbGQuY2hpbGRyZW4sIGZ1bmN0aW9uKGMpIHtcblx0XHRcdFx0XHRcdGRlZXBlc3RDaGlsZC5hZGRDaGlsZChjKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGNvcHkgY3VycmVudCBhdHRyaWJ1dGVzIHRvIGNoaWxkcmVuXG5cdFx0XHRcdF8uZWFjaChzdWJ0cmVlLmNoaWxkcmVuLCBmdW5jdGlvbihub2RlKSB7XG5cdFx0XHRcdFx0Xy5lYWNoKGNoaWxkLmF0dHJpYnV0ZUxpc3QoKSwgZnVuY3Rpb24oYXR0cikge1xuXHRcdFx0XHRcdFx0bm9kZS5hdHRyaWJ1dGUoYXR0ci5uYW1lLCBhdHRyLnZhbHVlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Y2hpbGQucmVwbGFjZShzdWJ0cmVlLmNoaWxkcmVuKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNoaWxkLmRhdGEoJ3Jlc291cmNlJywgcik7XG5cdFx0XHR9XG5cblx0XHRcdG1hdGNoUmVzb3VyY2VzKGNoaWxkLCBzeW50YXgpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gWFhYIHJlZ2lzdGVyIGFiYnJldmlhdGlvbiBmaWx0ZXIgdGhhdCBjcmVhdGVzIHJlZmVyZW5jZXMgdG8gcmVzb3VyY2VzXG5cdC8vIG9uIGFiYnJldmlhdGlvbiBub2Rlc1xuXHQvKipcblx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSB0cmVlXG5cdCAqL1xuXHRyZXF1aXJlKCdhYmJyZXZpYXRpb25QYXJzZXInKS5hZGRQcmVwcm9jZXNzb3IoZnVuY3Rpb24odHJlZSwgb3B0aW9ucykge1xuXHRcdHZhciBzeW50YXggPSBvcHRpb25zLnN5bnRheCB8fCBlbW1ldC5kZWZhdWx0U3ludGF4KCk7XG5cdFx0bWF0Y2hSZXNvdXJjZXModHJlZSwgc3ludGF4KTtcblx0fSk7XG5cbn0pOy8qKlxuICogUGFzdGVkIGNvbnRlbnQgYWJicmV2aWF0aW9uIHByb2Nlc3Nvci4gQSBwYXN0ZWQgY29udGVudCBpcyBhIGNvbnRlbnQgdGhhdFxuICogc2hvdWxkIGJlIGluc2VydGVkIGludG8gaW1wbGljaXRseSByZXBlYXRlZCBhYmJyZXZpYXRpb24gbm9kZXMuXG4gKiBUaGlzIHByb2Nlc3NvciBwb3dlcnMg4oCcV3JhcCBXaXRoIEFiYnJldmlhdGlvbuKAnSBhY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlcXVpcmVcbiAqIEBwYXJhbSB7VW5kZXJzY29yZX0gX1xuICovXG5lbW1ldC5leGVjKGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0dmFyIHBhcnNlciA9IHJlcXVpcmUoJ2FiYnJldmlhdGlvblBhcnNlcicpO1xuXHR2YXIgb3V0cHV0UGxhY2Vob2xkZXIgPSAnJCMnO1xuXG5cdC8qKlxuXHQgKiBMb2NhdGVzIG91dHB1dCBwbGFjZWhvbGRlcnMgaW5zaWRlIHRleHRcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0ICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiByYW5nZXMgb2Ygb3V0cHV0IHBsYWNlaG9sZGVyIGluIHRleHRcblx0ICovXG5cdGZ1bmN0aW9uIGxvY2F0ZU91dHB1dFBsYWNlaG9sZGVyKHRleHQpIHtcblx0XHR2YXIgcmFuZ2UgPSByZXF1aXJlKCdyYW5nZScpO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblxuXHRcdC8qKiBAdHlwZSBTdHJpbmdTdHJlYW0gKi9cblx0XHR2YXIgc3RyZWFtID0gcmVxdWlyZSgnc3RyaW5nU3RyZWFtJykuY3JlYXRlKHRleHQpO1xuXG5cdFx0d2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcblx0XHRcdGlmIChzdHJlYW0ucGVlaygpID09ICdcXFxcJykge1xuXHRcdFx0XHRzdHJlYW0ubmV4dCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcblx0XHRcdFx0aWYgKHN0cmVhbS5tYXRjaChvdXRwdXRQbGFjZWhvbGRlciwgdHJ1ZSkpIHtcblx0XHRcdFx0XHRyZXN1bHQucHVzaChyYW5nZS5jcmVhdGUoc3RyZWFtLnN0YXJ0LCBvdXRwdXRQbGFjZWhvbGRlcikpO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRzdHJlYW0ubmV4dCgpO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogUmVwbGFjZXMgb3V0cHV0IHBsYWNlaG9sZGVycyBpbnNpZGUgPGNvZGU+c291cmNlPC9jb2RlPiB3aXRoXG5cdCAqIDxjb2RlPnZhbHVlPC9jb2RlPlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc291cmNlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gcmVwbGFjZU91dHB1dFBsYWNlaG9sZGVycyhzb3VyY2UsIHZhbHVlKSB7XG5cdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblx0XHR2YXIgcmFuZ2VzID0gbG9jYXRlT3V0cHV0UGxhY2Vob2xkZXIoc291cmNlKTtcblxuXHRcdHJhbmdlcy5yZXZlcnNlKCk7XG5cdFx0Xy5lYWNoKHJhbmdlcywgZnVuY3Rpb24ocikge1xuXHRcdFx0c291cmNlID0gdXRpbHMucmVwbGFjZVN1YnN0cmluZyhzb3VyY2UsIHZhbHVlLCByKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBzb3VyY2U7XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgcGFyc2VkIG5vZGUgY29udGFpbnMgb3V0cHV0IHBsYWNlaG9sZGVyIOKAkyBhIHRhcmdldCB3aGVyZVxuXHQgKiBwYXN0ZWQgY29udGVudCBzaG91bGQgYmUgaW5zZXJ0ZWRcblx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBub2RlXG5cdCAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzT3V0cHV0UGxhY2Vob2xkZXIobm9kZSkge1xuXHRcdGlmIChsb2NhdGVPdXRwdXRQbGFjZWhvbGRlcihub2RlLmNvbnRlbnQpLmxlbmd0aClcblx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0Ly8gY2hlY2sgaWYgYXR0cmlidXRlcyBjb250YWlucyBwbGFjZWhvbGRlclxuXHRcdHJldHVybiAhIV8uZmluZChub2RlLmF0dHJpYnV0ZUxpc3QoKSwgZnVuY3Rpb24oYXR0cikge1xuXHRcdFx0cmV0dXJuICEhbG9jYXRlT3V0cHV0UGxhY2Vob2xkZXIoYXR0ci52YWx1ZSkubGVuZ3RoO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEluc2VydCBwYXN0ZWQgY29udGVudCBpbnRvIGNvcnJlY3QgcG9zaXRpb25zIG9mIHBhcnNlZCBub2RlXG5cdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IG92ZXJ3cml0ZSBPdmVyd3JpdGUgbm9kZSBjb250ZW50IGlmIG5vIHZhbHVlIHBsYWNlaG9sZGVyc1xuXHQgKiBmb3VuZCBpbnN0ZWFkIG9mIGFwcGVuZGluZyB0byBleGlzdGluZyBjb250ZW50XG5cdCAqL1xuXHRmdW5jdGlvbiBpbnNlcnRQYXN0ZWRDb250ZW50KG5vZGUsIGNvbnRlbnQsIG92ZXJ3cml0ZSkge1xuXHRcdHZhciBub2Rlc1dpdGhQbGFjZWhvbGRlcnMgPSBub2RlLmZpbmRBbGwoZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0cmV0dXJuIGhhc091dHB1dFBsYWNlaG9sZGVyKGl0ZW0pO1xuXHRcdH0pO1xuXG5cdFx0aWYgKGhhc091dHB1dFBsYWNlaG9sZGVyKG5vZGUpKVxuXHRcdFx0bm9kZXNXaXRoUGxhY2Vob2xkZXJzLnVuc2hpZnQobm9kZSk7XG5cblx0XHRpZiAobm9kZXNXaXRoUGxhY2Vob2xkZXJzLmxlbmd0aCkge1xuXHRcdFx0Xy5lYWNoKG5vZGVzV2l0aFBsYWNlaG9sZGVycywgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRpdGVtLmNvbnRlbnQgPSByZXBsYWNlT3V0cHV0UGxhY2Vob2xkZXJzKGl0ZW0uY29udGVudCwgY29udGVudCk7XG5cdFx0XHRcdF8uZWFjaChpdGVtLl9hdHRyaWJ1dGVzLCBmdW5jdGlvbihhdHRyKSB7XG5cdFx0XHRcdFx0YXR0ci52YWx1ZSA9IHJlcGxhY2VPdXRwdXRQbGFjZWhvbGRlcnMoYXR0ci52YWx1ZSwgY29udGVudCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIG9uIG91dHB1dCBwbGFjZWhvbGRlcnMgaW4gc3VidHJlZSwgaW5zZXJ0IGNvbnRlbnQgaW4gdGhlIGRlZXBlc3Rcblx0XHRcdC8vIGNoaWxkIG5vZGVcblx0XHRcdHZhciBkZWVwZXN0ID0gbm9kZS5kZWVwZXN0Q2hpbGQoKSB8fCBub2RlO1xuXHRcdFx0aWYgKG92ZXJ3cml0ZSkge1xuXHRcdFx0XHRkZWVwZXN0LmNvbnRlbnQgPSBjb250ZW50O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVlcGVzdC5jb250ZW50ID0gcmVxdWlyZSgnYWJicmV2aWF0aW9uVXRpbHMnKS5pbnNlcnRDaGlsZENvbnRlbnQoZGVlcGVzdC5jb250ZW50LCBjb250ZW50KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSB0cmVlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRwYXJzZXIuYWRkUHJlcHJvY2Vzc29yKGZ1bmN0aW9uKHRyZWUsIG9wdGlvbnMpIHtcblx0XHRpZiAob3B0aW9ucy5wYXN0ZWRDb250ZW50KSB7XG5cdFx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXHRcdFx0dmFyIGxpbmVzID0gXy5tYXAodXRpbHMuc3BsaXRCeUxpbmVzKG9wdGlvbnMucGFzdGVkQ29udGVudCwgdHJ1ZSksIHV0aWxzLnRyaW0pO1xuXG5cdFx0XHQvLyBzZXQgcmVwZWF0IGNvdW50IGZvciBpbXBsaWNpdGx5IHJlcGVhdGVkIGVsZW1lbnRzIGJlZm9yZVxuXHRcdFx0Ly8gdHJlZSBpcyB1bnJvbGxlZFxuXHRcdFx0dHJlZS5maW5kQWxsKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0aWYgKGl0ZW0uaGFzSW1wbGljaXRSZXBlYXQpIHtcblx0XHRcdFx0XHRpdGVtLmRhdGEoJ3Bhc3RlJywgbGluZXMpO1xuXHRcdFx0XHRcdHJldHVybiBpdGVtLnJlcGVhdENvdW50ID0gbGluZXMubGVuZ3RoO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IHRyZWVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdHBhcnNlci5hZGRQb3N0cHJvY2Vzc29yKGZ1bmN0aW9uKHRyZWUsIG9wdGlvbnMpIHtcblx0XHQvLyBmb3IgZWFjaCBub2RlIHdpdGggcGFzdGVkIGNvbnRlbnQsIHVwZGF0ZSB0ZXh0IGRhdGFcblx0XHR2YXIgdGFyZ2V0cyA9IHRyZWUuZmluZEFsbChmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHR2YXIgcGFzdGVkQ29udGVudE9iaiA9IGl0ZW0uZGF0YSgncGFzdGUnKTtcblx0XHRcdHZhciBwYXN0ZWRDb250ZW50ID0gJyc7XG5cdFx0XHRpZiAoXy5pc0FycmF5KHBhc3RlZENvbnRlbnRPYmopKSB7XG5cdFx0XHRcdHBhc3RlZENvbnRlbnQgPSBwYXN0ZWRDb250ZW50T2JqW2l0ZW0uY291bnRlciAtIDFdO1xuXHRcdFx0fSBlbHNlIGlmIChfLmlzRnVuY3Rpb24ocGFzdGVkQ29udGVudE9iaikpIHtcblx0XHRcdFx0cGFzdGVkQ29udGVudCA9IHBhc3RlZENvbnRlbnRPYmooaXRlbS5jb3VudGVyIC0gMSwgaXRlbS5jb250ZW50KTtcblx0XHRcdH0gZWxzZSBpZiAocGFzdGVkQ29udGVudE9iaikge1xuXHRcdFx0XHRwYXN0ZWRDb250ZW50ID0gcGFzdGVkQ29udGVudE9iajtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHBhc3RlZENvbnRlbnQpIHtcblx0XHRcdFx0aW5zZXJ0UGFzdGVkQ29udGVudChpdGVtLCBwYXN0ZWRDb250ZW50LCAhIWl0ZW0uZGF0YSgncGFzdGVPdmVyd3JpdGVzJykpO1xuXHRcdFx0fVxuXG5cdFx0XHRpdGVtLmRhdGEoJ3Bhc3RlJywgbnVsbCk7XG5cdFx0XHRyZXR1cm4gISFwYXN0ZWRDb250ZW50T2JqO1xuXHRcdH0pO1xuXG5cdFx0aWYgKCF0YXJnZXRzLmxlbmd0aCAmJiBvcHRpb25zLnBhc3RlZENvbnRlbnQpIHtcblx0XHRcdC8vIG5vIGltcGxpY2l0bHkgcmVwZWF0ZWQgZWxlbWVudHMsIHB1dCBwYXN0ZWQgY29udGVudCBpblxuXHRcdFx0Ly8gdGhlIGRlZXBlc3QgY2hpbGRcblx0XHRcdGluc2VydFBhc3RlZENvbnRlbnQodHJlZSwgb3B0aW9ucy5wYXN0ZWRDb250ZW50KTtcblx0XHR9XG5cdH0pO1xufSk7LyoqXG4gKiBSZXNvbHZlcyB0YWcgbmFtZXMgaW4gYWJicmV2aWF0aW9ucyB3aXRoIGltcGxpZWQgbmFtZVxuICovXG5lbW1ldC5leGVjKGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0LyoqXG5cdCAqIFJlc29sdmVzIGltcGxpY2l0IG5vZGUgbmFtZXMgaW4gcGFyc2VkIHRyZWVcblx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSB0cmVlXG5cdCAqL1xuXHRmdW5jdGlvbiByZXNvbHZlTm9kZU5hbWVzKHRyZWUpIHtcblx0XHR2YXIgdGFnTmFtZSA9IHJlcXVpcmUoJ3RhZ05hbWUnKTtcblx0XHRfLmVhY2godHJlZS5jaGlsZHJlbiwgZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0aWYgKG5vZGUuaGFzSW1wbGljaXROYW1lKCkgfHwgbm9kZS5kYXRhKCdmb3JjZU5hbWVSZXNvbHZpbmcnKSkge1xuXHRcdFx0XHRub2RlLl9uYW1lID0gdGFnTmFtZS5yZXNvbHZlKG5vZGUucGFyZW50Lm5hbWUoKSk7XG5cdFx0XHR9XG5cdFx0XHRyZXNvbHZlTm9kZU5hbWVzKG5vZGUpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHRyZWU7XG5cdH1cblxuXHRyZXF1aXJlKCdhYmJyZXZpYXRpb25QYXJzZXInKS5hZGRQb3N0cHJvY2Vzc29yKHJlc29sdmVOb2RlTmFtZXMpO1xufSk7LyoqXG4gKiBAYXV0aG9yIFN0b3lhbiBTdGVmYW5vdlxuICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3N0b3lhbi9ldGMvdHJlZS9tYXN0ZXIvY3NzZXhcbiAqL1xuXG5lbW1ldC5kZWZpbmUoJ2Nzc1BhcnNlcicsIGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcbnZhciB3YWxrZXIsIHRva2VucyA9IFtdLCBpc09wLCBpc05hbWVDaGFyLCBpc0RpZ2l0O1xuXG4gICAgLy8gd2Fsa3MgYXJvdW5kIHRoZSBzb3VyY2VcbiAgICB3YWxrZXIgPSB7XG4gICAgICAgIGxpbmVzOiBudWxsLFxuICAgICAgICB0b3RhbF9saW5lczogMCxcbiAgICAgICAgbGluZW51bTogLTEsXG4gICAgICAgIGxpbmU6ICcnLFxuICAgICAgICBjaDogJycsXG4gICAgICAgIGNobnVtOiAtMSxcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICAgICAgdmFyIG1lID0gd2Fsa2VyO1xuXG4gICAgICAgICAgICAvLyBzb3VyY2UsIHl1bW1cbiAgICAgICAgICAgIG1lLmxpbmVzID0gc291cmNlXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcclxcbi9nLCAnXFxuJylcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxyL2csICdcXG4nKVxuICAgICAgICAgICAgICAgIC5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICBtZS50b3RhbF9saW5lcyA9IG1lLmxpbmVzLmxlbmd0aDtcblxuICAgICAgICAgICAgLy8gcmVzZXRcbiAgICAgICAgICAgIG1lLmNobnVtID0gLTE7XG4gICAgICAgICAgICBtZS5saW5lbnVtID0gLTE7XG4gICAgICAgICAgICBtZS5jaCA9ICcnO1xuICAgICAgICAgICAgbWUubGluZSA9ICcnO1xuXG4gICAgICAgICAgICAvLyBhZHZhbmNlXG4gICAgICAgICAgICBtZS5uZXh0TGluZSgpO1xuICAgICAgICAgICAgbWUubmV4dENoYXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgbmV4dExpbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICBtZS5saW5lbnVtICs9IDE7XG4gICAgICAgICAgICBpZiAobWUudG90YWxfbGluZXMgPD0gbWUubGluZW51bSkge1xuICAgICAgICAgICAgICAgIG1lLmxpbmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWUubGluZSA9IG1lLmxpbmVzW21lLmxpbmVudW1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lLmNobnVtICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIG1lLmNobnVtID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZS5saW5lO1xuICAgICAgICB9LFxuICAgICAgICBuZXh0Q2hhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgICAgIG1lLmNobnVtICs9IDE7XG4gICAgICAgICAgICB3aGlsZSAobWUubGluZS5jaGFyQXQobWUuY2hudW0pID09PSAnJykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5leHRMaW5lKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lLmNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gZW5kIG9mIHNvdXJjZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtZS5jaG51bSA9IC0xO1xuICAgICAgICAgICAgICAgIG1lLmNoID0gJ1xcbic7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdcXG4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWUuY2ggPSBtZS5saW5lLmNoYXJBdChtZS5jaG51bSk7XG4gICAgICAgICAgICByZXR1cm4gbWUuY2g7XG4gICAgICAgIH0sXG4gICAgICAgIHBlZWs6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGluZS5jaGFyQXQodGhpcy5jaG51bSArIDEpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIHV0aWxpdHkgaGVscGVyc1xuICAgIGlzTmFtZUNoYXIgPSBmdW5jdGlvbiAoYykge1xuICAgIFx0Ly8gYmUgbW9yZSB0b2xlcmF0ZSBmb3IgbmFtZSB0b2tlbnM6IGFsbG93ICYgY2hhcmFjdGVyIGZvciBMRVNTIHN5bnRheFxuICAgICAgICByZXR1cm4gKGMgPT0gJyYnIHx8IGMgPT09ICdfJyB8fCBjID09PSAnLScgfHwgKGMgPj0gJ2EnICYmIGMgPD0gJ3onKSB8fCAoYyA+PSAnQScgJiYgYyA8PSAnWicpKTtcbiAgICB9O1xuXG4gICAgaXNEaWdpdCA9IGZ1bmN0aW9uIChjaCkge1xuICAgICAgICByZXR1cm4gKGNoICE9PSBmYWxzZSAmJiBjaCA+PSAnMCcgJiYgY2ggPD0gJzknKTtcbiAgICB9O1xuXG4gICAgaXNPcCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvcHNhID0gXCJ7fVtdKCkrKj0uLDs6Pn58XFxcXCUkI0BeIVwiLnNwbGl0KCcnKSxcbiAgICAgICAgICAgIG9wc21hdGNoYSA9IFwiKl58JH5cIi5zcGxpdCgnJyksXG4gICAgICAgICAgICBvcHMgPSB7fSxcbiAgICAgICAgICAgIG9wc21hdGNoID0ge30sXG4gICAgICAgICAgICBpID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBvcHNhLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBvcHNbb3BzYVtpXV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBvcHNtYXRjaGEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIG9wc21hdGNoW29wc21hdGNoYVtpXV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoY2gsIG1hdGNoYXR0cikge1xuICAgICAgICAgICAgaWYgKG1hdGNoYXR0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiAhIW9wc21hdGNoW2NoXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhIW9wc1tjaF07XG4gICAgICAgIH07XG4gICAgfSgpKTtcblxuICAgIC8vIHNob3J0aGFuZHNcbiAgICBmdW5jdGlvbiBpc3NldCh2KSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdiAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldENvbmYoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAnY2hhcic6IHdhbGtlci5jaG51bSxcbiAgICAgICAgICAgIGxpbmU6IHdhbGtlci5saW5lbnVtXG4gICAgICAgIH07XG4gICAgfVxuXG5cbiAgICAvLyBjcmVhdGVzIHRva2VuIG9iamVjdHMgYW5kIHB1c2hlcyB0aGVtIHRvIGEgbGlzdFxuICAgIGZ1bmN0aW9uIHRva2VuZXIodmFsdWUsIHR5cGUsIGNvbmYpIHtcbiAgICAgICAgdmFyIHcgPSB3YWxrZXIsIGMgPSBjb25mIHx8IHt9O1xuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgICBjaGFyc3RhcnQ6IGlzc2V0KGNbJ2NoYXInXSkgPyBjWydjaGFyJ10gOiB3LmNobnVtLFxuICAgICAgICAgICAgY2hhcmVuZDogICBpc3NldChjLmNoYXJlbmQpID8gYy5jaGFyZW5kIDogdy5jaG51bSxcbiAgICAgICAgICAgIGxpbmVzdGFydDogaXNzZXQoYy5saW5lKSAgICA/IGMubGluZSAgICA6IHcubGluZW51bSxcbiAgICAgICAgICAgIGxpbmVlbmQ6ICAgaXNzZXQoYy5saW5lZW5kKSA/IGMubGluZWVuZCA6IHcubGluZW51bSxcbiAgICAgICAgICAgIHZhbHVlOiAgICAgdmFsdWUsXG4gICAgICAgICAgICB0eXBlOiAgICAgIHR5cGUgfHwgdmFsdWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gb29wc1xuICAgIGZ1bmN0aW9uIGVycm9yKG0sIGNvbmZpZykge1xuICAgICAgICB2YXIgdyA9IHdhbGtlcixcbiAgICAgICAgICAgIGNvbmYgPSBjb25maWcgfHwge30sXG4gICAgICAgICAgICBjID0gaXNzZXQoY29uZlsnY2hhciddKSA/IGNvbmZbJ2NoYXInXSA6IHcuY2hudW0sXG4gICAgICAgICAgICBsID0gaXNzZXQoY29uZi5saW5lKSA/IGNvbmYubGluZSA6IHcubGluZW51bTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IFwiUGFyc2VFcnJvclwiLFxuICAgICAgICAgICAgbWVzc2FnZTogbSArIFwiIGF0IGxpbmUgXCIgKyAobCArIDEpICsgJyBjaGFyICcgKyAoYyArIDEpLFxuICAgICAgICAgICAgd2Fsa2VyOiB3LFxuICAgICAgICAgICAgdG9rZW5zOiB0b2tlbnNcbiAgICAgICAgfTtcbiAgICB9XG5cblxuICAgIC8vIHRva2VuIGhhbmRsZXJzIGZvbGxvdyBmb3I6XG4gICAgLy8gd2hpdGUgc3BhY2UsIGNvbW1lbnQsIHN0cmluZywgaWRlbnRpZmllciwgbnVtYmVyLCBvcGVyYXRvclxuICAgIGZ1bmN0aW9uIHdoaXRlKCkge1xuXG4gICAgICAgIHZhciBjID0gd2Fsa2VyLmNoLFxuICAgICAgICAgICAgdG9rZW4gPSAnJyxcbiAgICAgICAgICAgIGNvbmYgPSBnZXRDb25mKCk7XG5cbiAgICAgICAgd2hpbGUgKGMgPT09IFwiIFwiIHx8IGMgPT09IFwiXFx0XCIpIHtcbiAgICAgICAgICAgIHRva2VuICs9IGM7XG4gICAgICAgICAgICBjID0gd2Fsa2VyLm5leHRDaGFyKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0b2tlbmVyKHRva2VuLCAnd2hpdGUnLCBjb25mKTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbW1lbnQoKSB7XG5cbiAgICAgICAgdmFyIHcgPSB3YWxrZXIsXG4gICAgICAgICAgICBjID0gdy5jaCxcbiAgICAgICAgICAgIHRva2VuID0gYyxcbiAgICAgICAgICAgIGNuZXh0LFxuICAgICAgICAgICAgY29uZiA9IGdldENvbmYoKTtcblxuICAgICAgICBjbmV4dCA9IHcubmV4dENoYXIoKTtcblxuICAgICAgICBpZiAoY25leHQgPT09ICcvJykge1xuICAgICAgICAgICAgLy8gaW5saW5lIGNvbW1lbnQgaW4gU0NTUyBhbmQgc3VjaFxuICAgICAgICAgICAgdG9rZW4gKz0gY25leHQ7XG4gICAgICAgICAgICB2YXIgcGsgPSB3LnBlZWsoKTtcbiAgICAgICAgICAgIHdoaWxlIChwayAmJiBwayAhPT0gJ1xcbicpIHtcbiAgICAgICAgICAgICAgICB0b2tlbiArPSBjbmV4dDtcbiAgICAgICAgICAgICAgICBjbmV4dCA9IHcubmV4dENoYXIoKTtcbiAgICAgICAgICAgICAgICBwayA9IHcucGVlaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGNuZXh0ID09PSAnKicpIHtcbiAgICAgICAgICAgIC8vIG11bHRpbGluZSBDU1MgY29tbW1lbnRcbiAgICAgICAgICAgIHdoaWxlICghKGMgPT09IFwiKlwiICYmIGNuZXh0ID09PSBcIi9cIikpIHtcbiAgICAgICAgICAgICAgICB0b2tlbiArPSBjbmV4dDtcbiAgICAgICAgICAgICAgICBjID0gY25leHQ7XG4gICAgICAgICAgICAgICAgY25leHQgPSB3Lm5leHRDaGFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBvb3BzLCBub3QgYSBjb21tZW50LCBqdXN0IGEgL1xuICAgICAgICAgICAgY29uZi5jaGFyZW5kID0gY29uZlsnY2hhciddO1xuICAgICAgICAgICAgY29uZi5saW5lZW5kID0gY29uZi5saW5lO1xuICAgICAgICAgICAgcmV0dXJuIHRva2VuZXIodG9rZW4sIHRva2VuLCBjb25mKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRva2VuICs9IGNuZXh0O1xuICAgICAgICB3Lm5leHRDaGFyKCk7XG4gICAgICAgIHRva2VuZXIodG9rZW4sICdjb21tZW50JywgY29uZik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RyKCkge1xuICAgICAgICB2YXIgdyA9IHdhbGtlcixcbiAgICAgICAgICAgIGMgPSB3LmNoLFxuICAgICAgICAgICAgcSA9IGMsXG4gICAgICAgICAgICB0b2tlbiA9IGMsXG4gICAgICAgICAgICBjbmV4dCxcbiAgICAgICAgICAgIGNvbmYgPSBnZXRDb25mKCk7XG5cbiAgICAgICAgYyA9IHcubmV4dENoYXIoKTtcblxuICAgICAgICB3aGlsZSAoYyAhPT0gcSkge1xuXG4gICAgICAgICAgICBpZiAoYyA9PT0gJ1xcbicpIHtcbiAgICAgICAgICAgICAgICBjbmV4dCA9IHcubmV4dENoYXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoY25leHQgPT09IFwiXFxcXFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuICs9IGMgKyBjbmV4dDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBlbmQgb2YgbGluZSB3aXRoIG5vIFxcIGVzY2FwZSA9IGJhZFxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcihcIlVudGVybWluYXRlZCBzdHJpbmdcIiwgY29uZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCJcXFxcXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gKz0gYyArIHcubmV4dENoYXIoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbiArPSBjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYyA9IHcubmV4dENoYXIoKTtcblxuICAgICAgICB9XG4gICAgICAgIHRva2VuICs9IGM7XG4gICAgICAgIHcubmV4dENoYXIoKTtcbiAgICAgICAgdG9rZW5lcih0b2tlbiwgJ3N0cmluZycsIGNvbmYpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJyYWNlKCkge1xuICAgICAgICB2YXIgdyA9IHdhbGtlcixcbiAgICAgICAgICAgIGMgPSB3LmNoLFxuICAgICAgICAgICAgZGVwdGggPSAwLFxuICAgICAgICAgICAgdG9rZW4gPSBjLFxuICAgICAgICAgICAgY29uZiA9IGdldENvbmYoKTtcblxuICAgICAgICBjID0gdy5uZXh0Q2hhcigpO1xuXG4gICAgICAgIHdoaWxlIChjICE9PSAnKScgJiYgIWRlcHRoKSB7XG4gICAgICAgIFx0aWYgKGMgPT09ICcoJykge1xuICAgICAgICBcdFx0ZGVwdGgrKztcbiAgICAgICAgXHR9IGVsc2UgaWYgKGMgPT09ICcpJykge1xuICAgICAgICBcdFx0ZGVwdGgtLTtcbiAgICAgICAgXHR9IGVsc2UgaWYgKGMgPT09IGZhbHNlKSB7XG4gICAgICAgIFx0XHR0aHJvdyBlcnJvcihcIlVudGVybWluYXRlZCBicmFjZVwiLCBjb25mKTtcbiAgICAgICAgXHR9XG5cbiAgICAgICAgXHR0b2tlbiArPSBjO1xuICAgICAgICAgICAgYyA9IHcubmV4dENoYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRva2VuICs9IGM7XG4gICAgICAgIHcubmV4dENoYXIoKTtcbiAgICAgICAgdG9rZW5lcih0b2tlbiwgJ2JyYWNlJywgY29uZik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaWRlbnRpZmllcihwcmUpIHtcbiAgICAgICAgdmFyIHcgPSB3YWxrZXIsXG4gICAgICAgICAgICBjID0gdy5jaCxcbiAgICAgICAgICAgIGNvbmYgPSBnZXRDb25mKCksXG4gICAgICAgICAgICB0b2tlbiA9IChwcmUpID8gcHJlICsgYyA6IGM7XG5cbiAgICAgICAgYyA9IHcubmV4dENoYXIoKTtcblxuICAgICAgICBpZiAocHJlKSB7IC8vIGFkanVzdCB0b2tlbiBwb3NpdGlvblxuICAgICAgICBcdGNvbmZbJ2NoYXInXSAtPSBwcmUubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKGlzTmFtZUNoYXIoYykgfHwgaXNEaWdpdChjKSkge1xuICAgICAgICAgICAgdG9rZW4gKz0gYztcbiAgICAgICAgICAgIGMgPSB3Lm5leHRDaGFyKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0b2tlbmVyKHRva2VuLCAnaWRlbnRpZmllcicsIGNvbmYpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG51bSgpIHtcbiAgICAgICAgdmFyIHcgPSB3YWxrZXIsXG4gICAgICAgICAgICBjID0gdy5jaCxcbiAgICAgICAgICAgIGNvbmYgPSBnZXRDb25mKCksXG4gICAgICAgICAgICB0b2tlbiA9IGMsXG4gICAgICAgICAgICBwb2ludCA9IHRva2VuID09PSAnLicsXG4gICAgICAgICAgICBub25kaWdpdDtcblxuICAgICAgICBjID0gdy5uZXh0Q2hhcigpO1xuICAgICAgICBub25kaWdpdCA9ICFpc0RpZ2l0KGMpO1xuXG4gICAgICAgIC8vIC4ycHggb3IgLmNsYXNzbmFtZT9cbiAgICAgICAgaWYgKHBvaW50ICYmIG5vbmRpZ2l0KSB7XG4gICAgICAgICAgICAvLyBtZWgsIE5hTiwgY291bGQgYmUgYSBjbGFzcyBuYW1lLCBzbyBpdCdzIGFuIG9wZXJhdG9yIGZvciBub3dcbiAgICAgICAgICAgIGNvbmYuY2hhcmVuZCA9IGNvbmZbJ2NoYXInXTtcbiAgICAgICAgICAgIGNvbmYubGluZWVuZCA9IGNvbmYubGluZTtcbiAgICAgICAgICAgIHJldHVybiB0b2tlbmVyKHRva2VuLCAnLicsIGNvbmYpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLTJweCBvciAtbW96LXNvbWV0aGluZ1xuICAgICAgICBpZiAodG9rZW4gPT09ICctJyAmJiBub25kaWdpdCkge1xuICAgICAgICAgICAgcmV0dXJuIGlkZW50aWZpZXIoJy0nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChjICE9PSBmYWxzZSAmJiAoaXNEaWdpdChjKSB8fCAoIXBvaW50ICYmIGMgPT09ICcuJykpKSB7IC8vIG5vdCBlbmQgb2Ygc291cmNlICYmIGRpZ2l0IG9yIGZpcnN0IGluc3RhbmNlIG9mIC5cbiAgICAgICAgICAgIGlmIChjID09PSAnLicpIHtcbiAgICAgICAgICAgICAgICBwb2ludCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b2tlbiArPSBjO1xuICAgICAgICAgICAgYyA9IHcubmV4dENoYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRva2VuZXIodG9rZW4sICdudW1iZXInLCBjb25mKTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9wKCkge1xuICAgICAgICB2YXIgdyA9IHdhbGtlcixcbiAgICAgICAgICAgIGMgPSB3LmNoLFxuICAgICAgICAgICAgY29uZiA9IGdldENvbmYoKSxcbiAgICAgICAgICAgIHRva2VuID0gYyxcbiAgICAgICAgICAgIG5leHQgPSB3Lm5leHRDaGFyKCk7XG5cbiAgICAgICAgaWYgKG5leHQgPT09IFwiPVwiICYmIGlzT3AodG9rZW4sIHRydWUpKSB7XG4gICAgICAgICAgICB0b2tlbiArPSBuZXh0O1xuICAgICAgICAgICAgdG9rZW5lcih0b2tlbiwgJ21hdGNoJywgY29uZik7XG4gICAgICAgICAgICB3Lm5leHRDaGFyKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25mLmNoYXJlbmQgPSBjb25mWydjaGFyJ10gKyAxO1xuICAgICAgICBjb25mLmxpbmVlbmQgPSBjb25mLmxpbmU7XG4gICAgICAgIHRva2VuZXIodG9rZW4sIHRva2VuLCBjb25mKTtcbiAgICB9XG5cblxuICAgIC8vIGNhbGwgdGhlIGFwcHJvcHJpYXRlIGhhbmRsZXIgYmFzZWQgb24gdGhlIGZpcnN0IGNoYXJhY3RlciBpbiBhIHRva2VuIHN1c3BlY3RcbiAgICBmdW5jdGlvbiB0b2tlbml6ZSgpIHtcblxuICAgICAgICB2YXIgY2ggPSB3YWxrZXIuY2g7XG5cbiAgICAgICAgaWYgKGNoID09PSBcIiBcIiB8fCBjaCA9PT0gXCJcXHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHdoaXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2ggPT09ICcvJykge1xuICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaCA9PT0gJ1wiJyB8fCBjaCA9PT0gXCInXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaCA9PT0gJygnKSB7XG4gICAgICAgICAgICByZXR1cm4gYnJhY2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaCA9PT0gJy0nIHx8IGNoID09PSAnLicgfHwgaXNEaWdpdChjaCkpIHsgLy8gdHJpY2t5IC0gY2hhcjogbWludXMgKC0xcHgpIG9yIGRhc2ggKC1tb3otc3R1ZmYpXG4gICAgICAgICAgICByZXR1cm4gbnVtKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNOYW1lQ2hhcihjaCkpIHtcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNPcChjaCkpIHtcbiAgICAgICAgICAgIHJldHVybiBvcCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoID09PSBcIlxcblwiKSB7XG4gICAgICAgICAgICB0b2tlbmVyKFwibGluZVwiKTtcbiAgICAgICAgICAgIHdhbGtlci5uZXh0Q2hhcigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgZXJyb3IoXCJVbnJlY29nbml6ZWQgY2hhcmFjdGVyXCIpO1xuICAgIH1cblxuICAgIC8qKlxuXHQgKiBSZXR1cm5zIG5ld2xpbmUgY2hhcmFjdGVyIGF0IHNwZWNpZmllZCBwb3NpdGlvbiBpbiBjb250ZW50XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3Ncblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TmV3bGluZShjb250ZW50LCBwb3MpIHtcblx0XHRyZXR1cm4gY29udGVudC5jaGFyQXQocG9zKSA9PSAnXFxyJyAmJiBjb250ZW50LmNoYXJBdChwb3MgKyAxKSA9PSAnXFxuJ1xuXHRcdFx0PyAnXFxyXFxuJ1xuXHRcdFx0OiBjb250ZW50LmNoYXJBdChwb3MpO1xuXHR9XG5cbiAgICByZXR1cm4ge1xuICAgIFx0LyoqXG4gICAgXHQgKiBAcGFyYW0gc291cmNlXG4gICAgXHQgKiBAcmV0dXJuc1xuICAgIFx0ICogQG1lbWJlck9mIGVtbWV0LmNzc1BhcnNlclxuICAgIFx0ICovXG4gICAgICAgIGxleDogZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICAgICAgd2Fsa2VyLmluaXQoc291cmNlKTtcbiAgICAgICAgICAgIHRva2VucyA9IFtdO1xuICAgICAgICAgICAgd2hpbGUgKHdhbGtlci5jaCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0b2tlbml6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRva2VucztcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVG9rZW5pemVzIENTUyBzb3VyY2VcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHNvdXJjZVxuICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAgICAgICAqL1xuICAgICAgICBwYXJzZTogZnVuY3Rpb24oc291cmNlKSB7XG4gICAgICAgIFx0Ly8gdHJhbnNmb3JtIHRva2Vuc1xuXHQgXHRcdHZhciBwb3MgPSAwO1xuXHQgXHRcdHJldHVybiBfLm1hcCh0aGlzLmxleChzb3VyY2UpLCBmdW5jdGlvbih0b2tlbikge1xuXHQgXHRcdFx0aWYgKHRva2VuLnR5cGUgPT0gJ2xpbmUnKSB7XG5cdCBcdFx0XHRcdHRva2VuLnZhbHVlID0gZ2V0TmV3bGluZShzb3VyY2UsIHBvcyk7XG5cdCBcdFx0XHR9XG5cblx0IFx0XHRcdHJldHVybiB7XG5cdCBcdFx0XHRcdHR5cGU6IHRva2VuLnR5cGUsXG5cdCBcdFx0XHRcdHN0YXJ0OiBwb3MsXG5cdCBcdFx0XHRcdGVuZDogKHBvcyArPSB0b2tlbi52YWx1ZS5sZW5ndGgpXG5cdCBcdFx0XHR9O1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuICAgICAgICB0b1NvdXJjZTogZnVuY3Rpb24gKHRva3MpIHtcbiAgICAgICAgICAgIHZhciBpID0gMCwgbWF4ID0gdG9rcy5sZW5ndGgsIHQsIHNyYyA9ICcnO1xuICAgICAgICAgICAgZm9yICg7IGkgPCBtYXg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIHQgPSB0b2tzW2ldO1xuICAgICAgICAgICAgICAgIGlmICh0LnR5cGUgPT09ICdsaW5lJykge1xuICAgICAgICAgICAgICAgICAgICBzcmMgKz0gJ1xcbic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3JjICs9IHQudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNyYztcbiAgICAgICAgfVxuICAgIH07XG59KTsvKipcbiAqIEhUTUwgdG9rZW5pemVyIGJ5IE1hcmlqbiBIYXZlcmJla2VcbiAqIGh0dHA6Ly9jb2RlbWlycm9yLm5ldC9cbiAqIEBjb25zdHJ1Y3RvclxuICogQG1lbWJlck9mIF9feG1sUGFyc2VEZWZpbmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlcXVpcmVcbiAqIEBwYXJhbSB7VW5kZXJzY29yZX0gX1xuICovXG5lbW1ldC5kZWZpbmUoJ3htbFBhcnNlcicsIGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0dmFyIEtsdWRnZXMgPSB7XG5cdFx0YXV0b1NlbGZDbG9zZXJzIDoge30sXG5cdFx0aW1wbGljaXRseUNsb3NlZCA6IHt9LFxuXHRcdGNvbnRleHRHcmFiYmVycyA6IHt9LFxuXHRcdGRvTm90SW5kZW50IDoge30sXG5cdFx0YWxsb3dVbnF1b3RlZCA6IHRydWUsXG5cdFx0YWxsb3dNaXNzaW5nIDogdHJ1ZVxuXHR9O1xuXG5cdC8vIFJldHVybiB2YXJpYWJsZXMgZm9yIHRva2VuaXplcnNcblx0dmFyIHRhZ05hbWUgPSBudWxsLCB0eXBlID0gbnVsbDtcblxuXHRmdW5jdGlvbiBpblRleHQoc3RyZWFtLCBzdGF0ZSkge1xuXHRcdGZ1bmN0aW9uIGNoYWluKHBhcnNlcikge1xuXHRcdFx0c3RhdGUudG9rZW5pemUgPSBwYXJzZXI7XG5cdFx0XHRyZXR1cm4gcGFyc2VyKHN0cmVhbSwgc3RhdGUpO1xuXHRcdH1cblxuXHRcdHZhciBjaCA9IHN0cmVhbS5uZXh0KCk7XG5cdFx0aWYgKGNoID09IFwiPFwiKSB7XG5cdFx0XHRpZiAoc3RyZWFtLmVhdChcIiFcIikpIHtcblx0XHRcdFx0aWYgKHN0cmVhbS5lYXQoXCJbXCIpKSB7XG5cdFx0XHRcdFx0aWYgKHN0cmVhbS5tYXRjaChcIkNEQVRBW1wiKSlcblx0XHRcdFx0XHRcdHJldHVybiBjaGFpbihpbkJsb2NrKFwiYXRvbVwiLCBcIl1dPlwiKSk7XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdH0gZWxzZSBpZiAoc3RyZWFtLm1hdGNoKFwiLS1cIikpXG5cdFx0XHRcdFx0cmV0dXJuIGNoYWluKGluQmxvY2soXCJjb21tZW50XCIsIFwiLS0+XCIpKTtcblx0XHRcdFx0ZWxzZSBpZiAoc3RyZWFtLm1hdGNoKFwiRE9DVFlQRVwiLCB0cnVlLCB0cnVlKSkge1xuXHRcdFx0XHRcdHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xcLl9cXC1dLyk7XG5cdFx0XHRcdFx0cmV0dXJuIGNoYWluKGRvY3R5cGUoMSkpO1xuXHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH0gZWxzZSBpZiAoc3RyZWFtLmVhdChcIj9cIikpIHtcblx0XHRcdFx0c3RyZWFtLmVhdFdoaWxlKC9bXFx3XFwuX1xcLV0vKTtcblx0XHRcdFx0c3RhdGUudG9rZW5pemUgPSBpbkJsb2NrKFwibWV0YVwiLCBcIj8+XCIpO1xuXHRcdFx0XHRyZXR1cm4gXCJtZXRhXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0eXBlID0gc3RyZWFtLmVhdChcIi9cIikgPyBcImNsb3NlVGFnXCIgOiBcIm9wZW5UYWdcIjtcblx0XHRcdFx0c3RyZWFtLmVhdFNwYWNlKCk7XG5cdFx0XHRcdHRhZ05hbWUgPSBcIlwiO1xuXHRcdFx0XHR2YXIgYztcblx0XHRcdFx0d2hpbGUgKChjID0gc3RyZWFtLmVhdCgvW15cXHNcXHUwMGEwPTw+XFxcIlxcJ1xcLz9dLykpKVxuXHRcdFx0XHRcdHRhZ05hbWUgKz0gYztcblx0XHRcdFx0c3RhdGUudG9rZW5pemUgPSBpblRhZztcblx0XHRcdFx0cmV0dXJuIFwidGFnXCI7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChjaCA9PSBcIiZcIikge1xuXHRcdFx0dmFyIG9rO1xuXHRcdFx0aWYgKHN0cmVhbS5lYXQoXCIjXCIpKSB7XG5cdFx0XHRcdGlmIChzdHJlYW0uZWF0KFwieFwiKSkge1xuXHRcdFx0XHRcdG9rID0gc3RyZWFtLmVhdFdoaWxlKC9bYS1mQS1GXFxkXS8pICYmIHN0cmVhbS5lYXQoXCI7XCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdG9rID0gc3RyZWFtLmVhdFdoaWxlKC9bXFxkXS8pICYmIHN0cmVhbS5lYXQoXCI7XCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvayA9IHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xcLlxcLTpdLykgJiYgc3RyZWFtLmVhdChcIjtcIik7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb2sgPyBcImF0b21cIiA6IFwiZXJyb3JcIjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3RyZWFtLmVhdFdoaWxlKC9bXiY8XS8pO1xuXHRcdFx0cmV0dXJuIFwidGV4dFwiO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGluVGFnKHN0cmVhbSwgc3RhdGUpIHtcblx0XHR2YXIgY2ggPSBzdHJlYW0ubmV4dCgpO1xuXHRcdGlmIChjaCA9PSBcIj5cIiB8fCAoY2ggPT0gXCIvXCIgJiYgc3RyZWFtLmVhdChcIj5cIikpKSB7XG5cdFx0XHRzdGF0ZS50b2tlbml6ZSA9IGluVGV4dDtcblx0XHRcdHR5cGUgPSBjaCA9PSBcIj5cIiA/IFwiZW5kVGFnXCIgOiBcInNlbGZjbG9zZVRhZ1wiO1xuXHRcdFx0cmV0dXJuIFwidGFnXCI7XG5cdFx0fSBlbHNlIGlmIChjaCA9PSBcIj1cIikge1xuXHRcdFx0dHlwZSA9IFwiZXF1YWxzXCI7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9IGVsc2UgaWYgKC9bXFwnXFxcIl0vLnRlc3QoY2gpKSB7XG5cdFx0XHRzdGF0ZS50b2tlbml6ZSA9IGluQXR0cmlidXRlKGNoKTtcblx0XHRcdHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3RyZWFtLmVhdFdoaWxlKC9bXlxcc1xcdTAwYTA9PD5cXFwiXFwnXFwvP10vKTtcblx0XHRcdHJldHVybiBcIndvcmRcIjtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBpbkF0dHJpYnV0ZShxdW90ZSkge1xuXHRcdHJldHVybiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG5cdFx0XHR3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuXHRcdFx0XHRpZiAoc3RyZWFtLm5leHQoKSA9PSBxdW90ZSkge1xuXHRcdFx0XHRcdHN0YXRlLnRva2VuaXplID0gaW5UYWc7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBcInN0cmluZ1wiO1xuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBpbkJsb2NrKHN0eWxlLCB0ZXJtaW5hdG9yKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcblx0XHRcdHdoaWxlICghc3RyZWFtLmVvbCgpKSB7XG5cdFx0XHRcdGlmIChzdHJlYW0ubWF0Y2godGVybWluYXRvcikpIHtcblx0XHRcdFx0XHRzdGF0ZS50b2tlbml6ZSA9IGluVGV4dDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRzdHJlYW0ubmV4dCgpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHN0eWxlO1xuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBkb2N0eXBlKGRlcHRoKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcblx0XHRcdHZhciBjaDtcblx0XHRcdHdoaWxlICgoY2ggPSBzdHJlYW0ubmV4dCgpKSAhPSBudWxsKSB7XG5cdFx0XHRcdGlmIChjaCA9PSBcIjxcIikge1xuXHRcdFx0XHRcdHN0YXRlLnRva2VuaXplID0gZG9jdHlwZShkZXB0aCArIDEpO1xuXHRcdFx0XHRcdHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcblx0XHRcdFx0fSBlbHNlIGlmIChjaCA9PSBcIj5cIikge1xuXHRcdFx0XHRcdGlmIChkZXB0aCA9PSAxKSB7XG5cdFx0XHRcdFx0XHRzdGF0ZS50b2tlbml6ZSA9IGluVGV4dDtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzdGF0ZS50b2tlbml6ZSA9IGRvY3R5cGUoZGVwdGggLSAxKTtcblx0XHRcdFx0XHRcdHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBcIm1ldGFcIjtcblx0XHR9O1xuXHR9XG5cblx0dmFyIGN1clN0YXRlID0gbnVsbCwgc2V0U3R5bGU7XG5cdGZ1bmN0aW9uIHBhc3MoKSB7XG5cdFx0Zm9yICh2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcblx0XHRcdGN1clN0YXRlLmNjLnB1c2goYXJndW1lbnRzW2ldKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNvbnQoKSB7XG5cdFx0cGFzcy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0ZnVuY3Rpb24gcHVzaENvbnRleHQodGFnTmFtZSwgc3RhcnRPZkxpbmUpIHtcblx0XHR2YXIgbm9JbmRlbnQgPSBLbHVkZ2VzLmRvTm90SW5kZW50Lmhhc093blByb3BlcnR5KHRhZ05hbWUpXG5cdFx0XHR8fCAoY3VyU3RhdGUuY29udGV4dCAmJiBjdXJTdGF0ZS5jb250ZXh0Lm5vSW5kZW50KTtcblx0XHRjdXJTdGF0ZS5jb250ZXh0ID0ge1xuXHRcdFx0cHJldiA6IGN1clN0YXRlLmNvbnRleHQsXG5cdFx0XHR0YWdOYW1lIDogdGFnTmFtZSxcblx0XHRcdGluZGVudCA6IGN1clN0YXRlLmluZGVudGVkLFxuXHRcdFx0c3RhcnRPZkxpbmUgOiBzdGFydE9mTGluZSxcblx0XHRcdG5vSW5kZW50IDogbm9JbmRlbnRcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gcG9wQ29udGV4dCgpIHtcblx0XHRpZiAoY3VyU3RhdGUuY29udGV4dClcblx0XHRcdGN1clN0YXRlLmNvbnRleHQgPSBjdXJTdGF0ZS5jb250ZXh0LnByZXY7XG5cdH1cblxuXHRmdW5jdGlvbiBlbGVtZW50KHR5cGUpIHtcblx0XHRpZiAodHlwZSA9PSBcIm9wZW5UYWdcIikge1xuXHRcdFx0Y3VyU3RhdGUudGFnTmFtZSA9IHRhZ05hbWU7XG5cdFx0XHRyZXR1cm4gY29udChhdHRyaWJ1dGVzLCBlbmR0YWcoY3VyU3RhdGUuc3RhcnRPZkxpbmUpKTtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT0gXCJjbG9zZVRhZ1wiKSB7XG5cdFx0XHR2YXIgZXJyID0gZmFsc2U7XG5cdFx0XHRpZiAoY3VyU3RhdGUuY29udGV4dCkge1xuXHRcdFx0XHRpZiAoY3VyU3RhdGUuY29udGV4dC50YWdOYW1lICE9IHRhZ05hbWUpIHtcblx0XHRcdFx0XHRpZiAoS2x1ZGdlcy5pbXBsaWNpdGx5Q2xvc2VkLmhhc093blByb3BlcnR5KGN1clN0YXRlLmNvbnRleHQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuXHRcdFx0XHRcdFx0cG9wQ29udGV4dCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlcnIgPSAhY3VyU3RhdGUuY29udGV4dCB8fCBjdXJTdGF0ZS5jb250ZXh0LnRhZ05hbWUgIT0gdGFnTmFtZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZXJyID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGVycilcblx0XHRcdFx0c2V0U3R5bGUgPSBcImVycm9yXCI7XG5cdFx0XHRyZXR1cm4gY29udChlbmRjbG9zZXRhZyhlcnIpKTtcblx0XHR9XG5cdFx0cmV0dXJuIGNvbnQoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGVuZHRhZyhzdGFydE9mTGluZSkge1xuXHRcdHJldHVybiBmdW5jdGlvbih0eXBlKSB7XG5cdFx0XHRpZiAodHlwZSA9PSBcInNlbGZjbG9zZVRhZ1wiXG5cdFx0XHRcdFx0fHwgKHR5cGUgPT0gXCJlbmRUYWdcIiAmJiBLbHVkZ2VzLmF1dG9TZWxmQ2xvc2Vyc1xuXHRcdFx0XHRcdFx0XHQuaGFzT3duUHJvcGVydHkoY3VyU3RhdGUudGFnTmFtZVxuXHRcdFx0XHRcdFx0XHRcdFx0LnRvTG93ZXJDYXNlKCkpKSkge1xuXHRcdFx0XHRtYXliZVBvcENvbnRleHQoY3VyU3RhdGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKTtcblx0XHRcdFx0cmV0dXJuIGNvbnQoKTtcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlID09IFwiZW5kVGFnXCIpIHtcblx0XHRcdFx0bWF5YmVQb3BDb250ZXh0KGN1clN0YXRlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSk7XG5cdFx0XHRcdHB1c2hDb250ZXh0KGN1clN0YXRlLnRhZ05hbWUsIHN0YXJ0T2ZMaW5lKTtcblx0XHRcdFx0cmV0dXJuIGNvbnQoKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBjb250KCk7XG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGVuZGNsb3NldGFnKGVycikge1xuXHRcdHJldHVybiBmdW5jdGlvbih0eXBlKSB7XG5cdFx0XHRpZiAoZXJyKVxuXHRcdFx0XHRzZXRTdHlsZSA9IFwiZXJyb3JcIjtcblx0XHRcdGlmICh0eXBlID09IFwiZW5kVGFnXCIpIHtcblx0XHRcdFx0cG9wQ29udGV4dCgpO1xuXHRcdFx0XHRyZXR1cm4gY29udCgpO1xuXHRcdFx0fVxuXHRcdFx0c2V0U3R5bGUgPSBcImVycm9yXCI7XG5cdFx0XHRyZXR1cm4gY29udChhcmd1bWVudHMuY2FsbGVlKTtcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gbWF5YmVQb3BDb250ZXh0KG5leHRUYWdOYW1lKSB7XG5cdFx0dmFyIHBhcmVudFRhZ05hbWU7XG5cdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdGlmICghY3VyU3RhdGUuY29udGV4dCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRwYXJlbnRUYWdOYW1lID0gY3VyU3RhdGUuY29udGV4dC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRpZiAoIUtsdWRnZXMuY29udGV4dEdyYWJiZXJzLmhhc093blByb3BlcnR5KHBhcmVudFRhZ05hbWUpXG5cdFx0XHRcdFx0fHwgIUtsdWRnZXMuY29udGV4dEdyYWJiZXJzW3BhcmVudFRhZ05hbWVdLmhhc093blByb3BlcnR5KG5leHRUYWdOYW1lKSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRwb3BDb250ZXh0KCk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gYXR0cmlidXRlcyh0eXBlKSB7XG5cdFx0aWYgKHR5cGUgPT0gXCJ3b3JkXCIpIHtcblx0XHRcdHNldFN0eWxlID0gXCJhdHRyaWJ1dGVcIjtcblx0XHRcdHJldHVybiBjb250KGF0dHJpYnV0ZSwgYXR0cmlidXRlcyk7XG5cdFx0fVxuXHRcdGlmICh0eXBlID09IFwiZW5kVGFnXCIgfHwgdHlwZSA9PSBcInNlbGZjbG9zZVRhZ1wiKVxuXHRcdFx0cmV0dXJuIHBhc3MoKTtcblx0XHRzZXRTdHlsZSA9IFwiZXJyb3JcIjtcblx0XHRyZXR1cm4gY29udChhdHRyaWJ1dGVzKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0dHJpYnV0ZSh0eXBlKSB7XG5cdFx0aWYgKHR5cGUgPT0gXCJlcXVhbHNcIilcblx0XHRcdHJldHVybiBjb250KGF0dHZhbHVlLCBhdHRyaWJ1dGVzKTtcblx0XHRpZiAoIUtsdWRnZXMuYWxsb3dNaXNzaW5nKVxuXHRcdFx0c2V0U3R5bGUgPSBcImVycm9yXCI7XG5cdFx0cmV0dXJuICh0eXBlID09IFwiZW5kVGFnXCIgfHwgdHlwZSA9PSBcInNlbGZjbG9zZVRhZ1wiKSA/IHBhc3MoKVxuXHRcdFx0XHQ6IGNvbnQoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0dHZhbHVlKHR5cGUpIHtcblx0XHRpZiAodHlwZSA9PSBcInN0cmluZ1wiKVxuXHRcdFx0cmV0dXJuIGNvbnQoYXR0dmFsdWVtYXliZSk7XG5cdFx0aWYgKHR5cGUgPT0gXCJ3b3JkXCIgJiYgS2x1ZGdlcy5hbGxvd1VucXVvdGVkKSB7XG5cdFx0XHRzZXRTdHlsZSA9IFwic3RyaW5nXCI7XG5cdFx0XHRyZXR1cm4gY29udCgpO1xuXHRcdH1cblx0XHRzZXRTdHlsZSA9IFwiZXJyb3JcIjtcblx0XHRyZXR1cm4gKHR5cGUgPT0gXCJlbmRUYWdcIiB8fCB0eXBlID09IFwic2VsZkNsb3NlVGFnXCIpID8gcGFzcygpXG5cdFx0XHRcdDogY29udCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXR0dmFsdWVtYXliZSh0eXBlKSB7XG5cdFx0aWYgKHR5cGUgPT0gXCJzdHJpbmdcIilcblx0XHRcdHJldHVybiBjb250KGF0dHZhbHVlbWF5YmUpO1xuXHRcdGVsc2Vcblx0XHRcdHJldHVybiBwYXNzKCk7XG5cdH1cblxuXHRmdW5jdGlvbiBzdGFydFN0YXRlKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b2tlbml6ZSA6IGluVGV4dCxcblx0XHRcdGNjIDogW10sXG5cdFx0XHRpbmRlbnRlZCA6IDAsXG5cdFx0XHRzdGFydE9mTGluZSA6IHRydWUsXG5cdFx0XHR0YWdOYW1lIDogbnVsbCxcblx0XHRcdGNvbnRleHQgOiBudWxsXG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRva2VuKHN0cmVhbSwgc3RhdGUpIHtcblx0XHRpZiAoc3RyZWFtLnNvbCgpKSB7XG5cdFx0XHRzdGF0ZS5zdGFydE9mTGluZSA9IHRydWU7XG5cdFx0XHRzdGF0ZS5pbmRlbnRlZCA9IDA7XG5cdFx0fVxuXG5cdFx0aWYgKHN0cmVhbS5lYXRTcGFjZSgpKVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRzZXRTdHlsZSA9IHR5cGUgPSB0YWdOYW1lID0gbnVsbDtcblx0XHR2YXIgc3R5bGUgPSBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcblx0XHRzdGF0ZS50eXBlID0gdHlwZTtcblx0XHRpZiAoKHN0eWxlIHx8IHR5cGUpICYmIHN0eWxlICE9IFwiY29tbWVudFwiKSB7XG5cdFx0XHRjdXJTdGF0ZSA9IHN0YXRlO1xuXHRcdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdFx0dmFyIGNvbWIgPSBzdGF0ZS5jYy5wb3AoKSB8fCBlbGVtZW50O1xuXHRcdFx0XHRpZiAoY29tYih0eXBlIHx8IHN0eWxlKSlcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0c3RhdGUuc3RhcnRPZkxpbmUgPSBmYWxzZTtcblx0XHRyZXR1cm4gc2V0U3R5bGUgfHwgc3R5bGU7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdC8qKlxuXHRcdCAqIEBtZW1iZXJPZiBlbW1ldC54bWxQYXJzZXJcblx0XHQgKiBAcmV0dXJuc1xuXHRcdCAqL1xuXHRcdHBhcnNlOiBmdW5jdGlvbihkYXRhLCBvZmZzZXQpIHtcblx0XHRcdG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXHRcdFx0dmFyIHN0YXRlID0gc3RhcnRTdGF0ZSgpO1xuXHRcdFx0dmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmluZ1N0cmVhbScpLmNyZWF0ZShkYXRhKTtcblx0XHRcdHZhciB0b2tlbnMgPSBbXTtcblx0XHRcdHdoaWxlICghc3RyZWFtLmVvbCgpKSB7XG5cdFx0XHRcdHRva2Vucy5wdXNoKHtcblx0XHRcdFx0XHR0eXBlOiB0b2tlbihzdHJlYW0sIHN0YXRlKSxcblx0XHRcdFx0XHRzdGFydDogc3RyZWFtLnN0YXJ0ICsgb2Zmc2V0LFxuXHRcdFx0XHRcdGVuZDogc3RyZWFtLnBvcyArIG9mZnNldFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRva2Vucztcblx0XHR9XG5cdH07XG59KTtcbi8qIVxuICogc3RyaW5nX3Njb3JlLmpzOiBTdHJpbmcgU2NvcmluZyBBbGdvcml0aG0gMC4xLjEwXG4gKlxuICogaHR0cDovL2pvc2hhdmVuLmNvbS9zdHJpbmdfc2NvcmVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qb3NoYXZlbi9zdHJpbmdfc2NvcmVcbiAqXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDktMjAxMSBKb3NoYXZlbiBQb3R0ZXIgPHlvdXJ0ZWNoQGdtYWlsLmNvbT5cbiAqIFNwZWNpYWwgdGhhbmtzIHRvIGFsbCBvZiB0aGUgY29udHJpYnV0b3JzIGxpc3RlZCBoZXJlIGh0dHBzOi8vZ2l0aHViLmNvbS9qb3NoYXZlbi9zdHJpbmdfc2NvcmVcbiAqIE1JVCBsaWNlbnNlOiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICpcbiAqIERhdGU6IFR1ZSBNYXIgMSAyMDExXG4qL1xuXG4vKipcbiAqIFNjb3JlcyBhIHN0cmluZyBhZ2FpbnN0IGFub3RoZXIgc3RyaW5nLlxuICogICdIZWxsbyBXb3JsZCcuc2NvcmUoJ2hlJyk7ICAgICAvLz0+IDAuNTkzMTgxODE4MTgxODE4MVxuICogICdIZWxsbyBXb3JsZCcuc2NvcmUoJ0hlbGxvJyk7ICAvLz0+IDAuNzMxODE4MTgxODE4MTgxOFxuICovXG5lbW1ldC5kZWZpbmUoJ3N0cmluZy1zY29yZScsIGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0cmV0dXJuIHtcblx0XHRzY29yZTogZnVuY3Rpb24oc3RyaW5nLCBhYmJyZXZpYXRpb24sIGZ1enppbmVzcykge1xuXHRcdFx0Ly8gSWYgdGhlIHN0cmluZyBpcyBlcXVhbCB0byB0aGUgYWJicmV2aWF0aW9uLCBwZXJmZWN0IG1hdGNoLlxuXHRcdFx0ICBpZiAoc3RyaW5nID09IGFiYnJldmlhdGlvbikge3JldHVybiAxO31cblx0XHRcdCAgLy9pZiBpdCdzIG5vdCBhIHBlcmZlY3QgbWF0Y2ggYW5kIGlzIGVtcHR5IHJldHVybiAwXG5cdFx0XHQgIGlmKGFiYnJldmlhdGlvbiA9PSBcIlwiKSB7cmV0dXJuIDA7fVxuXG5cdFx0XHQgIHZhciB0b3RhbF9jaGFyYWN0ZXJfc2NvcmUgPSAwLFxuXHRcdFx0ICAgICAgYWJicmV2aWF0aW9uX2xlbmd0aCA9IGFiYnJldmlhdGlvbi5sZW5ndGgsXG5cdFx0XHQgICAgICBzdHJpbmdfbGVuZ3RoID0gc3RyaW5nLmxlbmd0aCxcblx0XHRcdCAgICAgIHN0YXJ0X29mX3N0cmluZ19ib251cyxcblx0XHRcdCAgICAgIGFiYnJldmlhdGlvbl9zY29yZSxcblx0XHRcdCAgICAgIGZ1enppZXM9MSxcblx0XHRcdCAgICAgIGZpbmFsX3Njb3JlO1xuXG5cdFx0XHQgIC8vIFdhbGsgdGhyb3VnaCBhYmJyZXZpYXRpb24gYW5kIGFkZCB1cCBzY29yZXMuXG5cdFx0XHQgIGZvciAodmFyIGkgPSAwLFxuXHRcdFx0ICAgICAgICAgY2hhcmFjdGVyX3Njb3JlLyogPSAwKi8sXG5cdFx0XHQgICAgICAgICBpbmRleF9pbl9zdHJpbmcvKiA9IDAqLyxcblx0XHRcdCAgICAgICAgIGMvKiA9ICcnKi8sXG5cdFx0XHQgICAgICAgICBpbmRleF9jX2xvd2VyY2FzZS8qID0gMCovLFxuXHRcdFx0ICAgICAgICAgaW5kZXhfY191cHBlcmNhc2UvKiA9IDAqLyxcblx0XHRcdCAgICAgICAgIG1pbl9pbmRleC8qID0gMCovO1xuXHRcdFx0ICAgICBpIDwgYWJicmV2aWF0aW9uX2xlbmd0aDtcblx0XHRcdCAgICAgKytpKSB7XG5cblx0XHRcdCAgICAvLyBGaW5kIHRoZSBmaXJzdCBjYXNlLWluc2Vuc2l0aXZlIG1hdGNoIG9mIGEgY2hhcmFjdGVyLlxuXHRcdFx0ICAgIGMgPSBhYmJyZXZpYXRpb24uY2hhckF0KGkpO1xuXG5cdFx0XHQgICAgaW5kZXhfY19sb3dlcmNhc2UgPSBzdHJpbmcuaW5kZXhPZihjLnRvTG93ZXJDYXNlKCkpO1xuXHRcdFx0ICAgIGluZGV4X2NfdXBwZXJjYXNlID0gc3RyaW5nLmluZGV4T2YoYy50b1VwcGVyQ2FzZSgpKTtcblx0XHRcdCAgICBtaW5faW5kZXggPSBNYXRoLm1pbihpbmRleF9jX2xvd2VyY2FzZSwgaW5kZXhfY191cHBlcmNhc2UpO1xuXHRcdFx0ICAgIGluZGV4X2luX3N0cmluZyA9IChtaW5faW5kZXggPiAtMSkgPyBtaW5faW5kZXggOiBNYXRoLm1heChpbmRleF9jX2xvd2VyY2FzZSwgaW5kZXhfY191cHBlcmNhc2UpO1xuXG5cdFx0XHQgICAgaWYgKGluZGV4X2luX3N0cmluZyA9PT0gLTEpIHtcblx0XHRcdCAgICAgIGlmIChmdXp6aW5lc3MpIHtcblx0XHRcdCAgICAgICAgZnV6emllcyArPSAxLWZ1enppbmVzcztcblx0XHRcdCAgICAgICAgY29udGludWU7XG5cdFx0XHQgICAgICB9IGVsc2Uge1xuXHRcdFx0ICAgICAgICByZXR1cm4gMDtcblx0XHRcdCAgICAgIH1cblx0XHRcdCAgICB9IGVsc2Uge1xuXHRcdFx0ICAgICAgY2hhcmFjdGVyX3Njb3JlID0gMC4xO1xuXHRcdFx0ICAgIH1cblxuXHRcdFx0ICAgIC8vIFNldCBiYXNlIHNjb3JlIGZvciBtYXRjaGluZyAnYycuXG5cblx0XHRcdCAgICAvLyBTYW1lIGNhc2UgYm9udXMuXG5cdFx0XHQgICAgaWYgKHN0cmluZ1tpbmRleF9pbl9zdHJpbmddID09PSBjKSB7XG5cdFx0XHQgICAgICBjaGFyYWN0ZXJfc2NvcmUgKz0gMC4xO1xuXHRcdFx0ICAgIH1cblxuXHRcdFx0ICAgIC8vIENvbnNlY3V0aXZlIGxldHRlciAmIHN0YXJ0LW9mLXN0cmluZyBCb251c1xuXHRcdFx0ICAgIGlmIChpbmRleF9pbl9zdHJpbmcgPT09IDApIHtcblx0XHRcdCAgICAgIC8vIEluY3JlYXNlIHRoZSBzY29yZSB3aGVuIG1hdGNoaW5nIGZpcnN0IGNoYXJhY3RlciBvZiB0aGUgcmVtYWluZGVyIG9mIHRoZSBzdHJpbmdcblx0XHRcdCAgICAgIGNoYXJhY3Rlcl9zY29yZSArPSAwLjY7XG5cdFx0XHQgICAgICBpZiAoaSA9PT0gMCkge1xuXHRcdFx0ICAgICAgICAvLyBJZiBtYXRjaCBpcyB0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIHRoZSBzdHJpbmdcblx0XHRcdCAgICAgICAgLy8gJiB0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGFiYnJldmlhdGlvbiwgYWRkIGFcblx0XHRcdCAgICAgICAgLy8gc3RhcnQtb2Ytc3RyaW5nIG1hdGNoIGJvbnVzLlxuXHRcdFx0ICAgICAgICBzdGFydF9vZl9zdHJpbmdfYm9udXMgPSAxOyAvL3RydWU7XG5cdFx0XHQgICAgICB9XG5cdFx0XHQgICAgfVxuXHRcdFx0ICAgIGVsc2Uge1xuXHRcdFx0ICAvLyBBY3JvbnltIEJvbnVzXG5cdFx0XHQgIC8vIFdlaWdoaW5nIExvZ2ljOiBUeXBpbmcgdGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhbiBhY3JvbnltIGlzIGFzIGlmIHlvdVxuXHRcdFx0ICAvLyBwcmVjZWRlZCBpdCB3aXRoIHR3byBwZXJmZWN0IGNoYXJhY3RlciBtYXRjaGVzLlxuXHRcdFx0ICBpZiAoc3RyaW5nLmNoYXJBdChpbmRleF9pbl9zdHJpbmcgLSAxKSA9PT0gJyAnKSB7XG5cdFx0XHQgICAgY2hhcmFjdGVyX3Njb3JlICs9IDAuODsgLy8gKiBNYXRoLm1pbihpbmRleF9pbl9zdHJpbmcsIDUpOyAvLyBDYXAgYm9udXMgYXQgMC40ICogNVxuXHRcdFx0ICB9XG5cdFx0XHQgICAgfVxuXG5cdFx0XHQgICAgLy8gTGVmdCB0cmltIHRoZSBhbHJlYWR5IG1hdGNoZWQgcGFydCBvZiB0aGUgc3RyaW5nXG5cdFx0XHQgICAgLy8gKGZvcmNlcyBzZXF1ZW50aWFsIG1hdGNoaW5nKS5cblx0XHRcdCAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKGluZGV4X2luX3N0cmluZyArIDEsIHN0cmluZ19sZW5ndGgpO1xuXG5cdFx0XHQgICAgdG90YWxfY2hhcmFjdGVyX3Njb3JlICs9IGNoYXJhY3Rlcl9zY29yZTtcblx0XHRcdCAgfSAvLyBlbmQgb2YgZm9yIGxvb3BcblxuXHRcdFx0ICAvLyBVbmNvbW1lbnQgdG8gd2VpZ2ggc21hbGxlciB3b3JkcyBoaWdoZXIuXG5cdFx0XHQgIC8vIHJldHVybiB0b3RhbF9jaGFyYWN0ZXJfc2NvcmUgLyBzdHJpbmdfbGVuZ3RoO1xuXG5cdFx0XHQgIGFiYnJldmlhdGlvbl9zY29yZSA9IHRvdGFsX2NoYXJhY3Rlcl9zY29yZSAvIGFiYnJldmlhdGlvbl9sZW5ndGg7XG5cdFx0XHQgIC8vcGVyY2VudGFnZV9vZl9tYXRjaGVkX3N0cmluZyA9IGFiYnJldmlhdGlvbl9sZW5ndGggLyBzdHJpbmdfbGVuZ3RoO1xuXHRcdFx0ICAvL3dvcmRfc2NvcmUgPSBhYmJyZXZpYXRpb25fc2NvcmUgKiBwZXJjZW50YWdlX29mX21hdGNoZWRfc3RyaW5nO1xuXG5cdFx0XHQgIC8vIFJlZHVjZSBwZW5hbHR5IGZvciBsb25nZXIgc3RyaW5ncy5cblx0XHRcdCAgLy9maW5hbF9zY29yZSA9ICh3b3JkX3Njb3JlICsgYWJicmV2aWF0aW9uX3Njb3JlKSAvIDI7XG5cdFx0XHQgIGZpbmFsX3Njb3JlID0gKChhYmJyZXZpYXRpb25fc2NvcmUgKiAoYWJicmV2aWF0aW9uX2xlbmd0aCAvIHN0cmluZ19sZW5ndGgpKSArIGFiYnJldmlhdGlvbl9zY29yZSkgLyAyO1xuXG5cdFx0XHQgIGZpbmFsX3Njb3JlID0gZmluYWxfc2NvcmUgLyBmdXp6aWVzO1xuXG5cdFx0XHQgIGlmIChzdGFydF9vZl9zdHJpbmdfYm9udXMgJiYgKGZpbmFsX3Njb3JlICsgMC4xNSA8IDEpKSB7XG5cdFx0XHQgICAgZmluYWxfc2NvcmUgKz0gMC4xNTtcblx0XHRcdCAgfVxuXG5cdFx0XHQgIHJldHVybiBmaW5hbF9zY29yZTtcblx0XHR9XG5cdH07XG59KTsvKipcbiAqIFV0aWxpdHkgbW9kdWxlIGZvciBFbW1ldFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmRlZmluZSgndXRpbHMnLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdC8qKlxuXHQgKiBTcGVjaWFsIHRva2VuIHVzZWQgYXMgYSBwbGFjZWhvbGRlciBmb3IgY2FyZXQgcG9zaXRpb25zIGluc2lkZVxuXHQgKiBnZW5lcmF0ZWQgb3V0cHV0XG5cdCAqL1xuXHR2YXIgY2FyZXRQbGFjZWhvbGRlciA9ICckezB9JztcblxuXHQvKipcblx0ICogQSBzaW1wbGUgc3RyaW5nIGJ1aWxkZXIsIG9wdGltaXplZCBmb3IgZmFzdGVyIHRleHQgY29uY2F0ZW5hdGlvblxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgSW5pdGlhbCB2YWx1ZVxuXHQgKi9cblx0ZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkge1xuXHRcdHRoaXMuX2RhdGEgPSBbXTtcblx0XHR0aGlzLmxlbmd0aCA9IDA7XG5cblx0XHRpZiAodmFsdWUpXG5cdFx0XHR0aGlzLmFwcGVuZCh2YWx1ZSk7XG5cdH1cblxuXHRTdHJpbmdCdWlsZGVyLnByb3RvdHlwZSA9IHtcblx0XHQvKipcblx0XHQgKiBBcHBlbmQgc3RyaW5nXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0XHQgKi9cblx0XHRhcHBlbmQ6IGZ1bmN0aW9uKHRleHQpIHtcblx0XHRcdHRoaXMuX2RhdGEucHVzaCh0ZXh0KTtcblx0XHRcdHRoaXMubGVuZ3RoICs9IHRleHQubGVuZ3RoO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLl9kYXRhLmpvaW4oJycpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdHZhbHVlT2Y6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMudG9TdHJpbmcoKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHQvKiogQG1lbWJlck9mIHV0aWxzICovXG5cdFx0cmVUYWc6IC88XFwvP1tcXHc6XFwtXSsoPzpcXHMrW1xcd1xcLTpdKyg/Olxccyo9XFxzKig/Oig/OlwiW15cIl0qXCIpfCg/OidbXiddKicpfFtePlxcc10rKSk/KSpcXHMqKFxcLz8pPiQvLFxuXG5cdFx0LyoqXG5cdFx0ICogVGVzdCBpZiBwYXNzZWQgc3RyaW5nIGVuZHMgd2l0aCBYSFRNTCB0YWcuIFRoaXMgbWV0aG9kIGlzIHVzZWQgZm9yIHRlc3Rpbmdcblx0XHQgKiAnPicgY2hhcmFjdGVyOiBpdCBiZWxvbmdzIHRvIHRhZyBvciBpdCdzIGEgcGFydCBvZiBhYmJyZXZpYXRpb24/XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0ZW5kc1dpdGhUYWc6IGZ1bmN0aW9uKHN0cikge1xuXHRcdFx0cmV0dXJuIHRoaXMucmVUYWcudGVzdChzdHIpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDaGVjayBpZiBwYXNzZWQgc3ltYm9sIGlzIGEgbnVtYmVyXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGNoXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aXNOdW1lcmljOiBmdW5jdGlvbihjaCkge1xuXHRcdFx0aWYgKHR5cGVvZihjaCkgPT0gJ3N0cmluZycpXG5cdFx0XHRcdGNoID0gY2guY2hhckNvZGVBdCgwKTtcblxuXHRcdFx0cmV0dXJuIChjaCAmJiBjaCA+IDQ3ICYmIGNoIDwgNTgpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBUcmltIHdoaXRlc3BhY2UgZnJvbSBzdHJpbmdcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHR0cmltOiBmdW5jdGlvbih0ZXh0KSB7XG5cdFx0XHRyZXR1cm4gKHRleHQgfHwgXCJcIikucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgXCJcIik7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgbmV3bGluZSBjaGFyYWN0ZXJcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGdldE5ld2xpbmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHJlcyA9IHJlcXVpcmUoJ3Jlc291cmNlcycpO1xuXHRcdFx0aWYgKCFyZXMpIHtcblx0XHRcdFx0cmV0dXJuICdcXG4nO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgbmwgPSByZXMuZ2V0VmFyaWFibGUoJ25ld2xpbmUnKTtcblx0XHRcdHJldHVybiBfLmlzU3RyaW5nKG5sKSA/IG5sIDogJ1xcbic7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFNldHMgbmV3IG5ld2xpbmUgY2hhcmFjdGVyIHRoYXQgd2lsbCBiZSB1c2VkIGluIG91dHB1dFxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0XHQgKi9cblx0XHRzZXROZXdsaW5lOiBmdW5jdGlvbihzdHIpIHtcblx0XHRcdHZhciByZXMgPSByZXF1aXJlKCdyZXNvdXJjZXMnKTtcblx0XHRcdHJlcy5zZXRWYXJpYWJsZSgnbmV3bGluZScsIHN0cik7XG5cdFx0XHRyZXMuc2V0VmFyaWFibGUoJ25sJywgc3RyKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU3BsaXQgdGV4dCBpbnRvIGxpbmVzLiBTZXQgPGNvZGU+cmVtb3ZlX2VtcHR5PC9jb2RlPiB0byB0cnVlIHRvIGZpbHRlclxuXHRcdCAqIGVtcHR5IGxpbmVzXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGV4dCB0byBzcGxpdFxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlRW1wdHkgUmVtb3ZlIGVtcHR5IGxpbmVzIGZyb20gcmVzdWx0XG5cdFx0ICogQHJldHVybiB7QXJyYXl9XG5cdFx0ICovXG5cdFx0c3BsaXRCeUxpbmVzOiBmdW5jdGlvbih0ZXh0LCByZW1vdmVFbXB0eSkge1xuXHRcdFx0Ly8gSUUgZmFpbHMgdG8gc3BsaXQgc3RyaW5nIGJ5IHJlZ2V4cCxcblx0XHRcdC8vIG5lZWQgdG8gbm9ybWFsaXplIG5ld2xpbmVzIGZpcnN0XG5cdFx0XHQvLyBBbHNvLCBNb3ppbGxhJ3MgUmhpaG8gSlMgZW5naW5lIGhhcyBhIHdlaXJkIG5ld2xpbmUgYnVnXG5cdFx0XHR2YXIgbmwgPSB0aGlzLmdldE5ld2xpbmUoKTtcblx0XHRcdHZhciBsaW5lcyA9ICh0ZXh0IHx8ICcnKVxuXHRcdFx0XHQucmVwbGFjZSgvXFxyXFxuL2csICdcXG4nKVxuXHRcdFx0XHQucmVwbGFjZSgvXFxuXFxyL2csICdcXG4nKVxuXHRcdFx0XHQucmVwbGFjZSgvXFxyL2csICdcXG4nKVxuXHRcdFx0XHQucmVwbGFjZSgvXFxuL2csIG5sKVxuXHRcdFx0XHQuc3BsaXQobmwpO1xuXG5cdFx0XHRpZiAocmVtb3ZlRW1wdHkpIHtcblx0XHRcdFx0bGluZXMgPSBfLmZpbHRlcihsaW5lcywgZnVuY3Rpb24obGluZSkge1xuXHRcdFx0XHRcdHJldHVybiBsaW5lLmxlbmd0aCAmJiAhIXRoaXMudHJpbShsaW5lKTtcblx0XHRcdFx0fSwgdGhpcyk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBsaW5lcztcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogTm9ybWFsaXplcyBuZXdsaW5lIGNoYXJhY3RlcjogcmVwbGFjZXMgbmV3bGluZXMgaW4gPGNvZGU+dGV4dDwvY29kZT5cblx0XHQgKiB3aXRoIG5ld2xpbmUgZGVmaW5lZCBpbiBwcmVmZXJlbmNlc1xuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRub3JtYWxpemVOZXdsaW5lOiBmdW5jdGlvbih0ZXh0KSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zcGxpdEJ5TGluZXModGV4dCkuam9pbih0aGlzLmdldE5ld2xpbmUoKSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlcGVhdHMgc3RyaW5nIDxjb2RlPmhvd01hbnk8L2NvZGU+IHRpbWVzXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBob3dfbWFueVxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHRyZXBlYXRTdHJpbmc6IGZ1bmN0aW9uKHN0ciwgaG93TWFueSkge1xuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xuXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGhvd01hbnk7IGkrKylcblx0XHRcdFx0cmVzdWx0LnB1c2goc3RyKTtcblxuXHRcdFx0cmV0dXJuIHJlc3VsdC5qb2luKCcnKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBsaXN0IG9mIHBhZGRpbmdzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gYWxpZ24gcGFzc2VkIHN0cmluZ1xuXHRcdCAqIEBwYXJhbSB7QXJyYXl9IHN0cmluZ3Ncblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdFx0ICovXG5cdFx0Z2V0U3RyaW5nc1BhZHM6IGZ1bmN0aW9uKHN0cmluZ3MpIHtcblx0XHRcdHZhciBsZW5ndGhzID0gXy5tYXAoc3RyaW5ncywgZnVuY3Rpb24ocykge1xuXHRcdFx0XHRyZXR1cm4gXy5pc1N0cmluZyhzKSA/IHMubGVuZ3RoIDogK3M7XG5cdFx0XHR9KTtcblxuXHRcdFx0dmFyIG1heCA9IF8ubWF4KGxlbmd0aHMpO1xuXHRcdFx0cmV0dXJuIF8ubWFwKGxlbmd0aHMsIGZ1bmN0aW9uKGwpIHtcblx0XHRcdFx0dmFyIHBhZCA9IG1heCAtIGw7XG5cdFx0XHRcdHJldHVybiBwYWQgPyB0aGlzLnJlcGVhdFN0cmluZygnICcsIHBhZCkgOiAnJztcblx0XHRcdH0sIHRoaXMpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBJbmRlbnRzIHRleHQgd2l0aCBwYWRkaW5nXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGV4dCB0byBpbmRlbnRcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gcGFkIFBhZGRpbmcgc2l6ZSAobnVtYmVyKSBvciBwYWRkaW5nIGl0c2VsZiAoc3RyaW5nKVxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHRwYWRTdHJpbmc6IGZ1bmN0aW9uKHRleHQsIHBhZCkge1xuXHRcdFx0dmFyIHBhZFN0ciA9IChfLmlzTnVtYmVyKHBhZCkpXG5cdFx0XHRcdD8gdGhpcy5yZXBlYXRTdHJpbmcocmVxdWlyZSgncmVzb3VyY2VzJykuZ2V0VmFyaWFibGUoJ2luZGVudGF0aW9uJykgfHwgJ1xcdCcsIHBhZClcblx0XHRcdFx0OiBwYWQ7XG5cblx0XHRcdHZhciByZXN1bHQgPSBbXTtcblxuXHRcdFx0dmFyIGxpbmVzID0gdGhpcy5zcGxpdEJ5TGluZXModGV4dCk7XG5cdFx0XHR2YXIgbmwgPSB0aGlzLmdldE5ld2xpbmUoKTtcblxuXHRcdFx0cmVzdWx0LnB1c2gobGluZXNbMF0pO1xuXHRcdFx0Zm9yICh2YXIgaiA9IDE7IGogPCBsaW5lcy5sZW5ndGg7IGorKylcblx0XHRcdFx0cmVzdWx0LnB1c2gobmwgKyBwYWRTdHIgKyBsaW5lc1tqXSk7XG5cblx0XHRcdHJldHVybiByZXN1bHQuam9pbignJyk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFBhZCBzdHJpbmcgd2l0aCB6ZXJvZXNcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFN0cmluZyB0byBwYWRcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gcGFkIERlc2lyZWQgc3RyaW5nIGxlbmd0aFxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHR6ZXJvUGFkU3RyaW5nOiBmdW5jdGlvbihzdHIsIHBhZCkge1xuXHRcdFx0dmFyIHBhZGRpbmcgPSAnJztcblx0XHRcdHZhciBpbCA9IHN0ci5sZW5ndGg7XG5cblx0XHRcdHdoaWxlIChwYWQgPiBpbCsrKSBwYWRkaW5nICs9ICcwJztcblx0XHRcdHJldHVybiBwYWRkaW5nICsgc3RyO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZW1vdmVzIHBhZGRpbmcgYXQgdGhlIGJlZ2lubmluZyBvZiBlYWNoIHRleHQncyBsaW5lXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gcGFkXG5cdFx0ICovXG5cdFx0dW5pbmRlbnRTdHJpbmc6IGZ1bmN0aW9uKHRleHQsIHBhZCkge1xuXHRcdFx0dmFyIGxpbmVzID0gdGhpcy5zcGxpdEJ5TGluZXModGV4dCk7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChsaW5lc1tpXS5zZWFyY2gocGFkKSA9PSAwKVxuXHRcdFx0XHRcdGxpbmVzW2ldID0gbGluZXNbaV0uc3Vic3RyKHBhZC5sZW5ndGgpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbGluZXMuam9pbih0aGlzLmdldE5ld2xpbmUoKSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlcGxhY2VzIHVuZXNjYXBlZCBzeW1ib2xzIGluIDxjb2RlPnN0cjwvY29kZT4uIEZvciBleGFtcGxlLCB0aGUgJyQnIHN5bWJvbFxuXHRcdCAqIHdpbGwgYmUgcmVwbGFjZWQgaW4gJ2l0ZW0kY291bnQnLCBidXQgbm90IGluICdpdGVtXFwkY291bnQnLlxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgT3JpZ2luYWwgc3RyaW5nXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bWJvbCBTeW1ib2wgdG8gcmVwbGFjZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSByZXBsYWNlIFN5bWJvbCByZXBsYWNlbWVudC4gTWlnaHQgYmUgYSBmdW5jdGlvbiB0aGF0XG5cdFx0ICogcmV0dXJucyBuZXcgdmFsdWVcblx0XHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0cmVwbGFjZVVuZXNjYXBlZFN5bWJvbDogZnVuY3Rpb24oc3RyLCBzeW1ib2wsIHJlcGxhY2UpIHtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdHZhciBpbCA9IHN0ci5sZW5ndGg7XG5cdFx0XHR2YXIgc2wgPSBzeW1ib2wubGVuZ3RoO1xuXHRcdFx0dmFyIG1hdGNoQ291bnQgPSAwO1xuXG5cdFx0XHR3aGlsZSAoaSA8IGlsKSB7XG5cdFx0XHRcdGlmIChzdHIuY2hhckF0KGkpID09ICdcXFxcJykge1xuXHRcdFx0XHRcdC8vIGVzY2FwZWQgc3ltYm9sLCBza2lwIG5leHQgY2hhcmFjdGVyXG5cdFx0XHRcdFx0aSArPSBzbCArIDE7XG5cdFx0XHRcdH0gZWxzZSBpZiAoc3RyLnN1YnN0cihpLCBzbCkgPT0gc3ltYm9sKSB7XG5cdFx0XHRcdFx0Ly8gaGF2ZSBtYXRjaFxuXHRcdFx0XHRcdHZhciBjdXJTbCA9IHNsO1xuXHRcdFx0XHRcdG1hdGNoQ291bnQrKztcblx0XHRcdFx0XHR2YXIgbmV3VmFsdWUgPSByZXBsYWNlO1xuXHRcdFx0XHRcdGlmIChfLmlzRnVuY3Rpb24ocmVwbGFjZSkpIHtcblx0XHRcdFx0XHRcdHZhciByZXBsYWNlRGF0YSA9IHJlcGxhY2Uoc3RyLCBzeW1ib2wsIGksIG1hdGNoQ291bnQpO1xuXHRcdFx0XHRcdFx0aWYgKHJlcGxhY2VEYXRhKSB7XG5cdFx0XHRcdFx0XHRcdGN1clNsID0gcmVwbGFjZURhdGFbMF0ubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHRuZXdWYWx1ZSA9IHJlcGxhY2VEYXRhWzFdO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0bmV3VmFsdWUgPSBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAobmV3VmFsdWUgPT09IGZhbHNlKSB7IC8vIHNraXAgcmVwbGFjZW1lbnRcblx0XHRcdFx0XHRcdGkrKztcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgaSkgKyBuZXdWYWx1ZSArIHN0ci5zdWJzdHJpbmcoaSArIGN1clNsKTtcblx0XHRcdFx0XHQvLyBhZGp1c3QgaW5kZXhlc1xuXHRcdFx0XHRcdGlsID0gc3RyLmxlbmd0aDtcblx0XHRcdFx0XHRpICs9IG5ld1ZhbHVlLmxlbmd0aDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHN0cjtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVwbGFjZSB2YXJpYWJsZXMgbGlrZSAke3Zhcn0gaW4gc3RyaW5nXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSB2YXJzIFZhcmlhYmxlIHNldCAoZGVmYXVsdHMgdG8gdmFyaWFibGVzIGRlZmluZWQgaW5cblx0XHQgKiA8Y29kZT5zbmlwcGV0cy5qc29uPC9jb2RlPikgb3IgdmFyaWFibGUgcmVzb2x2ZXIgKDxjb2RlPkZ1bmN0aW9uPC9jb2RlPilcblx0XHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0cmVwbGFjZVZhcmlhYmxlczogZnVuY3Rpb24oc3RyLCB2YXJzKSB7XG5cdFx0XHR2YXJzID0gdmFycyB8fCB7fTtcblx0XHRcdHZhciByZXNvbHZlciA9IF8uaXNGdW5jdGlvbih2YXJzKSA/IHZhcnMgOiBmdW5jdGlvbihzdHIsIHAxKSB7XG5cdFx0XHRcdHJldHVybiBwMSBpbiB2YXJzID8gdmFyc1twMV0gOiBudWxsO1xuXHRcdFx0fTtcblxuXHRcdFx0dmFyIHJlcyA9IHJlcXVpcmUoJ3Jlc291cmNlcycpO1xuXHRcdFx0cmV0dXJuIHJlcXVpcmUoJ3RhYlN0b3BzJykucHJvY2Vzc1RleHQoc3RyLCB7XG5cdFx0XHRcdHZhcmlhYmxlOiBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0dmFyIG5ld1ZhbHVlID0gcmVzb2x2ZXIoZGF0YS50b2tlbiwgZGF0YS5uYW1lLCBkYXRhKTtcblx0XHRcdFx0XHRpZiAobmV3VmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdC8vIHRyeSB0byBmaW5kIHZhcmlhYmxlIGluIHJlc291cmNlc1xuXHRcdFx0XHRcdFx0bmV3VmFsdWUgPSByZXMuZ2V0VmFyaWFibGUoZGF0YS5uYW1lKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAobmV3VmFsdWUgPT09IG51bGwgfHwgXy5pc1VuZGVmaW5lZChuZXdWYWx1ZSkpXG5cdFx0XHRcdFx0XHQvLyBub3RoaW5nIGZvdW5kLCByZXR1cm4gdG9rZW4gaXRzZWxmXG5cdFx0XHRcdFx0XHRuZXdWYWx1ZSA9IGRhdGEudG9rZW47XG5cdFx0XHRcdFx0cmV0dXJuIG5ld1ZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVwbGFjZXMgJyQnIGNoYXJhY3RlciBpbiBzdHJpbmcgYXNzdW1pbmcgaXQgbWlnaHQgYmUgZXNjYXBlZCB3aXRoICdcXCdcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFN0cmluZyB3aGVyZSBjaGFyYWN0ZXIgc2hvdWxkIGJlIHJlcGxhY2VkXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIE5ldyB2YWx1ZVxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHRyZXBsYWNlQ291bnRlcjogZnVuY3Rpb24oc3RyLCB2YWx1ZSwgdG90YWwpIHtcblx0XHRcdHZhciBzeW1ib2wgPSAnJCc7XG5cdFx0XHQvLyBpbiBjYXNlIHdlIHJlY2VpdmVkIHN0cmluZ3MgZnJvbSBKYXZhLCBjb252ZXJ0IHRoZSB0byBuYXRpdmUgc3RyaW5nc1xuXHRcdFx0c3RyID0gU3RyaW5nKHN0cik7XG5cdFx0XHR2YWx1ZSA9IFN0cmluZyh2YWx1ZSk7XG5cblx0XHRcdGlmICgvXlxcLT9cXGQrJC8udGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0dmFsdWUgPSArdmFsdWU7XG5cdFx0XHR9XG5cblx0XHRcdHZhciB0aGF0ID0gdGhpcztcblxuXHRcdFx0cmV0dXJuIHRoaXMucmVwbGFjZVVuZXNjYXBlZFN5bWJvbChzdHIsIHN5bWJvbCwgZnVuY3Rpb24oc3RyLCBzeW1ib2wsIHBvcywgbWF0Y2hOdW0pe1xuXHRcdFx0XHRpZiAoc3RyLmNoYXJBdChwb3MgKyAxKSA9PSAneycgfHwgdGhhdC5pc051bWVyaWMoc3RyLmNoYXJBdChwb3MgKyAxKSkgKSB7XG5cdFx0XHRcdFx0Ly8gaXQncyBhIHZhcmlhYmxlLCBza2lwIGl0XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gcmVwbGFjZSBzZXF1ZW5zZSBvZiAkIHN5bWJvbHMgd2l0aCBwYWRkZWQgbnVtYmVyXG5cdFx0XHRcdHZhciBqID0gcG9zICsgMTtcblx0XHRcdFx0d2hpbGUoc3RyLmNoYXJBdChqKSA9PSAnJCcgJiYgc3RyLmNoYXJBdChqICsgMSkgIT0gJ3snKSBqKys7XG5cdFx0XHRcdHZhciBwYWQgPSBqIC0gcG9zO1xuXG5cdFx0XHRcdC8vIGdldCBjb3VudGVyIGJhc2Vcblx0XHRcdFx0dmFyIGJhc2UgPSAwLCBkZWNyZW1lbnQgPSBmYWxzZSwgbTtcblx0XHRcdFx0aWYgKG0gPSBzdHIuc3Vic3RyKGopLm1hdGNoKC9eQChcXC0/KShcXGQqKS8pKSB7XG5cdFx0XHRcdFx0aiArPSBtWzBdLmxlbmd0aDtcblxuXHRcdFx0XHRcdGlmIChtWzFdKSB7XG5cdFx0XHRcdFx0XHRkZWNyZW1lbnQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJhc2UgPSBwYXJzZUludChtWzJdIHx8IDEpIC0gMTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChkZWNyZW1lbnQgJiYgdG90YWwgJiYgXy5pc051bWJlcih2YWx1ZSkpIHtcblx0XHRcdFx0XHR2YWx1ZSA9IHRvdGFsIC0gdmFsdWUgKyAxO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFsdWUgKz0gYmFzZTtcblxuXHRcdFx0XHRyZXR1cm4gW3N0ci5zdWJzdHJpbmcocG9zLCBqKSwgdGhhdC56ZXJvUGFkU3RyaW5nKHZhbHVlICsgJycsIHBhZCldO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIENoZWNrIGlmIHN0cmluZyBtYXRjaGVzIGFnYWluc3QgPGNvZGU+cmVUYWc8L2NvZGU+IHJlZ2V4cC4gVGhpc1xuXHRcdCAqIGZ1bmN0aW9uIG1heSBiZSB1c2VkIHRvIHRlc3QgaWYgcHJvdmlkZWQgc3RyaW5nIGNvbnRhaW5zIEhUTUwgdGFnc1xuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0XHQgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRtYXRjaGVzVGFnOiBmdW5jdGlvbihzdHIpIHtcblx0XHRcdHJldHVybiB0aGlzLnJlVGFnLnRlc3Qoc3RyIHx8ICcnKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogRXNjYXBlcyBzcGVjaWFsIGNoYXJhY3RlcnMgdXNlZCBpbiBFbW1ldCwgbGlrZSAnJCcsICd8JywgZXRjLlxuXHRcdCAqIFVzZSB0aGlzIG1ldGhvZCBiZWZvcmUgcGFzc2luZyB0byBhY3Rpb25zIGxpa2UgXCJXcmFwIHdpdGggQWJicmV2aWF0aW9uXCJcblx0XHQgKiB0byBtYWtlIHN1cmUgdGhhdCBleGlzdGluZyBzcGVjaWFsIGNoYXJhY3RlcnMgd29uJ3QgYmUgYWx0ZXJlZFxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdFx0ICogQHJldHVybiB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGVzY2FwZVRleHQ6IGZ1bmN0aW9uKHRleHQpIHtcblx0XHRcdHJldHVybiB0ZXh0LnJlcGxhY2UoLyhbXFwkXFxcXF0pL2csICdcXFxcJDEnKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVW5lc2NhcGVzIHNwZWNpYWwgY2hhcmFjdGVycyB1c2VkIGluIEVtbWV0LCBsaWtlICckJywgJ3wnLCBldGMuXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0XHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0dW5lc2NhcGVUZXh0OiBmdW5jdGlvbih0ZXh0KSB7XG5cdFx0XHRyZXR1cm4gdGV4dC5yZXBsYWNlKC9cXFxcKC4pL2csICckMScpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGNhcmV0IHBsYWNlaG9sZGVyXG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRnZXRDYXJldFBsYWNlaG9sZGVyOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBfLmlzRnVuY3Rpb24oY2FyZXRQbGFjZWhvbGRlcilcblx0XHRcdFx0PyBjYXJldFBsYWNlaG9sZGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcblx0XHRcdFx0OiBjYXJldFBsYWNlaG9sZGVyO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBTZXRzIG5ldyByZXByZXNlbnRhdGlvbiBmb3IgY2FyZXRzIGluIGdlbmVyYXRlZCBvdXRwdXRcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgTmV3IGNhcmV0IHBsYWNlaG9sZGVyLiBNaWdodCBiZSBhXG5cdFx0ICogPGNvZGU+RnVuY3Rpb248L2NvZGU+XG5cdFx0ICovXG5cdFx0c2V0Q2FyZXRQbGFjZWhvbGRlcjogZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdGNhcmV0UGxhY2Vob2xkZXIgPSB2YWx1ZTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBsaW5lIHBhZGRpbmdcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbGluZVxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHRnZXRMaW5lUGFkZGluZzogZnVuY3Rpb24obGluZSkge1xuXHRcdFx0cmV0dXJuIChsaW5lLm1hdGNoKC9eKFxccyspLykgfHwgWycnXSlbMF07XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgcGFkZGluZyBvZiBsaW5lIG9mIDxjb2RlPnBvczwvY29kZT5cblx0XHQgKiBwb3NpdGlvbiBpbiA8Y29kZT5jb250ZW50PC9jb2RlPlxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvc1xuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0Z2V0TGluZVBhZGRpbmdGcm9tUG9zaXRpb246IGZ1bmN0aW9uKGNvbnRlbnQsIHBvcykge1xuXHRcdFx0dmFyIGxpbmVSYW5nZSA9IHRoaXMuZmluZE5ld2xpbmVCb3VuZHMoY29udGVudCwgcG9zKTtcblx0XHRcdHJldHVybiB0aGlzLmdldExpbmVQYWRkaW5nKGxpbmVSYW5nZS5zdWJzdHJpbmcoY29udGVudCkpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBFc2NhcGUgc3BlY2lhbCByZWdleHAgY2hhcnMgaW4gc3RyaW5nLCBtYWtpbmcgaXQgdXNhYmxlIGZvciBjcmVhdGluZyBkeW5hbWljXG5cdFx0ICogcmVndWxhciBleHByZXNzaW9uc1xuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0XHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0ZXNjYXBlRm9yUmVnZXhwOiBmdW5jdGlvbihzdHIpIHtcblx0XHRcdHZhciBzcGVjaWFscyA9IG5ldyBSZWdFeHAoXCJbLiorP3woKVxcXFxbXFxcXF17fVxcXFxcXFxcXVwiLCBcImdcIik7IC8vIC4qKz98KClbXXt9XFxcblx0XHRcdHJldHVybiBzdHIucmVwbGFjZShzcGVjaWFscywgXCJcXFxcJCZcIik7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIE1ha2UgZGVjaW1hbCBudW1iZXIgbG9vayBnb29kOiBjb252ZXJ0IGl0IHRvIGZpeGVkIHByZWNpc2lvbiBlbmQgcmVtb3ZlXG5cdFx0ICogdHJhbGluZyB6ZXJvZXNcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gbnVtXG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IGZyYWNpb24gRnJhY3Rpb24gbnVtYmVycyAoZGVmYXVsdCBpcyAyKVxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHRwcmV0dGlmeU51bWJlcjogZnVuY3Rpb24obnVtLCBmcmFjdGlvbikge1xuXHRcdFx0cmV0dXJuIG51bS50b0ZpeGVkKHR5cGVvZiBmcmFjdGlvbiA9PSAndW5kZWZpbmVkJyA/IDIgOiBmcmFjdGlvbikucmVwbGFjZSgvXFwuPzArJC8sICcnKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQSBzaW1wbGUgbXV0YWJsZSBzdHJpbmcgc2hpbSwgb3B0aW1pemVkIGZvciBmYXN0ZXIgdGV4dCBjb25jYXRlbmF0aW9uXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIEluaXRpYWwgdmFsdWVcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nQnVpbGRlcn1cblx0XHQgKi9cblx0XHRzdHJpbmdCdWlsZGVyOiBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0cmV0dXJuIG5ldyBTdHJpbmdCdWlsZGVyKHZhbHVlKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVwbGFjZSBzdWJzdHJpbmcgb2YgPGNvZGU+c3RyPC9jb2RlPiB3aXRoIDxjb2RlPnZhbHVlPC9jb2RlPlxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgU3RyaW5nIHdoZXJlIHRvIHJlcGxhY2Ugc3Vic3RyaW5nXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIE5ldyBzdWJzdHJpbmcgdmFsdWVcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gc3RhcnQgU3RhcnQgaW5kZXggb2Ygc3Vic3RyaW5nIHRvIHJlcGxhY2UuIE1heSBhbHNvXG5cdFx0ICogYmUgYSA8Y29kZT5SYW5nZTwvY29kZT4gb2JqZWN0OiBpbiB0aGlzIGNhc2UsIHRoZSA8Y29kZT5lbmQ8L2NvZGU+XG5cdFx0ICogYXJndW1lbnQgaXMgbm90IHJlcXVpcmVkXG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IGVuZCBFbmQgaW5kZXggb2Ygc3Vic3RyaW5nIHRvIHJlcGxhY2UuIElmIG9tbWl0ZWQsXG5cdFx0ICogPGNvZGU+c3RhcnQ8L2NvZGU+IGFyZ3VtZW50IGlzIHVzZWRcblx0XHQgKi9cblx0XHRyZXBsYWNlU3Vic3RyaW5nOiBmdW5jdGlvbihzdHIsIHZhbHVlLCBzdGFydCwgZW5kKSB7XG5cdFx0XHRpZiAoXy5pc09iamVjdChzdGFydCkgJiYgJ2VuZCcgaW4gc3RhcnQpIHtcblx0XHRcdFx0ZW5kID0gc3RhcnQuZW5kO1xuXHRcdFx0XHRzdGFydCA9IHN0YXJ0LnN0YXJ0O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoXy5pc1N0cmluZyhlbmQpKVxuXHRcdFx0XHRlbmQgPSBzdGFydCArIGVuZC5sZW5ndGg7XG5cblx0XHRcdGlmIChfLmlzVW5kZWZpbmVkKGVuZCkpXG5cdFx0XHRcdGVuZCA9IHN0YXJ0O1xuXG5cdFx0XHRpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID4gc3RyLmxlbmd0aClcblx0XHRcdFx0cmV0dXJuIHN0cjtcblxuXHRcdFx0cmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgc3RhcnQpICsgdmFsdWUgKyBzdHIuc3Vic3RyaW5nKGVuZCk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIE5hcnJvd3MgZG93biB0ZXh0IHJhbmdlLCBhZGp1c3Rpbmcgc2VsZWN0aW9uIHRvIG5vbi1zcGFjZSBjaGFyYWN0ZXJzXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gc3RhcnQgU3RhcnRpbmcgcmFuZ2UgaW4gPGNvZGU+dGV4dDwvY29kZT4gd2hlcmVcblx0XHQgKiBzbGVjdGlvbiBzaG91bGQgYmUgYWRqdXN0ZWQuIENhbiBhbHNvIGJlIGFueSBvYmplY3QgdGhhdCBpcyBhY2NlcHRlZFxuXHRcdCAqIGJ5IDxjb2RlPlJhbmdlPC9jb2RlPiBjbGFzc1xuXHRcdCAqIEByZXR1cm4ge1JhbmdlfVxuXHRcdCAqL1xuXHRcdG5hcnJvd1RvTm9uU3BhY2U6IGZ1bmN0aW9uKHRleHQsIHN0YXJ0LCBlbmQpIHtcblx0XHRcdHZhciByYW5nZSA9IHJlcXVpcmUoJ3JhbmdlJykuY3JlYXRlKHN0YXJ0LCBlbmQpO1xuXG5cdFx0XHR2YXIgcmVTcGFjZSA9IC9bXFxzXFxuXFxyXFx1MDBhMF0vO1xuXHRcdFx0Ly8gbmFycm93IGRvd24gc2VsZWN0aW9uIHVudGlsIGZpcnN0IG5vbi1zcGFjZSBjaGFyYWN0ZXJcblx0XHRcdHdoaWxlIChyYW5nZS5zdGFydCA8IHJhbmdlLmVuZCkge1xuXHRcdFx0XHRpZiAoIXJlU3BhY2UudGVzdCh0ZXh0LmNoYXJBdChyYW5nZS5zdGFydCkpKVxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdHJhbmdlLnN0YXJ0Kys7XG5cdFx0XHR9XG5cblx0XHRcdHdoaWxlIChyYW5nZS5lbmQgPiByYW5nZS5zdGFydCkge1xuXHRcdFx0XHRyYW5nZS5lbmQtLTtcblx0XHRcdFx0aWYgKCFyZVNwYWNlLnRlc3QodGV4dC5jaGFyQXQocmFuZ2UuZW5kKSkpIHtcblx0XHRcdFx0XHRyYW5nZS5lbmQrKztcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcmFuZ2U7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEZpbmQgc3RhcnQgYW5kIGVuZCBpbmRleCBvZiB0ZXh0IGxpbmUgZm9yIDxjb2RlPmZyb208L2NvZGU+IGluZGV4XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gZnJvbVxuXHRcdCAqL1xuXHRcdGZpbmROZXdsaW5lQm91bmRzOiBmdW5jdGlvbih0ZXh0LCBmcm9tKSB7XG5cdFx0XHR2YXIgbGVuID0gdGV4dC5sZW5ndGgsXG5cdFx0XHRcdHN0YXJ0ID0gMCxcblx0XHRcdFx0ZW5kID0gbGVuIC0gMTtcblxuXHRcdFx0Ly8gc2VhcmNoIGxlZnRcblx0XHRcdGZvciAodmFyIGkgPSBmcm9tIC0gMTsgaSA+IDA7IGktLSkge1xuXHRcdFx0XHR2YXIgY2ggPSB0ZXh0LmNoYXJBdChpKTtcblx0XHRcdFx0aWYgKGNoID09ICdcXG4nIHx8IGNoID09ICdcXHInKSB7XG5cdFx0XHRcdFx0c3RhcnQgPSBpICsgMTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gc2VhcmNoIHJpZ2h0XG5cdFx0XHRmb3IgKHZhciBqID0gZnJvbTsgaiA8IGxlbjsgaisrKSB7XG5cdFx0XHRcdHZhciBjaCA9IHRleHQuY2hhckF0KGopO1xuXHRcdFx0XHRpZiAoY2ggPT0gJ1xcbicgfHwgY2ggPT0gJ1xccicpIHtcblx0XHRcdFx0XHRlbmQgPSBqO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXF1aXJlKCdyYW5nZScpLmNyZWF0ZShzdGFydCwgZW5kIC0gc3RhcnQpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBEZWVwIG1lcmdlIG9mIHR3byBvciBtb3JlIG9iamVjdHMuIFRha2VuIGZyb20galF1ZXJ5LmV4dGVuZCgpXG5cdFx0ICovXG5cdFx0ZGVlcE1lcmdlOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcblx0XHRcdFx0dGFyZ2V0ID0gYXJndW1lbnRzWzBdIHx8IHt9LFxuXHRcdFx0XHRpID0gMSxcblx0XHRcdFx0bGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcblxuXG5cdFx0XHQvLyBIYW5kbGUgY2FzZSB3aGVuIHRhcmdldCBpcyBhIHN0cmluZyBvciBzb21ldGhpbmcgKHBvc3NpYmxlIGluIGRlZXAgY29weSlcblx0XHRcdGlmICghXy5pc09iamVjdCh0YXJnZXQpICYmICFfLmlzRnVuY3Rpb24odGFyZ2V0KSkge1xuXHRcdFx0XHR0YXJnZXQgPSB7fTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0aWYgKCAob3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdKSAhPSBudWxsICkge1xuXHRcdFx0XHRcdC8vIEV4dGVuZCB0aGUgYmFzZSBvYmplY3Rcblx0XHRcdFx0XHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRcdFx0XHRzcmMgPSB0YXJnZXRbIG5hbWUgXTtcblx0XHRcdFx0XHRcdGNvcHkgPSBvcHRpb25zWyBuYW1lIF07XG5cblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0XHRcdGlmICggdGFyZ2V0ID09PSBjb3B5ICkge1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG5cdFx0XHRcdFx0XHRpZiAoIGNvcHkgJiYgKCBfLmlzT2JqZWN0KGNvcHkpIHx8IChjb3B5SXNBcnJheSA9IF8uaXNBcnJheShjb3B5KSkgKSApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBjb3B5SXNBcnJheSApIHtcblx0XHRcdFx0XHRcdFx0XHRjb3B5SXNBcnJheSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIF8uaXNBcnJheShzcmMpID8gc3JjIDogW107XG5cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBfLmlzT2JqZWN0KHNyYykgPyBzcmMgOiB7fTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuXHRcdFx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IHRoaXMuZGVlcE1lcmdlKGNsb25lLCBjb3B5ICk7XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGNvcHkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBjb3B5O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuXHRcdFx0cmV0dXJuIHRhcmdldDtcblx0XHR9XG5cdH07XG59KTtcbi8qKlxuICogSGVscGVyIG1vZHVsZSB0byB3b3JrIHdpdGggcmFuZ2VzXG4gKiBAY29uc3RydWN0b3JcbiAqIEBtZW1iZXJPZiBfX3JhbmdlRGVmaW5lXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZGVmaW5lKCdyYW5nZScsIGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0ZnVuY3Rpb24gY21wKGEsIGIsIG9wKSB7XG5cdFx0c3dpdGNoIChvcCkge1xuXHRcdFx0Y2FzZSAnZXEnOlxuXHRcdFx0Y2FzZSAnPT0nOlxuXHRcdFx0XHRyZXR1cm4gYSA9PT0gYjtcblx0XHRcdGNhc2UgJ2x0Jzpcblx0XHRcdGNhc2UgJzwnOlxuXHRcdFx0XHRyZXR1cm4gYSA8IGI7XG5cdFx0XHRjYXNlICdsdGUnOlxuXHRcdFx0Y2FzZSAnPD0nOlxuXHRcdFx0XHRyZXR1cm4gYSA8PSBiO1xuXHRcdFx0Y2FzZSAnZ3QnOlxuXHRcdFx0Y2FzZSAnPic6XG5cdFx0XHRcdHJldHVybiBhID4gYjtcblx0XHRcdGNhc2UgJ2d0ZSc6XG5cdFx0XHRjYXNlICc+PSc6XG5cdFx0XHRcdHJldHVybiBhID49IGI7XG5cdFx0fVxuXHR9XG5cblxuXHQvKipcblx0ICogQHR5cGUgUmFuZ2Vcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzdGFydFxuXHQgKiBAcGFyYW0ge051bWJlcn0gbGVuXG5cdCAqL1xuXHRmdW5jdGlvbiBSYW5nZShzdGFydCwgbGVuKSB7XG5cdFx0aWYgKF8uaXNPYmplY3Qoc3RhcnQpICYmICdzdGFydCcgaW4gc3RhcnQpIHtcblx0XHRcdC8vIGNyZWF0ZSByYW5nZSBmcm9tIG9iamVjdCBzdHViXG5cdFx0XHR0aGlzLnN0YXJ0ID0gTWF0aC5taW4oc3RhcnQuc3RhcnQsIHN0YXJ0LmVuZCk7XG5cdFx0XHR0aGlzLmVuZCA9IE1hdGgubWF4KHN0YXJ0LnN0YXJ0LCBzdGFydC5lbmQpO1xuXHRcdH0gZWxzZSBpZiAoXy5pc0FycmF5KHN0YXJ0KSkge1xuXHRcdFx0dGhpcy5zdGFydCA9IHN0YXJ0WzBdO1xuXHRcdFx0dGhpcy5lbmQgPSBzdGFydFsxXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bGVuID0gXy5pc1N0cmluZyhsZW4pID8gbGVuLmxlbmd0aCA6ICtsZW47XG5cdFx0XHR0aGlzLnN0YXJ0ID0gc3RhcnQ7XG5cdFx0XHR0aGlzLmVuZCA9IHN0YXJ0ICsgbGVuO1xuXHRcdH1cblx0fVxuXG5cdFJhbmdlLnByb3RvdHlwZSA9IHtcblx0XHRsZW5ndGg6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIE1hdGguYWJzKHRoaXMuZW5kIC0gdGhpcy5zdGFydCk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgPGNvZGU+dHJ1ZTwvY29kZT4gaWYgcGFzc2VkIHJhbmdlIGlzIGVxdWFscyB0byBjdXJyZW50IG9uZVxuXHRcdCAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0ZXF1YWw6IGZ1bmN0aW9uKHJhbmdlKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jbXAocmFuZ2UsICdlcScsICdlcScpO1xuLy9cdFx0XHRyZXR1cm4gdGhpcy5zdGFydCA9PT0gcmFuZ2Uuc3RhcnQgJiYgdGhpcy5lbmQgPT09IHJhbmdlLmVuZDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2hpZnRzIGluZGV4ZXMgcG9zaXRpb24gd2l0aCBwYXNzZWQgPGNvZGU+ZGVsYXQ8L2NvZGU+XG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IGRlbHRhXG5cdFx0ICogQHJldHVybnMge1JhbmdlfSByYW5nZSBpdHNlbGZcblx0XHQgKi9cblx0XHRzaGlmdDogZnVuY3Rpb24oZGVsdGEpIHtcblx0XHRcdHRoaXMuc3RhcnQgKz0gZGVsdGE7XG5cdFx0XHR0aGlzLmVuZCArPSBkZWx0YTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDaGVjayBpZiB0d28gcmFuZ2VzIGFyZSBvdmVybGFwcGVkXG5cdFx0ICogQHBhcmFtIHtSYW5nZX0gcmFuZ2Vcblx0XHQgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRvdmVybGFwOiBmdW5jdGlvbihyYW5nZSkge1xuXHRcdFx0cmV0dXJuIHJhbmdlLnN0YXJ0IDw9IHRoaXMuZW5kICYmIHJhbmdlLmVuZCA+PSB0aGlzLnN0YXJ0O1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBGaW5kcyBpbnRlcnNlY3Rpb24gb2YgdHdvIHJhbmdlc1xuXHRcdCAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlXG5cdFx0ICogQHJldHVybnMge1JhbmdlfSA8Y29kZT5udWxsPC9jb2RlPiBpZiByYW5nZXMgZG9lcyBub3Qgb3ZlcmxhcFxuXHRcdCAqL1xuXHRcdGludGVyc2VjdGlvbjogZnVuY3Rpb24ocmFuZ2UpIHtcblx0XHRcdGlmICh0aGlzLm92ZXJsYXAocmFuZ2UpKSB7XG5cdFx0XHRcdHZhciBzdGFydCA9IE1hdGgubWF4KHJhbmdlLnN0YXJ0LCB0aGlzLnN0YXJ0KTtcblx0XHRcdFx0dmFyIGVuZCA9IE1hdGgubWluKHJhbmdlLmVuZCwgdGhpcy5lbmQpO1xuXHRcdFx0XHRyZXR1cm4gbmV3IFJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHRoZSB1bmlvbiBvZiB0aGUgdGhvdyByYW5nZXMuXG5cdFx0ICogQHBhcmFtIHtSYW5nZX0gcmFuZ2Vcblx0XHQgKiBAcmV0dXJucyB7UmFuZ2V9IDxjb2RlPm51bGw8L2NvZGU+IGlmIHJhbmdlcyBhcmUgbm90IG92ZXJsYXBwZWRcblx0XHQgKi9cblx0XHR1bmlvbjogZnVuY3Rpb24ocmFuZ2UpIHtcblx0XHRcdGlmICh0aGlzLm92ZXJsYXAocmFuZ2UpKSB7XG5cdFx0XHRcdHZhciBzdGFydCA9IE1hdGgubWluKHJhbmdlLnN0YXJ0LCB0aGlzLnN0YXJ0KTtcblx0XHRcdFx0dmFyIGVuZCA9IE1hdGgubWF4KHJhbmdlLmVuZCwgdGhpcy5lbmQpO1xuXHRcdFx0XHRyZXR1cm4gbmV3IFJhbmdlKHN0YXJ0LCBlbmQgLSBzdGFydCk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGEgQm9vbGVhbiB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aGV0aGVyIGEgc3BlY2lmaWVkIHBvc2l0aW9uXG5cdFx0ICogaXMgaW4gYSBnaXZlbiByYW5nZS5cblx0XHQgKiBAcGFyYW0ge051bWJlcn0gbG9jXG5cdFx0ICovXG5cdFx0aW5zaWRlOiBmdW5jdGlvbihsb2MpIHtcblx0XHRcdHJldHVybiB0aGlzLmNtcChsb2MsICdsdGUnLCAnZ3QnKTtcbi8vXHRcdFx0cmV0dXJuIHRoaXMuc3RhcnQgPD0gbG9jICYmIHRoaXMuZW5kID4gbG9jO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGEgQm9vbGVhbiB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aGV0aGVyIGEgc3BlY2lmaWVkIHBvc2l0aW9uXG5cdFx0ICogaXMgaW4gYSBnaXZlbiByYW5nZSwgYnV0IG5vdCBlcXVhbHMgYm91bmRzLlxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBsb2Ncblx0XHQgKi9cblx0XHRjb250YWluczogZnVuY3Rpb24obG9jKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jbXAobG9jLCAnbHQnLCAnZ3QnKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2sgaWYgY3VycmVudCByYW5nZSBjb21wbGV0ZWx5IGluY2x1ZGVzIHNwZWNpZmllZCBvbmVcblx0XHQgKiBAcGFyYW0ge1JhbmdlfSByXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aW5jbHVkZTogZnVuY3Rpb24ocikge1xuXHRcdFx0cmV0dXJuIHRoaXMuY21wKGxvYywgJ2x0ZScsICdndGUnKTtcbi8vXHRcdFx0cmV0dXJuIHRoaXMuc3RhcnQgPD0gci5zdGFydCAmJiB0aGlzLmVuZCA+PSByLmVuZDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogTG93LWxldmVsIGNvbXBhcmlzaW9uIG1ldGhvZFxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBsb2Ncblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbGVmdCBMZWZ0IGNvbXBhcmlzb24gb3BlcmF0b3Jcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gcmlnaHQgUmlnaHQgY29tYXByaXNvbiBvcGVyYXRvclxuXHRcdCAqL1xuXHRcdGNtcDogZnVuY3Rpb24obG9jLCBsZWZ0LCByaWdodCkge1xuXHRcdFx0dmFyIGEsIGI7XG5cdFx0XHRpZiAobG9jIGluc3RhbmNlb2YgUmFuZ2UpIHtcblx0XHRcdFx0YSA9IGxvYy5zdGFydDtcblx0XHRcdFx0YiA9IGxvYy5lbmQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhID0gYiA9IGxvYztcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGNtcCh0aGlzLnN0YXJ0LCBhLCBsZWZ0IHx8ICc8PScpICYmIGNtcCh0aGlzLmVuZCwgYiwgcmlnaHQgfHwgJz4nKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBzdWJzdHJpbmcgb2Ygc3BlY2lmaWVkIDxjb2RlPnN0cjwvY29kZT4gZm9yIGN1cnJlbnQgcmFuZ2Vcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRzdWJzdHJpbmc6IGZ1bmN0aW9uKHN0cikge1xuXHRcdFx0cmV0dXJuIHRoaXMubGVuZ3RoKCkgPiAwXG5cdFx0XHRcdD8gc3RyLnN1YnN0cmluZyh0aGlzLnN0YXJ0LCB0aGlzLmVuZClcblx0XHRcdFx0OiAnJztcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ3JlYXRlcyBjb3B5IG9mIGN1cnJlbnQgcmFuZ2Vcblx0XHQgKiBAcmV0dXJucyB7UmFuZ2V9XG5cdFx0ICovXG5cdFx0Y2xvbmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIG5ldyBSYW5nZSh0aGlzLnN0YXJ0LCB0aGlzLmxlbmd0aCgpKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQHJldHVybnMge0FycmF5fVxuXHRcdCAqL1xuXHRcdHRvQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIFt0aGlzLnN0YXJ0LCB0aGlzLmVuZF07XG5cdFx0fSxcblxuXHRcdHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAneycgKyB0aGlzLnN0YXJ0ICsgJywgJyArIHRoaXMubGVuZ3RoKCkgKyAnfSc7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0LyoqXG5cdFx0ICogQ3JlYXRlcyBuZXcgcmFuZ2Ugb2JqZWN0IGluc3RhbmNlXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IHN0YXJ0IFJhbmdlIHN0YXJ0IG9yIGFycmF5IHdpdGggJ3N0YXJ0JyBhbmQgJ2VuZCdcblx0XHQgKiBhcyB0d28gZmlyc3QgaW5kZXhlcyBvciBvYmplY3Qgd2l0aCAnc3RhcnQnIGFuZCAnZW5kJyBwcm9wZXJ0aWVzXG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IGxlbiBSYW5nZSBsZW5ndGggb3Igc3RyaW5nIHRvIHByb2R1Y2UgcmFuZ2UgZnJvbVxuXHRcdCAqIEByZXR1cm5zIHtSYW5nZX1cblx0XHQgKiBAbWVtYmVyT2YgZW1tZXQucmFuZ2Vcblx0XHQgKi9cblx0XHRjcmVhdGU6IGZ1bmN0aW9uKHN0YXJ0LCBsZW4pIHtcblx0XHRcdGlmIChfLmlzVW5kZWZpbmVkKHN0YXJ0KSB8fCBzdGFydCA9PT0gbnVsbClcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRcdGlmIChzdGFydCBpbnN0YW5jZW9mIFJhbmdlKVxuXHRcdFx0XHRyZXR1cm4gc3RhcnQ7XG5cblx0XHRcdGlmIChfLmlzT2JqZWN0KHN0YXJ0KSAmJiAnc3RhcnQnIGluIHN0YXJ0ICYmICdlbmQnIGluIHN0YXJ0KSB7XG5cdFx0XHRcdGxlbiA9IHN0YXJ0LmVuZCAtIHN0YXJ0LnN0YXJ0O1xuXHRcdFx0XHRzdGFydCA9IHN0YXJ0LnN0YXJ0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbmV3IFJhbmdlKHN0YXJ0LCBsZW4pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiA8Y29kZT5SYW5nZTwvY29kZT4gb2JqZWN0IGZhY3RvcnksIHRoZSBzYW1lIGFzIDxjb2RlPnRoaXMuY3JlYXRlKCk8L2NvZGU+XG5cdFx0ICogYnV0IGxhc3QgYXJndW1lbnQgcmVwcmVzZW50cyBlbmQgb2YgcmFuZ2UsIG5vdCBsZW5ndGhcblx0XHQgKiBAcmV0dXJucyB7UmFuZ2V9XG5cdFx0ICovXG5cdFx0Y3JlYXRlMjogZnVuY3Rpb24oc3RhcnQsIGVuZCkge1xuXHRcdFx0aWYgKF8uaXNOdW1iZXIoc3RhcnQpICYmIF8uaXNOdW1iZXIoZW5kKSkge1xuXHRcdFx0XHRlbmQgLT0gc3RhcnQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzLmNyZWF0ZShzdGFydCwgZW5kKTtcblx0XHR9XG5cdH07XG59KTsvKipcbiAqIFV0aWxpdHkgbW9kdWxlIHRoYXQgcHJvdmlkZXMgb3JkZXJlZCBzdG9yYWdlIG9mIGZ1bmN0aW9uIGhhbmRsZXJzLlxuICogTWFueSBFbW1ldCBtb2R1bGVzJyBmdW5jdGlvbmFsaXR5IGNhbiBiZSBleHRlbmRlZC9vdmVycmlkZGVuIGJ5IGN1c3RvbVxuICogZnVuY3Rpb24uIFRoaXMgbW9kdWxlcyBwcm92aWRlcyB1bmlmaWVkIHN0b3JhZ2Ugb2YgaGFuZGxlciBmdW5jdGlvbnMsIHRoZWlyXG4gKiBtYW5hZ2VtZW50IGFuZCBleGVjdXRpb25cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBtZW1iZXJPZiBfX2hhbmRsZXJMaXN0RGVmaW5lXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZGVmaW5lKCdoYW5kbGVyTGlzdCcsIGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0LyoqXG5cdCAqIEB0eXBlIEhhbmRsZXJMaXN0XG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gSGFuZGxlckxpc3QoKSB7XG5cdFx0dGhpcy5fbGlzdCA9IFtdO1xuXHR9XG5cblx0SGFuZGxlckxpc3QucHJvdG90eXBlID0ge1xuXHRcdC8qKlxuXHRcdCAqIEFkZHMgZnVuY3Rpb24gaGFuZGxlclxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEhhbmRsZXJcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBIYW5kbGVyIG9wdGlvbnMuIFBvc3NpYmxlIHZhbHVlcyBhcmU6PGJyPjxicj5cblx0XHQgKiA8Yj5vcmRlcjwvYj4gOiAoPGNvZGU+TnVtYmVyPC9jb2RlPikg4oCTIG9yZGVyIGluIGhhbmRsZXIgbGlzdC4gSGFuZGxlcnNcblx0XHQgKiB3aXRoIGhpZ2hlciBvcmRlciB2YWx1ZSB3aWxsIGJlIGV4ZWN1dGVkIGVhcmxpZXIuXG5cdFx0ICovXG5cdFx0YWRkOiBmdW5jdGlvbihmbiwgb3B0aW9ucykge1xuXHRcdFx0dGhpcy5fbGlzdC5wdXNoKF8uZXh0ZW5kKHtvcmRlcjogMH0sIG9wdGlvbnMgfHwge30sIHtmbjogZm59KSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlbW92ZXMgaGFuZGxlciBmcm9tIGxpc3Rcblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHRcdCAqL1xuXHRcdHJlbW92ZTogZnVuY3Rpb24oZm4pIHtcblx0XHRcdHRoaXMuX2xpc3QgPSBfLndpdGhvdXQodGhpcy5fbGlzdCwgXy5maW5kKHRoaXMuX2xpc3QsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0cmV0dXJuIGl0ZW0uZm4gPT09IGZuO1xuXHRcdFx0fSkpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIG9yZGVyZWQgbGlzdCBvZiBoYW5kbGVycy4gQnkgZGVmYXVsdCwgaGFuZGxlcnNcblx0XHQgKiB3aXRoIHRoZSBzYW1lIDxjb2RlPm9yZGVyPC9jb2RlPiBvcHRpb24gcmV0dXJuZWQgaW4gcmV2ZXJzZSBvcmRlcixcblx0XHQgKiBpLmUuIHRoZSBsYXR0ZXIgZnVuY3Rpb24gd2FzIGFkZGVkIGludG8gdGhlIGhhbmRsZXJzIGxpc3QsIHRoZSBoaWdoZXJcblx0XHQgKiBpdCB3aWxsIGJlIGluIHRoZSByZXR1cm5lZCBhcnJheVxuXHRcdCAqIEByZXR1cm5zIHtBcnJheX1cblx0XHQgKi9cblx0XHRsaXN0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBfLnNvcnRCeSh0aGlzLl9saXN0LCAnb3JkZXInKS5yZXZlcnNlKCk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgb3JkZXJlZCBsaXN0IG9mIGhhbmRsZXIgZnVuY3Rpb25zXG5cdFx0ICogQHJldHVybnMge0FycmF5fVxuXHRcdCAqL1xuXHRcdGxpc3RGbjogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gXy5wbHVjayh0aGlzLmxpc3QoKSwgJ2ZuJyk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEV4ZWN1dGVzIGhhbmRsZXIgZnVuY3Rpb25zIGluIHRoZWlyIGRlc2lnbmF0ZWQgb3JkZXIuIElmIGZ1bmN0aW9uXG5cdFx0ICogcmV0dXJucyA8Y29kZT5za2lwVmFsPC9jb2RlPiwgbWVhbmluZyB0aGF0IGZ1bmN0aW9uIHdhcyB1bmFibGUgdG9cblx0XHQgKiBoYW5kbGUgcGFzc2VkIDxjb2RlPmFyZ3M8L2NvZGU+LCB0aGUgbmV4dCBmdW5jdGlvbiB3aWxsIGJlIGV4ZWN1dGVkXG5cdFx0ICogYW5kIHNvIG9uLlxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBza2lwVmFsdWUgSWYgZnVuY3Rpb24gcmV0dXJucyB0aGlzIHZhbHVlLCBleGVjdXRlXG5cdFx0ICogbmV4dCBoYW5kbGVyLlxuXHRcdCAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgQXJndW1lbnRzIHRvIHBhc3MgdG8gaGFuZGxlciBmdW5jdGlvblxuXHRcdCAqIEByZXR1cm5zIHtCb29sZWFufSBXaGV0aGVyIGFueSBvZiByZWdpc3RlcmVkIGhhbmRsZXJzIHBlcmZvcm1lZFxuXHRcdCAqIHN1Y2Nlc3NmdWxseVxuXHRcdCAqL1xuXHRcdGV4ZWM6IGZ1bmN0aW9uKHNraXBWYWx1ZSwgYXJncykge1xuXHRcdFx0YXJncyA9IGFyZ3MgfHwgW107XG5cdFx0XHR2YXIgcmVzdWx0ID0gbnVsbDtcblx0XHRcdF8uZmluZCh0aGlzLmxpc3QoKSwgZnVuY3Rpb24oaCkge1xuXHRcdFx0XHRyZXN1bHQgPSBoLmZuLmFwcGx5KGgsIGFyZ3MpO1xuXHRcdFx0XHRpZiAocmVzdWx0ICE9PSBza2lwVmFsdWUpXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHQvKipcblx0XHQgKiBGYWN0b3J5IG1ldGhvZCB0aGF0IHByb2R1Y2VzIDxjb2RlPkhhbmRsZXJMaXN0PC9jb2RlPiBpbnN0YW5jZVxuXHRcdCAqIEByZXR1cm5zIHtIYW5kbGVyTGlzdH1cblx0XHQgKiBAbWVtYmVyT2YgaGFuZGxlckxpc3Rcblx0XHQgKi9cblx0XHRjcmVhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIG5ldyBIYW5kbGVyTGlzdCgpO1xuXHRcdH1cblx0fTtcbn0pOy8qKlxuICogSGVscGVyIGNsYXNzIGZvciBjb252ZW5pZW50IHRva2VuIGl0ZXJhdGlvblxuICovXG5lbW1ldC5kZWZpbmUoJ3Rva2VuSXRlcmF0b3InLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdC8qKlxuXHQgKiBAdHlwZSBUb2tlbkl0ZXJhdG9yXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuXHQgKiBAdHlwZSBUb2tlbkl0ZXJhdG9yXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gVG9rZW5JdGVyYXRvcih0b2tlbnMpIHtcblx0XHQvKiogQHR5cGUgQXJyYXkgKi9cblx0XHR0aGlzLnRva2VucyA9IHRva2Vucztcblx0XHR0aGlzLl9wb3NpdGlvbiA9IDA7XG5cdFx0dGhpcy5yZXNldCgpO1xuXHR9XG5cblx0VG9rZW5JdGVyYXRvci5wcm90b3R5cGUgPSB7XG5cdFx0bmV4dDogZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAodGhpcy5oYXNOZXh0KCkpIHtcblx0XHRcdFx0dmFyIHRva2VuID0gdGhpcy50b2tlbnNbKyt0aGlzLl9pXTtcblx0XHRcdFx0dGhpcy5fcG9zaXRpb24gPSB0b2tlbi5zdGFydDtcblx0XHRcdFx0cmV0dXJuIHRva2VuO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9LFxuXG5cdFx0Y3VycmVudDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy50b2tlbnNbdGhpcy5faV07XG5cdFx0fSxcblxuXHRcdHBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLl9wb3NpdGlvbjtcblx0XHR9LFxuXG5cdFx0aGFzTmV4dDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5faSA8IHRoaXMuX2lsIC0gMTtcblx0XHR9LFxuXG5cdFx0cmVzZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5faSA9IC0xO1xuXHRcdFx0dGhpcy5faWwgPSB0aGlzLnRva2Vucy5sZW5ndGg7XG5cdFx0fSxcblxuXHRcdGl0ZW06IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMuX2ldO1xuXHRcdH0sXG5cblx0XHRpdGVtTmV4dDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy50b2tlbnNbdGhpcy5faSArIDFdO1xuXHRcdH0sXG5cblx0XHRpdGVtUHJldjogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy50b2tlbnNbdGhpcy5faSAtIDFdO1xuXHRcdH0sXG5cblx0XHRuZXh0VW50aWw6IGZ1bmN0aW9uKHR5cGUsIGNhbGxiYWNrKSB7XG5cdFx0XHR2YXIgdG9rZW47XG5cdFx0XHR2YXIgdGVzdCA9IF8uaXNTdHJpbmcodHlwZSlcblx0XHRcdFx0PyBmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlID09IHR5cGU7fVxuXHRcdFx0XHQ6IHR5cGU7XG5cblx0XHRcdHdoaWxlICh0b2tlbiA9IHRoaXMubmV4dCgpKSB7XG5cdFx0XHRcdGlmIChjYWxsYmFjaylcblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKHRoaXMsIHRva2VuKTtcblx0XHRcdFx0aWYgKHRlc3QuY2FsbCh0aGlzLCB0b2tlbikpXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0Y3JlYXRlOiBmdW5jdGlvbih0b2tlbnMpIHtcblx0XHRcdHJldHVybiBuZXcgVG9rZW5JdGVyYXRvcih0b2tlbnMpO1xuXHRcdH1cblx0fTtcbn0pOy8qKlxuICogQSB0cmltbWVkIHZlcnNpb24gb2YgQ29kZU1pcnJvcidzIFN0cmluZ1N0cmVhbSBtb2R1bGUgZm9yIHN0cmluZyBwYXJzaW5nXG4gKi9cbmVtbWV0LmRlZmluZSgnc3RyaW5nU3RyZWFtJywgZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHQvKipcblx0ICogQHR5cGUgU3RyaW5nU3RyZWFtXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG5cdCAqL1xuXHRmdW5jdGlvbiBTdHJpbmdTdHJlYW0oc3RyaW5nKSB7XG5cdFx0dGhpcy5wb3MgPSB0aGlzLnN0YXJ0ID0gMDtcblx0XHR0aGlzLnN0cmluZyA9IHN0cmluZztcblx0fVxuXG5cdFN0cmluZ1N0cmVhbS5wcm90b3R5cGUgPSB7XG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyB0cnVlIG9ubHkgaWYgdGhlIHN0cmVhbSBpcyBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuXHRcdCAqIEByZXR1cm5zIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdGVvbDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wb3MgPj0gdGhpcy5zdHJpbmcubGVuZ3RoO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHRydWUgb25seSBpZiB0aGUgc3RyZWFtIGlzIGF0IHRoZSBzdGFydCBvZiB0aGUgbGluZVxuXHRcdCAqIEByZXR1cm5zIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdHNvbDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wb3MgPT0gMDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyB0aGUgbmV4dCBjaGFyYWN0ZXIgaW4gdGhlIHN0cmVhbSB3aXRob3V0IGFkdmFuY2luZyBpdC5cblx0XHQgKiBXaWxsIHJldHVybiA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IGF0IHRoZSBlbmQgb2YgdGhlIGxpbmUuXG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRwZWVrOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHRoZSBuZXh0IGNoYXJhY3RlciBpbiB0aGUgc3RyZWFtIGFuZCBhZHZhbmNlcyBpdC5cblx0XHQgKiBBbHNvIHJldHVybnMgPGNvZGU+dW5kZWZpbmVkPC9jb2RlPiB3aGVuIG5vIG1vcmUgY2hhcmFjdGVycyBhcmUgYXZhaWxhYmxlLlxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0bmV4dDogZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAodGhpcy5wb3MgPCB0aGlzLnN0cmluZy5sZW5ndGgpXG5cdFx0XHRcdHJldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MrKyk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIG1hdGNoIGNhbiBiZSBhIGNoYXJhY3RlciwgYSByZWd1bGFyIGV4cHJlc3Npb24sIG9yIGEgZnVuY3Rpb24gdGhhdFxuXHRcdCAqIHRha2VzIGEgY2hhcmFjdGVyIGFuZCByZXR1cm5zIGEgYm9vbGVhbi4gSWYgdGhlIG5leHQgY2hhcmFjdGVyIGluIHRoZVxuXHRcdCAqIHN0cmVhbSAnbWF0Y2hlcycgdGhlIGdpdmVuIGFyZ3VtZW50LCBpdCBpcyBjb25zdW1lZCBhbmQgcmV0dXJuZWQuXG5cdFx0ICogT3RoZXJ3aXNlLCB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG1hdGNoXG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRlYXQ6IGZ1bmN0aW9uKG1hdGNoKSB7XG5cdFx0XHR2YXIgY2ggPSB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MpLCBvaztcblx0XHRcdGlmICh0eXBlb2YgbWF0Y2ggPT0gXCJzdHJpbmdcIilcblx0XHRcdFx0b2sgPSBjaCA9PSBtYXRjaDtcblx0XHRcdGVsc2Vcblx0XHRcdFx0b2sgPSBjaCAmJiAobWF0Y2gudGVzdCA/IG1hdGNoLnRlc3QoY2gpIDogbWF0Y2goY2gpKTtcblxuXHRcdFx0aWYgKG9rKSB7XG5cdFx0XHRcdCsrdGhpcy5wb3M7XG5cdFx0XHRcdHJldHVybiBjaDtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVwZWF0ZWRseSBjYWxscyA8Y29kZT5lYXQ8L2NvZGU+IHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50LCB1bnRpbCBpdFxuXHRcdCAqIGZhaWxzLiBSZXR1cm5zIDxjb2RlPnRydWU8L2NvZGU+IGlmIGFueSBjaGFyYWN0ZXJzIHdlcmUgZWF0ZW4uXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG1hdGNoXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0ZWF0V2hpbGU6IGZ1bmN0aW9uKG1hdGNoKSB7XG5cdFx0XHR2YXIgc3RhcnQgPSB0aGlzLnBvcztcblx0XHRcdHdoaWxlICh0aGlzLmVhdChtYXRjaCkpIHt9XG5cdFx0XHRyZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2hvcnRjdXQgZm9yIDxjb2RlPmVhdFdoaWxlPC9jb2RlPiB3aGVuIG1hdGNoaW5nIHdoaXRlLXNwYWNlLlxuXHRcdCAqIEByZXR1cm5zIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdGVhdFNwYWNlOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzdGFydCA9IHRoaXMucG9zO1xuXHRcdFx0d2hpbGUgKC9bXFxzXFx1MDBhMF0vLnRlc3QodGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSkpXG5cdFx0XHRcdCsrdGhpcy5wb3M7XG5cdFx0XHRyZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogTW92ZXMgdGhlIHBvc2l0aW9uIHRvIHRoZSBlbmQgb2YgdGhlIGxpbmUuXG5cdFx0ICovXG5cdFx0c2tpcFRvRW5kOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMucG9zID0gdGhpcy5zdHJpbmcubGVuZ3RoO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBTa2lwcyB0byB0aGUgbmV4dCBvY2N1cnJlbmNlIG9mIHRoZSBnaXZlbiBjaGFyYWN0ZXIsIGlmIGZvdW5kIG9uIHRoZVxuXHRcdCAqIGN1cnJlbnQgbGluZSAoZG9lc24ndCBhZHZhbmNlIHRoZSBzdHJlYW0gaWYgdGhlIGNoYXJhY3RlciBkb2VzIG5vdFxuXHRcdCAqIG9jY3VyIG9uIHRoZSBsaW5lKS4gUmV0dXJucyB0cnVlIGlmIHRoZSBjaGFyYWN0ZXIgd2FzIGZvdW5kLlxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBjaFxuXHRcdCAqIEByZXR1cm5zIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdHNraXBUbzogZnVuY3Rpb24oY2gpIHtcblx0XHRcdHZhciBmb3VuZCA9IHRoaXMuc3RyaW5nLmluZGV4T2YoY2gsIHRoaXMucG9zKTtcblx0XHRcdGlmIChmb3VuZCA+IC0xKSB7XG5cdFx0XHRcdHRoaXMucG9zID0gZm91bmQ7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBTa2lwcyB0byA8Y29kZT5jbG9zZTwvY29kZT4gY2hhcmFjdGVyIHdoaWNoIGlzIHBhaXIgdG8gPGNvZGU+b3BlbjwvY29kZT5cblx0XHQgKiBjaGFyYWN0ZXIsIGNvbnNpZGVyaW5nIHBvc3NpYmxlIHBhaXIgbmVzdGluZy4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkXG5cdFx0ICogdG8gY29uc3VtZSBwYWlyIG9mIGNoYXJhY3RlcnMsIGxpa2Ugb3BlbmluZyBhbmQgY2xvc2luZyBicmFjZXNcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gb3BlblxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBjbG9zZVxuXHRcdCAqIEByZXR1cm5zIHtCb29sZWFufSBSZXR1cm5zIDxjb2RlPnRydWU8L2NvZGU+IGlmIHBhaXIgd2FzIHN1Y2Nlc3NmdWxseVxuXHRcdCAqIGNvbnN1bWVkXG5cdFx0ICovXG5cdFx0c2tpcFRvUGFpcjogZnVuY3Rpb24ob3BlbiwgY2xvc2UpIHtcblx0XHRcdHZhciBicmFjZUNvdW50ID0gMCwgY2g7XG5cdFx0XHR2YXIgcG9zID0gdGhpcy5wb3MsIGxlbiA9IHRoaXMuc3RyaW5nLmxlbmd0aDtcblx0XHRcdHdoaWxlIChwb3MgPCBsZW4pIHtcblx0XHRcdFx0Y2ggPSB0aGlzLnN0cmluZy5jaGFyQXQocG9zKyspO1xuXHRcdFx0XHRpZiAoY2ggPT0gb3Blbikge1xuXHRcdFx0XHRcdGJyYWNlQ291bnQrKztcblx0XHRcdFx0fSBlbHNlIGlmIChjaCA9PSBjbG9zZSkge1xuXHRcdFx0XHRcdGJyYWNlQ291bnQtLTtcblx0XHRcdFx0XHRpZiAoYnJhY2VDb3VudCA8IDEpIHtcblx0XHRcdFx0XHRcdHRoaXMucG9zID0gcG9zO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQmFja3MgdXAgdGhlIHN0cmVhbSBuIGNoYXJhY3RlcnMuIEJhY2tpbmcgaXQgdXAgZnVydGhlciB0aGFuIHRoZVxuXHRcdCAqIHN0YXJ0IG9mIHRoZSBjdXJyZW50IHRva2VuIHdpbGwgY2F1c2UgdGhpbmdzIHRvIGJyZWFrLCBzbyBiZSBjYXJlZnVsLlxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBuXG5cdFx0ICovXG5cdFx0YmFja1VwIDogZnVuY3Rpb24obikge1xuXHRcdFx0dGhpcy5wb3MgLT0gbjtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQWN0IGxpa2UgYSBtdWx0aS1jaGFyYWN0ZXIgPGNvZGU+ZWF0PC9jb2RlPuKAlGlmIDxjb2RlPmNvbnN1bWU8L2NvZGU+IGlzIHRydWUgb3Jcblx0XHQgKiBub3QgZ2l2ZW7igJRvciBhIGxvb2stYWhlYWQgdGhhdCBkb2Vzbid0IHVwZGF0ZSB0aGUgc3RyZWFtIHBvc2l0aW9u4oCUaWZcblx0XHQgKiBpdCBpcyBmYWxzZS4gPGNvZGU+cGF0dGVybjwvY29kZT4gY2FuIGJlIGVpdGhlciBhIHN0cmluZyBvciBhXG5cdFx0ICogcmVndWxhciBleHByZXNzaW9uIHN0YXJ0aW5nIHdpdGggXi4gV2hlbiBpdCBpcyBhIHN0cmluZyxcblx0XHQgKiA8Y29kZT5jYXNlSW5zZW5zaXRpdmU8L2NvZGU+IGNhbiBiZSBzZXQgdG8gdHJ1ZSB0byBtYWtlIHRoZSBtYXRjaFxuXHRcdCAqIGNhc2UtaW5zZW5zaXRpdmUuIFdoZW4gc3VjY2Vzc2Z1bGx5IG1hdGNoaW5nIGEgcmVndWxhciBleHByZXNzaW9uLFxuXHRcdCAqIHRoZSByZXR1cm5lZCB2YWx1ZSB3aWxsIGJlIHRoZSBhcnJheSByZXR1cm5lZCBieSA8Y29kZT5tYXRjaDwvY29kZT4sXG5cdFx0ICogaW4gY2FzZSB5b3UgbmVlZCB0byBleHRyYWN0IG1hdGNoZWQgZ3JvdXBzLlxuXHRcdCAqXG5cdFx0ICogQHBhcmFtIHtSZWdFeHB9IHBhdHRlcm5cblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IGNvbnN1bWVcblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IGNhc2VJbnNlbnNpdGl2ZVxuXHRcdCAqIEByZXR1cm5zXG5cdFx0ICovXG5cdFx0bWF0Y2g6IGZ1bmN0aW9uKHBhdHRlcm4sIGNvbnN1bWUsIGNhc2VJbnNlbnNpdGl2ZSkge1xuXHRcdFx0aWYgKHR5cGVvZiBwYXR0ZXJuID09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0dmFyIGNhc2VkID0gY2FzZUluc2Vuc2l0aXZlXG5cdFx0XHRcdFx0PyBmdW5jdGlvbihzdHIpIHtyZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCk7fVxuXHRcdFx0XHRcdDogZnVuY3Rpb24oc3RyKSB7cmV0dXJuIHN0cjt9O1xuXG5cdFx0XHRcdGlmIChjYXNlZCh0aGlzLnN0cmluZykuaW5kZXhPZihjYXNlZChwYXR0ZXJuKSwgdGhpcy5wb3MpID09IHRoaXMucG9zKSB7XG5cdFx0XHRcdFx0aWYgKGNvbnN1bWUgIT09IGZhbHNlKVxuXHRcdFx0XHRcdFx0dGhpcy5wb3MgKz0gcGF0dGVybi5sZW5ndGg7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBtYXRjaCA9IHRoaXMuc3RyaW5nLnNsaWNlKHRoaXMucG9zKS5tYXRjaChwYXR0ZXJuKTtcblx0XHRcdFx0aWYgKG1hdGNoICYmIGNvbnN1bWUgIT09IGZhbHNlKVxuXHRcdFx0XHRcdHRoaXMucG9zICs9IG1hdGNoWzBdLmxlbmd0aDtcblx0XHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBHZXQgdGhlIHN0cmluZyBiZXR3ZWVuIHRoZSBzdGFydCBvZiB0aGUgY3VycmVudCB0b2tlbiBhbmQgdGhlXG5cdFx0ICogY3VycmVudCBzdHJlYW0gcG9zaXRpb24uXG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRjdXJyZW50OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLnN0cmluZy5zbGljZSh0aGlzLnN0YXJ0LCB0aGlzLnBvcyk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0Y3JlYXRlOiBmdW5jdGlvbihzdHJpbmcpIHtcblx0XHRcdHJldHVybiBuZXcgU3RyaW5nU3RyZWFtKHN0cmluZyk7XG5cdFx0fVxuXHR9O1xufSk7LyoqXG4gKiBQYXJzZWQgcmVzb3VyY2VzIChzbmlwcGV0cywgYWJicmV2aWF0aW9ucywgdmFyaWFibGVzLCBldGMuKSBmb3IgRW1tZXQuXG4gKiBDb250YWlucyBjb252ZW5pZW50IG1ldGhvZCB0byBnZXQgYWNjZXNzIGZvciBzbmlwcGV0cyB3aXRoIHJlc3BlY3Qgb2ZcbiAqIGluaGVyaXRhbmNlLiBBbHNvIHByb3ZpZGVzIGFiaWxpdHkgdG8gc3RvcmUgZGF0YSBpbiBkaWZmZXJlbnQgdm9jYWJ1bGFyaWVzXG4gKiAoJ3N5c3RlbScgYW5kICd1c2VyJykgZm9yIGZhc3QgYW5kIHNhZmUgcmVzb3VyY2UgdXBkYXRlXG4gKiBAYXV0aG9yIFNlcmdleSBDaGlrdXlvbm9rIChzZXJnZS5jaGVAZ21haWwuY29tKVxuICogQGxpbmsgaHR0cDovL2NoaWt1eW9ub2sucnVcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZGVmaW5lKCdyZXNvdXJjZXMnLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHZhciBWT0NfU1lTVEVNID0gJ3N5c3RlbSc7XG5cdHZhciBWT0NfVVNFUiA9ICd1c2VyJztcblxuXHR2YXIgY2FjaGUgPSB7fTtcblxuXHQvKiogUmVndWxhciBleHByZXNzaW9uIGZvciBYTUwgdGFnIG1hdGNoaW5nICovXG5cdHZhciByZVRhZyA9IC9ePChcXHcrXFw6P1tcXHdcXC1dKikoKD86XFxzK1tcXHdcXDpcXC1dK1xccyo9XFxzKihbJ1wiXSkuKj9cXDMpKilcXHMqKFxcLz8pPi87XG5cblx0dmFyIHN5c3RlbVNldHRpbmdzID0ge307XG5cdHZhciB1c2VyU2V0dGluZ3MgPSB7fTtcblxuXHQvKiogQHR5cGUgSGFuZGxlckxpc3QgTGlzdCBvZiByZWdpc3RlcmVkIGFiYnJldmlhdGlvbiByZXNvbHZlcnMgKi9cblx0dmFyIHJlc29sdmVycyA9IHJlcXVpcmUoJ2hhbmRsZXJMaXN0JykuY3JlYXRlKCk7XG5cblx0LyoqXG5cdCAqIE5vcm1hbGl6ZXMgY2FyZXQgcGxjZWhvbGRlciBpbiBwYXNzZWQgdGV4dDogcmVwbGFjZXMgfCBjaGFyYWN0ZXIgd2l0aFxuXHQgKiBkZWZhdWx0IGNhcmV0IHBsYWNlaG9sZGVyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBub3JtYWxpemVDYXJldFBsYWNlaG9sZGVyKHRleHQpIHtcblx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXHRcdHJldHVybiB1dGlscy5yZXBsYWNlVW5lc2NhcGVkU3ltYm9sKHRleHQsICd8JywgdXRpbHMuZ2V0Q2FyZXRQbGFjZWhvbGRlcigpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlSXRlbShuYW1lLCB2YWx1ZSwgdHlwZSkge1xuXHRcdHZhbHVlID0gbm9ybWFsaXplQ2FyZXRQbGFjZWhvbGRlcih2YWx1ZSk7XG5cblx0XHRpZiAodHlwZSA9PSAnc25pcHBldHMnKSB7XG5cdFx0XHRyZXR1cm4gcmVxdWlyZSgnZWxlbWVudHMnKS5jcmVhdGUoJ3NuaXBwZXQnLCB2YWx1ZSk7XG5cdFx0fVxuXG5cdFx0aWYgKHR5cGUgPT0gJ2FiYnJldmlhdGlvbnMnKSB7XG5cdFx0XHRyZXR1cm4gcGFyc2VBYmJyZXZpYXRpb24obmFtZSwgdmFsdWUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBQYXJzZXMgc2luZ2xlIGFiYnJldmlhdGlvblxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5IEFiYnJldmlhdGlvbiBuYW1lXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSBBYmJyZXZpYXRpb24gdmFsdWVcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0ZnVuY3Rpb24gcGFyc2VBYmJyZXZpYXRpb24oa2V5LCB2YWx1ZSkge1xuXHRcdGtleSA9IHJlcXVpcmUoJ3V0aWxzJykudHJpbShrZXkpO1xuXHRcdHZhciBlbGVtZW50cyA9IHJlcXVpcmUoJ2VsZW1lbnRzJyk7XG5cdFx0dmFyIG07XG5cdFx0aWYgKG0gPSByZVRhZy5leGVjKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuIGVsZW1lbnRzLmNyZWF0ZSgnZWxlbWVudCcsIG1bMV0sIG1bMl0sIG1bNF0gPT0gJy8nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gYXNzdW1lIGl0J3MgcmVmZXJlbmNlIHRvIGFub3RoZXIgYWJicmV2aWF0aW9uXG5cdFx0XHRyZXR1cm4gZWxlbWVudHMuY3JlYXRlKCdyZWZlcmVuY2UnLCB2YWx1ZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIE5vcm1hbGl6ZXMgc25pcHBldCBrZXkgbmFtZSBmb3IgYmV0dGVyIGZ1enp5IHNlYXJjaFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBub3JtYWxpemVOYW1lKHN0cikge1xuXHRcdHJldHVybiBzdHIucmVwbGFjZSgvOiQvLCAnJykucmVwbGFjZSgvOi9nLCAnLScpO1xuXHR9XG5cblx0cmV0dXJuIHtcblx0XHQvKipcblx0XHQgKiBTZXRzIG5ldyB1bnBhcnNlZCBkYXRhIGZvciBzcGVjaWZpZWQgc2V0dGluZ3Mgdm9jYWJ1bGFyeVxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVm9jYWJ1bGFyeSB0eXBlICgnc3lzdGVtJyBvciAndXNlcicpXG5cdFx0ICogQG1lbWJlck9mIHJlc291cmNlc1xuXHRcdCAqL1xuXHRcdHNldFZvY2FidWxhcnk6IGZ1bmN0aW9uKGRhdGEsIHR5cGUpIHtcblx0XHRcdGNhY2hlID0ge307XG5cdFx0XHRpZiAodHlwZSA9PSBWT0NfU1lTVEVNKVxuXHRcdFx0XHRzeXN0ZW1TZXR0aW5ncyA9IGRhdGE7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHVzZXJTZXR0aW5ncyA9IGRhdGE7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgcmVzb3VyY2Ugdm9jYWJ1bGFyeSBieSBpdHMgbmFtZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFZvY2FidWxhcnkgbmFtZSAoJ3N5c3RlbScgb3IgJ3VzZXInKVxuXHRcdCAqIEByZXR1cm4ge09iamVjdH1cblx0XHQgKi9cblx0XHRnZXRWb2NhYnVsYXJ5OiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRyZXR1cm4gbmFtZSA9PSBWT0NfU1lTVEVNID8gc3lzdGVtU2V0dGluZ3MgOiB1c2VyU2V0dGluZ3M7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgcmVzb3VyY2UgKGFiYnJldmlhdGlvbiwgc25pcHBldCwgZXRjLikgbWF0Y2hlZCBmb3IgcGFzc2VkXG5cdFx0ICogYWJicmV2aWF0aW9uXG5cdFx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBub2RlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bnRheFxuXHRcdCAqIEByZXR1cm5zIHtPYmplY3R9XG5cdFx0ICovXG5cdFx0Z2V0TWF0Y2hlZFJlc291cmNlOiBmdW5jdGlvbihub2RlLCBzeW50YXgpIHtcblx0XHRcdHJldHVybiByZXNvbHZlcnMuZXhlYyhudWxsLCBfLnRvQXJyYXkoYXJndW1lbnRzKSlcblx0XHRcdFx0fHwgdGhpcy5maW5kU25pcHBldChzeW50YXgsIG5vZGUubmFtZSgpKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyB2YXJpYWJsZSB2YWx1ZVxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHRnZXRWYXJpYWJsZTogZnVuY3Rpb24obmFtZSkge1xuXHRcdFx0cmV0dXJuICh0aGlzLmdldFNlY3Rpb24oJ3ZhcmlhYmxlcycpIHx8IHt9KVtuYW1lXTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU3RvcmUgcnVudGltZSB2YXJpYWJsZSBpbiB1c2VyIHN0b3JhZ2Vcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBWYXJpYWJsZSBuYW1lXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIFZhcmlhYmxlIHZhbHVlXG5cdFx0ICovXG5cdFx0c2V0VmFyaWFibGU6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKXtcblx0XHRcdHZhciB2b2MgPSB0aGlzLmdldFZvY2FidWxhcnkoJ3VzZXInKSB8fCB7fTtcblx0XHRcdGlmICghKCd2YXJpYWJsZXMnIGluIHZvYykpXG5cdFx0XHRcdHZvYy52YXJpYWJsZXMgPSB7fTtcblxuXHRcdFx0dm9jLnZhcmlhYmxlc1tuYW1lXSA9IHZhbHVlO1xuXHRcdFx0dGhpcy5zZXRWb2NhYnVsYXJ5KHZvYywgJ3VzZXInKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2sgaWYgdGhlcmUgYXJlIHJlc291cmNlcyBmb3Igc3BlY2lmaWVkIHN5bnRheFxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzeW50YXhcblx0XHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdGhhc1N5bnRheDogZnVuY3Rpb24oc3ludGF4KSB7XG5cdFx0XHRyZXR1cm4gc3ludGF4IGluIHRoaXMuZ2V0Vm9jYWJ1bGFyeShWT0NfVVNFUilcblx0XHRcdFx0fHwgc3ludGF4IGluIHRoaXMuZ2V0Vm9jYWJ1bGFyeShWT0NfU1lTVEVNKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVnaXN0ZXJzIG5ldyBhYmJyZXZpYXRpb24gcmVzb2x2ZXIuXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gQWJicmV2aWF0aW9uIHJlc29sdmVyIHdoaWNoIHdpbGwgcmVjZWl2ZVxuXHRcdCAqIGFiYnJldmlhdGlvbiBhcyBmaXJzdCBhcmd1bWVudCBhbmQgc2hvdWxkIHJldHVybiBwYXJzZWQgYWJicmV2aWF0aW9uXG5cdFx0ICogb2JqZWN0IGlmIGFiYnJldmlhdGlvbiBoYXMgaGFuZGxlZCBzdWNjZXNzZnVsbHksIDxjb2RlPm51bGw8L2NvZGU+XG5cdFx0ICogb3RoZXJ3aXNlXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBsaXN0IGFzIGRlc2NyaWJlZCBpblxuXHRcdCAqIHtAbGluayBIYW5kbGVyTGlzdCNhZGQoKX0gbWV0aG9kXG5cdFx0ICovXG5cdFx0YWRkUmVzb2x2ZXI6IGZ1bmN0aW9uKGZuLCBvcHRpb25zKSB7XG5cdFx0XHRyZXNvbHZlcnMuYWRkKGZuLCBvcHRpb25zKTtcblx0XHR9LFxuXG5cdFx0cmVtb3ZlUmVzb2x2ZXI6IGZ1bmN0aW9uKGZuKSB7XG5cdFx0XHRyZXNvbHZlcnMucmVtb3ZlKGZuKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBhY3R1YWwgc2VjdGlvbiBkYXRhLCBtZXJnZWQgZnJvbSBib3RoXG5cdFx0ICogc3lzdGVtIGFuZCB1c2VyIGRhdGFcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBTZWN0aW9uIG5hbWUgKHN5bnRheClcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gLi4uYXJncyBTdWJzZWN0aW9uc1xuXHRcdCAqIEByZXR1cm5zXG5cdFx0ICovXG5cdFx0Z2V0U2VjdGlvbjogZnVuY3Rpb24obmFtZSkge1xuXHRcdFx0aWYgKCFuYW1lKVxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdFx0aWYgKCEobmFtZSBpbiBjYWNoZSkpIHtcblx0XHRcdFx0Y2FjaGVbbmFtZV0gPSByZXF1aXJlKCd1dGlscycpLmRlZXBNZXJnZSh7fSwgc3lzdGVtU2V0dGluZ3NbbmFtZV0sIHVzZXJTZXR0aW5nc1tuYW1lXSk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBkYXRhID0gY2FjaGVbbmFtZV0sIHN1YnNlY3Rpb25zID0gXy5yZXN0KGFyZ3VtZW50cyksIGtleTtcblx0XHRcdHdoaWxlIChkYXRhICYmIChrZXkgPSBzdWJzZWN0aW9ucy5zaGlmdCgpKSkge1xuXHRcdFx0XHRpZiAoa2V5IGluIGRhdGEpIHtcblx0XHRcdFx0XHRkYXRhID0gZGF0YVtrZXldO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZWN1cnNpdmVseSBzZWFyY2hlcyBmb3IgYSBpdGVtIGluc2lkZSB0b3AgbGV2ZWwgc2VjdGlvbnMgKHN5bnRheGVzKVxuXHRcdCAqIHdpdGggcmVzcGVjdCBvZiBgZXh0ZW5kc2AgYXR0cmlidXRlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRvcFNlY3Rpb24gVG9wIHNlY3Rpb24gbmFtZSAoc3ludGF4KVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzdWJzZWN0aW9uIElubmVyIHNlY3Rpb24gbmFtZVxuXHRcdCAqIEByZXR1cm5zIHtPYmplY3R9XG5cdFx0ICovXG5cdFx0ZmluZEl0ZW06IGZ1bmN0aW9uKHRvcFNlY3Rpb24sIHN1YnNlY3Rpb24pIHtcblx0XHRcdHZhciBkYXRhID0gdGhpcy5nZXRTZWN0aW9uKHRvcFNlY3Rpb24pO1xuXHRcdFx0d2hpbGUgKGRhdGEpIHtcblx0XHRcdFx0aWYgKHN1YnNlY3Rpb24gaW4gZGF0YSlcblx0XHRcdFx0XHRyZXR1cm4gZGF0YVtzdWJzZWN0aW9uXTtcblxuXHRcdFx0XHRkYXRhID0gdGhpcy5nZXRTZWN0aW9uKGRhdGFbJ2V4dGVuZHMnXSk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlY3Vyc2l2ZWx5IHNlYXJjaGVzIGZvciBhIHNuaXBwZXQgZGVmaW5pdGlvbiBpbnNpZGUgc3ludGF4IHNlY3Rpb24uXG5cdFx0ICogRGVmaW5pdGlvbiBpcyBzZWFyY2hlZCBpbnNpZGUgYHNuaXBwZXRzYCBhbmQgYGFiYnJldmlhdGlvbnNgXG5cdFx0ICogc3Vic2VjdGlvbnNcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gc3ludGF4IFRvcC1sZXZlbCBzZWN0aW9uIG5hbWUgKHN5bnRheClcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBTbmlwcGV0IG5hbWVcblx0XHQgKiBAcmV0dXJucyB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdGZpbmRTbmlwcGV0OiBmdW5jdGlvbihzeW50YXgsIG5hbWUsIG1lbW8pIHtcblx0XHRcdGlmICghc3ludGF4IHx8ICFuYW1lKVxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdFx0bWVtbyA9IG1lbW8gfHwgW107XG5cblx0XHRcdHZhciBuYW1lcyA9IFtuYW1lXTtcblx0XHRcdC8vIGNyZWF0ZSBhdXRvbWF0aWMgYWxpYXNlcyB0byBwcm9wZXJ0aWVzIHdpdGggY29sb25zLFxuXHRcdFx0Ly8gZS5nLiBwb3MtYSA9PSBwb3M6YVxuXHRcdFx0aWYgKH5uYW1lLmluZGV4T2YoJy0nKSlcblx0XHRcdFx0bmFtZXMucHVzaChuYW1lLnJlcGxhY2UoL1xcLS9nLCAnOicpKTtcblxuXHRcdFx0dmFyIGRhdGEgPSB0aGlzLmdldFNlY3Rpb24oc3ludGF4KSwgbWF0Y2hlZEl0ZW0gPSBudWxsO1xuXHRcdFx0Xy5maW5kKFsnc25pcHBldHMnLCAnYWJicmV2aWF0aW9ucyddLCBmdW5jdGlvbihzZWN0aW9uTmFtZSkge1xuXHRcdFx0XHR2YXIgZGF0YSA9IHRoaXMuZ2V0U2VjdGlvbihzeW50YXgsIHNlY3Rpb25OYW1lKTtcblx0XHRcdFx0aWYgKGRhdGEpIHtcblx0XHRcdFx0XHRyZXR1cm4gXy5maW5kKG5hbWVzLCBmdW5jdGlvbihuKSB7XG5cdFx0XHRcdFx0XHRpZiAoZGF0YVtuXSlcblx0XHRcdFx0XHRcdFx0cmV0dXJuIG1hdGNoZWRJdGVtID0gcGFyc2VJdGVtKG4sIGRhdGFbbl0sIHNlY3Rpb25OYW1lKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgdGhpcyk7XG5cblx0XHRcdG1lbW8ucHVzaChzeW50YXgpO1xuXHRcdFx0aWYgKCFtYXRjaGVkSXRlbSAmJiBkYXRhWydleHRlbmRzJ10gJiYgIV8uaW5jbHVkZShtZW1vLCBkYXRhWydleHRlbmRzJ10pKSB7XG5cdFx0XHRcdC8vIHRyeSB0byBmaW5kIGl0ZW0gaW4gcGFyZW50IHN5bnRheCBzZWN0aW9uXG5cdFx0XHRcdHJldHVybiB0aGlzLmZpbmRTbmlwcGV0KGRhdGFbJ2V4dGVuZHMnXSwgbmFtZSwgbWVtbyk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaGVkSXRlbTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUGVyZm9ybXMgZnV6enkgc2VhcmNoIG9mIHNuaXBwZXQgZGVmaW5pdGlvblxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzeW50YXggVG9wLWxldmVsIHNlY3Rpb24gbmFtZSAoc3ludGF4KVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFNuaXBwZXQgbmFtZVxuXHRcdCAqIEByZXR1cm5zXG5cdFx0ICovXG5cdFx0ZnV6enlGaW5kU25pcHBldDogZnVuY3Rpb24oc3ludGF4LCBuYW1lLCBtaW5TY29yZSkge1xuXHRcdFx0bWluU2NvcmUgPSBtaW5TY29yZSB8fCAwLjM7XG5cblx0XHRcdHZhciBwYXlsb2FkID0gdGhpcy5nZXRBbGxTbmlwcGV0cyhzeW50YXgpO1xuXHRcdFx0dmFyIHNjID0gcmVxdWlyZSgnc3RyaW5nLXNjb3JlJyk7XG5cblx0XHRcdG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuXHRcdFx0dmFyIHNjb3JlcyA9IF8ubWFwKHBheWxvYWQsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRrZXk6IGtleSxcblx0XHRcdFx0XHRzY29yZTogc2Muc2NvcmUodmFsdWUubmssIG5hbWUsIDAuMSlcblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXG5cdFx0XHR2YXIgcmVzdWx0ID0gXy5sYXN0KF8uc29ydEJ5KHNjb3JlcywgJ3Njb3JlJykpO1xuXHRcdFx0aWYgKHJlc3VsdCAmJiByZXN1bHQuc2NvcmUgPj0gbWluU2NvcmUpIHtcblx0XHRcdFx0dmFyIGsgPSByZXN1bHQua2V5O1xuXHRcdFx0XHRyZXR1cm4gcGF5bG9hZFtrXS5wYXJzZWRWYWx1ZTtcbi8vXHRcdFx0XHRyZXR1cm4gcGFyc2VJdGVtKGssIHBheWxvYWRba10udmFsdWUsIHBheWxvYWRba10udHlwZSk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgcGxhaW4gZGljdGlvbmFyeSBvZiBhbGwgYXZhaWxhYmxlIGFiYnJldmlhdGlvbnMgYW5kIHNuaXBwZXRzXG5cdFx0ICogZm9yIHNwZWNpZmllZCBzeW50YXggd2l0aCByZXNwZWN0IG9mIGluaGVyaXRhbmNlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bnRheFxuXHRcdCAqIEByZXR1cm5zIHtPYmplY3R9XG5cdFx0ICovXG5cdFx0Z2V0QWxsU25pcHBldHM6IGZ1bmN0aW9uKHN5bnRheCkge1xuXHRcdFx0dmFyIGNhY2hlS2V5ID0gJ2FsbC0nICsgc3ludGF4O1xuXHRcdFx0aWYgKCFjYWNoZVtjYWNoZUtleV0pIHtcblx0XHRcdFx0dmFyIHN0YWNrID0gW10sIHNlY3Rpb25LZXkgPSBzeW50YXg7XG5cdFx0XHRcdHZhciBtZW1vID0gW107XG5cblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdHZhciBzZWN0aW9uID0gdGhpcy5nZXRTZWN0aW9uKHNlY3Rpb25LZXkpO1xuXHRcdFx0XHRcdGlmICghc2VjdGlvbilcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Xy5lYWNoKFsnc25pcHBldHMnLCAnYWJicmV2aWF0aW9ucyddLCBmdW5jdGlvbihzZWN0aW9uTmFtZSkge1xuXHRcdFx0XHRcdFx0dmFyIHN0YWNrSXRlbSA9IHt9O1xuXHRcdFx0XHRcdFx0Xy5lYWNoKHNlY3Rpb25bc2VjdGlvbk5hbWVdIHx8IG51bGwsIGZ1bmN0aW9uKHYsIGspIHtcblx0XHRcdFx0XHRcdFx0c3RhY2tJdGVtW2tdID0ge1xuXHRcdFx0XHRcdFx0XHRcdG5rOiBub3JtYWxpemVOYW1lKGspLFxuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiB2LFxuXHRcdFx0XHRcdFx0XHRcdHBhcnNlZFZhbHVlOiBwYXJzZUl0ZW0oaywgdiwgc2VjdGlvbk5hbWUpLFxuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IHNlY3Rpb25OYW1lXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0c3RhY2sucHVzaChzdGFja0l0ZW0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0bWVtby5wdXNoKHNlY3Rpb25LZXkpO1xuXHRcdFx0XHRcdHNlY3Rpb25LZXkgPSBzZWN0aW9uWydleHRlbmRzJ107XG5cdFx0XHRcdH0gd2hpbGUgKHNlY3Rpb25LZXkgJiYgIV8uaW5jbHVkZShtZW1vLCBzZWN0aW9uS2V5KSk7XG5cblxuXHRcdFx0XHRjYWNoZVtjYWNoZUtleV0gPSBfLmV4dGVuZC5hcHBseShfLCBzdGFjay5yZXZlcnNlKCkpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gY2FjaGVbY2FjaGVLZXldO1xuXHRcdH1cblx0fTtcbn0pOy8qKlxuICogTW9kdWxlIGRlc2NyaWJlcyBhbmQgcGVyZm9ybXMgRW1tZXQgYWN0aW9ucy4gVGhlIGFjdGlvbnMgdGhlbXNlbHZlcyBhcmVcbiAqIGRlZmluZWQgaW4gPGk+YWN0aW9uczwvaT4gZm9sZGVyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZGVmaW5lKCdhY3Rpb25zJywgZnVuY3Rpb24ocmVxdWlyZSwgXywgemMpIHtcblx0dmFyIGFjdGlvbnMgPSB7fTtcblxuXHQvKipcblx0ICog4oCcSHVtYW5pemVz4oCdIGFjdGlvbiBuYW1lLCBtYWtlcyBpdCBtb3JlIHJlYWRhYmxlIGZvciBwZW9wbGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgQWN0aW9uIG5hbWUgKGxpa2UgJ2V4cGFuZF9hYmJyZXZpYXRpb24nKVxuXHQgKiBAcmV0dXJuIEh1bWFuaXplZCBuYW1lIChsaWtlICdFeHBhbmQgQWJicmV2aWF0aW9uJylcblx0ICovXG5cdGZ1bmN0aW9uIGh1bWFuaXplQWN0aW9uTmFtZShuYW1lKSB7XG5cdFx0cmV0dXJuIHJlcXVpcmUoJ3V0aWxzJykudHJpbShuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpXG5cdFx0XHQrIG5hbWUuc3Vic3RyaW5nKDEpLnJlcGxhY2UoL19bYS16XS9nLCBmdW5jdGlvbihzdHIpIHtcblx0XHRcdFx0cmV0dXJuICcgJyArIHN0ci5jaGFyQXQoMSkudG9VcHBlckNhc2UoKTtcblx0XHRcdH0pKTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0LyoqXG5cdFx0ICogUmVnaXN0ZXJzIG5ldyBhY3Rpb25cblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBBY3Rpb24gbmFtZVxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEFjdGlvbiBmdW5jdGlvblxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIEN1c3RvbSBhY3Rpb24gb3B0aW9uczo8YnI+XG5cdFx0ICogPGI+bGFiZWw8L2I+IDogKDxjb2RlPlN0cmluZzwvY29kZT4pIOKAkyBIdW1hbi1yZWFkYWJsZSBhY3Rpb24gbmFtZS5cblx0XHQgKiBNYXkgY29udGFpbiAnLycgc3ltYm9scyBhcyBzdWJtZW51IHNlcGFyYXRvcnM8YnI+XG5cdFx0ICogPGI+aGlkZGVuPC9iPiA6ICg8Y29kZT5Cb29sZWFuPC9jb2RlPikg4oCTIEluZGljYXRlcyB3aGV0aGVyIGFjdGlvblxuXHRcdCAqIHNob3VsZCBiZSBkaXNwbGF5ZWQgaW4gbWVudSAoPGNvZGU+Z2V0TWVudSgpPC9jb2RlPiBtZXRob2QpXG5cdFx0ICpcblx0XHQgKiBAbWVtYmVyT2YgYWN0aW9uc1xuXHRcdCAqL1xuXHRcdGFkZDogZnVuY3Rpb24obmFtZSwgZm4sIG9wdGlvbnMpIHtcblx0XHRcdG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XHRcdGlmICghb3B0aW9ucy5sYWJlbCkge1xuXHRcdFx0XHRvcHRpb25zLmxhYmVsID0gaHVtYW5pemVBY3Rpb25OYW1lKG5hbWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRhY3Rpb25zW25hbWVdID0ge1xuXHRcdFx0XHRuYW1lOiBuYW1lLFxuXHRcdFx0XHRmbjogZm4sXG5cdFx0XHRcdG9wdGlvbnM6IG9wdGlvbnNcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgYWN0aW9uIG9iamVjdFxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIEFjdGlvbiBuYW1lXG5cdFx0ICogQHJldHVybnMge09iamVjdH1cblx0XHQgKi9cblx0XHRnZXQ6IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdHJldHVybiBhY3Rpb25zW25hbWUudG9Mb3dlckNhc2UoKV07XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJ1bnMgRW1tZXQgYWN0aW9uLiBGb3IgbGlzdCBvZiBhdmFpbGFibGUgYWN0aW9ucyBhbmQgdGhlaXJcblx0XHQgKiBhcmd1bWVudHMgc2VlIDxpPmFjdGlvbnM8L2k+IGZvbGRlci5cblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBBY3Rpb24gbmFtZVxuXHRcdCAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgQWRkaXRpb25hbCBhcmd1bWVudHMuIEl0IG1heSBiZSBhcnJheSBvZiBhcmd1bWVudHNcblx0XHQgKiBvciBpbmxpbmUgYXJndW1lbnRzLiBUaGUgZmlyc3QgYXJndW1lbnQgc2hvdWxkIGJlIDxjb2RlPklFbW1ldEVkaXRvcjwvY29kZT4gaW5zdGFuY2Vcblx0XHQgKiBAcmV0dXJucyB7Qm9vbGVhbn0gU3RhdHVzIG9mIHBlcmZvcm1lZCBvcGVyYXRpb24sIDxjb2RlPnRydWU8L2NvZGU+XG5cdFx0ICogbWVhbnMgYWN0aW9uIHdhcyBwZXJmb3JtZWQgc3VjY2Vzc2Z1bGx5LlxuXHRcdCAqIEBleGFtcGxlXG5cdFx0ICogZW1tZXQucmVxdWlyZSgnYWN0aW9ucycpLnJ1bignZXhwYW5kX2FiYnJldmlhdGlvbicsIGVkaXRvcik7XG5cdFx0ICogZW1tZXQucmVxdWlyZSgnYWN0aW9ucycpLnJ1bignd3JhcF93aXRoX2FiYnJldmlhdGlvbicsIFtlZGl0b3IsICdkaXYnXSk7XG5cdFx0ICovXG5cdFx0cnVuOiBmdW5jdGlvbihuYW1lLCBhcmdzKSB7XG5cdFx0XHRpZiAoIV8uaXNBcnJheShhcmdzKSkge1xuXHRcdFx0XHRhcmdzID0gXy5yZXN0KGFyZ3VtZW50cyk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBhY3Rpb24gPSB0aGlzLmdldChuYW1lKTtcblx0XHRcdGlmIChhY3Rpb24pIHtcblx0XHRcdFx0cmV0dXJuIGFjdGlvbi5mbi5hcHBseShlbW1ldCwgYXJncyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbW1ldC5sb2coJ0FjdGlvbiBcIiVzXCIgaXMgbm90IGRlZmluZWQnLCBuYW1lKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGFsbCByZWdpc3RlcmVkIGFjdGlvbnMgYXMgb2JqZWN0XG5cdFx0ICogQHJldHVybnMge09iamVjdH1cblx0XHQgKi9cblx0XHRnZXRBbGw6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGFjdGlvbnM7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgYWxsIHJlZ2lzdGVyZWQgYWN0aW9ucyBhcyBhcnJheVxuXHRcdCAqIEByZXR1cm5zIHtBcnJheX1cblx0XHQgKi9cblx0XHRnZXRMaXN0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBfLnZhbHVlcyh0aGlzLmdldEFsbCgpKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBhY3Rpb25zIGxpc3QgYXMgc3RydWN0dXJlZCBtZW51LiBJZiBhY3Rpb24gaGFzIDxpPmxhYmVsPC9pPixcblx0XHQgKiBpdCB3aWxsIGJlIHNwbGl0dGVkIGJ5ICcvJyBzeW1ib2wgaW50byBzdWJtZW51cyAoZm9yIGV4YW1wbGU6XG5cdFx0ICogQ1NTL1JlZmxlY3QgVmFsdWUpIGFuZCBncm91cGVkIHdpdGggb3RoZXIgaXRlbXNcblx0XHQgKiBAcGFyYW0ge0FycmF5fSBza2lwQWN0aW9ucyBMaXN0IG9mIGFjdGlvbiBpZGVudGlmaWVycyB0aGF0IHNob3VsZCBiZVxuXHRcdCAqIHNraXBwZWQgZnJvbSBtZW51XG5cdFx0ICogQHJldHVybnMge0FycmF5fVxuXHRcdCAqL1xuXHRcdGdldE1lbnU6IGZ1bmN0aW9uKHNraXBBY3Rpb25zKSB7XG5cdFx0XHR2YXIgcmVzdWx0ID0gW107XG5cdFx0XHRza2lwQWN0aW9ucyA9IHNraXBBY3Rpb25zIHx8IFtdO1xuXHRcdFx0Xy5lYWNoKHRoaXMuZ2V0TGlzdCgpLCBmdW5jdGlvbihhY3Rpb24pIHtcblx0XHRcdFx0aWYgKGFjdGlvbi5vcHRpb25zLmhpZGRlbiB8fCBfLmluY2x1ZGUoc2tpcEFjdGlvbnMsIGFjdGlvbi5uYW1lKSlcblx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0dmFyIGFjdGlvbk5hbWUgPSBodW1hbml6ZUFjdGlvbk5hbWUoYWN0aW9uLm5hbWUpO1xuXHRcdFx0XHR2YXIgY3R4ID0gcmVzdWx0O1xuXHRcdFx0XHRpZiAoYWN0aW9uLm9wdGlvbnMubGFiZWwpIHtcblx0XHRcdFx0XHR2YXIgcGFydHMgPSBhY3Rpb24ub3B0aW9ucy5sYWJlbC5zcGxpdCgnLycpO1xuXHRcdFx0XHRcdGFjdGlvbk5hbWUgPSBwYXJ0cy5wb3AoKTtcblxuXHRcdFx0XHRcdC8vIGNyZWF0ZSBzdWJtZW51cywgaWYgbmVlZGVkXG5cdFx0XHRcdFx0dmFyIG1lbnVOYW1lLCBzdWJtZW51O1xuXHRcdFx0XHRcdHdoaWxlIChtZW51TmFtZSA9IHBhcnRzLnNoaWZ0KCkpIHtcblx0XHRcdFx0XHRcdHN1Ym1lbnUgPSBfLmZpbmQoY3R4LCBmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBpdGVtLnR5cGUgPT0gJ3N1Ym1lbnUnICYmIGl0ZW0ubmFtZSA9PSBtZW51TmFtZTtcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRpZiAoIXN1Ym1lbnUpIHtcblx0XHRcdFx0XHRcdFx0c3VibWVudSA9IHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lOiBtZW51TmFtZSxcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnc3VibWVudScsXG5cdFx0XHRcdFx0XHRcdFx0aXRlbXM6IFtdXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdGN0eC5wdXNoKHN1Ym1lbnUpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjdHggPSBzdWJtZW51Lml0ZW1zO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGN0eC5wdXNoKHtcblx0XHRcdFx0XHR0eXBlOiAnYWN0aW9uJyxcblx0XHRcdFx0XHRuYW1lOiBhY3Rpb24ubmFtZSxcblx0XHRcdFx0XHRsYWJlbDogYWN0aW9uTmFtZVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGFjdGlvbiBuYW1lIGFzc29jaWF0ZWQgd2l0aCBtZW51IGl0ZW0gdGl0bGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGdldEFjdGlvbk5hbWVGb3JNZW51VGl0bGU6IGZ1bmN0aW9uKHRpdGxlLCBtZW51KSB7XG5cdFx0XHR2YXIgaXRlbSA9IG51bGw7XG5cdFx0XHRfLmZpbmQobWVudSB8fCB0aGlzLmdldE1lbnUoKSwgZnVuY3Rpb24odmFsKSB7XG5cdFx0XHRcdGlmICh2YWwudHlwZSA9PSAnYWN0aW9uJykge1xuXHRcdFx0XHRcdGlmICh2YWwubGFiZWwgPT0gdGl0bGUgfHwgdmFsLm5hbWUgPT0gdGl0bGUpIHtcblx0XHRcdFx0XHRcdHJldHVybiBpdGVtID0gdmFsLm5hbWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBpdGVtID0gdGhpcy5nZXRBY3Rpb25OYW1lRm9yTWVudVRpdGxlKHRpdGxlLCB2YWwuaXRlbXMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB0aGlzKTtcblxuXHRcdFx0cmV0dXJuIGl0ZW0gfHwgbnVsbDtcblx0XHR9XG5cdH07XG59KTsvKipcbiAqIE91dHB1dCBwcm9maWxlIG1vZHVsZS5cbiAqIFByb2ZpbGUgZGVmaW5lcyBob3cgWEhUTUwgb3V0cHV0IGRhdGEgc2hvdWxkIGxvb2sgbGlrZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmRlZmluZSgncHJvZmlsZScsIGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0dmFyIHByb2ZpbGVzID0ge307XG5cblx0dmFyIGRlZmF1bHRQcm9maWxlID0ge1xuXHRcdHRhZ19jYXNlOiAnYXNpcycsXG5cdFx0YXR0cl9jYXNlOiAnYXNpcycsXG5cdFx0YXR0cl9xdW90ZXM6ICdkb3VibGUnLFxuXG5cdFx0Ly8gZWFjaCB0YWcgb24gbmV3IGxpbmVcblx0XHR0YWdfbmw6ICdkZWNpZGUnLFxuXG5cdFx0Ly8gd2l0aCB0YWdfbmwgPT09IHRydWUsIGRlZmluZXMgaWYgbGVhZiBub2RlIChlLmcuIG5vZGUgd2l0aCBubyBjaGlsZHJlbilcblx0XHQvLyBzaG91bGQgaGF2ZSBmb3JtYXR0ZWQgbGluZSBicmVha3Ncblx0XHR0YWdfbmxfbGVhZjogZmFsc2UsXG5cblx0XHRwbGFjZV9jdXJzb3I6IHRydWUsXG5cblx0XHQvLyBpbmRlbnQgdGFnc1xuXHRcdGluZGVudDogdHJ1ZSxcblxuXHRcdC8vIGhvdyBtYW55IGlubGluZSBlbGVtZW50cyBzaG91bGQgYmUgdG8gZm9yY2UgbGluZSBicmVha1xuXHRcdC8vIChzZXQgdG8gMCB0byBkaXNhYmxlKVxuXHRcdGlubGluZV9icmVhazogMyxcblxuXHRcdC8vIHVzZSBzZWxmLWNsb3Npbmcgc3R5bGUgZm9yIHdyaXRpbmcgZW1wdHkgZWxlbWVudHMsIGUuZy4gPGJyIC8+IG9yIDxicj5cblx0XHRzZWxmX2Nsb3NpbmdfdGFnOiAneGh0bWwnLFxuXG5cdFx0Ly8gUHJvZmlsZS1sZXZlbCBvdXRwdXQgZmlsdGVycywgcmUtZGVmaW5lcyBzeW50YXggZmlsdGVyc1xuXHRcdGZpbHRlcnM6ICcnLFxuXG5cdFx0Ly8gQWRkaXRpb25hbCBmaWx0ZXJzIGFwcGxpZWQgdG8gYWJicmV2aWF0aW9uLlxuXHRcdC8vIFVubGlrZSBcImZpbHRlcnNcIiwgdGhpcyBwcmVmZXJlbmNlIGRvZXNuJ3Qgb3ZlcnJpZGUgZGVmYXVsdCBmaWx0ZXJzXG5cdFx0Ly8gYnV0IGFkZCB0aGUgaW5zdGVhZCBldmVyeSB0aW1lIGdpdmVuIHByb2ZpbGUgaXMgY2hvc2VuXG5cdFx0ZXh0cmFGaWx0ZXJzOiAnJ1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHR5cGUgT3V0cHV0UHJvZmlsZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0ZnVuY3Rpb24gT3V0cHV0UHJvZmlsZShvcHRpb25zKSB7XG5cdFx0Xy5leHRlbmQodGhpcywgZGVmYXVsdFByb2ZpbGUsIG9wdGlvbnMpO1xuXHR9XG5cblx0T3V0cHV0UHJvZmlsZS5wcm90b3R5cGUgPSB7XG5cdFx0LyoqXG5cdFx0ICogVHJhbnNmb3JtcyB0YWcgbmFtZSBjYXNlIGRlcGVuZGluZyBvbiBjdXJyZW50IHByb2ZpbGUgc2V0dGluZ3Ncblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBTdHJpbmcgdG8gdHJhbnNmb3JtXG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHR0YWdOYW1lOiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRyZXR1cm4gc3RyaW5nQ2FzZShuYW1lLCB0aGlzLnRhZ19jYXNlKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVHJhbnNmb3JtcyBhdHRyaWJ1dGUgbmFtZSBjYXNlIGRlcGVuZGluZyBvbiBjdXJyZW50IHByb2ZpbGUgc2V0dGluZ3Ncblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBTdHJpbmcgdG8gdHJhbnNmb3JtXG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRhdHRyaWJ1dGVOYW1lOiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRyZXR1cm4gc3RyaW5nQ2FzZShuYW1lLCB0aGlzLmF0dHJfY2FzZSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgcXVvdGUgY2hhcmFjdGVyIGZvciBjdXJyZW50IHByb2ZpbGVcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGF0dHJpYnV0ZVF1b3RlOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLmF0dHJfcXVvdGVzID09ICdzaW5nbGUnID8gXCInXCIgOiAnXCInO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHNlbGYtY2xvc2luZyB0YWcgc3ltYm9sIGZvciBjdXJyZW50IHByb2ZpbGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gcGFyYW1cblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdHNlbGZDbG9zaW5nOiBmdW5jdGlvbihwYXJhbSkge1xuXHRcdFx0aWYgKHRoaXMuc2VsZl9jbG9zaW5nX3RhZyA9PSAneGh0bWwnKVxuXHRcdFx0XHRyZXR1cm4gJyAvJztcblxuXHRcdFx0aWYgKHRoaXMuc2VsZl9jbG9zaW5nX3RhZyA9PT0gdHJ1ZSlcblx0XHRcdFx0cmV0dXJuICcvJztcblxuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGN1cnNvciB0b2tlbiBiYXNlZCBvbiBjdXJyZW50IHByb2ZpbGUgc2V0dGluZ3Ncblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGN1cnNvcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wbGFjZV9jdXJzb3IgPyByZXF1aXJlKCd1dGlscycpLmdldENhcmV0UGxhY2Vob2xkZXIoKSA6ICcnO1xuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgY29udmVydHMgc3RyaW5nIGNhc2UgZGVwZW5kaW5nIG9uXG5cdCAqIDxjb2RlPmNhc2VWYWx1ZTwvY29kZT5cblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0ciBTdHJpbmcgdG8gdHJhbnNmb3JtXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjYXNlVmFsdWUgQ2FzZSB2YWx1ZTogY2FuIGJlIDxpPmxvd2VyPC9pPixcblx0ICogPGk+dXBwZXI8L2k+IGFuZCA8aT5sZWF2ZTwvaT5cblx0ICogQHJldHVybnMge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIHN0cmluZ0Nhc2Uoc3RyLCBjYXNlVmFsdWUpIHtcblx0XHRzd2l0Y2ggKFN0cmluZyhjYXNlVmFsdWUgfHwgJycpLnRvTG93ZXJDYXNlKCkpIHtcblx0XHRcdGNhc2UgJ2xvd2VyJzpcblx0XHRcdFx0cmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0Y2FzZSAndXBwZXInOlxuXHRcdFx0XHRyZXR1cm4gc3RyLnRvVXBwZXJDYXNlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHN0cjtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIG5ldyBvdXRwdXQgcHJvZmlsZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBQcm9maWxlIG5hbWVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgUHJvZmlsZSBvcHRpb25zXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVQcm9maWxlKG5hbWUsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gcHJvZmlsZXNbbmFtZS50b0xvd2VyQ2FzZSgpXSA9IG5ldyBPdXRwdXRQcm9maWxlKG9wdGlvbnMpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlRGVmYXVsdFByb2ZpbGVzKCkge1xuXHRcdGNyZWF0ZVByb2ZpbGUoJ3hodG1sJyk7XG5cdFx0Y3JlYXRlUHJvZmlsZSgnaHRtbCcsIHtzZWxmX2Nsb3NpbmdfdGFnOiBmYWxzZX0pO1xuXHRcdGNyZWF0ZVByb2ZpbGUoJ3htbCcsIHtzZWxmX2Nsb3NpbmdfdGFnOiB0cnVlLCB0YWdfbmw6IHRydWV9KTtcblx0XHRjcmVhdGVQcm9maWxlKCdwbGFpbicsIHt0YWdfbmw6IGZhbHNlLCBpbmRlbnQ6IGZhbHNlLCBwbGFjZV9jdXJzb3I6IGZhbHNlfSk7XG5cdFx0Y3JlYXRlUHJvZmlsZSgnbGluZScsIHt0YWdfbmw6IGZhbHNlLCBpbmRlbnQ6IGZhbHNlLCBleHRyYUZpbHRlcnM6ICdzJ30pO1xuXHR9XG5cblx0Y3JlYXRlRGVmYXVsdFByb2ZpbGVzKCk7XG5cblx0cmV0dXJuICB7XG5cdFx0LyoqXG5cdFx0ICogQ3JlYXRlcyBuZXcgb3V0cHV0IHByb2ZpbGUgYW5kIGFkZHMgaXQgaW50byBpbnRlcm5hbCBkaWN0aW9uYXJ5XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgUHJvZmlsZSBuYW1lXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgUHJvZmlsZSBvcHRpb25zXG5cdFx0ICogQG1lbWJlck9mIGVtbWV0LnByb2ZpbGVcblx0XHQgKiBAcmV0dXJucyB7T2JqZWN0fSBOZXcgcHJvZmlsZVxuXHRcdCAqL1xuXHRcdGNyZWF0ZTogZnVuY3Rpb24obmFtZSwgb3B0aW9ucykge1xuXHRcdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMilcblx0XHRcdFx0cmV0dXJuIGNyZWF0ZVByb2ZpbGUobmFtZSwgb3B0aW9ucyk7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdC8vIGNyZWF0ZSBwcm9maWxlIG9iamVjdCBvbmx5XG5cdFx0XHRcdHJldHVybiBuZXcgT3V0cHV0UHJvZmlsZShfLmRlZmF1bHRzKG5hbWUgfHwge30sIGRlZmF1bHRQcm9maWxlKSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgcHJvZmlsZSBieSBpdHMgbmFtZS4gSWYgcHJvZmlsZSB3YXNuJ3QgZm91bmQsIHJldHVybnNcblx0XHQgKiAncGxhaW4nIHByb2ZpbGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBQcm9maWxlIG5hbWUuIE1pZ2h0IGJlIHByb2ZpbGUgaXRzZWxmXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bnRheC4gT3B0aW9uYWwuIEN1cnJlbnQgZWRpdG9yIHN5bnRheC4gSWYgZGVmaW5lZCxcblx0XHQgKiBwcm9maWxlIGlzIHNlYXJjaGVkIGluIHJlc291cmNlcyBmaXJzdCwgdGhlbiBpbiBwcmVkZWZpbmVkIHByb2ZpbGVzXG5cdFx0ICogQHJldHVybnMge09iamVjdH1cblx0XHQgKi9cblx0XHRnZXQ6IGZ1bmN0aW9uKG5hbWUsIHN5bnRheCkge1xuXHRcdFx0aWYgKCFuYW1lICYmIHN5bnRheCkge1xuXHRcdFx0XHQvLyBzZWFyY2ggaW4gdXNlciByZXNvdXJjZXMgZmlyc3Rcblx0XHRcdFx0dmFyIHByb2ZpbGUgPSByZXF1aXJlKCdyZXNvdXJjZXMnKS5maW5kSXRlbShzeW50YXgsICdwcm9maWxlJyk7XG5cdFx0XHRcdGlmIChwcm9maWxlKSB7XG5cdFx0XHRcdFx0bmFtZSA9IHByb2ZpbGU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCFuYW1lKSB7XG5cdFx0XHRcdHJldHVybiBwcm9maWxlcy5wbGFpbjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKG5hbWUgaW5zdGFuY2VvZiBPdXRwdXRQcm9maWxlKSB7XG5cdFx0XHRcdHJldHVybiBuYW1lO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoXy5pc1N0cmluZyhuYW1lKSAmJiBuYW1lLnRvTG93ZXJDYXNlKCkgaW4gcHJvZmlsZXMpIHtcblx0XHRcdFx0cmV0dXJuIHByb2ZpbGVzW25hbWUudG9Mb3dlckNhc2UoKV07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzLmNyZWF0ZShuYW1lKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogRGVsZXRlcyBwcm9maWxlIHdpdGggc3BlY2lmaWVkIG5hbWVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBQcm9maWxlIG5hbWVcblx0XHQgKi9cblx0XHRyZW1vdmU6IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdG5hbWUgPSAobmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKTtcblx0XHRcdGlmIChuYW1lIGluIHByb2ZpbGVzKVxuXHRcdFx0XHRkZWxldGUgcHJvZmlsZXNbbmFtZV07XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlc2V0cyBhbGwgdXNlci1kZWZpbmVkIHByb2ZpbGVzXG5cdFx0ICovXG5cdFx0cmVzZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cHJvZmlsZXMgPSB7fTtcblx0XHRcdGNyZWF0ZURlZmF1bHRQcm9maWxlcygpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBjb252ZXJ0cyBzdHJpbmcgY2FzZSBkZXBlbmRpbmcgb25cblx0XHQgKiA8Y29kZT5jYXNlVmFsdWU8L2NvZGU+XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN0ciBTdHJpbmcgdG8gdHJhbnNmb3JtXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGNhc2VWYWx1ZSBDYXNlIHZhbHVlOiBjYW4gYmUgPGk+bG93ZXI8L2k+LFxuXHRcdCAqIDxpPnVwcGVyPC9pPiBhbmQgPGk+bGVhdmU8L2k+XG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRzdHJpbmdDYXNlOiBzdHJpbmdDYXNlXG5cdH07XG59KTsvKipcbiAqIFV0aWxpdHkgbW9kdWxlIHVzZWQgdG8gcHJlcGFyZSB0ZXh0IGZvciBwYXN0aW5nIGludG8gYmFjay1lbmQgZWRpdG9yXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqIEBhdXRob3IgU2VyZ2V5IENoaWt1eW9ub2sgKHNlcmdlLmNoZUBnbWFpbC5jb20pIDxodHRwOi8vY2hpa3V5b25vay5ydT5cbiAqL1xuZW1tZXQuZGVmaW5lKCdlZGl0b3JVdGlscycsIGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0cmV0dXJuICB7XG5cdFx0LyoqXG5cdFx0ICogQ2hlY2sgaWYgY3Vyc29yIGlzIHBsYWNlZCBpbnNpZGUgWEhUTUwgdGFnXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGh0bWwgQ29udGVudHMgb2YgdGhlIGRvY3VtZW50XG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IGNhcmV0UG9zIEN1cnJlbnQgY2FyZXQgcG9zaXRpb24gaW5zaWRlIHRhZ1xuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aXNJbnNpZGVUYWc6IGZ1bmN0aW9uKGh0bWwsIGNhcmV0UG9zKSB7XG5cdFx0XHR2YXIgcmVUYWcgPSAvXjxcXC8/XFx3W1xcd1xcOlxcLV0qLio/Pi87XG5cblx0XHRcdC8vIHNlYXJjaCBsZWZ0IHRvIGZpbmQgb3BlbmluZyBicmFjZVxuXHRcdFx0dmFyIHBvcyA9IGNhcmV0UG9zO1xuXHRcdFx0d2hpbGUgKHBvcyA+IC0xKSB7XG5cdFx0XHRcdGlmIChodG1sLmNoYXJBdChwb3MpID09ICc8Jylcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0cG9zLS07XG5cdFx0XHR9XG5cblx0XHRcdGlmIChwb3MgIT0gLTEpIHtcblx0XHRcdFx0dmFyIG0gPSByZVRhZy5leGVjKGh0bWwuc3Vic3RyaW5nKHBvcykpO1xuXHRcdFx0XHRpZiAobSAmJiBjYXJldFBvcyA+IHBvcyAmJiBjYXJldFBvcyA8IHBvcyArIG1bMF0ubGVuZ3RoKVxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFNhbml0aXplcyBpbmNvbWluZyBlZGl0b3IgZGF0YSBhbmQgcHJvdmlkZXMgZGVmYXVsdCB2YWx1ZXMgZm9yXG5cdFx0ICogb3V0cHV0LXNwZWNpZmljIGluZm9cblx0XHQgKiBAcGFyYW0ge0lFbW1ldEVkaXRvcn0gZWRpdG9yXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bnRheFxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9maWxlXG5cdFx0ICovXG5cdFx0b3V0cHV0SW5mbzogZnVuY3Rpb24oZWRpdG9yLCBzeW50YXgsIHByb2ZpbGUpIHtcblx0XHRcdC8vIG1vc3Qgb2YgdGhpcyBjb2RlIG1ha2VzIHNlbnNlIGZvciBKYXZhL1JoaW5vIGVudmlyb25tZW50XG5cdFx0XHQvLyBiZWNhdXNlIHN0cmluZyB0aGF0IGNvbWVzIGZyb20gSmF2YSBhcmUgbm90IGFjdHVhbGx5IEpTIHN0cmluZ1xuXHRcdFx0Ly8gYnV0IEphdmEgU3RyaW5nIG9iamVjdCBzbyB0aGUgaGF2ZSB0byBiZSBleHBsaWNpdGx5IGNvbnZlcnRlZFxuXHRcdFx0Ly8gdG8gbmF0aXZlIHN0cmluZ1xuXHRcdFx0cHJvZmlsZSA9IHByb2ZpbGUgfHwgZWRpdG9yLmdldFByb2ZpbGVOYW1lKCk7XG5cdFx0XHRyZXR1cm4gIHtcblx0XHRcdFx0LyoqIEBtZW1iZXJPZiBvdXRwdXRJbmZvICovXG5cdFx0XHRcdHN5bnRheDogU3RyaW5nKHN5bnRheCB8fCBlZGl0b3IuZ2V0U3ludGF4KCkpLFxuXHRcdFx0XHRwcm9maWxlOiBwcm9maWxlIHx8IG51bGwsXG5cdFx0XHRcdGNvbnRlbnQ6IFN0cmluZyhlZGl0b3IuZ2V0Q29udGVudCgpKVxuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVW5pbmRlbnQgY29udGVudCwgdGh1cyBwcmVwYXJpbmcgdGV4dCBmb3IgdGFnIHdyYXBwaW5nXG5cdFx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvciBFZGl0b3IgaW5zdGFuY2Vcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHR1bmluZGVudDogZnVuY3Rpb24oZWRpdG9yLCB0ZXh0KSB7XG5cdFx0XHRyZXR1cm4gcmVxdWlyZSgndXRpbHMnKS51bmluZGVudFN0cmluZyh0ZXh0LCB0aGlzLmdldEN1cnJlbnRMaW5lUGFkZGluZyhlZGl0b3IpKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBwYWRkaW5nIG9mIGN1cnJlbnQgZWRpdG9yJ3MgbGluZVxuXHRcdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBFZGl0b3IgaW5zdGFuY2Vcblx0XHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0Z2V0Q3VycmVudExpbmVQYWRkaW5nOiBmdW5jdGlvbihlZGl0b3IpIHtcblx0XHRcdHJldHVybiByZXF1aXJlKCd1dGlscycpLmdldExpbmVQYWRkaW5nKGVkaXRvci5nZXRDdXJyZW50TGluZSgpKTtcblx0XHR9XG5cdH07XG59KTtcbi8qKlxuICogVXRpbGl0eSBtZXRob2RzIGZvciBFbW1ldCBhY3Rpb25zXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqIEBhdXRob3IgU2VyZ2V5IENoaWt1eW9ub2sgKHNlcmdlLmNoZUBnbWFpbC5jb20pIDxodHRwOi8vY2hpa3V5b25vay5ydT5cbiAqL1xuZW1tZXQuZGVmaW5lKCdhY3Rpb25VdGlscycsIGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0cmV0dXJuIHtcblx0XHRtaW1lVHlwZXM6IHtcblx0XHRcdCdnaWYnIDogJ2ltYWdlL2dpZicsXG5cdFx0XHQncG5nJyA6ICdpbWFnZS9wbmcnLFxuXHRcdFx0J2pwZycgOiAnaW1hZ2UvanBlZycsXG5cdFx0XHQnanBlZyc6ICdpbWFnZS9qcGVnJyxcblx0XHRcdCdzdmcnIDogJ2ltYWdlL3N2Zyt4bWwnLFxuXHRcdFx0J2h0bWwnOiAndGV4dC9odG1sJyxcblx0XHRcdCdodG0nIDogJ3RleHQvaHRtbCdcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogRXh0cmFjdHMgYWJicmV2aWF0aW9ucyBmcm9tIHRleHQgc3RyZWFtLCBzdGFydGluZyBmcm9tIHRoZSBlbmRcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdFx0ICogQHJldHVybiB7U3RyaW5nfSBBYmJyZXZpYXRpb24gb3IgZW1wdHkgc3RyaW5nXG5cdFx0ICogQG1lbWJlck9mIGVtbWV0LmFjdGlvblV0aWxzXG5cdFx0ICovXG5cdFx0ZXh0cmFjdEFiYnJldmlhdGlvbjogZnVuY3Rpb24oc3RyKSB7XG5cdFx0XHR2YXIgY3VyT2Zmc2V0ID0gc3RyLmxlbmd0aDtcblx0XHRcdHZhciBzdGFydEluZGV4ID0gLTE7XG5cdFx0XHR2YXIgZ3JvdXBDb3VudCA9IDA7XG5cdFx0XHR2YXIgYnJhY2VDb3VudCA9IDA7XG5cdFx0XHR2YXIgdGV4dENvdW50ID0gMDtcblxuXHRcdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblx0XHRcdHZhciBwYXJzZXIgPSByZXF1aXJlKCdhYmJyZXZpYXRpb25QYXJzZXInKTtcblxuXHRcdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdFx0Y3VyT2Zmc2V0LS07XG5cdFx0XHRcdGlmIChjdXJPZmZzZXQgPCAwKSB7XG5cdFx0XHRcdFx0Ly8gbW92ZWQgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbGluZVxuXHRcdFx0XHRcdHN0YXJ0SW5kZXggPSAwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIGNoID0gc3RyLmNoYXJBdChjdXJPZmZzZXQpO1xuXG5cdFx0XHRcdGlmIChjaCA9PSAnXScpIHtcblx0XHRcdFx0XHRicmFjZUNvdW50Kys7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2ggPT0gJ1snKSB7XG5cdFx0XHRcdFx0aWYgKCFicmFjZUNvdW50KSB7IC8vIHVuZXhwZWN0ZWQgYnJhY2Vcblx0XHRcdFx0XHRcdHN0YXJ0SW5kZXggPSBjdXJPZmZzZXQgKyAxO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyYWNlQ291bnQtLTtcblx0XHRcdFx0fSBlbHNlIGlmIChjaCA9PSAnfScpIHtcblx0XHRcdFx0XHR0ZXh0Q291bnQrKztcblx0XHRcdFx0fSBlbHNlIGlmIChjaCA9PSAneycpIHtcblx0XHRcdFx0XHRpZiAoIXRleHRDb3VudCkgeyAvLyB1bmV4cGVjdGVkIGJyYWNlXG5cdFx0XHRcdFx0XHRzdGFydEluZGV4ID0gY3VyT2Zmc2V0ICsgMTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0ZXh0Q291bnQtLTtcblx0XHRcdFx0fSBlbHNlIGlmIChjaCA9PSAnKScpIHtcblx0XHRcdFx0XHRncm91cENvdW50Kys7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2ggPT0gJygnKSB7XG5cdFx0XHRcdFx0aWYgKCFncm91cENvdW50KSB7IC8vIHVuZXhwZWN0ZWQgYnJhY2Vcblx0XHRcdFx0XHRcdHN0YXJ0SW5kZXggPSBjdXJPZmZzZXQgKyAxO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGdyb3VwQ291bnQtLTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoYnJhY2VDb3VudCB8fCB0ZXh0Q291bnQpXG5cdFx0XHRcdFx0XHQvLyByZXNwZWN0IGFsbCBjaGFyYWN0ZXJzIGluc2lkZSBhdHRyaWJ1dGUgc2V0cyBvciB0ZXh0IG5vZGVzXG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRlbHNlIGlmICghcGFyc2VyLmlzQWxsb3dlZENoYXIoY2gpIHx8IChjaCA9PSAnPicgJiYgdXRpbHMuZW5kc1dpdGhUYWcoc3RyLnN1YnN0cmluZygwLCBjdXJPZmZzZXQgKyAxKSkpKSB7XG5cdFx0XHRcdFx0XHQvLyBmb3VuZCBzdG9wIHN5bWJvbFxuXHRcdFx0XHRcdFx0c3RhcnRJbmRleCA9IGN1ck9mZnNldCArIDE7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKHN0YXJ0SW5kZXggIT0gLTEgJiYgIXRleHRDb3VudCAmJiAhYnJhY2VDb3VudCAmJiAhZ3JvdXBDb3VudClcblx0XHRcdFx0Ly8gZm91bmQgc29tZXRoaW5nLCByZW1vdmUgc29tZSBpbnZhbGlkIHN5bWJvbHMgZnJvbSB0aGVcblx0XHRcdFx0Ly8gYmVnaW5uaW5nIGFuZCByZXR1cm4gYWJicmV2aWF0aW9uXG5cdFx0XHRcdHJldHVybiBzdHIuc3Vic3RyaW5nKHN0YXJ0SW5kZXgpLnJlcGxhY2UoL15bXFwqXFwrXFw+XFxeXSsvLCAnJyk7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdHJldHVybiAnJztcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogR2V0cyBpbWFnZSBzaXplIGZyb20gaW1hZ2UgYnl0ZSBzdHJlYW0uXG5cdFx0ICogQGF1dGhvciBodHRwOi8vcm9tZWRhLm9yZy9yZVB1Ymxpc2gvXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN0cmVhbSBJbWFnZSBieXRlIHN0cmVhbSAodXNlIDxjb2RlPklFbW1ldEZpbGUucmVhZCgpPC9jb2RlPilcblx0XHQgKiBAcmV0dXJuIHtPYmplY3R9IE9iamVjdCB3aXRoIDxjb2RlPndpZHRoPC9jb2RlPiBhbmQgPGNvZGU+aGVpZ2h0PC9jb2RlPiBwcm9wZXJ0aWVzXG5cdFx0ICovXG5cdFx0Z2V0SW1hZ2VTaXplOiBmdW5jdGlvbihzdHJlYW0pIHtcblx0XHRcdHZhciBwbmdNYWdpY051bSA9IFwiXFwyMTFQTkdcXHJcXG5cXDAzMlxcblwiLFxuXHRcdFx0XHRqcGdNYWdpY051bSA9IFwiXFwzNzdcXDMzMFwiLFxuXHRcdFx0XHRnaWZNYWdpY051bSA9IFwiR0lGOFwiLFxuXHRcdFx0XHRuZXh0Qnl0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBzdHJlYW0uY2hhckNvZGVBdChwb3MrKyk7XG5cdFx0XHRcdH07XG5cblx0XHRcdGlmIChzdHJlYW0uc3Vic3RyKDAsIDgpID09PSBwbmdNYWdpY051bSkge1xuXHRcdFx0XHQvLyBQTkcuIEVhc3kgcGVhc3kuXG5cdFx0XHRcdHZhciBwb3MgPSBzdHJlYW0uaW5kZXhPZignSUhEUicpICsgNDtcblxuXHRcdFx0XHRyZXR1cm4geyB3aWR0aDogIChuZXh0Qnl0ZSgpIDw8IDI0KSB8IChuZXh0Qnl0ZSgpIDw8IDE2KSB8XG5cdFx0XHRcdFx0XHRcdFx0IChuZXh0Qnl0ZSgpIDw8ICA4KSB8IG5leHRCeXRlKCksXG5cdFx0XHRcdFx0XHQgaGVpZ2h0OiAobmV4dEJ5dGUoKSA8PCAyNCkgfCAobmV4dEJ5dGUoKSA8PCAxNikgfFxuXHRcdFx0XHRcdFx0XHRcdCAobmV4dEJ5dGUoKSA8PCAgOCkgfCBuZXh0Qnl0ZSgpIH07XG5cblx0XHRcdH0gZWxzZSBpZiAoc3RyZWFtLnN1YnN0cigwLCA0KSA9PT0gZ2lmTWFnaWNOdW0pIHtcblx0XHRcdFx0cG9zID0gNjtcblxuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHdpZHRoOiAgbmV4dEJ5dGUoKSB8IChuZXh0Qnl0ZSgpIDw8IDgpLFxuXHRcdFx0XHRcdGhlaWdodDogbmV4dEJ5dGUoKSB8IChuZXh0Qnl0ZSgpIDw8IDgpXG5cdFx0XHRcdH07XG5cblx0XHRcdH0gZWxzZSBpZiAoc3RyZWFtLnN1YnN0cigwLCAyKSA9PT0ganBnTWFnaWNOdW0pIHtcblx0XHRcdFx0cG9zID0gMjtcblxuXHRcdFx0XHR2YXIgbCA9IHN0cmVhbS5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlIChwb3MgPCBsKSB7XG5cdFx0XHRcdFx0aWYgKG5leHRCeXRlKCkgIT0gMHhGRikgcmV0dXJuO1xuXG5cdFx0XHRcdFx0dmFyIG1hcmtlciA9IG5leHRCeXRlKCk7XG5cdFx0XHRcdFx0aWYgKG1hcmtlciA9PSAweERBKSBicmVhaztcblxuXHRcdFx0XHRcdHZhciBzaXplID0gKG5leHRCeXRlKCkgPDwgOCkgfCBuZXh0Qnl0ZSgpO1xuXG5cdFx0XHRcdFx0aWYgKG1hcmtlciA+PSAweEMwICYmIG1hcmtlciA8PSAweENGICYmICEobWFya2VyICYgMHg0KSAmJiAhKG1hcmtlciAmIDB4OCkpIHtcblx0XHRcdFx0XHRcdHBvcyArPSAxO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHsgaGVpZ2h0OiAgKG5leHRCeXRlKCkgPDwgOCkgfCBuZXh0Qnl0ZSgpLFxuXHRcdFx0XHRcdFx0XHRcdCB3aWR0aDogKG5leHRCeXRlKCkgPDwgOCkgfCBuZXh0Qnl0ZSgpIH07XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cG9zICs9IHNpemUgLSAyO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDYXB0dXJlcyBjb250ZXh0IFhIVE1MIGVsZW1lbnQgZnJvbSBlZGl0b3IgdW5kZXIgY3VycmVudCBjYXJldCBwb3NpdGlvbi5cblx0XHQgKiBUaGlzIG5vZGUgY2FuIGJlIHVzZWQgYXMgYSBoZWxwZXIgZm9yIGFiYnJldmlhdGlvbiBleHRyYWN0aW9uXG5cdFx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHRcdCAqIEByZXR1cm5zIHtPYmplY3R9XG5cdFx0ICovXG5cdFx0Y2FwdHVyZUNvbnRleHQ6IGZ1bmN0aW9uKGVkaXRvcikge1xuXHRcdFx0dmFyIGFsbG93ZWRTeW50YXhlcyA9IHsnaHRtbCc6IDEsICd4bWwnOiAxLCAneHNsJzogMX07XG5cdFx0XHR2YXIgc3ludGF4ID0gU3RyaW5nKGVkaXRvci5nZXRTeW50YXgoKSk7XG5cdFx0XHRpZiAoc3ludGF4IGluIGFsbG93ZWRTeW50YXhlcykge1xuXHRcdFx0XHR2YXIgY29udGVudCA9IFN0cmluZyhlZGl0b3IuZ2V0Q29udGVudCgpKTtcblx0XHRcdFx0dmFyIHRhZyA9IHJlcXVpcmUoJ2h0bWxNYXRjaGVyJykuZmluZChjb250ZW50LCBlZGl0b3IuZ2V0Q2FyZXRQb3MoKSk7XG5cblx0XHRcdFx0aWYgKHRhZyAmJiB0YWcudHlwZSA9PSAndGFnJykge1xuXHRcdFx0XHRcdHZhciBzdGFydFRhZyA9IHRhZy5vcGVuO1xuXHRcdFx0XHRcdHZhciBjb250ZXh0Tm9kZSA9IHtcblx0XHRcdFx0XHRcdG5hbWU6IHN0YXJ0VGFnLm5hbWUsXG5cdFx0XHRcdFx0XHRhdHRyaWJ1dGVzOiBbXVxuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHQvLyBwYXJzZSBhdHRyaWJ1dGVzXG5cdFx0XHRcdFx0dmFyIHRhZ1RyZWUgPSByZXF1aXJlKCd4bWxFZGl0VHJlZScpLnBhcnNlKHN0YXJ0VGFnLnJhbmdlLnN1YnN0cmluZyhjb250ZW50KSk7XG5cdFx0XHRcdFx0aWYgKHRhZ1RyZWUpIHtcblx0XHRcdFx0XHRcdGNvbnRleHROb2RlLmF0dHJpYnV0ZXMgPSBfLm1hcCh0YWdUcmVlLmdldEFsbCgpLCBmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZTogaXRlbS5uYW1lKCksXG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IGl0ZW0udmFsdWUoKVxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGNvbnRleHROb2RlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBGaW5kIGV4cHJlc3Npb24gYm91bmRzIGluIGN1cnJlbnQgZWRpdG9yIGF0IGNhcmV0IHBvc2l0aW9uLlxuXHRcdCAqIE9uIGVhY2ggY2hhcmFjdGVyIGEgPGNvZGU+Zm48L2NvZGU+IGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFuZCBtdXN0XG5cdFx0ICogcmV0dXJuIDxjb2RlPnRydWU8L2NvZGU+IGlmIGN1cnJlbnQgY2hhcmFjdGVyIG1lZXRzIHJlcXVpcmVtZW50cyxcblx0XHQgKiA8Y29kZT5mYWxzZTwvY29kZT4gb3RoZXJ3aXNlXG5cdFx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBjaGFyYWN0ZXIgb2YgZXhwcmVzc2lvblxuXHRcdCAqIEByZXR1cm4ge1JhbmdlfVxuXHRcdCAqL1xuXHRcdGZpbmRFeHByZXNzaW9uQm91bmRzOiBmdW5jdGlvbihlZGl0b3IsIGZuKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IFN0cmluZyhlZGl0b3IuZ2V0Q29udGVudCgpKTtcblx0XHRcdHZhciBpbCA9IGNvbnRlbnQubGVuZ3RoO1xuXHRcdFx0dmFyIGV4cHJTdGFydCA9IGVkaXRvci5nZXRDYXJldFBvcygpIC0gMTtcblx0XHRcdHZhciBleHByRW5kID0gZXhwclN0YXJ0ICsgMTtcblxuXHRcdFx0Ly8gc3RhcnQgYnkgc2VhcmNoaW5nIGxlZnRcblx0XHRcdHdoaWxlIChleHByU3RhcnQgPj0gMCAmJiBmbihjb250ZW50LmNoYXJBdChleHByU3RhcnQpLCBleHByU3RhcnQsIGNvbnRlbnQpKSBleHByU3RhcnQtLTtcblxuXHRcdFx0Ly8gdGhlbiBzZWFyY2ggcmlnaHRcblx0XHRcdHdoaWxlIChleHByRW5kIDwgaWwgJiYgZm4oY29udGVudC5jaGFyQXQoZXhwckVuZCksIGV4cHJFbmQsIGNvbnRlbnQpKSBleHByRW5kKys7XG5cblx0XHRcdGlmIChleHByRW5kID4gZXhwclN0YXJ0KSB7XG5cdFx0XHRcdHJldHVybiByZXF1aXJlKCdyYW5nZScpLmNyZWF0ZShbKytleHByU3RhcnQsIGV4cHJFbmRdKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0Y29tcG91bmRVcGRhdGU6IGZ1bmN0aW9uKGVkaXRvciwgZGF0YSkge1xuXHRcdFx0aWYgKGRhdGEpIHtcblx0XHRcdFx0dmFyIHNlbCA9IGVkaXRvci5nZXRTZWxlY3Rpb25SYW5nZSgpO1xuXHRcdFx0XHRlZGl0b3IucmVwbGFjZUNvbnRlbnQoZGF0YS5kYXRhLCBkYXRhLnN0YXJ0LCBkYXRhLmVuZCwgdHJ1ZSk7XG5cdFx0XHRcdGVkaXRvci5jcmVhdGVTZWxlY3Rpb24oZGF0YS5jYXJldCwgZGF0YS5jYXJldCArIHNlbC5lbmQgLSBzZWwuc3RhcnQpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDb21tb24gc3ludGF4IGRldGVjdGlvbiBtZXRob2QgZm9yIGVkaXRvcnMgdGhhdCBkb2VzbuKAmXQgcHJvdmlkZSBhbnlcblx0XHQgKiBpbmZvIGFib3V0IGN1cnJlbnQgc3ludGF4IHNjb3BlLlxuXHRcdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3IgQ3VycmVudCBlZGl0b3Jcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gaGludCBBbnkgc3ludGF4IGhpbnQgdGhhdCBlZGl0b3IgY2FuIHByb3ZpZGVcblx0XHQgKiBmb3Igc3ludGF4IGRldGVjdGlvbi4gRGVmYXVsdCBpcyAnaHRtbCdcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGRldGVjdFN5bnRheDogZnVuY3Rpb24oZWRpdG9yLCBoaW50KSB7XG5cdFx0XHR2YXIgc3ludGF4ID0gaGludCB8fCAnaHRtbCc7XG5cblx0XHRcdGlmICghcmVxdWlyZSgncmVzb3VyY2VzJykuaGFzU3ludGF4KHN5bnRheCkpIHtcblx0XHRcdFx0c3ludGF4ID0gJ2h0bWwnO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc3ludGF4ID09ICdodG1sJyAmJiAodGhpcy5pc1N0eWxlKGVkaXRvcikgfHwgdGhpcy5pc0lubGluZUNTUyhlZGl0b3IpKSkge1xuXHRcdFx0XHRzeW50YXggPSAnY3NzJztcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHN5bnRheDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ29tbW9uIG1ldGhvZCBmb3IgZGV0ZWN0aW5nIG91dHB1dCBwcm9maWxlXG5cdFx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0ZGV0ZWN0UHJvZmlsZTogZnVuY3Rpb24oZWRpdG9yKSB7XG5cdFx0XHR2YXIgc3ludGF4ID0gZWRpdG9yLmdldFN5bnRheCgpO1xuXG5cdFx0XHQvLyBnZXQgcHJvZmlsZSBmcm9tIHN5bnRheCBkZWZpbml0aW9uXG5cdFx0XHR2YXIgcHJvZmlsZSA9IHJlcXVpcmUoJ3Jlc291cmNlcycpLmZpbmRJdGVtKHN5bnRheCwgJ3Byb2ZpbGUnKTtcblx0XHRcdGlmIChwcm9maWxlKSB7XG5cdFx0XHRcdHJldHVybiBwcm9maWxlO1xuXHRcdFx0fVxuXG5cdFx0XHRzd2l0Y2goc3ludGF4KSB7XG5cdFx0XHRcdGNhc2UgJ3htbCc6XG5cdFx0XHRcdGNhc2UgJ3hzbCc6XG5cdFx0XHRcdFx0cmV0dXJuICd4bWwnO1xuXHRcdFx0XHRjYXNlICdjc3MnOlxuXHRcdFx0XHRcdGlmICh0aGlzLmlzSW5saW5lQ1NTKGVkaXRvcikpIHtcblx0XHRcdFx0XHRcdHJldHVybiAnbGluZSc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdodG1sJzpcblx0XHRcdFx0XHR2YXIgcHJvZmlsZSA9IHJlcXVpcmUoJ3Jlc291cmNlcycpLmdldFZhcmlhYmxlKCdwcm9maWxlJyk7XG5cdFx0XHRcdFx0aWYgKCFwcm9maWxlKSB7IC8vIG5vIGZvcmNlZCBwcm9maWxlLCBndWVzcyBmcm9tIGNvbnRlbnRcblx0XHRcdFx0XHRcdC8vIGh0bWwgb3IgeGh0bWw/XG5cdFx0XHRcdFx0XHRwcm9maWxlID0gdGhpcy5pc1hIVE1MKGVkaXRvcikgPyAneGh0bWwnOiAnaHRtbCc7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHByb2ZpbGU7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAneGh0bWwnO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBUcmllcyB0byBkZXRlY3QgaWYgY3VycmVudCBkb2N1bWVudCBpcyBYSFRNTCBvbmUuXG5cdFx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHRcdCAqIEByZXR1cm5zIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdGlzWEhUTUw6IGZ1bmN0aW9uKGVkaXRvcikge1xuXHRcdFx0cmV0dXJuIGVkaXRvci5nZXRDb250ZW50KCkuc2VhcmNoKC88IURPQ1RZUEVbXj5dK1hIVE1ML2kpICE9IC0xO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDaGVjayBpZiBjdXJyZW50IGNhcmV0IHBvc2l0aW9uIGlzIGluc2lkZSAmbHQ7c3R5bGUmZ3Q7IHRhZ1xuXHRcdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3Jcblx0XHQgKiBAcmV0dXJuc1xuXHRcdCAqL1xuXHRcdGlzU3R5bGU6IGZ1bmN0aW9uKGVkaXRvcikge1xuXHRcdFx0dmFyIGNvbnRlbnQgPSBTdHJpbmcoZWRpdG9yLmdldENvbnRlbnQoKSk7XG5cdFx0XHR2YXIgY2FyZXRQb3MgPSBlZGl0b3IuZ2V0Q2FyZXRQb3MoKTtcblx0XHRcdHZhciB0YWcgPSByZXF1aXJlKCdodG1sTWF0Y2hlcicpLnRhZyhjb250ZW50LCBjYXJldFBvcyk7XG5cdFx0XHRyZXR1cm4gdGFnICYmIHRhZy5vcGVuLm5hbWUudG9Mb3dlckNhc2UoKSA9PSAnc3R5bGUnXG5cdFx0XHRcdCYmIHRhZy5pbm5lclJhbmdlLmNtcChjYXJldFBvcywgJ2x0ZScsICdndGUnKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2sgaWYgY3VycmVudCBjYXJldCBwb3NpdGlvbiBpcyBpbnNpZGUgXCJzdHlsZVwiIGF0dHJpYnV0ZSBvZiBIVE1MXG5cdFx0ICogZWxlbWVudFxuXHRcdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3Jcblx0XHQgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRpc0lubGluZUNTUzogZnVuY3Rpb24oZWRpdG9yKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IFN0cmluZyhlZGl0b3IuZ2V0Q29udGVudCgpKTtcblx0XHRcdHZhciBjYXJldFBvcyA9IGVkaXRvci5nZXRDYXJldFBvcygpO1xuXHRcdFx0dmFyIHRyZWUgPSByZXF1aXJlKCd4bWxFZGl0VHJlZScpLnBhcnNlRnJvbVBvc2l0aW9uKGNvbnRlbnQsIGNhcmV0UG9zLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICh0cmVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHIgPSB0cmVlLml0ZW1Gcm9tUG9zaXRpb24oY2FyZXRQb3MsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhdHRyICYmIGF0dHIubmFtZSgpLnRvTG93ZXJDYXNlKCkgPT0gJ3N0eWxlJ1xuICAgICAgICAgICAgICAgIFx0JiYgYXR0ci52YWx1ZVJhbmdlKHRydWUpLmNtcChjYXJldFBvcywgJ2x0ZScsICdndGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fTtcbn0pOy8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgdG8gd29yayB3aXRoIDxjb2RlPkFiYnJldmlhdGlvbk5vZGU8L2NvZGU+IGFzIEhUTUwgZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmRlZmluZSgnYWJicmV2aWF0aW9uVXRpbHMnLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHJldHVybiB7XG5cdFx0LyoqXG5cdFx0ICogQ2hlY2sgaWYgcGFzc2VkIGFiYnJldmlhdGlvbiBub2RlIGhhcyBtYXRjaGVkIHNuaXBwZXQgcmVzb3VyY2Vcblx0XHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IG5vZGVcblx0XHQgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0XHQgKiBAbWVtYmVyT2YgYWJicmV2aWF0aW9uVXRpbHNcblx0XHQgKi9cblx0XHRpc1NuaXBwZXQ6IGZ1bmN0aW9uKG5vZGUpIHtcblx0XHRcdHJldHVybiByZXF1aXJlKCdlbGVtZW50cycpLmlzKG5vZGUubWF0Y2hlZFJlc291cmNlKCksICdzbmlwcGV0Jyk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFRlc3QgaWYgcGFzc2VkIG5vZGUgaXMgdW5hcnkgKG5vIGNsb3NpbmcgdGFnKVxuXHRcdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gbm9kZVxuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aXNVbmFyeTogZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0aWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoIHx8IG5vZGUuX3RleHQgfHwgdGhpcy5pc1NuaXBwZXQobm9kZSkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgciA9IG5vZGUubWF0Y2hlZFJlc291cmNlKCk7XG5cdFx0XHRyZXR1cm4gciAmJiByLmlzX2VtcHR5O1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBUZXN0IGlmIHBhc3NlZCBub2RlIGlzIGlubGluZS1sZXZlbCAobGlrZSAmbHQ7c3Ryb25nJmd0OywgJmx0O2ltZyZndDspXG5cdFx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBub2RlXG5cdFx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRpc0lubGluZTogZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0cmV0dXJuIG5vZGUuaXNUZXh0Tm9kZSgpXG5cdFx0XHRcdHx8ICFub2RlLm5hbWUoKVxuXHRcdFx0XHR8fCByZXF1aXJlKCd0YWdOYW1lJykuaXNJbmxpbmVMZXZlbChub2RlLm5hbWUoKSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFRlc3QgaWYgcGFzc2VkIG5vZGUgaXMgYmxvY2stbGV2ZWxcblx0XHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IG5vZGVcblx0XHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHRcdCAqL1xuXHRcdGlzQmxvY2s6IGZ1bmN0aW9uKG5vZGUpIHtcblx0XHRcdHJldHVybiB0aGlzLmlzU25pcHBldChub2RlKSB8fCAhdGhpcy5pc0lubGluZShub2RlKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVGVzdCBpZiBnaXZlbiBub2RlIGlzIGEgc25pcHBldFxuXHRcdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gbm9kZVxuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aXNTbmlwcGV0OiBmdW5jdGlvbihub2RlKSB7XG5cdFx0XHRyZXR1cm4gcmVxdWlyZSgnZWxlbWVudHMnKS5pcyhub2RlLm1hdGNoZWRSZXNvdXJjZSgpLCAnc25pcHBldCcpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBUaGlzIGZ1bmN0aW9uIHRlc3RzIGlmIHBhc3NlZCBub2RlIGNvbnRlbnQgY29udGFpbnMgSFRNTCB0YWdzLlxuXHRcdCAqIFRoaXMgZnVuY3Rpb24gaXMgbW9zdGx5IHVzZWQgZm9yIG91dHB1dCBmb3JtYXR0aW5nXG5cdFx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBub2RlXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aGFzVGFnc0luQ29udGVudDogZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0cmV0dXJuIHJlcXVpcmUoJ3V0aWxzJykubWF0Y2hlc1RhZyhub2RlLmNvbnRlbnQpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBUZXN0IGlmIGN1cnJlbnQgZWxlbWVudCBjb250YWlucyBibG9jay1sZXZlbCBjaGlsZHJlblxuXHRcdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gbm9kZVxuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aGFzQmxvY2tDaGlsZHJlbjogZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0cmV0dXJuICh0aGlzLmhhc1RhZ3NJbkNvbnRlbnQobm9kZSkgJiYgdGhpcy5pc0Jsb2NrKG5vZGUpKVxuXHRcdFx0XHR8fCBfLmFueShub2RlLmNoaWxkcmVuLCBmdW5jdGlvbihjaGlsZCkge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLmlzQmxvY2soY2hpbGQpO1xuXHRcdFx0XHR9LCB0aGlzKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVXRpbGl0eSBmdW5jdGlvbiB0aGF0IGluc2VydHMgY29udGVudCBpbnN0ZWFkIG9mIDxjb2RlPiR7Y2hpbGR9PC9jb2RlPlxuXHRcdCAqIHZhcmlhYmxlcyBvbiA8Y29kZT50ZXh0PC9jb2RlPlxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRleHQgd2hlcmUgY2hpbGQgY29udGVudCBzaG91bGQgYmUgaW5zZXJ0ZWRcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gY2hpbGRDb250ZW50IENvbnRlbnQgdG8gaW5zZXJ0XG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nXG5cdFx0ICovXG5cdFx0aW5zZXJ0Q2hpbGRDb250ZW50OiBmdW5jdGlvbih0ZXh0LCBjaGlsZENvbnRlbnQsIG9wdGlvbnMpIHtcblx0XHRcdG9wdGlvbnMgPSBfLmV4dGVuZCh7XG5cdFx0XHRcdGtlZXBWYXJpYWJsZTogdHJ1ZSxcblx0XHRcdFx0YXBwZW5kSWZOb0NoaWxkOiB0cnVlXG5cdFx0XHR9LCBvcHRpb25zIHx8IHt9KTtcblxuXHRcdFx0dmFyIGNoaWxkVmFyaWFibGVSZXBsYWNlZCA9IGZhbHNlO1xuXHRcdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblx0XHRcdHRleHQgPSB1dGlscy5yZXBsYWNlVmFyaWFibGVzKHRleHQsIGZ1bmN0aW9uKHZhcmlhYmxlLCBuYW1lLCBkYXRhKSB7XG5cdFx0XHRcdHZhciBvdXRwdXQgPSB2YXJpYWJsZTtcblx0XHRcdFx0aWYgKG5hbWUgPT0gJ2NoaWxkJykge1xuXHRcdFx0XHRcdC8vIGFkZCBjb3JyZWN0IGluZGVudGF0aW9uXG5cdFx0XHRcdFx0b3V0cHV0ID0gdXRpbHMucGFkU3RyaW5nKGNoaWxkQ29udGVudCwgdXRpbHMuZ2V0TGluZVBhZGRpbmdGcm9tUG9zaXRpb24odGV4dCwgZGF0YS5zdGFydCkpO1xuXHRcdFx0XHRcdGNoaWxkVmFyaWFibGVSZXBsYWNlZCA9IHRydWU7XG5cdFx0XHRcdFx0aWYgKG9wdGlvbnMua2VlcFZhcmlhYmxlKVxuXHRcdFx0XHRcdFx0b3V0cHV0ICs9IHZhcmlhYmxlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIG91dHB1dDtcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAoIWNoaWxkVmFyaWFibGVSZXBsYWNlZCAmJiBvcHRpb25zLmFwcGVuZElmTm9DaGlsZCkge1xuXHRcdFx0XHR0ZXh0ICs9IGNoaWxkQ29udGVudDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRleHQ7XG5cdFx0fVxuXHR9O1xufSk7LyoqXG4gKiBAYXV0aG9yIFNlcmdleSBDaGlrdXlvbm9rIChzZXJnZS5jaGVAZ21haWwuY29tKVxuICogQGxpbmsgaHR0cDovL2NoaWt1eW9ub2sucnVcbiAqL1xuZW1tZXQuZGVmaW5lKCdiYXNlNjQnLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHZhciBjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSc7XG5cblx0cmV0dXJuIHtcblx0XHQvKipcblx0XHQgKiBFbmNvZGVzIGRhdGEgdXNpbmcgYmFzZTY0IGFsZ29yaXRobVxuXHRcdCAqIEBhdXRob3IgVHlsZXIgQWtpbnMgKGh0dHA6Ly9ydW1raW4uY29tKVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dFxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdFx0ICogQG1lbWJlck9mIGVtbWV0LmJhc2U2NFxuXHRcdCAqL1xuXHRcdGVuY29kZSA6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdFx0XHR2YXIgb3V0cHV0ID0gW107XG5cdFx0XHR2YXIgY2hyMSwgY2hyMiwgY2hyMywgZW5jMSwgZW5jMiwgZW5jMywgZW5jNCwgY2RwMSwgY2RwMiwgY2RwMztcblx0XHRcdHZhciBpID0gMCwgaWwgPSBpbnB1dC5sZW5ndGgsIGI2NCA9IGNoYXJzO1xuXG5cdFx0XHR3aGlsZSAoaSA8IGlsKSB7XG5cblx0XHRcdFx0Y2RwMSA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcblx0XHRcdFx0Y2RwMiA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcblx0XHRcdFx0Y2RwMyA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcblxuXHRcdFx0XHRjaHIxID0gY2RwMSAmIDB4ZmY7XG5cdFx0XHRcdGNocjIgPSBjZHAyICYgMHhmZjtcblx0XHRcdFx0Y2hyMyA9IGNkcDMgJiAweGZmO1xuXG5cdFx0XHRcdGVuYzEgPSBjaHIxID4+IDI7XG5cdFx0XHRcdGVuYzIgPSAoKGNocjEgJiAzKSA8PCA0KSB8IChjaHIyID4+IDQpO1xuXHRcdFx0XHRlbmMzID0gKChjaHIyICYgMTUpIDw8IDIpIHwgKGNocjMgPj4gNik7XG5cdFx0XHRcdGVuYzQgPSBjaHIzICYgNjM7XG5cblx0XHRcdFx0aWYgKGlzTmFOKGNkcDIpKSB7XG5cdFx0XHRcdFx0ZW5jMyA9IGVuYzQgPSA2NDtcblx0XHRcdFx0fSBlbHNlIGlmIChpc05hTihjZHAzKSkge1xuXHRcdFx0XHRcdGVuYzQgPSA2NDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdG91dHB1dC5wdXNoKGI2NC5jaGFyQXQoZW5jMSkgKyBiNjQuY2hhckF0KGVuYzIpICsgYjY0LmNoYXJBdChlbmMzKSArIGI2NC5jaGFyQXQoZW5jNCkpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBEZWNvZGVzIHN0cmluZyB1c2luZyBNSU1FIGJhc2U2NCBhbGdvcml0aG1cblx0XHQgKlxuXHRcdCAqIEBhdXRob3IgVHlsZXIgQWtpbnMgKGh0dHA6Ly9ydW1raW4uY29tKVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhXG5cdFx0ICogQHJldHVybiB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdGRlY29kZSA6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdHZhciBvMSwgbzIsIG8zLCBoMSwgaDIsIGgzLCBoNCwgYml0cywgaSA9IDAsIGFjID0gMCwgdG1wQXJyID0gW107XG5cdFx0XHR2YXIgYjY0ID0gY2hhcnMsIGlsID0gZGF0YS5sZW5ndGg7XG5cblx0XHRcdGlmICghZGF0YSkge1xuXHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdH1cblxuXHRcdFx0ZGF0YSArPSAnJztcblxuXHRcdFx0ZG8geyAvLyB1bnBhY2sgZm91ciBoZXhldHMgaW50byB0aHJlZSBvY3RldHMgdXNpbmcgaW5kZXggcG9pbnRzIGluIGI2NFxuXHRcdFx0XHRoMSA9IGI2NC5pbmRleE9mKGRhdGEuY2hhckF0KGkrKykpO1xuXHRcdFx0XHRoMiA9IGI2NC5pbmRleE9mKGRhdGEuY2hhckF0KGkrKykpO1xuXHRcdFx0XHRoMyA9IGI2NC5pbmRleE9mKGRhdGEuY2hhckF0KGkrKykpO1xuXHRcdFx0XHRoNCA9IGI2NC5pbmRleE9mKGRhdGEuY2hhckF0KGkrKykpO1xuXG5cdFx0XHRcdGJpdHMgPSBoMSA8PCAxOCB8IGgyIDw8IDEyIHwgaDMgPDwgNiB8IGg0O1xuXG5cdFx0XHRcdG8xID0gYml0cyA+PiAxNiAmIDB4ZmY7XG5cdFx0XHRcdG8yID0gYml0cyA+PiA4ICYgMHhmZjtcblx0XHRcdFx0bzMgPSBiaXRzICYgMHhmZjtcblxuXHRcdFx0XHRpZiAoaDMgPT0gNjQpIHtcblx0XHRcdFx0XHR0bXBBcnJbYWMrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKG8xKTtcblx0XHRcdFx0fSBlbHNlIGlmIChoNCA9PSA2NCkge1xuXHRcdFx0XHRcdHRtcEFyclthYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUobzEsIG8yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0bXBBcnJbYWMrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKG8xLCBvMiwgbzMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IHdoaWxlIChpIDwgaWwpO1xuXG5cdFx0XHRyZXR1cm4gdG1wQXJyLmpvaW4oJycpO1xuXHRcdH1cblx0fTtcbn0pOy8qKlxuICogSFRNTCBtYXRjaGVyOiB0YWtlcyBzdHJpbmcgYW5kIHNlYXJjaGVzIGZvciBIVE1MIHRhZyBwYWlycyBmb3IgZ2l2ZW4gcG9zaXRpb25cbiAqXG4gKiBVbmxpa2Ug4oCcY2xhc3NpY+KAnSBtYXRjaGVycywgaXQgcGFyc2VzIGNvbnRlbnQgZnJvbSB0aGUgc3BlY2lmaWVkXG4gKiBwb3NpdGlvbiwgbm90IGZyb20gdGhlIHN0YXJ0LCBzbyBpdCBtYXkgd29yayBldmVuIG91dHNpZGUgSFRNTCBkb2N1bWVudHNcbiAqIChmb3IgZXhhbXBsZSwgaW5zaWRlIHN0cmluZ3Mgb2YgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2VzIGxpa2UgSmF2YVNjcmlwdCwgUHl0aG9uXG4gKiBldGMuKVxuICogQGNvbnN0cnVjdG9yXG4gKiBAbWVtYmVyT2YgX19odG1sTWF0Y2hlckRlZmluZVxuICovXG5lbW1ldC5kZWZpbmUoJ2h0bWxNYXRjaGVyJywgZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHQvLyBSZWd1bGFyIEV4cHJlc3Npb25zIGZvciBwYXJzaW5nIHRhZ3MgYW5kIGF0dHJpYnV0ZXNcblx0dmFyIHJlT3BlblRhZyA9IC9ePChbXFx3XFw6XFwtXSspKCg/OlxccytbXFx3XFwtOl0rKD86XFxzKj1cXHMqKD86KD86XCJbXlwiXSpcIil8KD86J1teJ10qJyl8W14+XFxzXSspKT8pKilcXHMqKFxcLz8pPi87XG5cdHZhciByZUNsb3NlVGFnID0gL148XFwvKFtcXHdcXDpcXC1dKylbXj5dKj4vO1xuXG5cdGZ1bmN0aW9uIG9wZW5UYWcoaSwgbWF0Y2gpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bmFtZTogbWF0Y2hbMV0sXG5cdFx0XHRzZWxmQ2xvc2U6ICEhbWF0Y2hbM10sXG5cdFx0XHQvKiogQHR5cGUgUmFuZ2UgKi9cblx0XHRcdHJhbmdlOiByZXF1aXJlKCdyYW5nZScpLmNyZWF0ZShpLCBtYXRjaFswXSksXG5cdFx0XHR0eXBlOiAnb3Blbidcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gY2xvc2VUYWcoaSwgbWF0Y2gpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bmFtZTogbWF0Y2hbMV0sXG5cdFx0XHQvKiogQHR5cGUgUmFuZ2UgKi9cblx0XHRcdHJhbmdlOiByZXF1aXJlKCdyYW5nZScpLmNyZWF0ZShpLCBtYXRjaFswXSksXG5cdFx0XHR0eXBlOiAnY2xvc2UnXG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNvbW1lbnQoaSwgbWF0Y2gpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0LyoqIEB0eXBlIFJhbmdlICovXG5cdFx0XHRyYW5nZTogcmVxdWlyZSgncmFuZ2UnKS5jcmVhdGUoaSwgXy5pc051bWJlcihtYXRjaCkgPyBtYXRjaCAtIGkgOiBtYXRjaFswXSksXG5cdFx0XHR0eXBlOiAnY29tbWVudCdcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgbmV3IHRhZyBtYXRjaGVyIHNlc3Npb25cblx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZU1hdGNoZXIodGV4dCkge1xuXHRcdHZhciBtZW1vID0ge30sIG07XG5cdFx0cmV0dXJuIHtcblx0XHRcdC8qKlxuXHRcdFx0ICogVGVzdCBpZiBnaXZlbiBwb3NpdGlvbiBtYXRjaGVzIG9wZW5pbmcgdGFnXG5cdFx0XHQgKiBAcGFyYW0ge051bWJlcn0gaVxuXHRcdFx0ICogQHJldHVybnMge09iamVjdH0gTWF0Y2hlZCB0YWcgb2JqZWN0XG5cdFx0XHQgKi9cblx0XHRcdG9wZW46IGZ1bmN0aW9uKGkpIHtcblx0XHRcdFx0dmFyIG0gPSB0aGlzLm1hdGNoZXMoaSk7XG5cdFx0XHRcdHJldHVybiBtICYmIG0udHlwZSA9PSAnb3BlbicgPyBtIDogbnVsbDtcblx0XHRcdH0sXG5cblx0XHRcdC8qKlxuXHRcdFx0ICogVGVzdCBpZiBnaXZlbiBwb3NpdGlvbiBtYXRjaGVzIGNsb3NpbmcgdGFnXG5cdFx0XHQgKiBAcGFyYW0ge051bWJlcn0gaVxuXHRcdFx0ICogQHJldHVybnMge09iamVjdH0gTWF0Y2hlZCB0YWcgb2JqZWN0XG5cdFx0XHQgKi9cblx0XHRcdGNsb3NlOiBmdW5jdGlvbihpKSB7XG5cdFx0XHRcdHZhciBtID0gdGhpcy5tYXRjaGVzKGkpO1xuXHRcdFx0XHRyZXR1cm4gbSAmJiBtLnR5cGUgPT0gJ2Nsb3NlJyA/IG0gOiBudWxsO1xuXHRcdFx0fSxcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBNYXRjaGVzIGVpdGhlciBvcGVuaW5nIG9yIGNsb3NpbmcgdGFnIGZvciBnaXZlbiBwb3NpdGlvblxuXHRcdFx0ICogQHBhcmFtIGlcblx0XHRcdCAqIEByZXR1cm5zXG5cdFx0XHQgKi9cblx0XHRcdG1hdGNoZXM6IGZ1bmN0aW9uKGkpIHtcblx0XHRcdFx0dmFyIGtleSA9ICdwJyArIGk7XG5cblx0XHRcdFx0aWYgKCEoa2V5IGluIG1lbW8pKSB7XG5cdFx0XHRcdFx0aWYgKHRleHQuY2hhckF0KGkpID09ICc8Jykge1xuXHRcdFx0XHRcdFx0dmFyIHN1YnN0ciA9IHRleHQuc2xpY2UoaSk7XG5cdFx0XHRcdFx0XHRpZiAobSA9IHN1YnN0ci5tYXRjaChyZU9wZW5UYWcpKSB7XG5cdFx0XHRcdFx0XHRcdG1lbW9ba2V5XSA9IG9wZW5UYWcoaSwgbSk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG0gPSBzdWJzdHIubWF0Y2gocmVDbG9zZVRhZykpIHtcblx0XHRcdFx0XHRcdFx0bWVtb1trZXldID0gY2xvc2VUYWcoaSwgbSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyByZW1lbWJlciB0aGF0IGdpdmVuIHBvc2l0aW9uIGNvbnRhaW5zIG5vIHZhbGlkIHRhZ1xuXHRcdFx0XHRcdFx0XHRtZW1vW2tleV0gPSBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbWVtb1trZXldO1xuXHRcdFx0fSxcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBSZXR1cm5zIG9yaWdpbmFsIHRleHRcblx0XHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdFx0XHQgKi9cblx0XHRcdHRleHQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGV4dDtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gbWF0Y2hlcyh0ZXh0LCBwb3MsIHBhdHRlcm4pIHtcblx0XHRyZXR1cm4gdGV4dC5zdWJzdHJpbmcocG9zLCBwb3MgKyBwYXR0ZXJuLmxlbmd0aCkgPT0gcGF0dGVybjtcblx0fVxuXG5cdC8qKlxuXHQgKiBTZWFyY2ggZm9yIGNsb3NpbmcgcGFpciBvZiBvcGVuaW5nIHRhZ1xuXHQgKiBAcGFyYW0ge09iamVjdH0gb3BlbiBPcGVuIHRhZyBpbnN0YW5jZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gbWF0Y2hlciBNYXRjaGVyIGluc3RhbmNlXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kQ2xvc2luZ1BhaXIob3BlbiwgbWF0Y2hlcikge1xuXHRcdHZhciBzdGFjayA9IFtdLCB0YWcgPSBudWxsO1xuXHRcdHZhciB0ZXh0ID0gbWF0Y2hlci50ZXh0KCk7XG5cblx0XHRmb3IgKHZhciBwb3MgPSBvcGVuLnJhbmdlLmVuZCwgbGVuID0gdGV4dC5sZW5ndGg7IHBvcyA8IGxlbjsgcG9zKyspIHtcblx0XHRcdGlmIChtYXRjaGVzKHRleHQsIHBvcywgJzwhLS0nKSkge1xuXHRcdFx0XHQvLyBza2lwIHRvIGVuZCBvZiBjb21tZW50XG5cdFx0XHRcdGZvciAodmFyIGogPSBwb3M7IGogPCBsZW47IGorKykge1xuXHRcdFx0XHRcdGlmIChtYXRjaGVzKHRleHQsIGosICctLT4nKSkge1xuXHRcdFx0XHRcdFx0cG9zID0gaiArIDM7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKHRhZyA9IG1hdGNoZXIubWF0Y2hlcyhwb3MpKSB7XG5cdFx0XHRcdGlmICh0YWcudHlwZSA9PSAnb3BlbicgJiYgIXRhZy5zZWxmQ2xvc2UpIHtcblx0XHRcdFx0XHRzdGFjay5wdXNoKHRhZy5uYW1lKTtcblx0XHRcdFx0fSBlbHNlIGlmICh0YWcudHlwZSA9PSAnY2xvc2UnKSB7XG5cdFx0XHRcdFx0aWYgKCFzdGFjay5sZW5ndGgpIHsgLy8gZm91bmQgdmFsaWQgcGFpcj9cblx0XHRcdFx0XHRcdHJldHVybiB0YWcubmFtZSA9PSBvcGVuLm5hbWUgPyB0YWcgOiBudWxsO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIGNoZWNrIGlmIGN1cnJlbnQgY2xvc2luZyB0YWcgbWF0Y2hlcyBwcmV2aW91c2x5IG9wZW5lZCBvbmVcblx0XHRcdFx0XHRpZiAoXy5sYXN0KHN0YWNrKSA9PSB0YWcubmFtZSkge1xuXHRcdFx0XHRcdFx0c3RhY2sucG9wKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHZhciBmb3VuZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0d2hpbGUgKHN0YWNrLmxlbmd0aCAmJiAhZm91bmQpIHtcblx0XHRcdFx0XHRcdFx0dmFyIGxhc3QgPSBzdGFjay5wb3AoKTtcblx0XHRcdFx0XHRcdFx0aWYgKGxhc3QgPT0gdGFnLm5hbWUpIHtcblx0XHRcdFx0XHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKCFzdGFjay5sZW5ndGggJiYgIWZvdW5kKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0YWcubmFtZSA9PSBvcGVuLm5hbWUgPyB0YWcgOiBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHtcblx0XHQvKipcblx0XHQgKiBNYWluIGZ1bmN0aW9uOiBzZWFyY2ggZm9yIHRhZyBwYWlyIGluIDxjb2RlPnRleHQ8L2NvZGU+IGZvciBnaXZlblxuXHRcdCAqIHBvc2l0aW9uXG5cdFx0ICogQG1lbWJlck9mIGh0bWxNYXRjaGVyXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gcG9zXG5cdFx0ICogQHJldHVybnMge09iamVjdH1cblx0XHQgKi9cblx0XHRmaW5kOiBmdW5jdGlvbih0ZXh0LCBwb3MpIHtcblx0XHRcdHZhciByYW5nZSA9IHJlcXVpcmUoJ3JhbmdlJyk7XG5cdFx0XHR2YXIgbWF0Y2hlciA9IGNyZWF0ZU1hdGNoZXIodGV4dCk7XG5cdFx0XHR2YXIgb3BlbiA9IG51bGwsIGNsb3NlID0gbnVsbDtcblxuXHRcdFx0Zm9yICh2YXIgaSA9IHBvczsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0aWYgKG9wZW4gPSBtYXRjaGVyLm9wZW4oaSkpIHtcblx0XHRcdFx0XHQvLyBmb3VuZCBvcGVuaW5nIHRhZ1xuXHRcdFx0XHRcdGlmIChvcGVuLnNlbGZDbG9zZSkge1xuXHRcdFx0XHRcdFx0aWYgKG9wZW4ucmFuZ2UuY21wKHBvcywgJ2x0JywgJ2d0JykpIHtcblx0XHRcdFx0XHRcdFx0Ly8gaW5zaWRlIHNlbGYtY2xvc2luZyB0YWcsIGZvdW5kIG1hdGNoXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBvdXRzaWRlIHNlbGYtY2xvc2luZyB0YWcsIGNvbnRpbnVlXG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjbG9zZSA9IGZpbmRDbG9zaW5nUGFpcihvcGVuLCBtYXRjaGVyKTtcblx0XHRcdFx0XHRpZiAoY2xvc2UpIHtcblx0XHRcdFx0XHRcdC8vIGZvdW5kIGNsb3NpbmcgdGFnLlxuXHRcdFx0XHRcdFx0dmFyIHIgPSByYW5nZS5jcmVhdGUyKG9wZW4ucmFuZ2Uuc3RhcnQsIGNsb3NlLnJhbmdlLmVuZCk7XG5cdFx0XHRcdFx0XHRpZiAoci5jb250YWlucyhwb3MpKSB7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSBpZiAob3Blbi5yYW5nZS5jb250YWlucyhwb3MpKSB7XG5cdFx0XHRcdFx0XHQvLyB3ZSBpbnNpZGUgZW1wdHkgSFRNTCB0YWcgbGlrZSA8YnI+XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRvcGVuID0gbnVsbDtcblx0XHRcdFx0fSBlbHNlIGlmIChtYXRjaGVzKHRleHQsIGksICctLT4nKSkge1xuXHRcdFx0XHRcdC8vIHNraXAgYmFjayB0byBjb21tZW50IHN0YXJ0XG5cdFx0XHRcdFx0Zm9yICh2YXIgaiA9IGkgLSAxOyBqID49IDA7IGotLSkge1xuXHRcdFx0XHRcdFx0aWYgKG1hdGNoZXModGV4dCwgaiwgJy0tPicpKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGZvdW5kIGFub3RoZXIgY29tbWVudCBlbmQsIGRvIG5vdGhpbmdcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1hdGNoZXModGV4dCwgaiwgJzwhLS0nKSkge1xuXHRcdFx0XHRcdFx0XHRpID0gajtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKG1hdGNoZXModGV4dCwgaSwgJzwhLS0nKSkge1xuXHRcdFx0XHRcdC8vIHdlJ3JlIGluc2lkZSBjb21tZW50LCBtYXRjaCBpdFxuXHRcdFx0XHRcdHZhciBqID0gaSArIDQsIGpsID0gdGV4dC5sZW5ndGg7XG5cdFx0XHRcdFx0Zm9yICg7IGogPCBqbDsgaisrKSB7XG5cdFx0XHRcdFx0XHRpZiAobWF0Y2hlcyh0ZXh0LCBqLCAnLS0+JykpIHtcblx0XHRcdFx0XHRcdFx0aiArPSAzO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRvcGVuID0gY29tbWVudChpLCBqKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAob3Blbikge1xuXHRcdFx0XHR2YXIgb3V0ZXJSYW5nZSA9IG51bGw7XG5cdFx0XHRcdHZhciBpbm5lclJhbmdlID0gbnVsbDtcblxuXHRcdFx0XHRpZiAoY2xvc2UpIHtcblx0XHRcdFx0XHRvdXRlclJhbmdlID0gcmFuZ2UuY3JlYXRlMihvcGVuLnJhbmdlLnN0YXJ0LCBjbG9zZS5yYW5nZS5lbmQpO1xuXHRcdFx0XHRcdGlubmVyUmFuZ2UgPSByYW5nZS5jcmVhdGUyKG9wZW4ucmFuZ2UuZW5kLCBjbG9zZS5yYW5nZS5zdGFydCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0b3V0ZXJSYW5nZSA9IGlubmVyUmFuZ2UgPSByYW5nZS5jcmVhdGUyKG9wZW4ucmFuZ2Uuc3RhcnQsIG9wZW4ucmFuZ2UuZW5kKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChvcGVuLnR5cGUgPT0gJ2NvbW1lbnQnKSB7XG5cdFx0XHRcdFx0Ly8gYWRqdXN0IHBvc2l0aW9ucyBvZiBpbm5lciByYW5nZSBmb3IgY29tbWVudFxuXHRcdFx0XHRcdHZhciBfYyA9IG91dGVyUmFuZ2Uuc3Vic3RyaW5nKHRleHQpO1xuXHRcdFx0XHRcdGlubmVyUmFuZ2Uuc3RhcnQgKz0gX2MubGVuZ3RoIC0gX2MucmVwbGFjZSgvXjxcXCEtLVxccyovLCAnJykubGVuZ3RoO1xuXHRcdFx0XHRcdGlubmVyUmFuZ2UuZW5kIC09IF9jLmxlbmd0aCAtIF9jLnJlcGxhY2UoL1xccyotLT4kLywgJycpLmxlbmd0aDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0b3Blbjogb3Blbixcblx0XHRcdFx0XHRjbG9zZTogY2xvc2UsXG5cdFx0XHRcdFx0dHlwZTogb3Blbi50eXBlID09ICdjb21tZW50JyA/ICdjb21tZW50JyA6ICd0YWcnLFxuXHRcdFx0XHRcdGlubmVyUmFuZ2U6IGlubmVyUmFuZ2UsXG5cdFx0XHRcdFx0aW5uZXJDb250ZW50OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzLmlubmVyUmFuZ2Uuc3Vic3RyaW5nKHRleHQpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0b3V0ZXJSYW5nZTogb3V0ZXJSYW5nZSxcblx0XHRcdFx0XHRvdXRlckNvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMub3V0ZXJSYW5nZS5zdWJzdHJpbmcodGV4dCk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyYW5nZTogIWlubmVyUmFuZ2UubGVuZ3RoKCkgfHwgIWlubmVyUmFuZ2UuY21wKHBvcywgJ2x0ZScsICdndGUnKSA/IG91dGVyUmFuZ2UgOiBpbm5lclJhbmdlLFxuXHRcdFx0XHRcdGNvbnRlbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMucmFuZ2Uuc3Vic3RyaW5nKHRleHQpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0c291cmNlOiB0ZXh0XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFRoZSBzYW1lIGFzIDxjb2RlPmZpbmQoKTwvY29kZT4gbWV0aG9kLCBidXQgcmVzdHJpY3RzIG1hdGNoZWQgcmVzdWx0XG5cdFx0ICogdG8gPGNvZGU+dGFnPC9jb2RlPiB0eXBlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gcG9zXG5cdFx0ICogQHJldHVybnMge09iamVjdH1cblx0XHQgKi9cblx0XHR0YWc6IGZ1bmN0aW9uKHRleHQsIHBvcykge1xuXHRcdFx0dmFyIHJlc3VsdCA9IHRoaXMuZmluZCh0ZXh0LCBwb3MpO1xuXHRcdFx0aWYgKHJlc3VsdCAmJiByZXN1bHQudHlwZSA9PSAndGFnJykge1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn0pOy8qKlxuICogVXRpbGl0eSBtb2R1bGUgZm9yIGhhbmRsaW5nIHRhYnN0b3BzIHRva2VucyBnZW5lcmF0ZWQgYnkgRW1tZXQnc1xuICogXCJFeHBhbmQgQWJicmV2aWF0aW9uXCIgYWN0aW9uLiBUaGUgbWFpbiA8Y29kZT5leHRyYWN0PC9jb2RlPiBtZXRob2Qgd2lsbCB0YWtlXG4gKiByYXcgdGV4dCAoZm9yIGV4YW1wbGU6IDxpPiR7MH0gc29tZSAkezE6dGV4dH08L2k+KSwgZmluZCBhbGwgdGFic3RvcHNcbiAqIG9jY3VycmVuY2VzLCByZXBsYWNlIHRoZW0gd2l0aCB0b2tlbnMgc3VpdGFibGUgZm9yIHlvdXIgZWRpdG9yIG9mIGNob2ljZSBhbmRcbiAqIHJldHVybiBvYmplY3Qgd2l0aCBwcm9jZXNzZWQgdGV4dCBhbmQgbGlzdCBvZiBmb3VuZCB0YWJzdG9wcyBhbmQgdGhlaXIgcmFuZ2VzLlxuICogRm9yIHNha2Ugb2YgcG9ydGFiaWxpdHkgKE9iamVjdGl2ZS1DL0phdmEpIHRoZSB0YWJzdG9wcyBsaXN0IGlzIGEgcGxhaW5cbiAqIHNvcnRlZCBhcnJheSB3aXRoIHBsYWluIG9iamVjdHMuXG4gKlxuICogUGxhY2Vob2xkZXJzIHdpdGggdGhlIHNhbWUgYXJlIG1lYW50IHRvIGJlIDxpPmxpbmtlZDwvaT4gaW4geW91ciBlZGl0b3IuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZGVmaW5lKCd0YWJTdG9wcycsIGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0LyoqXG5cdCAqIEdsb2JhbCBwbGFjZWhvbGRlciB2YWx1ZSwgYXV0b21hdGljYWxseSBpbmNyZW1lbnRlZCBieVxuXHQgKiA8Y29kZT52YXJpYWJsZXNSZXNvbHZlcigpPC9jb2RlPiBmdW5jdGlvblxuXHQgKi9cblx0dmFyIHN0YXJ0UGxhY2Vob2xkZXJOdW0gPSAxMDA7XG5cblx0dmFyIHRhYnN0b3BJbmRleCA9IDA7XG5cblx0dmFyIGRlZmF1bHRPcHRpb25zID0ge1xuXHRcdHJlcGxhY2VDYXJldHM6IGZhbHNlLFxuXHRcdGVzY2FwZTogZnVuY3Rpb24oY2gpIHtcblx0XHRcdHJldHVybiAnXFxcXCcgKyBjaDtcblx0XHR9LFxuXHRcdHRhYnN0b3A6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdHJldHVybiBkYXRhLnRva2VuO1xuXHRcdH0sXG5cdFx0dmFyaWFibGU6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdHJldHVybiBkYXRhLnRva2VuO1xuXHRcdH1cblx0fTtcblxuXHQvLyBYWFggcmVnaXN0ZXIgb3V0cHV0IHByb2Nlc3NvciB0aGF0IHdpbGwgdXBncmFkZSB0YWJzdG9wcyBvZiBwYXJzZWQgbm9kZVxuXHQvLyBpbiBvcmRlciB0byBwcmV2ZW50IHRhYnN0b3AgaW5kZXggY29uZmxpY3RzXG5cdHJlcXVpcmUoJ2FiYnJldmlhdGlvblBhcnNlcicpLmFkZE91dHB1dFByb2Nlc3NvcihmdW5jdGlvbih0ZXh0LCBub2RlLCB0eXBlKSB7XG5cdFx0dmFyIG1heE51bSA9IDA7XG5cdFx0dmFyIHRhYnN0b3BzID0gcmVxdWlyZSgndGFiU3RvcHMnKTtcblx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXG5cdFx0dmFyIHRzT3B0aW9ucyA9IHtcblx0XHRcdHRhYnN0b3A6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0dmFyIGdyb3VwID0gcGFyc2VJbnQoZGF0YS5ncm91cCk7XG5cdFx0XHRcdGlmIChncm91cCA9PSAwKVxuXHRcdFx0XHRcdHJldHVybiAnJHswfSc7XG5cblx0XHRcdFx0aWYgKGdyb3VwID4gbWF4TnVtKSBtYXhOdW0gPSBncm91cDtcblx0XHRcdFx0aWYgKGRhdGEucGxhY2Vob2xkZXIpIHtcblx0XHRcdFx0XHQvLyByZXNwZWN0IG5lc3RlZCBwbGFjZWhvbGRlcnNcblx0XHRcdFx0XHR2YXIgaXggPSBncm91cCArIHRhYnN0b3BJbmRleDtcblx0XHRcdFx0XHR2YXIgcGxhY2Vob2xkZXIgPSB0YWJzdG9wcy5wcm9jZXNzVGV4dChkYXRhLnBsYWNlaG9sZGVyLCB0c09wdGlvbnMpO1xuXHRcdFx0XHRcdHJldHVybiAnJHsnICsgaXggKyAnOicgKyBwbGFjZWhvbGRlciArICd9Jztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gJyR7JyArIChncm91cCArIHRhYnN0b3BJbmRleCkgKyAnfSc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gdXBncmFkZSB0YWJzdG9wc1xuXHRcdHRleHQgPSB0YWJzdG9wcy5wcm9jZXNzVGV4dCh0ZXh0LCB0c09wdGlvbnMpO1xuXG5cdFx0Ly8gcmVzb2x2ZSB2YXJpYWJsZXNcblx0XHR0ZXh0ID0gdXRpbHMucmVwbGFjZVZhcmlhYmxlcyh0ZXh0LCB0YWJzdG9wcy52YXJpYWJsZXNSZXNvbHZlcihub2RlKSk7XG5cblx0XHR0YWJzdG9wSW5kZXggKz0gbWF4TnVtICsgMTtcblx0XHRyZXR1cm4gdGV4dDtcblx0fSk7XG5cblx0cmV0dXJuIHtcblx0XHQvKipcblx0XHQgKiBNYWluIGZ1bmN0aW9uIHRoYXQgbG9va3MgZm9yIGEgdGFic3RvcHMgaW4gcHJvdmlkZWQgPGNvZGU+dGV4dDwvY29kZT5cblx0XHQgKiBhbmQgcmV0dXJucyBhIHByb2Nlc3NlZCB2ZXJzaW9uIG9mIDxjb2RlPnRleHQ8L2NvZGU+IHdpdGggZXhwYW5kZWRcblx0XHQgKiBwbGFjZWhvbGRlcnMgYW5kIGxpc3Qgb2YgdGFic3RvcHMgZm91bmQuXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGV4dCB0byBwcm9jZXNzXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgTGlzdCBvZiBwcm9jZXNzb3Igb3B0aW9uczo8YnI+XG5cdFx0ICpcblx0XHQgKiA8Yj5yZXBsYWNlQ2FyZXRzPC9iPiA6IDxjb2RlPkJvb2xlYW48L2NvZGU+IOKAlCByZXBsYWNlIGFsbCBkZWZhdWx0XG5cdFx0ICogY2FyZXQgcGxhY2Vob2xkZXJzIChsaWtlIDxpPnslOjplbW1ldC1jYXJldDo6JX08L2k+KSB3aXRoIDxpPiR7MDpjYXJldH08L2k+PGJyPlxuXHRcdCAqXG5cdFx0ICogPGI+ZXNjYXBlPC9iPiA6IDxjb2RlPkZ1bmN0aW9uPC9jb2RlPiDigJQgZnVuY3Rpb24gdGhhdCBoYW5kbGUgZXNjYXBlZFxuXHRcdCAqIGNoYXJhY3RlcnMgKG1vc3RseSAnJCcpLiBCeSBkZWZhdWx0LCBpdCByZXR1cm5zIHRoZSBjaGFyYWN0ZXIgaXRzZWxmXG5cdFx0ICogdG8gYmUgZGlzcGxheWVkIGFzIGlzIGluIG91dHB1dCwgYnV0IHNvbWV0aW1lcyB5b3Ugd2lsbCB1c2Vcblx0XHQgKiA8Y29kZT5leHRyYWN0PC9jb2RlPiBtZXRob2QgYXMgaW50ZXJtZWRpYXRlIHNvbHV0aW9uIGZvciBmdXJ0aGVyXG5cdFx0ICogcHJvY2Vzc2luZyBhbmQgd2FudCB0byBrZWVwIGNoYXJhY3RlciBlc2NhcGVkLiBUaHVzLCB5b3Ugc2hvdWxkIG92ZXJyaWRlXG5cdFx0ICogPGNvZGU+ZXNjYXBlPC9jb2RlPiBtZXRob2QgdG8gcmV0dXJuIGVzY2FwZWQgc3ltYm9sIChlLmcuICdcXFxcJCcpPGJyPlxuXHRcdCAqXG5cdFx0ICogPGI+dGFic3RvcDwvYj4gOiA8Y29kZT5GdW5jdGlvbjwvY29kZT4g4oCTIGEgdGFic3RvcCBoYW5kbGVyLiBSZWNlaXZlc1xuXHRcdCAqIGEgc2luZ2xlIGFyZ3VtZW50IOKAkyBhbiBvYmplY3QgZGVzY3JpYmluZyB0b2tlbjogaXRzIHBvc2l0aW9uLCBudW1iZXJcblx0XHQgKiBncm91cCwgcGxhY2Vob2xkZXIgYW5kIHRva2VuIGl0c2VsZi4gU2hvdWxkIHJldHVybiBhIHJlcGxhY2VtZW50XG5cdFx0ICogc3RyaW5nIHRoYXQgd2lsbCBhcHBlYXIgaW4gZmluYWwgb3V0cHV0XG5cdFx0ICpcblx0XHQgKiA8Yj52YXJpYWJsZTwvYj4gOiA8Y29kZT5GdW5jdGlvbjwvY29kZT4g4oCTIHZhcmlhYmxlIGhhbmRsZXIuIFJlY2VpdmVzXG5cdFx0ICogYSBzaW5nbGUgYXJndW1lbnQg4oCTIGFuIG9iamVjdCBkZXNjcmliaW5nIHRva2VuOiBpdHMgcG9zaXRpb24sIG5hbWVcblx0XHQgKiBhbmQgb3JpZ2luYWwgdG9rZW4gaXRzZWxmLiBTaG91bGQgcmV0dXJuIGEgcmVwbGFjZW1lbnRcblx0XHQgKiBzdHJpbmcgdGhhdCB3aWxsIGFwcGVhciBpbiBmaW5hbCBvdXRwdXRcblx0XHQgKlxuXHRcdCAqIEByZXR1cm5zIHtPYmplY3R9IE9iamVjdCB3aXRoIHByb2Nlc3NlZCA8Y29kZT50ZXh0PC9jb2RlPiBwcm9wZXJ0eVxuXHRcdCAqIGFuZCBhcnJheSBvZiA8Y29kZT50YWJzdG9wczwvY29kZT4gZm91bmRcblx0XHQgKiBAbWVtYmVyT2YgdGFiU3RvcHNcblx0XHQgKi9cblx0XHRleHRyYWN0OiBmdW5jdGlvbih0ZXh0LCBvcHRpb25zKSB7XG5cdFx0XHQvLyBwcmVwYXJlIGRlZmF1bHRzXG5cdFx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXHRcdFx0dmFyIHBsYWNlaG9sZGVycyA9IHtjYXJldHM6ICcnfTtcblx0XHRcdHZhciBtYXJrcyA9IFtdO1xuXG5cdFx0XHRvcHRpb25zID0gXy5leHRlbmQoe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zLCB7XG5cdFx0XHRcdHRhYnN0b3A6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHR2YXIgdG9rZW4gPSBkYXRhLnRva2VuO1xuXHRcdFx0XHRcdHZhciByZXQgPSAnJztcblx0XHRcdFx0XHRpZiAoZGF0YS5wbGFjZWhvbGRlciA9PSAnY3Vyc29yJykge1xuXHRcdFx0XHRcdFx0bWFya3MucHVzaCh7XG5cdFx0XHRcdFx0XHRcdHN0YXJ0OiBkYXRhLnN0YXJ0LFxuXHRcdFx0XHRcdFx0XHRlbmQ6IGRhdGEuc3RhcnQgKyB0b2tlbi5sZW5ndGgsXG5cdFx0XHRcdFx0XHRcdGdyb3VwOiAnY2FyZXRzJyxcblx0XHRcdFx0XHRcdFx0dmFsdWU6ICcnXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gdW5pZnkgcGxhY2Vob2xkZXIgdmFsdWUgZm9yIHNpbmdsZSBncm91cFxuXHRcdFx0XHRcdFx0aWYgKCdwbGFjZWhvbGRlcicgaW4gZGF0YSlcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXJzW2RhdGEuZ3JvdXBdID0gZGF0YS5wbGFjZWhvbGRlcjtcblxuXHRcdFx0XHRcdFx0aWYgKGRhdGEuZ3JvdXAgaW4gcGxhY2Vob2xkZXJzKVxuXHRcdFx0XHRcdFx0XHRyZXQgPSBwbGFjZWhvbGRlcnNbZGF0YS5ncm91cF07XG5cblx0XHRcdFx0XHRcdG1hcmtzLnB1c2goe1xuXHRcdFx0XHRcdFx0XHRzdGFydDogZGF0YS5zdGFydCxcblx0XHRcdFx0XHRcdFx0ZW5kOiBkYXRhLnN0YXJ0ICsgdG9rZW4ubGVuZ3RoLFxuXHRcdFx0XHRcdFx0XHRncm91cDogZGF0YS5ncm91cCxcblx0XHRcdFx0XHRcdFx0dmFsdWU6IHJldFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRva2VuO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKG9wdGlvbnMucmVwbGFjZUNhcmV0cykge1xuXHRcdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKG5ldyBSZWdFeHAoIHV0aWxzLmVzY2FwZUZvclJlZ2V4cCggdXRpbHMuZ2V0Q2FyZXRQbGFjZWhvbGRlcigpICksICdnJyksICckezA6Y3Vyc29yfScpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBsb2NhdGUgdGFic3RvcHMgYW5kIHVuaWZ5IGdyb3VwJ3MgcGxhY2Vob2xkZXJzXG5cdFx0XHR0ZXh0ID0gdGhpcy5wcm9jZXNzVGV4dCh0ZXh0LCBvcHRpb25zKTtcblxuXHRcdFx0Ly8gbm93LCByZXBsYWNlIGFsbCB0YWJzdG9wcyB3aXRoIHBsYWNlaG9sZGVyc1xuXHRcdFx0dmFyIGJ1ZiA9IHV0aWxzLnN0cmluZ0J1aWxkZXIoKSwgbGFzdEl4ID0gMDtcblx0XHRcdHZhciB0YWJTdG9wcyA9IF8ubWFwKG1hcmtzLCBmdW5jdGlvbihtYXJrKSB7XG5cdFx0XHRcdGJ1Zi5hcHBlbmQodGV4dC5zdWJzdHJpbmcobGFzdEl4LCBtYXJrLnN0YXJ0KSk7XG5cblx0XHRcdFx0dmFyIHBvcyA9IGJ1Zi5sZW5ndGg7XG5cdFx0XHRcdHZhciBwaCA9IHBsYWNlaG9sZGVyc1ttYXJrLmdyb3VwXSB8fCAnJztcblxuXHRcdFx0XHRidWYuYXBwZW5kKHBoKTtcblx0XHRcdFx0bGFzdEl4ID0gbWFyay5lbmQ7XG5cblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRncm91cDogbWFyay5ncm91cCxcblx0XHRcdFx0XHRzdGFydDogcG9zLFxuXHRcdFx0XHRcdGVuZDogIHBvcyArIHBoLmxlbmd0aFxuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cblx0XHRcdGJ1Zi5hcHBlbmQodGV4dC5zdWJzdHJpbmcobGFzdEl4KSk7XG5cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHRleHQ6IGJ1Zi50b1N0cmluZygpLFxuXHRcdFx0XHR0YWJzdG9wczogXy5zb3J0QnkodGFiU3RvcHMsICdzdGFydCcpXG5cdFx0XHR9O1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBUZXh0IHByb2Nlc3Npbmcgcm91dGluZS4gTG9jYXRlcyBlc2NhcGVkIGNoYXJhY3RlcnMgYW5kIHRhYnN0b3BzIGFuZFxuXHRcdCAqIHJlcGxhY2VzIHRoZW0gd2l0aCB2YWx1ZXMgcmV0dXJuZWQgYnkgaGFuZGxlcnMgZGVmaW5lZCBpblxuXHRcdCAqIDxjb2RlPm9wdGlvbnM8L2NvZGU+XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBTZWUgPGNvZGU+ZXh0cmFjdDwvY29kZT4gbWV0aG9kIG9wdGlvbnNcblx0XHQgKiBkZXNjcmlwdGlvblxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0cHJvY2Vzc1RleHQ6IGZ1bmN0aW9uKHRleHQsIG9wdGlvbnMpIHtcblx0XHRcdG9wdGlvbnMgPSBfLmV4dGVuZCh7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXG5cdFx0XHR2YXIgYnVmID0gcmVxdWlyZSgndXRpbHMnKS5zdHJpbmdCdWlsZGVyKCk7XG5cdFx0XHQvKiogQHR5cGUgU3RyaW5nU3RyZWFtICovXG5cdFx0XHR2YXIgc3RyZWFtID0gcmVxdWlyZSgnc3RyaW5nU3RyZWFtJykuY3JlYXRlKHRleHQpO1xuXHRcdFx0dmFyIGNoLCBtLCBhO1xuXG5cdFx0XHR3aGlsZSAoY2ggPSBzdHJlYW0ubmV4dCgpKSB7XG5cdFx0XHRcdGlmIChjaCA9PSAnXFxcXCcgJiYgIXN0cmVhbS5lb2woKSkge1xuXHRcdFx0XHRcdC8vIGhhbmRsZSBlc2NhcGVkIGNoYXJhY3RlclxuXHRcdFx0XHRcdGJ1Zi5hcHBlbmQob3B0aW9ucy5lc2NhcGUoc3RyZWFtLm5leHQoKSkpO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YSA9IGNoO1xuXG5cdFx0XHRcdGlmIChjaCA9PSAnJCcpIHtcblx0XHRcdFx0XHQvLyBsb29rcyBsaWtlIGEgdGFic3RvcFxuXHRcdFx0XHRcdHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3MgLSAxO1xuXG5cdFx0XHRcdFx0aWYgKG0gPSBzdHJlYW0ubWF0Y2goL15bMC05XSsvKSkge1xuXHRcdFx0XHRcdFx0Ly8gaXQncyAkTlxuXHRcdFx0XHRcdFx0YSA9IG9wdGlvbnMudGFic3RvcCh7XG5cdFx0XHRcdFx0XHRcdHN0YXJ0OiBidWYubGVuZ3RoLFxuXHRcdFx0XHRcdFx0XHRncm91cDogc3RyZWFtLmN1cnJlbnQoKS5zdWJzdHIoMSksXG5cdFx0XHRcdFx0XHRcdHRva2VuOiBzdHJlYW0uY3VycmVudCgpXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG0gPSBzdHJlYW0ubWF0Y2goL15cXHsoW2Etel9cXC1dW1xcd1xcLV0qKVxcfS8pKSB7XG5cdFx0XHRcdFx0XHQvLyAke3ZhcmlhYmxlfVxuXHRcdFx0XHRcdFx0YSA9IG9wdGlvbnMudmFyaWFibGUoe1xuXHRcdFx0XHRcdFx0XHRzdGFydDogYnVmLmxlbmd0aCxcblx0XHRcdFx0XHRcdFx0bmFtZTogbVsxXSxcblx0XHRcdFx0XHRcdFx0dG9rZW46IHN0cmVhbS5jdXJyZW50KClcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAobSA9IHN0cmVhbS5tYXRjaCgvXlxceyhbMC05XSspKDouKz8pP1xcfS8sIGZhbHNlKSkge1xuXHRcdFx0XHRcdFx0Ly8gJHtOOnZhbHVlfSBvciAke059IHBsYWNlaG9sZGVyXG5cdFx0XHRcdFx0XHQvLyBwYXJzZSBwbGFjZWhvbGRlciwgaW5jbHVkaW5nIG5lc3RlZCBvbmVzXG5cdFx0XHRcdFx0XHRzdHJlYW0uc2tpcFRvUGFpcigneycsICd9Jyk7XG5cblx0XHRcdFx0XHRcdHZhciBvYmogPSB7XG5cdFx0XHRcdFx0XHRcdHN0YXJ0OiBidWYubGVuZ3RoLFxuXHRcdFx0XHRcdFx0XHRncm91cDogbVsxXSxcblx0XHRcdFx0XHRcdFx0dG9rZW46IHN0cmVhbS5jdXJyZW50KClcblx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdHZhciBwbGFjZWhvbGRlciA9IG9iai50b2tlbi5zdWJzdHJpbmcob2JqLmdyb3VwLmxlbmd0aCArIDIsIG9iai50b2tlbi5sZW5ndGggLSAxKTtcblxuXHRcdFx0XHRcdFx0aWYgKHBsYWNlaG9sZGVyKSB7XG5cdFx0XHRcdFx0XHRcdG9iai5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyLnN1YnN0cigxKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YSA9IG9wdGlvbnMudGFic3RvcChvYmopO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGJ1Zi5hcHBlbmQoYSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBidWYudG9TdHJpbmcoKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVXBncmFkZXMgdGFic3RvcHMgaW4gb3V0cHV0IG5vZGUgaW4gb3JkZXIgdG8gcHJldmVudCBuYW1pbmcgY29uZmxpY3RzXG5cdFx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBub2RlXG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBUYWIgaW5kZXggb2Zmc2V0XG5cdFx0ICogQHJldHVybnMge051bWJlcn0gTWF4aW11bSB0YWJzdG9wIGluZGV4IGluIGVsZW1lbnRcblx0XHQgKi9cblx0XHR1cGdyYWRlOiBmdW5jdGlvbihub2RlLCBvZmZzZXQpIHtcblx0XHRcdHZhciBtYXhOdW0gPSAwO1xuXHRcdFx0dmFyIG9wdGlvbnMgPSB7XG5cdFx0XHRcdHRhYnN0b3A6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHR2YXIgZ3JvdXAgPSBwYXJzZUludChkYXRhLmdyb3VwKTtcblx0XHRcdFx0XHRpZiAoZ3JvdXAgPiBtYXhOdW0pIG1heE51bSA9IGdyb3VwO1xuXG5cdFx0XHRcdFx0aWYgKGRhdGEucGxhY2Vob2xkZXIpXG5cdFx0XHRcdFx0XHRyZXR1cm4gJyR7JyArIChncm91cCArIG9mZnNldCkgKyAnOicgKyBkYXRhLnBsYWNlaG9sZGVyICsgJ30nO1xuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdHJldHVybiAnJHsnICsgKGdyb3VwICsgb2Zmc2V0KSArICd9Jztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0Xy5lYWNoKFsnc3RhcnQnLCAnZW5kJywgJ2NvbnRlbnQnXSwgZnVuY3Rpb24ocCkge1xuXHRcdFx0XHRub2RlW3BdID0gdGhpcy5wcm9jZXNzVGV4dChub2RlW3BdLCBvcHRpb25zKTtcblx0XHRcdH0sIHRoaXMpO1xuXG5cdFx0XHRyZXR1cm4gbWF4TnVtO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBwcm9kdWNlcyBhIGNhbGxiYWNrIGZ1bmN0aW9uIGZvclxuXHRcdCAqIDxjb2RlPnJlcGxhY2VWYXJpYWJsZXMoKTwvY29kZT4gbWV0aG9kIGZyb20ge0BsaW5rIHV0aWxzfVxuXHRcdCAqIG1vZHVsZS4gVGhpcyBjYWxsYmFjayB3aWxsIHJlcGxhY2UgdmFyaWFibGUgZGVmaW5pdGlvbnMgKGxpa2Vcblx0XHQgKiAke3Zhcl9uYW1lfSkgd2l0aCB0aGVpciB2YWx1ZSBkZWZpbmVkIGluIDxpPnJlc291cmNlPC9pPiBtb2R1bGUsXG5cdFx0ICogb3Igb3V0cHV0cyB0YWJzdG9wIHdpdGggdmFyaWFibGUgbmFtZSBvdGhlcndpc2UuXG5cdFx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBub2RlIENvbnRleHQgbm9kZVxuXHRcdCAqIEByZXR1cm5zIHtGdW5jdGlvbn1cblx0XHQgKi9cblx0XHR2YXJpYWJsZXNSZXNvbHZlcjogZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0dmFyIHBsYWNlaG9sZGVyTWVtbyA9IHt9O1xuXHRcdFx0dmFyIHJlcyA9IHJlcXVpcmUoJ3Jlc291cmNlcycpO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKHN0ciwgdmFyTmFtZSkge1xuXHRcdFx0XHQvLyBkbyBub3QgbWFyayBgY2hpbGRgIHZhcmlhYmxlIGFzIHBsYWNlaG9sZGVyIOKAkyBpdOKAmHMgYSByZXNlcnZlZFxuXHRcdFx0XHQvLyB2YXJpYWJsZSBuYW1lXG5cdFx0XHRcdGlmICh2YXJOYW1lID09ICdjaGlsZCcpXG5cdFx0XHRcdFx0cmV0dXJuIHN0cjtcblxuXHRcdFx0XHRpZiAodmFyTmFtZSA9PSAnY3Vyc29yJylcblx0XHRcdFx0XHRyZXR1cm4gcmVxdWlyZSgndXRpbHMnKS5nZXRDYXJldFBsYWNlaG9sZGVyKCk7XG5cblx0XHRcdFx0dmFyIGF0dHIgPSBub2RlLmF0dHJpYnV0ZSh2YXJOYW1lKTtcblx0XHRcdFx0aWYgKCFfLmlzVW5kZWZpbmVkKGF0dHIpICYmIGF0dHIgIT09IHN0cikge1xuXHRcdFx0XHRcdHJldHVybiBhdHRyO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIHZhclZhbHVlID0gcmVzLmdldFZhcmlhYmxlKHZhck5hbWUpO1xuXHRcdFx0XHRpZiAodmFyVmFsdWUpXG5cdFx0XHRcdFx0cmV0dXJuIHZhclZhbHVlO1xuXG5cdFx0XHRcdC8vIG91dHB1dCBhcyBwbGFjZWhvbGRlclxuXHRcdFx0XHRpZiAoIXBsYWNlaG9sZGVyTWVtb1t2YXJOYW1lXSlcblx0XHRcdFx0XHRwbGFjZWhvbGRlck1lbW9bdmFyTmFtZV0gPSBzdGFydFBsYWNlaG9sZGVyTnVtKys7XG5cblx0XHRcdFx0cmV0dXJuICckeycgKyBwbGFjZWhvbGRlck1lbW9bdmFyTmFtZV0gKyAnOicgKyB2YXJOYW1lICsgJ30nO1xuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVzZXRzIGdsb2JhbCB0YWJzdG9wIGluZGV4LiBXaGVuIHBhcnNlZCB0cmVlIGlzIGNvbnZlcnRlZCB0byBvdXRwdXRcblx0XHQgKiBzdHJpbmcgKDxjb2RlPkFiYnJldmlhdGlvbk5vZGUudG9TdHJpbmcoKTwvY29kZT4pLCBhbGwgdGFic3RvcHNcblx0XHQgKiBkZWZpbmVkIGluIHNuaXBwZXRzIGFuZCBlbGVtZW50cyBhcmUgdXBncmFkZWQgaW4gb3JkZXIgdG8gcHJldmVudFxuXHRcdCAqIG5hbWluZyBjb25mbGljdHMgb2YgbmVzdGVkLiBGb3IgZXhhbXBsZSwgPGNvZGU+JHsxfTwvY29kZT4gb2YgYSBub2RlXG5cdFx0ICogc2hvdWxkIG5vdCBiZSBsaW5rZWQgd2l0aCB0aGUgc2FtZSBwbGFjZWhpbGRlciBvZiB0aGUgY2hpbGQgbm9kZS5cblx0XHQgKiBCeSBkZWZhdWx0LCA8Y29kZT5BYmJyZXZpYXRpb25Ob2RlLnRvU3RyaW5nKCk8L2NvZGU+IGF1dG9tYXRpY2FsbHlcblx0XHQgKiB1cGdyYWRlcyB0YWJzdG9wcyBvZiB0aGUgc2FtZSBpbmRleCBmb3IgZWFjaCBub2RlIGFuZCB3cml0ZXMgbWF4aW11bVxuXHRcdCAqIHRhYnN0b3AgaW5kZXggaW50byB0aGUgPGNvZGU+dGFic3RvcEluZGV4PC9jb2RlPiB2YXJpYWJsZS4gVG8ga2VlcFxuXHRcdCAqIHRoaXMgdmFyaWFibGUgYXQgcmVhc29uYWJsZSB2YWx1ZSwgaXQgaXMgcmVjb21tZW5kZWQgdG8gY2FsbFxuXHRcdCAqIDxjb2RlPnJlc2V0VGFic3RvcEluZGV4KCk8L2NvZGU+IG1ldGhvZCBlYWNoIHRpbWUgeW91IGV4cGFuZCB2YXJpYWJsZVxuXHRcdCAqIEByZXR1cm5zXG5cdFx0ICovXG5cdFx0cmVzZXRUYWJzdG9wSW5kZXg6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGFic3RvcEluZGV4ID0gMDtcblx0XHRcdHN0YXJ0UGxhY2Vob2xkZXJOdW0gPSAxMDA7XG5cdFx0fVxuXHR9O1xufSk7LyoqXG4gKiBDb21tb24gbW9kdWxlJ3MgcHJlZmVyZW5jZXMgc3RvcmFnZS4gVGhpcyBtb2R1bGVcbiAqIHByb3ZpZGVzIGdlbmVyYWwgc3RvcmFnZSBmb3IgYWxsIG1vZHVsZSBwcmVmZXJlbmNlcywgdGhlaXIgZGVzY3JpcHRpb24gYW5kXG4gKiBkZWZhdWx0IHZhbHVlcy48YnI+PGJyPlxuICpcbiAqIFRoaXMgbW9kdWxlIGNhbiBhbHNvIGJlIHVzZWQgdG8gbGlzdCBhbGwgYXZhaWxhYmxlIHByb3BlcnRpZXMgdG8gY3JlYXRlXG4gKiBVSSBmb3IgdXBkYXRpbmcgcHJvcGVydGllc1xuICpcbiAqIEBtZW1iZXJPZiBfX3ByZWZlcmVuY2VzRGVmaW5lXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlcXVpcmVcbiAqIEBwYXJhbSB7VW5kZXJzY29yZX0gX1xuICovXG5lbW1ldC5kZWZpbmUoJ3ByZWZlcmVuY2VzJywgZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHR2YXIgcHJlZmVyZW5jZXMgPSB7fTtcblx0dmFyIGRlZmF1bHRzID0ge307XG5cdHZhciBfZGJnRGVmYXVsdHMgPSBudWxsO1xuXHR2YXIgX2RiZ1ByZWZlcmVuY2VzID0gbnVsbDtcblxuXHRmdW5jdGlvbiB0b0Jvb2xlYW4odmFsKSB7XG5cdFx0aWYgKF8uaXNTdHJpbmcodmFsKSkge1xuXHRcdFx0dmFsID0gdmFsLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gdmFsID09ICd5ZXMnIHx8IHZhbCA9PSAndHJ1ZScgfHwgdmFsID09ICcxJztcblx0XHR9XG5cblx0XHRyZXR1cm4gISF2YWw7XG5cdH1cblxuXHRmdW5jdGlvbiBpc1ZhbHVlT2JqKG9iaikge1xuXHRcdHJldHVybiBfLmlzT2JqZWN0KG9iailcblx0XHRcdCYmICd2YWx1ZScgaW4gb2JqXG5cdFx0XHQmJiBfLmtleXMob2JqKS5sZW5ndGggPCAzO1xuXHR9XG5cblx0cmV0dXJuIHtcblx0XHQvKipcblx0XHQgKiBDcmVhdGVzIG5ldyBwcmVmZXJlbmNlIGl0ZW0gd2l0aCBkZWZhdWx0IHZhbHVlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgUHJlZmVyZW5jZSBuYW1lLiBZb3UgY2FuIGFsc28gcGFzcyBvYmplY3Rcblx0XHQgKiB3aXRoIG1hbnkgb3B0aW9uc1xuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSBQcmVmZXJlbmNlIGRlZmF1bHQgdmFsdWVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gZGVzY3JpcHRpb24gSXRlbSB0ZXh0dWFsIGRlc2NyaXB0aW9uXG5cdFx0ICogQG1lbWJlck9mIHByZWZlcmVuY2VzXG5cdFx0ICovXG5cdFx0ZGVmaW5lOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgZGVzY3JpcHRpb24pIHtcblx0XHRcdHZhciBwcmVmcyA9IG5hbWU7XG5cdFx0XHRpZiAoXy5pc1N0cmluZyhuYW1lKSkge1xuXHRcdFx0XHRwcmVmcyA9IHt9O1xuXHRcdFx0XHRwcmVmc1tuYW1lXSA9IHtcblx0XHRcdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdF8uZWFjaChwcmVmcywgZnVuY3Rpb24odiwgaykge1xuXHRcdFx0XHRkZWZhdWx0c1trXSA9IGlzVmFsdWVPYmoodikgPyB2IDoge3ZhbHVlOiB2fTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBVcGRhdGVzIHByZWZlcmVuY2UgaXRlbSB2YWx1ZS4gUHJlZmVyZW5jZSB2YWx1ZSBzaG91bGQgYmUgZGVmaW5lZFxuXHRcdCAqIGZpcnN0IHdpdGggPGNvZGU+ZGVmaW5lPC9jb2RlPiBtZXRob2QuXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgUHJlZmVyZW5jZSBuYW1lLiBZb3UgY2FuIGFsc28gcGFzcyBvYmplY3Rcblx0XHQgKiB3aXRoIG1hbnkgb3B0aW9uc1xuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSBQcmVmZXJlbmNlIGRlZmF1bHQgdmFsdWVcblx0XHQgKiBAbWVtYmVyT2YgcHJlZmVyZW5jZXNcblx0XHQgKi9cblx0XHRzZXQ6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG5cdFx0XHR2YXIgcHJlZnMgPSBuYW1lO1xuXHRcdFx0aWYgKF8uaXNTdHJpbmcobmFtZSkpIHtcblx0XHRcdFx0cHJlZnMgPSB7fTtcblx0XHRcdFx0cHJlZnNbbmFtZV0gPSB2YWx1ZTtcblx0XHRcdH1cblxuXHRcdFx0Xy5lYWNoKHByZWZzLCBmdW5jdGlvbih2LCBrKSB7XG5cdFx0XHRcdGlmICghKGsgaW4gZGVmYXVsdHMpKSB7XG5cdFx0XHRcdFx0dGhyb3cgJ1Byb3BlcnR5IFwiJyArIGsgKyAnXCIgaXMgbm90IGRlZmluZWQuIFlvdSBzaG91bGQgZGVmaW5lIGl0IGZpcnN0IHdpdGggYGRlZmluZWAgbWV0aG9kIG9mIGN1cnJlbnQgbW9kdWxlJztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGRvIG5vdCBzZXQgdmFsdWUgaWYgaXQgZXF1YWxzIHRvIGRlZmF1bHQgdmFsdWVcblx0XHRcdFx0aWYgKHYgIT09IGRlZmF1bHRzW2tdLnZhbHVlKSB7XG5cdFx0XHRcdFx0Ly8gbWFrZSBzdXJlIHdlIGhhdmUgdmFsdWUgb2YgY29ycmVjdCB0eXBlXG5cdFx0XHRcdFx0c3dpdGNoICh0eXBlb2YgZGVmYXVsdHNba10udmFsdWUpIHtcblx0XHRcdFx0XHRcdGNhc2UgJ2Jvb2xlYW4nOlxuXHRcdFx0XHRcdFx0XHR2ID0gdG9Cb29sZWFuKHYpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ251bWJlcic6XG5cdFx0XHRcdFx0XHRcdHYgPSBwYXJzZUludCh2ICsgJycsIDEwKSB8fCAwO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGRlZmF1bHQ6IC8vIGNvbnZlcnQgdG8gc3RyaW5nXG5cdFx0XHRcdFx0XHRcdGlmICh2ICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdFx0diArPSAnJztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHByZWZlcmVuY2VzW2tdID0gdjtcblx0XHRcdFx0fSBlbHNlIGlmICAoayBpbiBwcmVmZXJlbmNlcykge1xuXHRcdFx0XHRcdGRlbGV0ZSBwcmVmZXJlbmNlc1trXTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgcHJlZmVyZW5jZSB2YWx1ZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdFx0ICogQHJldHVybnMge1N0cmluZ30gUmV0dXJucyA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IGlmIHByZWZlcmVuY2UgaXNcblx0XHQgKiBub3QgZGVmaW5lZFxuXHRcdCAqL1xuXHRcdGdldDogZnVuY3Rpb24obmFtZSkge1xuXHRcdFx0aWYgKG5hbWUgaW4gcHJlZmVyZW5jZXMpXG5cdFx0XHRcdHJldHVybiBwcmVmZXJlbmNlc1tuYW1lXTtcblxuXHRcdFx0aWYgKG5hbWUgaW4gZGVmYXVsdHMpXG5cdFx0XHRcdHJldHVybiBkZWZhdWx0c1tuYW1lXS52YWx1ZTtcblxuXHRcdFx0cmV0dXJuIHZvaWQgMDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBjb21tYS1zZXBhcmF0ZWQgcHJlZmVyZW5jZSB2YWx1ZSBhcyBhcnJheSBvZiB2YWx1ZXNcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHRcdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyA8Y29kZT51bmRlZmluZWQ8L2NvZGU+IGlmIHByZWZlcmVuY2UgaXNcblx0XHQgKiBub3QgZGVmaW5lZCwgPGNvZGU+bnVsbDwvY29kZT4gaWYgc3RyaW5nIGNhbm5vdCBiZSBjb252ZXJ0ZWQgdG8gYXJyYXlcblx0XHQgKi9cblx0XHRnZXRBcnJheTogZnVuY3Rpb24obmFtZSkge1xuXHRcdFx0dmFyIHZhbCA9IHRoaXMuZ2V0KG5hbWUpO1xuXHRcdFx0aWYgKF8uaXNVbmRlZmluZWQodmFsKSB8fCB2YWwgPT09IG51bGwgfHwgdmFsID09PSAnJykgIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdHZhbCA9IF8ubWFwKHZhbC5zcGxpdCgnLCcpLCByZXF1aXJlKCd1dGlscycpLnRyaW0pO1xuXHRcdFx0aWYgKCF2YWwubGVuZ3RoKSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGNvbW1hIGFuZCBjb2xvbi1zZXBhcmF0ZWQgcHJlZmVyZW5jZSB2YWx1ZSBhcyBkaWN0aW9uYXJ5XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0XHQgKiBAcmV0dXJucyB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdGdldERpY3Q6IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdHZhciByZXN1bHQgPSB7fTtcblx0XHRcdF8uZWFjaCh0aGlzLmdldEFycmF5KG5hbWUpLCBmdW5jdGlvbih2YWwpIHtcblx0XHRcdFx0dmFyIHBhcnRzID0gdmFsLnNwbGl0KCc6Jyk7XG5cdFx0XHRcdHJlc3VsdFtwYXJ0c1swXV0gPSBwYXJ0c1sxXTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGRlc2NyaXB0aW9uIG9mIHByZWZlcmVuY2UgaXRlbVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFByZWZlcmVuY2UgbmFtZVxuXHRcdCAqIEByZXR1cm5zIHtPYmplY3R9XG5cdFx0ICovXG5cdFx0ZGVzY3JpcHRpb246IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdHJldHVybiBuYW1lIGluIGRlZmF1bHRzID8gZGVmYXVsdHNbbmFtZV0uZGVzY3JpcHRpb24gOiB2b2lkIDA7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIENvbXBsZXRlbHkgcmVtb3ZlcyBzcGVjaWZpZWQgcHJlZmVyZW5jZShzKVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFByZWZlcmVuY2UgbmFtZSAob3IgYXJyYXkgb2YgbmFtZXMpXG5cdFx0ICovXG5cdFx0cmVtb3ZlOiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRpZiAoIV8uaXNBcnJheShuYW1lKSlcblx0XHRcdFx0bmFtZSA9IFtuYW1lXTtcblxuXHRcdFx0Xy5lYWNoKG5hbWUsIGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRpZiAoa2V5IGluIHByZWZlcmVuY2VzKVxuXHRcdFx0XHRcdGRlbGV0ZSBwcmVmZXJlbmNlc1trZXldO1xuXG5cdFx0XHRcdGlmIChrZXkgaW4gZGVmYXVsdHMpXG5cdFx0XHRcdFx0ZGVsZXRlIGRlZmF1bHRzW2tleV07XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBzb3J0ZWQgbGlzdCBvZiBhbGwgYXZhaWxhYmxlIHByb3BlcnRpZXNcblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdFx0ICovXG5cdFx0bGlzdDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gXy5tYXAoXy5rZXlzKGRlZmF1bHRzKS5zb3J0KCksIGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdG5hbWU6IGtleSxcblx0XHRcdFx0XHR2YWx1ZTogdGhpcy5nZXQoa2V5KSxcblx0XHRcdFx0XHR0eXBlOiB0eXBlb2YgZGVmYXVsdHNba2V5XS52YWx1ZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVmYXVsdHNba2V5XS5kZXNjcmlwdGlvblxuXHRcdFx0XHR9O1xuXHRcdFx0fSwgdGhpcyk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIExvYWRzIHVzZXItZGVmaW5lZCBwcmVmZXJlbmNlcyBmcm9tIEpTT05cblx0XHQgKiBAcGFyYW0ge09iamVjdH0ganNvblxuXHRcdCAqIEByZXR1cm5zXG5cdFx0ICovXG5cdFx0bG9hZDogZnVuY3Rpb24oanNvbikge1xuXHRcdFx0Xy5lYWNoKGpzb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcblx0XHRcdFx0dGhpcy5zZXQoa2V5LCB2YWx1ZSk7XG5cdFx0XHR9LCB0aGlzKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBoYXNoIG9mIHVzZXItbW9kaWZpZWQgcHJlZmVyZW5jZXNcblx0XHQgKiBAcmV0dXJucyB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdGV4cG9ydE1vZGlmaWVkOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBfLmNsb25lKHByZWZlcmVuY2VzKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVzZXQgdG8gZGVmYXVsdHNcblx0XHQgKiBAcmV0dXJuc1xuXHRcdCAqL1xuXHRcdHJlc2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHByZWZlcmVuY2VzID0ge307XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEZvciB1bml0IHRlc3Rpbmc6IHVzZSBlbXB0eSBzdG9yYWdlXG5cdFx0ICovXG5cdFx0X3N0YXJ0VGVzdDogZnVuY3Rpb24oKSB7XG5cdFx0XHRfZGJnRGVmYXVsdHMgPSBkZWZhdWx0cztcblx0XHRcdF9kYmdQcmVmZXJlbmNlcyA9IHByZWZlcmVuY2VzO1xuXHRcdFx0ZGVmYXVsdHMgPSB7fTtcblx0XHRcdHByZWZlcmVuY2VzID0ge307XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEZvciB1bml0IHRlc3Rpbmc6IHJlc3RvcmUgb3JpZ2luYWwgc3RvcmFnZVxuXHRcdCAqL1xuXHRcdF9zdG9wVGVzdDogZnVuY3Rpb24oKSB7XG5cdFx0XHRkZWZhdWx0cyA9IF9kYmdEZWZhdWx0cztcblx0XHRcdHByZWZlcmVuY2VzID0gX2RiZ1ByZWZlcmVuY2VzO1xuXHRcdH1cblx0fTtcbn0pOy8qKlxuICogTW9kdWxlIGZvciBoYW5kbGluZyBmaWx0ZXJzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqIEBhdXRob3IgU2VyZ2V5IENoaWt1eW9ub2sgKHNlcmdlLmNoZUBnbWFpbC5jb20pIDxodHRwOi8vY2hpa3V5b25vay5ydT5cbiAqL1xuZW1tZXQuZGVmaW5lKCdmaWx0ZXJzJywgZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHQvKiogTGlzdCBvZiByZWdpc3RlcmVkIGZpbHRlcnMgKi9cblx0dmFyIHJlZ2lzdGVyZWRGaWx0ZXJzID0ge307XG5cblx0LyoqIEZpbHRlcnMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgZm9yIHVua25vd24gc3ludGF4ICovXG5cdHZhciBiYXNpY0ZpbHRlcnMgPSAnaHRtbCc7XG5cblx0ZnVuY3Rpb24gbGlzdChmaWx0ZXJzKSB7XG5cdFx0aWYgKCFmaWx0ZXJzKVxuXHRcdFx0cmV0dXJuIFtdO1xuXG5cdFx0aWYgKF8uaXNTdHJpbmcoZmlsdGVycykpXG5cdFx0XHRyZXR1cm4gZmlsdGVycy5zcGxpdCgvW1xcfCxdL2cpO1xuXG5cdFx0cmV0dXJuIGZpbHRlcnM7XG5cdH1cblxuXHRyZXR1cm4gIHtcblx0XHQvKipcblx0XHQgKiBSZWdpc3RlciBuZXcgZmlsdGVyXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgRmlsdGVyIG5hbWVcblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGaWx0ZXIgZnVuY3Rpb25cblx0XHQgKi9cblx0XHRhZGQ6IGZ1bmN0aW9uKG5hbWUsIGZuKSB7XG5cdFx0XHRyZWdpc3RlcmVkRmlsdGVyc1tuYW1lXSA9IGZuO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBBcHBseSBmaWx0ZXJzIGZvciBmaW5hbCBvdXRwdXQgdHJlZVxuXHRcdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gdHJlZSBPdXRwdXQgdHJlZVxuXHRcdCAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcnMgTGlzdCBvZiBmaWx0ZXJzIHRvIGFwcGx5LiBNaWdodCBiZSBhXG5cdFx0ICogPGNvZGU+U3RyaW5nPC9jb2RlPlxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9maWxlIE91dHB1dCBwcm9maWxlLCBkZWZpbmVkIGluIDxpPnByb2ZpbGU8L2k+XG5cdFx0ICogbW9kdWxlLiBGaWx0ZXJzIGRlZmluZWQgaXQgcHJvZmlsZSBhcmUgbm90IHVzZWQsIDxjb2RlPnByb2ZpbGU8L2NvZGU+XG5cdFx0ICogaXMgcGFzc2VkIHRvIGZpbHRlciBmdW5jdGlvblxuXHRcdCAqIEBtZW1iZXJPZiBlbW1ldC5maWx0ZXJzXG5cdFx0ICogQHJldHVybnMge0FiYnJldmlhdGlvbk5vZGV9XG5cdFx0ICovXG5cdFx0YXBwbHk6IGZ1bmN0aW9uKHRyZWUsIGZpbHRlcnMsIHByb2ZpbGUpIHtcblx0XHRcdHZhciB1dGlscyA9IHJlcXVpcmUoJ3V0aWxzJyk7XG5cdFx0XHRwcm9maWxlID0gcmVxdWlyZSgncHJvZmlsZScpLmdldChwcm9maWxlKTtcblxuXHRcdFx0Xy5lYWNoKGxpc3QoZmlsdGVycyksIGZ1bmN0aW9uKGZpbHRlcikge1xuXHRcdFx0XHR2YXIgbmFtZSA9IHV0aWxzLnRyaW0oZmlsdGVyLnRvTG93ZXJDYXNlKCkpO1xuXHRcdFx0XHRpZiAobmFtZSAmJiBuYW1lIGluIHJlZ2lzdGVyZWRGaWx0ZXJzKSB7XG5cdFx0XHRcdFx0dHJlZSA9IHJlZ2lzdGVyZWRGaWx0ZXJzW25hbWVdKHRyZWUsIHByb2ZpbGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHRyZWU7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIENvbXBvc2VzIGxpc3Qgb2YgZmlsdGVycyB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGEgdHJlZSwgYmFzZWQgb25cblx0XHQgKiBwYXNzZWQgZGF0YVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzeW50YXggU3ludGF4IG5hbWUgKCdodG1sJywgJ2NzcycsIGV0Yy4pXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IHByb2ZpbGUgT3V0cHV0IHByb2ZpbGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gYWRkaXRpb25hbEZpbHRlcnMgTGlzdCBvciBwaXBlLXNlcGFyYXRlZFxuXHRcdCAqIHN0cmluZyBvZiBhZGRpdGlvbmFsIGZpbHRlcnMgdG8gYXBwbHlcblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdFx0ICovXG5cdFx0Y29tcG9zZUxpc3Q6IGZ1bmN0aW9uKHN5bnRheCwgcHJvZmlsZSwgYWRkaXRpb25hbEZpbHRlcnMpIHtcblx0XHRcdHByb2ZpbGUgPSByZXF1aXJlKCdwcm9maWxlJykuZ2V0KHByb2ZpbGUpO1xuXHRcdFx0dmFyIGZpbHRlcnMgPSBsaXN0KHByb2ZpbGUuZmlsdGVycyB8fCByZXF1aXJlKCdyZXNvdXJjZXMnKS5maW5kSXRlbShzeW50YXgsICdmaWx0ZXJzJykgfHwgYmFzaWNGaWx0ZXJzKTtcblxuXHRcdFx0aWYgKHByb2ZpbGUuZXh0cmFGaWx0ZXJzKSB7XG5cdFx0XHRcdGZpbHRlcnMgPSBmaWx0ZXJzLmNvbmNhdChsaXN0KHByb2ZpbGUuZXh0cmFGaWx0ZXJzKSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChhZGRpdGlvbmFsRmlsdGVycykge1xuXHRcdFx0XHRmaWx0ZXJzID0gZmlsdGVycy5jb25jYXQobGlzdChhZGRpdGlvbmFsRmlsdGVycykpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWZpbHRlcnMgfHwgIWZpbHRlcnMubGVuZ3RoKSB7XG5cdFx0XHRcdC8vIGxvb2tzIGxpa2UgdW5rbm93biBzeW50YXgsIGFwcGx5IGJhc2ljIGZpbHRlcnNcblx0XHRcdFx0ZmlsdGVycyA9IGxpc3QoYmFzaWNGaWx0ZXJzKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZpbHRlcnM7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEV4dHJhY3RzIGZpbHRlciBsaXN0IGZyb20gYWJicmV2aWF0aW9uXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGFiYnJcblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IHdpdGggY2xlYW5lZCBhYmJyZXZpYXRpb24gYW5kIGxpc3Qgb2Zcblx0XHQgKiBleHRyYWN0ZWQgZmlsdGVyc1xuXHRcdCAqL1xuXHRcdGV4dHJhY3RGcm9tQWJicmV2aWF0aW9uOiBmdW5jdGlvbihhYmJyKSB7XG5cdFx0XHR2YXIgZmlsdGVycyA9ICcnO1xuXHRcdFx0YWJiciA9IGFiYnIucmVwbGFjZSgvXFx8KFtcXHdcXHxcXC1dKykkLywgZnVuY3Rpb24oc3RyLCBwMSl7XG5cdFx0XHRcdGZpbHRlcnMgPSBwMTtcblx0XHRcdFx0cmV0dXJuICcnO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBbYWJiciwgbGlzdChmaWx0ZXJzKV07XG5cdFx0fVxuXHR9O1xufSk7LyoqXG4gKiBNb2R1bGUgdGhhdCBjb250YWlucyBmYWN0b3JpZXMgZm9yIGVsZW1lbnQgdHlwZXMgdXNlZCBieSBFbW1ldFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmRlZmluZSgnZWxlbWVudHMnLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHZhciBmYWN0b3JpZXMgPSB7fTtcblx0dmFyIHJlQXR0cnMgPSAvKFtcXHdcXC06XSspXFxzKj1cXHMqKFsnXCJdKSguKj8pXFwyL2c7XG5cblx0dmFyIHJlc3VsdCA9IHtcblx0XHQvKipcblx0XHQgKiBDcmVhdGUgbmV3IGVsZW1lbnQgZmFjdG9yeVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIEVsZW1lbnQgaWRlbnRpZmllclxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZhY3RvcnkgRnVuY3Rpb24gdGhhdCBwcm9kdWNlcyBlbGVtZW50IG9mIHNwZWNpZmllZFxuXHRcdCAqIHR5cGUuIFRoZSBvYmplY3QgZ2VuZXJhdGVkIGJ5IHRoaXMgZmFjdG9yeSBpcyBhdXRvbWF0aWNhbGx5XG5cdFx0ICogYXVnbWVudGVkIHdpdGggPGNvZGU+dHlwZTwvY29kZT4gcHJvcGVydHkgcG9pbnRpbmcgdG8gZWxlbWVudFxuXHRcdCAqIDxjb2RlPm5hbWU8L2NvZGU+XG5cdFx0ICogQG1lbWJlck9mIGVsZW1lbnRzXG5cdFx0ICovXG5cdFx0YWRkOiBmdW5jdGlvbihuYW1lLCBmYWN0b3J5KSB7XG5cdFx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cdFx0XHRmYWN0b3JpZXNbbmFtZV0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGVsZW0gPSBmYWN0b3J5LmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdGlmIChlbGVtKVxuXHRcdFx0XHRcdGVsZW0udHlwZSA9IG5hbWU7XG5cblx0XHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0XHR9O1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGZhY3RvcnkgZm9yIHNwZWNpZmllZCBuYW1lXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0XHQgKiBAcmV0dXJucyB7RnVuY3Rpb259XG5cdFx0ICovXG5cdFx0Z2V0OiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRyZXR1cm4gZmFjdG9yaWVzW25hbWVdO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDcmVhdGVzIG5ldyBlbGVtZW50IHdpdGggc3BlY2lmaWVkIHR5cGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHRcdCAqIEByZXR1cm5zIHtPYmplY3R9XG5cdFx0ICovXG5cdFx0Y3JlYXRlOiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHR2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblx0XHRcdHZhciBmYWN0b3J5ID0gdGhpcy5nZXQobmFtZSk7XG5cdFx0XHRyZXR1cm4gZmFjdG9yeSA/IGZhY3RvcnkuYXBwbHkodGhpcywgYXJncykgOiBudWxsO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDaGVjayBpZiBwYXNzZWQgZWxlbWVudCBpcyBvZiBzcGVjaWZpZWQgdHlwZVxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0XHQgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRpczogZnVuY3Rpb24oZWxlbSwgdHlwZSkge1xuXHRcdFx0cmV0dXJuIGVsZW0gJiYgZWxlbS50eXBlID09PSB0eXBlO1xuXHRcdH1cblx0fTtcblxuXHQvLyByZWdpc3RlciByZXNvdXJjZSByZWZlcmVuY2VzXG5cdGZ1bmN0aW9uIGNvbW1vbkZhY3RvcnkodmFsdWUpIHtcblx0XHRyZXR1cm4ge2RhdGE6IHZhbHVlfTtcblx0fVxuXG5cdC8qKlxuXHQgKiBFbGVtZW50IGZhY3Rvcnlcblx0ICogQHBhcmFtIHtTdHJpbmd9IGVsZW1lbnROYW1lIE5hbWUgb2Ygb3V0cHV0IGVsZW1lbnRcblx0ICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIEF0dHJpYnV0ZXMgZGVmaW5pdGlvbi4gWW91IG1heSBhbHNvIHBhc3Ncblx0ICogPGNvZGU+QXJyYXk8L2NvZGU+IHdoZXJlIGVhY2ggY29udGFpbnMgb2JqZWN0IHdpdGggPGNvZGU+bmFtZTwvY29kZT5cblx0ICogYW5kIDxjb2RlPnZhbHVlPC9jb2RlPiBwcm9wZXJ0aWVzLCBvciA8Y29kZT5PYmplY3Q8L2NvZGU+XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNFbXB0eSBJcyBleHBhbmRlZCBlbGVtZW50IHNob3VsZCBiZSBlbXB0eVxuXHQgKi9cblx0cmVzdWx0LmFkZCgnZWxlbWVudCcsIGZ1bmN0aW9uKGVsZW1lbnROYW1lLCBhdHRycywgaXNFbXB0eSkge1xuXHRcdHZhciByZXQgPSB7XG5cdFx0XHQvKiogQG1lbWJlck9mIF9fZW1tZXREYXRhRWxlbWVudCAqL1xuXHRcdFx0bmFtZTogZWxlbWVudE5hbWUsXG5cdFx0XHRpc19lbXB0eTogISFpc0VtcHR5XG5cdFx0fTtcblxuXHRcdGlmIChhdHRycykge1xuXHRcdFx0cmV0LmF0dHJpYnV0ZXMgPSBbXTtcblx0XHRcdGlmIChfLmlzQXJyYXkoYXR0cnMpKSB7XG5cdFx0XHRcdHJldC5hdHRyaWJ1dGVzID0gYXR0cnM7XG5cdFx0XHR9IGVsc2UgaWYgKF8uaXNTdHJpbmcoYXR0cnMpKSB7XG5cdFx0XHRcdHZhciBtO1xuXHRcdFx0XHR3aGlsZSAobSA9IHJlQXR0cnMuZXhlYyhhdHRycykpIHtcblx0XHRcdFx0XHRyZXQuYXR0cmlidXRlcy5wdXNoKHtcblx0XHRcdFx0XHRcdG5hbWU6IG1bMV0sXG5cdFx0XHRcdFx0XHR2YWx1ZTogbVszXVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRfLmVhY2goYXR0cnMsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG5cdFx0XHRcdFx0cmV0LmF0dHJpYnV0ZXMucHVzaCh7XG5cdFx0XHRcdFx0XHRuYW1lOiBuYW1lLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHZhbHVlXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXQ7XG5cdH0pO1xuXG5cdHJlc3VsdC5hZGQoJ3NuaXBwZXQnLCBjb21tb25GYWN0b3J5KTtcblx0cmVzdWx0LmFkZCgncmVmZXJlbmNlJywgY29tbW9uRmFjdG9yeSk7XG5cdHJlc3VsdC5hZGQoJ2VtcHR5JywgZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHt9O1xuXHR9KTtcblxuXHRyZXR1cm4gcmVzdWx0O1xufSk7LyoqXG4gKiBBYnN0cmFjdCBpbXBsZW1lbnRhdGlvbiBvZiBlZGl0IHRyZWUgaW50ZXJmYWNlLlxuICogRWRpdCB0cmVlIGlzIGEgbmFtZWQgY29udGFpbmVyIG9mIGVkaXRhYmxlIOKAnG5hbWUtdmFsdWXigJ0gY2hpbGQgZWxlbWVudHMsXG4gKiBwYXJzZWQgZnJvbSA8Y29kZT5zb3VyY2U8L2NvZGU+LiBUaGlzIGNvbnRhaW5lciBwcm92aWRlcyBjb252ZW5pZW50IG1ldGhvZHNcbiAqIGZvciBlZGl0aW5nL2FkZGluZy9yZW1vdmluZyBjaGlsZCBlbGVtZW50cy4gQWxsIHRoZXNlIHVwZGF0ZSBhY3Rpb25zIGFyZVxuICogaW5zdGFudGx5IHJlZmxlY3RlZCBpbiB0aGUgPGNvZGU+c291cmNlPC9jb2RlPiBjb2RlIHdpdGggcmVzcGVjdCBvZiBmb3JtYXR0aW5nLlxuICogPGJyPjxicj5cbiAqIEZvciBleGFtcGxlLCBkZXZlbG9wZXIgY2FuIGNyZWF0ZSBhbiBlZGl0IHRyZWUgZnJvbSBDU1MgcnVsZSBhbmQgYWRkIG9yXG4gKiByZW1vdmUgcHJvcGVydGllcyBmcm9tIGl04oCTYWxsIGNoYW5nZXMgd2lsbCBiZSBpbW1lZGlhdGVseSByZWZsZWN0ZWQgaW4gdGhlXG4gKiBvcmlnaW5hbCBzb3VyY2UuXG4gKiA8YnI+PGJyPlxuICogQWxsIGNsYXNzZXMgZGVmaW5lZCBpbiB0aGlzIG1vZHVsZSBzaG91bGQgYmUgZXh0ZW5kZWQgdGhlIHNhbWUgd2F5IGFzIGluXG4gKiBCYWNrYm9uZSBmcmFtZXdvcms6IHVzaW5nIDxjb2RlPmV4dGVuZDwvY29kZT4gbWV0aG9kIHRvIGNyZWF0ZSBuZXcgY2xhc3MgYW5kXG4gKiA8Y29kZT5pbml0aWFsaXplPC9jb2RlPiBtZXRob2QgdG8gZGVmaW5lIGN1c3RvbSBjbGFzcyBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBAZXhhbXBsZVxuICogPHByZT48Y29kZT5cbiAqIHZhciBNeUNsYXNzID0gcmVxdWlyZSgnZWRpdFRyZWUnKS5FZGl0RWxlbWVudC5leHRlbmQoe1xuICogXHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAqIFx0XHQvLyBjb25zdHJ1Y3RvciBjb2RlIGhlcmVcbiAqIFx0fVxuICogfSk7XG4gKlxuICogdmFyIGVsZW0gPSBuZXcgTXlDbGFzcygpO1xuICogPC9jb2RlPjwvcHJlPlxuICpcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqIEBjb25zdHJ1Y3RvclxuICogQG1lbWJlck9mIF9fZWRpdFRyZWVEZWZpbmVcbiAqL1xuZW1tZXQuZGVmaW5lKCdlZGl0VHJlZScsIGZ1bmN0aW9uKHJlcXVpcmUsIF8sIGNvcmUpIHtcblx0dmFyIHJhbmdlID0gcmVxdWlyZSgncmFuZ2UnKS5jcmVhdGU7XG5cblx0LyoqXG5cdCAqIE5hbWVkIGNvbnRhaW5lciBvZiBlZGl0ZWQgc291cmNlXG5cdCAqIEB0eXBlIEVkaXRDb250YWluZXJcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNvdXJjZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0ZnVuY3Rpb24gRWRpdENvbnRhaW5lcihzb3VyY2UsIG9wdGlvbnMpIHtcblx0XHR0aGlzLm9wdGlvbnMgPSBfLmV4dGVuZCh7b2Zmc2V0OiAwfSwgb3B0aW9ucyk7XG5cdFx0LyoqXG5cdFx0ICogU291cmNlIGNvZGUgb2YgZWRpdGVkIHN0cnVjdHVyZS4gQWxsIGNoYW5nZXMgaW4gdGhlIHN0cnVjdHVyZSBhcmVcblx0XHQgKiBpbW1lZGlhdGVseSByZWZsZWN0ZWQgaW50byB0aGlzIHByb3BlcnR5XG5cdFx0ICovXG5cdFx0dGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cblx0XHQvKipcblx0XHQgKiBMaXN0IG9mIGFsbCBlZGl0YWJsZSBjaGlsZHJlblxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICovXG5cdFx0dGhpcy5fY2hpbGRyZW4gPSBbXTtcblxuXHRcdC8qKlxuXHRcdCAqIEhhc2ggb2YgYWxsIHBvc2l0aW9ucyBvZiBjb250YWluZXJcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqL1xuXHRcdHRoaXMuX3Bvc2l0aW9ucyA9IHtcblx0XHRcdG5hbWU6IDBcblx0XHR9O1xuXG5cdFx0dGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIHNlbGYtcHJvcGFnYXRpbmcgZXh0ZW5kIGZ1bmN0aW9uIGZvciBjbGFzc2VzLlxuXHQgKiBAdHlwZSBGdW5jdGlvblxuXHQgKi9cblx0RWRpdENvbnRhaW5lci5leHRlbmQgPSBjb3JlLmV4dGVuZDtcblxuXHRFZGl0Q29udGFpbmVyLnByb3RvdHlwZSA9IHtcblx0XHQvKipcblx0XHQgKiBDaGlsZCBjbGFzcyBjb25zdHJ1Y3RvclxuXHRcdCAqL1xuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge30sXG5cblx0XHQvKipcblx0XHQgKiBSZXBsYWNlIHN1YnN0cmluZyBvZiB0YWcncyBzb3VyY2Vcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gc3RhcnRcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gZW5kXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKi9cblx0XHRfdXBkYXRlU291cmNlOiBmdW5jdGlvbih2YWx1ZSwgc3RhcnQsIGVuZCkge1xuXHRcdFx0Ly8gY3JlYXRlIG1vZGlmaWNhdGlvbiByYW5nZVxuXHRcdFx0dmFyIHIgPSByYW5nZShzdGFydCwgXy5pc1VuZGVmaW5lZChlbmQpID8gMCA6IGVuZCAtIHN0YXJ0KTtcblx0XHRcdHZhciBkZWx0YSA9IHZhbHVlLmxlbmd0aCAtIHIubGVuZ3RoKCk7XG5cblx0XHRcdHZhciB1cGRhdGUgPSBmdW5jdGlvbihvYmopIHtcblx0XHRcdFx0Xy5lYWNoKG9iaiwgZnVuY3Rpb24odiwgaykge1xuXHRcdFx0XHRcdGlmICh2ID49IHIuZW5kKVxuXHRcdFx0XHRcdFx0b2JqW2tdICs9IGRlbHRhO1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cblx0XHRcdC8vIHVwZGF0ZSBhZmZlY3RlZCBwb3NpdGlvbnMgb2YgY3VycmVudCBjb250YWluZXJcblx0XHRcdHVwZGF0ZSh0aGlzLl9wb3NpdGlvbnMpO1xuXG5cdFx0XHQvLyB1cGRhdGUgYWZmZWN0ZWQgcG9zaXRpb25zIG9mIGNoaWxkcmVuXG5cdFx0XHRfLmVhY2godGhpcy5saXN0KCksIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0dXBkYXRlKGl0ZW0uX3Bvc2l0aW9ucyk7XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5zb3VyY2UgPSByZXF1aXJlKCd1dGlscycpLnJlcGxhY2VTdWJzdHJpbmcodGhpcy5zb3VyY2UsIHZhbHVlLCByKTtcblx0XHR9LFxuXG5cblx0XHQvKipcblx0XHQgKiBBZGRzIG5ldyBhdHRyaWJ1dGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBQcm9wZXJ0eSBuYW1lXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIFByb3BlcnR5IHZhbHVlXG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvcyBQb3NpdGlvbiBhdCB3aGljaCB0byBpbnNlcnQgbmV3IHByb3BlcnR5LiBCeVxuXHRcdCAqIGRlZmF1bHQgdGhlIHByb3BlcnR5IGlzIGluc2VydGVkIGF0IHRoZSBlbmQgb2YgcnVsZVxuXHRcdCAqIEByZXR1cm5zIHtFZGl0RWxlbWVudH0gTmV3bHkgY3JlYXRlZCBlbGVtZW50XG5cdFx0ICovXG5cdFx0YWRkOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgcG9zKSB7XG5cdFx0XHQvLyB0aGlzIGlzIGFic3RyYWN0IGltcGxlbWVudGF0aW9uXG5cdFx0XHR2YXIgaXRlbSA9IG5ldyBFZGl0RWxlbWVudChuYW1lLCB2YWx1ZSk7XG5cdFx0XHR0aGlzLl9jaGlsZHJlbi5wdXNoKGl0ZW0pO1xuXHRcdFx0cmV0dXJuIGl0ZW07XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgYXR0cmlidXRlIG9iamVjdFxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIEF0dHJpYnV0ZSBuYW1lIG9yIGl0cyBpbmRleFxuXHRcdCAqIEByZXR1cm5zIHtFZGl0RWxlbWVudH1cblx0XHQgKi9cblx0XHRnZXQ6IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdGlmIChfLmlzTnVtYmVyKG5hbWUpKVxuXHRcdFx0XHRyZXR1cm4gdGhpcy5saXN0KClbbmFtZV07XG5cblx0XHRcdGlmIChfLmlzU3RyaW5nKG5hbWUpKVxuXHRcdFx0XHRyZXR1cm4gXy5maW5kKHRoaXMubGlzdCgpLCBmdW5jdGlvbihwcm9wKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHByb3AubmFtZSgpID09PSBuYW1lO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIG5hbWU7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgYWxsIGNoaWxkcmVuIGJ5IG5hbWUgb3IgaW5kZXhlc1xuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBuYW1lIEVsZW1lbnQgbmFtZShzKSBvciBpbmRleGVzICg8Y29kZT5TdHJpbmc8L2NvZGU+LFxuXHRcdCAqIDxjb2RlPkFycmF5PC9jb2RlPiwgPGNvZGU+TnVtYmVyPC9jb2RlPilcblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdFx0ICovXG5cdFx0Z2V0QWxsOiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRpZiAoIV8uaXNBcnJheShuYW1lKSlcblx0XHRcdFx0bmFtZSA9IFtuYW1lXTtcblxuXHRcdFx0Ly8gc3BsaXQgbmFtZXMgYW5kIGluZGV4ZXNcblx0XHRcdHZhciBuYW1lcyA9IFtdLCBpbmRleGVzID0gW107XG5cdFx0XHRfLmVhY2gobmFtZSwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRpZiAoXy5pc1N0cmluZyhpdGVtKSlcblx0XHRcdFx0XHRuYW1lcy5wdXNoKGl0ZW0pO1xuXHRcdFx0XHRlbHNlIGlmIChfLmlzTnVtYmVyKGl0ZW0pKVxuXHRcdFx0XHRcdGluZGV4ZXMucHVzaChpdGVtKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gXy5maWx0ZXIodGhpcy5saXN0KCksIGZ1bmN0aW9uKGF0dHJpYnV0ZSwgaSkge1xuXHRcdFx0XHRyZXR1cm4gXy5pbmNsdWRlKGluZGV4ZXMsIGkpIHx8IF8uaW5jbHVkZShuYW1lcywgYXR0cmlidXRlLm5hbWUoKSk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBvciB1cGRhdGVzIGVsZW1lbnQgdmFsdWUuIElmIHN1Y2ggZWxlbWVudCBkb2Vzbid0IGV4aXN0cyxcblx0XHQgKiBpdCB3aWxsIGJlIGNyZWF0ZWQgYXV0b21hdGljYWxseSBhbmQgYWRkZWQgYXQgdGhlIGVuZCBvZiBjaGlsZCBsaXN0LlxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIEVsZW1lbnQgbmFtZSBvciBpdHMgaW5kZXhcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgTmV3IGVsZW1lbnQgdmFsdWVcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdHZhbHVlOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgcG9zKSB7XG5cdFx0XHR2YXIgZWxlbWVudCA9IHRoaXMuZ2V0KG5hbWUpO1xuXHRcdFx0aWYgKGVsZW1lbnQpXG5cdFx0XHRcdHJldHVybiBlbGVtZW50LnZhbHVlKHZhbHVlKTtcblxuXHRcdFx0aWYgKCFfLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0XHQvLyBubyBzdWNoIGVsZW1lbnQg4oCUIGNyZWF0ZSBpdFxuXHRcdFx0XHRyZXR1cm4gdGhpcy5hZGQobmFtZSwgdmFsdWUsIHBvcyk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgYWxsIHZhbHVlcyBvZiBjaGlsZCBlbGVtZW50cyBmb3VuZCBieSA8Y29kZT5nZXRBbGwoKTwvY29kZT5cblx0XHQgKiBtZXRob2Rcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gbmFtZSBFbGVtZW50IG5hbWUocykgb3IgaW5kZXhlcyAoPGNvZGU+U3RyaW5nPC9jb2RlPixcblx0XHQgKiA8Y29kZT5BcnJheTwvY29kZT4sIDxjb2RlPk51bWJlcjwvY29kZT4pXG5cdFx0ICogQHJldHVybnMge0FycmF5fVxuXHRcdCAqL1xuXHRcdHZhbHVlczogZnVuY3Rpb24obmFtZSkge1xuXHRcdFx0cmV0dXJuIF8ubWFwKHRoaXMuZ2V0QWxsKG5hbWUpLCBmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0XHRcdHJldHVybiBlbGVtZW50LnZhbHVlKCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVtb3ZlIGNoaWxkIGVsZW1lbnRcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBQcm9wZXJ0eSBuYW1lIG9yIGl0cyBpbmRleFxuXHRcdCAqL1xuXHRcdHJlbW92ZTogZnVuY3Rpb24obmFtZSkge1xuXHRcdFx0dmFyIGVsZW1lbnQgPSB0aGlzLmdldChuYW1lKTtcblx0XHRcdGlmIChlbGVtZW50KSB7XG5cdFx0XHRcdHRoaXMuX3VwZGF0ZVNvdXJjZSgnJywgZWxlbWVudC5mdWxsUmFuZ2UoKSk7XG5cdFx0XHRcdHRoaXMuX2NoaWxkcmVuID0gXy53aXRob3V0KHRoaXMuX2NoaWxkcmVuLCBlbGVtZW50KTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBsaXN0IG9mIGFsbCBlZGl0YWJsZSBjaGlsZCBlbGVtZW50c1xuXHRcdCAqIEByZXR1cm5zIHtBcnJheX1cblx0XHQgKi9cblx0XHRsaXN0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLl9jaGlsZHJlbjtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBpbmRleCBvZiBlZGl0YmxlIGNoaWxkIGluIGxpc3Rcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gaXRlbVxuXHRcdCAqIEByZXR1cm5zIHtOdW1iZXJ9XG5cdFx0ICovXG5cdFx0aW5kZXhPZjogZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0cmV0dXJuIF8uaW5kZXhPZih0aGlzLmxpc3QoKSwgdGhpcy5nZXQoaXRlbSkpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBTZXRzIG9yIGdldHMgY29udGFpbmVyIG5hbWVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdmFsIE5ldyBuYW1lLiBJZiBub3QgcGFzc2VkLCBjdXJyZW50XG5cdFx0ICogbmFtZSBpcyByZXR1cm5lZFxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHRuYW1lOiBmdW5jdGlvbih2YWwpIHtcblx0XHRcdGlmICghXy5pc1VuZGVmaW5lZCh2YWwpICYmIHRoaXMuX25hbWUgIT09ICh2YWwgPSBTdHJpbmcodmFsKSkpIHtcblx0XHRcdFx0dGhpcy5fdXBkYXRlU291cmNlKHZhbCwgdGhpcy5fcG9zaXRpb25zLm5hbWUsIHRoaXMuX3Bvc2l0aW9ucy5uYW1lICsgdGhpcy5fbmFtZS5sZW5ndGgpO1xuXHRcdFx0XHR0aGlzLl9uYW1lID0gdmFsO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdGhpcy5fbmFtZTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBuYW1lIHJhbmdlIG9iamVjdFxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNBYnNvbHV0ZSBSZXR1cm4gYWJzb2x1dGUgcmFuZ2UgKHdpdGggcmVzcGVjdCBvZlxuXHRcdCAqIHJ1bGUgb2Zmc2V0KVxuXHRcdCAqIEByZXR1cm5zIHtSYW5nZX1cblx0XHQgKi9cblx0XHRuYW1lUmFuZ2U6IGZ1bmN0aW9uKGlzQWJzb2x1dGUpIHtcblx0XHRcdHJldHVybiByYW5nZSh0aGlzLl9wb3NpdGlvbnMubmFtZSArIChpc0Fic29sdXRlID8gdGhpcy5vcHRpb25zLm9mZnNldCA6IDApLCB0aGlzLm5hbWUoKSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgcmFuZ2Ugb2YgY3VycmVudCBzb3VyY2Vcblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IGlzQWJzb2x1dGVcblx0XHQgKi9cblx0XHRyYW5nZTogZnVuY3Rpb24oaXNBYnNvbHV0ZSkge1xuXHRcdFx0cmV0dXJuIHJhbmdlKGlzQWJzb2x1dGUgPyB0aGlzLm9wdGlvbnMub2Zmc2V0IDogMCwgdGhpcy50b1N0cmluZygpKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBlbGVtZW50IHRoYXQgYmVsb25ncyB0byBzcGVjaWZpZWQgcG9zaXRpb25cblx0XHQgKiBAcGFyYW0ge051bWJlcn0gcG9zXG5cdFx0ICogQHBhcmFtIHtCb29sZWFufSBpc0Fic29sdXRlXG5cdFx0ICogQHJldHVybnMge0VkaXRFbGVtZW50fVxuXHRcdCAqL1xuXHRcdGl0ZW1Gcm9tUG9zaXRpb246IGZ1bmN0aW9uKHBvcywgaXNBYnNvbHV0ZSkge1xuXHRcdFx0cmV0dXJuIF8uZmluZCh0aGlzLmxpc3QoKSwgZnVuY3Rpb24oZWxlbSkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5yYW5nZShpc0Fic29sdXRlKS5pbnNpZGUocG9zKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHNvdXJjZSBjb2RlIG9mIGN1cnJlbnQgY29udGFpbmVyXG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHR0b1N0cmluZzogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zb3VyY2U7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge0VkaXRDb250YWluZXJ9IHBhcmVudFxuXHQgKiBAcGFyYW0ge09iamVjdH0gbmFtZVRva2VuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZVRva2VuXG5cdCAqL1xuXHRmdW5jdGlvbiBFZGl0RWxlbWVudChwYXJlbnQsIG5hbWVUb2tlbiwgdmFsdWVUb2tlbikge1xuXHRcdC8qKiBAdHlwZSBFZGl0Q29udGFpbmVyICovXG5cdFx0dGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG5cblx0XHR0aGlzLl9uYW1lID0gbmFtZVRva2VuLnZhbHVlO1xuXHRcdHRoaXMuX3ZhbHVlID0gdmFsdWVUb2tlbiA/IHZhbHVlVG9rZW4udmFsdWUgOiAnJztcblxuXHRcdHRoaXMuX3Bvc2l0aW9ucyA9IHtcblx0XHRcdG5hbWU6IG5hbWVUb2tlbi5zdGFydCxcblx0XHRcdHZhbHVlOiB2YWx1ZVRva2VuID8gdmFsdWVUb2tlbi5zdGFydCA6IC0xXG5cdFx0fTtcblxuXHRcdHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBzZWxmLXByb3BhZ2F0aW5nIGV4dGVuZCBmdW5jdGlvbiBmb3IgY2xhc3Nlcy5cblx0ICogQHR5cGUgRnVuY3Rpb25cblx0ICovXG5cdEVkaXRFbGVtZW50LmV4dGVuZCA9IGNvcmUuZXh0ZW5kO1xuXG5cdEVkaXRFbGVtZW50LnByb3RvdHlwZSA9IHtcblx0XHQvKipcblx0XHQgKiBDaGlsZCBjbGFzcyBjb25zdHJ1Y3RvclxuXHRcdCAqL1xuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge30sXG5cblx0XHQvKipcblx0XHQgKiBNYWtlIHBvc2l0aW9uIGFic29sdXRlXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gbnVtXG5cdFx0ICogQHBhcmFtIHtCb29sZWFufSBpc0Fic29sdXRlXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0X3BvczogZnVuY3Rpb24obnVtLCBpc0Fic29sdXRlKSB7XG5cdFx0XHRyZXR1cm4gbnVtICsgKGlzQWJzb2x1dGUgPyB0aGlzLnBhcmVudC5vcHRpb25zLm9mZnNldCA6IDApO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBTZXRzIG9mIGdldHMgZWxlbWVudCB2YWx1ZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSB2YWwgTmV3IGVsZW1lbnQgdmFsdWUuIElmIG5vdCBwYXNzZWQsIGN1cnJlbnRcblx0XHQgKiB2YWx1ZSBpcyByZXR1cm5lZFxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0dmFsdWU6IGZ1bmN0aW9uKHZhbCkge1xuXHRcdFx0aWYgKCFfLmlzVW5kZWZpbmVkKHZhbCkgJiYgdGhpcy5fdmFsdWUgIT09ICh2YWwgPSBTdHJpbmcodmFsKSkpIHtcblx0XHRcdFx0dGhpcy5wYXJlbnQuX3VwZGF0ZVNvdXJjZSh2YWwsIHRoaXMudmFsdWVSYW5nZSgpKTtcblx0XHRcdFx0dGhpcy5fdmFsdWUgPSB2YWw7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzLl92YWx1ZTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2V0cyBvZiBnZXRzIGVsZW1lbnQgbmFtZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSB2YWwgTmV3IGVsZW1lbnQgbmFtZS4gSWYgbm90IHBhc3NlZCwgY3VycmVudFxuXHRcdCAqIG5hbWUgaXMgcmV0dXJuZWRcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdG5hbWU6IGZ1bmN0aW9uKHZhbCkge1xuXHRcdFx0aWYgKCFfLmlzVW5kZWZpbmVkKHZhbCkgJiYgdGhpcy5fbmFtZSAhPT0gKHZhbCA9IFN0cmluZyh2YWwpKSkge1xuXHRcdFx0XHR0aGlzLnBhcmVudC5fdXBkYXRlU291cmNlKHZhbCwgdGhpcy5uYW1lUmFuZ2UoKSk7XG5cdFx0XHRcdHRoaXMuX25hbWUgPSB2YWw7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzLl9uYW1lO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHBvc2l0aW9uIG9mIGVsZW1lbnQgbmFtZSB0b2tlblxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNBYnNvbHV0ZSBSZXR1cm4gYWJzb2x1dGUgcG9zaXRpb25cblx0XHQgKiBAcmV0dXJucyB7TnVtYmVyfVxuXHRcdCAqL1xuXHRcdG5hbWVQb3NpdGlvbjogZnVuY3Rpb24oaXNBYnNvbHV0ZSkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX3Bvcyh0aGlzLl9wb3NpdGlvbnMubmFtZSwgaXNBYnNvbHV0ZSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgcG9zaXRpb24gb2YgZWxlbWVudCB2YWx1ZSB0b2tlblxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNBYnNvbHV0ZSBSZXR1cm4gYWJzb2x1dGUgcG9zaXRpb25cblx0XHQgKiBAcmV0dXJucyB7TnVtYmVyfVxuXHRcdCAqL1xuXHRcdHZhbHVlUG9zaXRpb246IGZ1bmN0aW9uKGlzQWJzb2x1dGUpIHtcblx0XHRcdHJldHVybiB0aGlzLl9wb3ModGhpcy5fcG9zaXRpb25zLnZhbHVlLCBpc0Fic29sdXRlKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBlbGVtZW50IG5hbWVcblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IGlzQWJzb2x1dGUgUmV0dXJuIGFic29sdXRlIHJhbmdlXG5cdFx0ICogQHJldHVybnMge1JhbmdlfVxuXHRcdCAqL1xuXHRcdHJhbmdlOiBmdW5jdGlvbihpc0Fic29sdXRlKSB7XG5cdFx0XHRyZXR1cm4gcmFuZ2UodGhpcy5uYW1lUG9zaXRpb24oaXNBYnNvbHV0ZSksIHRoaXMudG9TdHJpbmcoKSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgZnVsbCBlbGVtZW50IHJhbmdlLCBpbmNsdWRpbmcgcG9zc2libGUgaW5kZW50YXRpb25cblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IGlzQWJzb2x1dGUgUmV0dXJuIGFic29sdXRlIHJhbmdlXG5cdFx0ICogQHJldHVybnMge1JhbmdlfVxuXHRcdCAqL1xuXHRcdGZ1bGxSYW5nZTogZnVuY3Rpb24oaXNBYnNvbHV0ZSkge1xuXHRcdFx0cmV0dXJuIHRoaXMucmFuZ2UoaXNBYnNvbHV0ZSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgZWxlbWVudCBuYW1lIHJhbmdlXG5cdFx0ICogQHBhcmFtIHtCb29sZWFufSBpc0Fic29sdXRlIFJldHVybiBhYnNvbHV0ZSByYW5nZVxuXHRcdCAqIEByZXR1cm5zIHtSYW5nZX1cblx0XHQgKi9cblx0XHRuYW1lUmFuZ2U6IGZ1bmN0aW9uKGlzQWJzb2x1dGUpIHtcblx0XHRcdHJldHVybiByYW5nZSh0aGlzLm5hbWVQb3NpdGlvbihpc0Fic29sdXRlKSwgdGhpcy5uYW1lKCkpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGVsZW1lbnQgdmFsdWUgcmFuZ2Vcblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IGlzQWJzb2x1dGUgUmV0dXJuIGFic29sdXRlIHJhbmdlXG5cdFx0ICogQHJldHVybnMge1JhbmdlfVxuXHRcdCAqL1xuXHRcdHZhbHVlUmFuZ2U6IGZ1bmN0aW9uKGlzQWJzb2x1dGUpIHtcblx0XHRcdHJldHVybiByYW5nZSh0aGlzLnZhbHVlUG9zaXRpb24oaXNBYnNvbHV0ZSksIHRoaXMudmFsdWUoKSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgY3VycmVudCBlbGVtZW50IHN0cmluZyByZXByZXNlbnRhdGlvblxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0dG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMubmFtZSgpICsgdGhpcy52YWx1ZSgpO1xuXHRcdH0sXG5cblx0XHR2YWx1ZU9mOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0RWRpdENvbnRhaW5lcjogRWRpdENvbnRhaW5lcixcblx0XHRFZGl0RWxlbWVudDogRWRpdEVsZW1lbnQsXG5cblx0XHQvKipcblx0XHQgKiBDcmVhdGVzIHRva2VuIHRoYXQgY2FuIGJlIGZlZCB0byA8Y29kZT5FZGl0RWxlbWVudDwvY29kZT5cblx0XHQgKiBAcGFyYW0ge051bWJlcn0gc3RhcnRcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHRcdCAqIEByZXR1cm5zXG5cdFx0ICovXG5cdFx0Y3JlYXRlVG9rZW46IGZ1bmN0aW9uKHN0YXJ0LCB2YWx1ZSwgdHlwZSkge1xuXHRcdFx0dmFyIG9iaiA9IHtcblx0XHRcdFx0c3RhcnQ6IHN0YXJ0IHx8IDAsXG5cdFx0XHRcdHZhbHVlOiB2YWx1ZSB8fCAnJyxcblx0XHRcdFx0dHlwZTogdHlwZVxuXHRcdFx0fTtcblxuXHRcdFx0b2JqLmVuZCA9IG9iai5zdGFydCArIG9iai52YWx1ZS5sZW5ndGg7XG5cdFx0XHRyZXR1cm4gb2JqO1xuXHRcdH1cblx0fTtcbn0pOy8qKlxuICogQ1NTIEVkaXRUcmVlIGlzIGEgbW9kdWxlIHRoYXQgY2FuIHBhcnNlIGEgQ1NTIHJ1bGUgaW50byBhIHRyZWUgd2l0aFxuICogY29udmVuaWVudCBtZXRob2RzIGZvciBhZGRpbmcsIG1vZGlmeWluZyBhbmQgcmVtb3ZpbmcgQ1NTIHByb3BlcnRpZXMuIFRoZXNlXG4gKiBjaGFuZ2VzIGNhbiBiZSB3cml0dGVuIGJhY2sgdG8gc3RyaW5nIHdpdGggcmVzcGVjdCBvZiBjb2RlIGZvcm1hdHRpbmcuXG4gKlxuICogQG1lbWJlck9mIF9fY3NzRWRpdFRyZWVEZWZpbmVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmRlZmluZSgnY3NzRWRpdFRyZWUnLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcblx0XHRzdHlsZUJlZm9yZTogJ1xcblxcdCcsXG5cdFx0c3R5bGVTZXBhcmF0b3I6ICc6ICcsXG5cdFx0b2Zmc2V0OiAwXG5cdH07XG5cblx0dmFyIFdISVRFU1BBQ0VfUkVNT1ZFX0ZST01fU1RBUlQgPSAxO1xuXHR2YXIgV0hJVEVTUEFDRV9SRU1PVkVfRlJPTV9FTkQgICA9IDI7XG5cblx0LyoqXG5cdCAqIFJldHVybnMgcmFuZ2Ugb2JqZWN0XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydFxuXHQgKiBAcGFyYW0ge051bWJlcn0gbGVuXG5cdCAqIEByZXR1cm5zIHtSYW5nZX1cblx0ICovXG5cdGZ1bmN0aW9uIHJhbmdlKHN0YXJ0LCBsZW4pIHtcblx0XHRyZXR1cm4gcmVxdWlyZSgncmFuZ2UnKS5jcmVhdGUoc3RhcnQsIGxlbik7XG5cdH1cblxuXHQvKipcblx0ICogUmVtb3ZlcyB3aGl0ZXNwYWNlIHRva2VucyBmcm9tIHRoZSBhcnJheSBlbmRzXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuXHQgKiBAcGFyYW0ge051bWJlcn0gbWFzayBNYXNrIGluZGljYXRpbmcgZnJvbSB3aGljaCBlbmQgd2hpdGVzcGFjZSBzaG91bGQgYmVcblx0ICogcmVtb3ZlZFxuXHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAqL1xuXHRmdW5jdGlvbiB0cmltV2hpdGVzcGFjZVRva2Vucyh0b2tlbnMsIG1hc2spIHtcblx0XHRtYXNrID0gbWFzayB8fCAoV0hJVEVTUEFDRV9SRU1PVkVfRlJPTV9TVEFSVCB8IFdISVRFU1BBQ0VfUkVNT1ZFX0ZST01fRU5EKTtcblx0XHR2YXIgd2hpdGVzcGFjZSA9IFsnd2hpdGUnLCAnbGluZSddO1xuXG5cdFx0aWYgKChtYXNrICYgV0hJVEVTUEFDRV9SRU1PVkVfRlJPTV9FTkQpID09IFdISVRFU1BBQ0VfUkVNT1ZFX0ZST01fRU5EKVxuXHRcdFx0d2hpbGUgKHRva2Vucy5sZW5ndGggJiYgXy5pbmNsdWRlKHdoaXRlc3BhY2UsIF8ubGFzdCh0b2tlbnMpLnR5cGUpKSB7XG5cdFx0XHRcdHRva2Vucy5wb3AoKTtcblx0IFx0XHR9XG5cblx0XHRpZiAoKG1hc2sgJiBXSElURVNQQUNFX1JFTU9WRV9GUk9NX1NUQVJUKSA9PSBXSElURVNQQUNFX1JFTU9WRV9GUk9NX1NUQVJUKVxuXHRcdFx0d2hpbGUgKHRva2Vucy5sZW5ndGggJiYgXy5pbmNsdWRlKHdoaXRlc3BhY2UsIHRva2Vuc1swXS50eXBlKSkge1xuXHRcdFx0XHR0b2tlbnMuc2hpZnQoKTtcblx0XHRcdH1cblxuXHRcdHJldHVybiB0b2tlbnM7XG5cdH1cblxuXHQvKipcblx0ICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgc2VhcmNoZXMgZm9yIHNlbGVjdG9yIHJhbmdlIGZvciA8Y29kZT5DU1NFZGl0UnVsZTwvY29kZT5cblx0ICogQHBhcmFtIHtUb2tlbkl0ZXJhdG9yfSBpdFxuXHQgKiBAcmV0dXJucyB7UmFuZ2V9XG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kU2VsZWN0b3JSYW5nZShpdCkge1xuXHRcdHZhciB0b2tlbnMgPSBbXSwgdG9rZW47XG4gXHRcdHZhciBzdGFydCA9IGl0LnBvc2l0aW9uKCksIGVuZDtcblxuIFx0XHR3aGlsZSAodG9rZW4gPSBpdC5uZXh0KCkpIHtcblx0XHRcdGlmICh0b2tlbi50eXBlID09ICd7Jylcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR0b2tlbnMucHVzaCh0b2tlbik7XG5cdFx0fVxuXG4gXHRcdHRyaW1XaGl0ZXNwYWNlVG9rZW5zKHRva2Vucyk7XG5cbiBcdFx0aWYgKHRva2Vucy5sZW5ndGgpIHtcbiBcdFx0XHRzdGFydCA9IHRva2Vuc1swXS5zdGFydDtcbiBcdFx0XHRlbmQgPSBfLmxhc3QodG9rZW5zKS5lbmQ7XG4gXHRcdH0gZWxzZSB7XG4gXHRcdFx0ZW5kID0gc3RhcnQ7XG4gXHRcdH1cblxuIFx0XHRyZXR1cm4gcmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBzZWFyY2hlcyBmb3IgQ1NTIHByb3BlcnR5IHZhbHVlIHJhbmdlIG5leHQgdG9cblx0ICogaXRlcmF0b3IncyBjdXJyZW50IHBvc2l0aW9uXG5cdCAqIEBwYXJhbSB7VG9rZW5JdGVyYXRvcn0gaXRcblx0ICogQHJldHVybnMge1JhbmdlfVxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZFZhbHVlUmFuZ2UoaXQpIHtcblx0XHQvLyBmaW5kIHZhbHVlIHN0YXJ0IHBvc2l0aW9uXG5cdFx0dmFyIHNraXBUb2tlbnMgPSBbJ3doaXRlJywgJ2xpbmUnLCAnOiddO1xuXHRcdHZhciB0b2tlbnMgPSBbXSwgdG9rZW4sIHN0YXJ0LCBlbmQ7XG5cblx0XHRpdC5uZXh0VW50aWwoZnVuY3Rpb24odG9rKSB7XG5cdFx0XHRyZXR1cm4gIV8uaW5jbHVkZShza2lwVG9rZW5zLCB0aGlzLml0ZW1OZXh0KCkudHlwZSk7XG5cdFx0fSk7XG5cblx0XHRzdGFydCA9IGl0LmN1cnJlbnQoKS5lbmQ7XG5cdFx0Ly8gY29uc3VtZSB2YWx1ZVxuXHRcdHdoaWxlICh0b2tlbiA9IGl0Lm5leHQoKSkge1xuXHRcdFx0aWYgKHRva2VuLnR5cGUgPT0gJ30nIHx8IHRva2VuLnR5cGUgPT0gJzsnKSB7XG5cdFx0XHRcdC8vIGZvdW5kIHZhbHVlIGVuZFxuXHRcdFx0XHR0cmltV2hpdGVzcGFjZVRva2Vucyh0b2tlbnMsIFdISVRFU1BBQ0VfUkVNT1ZFX0ZST01fU1RBUlRcblx0XHRcdFx0XHRcdHwgKHRva2VuLnR5cGUgPT0gJ30nID8gV0hJVEVTUEFDRV9SRU1PVkVfRlJPTV9FTkQgOiAwKSk7XG5cblx0XHRcdFx0aWYgKHRva2Vucy5sZW5ndGgpIHtcblx0XHRcdFx0XHRzdGFydCA9IHRva2Vuc1swXS5zdGFydDtcblx0XHRcdFx0XHRlbmQgPSBfLmxhc3QodG9rZW5zKS5lbmQ7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZW5kID0gc3RhcnQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gcmFuZ2Uoc3RhcnQsIGVuZCAtIHN0YXJ0KTtcblx0XHRcdH1cblxuXHRcdFx0dG9rZW5zLnB1c2godG9rZW4pO1xuXHRcdH1cblxuXHRcdC8vIHJlYWNoZWQgdGhlIGVuZCBvZiB0b2tlbnMgbGlzdFxuXHRcdGlmICh0b2tlbnMubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm4gcmFuZ2UodG9rZW5zWzBdLnN0YXJ0LCBfLmxhc3QodG9rZW5zKS5lbmQgLSB0b2tlbnNbMF0uc3RhcnQpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBGaW5kcyBwYXJ0cyBvZiBjb21wbGV4IENTUyB2YWx1ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBsaXN0IG9mIDxjb2RlPlJhbmdlPC9jb2RlPidzXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kUGFydHMoc3RyKSB7XG5cdFx0LyoqIEB0eXBlIFN0cmluZ1N0cmVhbSAqL1xuXHRcdHZhciBzdHJlYW0gPSByZXF1aXJlKCdzdHJpbmdTdHJlYW0nKS5jcmVhdGUoc3RyKTtcblx0XHR2YXIgY2g7XG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdHZhciBzZXAgPSAvW1xcc1xcdTAwYTAsXS87XG5cblx0XHR2YXIgYWRkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRzdHJlYW0ubmV4dCgpO1xuXHRcdFx0cmVzdWx0LnB1c2gocmFuZ2Uoc3RyZWFtLnN0YXJ0LCBzdHJlYW0uY3VycmVudCgpKSk7XG5cdFx0XHRzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuXHRcdH07XG5cblx0XHQvLyBza2lwIHdoaXRlc3BhY2Vcblx0XHRzdHJlYW0uZWF0U3BhY2UoKTtcblx0XHRzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuXG5cdFx0d2hpbGUgKGNoID0gc3RyZWFtLm5leHQoKSkge1xuXHRcdFx0aWYgKGNoID09ICdcIicgfHwgY2ggPT0gXCInXCIpIHtcblx0XHRcdFx0c3RyZWFtLm5leHQoKTtcblx0XHRcdFx0aWYgKCFzdHJlYW0uc2tpcFRvKGNoKSkgYnJlYWs7XG5cdFx0XHRcdGFkZCgpO1xuXHRcdFx0fSBlbHNlIGlmIChjaCA9PSAnKCcpIHtcblx0XHRcdFx0Ly8gZnVuY3Rpb24gZm91bmQsIG1heSBoYXZlIG5lc3RlZCBmdW5jdGlvblxuXHRcdFx0XHRzdHJlYW0uYmFja1VwKDEpO1xuXHRcdFx0XHRpZiAoIXN0cmVhbS5za2lwVG9QYWlyKCcoJywgJyknKSkgYnJlYWs7XG5cdFx0XHRcdHN0cmVhbS5iYWNrVXAoMSk7XG5cdFx0XHRcdGFkZCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKHNlcC50ZXN0KGNoKSkge1xuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKHJhbmdlKHN0cmVhbS5zdGFydCwgc3RyZWFtLmN1cnJlbnQoKS5sZW5ndGggLSAxKSk7XG5cdFx0XHRcdFx0c3RyZWFtLmVhdFdoaWxlKHNlcCk7XG5cdFx0XHRcdFx0c3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGFkZCgpO1xuXG5cdFx0cmV0dXJuIF8uY2hhaW4ocmVzdWx0KVxuXHRcdFx0LmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdHJldHVybiAhIWl0ZW0ubGVuZ3RoKCk7XG5cdFx0XHR9KVxuXHRcdFx0LnVuaXEoZmFsc2UsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0cmV0dXJuIGl0ZW0udG9TdHJpbmcoKTtcblx0XHRcdH0pXG5cdFx0XHQudmFsdWUoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIGJpdCBoYWNreSB3YXkgdG8gaWRlbnRpZnkgaW52YWxpZCBDU1MgcHJvcGVydHkgZGVmaW5pdGlvbjogd2hlbiB1c2VyXG5cdCAqIHN0YXJ0cyB3cml0aW5nIG5ldyBhYmJyZXZpYXRpb24gaW4gQ1NTIHJ1bGUsIGhlIGFjdHVhbGx5IGNyZWF0ZXMgaW52YWxpZFxuXHQgKiBDU1MgcHJvcGVydHkgZGVmaW5pdGlvbiBhbmQgdGhpcyBtZXRob2QgdHJpZXMgdG8gaWRlbnRpZnkgc3VjaCBhYmJyZXZpYXRpb25cblx0ICogYW5kIHByZXZlbnQgaXQgZnJvbSBiZWluZyBhZGRlZCB0byBDU1MgZWRpdCB0cmVlXG5cdCAqIEBwYXJhbSB7VG9rZW5JdGVyYXRvcn0gaXRcblx0ICovXG5cdGZ1bmN0aW9uIGlzVmFsaWRJZGVudGlmaWVyKGl0KSB7XG4vL1x0XHRyZXR1cm4gdHJ1ZTtcblx0XHR2YXIgdG9rZW5zID0gaXQudG9rZW5zO1xuXHRcdGZvciAodmFyIGkgPSBpdC5faSArIDEsIGlsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGlsOyBpKyspIHtcblx0XHRcdGlmICh0b2tlbnNbaV0udHlwZSA9PSAnOicpXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0XHRpZiAodG9rZW5zW2ldLnR5cGUgPT0gJ2lkZW50aWZpZXInIHx8IHRva2Vuc1tpXS50eXBlID09ICdsaW5lJylcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAY2xhc3Ncblx0ICogQGV4dGVuZHMgRWRpdENvbnRhaW5lclxuXHQgKi9cblx0dmFyIENTU0VkaXRDb250YWluZXIgPSByZXF1aXJlKCdlZGl0VHJlZScpLkVkaXRDb250YWluZXIuZXh0ZW5kKHtcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbihzb3VyY2UsIG9wdGlvbnMpIHtcblx0XHRcdF8uZGVmYXVsdHModGhpcy5vcHRpb25zLCBkZWZhdWx0T3B0aW9ucyk7XG5cdFx0XHR2YXIgZWRpdFRyZWUgPSByZXF1aXJlKCdlZGl0VHJlZScpO1xuXG5cdFx0XHQvKiogQHR5cGUgVG9rZW5JdGVyYXRvciAqL1xuXHQgXHRcdHZhciBpdCA9IHJlcXVpcmUoJ3Rva2VuSXRlcmF0b3InKS5jcmVhdGUoXG5cdCBcdFx0XHRcdHJlcXVpcmUoJ2Nzc1BhcnNlcicpLnBhcnNlKHNvdXJjZSkpO1xuXG5cdCBcdFx0dmFyIHNlbGVjdG9yUmFuZ2UgPSBmaW5kU2VsZWN0b3JSYW5nZShpdCk7XG5cdCBcdFx0dGhpcy5fcG9zaXRpb25zLm5hbWUgPSBzZWxlY3RvclJhbmdlLnN0YXJ0O1xuXHQgXHRcdHRoaXMuX25hbWUgPSBzZWxlY3RvclJhbmdlLnN1YnN0cmluZyhzb3VyY2UpO1xuXG5cdCBcdFx0aWYgKCFpdC5jdXJyZW50KCkgfHwgaXQuY3VycmVudCgpLnR5cGUgIT0gJ3snKVxuXHQgXHRcdFx0dGhyb3cgJ0ludmFsaWQgQ1NTIHJ1bGUnO1xuXG5cdCBcdFx0dGhpcy5fcG9zaXRpb25zLmNvbnRlbnRTdGFydCA9IGl0LnBvc2l0aW9uKCkgKyAxO1xuXG5cdCBcdFx0Ly8gY29uc3VtZSBwcm9wZXJ0aWVzXG5cdCBcdFx0dmFyIHByb3BlcnR5UmFuZ2UsIHZhbHVlUmFuZ2UsIHRva2VuO1xuXHRcdFx0d2hpbGUgKHRva2VuID0gaXQubmV4dCgpKSB7XG5cdFx0XHRcdGlmICh0b2tlbi50eXBlID09ICdpZGVudGlmaWVyJyAmJiBpc1ZhbGlkSWRlbnRpZmllcihpdCkpIHtcblx0XHRcdFx0XHRwcm9wZXJ0eVJhbmdlID0gcmFuZ2UodG9rZW4pO1xuXHRcdFx0XHRcdHZhbHVlUmFuZ2UgPSBmaW5kVmFsdWVSYW5nZShpdCk7XG5cdFx0XHRcdFx0dmFyIGVuZCA9IChpdC5jdXJyZW50KCkgJiYgaXQuY3VycmVudCgpLnR5cGUgPT0gJzsnKVxuXHRcdFx0XHRcdFx0PyByYW5nZShpdC5jdXJyZW50KCkpXG5cdFx0XHRcdFx0XHQ6IHJhbmdlKHZhbHVlUmFuZ2UuZW5kLCAwKTtcblx0XHRcdFx0XHR0aGlzLl9jaGlsZHJlbi5wdXNoKG5ldyBDU1NFZGl0RWxlbWVudCh0aGlzLFxuXHRcdFx0XHRcdFx0XHRlZGl0VHJlZS5jcmVhdGVUb2tlbihwcm9wZXJ0eVJhbmdlLnN0YXJ0LCBwcm9wZXJ0eVJhbmdlLnN1YnN0cmluZyhzb3VyY2UpKSxcblx0XHRcdFx0XHRcdFx0ZWRpdFRyZWUuY3JlYXRlVG9rZW4odmFsdWVSYW5nZS5zdGFydCwgdmFsdWVSYW5nZS5zdWJzdHJpbmcoc291cmNlKSksXG5cdFx0XHRcdFx0XHRcdGVkaXRUcmVlLmNyZWF0ZVRva2VuKGVuZC5zdGFydCwgZW5kLnN1YnN0cmluZyhzb3VyY2UpKVxuXHRcdFx0XHRcdFx0XHQpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9zYXZlU3R5bGUoKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVtZW1iZXJzIGFsbCBzdHlsZXMgb2YgcHJvcGVydGllc1xuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICovXG5cdFx0X3NhdmVTdHlsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc3RhcnQgPSB0aGlzLl9wb3NpdGlvbnMuY29udGVudFN0YXJ0O1xuXHRcdFx0dmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuXHRcdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblxuXHRcdFx0Xy5lYWNoKHRoaXMubGlzdCgpLCAvKiogQHBhcmFtIHtDU1NFZGl0UHJvcGVydHl9IHAgKi8gZnVuY3Rpb24ocCkge1xuXHRcdFx0XHRwLnN0eWxlQmVmb3JlID0gc291cmNlLnN1YnN0cmluZyhzdGFydCwgcC5uYW1lUG9zaXRpb24oKSk7XG5cdFx0XHRcdC8vIGEgc21hbGwgaGFjayBoZXJlOlxuXHRcdFx0XHQvLyBTb21ldGltZXMgdXNlcnMgYWRkIGVtcHR5IGxpbmVzIGJlZm9yZSBwcm9wZXJ0aWVzIHRvIGxvZ2ljYWxseVxuXHRcdFx0XHQvLyBzZXBhcmF0ZSBncm91cHMgb2YgcHJvcGVydGllcy4gSW4gdGhpcyBjYXNlLCBhIGJsaW5kIGNvcHkgb2Zcblx0XHRcdFx0Ly8gY2hhcmFjdGVycyBiZXR3ZWVuIHJ1bGVzIG1heSBsZWFkIHRvIHVuZGVzaXJlZCBiZWhhdmlvcixcblx0XHRcdFx0Ly8gZXNwZWNpYWxseSB3aGVuIGN1cnJlbnQgcnVsZSBpcyBkdXBsaWNhdGVkIG9yIHVzZWQgYXMgYSBkb25vclxuXHRcdFx0XHQvLyB0byBjcmVhdGUgbmV3IHJ1bGUuXG5cdFx0XHRcdC8vIFRvIHNvbHZlIHRoaXMgaXNzdWUsIHdl4oCYbGwgdGFrZSBvbmx5IGxhc3QgbmV3bGluZSBpbmRlbnRhdGlvblxuXHRcdFx0XHR2YXIgbGluZXMgPSB1dGlscy5zcGxpdEJ5TGluZXMocC5zdHlsZUJlZm9yZSk7XG5cdFx0XHRcdGlmIChsaW5lcy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0cC5zdHlsZUJlZm9yZSA9ICdcXG4nICsgXy5sYXN0KGxpbmVzKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHAuc3R5bGVTZXBhcmF0b3IgPSBzb3VyY2Uuc3Vic3RyaW5nKHAubmFtZVJhbmdlKCkuZW5kLCBwLnZhbHVlUG9zaXRpb24oKSk7XG5cblx0XHRcdFx0Ly8gZ3JhY2VmdWwgYW5kIG5haXZlIGNvbW1lbnRzIHJlbW92YWxcblx0XHRcdFx0cC5zdHlsZUJlZm9yZSA9IF8ubGFzdChwLnN0eWxlQmVmb3JlLnNwbGl0KCcqLycpKTtcblx0XHRcdFx0cC5zdHlsZVNlcGFyYXRvciA9IHAuc3R5bGVTZXBhcmF0b3IucmVwbGFjZSgvXFwvXFwqLio/XFwqXFwvL2csICcnKTtcblxuXHRcdFx0XHRzdGFydCA9IHAucmFuZ2UoKS5lbmQ7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQWRkcyBuZXcgQ1NTIHByb3BlcnR5XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgUHJvcGVydHkgbmFtZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSBQcm9wZXJ0eSB2YWx1ZVxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3MgUG9zaXRpb24gYXQgd2hpY2ggdG8gaW5zZXJ0IG5ldyBwcm9wZXJ0eS4gQnlcblx0XHQgKiBkZWZhdWx0IHRoZSBwcm9wZXJ0eSBpcyBpbnNlcnRlZCBhdCB0aGUgZW5kIG9mIHJ1bGVcblx0XHQgKiBAcmV0dXJucyB7Q1NTRWRpdFByb3BlcnR5fVxuXHRcdCAqL1xuXHRcdGFkZDogZnVuY3Rpb24obmFtZSwgdmFsdWUsIHBvcykge1xuXHRcdFx0dmFyIGxpc3QgPSB0aGlzLmxpc3QoKTtcblx0XHRcdHZhciBzdGFydCA9IHRoaXMuX3Bvc2l0aW9ucy5jb250ZW50U3RhcnQ7XG5cdFx0XHR2YXIgc3R5bGVzID0gXy5waWNrKHRoaXMub3B0aW9ucywgJ3N0eWxlQmVmb3JlJywgJ3N0eWxlU2VwYXJhdG9yJyk7XG5cdFx0XHR2YXIgZWRpdFRyZWUgPSByZXF1aXJlKCdlZGl0VHJlZScpO1xuXG5cdFx0XHRpZiAoXy5pc1VuZGVmaW5lZChwb3MpKVxuXHRcdFx0XHRwb3MgPSBsaXN0Lmxlbmd0aDtcblxuXHRcdFx0LyoqIEB0eXBlIENTU0VkaXRQcm9wZXJ0eSAqL1xuXHRcdFx0dmFyIGRvbm9yID0gbGlzdFtwb3NdO1xuXHRcdFx0aWYgKGRvbm9yKSB7XG5cdFx0XHRcdHN0YXJ0ID0gZG9ub3IuZnVsbFJhbmdlKCkuc3RhcnQ7XG5cdFx0XHR9IGVsc2UgaWYgKGRvbm9yID0gbGlzdFtwb3MgLSAxXSkge1xuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdGhhdCBkb25vciBoYXMgdGVybWluYXRpbmcgc2VtaWNvbG9uXG5cdFx0XHRcdGRvbm9yLmVuZCgnOycpO1xuXHRcdFx0XHRzdGFydCA9IGRvbm9yLnJhbmdlKCkuZW5kO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZG9ub3IpIHtcblx0XHRcdFx0c3R5bGVzID0gXy5waWNrKGRvbm9yLCAnc3R5bGVCZWZvcmUnLCAnc3R5bGVTZXBhcmF0b3InKTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIG5hbWVUb2tlbiA9IGVkaXRUcmVlLmNyZWF0ZVRva2VuKHN0YXJ0ICsgc3R5bGVzLnN0eWxlQmVmb3JlLmxlbmd0aCwgbmFtZSk7XG5cdFx0XHR2YXIgdmFsdWVUb2tlbiA9IGVkaXRUcmVlLmNyZWF0ZVRva2VuKG5hbWVUb2tlbi5lbmQgKyBzdHlsZXMuc3R5bGVTZXBhcmF0b3IubGVuZ3RoLCB2YWx1ZSk7XG5cblx0XHRcdHZhciBwcm9wZXJ0eSA9IG5ldyBDU1NFZGl0RWxlbWVudCh0aGlzLCBuYW1lVG9rZW4sIHZhbHVlVG9rZW4sXG5cdFx0XHRcdFx0ZWRpdFRyZWUuY3JlYXRlVG9rZW4odmFsdWVUb2tlbi5lbmQsICc7JykpO1xuXG5cdFx0XHRfLmV4dGVuZChwcm9wZXJ0eSwgc3R5bGVzKTtcblxuXHRcdFx0Ly8gd3JpdGUgbmV3IHByb3BlcnR5IGludG8gdGhlIHNvdXJjZVxuXHRcdFx0dGhpcy5fdXBkYXRlU291cmNlKHByb3BlcnR5LnN0eWxlQmVmb3JlICsgcHJvcGVydHkudG9TdHJpbmcoKSwgc3RhcnQpO1xuXG5cdFx0XHQvLyBpbnNlcnQgbmV3IHByb3BlcnR5XG5cdFx0XHR0aGlzLl9jaGlsZHJlbi5zcGxpY2UocG9zLCAwLCBwcm9wZXJ0eSk7XG5cdFx0XHRyZXR1cm4gcHJvcGVydHk7XG5cdFx0fVxuXHR9KTtcblxuXHQvKipcblx0ICogQGNsYXNzXG5cdCAqIEB0eXBlIENTU0VkaXRFbGVtZW50XG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0dmFyIENTU0VkaXRFbGVtZW50ID0gcmVxdWlyZSgnZWRpdFRyZWUnKS5FZGl0RWxlbWVudC5leHRlbmQoe1xuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKHJ1bGUsIG5hbWUsIHZhbHVlLCBlbmQpIHtcblx0XHRcdHRoaXMuc3R5bGVCZWZvcmUgPSBydWxlLm9wdGlvbnMuc3R5bGVCZWZvcmU7XG5cdFx0XHR0aGlzLnN0eWxlU2VwYXJhdG9yID0gcnVsZS5vcHRpb25zLnN0eWxlU2VwYXJhdG9yO1xuXG5cdFx0XHR0aGlzLl9lbmQgPSBlbmQudmFsdWU7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbnMuZW5kID0gZW5kLnN0YXJ0O1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHJhbmdlcyBvZiBjb21wbGV4IHZhbHVlIHBhcnRzXG5cdFx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIDxjb2RlPm51bGw8L2NvZGU+IGlmIHZhbHVlIGlzIG5vdCBjb21wbGV4XG5cdFx0ICovXG5cdFx0dmFsdWVQYXJ0czogZnVuY3Rpb24oaXNBYnNvbHV0ZSkge1xuXHRcdFx0dmFyIHBhcnRzID0gZmluZFBhcnRzKHRoaXMudmFsdWUoKSk7XG5cdFx0XHRpZiAoaXNBYnNvbHV0ZSkge1xuXHRcdFx0XHR2YXIgb2Zmc2V0ID0gdGhpcy52YWx1ZVBvc2l0aW9uKHRydWUpO1xuXHRcdFx0XHRfLmVhY2gocGFydHMsIGZ1bmN0aW9uKHApIHtcblx0XHRcdFx0XHRwLnNoaWZ0KG9mZnNldCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcGFydHM7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFNldHMgb2YgZ2V0cyBwcm9wZXJ0eSBlbmQgdmFsdWUgKGJhc2ljYWxseSwgaXQncyBhIHNlbWljb2xvbilcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdmFsIE5ldyBlbmQgdmFsdWUuIElmIG5vdCBwYXNzZWQsIGN1cnJlbnRcblx0XHQgKiB2YWx1ZSBpcyByZXR1cm5lZFxuXHRcdCAqL1xuXHRcdGVuZDogZnVuY3Rpb24odmFsKSB7XG5cdFx0XHRpZiAoIV8uaXNVbmRlZmluZWQodmFsKSAmJiB0aGlzLl9lbmQgIT09IHZhbCkge1xuXHRcdFx0XHR0aGlzLnBhcmVudC5fdXBkYXRlU291cmNlKHZhbCwgdGhpcy5fcG9zaXRpb25zLmVuZCwgdGhpcy5fcG9zaXRpb25zLmVuZCArIHRoaXMuX2VuZC5sZW5ndGgpO1xuXHRcdFx0XHR0aGlzLl9lbmQgPSB2YWw7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzLl9lbmQ7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgZnVsbCBydWxlIHJhbmdlLCB3aXRoIGluZGVudGF0aW9uXG5cdFx0ICogQHBhcmFtIHtCb29sZWFufSBpc0Fic29sdXRlIFJldHVybiBhYnNvbHV0ZSByYW5nZSAod2l0aCByZXNwZWN0IG9mXG5cdFx0ICogcnVsZSBvZmZzZXQpXG5cdFx0ICogQHJldHVybnMge1JhbmdlfVxuXHRcdCAqL1xuXHRcdGZ1bGxSYW5nZTogZnVuY3Rpb24oaXNBYnNvbHV0ZSkge1xuXHRcdFx0dmFyIHIgPSB0aGlzLnJhbmdlKGlzQWJzb2x1dGUpO1xuXHRcdFx0ci5zdGFydCAtPSB0aGlzLnN0eWxlQmVmb3JlLmxlbmd0aDtcblx0XHRcdHJldHVybiByO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGl0ZW0gc3RyaW5nIHJlcHJlc2VudGF0aW9uXG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHR0b1N0cmluZzogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5uYW1lKCkgKyB0aGlzLnN0eWxlU2VwYXJhdG9yICsgdGhpcy52YWx1ZSgpICsgdGhpcy5lbmQoKTtcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiB7XG5cdFx0LyoqXG5cdFx0ICogUGFyc2VzIENTUyBydWxlIGludG8gZWRpdGFibGUgdHJlZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzb3VyY2Vcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHRcdCAqIEBtZW1iZXJPZiBlbW1ldC5jc3NFZGl0VHJlZVxuXHRcdCAqIEByZXR1cm5zIHtFZGl0Q29udGFpbmVyfVxuXHRcdCAqL1xuXHRcdHBhcnNlOiBmdW5jdGlvbihzb3VyY2UsIG9wdGlvbnMpIHtcblx0XHRcdHJldHVybiBuZXcgQ1NTRWRpdENvbnRhaW5lcihzb3VyY2UsIG9wdGlvbnMpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBFeHRyYWN0IGFuZCBwYXJzZSBDU1MgcnVsZSBmcm9tIHNwZWNpZmllZCBwb3NpdGlvbiBpbiA8Y29kZT5jb250ZW50PC9jb2RlPlxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50IENTUyBzb3VyY2UgY29kZVxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3MgQ2hhcmFjdGVyIHBvc2l0aW9uIHdoZXJlIHRvIHN0YXJ0IHNvdXJjZSBjb2RlIGV4dHJhY3Rpb25cblx0XHQgKiBAcmV0dXJucyB7RWRpdENvbnRhaW5lcn1cblx0XHQgKi9cblx0XHRwYXJzZUZyb21Qb3NpdGlvbjogZnVuY3Rpb24oY29udGVudCwgcG9zLCBpc0JhY2t3YXJkKSB7XG5cdFx0XHR2YXIgYm91bmRzID0gdGhpcy5leHRyYWN0UnVsZShjb250ZW50LCBwb3MsIGlzQmFja3dhcmQpO1xuXHRcdFx0aWYgKCFib3VuZHMgfHwgIWJvdW5kcy5pbnNpZGUocG9zKSlcblx0XHRcdFx0Ly8gbm8gbWF0Y2hpbmcgQ1NTIHJ1bGUgb3IgY2FyZXQgb3V0c2lkZSBydWxlIGJvdW5kc1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdFx0cmV0dXJuIHRoaXMucGFyc2UoYm91bmRzLnN1YnN0cmluZyhjb250ZW50KSwge1xuXHRcdFx0XHRvZmZzZXQ6IGJvdW5kcy5zdGFydFxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEV4dHJhY3RzIHNpbmdsZSBDU1Mgc2VsZWN0b3IgZGVmaW5pdGlvbiBmcm9tIHNvdXJjZSBjb2RlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnQgQ1NTIHNvdXJjZSBjb2RlXG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvcyBDaGFyYWN0ZXIgcG9zaXRpb24gd2hlcmUgdG8gc3RhcnQgc291cmNlIGNvZGUgZXh0cmFjdGlvblxuXHRcdCAqIEByZXR1cm5zIHtSYW5nZX1cblx0XHQgKi9cblx0XHRleHRyYWN0UnVsZTogZnVuY3Rpb24oY29udGVudCwgcG9zLCBpc0JhY2t3YXJkKSB7XG5cdFx0XHR2YXIgcmVzdWx0ID0gJyc7XG5cdFx0XHR2YXIgbGVuID0gY29udGVudC5sZW5ndGg7XG5cdFx0XHR2YXIgb2Zmc2V0ID0gcG9zO1xuXHRcdFx0dmFyIHN0b3BDaGFycyA9ICd7fS9cXFxcPD5cXG5cXHInO1xuXHRcdFx0dmFyIGJyYWNlUG9zID0gLTEsIGNoO1xuXG5cdFx0XHQvLyBzZWFyY2ggbGVmdCB1bnRpbCB3ZSBmaW5kIHJ1bGUgZWRnZVxuXHRcdFx0d2hpbGUgKG9mZnNldCA+PSAwKSB7XG5cdFx0XHRcdGNoID0gY29udGVudC5jaGFyQXQob2Zmc2V0KTtcblx0XHRcdFx0aWYgKGNoID09ICd7Jykge1xuXHRcdFx0XHRcdGJyYWNlUG9zID0gb2Zmc2V0O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKGNoID09ICd9JyAmJiAhaXNCYWNrd2FyZCkge1xuXHRcdFx0XHRcdG9mZnNldCsrO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0b2Zmc2V0LS07XG5cdFx0XHR9XG5cblx0XHRcdC8vIHNlYXJjaCByaWdodCBmb3IgZnVsbCBydWxlIHNldFxuXHRcdFx0d2hpbGUgKG9mZnNldCA8IGxlbikge1xuXHRcdFx0XHRjaCA9IGNvbnRlbnQuY2hhckF0KG9mZnNldCk7XG5cdFx0XHRcdGlmIChjaCA9PSAneycpIHtcblx0XHRcdFx0XHRicmFjZVBvcyA9IG9mZnNldDtcblx0XHRcdFx0fSBlbHNlIGlmIChjaCA9PSAnfScpIHtcblx0XHRcdFx0XHRpZiAoYnJhY2VQb3MgIT0gLTEpXG5cdFx0XHRcdFx0XHRyZXN1bHQgPSBjb250ZW50LnN1YnN0cmluZyhicmFjZVBvcywgb2Zmc2V0ICsgMSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRvZmZzZXQrKztcblx0XHRcdH1cblxuXHRcdFx0aWYgKHJlc3VsdCkge1xuXHRcdFx0XHQvLyBmaW5kIENTUyBzZWxlY3RvclxuXHRcdFx0XHRvZmZzZXQgPSBicmFjZVBvcyAtIDE7XG5cdFx0XHRcdHZhciBzZWxlY3RvciA9ICcnO1xuXHRcdFx0XHR3aGlsZSAob2Zmc2V0ID49IDApIHtcblx0XHRcdFx0XHRjaCA9IGNvbnRlbnQuY2hhckF0KG9mZnNldCk7XG5cdFx0XHRcdFx0aWYgKHN0b3BDaGFycy5pbmRleE9mKGNoKSAhPSAtMSkgYnJlYWs7XG5cdFx0XHRcdFx0b2Zmc2V0LS07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBhbHNvIHRyaW0gd2hpdGVzcGFjZVxuXHRcdFx0XHRzZWxlY3RvciA9IGNvbnRlbnQuc3Vic3RyaW5nKG9mZnNldCArIDEsIGJyYWNlUG9zKS5yZXBsYWNlKC9eW1xcc1xcblxccl0rL20sICcnKTtcblx0XHRcdFx0cmV0dXJuIHJlcXVpcmUoJ3JhbmdlJykuY3JlYXRlKGJyYWNlUG9zIC0gc2VsZWN0b3IubGVuZ3RoLCByZXN1bHQubGVuZ3RoICsgc2VsZWN0b3IubGVuZ3RoKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHQgXHQgKiBSZW1vdmVzIHZlbmRvciBwcmVmaXggZnJvbSBDU1MgcHJvcGVydHlcblx0IFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgQ1NTIHByb3BlcnR5XG5cdCBcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0IFx0ICovXG5cdCBcdGJhc2VOYW1lOiBmdW5jdGlvbihuYW1lKSB7XG5cdCBcdFx0cmV0dXJuIG5hbWUucmVwbGFjZSgvXlxccypcXC1cXHcrXFwtLywgJycpO1xuXHQgXHR9LFxuXG5cdCBcdC8qKlxuXHQgXHQgKiBGaW5kcyBwYXJ0cyBvZiBjb21wbGV4IENTUyB2YWx1ZVxuXHQgXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCBcdCAqIEByZXR1cm5zIHtBcnJheX1cblx0IFx0ICovXG5cdCBcdGZpbmRQYXJ0czogZmluZFBhcnRzXG5cdH07XG59KTsvKipcbiAqIFhNTCBFZGl0VHJlZSBpcyBhIG1vZHVsZSB0aGF0IGNhbiBwYXJzZSBhbiBYTUwvSFRNTCBlbGVtZW50IGludG8gYSB0cmVlIHdpdGhcbiAqIGNvbnZlbmllbnQgbWV0aG9kcyBmb3IgYWRkaW5nLCBtb2RpZnlpbmcgYW5kIHJlbW92aW5nIGF0dHJpYnV0ZXMuIFRoZXNlXG4gKiBjaGFuZ2VzIGNhbiBiZSB3cml0dGVuIGJhY2sgdG8gc3RyaW5nIHdpdGggcmVzcGVjdCBvZiBjb2RlIGZvcm1hdHRpbmcuXG4gKlxuICogQG1lbWJlck9mIF9feG1sRWRpdFRyZWVEZWZpbmVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmRlZmluZSgneG1sRWRpdFRyZWUnLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcblx0XHRzdHlsZUJlZm9yZTogJyAnLFxuXHRcdHN0eWxlU2VwYXJhdG9yOiAnPScsXG5cdFx0c3R5bGVRdW90ZTogJ1wiJyxcblx0XHRvZmZzZXQ6IDBcblx0fTtcblxuXHR2YXIgc3RhcnRUYWcgPSAvXjwoW1xcd1xcOlxcLV0rKSgoPzpcXHMrW1xcd1xcLTpdKyg/Olxccyo9XFxzKig/Oig/OlwiW15cIl0qXCIpfCg/OidbXiddKicpfFtePlxcc10rKSk/KSopXFxzKihcXC8/KT4vbTtcblxuXHR2YXIgWE1MRWRpdENvbnRhaW5lciA9IHJlcXVpcmUoJ2VkaXRUcmVlJykuRWRpdENvbnRhaW5lci5leHRlbmQoe1xuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKHNvdXJjZSwgb3B0aW9ucykge1xuXHRcdFx0Xy5kZWZhdWx0cyh0aGlzLm9wdGlvbnMsIGRlZmF1bHRPcHRpb25zKTtcblx0XHRcdHRoaXMuX3Bvc2l0aW9ucy5uYW1lID0gMTtcblxuXHRcdFx0dmFyIGF0dHJUb2tlbiA9IG51bGw7XG5cdFx0XHR2YXIgdG9rZW5zID0gcmVxdWlyZSgneG1sUGFyc2VyJykucGFyc2Uoc291cmNlKTtcblx0XHRcdHZhciByYW5nZSA9IHJlcXVpcmUoJ3JhbmdlJyk7XG5cblx0XHRcdF8uZWFjaCh0b2tlbnMsIGZ1bmN0aW9uKHRva2VuKSB7XG5cdFx0XHRcdHRva2VuLnZhbHVlID0gcmFuZ2UuY3JlYXRlKHRva2VuKS5zdWJzdHJpbmcoc291cmNlKTtcblx0XHRcdFx0c3dpdGNoICh0b2tlbi50eXBlKSB7XG5cdFx0XHRcdFx0Y2FzZSAndGFnJzpcblx0XHRcdFx0XHRcdGlmICgvXjxbXlxcL10rLy50ZXN0KHRva2VuLnZhbHVlKSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9uYW1lID0gdG9rZW4udmFsdWUuc3Vic3RyaW5nKDEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdhdHRyaWJ1dGUnOlxuXHRcdFx0XHRcdFx0Ly8gYWRkIGVtcHR5IGF0dHJpYnV0ZVxuXHRcdFx0XHRcdFx0aWYgKGF0dHJUb2tlbikge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9jaGlsZHJlbi5wdXNoKG5ldyBYTUxFZGl0RWxlbWVudCh0aGlzLCBhdHRyVG9rZW4pKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YXR0clRva2VuID0gdG9rZW47XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3N0cmluZyc6XG5cdFx0XHRcdFx0XHR0aGlzLl9jaGlsZHJlbi5wdXNoKG5ldyBYTUxFZGl0RWxlbWVudCh0aGlzLCBhdHRyVG9rZW4sIHRva2VuKSk7XG5cdFx0XHRcdFx0XHRhdHRyVG9rZW4gPSBudWxsO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH0sIHRoaXMpO1xuXG5cdFx0XHRpZiAoYXR0clRva2VuKSB7XG5cdFx0XHRcdHRoaXMuX2NoaWxkcmVuLnB1c2gobmV3IFhNTEVkaXRFbGVtZW50KHRoaXMsIGF0dHJUb2tlbikpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9zYXZlU3R5bGUoKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVtZW1iZXJzIGFsbCBzdHlsZXMgb2YgcHJvcGVydGllc1xuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICovXG5cdFx0X3NhdmVTdHlsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc3RhcnQgPSB0aGlzLm5hbWVSYW5nZSgpLmVuZDtcblx0XHRcdHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcblxuXHRcdFx0Xy5lYWNoKHRoaXMubGlzdCgpLCAvKiogQHBhcmFtIHtFZGl0RWxlbWVudH0gcCAqLyBmdW5jdGlvbihwKSB7XG5cdFx0XHRcdHAuc3R5bGVCZWZvcmUgPSBzb3VyY2Uuc3Vic3RyaW5nKHN0YXJ0LCBwLm5hbWVQb3NpdGlvbigpKTtcblxuXHRcdFx0XHRpZiAocC52YWx1ZVBvc2l0aW9uKCkgIT09IC0xKSB7XG5cdFx0XHRcdFx0cC5zdHlsZVNlcGFyYXRvciA9IHNvdXJjZS5zdWJzdHJpbmcocC5uYW1lUG9zaXRpb24oKSArIHAubmFtZSgpLmxlbmd0aCwgcC52YWx1ZVBvc2l0aW9uKCkgLSBwLnN0eWxlUXVvdGUubGVuZ3RoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHN0YXJ0ID0gcC5yYW5nZSgpLmVuZDtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBBZGRzIG5ldyBhdHRyaWJ1dGVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBQcm9wZXJ0eSBuYW1lXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIFByb3BlcnR5IHZhbHVlXG5cdFx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvcyBQb3NpdGlvbiBhdCB3aGljaCB0byBpbnNlcnQgbmV3IHByb3BlcnR5LiBCeVxuXHRcdCAqIGRlZmF1bHQgdGhlIHByb3BlcnR5IGlzIGluc2VydGVkIGF0IHRoZSBlbmQgb2YgcnVsZVxuXHRcdCAqL1xuXHRcdGFkZDogZnVuY3Rpb24obmFtZSwgdmFsdWUsIHBvcykge1xuXHRcdFx0dmFyIGxpc3QgPSB0aGlzLmxpc3QoKTtcblx0XHRcdHZhciBzdGFydCA9IHRoaXMubmFtZVJhbmdlKCkuZW5kO1xuXHRcdFx0dmFyIGVkaXRUcmVlID0gcmVxdWlyZSgnZWRpdFRyZWUnKTtcblx0XHRcdHZhciBzdHlsZXMgPSBfLnBpY2sodGhpcy5vcHRpb25zLCAnc3R5bGVCZWZvcmUnLCAnc3R5bGVTZXBhcmF0b3InLCAnc3R5bGVRdW90ZScpO1xuXG5cdFx0XHRpZiAoXy5pc1VuZGVmaW5lZChwb3MpKVxuXHRcdFx0XHRwb3MgPSBsaXN0Lmxlbmd0aDtcblxuXG5cdFx0XHQvKiogQHR5cGUgWE1MRWRpdEF0dHJpYnV0ZSAqL1xuXHRcdFx0dmFyIGRvbm9yID0gbGlzdFtwb3NdO1xuXHRcdFx0aWYgKGRvbm9yKSB7XG5cdFx0XHRcdHN0YXJ0ID0gZG9ub3IuZnVsbFJhbmdlKCkuc3RhcnQ7XG5cdFx0XHR9IGVsc2UgaWYgKGRvbm9yID0gbGlzdFtwb3MgLSAxXSkge1xuXHRcdFx0XHRzdGFydCA9IGRvbm9yLnJhbmdlKCkuZW5kO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZG9ub3IpIHtcblx0XHRcdFx0c3R5bGVzID0gXy5waWNrKGRvbm9yLCAnc3R5bGVCZWZvcmUnLCAnc3R5bGVTZXBhcmF0b3InLCAnc3R5bGVRdW90ZScpO1xuXHRcdFx0fVxuXG5cdFx0XHR2YWx1ZSA9IHN0eWxlcy5zdHlsZVF1b3RlICsgdmFsdWUgKyBzdHlsZXMuc3R5bGVRdW90ZTtcblxuXHRcdFx0dmFyIGF0dHJpYnV0ZSA9IG5ldyBYTUxFZGl0RWxlbWVudCh0aGlzLFxuXHRcdFx0XHRcdGVkaXRUcmVlLmNyZWF0ZVRva2VuKHN0YXJ0ICsgc3R5bGVzLnN0eWxlQmVmb3JlLmxlbmd0aCwgbmFtZSksXG5cdFx0XHRcdFx0ZWRpdFRyZWUuY3JlYXRlVG9rZW4oc3RhcnQgKyBzdHlsZXMuc3R5bGVCZWZvcmUubGVuZ3RoICsgbmFtZS5sZW5ndGhcblx0XHRcdFx0XHRcdFx0KyBzdHlsZXMuc3R5bGVTZXBhcmF0b3IubGVuZ3RoLCB2YWx1ZSlcblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRfLmV4dGVuZChhdHRyaWJ1dGUsIHN0eWxlcyk7XG5cblx0XHRcdC8vIHdyaXRlIG5ldyBhdHRyaWJ1dGUgaW50byB0aGUgc291cmNlXG5cdFx0XHR0aGlzLl91cGRhdGVTb3VyY2UoYXR0cmlidXRlLnN0eWxlQmVmb3JlICsgYXR0cmlidXRlLnRvU3RyaW5nKCksIHN0YXJ0KTtcblxuXHRcdFx0Ly8gaW5zZXJ0IG5ldyBhdHRyaWJ1dGVcblx0XHRcdHRoaXMuX2NoaWxkcmVuLnNwbGljZShwb3MsIDAsIGF0dHJpYnV0ZSk7XG5cdFx0XHRyZXR1cm4gYXR0cmlidXRlO1xuXHRcdH1cblx0fSk7XG5cblx0dmFyIFhNTEVkaXRFbGVtZW50ID0gcmVxdWlyZSgnZWRpdFRyZWUnKS5FZGl0RWxlbWVudC5leHRlbmQoe1xuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKHBhcmVudCwgbmFtZVRva2VuLCB2YWx1ZVRva2VuKSB7XG5cdFx0XHR0aGlzLnN0eWxlQmVmb3JlID0gcGFyZW50Lm9wdGlvbnMuc3R5bGVCZWZvcmU7XG5cdFx0XHR0aGlzLnN0eWxlU2VwYXJhdG9yID0gcGFyZW50Lm9wdGlvbnMuc3R5bGVTZXBhcmF0b3I7XG5cblx0XHRcdHZhciB2YWx1ZSA9ICcnLCBxdW90ZSA9IHBhcmVudC5vcHRpb25zLnN0eWxlUXVvdGU7XG5cdFx0XHRpZiAodmFsdWVUb2tlbikge1xuXHRcdFx0XHR2YWx1ZSA9IHZhbHVlVG9rZW4udmFsdWU7XG5cdFx0XHRcdHF1b3RlID0gdmFsdWUuY2hhckF0KDApO1xuXHRcdFx0XHRpZiAocXVvdGUgPT0gJ1wiJyB8fCBxdW90ZSA9PSBcIidcIikge1xuXHRcdFx0XHRcdHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDEpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHF1b3RlID0gJyc7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAocXVvdGUgJiYgdmFsdWUuY2hhckF0KHZhbHVlLmxlbmd0aCAtIDEpID09IHF1b3RlKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgdmFsdWUubGVuZ3RoIC0gMSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dGhpcy5zdHlsZVF1b3RlID0gcXVvdGU7XG5cblx0XHRcdHRoaXMuX3ZhbHVlID0gdmFsdWU7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbnMudmFsdWUgPSB2YWx1ZVRva2VuID8gdmFsdWVUb2tlbi5zdGFydCArIHF1b3RlLmxlbmd0aCA6IC0xO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGZ1bGwgcnVsZSByYW5nZSwgd2l0aCBpbmRlbnRhdGlvblxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNBYnNvbHV0ZSBSZXR1cm4gYWJzb2x1dGUgcmFuZ2UgKHdpdGggcmVzcGVjdCBvZlxuXHRcdCAqIHJ1bGUgb2Zmc2V0KVxuXHRcdCAqIEByZXR1cm5zIHtSYW5nZX1cblx0XHQgKi9cblx0XHRmdWxsUmFuZ2U6IGZ1bmN0aW9uKGlzQWJzb2x1dGUpIHtcblx0XHRcdHZhciByID0gdGhpcy5yYW5nZShpc0Fic29sdXRlKTtcblx0XHRcdHIuc3RhcnQgLT0gdGhpcy5zdHlsZUJlZm9yZS5sZW5ndGg7XG5cdFx0XHRyZXR1cm4gcjtcblx0XHR9LFxuXG5cdFx0dG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMubmFtZSgpICsgdGhpcy5zdHlsZVNlcGFyYXRvclxuXHRcdFx0XHQrIHRoaXMuc3R5bGVRdW90ZSArIHRoaXMudmFsdWUoKSArIHRoaXMuc3R5bGVRdW90ZTtcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiB7XG5cdFx0LyoqXG5cdFx0ICogUGFyc2VzIEhUTUwgZWxlbWVudCBpbnRvIGVkaXRhYmxlIHRyZWVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gc291cmNlXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0XHQgKiBAbWVtYmVyT2YgZW1tZXQuaHRtbEVkaXRUcmVlXG5cdFx0ICogQHJldHVybnMge0VkaXRDb250YWluZXJ9XG5cdFx0ICovXG5cdFx0cGFyc2U6IGZ1bmN0aW9uKHNvdXJjZSwgb3B0aW9ucykge1xuXHRcdFx0cmV0dXJuIG5ldyBYTUxFZGl0Q29udGFpbmVyKHNvdXJjZSwgb3B0aW9ucyk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEV4dHJhY3QgYW5kIHBhcnNlIEhUTUwgZnJvbSBzcGVjaWZpZWQgcG9zaXRpb24gaW4gPGNvZGU+Y29udGVudDwvY29kZT5cblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudCBDU1Mgc291cmNlIGNvZGVcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gcG9zIENoYXJhY3RlciBwb3NpdGlvbiB3aGVyZSB0byBzdGFydCBzb3VyY2UgY29kZSBleHRyYWN0aW9uXG5cdFx0ICogQHJldHVybnMge1hNTEVkaXRFbGVtZW50fVxuXHRcdCAqL1xuXHRcdHBhcnNlRnJvbVBvc2l0aW9uOiBmdW5jdGlvbihjb250ZW50LCBwb3MsIGlzQmFja3dhcmQpIHtcblx0XHRcdHZhciBib3VuZHMgPSB0aGlzLmV4dHJhY3RUYWcoY29udGVudCwgcG9zLCBpc0JhY2t3YXJkKTtcblx0XHRcdGlmICghYm91bmRzIHx8ICFib3VuZHMuaW5zaWRlKHBvcykpXG5cdFx0XHRcdC8vIG5vIG1hdGNoaW5nIEhUTUwgdGFnIG9yIGNhcmV0IG91dHNpZGUgdGFnIGJvdW5kc1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdFx0cmV0dXJuIHRoaXMucGFyc2UoYm91bmRzLnN1YnN0cmluZyhjb250ZW50KSwge1xuXHRcdFx0XHRvZmZzZXQ6IGJvdW5kcy5zdGFydFxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEV4dHJhY3RzIG5lYXJlc3QgSFRNTCB0YWcgcmFuZ2UgZnJvbSA8Y29kZT5jb250ZW50PC9jb2RlPiwgc3RhcnRpbmcgYXRcblx0XHQgKiA8Y29kZT5wb3M8L2NvZGU+IHBvc2l0aW9uXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcblx0XHQgKiBAcGFyYW0ge051bWJlcn0gcG9zXG5cdFx0ICogQHBhcmFtIHtCb29sZWFufSBpc0JhY2t3YXJkXG5cdFx0ICogQHJldHVybnMge1JhbmdlfVxuXHRcdCAqL1xuXHRcdGV4dHJhY3RUYWc6IGZ1bmN0aW9uKGNvbnRlbnQsIHBvcywgaXNCYWNrd2FyZCkge1xuXHRcdFx0dmFyIGxlbiA9IGNvbnRlbnQubGVuZ3RoLCBpO1xuXHRcdFx0dmFyIHJhbmdlID0gcmVxdWlyZSgncmFuZ2UnKTtcblxuXHRcdFx0Ly8gbWF4IGV4dHJhY3Rpb24gbGVuZ3RoLiBJIGRvbid0IHRoaW5rIHRoZXJlIG1heSBiZSB0YWdzIGxhcmdlclxuXHRcdFx0Ly8gdGhhbiAyMDAwIGNoYXJhY3RlcnMgbGVuZ3RoXG5cdFx0XHR2YXIgbWF4TGVuID0gTWF0aC5taW4oMjAwMCwgbGVuKTtcblxuXHRcdFx0LyoqIEB0eXBlIFJhbmdlICovXG5cdFx0XHR2YXIgciA9IG51bGw7XG5cblx0XHRcdHZhciBtYXRjaCA9IGZ1bmN0aW9uKHBvcykge1xuXHRcdFx0XHR2YXIgbTtcblx0XHRcdFx0aWYgKGNvbnRlbnQuY2hhckF0KHBvcykgPT0gJzwnICYmIChtID0gY29udGVudC5zdWJzdHIocG9zLCBtYXhMZW4pLm1hdGNoKHN0YXJ0VGFnKSkpXG5cdFx0XHRcdFx0cmV0dXJuIHJhbmdlLmNyZWF0ZShwb3MsIG1bMF0pO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gbG9va3VwIGJhY2t3YXJkLCBpbiBjYXNlIHdlIGFyZSBpbnNpZGUgdGFnIGFscmVhZHlcblx0XHRcdGZvciAoaSA9IHBvczsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0aWYgKHIgPSBtYXRjaChpKSkgYnJlYWs7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChyICYmIChyLmluc2lkZShwb3MpIHx8IGlzQmFja3dhcmQpKVxuXHRcdFx0XHRyZXR1cm4gcjtcblxuXHRcdFx0aWYgKCFyICYmIGlzQmFja3dhcmQpXG5cdFx0XHRcdHJldHVybiBudWxsO1xuXG5cdFx0XHQvLyBzZWFyY2ggZm9yd2FyZFxuXHRcdFx0Zm9yIChpID0gcG9zOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdFx0aWYgKHIgPSBtYXRjaChpKSlcblx0XHRcdFx0XHRyZXR1cm4gcjtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59KTsvKipcbiAqICdFeHBhbmQgYWJicmV2aWF0aW9uJyBlZGl0b3IgYWN0aW9uOiBleHRyYWN0cyBhYmJyZXZpYXRpb24gZnJvbSBjdXJyZW50IGNhcmV0XG4gKiBwb3NpdGlvbiBhbmQgcmVwbGFjZXMgaXQgd2l0aCBmb3JtYXR0ZWQgb3V0cHV0LlxuICogPGJyPjxicj5cbiAqIFRoaXMgYmVoYXZpb3IgY2FuIGJlIG92ZXJyaWRkZW4gd2l0aCBjdXN0b20gaGFuZGxlcnMgd2hpY2ggY2FuIHBlcmZvcm1cbiAqIGRpZmZlcmVudCBhY3Rpb25zIHdoZW4gJ0V4cGFuZCBBYmJyZXZpYXRpb24nIGFjdGlvbiBpcyBjYWxsZWQuXG4gKiBGb3IgZXhhbXBsZSwgYSBDU1MgZ3JhZGllbnQgaGFuZGxlciB0aGF0IHByb2R1Y2VzIHZlbmRvci1wcmVmaXhlZCBncmFkaWVudFxuICogZGVmaW5pdGlvbnMgcmVnaXN0ZXJzIGl0cyBvd24gZXhwYW5kIGFiYnJldmlhdGlvbiBoYW5kbGVyLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQG1lbWJlck9mIF9fZXhwYW5kQWJicmV2aWF0aW9uQWN0aW9uRGVmaW5lXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZGVmaW5lKCdleHBhbmRBYmJyZXZpYXRpb24nLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdC8qKlxuXHQgKiBAdHlwZSBIYW5kbGVyTGlzdCBMaXN0IG9mIHJlZ2lzdGVyZWQgaGFuZGxlcnNcblx0ICovXG5cdHZhciBoYW5kbGVycyA9IHJlcXVpcmUoJ2hhbmRsZXJMaXN0JykuY3JlYXRlKCk7XG5cblx0LyoqIEJhY2stcmVmZXJlbmNlIHRvIG1vZHVsZSAqL1xuXHR2YXIgbW9kdWxlID0gbnVsbDtcblxuXHR2YXIgYWN0aW9ucyA9IHJlcXVpcmUoJ2FjdGlvbnMnKTtcblx0LyoqXG5cdCAqICdFeHBhbmQgYWJicmV2aWF0aW9uJyBlZGl0b3IgYWN0aW9uXG5cdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3IgRWRpdG9yIGluc3RhbmNlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzeW50YXggU3ludGF4IHR5cGUgKGh0bWwsIGNzcywgZXRjLilcblx0ICogQHBhcmFtIHtTdHJpbmd9IHByb2ZpbGUgT3V0cHV0IHByb2ZpbGUgbmFtZSAoaHRtbCwgeG1sLCB4aHRtbClcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gUmV0dXJucyA8Y29kZT50cnVlPC9jb2RlPiBpZiBhYmJyZXZpYXRpb24gd2FzIGV4cGFuZGVkXG5cdCAqIHN1Y2Nlc3NmdWxseVxuXHQgKi9cblx0YWN0aW9ucy5hZGQoJ2V4cGFuZF9hYmJyZXZpYXRpb24nLCBmdW5jdGlvbihlZGl0b3IsIHN5bnRheCwgcHJvZmlsZSkge1xuXHRcdHZhciBhcmdzID0gXy50b0FycmF5KGFyZ3VtZW50cyk7XG5cblx0XHQvLyBub3JtYWxpemUgaW5jb21pbmcgYXJndW1lbnRzXG5cdFx0dmFyIGluZm8gPSByZXF1aXJlKCdlZGl0b3JVdGlscycpLm91dHB1dEluZm8oZWRpdG9yLCBzeW50YXgsIHByb2ZpbGUpO1xuXHRcdGFyZ3NbMV0gPSBpbmZvLnN5bnRheDtcblx0XHRhcmdzWzJdID0gaW5mby5wcm9maWxlO1xuXG5cdFx0cmV0dXJuIGhhbmRsZXJzLmV4ZWMoZmFsc2UsIGFyZ3MpO1xuXHR9KTtcblxuXHQvKipcblx0ICogQSBzcGVjaWFsIHZlcnNpb24gb2YgPGNvZGU+ZXhwYW5kQWJicmV2aWF0aW9uPC9jb2RlPiBmdW5jdGlvbjogaWYgaXQgY2FuJ3Rcblx0ICogZmluZCBhYmJyZXZpYXRpb24sIGl0IHdpbGwgcGxhY2UgVGFiIGNoYXJhY3RlciBhdCBjYXJldCBwb3NpdGlvblxuXHQgKiBAcGFyYW0ge0lFbW1ldEVkaXRvcn0gZWRpdG9yIEVkaXRvciBpbnN0YW5jZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3ludGF4IFN5bnRheCB0eXBlIChodG1sLCBjc3MsIGV0Yy4pXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9maWxlIE91dHB1dCBwcm9maWxlIG5hbWUgKGh0bWwsIHhtbCwgeGh0bWwpXG5cdCAqL1xuXHRhY3Rpb25zLmFkZCgnZXhwYW5kX2FiYnJldmlhdGlvbl93aXRoX3RhYicsIGZ1bmN0aW9uKGVkaXRvciwgc3ludGF4LCBwcm9maWxlKSB7XG5cdFx0dmFyIHNlbCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0XHR2YXIgaW5kZW50ID0gcmVxdWlyZSgncmVzb3VyY2VzJykuZ2V0VmFyaWFibGUoJ2luZGVudGF0aW9uJyk7XG5cdFx0aWYgKHNlbCkge1xuXHRcdFx0Ly8gaW5kZW50IHNlbGVjdGlvblxuXHRcdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblx0XHRcdHZhciBzZWxSYW5nZSA9IHJlcXVpcmUoJ3JhbmdlJykuY3JlYXRlKGVkaXRvci5nZXRTZWxlY3Rpb25SYW5nZSgpKTtcblx0XHRcdHZhciBjb250ZW50ID0gdXRpbHMucGFkU3RyaW5nKHNlbCwgaW5kZW50KTtcblxuXHRcdFx0ZWRpdG9yLnJlcGxhY2VDb250ZW50KGluZGVudCArICckezB9JywgZWRpdG9yLmdldENhcmV0UG9zKCkpO1xuXHRcdFx0dmFyIHJlcGxhY2VSYW5nZSA9IHJlcXVpcmUoJ3JhbmdlJykuY3JlYXRlKGVkaXRvci5nZXRDYXJldFBvcygpLCBzZWxSYW5nZS5sZW5ndGgoKSk7XG5cdFx0XHRlZGl0b3IucmVwbGFjZUNvbnRlbnQoY29udGVudCwgcmVwbGFjZVJhbmdlLnN0YXJ0LCByZXBsYWNlUmFuZ2UuZW5kLCB0cnVlKTtcblx0XHRcdGVkaXRvci5jcmVhdGVTZWxlY3Rpb24ocmVwbGFjZVJhbmdlLnN0YXJ0LCByZXBsYWNlUmFuZ2Uuc3RhcnQgKyBjb250ZW50Lmxlbmd0aCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIWFjdGlvbnMucnVuKCdleHBhbmRfYWJicmV2aWF0aW9uJywgZWRpdG9yLCBzeW50YXgsIHByb2ZpbGUpKSB7XG5cdFx0XHRlZGl0b3IucmVwbGFjZUNvbnRlbnQoaW5kZW50LCBlZGl0b3IuZ2V0Q2FyZXRQb3MoKSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sIHtoaWRkZW46IHRydWV9KTtcblxuXHQvLyBYWFggc2V0dXAgZGVmYXVsdCBoYW5kbGVyXG5cdC8qKlxuXHQgKiBFeHRyYWN0cyBhYmJyZXZpYXRpb24gZnJvbSBjdXJyZW50IGNhcmV0XG5cdCAqIHBvc2l0aW9uIGFuZCByZXBsYWNlcyBpdCB3aXRoIGZvcm1hdHRlZCBvdXRwdXRcblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvciBFZGl0b3IgaW5zdGFuY2Vcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bnRheCBTeW50YXggdHlwZSAoaHRtbCwgY3NzLCBldGMuKVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvZmlsZSBPdXRwdXQgcHJvZmlsZSBuYW1lIChodG1sLCB4bWwsIHhodG1sKVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufSBSZXR1cm5zIDxjb2RlPnRydWU8L2NvZGU+IGlmIGFiYnJldmlhdGlvbiB3YXMgZXhwYW5kZWRcblx0ICogc3VjY2Vzc2Z1bGx5XG5cdCAqL1xuXHRoYW5kbGVycy5hZGQoZnVuY3Rpb24oZWRpdG9yLCBzeW50YXgsIHByb2ZpbGUpIHtcblx0XHR2YXIgY2FyZXRQb3MgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uUmFuZ2UoKS5lbmQ7XG5cdFx0dmFyIGFiYnIgPSBtb2R1bGUuZmluZEFiYnJldmlhdGlvbihlZGl0b3IpO1xuXG5cdFx0aWYgKGFiYnIpIHtcblx0XHRcdHZhciBjb250ZW50ID0gZW1tZXQuZXhwYW5kQWJicmV2aWF0aW9uKGFiYnIsIHN5bnRheCwgcHJvZmlsZSxcblx0XHRcdFx0XHRyZXF1aXJlKCdhY3Rpb25VdGlscycpLmNhcHR1cmVDb250ZXh0KGVkaXRvcikpO1xuXHRcdFx0aWYgKGNvbnRlbnQpIHtcblx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VDb250ZW50KGNvbnRlbnQsIGNhcmV0UG9zIC0gYWJici5sZW5ndGgsIGNhcmV0UG9zKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LCB7b3JkZXI6IC0xfSk7XG5cblx0cmV0dXJuIG1vZHVsZSA9IHtcblx0XHQvKipcblx0XHQgKiBBZGRzIGN1c3RvbSBleHBhbmQgYWJicmV2aWF0aW9uIGhhbmRsZXIuIFRoZSBwYXNzZWQgZnVuY3Rpb24gc2hvdWxkXG5cdFx0ICogcmV0dXJuIDxjb2RlPnRydWU8L2NvZGU+IGlmIGl0IHdhcyBwZXJmb3JtZWQgc3VjY2Vzc2Z1bGx5LFxuXHRcdCAqIDxjb2RlPmZhbHNlPC9jb2RlPiBvdGhlcndpc2UuXG5cdFx0ICpcblx0XHQgKiBBZGRlZCBoYW5kbGVycyB3aWxsIGJlIGNhbGxlZCB3aGVuICdFeHBhbmQgQWJicmV2aWF0aW9uJyBpcyBjYWxsZWRcblx0XHQgKiBpbiBvcmRlciB0aGV5IHdlcmUgYWRkZWRcblx0XHQgKiBAbWVtYmVyT2YgZXhwYW5kQWJicmV2aWF0aW9uXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHRcdCAqL1xuXHRcdGFkZEhhbmRsZXI6IGZ1bmN0aW9uKGZuLCBvcHRpb25zKSB7XG5cdFx0XHRoYW5kbGVycy5hZGQoZm4sIG9wdGlvbnMpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZW1vdmVzIHJlZ2lzdGVyZWQgaGFuZGxlclxuXHRcdCAqIEByZXR1cm5zXG5cdFx0ICovXG5cdFx0cmVtb3ZlSGFuZGxlcjogZnVuY3Rpb24oZm4pIHtcblx0XHRcdGhhbmRsZXJzLnJlbW92ZShmbiwgb3B0aW9ucyk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFNlYXJjaCBmb3IgYWJicmV2aWF0aW9uIGluIGVkaXRvciBmcm9tIGN1cnJlbnQgY2FyZXQgcG9zaXRpb25cblx0XHQgKiBAcGFyYW0ge0lFbW1ldEVkaXRvcn0gZWRpdG9yIEVkaXRvciBpbnN0YW5jZVxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHRmaW5kQWJicmV2aWF0aW9uOiBmdW5jdGlvbihlZGl0b3IpIHtcblx0XHRcdC8qKiBAdHlwZSBSYW5nZSAqL1xuXHRcdFx0dmFyIHJhbmdlID0gcmVxdWlyZSgncmFuZ2UnKS5jcmVhdGUoZWRpdG9yLmdldFNlbGVjdGlvblJhbmdlKCkpO1xuXHRcdFx0dmFyIGNvbnRlbnQgPSBTdHJpbmcoZWRpdG9yLmdldENvbnRlbnQoKSk7XG5cdFx0XHRpZiAocmFuZ2UubGVuZ3RoKCkpIHtcblx0XHRcdFx0Ly8gYWJicmV2aWF0aW9uIGlzIHNlbGVjdGVkIGJ5IHVzZXJcblx0XHRcdFx0cmV0dXJuIHJhbmdlLnN1YnN0cmluZyhjb250ZW50KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gc2VhcmNoIGZvciBuZXcgYWJicmV2aWF0aW9uIGZyb20gY3VycmVudCBjYXJldCBwb3NpdGlvblxuXHRcdFx0dmFyIGN1ckxpbmUgPSBlZGl0b3IuZ2V0Q3VycmVudExpbmVSYW5nZSgpO1xuXHRcdFx0cmV0dXJuIHJlcXVpcmUoJ2FjdGlvblV0aWxzJykuZXh0cmFjdEFiYnJldmlhdGlvbihjb250ZW50LnN1YnN0cmluZyhjdXJMaW5lLnN0YXJ0LCByYW5nZS5zdGFydCkpO1xuXHRcdH1cblx0fTtcbn0pOy8qKlxuICogQWN0aW9uIHRoYXQgd3JhcHMgY29udGVudCB3aXRoIGFiYnJldmlhdGlvbi4gRm9yIGNvbnZlbmllbmNlLCBhY3Rpb24gaXNcbiAqIGRlZmluZWQgYXMgcmV1c2FibGUgbW9kdWxlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBtZW1iZXJPZiBfX3dyYXBXaXRoQWJicmV2aWF0aW9uRGVmaW5lXG4gKi9cbmVtbWV0LmRlZmluZSgnd3JhcFdpdGhBYmJyZXZpYXRpb24nLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdC8qKiBCYWNrLXJlZmVyZW5jZXMgdG8gY3VycmVudCBtb2R1bGUgKi9cblx0dmFyIG1vZHVsZSA9IG51bGw7XG5cblx0LyoqXG5cdCAqIFdyYXBzIGNvbnRlbnQgd2l0aCBhYmJyZXZpYXRpb25cblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IEVkaXRvciBpbnN0YW5jZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYWJiciBBYmJyZXZpYXRpb24gdG8gd3JhcCB3aXRoXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzeW50YXggU3ludGF4IHR5cGUgKGh0bWwsIGNzcywgZXRjLilcblx0ICogQHBhcmFtIHtTdHJpbmd9IHByb2ZpbGUgT3V0cHV0IHByb2ZpbGUgbmFtZSAoaHRtbCwgeG1sLCB4aHRtbClcblx0ICovXG5cdHJlcXVpcmUoJ2FjdGlvbnMnKS5hZGQoJ3dyYXBfd2l0aF9hYmJyZXZpYXRpb24nLCBmdW5jdGlvbiAoZWRpdG9yLCBhYmJyLCBzeW50YXgsIHByb2ZpbGUpIHtcblx0XHR2YXIgaW5mbyA9IHJlcXVpcmUoJ2VkaXRvclV0aWxzJykub3V0cHV0SW5mbyhlZGl0b3IsIHN5bnRheCwgcHJvZmlsZSk7XG5cdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblx0XHQvKiogQHR5cGUgZW1tZXQuZWRpdG9yVXRpbHMgKi9cblx0XHR2YXIgZWRpdG9yVXRpbHMgPSByZXF1aXJlKCdlZGl0b3JVdGlscycpO1xuXHRcdGFiYnIgPSBhYmJyIHx8IGVkaXRvci5wcm9tcHQoXCJFbnRlciBhYmJyZXZpYXRpb25cIik7XG5cblx0XHRpZiAoIWFiYnIpXG5cdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdGFiYnIgPSBTdHJpbmcoYWJicik7XG5cblx0XHR2YXIgcmFuZ2UgPSByZXF1aXJlKCdyYW5nZScpLmNyZWF0ZShlZGl0b3IuZ2V0U2VsZWN0aW9uUmFuZ2UoKSk7XG5cblx0XHRpZiAoIXJhbmdlLmxlbmd0aCgpKSB7XG5cdFx0XHQvLyBubyBzZWxlY3Rpb24sIGZpbmQgdGFnIHBhaXJcblx0XHRcdHZhciBtYXRjaCA9IHJlcXVpcmUoJ2h0bWxNYXRjaGVyJykudGFnKGluZm8uY29udGVudCwgcmFuZ2Uuc3RhcnQpO1xuXHRcdFx0aWYgKCFtYXRjaCkgeyAgLy8gbm90aGluZyB0byB3cmFwXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0cmFuZ2UgPSB1dGlscy5uYXJyb3dUb05vblNwYWNlKGluZm8uY29udGVudCwgbWF0Y2gucmFuZ2UpO1xuXHRcdH1cblxuXHRcdHZhciBuZXdDb250ZW50ID0gdXRpbHMuZXNjYXBlVGV4dChyYW5nZS5zdWJzdHJpbmcoaW5mby5jb250ZW50KSk7XG5cdFx0dmFyIHJlc3VsdCA9IG1vZHVsZVxuXHRcdFx0LndyYXAoYWJiciwgZWRpdG9yVXRpbHMudW5pbmRlbnQoZWRpdG9yLCBuZXdDb250ZW50KSwgaW5mby5zeW50YXgsXG5cdFx0XHRcdFx0aW5mby5wcm9maWxlLCByZXF1aXJlKCdhY3Rpb25VdGlscycpLmNhcHR1cmVDb250ZXh0KGVkaXRvcikpO1xuXG5cdFx0aWYgKHJlc3VsdCkge1xuXHRcdFx0ZWRpdG9yLnJlcGxhY2VDb250ZW50KHJlc3VsdCwgcmFuZ2Uuc3RhcnQsIHJhbmdlLmVuZCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xuXG5cdHJldHVybiBtb2R1bGUgPSB7XG5cdFx0LyoqXG5cdFx0ICogV3JhcHMgcGFzc2VkIHRleHQgd2l0aCBhYmJyZXZpYXRpb24uIFRleHQgd2lsbCBiZSBwbGFjZWQgaW5zaWRlIGxhc3Rcblx0XHQgKiBleHBhbmRlZCBlbGVtZW50XG5cdFx0ICogQG1lbWJlck9mIHdyYXBXaXRoQWJicmV2aWF0aW9uXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGFiYnIgQWJicmV2aWF0aW9uXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGV4dCB0byB3cmFwXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bnRheCBEb2N1bWVudCB0eXBlIChodG1sLCB4bWwsIGV0Yy4pLiBEZWZhdWx0IGlzICdodG1sJ1xuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9maWxlIE91dHB1dCBwcm9maWxlJ3MgbmFtZS4gRGVmYXVsdCBpcyAncGxhaW4nXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHROb2RlIENvbnRleHQgbm9kZSBpbnNpZGUgd2hpY2ggYWJicmV2aWF0aW9uXG5cdFx0ICogaXMgd3JhcHBlZC4gSXQgd2lsbCBiZSB1c2VkIGFzIGEgcmVmZXJlbmNlIGZvciBub2RlIG5hbWUgcmVzb2x2ZXJzXG5cdFx0ICogQHJldHVybiB7U3RyaW5nfVxuXHRcdCAqL1xuXHRcdHdyYXA6IGZ1bmN0aW9uKGFiYnIsIHRleHQsIHN5bnRheCwgcHJvZmlsZSwgY29udGV4dE5vZGUpIHtcblx0XHRcdC8qKiBAdHlwZSBlbW1ldC5maWx0ZXJzICovXG5cdFx0XHR2YXIgZmlsdGVycyA9IHJlcXVpcmUoJ2ZpbHRlcnMnKTtcblx0XHRcdC8qKiBAdHlwZSBlbW1ldC51dGlscyAqL1xuXHRcdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblxuXHRcdFx0c3ludGF4ID0gc3ludGF4IHx8IGVtbWV0LmRlZmF1bHRTeW50YXgoKTtcblx0XHRcdHByb2ZpbGUgPSByZXF1aXJlKCdwcm9maWxlJykuZ2V0KHByb2ZpbGUsIHN5bnRheCk7XG5cblx0XHRcdHJlcXVpcmUoJ3RhYlN0b3BzJykucmVzZXRUYWJzdG9wSW5kZXgoKTtcblxuXHRcdFx0dmFyIGRhdGEgPSBmaWx0ZXJzLmV4dHJhY3RGcm9tQWJicmV2aWF0aW9uKGFiYnIpO1xuXHRcdFx0dmFyIHBhcnNlZFRyZWUgPSByZXF1aXJlKCdhYmJyZXZpYXRpb25QYXJzZXInKS5wYXJzZShkYXRhWzBdLCB7XG5cdFx0XHRcdHN5bnRheDogc3ludGF4LFxuXHRcdFx0XHRwYXN0ZWRDb250ZW50OiB0ZXh0LFxuXHRcdFx0XHRjb250ZXh0Tm9kZTogY29udGV4dE5vZGVcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHBhcnNlZFRyZWUpIHtcblx0XHRcdFx0dmFyIGZpbHRlcnNMaXN0ID0gZmlsdGVycy5jb21wb3NlTGlzdChzeW50YXgsIHByb2ZpbGUsIGRhdGFbMV0pO1xuXHRcdFx0XHRmaWx0ZXJzLmFwcGx5KHBhcnNlZFRyZWUsIGZpbHRlcnNMaXN0LCBwcm9maWxlKTtcblx0XHRcdFx0cmV0dXJuIHV0aWxzLnJlcGxhY2VWYXJpYWJsZXMocGFyc2VkVHJlZS50b1N0cmluZygpKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHR9O1xufSk7LyoqXG4gKiBUb2dnbGVzIEhUTUwgYW5kIENTUyBjb21tZW50cyBkZXBlbmRpbmcgb24gY3VycmVudCBjYXJldCBjb250ZXh0LiBVbmxpa2VcbiAqIHRoZSBzYW1lIGFjdGlvbiBpbiBtb3N0IGVkaXRvcnMsIHRoaXMgYWN0aW9uIHRvZ2dsZXMgY29tbWVudCBvbiBjdXJyZW50bHlcbiAqIG1hdGNoZWQgaXRlbeKAlEhUTUwgdGFnIG9yIENTUyBzZWxlY3RvcuKAlHdoZW4gbm90aGluZyBpcyBzZWxlY3RlZC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqIEBtZW1iZXJPZiBfX3RvZ2dsZUNvbW1lbnRBY3Rpb25cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5lbW1ldC5leGVjKGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0LyoqXG5cdCAqIFRvZ2dsZSBIVE1MIGNvbW1lbnQgb24gY3VycmVudCBzZWxlY3Rpb24gb3IgdGFnXG5cdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3Jcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gUmV0dXJucyA8Y29kZT50cnVlPC9jb2RlPiBpZiBjb21tZW50IHdhcyB0b2dnbGVkXG5cdCAqL1xuXHRmdW5jdGlvbiB0b2dnbGVIVE1MQ29tbWVudChlZGl0b3IpIHtcblx0XHQvKiogQHR5cGUgUmFuZ2UgKi9cblx0XHR2YXIgcmFuZ2UgPSByZXF1aXJlKCdyYW5nZScpLmNyZWF0ZShlZGl0b3IuZ2V0U2VsZWN0aW9uUmFuZ2UoKSk7XG5cdFx0dmFyIGluZm8gPSByZXF1aXJlKCdlZGl0b3JVdGlscycpLm91dHB1dEluZm8oZWRpdG9yKTtcblxuXHRcdGlmICghcmFuZ2UubGVuZ3RoKCkpIHtcblx0XHRcdC8vIG5vIHNlbGVjdGlvbiwgZmluZCBtYXRjaGluZyB0YWdcblx0XHRcdHZhciB0YWcgPSByZXF1aXJlKCdodG1sTWF0Y2hlcicpLnRhZyhpbmZvLmNvbnRlbnQsIGVkaXRvci5nZXRDYXJldFBvcygpKTtcblx0XHRcdGlmICh0YWcpIHsgLy8gZm91bmQgcGFpclxuXHRcdFx0XHRyYW5nZSA9IHRhZy5vdXRlclJhbmdlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBnZW5lcmljQ29tbWVudFRvZ2dsZShlZGl0b3IsICc8IS0tJywgJy0tPicsIHJhbmdlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTaW1wbGUgQ1NTIGNvbW1lbnRpbmdcblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHQgKiBAcmV0dXJuIHtCb29sZWFufSBSZXR1cm5zIDxjb2RlPnRydWU8L2NvZGU+IGlmIGNvbW1lbnQgd2FzIHRvZ2dsZWRcblx0ICovXG5cdGZ1bmN0aW9uIHRvZ2dsZUNTU0NvbW1lbnQoZWRpdG9yKSB7XG5cdFx0LyoqIEB0eXBlIFJhbmdlICovXG5cdFx0dmFyIHJhbmdlID0gcmVxdWlyZSgncmFuZ2UnKS5jcmVhdGUoZWRpdG9yLmdldFNlbGVjdGlvblJhbmdlKCkpO1xuXHRcdHZhciBpbmZvID0gcmVxdWlyZSgnZWRpdG9yVXRpbHMnKS5vdXRwdXRJbmZvKGVkaXRvcik7XG5cblx0XHRpZiAoIXJhbmdlLmxlbmd0aCgpKSB7XG5cdFx0XHQvLyBubyBzZWxlY3Rpb24sIHRyeSB0byBnZXQgY3VycmVudCBydWxlXG5cdFx0XHQvKiogQHR5cGUgQ1NTUnVsZSAqL1xuXHRcdFx0dmFyIHJ1bGUgPSByZXF1aXJlKCdjc3NFZGl0VHJlZScpLnBhcnNlRnJvbVBvc2l0aW9uKGluZm8uY29udGVudCwgZWRpdG9yLmdldENhcmV0UG9zKCkpO1xuXHRcdFx0aWYgKHJ1bGUpIHtcblx0XHRcdFx0dmFyIHByb3BlcnR5ID0gY3NzSXRlbUZyb21Qb3NpdGlvbihydWxlLCBlZGl0b3IuZ2V0Q2FyZXRQb3MoKSk7XG5cdFx0XHRcdHJhbmdlID0gcHJvcGVydHlcblx0XHRcdFx0XHQ/IHByb3BlcnR5LnJhbmdlKHRydWUpXG5cdFx0XHRcdFx0OiByZXF1aXJlKCdyYW5nZScpLmNyZWF0ZShydWxlLm5hbWVSYW5nZSh0cnVlKS5zdGFydCwgcnVsZS5zb3VyY2UpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghcmFuZ2UubGVuZ3RoKCkpIHtcblx0XHRcdC8vIHN0aWxsIG5vIHNlbGVjdGlvbiwgZ2V0IGN1cnJlbnQgbGluZVxuXHRcdFx0cmFuZ2UgPSByZXF1aXJlKCdyYW5nZScpLmNyZWF0ZShlZGl0b3IuZ2V0Q3VycmVudExpbmVSYW5nZSgpKTtcblx0XHRcdHJlcXVpcmUoJ3V0aWxzJykubmFycm93VG9Ob25TcGFjZShpbmZvLmNvbnRlbnQsIHJhbmdlKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZ2VuZXJpY0NvbW1lbnRUb2dnbGUoZWRpdG9yLCAnLyonLCAnKi8nLCByYW5nZSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyBDU1MgcHJvcGVydHkgZnJvbSA8Y29kZT5ydWxlPC9jb2RlPiB0aGF0IG1hdGNoZXMgcGFzc2VkIHBvc2l0aW9uXG5cdCAqIEBwYXJhbSB7RWRpdENvbnRhaW5lcn0gcnVsZVxuXHQgKiBAcGFyYW0ge051bWJlcn0gYWJzUG9zXG5cdCAqIEByZXR1cm5zIHtFZGl0RWxlbWVudH1cblx0ICovXG5cdGZ1bmN0aW9uIGNzc0l0ZW1Gcm9tUG9zaXRpb24ocnVsZSwgYWJzUG9zKSB7XG5cdFx0Ly8gZG8gbm90IHVzZSBkZWZhdWx0IEVkaXRDb250YWluZXIuaXRlbUZyb21Qb3NpdGlvbigpIGhlcmUsIGJlY2F1c2Vcblx0XHQvLyB3ZSBuZWVkIHRvIG1ha2UgYSBmZXcgYXNzdW1wdGlvbnMgdG8gbWFrZSBDU1MgY29tbWVudGluZyBtb3JlIHJlbGlhYmxlXG5cdFx0dmFyIHJlbFBvcyA9IGFic1BvcyAtIChydWxlLm9wdGlvbnMub2Zmc2V0IHx8IDApO1xuXHRcdHZhciByZVNhZmVDaGFyID0gL15bXFxzXFxuXFxyXS87XG5cdFx0cmV0dXJuIF8uZmluZChydWxlLmxpc3QoKSwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0aWYgKGl0ZW0ucmFuZ2UoKS5lbmQgPT09IHJlbFBvcykge1xuXHRcdFx0XHQvLyBhdCB0aGUgZW5kIG9mIHByb3BlcnR5LCBidXQgb3V0c2lkZSBvZiBpdFxuXHRcdFx0XHQvLyBpZiB0aGVyZeKAmXMgYSBzcGFjZSBjaGFyYWN0ZXIgYXQgY3VycmVudCBwb3NpdGlvbixcblx0XHRcdFx0Ly8gdXNlIGN1cnJlbnQgcHJvcGVydHlcblx0XHRcdFx0cmV0dXJuIHJlU2FmZUNoYXIudGVzdChydWxlLnNvdXJjZS5jaGFyQXQocmVsUG9zKSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBpdGVtLnJhbmdlKCkuaW5zaWRlKHJlbFBvcyk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogU2VhcmNoIGZvciBuZWFyZXN0IGNvbW1lbnQgaW4gPGNvZGU+c3RyPC9jb2RlPiwgc3RhcnRpbmcgZnJvbSBpbmRleCA8Y29kZT5mcm9tPC9jb2RlPlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBXaGVyZSB0byBzZWFyY2hcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGZyb20gU2VhcmNoIHN0YXJ0IGluZGV4XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdGFydF90b2tlbiBDb21tZW50IHN0YXJ0IHN0cmluZ1xuXHQgKiBAcGFyYW0ge1N0cmluZ30gZW5kX3Rva2VuIENvbW1lbnQgZW5kIHN0cmluZ1xuXHQgKiBAcmV0dXJuIHtSYW5nZX0gUmV0dXJucyBudWxsIGlmIGNvbW1lbnQgd2Fzbid0IGZvdW5kXG5cdCAqL1xuXHRmdW5jdGlvbiBzZWFyY2hDb21tZW50KHRleHQsIGZyb20sIHN0YXJ0VG9rZW4sIGVuZFRva2VuKSB7XG5cdFx0dmFyIGNvbW1lbnRTdGFydCA9IC0xO1xuXHRcdHZhciBjb21tZW50RW5kID0gLTE7XG5cblx0XHR2YXIgaGFzTWF0Y2ggPSBmdW5jdGlvbihzdHIsIHN0YXJ0KSB7XG5cdFx0XHRyZXR1cm4gdGV4dC5zdWJzdHIoc3RhcnQsIHN0ci5sZW5ndGgpID09IHN0cjtcblx0XHR9O1xuXG5cdFx0Ly8gc2VhcmNoIGZvciBjb21tZW50IHN0YXJ0XG5cdFx0d2hpbGUgKGZyb20tLSkge1xuXHRcdFx0aWYgKGhhc01hdGNoKHN0YXJ0VG9rZW4sIGZyb20pKSB7XG5cdFx0XHRcdGNvbW1lbnRTdGFydCA9IGZyb207XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChjb21tZW50U3RhcnQgIT0gLTEpIHtcblx0XHRcdC8vIHNlYXJjaCBmb3IgY29tbWVudCBlbmRcblx0XHRcdGZyb20gPSBjb21tZW50U3RhcnQ7XG5cdFx0XHR2YXIgY29udGVudExlbiA9IHRleHQubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKGNvbnRlbnRMZW4gPj0gZnJvbSsrKSB7XG5cdFx0XHRcdGlmIChoYXNNYXRjaChlbmRUb2tlbiwgZnJvbSkpIHtcblx0XHRcdFx0XHRjb21tZW50RW5kID0gZnJvbSArIGVuZFRva2VuLmxlbmd0aDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiAoY29tbWVudFN0YXJ0ICE9IC0xICYmIGNvbW1lbnRFbmQgIT0gLTEpXG5cdFx0XHQ/IHJlcXVpcmUoJ3JhbmdlJykuY3JlYXRlKGNvbW1lbnRTdGFydCwgY29tbWVudEVuZCAtIGNvbW1lbnRTdGFydClcblx0XHRcdDogbnVsbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZW5lcmljIGNvbW1lbnQgdG9nZ2xpbmcgcm91dGluZVxuXHQgKiBAcGFyYW0ge0lFbW1ldEVkaXRvcn0gZWRpdG9yXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjb21tZW50U3RhcnQgQ29tbWVudCBzdGFydCB0b2tlblxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY29tbWVudEVuZCBDb21tZW50IGVuZCB0b2tlblxuXHQgKiBAcGFyYW0ge1JhbmdlfSByYW5nZSBTZWxlY3Rpb24gcmFuZ2Vcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIGdlbmVyaWNDb21tZW50VG9nZ2xlKGVkaXRvciwgY29tbWVudFN0YXJ0LCBjb21tZW50RW5kLCByYW5nZSkge1xuXHRcdHZhciBlZGl0b3JVdGlscyA9IHJlcXVpcmUoJ2VkaXRvclV0aWxzJyk7XG5cdFx0dmFyIGNvbnRlbnQgPSBlZGl0b3JVdGlscy5vdXRwdXRJbmZvKGVkaXRvcikuY29udGVudDtcblx0XHR2YXIgY2FyZXRQb3MgPSBlZGl0b3IuZ2V0Q2FyZXRQb3MoKTtcblx0XHR2YXIgbmV3Q29udGVudCA9IG51bGw7XG5cblx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXG5cdFx0LyoqXG5cdFx0ICogUmVtb3ZlIGNvbW1lbnQgbWFya2VycyBmcm9tIHN0cmluZ1xuXHRcdCAqIEBwYXJhbSB7U3Rpbmd9IHN0clxuXHRcdCAqIEByZXR1cm4ge1N0cmluZ31cblx0XHQgKi9cblx0XHRmdW5jdGlvbiByZW1vdmVDb21tZW50KHN0cikge1xuXHRcdFx0cmV0dXJuIHN0clxuXHRcdFx0XHQucmVwbGFjZShuZXcgUmVnRXhwKCdeJyArIHV0aWxzLmVzY2FwZUZvclJlZ2V4cChjb21tZW50U3RhcnQpICsgJ1xcXFxzKicpLCBmdW5jdGlvbihzdHIpe1xuXHRcdFx0XHRcdGNhcmV0UG9zIC09IHN0ci5sZW5ndGg7XG5cdFx0XHRcdFx0cmV0dXJuICcnO1xuXHRcdFx0XHR9KS5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFxzKicgKyB1dGlscy5lc2NhcGVGb3JSZWdleHAoY29tbWVudEVuZCkgKyAnJCcpLCAnJyk7XG5cdFx0fVxuXG5cdFx0Ly8gZmlyc3QsIHdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgdGhpcyBzdWJzdHJpbmcgaXMgbm90IGluc2lkZVxuXHRcdC8vIGNvbW1lbnRcblx0XHR2YXIgY29tbWVudFJhbmdlID0gc2VhcmNoQ29tbWVudChjb250ZW50LCBjYXJldFBvcywgY29tbWVudFN0YXJ0LCBjb21tZW50RW5kKTtcblx0XHRpZiAoY29tbWVudFJhbmdlICYmIGNvbW1lbnRSYW5nZS5vdmVybGFwKHJhbmdlKSkge1xuXHRcdFx0Ly8gd2UncmUgaW5zaWRlIGNvbW1lbnQsIHJlbW92ZSBpdFxuXHRcdFx0cmFuZ2UgPSBjb21tZW50UmFuZ2U7XG5cdFx0XHRuZXdDb250ZW50ID0gcmVtb3ZlQ29tbWVudChyYW5nZS5zdWJzdHJpbmcoY29udGVudCkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBzaG91bGQgYWRkIGNvbW1lbnRcblx0XHRcdC8vIG1ha2Ugc3VyZSB0aGF0IHRoZXJlJ3Mgbm8gY29tbWVudCBpbnNpZGUgc2VsZWN0aW9uXG5cdFx0XHRuZXdDb250ZW50ID0gY29tbWVudFN0YXJ0ICsgJyAnICtcblx0XHRcdFx0cmFuZ2Uuc3Vic3RyaW5nKGNvbnRlbnQpXG5cdFx0XHRcdFx0LnJlcGxhY2UobmV3IFJlZ0V4cCh1dGlscy5lc2NhcGVGb3JSZWdleHAoY29tbWVudFN0YXJ0KSArICdcXFxccyp8XFxcXHMqJyArIHV0aWxzLmVzY2FwZUZvclJlZ2V4cChjb21tZW50RW5kKSwgJ2cnKSwgJycpICtcblx0XHRcdFx0JyAnICsgY29tbWVudEVuZDtcblxuXHRcdFx0Ly8gYWRqdXN0IGNhcmV0IHBvc2l0aW9uXG5cdFx0XHRjYXJldFBvcyArPSBjb21tZW50U3RhcnQubGVuZ3RoICsgMTtcblx0XHR9XG5cblx0XHQvLyByZXBsYWNlIGVkaXRvciBjb250ZW50XG5cdFx0aWYgKG5ld0NvbnRlbnQgIT09IG51bGwpIHtcblx0XHRcdG5ld0NvbnRlbnQgPSB1dGlscy5lc2NhcGVUZXh0KG5ld0NvbnRlbnQpO1xuXHRcdFx0ZWRpdG9yLnNldENhcmV0UG9zKHJhbmdlLnN0YXJ0KTtcblx0XHRcdGVkaXRvci5yZXBsYWNlQ29udGVudChlZGl0b3JVdGlscy51bmluZGVudChlZGl0b3IsIG5ld0NvbnRlbnQpLCByYW5nZS5zdGFydCwgcmFuZ2UuZW5kKTtcblx0XHRcdGVkaXRvci5zZXRDYXJldFBvcyhjYXJldFBvcyk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogVG9nZ2xlIGNvbW1lbnQgb24gY3VycmVudCBlZGl0b3IncyBzZWxlY3Rpb24gb3IgSFRNTCB0YWcvQ1NTIHJ1bGVcblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHQgKi9cblx0cmVxdWlyZSgnYWN0aW9ucycpLmFkZCgndG9nZ2xlX2NvbW1lbnQnLCBmdW5jdGlvbihlZGl0b3IpIHtcblx0XHR2YXIgaW5mbyA9IHJlcXVpcmUoJ2VkaXRvclV0aWxzJykub3V0cHV0SW5mbyhlZGl0b3IpO1xuXHRcdGlmIChpbmZvLnN5bnRheCA9PSAnY3NzJykge1xuXHRcdFx0Ly8gaW4gY2FzZSBvdXIgZWRpdG9yIGlzIGdvb2QgZW5vdWdoIGFuZCBjYW4gcmVjb2duaXplIHN5bnRheCBmcm9tXG5cdFx0XHQvLyBjdXJyZW50IHRva2VuLCB3ZSBoYXZlIHRvIG1ha2Ugc3VyZSB0aGF0IGN1cnNvciBpcyBub3QgaW5zaWRlXG5cdFx0XHQvLyAnc3R5bGUnIGF0dHJpYnV0ZSBvZiBodG1sIGVsZW1lbnRcblx0XHRcdHZhciBjYXJldFBvcyA9IGVkaXRvci5nZXRDYXJldFBvcygpO1xuXHRcdFx0dmFyIHRhZyA9IHJlcXVpcmUoJ2h0bWxNYXRjaGVyJykudGFnKGluZm8uY29udGVudCwgY2FyZXRQb3MpO1xuXHRcdFx0aWYgKHRhZyAmJiB0YWcub3Blbi5yYW5nZS5pbnNpZGUoY2FyZXRQb3MpKSB7XG5cdFx0XHRcdGluZm8uc3ludGF4ID0gJ2h0bWwnO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChpbmZvLnN5bnRheCA9PSAnY3NzJylcblx0XHRcdHJldHVybiB0b2dnbGVDU1NDb21tZW50KGVkaXRvcik7XG5cblx0XHRyZXR1cm4gdG9nZ2xlSFRNTENvbW1lbnQoZWRpdG9yKTtcblx0fSk7XG59KTsvKipcbiAqIE1vdmUgYmV0d2VlbiBuZXh0L3ByZXYgZWRpdCBwb2ludHMuICdFZGl0IHBvaW50cycgYXJlIHBsYWNlcyBiZXR3ZWVuIHRhZ3NcbiAqIGFuZCBxdW90ZXMgb2YgZW1wdHkgYXR0cmlidXRlcyBpbiBodG1sXG4gKiBAY29uc3RydWN0b3JcbiAqXG4gKiBAbWVtYmVyT2YgX19lZGl0UG9pbnRBY3Rpb25EZWZpbmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlcXVpcmVcbiAqIEBwYXJhbSB7VW5kZXJzY29yZX0gX1xuICovXG5lbW1ldC5leGVjKGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0LyoqXG5cdCAqIFNlYXJjaCBmb3IgbmV3IGNhcmV0IGluc2VydGlvbiBwb2ludFxuXHQgKiBAcGFyYW0ge0lFbW1ldEVkaXRvcn0gZWRpdG9yIEVkaXRvciBpbnN0YW5jZVxuXHQgKiBAcGFyYW0ge051bWJlcn0gaW5jIFNlYXJjaCBpbmNyZW1lbnQ6IC0xIOKAlCBzZWFyY2ggbGVmdCwgMSDigJQgc2VhcmNoIHJpZ2h0XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgSW5pdGlhbCBvZmZzZXQgcmVsYXRpdmUgdG8gY3VycmVudCBjYXJldCBwb3NpdGlvblxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IFJldHVybnMgLTEgaWYgaW5zZXJ0aW9uIHBvaW50IHdhc24ndCBmb3VuZFxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZE5ld0VkaXRQb2ludChlZGl0b3IsIGluYywgb2Zmc2V0KSB7XG5cdFx0aW5jID0gaW5jIHx8IDE7XG5cdFx0b2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cblx0XHR2YXIgY3VyUG9pbnQgPSBlZGl0b3IuZ2V0Q2FyZXRQb3MoKSArIG9mZnNldDtcblx0XHR2YXIgY29udGVudCA9IFN0cmluZyhlZGl0b3IuZ2V0Q29udGVudCgpKTtcblx0XHR2YXIgbWF4TGVuID0gY29udGVudC5sZW5ndGg7XG5cdFx0dmFyIG5leHRQb2ludCA9IC0xO1xuXHRcdHZhciByZUVtcHR5TGluZSA9IC9eXFxzKyQvO1xuXG5cdFx0ZnVuY3Rpb24gZ2V0TGluZShpeCkge1xuXHRcdFx0dmFyIHN0YXJ0ID0gaXg7XG5cdFx0XHR3aGlsZSAoc3RhcnQgPj0gMCkge1xuXHRcdFx0XHR2YXIgYyA9IGNvbnRlbnQuY2hhckF0KHN0YXJ0KTtcblx0XHRcdFx0aWYgKGMgPT0gJ1xcbicgfHwgYyA9PSAnXFxyJylcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0c3RhcnQtLTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKHN0YXJ0LCBpeCk7XG5cdFx0fVxuXG5cdFx0d2hpbGUgKGN1clBvaW50IDw9IG1heExlbiAmJiBjdXJQb2ludCA+PSAwKSB7XG5cdFx0XHRjdXJQb2ludCArPSBpbmM7XG5cdFx0XHR2YXIgY3VyQ2hhciA9IGNvbnRlbnQuY2hhckF0KGN1clBvaW50KTtcblx0XHRcdHZhciBuZXh0Q2hhciA9IGNvbnRlbnQuY2hhckF0KGN1clBvaW50ICsgMSk7XG5cdFx0XHR2YXIgcHJldkNoYXIgPSBjb250ZW50LmNoYXJBdChjdXJQb2ludCAtIDEpO1xuXG5cdFx0XHRzd2l0Y2ggKGN1ckNoYXIpIHtcblx0XHRcdFx0Y2FzZSAnXCInOlxuXHRcdFx0XHRjYXNlICdcXCcnOlxuXHRcdFx0XHRcdGlmIChuZXh0Q2hhciA9PSBjdXJDaGFyICYmIHByZXZDaGFyID09ICc9Jykge1xuXHRcdFx0XHRcdFx0Ly8gZW1wdHkgYXR0cmlidXRlXG5cdFx0XHRcdFx0XHRuZXh0UG9pbnQgPSBjdXJQb2ludCArIDE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICc+Jzpcblx0XHRcdFx0XHRpZiAobmV4dENoYXIgPT0gJzwnKSB7XG5cdFx0XHRcdFx0XHQvLyBiZXR3ZWVuIHRhZ3Ncblx0XHRcdFx0XHRcdG5leHRQb2ludCA9IGN1clBvaW50ICsgMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ1xcbic6XG5cdFx0XHRcdGNhc2UgJ1xccic6XG5cdFx0XHRcdFx0Ly8gZW1wdHkgbGluZVxuXHRcdFx0XHRcdGlmIChyZUVtcHR5TGluZS50ZXN0KGdldExpbmUoY3VyUG9pbnQgLSAxKSkpIHtcblx0XHRcdFx0XHRcdG5leHRQb2ludCA9IGN1clBvaW50O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblxuXHRcdFx0aWYgKG5leHRQb2ludCAhPSAtMSlcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG5leHRQb2ludDtcblx0fVxuXG5cdC8qKiBAdHlwZSBlbW1ldC5hY3Rpb25zICovXG5cdHZhciBhY3Rpb25zID0gcmVxdWlyZSgnYWN0aW9ucycpO1xuXG5cdC8qKlxuXHQgKiBNb3ZlIGNhcmV0IHRvIHByZXZpb3VzIGVkaXQgcG9pbnRcblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvciBFZGl0b3IgaW5zdGFuY2Vcblx0ICovXG5cdGFjdGlvbnMuYWRkKCdwcmV2X2VkaXRfcG9pbnQnLCBmdW5jdGlvbihlZGl0b3IpIHtcblx0XHR2YXIgY3VyUG9zID0gZWRpdG9yLmdldENhcmV0UG9zKCk7XG5cdFx0dmFyIG5ld1BvaW50ID0gZmluZE5ld0VkaXRQb2ludChlZGl0b3IsIC0xKTtcblxuXHRcdGlmIChuZXdQb2ludCA9PSBjdXJQb3MpXG5cdFx0XHQvLyB3ZSdyZSBzdGlsbCBpbiB0aGUgc2FtZSBwb2ludCwgdHJ5IHNlYXJjaGluZyBmcm9tIHRoZSBvdGhlciBwbGFjZVxuXHRcdFx0bmV3UG9pbnQgPSBmaW5kTmV3RWRpdFBvaW50KGVkaXRvciwgLTEsIC0yKTtcblxuXHRcdGlmIChuZXdQb2ludCAhPSAtMSkge1xuXHRcdFx0ZWRpdG9yLnNldENhcmV0UG9zKG5ld1BvaW50KTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSwge2xhYmVsOiAnUHJldmlvdXMgRWRpdCBQb2ludCd9KTtcblxuXHQvKipcblx0ICogTW92ZSBjYXJldCB0byBuZXh0IGVkaXQgcG9pbnRcblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvciBFZGl0b3IgaW5zdGFuY2Vcblx0ICovXG5cdGFjdGlvbnMuYWRkKCduZXh0X2VkaXRfcG9pbnQnLCBmdW5jdGlvbihlZGl0b3IpIHtcblx0XHR2YXIgbmV3UG9pbnQgPSBmaW5kTmV3RWRpdFBvaW50KGVkaXRvciwgMSk7XG5cdFx0aWYgKG5ld1BvaW50ICE9IC0xKSB7XG5cdFx0XHRlZGl0b3Iuc2V0Q2FyZXRQb3MobmV3UG9pbnQpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcbn0pOy8qKlxuICogQWN0aW9ucyB0aGF0IHVzZSBzdHJlYW0gcGFyc2VycyBhbmQgdG9rZW5pemVycyBmb3IgdHJhdmVyc2luZzpcbiAqIC0tIFNlYXJjaCBmb3IgbmV4dC9wcmV2aW91cyBpdGVtcyBpbiBIVE1MXG4gKiAtLSBTZWFyY2ggZm9yIG5leHQvcHJldmlvdXMgaXRlbXMgaW4gQ1NTXG4gKiBAY29uc3RydWN0b3JcbiAqIEBtZW1iZXJPZiBfX3NlbGVjdEl0ZW1BY3Rpb25EZWZpbmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlcXVpcmVcbiAqIEBwYXJhbSB7VW5kZXJzY29yZX0gX1xuICovXG5lbW1ldC5leGVjKGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0dmFyIHN0YXJ0VGFnID0gL148KFtcXHdcXDpcXC1dKykoKD86XFxzK1tcXHdcXC06XSsoPzpcXHMqPVxccyooPzooPzpcIlteXCJdKlwiKXwoPzonW14nXSonKXxbXj5cXHNdKykpPykqKVxccyooXFwvPyk+LztcblxuXHQvKipcblx0ICogR2VuZXJpYyBmdW5jdGlvbiBmb3Igc2VhcmNoaW5nIGZvciBpdGVtcyB0byBzZWxlY3Rcblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGlzQmFja3dhcmQgU2VhcmNoIGJhY2t3YXJkIChzZWFyY2ggZm9yd2FyZCBvdGhlcndpc2UpXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGV4dHJhY3RGbiBGdW5jdGlvbiB0aGF0IGV4dHJhY3RzIGl0ZW0gY29udGVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSByYW5nZUZuIEZ1bmN0aW9uIHRoYXQgc2VhcmNoIGZvciBuZXh0IHRva2VuIHJhbmdlXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kSXRlbShlZGl0b3IsIGlzQmFja3dhcmQsIGV4dHJhY3RGbiwgcmFuZ2VGbikge1xuXHRcdHZhciByYW5nZSA9IHJlcXVpcmUoJ3JhbmdlJyk7XG5cdFx0dmFyIGNvbnRlbnQgPSByZXF1aXJlKCdlZGl0b3JVdGlscycpLm91dHB1dEluZm8oZWRpdG9yKS5jb250ZW50O1xuXG5cdFx0dmFyIGNvbnRlbnRMZW5ndGggPSBjb250ZW50Lmxlbmd0aDtcblx0XHR2YXIgaXRlbVJhbmdlLCBybmc7XG5cdFx0LyoqIEB0eXBlIFJhbmdlICovXG5cdFx0dmFyIHByZXZSYW5nZSA9IHJhbmdlLmNyZWF0ZSgtMSwgMCk7XG5cdFx0LyoqIEB0eXBlIFJhbmdlICovXG5cdFx0dmFyIHNlbCA9IHJhbmdlLmNyZWF0ZShlZGl0b3IuZ2V0U2VsZWN0aW9uUmFuZ2UoKSk7XG5cblx0XHR2YXIgc2VhcmNoUG9zID0gc2VsLnN0YXJ0LCBsb29wID0gMTAwMDAwOyAvLyBlbmRsZXNzIGxvb3AgcHJvdGVjdGlvblxuXHRcdHdoaWxlIChzZWFyY2hQb3MgPj0gMCAmJiBzZWFyY2hQb3MgPCBjb250ZW50TGVuZ3RoICYmIC0tbG9vcCA+IDApIHtcblx0XHRcdGlmICggKGl0ZW1SYW5nZSA9IGV4dHJhY3RGbihjb250ZW50LCBzZWFyY2hQb3MsIGlzQmFja3dhcmQpKSApIHtcblx0XHRcdFx0aWYgKHByZXZSYW5nZS5lcXVhbChpdGVtUmFuZ2UpKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRwcmV2UmFuZ2UgPSBpdGVtUmFuZ2UuY2xvbmUoKTtcblx0XHRcdFx0cm5nID0gcmFuZ2VGbihpdGVtUmFuZ2Uuc3Vic3RyaW5nKGNvbnRlbnQpLCBpdGVtUmFuZ2Uuc3RhcnQsIHNlbC5jbG9uZSgpKTtcblxuXHRcdFx0XHRpZiAocm5nKSB7XG5cdFx0XHRcdFx0ZWRpdG9yLmNyZWF0ZVNlbGVjdGlvbihybmcuc3RhcnQsIHJuZy5lbmQpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlYXJjaFBvcyA9IGlzQmFja3dhcmQgPyBpdGVtUmFuZ2Uuc3RhcnQgOiBpdGVtUmFuZ2UuZW5kIC0gMTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRzZWFyY2hQb3MgKz0gaXNCYWNrd2FyZCA/IC0xIDogMTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvLyBYWFggSFRNTCBzZWN0aW9uXG5cblx0LyoqXG5cdCAqIEZpbmQgbmV4dCBIVE1MIGl0ZW1cblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZE5leHRIVE1MSXRlbShlZGl0b3IpIHtcblx0XHR2YXIgaXNGaXJzdCA9IHRydWU7XG5cdFx0cmV0dXJuIGZpbmRJdGVtKGVkaXRvciwgZmFsc2UsIGZ1bmN0aW9uKGNvbnRlbnQsIHNlYXJjaFBvcyl7XG5cdFx0XHRpZiAoaXNGaXJzdCkge1xuXHRcdFx0XHRpc0ZpcnN0ID0gZmFsc2U7XG5cdFx0XHRcdHJldHVybiBmaW5kT3BlbmluZ1RhZ0Zyb21Qb3NpdGlvbihjb250ZW50LCBzZWFyY2hQb3MpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGdldE9wZW5pbmdUYWdGcm9tUG9zaXRpb24oY29udGVudCwgc2VhcmNoUG9zKTtcblx0XHRcdH1cblx0XHR9LCBmdW5jdGlvbih0YWcsIG9mZnNldCwgc2VsUmFuZ2UpIHtcblx0XHRcdHJldHVybiBnZXRSYW5nZUZvckhUTUxJdGVtKHRhZywgb2Zmc2V0LCBzZWxSYW5nZSwgZmFsc2UpO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEZpbmQgcHJldmlvdXMgSFRNTCBpdGVtXG5cdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIGZpbmRQcmV2SFRNTEl0ZW0oZWRpdG9yKSB7XG5cdFx0cmV0dXJuIGZpbmRJdGVtKGVkaXRvciwgdHJ1ZSwgZ2V0T3BlbmluZ1RhZ0Zyb21Qb3NpdGlvbiwgZnVuY3Rpb24gKHRhZywgb2Zmc2V0LCBzZWxSYW5nZSkge1xuXHRcdFx0cmV0dXJuIGdldFJhbmdlRm9ySFRNTEl0ZW0odGFnLCBvZmZzZXQsIHNlbFJhbmdlLCB0cnVlKTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIHBvc3NpYmxlIHNlbGVjdGlvbiByYW5nZXMgZm9yIEhUTUwgdGFnXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzb3VyY2UgT3JpZ2luYWwgSFRNTCBzb3VyY2UgZm9yIHRva2Vuc1xuXHQgKiBAcGFyYW0ge0FycmF5fSB0b2tlbnMgTGlzdCBvZiBIVE1MIHRva2Vuc1xuXHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAqL1xuXHRmdW5jdGlvbiBtYWtlUG9zc2libGVSYW5nZXNIVE1MKHNvdXJjZSwgdG9rZW5zLCBvZmZzZXQpIHtcblx0XHRvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblx0XHR2YXIgcmFuZ2UgPSByZXF1aXJlKCdyYW5nZScpO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR2YXIgYXR0clN0YXJ0ID0gLTEsIGF0dHJOYW1lID0gJycsIGF0dHJWYWx1ZSA9ICcnLCBhdHRyVmFsdWVSYW5nZSwgdGFnTmFtZTtcblx0XHRfLmVhY2godG9rZW5zLCBmdW5jdGlvbih0b2spIHtcblx0XHRcdHN3aXRjaCAodG9rLnR5cGUpIHtcblx0XHRcdFx0Y2FzZSAndGFnJzpcblx0XHRcdFx0XHR0YWdOYW1lID0gc291cmNlLnN1YnN0cmluZyh0b2suc3RhcnQsIHRvay5lbmQpO1xuXHRcdFx0XHRcdGlmICgvXjxbXFx3XFw6XFwtXS8udGVzdCh0YWdOYW1lKSkge1xuXHRcdFx0XHRcdFx0Ly8gYWRkIHRhZyBuYW1lXG5cdFx0XHRcdFx0XHRyZXN1bHQucHVzaChyYW5nZS5jcmVhdGUoe1xuXHRcdFx0XHRcdFx0XHRzdGFydDogdG9rLnN0YXJ0ICsgMSxcblx0XHRcdFx0XHRcdFx0ZW5kOiB0b2suZW5kXG5cdFx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdhdHRyaWJ1dGUnOlxuXHRcdFx0XHRcdGF0dHJTdGFydCA9IHRvay5zdGFydDtcblx0XHRcdFx0XHRhdHRyTmFtZSA9IHNvdXJjZS5zdWJzdHJpbmcodG9rLnN0YXJ0LCB0b2suZW5kKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdzdHJpbmcnOlxuXHRcdFx0XHRcdC8vIGF0dHJpYnV0ZSB2YWx1ZVxuXHRcdFx0XHRcdC8vIHB1c2ggZnVsbCBhdHRyaWJ1dGUgZmlyc3Rcblx0XHRcdFx0XHQgcmVzdWx0LnB1c2gocmFuZ2UuY3JlYXRlKGF0dHJTdGFydCwgdG9rLmVuZCAtIGF0dHJTdGFydCkpO1xuXG5cdFx0XHRcdFx0IGF0dHJWYWx1ZVJhbmdlID0gcmFuZ2UuY3JlYXRlKHRvayk7XG5cdFx0XHRcdFx0IGF0dHJWYWx1ZSA9IGF0dHJWYWx1ZVJhbmdlLnN1YnN0cmluZyhzb3VyY2UpO1xuXG5cdFx0XHRcdFx0IC8vIGlzIHRoaXMgYSBxdW90ZWQgYXR0cmlidXRlP1xuXHRcdFx0XHRcdCBpZiAoaXNRdW90ZShhdHRyVmFsdWUuY2hhckF0KDApKSlcblx0XHRcdFx0XHRcdCBhdHRyVmFsdWVSYW5nZS5zdGFydCsrO1xuXG5cdFx0XHRcdFx0IGlmIChpc1F1b3RlKGF0dHJWYWx1ZS5jaGFyQXQoYXR0clZhbHVlLmxlbmd0aCAtIDEpKSlcblx0XHRcdFx0XHRcdCBhdHRyVmFsdWVSYW5nZS5lbmQtLTtcblxuXHRcdFx0XHRcdCByZXN1bHQucHVzaChhdHRyVmFsdWVSYW5nZSk7XG5cblx0XHRcdFx0XHQgaWYgKGF0dHJOYW1lID09ICdjbGFzcycpIHtcblx0XHRcdFx0XHRcdCByZXN1bHQgPSByZXN1bHQuY29uY2F0KGNsYXNzTmFtZVJhbmdlcyhhdHRyVmFsdWVSYW5nZS5zdWJzdHJpbmcoc291cmNlKSwgYXR0clZhbHVlUmFuZ2Uuc3RhcnQpKTtcblx0XHRcdFx0XHQgfVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBvZmZzZXQgcmFuZ2VzXG5cdFx0Xy5lYWNoKHJlc3VsdCwgZnVuY3Rpb24ocikge1xuXHRcdFx0ci5zaGlmdChvZmZzZXQpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIF8uY2hhaW4ocmVzdWx0KVxuXHRcdFx0LmZpbHRlcihmdW5jdGlvbihpdGVtKSB7ICAgICAgICAvLyByZW1vdmUgZW1wdHlcblx0XHRcdFx0cmV0dXJuICEhaXRlbS5sZW5ndGgoKTtcblx0XHRcdH0pXG5cdFx0XHQudW5pcShmYWxzZSwgZnVuY3Rpb24oaXRlbSkgeyAgIC8vIHJlbW92ZSBkdXBsaWNhdGVzXG5cdFx0XHRcdHJldHVybiBpdGVtLnRvU3RyaW5nKCk7XG5cdFx0XHR9KVxuXHRcdFx0LnZhbHVlKCk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyByYW5nZXMgb2YgY2xhc3MgbmFtZXMgaW4gXCJjbGFzc1wiIGF0dHJpYnV0ZSB2YWx1ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lXG5cdCAqIEByZXR1cm5zIHtBcnJheX1cblx0ICovXG5cdGZ1bmN0aW9uIGNsYXNzTmFtZVJhbmdlcyhjbGFzc05hbWUsIG9mZnNldCkge1xuXHRcdG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHQvKiogQHR5cGUgU3RyaW5nU3RyZWFtICovXG5cdFx0dmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmluZ1N0cmVhbScpLmNyZWF0ZShjbGFzc05hbWUpO1xuXHRcdHZhciByYW5nZSA9IHJlcXVpcmUoJ3JhbmdlJyk7XG5cblx0XHQvLyBza2lwIHdoaXRlc3BhY2Vcblx0XHRzdHJlYW0uZWF0U3BhY2UoKTtcblx0XHRzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuXG5cdFx0dmFyIGNoO1xuXHRcdHdoaWxlIChjaCA9IHN0cmVhbS5uZXh0KCkpIHtcblx0XHRcdGlmICgvW1xcc1xcdTAwYTBdLy50ZXN0KGNoKSkge1xuXHRcdFx0XHRyZXN1bHQucHVzaChyYW5nZS5jcmVhdGUoc3RyZWFtLnN0YXJ0ICsgb2Zmc2V0LCBzdHJlYW0ucG9zIC0gc3RyZWFtLnN0YXJ0IC0gMSkpO1xuXHRcdFx0XHRzdHJlYW0uZWF0U3BhY2UoKTtcblx0XHRcdFx0c3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXN1bHQucHVzaChyYW5nZS5jcmVhdGUoc3RyZWFtLnN0YXJ0ICsgb2Zmc2V0LCBzdHJlYW0ucG9zIC0gc3RyZWFtLnN0YXJ0KSk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIGJlc3QgSFRNTCB0YWcgcmFuZ2UgbWF0Y2ggZm9yIGN1cnJlbnQgc2VsZWN0aW9uXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0YWcgVGFnIGRlY2xhcmF0aW9uXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgVGFnJ3MgcG9zaXRpb24gaW5kZXggaW5zaWRlIGNvbnRlbnRcblx0ICogQHBhcmFtIHtSYW5nZX0gc2VsUmFuZ2UgU2VsZWN0aW9uIHJhbmdlXG5cdCAqIEByZXR1cm4ge1JhbmdlfSBSZXR1cm5zIHJhbmdlIGlmIG5leHQgaXRlbSB3YXMgZm91bmQsIDxjb2RlPm51bGw8L2NvZGU+IG90aGVyd2lzZVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UmFuZ2VGb3JIVE1MSXRlbSh0YWcsIG9mZnNldCwgc2VsUmFuZ2UsIGlzQmFja3dhcmQpIHtcblx0XHR2YXIgcmFuZ2VzID0gbWFrZVBvc3NpYmxlUmFuZ2VzSFRNTCh0YWcsIHJlcXVpcmUoJ3htbFBhcnNlcicpLnBhcnNlKHRhZyksIG9mZnNldCk7XG5cblx0XHRpZiAoaXNCYWNrd2FyZClcblx0XHRcdHJhbmdlcy5yZXZlcnNlKCk7XG5cblx0XHQvLyB0cnkgdG8gZmluZCBzZWxlY3RlZCByYW5nZVxuXHRcdHZhciBjdXJSYW5nZSA9IF8uZmluZChyYW5nZXMsIGZ1bmN0aW9uKHIpIHtcblx0XHRcdHJldHVybiByLmVxdWFsKHNlbFJhbmdlKTtcblx0XHR9KTtcblxuXHRcdGlmIChjdXJSYW5nZSkge1xuXHRcdFx0dmFyIGl4ID0gXy5pbmRleE9mKHJhbmdlcywgY3VyUmFuZ2UpO1xuXHRcdFx0aWYgKGl4IDwgcmFuZ2VzLmxlbmd0aCAtIDEpXG5cdFx0XHRcdHJldHVybiByYW5nZXNbaXggKyAxXTtcblxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gbm8gc2VsZWN0ZWQgcmFuZ2UsIGZpbmQgbmVhcmVzdCBvbmVcblx0XHRpZiAoaXNCYWNrd2FyZClcblx0XHRcdC8vIHNlYXJjaCBiYWNrd2FyZFxuXHRcdFx0cmV0dXJuIF8uZmluZChyYW5nZXMsIGZ1bmN0aW9uKHIpIHtcblx0XHRcdFx0cmV0dXJuIHIuc3RhcnQgPCBzZWxSYW5nZS5zdGFydDtcblx0XHRcdH0pO1xuXG5cdFx0Ly8gc2VhcmNoIGZvcndhcmRcblx0XHQvLyB0byBkZWFsIHdpdGggb3ZlcmxhcHBpbmcgcmFuZ2VzIChsaWtlIGZ1bGwgYXR0cmlidXRlIGRlZmluaXRpb25cblx0XHQvLyBhbmQgYXR0cmlidXRlIHZhbHVlKSBsZXQncyBmaW5kIHJhbmdlIHVuZGVyIGNhcmV0IGZpcnN0XG5cdFx0aWYgKCFjdXJSYW5nZSkge1xuXHRcdFx0dmFyIG1hdGNoZWRSYW5nZXMgPSBfLmZpbHRlcihyYW5nZXMsIGZ1bmN0aW9uKHIpIHtcblx0XHRcdFx0cmV0dXJuIHIuaW5zaWRlKHNlbFJhbmdlLmVuZCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKG1hdGNoZWRSYW5nZXMubGVuZ3RoID4gMSlcblx0XHRcdFx0cmV0dXJuIG1hdGNoZWRSYW5nZXNbMV07XG5cdFx0fVxuXG5cblx0XHRyZXR1cm4gXy5maW5kKHJhbmdlcywgZnVuY3Rpb24ocikge1xuXHRcdFx0cmV0dXJuIHIuZW5kID4gc2VsUmFuZ2UuZW5kO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNlYXJjaCBmb3Igb3BlbmluZyB0YWcgaW4gY29udGVudCwgc3RhcnRpbmcgYXQgc3BlY2lmaWVkIHBvc2l0aW9uXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBodG1sIFdoZXJlIHRvIHNlYXJjaCB0YWdcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvcyBDaGFyYWN0ZXIgaW5kZXggd2hlcmUgdG8gc3RhcnQgc2VhcmNoaW5nXG5cdCAqIEByZXR1cm4ge1JhbmdlfSBSZXR1cm5zIHJhbmdlIGlmIHZhbGlkIG9wZW5pbmcgdGFnIHdhcyBmb3VuZCxcblx0ICogPGNvZGU+bnVsbDwvY29kZT4gb3RoZXJ3aXNlXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kT3BlbmluZ1RhZ0Zyb21Qb3NpdGlvbihodG1sLCBwb3MpIHtcblx0XHR2YXIgdGFnO1xuXHRcdHdoaWxlIChwb3MgPj0gMCkge1xuXHRcdFx0aWYgKHRhZyA9IGdldE9wZW5pbmdUYWdGcm9tUG9zaXRpb24oaHRtbCwgcG9zKSlcblx0XHRcdFx0cmV0dXJuIHRhZztcblx0XHRcdHBvcy0tO1xuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBodG1sIFdoZXJlIHRvIHNlYXJjaCB0YWdcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvcyBDaGFyYWN0ZXIgaW5kZXggd2hlcmUgdG8gc3RhcnQgc2VhcmNoaW5nXG5cdCAqIEByZXR1cm4ge1JhbmdlfSBSZXR1cm5zIHJhbmdlIGlmIHZhbGlkIG9wZW5pbmcgdGFnIHdhcyBmb3VuZCxcblx0ICogPGNvZGU+bnVsbDwvY29kZT4gb3RoZXJ3aXNlXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRPcGVuaW5nVGFnRnJvbVBvc2l0aW9uKGh0bWwsIHBvcykge1xuXHRcdHZhciBtO1xuXHRcdGlmIChodG1sLmNoYXJBdChwb3MpID09ICc8JyAmJiAobSA9IGh0bWwuc3Vic3RyaW5nKHBvcywgaHRtbC5sZW5ndGgpLm1hdGNoKHN0YXJ0VGFnKSkpIHtcblx0XHRcdHJldHVybiByZXF1aXJlKCdyYW5nZScpLmNyZWF0ZShwb3MsIG1bMF0pO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGlzUXVvdGUoY2gpIHtcblx0XHRyZXR1cm4gY2ggPT0gJ1wiJyB8fCBjaCA9PSBcIidcIjtcblx0fVxuXG5cdC8qKlxuXHQgKiBNYWtlcyBhbGwgcG9zc2libGUgc2VsZWN0aW9uIHJhbmdlcyBmb3Igc3BlY2lmaWVkIENTUyBwcm9wZXJ0eVxuXHQgKiBAcGFyYW0ge0NTU1Byb3BlcnR5fSBwcm9wZXJ0eVxuXHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAqL1xuXHRmdW5jdGlvbiBtYWtlUG9zc2libGVSYW5nZXNDU1MocHJvcGVydHkpIHtcblx0XHQvLyBmaW5kIGFsbCBwb3NzaWJsZSByYW5nZXMsIHNvcnRlZCBieSBwb3NpdGlvbiBhbmQgc2l6ZVxuXHRcdHZhciB2YWx1ZVJhbmdlID0gcHJvcGVydHkudmFsdWVSYW5nZSh0cnVlKTtcblx0XHR2YXIgcmVzdWx0ID0gW3Byb3BlcnR5LnJhbmdlKHRydWUpLCB2YWx1ZVJhbmdlXTtcblx0XHR2YXIgc3RyaW5nU3RyZWFtID0gcmVxdWlyZSgnc3RyaW5nU3RyZWFtJyk7XG5cdFx0dmFyIGNzc0VkaXRUcmVlID0gcmVxdWlyZSgnY3NzRWRpdFRyZWUnKTtcblx0XHR2YXIgcmFuZ2UgPSByZXF1aXJlKCdyYW5nZScpO1xuXG5cdFx0Ly8gbG9jYXRlIHBhcnRzIG9mIGNvbXBsZXggdmFsdWVzLlxuXHRcdC8vIHNvbWUgZXhhbXBsZXM6XG5cdFx0Ly8g4oCTIDFweCBzb2xpZCByZWQ6IDMgcGFydHNcblx0XHQvLyDigJMgYXJpYWwsIHNhbnMtc2VyaWY6IGVudW1lcmF0aW9uLCAyIHBhcnRzXG5cdFx0Ly8g4oCTIHVybChpbWFnZS5wbmcpOiBmdW5jdGlvbiB2YWx1ZSBwYXJ0XG5cdFx0dmFyIHZhbHVlID0gcHJvcGVydHkudmFsdWUoKTtcblx0XHRfLmVhY2gocHJvcGVydHkudmFsdWVQYXJ0cygpLCBmdW5jdGlvbihyKSB7XG5cdFx0XHQvLyBhZGQgYWJzb2x1dGUgcmFuZ2Vcblx0XHRcdHZhciBjbG9uZSA9IHIuY2xvbmUoKTtcblx0XHRcdHJlc3VsdC5wdXNoKGNsb25lLnNoaWZ0KHZhbHVlUmFuZ2Uuc3RhcnQpKTtcblxuXHRcdFx0LyoqIEB0eXBlIFN0cmluZ1N0cmVhbSAqL1xuXHRcdFx0dmFyIHN0cmVhbSA9IHN0cmluZ1N0cmVhbS5jcmVhdGUoci5zdWJzdHJpbmcodmFsdWUpKTtcblx0XHRcdGlmIChzdHJlYW0ubWF0Y2goL15bXFx3XFwtXStcXCgvLCB0cnVlKSkge1xuXHRcdFx0XHQvLyB3ZSBoYXZlIGEgZnVuY3Rpb24sIGZpbmQgdmFsdWVzIGluIGl0LlxuXHRcdFx0XHQvLyBidXQgZmlyc3QgYWRkIGZ1bmN0aW9uIGNvbnRlbnRzXG5cdFx0XHRcdHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG5cdFx0XHRcdHN0cmVhbS5za2lwVG9QYWlyKCcoJywgJyknKTtcblx0XHRcdFx0dmFyIGZuQm9keSA9IHN0cmVhbS5jdXJyZW50KCk7XG5cdFx0XHRcdHJlc3VsdC5wdXNoKHJhbmdlLmNyZWF0ZShjbG9uZS5zdGFydCArIHN0cmVhbS5zdGFydCwgZm5Cb2R5KSk7XG5cblx0XHRcdFx0Ly8gZmluZCBwYXJ0c1xuXHRcdFx0XHRfLmVhY2goY3NzRWRpdFRyZWUuZmluZFBhcnRzKGZuQm9keSksIGZ1bmN0aW9uKHBhcnQpIHtcblx0XHRcdFx0XHRyZXN1bHQucHVzaChyYW5nZS5jcmVhdGUoY2xvbmUuc3RhcnQgKyBzdHJlYW0uc3RhcnQgKyBwYXJ0LnN0YXJ0LCBwYXJ0LnN1YnN0cmluZyhmbkJvZHkpKSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gb3B0aW1pemUgcmVzdWx0OiByZW1vdmUgZW1wdHkgcmFuZ2VzIGFuZCBkdXBsaWNhdGVzXG5cdFx0cmV0dXJuIF8uY2hhaW4ocmVzdWx0KVxuXHRcdFx0LmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdHJldHVybiAhIWl0ZW0ubGVuZ3RoKCk7XG5cdFx0XHR9KVxuXHRcdFx0LnVuaXEoZmFsc2UsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0cmV0dXJuIGl0ZW0udG9TdHJpbmcoKTtcblx0XHRcdH0pXG5cdFx0XHQudmFsdWUoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBUcmllcyB0byBmaW5kIG1hdGNoZWQgQ1NTIHByb3BlcnR5IGFuZCBuZWFyZXN0IHJhbmdlIGZvciBzZWxlY3Rpb25cblx0ICogQHBhcmFtIHtDU1NSdWxlfSBydWxlXG5cdCAqIEBwYXJhbSB7UmFuZ2V9IHNlbFJhbmdlXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNCYWNrd2FyZFxuXHQgKiBAcmV0dXJucyB7UmFuZ2V9XG5cdCAqL1xuXHRmdW5jdGlvbiBtYXRjaGVkUmFuZ2VGb3JDU1NQcm9wZXJ0eShydWxlLCBzZWxSYW5nZSwgaXNCYWNrd2FyZCkge1xuXHRcdC8qKiBAdHlwZSBDU1NQcm9wZXJ0eSAqL1xuXHRcdHZhciBwcm9wZXJ0eSA9IG51bGw7XG5cdFx0dmFyIHBvc3NpYmxlUmFuZ2VzLCBjdXJSYW5nZSA9IG51bGwsIGl4O1xuXHRcdHZhciBsaXN0ID0gcnVsZS5saXN0KCk7XG5cdFx0dmFyIHNlYXJjaEZuLCBuZWFyZXN0SXRlbUZuO1xuXG5cdFx0aWYgKGlzQmFja3dhcmQpIHtcblx0XHRcdGxpc3QucmV2ZXJzZSgpO1xuXHRcdFx0c2VhcmNoRm4gPSBmdW5jdGlvbihwKSB7XG5cdFx0XHRcdHJldHVybiBwLnJhbmdlKHRydWUpLnN0YXJ0IDw9IHNlbFJhbmdlLnN0YXJ0O1xuXHRcdFx0fTtcblx0XHRcdG5lYXJlc3RJdGVtRm4gPSBmdW5jdGlvbihyKSB7XG5cdFx0XHRcdHJldHVybiByLnN0YXJ0IDwgc2VsUmFuZ2Uuc3RhcnQ7XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzZWFyY2hGbiA9IGZ1bmN0aW9uKHApIHtcblx0XHRcdFx0cmV0dXJuIHAucmFuZ2UodHJ1ZSkuZW5kID49IHNlbFJhbmdlLmVuZDtcblx0XHRcdH07XG5cdFx0XHRuZWFyZXN0SXRlbUZuID0gZnVuY3Rpb24ocikge1xuXHRcdFx0XHRyZXR1cm4gci5lbmQgPiBzZWxSYW5nZS5zdGFydDtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gc2VhcmNoIGZvciBuZWFyZXN0IHRvIHNlbGVjdGlvbiBDU1MgcHJvcGVydHlcblx0XHR3aGlsZSAocHJvcGVydHkgPSBfLmZpbmQobGlzdCwgc2VhcmNoRm4pKSB7XG5cdFx0XHRwb3NzaWJsZVJhbmdlcyA9IG1ha2VQb3NzaWJsZVJhbmdlc0NTUyhwcm9wZXJ0eSk7XG5cdFx0XHRpZiAoaXNCYWNrd2FyZClcblx0XHRcdFx0cG9zc2libGVSYW5nZXMucmV2ZXJzZSgpO1xuXG5cdFx0XHQvLyBjaGVjayBpZiBhbnkgcG9zc2libGUgcmFuZ2UgaXMgYWxyZWFkeSBzZWxlY3RlZFxuXHRcdFx0Y3VyUmFuZ2UgPSBfLmZpbmQocG9zc2libGVSYW5nZXMsIGZ1bmN0aW9uKHIpIHtcblx0XHRcdFx0cmV0dXJuIHIuZXF1YWwoc2VsUmFuZ2UpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGlmICghY3VyUmFuZ2UpIHtcblx0XHRcdFx0Ly8gbm8gc2VsZWN0aW9uLCBzZWxlY3QgbmVhcmVzdCBpdGVtXG5cdFx0XHRcdHZhciBtYXRjaGVkUmFuZ2VzID0gXy5maWx0ZXIocG9zc2libGVSYW5nZXMsIGZ1bmN0aW9uKHIpIHtcblx0XHRcdFx0XHRyZXR1cm4gci5pbnNpZGUoc2VsUmFuZ2UuZW5kKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKG1hdGNoZWRSYW5nZXMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdGN1clJhbmdlID0gbWF0Y2hlZFJhbmdlc1sxXTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjdXJSYW5nZSA9IF8uZmluZChwb3NzaWJsZVJhbmdlcywgbmVhcmVzdEl0ZW1GbikpXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpeCA9IF8uaW5kZXhPZihwb3NzaWJsZVJhbmdlcywgY3VyUmFuZ2UpO1xuXHRcdFx0XHRpZiAoaXggIT0gcG9zc2libGVSYW5nZXMubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdGN1clJhbmdlID0gcG9zc2libGVSYW5nZXNbaXggKyAxXTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRjdXJSYW5nZSA9IG51bGw7XG5cdFx0XHRzZWxSYW5nZS5zdGFydCA9IHNlbFJhbmdlLmVuZCA9IGlzQmFja3dhcmRcblx0XHRcdFx0PyBwcm9wZXJ0eS5yYW5nZSh0cnVlKS5zdGFydCAtIDFcblx0XHRcdFx0OiBwcm9wZXJ0eS5yYW5nZSh0cnVlKS5lbmQgKyAxO1xuXHRcdH1cblxuXHRcdHJldHVybiBjdXJSYW5nZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGZpbmROZXh0Q1NTSXRlbShlZGl0b3IpIHtcblx0XHRyZXR1cm4gZmluZEl0ZW0oZWRpdG9yLCBmYWxzZSwgcmVxdWlyZSgnY3NzRWRpdFRyZWUnKS5leHRyYWN0UnVsZSwgZ2V0UmFuZ2VGb3JOZXh0SXRlbUluQ1NTKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGZpbmRQcmV2Q1NTSXRlbShlZGl0b3IpIHtcblx0XHRyZXR1cm4gZmluZEl0ZW0oZWRpdG9yLCB0cnVlLCByZXF1aXJlKCdjc3NFZGl0VHJlZScpLmV4dHJhY3RSdWxlLCBnZXRSYW5nZUZvclByZXZJdGVtSW5DU1MpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgcmFuZ2UgZm9yIGl0ZW0gdG8gYmUgc2VsZWN0ZWQgaW4gQ1NTIGFmdGVyIGN1cnJlbnQgY2FyZXRcblx0ICogKHNlbGVjdGlvbikgcG9zaXRpb25cblx0ICogQHBhcmFtIHtTdHJpbmd9IHJ1bGUgQ1NTIHJ1bGUgZGVjbGFyYXRpb25cblx0ICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBSdWxlJ3MgcG9zaXRpb24gaW5kZXggaW5zaWRlIGNvbnRlbnRcblx0ICogQHBhcmFtIHtSYW5nZX0gc2VsUmFuZ2UgU2VsZWN0aW9uIHJhbmdlXG5cdCAqIEByZXR1cm4ge1JhbmdlfSBSZXR1cm5zIHJhbmdlIGlmIG5leHQgaXRlbSB3YXMgZm91bmQsIDxjb2RlPm51bGw8L2NvZGU+IG90aGVyd2lzZVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UmFuZ2VGb3JOZXh0SXRlbUluQ1NTKHJ1bGUsIG9mZnNldCwgc2VsUmFuZ2UpIHtcblx0XHR2YXIgdHJlZSA9IHJlcXVpcmUoJ2Nzc0VkaXRUcmVlJykucGFyc2UocnVsZSwge1xuXHRcdFx0b2Zmc2V0OiBvZmZzZXRcblx0XHR9KTtcblxuXHRcdC8vIGNoZWNrIGlmIHNlbGVjdG9yIGlzIG1hdGNoZWRcblx0XHR2YXIgcmFuZ2UgPSB0cmVlLm5hbWVSYW5nZSh0cnVlKTtcblx0XHRpZiAoc2VsUmFuZ2UuZW5kIDwgcmFuZ2UuZW5kKSB7XG5cdFx0XHRyZXR1cm4gcmFuZ2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hdGNoZWRSYW5nZUZvckNTU1Byb3BlcnR5KHRyZWUsIHNlbFJhbmdlLCBmYWxzZSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyByYW5nZSBmb3IgaXRlbSB0byBiZSBzZWxlY3RlZCBpbiBDU1MgYmVmb3JlIGN1cnJlbnQgY2FyZXRcblx0ICogKHNlbGVjdGlvbikgcG9zaXRpb25cblx0ICogQHBhcmFtIHtTdHJpbmd9IHJ1bGUgQ1NTIHJ1bGUgZGVjbGFyYXRpb25cblx0ICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBSdWxlJ3MgcG9zaXRpb24gaW5kZXggaW5zaWRlIGNvbnRlbnRcblx0ICogQHBhcmFtIHtSYW5nZX0gc2VsUmFuZ2UgU2VsZWN0aW9uIHJhbmdlXG5cdCAqIEByZXR1cm4ge1JhbmdlfSBSZXR1cm5zIHJhbmdlIGlmIHByZXZpb3VzIGl0ZW0gd2FzIGZvdW5kLCA8Y29kZT5udWxsPC9jb2RlPiBvdGhlcndpc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGdldFJhbmdlRm9yUHJldkl0ZW1JbkNTUyhydWxlLCBvZmZzZXQsIHNlbFJhbmdlKSB7XG5cdFx0dmFyIHRyZWUgPSByZXF1aXJlKCdjc3NFZGl0VHJlZScpLnBhcnNlKHJ1bGUsIHtcblx0XHRcdG9mZnNldDogb2Zmc2V0XG5cdFx0fSk7XG5cblx0XHR2YXIgY3VyUmFuZ2UgPSBtYXRjaGVkUmFuZ2VGb3JDU1NQcm9wZXJ0eSh0cmVlLCBzZWxSYW5nZSwgdHJ1ZSk7XG5cblx0XHRpZiAoIWN1clJhbmdlKSB7XG5cdFx0XHQvLyBubyBtYXRjaGVkIHByb3BlcnR5LCB0cnkgdG8gbWF0Y2ggc2VsZWN0b3Jcblx0XHRcdHZhciByYW5nZSA9IHRyZWUubmFtZVJhbmdlKHRydWUpO1xuXHRcdFx0aWYgKHNlbFJhbmdlLnN0YXJ0ID4gcmFuZ2Uuc3RhcnQpIHtcblx0XHRcdFx0cmV0dXJuIHJhbmdlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjdXJSYW5nZTtcblx0fVxuXG5cdC8vIFhYWCByZWdpc3RlciBhY3Rpb25zXG5cdHZhciBhY3Rpb25zID0gcmVxdWlyZSgnYWN0aW9ucycpO1xuXHRhY3Rpb25zLmFkZCgnc2VsZWN0X25leHRfaXRlbScsIGZ1bmN0aW9uKGVkaXRvcil7XG5cdFx0aWYgKGVkaXRvci5nZXRTeW50YXgoKSA9PSAnY3NzJylcblx0XHRcdHJldHVybiBmaW5kTmV4dENTU0l0ZW0oZWRpdG9yKTtcblx0XHRlbHNlXG5cdFx0XHRyZXR1cm4gZmluZE5leHRIVE1MSXRlbShlZGl0b3IpO1xuXHR9KTtcblxuXHRhY3Rpb25zLmFkZCgnc2VsZWN0X3ByZXZpb3VzX2l0ZW0nLCBmdW5jdGlvbihlZGl0b3Ipe1xuXHRcdGlmIChlZGl0b3IuZ2V0U3ludGF4KCkgPT0gJ2NzcycpXG5cdFx0XHRyZXR1cm4gZmluZFByZXZDU1NJdGVtKGVkaXRvcik7XG5cdFx0ZWxzZVxuXHRcdFx0cmV0dXJuIGZpbmRQcmV2SFRNTEl0ZW0oZWRpdG9yKTtcblx0fSk7XG59KTsvKipcbiAqIEhUTUwgcGFpciBtYXRjaGluZyAoYmFsYW5jaW5nKSBhY3Rpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqIEBtZW1iZXJPZiBfX21hdGNoUGFpckFjdGlvbkRlZmluZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmV4ZWMoZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHQvKiogQHR5cGUgZW1tZXQuYWN0aW9ucyAqL1xuXHR2YXIgYWN0aW9ucyA9IHJlcXVpcmUoJ2FjdGlvbnMnKTtcblx0dmFyIG1hdGNoZXIgPSByZXF1aXJlKCdodG1sTWF0Y2hlcicpO1xuXHR2YXIgbGFzdE1hdGNoID0gbnVsbDtcblxuXHQvKipcblx0ICogRmluZCBhbmQgc2VsZWN0IEhUTUwgdGFnIHBhaXJcblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvciBFZGl0b3IgaW5zdGFuY2Vcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRpcmVjdGlvbiBEaXJlY3Rpb24gb2YgcGFpciBtYXRjaGluZzogJ2luJyBvciAnb3V0Jy5cblx0ICogRGVmYXVsdCBpcyAnb3V0J1xuXHQgKi9cblx0ZnVuY3Rpb24gbWF0Y2hQYWlyKGVkaXRvciwgZGlyZWN0aW9uKSB7XG5cdFx0ZGlyZWN0aW9uID0gU3RyaW5nKChkaXJlY3Rpb24gfHwgJ291dCcpLnRvTG93ZXJDYXNlKCkpO1xuXHRcdHZhciBpbmZvID0gcmVxdWlyZSgnZWRpdG9yVXRpbHMnKS5vdXRwdXRJbmZvKGVkaXRvcik7XG5cblx0XHR2YXIgcmFuZ2UgPSByZXF1aXJlKCdyYW5nZScpO1xuXHRcdC8qKiBAdHlwZSBSYW5nZSAqL1xuXHRcdHZhciBzZWwgPSByYW5nZS5jcmVhdGUoZWRpdG9yLmdldFNlbGVjdGlvblJhbmdlKCkpO1xuXHRcdHZhciBjb250ZW50ID0gaW5mby5jb250ZW50O1xuXG5cdFx0Ly8gdmFsaWRhdGUgcHJldmlvdXMgbWF0Y2hcblx0XHRpZiAobGFzdE1hdGNoICYmICFsYXN0TWF0Y2gucmFuZ2UuZXF1YWwoc2VsKSkge1xuXHRcdFx0bGFzdE1hdGNoID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAobGFzdE1hdGNoICYmIHNlbC5sZW5ndGgoKSkge1xuXHRcdFx0aWYgKGRpcmVjdGlvbiA9PSAnaW4nKSB7XG5cdFx0XHRcdC8vIHVzZXIgaGFzIHByZXZpb3VzbHkgc2VsZWN0ZWQgdGFnIGFuZCB3YW50cyB0byBtb3ZlIGlud2FyZFxuXHRcdFx0XHRpZiAobGFzdE1hdGNoLnR5cGUgPT0gJ3RhZycgJiYgIWxhc3RNYXRjaC5jbG9zZSkge1xuXHRcdFx0XHRcdC8vIHVuYXJ5IHRhZyB3YXMgc2VsZWN0ZWQsIGNhbid0IG1vdmUgaW53YXJkXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChsYXN0TWF0Y2gucmFuZ2UuZXF1YWwobGFzdE1hdGNoLm91dGVyUmFuZ2UpKSB7XG5cdFx0XHRcdFx0XHRsYXN0TWF0Y2gucmFuZ2UgPSBsYXN0TWF0Y2guaW5uZXJSYW5nZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dmFyIG5hcnJvd2VkID0gcmVxdWlyZSgndXRpbHMnKS5uYXJyb3dUb05vblNwYWNlKGNvbnRlbnQsIGxhc3RNYXRjaC5pbm5lclJhbmdlKTtcblx0XHRcdFx0XHRcdGxhc3RNYXRjaCA9IG1hdGNoZXIuZmluZChjb250ZW50LCBuYXJyb3dlZC5zdGFydCArIDEpO1xuXHRcdFx0XHRcdFx0aWYgKGxhc3RNYXRjaCAmJiBsYXN0TWF0Y2gucmFuZ2UuZXF1YWwoc2VsKSAmJiBsYXN0TWF0Y2gub3V0ZXJSYW5nZS5lcXVhbChzZWwpKSB7XG5cdFx0XHRcdFx0XHRcdGxhc3RNYXRjaC5yYW5nZSA9IGxhc3RNYXRjaC5pbm5lclJhbmdlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0IWxhc3RNYXRjaC5pbm5lclJhbmdlLmVxdWFsKGxhc3RNYXRjaC5vdXRlclJhbmdlKVxuXHRcdFx0XHRcdFx0JiYgbGFzdE1hdGNoLnJhbmdlLmVxdWFsKGxhc3RNYXRjaC5pbm5lclJhbmdlKVxuXHRcdFx0XHRcdFx0JiYgc2VsLmVxdWFsKGxhc3RNYXRjaC5yYW5nZSkpIHtcblx0XHRcdFx0XHRsYXN0TWF0Y2gucmFuZ2UgPSBsYXN0TWF0Y2gub3V0ZXJSYW5nZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsYXN0TWF0Y2ggPSBtYXRjaGVyLmZpbmQoY29udGVudCwgc2VsLnN0YXJ0KTtcblx0XHRcdFx0XHRpZiAobGFzdE1hdGNoICYmIGxhc3RNYXRjaC5yYW5nZS5lcXVhbChzZWwpICYmIGxhc3RNYXRjaC5pbm5lclJhbmdlLmVxdWFsKHNlbCkpIHtcblx0XHRcdFx0XHRcdGxhc3RNYXRjaC5yYW5nZSA9IGxhc3RNYXRjaC5vdXRlclJhbmdlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRsYXN0TWF0Y2ggPSBtYXRjaGVyLmZpbmQoY29udGVudCwgc2VsLnN0YXJ0KTtcblx0XHR9XG5cblx0XHRpZiAobGFzdE1hdGNoICYmICFsYXN0TWF0Y2gucmFuZ2UuZXF1YWwoc2VsKSkge1xuXHRcdFx0ZWRpdG9yLmNyZWF0ZVNlbGVjdGlvbihsYXN0TWF0Y2gucmFuZ2Uuc3RhcnQsIGxhc3RNYXRjaC5yYW5nZS5lbmQpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0bGFzdE1hdGNoID0gbnVsbDtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRhY3Rpb25zLmFkZCgnbWF0Y2hfcGFpcicsIG1hdGNoUGFpciwge2hpZGRlbjogdHJ1ZX0pO1xuXHRhY3Rpb25zLmFkZCgnbWF0Y2hfcGFpcl9pbndhcmQnLCBmdW5jdGlvbihlZGl0b3Ipe1xuXHRcdHJldHVybiBtYXRjaFBhaXIoZWRpdG9yLCAnaW4nKTtcblx0fSwge2xhYmVsOiAnSFRNTC9NYXRjaCBQYWlyIFRhZyAoaW53YXJkKSd9KTtcblxuXHRhY3Rpb25zLmFkZCgnbWF0Y2hfcGFpcl9vdXR3YXJkJywgZnVuY3Rpb24oZWRpdG9yKXtcblx0XHRyZXR1cm4gbWF0Y2hQYWlyKGVkaXRvciwgJ291dCcpO1xuXHR9LCB7bGFiZWw6ICdIVE1ML01hdGNoIFBhaXIgVGFnIChvdXR3YXJkKSd9KTtcblxuXHQvKipcblx0ICogTW92ZXMgY2FyZXQgdG8gbWF0Y2hpbmcgb3BlbmluZyBvciBjbG9zaW5nIHRhZ1xuXHQgKiBAcGFyYW0ge0lFbW1ldEVkaXRvcn0gZWRpdG9yXG5cdCAqL1xuXHRhY3Rpb25zLmFkZCgnbWF0Y2hpbmdfcGFpcicsIGZ1bmN0aW9uKGVkaXRvcikge1xuXHRcdHZhciBjb250ZW50ID0gU3RyaW5nKGVkaXRvci5nZXRDb250ZW50KCkpO1xuXHRcdHZhciBjYXJldFBvcyA9IGVkaXRvci5nZXRDYXJldFBvcygpO1xuXG5cdFx0aWYgKGNvbnRlbnQuY2hhckF0KGNhcmV0UG9zKSA9PSAnPCcpXG5cdFx0XHQvLyBsb29rcyBsaWtlIGNhcmV0IGlzIG91dHNpZGUgb2YgdGFnIHBhaXJcblx0XHRcdGNhcmV0UG9zKys7XG5cblx0XHR2YXIgdGFnID0gbWF0Y2hlci50YWcoY29udGVudCwgY2FyZXRQb3MpO1xuXHRcdGlmICh0YWcgJiYgdGFnLmNsb3NlKSB7IC8vIGV4Y2x1ZGUgdW5hcnkgdGFnc1xuXHRcdFx0aWYgKHRhZy5vcGVuLnJhbmdlLmluc2lkZShjYXJldFBvcykpIHtcblx0XHRcdFx0ZWRpdG9yLnNldENhcmV0UG9zKHRhZy5jbG9zZS5yYW5nZS5zdGFydCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlZGl0b3Iuc2V0Q2FyZXRQb3ModGFnLm9wZW4ucmFuZ2Uuc3RhcnQpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sIHtsYWJlbDogJ0hUTUwvR28gVG8gTWF0Y2hpbmcgVGFnIFBhaXInfSk7XG59KTsvKipcbiAqIEdyYWNlZnVsbHkgcmVtb3ZlcyB0YWcgdW5kZXIgY3Vyc29yXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmV4ZWMoZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHRyZXF1aXJlKCdhY3Rpb25zJykuYWRkKCdyZW1vdmVfdGFnJywgZnVuY3Rpb24oZWRpdG9yKSB7XG5cdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblx0XHR2YXIgaW5mbyA9IHJlcXVpcmUoJ2VkaXRvclV0aWxzJykub3V0cHV0SW5mbyhlZGl0b3IpO1xuXG5cdFx0Ly8gc2VhcmNoIGZvciB0YWdcblx0XHR2YXIgdGFnID0gcmVxdWlyZSgnaHRtbE1hdGNoZXInKS50YWcoaW5mby5jb250ZW50LCBlZGl0b3IuZ2V0Q2FyZXRQb3MoKSk7XG5cdFx0aWYgKHRhZykge1xuXHRcdFx0aWYgKCF0YWcuY2xvc2UpIHtcblx0XHRcdFx0Ly8gc2ltcGx5IHJlbW92ZSB1bmFyeSB0YWdcblx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VDb250ZW50KHV0aWxzLmdldENhcmV0UGxhY2Vob2xkZXIoKSwgdGFnLnJhbmdlLnN0YXJ0LCB0YWcucmFuZ2UuZW5kKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIHJlbW92ZSB0YWcgYW5kIGl0cyBuZXdsaW5lc1xuXHRcdFx0XHQvKiogQHR5cGUgUmFuZ2UgKi9cblx0XHRcdFx0dmFyIHRhZ0NvbnRlbnRSYW5nZSA9IHV0aWxzLm5hcnJvd1RvTm9uU3BhY2UoaW5mby5jb250ZW50LCB0YWcuaW5uZXJSYW5nZSk7XG5cdFx0XHRcdC8qKiBAdHlwZSBSYW5nZSAqL1xuXHRcdFx0XHR2YXIgc3RhcnRMaW5lQm91bmRzID0gdXRpbHMuZmluZE5ld2xpbmVCb3VuZHMoaW5mby5jb250ZW50LCB0YWdDb250ZW50UmFuZ2Uuc3RhcnQpO1xuXHRcdFx0XHR2YXIgc3RhcnRMaW5lUGFkID0gdXRpbHMuZ2V0TGluZVBhZGRpbmcoc3RhcnRMaW5lQm91bmRzLnN1YnN0cmluZyhpbmZvLmNvbnRlbnQpKTtcblx0XHRcdFx0dmFyIHRhZ0NvbnRlbnQgPSB0YWdDb250ZW50UmFuZ2Uuc3Vic3RyaW5nKGluZm8uY29udGVudCk7XG5cblx0XHRcdFx0dGFnQ29udGVudCA9IHV0aWxzLnVuaW5kZW50U3RyaW5nKHRhZ0NvbnRlbnQsIHN0YXJ0TGluZVBhZCk7XG5cdFx0XHRcdGVkaXRvci5yZXBsYWNlQ29udGVudCh1dGlscy5nZXRDYXJldFBsYWNlaG9sZGVyKCkgKyB1dGlscy5lc2NhcGVUZXh0KHRhZ0NvbnRlbnQpLCB0YWcub3V0ZXJSYW5nZS5zdGFydCwgdGFnLm91dGVyUmFuZ2UuZW5kKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LCB7bGFiZWw6ICdIVE1ML1JlbW92ZSBUYWcnfSk7XG59KTtcbi8qKlxuICogU3BsaXRzIG9yIGpvaW5zIHRhZywgZS5nLiB0cmFuc2Zvcm1zIGl0IGludG8gYSBzaG9ydCBub3RhdGlvbiBhbmQgdmljZSB2ZXJzYTo8YnI+XG4gKiAmbHQ7ZGl2Jmd0OyZsdDsvZGl2Jmd0OyDihpIgJmx0O2RpdiAvJmd0OyA6IGpvaW48YnI+XG4gKiAmbHQ7ZGl2IC8mZ3Q7IOKGkiAmbHQ7ZGl2Jmd0OyZsdDsvZGl2Jmd0OyA6IHNwbGl0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqIEBtZW1iZXJPZiBfX3NwbGl0Sm9pblRhZ0FjdGlvblxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmVtbWV0LmV4ZWMoZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHQvKipcblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvZmlsZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gdGFnXG5cdCAqL1xuXHRmdW5jdGlvbiBqb2luVGFnKGVkaXRvciwgcHJvZmlsZSwgdGFnKSB7XG5cdFx0LyoqIEB0eXBlIGVtbWV0LnV0aWxzICovXG5cdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblxuXHRcdC8vIGVtcHR5IGNsb3Npbmcgc2xhc2ggaXMgYSBub25zZW5zZSBmb3IgdGhpcyBhY3Rpb25cblx0XHR2YXIgc2xhc2ggPSBwcm9maWxlLnNlbGZDbG9zaW5nKCkgfHwgJyAvJztcblx0XHR2YXIgY29udGVudCA9IHRhZy5vcGVuLnJhbmdlLnN1YnN0cmluZyh0YWcuc291cmNlKS5yZXBsYWNlKC9cXHMqPiQvLCBzbGFzaCArICc+Jyk7XG5cblx0XHR2YXIgY2FyZXRQb3MgPSBlZGl0b3IuZ2V0Q2FyZXRQb3MoKTtcblxuXHRcdC8vIHVwZGF0ZSBjYXJldCBwb3NpdGlvblxuXHRcdGlmIChjb250ZW50Lmxlbmd0aCArIHRhZy5vdXRlclJhbmdlLnN0YXJ0IDwgY2FyZXRQb3MpIHtcblx0XHRcdGNhcmV0UG9zID0gY29udGVudC5sZW5ndGggKyB0YWcub3V0ZXJSYW5nZS5zdGFydDtcblx0XHR9XG5cblx0XHRjb250ZW50ID0gdXRpbHMuZXNjYXBlVGV4dChjb250ZW50KTtcblx0XHRlZGl0b3IucmVwbGFjZUNvbnRlbnQoY29udGVudCwgdGFnLm91dGVyUmFuZ2Uuc3RhcnQsIHRhZy5vdXRlclJhbmdlLmVuZCk7XG5cdFx0ZWRpdG9yLnNldENhcmV0UG9zKGNhcmV0UG9zKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNwbGl0VGFnKGVkaXRvciwgcHJvZmlsZSwgdGFnKSB7XG5cdFx0LyoqIEB0eXBlIGVtbWV0LnV0aWxzICovXG5cdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblxuXHRcdHZhciBubCA9IHV0aWxzLmdldE5ld2xpbmUoKTtcblx0XHR2YXIgcGFkID0gcmVxdWlyZSgncmVzb3VyY2VzJykuZ2V0VmFyaWFibGUoJ2luZGVudGF0aW9uJyk7XG5cdFx0dmFyIGNhcmV0UG9zID0gZWRpdG9yLmdldENhcmV0UG9zKCk7XG5cblx0XHQvLyBkZWZpbmUgdGFnIGNvbnRlbnQgZGVwZW5kaW5nIG9uIHByb2ZpbGVcblx0XHR2YXIgdGFnQ29udGVudCA9IChwcm9maWxlLnRhZ19ubCA9PT0gdHJ1ZSkgPyBubCArIHBhZCArIG5sIDogJyc7XG5cdFx0dmFyIGNvbnRlbnQgPSB0YWcub3V0ZXJDb250ZW50KCkucmVwbGFjZSgvXFxzKlxcLz4kLywgJz4nKTtcblx0XHRjYXJldFBvcyA9IHRhZy5vdXRlclJhbmdlLnN0YXJ0ICsgY29udGVudC5sZW5ndGg7XG5cdFx0Y29udGVudCArPSB0YWdDb250ZW50ICsgJzwvJyArIHRhZy5vcGVuLm5hbWUgKyAnPic7XG5cblx0XHRjb250ZW50ID0gdXRpbHMuZXNjYXBlVGV4dChjb250ZW50KTtcblx0XHRlZGl0b3IucmVwbGFjZUNvbnRlbnQoY29udGVudCwgdGFnLm91dGVyUmFuZ2Uuc3RhcnQsIHRhZy5vdXRlclJhbmdlLmVuZCk7XG5cdFx0ZWRpdG9yLnNldENhcmV0UG9zKGNhcmV0UG9zKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHJlcXVpcmUoJ2FjdGlvbnMnKS5hZGQoJ3NwbGl0X2pvaW5fdGFnJywgZnVuY3Rpb24oZWRpdG9yLCBwcm9maWxlTmFtZSkge1xuXHRcdHZhciBtYXRjaGVyID0gcmVxdWlyZSgnaHRtbE1hdGNoZXInKTtcblxuXHRcdHZhciBpbmZvID0gcmVxdWlyZSgnZWRpdG9yVXRpbHMnKS5vdXRwdXRJbmZvKGVkaXRvciwgbnVsbCwgcHJvZmlsZU5hbWUpO1xuXHRcdHZhciBwcm9maWxlID0gcmVxdWlyZSgncHJvZmlsZScpLmdldChpbmZvLnByb2ZpbGUpO1xuXG5cdFx0Ly8gZmluZCB0YWcgYXQgY3VycmVudCBwb3NpdGlvblxuXHRcdHZhciB0YWcgPSBtYXRjaGVyLnRhZyhpbmZvLmNvbnRlbnQsIGVkaXRvci5nZXRDYXJldFBvcygpKTtcblx0XHRpZiAodGFnKSB7XG5cdFx0XHRyZXR1cm4gdGFnLmNsb3NlXG5cdFx0XHRcdD8gam9pblRhZyhlZGl0b3IsIHByb2ZpbGUsIHRhZylcblx0XHRcdFx0OiBzcGxpdFRhZyhlZGl0b3IsIHByb2ZpbGUsIHRhZyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LCB7bGFiZWw6ICdIVE1ML1NwbGl0XFxcXEpvaW4gVGFnIERlY2xhcmF0aW9uJ30pO1xufSk7LyoqXG4gKiBSZWZsZWN0IENTUyB2YWx1ZTogdGFrZXMgcnVsZSdzIHZhbHVlIHVuZGVyIGNhcmV0IGFuZCBwYXN0ZXMgaXQgZm9yIHRoZSBzYW1lXG4gKiBydWxlcyB3aXRoIHZlbmRvciBwcmVmaXhlc1xuICogQGNvbnN0cnVjdG9yXG4gKiBAbWVtYmVyT2YgX19yZWZsZWN0Q1NTQWN0aW9uRGVmaW5lXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZGVmaW5lKCdyZWZsZWN0Q1NTVmFsdWUnLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdC8qKlxuXHQgKiBAdHlwZSBIYW5kbGVyTGlzdCBMaXN0IG9mIHJlZ2lzdGVyZWQgaGFuZGxlcnNcblx0ICovXG5cdHZhciBoYW5kbGVycyA9IHJlcXVpcmUoJ2hhbmRsZXJMaXN0JykuY3JlYXRlKCk7XG5cblx0cmVxdWlyZSgnYWN0aW9ucycpLmFkZCgncmVmbGVjdF9jc3NfdmFsdWUnLCBmdW5jdGlvbihlZGl0b3IpIHtcblx0XHRpZiAoZWRpdG9yLmdldFN5bnRheCgpICE9ICdjc3MnKSByZXR1cm4gZmFsc2U7XG5cblx0XHRyZXR1cm4gcmVxdWlyZSgnYWN0aW9uVXRpbHMnKS5jb21wb3VuZFVwZGF0ZShlZGl0b3IsIGRvQ1NTUmVmbGVjdGlvbihlZGl0b3IpKTtcblx0fSwge2xhYmVsOiAnQ1NTL1JlZmxlY3QgVmFsdWUnfSk7XG5cblx0ZnVuY3Rpb24gZG9DU1NSZWZsZWN0aW9uKGVkaXRvcikge1xuXHRcdC8qKiBAdHlwZSBlbW1ldC5jc3NFZGl0VHJlZSAqL1xuXHRcdHZhciBjc3NFZGl0VHJlZSA9IHJlcXVpcmUoJ2Nzc0VkaXRUcmVlJyk7XG5cdFx0dmFyIG91dHB1dEluZm8gPSByZXF1aXJlKCdlZGl0b3JVdGlscycpLm91dHB1dEluZm8oZWRpdG9yKTtcblx0XHR2YXIgY2FyZXRQb3MgPSBlZGl0b3IuZ2V0Q2FyZXRQb3MoKTtcblxuXHRcdHZhciBjc3NSdWxlID0gY3NzRWRpdFRyZWUucGFyc2VGcm9tUG9zaXRpb24ob3V0cHV0SW5mby5jb250ZW50LCBjYXJldFBvcyk7XG5cdFx0aWYgKCFjc3NSdWxlKSByZXR1cm47XG5cblx0XHR2YXIgcHJvcGVydHkgPSBjc3NSdWxlLml0ZW1Gcm9tUG9zaXRpb24oY2FyZXRQb3MsIHRydWUpO1xuXHRcdC8vIG5vIHByb3BlcnR5IHVuZGVyIGN1cnNvciwgbm90aGluZyB0byByZWZsZWN0XG5cdFx0aWYgKCFwcm9wZXJ0eSkgcmV0dXJuO1xuXG5cdFx0dmFyIG9sZFJ1bGUgPSBjc3NSdWxlLnNvdXJjZTtcblx0XHR2YXIgb2Zmc2V0ID0gY3NzUnVsZS5vcHRpb25zLm9mZnNldDtcblx0XHR2YXIgY2FyZXREZWx0YSA9IGNhcmV0UG9zIC0gb2Zmc2V0IC0gcHJvcGVydHkucmFuZ2UoKS5zdGFydDtcblxuXHRcdGhhbmRsZXJzLmV4ZWMoZmFsc2UsIFtwcm9wZXJ0eV0pO1xuXG5cdFx0aWYgKG9sZFJ1bGUgIT09IGNzc1J1bGUuc291cmNlKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRkYXRhOiAgY3NzUnVsZS5zb3VyY2UsXG5cdFx0XHRcdHN0YXJ0OiBvZmZzZXQsXG5cdFx0XHRcdGVuZDogICBvZmZzZXQgKyBvbGRSdWxlLmxlbmd0aCxcblx0XHRcdFx0Y2FyZXQ6IG9mZnNldCArIHByb3BlcnR5LnJhbmdlKCkuc3RhcnQgKyBjYXJldERlbHRhXG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHJlZ2V4cCB0aGF0IHNob3VsZCBtYXRjaCByZWZsZWN0ZWQgQ1NTIHByb3BlcnR5IG5hbWVzXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIEN1cnJlbnQgQ1NTIHByb3BlcnR5IG5hbWVcblx0ICogQHJldHVybiB7UmVnRXhwfVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UmVmbGVjdGVkQ1NTTmFtZShuYW1lKSB7XG5cdFx0bmFtZSA9IHJlcXVpcmUoJ2Nzc0VkaXRUcmVlJykuYmFzZU5hbWUobmFtZSk7XG5cdFx0dmFyIHZlbmRvclByZWZpeCA9ICdeKD86XFxcXC1cXFxcdytcXFxcLSk/JywgbTtcblxuXHRcdGlmIChuYW1lID09ICdvcGFjaXR5JyB8fCBuYW1lID09ICdmaWx0ZXInKSB7XG5cdFx0XHRyZXR1cm4gbmV3IFJlZ0V4cCh2ZW5kb3JQcmVmaXggKyAnKD86b3BhY2l0eXxmaWx0ZXIpJCcpO1xuXHRcdH0gZWxzZSBpZiAobSA9IG5hbWUubWF0Y2goL15ib3JkZXItcmFkaXVzLSh0b3B8Ym90dG9tKShsZWZ0fHJpZ2h0KS8pKSB7XG5cdFx0XHQvLyBNb3ppbGxhLXN0eWxlIGJvcmRlciByYWRpdXNcblx0XHRcdHJldHVybiBuZXcgUmVnRXhwKHZlbmRvclByZWZpeCArICcoPzonICsgbmFtZSArICd8Ym9yZGVyLScgKyBtWzFdICsgJy0nICsgbVsyXSArICctcmFkaXVzKSQnKTtcblx0XHR9IGVsc2UgaWYgKG0gPSBuYW1lLm1hdGNoKC9eYm9yZGVyLSh0b3B8Ym90dG9tKS0obGVmdHxyaWdodCktcmFkaXVzLykpIHtcblx0XHRcdHJldHVybiBuZXcgUmVnRXhwKHZlbmRvclByZWZpeCArICcoPzonICsgbmFtZSArICd8Ym9yZGVyLXJhZGl1cy0nICsgbVsxXSArIG1bMl0gKyAnKSQnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3IFJlZ0V4cCh2ZW5kb3JQcmVmaXggKyBuYW1lICsgJyQnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWZsZWN0cyB2YWx1ZSBmcm9tIDxjb2RlPmRvbm9yPC9jb2RlPiBpbnRvIDxjb2RlPnJlY2VpdmVyPC9jb2RlPlxuXHQgKiBAcGFyYW0ge0NTU1Byb3BlcnR5fSBkb25vciBEb25vciBDU1MgcHJvcGVydHkgZnJvbSB3aGljaCB2YWx1ZSBzaG91bGRcblx0ICogYmUgcmVmbGVjdGVkXG5cdCAqIEBwYXJhbSB7Q1NTUHJvcGVydHl9IHJlY2VpdmVyIFByb3BlcnR5IHRoYXQgc2hvdWxkIHJlY2VpdmUgcmVmbGVjdGVkXG5cdCAqIHZhbHVlIGZyb20gZG9ub3Jcblx0ICovXG5cdGZ1bmN0aW9uIHJlZmxlY3RWYWx1ZShkb25vciwgcmVjZWl2ZXIpIHtcblx0XHR2YXIgdmFsdWUgPSBnZXRSZWZsZWN0ZWRWYWx1ZShkb25vci5uYW1lKCksIGRvbm9yLnZhbHVlKCksXG5cdFx0XHRcdHJlY2VpdmVyLm5hbWUoKSwgcmVjZWl2ZXIudmFsdWUoKSk7XG5cblx0XHRyZWNlaXZlci52YWx1ZSh2YWx1ZSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB2YWx1ZSB0aGF0IHNob3VsZCBiZSByZWZsZWN0ZWQgZm9yIDxjb2RlPnJlZk5hbWU8L2NvZGU+IENTUyBwcm9wZXJ0eVxuXHQgKiBmcm9tIDxjb2RlPmN1ck5hbWU8L2NvZGU+IHByb3BlcnR5LiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgZm9yIHNwZWNpYWwgY2FzZXMsXG5cdCAqIHdoZW4gdGhlIHNhbWUgcmVzdWx0IG11c3QgYmUgYWNoaWV2ZWQgd2l0aCBkaWZmZXJlbnQgcHJvcGVydGllcyBmb3IgZGlmZmVyZW50XG5cdCAqIGJyb3dzZXJzLiBGb3IgZXhhbXBsZTogb3DQsGNpdHk6MC41OyDihpIgZmlsdGVyOmFscGhhKG9wYWNpdHk9NTApOzxicj48YnI+XG5cdCAqXG5cdCAqIFRoaXMgZnVuY3Rpb24gZG9lcyB2YWx1ZSBjb252ZXJzaW9uIGJldHdlZW4gZGlmZmVyZW50IENTUyBwcm9wZXJ0aWVzXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjdXJOYW1lIEN1cnJlbnQgQ1NTIHByb3BlcnR5IG5hbWVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGN1clZhbHVlIEN1cnJlbnQgQ1NTIHByb3BlcnR5IHZhbHVlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSByZWZOYW1lIFJlY2VpdmVyIENTUyBwcm9wZXJ0eSdzIG5hbWVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHJlZlZhbHVlIFJlY2VpdmVyIENTUyBwcm9wZXJ0eSdzIHZhbHVlXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gTmV3IHZhbHVlIGZvciByZWNlaXZlciBwcm9wZXJ0eVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UmVmbGVjdGVkVmFsdWUoY3VyTmFtZSwgY3VyVmFsdWUsIHJlZk5hbWUsIHJlZlZhbHVlKSB7XG5cdFx0dmFyIGNzc0VkaXRUcmVlID0gcmVxdWlyZSgnY3NzRWRpdFRyZWUnKTtcblx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXHRcdGN1ck5hbWUgPSBjc3NFZGl0VHJlZS5iYXNlTmFtZShjdXJOYW1lKTtcblx0XHRyZWZOYW1lID0gY3NzRWRpdFRyZWUuYmFzZU5hbWUocmVmTmFtZSk7XG5cblx0XHRpZiAoY3VyTmFtZSA9PSAnb3BhY2l0eScgJiYgcmVmTmFtZSA9PSAnZmlsdGVyJykge1xuXHRcdFx0cmV0dXJuIHJlZlZhbHVlLnJlcGxhY2UoL29wYWNpdHk9W14pXSovaSwgJ29wYWNpdHk9JyArIE1hdGguZmxvb3IocGFyc2VGbG9hdChjdXJWYWx1ZSkgKiAxMDApKTtcblx0XHR9IGVsc2UgaWYgKGN1ck5hbWUgPT0gJ2ZpbHRlcicgJiYgcmVmTmFtZSA9PSAnb3BhY2l0eScpIHtcblx0XHRcdHZhciBtID0gY3VyVmFsdWUubWF0Y2goL29wYWNpdHk9KFteKV0qKS9pKTtcblx0XHRcdHJldHVybiBtID8gdXRpbHMucHJldHRpZnlOdW1iZXIocGFyc2VJbnQobVsxXSkgLyAxMDApIDogcmVmVmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGN1clZhbHVlO1xuXHR9XG5cblx0Ly8gWFhYIGFkZCBkZWZhdWx0IGhhbmRsZXJcblx0aGFuZGxlcnMuYWRkKGZ1bmN0aW9uKHByb3BlcnR5KSB7XG5cdFx0dmFyIHJlTmFtZSA9IGdldFJlZmxlY3RlZENTU05hbWUocHJvcGVydHkubmFtZSgpKTtcblx0XHRfLmVhY2gocHJvcGVydHkucGFyZW50Lmxpc3QoKSwgZnVuY3Rpb24ocCkge1xuXHRcdFx0aWYgKHJlTmFtZS50ZXN0KHAubmFtZSgpKSkge1xuXHRcdFx0XHRyZWZsZWN0VmFsdWUocHJvcGVydHksIHApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LCB7b3JkZXI6IC0xfSk7XG5cblx0cmV0dXJuIHtcblx0XHQvKipcblx0XHQgKiBBZGRzIGN1c3RvbSByZWZsZWN0IGhhbmRsZXIuIFRoZSBwYXNzZWQgZnVuY3Rpb24gd2lsbCByZWNlaXZlIG1hdGNoZWRcblx0XHQgKiBDU1MgcHJvcGVydHkgKGFzIDxjb2RlPkNTU0VkaXRFbGVtZW50PC9jb2RlPiBvYmplY3QpIGFuZCBzaG91bGRcblx0XHQgKiByZXR1cm4gPGNvZGU+dHJ1ZTwvY29kZT4gaWYgaXQgd2FzIHBlcmZvcm1lZCBzdWNjZXNzZnVsbHkgKGhhbmRsZWRcblx0XHQgKiByZWZsZWN0aW9uKSwgPGNvZGU+ZmFsc2U8L2NvZGU+IG90aGVyd2lzZS5cblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdFx0ICovXG5cdFx0YWRkSGFuZGxlcjogZnVuY3Rpb24oZm4sIG9wdGlvbnMpIHtcblx0XHRcdGhhbmRsZXJzLmFkZChmbiwgb3B0aW9ucyk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlbW92ZXMgcmVnaXN0ZXJlZCBoYW5kbGVyXG5cdFx0ICogQHJldHVybnNcblx0XHQgKi9cblx0XHRyZW1vdmVIYW5kbGVyOiBmdW5jdGlvbihmbikge1xuXHRcdFx0aGFuZGxlcnMucmVtb3ZlKGZuLCBvcHRpb25zKTtcblx0XHR9XG5cdH07XG59KTsvKipcbiAqIEV2YWx1YXRlcyBzaW1wbGUgbWF0aCBleHByZXNzaW9uIHVuZGVyIGNhcmV0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZXhlYyhmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHJlcXVpcmUoJ2FjdGlvbnMnKS5hZGQoJ2V2YWx1YXRlX21hdGhfZXhwcmVzc2lvbicsIGZ1bmN0aW9uKGVkaXRvcikge1xuXHRcdHZhciBhY3Rpb25VdGlscyA9IHJlcXVpcmUoJ2FjdGlvblV0aWxzJyk7XG5cdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblxuXHRcdHZhciBjb250ZW50ID0gU3RyaW5nKGVkaXRvci5nZXRDb250ZW50KCkpO1xuXHRcdHZhciBjaGFycyA9ICcuKy0qL1xcXFwnO1xuXG5cdFx0LyoqIEB0eXBlIFJhbmdlICovXG5cdFx0dmFyIHNlbCA9IHJlcXVpcmUoJ3JhbmdlJykuY3JlYXRlKGVkaXRvci5nZXRTZWxlY3Rpb25SYW5nZSgpKTtcblx0XHRpZiAoIXNlbC5sZW5ndGgoKSkge1xuXHRcdFx0c2VsID0gYWN0aW9uVXRpbHMuZmluZEV4cHJlc3Npb25Cb3VuZHMoZWRpdG9yLCBmdW5jdGlvbihjaCkge1xuXHRcdFx0XHRyZXR1cm4gdXRpbHMuaXNOdW1lcmljKGNoKSB8fCBjaGFycy5pbmRleE9mKGNoKSAhPSAtMTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChzZWwgJiYgc2VsLmxlbmd0aCgpKSB7XG5cdFx0XHR2YXIgZXhwciA9IHNlbC5zdWJzdHJpbmcoY29udGVudCk7XG5cblx0XHRcdC8vIHJlcGxhY2UgaW50ZWdyYWwgZGl2aXNpb246IDExXFwyID0+IE1hdGgucm91bmQoMTEvMilcblx0XHRcdGV4cHIgPSBleHByLnJlcGxhY2UoLyhbXFxkXFwuXFwtXSspXFxcXChbXFxkXFwuXFwtXSspL2csICdNYXRoLnJvdW5kKCQxLyQyKScpO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR2YXIgcmVzdWx0ID0gdXRpbHMucHJldHRpZnlOdW1iZXIobmV3IEZ1bmN0aW9uKCdyZXR1cm4gJyArIGV4cHIpKCkpO1xuXHRcdFx0XHRlZGl0b3IucmVwbGFjZUNvbnRlbnQocmVzdWx0LCBzZWwuc3RhcnQsIHNlbC5lbmQpO1xuXHRcdFx0XHRlZGl0b3Iuc2V0Q2FyZXRQb3Moc2VsLnN0YXJ0ICsgcmVzdWx0Lmxlbmd0aCk7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sIHtsYWJlbDogJ051bWJlcnMvRXZhbHVhdGUgTWF0aCBFeHByZXNzaW9uJ30pO1xufSk7XG4vKipcbiAqIEluY3JlbWVudC9kZWNyZW1lbnQgbnVtYmVyIHVuZGVyIGN1cnNvclxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmV4ZWMoZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHQvKipcblx0ICogRXh0cmFjdCBudW1iZXIgZnJvbSBjdXJyZW50IGNhcmV0IHBvc2l0aW9uIG9mIHRoZSA8Y29kZT5lZGl0b3I8L2NvZGU+IGFuZFxuXHQgKiBpbmNyZW1lbnQgaXQgYnkgPGNvZGU+c3RlcDwvY29kZT5cblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHQgKiBAcGFyYW0ge051bWJlcn0gc3RlcCBJbmNyZW1lbnQgc3RlcCAobWF5IGJlIG5lZ2F0aXZlKVxuXHQgKi9cblx0ZnVuY3Rpb24gaW5jcmVtZW50TnVtYmVyKGVkaXRvciwgc3RlcCkge1xuXHRcdHZhciB1dGlscyA9IHJlcXVpcmUoJ3V0aWxzJyk7XG5cdFx0dmFyIGFjdGlvblV0aWxzID0gcmVxdWlyZSgnYWN0aW9uVXRpbHMnKTtcblxuXHRcdHZhciBoYXNTaWduID0gZmFsc2U7XG5cdFx0dmFyIGhhc0RlY2ltYWwgPSBmYWxzZTtcblxuXHRcdHZhciByID0gYWN0aW9uVXRpbHMuZmluZEV4cHJlc3Npb25Cb3VuZHMoZWRpdG9yLCBmdW5jdGlvbihjaCwgcG9zLCBjb250ZW50KSB7XG5cdFx0XHRpZiAodXRpbHMuaXNOdW1lcmljKGNoKSlcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRpZiAoY2ggPT0gJy4nKSB7XG5cdFx0XHRcdC8vIG1ha2Ugc3VyZSB0aGF0IG5leHQgY2hhcmFjdGVyIGlzIG51bWVyaWMgdG9vXG5cdFx0XHRcdGlmICghdXRpbHMuaXNOdW1lcmljKGNvbnRlbnQuY2hhckF0KHBvcyArIDEpKSlcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cblx0XHRcdFx0cmV0dXJuIGhhc0RlY2ltYWwgPyBmYWxzZSA6IGhhc0RlY2ltYWwgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGNoID09ICctJylcblx0XHRcdFx0cmV0dXJuIGhhc1NpZ24gPyBmYWxzZSA6IGhhc1NpZ24gPSB0cnVlO1xuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSk7XG5cblx0XHRpZiAociAmJiByLmxlbmd0aCgpKSB7XG5cdFx0XHR2YXIgc3RyTnVtID0gci5zdWJzdHJpbmcoU3RyaW5nKGVkaXRvci5nZXRDb250ZW50KCkpKTtcblx0XHRcdHZhciBudW0gPSBwYXJzZUZsb2F0KHN0ck51bSk7XG5cdFx0XHRpZiAoIV8uaXNOYU4obnVtKSkge1xuXHRcdFx0XHRudW0gPSB1dGlscy5wcmV0dGlmeU51bWJlcihudW0gKyBzdGVwKTtcblxuXHRcdFx0XHQvLyBkbyB3ZSBoYXZlIHplcm8tcGFkZGVkIG51bWJlcj9cblx0XHRcdFx0aWYgKC9eKFxcLT8pMCtbMS05XS8udGVzdChzdHJOdW0pKSB7XG5cdFx0XHRcdFx0dmFyIG1pbnVzID0gJyc7XG5cdFx0XHRcdFx0aWYgKFJlZ0V4cC4kMSkge1xuXHRcdFx0XHRcdFx0bWludXMgPSAnLSc7XG5cdFx0XHRcdFx0XHRudW0gPSBudW0uc3Vic3RyaW5nKDEpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciBwYXJ0cyA9IG51bS5zcGxpdCgnLicpO1xuXHRcdFx0XHRcdHBhcnRzWzBdID0gdXRpbHMuemVyb1BhZFN0cmluZyhwYXJ0c1swXSwgaW50TGVuZ3RoKHN0ck51bSkpO1xuXHRcdFx0XHRcdG51bSA9IG1pbnVzICsgcGFydHMuam9pbignLicpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VDb250ZW50KG51bSwgci5zdGFydCwgci5lbmQpO1xuXHRcdFx0XHRlZGl0b3IuY3JlYXRlU2VsZWN0aW9uKHIuc3RhcnQsIHIuc3RhcnQgKyBudW0ubGVuZ3RoKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgbGVuZ3RoIG9mIGludGVnZXIgcGFydCBvZiBudW1iZXJcblx0ICogQHBhcmFtIHtTdHJpbmd9IG51bVxuXHQgKi9cblx0ZnVuY3Rpb24gaW50TGVuZ3RoKG51bSkge1xuXHRcdG51bSA9IG51bS5yZXBsYWNlKC9eXFwtLywgJycpO1xuXHRcdGlmICh+bnVtLmluZGV4T2YoJy4nKSkge1xuXHRcdFx0cmV0dXJuIG51bS5zcGxpdCgnLicpWzBdLmxlbmd0aDtcblx0XHR9XG5cblx0XHRyZXR1cm4gbnVtLmxlbmd0aDtcblx0fVxuXG5cdHZhciBhY3Rpb25zID0gcmVxdWlyZSgnYWN0aW9ucycpO1xuXHRfLmVhY2goWzEsIC0xLCAxMCwgLTEwLCAwLjEsIC0wLjFdLCBmdW5jdGlvbihudW0pIHtcblx0XHR2YXIgcHJlZml4ID0gbnVtID4gMCA/ICdpbmNyZW1lbnQnIDogJ2RlY3JlbWVudCc7XG5cblx0XHRhY3Rpb25zLmFkZChwcmVmaXggKyAnX251bWJlcl9ieV8nICsgU3RyaW5nKE1hdGguYWJzKG51bSkpLnJlcGxhY2UoJy4nLCAnJykuc3Vic3RyaW5nKDAsIDIpLCBmdW5jdGlvbihlZGl0b3IpIHtcblx0XHRcdHJldHVybiBpbmNyZW1lbnROdW1iZXIoZWRpdG9yLCBudW0pO1xuXHRcdH0sIHtsYWJlbDogJ051bWJlcnMvJyArIHByZWZpeC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByZWZpeC5zdWJzdHJpbmcoMSkgKyAnIG51bWJlciBieSAnICsgTWF0aC5hYnMobnVtKX0pO1xuXHR9KTtcbn0pOy8qKlxuICogQWN0aW9ucyB0byBpbnNlcnQgbGluZSBicmVha3MuIFNvbWUgc2ltcGxlIGVkaXRvcnMgKGxpa2UgYnJvd3NlcidzXG4gKiAmbHQ7dGV4dGFyZWEmZ3Q7LCBmb3IgZXhhbXBsZSkgZG8gbm90IHByb3ZpZGUgc3VjaCBzaW1wbGUgdGhpbmdzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZXhlYyhmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHZhciBhY3Rpb25zID0gcmVxdWlyZSgnYWN0aW9ucycpO1xuXHQvKiogQHR5cGUgZW1tZXQucHJlZmVyZW5jZXMgKi9cblx0dmFyIHByZWZzID0gcmVxdWlyZSgncHJlZmVyZW5jZXMnKTtcblxuXHQvLyBzZXR1cCBkZWZhdWx0IHByZWZlcmVuY2VzXG5cdHByZWZzLmRlZmluZSgnY3NzLmNsb3NlQnJhY2VJbmRlbnRhdGlvbicsICdcXG4nLFxuXHRcdFx0J0luZGVudGF0aW9uIGJlZm9yZSBjbG9zaW5nIGJyYWNlIG9mIENTUyBydWxlLiBTb21lIHVzZXJzIHByZWZlcmUgJ1xuXHRcdFx0KyAnaW5kZW50ZWQgY2xvc2luZyBicmFjZSBvZiBDU1MgcnVsZSBmb3IgYmV0dGVyIHJlYWRhYmlsaXR5LiAnXG5cdFx0XHQrICdUaGlzIHByZWZlcmVuY2XigJlzIHZhbHVlIHdpbGwgYmUgYXV0b21hdGljYWxseSBpbnNlcnRlZCBiZWZvcmUgJ1xuXHRcdFx0KyAnY2xvc2luZyBicmFjZSB3aGVuIHVzZXIgYWRkcyBuZXdsaW5lIGluIG5ld2x5IGNyZWF0ZWQgQ1NTIHJ1bGUgJ1xuXHRcdFx0KyAnKGUuZy4gd2hlbiDigJxJbnNlcnQgZm9ybWF0dGVkIGxpbmVicmVha+KAnSBhY3Rpb24gd2lsbCBiZSBwZXJmb3JtZWQgJ1xuXHRcdFx0KyAnaW4gQ1NTIGZpbGUpLiBJZiB5b3XigJlyZSBzdWNoIHVzZXIsIHlvdSBtYXkgd2FudCB0byB3cml0ZSBwdXQgYSB2YWx1ZSAnXG5cdFx0XHQrICdsaWtlIDxjb2RlPlxcXFxuXFxcXHQ8L2NvZGU+IGluIHRoaXMgcHJlZmVyZW5jZS4nKTtcblxuXHQvKipcblx0ICogSW5zZXJ0cyBuZXdsaW5lIGNoYXJhY3RlciB3aXRoIHByb3BlciBpbmRlbnRhdGlvbiBpbiBzcGVjaWZpYyBwb3NpdGlvbnMgb25seS5cblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHQgKiBAcmV0dXJuIHtCb29sZWFufSBSZXR1cm5zIDxjb2RlPnRydWU8L2NvZGU+IGlmIGxpbmUgYnJlYWsgd2FzIGluc2VydGVkXG5cdCAqL1xuXHRhY3Rpb25zLmFkZCgnaW5zZXJ0X2Zvcm1hdHRlZF9saW5lX2JyZWFrX29ubHknLCBmdW5jdGlvbihlZGl0b3IpIHtcblx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXHRcdC8qKiBAdHlwZSBlbW1ldC5yZXNvdXJjZXMgKi9cblx0XHR2YXIgcmVzID0gcmVxdWlyZSgncmVzb3VyY2VzJyk7XG5cblx0XHR2YXIgaW5mbyA9IHJlcXVpcmUoJ2VkaXRvclV0aWxzJykub3V0cHV0SW5mbyhlZGl0b3IpO1xuXHRcdHZhciBjYXJldFBvcyA9IGVkaXRvci5nZXRDYXJldFBvcygpO1xuXHRcdHZhciBubCA9IHV0aWxzLmdldE5ld2xpbmUoKTtcblxuXHRcdGlmIChfLmluY2x1ZGUoWydodG1sJywgJ3htbCcsICd4c2wnXSwgaW5mby5zeW50YXgpKSB7XG5cdFx0XHR2YXIgcGFkID0gcmVzLmdldFZhcmlhYmxlKCdpbmRlbnRhdGlvbicpO1xuXHRcdFx0Ly8gbGV0J3Mgc2VlIGlmIHdlJ3JlIGJyZWFraW5nIG5ld2x5IGNyZWF0ZWQgdGFnXG5cdFx0XHR2YXIgdGFnID0gcmVxdWlyZSgnaHRtbE1hdGNoZXInKS50YWcoaW5mby5jb250ZW50LCBjYXJldFBvcyk7XG5cdFx0XHRpZiAodGFnICYmICF0YWcuaW5uZXJSYW5nZS5sZW5ndGgoKSkge1xuXHRcdFx0XHRlZGl0b3IucmVwbGFjZUNvbnRlbnQobmwgKyBwYWQgKyB1dGlscy5nZXRDYXJldFBsYWNlaG9sZGVyKCkgKyBubCwgY2FyZXRQb3MpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGluZm8uc3ludGF4ID09ICdjc3MnKSB7XG5cdFx0XHQvKiogQHR5cGUgU3RyaW5nICovXG5cdFx0XHR2YXIgY29udGVudCA9IGluZm8uY29udGVudDtcblx0XHRcdGlmIChjYXJldFBvcyAmJiBjb250ZW50LmNoYXJBdChjYXJldFBvcyAtIDEpID09ICd7Jykge1xuXHRcdFx0XHR2YXIgYXBwZW5kID0gcHJlZnMuZ2V0KCdjc3MuY2xvc2VCcmFjZUluZGVudGF0aW9uJyk7XG5cdFx0XHRcdHZhciBwYWQgPSByZXMuZ2V0VmFyaWFibGUoJ2luZGVudGF0aW9uJyk7XG5cblx0XHRcdFx0dmFyIGhhc0Nsb3NlQnJhY2UgPSBjb250ZW50LmNoYXJBdChjYXJldFBvcykgPT0gJ30nO1xuXHRcdFx0XHRpZiAoIWhhc0Nsb3NlQnJhY2UpIHtcblx0XHRcdFx0XHQvLyBkbyB3ZSByZWFsbHkgbmVlZCBzcGVjaWFsIGZvcm1hdHRpbmcgaGVyZT9cblx0XHRcdFx0XHQvLyBjaGVjayBpZiB0aGlzIGlzIHJlYWxseSBhIG5ld2x5IGNyZWF0ZWQgcnVsZSxcblx0XHRcdFx0XHQvLyBsb29rIGFoZWFkIGZvciBhIGNsb3NpbmcgYnJhY2Vcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gY2FyZXRQb3MsIGlsID0gY29udGVudC5sZW5ndGgsIGNoOyBpIDwgaWw7IGkrKykge1xuXHRcdFx0XHRcdFx0Y2ggPSBjb250ZW50LmNoYXJBdChpKTtcblx0XHRcdFx0XHRcdGlmIChjaCA9PSAneycpIHtcblx0XHRcdFx0XHRcdFx0Ly8gb2ssIHRoaXMgaXMgYSBuZXcgcnVsZSB3aXRob3V0IGNsb3NpbmcgYnJhY2Vcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChjaCA9PSAnfScpIHtcblx0XHRcdFx0XHRcdFx0Ly8gbm90IGEgbmV3IHJ1bGUsIGp1c3QgYWRkIGluZGVudGF0aW9uXG5cdFx0XHRcdFx0XHRcdGFwcGVuZCA9ICcnO1xuXHRcdFx0XHRcdFx0XHRoYXNDbG9zZUJyYWNlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFoYXNDbG9zZUJyYWNlKSB7XG5cdFx0XHRcdFx0YXBwZW5kICs9ICd9Jztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGRlZmluaW5nIHJ1bGUgc2V0XG5cdFx0XHRcdHZhciBpbnNWYWx1ZSA9IG5sICsgcGFkICsgdXRpbHMuZ2V0Q2FyZXRQbGFjZWhvbGRlcigpICsgYXBwZW5kO1xuXHRcdFx0XHRlZGl0b3IucmVwbGFjZUNvbnRlbnQoaW5zVmFsdWUsIGNhcmV0UG9zKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LCB7aGlkZGVuOiB0cnVlfSk7XG5cblx0LyoqXG5cdCAqIEluc2VydHMgbmV3bGluZSBjaGFyYWN0ZXIgd2l0aCBwcm9wZXIgaW5kZW50YXRpb24uIFRoaXMgYWN0aW9uIGlzIHVzZWQgaW5cblx0ICogZWRpdG9ycyB0aGF0IGRvZXNuJ3QgaGF2ZSBpbmRlbnRhdGlvbiBjb250cm9sIChsaWtlIHRleHRhcmVhIGVsZW1lbnQpIHRvXG5cdCAqIHByb3ZpZGUgcHJvcGVyIGluZGVudGF0aW9uXG5cdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3IgRWRpdG9yIGluc3RhbmNlXG5cdCAqL1xuXHRhY3Rpb25zLmFkZCgnaW5zZXJ0X2Zvcm1hdHRlZF9saW5lX2JyZWFrJywgZnVuY3Rpb24oZWRpdG9yKSB7XG5cdFx0aWYgKCFhY3Rpb25zLnJ1bignaW5zZXJ0X2Zvcm1hdHRlZF9saW5lX2JyZWFrX29ubHknLCBlZGl0b3IpKSB7XG5cdFx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXG5cdFx0XHR2YXIgY3VyUGFkZGluZyA9IHJlcXVpcmUoJ2VkaXRvclV0aWxzJykuZ2V0Q3VycmVudExpbmVQYWRkaW5nKGVkaXRvcik7XG5cdFx0XHR2YXIgY29udGVudCA9IFN0cmluZyhlZGl0b3IuZ2V0Q29udGVudCgpKTtcblx0XHRcdHZhciBjYXJldFBvcyA9IGVkaXRvci5nZXRDYXJldFBvcygpO1xuXHRcdFx0dmFyIGxlbiA9IGNvbnRlbnQubGVuZ3RoO1xuXHRcdFx0dmFyIG5sID0gdXRpbHMuZ2V0TmV3bGluZSgpO1xuXG5cdFx0XHQvLyBjaGVjayBvdXQgbmV4dCBsaW5lIHBhZGRpbmdcblx0XHRcdHZhciBsaW5lUmFuZ2UgPSBlZGl0b3IuZ2V0Q3VycmVudExpbmVSYW5nZSgpO1xuXHRcdFx0dmFyIG5leHRQYWRkaW5nID0gJyc7XG5cblx0XHRcdGZvciAodmFyIGkgPSBsaW5lUmFuZ2UuZW5kICsgMSwgY2g7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0XHRjaCA9IGNvbnRlbnQuY2hhckF0KGkpO1xuXHRcdFx0XHRpZiAoY2ggPT0gJyAnIHx8IGNoID09ICdcXHQnKVxuXHRcdFx0XHRcdG5leHRQYWRkaW5nICs9IGNoO1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChuZXh0UGFkZGluZy5sZW5ndGggPiBjdXJQYWRkaW5nLmxlbmd0aClcblx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VDb250ZW50KG5sICsgbmV4dFBhZGRpbmcsIGNhcmV0UG9zLCBjYXJldFBvcywgdHJ1ZSk7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdGVkaXRvci5yZXBsYWNlQ29udGVudChubCwgY2FyZXRQb3MpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9LCB7aGlkZGVuOiB0cnVlfSk7XG59KTsvKipcbiAqIE1lcmdlcyBzZWxlY3RlZCBsaW5lcyBvciBsaW5lcyBiZXR3ZWVuIFhIVE1MIHRhZyBwYWlyc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmV4ZWMoZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHRyZXF1aXJlKCdhY3Rpb25zJykuYWRkKCdtZXJnZV9saW5lcycsIGZ1bmN0aW9uKGVkaXRvcikge1xuXHRcdHZhciBtYXRjaGVyID0gcmVxdWlyZSgnaHRtbE1hdGNoZXInKTtcblx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXHRcdHZhciBlZGl0b3JVdGlscyA9IHJlcXVpcmUoJ2VkaXRvclV0aWxzJyk7XG5cdFx0dmFyIGluZm8gPSBlZGl0b3JVdGlscy5vdXRwdXRJbmZvKGVkaXRvcik7XG5cblx0XHQvKiogQHR5cGUgUmFuZ2UgKi9cblx0XHR2YXIgc2VsZWN0aW9uID0gcmVxdWlyZSgncmFuZ2UnKS5jcmVhdGUoZWRpdG9yLmdldFNlbGVjdGlvblJhbmdlKCkpO1xuXHRcdGlmICghc2VsZWN0aW9uLmxlbmd0aCgpKSB7XG5cdFx0XHQvLyBmaW5kIG1hdGNoaW5nIHRhZ1xuXHRcdFx0dmFyIHBhaXIgPSBtYXRjaGVyLmZpbmQoaW5mby5jb250ZW50LCBlZGl0b3IuZ2V0Q2FyZXRQb3MoKSk7XG5cdFx0XHRpZiAocGFpcikge1xuXHRcdFx0XHRzZWxlY3Rpb24gPSBwYWlyLm91dGVyUmFuZ2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHNlbGVjdGlvbi5sZW5ndGgoKSkge1xuXHRcdFx0Ly8gZ290IHJhbmdlLCBtZXJnZSBsaW5lc1xuXHRcdFx0dmFyIHRleHQgPSAgc2VsZWN0aW9uLnN1YnN0cmluZyhpbmZvLmNvbnRlbnQpO1xuXHRcdFx0dmFyIGxpbmVzID0gdXRpbHMuc3BsaXRCeUxpbmVzKHRleHQpO1xuXG5cdFx0XHRmb3IgKHZhciBpID0gMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGxpbmVzW2ldID0gbGluZXNbaV0ucmVwbGFjZSgvXlxccysvLCAnJyk7XG5cdFx0XHR9XG5cblx0XHRcdHRleHQgPSBsaW5lcy5qb2luKCcnKS5yZXBsYWNlKC9cXHN7Mix9LywgJyAnKTtcblx0XHRcdHZhciB0ZXh0TGVuID0gdGV4dC5sZW5ndGg7XG5cdFx0XHR0ZXh0ID0gdXRpbHMuZXNjYXBlVGV4dCh0ZXh0KTtcblx0XHRcdGVkaXRvci5yZXBsYWNlQ29udGVudCh0ZXh0LCBzZWxlY3Rpb24uc3RhcnQsIHNlbGVjdGlvbi5lbmQpO1xuXHRcdFx0ZWRpdG9yLmNyZWF0ZVNlbGVjdGlvbihzZWxlY3Rpb24uc3RhcnQsIHNlbGVjdGlvbi5zdGFydCArIHRleHRMZW4pO1xuXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xufSk7LyoqXG4gKiBFbmNvZGVzL2RlY29kZXMgaW1hZ2UgdW5kZXIgY3Vyc29yIHRvL2Zyb20gYmFzZTY0XG4gKiBAcGFyYW0ge0lFbW1ldEVkaXRvcn0gZWRpdG9yXG4gKiBAc2luY2UgMC42NVxuICpcbiAqIEBtZW1iZXJPZiBfX2Jhc2U2NEFjdGlvbkRlZmluZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZXhlYyhmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHJlcXVpcmUoJ2FjdGlvbnMnKS5hZGQoJ2VuY29kZV9kZWNvZGVfZGF0YV91cmwnLCBmdW5jdGlvbihlZGl0b3IpIHtcblx0XHR2YXIgZGF0YSA9IFN0cmluZyhlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpO1xuXHRcdHZhciBjYXJldFBvcyA9IGVkaXRvci5nZXRDYXJldFBvcygpO1xuXG5cdFx0aWYgKCFkYXRhKSB7XG5cdFx0XHQvLyBubyBzZWxlY3Rpb24sIHRyeSB0byBmaW5kIGltYWdlIGJvdW5kcyBmcm9tIGN1cnJlbnQgY2FyZXQgcG9zaXRpb25cblx0XHRcdHZhciB0ZXh0ID0gU3RyaW5nKGVkaXRvci5nZXRDb250ZW50KCkpLCAgbTtcblx0XHRcdHdoaWxlIChjYXJldFBvcy0tID49IDApIHtcblx0XHRcdFx0aWYgKHN0YXJ0c1dpdGgoJ3NyYz0nLCB0ZXh0LCBjYXJldFBvcykpIHsgLy8gZm91bmQgPGltZyBzcmM9XCJcIj5cblx0XHRcdFx0XHRpZiAobSA9IHRleHQuc3Vic3RyKGNhcmV0UG9zKS5tYXRjaCgvXihzcmM9KFtcIiddKT8pKFteJ1wiPD5cXHNdKylcXDE/LykpIHtcblx0XHRcdFx0XHRcdGRhdGEgPSBtWzNdO1xuXHRcdFx0XHRcdFx0Y2FyZXRQb3MgKz0gbVsxXS5sZW5ndGg7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHN0YXJ0c1dpdGgoJ3VybCgnLCB0ZXh0LCBjYXJldFBvcykpIHsgLy8gZm91bmQgQ1NTIHVybCgpIHBhdHRlcm5cblx0XHRcdFx0XHRpZiAobSA9IHRleHQuc3Vic3RyKGNhcmV0UG9zKS5tYXRjaCgvXih1cmxcXCgoWydcIl0pPykoW14nXCJcXClcXHNdKylcXDE/LykpIHtcblx0XHRcdFx0XHRcdGRhdGEgPSBtWzNdO1xuXHRcdFx0XHRcdFx0Y2FyZXRQb3MgKz0gbVsxXS5sZW5ndGg7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGRhdGEpIHtcblx0XHRcdGlmIChzdGFydHNXaXRoKCdkYXRhOicsIGRhdGEpKVxuXHRcdFx0XHRyZXR1cm4gZGVjb2RlRnJvbUJhc2U2NChlZGl0b3IsIGRhdGEsIGNhcmV0UG9zKTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0cmV0dXJuIGVuY29kZVRvQmFzZTY0KGVkaXRvciwgZGF0YSwgY2FyZXRQb3MpO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSwge2xhYmVsOiAnRW5jb2RlXFxcXERlY29kZSBkYXRhOlVSTCBpbWFnZSd9KTtcblxuXHQvKipcblx0ICogVGVzdCBpZiA8Y29kZT50ZXh0PC9jb2RlPiBzdGFydHMgd2l0aCA8Y29kZT50b2tlbjwvY29kZT4gYXQgPGNvZGU+cG9zPC9jb2RlPlxuXHQgKiBwb3NpdGlvbi4gSWYgPGNvZGU+cG9zPC9jb2RlPiBpcyBvbWl0dGVkLCBzZWFyY2ggZnJvbSBiZWdpbm5pbmcgb2YgdGV4dFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdG9rZW4gVG9rZW4gdG8gdGVzdFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBXaGVyZSB0byBzZWFyY2hcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvcyBQb3NpdGlvbiB3aGVyZSB0byBzdGFydCBzZWFyY2hcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICogQHNpbmNlIDAuNjVcblx0ICovXG5cdGZ1bmN0aW9uIHN0YXJ0c1dpdGgodG9rZW4sIHRleHQsIHBvcykge1xuXHRcdHBvcyA9IHBvcyB8fCAwO1xuXHRcdHJldHVybiB0ZXh0LmNoYXJBdChwb3MpID09IHRva2VuLmNoYXJBdCgwKSAmJiB0ZXh0LnN1YnN0cihwb3MsIHRva2VuLmxlbmd0aCkgPT0gdG9rZW47XG5cdH1cblxuXHQvKipcblx0ICogRW5jb2RlcyBpbWFnZSB0byBiYXNlNjRcblx0ICpcblx0ICogQHBhcmFtIHtJRW1tZXRFZGl0b3J9IGVkaXRvclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW1nUGF0aCBQYXRoIHRvIGltYWdlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3MgQ2FyZXQgcG9zaXRpb24gd2hlcmUgaW1hZ2UgaXMgbG9jYXRlZCBpbiB0aGUgZWRpdG9yXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBlbmNvZGVUb0Jhc2U2NChlZGl0b3IsIGltZ1BhdGgsIHBvcykge1xuXHRcdHZhciBmaWxlID0gcmVxdWlyZSgnZmlsZScpO1xuXHRcdHZhciBhY3Rpb25VdGlscyA9IHJlcXVpcmUoJ2FjdGlvblV0aWxzJyk7XG5cblx0XHR2YXIgZWRpdG9yRmlsZSA9IGVkaXRvci5nZXRGaWxlUGF0aCgpO1xuXHRcdHZhciBkZWZhdWx0TWltZVR5cGUgPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJztcblxuXHRcdGlmIChlZGl0b3JGaWxlID09PSBudWxsKSB7XG5cdFx0XHR0aHJvdyBcIllvdSBzaG91bGQgc2F2ZSB5b3VyIGZpbGUgYmVmb3JlIHVzaW5nIHRoaXMgYWN0aW9uXCI7XG5cdFx0fVxuXG5cdFx0Ly8gbG9jYXRlIHJlYWwgaW1hZ2UgcGF0aFxuXHRcdHZhciByZWFsSW1nUGF0aCA9IGZpbGUubG9jYXRlRmlsZShlZGl0b3JGaWxlLCBpbWdQYXRoKTtcblx0XHRpZiAocmVhbEltZ1BhdGggPT09IG51bGwpIHtcblx0XHRcdHRocm93IFwiQ2FuJ3QgZmluZCBcIiArIGltZ1BhdGggKyAnIGZpbGUnO1xuXHRcdH1cblxuXHRcdGZpbGUucmVhZChyZWFsSW1nUGF0aCwgZnVuY3Rpb24oZXJyLCBjb250ZW50KSB7XG5cdFx0XHRpZiAoZXJyKSB7XG5cdFx0XHRcdHRocm93ICdVbmFibGUgdG8gcmVhZCAnICsgcmVhbEltZ1BhdGggKyAnOiAnICsgZXJyO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgYjY0ID0gcmVxdWlyZSgnYmFzZTY0JykuZW5jb2RlKFN0cmluZyhjb250ZW50KSk7XG5cdFx0XHRpZiAoIWI2NCkge1xuXHRcdFx0XHR0aHJvdyBcIkNhbid0IGVuY29kZSBmaWxlIGNvbnRlbnQgdG8gYmFzZTY0XCI7XG5cdFx0XHR9XG5cblx0XHRcdGI2NCA9ICdkYXRhOicgKyAoYWN0aW9uVXRpbHMubWltZVR5cGVzW1N0cmluZyhmaWxlLmdldEV4dChyZWFsSW1nUGF0aCkpXSB8fCBkZWZhdWx0TWltZVR5cGUpICtcblx0XHRcdFx0JztiYXNlNjQsJyArIGI2NDtcblxuXHRcdFx0ZWRpdG9yLnJlcGxhY2VDb250ZW50KCckMCcgKyBiNjQsIHBvcywgcG9zICsgaW1nUGF0aC5sZW5ndGgpO1xuXHRcdH0pO1xuXG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWNvZGVzIGJhc2U2NCBzdHJpbmcgYmFjayB0byBmaWxlLlxuXHQgKiBAcGFyYW0ge0lFbW1ldEVkaXRvcn0gZWRpdG9yXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhIEJhc2U2NC1lbmNvZGVkIGZpbGUgY29udGVudFxuXHQgKiBAcGFyYW0ge051bWJlcn0gcG9zIENhcmV0IHBvc2l0aW9uIHdoZXJlIGltYWdlIGlzIGxvY2F0ZWQgaW4gdGhlIGVkaXRvclxuXHQgKi9cblx0ZnVuY3Rpb24gZGVjb2RlRnJvbUJhc2U2NChlZGl0b3IsIGRhdGEsIHBvcykge1xuXHRcdC8vIGFzayB1c2VyIHRvIGVudGVyIHBhdGggdG8gZmlsZVxuXHRcdHZhciBmaWxlUGF0aCA9IFN0cmluZyhlZGl0b3IucHJvbXB0KCdFbnRlciBwYXRoIHRvIGZpbGUgKGFic29sdXRlIG9yIHJlbGF0aXZlKScpKTtcblx0XHRpZiAoIWZpbGVQYXRoKVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXG5cdFx0dmFyIGZpbGUgPSByZXF1aXJlKCdmaWxlJyk7XG5cdFx0dmFyIGFic1BhdGggPSBmaWxlLmNyZWF0ZVBhdGgoZWRpdG9yLmdldEZpbGVQYXRoKCksIGZpbGVQYXRoKTtcblx0XHRpZiAoIWFic1BhdGgpIHtcblx0XHRcdHRocm93IFwiQ2FuJ3Qgc2F2ZSBmaWxlXCI7XG5cdFx0fVxuXG5cdFx0ZmlsZS5zYXZlKGFic1BhdGgsIHJlcXVpcmUoJ2Jhc2U2NCcpLmRlY29kZSggZGF0YS5yZXBsYWNlKC9eZGF0YVxcOi4rPzsuKz8sLywgJycpICkpO1xuXHRcdGVkaXRvci5yZXBsYWNlQ29udGVudCgnJDAnICsgZmlsZVBhdGgsIHBvcywgcG9zICsgZGF0YS5sZW5ndGgpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG59KTtcbi8qKlxuICogQXV0b21hdGljYWxseSB1cGRhdGVzIGltYWdlIHNpemUgYXR0cmlidXRlcyBpbiBIVE1MJ3MgJmx0O2ltZyZndDsgZWxlbWVudCBvclxuICogQ1NTIHJ1bGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlcXVpcmVcbiAqIEBwYXJhbSB7VW5kZXJzY29yZX0gX1xuICogQGNvbnN0cnVjdG9yXG4gKiBAbWVtYmVyT2YgX191cGRhdGVJbWFnZVNpemVBY3Rpb25cbiAqL1xuZW1tZXQuZXhlYyhmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdC8qKlxuXHQgKiBVcGRhdGVzIGltYWdlIHNpemUgb2YgJmx0O2ltZyBzcmM9XCJcIiZndDsgdGFnXG5cdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIHVwZGF0ZUltYWdlU2l6ZUhUTUwoZWRpdG9yKSB7XG5cdFx0dmFyIG9mZnNldCA9IGVkaXRvci5nZXRDYXJldFBvcygpO1xuXG5cdFx0Ly8gZmluZCB0YWcgZnJvbSBjdXJyZW50IGNhcmV0IHBvc2l0aW9uXG5cdFx0dmFyIGluZm8gPSByZXF1aXJlKCdlZGl0b3JVdGlscycpLm91dHB1dEluZm8oZWRpdG9yKTtcblx0XHR2YXIgeG1sRWxlbSA9IHJlcXVpcmUoJ3htbEVkaXRUcmVlJykucGFyc2VGcm9tUG9zaXRpb24oaW5mby5jb250ZW50LCBvZmZzZXQsIHRydWUpO1xuXHRcdGlmICh4bWxFbGVtICYmICh4bWxFbGVtLm5hbWUoKSB8fCAnJykudG9Mb3dlckNhc2UoKSA9PSAnaW1nJykge1xuXHRcdFx0Z2V0SW1hZ2VTaXplRm9yU291cmNlKGVkaXRvciwgeG1sRWxlbS52YWx1ZSgnc3JjJyksIGZ1bmN0aW9uKHNpemUpIHtcblx0XHRcdFx0aWYgKHNpemUpIHtcblx0XHRcdFx0XHR2YXIgY29tcG91bmREYXRhID0geG1sRWxlbS5yYW5nZSh0cnVlKTtcblx0XHRcdFx0XHR4bWxFbGVtLnZhbHVlKCd3aWR0aCcsIHNpemUud2lkdGgpO1xuXHRcdFx0XHRcdHhtbEVsZW0udmFsdWUoJ2hlaWdodCcsIHNpemUuaGVpZ2h0LCB4bWxFbGVtLmluZGV4T2YoJ3dpZHRoJykgKyAxKTtcblxuXHRcdFx0XHRcdHJlcXVpcmUoJ2FjdGlvblV0aWxzJykuY29tcG91bmRVcGRhdGUoZWRpdG9yLCBfLmV4dGVuZChjb21wb3VuZERhdGEsIHtcblx0XHRcdFx0XHRcdGRhdGE6IHhtbEVsZW0udG9TdHJpbmcoKSxcblx0XHRcdFx0XHRcdGNhcmV0OiBvZmZzZXRcblx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGVzIGltYWdlIHNpemUgb2YgQ1NTIHByb3BlcnR5XG5cdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIHVwZGF0ZUltYWdlU2l6ZUNTUyhlZGl0b3IpIHtcblx0XHR2YXIgb2Zmc2V0ID0gZWRpdG9yLmdldENhcmV0UG9zKCk7XG5cblx0XHQvLyBmaW5kIHRhZyBmcm9tIGN1cnJlbnQgY2FyZXQgcG9zaXRpb25cblx0XHR2YXIgaW5mbyA9IHJlcXVpcmUoJ2VkaXRvclV0aWxzJykub3V0cHV0SW5mbyhlZGl0b3IpO1xuXHRcdHZhciBjc3NSdWxlID0gcmVxdWlyZSgnY3NzRWRpdFRyZWUnKS5wYXJzZUZyb21Qb3NpdGlvbihpbmZvLmNvbnRlbnQsIG9mZnNldCwgdHJ1ZSk7XG5cdFx0aWYgKGNzc1J1bGUpIHtcblx0XHRcdC8vIGNoZWNrIGlmIHRoZXJlIGlzIHByb3BlcnR5IHdpdGggaW1hZ2UgdW5kZXIgY2FyZXRcblx0XHRcdHZhciBwcm9wID0gY3NzUnVsZS5pdGVtRnJvbVBvc2l0aW9uKG9mZnNldCwgdHJ1ZSksIG07XG5cdFx0XHRpZiAocHJvcCAmJiAobSA9IC91cmxcXCgoW1wiJ10/KSguKz8pXFwxXFwpL2kuZXhlYyhwcm9wLnZhbHVlKCkgfHwgJycpKSkge1xuXHRcdFx0XHRnZXRJbWFnZVNpemVGb3JTb3VyY2UoZWRpdG9yLCBtWzJdLCBmdW5jdGlvbihzaXplKSB7XG5cdFx0XHRcdFx0aWYgKHNpemUpIHtcblx0XHRcdFx0XHRcdHZhciBjb21wb3VuZERhdGEgPSBjc3NSdWxlLnJhbmdlKHRydWUpO1xuXHRcdFx0XHRcdFx0Y3NzUnVsZS52YWx1ZSgnd2lkdGgnLCBzaXplLndpZHRoICsgJ3B4Jyk7XG5cdFx0XHRcdFx0XHRjc3NSdWxlLnZhbHVlKCdoZWlnaHQnLCBzaXplLmhlaWdodCArICdweCcsIGNzc1J1bGUuaW5kZXhPZignd2lkdGgnKSArIDEpO1xuXG5cdFx0XHRcdFx0XHRyZXF1aXJlKCdhY3Rpb25VdGlscycpLmNvbXBvdW5kVXBkYXRlKGVkaXRvciwgXy5leHRlbmQoY29tcG91bmREYXRhLCB7XG5cdFx0XHRcdFx0XHRcdGRhdGE6IGNzc1J1bGUudG9TdHJpbmcoKSxcblx0XHRcdFx0XHRcdFx0Y2FyZXQ6IG9mZnNldFxuXHRcdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgaW1hZ2UgZGltZW5zaW9ucyBmb3Igc291cmNlXG5cdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3Jcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNyYyBJbWFnZSBzb3VyY2UgKHBhdGggb3IgZGF0YTp1cmwpXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRJbWFnZVNpemVGb3JTb3VyY2UoZWRpdG9yLCBzcmMsIGNhbGxiYWNrKSB7XG5cdFx0dmFyIGZpbGVDb250ZW50O1xuXHRcdHZhciBhdSA9IHJlcXVpcmUoJ2FjdGlvblV0aWxzJyk7XG5cdFx0aWYgKHNyYykge1xuXHRcdFx0Ly8gY2hlY2sgaWYgaXQgaXMgZGF0YTp1cmxcblx0XHRcdGlmICgvXmRhdGE6Ly50ZXN0KHNyYykpIHtcblx0XHRcdFx0ZmlsZUNvbnRlbnQgPSByZXF1aXJlKCdiYXNlNjQnKS5kZWNvZGUoIHNyYy5yZXBsYWNlKC9eZGF0YVxcOi4rPzsuKz8sLywgJycpICk7XG5cdFx0XHRcdHJldHVybiBjYWxsYmFjayhhdS5nZXRJbWFnZVNpemUoZmlsZUNvbnRlbnQpKTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGZpbGUgPSByZXF1aXJlKCdmaWxlJyk7XG5cdFx0XHR2YXIgYWJzUGF0aCA9IGZpbGUubG9jYXRlRmlsZShlZGl0b3IuZ2V0RmlsZVBhdGgoKSwgc3JjKTtcblx0XHRcdGlmIChhYnNQYXRoID09PSBudWxsKSB7XG5cdFx0XHRcdHRocm93IFwiQ2FuJ3QgZmluZCBcIiArIHNyYyArICcgZmlsZSc7XG5cdFx0XHR9XG5cblx0XHRcdGZpbGUucmVhZChhYnNQYXRoLCBmdW5jdGlvbihlcnIsIGNvbnRlbnQpIHtcblx0XHRcdFx0aWYgKGVycikge1xuXHRcdFx0XHRcdHRocm93ICdVbmFibGUgdG8gcmVhZCAnICsgYWJzUGF0aCArICc6ICcgKyBlcnI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb250ZW50ID0gU3RyaW5nKGNvbnRlbnQpO1xuXHRcdFx0XHRjYWxsYmFjayhhdS5nZXRJbWFnZVNpemUoY29udGVudCkpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cmVxdWlyZSgnYWN0aW9ucycpLmFkZCgndXBkYXRlX2ltYWdlX3NpemUnLCBmdW5jdGlvbihlZGl0b3IpIHtcblx0XHQvLyB0aGlzIGFjdGlvbiB3aWxsIGRlZmluaXRlbHkgd29u4oCZdCB3b3JrIGluIFNBU1MgZGlhbGVjdCxcblx0XHQvLyBidXQgbWF5IHdvcmsgaW4gU0NTUyBvciBMRVNTXG5cdFx0aWYgKF8uaW5jbHVkZShbJ2NzcycsICdsZXNzJywgJ3Njc3MnXSwgU3RyaW5nKGVkaXRvci5nZXRTeW50YXgoKSkpKSB7XG5cdFx0XHR1cGRhdGVJbWFnZVNpemVDU1MoZWRpdG9yKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dXBkYXRlSW1hZ2VTaXplSFRNTChlZGl0b3IpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9KTtcbn0pOy8qKlxuICogUmVzb2x2ZXIgZm9yIGZhc3QgQ1NTIHR5cGluZy4gSGFuZGxlcyBhYmJyZXZpYXRpb25zIHdpdGggdGhlIGZvbGxvd2luZ1xuICogbm90YXRpb246PGJyPlxuICpcbiAqIDxjb2RlPigtdmVuZG9yIHByZWZpeCk/cHJvcGVydHkodmFsdWUpKighKT88L2NvZGU+XG4gKlxuICogPGJyPjxicj5cbiAqIDxiPkFiYnJldmlhdGlvbiBoYW5kbGluZzwvYj48YnI+XG4gKlxuICogQnkgZGVmYXVsdCwgRW1tZXQgc2VhcmNoZXMgZm9yIG1hdGNoaW5nIHNuaXBwZXQgZGVmaW5pdGlvbiBmb3IgcHJvdmlkZWQgYWJicmV2aWF0aW9uLlxuICogSWYgc25pcHBldCB3YXNuJ3QgZm91bmQsIEVtbWV0IGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVzIGVsZW1lbnQgd2l0aFxuICogYWJicmV2aWF0aW9uJ3MgbmFtZS4gRm9yIGV4YW1wbGUsIDxjb2RlPmZvbzwvY29kZT4gYWJicmV2aWF0aW9uIHdpbGwgZ2VuZXJhdGVcbiAqIDxjb2RlPiZsdDtmb28mZ3Q7Jmx0Oy9mb28mZ3Q7PC9jb2RlPiBvdXRwdXQuXG4gKiA8YnI+PGJyPlxuICogVGhpcyBtb2R1bGUgd2lsbCBjYXB0dXJlIGFsbCBleHBhbmRlZCBwcm9wZXJ0aWVzIGFuZCB1cGdyYWRlIHRoZW0gd2l0aCB2YWx1ZXMsXG4gKiB2ZW5kb3IgcHJlZml4ZXMgYW5kICFpbXBvcnRhbnQgZGVjbGFyYXRpb25zLiBBbGwgdW5tYXRjaGVkIGFiYnJldmlhdGlvbnMgd2lsbFxuICogYmUgYXV0b21hdGljYWxseSB0cmFuc2Zvcm1lZCBpbnRvIDxjb2RlPnByb3BlcnR5LW5hbWU6ICR7MX08L2NvZGU+IHNuaXBwZXRzLlxuICpcbiAqIDxiPlZlbmRvciBwcmVmaXhlczxiPjxicj5cbiAqXG4gKiBJZiBDU1MtcHJvcGVydHkgaXMgcHJlY2VkZWQgd2l0aCBkYXNoLCByZXNvbHZlciBzaG91bGQgb3V0cHV0IHByb3BlcnR5IHdpdGhcbiAqIGFsbCA8aT5rbm93bjwvaT4gdmVuZG9yIHByZWZpeGVzLiBGb3IgZXhhbXBsZSwgaWYgPGNvZGU+YnJhZDwvY29kZT5cbiAqIGFiYnJldmlhdGlvbiBnZW5lcmF0ZXMgPGNvZGU+Ym9yZGVyLXJhZGl1czogJHt2YWx1ZX07PC9jb2RlPiBzbmlwcGV0LFxuICogdGhlIDxjb2RlPi1icmFkPC9jb2RlPiBhYmJyZXZpYXRpb24gc2hvdWxkIGdlbmVyYXRlOlxuICogPHByZT48Y29kZT5cbiAqIC13ZWJraXQtYm9yZGVyLXJhZGl1czogJHt2YWx1ZX07XG4gKiAtbW96LWJvcmRlci1yYWRpdXM6ICR7dmFsdWV9O1xuICogYm9yZGVyLXJhZGl1czogJHt2YWx1ZX07XG4gKiA8L2NvZGU+PC9wcmU+XG4gKiBOb3RlIHRoYXQgPGk+bzwvaT4gYW5kIDxpPm1zPC9pPiBwcmVmaXhlcyBhcmUgb21pdHRlZCBzaW5jZSBPcGVyYSBhbmQgSUVcbiAqIHN1cHBvcnRzIHVucHJlZml4ZWQgcHJvcGVydHkuPGJyPjxicj5cbiAqXG4gKiBVc2VycyBjYW4gYWxzbyBwcm92aWRlIGFuIGV4cGxpY2l0IGxpc3Qgb2Ygb25lLWNoYXJhY3RlciBwcmVmaXhlcyBmb3IgYW55XG4gKiBDU1MgcHJvcGVydHkuIEZvciBleGFtcGxlLCA8Y29kZT4td20tZmxvYXQ8L2NvZGU+IHdpbGwgcHJvZHVjZVxuICpcbiAqIDxwcmU+PGNvZGU+XG4gKiAtd2Via2l0LWZsb2F0OiAkezF9O1xuICogLW1vei1mbG9hdDogJHsxfTtcbiAqIGZsb2F0OiAkezF9O1xuICogPC9jb2RlPjwvcHJlPlxuICpcbiAqIEFsdGhvdWdoIHRoaXMgZXhhbXBsZSBsb29rcyBwb2ludGxlc3MsIHVzZXJzIGNhbiB1c2UgdGhpcyBmZWF0dXJlIHRvIHdyaXRlXG4gKiBjdXR0aW5nLWVkZ2UgcHJvcGVydGllcyBpbXBsZW1lbnRlZCBieSBicm93c2VyIHZlbmRvcnMgcmVjZW50bHkuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAbWVtYmVyT2YgX19jc3NSZXNvbHZlckRlZmluZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmRlZmluZSgnY3NzUmVzb2x2ZXInLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdC8qKiBCYWNrLXJlZmVyZW5jZSB0byBtb2R1bGUgKi9cblx0dmFyIG1vZHVsZSA9IG51bGw7XG5cblx0dmFyIHByZWZpeE9iaiA9IHtcblx0XHQvKiogUmVhbCB2ZW5kb3IgcHJlZml4IG5hbWUgKi9cblx0XHRwcmVmaXg6ICdlbW1ldCcsXG5cblx0XHQvKipcblx0XHQgKiBJbmRpY2F0ZXMgdGhpcyBwcmVmaXggaXMgb2Jzb2xldGUgYW5kIHNob3VsZCd0IGJlIHVzZWQgd2hlbiB1c2VyXG5cdFx0ICogd2FudHMgdG8gZ2VuZXJhdGUgYWxsLXByZWZpeGVkIHByb3BlcnRpZXNcblx0XHQgKi9cblx0XHRvYnNvbGV0ZTogZmFsc2UsXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHByZWZpeGVkIENTUyBwcm9wZXJ0eSBuYW1lXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVW5wcmVmaXhlZCBDU1MgcHJvcGVydHlcblx0XHQgKi9cblx0XHR0cmFuc2Zvcm1OYW1lOiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRyZXR1cm4gJy0nICsgdGhpcy5wcmVmaXggKyAnLScgKyBuYW1lO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBMaXN0IG9mIHVucHJlZml4ZWQgQ1NTIHByb3BlcnRpZXMgdGhhdCBzdXBwb3J0ZWQgYnlcblx0XHQgKiBjdXJyZW50IHByZWZpeC4gVGhpcyBsaXN0IGlzIHVzZWQgdG8gZ2VuZXJhdGUgYWxsLXByZWZpeGVkIHByb3BlcnR5XG5cdFx0ICogQHJldHVybnMge0FycmF5fVxuXHRcdCAqL1xuXHRcdHByb3BlcnRpZXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGdldFByb3BlcnRpZXMoJ2Nzcy4nICsgdGhpcy5wcmVmaXggKyAnUHJvcGVydGllcycpIHx8IFtdO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDaGVjayBpZiBnaXZlbiBwcm9wZXJ0eSBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBwcmVmaXhcblx0XHQgKiBAcGFyYW0gbmFtZVxuXHRcdCAqL1xuXHRcdHN1cHBvcnRzOiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRyZXR1cm4gXy5pbmNsdWRlKHRoaXMucHJvcGVydGllcygpLCBuYW1lKTtcblx0XHR9XG5cdH07XG5cblxuXHQvKipcblx0ICogTGlzdCBvZiByZWdpc3RlcmVkIG9uZS1jaGFyYWN0ZXIgcHJlZml4ZXMuIEtleSBpcyBhIG9uZS1jaGFyYWN0ZXIgcHJlZml4LFxuXHQgKiB2YWx1ZSBpcyBhbiA8Y29kZT5wcmVmaXhPYmo8L2NvZGU+IG9iamVjdFxuXHQgKi9cblx0dmFyIHZlbmRvclByZWZpeGVzID0ge307XG5cblx0dmFyIGRlZmF1bHRWYWx1ZSA9ICckezF9Oyc7XG5cblx0Ly8gWFhYIG1vZHVsZSBwcmVmZXJlbmNlc1xuXHR2YXIgcHJlZnMgPSByZXF1aXJlKCdwcmVmZXJlbmNlcycpO1xuXHRwcmVmcy5kZWZpbmUoJ2Nzcy52YWx1ZVNlcGFyYXRvcicsICc6ICcsXG5cdFx0XHQnRGVmaW5lcyBhIHN5bWJvbCB0aGF0IHNob3VsZCBiZSBwbGFjZWQgYmV0d2VlbiBDU1MgcHJvcGVydHkgYW5kICdcblx0XHRcdCsgJ3ZhbHVlIHdoZW4gZXhwYW5kaW5nIENTUyBhYmJyZXZpYXRpb25zLicpO1xuXHRwcmVmcy5kZWZpbmUoJ2Nzcy5wcm9wZXJ0eUVuZCcsICc7Jyxcblx0XHRcdCdEZWZpbmVzIGEgc3ltYm9sIHRoYXQgc2hvdWxkIGJlIHBsYWNlZCBhdCB0aGUgZW5kIG9mIENTUyBwcm9wZXJ0eSAgJ1xuXHRcdFx0KyAnd2hlbiBleHBhbmRpbmcgQ1NTIGFiYnJldmlhdGlvbnMuJyk7XG5cblx0cHJlZnMuZGVmaW5lKCdzdHlsdXMudmFsdWVTZXBhcmF0b3InLCAnICcsXG5cdFx0XHQnRGVmaW5lcyBhIHN5bWJvbCB0aGF0IHNob3VsZCBiZSBwbGFjZWQgYmV0d2VlbiBDU1MgcHJvcGVydHkgYW5kICdcblx0XHRcdCsgJ3ZhbHVlIHdoZW4gZXhwYW5kaW5nIENTUyBhYmJyZXZpYXRpb25zIGluIFN0eWx1cyBkaWFsZWN0LicpO1xuXHRwcmVmcy5kZWZpbmUoJ3N0eWx1cy5wcm9wZXJ0eUVuZCcsICcnLFxuXHRcdFx0J0RlZmluZXMgYSBzeW1ib2wgdGhhdCBzaG91bGQgYmUgcGxhY2VkIGF0IHRoZSBlbmQgb2YgQ1NTIHByb3BlcnR5ICAnXG5cdFx0XHQrICd3aGVuIGV4cGFuZGluZyBDU1MgYWJicmV2aWF0aW9ucyBpbiBTdHlsdXMgZGlhbGVjdC4nKTtcblxuXHRwcmVmcy5kZWZpbmUoJ3Nhc3MucHJvcGVydHlFbmQnLCAnJyxcblx0XHRcdCdEZWZpbmVzIGEgc3ltYm9sIHRoYXQgc2hvdWxkIGJlIHBsYWNlZCBhdCB0aGUgZW5kIG9mIENTUyBwcm9wZXJ0eSAgJ1xuXHRcdFx0KyAnd2hlbiBleHBhbmRpbmcgQ1NTIGFiYnJldmlhdGlvbnMgaW4gU0FTUyBkaWFsZWN0LicpO1xuXG5cdHByZWZzLmRlZmluZSgnY3NzLmF1dG9JbnNlcnRWZW5kb3JQcmVmaXhlcycsIHRydWUsXG5cdFx0XHQnQXV0b21hdGljYWxseSBnZW5lcmF0ZSB2ZW5kb3ItcHJlZml4ZWQgY29waWVzIG9mIGV4cGFuZGVkIENTUyAnXG5cdFx0XHQrICdwcm9wZXJ0eS4gQnkgZGVmYXVsdCwgRW1tZXQgd2lsbCBnZW5lcmF0ZSB2ZW5kb3ItcHJlZml4ZWQgJ1xuXHRcdFx0KyAncHJvcGVydGllcyBvbmx5IHdoZW4geW91IHB1dCBkYXNoIGJlZm9yZSBhYmJyZXZpYXRpb24gJ1xuXHRcdFx0KyAnKGUuZy4gPGNvZGU+LWJ4c2g8L2NvZGU+KS4gV2l0aCB0aGlzIG9wdGlvbiBlbmFibGVkLCB5b3UgZG9u4oCZdCAnXG5cdFx0XHQrICduZWVkIGRhc2hlcyBiZWZvcmUgYWJicmV2aWF0aW9uczogRW1tZXQgd2lsbCBwcm9kdWNlICdcblx0XHRcdCsgJ3ZlbmRvci1wcmVmaXhlZCBwcm9wZXJ0aWVzIGZvciB5b3UuJyk7XG5cblx0dmFyIGRlc2NUZW1wbGF0ZSA9IF8udGVtcGxhdGUoJ0EgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgQ1NTIHByb3BlcnRpZXMgdGhhdCBtYXkgaGF2ZSAnXG5cdFx0KyAnPGNvZGU+PCU9IHZlbmRvciAlPjwvY29kZT4gdmVuZG9yIHByZWZpeC4gVGhpcyBsaXN0IGlzIHVzZWQgdG8gZ2VuZXJhdGUgJ1xuXHRcdCsgJ2EgbGlzdCBvZiBwcmVmaXhlZCBwcm9wZXJ0aWVzIHdoZW4gZXhwYW5kaW5nIDxjb2RlPi1wcm9wZXJ0eTwvY29kZT4gJ1xuXHRcdCsgJ2FiYnJldmlhdGlvbnMuIEVtcHR5IGxpc3QgbWVhbnMgdGhhdCBhbGwgcG9zc2libGUgQ1NTIHZhbHVlcyBtYXkgJ1xuXHRcdCsgJ2hhdmUgPGNvZGU+PCU9IHZlbmRvciAlPjwvY29kZT4gcHJlZml4LicpO1xuXG5cdHZhciBkZXNjQWRkb25UZW1wbGF0ZSA9IF8udGVtcGxhdGUoJ0EgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgPGVtPmFkZGl0aW9uYWw8L2VtPiBDU1MgcHJvcGVydGllcyAnXG5cdFx0XHQrICdmb3IgPGNvZGU+Y3NzLjwlPSB2ZW5kb3IgJT5QcmVwZXJ0aWVzPC9jb2RlPiBwcmVmZXJlbmNlLiAnXG5cdFx0XHQrICdZb3Ugc2hvdWxkIHVzZSB0aGlzIGxpc3QgaWYgeW91IHdhbnQgdG8gYWRkIG9yIHJlbW92ZSBhIGZldyBDU1MgJ1xuXHRcdFx0KyAncHJvcGVydGllcyB0byBvcmlnaW5hbCBzZXQuIFRvIGFkZCBhIG5ldyBwcm9wZXJ0eSwgc2ltcGx5IHdyaXRlIGl0cyBuYW1lLCAnXG5cdFx0XHQrICd0byByZW1vdmUgaXQsIHByZWNlZGUgcHJvcGVydHkgd2l0aCBoeXBoZW4uPGJyPidcblx0XHRcdCsgJ0ZvciBleGFtcGxlLCB0byBhZGQgPGVtPmZvbzwvZW0+IHByb3BlcnR5IGFuZCByZW1vdmUgPGVtPmJvcmRlci1yYWRpdXM8L2VtPiBvbmUsICdcblx0XHRcdCsgJ3RoZSBwcmVmZXJlbmNlIHZhbHVlIHdpbGwgbG9vayBsaWtlIHRoaXM6IDxjb2RlPmZvbywgLWJvcmRlci1yYWRpdXM8L2NvZGU+LicpO1xuXG5cdC8vIHByb3BlcnRpZXMgbGlzdCBpcyBjcmVhdGVkIGZyb20gY3NzRmVhdHVyZXMuaHRtbCBmaWxlXG5cdHZhciBwcm9wcyA9IHtcblx0XHQnd2Via2l0JzogJ2FuaW1hdGlvbiwgYW5pbWF0aW9uLWRlbGF5LCBhbmltYXRpb24tZGlyZWN0aW9uLCBhbmltYXRpb24tZHVyYXRpb24sIGFuaW1hdGlvbi1maWxsLW1vZGUsIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsIGFuaW1hdGlvbi1uYW1lLCBhbmltYXRpb24tcGxheS1zdGF0ZSwgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbiwgYXBwZWFyYW5jZSwgYmFja2ZhY2UtdmlzaWJpbGl0eSwgYmFja2dyb3VuZC1jbGlwLCBiYWNrZ3JvdW5kLWNvbXBvc2l0ZSwgYmFja2dyb3VuZC1vcmlnaW4sIGJhY2tncm91bmQtc2l6ZSwgYm9yZGVyLWZpdCwgYm9yZGVyLWhvcml6b250YWwtc3BhY2luZywgYm9yZGVyLWltYWdlLCBib3JkZXItdmVydGljYWwtc3BhY2luZywgYm94LWFsaWduLCBib3gtZGlyZWN0aW9uLCBib3gtZmxleCwgYm94LWZsZXgtZ3JvdXAsIGJveC1saW5lcywgYm94LW9yZGluYWwtZ3JvdXAsIGJveC1vcmllbnQsIGJveC1wYWNrLCBib3gtcmVmbGVjdCwgYm94LXNoYWRvdywgY29sb3ItY29ycmVjdGlvbiwgY29sdW1uLWJyZWFrLWFmdGVyLCBjb2x1bW4tYnJlYWstYmVmb3JlLCBjb2x1bW4tYnJlYWstaW5zaWRlLCBjb2x1bW4tY291bnQsIGNvbHVtbi1nYXAsIGNvbHVtbi1ydWxlLWNvbG9yLCBjb2x1bW4tcnVsZS1zdHlsZSwgY29sdW1uLXJ1bGUtd2lkdGgsIGNvbHVtbi1zcGFuLCBjb2x1bW4td2lkdGgsIGRhc2hib2FyZC1yZWdpb24sIGZvbnQtc21vb3RoaW5nLCBoaWdobGlnaHQsIGh5cGhlbmF0ZS1jaGFyYWN0ZXIsIGh5cGhlbmF0ZS1saW1pdC1hZnRlciwgaHlwaGVuYXRlLWxpbWl0LWJlZm9yZSwgaHlwaGVucywgbGluZS1ib3gtY29udGFpbiwgbGluZS1icmVhaywgbGluZS1jbGFtcCwgbG9jYWxlLCBtYXJnaW4tYmVmb3JlLWNvbGxhcHNlLCBtYXJnaW4tYWZ0ZXItY29sbGFwc2UsIG1hcnF1ZWUtZGlyZWN0aW9uLCBtYXJxdWVlLWluY3JlbWVudCwgbWFycXVlZS1yZXBldGl0aW9uLCBtYXJxdWVlLXN0eWxlLCBtYXNrLWF0dGFjaG1lbnQsIG1hc2stYm94LWltYWdlLCBtYXNrLWJveC1pbWFnZS1vdXRzZXQsIG1hc2stYm94LWltYWdlLXJlcGVhdCwgbWFzay1ib3gtaW1hZ2Utc2xpY2UsIG1hc2stYm94LWltYWdlLXNvdXJjZSwgbWFzay1ib3gtaW1hZ2Utd2lkdGgsIG1hc2stY2xpcCwgbWFzay1jb21wb3NpdGUsIG1hc2staW1hZ2UsIG1hc2stb3JpZ2luLCBtYXNrLXBvc2l0aW9uLCBtYXNrLXJlcGVhdCwgbWFzay1zaXplLCBuYnNwLW1vZGUsIHBlcnNwZWN0aXZlLCBwZXJzcGVjdGl2ZS1vcmlnaW4sIHJ0bC1vcmRlcmluZywgdGV4dC1jb21iaW5lLCB0ZXh0LWRlY29yYXRpb25zLWluLWVmZmVjdCwgdGV4dC1lbXBoYXNpcy1jb2xvciwgdGV4dC1lbXBoYXNpcy1wb3NpdGlvbiwgdGV4dC1lbXBoYXNpcy1zdHlsZSwgdGV4dC1maWxsLWNvbG9yLCB0ZXh0LW9yaWVudGF0aW9uLCB0ZXh0LXNlY3VyaXR5LCB0ZXh0LXN0cm9rZS1jb2xvciwgdGV4dC1zdHJva2Utd2lkdGgsIHRyYW5zZm9ybSwgdHJhbnNpdGlvbiwgdHJhbnNmb3JtLW9yaWdpbiwgdHJhbnNmb3JtLXN0eWxlLCB0cmFuc2l0aW9uLWRlbGF5LCB0cmFuc2l0aW9uLWR1cmF0aW9uLCB0cmFuc2l0aW9uLXByb3BlcnR5LCB0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiwgdXNlci1kcmFnLCB1c2VyLW1vZGlmeSwgdXNlci1zZWxlY3QsIHdyaXRpbmctbW9kZSwgc3ZnLXNoYWRvdywgYm94LXNpemluZywgYm9yZGVyLXJhZGl1cycsXG5cdFx0J21veic6ICdhbmltYXRpb24tZGVsYXksIGFuaW1hdGlvbi1kaXJlY3Rpb24sIGFuaW1hdGlvbi1kdXJhdGlvbiwgYW5pbWF0aW9uLWZpbGwtbW9kZSwgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCwgYW5pbWF0aW9uLW5hbWUsIGFuaW1hdGlvbi1wbGF5LXN0YXRlLCBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uLCBhcHBlYXJhbmNlLCBiYWNrZmFjZS12aXNpYmlsaXR5LCBiYWNrZ3JvdW5kLWlubGluZS1wb2xpY3ksIGJpbmRpbmcsIGJvcmRlci1ib3R0b20tY29sb3JzLCBib3JkZXItaW1hZ2UsIGJvcmRlci1sZWZ0LWNvbG9ycywgYm9yZGVyLXJpZ2h0LWNvbG9ycywgYm9yZGVyLXRvcC1jb2xvcnMsIGJveC1hbGlnbiwgYm94LWRpcmVjdGlvbiwgYm94LWZsZXgsIGJveC1vcmRpbmFsLWdyb3VwLCBib3gtb3JpZW50LCBib3gtcGFjaywgYm94LXNoYWRvdywgYm94LXNpemluZywgY29sdW1uLWNvdW50LCBjb2x1bW4tZ2FwLCBjb2x1bW4tcnVsZS1jb2xvciwgY29sdW1uLXJ1bGUtc3R5bGUsIGNvbHVtbi1ydWxlLXdpZHRoLCBjb2x1bW4td2lkdGgsIGZsb2F0LWVkZ2UsIGZvbnQtZmVhdHVyZS1zZXR0aW5ncywgZm9udC1sYW5ndWFnZS1vdmVycmlkZSwgZm9yY2UtYnJva2VuLWltYWdlLWljb24sIGh5cGhlbnMsIGltYWdlLXJlZ2lvbiwgb3JpZW50LCBvdXRsaW5lLXJhZGl1cy1ib3R0b21sZWZ0LCBvdXRsaW5lLXJhZGl1cy1ib3R0b21yaWdodCwgb3V0bGluZS1yYWRpdXMtdG9wbGVmdCwgb3V0bGluZS1yYWRpdXMtdG9wcmlnaHQsIHBlcnNwZWN0aXZlLCBwZXJzcGVjdGl2ZS1vcmlnaW4sIHN0YWNrLXNpemluZywgdGFiLXNpemUsIHRleHQtYmxpbmssIHRleHQtZGVjb3JhdGlvbi1jb2xvciwgdGV4dC1kZWNvcmF0aW9uLWxpbmUsIHRleHQtZGVjb3JhdGlvbi1zdHlsZSwgdGV4dC1zaXplLWFkanVzdCwgdHJhbnNmb3JtLCB0cmFuc2Zvcm0tb3JpZ2luLCB0cmFuc2Zvcm0tc3R5bGUsIHRyYW5zaXRpb24sIHRyYW5zaXRpb24tZGVsYXksIHRyYW5zaXRpb24tZHVyYXRpb24sIHRyYW5zaXRpb24tcHJvcGVydHksIHRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uLCB1c2VyLWZvY3VzLCB1c2VyLWlucHV0LCB1c2VyLW1vZGlmeSwgdXNlci1zZWxlY3QsIHdpbmRvdy1zaGFkb3csIGJhY2tncm91bmQtY2xpcCwgYm9yZGVyLXJhZGl1cycsXG5cdFx0J21zJzogJ2FjY2VsZXJhdG9yLCBiYWNrZmFjZS12aXNpYmlsaXR5LCBiYWNrZ3JvdW5kLXBvc2l0aW9uLXgsIGJhY2tncm91bmQtcG9zaXRpb24teSwgYmVoYXZpb3IsIGJsb2NrLXByb2dyZXNzaW9uLCBib3gtYWxpZ24sIGJveC1kaXJlY3Rpb24sIGJveC1mbGV4LCBib3gtbGluZS1wcm9ncmVzc2lvbiwgYm94LWxpbmVzLCBib3gtb3JkaW5hbC1ncm91cCwgYm94LW9yaWVudCwgYm94LXBhY2ssIGNvbnRlbnQtem9vbS1ib3VuZGFyeSwgY29udGVudC16b29tLWJvdW5kYXJ5LW1heCwgY29udGVudC16b29tLWJvdW5kYXJ5LW1pbiwgY29udGVudC16b29tLWNoYWluaW5nLCBjb250ZW50LXpvb20tc25hcCwgY29udGVudC16b29tLXNuYXAtcG9pbnRzLCBjb250ZW50LXpvb20tc25hcC10eXBlLCBjb250ZW50LXpvb21pbmcsIGZpbHRlciwgZmxvdy1mcm9tLCBmbG93LWludG8sIGZvbnQtZmVhdHVyZS1zZXR0aW5ncywgZ3JpZC1jb2x1bW4sIGdyaWQtY29sdW1uLWFsaWduLCBncmlkLWNvbHVtbi1zcGFuLCBncmlkLWNvbHVtbnMsIGdyaWQtbGF5ZXIsIGdyaWQtcm93LCBncmlkLXJvdy1hbGlnbiwgZ3JpZC1yb3ctc3BhbiwgZ3JpZC1yb3dzLCBoaWdoLWNvbnRyYXN0LWFkanVzdCwgaHlwaGVuYXRlLWxpbWl0LWNoYXJzLCBoeXBoZW5hdGUtbGltaXQtbGluZXMsIGh5cGhlbmF0ZS1saW1pdC16b25lLCBoeXBoZW5zLCBpbWUtbW9kZSwgaW50ZXJwb2xhdGlvbi1tb2RlLCBsYXlvdXQtZmxvdywgbGF5b3V0LWdyaWQsIGxheW91dC1ncmlkLWNoYXIsIGxheW91dC1ncmlkLWxpbmUsIGxheW91dC1ncmlkLW1vZGUsIGxheW91dC1ncmlkLXR5cGUsIGxpbmUtYnJlYWssIG92ZXJmbG93LXN0eWxlLCBwZXJzcGVjdGl2ZSwgcGVyc3BlY3RpdmUtb3JpZ2luLCBwZXJzcGVjdGl2ZS1vcmlnaW4teCwgcGVyc3BlY3RpdmUtb3JpZ2luLXksIHNjcm9sbC1ib3VuZGFyeSwgc2Nyb2xsLWJvdW5kYXJ5LWJvdHRvbSwgc2Nyb2xsLWJvdW5kYXJ5LWxlZnQsIHNjcm9sbC1ib3VuZGFyeS1yaWdodCwgc2Nyb2xsLWJvdW5kYXJ5LXRvcCwgc2Nyb2xsLWNoYWluaW5nLCBzY3JvbGwtcmFpbHMsIHNjcm9sbC1zbmFwLXBvaW50cy14LCBzY3JvbGwtc25hcC1wb2ludHMteSwgc2Nyb2xsLXNuYXAtdHlwZSwgc2Nyb2xsLXNuYXAteCwgc2Nyb2xsLXNuYXAteSwgc2Nyb2xsYmFyLWFycm93LWNvbG9yLCBzY3JvbGxiYXItYmFzZS1jb2xvciwgc2Nyb2xsYmFyLWRhcmtzaGFkb3ctY29sb3IsIHNjcm9sbGJhci1mYWNlLWNvbG9yLCBzY3JvbGxiYXItaGlnaGxpZ2h0LWNvbG9yLCBzY3JvbGxiYXItc2hhZG93LWNvbG9yLCBzY3JvbGxiYXItdHJhY2stY29sb3IsIHRleHQtYWxpZ24tbGFzdCwgdGV4dC1hdXRvc3BhY2UsIHRleHQtanVzdGlmeSwgdGV4dC1rYXNoaWRhLXNwYWNlLCB0ZXh0LW92ZXJmbG93LCB0ZXh0LXNpemUtYWRqdXN0LCB0ZXh0LXVuZGVybGluZS1wb3NpdGlvbiwgdG91Y2gtYWN0aW9uLCB0cmFuc2Zvcm0sIHRyYW5zZm9ybS1vcmlnaW4sIHRyYW5zZm9ybS1vcmlnaW4teCwgdHJhbnNmb3JtLW9yaWdpbi15LCB0cmFuc2Zvcm0tb3JpZ2luLXosIHRyYW5zZm9ybS1zdHlsZSwgdHJhbnNpdGlvbiwgdHJhbnNpdGlvbi1kZWxheSwgdHJhbnNpdGlvbi1kdXJhdGlvbiwgdHJhbnNpdGlvbi1wcm9wZXJ0eSwgdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24sIHVzZXItc2VsZWN0LCB3b3JkLWJyZWFrLCB3b3JkLXdyYXAsIHdyYXAtZmxvdywgd3JhcC1tYXJnaW4sIHdyYXAtdGhyb3VnaCwgd3JpdGluZy1tb2RlJyxcblx0XHQnbyc6ICdkYXNoYm9hcmQtcmVnaW9uLCBhbmltYXRpb24sIGFuaW1hdGlvbi1kZWxheSwgYW5pbWF0aW9uLWRpcmVjdGlvbiwgYW5pbWF0aW9uLWR1cmF0aW9uLCBhbmltYXRpb24tZmlsbC1tb2RlLCBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50LCBhbmltYXRpb24tbmFtZSwgYW5pbWF0aW9uLXBsYXktc3RhdGUsIGFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb24sIGJvcmRlci1pbWFnZSwgbGluaywgbGluay1zb3VyY2UsIG9iamVjdC1maXQsIG9iamVjdC1wb3NpdGlvbiwgdGFiLXNpemUsIHRhYmxlLWJhc2VsaW5lLCB0cmFuc2Zvcm0sIHRyYW5zZm9ybS1vcmlnaW4sIHRyYW5zaXRpb24sIHRyYW5zaXRpb24tZGVsYXksIHRyYW5zaXRpb24tZHVyYXRpb24sIHRyYW5zaXRpb24tcHJvcGVydHksIHRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uLCBhY2Nlc3NrZXksIGlucHV0LWZvcm1hdCwgaW5wdXQtcmVxdWlyZWQsIG1hcnF1ZWUtZGlyLCBtYXJxdWVlLWxvb3AsIG1hcnF1ZWUtc3BlZWQsIG1hcnF1ZWUtc3R5bGUnXG5cdH07XG5cblx0Xy5lYWNoKHByb3BzLCBmdW5jdGlvbih2LCBrKSB7XG5cdFx0cHJlZnMuZGVmaW5lKCdjc3MuJyArIGsgKyAnUHJvcGVydGllcycsIHYsIGRlc2NUZW1wbGF0ZSh7dmVuZG9yOiBrfSkpO1xuXHRcdHByZWZzLmRlZmluZSgnY3NzLicgKyBrICsgJ1Byb3BlcnRpZXNBZGRvbicsICcnLCBkZXNjQWRkb25UZW1wbGF0ZSh7dmVuZG9yOiBrfSkpO1xuXHR9KTtcblxuXHRwcmVmcy5kZWZpbmUoJ2Nzcy51bml0bGVzc1Byb3BlcnRpZXMnLCAnei1pbmRleCwgbGluZS1oZWlnaHQsIG9wYWNpdHksIGZvbnQtd2VpZ2h0LCB6b29tJyxcblx0XHRcdCdUaGUgbGlzdCBvZiBwcm9wZXJ0aWVzIHdob3NlIHZhbHVlcyDigIvigIttdXN0IG5vdCBjb250YWluIHVuaXRzLicpO1xuXG5cdHByZWZzLmRlZmluZSgnY3NzLmludFVuaXQnLCAncHgnLCAnRGVmYXVsdCB1bml0IGZvciBpbnRlZ2VyIHZhbHVlcycpO1xuXHRwcmVmcy5kZWZpbmUoJ2Nzcy5mbG9hdFVuaXQnLCAnZW0nLCAnRGVmYXVsdCB1bml0IGZvciBmbG9hdCB2YWx1ZXMnKTtcblxuXHRwcmVmcy5kZWZpbmUoJ2Nzcy5rZXl3b3JkcycsICdhdXRvLCBpbmhlcml0Jyxcblx0XHRcdCdBIGNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIHZhbGlkIGtleXdvcmRzIHRoYXQgY2FuIGJlIHVzZWQgaW4gQ1NTIGFiYnJldmlhdGlvbnMuJyk7XG5cblx0cHJlZnMuZGVmaW5lKCdjc3Mua2V5d29yZEFsaWFzZXMnLCAnYTphdXRvLCBpOmluaGVyaXQsIHM6c29saWQsIGRhOmRhc2hlZCwgZG86ZG90dGVkLCB0OnRyYW5zcGFyZW50Jyxcblx0XHRcdCdBIGNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIGtleXdvcmQgYWxpYXNlcywgdXNlZCBpbiBDU1MgYWJicmV2aWF0aW9uLiAnXG5cdFx0XHQrICdFYWNoIGFsaWFzIHNob3VsZCBiZSBkZWZpbmVkIGFzIDxjb2RlPmFsaWFzOmtleXdvcmRfbmFtZTwvY29kZT4uJyk7XG5cblx0cHJlZnMuZGVmaW5lKCdjc3MudW5pdEFsaWFzZXMnLCAnZTplbSwgcDolLCB4OmV4LCByOnJlbScsXG5cdFx0XHQnQSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiB1bml0IGFsaWFzZXMsIHVzZWQgaW4gQ1NTIGFiYnJldmlhdGlvbi4gJ1xuXHRcdFx0KyAnRWFjaCBhbGlhcyBzaG91bGQgYmUgZGVmaW5lZCBhcyA8Y29kZT5hbGlhczp1bml0X3ZhbHVlPC9jb2RlPi4nKTtcblxuXHRwcmVmcy5kZWZpbmUoJ2Nzcy5jb2xvci5zaG9ydCcsIHRydWUsXG5cdFx0XHQnU2hvdWxkIGNvbG9yIHZhbHVlcyBsaWtlIDxjb2RlPiNmZmZmZmY8L2NvZGU+IGJlIHNob3J0ZW5lZCB0byAnXG5cdFx0XHQrICc8Y29kZT4jZmZmPC9jb2RlPiBhZnRlciBhYmJyZXZpYXRpb24gd2l0aCBjb2xvciB3YXMgZXhwYW5kZWQuJyk7XG5cblx0cHJlZnMuZGVmaW5lKCdjc3MuY29sb3IuY2FzZScsICdrZWVwJyxcblx0XHRcdCdMZXR0ZXIgY2FzZSBvZiBjb2xvciB2YWx1ZXMgZ2VuZXJhdGVkIGJ5IGFiYnJldmlhdGlvbnMgd2l0aCBjb2xvciAnXG5cdFx0XHQrICcobGlrZSA8Y29kZT5jIzA8L2NvZGU+KS4gUG9zc2libGUgdmFsdWVzIGFyZSA8Y29kZT51cHBlcjwvY29kZT4sICdcblx0XHRcdCsgJzxjb2RlPmxvd2VyPC9jb2RlPiBhbmQgPGNvZGU+a2VlcDwvY29kZT4uJyk7XG5cblx0cHJlZnMuZGVmaW5lKCdjc3MuZnV6enlTZWFyY2gnLCB0cnVlLFxuXHRcdFx0J0VuYWJsZSBmdXp6eSBzZWFyY2ggYW1vbmcgQ1NTIHNuaXBwZXQgbmFtZXMuIFdoZW4gZW5hYmxlZCwgZXZlcnkgJ1xuXHRcdFx0KyAnPGVtPnVua25vd248L2VtPiBzbmlwcGV0IHdpbGwgYmUgc2NvcmVkIGFnYWluc3QgYXZhaWxhYmxlIHNuaXBwZXQgJ1xuXHRcdFx0KyAnbmFtZXMgKG5vdCB2YWx1ZXMgb3IgQ1NTIHByb3BlcnRpZXMhKS4gVGhlIG1hdGNoIHdpdGggYmVzdCBzY29yZSAnXG5cdFx0XHQrICd3aWxsIGJlIHVzZWQgdG8gcmVzb2x2ZSBzbmlwcGV0IHZhbHVlLiBGb3IgZXhhbXBsZSwgd2l0aCB0aGlzICdcblx0XHRcdCsgJ3ByZWZlcmVuY2UgZW5hYmxlZCwgdGhlIGZvbGxvd2luZyBhYmJyZXZpYXRpb25zIGFyZSBlcXVhbDogJ1xuXHRcdFx0KyAnPGNvZGU+b3Y6aDwvY29kZT4gPT0gPGNvZGU+b3YtaDwvY29kZT4gPT0gPGNvZGU+by1oPC9jb2RlPiA9PSAnXG5cdFx0XHQrICc8Y29kZT5vaDwvY29kZT4nKTtcblxuXHRwcmVmcy5kZWZpbmUoJ2Nzcy5mdXp6eVNlYXJjaE1pblNjb3JlJywgMC4zLFxuXHRcdFx0J1RoZSBtaW5pdW0gc2NvcmUgKGZyb20gMCB0byAxKSB0aGF0IGZ1enp5LW1hdGNoZWQgYWJicmV2aWF0aW9uIHNob3VsZCAnXG5cdFx0XHQrICdhY2hpdmUuIExvd2VyIHZhbHVlcyBtYXkgcHJvZHVjZSBtYW55IGZhbHNlLXBvc2l0aXZlIG1hdGNoZXMsICdcblx0XHRcdCsgJ2hpZ2hlciB2YWx1ZXMgbWF5IHJlZHVjZSBwb3NzaWJsZSBtYXRjaGVzLicpO1xuXG5cdHByZWZzLmRlZmluZSgnY3NzLmFsaWduVmVuZG9yJywgZmFsc2UsXG5cdFx0XHQnSWYgc2V0IHRvIDxjb2RlPnRydWU8L2NvZGU+LCBhbGwgZ2VuZXJhdGVkIHZlbmRvci1wcmVmaXhlZCBwcm9wZXJ0aWVzICdcblx0XHRcdCsgJ3dpbGwgYmUgYWxpZ25lZCBieSByZWFsIHByb3BlcnR5IG5hbWUuJyk7XG5cblxuXHRmdW5jdGlvbiBpc051bWVyaWMoY2gpIHtcblx0XHR2YXIgY29kZSA9IGNoICYmIGNoLmNoYXJDb2RlQXQoMCk7XG5cdFx0cmV0dXJuIChjaCAmJiBjaCA9PSAnLicgfHwgKGNvZGUgPiA0NyAmJiBjb2RlIDwgNTgpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVjayBpZiBwcm92aWRlZCBzbmlwcGV0IGNvbnRhaW5zIG9ubHkgb25lIENTUyBwcm9wZXJ0eSBhbmQgdmFsdWUuXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzbmlwcGV0XG5cdCAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTaW5nbGVQcm9wZXJ0eShzbmlwcGV0KSB7XG5cdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblx0XHRzbmlwcGV0ID0gdXRpbHMudHJpbShzbmlwcGV0KTtcblxuXHRcdC8vIGNoZWNrIGlmIGl0IGRvZXNuJ3QgY29udGFpbiBhIGNvbW1lbnQgYW5kIGEgbmV3bGluZVxuXHRcdGlmICh+c25pcHBldC5pbmRleE9mKCcvKicpIHx8IC9bXFxuXFxyXS8udGVzdChzbmlwcGV0KSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIGNoZWNrIGlmIGl0J3MgYSB2YWxpZCBzbmlwcGV0IGRlZmluaXRpb25cblx0XHRpZiAoIS9eW2EtejAtOVxcLV0rXFxzKlxcOi9pLnRlc3Qoc25pcHBldCkpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRzbmlwcGV0ID0gcmVxdWlyZSgndGFiU3RvcHMnKS5wcm9jZXNzVGV4dChzbmlwcGV0LCB7XG5cdFx0XHRyZXBsYWNlQ2FyZXRzOiB0cnVlLFxuXHRcdFx0dGFic3RvcDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAndmFsdWUnO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHNuaXBwZXQuc3BsaXQoJzonKS5sZW5ndGggPT0gMjtcblx0fVxuXG5cdC8qKlxuXHQgKiBOb3JtYWxpemVzIGFiYnJldmlhdGVkIHZhbHVlIHRvIGZpbmFsIENTUyBvbmVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuXHRcdGlmICh2YWx1ZS5jaGFyQXQoMCkgPT0gJy0nICYmICEvXlxcLVtcXC5cXGRdLy50ZXN0KHZhbHVlKSkge1xuXHRcdFx0dmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eXFwtKy8sICcnKTtcblx0XHR9XG5cblx0XHRpZiAodmFsdWUuY2hhckF0KDApID09ICcjJykge1xuXHRcdFx0cmV0dXJuIG5vcm1hbGl6ZUhleENvbG9yKHZhbHVlKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZ2V0S2V5d29yZCh2YWx1ZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBub3JtYWxpemVIZXhDb2xvcih2YWx1ZSkge1xuXHRcdHZhciBoZXggPSB2YWx1ZS5yZXBsYWNlKC9eIysvLCAnJykgfHwgJzAnO1xuXHRcdGlmIChoZXgudG9Mb3dlckNhc2UoKSA9PSAndCcpIHtcblx0XHRcdHJldHVybiAndHJhbnNwYXJlbnQnO1xuXHRcdH1cblxuXHRcdHZhciByZXBlYXQgPSByZXF1aXJlKCd1dGlscycpLnJlcGVhdFN0cmluZztcblx0XHR2YXIgY29sb3IgPSBudWxsO1xuXHRcdHN3aXRjaCAoaGV4Lmxlbmd0aCkge1xuXHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHRjb2xvciA9IHJlcGVhdChoZXgsIDYpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMjpcblx0XHRcdFx0Y29sb3IgPSByZXBlYXQoaGV4LCAzKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDM6XG5cdFx0XHRcdGNvbG9yID0gaGV4LmNoYXJBdCgwKSArIGhleC5jaGFyQXQoMCkgKyBoZXguY2hhckF0KDEpICsgaGV4LmNoYXJBdCgxKSArIGhleC5jaGFyQXQoMikgKyBoZXguY2hhckF0KDIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNDpcblx0XHRcdFx0Y29sb3IgPSBoZXggKyBoZXguc3Vic3RyKDAsIDIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNTpcblx0XHRcdFx0Y29sb3IgPSBoZXggKyBoZXguY2hhckF0KDApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGNvbG9yID0gaGV4LnN1YnN0cigwLCA2KTtcblx0XHR9XG5cblx0XHQvLyBjb2xvciBtdXN0IGJlIHNob3J0ZW5lZD9cblx0XHRpZiAocHJlZnMuZ2V0KCdjc3MuY29sb3Iuc2hvcnQnKSkge1xuXHRcdFx0dmFyIHAgPSBjb2xvci5zcGxpdCgnJyk7XG5cdFx0XHRpZiAocFswXSA9PSBwWzFdICYmIHBbMl0gPT0gcFszXSAmJiBwWzRdID09IHBbNV0pIHtcblx0XHRcdFx0Y29sb3IgPSBwWzBdICsgcFsyXSArIHBbNF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gc2hvdWxkIHRyYW5zZm9ybSBjYXNlP1xuXHRcdHN3aXRjaCAocHJlZnMuZ2V0KCdjc3MuY29sb3IuY2FzZScpKSB7XG5cdFx0XHRjYXNlICd1cHBlcic6XG5cdFx0XHRcdGNvbG9yID0gY29sb3IudG9VcHBlckNhc2UoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdsb3dlcic6XG5cdFx0XHRcdGNvbG9yID0gY29sb3IudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICcjJyArIGNvbG9yO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0S2V5d29yZChuYW1lKSB7XG5cdFx0dmFyIGFsaWFzZXMgPSBwcmVmcy5nZXREaWN0KCdjc3Mua2V5d29yZEFsaWFzZXMnKTtcblx0XHRyZXR1cm4gbmFtZSBpbiBhbGlhc2VzID8gYWxpYXNlc1tuYW1lXSA6IG5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVbml0KG5hbWUpIHtcblx0XHR2YXIgYWxpYXNlcyA9IHByZWZzLmdldERpY3QoJ2Nzcy51bml0QWxpYXNlcycpO1xuXHRcdHJldHVybiBuYW1lIGluIGFsaWFzZXMgPyBhbGlhc2VzW25hbWVdIDogbmFtZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGlzVmFsaWRLZXl3b3JkKGtleXdvcmQpIHtcblx0XHRyZXR1cm4gXy5pbmNsdWRlKHByZWZzLmdldEFycmF5KCdjc3Mua2V5d29yZHMnKSwgZ2V0S2V5d29yZChrZXl3b3JkKSk7XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgcGFzc2VkIENTUyBwcm9wZXJ0eSBzdXBwb3J0IHNwZWNpZmllZCB2ZW5kb3IgcHJlZml4XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJlZml4XG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNQcmVmaXgocHJvcGVydHksIHByZWZpeCkge1xuXHRcdHZhciBpbmZvID0gdmVuZG9yUHJlZml4ZXNbcHJlZml4XTtcblxuXHRcdGlmICghaW5mbylcblx0XHRcdGluZm8gPSBfLmZpbmQodmVuZG9yUHJlZml4ZXMsIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0cmV0dXJuIGRhdGEucHJlZml4ID09IHByZWZpeDtcblx0XHRcdH0pO1xuXG5cdFx0cmV0dXJuIGluZm8gJiYgaW5mby5zdXBwb3J0cyhwcm9wZXJ0eSk7XG5cdH1cblxuXHQvKipcblx0ICogU2VhcmNoIGZvciBhIGxpc3Qgb2Ygc3VwcG9ydGVkIHByZWZpeGVzIGZvciBDU1MgcHJvcGVydHkuIFRoaXMgbGlzdFxuXHQgKiBpcyB1c2VkIHRvIGdlbmVyYXRlIGFsbC1wcmVmaXhlZCBzbmlwcGV0XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBDU1MgcHJvcGVydHkgbmFtZVxuXHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kUHJlZml4ZXMocHJvcGVydHksIG5vQXV0b2ZpbGwpIHtcblx0XHR2YXIgcmVzdWx0ID0gW107XG5cdFx0Xy5lYWNoKHZlbmRvclByZWZpeGVzLCBmdW5jdGlvbihvYmosIHByZWZpeCkge1xuXHRcdFx0aWYgKGhhc1ByZWZpeChwcm9wZXJ0eSwgcHJlZml4KSkge1xuXHRcdFx0XHRyZXN1bHQucHVzaChwcmVmaXgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0aWYgKCFyZXN1bHQubGVuZ3RoICYmICFub0F1dG9maWxsKSB7XG5cdFx0XHQvLyBhZGQgYWxsIG5vbi1vYnNvbGV0ZSBwcmVmaXhlc1xuXHRcdFx0Xy5lYWNoKHZlbmRvclByZWZpeGVzLCBmdW5jdGlvbihvYmosIHByZWZpeCkge1xuXHRcdFx0XHRpZiAoIW9iai5vYnNvbGV0ZSlcblx0XHRcdFx0XHRyZXN1bHQucHVzaChwcmVmaXgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZFByZWZpeChuYW1lLCBvYmopIHtcblx0XHRpZiAoXy5pc1N0cmluZyhvYmopKVxuXHRcdFx0b2JqID0ge3ByZWZpeDogb2JqfTtcblxuXHRcdHZlbmRvclByZWZpeGVzW25hbWVdID0gXy5leHRlbmQoe30sIHByZWZpeE9iaiwgb2JqKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFN5bnRheFByZWZlcmVuY2UobmFtZSwgc3ludGF4KSB7XG5cdFx0aWYgKHN5bnRheCkge1xuXHRcdFx0dmFyIHZhbCA9IHByZWZzLmdldChzeW50YXggKyAnLicgKyBuYW1lKTtcblx0XHRcdGlmICghXy5pc1VuZGVmaW5lZCh2YWwpKVxuXHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH1cblxuXHRcdHJldHVybiBwcmVmcy5nZXQoJ2Nzcy4nICsgbmFtZSk7XG5cdH1cblxuXHQvKipcblx0ICogRm9ybWF0IENTUyBwcm9wZXJ0eSBhY2NvcmRpbmcgdG8gY3VycmVudCBzeW50YXggZGlhbGVjdFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bnRheFxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkocHJvcGVydHksIHN5bnRheCkge1xuXHRcdHZhciBpeCA9IHByb3BlcnR5LmluZGV4T2YoJzonKTtcblx0XHRwcm9wZXJ0eSA9IHByb3BlcnR5LnN1YnN0cmluZygwLCBpeCkucmVwbGFjZSgvXFxzKyQvLCAnJylcblx0XHRcdCsgZ2V0U3ludGF4UHJlZmVyZW5jZSgndmFsdWVTZXBhcmF0b3InLCBzeW50YXgpXG5cdFx0XHQrIHJlcXVpcmUoJ3V0aWxzJykudHJpbShwcm9wZXJ0eS5zdWJzdHJpbmcoaXggKyAxKSk7XG5cblx0XHRyZXR1cm4gcHJvcGVydHkucmVwbGFjZSgvXFxzKjtcXHMqJC8sIGdldFN5bnRheFByZWZlcmVuY2UoJ3Byb3BlcnR5RW5kJywgc3ludGF4KSk7XG5cdH1cblxuXHQvKipcblx0ICogVHJhbnNmb3JtcyBzbmlwcGV0IHZhbHVlIGlmIHJlcXVpcmVkLiBGb3IgZXhhbXBsZSwgdGhpcyB0cmFuc2Zvcm1hdGlvblxuXHQgKiBtYXkgYWRkIDxpPiFpbXBvcnRhbnQ8L2k+IGRlY2xhcmF0aW9uIHRvIENTUyBwcm9wZXJ0eVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc25pcHBldFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGlzSW1wb3J0YW50XG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiB0cmFuc2Zvcm1TbmlwcGV0KHNuaXBwZXQsIGlzSW1wb3J0YW50LCBzeW50YXgpIHtcblx0XHRpZiAoIV8uaXNTdHJpbmcoc25pcHBldCkpXG5cdFx0XHRzbmlwcGV0ID0gc25pcHBldC5kYXRhO1xuXG5cdFx0aWYgKCFpc1NpbmdsZVByb3BlcnR5KHNuaXBwZXQpKVxuXHRcdFx0cmV0dXJuIHNuaXBwZXQ7XG5cblx0XHRpZiAoaXNJbXBvcnRhbnQpIHtcblx0XHRcdGlmICh+c25pcHBldC5pbmRleE9mKCc7JykpIHtcblx0XHRcdFx0c25pcHBldCA9IHNuaXBwZXQuc3BsaXQoJzsnKS5qb2luKCcgIWltcG9ydGFudDsnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNuaXBwZXQgKz0gJyAhaW1wb3J0YW50Jztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZm9ybWF0UHJvcGVydHkoc25pcHBldCwgc3ludGF4KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBwYXJzZXMgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgZWxlbWVudHMgaW50byBhcnJheVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbGlzdFxuXHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAqL1xuXHRmdW5jdGlvbiBwYXJzZUxpc3QobGlzdCkge1xuXHRcdHZhciByZXN1bHQgPSBfLm1hcCgobGlzdCB8fCAnJykuc3BsaXQoJywnKSwgcmVxdWlyZSgndXRpbHMnKS50cmltKTtcblx0XHRyZXR1cm4gcmVzdWx0Lmxlbmd0aCA/IHJlc3VsdCA6IG51bGw7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRQcm9wZXJ0aWVzKGtleSkge1xuXHRcdHZhciBsaXN0ID0gcHJlZnMuZ2V0QXJyYXkoa2V5KTtcblx0XHRfLmVhY2gocHJlZnMuZ2V0QXJyYXkoa2V5ICsgJ0FkZG9uJyksIGZ1bmN0aW9uKHByb3ApIHtcblx0XHRcdGlmIChwcm9wLmNoYXJBdCgwKSA9PSAnLScpIHtcblx0XHRcdFx0bGlzdCA9IF8ud2l0aG91dChsaXN0LCBwcm9wLnN1YnN0cigxKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAocHJvcC5jaGFyQXQoMCkgPT0gJysnKVxuXHRcdFx0XHRcdHByb3AgPSBwcm9wLnN1YnN0cigxKTtcblxuXHRcdFx0XHRsaXN0LnB1c2gocHJvcCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gbGlzdDtcblx0fVxuXG5cblx0Ly8gVE9ETyByZWZhY3RvciwgdGhpcyBsb29rcyBhd2t3YXJkIG5vd1xuXHRhZGRQcmVmaXgoJ3cnLCB7XG5cdFx0cHJlZml4OiAnd2Via2l0J1xuXHR9KTtcblx0YWRkUHJlZml4KCdtJywge1xuXHRcdHByZWZpeDogJ21veidcblx0fSk7XG5cdGFkZFByZWZpeCgncycsIHtcblx0XHRwcmVmaXg6ICdtcydcblx0fSk7XG5cdGFkZFByZWZpeCgnbycsIHtcblx0XHRwcmVmaXg6ICdvJ1xuXHR9KTtcblxuXHQvLyBJIHRoaW5rIG5vYm9keSB1c2VzIGl0XG4vL1x0YWRkUHJlZml4KCdrJywge1xuLy9cdFx0cHJlZml4OiAna2h0bWwnLFxuLy9cdFx0b2Jzb2xldGU6IHRydWVcbi8vXHR9KTtcblxuXHR2YXIgY3NzU3ludGF4ZXMgPSBbJ2NzcycsICdsZXNzJywgJ3Nhc3MnLCAnc2NzcycsICdzdHlsdXMnXTtcblxuXHQvKipcblx0ICogWFhYIHJlZ2lzdGVyIHJlc29sdmVyXG5cdCAqIEBwYXJhbSB7VHJlZU5vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bnRheFxuXHQgKi9cblx0cmVxdWlyZSgncmVzb3VyY2VzJykuYWRkUmVzb2x2ZXIoZnVuY3Rpb24obm9kZSwgc3ludGF4KSB7XG5cdFx0aWYgKF8uaW5jbHVkZShjc3NTeW50YXhlcywgc3ludGF4KSAmJiBub2RlLmlzRWxlbWVudCgpKSB7XG5cdFx0XHRyZXR1cm4gbW9kdWxlLmV4cGFuZFRvU25pcHBldChub2RlLmFiYnJldmlhdGlvbiwgc3ludGF4KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fSk7XG5cblx0dmFyIGVhID0gcmVxdWlyZSgnZXhwYW5kQWJicmV2aWF0aW9uJyk7XG5cdC8qKlxuXHQgKiBGb3IgQ1NTLWxpa2Ugc3ludGF4ZXMsIHdlIG5lZWQgdG8gaGFuZGxlIGEgc3BlY2lhbCB1c2UgY2FzZS4gU29tZSBlZGl0b3JzXG5cdCAqIChsaWtlIFN1YmxpbWUgVGV4dCAyKSBtYXkgaW5zZXJ0IHNlbWljb2xvbnMgYXV0b21hdGljYWxseSB3aGVuIHVzZXIgdHlwZXNcblx0ICogYWJicmV2aWF0aW9uLiBBZnRlciBleHBhbnNpb24sIHVzZXIgcmVjZWl2ZXMgYSBkb3VibGUgc2VtaWNvbG9uLiBUaGlzXG5cdCAqIGhhbmRsZXIgYXV0b21hdGljYWxseSByZW1vdmVzIHNlbWljb2xvbiBmcm9tIGdlbmVyYXRlZCBjb250ZW50IGluIHN1Y2ggY2FzZXMuXG5cdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3Jcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bnRheFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvZmlsZVxuXHQgKi9cblx0ZWEuYWRkSGFuZGxlcihmdW5jdGlvbihlZGl0b3IsIHN5bnRheCwgcHJvZmlsZSkge1xuXHRcdGlmICghXy5pbmNsdWRlKGNzc1N5bnRheGVzLCBzeW50YXgpKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0dmFyIGNhcmV0UG9zID0gZWRpdG9yLmdldFNlbGVjdGlvblJhbmdlKCkuZW5kO1xuXHRcdHZhciBhYmJyID0gZWEuZmluZEFiYnJldmlhdGlvbihlZGl0b3IpO1xuXG5cdFx0aWYgKGFiYnIpIHtcblx0XHRcdHZhciBjb250ZW50ID0gZW1tZXQuZXhwYW5kQWJicmV2aWF0aW9uKGFiYnIsIHN5bnRheCwgcHJvZmlsZSk7XG5cdFx0XHRpZiAoY29udGVudCkge1xuXHRcdFx0XHR2YXIgcmVwbGFjZUZyb20gPSBjYXJldFBvcyAtIGFiYnIubGVuZ3RoO1xuXHRcdFx0XHR2YXIgcmVwbGFjZVRvID0gY2FyZXRQb3M7XG5cdFx0XHRcdGlmIChlZGl0b3IuZ2V0Q29udGVudCgpLmNoYXJBdChjYXJldFBvcykgPT0gJzsnICYmIGNvbnRlbnQuY2hhckF0KGNvbnRlbnQubGVuZ3RoIC0gMSkgPT0gJzsnKSB7XG5cdFx0XHRcdFx0cmVwbGFjZVRvKys7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRlZGl0b3IucmVwbGFjZUNvbnRlbnQoY29udGVudCwgcmVwbGFjZUZyb20sIHJlcGxhY2VUbyk7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fSk7XG5cblx0cmV0dXJuIG1vZHVsZSA9IHtcblx0XHQvKipcblx0XHQgKiBBZGRzIHZlbmRvciBwcmVmaXhcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBPbmUtY2hhcmFjdGVyIHByZWZpeCBuYW1lXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9iaiBPYmplY3QgZGVzY3JpYmluZyB2ZW5kb3IgcHJlZml4XG5cdFx0ICogQG1lbWJlck9mIGNzc1Jlc29sdmVyXG5cdFx0ICovXG5cdFx0YWRkUHJlZml4OiBhZGRQcmVmaXgsXG5cblx0XHQvKipcblx0XHQgKiBDaGVjayBpZiBwYXNzZWQgQ1NTIHByb3BlcnR5IHN1cHBvcnRzIHNwZWNpZmllZCB2ZW5kb3IgcHJlZml4XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHByZWZpeFxuXHRcdCAqL1xuXHRcdHN1cHBvcnRzUHJlZml4OiBoYXNQcmVmaXgsXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHByZWZpeGVkIHZlcnNpb24gb2YgcGFzc2VkIENTUyBwcm9wZXJ0eSwgb25seSBpZiB0aGlzXG5cdFx0ICogcHJvcGVydHkgc3VwcG9ydHMgc3VjaCBwcmVmaXhcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gcHJlZml4XG5cdFx0ICogQHJldHVybnNcblx0XHQgKi9cblx0XHRwcmVmaXhlZDogZnVuY3Rpb24ocHJvcGVydHksIHByZWZpeCkge1xuXHRcdFx0cmV0dXJuIGhhc1ByZWZpeChwcm9wZXJ0eSwgcHJlZml4KVxuXHRcdFx0XHQ/ICctJyArIHByZWZpeCArICctJyArIHByb3BlcnR5XG5cdFx0XHRcdDogcHJvcGVydHk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgbGlzdCBvZiBhbGwgcmVnaXN0ZXJlZCB2ZW5kb3IgcHJlZml4ZXNcblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdFx0ICovXG5cdFx0bGlzdFByZWZpeGVzOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBfLm1hcCh2ZW5kb3JQcmVmaXhlcywgZnVuY3Rpb24ob2JqKSB7XG5cdFx0XHRcdHJldHVybiBvYmoucHJlZml4O1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgb2JqZWN0IGRlc2NyaWJpbmcgdmVuZG9yIHByZWZpeFxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdFx0ICogQHJldHVybnMge09iamVjdH1cblx0XHQgKi9cblx0XHRnZXRQcmVmaXg6IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdHJldHVybiB2ZW5kb3JQcmVmaXhlc1tuYW1lXTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVtb3ZlcyBwcmVmaXggb2JqZWN0XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0XHQgKi9cblx0XHRyZW1vdmVQcmVmaXg6IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdGlmIChuYW1lIGluIHZlbmRvclByZWZpeGVzKVxuXHRcdFx0XHRkZWxldGUgdmVuZG9yUHJlZml4ZXNbbmFtZV07XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEV4dHJhY3QgdmVuZG9yIHByZWZpeGVzIGZyb20gYWJicmV2aWF0aW9uXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGFiYnJcblx0XHQgKiBAcmV0dXJucyB7T2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBhcnJheSBvZiBwcmVmaXhlcyBhbmQgY2xlYW5cblx0XHQgKiBhYmJyZXZpYXRpb24gbmFtZVxuXHRcdCAqL1xuXHRcdGV4dHJhY3RQcmVmaXhlczogZnVuY3Rpb24oYWJicikge1xuXHRcdFx0aWYgKGFiYnIuY2hhckF0KDApICE9ICctJykge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHByb3BlcnR5OiBhYmJyLFxuXHRcdFx0XHRcdHByZWZpeGVzOiBudWxsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdC8vIGFiYnJldmlhdGlvbiBtYXkgZWl0aGVyIGNvbnRhaW4gc2VxdWVuY2Ugb2Ygb25lLWNoYXJhY3RlciBwcmVmaXhlc1xuXHRcdFx0Ly8gb3IganVzdCBkYXNoLCBtZWFuaW5nIHRoYXQgdXNlciB3YW50cyB0byBwcm9kdWNlIGFsbCBwb3NzaWJsZVxuXHRcdFx0Ly8gcHJlZml4ZWQgcHJvcGVydGllc1xuXHRcdFx0dmFyIGkgPSAxLCBpbCA9IGFiYnIubGVuZ3RoLCBjaDtcblx0XHRcdHZhciBwcmVmaXhlcyA9IFtdO1xuXG5cdFx0XHR3aGlsZSAoaSA8IGlsKSB7XG5cdFx0XHRcdGNoID0gYWJici5jaGFyQXQoaSk7XG5cdFx0XHRcdGlmIChjaCA9PSAnLScpIHtcblx0XHRcdFx0XHQvLyBlbmQtc2VxdWVuY2UgY2hhcmFjdGVyIGZvdW5kLCBzdG9wIHNlYXJjaGluZ1xuXHRcdFx0XHRcdGkrKztcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjaCBpbiB2ZW5kb3JQcmVmaXhlcykge1xuXHRcdFx0XHRcdHByZWZpeGVzLnB1c2goY2gpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIG5vIHByZWZpeCBmb3VuZCwgbWVhbmluZyB1c2VyIHdhbnQgdG8gcHJvZHVjZSBhbGxcblx0XHRcdFx0XHQvLyB2ZW5kb3ItcHJlZml4ZWQgcHJvcGVydGllc1xuXHRcdFx0XHRcdHByZWZpeGVzLmxlbmd0aCA9IDA7XG5cdFx0XHRcdFx0aSA9IDE7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHJlYWNoZWQgZW5kIG9mIGFiYnJldmlhdGlvbiBhbmQgbm8gcHJvcGVydHkgbmFtZSBsZWZ0XG5cdFx0XHRpZiAoaSA9PSBpbCAtMSkge1xuXHRcdFx0XHRpID0gMTtcblx0XHRcdFx0cHJlZml4ZXMubGVuZ3RoID0gMTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0cHJvcGVydHk6IGFiYnIuc3Vic3RyaW5nKGkpLFxuXHRcdFx0XHRwcmVmaXhlczogcHJlZml4ZXMubGVuZ3RoID8gcHJlZml4ZXMgOiAnYWxsJ1xuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2VhcmNoIGZvciB2YWx1ZSBzdWJzdHJpbmcgaW4gYWJicmV2aWF0aW9uXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGFiYnJcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfSBWYWx1ZSBzdWJzdHJpbmdcblx0XHQgKi9cblx0XHRmaW5kVmFsdWVzSW5BYmJyZXZpYXRpb246IGZ1bmN0aW9uKGFiYnIsIHN5bnRheCkge1xuXHRcdFx0c3ludGF4ID0gc3ludGF4IHx8ICdjc3MnO1xuXG5cdFx0XHR2YXIgaSA9IDAsIGlsID0gYWJici5sZW5ndGgsIHZhbHVlID0gJycsIGNoO1xuXHRcdFx0d2hpbGUgKGkgPCBpbCkge1xuXHRcdFx0XHRjaCA9IGFiYnIuY2hhckF0KGkpO1xuXHRcdFx0XHRpZiAoaXNOdW1lcmljKGNoKSB8fCBjaCA9PSAnIycgfHwgKGNoID09ICctJyAmJiBpc051bWVyaWMoYWJici5jaGFyQXQoaSArIDEpKSkpIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGFiYnIuc3Vic3RyaW5nKGkpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aSsrO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyB0cnkgdG8gZmluZCBrZXl3b3JkcyBpbiBhYmJyZXZpYXRpb25cblx0XHRcdHZhciBwcm9wZXJ0eSA9IGFiYnIuc3Vic3RyaW5nKDAsIGFiYnIubGVuZ3RoIC0gdmFsdWUubGVuZ3RoKTtcblx0XHRcdHZhciByZXMgPSByZXF1aXJlKCdyZXNvdXJjZXMnKTtcblx0XHRcdHZhciBrZXl3b3JkcyA9IFtdO1xuXHRcdFx0Ly8gdHJ5IHRvIGV4dHJhY3Qgc29tZSBjb21tb25seS11c2VkIHByb3BlcnRpZXNcblx0XHRcdHdoaWxlICh+cHJvcGVydHkuaW5kZXhPZignLScpICYmICFyZXMuZmluZFNuaXBwZXQoc3ludGF4LCBwcm9wZXJ0eSkpIHtcblx0XHRcdFx0dmFyIHBhcnRzID0gcHJvcGVydHkuc3BsaXQoJy0nKTtcblx0XHRcdFx0dmFyIGxhc3RQYXJ0ID0gcGFydHMucG9wKCk7XG5cdFx0XHRcdGlmICghaXNWYWxpZEtleXdvcmQobGFzdFBhcnQpKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRrZXl3b3Jkcy51bnNoaWZ0KGxhc3RQYXJ0KTtcblx0XHRcdFx0cHJvcGVydHkgPSBwYXJ0cy5qb2luKCctJyk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBrZXl3b3Jkcy5qb2luKCctJykgKyB2YWx1ZTtcblx0XHR9LFxuXG5cdFx0cGFyc2VWYWx1ZXM6IGZ1bmN0aW9uKHN0cikge1xuXHRcdFx0LyoqIEB0eXBlIFN0cmluZ1N0cmVhbSAqL1xuXHRcdFx0dmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmluZ1N0cmVhbScpLmNyZWF0ZShzdHIpO1xuXHRcdFx0dmFyIHZhbHVlcyA9IFtdO1xuXHRcdFx0dmFyIGNoID0gbnVsbDtcblxuXHRcdFx0d2hpbGUgKGNoID0gc3RyZWFtLm5leHQoKSkge1xuXHRcdFx0XHRpZiAoY2ggPT0gJyMnKSB7XG5cdFx0XHRcdFx0c3RyZWFtLm1hdGNoKC9edHxbMC05YS1mXSsvaSwgdHJ1ZSk7XG5cdFx0XHRcdFx0dmFsdWVzLnB1c2goc3RyZWFtLmN1cnJlbnQoKSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2ggPT0gJy0nKSB7XG5cdFx0XHRcdFx0aWYgKGlzVmFsaWRLZXl3b3JkKF8ubGFzdCh2YWx1ZXMpKSB8fFxuXHRcdFx0XHRcdFx0XHQoIHN0cmVhbS5zdGFydCAmJiBpc051bWVyaWMoc3RyLmNoYXJBdChzdHJlYW0uc3RhcnQgLSAxKSkgKVxuXHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHN0cmVhbS5tYXRjaCgvXlxcLT9bMC05XSooXFwuWzAtOV0rKT9bYS16JVxcLl0qLywgdHJ1ZSk7XG5cdFx0XHRcdFx0dmFsdWVzLnB1c2goc3RyZWFtLmN1cnJlbnQoKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3RyZWFtLm1hdGNoKC9eWzAtOV0qKFxcLlswLTldKik/W2EteiVdKi8sIHRydWUpO1xuXHRcdFx0XHRcdHZhbHVlcy5wdXNoKHN0cmVhbS5jdXJyZW50KCkpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0c3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIF8ubWFwKF8uY29tcGFjdCh2YWx1ZXMpLCBub3JtYWxpemVWYWx1ZSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEV4dHJhY3RzIHZhbHVlcyBmcm9tIGFiYnJldmlhdGlvblxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBhYmJyXG5cdFx0ICogQHJldHVybnMge09iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgYXJyYXkgb2YgdmFsdWVzIGFuZCBjbGVhblxuXHRcdCAqIGFiYnJldmlhdGlvbiBuYW1lXG5cdFx0ICovXG5cdFx0ZXh0cmFjdFZhbHVlczogZnVuY3Rpb24oYWJicikge1xuXHRcdFx0Ly8gc2VhcmNoIGZvciB2YWx1ZSBzdGFydFxuXHRcdFx0dmFyIGFiYnJWYWx1ZXMgPSB0aGlzLmZpbmRWYWx1ZXNJbkFiYnJldmlhdGlvbihhYmJyKTtcblx0XHRcdGlmICghYWJiclZhbHVlcykge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHByb3BlcnR5OiBhYmJyLFxuXHRcdFx0XHRcdHZhbHVlczogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRwcm9wZXJ0eTogYWJici5zdWJzdHJpbmcoMCwgYWJici5sZW5ndGggLSBhYmJyVmFsdWVzLmxlbmd0aCkucmVwbGFjZSgvLSQvLCAnJyksXG5cdFx0XHRcdHZhbHVlczogdGhpcy5wYXJzZVZhbHVlcyhhYmJyVmFsdWVzKVxuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogTm9ybWFsaXplcyB2YWx1ZSwgZGVmaW5lZCBpbiBhYmJyZXZpYXRpb24uXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRub3JtYWxpemVWYWx1ZTogZnVuY3Rpb24odmFsdWUsIHByb3BlcnR5KSB7XG5cdFx0XHRwcm9wZXJ0eSA9IChwcm9wZXJ0eSB8fCAnJykudG9Mb3dlckNhc2UoKTtcblx0XHRcdHZhciB1bml0bGVzc1Byb3BzID0gcHJlZnMuZ2V0QXJyYXkoJ2Nzcy51bml0bGVzc1Byb3BlcnRpZXMnKTtcblx0XHRcdHJldHVybiB2YWx1ZS5yZXBsYWNlKC9eKFxcLT9bMC05XFwuXSspKFthLXpdKikkLywgZnVuY3Rpb24oc3RyLCB2YWwsIHVuaXQpIHtcblx0XHRcdFx0aWYgKCF1bml0ICYmICh2YWwgPT0gJzAnIHx8IF8uaW5jbHVkZSh1bml0bGVzc1Byb3BzLCBwcm9wZXJ0eSkpKVxuXHRcdFx0XHRcdHJldHVybiB2YWw7XG5cblx0XHRcdFx0aWYgKCF1bml0KVxuXHRcdFx0XHRcdHJldHVybiB2YWwucmVwbGFjZSgvXFwuJC8sICcnKSArIHByZWZzLmdldCh+dmFsLmluZGV4T2YoJy4nKSA/ICdjc3MuZmxvYXRVbml0JyA6ICdjc3MuaW50VW5pdCcpO1xuXG5cdFx0XHRcdHJldHVybiB2YWwgKyBnZXRVbml0KHVuaXQpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEV4cGFuZHMgYWJicmV2aWF0aW9uIGludG8gYSBzbmlwcGV0XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGFiYnIgQWJicmV2aWF0aW9uIG5hbWUgdG8gZXhwYW5kXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIEFiYnJldmlhdGlvbiB2YWx1ZVxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzeW50YXggQ3VycmVjdCBzeW50YXggb3IgZGlhbGVjdC4gRGVmYXVsdCBpcyAnY3NzJ1xuXHRcdCAqIEByZXR1cm5zIHtPYmplY3R9IEFycmF5IG9mIENTUyBwcm9wZXJ0aWVzIGFuZCB2YWx1ZXMgb3IgcHJlZGVmaW5lZFxuXHRcdCAqIHNuaXBwZXQgKHN0cmluZyBvciBlbGVtZW50KVxuXHRcdCAqL1xuXHRcdGV4cGFuZDogZnVuY3Rpb24oYWJiciwgdmFsdWUsIHN5bnRheCkge1xuXHRcdFx0c3ludGF4ID0gc3ludGF4IHx8ICdjc3MnO1xuXHRcdFx0dmFyIHJlc291cmNlcyA9IHJlcXVpcmUoJ3Jlc291cmNlcycpO1xuXHRcdFx0dmFyIGF1dG9JbnNlcnRQcmVmaXhlcyA9IHByZWZzLmdldCgnY3NzLmF1dG9JbnNlcnRWZW5kb3JQcmVmaXhlcycpO1xuXG5cdFx0XHQvLyBjaGVjayBpZiBzbmlwcGV0IHNob3VsZCBiZSB0cmFuc2Zvcm1lZCB0byAhaW1wb3J0YW50XG5cdFx0XHR2YXIgaXNJbXBvcnRhbnQ7XG5cdFx0XHRpZiAoaXNJbXBvcnRhbnQgPSAvXiguKylcXCEkLy50ZXN0KGFiYnIpKSB7XG5cdFx0XHRcdGFiYnIgPSBSZWdFeHAuJDE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGNoZWNrIGlmIHdlIGhhdmUgYWJicmV2aWF0ZWQgcmVzb3VyY2Vcblx0XHRcdHZhciBzbmlwcGV0ID0gcmVzb3VyY2VzLmZpbmRTbmlwcGV0KHN5bnRheCwgYWJicik7XG5cdFx0XHRpZiAoc25pcHBldCAmJiAhYXV0b0luc2VydFByZWZpeGVzKSB7XG5cdFx0XHRcdHJldHVybiB0cmFuc2Zvcm1TbmlwcGV0KHNuaXBwZXQsIGlzSW1wb3J0YW50LCBzeW50YXgpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBubyBhYmJyZXZpYXRlZCByZXNvdXJjZSwgcGFyc2UgYWJicmV2aWF0aW9uXG5cdFx0XHR2YXIgcHJlZml4RGF0YSA9IHRoaXMuZXh0cmFjdFByZWZpeGVzKGFiYnIpO1xuXHRcdFx0dmFyIHZhbHVlc0RhdGEgPSB0aGlzLmV4dHJhY3RWYWx1ZXMocHJlZml4RGF0YS5wcm9wZXJ0eSk7XG5cdFx0XHR2YXIgYWJickRhdGEgPSBfLmV4dGVuZChwcmVmaXhEYXRhLCB2YWx1ZXNEYXRhKTtcblxuXHRcdFx0aWYgKCFzbmlwcGV0KSB7XG5cdFx0XHRcdHNuaXBwZXQgPSByZXNvdXJjZXMuZmluZFNuaXBwZXQoc3ludGF4LCBhYmJyRGF0YS5wcm9wZXJ0eSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhYmJyRGF0YS52YWx1ZXMgPSBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIXNuaXBwZXQgJiYgcHJlZnMuZ2V0KCdjc3MuZnV6enlTZWFyY2gnKSkge1xuXHRcdFx0XHQvLyBsZXTigJlzIHRyeSBmdXp6eSBzZWFyY2hcblx0XHRcdFx0c25pcHBldCA9IHJlc291cmNlcy5mdXp6eUZpbmRTbmlwcGV0KHN5bnRheCwgYWJickRhdGEucHJvcGVydHksIHBhcnNlRmxvYXQocHJlZnMuZ2V0KCdjc3MuZnV6enlTZWFyY2hNaW5TY29yZScpKSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghc25pcHBldCkge1xuXHRcdFx0XHRzbmlwcGV0ID0gYWJickRhdGEucHJvcGVydHkgKyAnOicgKyBkZWZhdWx0VmFsdWU7XG5cdFx0XHR9IGVsc2UgaWYgKCFfLmlzU3RyaW5nKHNuaXBwZXQpKSB7XG5cdFx0XHRcdHNuaXBwZXQgPSBzbmlwcGV0LmRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghaXNTaW5nbGVQcm9wZXJ0eShzbmlwcGV0KSkge1xuXHRcdFx0XHRyZXR1cm4gc25pcHBldDtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHNuaXBwZXRPYmogPSB0aGlzLnNwbGl0U25pcHBldChzbmlwcGV0KTtcblx0XHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHRcdGlmICghdmFsdWUgJiYgYWJickRhdGEudmFsdWVzKSB7XG5cdFx0XHRcdHZhbHVlID0gXy5tYXAoYWJickRhdGEudmFsdWVzLCBmdW5jdGlvbih2YWwpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5ub3JtYWxpemVWYWx1ZSh2YWwsIHNuaXBwZXRPYmoubmFtZSk7XG5cdFx0XHRcdH0sIHRoaXMpLmpvaW4oJyAnKSArICc7Jztcblx0XHRcdH1cblxuXHRcdFx0c25pcHBldE9iai52YWx1ZSA9IHZhbHVlIHx8IHNuaXBwZXRPYmoudmFsdWU7XG5cblx0XHRcdHZhciBwcmVmaXhlcyA9IGFiYnJEYXRhLnByZWZpeGVzID09ICdhbGwnIHx8ICghYWJickRhdGEucHJlZml4ZXMgJiYgYXV0b0luc2VydFByZWZpeGVzKVxuXHRcdFx0XHQ/IGZpbmRQcmVmaXhlcyhzbmlwcGV0T2JqLm5hbWUsIGF1dG9JbnNlcnRQcmVmaXhlcyAmJiBhYmJyRGF0YS5wcmVmaXhlcyAhPSAnYWxsJylcblx0XHRcdFx0OiBhYmJyRGF0YS5wcmVmaXhlcztcblxuXG5cdFx0XHR2YXIgbmFtZXMgPSBbXSwgcHJvcE5hbWU7XG5cdFx0XHRfLmVhY2gocHJlZml4ZXMsIGZ1bmN0aW9uKHApIHtcblx0XHRcdFx0aWYgKHAgaW4gdmVuZG9yUHJlZml4ZXMpIHtcblx0XHRcdFx0XHRwcm9wTmFtZSA9IHZlbmRvclByZWZpeGVzW3BdLnRyYW5zZm9ybU5hbWUoc25pcHBldE9iai5uYW1lKTtcblx0XHRcdFx0XHRuYW1lcy5wdXNoKHByb3BOYW1lKTtcblx0XHRcdFx0XHRyZXN1bHQucHVzaCh0cmFuc2Zvcm1TbmlwcGV0KHByb3BOYW1lICsgJzonICsgc25pcHBldE9iai52YWx1ZSxcblx0XHRcdFx0XHRcdFx0aXNJbXBvcnRhbnQsIHN5bnRheCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gcHV0IHRoZSBvcmlnaW5hbCBwcm9wZXJ0eVxuXHRcdFx0cmVzdWx0LnB1c2godHJhbnNmb3JtU25pcHBldChzbmlwcGV0T2JqLm5hbWUgKyAnOicgKyBzbmlwcGV0T2JqLnZhbHVlLCBpc0ltcG9ydGFudCwgc3ludGF4KSk7XG5cdFx0XHRuYW1lcy5wdXNoKHNuaXBwZXRPYmoubmFtZSk7XG5cblx0XHRcdGlmIChwcmVmcy5nZXQoJ2Nzcy5hbGlnblZlbmRvcicpKSB7XG5cdFx0XHRcdHZhciBwYWRzID0gcmVxdWlyZSgndXRpbHMnKS5nZXRTdHJpbmdzUGFkcyhuYW1lcyk7XG5cdFx0XHRcdHJlc3VsdCA9IF8ubWFwKHJlc3VsdCwgZnVuY3Rpb24ocHJvcCwgaSkge1xuXHRcdFx0XHRcdHJldHVybiBwYWRzW2ldICsgcHJvcDtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFNhbWUgYXMgPGNvZGU+ZXhwYW5kPC9jb2RlPiBtZXRob2QgYnV0IHRyYW5zZm9ybXMgb3V0cHV0IGludG9cblx0XHQgKiBFbW1ldCBzbmlwcGV0XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGFiYnJcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gc3ludGF4XG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRleHBhbmRUb1NuaXBwZXQ6IGZ1bmN0aW9uKGFiYnIsIHN5bnRheCkge1xuXHRcdFx0dmFyIHNuaXBwZXQgPSB0aGlzLmV4cGFuZChhYmJyLCBudWxsLCBzeW50YXgpO1xuXHRcdFx0aWYgKF8uaXNBcnJheShzbmlwcGV0KSkge1xuXHRcdFx0XHRyZXR1cm4gc25pcHBldC5qb2luKCdcXG4nKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFfLmlzU3RyaW5nKHNuaXBwZXQpKVxuXHRcdFx0XHRyZXR1cm4gc25pcHBldC5kYXRhO1xuXG5cdFx0XHRyZXR1cm4gU3RyaW5nKHNuaXBwZXQpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBTcGxpdCBzbmlwcGV0IGludG8gYSBDU1MgcHJvcGVydHktdmFsdWUgcGFpclxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBzbmlwcGV0XG5cdFx0ICovXG5cdFx0c3BsaXRTbmlwcGV0OiBmdW5jdGlvbihzbmlwcGV0KSB7XG5cdFx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXHRcdFx0c25pcHBldCA9IHV0aWxzLnRyaW0oc25pcHBldCk7XG5cdFx0XHRpZiAoc25pcHBldC5pbmRleE9mKCc6JykgPT0gLTEpIHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRuYW1lOiBzbmlwcGV0LFxuXHRcdFx0XHRcdHZhbHVlOiBkZWZhdWx0VmFsdWVcblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHBhaXIgPSBzbmlwcGV0LnNwbGl0KCc6Jyk7XG5cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdG5hbWU6IHV0aWxzLnRyaW0ocGFpci5zaGlmdCgpKSxcblx0XHRcdFx0Ly8gcmVwbGFjZSAkezB9IHRhYnN0b3AgdG8gcHJvZHVjZSB2YWxpZCB2ZW5kb3ItcHJlZml4ZWQgdmFsdWVzXG5cdFx0XHRcdC8vIHdoZXJlIHBvc3NpYmxlXG5cdFx0XHRcdHZhbHVlOiB1dGlscy50cmltKHBhaXIuam9pbignOicpKS5yZXBsYWNlKC9eKFxcJFxcezBcXH18XFwkMCkoXFxzKjs/KSQvLCAnJHsxfSQyJylcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdGdldFN5bnRheFByZWZlcmVuY2U6IGdldFN5bnRheFByZWZlcmVuY2UsXG5cdFx0dHJhbnNmb3JtU25pcHBldDogdHJhbnNmb3JtU25pcHBldFxuXHR9O1xufSk7XG4vKipcbiAqICdFeHBhbmQgQWJicmV2aWF0aW9uJyBoYW5kbGVyIHRoYXQgcGFyc2VzIGdyYWRpZW50IGRlZmluaXRpb24gZnJvbSB1bmRlclxuICogY3Vyc29yIGFuZCB1cGRhdGVzIENTUyBydWxlIHdpdGggdmVuZG9yLXByZWZpeGVkIHZhbHVlcy5cbiAqXG4gKiBAbWVtYmVyT2YgX19jc3NHcmFkaWVudEhhbmRsZXJEZWZpbmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlcXVpcmVcbiAqIEBwYXJhbSB7VW5kZXJzY29yZX0gX1xuICovXG5lbW1ldC5kZWZpbmUoJ2Nzc0dyYWRpZW50JywgZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHR2YXIgZGVmYXVsdExpbmVhckRpcmVjdGlvbnMgPSBbJ3RvcCcsICd0byBib3R0b20nLCAnMGRlZyddO1xuXHQvKiogQmFjay1yZWZlcmVuY2UgdG8gY3VycmVudCBtb2R1bGUgKi9cblx0dmFyIG1vZHVsZSA9IG51bGw7XG5cblx0dmFyIGNzc1N5bnRheGVzID0gWydjc3MnLCAnbGVzcycsICdzYXNzJywgJ3Njc3MnLCAnc3R5bHVzJywgJ3N0eWwnXTtcblxuXHR2YXIgcmVEZWcgPSAvXFxkK2RlZy9pO1xuXHR2YXIgcmVLZXl3b3JkID0gL3RvcHxib3R0b218bGVmdHxyaWdodC9pO1xuXG5cdC8vIFhYWCBkZWZpbmUgcHJlZmVyZW5jZXNcblx0LyoqIEB0eXBlIHByZWZlcmVuY2VzICovXG5cdHZhciBwcmVmcyA9IHJlcXVpcmUoJ3ByZWZlcmVuY2VzJyk7XG5cdHByZWZzLmRlZmluZSgnY3NzLmdyYWRpZW50LnByZWZpeGVzJywgJ3dlYmtpdCwgbW96LCBvJyxcblx0XHRcdCdBIGNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIHZlbmRvci1wcmVmaXhlcyBmb3Igd2hpY2ggdmFsdWVzIHNob3VsZCAnXG5cdFx0XHQrICdiZSBnZW5lcmF0ZWQuJyk7XG5cblx0cHJlZnMuZGVmaW5lKCdjc3MuZ3JhZGllbnQub2xkV2Via2l0JywgdHJ1ZSxcblx0XHRcdCdHZW5lcmF0ZSBncmFkaWVudCBkZWZpbml0aW9uIGZvciBvbGQgV2Via2l0IGltcGxlbWVudGF0aW9ucycpO1xuXG5cdHByZWZzLmRlZmluZSgnY3NzLmdyYWRpZW50Lm9taXREZWZhdWx0RGlyZWN0aW9uJywgdHJ1ZSxcblx0XHQnRG8gbm90IG91dHB1dCBkZWZhdWx0IGRpcmVjdGlvbiBkZWZpbml0aW9uIGluIGdlbmVyYXRlZCBncmFkaWVudHMuJyk7XG5cblx0cHJlZnMuZGVmaW5lKCdjc3MuZ3JhZGllbnQuZGVmYXVsdFByb3BlcnR5JywgJ2JhY2tncm91bmQtaW1hZ2UnLFxuXHRcdCdXaGVuIGdyYWRpZW50IGV4cGFuZGVkIG91dHNpZGUgQ1NTIHZhbHVlIGNvbnRleHQsIGl0IHdpbGwgcHJvZHVjZSAnXG5cdFx0XHQrICdwcm9wZXJ0aWVzIHdpdGggdGhpcyBuYW1lLicpO1xuXG5cdHByZWZzLmRlZmluZSgnY3NzLmdyYWRpZW50LmZhbGxiYWNrJywgZmFsc2UsXG5cdFx0XHQnV2l0aCB0aGlzIG9wdGlvbiBlbmFibGVkLCBDU1MgZ3JhZGllbnQgZ2VuZXJhdG9yIHdpbGwgcHJvZHVjZSAnXG5cdFx0XHQrICc8Y29kZT5iYWNrZ3JvdW5kLWNvbG9yPC9jb2RlPiBwcm9wZXJ0eSB3aXRoIGdyYWRpZW50IGZpcnN0IGNvbG9yICdcblx0XHRcdCsgJ2FzIGZhbGxiYWNrIGZvciBvbGQgYnJvd3NlcnMuJyk7XG5cblx0ZnVuY3Rpb24gbm9ybWFsaXplU3BhY2Uoc3RyKSB7XG5cdFx0cmV0dXJuIHJlcXVpcmUoJ3V0aWxzJykudHJpbShzdHIpLnJlcGxhY2UoL1xccysvZywgJyAnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQYXJzZXMgbGluZWFyIGdyYWRpZW50IGRlZmluaXRpb25cblx0ICogQHBhcmFtIHtTdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBwYXJzZUxpbmVhckdyYWRpZW50KGdyYWRpZW50KSB7XG5cdFx0dmFyIGRpcmVjdGlvbiA9IGRlZmF1bHRMaW5lYXJEaXJlY3Rpb25zWzBdO1xuXG5cdFx0Ly8gZXh0cmFjdCB0b2tlbnNcblx0XHQvKiogQHR5cGUgU3RyaW5nU3RyZWFtICovXG5cdFx0dmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmluZ1N0cmVhbScpLmNyZWF0ZShyZXF1aXJlKCd1dGlscycpLnRyaW0oZ3JhZGllbnQpKTtcblx0XHR2YXIgY29sb3JTdG9wcyA9IFtdLCBjaDtcblx0XHR3aGlsZSAoY2ggPSBzdHJlYW0ubmV4dCgpKSB7XG5cdFx0XHRpZiAoc3RyZWFtLnBlZWsoKSA9PSAnLCcpIHtcblx0XHRcdFx0Y29sb3JTdG9wcy5wdXNoKHN0cmVhbS5jdXJyZW50KCkpO1xuXHRcdFx0XHRzdHJlYW0ubmV4dCgpO1xuXHRcdFx0XHRzdHJlYW0uZWF0U3BhY2UoKTtcblx0XHRcdFx0c3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcblx0XHRcdH0gZWxzZSBpZiAoY2ggPT0gJygnKSB7IC8vIGNvbG9yIGRlZmluaXRpb24sIGxpa2UgJ3JnYigwLDAsMCknXG5cdFx0XHRcdHN0cmVhbS5za2lwVG8oJyknKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBhZGQgbGFzdCB0b2tlblxuXHRcdGNvbG9yU3RvcHMucHVzaChzdHJlYW0uY3VycmVudCgpKTtcblx0XHRjb2xvclN0b3BzID0gXy5jb21wYWN0KF8ubWFwKGNvbG9yU3RvcHMsIG5vcm1hbGl6ZVNwYWNlKSk7XG5cblx0XHRpZiAoIWNvbG9yU3RvcHMubGVuZ3RoKVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHQvLyBsZXQncyBzZWUgaWYgdGhlIGZpcnN0IGNvbG9yIHN0b3AgaXMgYWN0dWFsbHkgYSBkaXJlY3Rpb25cblx0XHRpZiAocmVEZWcudGVzdChjb2xvclN0b3BzWzBdKSB8fCByZUtleXdvcmQudGVzdChjb2xvclN0b3BzWzBdKSkge1xuXHRcdFx0ZGlyZWN0aW9uID0gY29sb3JTdG9wcy5zaGlmdCgpO1xuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHR0eXBlOiAnbGluZWFyJyxcblx0XHRcdGRpcmVjdGlvbjogZGlyZWN0aW9uLFxuXHRcdFx0Y29sb3JTdG9wczogXy5tYXAoY29sb3JTdG9wcywgcGFyc2VDb2xvclN0b3ApXG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQYXJzZXMgY29sb3Igc3RvcCBkZWZpbml0aW9uXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjb2xvclN0b3Bcblx0ICogQHJldHVybnMge09iamVjdH1cblx0ICovXG5cdGZ1bmN0aW9uIHBhcnNlQ29sb3JTdG9wKGNvbG9yU3RvcCkge1xuXHRcdGNvbG9yU3RvcCA9IG5vcm1hbGl6ZVNwYWNlKGNvbG9yU3RvcCk7XG5cblx0XHQvLyBmaW5kIGNvbG9yIGRlY2xhcmF0aW9uXG5cdFx0Ly8gZmlyc3QsIHRyeSBjb21wbGV4IGNvbG9yIGRlY2xhcmF0aW9uLCBsaWtlIHJnYigwLDAsMClcblx0XHR2YXIgY29sb3IgPSBudWxsO1xuXHRcdGNvbG9yU3RvcCA9IGNvbG9yU3RvcC5yZXBsYWNlKC9eKFxcdytcXCguKz9cXCkpXFxzKi8sIGZ1bmN0aW9uKHN0ciwgYykge1xuXHRcdFx0Y29sb3IgPSBjO1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH0pO1xuXG5cdFx0aWYgKCFjb2xvcikge1xuXHRcdFx0Ly8gdHJ5IHNpbXBsZSBkZWNsYXJhdGlvbiwgbGlrZSB5ZWxsb3csICNmY28sICNmZmZmZmYsIGV0Yy5cblx0XHRcdHZhciBwYXJ0cyA9IGNvbG9yU3RvcC5zcGxpdCgnICcpO1xuXHRcdFx0Y29sb3IgPSBwYXJ0c1swXTtcblx0XHRcdGNvbG9yU3RvcCA9IHBhcnRzWzFdIHx8ICcnO1xuXHRcdH1cblxuXHRcdHZhciByZXN1bHQgPSB7XG5cdFx0XHRjb2xvcjogY29sb3Jcblx0XHR9O1xuXG5cdFx0aWYgKGNvbG9yU3RvcCkge1xuXHRcdFx0Ly8gdGhlcmUncyBwb3NpdGlvbiBpbiBjb2xvciBzdG9wIGRlZmluaXRpb25cblx0XHRcdGNvbG9yU3RvcC5yZXBsYWNlKC9eKFxcLT9bXFxkXFwuXSspKFthLXolXSspPyQvLCBmdW5jdGlvbihzdHIsIHBvcywgdW5pdCkge1xuXHRcdFx0XHRyZXN1bHQucG9zaXRpb24gPSBwb3M7XG5cdFx0XHRcdGlmICh+cG9zLmluZGV4T2YoJy4nKSkge1xuXHRcdFx0XHRcdHVuaXQgPSAnJztcblx0XHRcdFx0fSBlbHNlIGlmICghdW5pdCkge1xuXHRcdFx0XHRcdHVuaXQgPSAnJSc7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodW5pdClcblx0XHRcdFx0XHRyZXN1bHQudW5pdCA9IHVuaXQ7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlc29sdmVzIHByb3BlcnR5IG5hbWUgKGFiYnJldmlhdGlvbik6IHNlYXJjaGVzIGZvciBzbmlwcGV0IGRlZmluaXRpb24gaW5cblx0ICogJ3Jlc291cmNlcycgYW5kIHJldHVybnMgbmV3IG5hbWUgb2YgbWF0Y2hlZCBwcm9wZXJ0eVxuXHQgKi9cblx0ZnVuY3Rpb24gcmVzb2x2ZVByb3BlcnR5TmFtZShuYW1lLCBzeW50YXgpIHtcblx0XHR2YXIgcmVzID0gcmVxdWlyZSgncmVzb3VyY2VzJyk7XG5cdFx0dmFyIHByZWZzID0gcmVxdWlyZSgncHJlZmVyZW5jZXMnKTtcblx0XHR2YXIgc25pcHBldCA9IHJlcy5maW5kU25pcHBldChzeW50YXgsIG5hbWUpO1xuXG5cdFx0aWYgKCFzbmlwcGV0ICYmIHByZWZzLmdldCgnY3NzLmZ1enp5U2VhcmNoJykpIHtcblx0XHRcdHNuaXBwZXQgPSByZXMuZnV6enlGaW5kU25pcHBldChzeW50YXgsIG5hbWUsXG5cdFx0XHRcdFx0cGFyc2VGbG9hdChwcmVmcy5nZXQoJ2Nzcy5mdXp6eVNlYXJjaE1pblNjb3JlJykpKTtcblx0XHR9XG5cblx0XHRpZiAoc25pcHBldCkge1xuXHRcdFx0aWYgKCFfLmlzU3RyaW5nKHNuaXBwZXQpKSB7XG5cdFx0XHRcdHNuaXBwZXQgPSBzbmlwcGV0LmRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXF1aXJlKCdjc3NSZXNvbHZlcicpLnNwbGl0U25pcHBldChzbmlwcGV0KS5uYW1lO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBGaWxscy1vdXQgaW1wbGllZCBwb3NpdGlvbnMgaW4gY29sb3Itc3RvcHMuIFRoaXMgZnVuY3Rpb24gaXMgdXNlZnVsIGZvclxuXHQgKiBvbGQgV2Via2l0IGdyYWRpZW50IGRlZmluaXRpb25zXG5cdCAqL1xuXHRmdW5jdGlvbiBmaWxsSW1wbGllZFBvc2l0aW9ucyhjb2xvclN0b3BzKSB7XG5cdFx0dmFyIGZyb20gPSAwO1xuXG5cdFx0Xy5lYWNoKGNvbG9yU3RvcHMsIGZ1bmN0aW9uKGNzLCBpKSB7XG5cdFx0XHQvLyBtYWtlIHN1cmUgdGhhdCBmaXJzdCBhbmQgbGFzdCBwb3NpdGlvbnMgYXJlIGRlZmluZWRcblx0XHRcdGlmICghaSlcblx0XHRcdFx0cmV0dXJuIGNzLnBvc2l0aW9uID0gY3MucG9zaXRpb24gfHwgMDtcblxuXHRcdFx0aWYgKGkgPT0gY29sb3JTdG9wcy5sZW5ndGggLSAxICYmICEoJ3Bvc2l0aW9uJyBpbiBjcykpXG5cdFx0XHRcdGNzLnBvc2l0aW9uID0gMTtcblxuXHRcdFx0aWYgKCdwb3NpdGlvbicgaW4gY3MpIHtcblx0XHRcdFx0dmFyIHN0YXJ0ID0gY29sb3JTdG9wc1tmcm9tXS5wb3NpdGlvbiB8fCAwO1xuXHRcdFx0XHR2YXIgc3RlcCA9IChjcy5wb3NpdGlvbiAtIHN0YXJ0KSAvIChpIC0gZnJvbSk7XG5cdFx0XHRcdF8uZWFjaChjb2xvclN0b3BzLnNsaWNlKGZyb20sIGkpLCBmdW5jdGlvbihjczIsIGopIHtcblx0XHRcdFx0XHRjczIucG9zaXRpb24gPSBzdGFydCArIHN0ZXAgKiBqO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRmcm9tID0gaTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRleHR1YWwgdmVyc2lvbiBvZiBkaXJlY3Rpb24gZXhwcmVzc2VkIGluIGRlZ3JlZXNcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRpcmVjdGlvblxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gdGV4dHVhbERpcmVjdGlvbihkaXJlY3Rpb24pIHtcblx0XHR2YXIgYW5nbGUgPSBwYXJzZUZsb2F0KGRpcmVjdGlvbik7XG5cblx0XHRpZighXy5pc05hTihhbmdsZSkpIHtcblx0XHRcdHN3aXRjaChhbmdsZSAlIDM2MCkge1xuXHRcdFx0XHRjYXNlIDA6ICAgcmV0dXJuICdsZWZ0Jztcblx0XHRcdFx0Y2FzZSA5MDogIHJldHVybiAnYm90dG9tJztcblx0XHRcdFx0Y2FzZSAxODA6IHJldHVybiAncmlnaHQnO1xuXHRcdFx0XHRjYXNlIDI0MDogcmV0dXJuICd0b3AnO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBkaXJlY3Rpb247XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBkaXJlY3Rpb24gZGVmaW5pdGlvbiBmb3Igb2xkIFdlYmtpdCBncmFkaWVudHNcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRpcmVjdGlvblxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gb2xkV2Via2l0RGlyZWN0aW9uKGRpcmVjdGlvbikge1xuXHRcdGRpcmVjdGlvbiA9IHRleHR1YWxEaXJlY3Rpb24oZGlyZWN0aW9uKTtcblxuXHRcdGlmKHJlRGVnLnRlc3QoZGlyZWN0aW9uKSlcblx0XHRcdHRocm93IFwiVGhlIGRpcmVjdGlvbiBpcyBhbiBhbmdsZSB0aGF0IGNhbuKAmXQgYmUgY29udmVydGVkLlwiO1xuXG5cdFx0dmFyIHYgPSBmdW5jdGlvbihwb3MpIHtcblx0XHRcdHJldHVybiB+ZGlyZWN0aW9uLmluZGV4T2YocG9zKSA/ICcxMDAlJyA6ICcwJztcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHYoJ3JpZ2h0JykgKyAnICcgKyB2KCdib3R0b20nKSArICcsICcgKyB2KCdsZWZ0JykgKyAnICcgKyB2KCd0b3AnKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFByZWZpeGVkTmFtZXMobmFtZSkge1xuXHRcdHZhciBwcmVmaXhlcyA9IHByZWZzLmdldEFycmF5KCdjc3MuZ3JhZGllbnQucHJlZml4ZXMnKTtcblx0XHR2YXIgbmFtZXMgPSBwcmVmaXhlc1xuXHRcdFx0PyBfLm1hcChwcmVmaXhlcywgZnVuY3Rpb24ocCkge1xuXHRcdFx0XHRyZXR1cm4gJy0nICsgcCArICctJyArIG5hbWU7XG5cdFx0XHR9KVxuXHRcdFx0OiBbXTtcblxuXHRcdG5hbWVzLnB1c2gobmFtZSk7XG5cblx0XHRyZXR1cm4gbmFtZXM7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyBsaXN0IG9mIENTUyBwcm9wZXJ0aWVzIHdpdGggZ3JhZGllbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IGdyYWRpZW50XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eU5hbWUgT3JpZ2luYWwgQ1NTIHByb3BlcnR5IG5hbWVcblx0ICogQHJldHVybnMge0FycmF5fVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UHJvcGVydGllc0ZvckdyYWRpZW50KGdyYWRpZW50LCBwcm9wZXJ0eU5hbWUpIHtcblx0XHR2YXIgcHJvcHMgPSBbXTtcblx0XHR2YXIgY3NzID0gcmVxdWlyZSgnY3NzUmVzb2x2ZXInKTtcblxuXHRcdGlmIChwcmVmcy5nZXQoJ2Nzcy5ncmFkaWVudC5mYWxsYmFjaycpICYmIH5wcm9wZXJ0eU5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdiYWNrZ3JvdW5kJykpIHtcblx0XHRcdHByb3BzLnB1c2goe1xuXHRcdFx0XHRuYW1lOiAnYmFja2dyb3VuZC1jb2xvcicsXG5cdFx0XHRcdHZhbHVlOiAnJHsxOicgKyBncmFkaWVudC5jb2xvclN0b3BzWzBdLmNvbG9yICsgJ30nXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRfLmVhY2gocHJlZnMuZ2V0QXJyYXkoJ2Nzcy5ncmFkaWVudC5wcmVmaXhlcycpLCBmdW5jdGlvbihwcmVmaXgpIHtcblx0XHRcdHZhciBuYW1lID0gY3NzLnByZWZpeGVkKHByb3BlcnR5TmFtZSwgcHJlZml4KTtcblx0XHRcdGlmIChwcmVmaXggPT0gJ3dlYmtpdCcgJiYgcHJlZnMuZ2V0KCdjc3MuZ3JhZGllbnQub2xkV2Via2l0JykpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRwcm9wcy5wdXNoKHtcblx0XHRcdFx0XHRcdG5hbWU6IG5hbWUsXG5cdFx0XHRcdFx0XHR2YWx1ZTogbW9kdWxlLm9sZFdlYmtpdExpbmVhckdyYWRpZW50KGdyYWRpZW50KVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGNhdGNoKGUpIHt9XG5cdFx0XHR9XG5cblx0XHRcdHByb3BzLnB1c2goe1xuXHRcdFx0XHRuYW1lOiBuYW1lLFxuXHRcdFx0XHR2YWx1ZTogbW9kdWxlLnRvU3RyaW5nKGdyYWRpZW50LCBwcmVmaXgpXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBwcm9wcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHJldHVybiBiLm5hbWUubGVuZ3RoIC0gYS5uYW1lLmxlbmd0aDtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQYXN0ZXMgZ3JhZGllbnQgZGVmaW5pdGlvbiBpbnRvIENTUyBydWxlIHdpdGggY29ycmVjdCB2ZW5kb3ItcHJlZml4ZXNcblx0ICogQHBhcmFtIHtFZGl0RWxlbWVudH0gcHJvcGVydHkgTWF0Y2hlZCBDU1MgcHJvcGVydHlcblx0ICogQHBhcmFtIHtPYmplY3R9IGdyYWRpZW50IFBhcnNlZCBncmFkaWVudFxuXHQgKiBAcGFyYW0ge1JhbmdlfSB2YWx1ZVJhbmdlIElmIHBhc3NlZCwgb25seSB0aGlzIHJhbmdlIHdpdGhpbiBwcm9wZXJ0eVxuXHQgKiB2YWx1ZSB3aWxsIGJlIHJlcGxhY2VkIHdpdGggZ3JhZGllbnQuIE90aGVyd2lzZSwgZnVsbCB2YWx1ZSB3aWxsIGJlXG5cdCAqIHJlcGxhY2VkXG5cdCAqL1xuXHRmdW5jdGlvbiBwYXN0ZUdyYWRpZW50KHByb3BlcnR5LCBncmFkaWVudCwgdmFsdWVSYW5nZSkge1xuXHRcdHZhciBydWxlID0gcHJvcGVydHkucGFyZW50O1xuXHRcdHZhciB1dGlscyA9IHJlcXVpcmUoJ3V0aWxzJyk7XG5cdFx0dmFyIGFsaWduVmVuZG9yID0gcmVxdWlyZSgncHJlZmVyZW5jZXMnKS5nZXQoJ2Nzcy5hbGlnblZlbmRvcicpO1xuXG5cdFx0Ly8gd2UgbWF5IGhhdmUgYWxpZ25lZCBncmFkaWVudCBkZWZpbml0aW9uczogZmluZCB0aGUgc21hbGxlc3QgdmFsdWVcblx0XHQvLyBzZXBhcmF0b3Jcblx0XHR2YXIgc2VwID0gcHJvcGVydHkuc3R5bGVTZXBhcmF0b3I7XG5cdFx0dmFyIGJlZm9yZSA9IHByb3BlcnR5LnN0eWxlQmVmb3JlO1xuXG5cdFx0Ly8gZmlyc3QsIHJlbW92ZSBhbGwgcHJvcGVydGllcyB3aXRoaW4gQ1NTIHJ1bGUgd2l0aCB0aGUgc2FtZSBuYW1lIGFuZFxuXHRcdC8vIGdyYWRpZW50IGRlZmluaXRpb25cblx0XHRfLmVhY2gocnVsZS5nZXRBbGwoZ2V0UHJlZml4ZWROYW1lcyhwcm9wZXJ0eS5uYW1lKCkpKSwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0aWYgKGl0ZW0gIT0gcHJvcGVydHkgJiYgL2dyYWRpZW50L2kudGVzdChpdGVtLnZhbHVlKCkpKSB7XG5cdFx0XHRcdGlmIChpdGVtLnN0eWxlU2VwYXJhdG9yLmxlbmd0aCA8IHNlcC5sZW5ndGgpIHtcblx0XHRcdFx0XHRzZXAgPSBpdGVtLnN0eWxlU2VwYXJhdG9yO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChpdGVtLnN0eWxlQmVmb3JlLmxlbmd0aCA8IGJlZm9yZS5sZW5ndGgpIHtcblx0XHRcdFx0XHRiZWZvcmUgPSBpdGVtLnN0eWxlQmVmb3JlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJ1bGUucmVtb3ZlKGl0ZW0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0aWYgKGFsaWduVmVuZG9yKSB7XG5cdFx0XHQvLyB1cGRhdGUgcHJlZml4XG5cdFx0XHRpZiAoYmVmb3JlICE9IHByb3BlcnR5LnN0eWxlQmVmb3JlKSB7XG5cdFx0XHRcdHZhciBmdWxsUmFuZ2UgPSBwcm9wZXJ0eS5mdWxsUmFuZ2UoKTtcblx0XHRcdFx0cnVsZS5fdXBkYXRlU291cmNlKGJlZm9yZSwgZnVsbFJhbmdlLnN0YXJ0LCBmdWxsUmFuZ2Uuc3RhcnQgKyBwcm9wZXJ0eS5zdHlsZUJlZm9yZS5sZW5ndGgpO1xuXHRcdFx0XHRwcm9wZXJ0eS5zdHlsZUJlZm9yZSA9IGJlZm9yZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gdXBkYXRlIHNlcGFyYXRvciB2YWx1ZVxuXHRcdFx0aWYgKHNlcCAhPSBwcm9wZXJ0eS5zdHlsZVNlcGFyYXRvcikge1xuXHRcdFx0XHRydWxlLl91cGRhdGVTb3VyY2Uoc2VwLCBwcm9wZXJ0eS5uYW1lUmFuZ2UoKS5lbmQsIHByb3BlcnR5LnZhbHVlUmFuZ2UoKS5zdGFydCk7XG5cdFx0XHRcdHByb3BlcnR5LnN0eWxlU2VwYXJhdG9yID0gc2VwO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZhciB2YWx1ZSA9IHByb3BlcnR5LnZhbHVlKCk7XG5cdFx0aWYgKCF2YWx1ZVJhbmdlKVxuXHRcdFx0dmFsdWVSYW5nZSA9IHJlcXVpcmUoJ3JhbmdlJykuY3JlYXRlKDAsIHByb3BlcnR5LnZhbHVlKCkpO1xuXG5cdFx0dmFyIHZhbCA9IGZ1bmN0aW9uKHYpIHtcblx0XHRcdHJldHVybiB1dGlscy5yZXBsYWNlU3Vic3RyaW5nKHZhbHVlLCB2LCB2YWx1ZVJhbmdlKTtcblx0XHR9O1xuXG5cdFx0Ly8gcHV0IHZhbmlsbGEtY2xlYW4gZ3JhZGllbnQgZGVmaW5pdGlvbiBpbnRvIGN1cnJlbnQgcnVsZVxuXHRcdHByb3BlcnR5LnZhbHVlKHZhbChtb2R1bGUudG9TdHJpbmcoZ3JhZGllbnQpKSArICckezJ9Jyk7XG5cblx0XHQvLyBjcmVhdGUgbGlzdCBvZiBwcm9wZXJ0aWVzIHRvIGluc2VydFxuXHRcdHZhciBwcm9wc1RvSW5zZXJ0ID0gZ2V0UHJvcGVydGllc0ZvckdyYWRpZW50KGdyYWRpZW50LCBwcm9wZXJ0eS5uYW1lKCkpO1xuXG5cdFx0Ly8gYWxpZ24gcHJlZml4ZWQgdmFsdWVzXG5cdFx0aWYgKGFsaWduVmVuZG9yKSB7XG5cdFx0XHR2YXIgdmFsdWVzID0gXy5wbHVjayhwcm9wc1RvSW5zZXJ0LCAndmFsdWUnKTtcblx0XHRcdHZhciBuYW1lcyA9IF8ucGx1Y2socHJvcHNUb0luc2VydCwgJ25hbWUnKTtcblx0XHRcdHZhbHVlcy5wdXNoKHByb3BlcnR5LnZhbHVlKCkpO1xuXHRcdFx0bmFtZXMucHVzaChwcm9wZXJ0eS5uYW1lKCkpO1xuXG5cdFx0XHR2YXIgdmFsdWVQYWRzID0gdXRpbHMuZ2V0U3RyaW5nc1BhZHMoXy5tYXAodmFsdWVzLCBmdW5jdGlvbih2KSB7XG5cdFx0XHRcdHJldHVybiB2LnN1YnN0cmluZygwLCB2LmluZGV4T2YoJygnKSk7XG5cdFx0XHR9KSk7XG5cblx0XHRcdHZhciBuYW1lUGFkcyA9IHV0aWxzLmdldFN0cmluZ3NQYWRzKG5hbWVzKTtcblx0XHRcdHByb3BlcnR5Lm5hbWUoXy5sYXN0KG5hbWVQYWRzKSArIHByb3BlcnR5Lm5hbWUoKSk7XG5cblx0XHRcdF8uZWFjaChwcm9wc1RvSW5zZXJ0LCBmdW5jdGlvbihwcm9wLCBpKSB7XG5cdFx0XHRcdHByb3AubmFtZSA9IG5hbWVQYWRzW2ldICsgcHJvcC5uYW1lO1xuXHRcdFx0XHRwcm9wLnZhbHVlID0gdmFsdWVQYWRzW2ldICsgcHJvcC52YWx1ZTtcblx0XHRcdH0pO1xuXG5cdFx0XHRwcm9wZXJ0eS52YWx1ZShfLmxhc3QodmFsdWVQYWRzKSArIHByb3BlcnR5LnZhbHVlKCkpO1xuXHRcdH1cblxuXHRcdC8vIHB1dCB2ZW5kb3ItcHJlZml4ZWQgZGVmaW5pdGlvbnMgYmVmb3JlIGN1cnJlbnQgcnVsZVxuXHRcdF8uZWFjaChwcm9wc1RvSW5zZXJ0LCBmdW5jdGlvbihwcm9wKSB7XG5cdFx0XHRydWxlLmFkZChwcm9wLm5hbWUsIHByb3AudmFsdWUsIHJ1bGUuaW5kZXhPZihwcm9wZXJ0eSkpO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNlYXJjaCBmb3IgZ3JhZGllbnQgZGVmaW5pdGlvbiBpbnNpZGUgQ1NTIHByb3BlcnR5IHZhbHVlXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kR3JhZGllbnQoY3NzUHJvcCkge1xuXHRcdHZhciB2YWx1ZSA9IGNzc1Byb3AudmFsdWUoKTtcblx0XHR2YXIgZ3JhZGllbnQgPSBudWxsO1xuXHRcdHZhciBtYXRjaGVkUGFydCA9IF8uZmluZChjc3NQcm9wLnZhbHVlUGFydHMoKSwgZnVuY3Rpb24ocGFydCkge1xuXHRcdFx0cmV0dXJuIGdyYWRpZW50ID0gbW9kdWxlLnBhcnNlKHBhcnQuc3Vic3RyaW5nKHZhbHVlKSk7XG5cdFx0fSk7XG5cblx0XHRpZiAobWF0Y2hlZFBhcnQgJiYgZ3JhZGllbnQpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGdyYWRpZW50OiBncmFkaWVudCxcblx0XHRcdFx0dmFsdWVSYW5nZTogbWF0Y2hlZFBhcnRcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvKipcblx0ICogVHJpZXMgdG8gZXhwYW5kIGdyYWRpZW50IG91dHNpZGUgQ1NTIHZhbHVlXG5cdCAqIEBwYXJhbSB7SUVtbWV0RWRpdG9yfSBlZGl0b3Jcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN5bnRheFxuXHQgKi9cblx0ZnVuY3Rpb24gZXhwYW5kR3JhZGllbnRPdXRzaWRlVmFsdWUoZWRpdG9yLCBzeW50YXgpIHtcblx0XHR2YXIgcHJvcGVydHlOYW1lID0gcHJlZnMuZ2V0KCdjc3MuZ3JhZGllbnQuZGVmYXVsdFByb3BlcnR5Jyk7XG5cblx0XHRpZiAoIXByb3BlcnR5TmFtZSlcblx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdC8vIGFzc3VtaW5nIHRoYXQgZ3JhZGllbnQgZGVmaW5pdGlvbiBpcyB3cml0dGVuIG9uIG5ldyBsaW5lLFxuXHRcdC8vIGRvIGEgc2ltcGxpZmllZCBwYXJzaW5nXG5cdFx0dmFyIGNvbnRlbnQgPSBTdHJpbmcoZWRpdG9yLmdldENvbnRlbnQoKSk7XG5cdFx0LyoqIEB0eXBlIFJhbmdlICovXG5cdFx0dmFyIGxpbmVSYW5nZSA9IHJlcXVpcmUoJ3JhbmdlJykuY3JlYXRlKGVkaXRvci5nZXRDdXJyZW50TGluZVJhbmdlKCkpO1xuXG5cdFx0Ly8gZ2V0IGxpbmUgY29udGVudCBhbmQgYWRqdXN0IHJhbmdlIHdpdGggcGFkZGluZ1xuXHRcdHZhciBsaW5lID0gbGluZVJhbmdlLnN1YnN0cmluZyhjb250ZW50KVxuXHRcdFx0LnJlcGxhY2UoL15cXHMrLywgZnVuY3Rpb24ocGFkKSB7XG5cdFx0XHRcdGxpbmVSYW5nZS5zdGFydCArPSBwYWQubGVuZ3RoO1xuXHRcdFx0XHRyZXR1cm4gJyc7XG5cdFx0XHR9KVxuXHRcdFx0LnJlcGxhY2UoL1xccyskLywgZnVuY3Rpb24ocGFkKSB7XG5cdFx0XHRcdGxpbmVSYW5nZS5lbmQgLT0gcGFkLmxlbmd0aDtcblx0XHRcdFx0cmV0dXJuICcnO1xuXHRcdFx0fSk7XG5cblx0XHR2YXIgY3NzID0gcmVxdWlyZSgnY3NzUmVzb2x2ZXInKTtcblx0XHR2YXIgZ3JhZGllbnQgPSBtb2R1bGUucGFyc2UobGluZSk7XG5cdFx0aWYgKGdyYWRpZW50KSB7XG5cdFx0XHR2YXIgcHJvcHMgPSBnZXRQcm9wZXJ0aWVzRm9yR3JhZGllbnQoZ3JhZGllbnQsIHByb3BlcnR5TmFtZSk7XG5cdFx0XHRwcm9wcy5wdXNoKHtcblx0XHRcdFx0bmFtZTogcHJvcGVydHlOYW1lLFxuXHRcdFx0XHR2YWx1ZTogbW9kdWxlLnRvU3RyaW5nKGdyYWRpZW50KSArICckezJ9J1xuXHRcdFx0fSk7XG5cblx0XHRcdHZhciBzZXAgPSBjc3MuZ2V0U3ludGF4UHJlZmVyZW5jZSgndmFsdWVTZXBhcmF0b3InLCBzeW50YXgpO1xuXHRcdFx0dmFyIGVuZCA9IGNzcy5nZXRTeW50YXhQcmVmZXJlbmNlKCdwcm9wZXJ0eUVuZCcsIHN5bnRheCk7XG5cblx0XHRcdGlmIChyZXF1aXJlKCdwcmVmZXJlbmNlcycpLmdldCgnY3NzLmFsaWduVmVuZG9yJykpIHtcblx0XHRcdFx0dmFyIHBhZHMgPSByZXF1aXJlKCd1dGlscycpLmdldFN0cmluZ3NQYWRzKF8ubWFwKHByb3BzLCBmdW5jdGlvbihwcm9wKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHByb3AudmFsdWUuc3Vic3RyaW5nKDAsIHByb3AudmFsdWUuaW5kZXhPZignKCcpKTtcblx0XHRcdFx0fSkpO1xuXHRcdFx0XHRfLmVhY2gocHJvcHMsIGZ1bmN0aW9uKHByb3AsIGkpIHtcblx0XHRcdFx0XHRwcm9wLnZhbHVlID0gcGFkc1tpXSArIHByb3AudmFsdWU7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRwcm9wcyA9IF8ubWFwKHByb3BzLCBmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdHJldHVybiBpdGVtLm5hbWUgKyBzZXAgKyBpdGVtLnZhbHVlICsgZW5kO1xuXHRcdFx0fSk7XG5cblx0XHRcdGVkaXRvci5yZXBsYWNlQ29udGVudChwcm9wcy5qb2luKCdcXG4nKSwgbGluZVJhbmdlLnN0YXJ0LCBsaW5lUmFuZ2UuZW5kKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTZWFyY2ggZm9yIGdyYWRpZW50IGRlZmluaXRpb24gaW5zaWRlIENTUyB2YWx1ZSB1bmRlciBjdXJzb3Jcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvc1xuXHQgKiBAcmV0dXJucyB7T2JqZWN0fVxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZEdyYWRpZW50RnJvbVBvc2l0aW9uKGNvbnRlbnQsIHBvcykge1xuXHRcdHZhciBjc3NQcm9wID0gbnVsbDtcblx0XHQvKiogQHR5cGUgRWRpdENvbnRhaW5lciAqL1xuXHRcdHZhciBjc3NSdWxlID0gcmVxdWlyZSgnY3NzRWRpdFRyZWUnKS5wYXJzZUZyb21Qb3NpdGlvbihjb250ZW50LCBwb3MsIHRydWUpO1xuXG5cdFx0aWYgKGNzc1J1bGUpIHtcblx0XHRcdGNzc1Byb3AgPSBjc3NSdWxlLml0ZW1Gcm9tUG9zaXRpb24ocG9zLCB0cnVlKTtcblx0XHRcdGlmICghY3NzUHJvcCkge1xuXHRcdFx0XHQvLyBpbiBjYXNlIHVzZXIganVzdCBzdGFydGVkIHdyaXRpbmcgQ1NTIHByb3BlcnR5XG5cdFx0XHRcdC8vIGFuZCBkaWRuJ3QgaW5jbHVkZSBzZW1pY29sb27igJN0cnkgYW5vdGhlciBhcHByb2FjaFxuXHRcdFx0XHRjc3NQcm9wID0gXy5maW5kKGNzc1J1bGUubGlzdCgpLCBmdW5jdGlvbihlbGVtKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGVsZW0ucmFuZ2UodHJ1ZSkuZW5kID09IHBvcztcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJ1bGU6IGNzc1J1bGUsXG5cdFx0XHRwcm9wZXJ0eTogY3NzUHJvcFxuXHRcdH07XG5cdH1cblxuXHQvLyBYWFggcmVnaXN0ZXIgZXhwYW5kIGFiYnJldmlhdGlvbiBoYW5kbGVyXG5cdC8qKlxuXHQgKiBAcGFyYW0ge0lFbW1ldEVkaXRvcn0gZWRpdG9yXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzeW50YXhcblx0ICogQHBhcmFtIHtTdHJpbmd9IHByb2ZpbGVcblx0ICovXG5cdHJlcXVpcmUoJ2V4cGFuZEFiYnJldmlhdGlvbicpLmFkZEhhbmRsZXIoZnVuY3Rpb24oZWRpdG9yLCBzeW50YXgsIHByb2ZpbGUpIHtcblx0XHR2YXIgaW5mbyA9IHJlcXVpcmUoJ2VkaXRvclV0aWxzJykub3V0cHV0SW5mbyhlZGl0b3IsIHN5bnRheCwgcHJvZmlsZSk7XG5cdFx0aWYgKCFfLmluY2x1ZGUoY3NzU3ludGF4ZXMsIGluZm8uc3ludGF4KSlcblx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdC8vIGxldCdzIHNlZSBpZiB3ZSBhcmUgZXhwYW5kaW5nIGdyYWRpZW50IGRlZmluaXRpb25cblx0XHR2YXIgY2FyZXQgPSBlZGl0b3IuZ2V0Q2FyZXRQb3MoKTtcblx0XHR2YXIgY29udGVudCA9IGluZm8uY29udGVudDtcblx0XHR2YXIgY3NzID0gZmluZEdyYWRpZW50RnJvbVBvc2l0aW9uKGNvbnRlbnQsIGNhcmV0KTtcblxuXHRcdGlmIChjc3MucHJvcGVydHkpIHtcblx0XHRcdC8vIG1ha2Ugc3VyZSB0aGF0IGNhcmV0IGlzIGluc2lkZSBwcm9wZXJ0eSB2YWx1ZSB3aXRoIGdyYWRpZW50XG5cdFx0XHQvLyBkZWZpbml0aW9uXG5cdFx0XHR2YXIgZyA9IGZpbmRHcmFkaWVudChjc3MucHJvcGVydHkpO1xuXHRcdFx0aWYgKGcpIHtcblx0XHRcdFx0dmFyIHJ1bGVTdGFydCA9IGNzcy5ydWxlLm9wdGlvbnMub2Zmc2V0IHx8IDA7XG5cdFx0XHRcdHZhciBydWxlRW5kID0gcnVsZVN0YXJ0ICsgY3NzLnJ1bGUudG9TdHJpbmcoKS5sZW5ndGg7XG5cblx0XHRcdFx0Ly8gSGFuZGxlIHNwZWNpYWwgY2FzZTpcblx0XHRcdFx0Ly8gdXNlciB3cm90ZSBncmFkaWVudCBkZWZpbml0aW9uIGJldHdlZW4gZXhpc3RpbmcgQ1NTXG5cdFx0XHRcdC8vIHByb3BlcnRpZXMgYW5kIGRpZCBub3QgZmluaXNoZWQgaXQgd2l0aCBzZW1pY29sb24uXG5cdFx0XHRcdC8vIEluIHRoaXMgY2FzZSwgd2UgaGF2ZSBzZW1pY29sb24gcmlnaHQgYWZ0ZXIgZ3JhZGllbnRcblx0XHRcdFx0Ly8gZGVmaW5pdGlvbiBhbmQgcmUtcGFyc2UgcnVsZSBhZ2FpblxuXHRcdFx0XHRpZiAoL1tcXG5cXHJdLy50ZXN0KGNzcy5wcm9wZXJ0eS52YWx1ZSgpKSkge1xuXHRcdFx0XHRcdC8vIGluc2VydCBzZW1pY29sb24gYXQgdGhlIGVuZCBvZiBncmFkaWVudCBkZWZpbml0aW9uXG5cdFx0XHRcdFx0dmFyIGluc2VydFBvcyA9IGNzcy5wcm9wZXJ0eS52YWx1ZVJhbmdlKHRydWUpLnN0YXJ0ICsgZy52YWx1ZVJhbmdlLmVuZDtcblx0XHRcdFx0XHRjb250ZW50ID0gcmVxdWlyZSgndXRpbHMnKS5yZXBsYWNlU3Vic3RyaW5nKGNvbnRlbnQsICc7JywgaW5zZXJ0UG9zKTtcblx0XHRcdFx0XHR2YXIgbmV3Q3NzID0gZmluZEdyYWRpZW50RnJvbVBvc2l0aW9uKGNvbnRlbnQsIGNhcmV0KTtcblx0XHRcdFx0XHRpZiAobmV3Q3NzLnByb3BlcnR5KSB7XG5cdFx0XHRcdFx0XHRnID0gZmluZEdyYWRpZW50KG5ld0Nzcy5wcm9wZXJ0eSk7XG5cdFx0XHRcdFx0XHRjc3MgPSBuZXdDc3M7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gbWFrZSBzdXJlIGN1cnJlbnQgcHJvcGVydHkgaGFzIHRlcm1pbmF0aW5nIHNlbWljb2xvblxuXHRcdFx0XHRjc3MucHJvcGVydHkuZW5kKCc7Jyk7XG5cblx0XHRcdFx0Ly8gcmVzb2x2ZSBDU1MgcHJvcGVydHkgbmFtZVxuXHRcdFx0XHR2YXIgcmVzb2x2ZWROYW1lID0gcmVzb2x2ZVByb3BlcnR5TmFtZShjc3MucHJvcGVydHkubmFtZSgpLCBzeW50YXgpO1xuXHRcdFx0XHRpZiAocmVzb2x2ZWROYW1lKSB7XG5cdFx0XHRcdFx0Y3NzLnByb3BlcnR5Lm5hbWUocmVzb2x2ZWROYW1lKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHBhc3RlR3JhZGllbnQoY3NzLnByb3BlcnR5LCBnLmdyYWRpZW50LCBnLnZhbHVlUmFuZ2UpO1xuXHRcdFx0XHRlZGl0b3IucmVwbGFjZUNvbnRlbnQoY3NzLnJ1bGUudG9TdHJpbmcoKSwgcnVsZVN0YXJ0LCBydWxlRW5kLCB0cnVlKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV4cGFuZEdyYWRpZW50T3V0c2lkZVZhbHVlKGVkaXRvciwgc3ludGF4KTtcblx0fSk7XG5cblx0Ly8gWFhYIHJlZ2lzdGVyIFwiUmVmbGVjdCBDU1MgVmFsdWVcIiBhY3Rpb24gZGVsZWdhdGVcblx0LyoqXG5cdCAqIEBwYXJhbSB7RWRpdEVsZW1lbnR9IHByb3BlcnR5XG5cdCAqL1xuXHRyZXF1aXJlKCdyZWZsZWN0Q1NTVmFsdWUnKS5hZGRIYW5kbGVyKGZ1bmN0aW9uKHByb3BlcnR5KSB7XG5cdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblxuXHRcdHZhciBnID0gZmluZEdyYWRpZW50KHByb3BlcnR5KTtcblx0XHRpZiAoIWcpXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cblx0XHR2YXIgdmFsdWUgPSBwcm9wZXJ0eS52YWx1ZSgpO1xuXHRcdHZhciB2YWwgPSBmdW5jdGlvbih2KSB7XG5cdFx0XHRyZXR1cm4gdXRpbHMucmVwbGFjZVN1YnN0cmluZyh2YWx1ZSwgdiwgZy52YWx1ZVJhbmdlKTtcblx0XHR9O1xuXG5cdFx0Ly8gcmVmbGVjdCB2YWx1ZSBmb3IgcHJvcGVydGllcyB3aXRoIHRoZSBzYW1lIG5hbWVcblx0XHRfLmVhY2gocHJvcGVydHkucGFyZW50LmdldEFsbChnZXRQcmVmaXhlZE5hbWVzKHByb3BlcnR5Lm5hbWUoKSkpLCBmdW5jdGlvbihwcm9wKSB7XG5cdFx0XHRpZiAocHJvcCA9PT0gcHJvcGVydHkpXG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0Ly8gY2hlY2sgaWYgcHJvcGVydHkgdmFsdWUgc3RhcnRzIHdpdGggZ3JhZGllbnQgZGVmaW5pdGlvblxuXHRcdFx0dmFyIG0gPSBwcm9wLnZhbHVlKCkubWF0Y2goL15cXHMqKFxcLShbYS16XSspXFwtKT9saW5lYXJcXC1ncmFkaWVudC8pO1xuXHRcdFx0aWYgKG0pIHtcblx0XHRcdFx0cHJvcC52YWx1ZSh2YWwobW9kdWxlLnRvU3RyaW5nKGcuZ3JhZGllbnQsIG1bMl0gfHwgJycpKSk7XG5cdFx0XHR9IGVsc2UgaWYgKG0gPSBwcm9wLnZhbHVlKCkubWF0Y2goL1xccypcXC13ZWJraXRcXC1ncmFkaWVudC8pKSB7XG5cdFx0XHRcdC8vIG9sZCB3ZWJraXQgZ3JhZGllbnQgZGVmaW5pdGlvblxuXHRcdFx0XHRwcm9wLnZhbHVlKHZhbChtb2R1bGUub2xkV2Via2l0TGluZWFyR3JhZGllbnQoZy5ncmFkaWVudCkpKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiB0cnVlO1xuXHR9KTtcblxuXHRyZXR1cm4gbW9kdWxlID0ge1xuXHRcdC8qKlxuXHRcdCAqIFBhcnNlcyBncmFkaWVudCBkZWZpbml0aW9uXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGdyYWRpZW50XG5cdFx0ICogQHJldHVybnMge09iamVjdH1cblx0XHQgKi9cblx0XHRwYXJzZTogZnVuY3Rpb24oZ3JhZGllbnQpIHtcblx0XHRcdHZhciByZXN1bHQgPSBudWxsO1xuXHRcdFx0cmVxdWlyZSgndXRpbHMnKS50cmltKGdyYWRpZW50KS5yZXBsYWNlKC9eKFtcXHdcXC1dKylcXCgoLis/KVxcKSQvLCBmdW5jdGlvbihzdHIsIHR5cGUsIGRlZmluaXRpb24pIHtcblx0XHRcdFx0Ly8gcmVtb3ZlIHZlbmRvciBwcmVmaXhcblx0XHRcdFx0dHlwZSA9IHR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eXFwtW2Etel0rXFwtLywgJycpO1xuXHRcdFx0XHRpZiAodHlwZSA9PSAnbGluZWFyLWdyYWRpZW50JyB8fCB0eXBlID09ICdsZycpIHtcblx0XHRcdFx0XHRyZXN1bHQgPSBwYXJzZUxpbmVhckdyYWRpZW50KGRlZmluaXRpb24pO1xuXHRcdFx0XHRcdHJldHVybiAnJztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBzdHI7XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUHJvZHVjZXMgbGluZWFyIGdyYWRpZW50IGRlZmluaXRpb24gdXNlZCBpbiBlYXJseSBXZWJraXRcblx0XHQgKiBpbXBsZW1lbnRhdGlvbnNcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gZ3JhZGllbnQgUGFyc2VkIGdyYWRpZW50XG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHRvbGRXZWJraXRMaW5lYXJHcmFkaWVudDogZnVuY3Rpb24oZ3JhZGllbnQpIHtcblx0XHRcdGlmIChfLmlzU3RyaW5nKGdyYWRpZW50KSlcblx0XHRcdFx0Z3JhZGllbnQgPSB0aGlzLnBhcnNlKGdyYWRpZW50KTtcblxuXHRcdFx0aWYgKCFncmFkaWVudClcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRcdHZhciBjb2xvclN0b3BzID0gXy5tYXAoZ3JhZGllbnQuY29sb3JTdG9wcywgXy5jbG9uZSk7XG5cblx0XHRcdC8vIG5vcm1hbGl6ZSBjb2xvci1zdG9wcyBwb3NpdGlvblxuXHRcdFx0Xy5lYWNoKGNvbG9yU3RvcHMsIGZ1bmN0aW9uKGNzKSB7XG5cdFx0XHRcdGlmICghKCdwb3NpdGlvbicgaW4gY3MpKSAvLyBpbXBsaWVkIHBvc2l0aW9uXG5cdFx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRcdGlmICh+Y3MucG9zaXRpb24uaW5kZXhPZignLicpIHx8IGNzLnVuaXQgPT0gJyUnKSB7XG5cdFx0XHRcdFx0Y3MucG9zaXRpb24gPSBwYXJzZUZsb2F0KGNzLnBvc2l0aW9uKSAvIChjcy51bml0ID09ICclJyA/IDEwMCA6IDEpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRocm93IFwiQ2FuJ3QgY29udmVydCBjb2xvciBzdG9wICdcIiArIChjcy5wb3NpdGlvbiArIChjcy51bml0IHx8ICcnKSkgKyBcIidcIjtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGZpbGxJbXBsaWVkUG9zaXRpb25zKGNvbG9yU3RvcHMpO1xuXG5cdFx0XHQvLyB0cmFuc2Zvcm0gY29sb3Itc3RvcHMgaW50byBzdHJpbmcgcmVwcmVzZW50YXRpb25cblx0XHRcdGNvbG9yU3RvcHMgPSBfLm1hcChjb2xvclN0b3BzLCBmdW5jdGlvbihjcywgaSkge1xuXHRcdFx0XHRpZiAoIWNzLnBvc2l0aW9uICYmICFpKVxuXHRcdFx0XHRcdHJldHVybiAnZnJvbSgnICsgY3MuY29sb3IgKyAnKSc7XG5cblx0XHRcdFx0aWYgKGNzLnBvc2l0aW9uID09IDEgJiYgaSA9PSBjb2xvclN0b3BzLmxlbmd0aCAtIDEpXG5cdFx0XHRcdFx0cmV0dXJuICd0bygnICsgY3MuY29sb3IgKyAnKSc7XG5cblx0XHRcdFx0cmV0dXJuICdjb2xvci1zdG9wKCcgKyAoY3MucG9zaXRpb24udG9GaXhlZCgyKS5yZXBsYWNlKC9cXC4/MCskLywgJycpKSArICcsICcgKyBjcy5jb2xvciArICcpJztcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gJy13ZWJraXQtZ3JhZGllbnQobGluZWFyLCAnXG5cdFx0XHRcdCsgb2xkV2Via2l0RGlyZWN0aW9uKGdyYWRpZW50LmRpcmVjdGlvbilcblx0XHRcdFx0KyAnLCAnXG5cdFx0XHRcdCsgY29sb3JTdG9wcy5qb2luKCcsICcpXG5cdFx0XHRcdCsgJyknO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBwYXJzZWQgZ3JhZGllbnRcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gZ3JhZGllbnQgUGFyc2VkIGdyYWRpZW50XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHByZWZpeCBWZW5kb3IgcHJlZml4XG5cdFx0ICogQHJldHVybnMge1N0cmluZ31cblx0XHQgKi9cblx0XHR0b1N0cmluZzogZnVuY3Rpb24oZ3JhZGllbnQsIHByZWZpeCkge1xuXHRcdFx0aWYgKGdyYWRpZW50LnR5cGUgPT0gJ2xpbmVhcicpIHtcblx0XHRcdFx0dmFyIGZuID0gKHByZWZpeCA/ICctJyArIHByZWZpeCArICctJyA6ICcnKSArICdsaW5lYXItZ3JhZGllbnQnO1xuXG5cdFx0XHRcdC8vIHRyYW5zZm9ybSBjb2xvci1zdG9wc1xuXHRcdFx0XHR2YXIgY29sb3JTdG9wcyA9IF8ubWFwKGdyYWRpZW50LmNvbG9yU3RvcHMsIGZ1bmN0aW9uKGNzKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNzLmNvbG9yICsgKCdwb3NpdGlvbicgaW4gY3Ncblx0XHRcdFx0XHRcdFx0PyAnICcgKyBjcy5wb3NpdGlvbiArIChjcy51bml0IHx8ICcnKVxuXHRcdFx0XHRcdFx0XHQ6ICcnKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKGdyYWRpZW50LmRpcmVjdGlvblxuXHRcdFx0XHRcdFx0JiYgKCFwcmVmcy5nZXQoJ2Nzcy5ncmFkaWVudC5vbWl0RGVmYXVsdERpcmVjdGlvbicpXG5cdFx0XHRcdFx0XHR8fCAhXy5pbmNsdWRlKGRlZmF1bHRMaW5lYXJEaXJlY3Rpb25zLCBncmFkaWVudC5kaXJlY3Rpb24pKSkge1xuXHRcdFx0XHRcdGNvbG9yU3RvcHMudW5zaGlmdChncmFkaWVudC5kaXJlY3Rpb24pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGZuICsgJygnICsgY29sb3JTdG9wcy5qb2luKCcsICcpICsgJyknO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn0pOy8qKlxuICogTW9kdWxlIGFkZHMgc3VwcG9ydCBmb3IgZ2VuZXJhdG9yczogYSByZWdleHAtYmFzZWQgYWJicmV2aWF0aW9uIHJlc29sdmVyXG4gKiB0aGF0IGNhbiBwcm9kdWNlIGN1c3RvbSBvdXRwdXQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZXhlYyhmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdC8qKiBAdHlwZSBIYW5kbGVyTGlzdCAqL1xuXHR2YXIgZ2VuZXJhdG9ycyA9IHJlcXVpcmUoJ2hhbmRsZXJMaXN0JykuY3JlYXRlKCk7XG5cdHZhciByZXNvdXJjZXMgPSByZXF1aXJlKCdyZXNvdXJjZXMnKTtcblxuXHRfLmV4dGVuZChyZXNvdXJjZXMsIHtcblx0XHQvKipcblx0XHQgKiBBZGQgZ2VuZXJhdG9yLiBBIGdlbmVyYXRvciBmdW5jdGlvbiA8Y29kZT5mbjwvY29kZT4gd2lsbCBiZSBjYWxsZWRcblx0XHQgKiBvbmx5IGlmIGN1cnJlbnQgYWJicmV2aWF0aW9uIG1hdGNoZXMgPGNvZGU+cmVnZXhwPC9jb2RlPiByZWd1bGFyXG5cdFx0ICogZXhwcmVzc2lvbiBhbmQgdGhpcyBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIDxjb2RlPm51bGw8L2NvZGU+IGlmXG5cdFx0ICogYWJicmV2aWF0aW9uIGNhbm5vdCBiZSByZXNvbHZlZFxuXHRcdCAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHAgUmVndWxhciBleHByZXNzaW9uIGZvciBhYmJyZXZpYXRpb24gZWxlbWVudCBuYW1lXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gUmVzb2x2ZXIgZnVuY3Rpb25cblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIGxpc3QgYXMgZGVzY3JpYmVkIGluXG5cdFx0ICoge0BsaW5rIEhhbmRsZXJMaXN0I2FkZCgpfSBtZXRob2Rcblx0XHQgKi9cblx0XHRhZGRHZW5lcmF0b3I6IGZ1bmN0aW9uKHJlZ2V4cCwgZm4sIG9wdGlvbnMpIHtcblx0XHRcdGlmIChfLmlzU3RyaW5nKHJlZ2V4cCkpXG5cdFx0XHRcdHJlZ2V4cCA9IG5ldyBSZWdFeHAocmVnZXhwKTtcblxuXHRcdFx0Z2VuZXJhdG9ycy5hZGQoZnVuY3Rpb24obm9kZSwgc3ludGF4KSB7XG5cdFx0XHRcdHZhciBtO1xuXHRcdFx0XHRpZiAoKG0gPSByZWdleHAuZXhlYyhub2RlLm5hbWUoKSkpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZuKG0sIG5vZGUsIHN5bnRheCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH0sIG9wdGlvbnMpO1xuXHRcdH1cblx0fSk7XG5cblx0cmVzb3VyY2VzLmFkZFJlc29sdmVyKGZ1bmN0aW9uKG5vZGUsIHN5bnRheCkge1xuXHRcdHJldHVybiBnZW5lcmF0b3JzLmV4ZWMobnVsbCwgXy50b0FycmF5KGFyZ3VtZW50cykpO1xuXHR9KTtcbn0pOy8qKlxuICogTW9kdWxlIGZvciByZXNvbHZpbmcgdGFnIG5hbWVzOiByZXR1cm5zIGJlc3QgbWF0Y2hlZCB0YWcgbmFtZSBmb3IgY2hpbGRcbiAqIGVsZW1lbnQgYmFzZWQgb24gcGFzc2VkIHBhcmVudCdzIHRhZyBuYW1lLiBBbHNvIHByb3ZpZGVzIHV0aWxpdHkgZnVuY3Rpb25cbiAqIGZvciBlbGVtZW50IHR5cGUgZGV0ZWN0aW9uIChpbmxpbmUsIGJsb2NrLWxldmVsLCBlbXB0eSlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlcXVpcmVcbiAqIEBwYXJhbSB7VW5kZXJzY29yZX0gX1xuICovXG5lbW1ldC5kZWZpbmUoJ3RhZ05hbWUnLCBmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHZhciBlbGVtZW50VHlwZXMgPSB7XG4vL1x0XHRlbXB0eTogJ2FyZWEsYmFzZSxiYXNlZm9udCxicixjb2wsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsbGluayxtZXRhLHBhcmFtLGVtYmVkLGtleWdlbixjb21tYW5kJy5zcGxpdCgnLCcpLFxuXHRcdGVtcHR5OiBbXSxcblx0XHRibG9ja0xldmVsOiAnYWRkcmVzcyxhcHBsZXQsYmxvY2txdW90ZSxidXR0b24sY2VudGVyLGRkLGRlbCxkaXIsZGl2LGRsLGR0LGZpZWxkc2V0LGZvcm0sZnJhbWVzZXQsaHIsaWZyYW1lLGlucyxpc2luZGV4LGxpLGxpbmssbWFwLG1lbnUsbm9mcmFtZXMsbm9zY3JpcHQsb2JqZWN0LG9sLHAscHJlLHNjcmlwdCx0YWJsZSx0Ym9keSx0ZCx0Zm9vdCx0aCx0aGVhZCx0cix1bCxoMSxoMixoMyxoNCxoNSxoNicuc3BsaXQoJywnKSxcblx0XHRpbmxpbmVMZXZlbDogJ2EsYWJicixhY3JvbnltLGFwcGxldCxiLGJhc2Vmb250LGJkbyxiaWcsYnIsYnV0dG9uLGNpdGUsY29kZSxkZWwsZGZuLGVtLGZvbnQsaSxpZnJhbWUsaW1nLGlucHV0LGlucyxrYmQsbGFiZWwsbWFwLG9iamVjdCxxLHMsc2FtcCxzZWxlY3Qsc21hbGwsc3BhbixzdHJpa2Usc3Ryb25nLHN1YixzdXAsdGV4dGFyZWEsdHQsdSx2YXInLnNwbGl0KCcsJylcblx0fTtcblxuXHR2YXIgZWxlbWVudE1hcCA9IHtcblx0XHQncCc6ICdzcGFuJyxcblx0XHQndWwnOiAnbGknLFxuXHRcdCdvbCc6ICdsaScsXG5cdFx0J3RhYmxlJzogJ3RyJyxcblx0XHQndHInOiAndGQnLFxuXHRcdCd0Ym9keSc6ICd0cicsXG5cdFx0J3RoZWFkJzogJ3RyJyxcblx0XHQndGZvb3QnOiAndHInLFxuXHRcdCdjb2xncm91cCc6ICdjb2wnLFxuXHRcdCdzZWxlY3QnOiAnb3B0aW9uJyxcblx0XHQnb3B0Z3JvdXAnOiAnb3B0aW9uJyxcblx0XHQnYXVkaW8nOiAnc291cmNlJyxcblx0XHQndmlkZW8nOiAnc291cmNlJyxcblx0XHQnb2JqZWN0JzogJ3BhcmFtJyxcblx0XHQnbWFwJzogJ2FyZWEnXG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGJlc3QgbWF0Y2hlZCBjaGlsZCBlbGVtZW50IG5hbWUgZm9yIHBhc3NlZCBwYXJlbnQnc1xuXHRcdCAqIHRhZyBuYW1lXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0XHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHRcdCAqIEBtZW1iZXJPZiB0YWdOYW1lXG5cdFx0ICovXG5cdFx0cmVzb2x2ZTogZnVuY3Rpb24obmFtZSkge1xuXHRcdFx0bmFtZSA9IChuYW1lIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0XHRpZiAobmFtZSBpbiBlbGVtZW50TWFwKVxuXHRcdFx0XHRyZXR1cm4gdGhpcy5nZXRNYXBwaW5nKG5hbWUpO1xuXG5cdFx0XHRpZiAodGhpcy5pc0lubGluZUxldmVsKG5hbWUpKVxuXHRcdFx0XHRyZXR1cm4gJ3NwYW4nO1xuXG5cdFx0XHRyZXR1cm4gJ2Rpdic7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgbWFwcGVkIGNoaWxkIGVsZW1lbnQgbmFtZSBmb3IgcGFzc2VkIHBhcmVudCdzIG5hbWVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdFx0ICovXG5cdFx0Z2V0TWFwcGluZzogZnVuY3Rpb24obmFtZSkge1xuXHRcdFx0cmV0dXJuIGVsZW1lbnRNYXBbbmFtZS50b0xvd2VyQ2FzZSgpXTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2sgaWYgcGFzc2VkIGVsZW1lbnQgbmFtZSBiZWxvbmdzIHRvIGlubGluZS1sZXZlbCBlbGVtZW50XG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0XHQgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRpc0lubGluZUxldmVsOiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5pc1R5cGVPZihuYW1lLCAnaW5saW5lTGV2ZWwnKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2sgaWYgcGFzc2VkIGVsZW1lbnQgYmVsb25ncyB0byBibG9jay1sZXZlbCBlbGVtZW50LlxuXHRcdCAqIEZvciBiZXR0ZXIgbWF0Y2hpbmcgb2YgdW5rbm93biBlbGVtZW50cyAoZm9yIFhNTCwgZm9yIGV4YW1wbGUpLFxuXHRcdCAqIHlvdSBzaG91bGQgdXNlIDxjb2RlPiF0aGlzLmlzSW5saW5lTGV2ZWwobmFtZSk8L2NvZGU+XG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aXNCbG9ja0xldmVsOiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5pc1R5cGVPZihuYW1lLCAnYmxvY2tMZXZlbCcpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDaGVjayBpZiBwYXNzZWQgZWxlbWVudCBpcyB2b2lkIChpLmUuIHNob3VsZCBub3QgaGF2ZSBjbG9zaW5nIHRhZykuXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0aXNFbXB0eUVsZW1lbnQ6IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdHJldHVybiB0aGlzLmlzVHlwZU9mKG5hbWUsICdlbXB0eScpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBHZW5lcmljIGZ1bmN0aW9uIGZvciB0ZXN0aW5nIGlmIGVsZW1lbnQgbmFtZSBiZWxvbmdzIHRvIHNwZWNpZmllZFxuXHRcdCAqIGVsZW1lbnRzIGNvbGxlY3Rpb25cblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBFbGVtZW50IG5hbWVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBDb2xsZWN0aW9uIG5hbWVcblx0XHQgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHRpc1R5cGVPZjogZnVuY3Rpb24obmFtZSwgdHlwZSkge1xuXHRcdFx0cmV0dXJuIF8uaW5jbHVkZShlbGVtZW50VHlwZXNbdHlwZV0sIG5hbWUpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBBZGRzIG5ldyBwYXJlbnTigJNjaGlsZCBtYXBwaW5nXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IHBhcmVudFxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBjaGlsZFxuXHRcdCAqL1xuXHRcdGFkZE1hcHBpbmc6IGZ1bmN0aW9uKHBhcmVudCwgY2hpbGQpIHtcblx0XHRcdGVsZW1lbnRNYXBbcGFyZW50XSA9IGNoaWxkO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZW1vdmVzIHBhcmVudC1jaGlsZCBtYXBwaW5nXG5cdFx0ICovXG5cdFx0cmVtb3ZlTWFwcGluZzogZnVuY3Rpb24ocGFyZW50KSB7XG5cdFx0XHRpZiAocGFyZW50IGluIGVsZW1lbnRNYXApXG5cdFx0XHRcdGRlbGV0ZSBlbGVtZW50TWFwW3BhcmVudF07XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEFkZHMgbmV3IGVsZW1lbnQgaW50byBjb2xsZWN0aW9uXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgRWxlbWVudCBuYW1lXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd9IGNvbGxlY3Rpb24gQ29sbGVjdGlvbiBuYW1lXG5cdFx0ICovXG5cdFx0YWRkRWxlbWVudFRvQ29sbGVjdGlvbjogZnVuY3Rpb24obmFtZSwgY29sbGVjdGlvbikge1xuXHRcdFx0aWYgKCFlbGVtZW50VHlwZXNbY29sbGVjdGlvbl0pXG5cdFx0XHRcdGVsZW1lbnRUeXBlc1tjb2xsZWN0aW9uXSA9IFtdO1xuXG5cdFx0XHR2YXIgY29sID0gdGhpcy5nZXRDb2xsZWN0aW9uKGNvbGxlY3Rpb24pO1xuXHRcdFx0aWYgKCFfLmluY2x1ZGUoY29sLCBuYW1lKSlcblx0XHRcdFx0Y29sLnB1c2gobmFtZSk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlbW92ZXMgZWxlbWVudCBuYW1lIGZyb20gc3BlY2lmaWVkIGNvbGxlY3Rpb25cblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBFbGVtZW50IG5hbWVcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gY29sbGVjdGlvbiBDb2xsZWN0aW9uIG5hbWVcblx0XHQgKiBAcmV0dXJuc1xuXHRcdCAqL1xuXHRcdHJlbW92ZUVsZW1lbnRGcm9tQ29sbGVjdGlvbjogZnVuY3Rpb24obmFtZSwgY29sbGVjdGlvbikge1xuXHRcdFx0aWYgKGNvbGxlY3Rpb24gaW4gZWxlbWVudFR5cGVzKSB7XG5cdFx0XHRcdGVsZW1lbnRUeXBlc1tjb2xsZWN0aW9uXSA9IF8ud2l0aG91dCh0aGlzLmdldENvbGxlY3Rpb24oY29sbGVjdGlvbiksIG5hbWUpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGVsZW1lbnRzIG5hbWUgY29sbGVjdGlvblxuXHRcdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIENvbGxlY3Rpb24gbmFtZVxuXHRcdCAqIEByZXR1cm5zIHtBcnJheX1cblx0XHQgKi9cblx0XHRnZXRDb2xsZWN0aW9uOiBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRyZXR1cm4gZWxlbWVudFR5cGVzW25hbWVdO1xuXHRcdH1cblx0fTtcbn0pOy8qKlxuICogRmlsdGVyIGZvciBhaWRpbmcgb2Ygd3JpdGluZyBlbGVtZW50cyB3aXRoIGNvbXBsZXggY2xhc3MgbmFtZXMgYXMgZGVzY3JpYmVkXG4gKiBpbiBZYW5kZXgncyBCRU0gKEJsb2NrLCBFbGVtZW50LCBNb2RpZmllcikgbWV0aG9kb2xvZ3kuIFRoaXMgZmlsdGVyIHdpbGxcbiAqIGF1dG9tYXRpY2FsbHkgaW5oZXJpdCBibG9jayBhbmQgZWxlbWVudCBuYW1lcyBmcm9tIHBhcmVudCBlbGVtZW50cyBhbmQgaW5zZXJ0XG4gKiB0aGVtIGludG8gY2hpbGQgZWxlbWVudCBjbGFzc2VzXG4gKiBAbWVtYmVyT2YgX19iZW1GaWx0ZXJEZWZpbmVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmV4ZWMoZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHR2YXIgcHJlZnMgPSByZXF1aXJlKCdwcmVmZXJlbmNlcycpO1xuXHRwcmVmcy5kZWZpbmUoJ2JlbS5lbGVtZW50U2VwYXJhdG9yJywgJ19fJywgJ0NsYXNzIG5hbWXigJlzIGVsZW1lbnQgc2VwYXJhdG9yLicpO1xuXHRwcmVmcy5kZWZpbmUoJ2JlbS5tb2RpZmllclNlcGFyYXRvcicsICdfJywgJ0NsYXNzIG5hbWXigJlzIG1vZGlmaWVyIHNlcGFyYXRvci4nKTtcblx0cHJlZnMuZGVmaW5lKCdiZW0uc2hvcnRFbGVtZW50UHJlZml4JywgJy0nLFxuXHRcdFx0J1N5bWJvbCBmb3IgZGVzY3JpYmluZyBzaG9ydCDigJxibG9jay1lbGVtZW504oCdIG5vdGF0aW9uLiBDbGFzcyBuYW1lcyAnXG5cdFx0XHQrICdwcmVmaXhlZCB3aXRoIHRoaXMgc3ltYm9sIHdpbGwgYmUgdHJlYXRlZCBhcyBlbGVtZW50IG5hbWUgZm9yIHBhcmVudOKAmHMgJ1xuXHRcdFx0KyAnYmxvY2sgbmFtZS4gRWFjaCBzeW1ib2wgaW5zdGFuY2UgdHJhdmVyc2VzIG9uZSBsZXZlbCB1cCBpbiBwYXJzZWQgJ1xuXHRcdFx0KyAndHJlZSBmb3IgYmxvY2sgbmFtZSBsb29rdXAuIEVtcHR5IHZhbHVlIHdpbGwgZGlzYWJsZSBzaG9ydCBub3RhdGlvbi4nKTtcblxuXHR2YXIgc2hvdWxkUnVuSHRtbEZpbHRlciA9IGZhbHNlO1xuXG5cdGZ1bmN0aW9uIGdldFNlcGFyYXRvcnMoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGVsZW1lbnQ6IHByZWZzLmdldCgnYmVtLmVsZW1lbnRTZXBhcmF0b3InKSxcblx0XHRcdG1vZGlmaWVyOiBwcmVmcy5nZXQoJ2JlbS5tb2RpZmllclNlcGFyYXRvcicpXG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IGl0ZW1cblx0ICovXG5cdGZ1bmN0aW9uIGJlbVBhcnNlKGl0ZW0pIHtcblx0XHRpZiAocmVxdWlyZSgnYWJicmV2aWF0aW9uVXRpbHMnKS5pc1NuaXBwZXQoaXRlbSkpXG5cdFx0XHRyZXR1cm4gaXRlbTtcblxuXHRcdC8vIHNhdmUgQkVNIHN0dWZmIGluIGNhY2hlIGZvciBmYXN0ZXIgbG9va3Vwc1xuXHRcdGl0ZW0uX19iZW0gPSB7XG5cdFx0XHRibG9jazogJycsXG5cdFx0XHRlbGVtZW50OiAnJyxcblx0XHRcdG1vZGlmaWVyOiAnJ1xuXHRcdH07XG5cblx0XHR2YXIgY2xhc3NOYW1lcyA9IG5vcm1hbGl6ZUNsYXNzTmFtZShpdGVtLmF0dHJpYnV0ZSgnY2xhc3MnKSkuc3BsaXQoJyAnKTtcblxuXHRcdC8vIGd1ZXNzIGJlc3QgbWF0Y2ggZm9yIGJsb2NrIG5hbWVcblx0XHR2YXIgcmVCbG9ja05hbWUgPSAvXlthLXpdXFwtL2k7XG5cdFx0aXRlbS5fX2JlbS5ibG9jayA9IF8uZmluZChjbGFzc05hbWVzLCBmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHRyZXR1cm4gcmVCbG9ja05hbWUudGVzdChuYW1lKTtcblx0XHR9KTtcblxuXHRcdC8vIGd1ZXNzaW5nIGRvZXNuJ3Qgd29ya2VkLCBwaWNrIGZpcnN0IGNsYXNzIG5hbWUgYXMgYmxvY2sgbmFtZVxuXHRcdGlmICghaXRlbS5fX2JlbS5ibG9jaykge1xuXHRcdFx0cmVCbG9ja05hbWUgPSAvXlthLXpdL2k7XG5cdFx0XHRpdGVtLl9fYmVtLmJsb2NrID0gXy5maW5kKGNsYXNzTmFtZXMsIGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdFx0cmV0dXJuIHJlQmxvY2tOYW1lLnRlc3QobmFtZSk7XG5cdFx0XHR9KSB8fCAnJztcblx0XHR9XG5cblx0XHRjbGFzc05hbWVzID0gXy5jaGFpbihjbGFzc05hbWVzKVxuXHRcdFx0Lm1hcChmdW5jdGlvbihuYW1lKSB7cmV0dXJuIHByb2Nlc3NDbGFzc05hbWUobmFtZSwgaXRlbSk7fSlcblx0XHRcdC5mbGF0dGVuKClcblx0XHRcdC51bmlxKClcblx0XHRcdC52YWx1ZSgpXG5cdFx0XHQuam9pbignICcpO1xuXG5cdFx0aWYgKGNsYXNzTmFtZXMpXG5cdFx0XHRpdGVtLmF0dHJpYnV0ZSgnY2xhc3MnLCBjbGFzc05hbWVzKTtcblxuXHRcdHJldHVybiBpdGVtO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWVcblx0ICogQHJldHVybnMge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzTmFtZShjbGFzc05hbWUpIHtcblx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXHRcdGNsYXNzTmFtZSA9ICgnICcgKyAoY2xhc3NOYW1lIHx8ICcnKSArICcgJykucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuXG5cdFx0dmFyIHNob3J0U3ltYm9sID0gcHJlZnMuZ2V0KCdiZW0uc2hvcnRFbGVtZW50UHJlZml4Jyk7XG5cdFx0aWYgKHNob3J0U3ltYm9sKSB7XG5cdFx0XHR2YXIgcmUgPSBuZXcgUmVnRXhwKCdcXFxccygnICsgdXRpbHMuZXNjYXBlRm9yUmVnZXhwKHNob3J0U3ltYm9sKSArICcrKScsICdnJyk7XG5cdFx0XHRjbGFzc05hbWUgPSBjbGFzc05hbWUucmVwbGFjZShyZSwgZnVuY3Rpb24oc3RyLCBwMSkge1xuXHRcdFx0XHRyZXR1cm4gJyAnICsgdXRpbHMucmVwZWF0U3RyaW5nKGdldFNlcGFyYXRvcnMoKS5lbGVtZW50LCBwMS5sZW5ndGgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHV0aWxzLnRyaW0oY2xhc3NOYW1lKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQcm9jZXNzZXMgY2xhc3MgbmFtZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBDbGFzcyBuYW1lIGl0ZW0gdG8gcHJvY2Vzc1xuXHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IGl0ZW0gSG9zdCBub2RlIGZvciBwcm92aWRlZCBjbGFzcyBuYW1lXG5cdCAqIEByZXR1cm5zIFByb2Nlc3NlZCBjbGFzcyBuYW1lLiBNYXkgcmV0dXJuIDxjb2RlPkFycmF5PC9jb2RlPiBvZlxuXHQgKiBjbGFzcyBuYW1lc1xuXHQgKi9cblx0ZnVuY3Rpb24gcHJvY2Vzc0NsYXNzTmFtZShuYW1lLCBpdGVtKSB7XG5cdFx0bmFtZSA9IHRyYW5zZm9ybUNsYXNzTmFtZShuYW1lLCBpdGVtLCAnZWxlbWVudCcpO1xuXHRcdG5hbWUgPSB0cmFuc2Zvcm1DbGFzc05hbWUobmFtZSwgaXRlbSwgJ21vZGlmaWVyJyk7XG5cblx0XHQvLyBleHBhbmQgY2xhc3MgbmFtZVxuXHRcdC8vIHBvc3NpYmxlIHZhbHVlczpcblx0XHQvLyAqIGJsb2NrX19lbGVtZW50XG5cdFx0Ly8gKiBibG9ja19fZWxlbWVudF9tb2RpZmllclxuXHRcdC8vICogYmxvY2tfX2VsZW1lbnRfbW9kaWZpZXIxX21vZGlmaWVyMlxuXHRcdC8vICogYmxvY2tfbW9kaWZpZXJcblx0XHR2YXIgYmxvY2sgPSAnJywgZWxlbWVudCA9ICcnLCBtb2RpZmllciA9ICcnO1xuXHRcdHZhciBzZXBhcmF0b3JzID0gZ2V0U2VwYXJhdG9ycygpO1xuXHRcdGlmICh+bmFtZS5pbmRleE9mKHNlcGFyYXRvcnMuZWxlbWVudCkpIHtcblx0XHRcdHZhciBibG9ja0VsZW0gPSBuYW1lLnNwbGl0KHNlcGFyYXRvcnMuZWxlbWVudCk7XG5cdFx0XHR2YXIgZWxlbU1vZGlmaWVycyA9IGJsb2NrRWxlbVsxXS5zcGxpdChzZXBhcmF0b3JzLm1vZGlmaWVyKTtcblxuXHRcdFx0YmxvY2sgPSBibG9ja0VsZW1bMF07XG5cdFx0XHRlbGVtZW50ID0gZWxlbU1vZGlmaWVycy5zaGlmdCgpO1xuXHRcdFx0bW9kaWZpZXIgPSBlbGVtTW9kaWZpZXJzLmpvaW4oc2VwYXJhdG9ycy5tb2RpZmllcik7XG5cdFx0fSBlbHNlIGlmICh+bmFtZS5pbmRleE9mKHNlcGFyYXRvcnMubW9kaWZpZXIpKSB7XG5cdFx0XHR2YXIgYmxvY2tNb2RpZmllcnMgPSBuYW1lLnNwbGl0KHNlcGFyYXRvcnMubW9kaWZpZXIpO1xuXG5cdFx0XHRibG9jayA9IGJsb2NrTW9kaWZpZXJzLnNoaWZ0KCk7XG5cdFx0XHRtb2RpZmllciA9IGJsb2NrTW9kaWZpZXJzLmpvaW4oc2VwYXJhdG9ycy5tb2RpZmllcik7XG5cdFx0fVxuXG5cdFx0aWYgKGJsb2NrIHx8IGVsZW1lbnQgfHwgbW9kaWZpZXIpIHtcblx0XHRcdGlmICghYmxvY2spIHtcblx0XHRcdFx0YmxvY2sgPSBpdGVtLl9fYmVtLmJsb2NrO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBpbmhlcml0IHBhcmVudCBiZW0gZWxlbWVudCwgaWYgZXhpc3RzXG4vL1x0XHRcdGlmIChpdGVtLnBhcmVudCAmJiBpdGVtLnBhcmVudC5fX2JlbSAmJiBpdGVtLnBhcmVudC5fX2JlbS5lbGVtZW50KVxuLy9cdFx0XHRcdGVsZW1lbnQgPSBpdGVtLnBhcmVudC5fX2JlbS5lbGVtZW50ICsgc2VwYXJhdG9ycy5lbGVtZW50ICsgZWxlbWVudDtcblxuXHRcdFx0Ly8gcHJvZHVjZSBtdWx0aXBsZSBjbGFzc2VzXG5cdFx0XHR2YXIgcHJlZml4ID0gYmxvY2s7XG5cdFx0XHR2YXIgcmVzdWx0ID0gW107XG5cblx0XHRcdGlmIChlbGVtZW50KSB7XG5cdFx0XHRcdHByZWZpeCArPSBzZXBhcmF0b3JzLmVsZW1lbnQgKyBlbGVtZW50O1xuXHRcdFx0XHRyZXN1bHQucHVzaChwcmVmaXgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0LnB1c2gocHJlZml4KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKG1vZGlmaWVyKSB7XG5cdFx0XHRcdHJlc3VsdC5wdXNoKHByZWZpeCArIHNlcGFyYXRvcnMubW9kaWZpZXIgKyBtb2RpZmllcik7XG5cdFx0XHR9XG5cblx0XHRcdGl0ZW0uX19iZW0uYmxvY2sgPSBibG9jaztcblx0XHRcdGl0ZW0uX19iZW0uZWxlbWVudCA9IGVsZW1lbnQ7XG5cdFx0XHRpdGVtLl9fYmVtLm1vZGlmaWVyID0gbW9kaWZpZXI7XG5cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXG5cdFx0Ly8gLi4ub3RoZXJ3aXNlLCByZXR1cm4gcHJvY2Vzc2VkIG9yIG9yaWdpbmFsIGNsYXNzIG5hbWVcblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBMb3ctbGV2ZWwgZnVuY3Rpb24gdG8gdHJhbnNmb3JtIHVzZXItdHlwZWQgY2xhc3MgbmFtZSBpbnRvIGZ1bGwgQkVNIGNsYXNzXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIENsYXNzIG5hbWUgaXRlbSB0byBwcm9jZXNzXG5cdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gaXRlbSBIb3N0IG5vZGUgZm9yIHByb3ZpZGVkIGNsYXNzIG5hbWVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGVudGl0eVR5cGUgVHlwZSBvZiBlbnRpdHkgdG8gYmUgdHJpZWQgdG8gdHJhbnNmb3JtXG5cdCAqICgnZWxlbWVudCcgb3IgJ21vZGlmaWVyJylcblx0ICogQHJldHVybnMge1N0cmluZ30gUHJvY2Vzc2VkIGNsYXNzIG5hbWUgb3Igb3JpZ2luYWwgb25lIGlmIGl0IGNhbid0IGJlXG5cdCAqIHRyYW5zZm9ybWVkXG5cdCAqL1xuXHRmdW5jdGlvbiB0cmFuc2Zvcm1DbGFzc05hbWUobmFtZSwgaXRlbSwgZW50aXR5VHlwZSkge1xuXHRcdHZhciBzZXBhcmF0b3JzID0gZ2V0U2VwYXJhdG9ycygpO1xuXHRcdHZhciByZVNlcCA9IG5ldyBSZWdFeHAoJ14oJyArIHNlcGFyYXRvcnNbZW50aXR5VHlwZV0gKyAnKSsnLCAnZycpO1xuXHRcdGlmIChyZVNlcC50ZXN0KG5hbWUpKSB7XG5cdFx0XHR2YXIgZGVwdGggPSAwOyAvLyBwYXJlbnQgbG9va3VwIGRlcHRoXG5cdFx0XHR2YXIgY2xlYW5OYW1lID0gbmFtZS5yZXBsYWNlKHJlU2VwLCBmdW5jdGlvbihzdHIsIHAxKSB7XG5cdFx0XHRcdGRlcHRoID0gc3RyLmxlbmd0aCAvIHNlcGFyYXRvcnNbZW50aXR5VHlwZV0ubGVuZ3RoO1xuXHRcdFx0XHRyZXR1cm4gJyc7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gZmluZCBkb25vciBlbGVtZW50XG5cdFx0XHR2YXIgZG9ub3IgPSBpdGVtO1xuXHRcdFx0d2hpbGUgKGRvbm9yLnBhcmVudCAmJiBkZXB0aC0tKSB7XG5cdFx0XHRcdGRvbm9yID0gZG9ub3IucGFyZW50O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWRvbm9yIHx8ICFkb25vci5fX2JlbSlcblx0XHRcdFx0ZG9ub3IgPSBpdGVtO1xuXG5cdFx0XHRpZiAoZG9ub3IgJiYgZG9ub3IuX19iZW0pIHtcblx0XHRcdFx0dmFyIHByZWZpeCA9IGRvbm9yLl9fYmVtLmJsb2NrO1xuXG5cdFx0XHRcdC8vIGRlY2lkZSBpZiB3ZSBzaG91bGQgaW5oZXJpdCBlbGVtZW50IG5hbWVcbi8vXHRcdFx0XHRpZiAoZW50aXR5VHlwZSA9PSAnZWxlbWVudCcpIHtcbi8vXHRcdFx0XHRcdHZhciBjdXJFbGVtID0gY2xlYW5OYW1lLnNwbGl0KHNlcGFyYXRvcnMubW9kaWZpZXIsIDEpWzBdO1xuLy9cdFx0XHRcdFx0aWYgKGRvbm9yLl9fYmVtLmVsZW1lbnQgJiYgZG9ub3IuX19iZW0uZWxlbWVudCAhPSBjdXJFbGVtKVxuLy9cdFx0XHRcdFx0XHRwcmVmaXggKz0gc2VwYXJhdG9ycy5lbGVtZW50ICsgZG9ub3IuX19iZW0uZWxlbWVudDtcbi8vXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGVudGl0eVR5cGUgPT0gJ21vZGlmaWVyJyAmJiAgZG9ub3IuX19iZW0uZWxlbWVudClcblx0XHRcdFx0XHRwcmVmaXggKz0gc2VwYXJhdG9ycy5lbGVtZW50ICsgZG9ub3IuX19iZW0uZWxlbWVudDtcblxuXHRcdFx0XHRyZXR1cm4gcHJlZml4ICsgc2VwYXJhdG9yc1tlbnRpdHlUeXBlXSArIGNsZWFuTmFtZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWN1cnNpdmUgZnVuY3Rpb24gZm9yIHByb2Nlc3NpbmcgdGFncywgd2hpY2ggZXh0ZW5kcyBjbGFzcyBuYW1lc1xuXHQgKiBhY2NvcmRpbmcgdG8gQkVNIHNwZWNzOiBodHRwOi8vYmVtLmdpdGh1Yi5jb20vYmVtLW1ldGhvZC9wYWdlcy9iZWdpbm5pbmcvYmVnaW5uaW5nLnJ1Lmh0bWxcblx0ICogPGJyPjxicj5cblx0ICogSXQgZG9lcyBzZXZlcmFsIHRoaW5nczo8YnI+XG5cdCAqIDx1bD5cblx0ICogPGxpPkV4cGFuZHMgY29tcGxleCBjbGFzcyBuYW1lIChhY2NvcmRpbmcgdG8gQkVNIHN5bWJvbCBzZW1hbnRpY3MpOlxuXHQgKiAuYmxvY2tfX2VsZW1fbW9kaWZpZXIg4oaSIC5ibG9jay5ibG9ja19fZWxlbS5ibG9ja19fZWxlbV9tb2RpZmllclxuXHQgKiA8L2xpPlxuXHQgKiA8bGk+SW5oZXJpdHMgYmxvY2sgbmFtZSBvbiBjaGlsZCBlbGVtZW50czpcblx0ICogLmItYmxvY2sgPiAuX19lbCA+IC5fX2VsIOKGkiAuYi1ibG9jayA+IC5iLWJsb2NrX19lbCA+IC5iLWJsb2NrX19lbF9fZWxcblx0ICogPC9saT5cblx0ICogPGxpPlRyZWF0cyBmaXJzdCBkYXNoIHN5bWJvbCBhcyAnX18nPC9saT5cblx0ICogPGxpPkRvdWJsZSB1bmRlcnNjb3JlIChvciB0eXBvZ3JhcGhpYyAn4oCTJykgaXMgYWxzbyB0cmVhdGVkIGFzIGFuIGVsZW1lbnRcblx0ICogbGV2ZWwgbG9va3VwLCBlLmcuIF9fX19lbCB3aWxsIHNlYXJjaCBmb3IgZWxlbWVudCBkZWZpbml0aW9uIGluIHBhcmVudOKAmXNcblx0ICogcGFyZW50IGVsZW1lbnQ6XG5cdCAqIC5iLWJsb2NrID4gLl9fZWwxID4gLl9fX19lbDIg4oaSIC5iLWJsb2NrID4gLmItYmxvY2tfX2VsMSA+IC5iLWJsb2NrX19lbDJcblx0ICogPC9saT5cblx0ICogPC91bD5cblx0ICpcblx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSB0cmVlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9maWxlXG5cdCAqL1xuXHRmdW5jdGlvbiBwcm9jZXNzKHRyZWUsIHByb2ZpbGUpIHtcblx0XHRpZiAodHJlZS5uYW1lKVxuXHRcdFx0YmVtUGFyc2UodHJlZSwgcHJvZmlsZSk7XG5cblx0XHR2YXIgYWJiclV0aWxzID0gcmVxdWlyZSgnYWJicmV2aWF0aW9uVXRpbHMnKTtcblx0XHRfLmVhY2godHJlZS5jaGlsZHJlbiwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0cHJvY2VzcyhpdGVtLCBwcm9maWxlKTtcblx0XHRcdGlmICghYWJiclV0aWxzLmlzU25pcHBldChpdGVtKSAmJiBpdGVtLnN0YXJ0KVxuXHRcdFx0XHRzaG91bGRSdW5IdG1sRmlsdGVyID0gdHJ1ZTtcblx0XHR9KTtcblxuXHRcdHJldHVybiB0cmVlO1xuXHR9O1xuXG5cdHJlcXVpcmUoJ2ZpbHRlcnMnKS5hZGQoJ2JlbScsIGZ1bmN0aW9uKHRyZWUsIHByb2ZpbGUpIHtcblx0XHRzaG91bGRSdW5IdG1sRmlsdGVyID0gZmFsc2U7XG5cdFx0dHJlZSA9IHByb2Nlc3ModHJlZSwgcHJvZmlsZSk7XG5cdFx0Ly8gaW4gY2FzZSAnYmVtJyBmaWx0ZXIgaXMgYXBwbGllZCBhZnRlciAnaHRtbCcgZmlsdGVyOiBydW4gaXQgYWdhaW5cblx0XHQvLyB0byB1cGRhdGUgb3V0cHV0XG5cdFx0aWYgKHNob3VsZFJ1bkh0bWxGaWx0ZXIpIHtcblx0XHRcdHRyZWUgPSByZXF1aXJlKCdmaWx0ZXJzJykuYXBwbHkodHJlZSwgJ2h0bWwnLCBwcm9maWxlKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJlZTtcblx0fSk7XG59KTtcblxuLyoqXG4gKiBDb21tZW50IGltcG9ydGFudCB0YWdzICh3aXRoICdpZCcgYW5kICdjbGFzcycgYXR0cmlidXRlcylcbiAqIEBhdXRob3IgU2VyZ2V5IENoaWt1eW9ub2sgKHNlcmdlLmNoZUBnbWFpbC5jb20pXG4gKiBAbGluayBodHRwOi8vY2hpa3V5b25vay5ydVxuICogQGNvbnN0cnVjdG9yXG4gKiBAbWVtYmVyT2YgX19jb21tZW50RmlsdGVyRGVmaW5lXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZXhlYyhmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdC8vIGRlZmluZSBzb21lIHByZWZlcmVuY2VzXG5cdC8qKiBAdHlwZSBlbW1ldC5wcmVmZXJlbmNlcyAqL1xuXHR2YXIgcHJlZnMgPSByZXF1aXJlKCdwcmVmZXJlbmNlcycpO1xuXG5cdHByZWZzLmRlZmluZSgnZmlsdGVyLmNvbW1lbnRBZnRlcicsXG5cdFx0XHQnXFxuPCEtLSAvPCU9IGF0dHIoXCJpZFwiLCBcIiNcIikgJT48JT0gYXR0cihcImNsYXNzXCIsIFwiLlwiKSAlPiAtLT4nLFxuXHRcdFx0J0EgZGVmaW5pdGlvbiBvZiBjb21tZW50IHRoYXQgc2hvdWxkIGJlIHBsYWNlZCA8aT5hZnRlcjwvaT4gbWF0Y2hlZCAnXG5cdFx0XHQrICdlbGVtZW50IHdoZW4gPGNvZGU+Y29tbWVudDwvY29kZT4gZmlsdGVyIGlzIGFwcGxpZWQuIFRoaXMgZGVmaW5pdGlvbiAnXG5cdFx0XHQrICdpcyBhbiBFUkItc3R5bGUgdGVtcGxhdGUgcGFzc2VkIHRvIDxjb2RlPl8udGVtcGxhdGUoKTwvY29kZT4gJ1xuXHRcdFx0KyAnZnVuY3Rpb24gKHNlZSBVbmRlcnNjb3JlLmpzIGRvY3MgZm9yIGRldGFpbHMpLiBJbiB0ZW1wbGF0ZSBjb250ZXh0LCAnXG5cdFx0XHQrICd0aGUgZm9sbG93aW5nIHByb3BlcnRpZXMgYW5kIGZ1bmN0aW9ucyBhcmUgYXZhaWxhYmU6XFxuJ1xuXHRcdFx0KyAnPHVsPidcblxuXHRcdFx0KyAnPGxpPjxjb2RlPmF0dHIobmFtZSwgYmVmb3JlLCBhZnRlcik8L2NvZGU+IOKAkyBhIGZ1bmN0aW9uIHRoYXQgb3V0cHV0cydcblx0XHRcdCsgJ3NwZWNpZmllZCBhdHRyaWJ1dGUgdmFsdWUgY29uY2F0ZW5hdGVkIHdpdGggPGNvZGU+YmVmb3JlPC9jb2RlPiAnXG5cdFx0XHQrICdhbmQgPGNvZGU+YWZ0ZXI8L2NvZGU+IHN0cmluZ3MuIElmIGF0dHJpYnV0ZSBkb2VzblxcJ3QgZXhpc3RzLCB0aGUgJ1xuXHRcdFx0KyAnZW1wdHkgc3RyaW5nIHdpbGwgYmUgcmV0dXJuZWQuPC9saT4nXG5cblx0XHRcdCsgJzxsaT48Y29kZT5ub2RlPC9jb2RlPiDigJMgY3VycmVudCBub2RlIChpbnN0YW5jZSBvZiA8Y29kZT5BYmJyZXZpYXRpb25Ob2RlPC9jb2RlPik8L2xpPidcblxuXHRcdFx0KyAnPGxpPjxjb2RlPm5hbWU8L2NvZGU+IOKAkyBuYW1lIG9mIGN1cnJlbnQgdGFnPC9saT4nXG5cblx0XHRcdCsgJzxsaT48Y29kZT5wYWRkaW5nPC9jb2RlPiDigJMgY3VycmVudCBzdHJpbmcgcGFkZGluZywgY2FuIGJlIHVzZWQgJ1xuXHRcdFx0KyAnZm9yIGZvcm1hdHRpbmc8L2xpPidcblxuXHRcdFx0Kyc8L3VsPicpO1xuXG5cdHByZWZzLmRlZmluZSgnZmlsdGVyLmNvbW1lbnRCZWZvcmUnLFxuXHRcdFx0JycsXG5cdFx0XHQnQSBkZWZpbml0aW9uIG9mIGNvbW1lbnQgdGhhdCBzaG91bGQgYmUgcGxhY2VkIDxpPmJlZm9yZTwvaT4gbWF0Y2hlZCAnXG5cdFx0XHQrICdlbGVtZW50IHdoZW4gPGNvZGU+Y29tbWVudDwvY29kZT4gZmlsdGVyIGlzIGFwcGxpZWQuICdcblx0XHRcdCsgJ0ZvciBtb3JlIGluZm8sIHJlYWQgZGVzY3JpcHRpb24gb2YgPGNvZGU+ZmlsdGVyLmNvbW1lbnRBZnRlcjwvY29kZT4gJ1xuXHRcdFx0KyAncHJvcGVydHknKTtcblxuXHRwcmVmcy5kZWZpbmUoJ2ZpbHRlci5jb21tZW50VHJpZ2dlcicsICdpZCwgY2xhc3MnLFxuXHRcdFx0J0EgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlIG5hbWVzIHRoYXQgc2hvdWxkIGV4aXN0IGluIGFiYnJldmlhdG9pbiAnXG5cdFx0XHQrICd3aGVyZSBjb21tZW50IHNob3VsZCBiZSBhZGRlZC4gSWYgeW91IHdpc2ggdG8gYWRkIGNvbW1lbnQgZm9yICdcblx0XHRcdCsgJ2V2ZXJ5IGVsZW1lbnQsIHNldCB0aGlzIG9wdGlvbiB0byA8Y29kZT4qPC9jb2RlPicpO1xuXG5cdC8qKlxuXHQgKiBBZGQgY29tbWVudHMgdG8gdGFnXG5cdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gbm9kZVxuXHQgKi9cblx0ZnVuY3Rpb24gYWRkQ29tbWVudHMobm9kZSwgdGVtcGxhdGVCZWZvcmUsIHRlbXBsYXRlQWZ0ZXIpIHtcblx0XHR2YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpO1xuXG5cdFx0Ly8gY2hlY2sgaWYgY29tbWVudHMgc2hvdWxkIGJlIGFkZGVkXG5cdFx0dmFyIHRyaWdnZXIgPSBwcmVmcy5nZXQoJ2ZpbHRlci5jb21tZW50VHJpZ2dlcicpO1xuXHRcdGlmICh0cmlnZ2VyICE9ICcqJykge1xuXHRcdFx0dmFyIHNob3VsZEFkZCA9IF8uZmluZCh0cmlnZ2VyLnNwbGl0KCcsJyksIGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdFx0cmV0dXJuICEhbm9kZS5hdHRyaWJ1dGUodXRpbHMudHJpbShuYW1lKSk7XG5cdFx0XHR9KTtcblx0XHRcdGlmICghc2hvdWxkQWRkKSByZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIGN0eCA9IHtcblx0XHRcdG5vZGU6IG5vZGUsXG5cdFx0XHRuYW1lOiBub2RlLm5hbWUoKSxcblx0XHRcdHBhZGRpbmc6IG5vZGUucGFyZW50ID8gbm9kZS5wYXJlbnQucGFkZGluZyA6ICcnLFxuXHRcdFx0YXR0cjogZnVuY3Rpb24obmFtZSwgYmVmb3JlLCBhZnRlcikge1xuXHRcdFx0XHR2YXIgYXR0ciA9IG5vZGUuYXR0cmlidXRlKG5hbWUpO1xuXHRcdFx0XHRpZiAoYXR0cikge1xuXHRcdFx0XHRcdHJldHVybiAoYmVmb3JlIHx8ICcnKSArIGF0dHIgKyAoYWZ0ZXIgfHwgJycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuICcnO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHR2YXIgbm9kZUJlZm9yZSA9IHV0aWxzLm5vcm1hbGl6ZU5ld2xpbmUodGVtcGxhdGVCZWZvcmUgPyB0ZW1wbGF0ZUJlZm9yZShjdHgpIDogJycpO1xuXHRcdHZhciBub2RlQWZ0ZXIgPSB1dGlscy5ub3JtYWxpemVOZXdsaW5lKHRlbXBsYXRlQWZ0ZXIgPyB0ZW1wbGF0ZUFmdGVyKGN0eCkgOiAnJyk7XG5cblx0XHRub2RlLnN0YXJ0ID0gbm9kZS5zdGFydC5yZXBsYWNlKC88Lywgbm9kZUJlZm9yZSArICc8Jyk7XG5cdFx0bm9kZS5lbmQgPSBub2RlLmVuZC5yZXBsYWNlKC8+LywgJz4nICsgbm9kZUFmdGVyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHByb2Nlc3ModHJlZSwgYmVmb3JlLCBhZnRlcikge1xuXHRcdHZhciBhYmJyVXRpbHMgPSByZXF1aXJlKCdhYmJyZXZpYXRpb25VdGlscycpO1xuXHRcdF8uZWFjaCh0cmVlLmNoaWxkcmVuLCBmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRpZiAoYWJiclV0aWxzLmlzQmxvY2soaXRlbSkpXG5cdFx0XHRcdGFkZENvbW1lbnRzKGl0ZW0sIGJlZm9yZSwgYWZ0ZXIpO1xuXG5cdFx0XHRwcm9jZXNzKGl0ZW0sIGJlZm9yZSwgYWZ0ZXIpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHRyZWU7XG5cdH1cblxuXHRyZXF1aXJlKCdmaWx0ZXJzJykuYWRkKCdjJywgZnVuY3Rpb24odHJlZSkge1xuXHRcdHZhciB0ZW1wbGF0ZUJlZm9yZSA9IF8udGVtcGxhdGUocHJlZnMuZ2V0KCdmaWx0ZXIuY29tbWVudEJlZm9yZScpKTtcblx0XHR2YXIgdGVtcGxhdGVBZnRlciA9IF8udGVtcGxhdGUocHJlZnMuZ2V0KCdmaWx0ZXIuY29tbWVudEFmdGVyJykpO1xuXG5cdFx0cmV0dXJuIHByb2Nlc3ModHJlZSwgdGVtcGxhdGVCZWZvcmUsIHRlbXBsYXRlQWZ0ZXIpO1xuXHR9KTtcbn0pO1xuLyoqXG4gKiBGaWx0ZXIgZm9yIGVzY2FwaW5nIHVuc2FmZSBYTUwgY2hhcmFjdGVyczogPCwgPiwgJlxuICogQGF1dGhvciBTZXJnZXkgQ2hpa3V5b25vayAoc2VyZ2UuY2hlQGdtYWlsLmNvbSlcbiAqIEBsaW5rIGh0dHA6Ly9jaGlrdXlvbm9rLnJ1XG4gKi9cbmVtbWV0LmV4ZWMoZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHR2YXIgY2hhck1hcCA9IHtcblx0XHQnPCc6ICcmbHQ7Jyxcblx0XHQnPic6ICcmZ3Q7Jyxcblx0XHQnJic6ICcmYW1wOydcblx0fTtcblxuXHRmdW5jdGlvbiBlc2NhcGVDaGFycyhzdHIpIHtcblx0XHRyZXR1cm4gc3RyLnJlcGxhY2UoLyhbPD4mXSkvZywgZnVuY3Rpb24oc3RyLCBwMSl7XG5cdFx0XHRyZXR1cm4gY2hhck1hcFtwMV07XG5cdFx0fSk7XG5cdH1cblxuXHRyZXF1aXJlKCdmaWx0ZXJzJykuYWRkKCdlJywgZnVuY3Rpb24gcHJvY2Vzcyh0cmVlKSB7XG5cdFx0Xy5lYWNoKHRyZWUuY2hpbGRyZW4sIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdGl0ZW0uc3RhcnQgPSBlc2NhcGVDaGFycyhpdGVtLnN0YXJ0KTtcblx0XHRcdGl0ZW0uZW5kID0gZXNjYXBlQ2hhcnMoaXRlbS5lbmQpO1xuXHRcdFx0aXRlbS5jb250ZW50ID0gZXNjYXBlQ2hhcnMoaXRlbS5jb250ZW50KTtcblx0XHRcdHByb2Nlc3MoaXRlbSk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gdHJlZTtcblx0fSk7XG59KTsvKipcbiAqIEdlbmVyaWMgZm9ybWF0dGluZyBmaWx0ZXI6IGNyZWF0ZXMgcHJvcGVyIGluZGVudGF0aW9uIGZvciBlYWNoIHRyZWUgbm9kZSxcbiAqIHBsYWNpbmcgXCIlc1wiIHBsYWNlaG9sZGVyIHdoZXJlIHRoZSBhY3R1YWwgb3V0cHV0IHNob3VsZCBiZS4gWW91IGNhbiB1c2VcbiAqIHRoaXMgZmlsdGVyIHRvIHByZWZvcm1hdCB0cmVlIGFuZCB0aGVuIHJlcGxhY2UgJXMgcGxhY2Vob2xkZXIgdG8gd2hhdGV2ZXIgeW91XG4gKiBuZWVkLiBUaGlzIGZpbHRlciBzaG91bGQndCBiZSBjYWxsZWQgZGlyZWN0bHkgZnJvbSBlZGl0b3IgYXMgYSBwYXJ0XG4gKiBvZiBhYmJyZXZpYXRpb24uXG4gKiBAYXV0aG9yIFNlcmdleSBDaGlrdXlvbm9rIChzZXJnZS5jaGVAZ21haWwuY29tKVxuICogQGxpbmsgaHR0cDovL2NoaWt1eW9ub2sucnVcbiAqIEBjb25zdHJ1Y3RvclxuICogQG1lbWJlck9mIF9fZm9ybWF0RmlsdGVyRGVmaW5lXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZXhlYyhmdW5jdGlvbihyZXF1aXJlLCBfKXtcblx0dmFyIHBsYWNlaG9sZGVyID0gJyVzJztcblxuXHQvKiogQHR5cGUgcHJlZmVyZW5jZXMgKi9cblx0dmFyIHByZWZzID0gcmVxdWlyZSgncHJlZmVyZW5jZXMnKTtcblx0cHJlZnMuZGVmaW5lKCdmb3JtYXQubm9JbmRlbnRUYWdzJywgJ2h0bWwnLFxuXHRcdFx0J0EgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgdGFnIG5hbWVzIHRoYXQgc2hvdWxkIG5vdCBnZXQgaW5uZXIgaW5kZW50YXRpb24uJyk7XG5cblx0cHJlZnMuZGVmaW5lKCdmb3JtYXQuZm9yY2VJbmRlbnRhdGlvbkZvclRhZ3MnLCAnYm9keScsXG5cdFx0J0EgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgdGFnIG5hbWVzIHRoYXQgc2hvdWxkIDxlbT5hbHdheXM8L2VtPiBnZXQgaW5uZXIgaW5kZW50YXRpb24uJyk7XG5cblx0LyoqXG5cdCAqIEdldCBpbmRlbnRhdGlvbiBmb3IgZ2l2ZW4gbm9kZVxuXHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IG5vZGVcblx0ICogQHJldHVybnMge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGdldEluZGVudGF0aW9uKG5vZGUpIHtcblx0XHRpZiAoXy5pbmNsdWRlKHByZWZzLmdldEFycmF5KCdmb3JtYXQubm9JbmRlbnRUYWdzJykgfHwgW10sIG5vZGUubmFtZSgpKSkge1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXF1aXJlKCdyZXNvdXJjZXMnKS5nZXRWYXJpYWJsZSgnaW5kZW50YXRpb24nKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBUZXN0IGlmIHBhc3NlZCBub2RlIGhhcyBibG9jay1sZXZlbCBzaWJsaW5nIGVsZW1lbnRcblx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBpdGVtXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNCbG9ja1NpYmxpbmcoaXRlbSkge1xuXHRcdHJldHVybiBpdGVtLnBhcmVudCAmJiByZXF1aXJlKCdhYmJyZXZpYXRpb25VdGlscycpLmhhc0Jsb2NrQ2hpbGRyZW4oaXRlbS5wYXJlbnQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRlc3QgaWYgcGFzc2VkIGl0ZW0gaXMgdmVyeSBmaXJzdCBjaGlsZCBpbiBwYXJzZWQgdHJlZVxuXHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IGl0ZW1cblx0ICovXG5cdGZ1bmN0aW9uIGlzVmVyeUZpcnN0Q2hpbGQoaXRlbSkge1xuXHRcdHJldHVybiBpdGVtLnBhcmVudCAmJiAhaXRlbS5wYXJlbnQucGFyZW50ICYmICFpdGVtLmluZGV4KCk7XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBuZXdsaW5lIHNob3VsZCBiZSBhZGRlZCBiZWZvcmUgZWxlbWVudFxuXHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtPdXRwdXRQcm9maWxlfSBwcm9maWxlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBzaG91bGRBZGRMaW5lQnJlYWsobm9kZSwgcHJvZmlsZSkge1xuXHRcdHZhciBhYmJyVXRpbHMgPSByZXF1aXJlKCdhYmJyZXZpYXRpb25VdGlscycpO1xuXHRcdGlmIChwcm9maWxlLnRhZ19ubCA9PT0gdHJ1ZSB8fCBhYmJyVXRpbHMuaXNCbG9jayhub2RlKSlcblx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0aWYgKCFub2RlLnBhcmVudCB8fCAhcHJvZmlsZS5pbmxpbmVfYnJlYWspXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cblx0XHQvLyBjaGVjayBpZiB0aGVyZSBhcmUgcmVxdWlyZWQgYW1vdW50IG9mIGFkamFjZW50IGlubGluZSBlbGVtZW50XG5cdFx0cmV0dXJuIHNob3VsZEZvcm1hdElubGluZShub2RlLnBhcmVudCwgcHJvZmlsZSk7XG59XG5cblx0LyoqXG5cdCAqIE5lZWQgdG8gYWRkIG5ld2xpbmUgYmVjYXVzZSA8Y29kZT5pdGVtPC9jb2RlPiBoYXMgdG9vIG1hbnkgaW5saW5lIGNoaWxkcmVuXG5cdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge091dHB1dFByb2ZpbGV9IHByb2ZpbGVcblx0ICovXG5cdGZ1bmN0aW9uIHNob3VsZEJyZWFrQ2hpbGQobm9kZSwgcHJvZmlsZSkge1xuXHRcdC8vIHdlIG5lZWQgdG8gdGVzdCBvbmx5IG9uZSBjaGlsZCBlbGVtZW50LCBiZWNhdXNlXG5cdFx0Ly8gaGFzQmxvY2tDaGlsZHJlbigpIG1ldGhvZCB3aWxsIGRvIHRoZSByZXN0XG5cdFx0cmV0dXJuIG5vZGUuY2hpbGRyZW4ubGVuZ3RoICYmIHNob3VsZEFkZExpbmVCcmVhayhub2RlLmNoaWxkcmVuWzBdLCBwcm9maWxlKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNob3VsZEZvcm1hdElubGluZShub2RlLCBwcm9maWxlKSB7XG5cdFx0dmFyIG5vZGVDb3VudCA9IDA7XG5cdFx0dmFyIGFiYnJVdGlscyA9IHJlcXVpcmUoJ2FiYnJldmlhdGlvblV0aWxzJyk7XG5cdFx0cmV0dXJuICEhXy5maW5kKG5vZGUuY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKSB7XG5cdFx0XHRpZiAoY2hpbGQuaXNUZXh0Tm9kZSgpIHx8ICFhYmJyVXRpbHMuaXNJbmxpbmUoY2hpbGQpKVxuXHRcdFx0XHRub2RlQ291bnQgPSAwO1xuXHRcdFx0ZWxzZSBpZiAoYWJiclV0aWxzLmlzSW5saW5lKGNoaWxkKSlcblx0XHRcdFx0bm9kZUNvdW50Kys7XG5cblx0XHRcdGlmIChub2RlQ291bnQgPj0gcHJvZmlsZS5pbmxpbmVfYnJlYWspXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gaXNSb290KGl0ZW0pIHtcblx0XHRyZXR1cm4gIWl0ZW0ucGFyZW50O1xuXHR9XG5cblx0LyoqXG5cdCAqIFByb2Nlc3NlcyBlbGVtZW50IHdpdGggbWF0Y2hlZCByZXNvdXJjZSBvZiB0eXBlIDxjb2RlPnNuaXBwZXQ8L2NvZGU+XG5cdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gaXRlbVxuXHQgKiBAcGFyYW0ge091dHB1dFByb2ZpbGV9IHByb2ZpbGVcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIERlcHRoIGxldmVsXG5cdCAqL1xuXHRmdW5jdGlvbiBwcm9jZXNzU25pcHBldChpdGVtLCBwcm9maWxlLCBsZXZlbCkge1xuXHRcdGl0ZW0uc3RhcnQgPSBpdGVtLmVuZCA9ICcnO1xuXHRcdGlmICghaXNWZXJ5Rmlyc3RDaGlsZChpdGVtKSAmJiBwcm9maWxlLnRhZ19ubCAhPT0gZmFsc2UgJiYgc2hvdWxkQWRkTGluZUJyZWFrKGl0ZW0sIHByb2ZpbGUpKSB7XG5cdFx0XHQvLyBjaGVjayBpZiB3ZeKAmXJlIG5vdCBpbnNpZGUgaW5saW5lIGVsZW1lbnRcblx0XHRcdGlmIChpc1Jvb3QoaXRlbS5wYXJlbnQpIHx8ICFyZXF1aXJlKCdhYmJyZXZpYXRpb25VdGlscycpLmlzSW5saW5lKGl0ZW0ucGFyZW50KSkge1xuXHRcdFx0XHRpdGVtLnN0YXJ0ID0gcmVxdWlyZSgndXRpbHMnKS5nZXROZXdsaW5lKCkgKyBpdGVtLnN0YXJ0O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBpdGVtO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrIGlmIHdlIHNob3VsZCBhZGQgbGluZSBicmVha3MgaW5zaWRlIGlubGluZSBlbGVtZW50XG5cdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge091dHB1dFByb2ZpbGV9IHByb2ZpbGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIHNob3VsZEJyZWFrSW5zaWRlSW5saW5lKG5vZGUsIHByb2ZpbGUpIHtcblx0XHR2YXIgYWJiclV0aWxzID0gcmVxdWlyZSgnYWJicmV2aWF0aW9uVXRpbHMnKTtcblx0XHR2YXIgaGFzQmxvY2tFbGVtcyA9IF8uYW55KG5vZGUuY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKSB7XG5cdFx0XHRpZiAoYWJiclV0aWxzLmlzU25pcHBldChjaGlsZCkpXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblxuXHRcdFx0cmV0dXJuICFhYmJyVXRpbHMuaXNJbmxpbmUoY2hpbGQpO1xuXHRcdH0pO1xuXG5cdFx0aWYgKCFoYXNCbG9ja0VsZW1zKSB7XG5cdFx0XHRyZXR1cm4gc2hvdWxkRm9ybWF0SW5saW5lKG5vZGUsIHByb2ZpbGUpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFByb2Nlc3NlcyBlbGVtZW50IHdpdGggPGNvZGU+dGFnPC9jb2RlPiB0eXBlXG5cdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gaXRlbVxuXHQgKiBAcGFyYW0ge091dHB1dFByb2ZpbGV9IHByb2ZpbGVcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIERlcHRoIGxldmVsXG5cdCAqL1xuXHRmdW5jdGlvbiBwcm9jZXNzVGFnKGl0ZW0sIHByb2ZpbGUsIGxldmVsKSB7XG5cdFx0aXRlbS5zdGFydCA9IGl0ZW0uZW5kID0gcGxhY2Vob2xkZXI7XG5cdFx0dmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblx0XHR2YXIgYWJiclV0aWxzID0gcmVxdWlyZSgnYWJicmV2aWF0aW9uVXRpbHMnKTtcblx0XHR2YXIgaXNVbmFyeSA9IGFiYnJVdGlscy5pc1VuYXJ5KGl0ZW0pO1xuXHRcdHZhciBubCA9IHV0aWxzLmdldE5ld2xpbmUoKTtcblx0XHR2YXIgaW5kZW50ID0gZ2V0SW5kZW50YXRpb24oaXRlbSk7XG5cblx0XHQvLyBmb3JtYXR0aW5nIG91dHB1dFxuXHRcdGlmIChwcm9maWxlLnRhZ19ubCAhPT0gZmFsc2UpIHtcblx0XHRcdHZhciBmb3JjZU5sID0gcHJvZmlsZS50YWdfbmwgPT09IHRydWUgJiYgKHByb2ZpbGUudGFnX25sX2xlYWYgfHwgaXRlbS5jaGlsZHJlbi5sZW5ndGgpO1xuXHRcdFx0aWYgKCFmb3JjZU5sKSB7XG5cdFx0XHRcdGZvcmNlTmwgPSBfLmluY2x1ZGUocHJlZnMuZ2V0QXJyYXkoJ2Zvcm1hdC5mb3JjZUluZGVudGF0aW9uRm9yVGFncycpIHx8IFtdLCBpdGVtLm5hbWUoKSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGZvcm1hdHRpbmcgYmxvY2stbGV2ZWwgZWxlbWVudHNcblx0XHRcdGlmICghaXRlbS5pc1RleHROb2RlKCkpIHtcblx0XHRcdFx0aWYgKHNob3VsZEFkZExpbmVCcmVhayhpdGVtLCBwcm9maWxlKSkge1xuXHRcdFx0XHRcdC8vIC0gZG8gbm90IGluZGVudCB0aGUgdmVyeSBmaXJzdCBlbGVtZW50XG5cdFx0XHRcdFx0Ly8gLSBkbyBub3QgaW5kZW50IGZpcnN0IGNoaWxkIG9mIGEgc25pcHBldFxuXHRcdFx0XHRcdGlmICghaXNWZXJ5Rmlyc3RDaGlsZChpdGVtKSAmJiAoIWFiYnJVdGlscy5pc1NuaXBwZXQoaXRlbS5wYXJlbnQpIHx8IGl0ZW0uaW5kZXgoKSkpXG5cdFx0XHRcdFx0XHRpdGVtLnN0YXJ0ID0gbmwgKyBpdGVtLnN0YXJ0O1xuXG5cdFx0XHRcdFx0aWYgKGFiYnJVdGlscy5oYXNCbG9ja0NoaWxkcmVuKGl0ZW0pIHx8IHNob3VsZEJyZWFrQ2hpbGQoaXRlbSwgcHJvZmlsZSkgfHwgKGZvcmNlTmwgJiYgIWlzVW5hcnkpKVxuXHRcdFx0XHRcdFx0aXRlbS5lbmQgPSBubCArIGl0ZW0uZW5kO1xuXG5cdFx0XHRcdFx0aWYgKGFiYnJVdGlscy5oYXNUYWdzSW5Db250ZW50KGl0ZW0pIHx8IChmb3JjZU5sICYmICFpdGVtLmNoaWxkcmVuLmxlbmd0aCAmJiAhaXNVbmFyeSkpXG5cdFx0XHRcdFx0XHRpdGVtLnN0YXJ0ICs9IG5sICsgaW5kZW50O1xuXHRcdFx0XHR9IGVsc2UgaWYgKGFiYnJVdGlscy5pc0lubGluZShpdGVtKSAmJiBoYXNCbG9ja1NpYmxpbmcoaXRlbSkgJiYgIWlzVmVyeUZpcnN0Q2hpbGQoaXRlbSkpIHtcblx0XHRcdFx0XHRpdGVtLnN0YXJ0ID0gbmwgKyBpdGVtLnN0YXJ0O1xuXHRcdFx0XHR9IGVsc2UgaWYgKGFiYnJVdGlscy5pc0lubGluZShpdGVtKSAmJiBzaG91bGRCcmVha0luc2lkZUlubGluZShpdGVtLCBwcm9maWxlKSkge1xuXHRcdFx0XHRcdGl0ZW0uZW5kID0gbmwgKyBpdGVtLmVuZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGl0ZW0ucGFkZGluZyA9IGluZGVudDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gaXRlbTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQcm9jZXNzZXMgc2ltcGxpZmllZCB0cmVlLCBtYWtpbmcgaXQgc3VpdGFibGUgZm9yIG91dHB1dCBhcyBIVE1MIHN0cnVjdHVyZVxuXHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IHRyZWVcblx0ICogQHBhcmFtIHtPdXRwdXRQcm9maWxlfSBwcm9maWxlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBEZXB0aCBsZXZlbFxuXHQgKi9cblx0cmVxdWlyZSgnZmlsdGVycycpLmFkZCgnX2Zvcm1hdCcsIGZ1bmN0aW9uIHByb2Nlc3ModHJlZSwgcHJvZmlsZSwgbGV2ZWwpIHtcblx0XHRsZXZlbCA9IGxldmVsIHx8IDA7XG5cdFx0dmFyIGFiYnJVdGlscyA9IHJlcXVpcmUoJ2FiYnJldmlhdGlvblV0aWxzJyk7XG5cblx0XHRfLmVhY2godHJlZS5jaGlsZHJlbiwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0aWYgKGFiYnJVdGlscy5pc1NuaXBwZXQoaXRlbSkpXG5cdFx0XHRcdHByb2Nlc3NTbmlwcGV0KGl0ZW0sIHByb2ZpbGUsIGxldmVsKTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0cHJvY2Vzc1RhZyhpdGVtLCBwcm9maWxlLCBsZXZlbCk7XG5cblx0XHRcdHByb2Nlc3MoaXRlbSwgcHJvZmlsZSwgbGV2ZWwgKyAxKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiB0cmVlO1xuXHR9KTtcbn0pOy8qKlxuICogRmlsdGVyIGZvciBwcm9kdWNpbmcgSEFNTCBjb2RlIGZyb20gYWJicmV2aWF0aW9uLlxuICogQGF1dGhvciBTZXJnZXkgQ2hpa3V5b25vayAoc2VyZ2UuY2hlQGdtYWlsLmNvbSlcbiAqIEBsaW5rIGh0dHA6Ly9jaGlrdXlvbm9rLnJ1XG4gKiBAY29uc3RydWN0b3JcbiAqIEBtZW1iZXJPZiBfX2hhbWxGaWx0ZXJEZWZpbmVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlcXVpcmVcbiAqIEBwYXJhbSB7VW5kZXJzY29yZX0gX1xuICovXG5lbW1ldC5leGVjKGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0dmFyIGNoaWxkVG9rZW4gPSAnJHtjaGlsZH0nO1xuXG5cdGZ1bmN0aW9uIHRyYW5zZm9ybUNsYXNzTmFtZShjbGFzc05hbWUpIHtcblx0XHRyZXR1cm4gcmVxdWlyZSgndXRpbHMnKS50cmltKGNsYXNzTmFtZSkucmVwbGFjZSgvXFxzKy9nLCAnLicpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgSEFNTCBhdHRyaWJ1dGVzIHN0cmluZyBmcm9tIHRhZyBhY2NvcmRpbmcgdG8gcHJvZmlsZSBzZXR0aW5nc1xuXHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IHRhZ1xuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvZmlsZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWFrZUF0dHJpYnV0ZXNTdHJpbmcodGFnLCBwcm9maWxlKSB7XG5cdFx0dmFyIGF0dHJzID0gJyc7XG5cdFx0dmFyIG90aGVyQXR0cnMgPSBbXTtcblx0XHR2YXIgYXR0clF1b3RlID0gcHJvZmlsZS5hdHRyaWJ1dGVRdW90ZSgpO1xuXHRcdHZhciBjdXJzb3IgPSBwcm9maWxlLmN1cnNvcigpO1xuXG5cdFx0Xy5lYWNoKHRhZy5hdHRyaWJ1dGVMaXN0KCksIGZ1bmN0aW9uKGEpIHtcblx0XHRcdHZhciBhdHRyTmFtZSA9IHByb2ZpbGUuYXR0cmlidXRlTmFtZShhLm5hbWUpO1xuXHRcdFx0c3dpdGNoIChhdHRyTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG5cdFx0XHRcdC8vIHVzZSBzaG9ydCBub3RhdGlvbiBmb3IgSUQgYW5kIENMQVNTIGF0dHJpYnV0ZXNcblx0XHRcdFx0Y2FzZSAnaWQnOlxuXHRcdFx0XHRcdGF0dHJzICs9ICcjJyArIChhLnZhbHVlIHx8IGN1cnNvcik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ2NsYXNzJzpcblx0XHRcdFx0XHRhdHRycyArPSAnLicgKyB0cmFuc2Zvcm1DbGFzc05hbWUoYS52YWx1ZSB8fCBjdXJzb3IpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHQvLyBwcm9jZXNzIG90aGVyIGF0dHJpYnV0ZXNcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRvdGhlckF0dHJzLnB1c2goJzonICthdHRyTmFtZSArICcgPT4gJyArIGF0dHJRdW90ZSArIChhLnZhbHVlIHx8IGN1cnNvcikgKyBhdHRyUXVvdGUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0aWYgKG90aGVyQXR0cnMubGVuZ3RoKVxuXHRcdFx0YXR0cnMgKz0gJ3snICsgb3RoZXJBdHRycy5qb2luKCcsICcpICsgJ30nO1xuXG5cdFx0cmV0dXJuIGF0dHJzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRlc3QgaWYgcGFzc2VkIG5vZGUgaGFzIGJsb2NrLWxldmVsIHNpYmxpbmcgZWxlbWVudFxuXHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IGl0ZW1cblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIGhhc0Jsb2NrU2libGluZyhpdGVtKSB7XG5cdFx0cmV0dXJuIGl0ZW0ucGFyZW50ICYmIGl0ZW0ucGFyZW50Lmhhc0Jsb2NrQ2hpbGRyZW4oKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQcm9jZXNzZXMgZWxlbWVudCB3aXRoIDxjb2RlPnRhZzwvY29kZT4gdHlwZVxuXHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IGl0ZW1cblx0ICogQHBhcmFtIHtPdXRwdXRQcm9maWxlfSBwcm9maWxlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBEZXB0aCBsZXZlbFxuXHQgKi9cblx0ZnVuY3Rpb24gcHJvY2Vzc1RhZyhpdGVtLCBwcm9maWxlLCBsZXZlbCkge1xuXHRcdGlmICghaXRlbS5wYXJlbnQpXG5cdFx0XHQvLyBsb29rcyBsaWtlIGl0J3Mgcm9vdCBlbGVtZW50XG5cdFx0XHRyZXR1cm4gaXRlbTtcblxuXHRcdHZhciBhYmJyVXRpbHMgPSByZXF1aXJlKCdhYmJyZXZpYXRpb25VdGlscycpO1xuXHRcdHZhciB1dGlscyA9IHJlcXVpcmUoJ3V0aWxzJyk7XG5cblx0XHR2YXIgYXR0cnMgPSBtYWtlQXR0cmlidXRlc1N0cmluZyhpdGVtLCBwcm9maWxlKTtcblx0XHR2YXIgY3Vyc29yID0gcHJvZmlsZS5jdXJzb3IoKTtcblx0XHR2YXIgaXNVbmFyeSA9IGFiYnJVdGlscy5pc1VuYXJ5KGl0ZW0pO1xuXHRcdHZhciBzZWxmQ2xvc2luZyA9IHByb2ZpbGUuc2VsZl9jbG9zaW5nX3RhZyAmJiBpc1VuYXJ5ID8gJy8nIDogJyc7XG5cdFx0dmFyIHN0YXJ0PSAnJztcblxuXHRcdC8vIGRlZmluZSB0YWcgbmFtZVxuXHRcdHZhciB0YWdOYW1lID0gJyUnICsgcHJvZmlsZS50YWdOYW1lKGl0ZW0ubmFtZSgpKTtcblx0XHRpZiAodGFnTmFtZS50b0xvd2VyQ2FzZSgpID09ICclZGl2JyAmJiBhdHRycyAmJiBhdHRycy5pbmRleE9mKCd7JykgPT0gLTEpXG5cdFx0XHQvLyBvbWl0IGRpdiB0YWdcblx0XHRcdHRhZ05hbWUgPSAnJztcblxuXHRcdGl0ZW0uZW5kID0gJyc7XG5cdFx0c3RhcnQgPSB0YWdOYW1lICsgYXR0cnMgKyBzZWxmQ2xvc2luZyArICcgJztcblxuXHRcdHZhciBwbGFjZWhvbGRlciA9ICclcyc7XG5cdFx0Ly8gV2UgY2FuJ3QganVzdCByZXBsYWNlIHBsYWNlaG9sZGVyIHdpdGggbmV3IHZhbHVlIGJlY2F1c2Vcblx0XHQvLyBKYXZhU2NyaXB0IHdpbGwgdHJlYXQgZG91YmxlICQgY2hhcmFjdGVyIGFzIGEgc2luZ2xlIG9uZSwgYXNzdW1pbmdcblx0XHQvLyB3ZSdyZSB1c2luZyBSZWdFeHAgbGl0ZXJhbC5cblx0XHRpdGVtLnN0YXJ0ID0gdXRpbHMucmVwbGFjZVN1YnN0cmluZyhpdGVtLnN0YXJ0LCBzdGFydCwgaXRlbS5zdGFydC5pbmRleE9mKHBsYWNlaG9sZGVyKSwgcGxhY2Vob2xkZXIpO1xuXG5cdFx0aWYgKCFpdGVtLmNoaWxkcmVuLmxlbmd0aCAmJiAhaXNVbmFyeSlcblx0XHRcdGl0ZW0uc3RhcnQgKz0gY3Vyc29yO1xuXG5cdFx0cmV0dXJuIGl0ZW07XG5cdH1cblxuXHQvKipcblx0ICogUHJvY2Vzc2VzIHNpbXBsaWZpZWQgdHJlZSwgbWFraW5nIGl0IHN1aXRhYmxlIGZvciBvdXRwdXQgYXMgSFRNTCBzdHJ1Y3R1cmVcblx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSB0cmVlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9maWxlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBsZXZlbCBEZXB0aCBsZXZlbFxuXHQgKi9cblx0cmVxdWlyZSgnZmlsdGVycycpLmFkZCgnaGFtbCcsIGZ1bmN0aW9uIHByb2Nlc3ModHJlZSwgcHJvZmlsZSwgbGV2ZWwpIHtcblx0XHRsZXZlbCA9IGxldmVsIHx8IDA7XG5cdFx0dmFyIGFiYnJVdGlscyA9IHJlcXVpcmUoJ2FiYnJldmlhdGlvblV0aWxzJyk7XG5cblx0XHRpZiAoIWxldmVsKSB7XG5cdFx0XHR0cmVlID0gcmVxdWlyZSgnZmlsdGVycycpLmFwcGx5KHRyZWUsICdfZm9ybWF0JywgcHJvZmlsZSk7XG5cdFx0fVxuXG5cdFx0Xy5lYWNoKHRyZWUuY2hpbGRyZW4sIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdGlmICghYWJiclV0aWxzLmlzU25pcHBldChpdGVtKSlcblx0XHRcdFx0cHJvY2Vzc1RhZyhpdGVtLCBwcm9maWxlLCBsZXZlbCk7XG5cblx0XHRcdHByb2Nlc3MoaXRlbSwgcHJvZmlsZSwgbGV2ZWwgKyAxKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiB0cmVlO1xuXHR9KTtcbn0pOy8qKlxuICogRmlsdGVyIHRoYXQgcHJvZHVjZXMgSFRNTCB0cmVlXG4gKiBAYXV0aG9yIFNlcmdleSBDaGlrdXlvbm9rIChzZXJnZS5jaGVAZ21haWwuY29tKVxuICogQGxpbmsgaHR0cDovL2NoaWt1eW9ub2sucnVcbiAqIEBjb25zdHJ1Y3RvclxuICogQG1lbWJlck9mIF9faHRtbEZpbHRlckRlZmluZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmV4ZWMoZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHQvKipcblx0ICogQ3JlYXRlcyBIVE1MIGF0dHJpYnV0ZXMgc3RyaW5nIGZyb20gdGFnIGFjY29yZGluZyB0byBwcm9maWxlIHNldHRpbmdzXG5cdCAqIEBwYXJhbSB7QWJicmV2aWF0aW9uTm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge091dHB1dFByb2ZpbGV9IHByb2ZpbGVcblx0ICovXG5cdGZ1bmN0aW9uIG1ha2VBdHRyaWJ1dGVzU3RyaW5nKG5vZGUsIHByb2ZpbGUpIHtcblx0XHR2YXIgYXR0clF1b3RlID0gcHJvZmlsZS5hdHRyaWJ1dGVRdW90ZSgpO1xuXHRcdHZhciBjdXJzb3IgPSBwcm9maWxlLmN1cnNvcigpO1xuXG5cdFx0cmV0dXJuIF8ubWFwKG5vZGUuYXR0cmlidXRlTGlzdCgpLCBmdW5jdGlvbihhKSB7XG5cdFx0XHR2YXIgYXR0ck5hbWUgPSBwcm9maWxlLmF0dHJpYnV0ZU5hbWUoYS5uYW1lKTtcblx0XHRcdHJldHVybiAnICcgKyBhdHRyTmFtZSArICc9JyArIGF0dHJRdW90ZSArIChhLnZhbHVlIHx8IGN1cnNvcikgKyBhdHRyUXVvdGU7XG5cdFx0fSkuam9pbignJyk7XG5cdH1cblxuXHQvKipcblx0ICogUHJvY2Vzc2VzIGVsZW1lbnQgd2l0aCA8Y29kZT50YWc8L2NvZGU+IHR5cGVcblx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBpdGVtXG5cdCAqIEBwYXJhbSB7T3V0cHV0UHJvZmlsZX0gcHJvZmlsZVxuXHQgKiBAcGFyYW0ge051bWJlcn0gbGV2ZWwgRGVwdGggbGV2ZWxcblx0ICovXG5cdGZ1bmN0aW9uIHByb2Nlc3NUYWcoaXRlbSwgcHJvZmlsZSwgbGV2ZWwpIHtcblx0XHRpZiAoIWl0ZW0ucGFyZW50KSAvLyBsb29rcyBsaWtlIGl0J3Mgcm9vdCBlbGVtZW50XG5cdFx0XHRyZXR1cm4gaXRlbTtcblxuXHRcdHZhciBhYmJyVXRpbHMgPSByZXF1aXJlKCdhYmJyZXZpYXRpb25VdGlscycpO1xuXHRcdHZhciB1dGlscyA9IHJlcXVpcmUoJ3V0aWxzJyk7XG5cblx0XHR2YXIgYXR0cnMgPSBtYWtlQXR0cmlidXRlc1N0cmluZyhpdGVtLCBwcm9maWxlKTtcblx0XHR2YXIgY3Vyc29yID0gcHJvZmlsZS5jdXJzb3IoKTtcblx0XHR2YXIgaXNVbmFyeSA9IGFiYnJVdGlscy5pc1VuYXJ5KGl0ZW0pO1xuXHRcdHZhciBzdGFydD0gJyc7XG5cdFx0dmFyIGVuZCA9ICcnO1xuXG5cdFx0Ly8gZGVmaW5lIG9wZW5pbmcgYW5kIGNsb3NpbmcgdGFnc1xuXHRcdGlmICghaXRlbS5pc1RleHROb2RlKCkpIHtcblx0XHRcdHZhciB0YWdOYW1lID0gcHJvZmlsZS50YWdOYW1lKGl0ZW0ubmFtZSgpKTtcblx0XHRcdGlmIChpc1VuYXJ5KSB7XG5cdFx0XHRcdHN0YXJ0ID0gJzwnICsgdGFnTmFtZSArIGF0dHJzICsgcHJvZmlsZS5zZWxmQ2xvc2luZygpICsgJz4nO1xuXHRcdFx0XHRpdGVtLmVuZCA9ICcnO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3RhcnQgPSAnPCcgKyB0YWdOYW1lICsgYXR0cnMgKyAnPic7XG5cdFx0XHRcdGVuZCA9ICc8LycgKyB0YWdOYW1lICsgJz4nO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZhciBwbGFjZWhvbGRlciA9ICclcyc7XG5cdFx0Ly8gV2UgY2FuJ3QganVzdCByZXBsYWNlIHBsYWNlaG9sZGVyIHdpdGggbmV3IHZhbHVlIGJlY2F1c2Vcblx0XHQvLyBKYXZhU2NyaXB0IHdpbGwgdHJlYXQgZG91YmxlICQgY2hhcmFjdGVyIGFzIGEgc2luZ2xlIG9uZSwgYXNzdW1pbmdcblx0XHQvLyB3ZSdyZSB1c2luZyBSZWdFeHAgbGl0ZXJhbC5cblx0XHRpdGVtLnN0YXJ0ID0gdXRpbHMucmVwbGFjZVN1YnN0cmluZyhpdGVtLnN0YXJ0LCBzdGFydCwgaXRlbS5zdGFydC5pbmRleE9mKHBsYWNlaG9sZGVyKSwgcGxhY2Vob2xkZXIpO1xuXHRcdGl0ZW0uZW5kID0gdXRpbHMucmVwbGFjZVN1YnN0cmluZyhpdGVtLmVuZCwgZW5kLCBpdGVtLmVuZC5pbmRleE9mKHBsYWNlaG9sZGVyKSwgcGxhY2Vob2xkZXIpO1xuXG5cdFx0Ly8gc2hvdWxkIHdlIHB1dCBjYXJldCBwbGFjZWhvbGRlciBhZnRlciBvcGVuaW5nIHRhZz9cblx0XHRpZiAoXG5cdFx0XHRcdCFpdGVtLmNoaWxkcmVuLmxlbmd0aFxuXHRcdFx0XHQmJiAhaXNVbmFyeVxuXHRcdFx0XHQmJiAhfml0ZW0uY29udGVudC5pbmRleE9mKGN1cnNvcilcblx0XHRcdFx0JiYgIXJlcXVpcmUoJ3RhYlN0b3BzJykuZXh0cmFjdChpdGVtLmNvbnRlbnQpLnRhYnN0b3BzLmxlbmd0aFxuXHRcdFx0KSB7XG5cdFx0XHRpdGVtLnN0YXJ0ICs9IGN1cnNvcjtcblx0XHR9XG5cblx0XHRyZXR1cm4gaXRlbTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQcm9jZXNzZXMgc2ltcGxpZmllZCB0cmVlLCBtYWtpbmcgaXQgc3VpdGFibGUgZm9yIG91dHB1dCBhcyBIVE1MIHN0cnVjdHVyZVxuXHQgKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IHRyZWVcblx0ICogQHBhcmFtIHtPYmplY3R9IHByb2ZpbGVcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIERlcHRoIGxldmVsXG5cdCAqL1xuXHRyZXF1aXJlKCdmaWx0ZXJzJykuYWRkKCdodG1sJywgZnVuY3Rpb24gcHJvY2Vzcyh0cmVlLCBwcm9maWxlLCBsZXZlbCkge1xuXHRcdGxldmVsID0gbGV2ZWwgfHwgMDtcblx0XHR2YXIgYWJiclV0aWxzID0gcmVxdWlyZSgnYWJicmV2aWF0aW9uVXRpbHMnKTtcblxuXHRcdGlmICghbGV2ZWwpIHtcblx0XHRcdHRyZWUgPSByZXF1aXJlKCdmaWx0ZXJzJykuYXBwbHkodHJlZSwgJ19mb3JtYXQnLCBwcm9maWxlKTtcblx0XHR9XG5cblx0XHRfLmVhY2godHJlZS5jaGlsZHJlbiwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0aWYgKCFhYmJyVXRpbHMuaXNTbmlwcGV0KGl0ZW0pKVxuXHRcdFx0XHRwcm9jZXNzVGFnKGl0ZW0sIHByb2ZpbGUsIGxldmVsKTtcblxuXHRcdFx0cHJvY2VzcyhpdGVtLCBwcm9maWxlLCBsZXZlbCArIDEpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHRyZWU7XG5cdH0pO1xufSk7LyoqXG4gKiBPdXRwdXQgYWJicmV2aWF0aW9uIG9uIGEgc2luZ2xlIGxpbmUgKGkuZS4gbm8gbGluZSBicmVha3MpXG4gKiBAYXV0aG9yIFNlcmdleSBDaGlrdXlvbm9rIChzZXJnZS5jaGVAZ21haWwuY29tKVxuICogQGxpbmsgaHR0cDovL2NoaWt1eW9ub2sucnVcbiAqIEBjb25zdHJ1Y3RvclxuICogQG1lbWJlck9mIF9fc2luZ2xlTGluZUZpbHRlckRlZmluZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmV4ZWMoZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHR2YXIgcmVQYWQgPSAvXlxccysvO1xuXHR2YXIgcmVObCA9IC9bXFxuXFxyXS9nO1xuXG5cdHJlcXVpcmUoJ2ZpbHRlcnMnKS5hZGQoJ3MnLCBmdW5jdGlvbiBwcm9jZXNzKHRyZWUsIHByb2ZpbGUsIGxldmVsKSB7XG5cdFx0dmFyIGFiYnJVdGlscyA9IHJlcXVpcmUoJ2FiYnJldmlhdGlvblV0aWxzJyk7XG5cblx0XHRfLmVhY2godHJlZS5jaGlsZHJlbiwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0aWYgKCFhYmJyVXRpbHMuaXNTbmlwcGV0KGl0ZW0pKSB7XG5cdFx0XHRcdC8vIHJlbW92ZSBwYWRkaW5nIGZyb20gaXRlbVxuXHRcdFx0XHRpdGVtLnN0YXJ0ID0gaXRlbS5zdGFydC5yZXBsYWNlKHJlUGFkLCAnJyk7XG5cdFx0XHRcdGl0ZW0uZW5kID0gaXRlbS5lbmQucmVwbGFjZShyZVBhZCwgJycpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyByZW1vdmUgbmV3bGluZXNcblx0XHRcdGl0ZW0uc3RhcnQgPSBpdGVtLnN0YXJ0LnJlcGxhY2UocmVObCwgJycpO1xuXHRcdFx0aXRlbS5lbmQgPSBpdGVtLmVuZC5yZXBsYWNlKHJlTmwsICcnKTtcblx0XHRcdGl0ZW0uY29udGVudCA9IGl0ZW0uY29udGVudC5yZXBsYWNlKHJlTmwsICcnKTtcblxuXHRcdFx0cHJvY2VzcyhpdGVtKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiB0cmVlO1xuXHR9KTtcbn0pO1xuLyoqXG4gKiBUcmltIGZpbHRlcjogcmVtb3ZlcyBjaGFyYWN0ZXJzIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHRleHRcbiAqIGNvbnRlbnQgdGhhdCBpbmRpY2F0ZXMgbGlzdHM6IG51bWJlcnMsICMsICosIC0sIGV0Yy5cbiAqXG4gKiBVc2VmdWwgZm9yIHdyYXBwaW5nIGxpc3RzIHdpdGggYWJicmV2aWF0aW9uLlxuICpcbiAqIEBhdXRob3IgU2VyZ2V5IENoaWt1eW9ub2sgKHNlcmdlLmNoZUBnbWFpbC5jb20pXG4gKiBAbGluayBodHRwOi8vY2hpa3V5b25vay5ydVxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQG1lbWJlck9mIF9fdHJpbUZpbHRlckRlZmluZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKi9cbmVtbWV0LmV4ZWMoZnVuY3Rpb24ocmVxdWlyZSwgXykge1xuXHRyZXF1aXJlKCdwcmVmZXJlbmNlcycpLmRlZmluZSgnZmlsdGVyLnRyaW1SZWdleHAnLCAnW1xcXFxzfFxcXFx1MDBhMF0qW1xcXFxkfCN8XFxcXC18XFwqfFxcXFx1MjAyMl0rXFxcXC4/XFxcXHMqJyxcblx0XHRcdCdSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byByZW1vdmUgbGlzdCBtYXJrZXJzIChudW1iZXJzLCBkYXNoZXMsICdcblx0XHRcdCsgJ2J1bGxldHMsIGV0Yy4pIGluIDxjb2RlPnQ8L2NvZGU+ICh0cmltKSBmaWx0ZXIuIFRoZSB0cmltIGZpbHRlciAnXG5cdFx0XHQrICdpcyB1c2VmdWwgZm9yIHdyYXBwaW5nIHdpdGggYWJicmV2aWF0aW9uIGxpc3RzLCBwYXNlZCBmcm9tIG90aGVyICdcblx0XHRcdCsgJ2RvY3VtZW50cyAoZm9yIGV4YW1wbGUsIFdvcmQgZG9jdW1lbnRzKS4nKTtcblxuXHRmdW5jdGlvbiBwcm9jZXNzKHRyZWUsIHJlKSB7XG5cdFx0Xy5lYWNoKHRyZWUuY2hpbGRyZW4sIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdGlmIChpdGVtLmNvbnRlbnQpXG5cdFx0XHRcdGl0ZW0uY29udGVudCA9IGl0ZW0uY29udGVudC5yZXBsYWNlKHJlLCAnJyk7XG5cblx0XHRcdHByb2Nlc3MoaXRlbSwgcmUpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHRyZWU7XG5cdH1cblxuXHRyZXF1aXJlKCdmaWx0ZXJzJykuYWRkKCd0JywgZnVuY3Rpb24odHJlZSkge1xuXHRcdHZhciByZSA9IG5ldyBSZWdFeHAocmVxdWlyZSgncHJlZmVyZW5jZXMnKS5nZXQoJ2ZpbHRlci50cmltUmVnZXhwJykpO1xuXHRcdHJldHVybiBwcm9jZXNzKHRyZWUsIHJlKTtcblx0fSk7XG59KTtcbi8qKlxuICogRmlsdGVyIGZvciB0cmltbWluZyBcInNlbGVjdFwiIGF0dHJpYnV0ZXMgZnJvbSBzb21lIHRhZ3MgdGhhdCBjb250YWluc1xuICogY2hpbGQgZWxlbWVudHNcbiAqIEBhdXRob3IgU2VyZ2V5IENoaWt1eW9ub2sgKHNlcmdlLmNoZUBnbWFpbC5jb20pXG4gKiBAbGluayBodHRwOi8vY2hpa3V5b25vay5ydVxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQG1lbWJlck9mIF9feHNsRmlsdGVyRGVmaW5lXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXF1aXJlXG4gKiBAcGFyYW0ge1VuZGVyc2NvcmV9IF9cbiAqL1xuZW1tZXQuZXhlYyhmdW5jdGlvbihyZXF1aXJlLCBfKSB7XG5cdHZhciB0YWdzID0ge1xuXHRcdCd4c2w6dmFyaWFibGUnOiAxLFxuXHRcdCd4c2w6d2l0aC1wYXJhbSc6IDFcblx0fTtcblxuXHQvKipcblx0ICogUmVtb3ZlcyBcInNlbGVjdFwiIGF0dHJpYnV0ZSBmcm9tIG5vZGVcblx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSBub2RlXG5cdCAqL1xuXHRmdW5jdGlvbiB0cmltQXR0cmlidXRlKG5vZGUpIHtcblx0XHRub2RlLnN0YXJ0ID0gbm9kZS5zdGFydC5yZXBsYWNlKC9cXHMrc2VsZWN0XFxzKj1cXHMqKFsnXCJdKS4qP1xcMS8sICcnKTtcblx0fVxuXG5cdHJlcXVpcmUoJ2ZpbHRlcnMnKS5hZGQoJ3hzbCcsIGZ1bmN0aW9uIHByb2Nlc3ModHJlZSkge1xuXHRcdHZhciBhYmJyVXRpbHMgPSByZXF1aXJlKCdhYmJyZXZpYXRpb25VdGlscycpO1xuXHRcdF8uZWFjaCh0cmVlLmNoaWxkcmVuLCBmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRpZiAoIWFiYnJVdGlscy5pc1NuaXBwZXQoaXRlbSlcblx0XHRcdFx0XHQmJiAoaXRlbS5uYW1lKCkgfHwgJycpLnRvTG93ZXJDYXNlKCkgaW4gdGFnc1xuXHRcdFx0XHRcdCYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKVxuXHRcdFx0XHR0cmltQXR0cmlidXRlKGl0ZW0pO1xuXHRcdFx0cHJvY2VzcyhpdGVtKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiB0cmVlO1xuXHR9KTtcbn0pOy8qKlxuICogXCJMb3JlbSBpcHN1bVwiIHRleHQgZ2VuZXJhdG9yLiBNYXRjaGVzIDxjb2RlPmxpcHN1bShudW0pPzwvY29kZT4gb3JcbiAqIDxjb2RlPmxvcmVtKG51bSk/PC9jb2RlPiBhYmJyZXZpYXRpb24uXG4gKiBUaGlzIGNvZGUgaXMgYmFzZWQgb24gRGphbmdvJ3MgY29udHJpYnV0aW9uOlxuICogaHR0cHM6Ly9jb2RlLmRqYW5nb3Byb2plY3QuY29tL2Jyb3dzZXIvZGphbmdvL3RydW5rL2RqYW5nby9jb250cmliL3dlYmRlc2lnbi9sb3JlbV9pcHN1bS5weVxuICogPGJyPjxicj5cbiAqIEV4YW1wbGVzIHRvIHRlc3Q6PGJyPlxuICogPGNvZGU+bGlwc3VtPC9jb2RlPiDigJMgZ2VuZXJhdGVzIDMwIHdvcmRzIHRleHQuPGJyPlxuICogPGNvZGU+bGlwc3VtKjY8L2NvZGU+IOKAkyBnZW5lcmF0ZXMgNiBwYXJhZ3JhcGhzIChhdXRvd3JhcHBlZCB3aXRoICZsdDtwJmd0OyBlbGVtZW50KSBvZiB0ZXh0Ljxicj5cbiAqIDxjb2RlPm9sPmxpcHN1bTEwKjU8L2NvZGU+IOKAlCBnZW5lcmF0ZXMgb3JkZXJlZCBsaXN0IHdpdGggNSBsaXN0IGl0ZW1zIChhdXRvd3JhcHBlZCB3aXRoICZsdDtsaSZndDsgdGFnKVxuICogd2l0aCB0ZXh0IG9mIDEwIHdvcmRzIG9uIGVhY2ggbGluZTxicj5cbiAqIDxjb2RlPnNwYW4qMz5saXBzdW0yMDwvY29kZT4g4oCTIGdlbmVyYXRlcyAzIHBhcmFncmFwaHMgb2YgMjAtd29yZHMgdGV4dCwgZWFjaCB3cmFwcGVkIHdpdGggJmx0O3NwYW4mZ3Q7IGVsZW1lbnQgLlxuICogRWFjaCBwYXJhZ3JhcGggcGhyYXNlIGlzIHVuaXF1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVxdWlyZVxuICogQHBhcmFtIHtVbmRlcnNjb3JlfSBfXG4gKiBAY29uc3RydWN0b3JcbiAqIEBtZW1iZXJPZiBfX2xvcmVtSXBzdW1HZW5lcmF0b3JEZWZpbmVcbiAqL1xuZW1tZXQuZGVmaW5lKCdsb3JlbScsIGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcblx0dmFyIGxhbmdzID0ge1xuXHRcdGVuOiB7XG5cdFx0XHRjb21tb246IFsnbG9yZW0nLCAnaXBzdW0nLCAnZG9sb3InLCAnc2l0JywgJ2FtZXQnLCAnY29uc2VjdGV0dXInLCAnYWRpcGlzaWNpbmcnLCAnZWxpdCddLFxuXHRcdFx0d29yZHM6IFsnZXhlcmNpdGF0aW9uZW0nLCAncGVyZmVyZW5kaXMnLCAncGVyc3BpY2lhdGlzJywgJ2xhYm9ydW0nLCAnZXZlbmlldCcsXG5cdCAgICAgICAgICAgICAnc3VudCcsICdpdXJlJywgJ25hbScsICdub2JpcycsICdldW0nLCAnY3VtJywgJ29mZmljaWlzJywgJ2V4Y2VwdHVyaScsXG5cdCAgICAgICAgICAgICAnb2RpbycsICdjb25zZWN0ZXR1cicsICdxdWFzaScsICdhdXQnLCAncXVpc3F1YW0nLCAndmVsJywgJ2VsaWdlbmRpJyxcblx0ICAgICAgICAgICAgICdpdGFxdWUnLCAnbm9uJywgJ29kaXQnLCAndGVtcG9yZScsICdxdWFlcmF0JywgJ2RpZ25pc3NpbW9zJyxcblx0ICAgICAgICAgICAgICdmYWNpbGlzJywgJ25lcXVlJywgJ25paGlsJywgJ2V4cGVkaXRhJywgJ3ZpdGFlJywgJ3Zlcm8nLCAnaXBzdW0nLFxuXHQgICAgICAgICAgICAgJ25pc2knLCAnYW5pbWknLCAnY3VtcXVlJywgJ3BhcmlhdHVyJywgJ3ZlbGl0JywgJ21vZGknLCAnbmF0dXMnLFxuXHQgICAgICAgICAgICAgJ2l1c3RvJywgJ2VhcXVlJywgJ3NlcXVpJywgJ2lsbG8nLCAnc2VkJywgJ2V4JywgJ2V0JywgJ3ZvbHVwdGF0aWJ1cycsXG5cdCAgICAgICAgICAgICAndGVtcG9yYScsICd2ZXJpdGF0aXMnLCAncmF0aW9uZScsICdhc3N1bWVuZGEnLCAnaW5jaWR1bnQnLCAnbm9zdHJ1bScsXG5cdCAgICAgICAgICAgICAncGxhY2VhdCcsICdhbGlxdWlkJywgJ2Z1Z2EnLCAncHJvdmlkZW50JywgJ3ByYWVzZW50aXVtJywgJ3JlbScsXG5cdCAgICAgICAgICAgICAnbmVjZXNzaXRhdGlidXMnLCAnc3VzY2lwaXQnLCAnYWRpcGlzY2knLCAncXVpZGVtJywgJ3Bvc3NpbXVzJyxcblx0ICAgICAgICAgICAgICd2b2x1cHRhcycsICdkZWJpdGlzJywgJ3NpbnQnLCAnYWNjdXNhbnRpdW0nLCAndW5kZScsICdzYXBpZW50ZScsXG5cdCAgICAgICAgICAgICAndm9sdXB0YXRlJywgJ3F1aScsICdhc3Blcm5hdHVyJywgJ2xhdWRhbnRpdW0nLCAnc29sdXRhJywgJ2FtZXQnLFxuXHQgICAgICAgICAgICAgJ3F1bycsICdhbGlxdWFtJywgJ3NhZXBlJywgJ2N1bHBhJywgJ2xpYmVybycsICdpcHNhJywgJ2RpY3RhJyxcblx0ICAgICAgICAgICAgICdyZWljaWVuZGlzJywgJ25lc2NpdW50JywgJ2RvbG9yaWJ1cycsICdhdXRlbScsICdpbXBlZGl0JywgJ21pbmltYScsXG5cdCAgICAgICAgICAgICAnbWFpb3JlcycsICdyZXB1ZGlhbmRhZScsICdpcHNhbScsICdvYmNhZWNhdGknLCAndWxsYW0nLCAnZW5pbScsXG5cdCAgICAgICAgICAgICAndG90YW0nLCAnZGVsZWN0dXMnLCAnZHVjaW11cycsICdxdWlzJywgJ3ZvbHVwdGF0ZXMnLCAnZG9sb3JlcycsXG5cdCAgICAgICAgICAgICAnbW9sZXN0aWFlJywgJ2hhcnVtJywgJ2RvbG9yZW0nLCAncXVpYScsICd2b2x1cHRhdGVtJywgJ21vbGVzdGlhcycsXG5cdCAgICAgICAgICAgICAnbWFnbmknLCAnZGlzdGluY3RpbycsICdvbW5pcycsICdpbGx1bScsICdkb2xvcnVtJywgJ3ZvbHVwdGF0dW0nLCAnZWEnLFxuXHQgICAgICAgICAgICAgJ3F1YXMnLCAncXVhbScsICdjb3Jwb3JpcycsICdxdWFlJywgJ2JsYW5kaXRpaXMnLCAnYXRxdWUnLCAnZGVzZXJ1bnQnLFxuXHQgICAgICAgICAgICAgJ2xhYm9yaW9zYW0nLCAnZWFydW0nLCAnY29uc2VxdXVudHVyJywgJ2hpYycsICdjdXBpZGl0YXRlJyxcblx0ICAgICAgICAgICAgICdxdWlidXNkYW0nLCAnYWNjdXNhbXVzJywgJ3V0JywgJ3JlcnVtJywgJ2Vycm9yJywgJ21pbnVzJywgJ2VpdXMnLFxuXHQgICAgICAgICAgICAgJ2FiJywgJ2FkJywgJ25lbW8nLCAnZnVnaXQnLCAnb2ZmaWNpYScsICdhdCcsICdpbicsICdpZCcsICdxdW9zJyxcblx0ICAgICAgICAgICAgICdyZXByZWhlbmRlcml0JywgJ251bXF1YW0nLCAnaXN0ZScsICdmdWdpYXQnLCAnc2l0JywgJ2ludmVudG9yZScsXG5cdCAgICAgICAgICAgICAnYmVhdGFlJywgJ3JlcGVsbGVuZHVzJywgJ21hZ25hbScsICdyZWN1c2FuZGFlJywgJ3F1b2QnLCAnZXhwbGljYWJvJyxcblx0ICAgICAgICAgICAgICdkb2xvcmVtcXVlJywgJ2FwZXJpYW0nLCAnY29uc2VxdWF0dXInLCAnYXNwZXJpb3JlcycsICdjb21tb2RpJyxcblx0ICAgICAgICAgICAgICdvcHRpbycsICdkb2xvcicsICdsYWJvcmUnLCAndGVtcG9yaWJ1cycsICdyZXBlbGxhdCcsICd2ZW5pYW0nLFxuXHQgICAgICAgICAgICAgJ2FyY2hpdGVjdG8nLCAnZXN0JywgJ2Vzc2UnLCAnbW9sbGl0aWEnLCAnbnVsbGEnLCAnYScsICdzaW1pbGlxdWUnLFxuXHQgICAgICAgICAgICAgJ2VvcycsICdhbGlhcycsICdkb2xvcmUnLCAndGVuZXR1cicsICdkZWxlbml0aScsICdwb3JybycsICdmYWNlcmUnLFxuXHQgICAgICAgICAgICAgJ21heGltZScsICdjb3JydXB0aSddXG5cdFx0fSxcblx0XHRydToge1xuXHRcdFx0Y29tbW9uOiBbJ9C00LDQu9C10LrQvi3QtNCw0LvQtdC60L4nLCAn0LfQsCcsICfRgdC70L7QstC10YHQvdGL0LzQuCcsICfQs9C+0YDQsNC80LgnLCAn0LIg0YHRgtGA0LDQvdC1JywgJ9Cz0LvQsNGB0L3Ri9GFJywgJ9C4INGB0L7Qs9C70LDRgdC90YvRhScsICfQttC40LLRg9GCJywgJ9GA0YvQsdC90YvQtScsICfRgtC10LrRgdGC0YsnXSxcblx0XHRcdHdvcmRzOiBbJ9Cy0LTQsNC70LgnLCAn0L7RgiDQstGB0LXRhScsICfQvtC90LgnLCAn0LHRg9C60LLQtdC90L3Ri9GFJywgJ9C00L7QvNCw0YUnLCAn0L3QsCDQsdC10YDQtdCz0YMnLCAn0YHQtdC80LDQvdGC0LjQutCwJyxcblx0XHQgICAgICAgICAgICAn0LHQvtC70YzRiNC+0LPQvicsICfRj9C30YvQutC+0LLQvtCz0L4nLCAn0L7QutC10LDQvdCwJywgJ9C80LDQu9C10L3RjNC60LjQuScsICfRgNGD0YfQtdC10LonLCAn0LTQsNC70YwnLFxuXHRcdCAgICAgICAgICAgICfQttGD0YDRh9C40YInLCAn0L/QviDQstGB0LXQuScsICfQvtCx0LXRgdC/0LXRh9C40LLQsNC10YInLCAn0LXQtScsJ9Cy0YHQtdC80LgnLCAn0L3QtdC+0LHRhdC+0LTQuNC80YvQvNC4Jyxcblx0XHQgICAgICAgICAgICAn0L/RgNCw0LLQuNC70LDQvNC4JywgJ9GN0YLQsCcsICfQv9Cw0YDQsNC00LjQs9C80LDRgtC40YfQtdGB0LrQsNGPJywgJ9GB0YLRgNCw0L3QsCcsICfQutC+0YLQvtGA0L7QuScsICfQttCw0YDQtdC90L3Ri9C1Jyxcblx0XHQgICAgICAgICAgICAn0L/RgNC10LTQu9C+0LbQtdC90LjRjycsICfQt9Cw0LvQtdGC0LDRjtGCJywgJ9C/0YDRj9C80L4nLCAn0YDQvtGCJywgJ9C00LDQttC1JywgJ9Cy0YHQtdC80L7Qs9GD0YnQsNGPJyxcblx0XHQgICAgICAgICAgICAn0L/Rg9C90LrRgtGD0LDRhtC40Y8nLCAn0L3QtScsICfQuNC80LXQtdGCJywgJ9Cy0LvQsNGB0YLQuCcsICfQvdCw0LQnLCAn0YDRi9Cx0L3Ri9C80LgnLCAn0YLQtdC60YHRgtCw0LzQuCcsXG5cdFx0ICAgICAgICAgICAgJ9Cy0LXQtNGD0YnQuNC80LgnLCAn0LHQtdC30L7RgNGE0L7Qs9GA0LDRhNC40YfQvdGL0LknLCAn0L7QsdGA0LDQtycsICfQttC40LfQvdC4JywgJ9C+0LTQvdCw0LbQtNGLJywgJ9C+0LTQvdCwJyxcblx0XHQgICAgICAgICAgICAn0LzQsNC70LXQvdGM0LrQsNGPJywgJ9GB0YLRgNC+0YfQutCwJywn0YDRi9Cx0L3QvtCz0L4nLCAn0YLQtdC60YHRgtCwJywgJ9C40LzQtdC90LgnLCAnbG9yZW0nLCAnaXBzdW0nLFxuXHRcdCAgICAgICAgICAgICfRgNC10YjQuNC70LAnLCAn0LLRi9C50YLQuCcsICfQsdC+0LvRjNGI0L7QuScsICfQvNC40YAnLCAn0LPRgNCw0LzQvNCw0YLQuNC60LgnLCAn0LLQtdC70LjQutC40LknLCAn0L7QutGB0LzQvtC60YEnLFxuXHRcdCAgICAgICAgICAgICfQv9GA0LXQtNGD0L/RgNC10LbQtNCw0LsnLCAn0L4nLCAn0LfQu9GL0YUnLCAn0LfQsNC/0Y/RgtGL0YUnLCAn0LTQuNC60LjRhScsICfQt9C90LDQutCw0YUnLCAn0LLQvtC/0YDQvtGB0LAnLFxuXHRcdCAgICAgICAgICAgICfQutC+0LLQsNGA0L3Ri9GFJywgJ9GC0L7Rh9C60LDRhScsICfQt9Cw0L/Rj9GC0L7QuScsICfQvdC+JywgJ9GC0LXQutGB0YInLCAn0LTQsNC7JywgJ9GB0LHQuNGC0YwnLFxuXHRcdCAgICAgICAgICAgICfRgdC10LHRjycsICfRgtC+0LvQutGDJywgJ9C+0L0nLCAn0YHQvtCx0YDQsNC7JywgJ9GB0LXQvNGMJywgJ9GB0LLQvtC40YUnLCAn0LfQsNCz0LvQsNCy0L3Ri9GFJywgJ9Cx0YPQutCyJyxcblx0XHQgICAgICAgICAgICAn0L/QvtC00L/QvtGP0YHQsNC7JywgJ9C40L3QuNGG0LjQsNC7JywgJ9C30LAnLCAn0L/QvtGP0YEnLCAn0L/Rg9GB0YLQuNC70YHRjycsICfQtNC+0YDQvtCz0YMnLFxuXHRcdCAgICAgICAgICAgICfQstC30L7QsdGA0LDQstGI0LjRgdGMJywgJ9C/0LXRgNCy0YPRjicsICfQstC10YDRiNC40L3RgycsICfQutGD0YDRgdC40LLQvdGL0YUnLCAn0LPQvtGAJywgJ9Cx0YDQvtGB0LjQuycsXG5cdFx0ICAgICAgICAgICAgJ9C/0L7RgdC70LXQtNC90LjQuScsICfQstC30LPQu9GP0LQnLCAn0L3QsNC30LDQtCcsICfRgdC40LvRg9GN0YInLCAn0YHQstC+0LXQs9C+JywgJ9GA0L7QtNC90L7Qs9C+JywgJ9Cz0L7RgNC+0LTQsCcsXG5cdFx0ICAgICAgICAgICAgJ9Cx0YPQutCy0L7Qs9GA0LDQtCcsICfQt9Cw0LPQvtC70L7QstC+0LonLCAn0LTQtdGA0LXQstC90LgnLCAn0LDQu9GE0LDQstC40YInLCAn0L/QvtC00LfQsNCz0L7Qu9C+0LLQvtC6JywgJ9GB0LLQvtC10LPQvicsXG5cdFx0ICAgICAgICAgICAgJ9C/0LXRgNC10YPQu9C60LAnLCAn0LPRgNGD0YHRgtC90YvQuScsICfRgNC10YLQvtGA0LjRh9C10YHQutC40LknLCAn0LLQvtC/0YDQvtGBJywgJ9GB0LrQsNGC0LjQu9GB0Y8nLCAn0LXQs9C+Jyxcblx0XHQgICAgICAgICAgICAn0YnQtdC60LUnLCAn0L/RgNC+0LTQvtC70LbQuNC7JywgJ9GB0LLQvtC5JywgJ9C/0YPRgtGMJywgJ9C00L7RgNC+0LPQtScsICfQstGB0YLRgNC10YLQuNC7JywgJ9GA0YPQutC+0L/QuNGB0YwnLFxuXHRcdCAgICAgICAgICAgICfQvtC90LAnLCAn0L/RgNC10LTRg9C/0YDQtdC00LjQu9CwJywgICfQvNC+0LXQuScsICfQstGB0LUnLCAn0L/QtdGA0LXQv9C40YHRi9Cy0LDQtdGC0YHRjycsICfQvdC10YHQutC+0LvRjNC60L4nLFxuXHRcdCAgICAgICAgICAgICfRgNCw0LcnLCAn0LXQtNC40L3RgdGC0LLQtdC90L3QvtC1JywgJ9GH0YLQvicsICfQvNC10L3RjycsICfQvtGB0YLQsNC70L7RgdGMJywgJ9GN0YLQvicsICfQv9GA0LjRgdGC0LDQstC60LAnLFxuXHRcdCAgICAgICAgICAgICfQstC+0LfQstGA0LDRidCw0LnRgdGPJywgJ9GC0YsnLCAn0LvRg9GH0YjQtScsICfRgdCy0L7RjicsICfQsdC10LfQvtC/0LDRgdC90YPRjicsICfRgdGC0YDQsNC90YMnLCAn0L/QvtGB0LvRg9GI0LDQstGI0LjRgdGMJyxcblx0XHQgICAgICAgICAgICAn0YDRg9C60L7Qv9C40YHQuCcsICfQvdCw0YgnLCAn0L/RgNC+0LTQvtC70LbQuNC7JywgJ9GB0LLQvtC5JywgJ9C/0YPRgtGMJywgJ9Cy0YHQutC+0YDQtScsICfQtdC80YMnLFxuXHRcdCAgICAgICAgICAgICfQv9C+0LLRgdGC0YDQtdGH0LDQu9GB0Y8nLCAn0LrQvtCy0LDRgNC90YvQuScsICfRgdC+0YHRgtCw0LLQuNGC0LXQu9GMJywgJ9GA0LXQutC70LDQvNC90YvRhScsICfRgtC10LrRgdGC0L7QsicsXG5cdFx0ICAgICAgICAgICAgJ9C90LDQv9C+0LjQstGI0LjQuScsICfRj9C30YvQutC+0LwnLCAn0YDQtdGH0YzRjicsICfQt9Cw0LzQsNC90LjQstGI0LjQuScsICfRgdCy0L7QtScsICfQsNCz0LXQvdGB0YLQstC+Jyxcblx0XHQgICAgICAgICAgICAn0LrQvtGC0L7RgNC+0LUnLCAn0LjRgdC/0L7Qu9GM0LfQvtCy0LDQu9C+JywgJ9GB0L3QvtCy0LAnLCAn0YHQvdC+0LLQsCcsICfRgdCy0L7QuNGFJywgJ9C/0YDQvtC10LrRgtCw0YUnLFxuXHRcdCAgICAgICAgICAgICfQtdGB0LvQuCcsICfQv9C10YDQtdC/0LjRgdCw0LvQuCcsICfRgtC+JywgJ9C20LjQstC10YInLCAn0YLQsNC8JywgJ9C00L4nLCAn0YHQuNGFJywgJ9C/0L7RgCddXG5cdFx0fVxuXHR9O1xuXG5cdHZhciBwcmVmcyA9IHJlcXVpcmUoJ3ByZWZlcmVuY2VzJyk7XG5cdHByZWZzLmRlZmluZSgnbG9yZW0uZGVmYXVsdExhbmcnLCAnZW4nKTtcblxuXHQvKipcblx0ICogQHBhcmFtIHtBYmJyZXZpYXRpb25Ob2RlfSB0cmVlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRyZXF1aXJlKCdhYmJyZXZpYXRpb25QYXJzZXInKS5hZGRQcmVwcm9jZXNzb3IoZnVuY3Rpb24odHJlZSwgb3B0aW9ucykge1xuXHRcdHZhciByZSA9IC9eKD86bG9yZW18bGlwc3VtKShbYS16XXsyfSk/KFxcZCopJC9pLCBtYXRjaDtcblxuXHRcdC8qKiBAcGFyYW0ge0FiYnJldmlhdGlvbk5vZGV9IG5vZGUgKi9cblx0XHR0cmVlLmZpbmRBbGwoZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0aWYgKG5vZGUuX25hbWUgJiYgKG1hdGNoID0gbm9kZS5fbmFtZS5tYXRjaChyZSkpKSB7XG5cdFx0XHRcdHZhciB3b3JkQ291bmQgPSBtYXRjaFsyXSB8fCAzMDtcblx0XHRcdFx0dmFyIGxhbmcgPSBtYXRjaFsxXSB8fCBwcmVmcy5nZXQoJ2xvcmVtLmRlZmF1bHRMYW5nJykgfHwgJ2VuJztcblxuXHRcdFx0XHQvLyBmb3JjZSBub2RlIG5hbWUgcmVzb2x2aW5nIGlmIG5vZGUgc2hvdWxkIGJlIHJlcGVhdGVkXG5cdFx0XHRcdC8vIG9yIGNvbnRhaW5zIGF0dHJpYnV0ZXMuIEluIHRoaXMgY2FzZSwgbm9kZSBzaG91bGQgYmUgb3V0cHV0ZWRcblx0XHRcdFx0Ly8gYXMgdGFnLCBvdGhlcndpc2UgYXMgdGV4dC1vbmx5IG5vZGVcblx0XHRcdFx0bm9kZS5fbmFtZSA9ICcnO1xuXHRcdFx0XHRub2RlLmRhdGEoJ2ZvcmNlTmFtZVJlc29sdmluZycsIG5vZGUuaXNSZXBlYXRpbmcoKSB8fCBub2RlLmF0dHJpYnV0ZUxpc3QoKS5sZW5ndGgpO1xuXHRcdFx0XHRub2RlLmRhdGEoJ3Bhc3RlT3ZlcndyaXRlcycsIHRydWUpO1xuXHRcdFx0XHRub2RlLmRhdGEoJ3Bhc3RlJywgZnVuY3Rpb24oaSwgY29udGVudCkge1xuXHRcdFx0XHRcdHJldHVybiBwYXJhZ3JhcGgobGFuZywgd29yZENvdW5kLCAhaSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblxuXHQvKipcblx0ICogUmV0dXJucyByYW5kb20gaW50ZWdlciBiZXR3ZWVuIDxjb2RlPmZyb208L2NvZGU+IGFuZCA8Y29kZT50bzwvY29kZT4gdmFsdWVzXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBmcm9tXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB0b1xuXHQgKiBAcmV0dXJucyB7TnVtYmVyfVxuXHQgKi9cblx0ZnVuY3Rpb24gcmFuZGludChmcm9tLCB0bykge1xuXHRcdHJldHVybiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAodG8gLSBmcm9tKSArIGZyb20pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFyclxuXHQgKiBAcGFyYW0ge051bWJlcn0gY291bnRcblx0ICogQHJldHVybnMge0FycmF5fVxuXHQgKi9cblx0ZnVuY3Rpb24gc2FtcGxlKGFyciwgY291bnQpIHtcblx0XHR2YXIgbGVuID0gYXJyLmxlbmd0aDtcblx0XHR2YXIgaXRlcmF0aW9ucyA9IE1hdGgubWluKGxlbiwgY291bnQpO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR3aGlsZSAocmVzdWx0Lmxlbmd0aCA8IGl0ZXJhdGlvbnMpIHtcblx0XHRcdHZhciByYW5kSXggPSByYW5kaW50KDAsIGxlbiAtIDEpO1xuXHRcdFx0aWYgKCFfLmluY2x1ZGUocmVzdWx0LCByYW5kSXgpKVxuXHRcdFx0XHRyZXN1bHQucHVzaChyYW5kSXgpO1xuXHRcdH1cblxuXHRcdHJldHVybiBfLm1hcChyZXN1bHQsIGZ1bmN0aW9uKGl4KSB7XG5cdFx0XHRyZXR1cm4gYXJyW2l4XTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNob2ljZSh2YWwpIHtcblx0XHRpZiAoXy5pc1N0cmluZyh2YWwpKVxuXHRcdFx0cmV0dXJuIHZhbC5jaGFyQXQocmFuZGludCgwLCB2YWwubGVuZ3RoIC0gMSkpO1xuXG5cdFx0cmV0dXJuIHZhbFtyYW5kaW50KDAsIHZhbC5sZW5ndGggLSAxKV07XG5cdH1cblxuXHRmdW5jdGlvbiBzZW50ZW5jZSh3b3JkcywgZW5kKSB7XG5cdFx0aWYgKHdvcmRzLmxlbmd0aCkge1xuXHRcdFx0d29yZHNbMF0gPSB3b3Jkc1swXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmRzWzBdLnN1YnN0cmluZygxKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gd29yZHMuam9pbignICcpICsgKGVuZCB8fCBjaG9pY2UoJz8hLi4uJykpOyAvLyBtb3JlIGRvdHMgdGhhdCBxdWVzdGlvbiBtYXJrc1xuXHR9XG5cblx0LyoqXG5cdCAqIEluc2VydCBjb21tYXMgYXQgcmFuZG9tbHkgc2VsZWN0ZWQgd29yZHMuIFRoaXMgZnVuY3Rpb24gbW9kaWZpZXMgdmFsdWVzXG5cdCAqIGluc2lkZSA8Y29kZT53b3JkczwvY29kZT4gYXJyYXlcblx0ICogQHBhcmFtIHtBcnJheX0gd29yZHNcblx0ICovXG5cdGZ1bmN0aW9uIGluc2VydENvbW1hcyh3b3Jkcykge1xuXHRcdHZhciBsZW4gPSB3b3Jkcy5sZW5ndGg7XG5cdFx0dmFyIHRvdGFsQ29tbWFzID0gMDtcblxuXHRcdGlmIChsZW4gPiAzICYmIGxlbiA8PSA2KSB7XG5cdFx0XHR0b3RhbENvbW1hcyA9IHJhbmRpbnQoMCwgMSk7XG5cdFx0fSBlbHNlIGlmIChsZW4gPiA2ICYmIGxlbiA8PSAxMikge1xuXHRcdFx0dG90YWxDb21tYXMgPSByYW5kaW50KDAsIDIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0b3RhbENvbW1hcyA9IHJhbmRpbnQoMSwgNCk7XG5cdFx0fVxuXG5cdFx0Xy5lYWNoKF8ucmFuZ2UodG90YWxDb21tYXMpLCBmdW5jdGlvbihpeCkge1xuXHRcdFx0aWYgKGl4IDwgd29yZHMubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHR3b3Jkc1tpeF0gKz0gJywnO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdlbmVyYXRlIGEgcGFyYWdyYXBoIG9mIFwiTG9yZW0gaXBzdW1cIiB0ZXh0XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB3b3JkQ291bnQgV29yZHMgY291bnQgaW4gcGFyYWdyYXBoXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc3RhcnRXaXRoQ29tbW9uIFNob3VsZCBwYXJhZ3JhcGggc3RhcnQgd2l0aCBjb21tb25cblx0ICogXCJsb3JlbSBpcHN1bVwiIHNlbnRlbmNlLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gcGFyYWdyYXBoKGxhbmcsIHdvcmRDb3VudCwgc3RhcnRXaXRoQ29tbW9uKSB7XG5cdFx0dmFyIGRhdGEgPSBsYW5nc1tsYW5nXTtcblx0XHRpZiAoIWRhdGEpIHtcblx0XHRcdHJldHVybiAnJztcblx0XHR9XG5cblx0XHR2YXIgcmVzdWx0ID0gW107XG5cdFx0dmFyIHRvdGFsV29yZHMgPSAwO1xuXHRcdHZhciB3b3JkcztcblxuXHRcdHdvcmRDb3VudCA9IHBhcnNlSW50KHdvcmRDb3VudCwgMTApO1xuXG5cdFx0aWYgKHN0YXJ0V2l0aENvbW1vbiAmJiBkYXRhLmNvbW1vbikge1xuXHRcdFx0d29yZHMgPSBkYXRhLmNvbW1vbi5zbGljZSgwLCB3b3JkQ291bnQpO1xuXHRcdFx0aWYgKHdvcmRzLmxlbmd0aCA+IDUpXG5cdFx0XHRcdHdvcmRzWzRdICs9ICcsJztcblx0XHRcdHRvdGFsV29yZHMgKz0gd29yZHMubGVuZ3RoO1xuXHRcdFx0cmVzdWx0LnB1c2goc2VudGVuY2Uod29yZHMsICcuJykpO1xuXHRcdH1cblxuXHRcdHdoaWxlICh0b3RhbFdvcmRzIDwgd29yZENvdW50KSB7XG5cdFx0XHR3b3JkcyA9IHNhbXBsZShkYXRhLndvcmRzLCBNYXRoLm1pbihyYW5kaW50KDMsIDEyKSAqIHJhbmRpbnQoMSwgNSksIHdvcmRDb3VudCAtIHRvdGFsV29yZHMpKTtcblx0XHRcdHRvdGFsV29yZHMgKz0gd29yZHMubGVuZ3RoO1xuXHRcdFx0aW5zZXJ0Q29tbWFzKHdvcmRzKTtcblx0XHRcdHJlc3VsdC5wdXNoKHNlbnRlbmNlKHdvcmRzKSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdC5qb2luKCcgJyk7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdC8qKlxuXHRcdCAqIEFkZHMgbmV3IGxhbmd1YWdlIHdvcmRzIGZvciBMb3JlbSBJcHN1bSBnZW5lcmF0b3Jcblx0XHQgKiBAcGFyYW0ge1N0cmluZ30gbGFuZyBUd28tbGV0dGVyIGxhbmcgZGVmaW5pdGlvblxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFdvcmRzIGZvciBsYW5ndWFnZS4gTWFpZ2h0IGJlIGVpdGhlciBhIHNwYWNlLXNlcGFyYXRlZFxuXHRcdCAqIGxpc3Qgb2Ygd29yZHMgKFN0cmluZyksIEFycmF5IG9mIHdvcmRzIG9yIG9iamVjdCB3aXRoIDxjb2RlPnRleHQ8L2NvZGU+IGFuZFxuXHRcdCAqIDxjb2RlPmNvbW1vbjwvY29kZT4gcHJvcGVydGllc1xuXHRcdCAqL1xuXHRcdGFkZExhbmc6IGZ1bmN0aW9uKGxhbmcsIGRhdGEpIHtcblx0XHRcdGlmIChfLmlzU3RyaW5nKGRhdGEpKSB7XG5cdFx0XHRcdGRhdGEgPSB7d29yZHM6IF8uY29tcGFjdChkYXRhLnNwbGl0KCcgJykpfTtcblx0XHRcdH0gZWxzZSBpZiAoXy5pc0FycmF5KGRhdGEpKSB7XG5cdFx0XHRcdGRhdGEgPSB7d29yZHM6IGRhdGF9O1xuXHRcdFx0fVxuXG5cdFx0XHRsYW5nc1tsYW5nXSA9IGRhdGE7XG5cdFx0fVxuXHR9XG59KTsvKipcbiAqIEEgYmFjay1lbmQgYm9vdHN0cmFwIG1vZHVsZSB3aXRoIGNvbW1vbmx5IHVzZWQgbWV0aG9kcyBmb3IgbG9hZGluZyB1c2VyIGRhdGFcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlcXVpcmVcbiAqIEBwYXJhbSB7VW5kZXJzY29yZX0gX1xuICovXG5lbW1ldC5kZWZpbmUoJ2Jvb3RzdHJhcCcsIGZ1bmN0aW9uKHJlcXVpcmUsIF8pIHtcbnZhciBzbmlwcGV0cyA9IHtcblx0XCJ2YXJpYWJsZXNcIjoge1xuXHRcdFwibGFuZ1wiOiBcImVuXCIsXG5cdFx0XCJsb2NhbGVcIjogXCJlbi1VU1wiLFxuXHRcdFwiY2hhcnNldFwiOiBcIlVURi04XCIsXG5cdFx0XCJpbmRlbnRhdGlvblwiOiBcIlxcdFwiLFxuXHRcdFwibmV3bGluZVwiOiBcIlxcblwiXG5cdH0sXG5cblx0XCJjc3NcIjoge1xuXHRcdFwiZmlsdGVyc1wiOiBcImh0bWxcIixcblx0XHRcInNuaXBwZXRzXCI6IHtcblx0XHRcdFwiQGlcIjogXCJAaW1wb3J0IHVybCh8KTtcIixcblx0XHRcdFwiQGltcG9ydFwiOiBcIkBpbXBvcnQgdXJsKHwpO1wiLFxuXHRcdFx0XCJAbVwiOiBcIkBtZWRpYSAkezE6c2NyZWVufSB7XFxuXFx0fFxcbn1cIixcblx0XHRcdFwiQG1lZGlhXCI6IFwiQG1lZGlhICR7MTpzY3JlZW59IHtcXG5cXHR8XFxufVwiLFxuXHRcdFx0XCJAZlwiOiBcIkBmb250LWZhY2Uge1xcblxcdGZvbnQtZmFtaWx5Onw7XFxuXFx0c3JjOnVybCh8KTtcXG59XCIsXG5cdFx0XHRcIkBmK1wiOiBcIkBmb250LWZhY2Uge1xcblxcdGZvbnQtZmFtaWx5OiAnJHsxOkZvbnROYW1lfSc7XFxuXFx0c3JjOiB1cmwoJyR7MjpGaWxlTmFtZX0uZW90Jyk7XFxuXFx0c3JjOiB1cmwoJyR7MjpGaWxlTmFtZX0uZW90PyNpZWZpeCcpIGZvcm1hdCgnZW1iZWRkZWQtb3BlbnR5cGUnKSxcXG5cXHRcXHQgdXJsKCckezI6RmlsZU5hbWV9LndvZmYnKSBmb3JtYXQoJ3dvZmYnKSxcXG5cXHRcXHQgdXJsKCckezI6RmlsZU5hbWV9LnR0ZicpIGZvcm1hdCgndHJ1ZXR5cGUnKSxcXG5cXHRcXHQgdXJsKCckezI6RmlsZU5hbWV9LnN2ZyMkezE6Rm9udE5hbWV9JykgZm9ybWF0KCdzdmcnKTtcXG5cXHRmb250LXN0eWxlOiAkezM6bm9ybWFsfTtcXG5cXHRmb250LXdlaWdodDogJHs0Om5vcm1hbH07XFxufVwiLFxuXG5cdFx0XHRcIkBrZlwiOiBcIkAtd2Via2l0LWtleWZyYW1lcyAkezE6aWRlbnRpZmllcn0ge1xcblxcdCR7Mjpmcm9tfSB7ICR7M30gfSR7Nn1cXG5cXHQkezQ6dG99IHsgJHs1fSB9XFxufVxcbkAtby1rZXlmcmFtZXMgJHsxOmlkZW50aWZpZXJ9IHtcXG5cXHQkezI6ZnJvbX0geyAkezN9IH0kezZ9XFxuXFx0JHs0OnRvfSB7ICR7NX0gfVxcbn1cXG5ALW1vei1rZXlmcmFtZXMgJHsxOmlkZW50aWZpZXJ9IHtcXG5cXHQkezI6ZnJvbX0geyAkezN9IH0kezZ9XFxuXFx0JHs0OnRvfSB7ICR7NX0gfVxcbn1cXG5Aa2V5ZnJhbWVzICR7MTppZGVudGlmaWVyfSB7XFxuXFx0JHsyOmZyb219IHsgJHszfSB9JHs2fVxcblxcdCR7NDp0b30geyAkezV9IH1cXG59XCIsXG5cblxuXHRcdFx0XCJhbmltXCI6IFwiYW5pbWF0aW9uOnw7XCIsXG5cdFx0XHRcImFuaW0tXCI6IFwiYW5pbWF0aW9uOiR7MTpuYW1lfSAkezI6ZHVyYXRpb259ICR7Mzp0aW1pbmctZnVuY3Rpb259ICR7NDpkZWxheX0gJHs1Oml0ZXJhdGlvbi1jb3VudH0gJHs2OmRpcmVjdGlvbn0gJHs3OmZpbGwtbW9kZX07XCIsXG5cdFx0XHRcImFuaW1kZWxcIjogXCJhbmltYXRpb24tZGVsYXk6JHsxOnRpbWV9O1wiLFxuXG5cdFx0XHRcImFuaW1kaXJcIjogXCJhbmltYXRpb24tZGlyZWN0aW9uOiR7MTpub3JtYWx9O1wiLFxuXHRcdFx0XCJhbmltZGlyOm5cIjogXCJhbmltYXRpb24tZGlyZWN0aW9uOm5vcm1hbDtcIixcblx0XHRcdFwiYW5pbWRpcjpyXCI6IFwiYW5pbWF0aW9uLWRpcmVjdGlvbjpyZXZlcnNlO1wiLFxuXHRcdFx0XCJhbmltZGlyOmFcIjogXCJhbmltYXRpb24tZGlyZWN0aW9uOmFsdGVybmF0ZTtcIixcblx0XHRcdFwiYW5pbWRpcjphclwiOiBcImFuaW1hdGlvbi1kaXJlY3Rpb246YWx0ZXJuYXRlLXJldmVyc2U7XCIsXG5cblx0XHRcdFwiYW5pbWR1clwiOiBcImFuaW1hdGlvbi1kdXJhdGlvbjokezE6MH1zO1wiLFxuXG5cdFx0XHRcImFuaW1mbVwiOiBcImFuaW1hdGlvbi1maWxsLW1vZGU6JHsxOmJvdGh9O1wiLFxuXHRcdFx0XCJhbmltZm06ZlwiOiBcImFuaW1hdGlvbi1maWxsLW1vZGU6Zm9yd2FyZHM7XCIsXG5cdFx0XHRcImFuaW1mbTpiXCI6IFwiYW5pbWF0aW9uLWZpbGwtbW9kZTpiYWNrd2FyZHM7XCIsXG5cdFx0XHRcImFuaW1mbTpidFwiOiBcImFuaW1hdGlvbi1maWxsLW1vZGU6Ym90aDtcIixcblx0XHRcdFwiYW5pbWZtOmJoXCI6IFwiYW5pbWF0aW9uLWZpbGwtbW9kZTpib3RoO1wiLFxuXG5cdFx0XHRcImFuaW1pY1wiOiBcImFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6JHsxOjF9O1wiLFxuXHRcdFx0XCJhbmltaWM6aVwiOiBcImFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6aW5maW5pdGU7XCIsXG5cblx0XHRcdFwiYW5pbW5cIjogXCJhbmltYXRpb24tbmFtZTokezE6bm9uZX07XCIsXG5cblx0XHRcdFwiYW5pbXBzXCI6IFwiYW5pbWF0aW9uLXBsYXktc3RhdGU6JHsxOnJ1bm5pbmd9O1wiLFxuXHRcdFx0XCJhbmltcHM6cFwiOiBcImFuaW1hdGlvbi1wbGF5LXN0YXRlOnBhdXNlZDtcIixcblx0XHRcdFwiYW5pbXBzOnJcIjogXCJhbmltYXRpb24tcGxheS1zdGF0ZTpydW5uaW5nO1wiLFxuXG5cdFx0XHRcImFuaW10ZlwiOiBcImFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246JHsxOmxpbmVhcn07XCIsXG5cdFx0XHRcImFuaW10ZjplXCI6IFwiYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlO1wiLFxuXHRcdFx0XCJhbmltdGY6ZWlcIjogXCJhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW47XCIsXG5cdFx0XHRcImFuaW10Zjplb1wiOiBcImFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1vdXQ7XCIsXG5cdFx0XHRcImFuaW10ZjplaW9cIjogXCJhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW4tb3V0O1wiLFxuXHRcdFx0XCJhbmltdGY6bFwiOiBcImFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyO1wiLFxuXHRcdFx0XCJhbmltdGY6Y2JcIjogXCJhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigkezE6MC4xfSwgJHsyOjAuN30sICR7MzoxLjB9LCAkezM6MC4xfSk7XCIsXG5cblx0XHRcdFwiYXBcIjogXCJhcHBlYXJhbmNlOiR7bm9uZX07XCIsXG5cblx0XHRcdFwiIVwiOiBcIiFpbXBvcnRhbnRcIixcblx0XHRcdFwicG9zXCI6IFwicG9zaXRpb246JHsxOnJlbGF0aXZlfTtcIixcblx0XHRcdFwicG9zOnNcIjogXCJwb3NpdGlvbjpzdGF0aWM7XCIsXG5cdFx0XHRcInBvczphXCI6IFwicG9zaXRpb246YWJzb2x1dGU7XCIsXG5cdFx0XHRcInBvczpyXCI6IFwicG9zaXRpb246cmVsYXRpdmU7XCIsXG5cdFx0XHRcInBvczpmXCI6IFwicG9zaXRpb246Zml4ZWQ7XCIsXG5cdFx0XHRcInRcIjogXCJ0b3A6fDtcIixcblx0XHRcdFwidDphXCI6IFwidG9wOmF1dG87XCIsXG5cdFx0XHRcInJcIjogXCJyaWdodDp8O1wiLFxuXHRcdFx0XCJyOmFcIjogXCJyaWdodDphdXRvO1wiLFxuXHRcdFx0XCJiXCI6IFwiYm90dG9tOnw7XCIsXG5cdFx0XHRcImI6YVwiOiBcImJvdHRvbTphdXRvO1wiLFxuXHRcdFx0XCJsXCI6IFwibGVmdDp8O1wiLFxuXHRcdFx0XCJsOmFcIjogXCJsZWZ0OmF1dG87XCIsXG5cdFx0XHRcInpcIjogXCJ6LWluZGV4Onw7XCIsXG5cdFx0XHRcIno6YVwiOiBcInotaW5kZXg6YXV0bztcIixcblx0XHRcdFwiZmxcIjogXCJmbG9hdDokezE6bGVmdH07XCIsXG5cdFx0XHRcImZsOm5cIjogXCJmbG9hdDpub25lO1wiLFxuXHRcdFx0XCJmbDpsXCI6IFwiZmxvYXQ6bGVmdDtcIixcblx0XHRcdFwiZmw6clwiOiBcImZsb2F0OnJpZ2h0O1wiLFxuXHRcdFx0XCJjbFwiOiBcImNsZWFyOiR7MTpib3RofTtcIixcblx0XHRcdFwiY2w6blwiOiBcImNsZWFyOm5vbmU7XCIsXG5cdFx0XHRcImNsOmxcIjogXCJjbGVhcjpsZWZ0O1wiLFxuXHRcdFx0XCJjbDpyXCI6IFwiY2xlYXI6cmlnaHQ7XCIsXG5cdFx0XHRcImNsOmJcIjogXCJjbGVhcjpib3RoO1wiLFxuXG5cdFx0XHRcImNvbG1cIjogXCJjb2x1bW5zOnw7XCIsXG5cdFx0XHRcImNvbG1jXCI6IFwiY29sdW1uLWNvdW50Onw7XCIsXG5cdFx0XHRcImNvbG1mXCI6IFwiY29sdW1uLWZpbGw6fDtcIixcblx0XHRcdFwiY29sbWdcIjogXCJjb2x1bW4tZ2FwOnw7XCIsXG5cdFx0XHRcImNvbG1yXCI6IFwiY29sdW1uLXJ1bGU6fDtcIixcblx0XHRcdFwiY29sbXJjXCI6IFwiY29sdW1uLXJ1bGUtY29sb3I6fDtcIixcblx0XHRcdFwiY29sbXJzXCI6IFwiY29sdW1uLXJ1bGUtc3R5bGU6fDtcIixcblx0XHRcdFwiY29sbXJ3XCI6IFwiY29sdW1uLXJ1bGUtd2lkdGg6fDtcIixcblx0XHRcdFwiY29sbXNcIjogXCJjb2x1bW4tc3Bhbjp8O1wiLFxuXHRcdFx0XCJjb2xtd1wiOiBcImNvbHVtbi13aWR0aDp8O1wiLFxuXG5cdFx0XHRcImRcIjogXCJkaXNwbGF5OiR7MTpibG9ja307XCIsXG5cdFx0XHRcImQ6blwiOiBcImRpc3BsYXk6bm9uZTtcIixcblx0XHRcdFwiZDpiXCI6IFwiZGlzcGxheTpibG9jaztcIixcblx0XHRcdFwiZDppXCI6IFwiZGlzcGxheTppbmxpbmU7XCIsXG5cdFx0XHRcImQ6aWJcIjogXCJkaXNwbGF5OmlubGluZS1ibG9jaztcIixcblx0XHRcdFwiZDppYitcIjogXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuKmRpc3BsYXk6IGlubGluZTtcXG4qem9vbTogMTtcIixcblx0XHRcdFwiZDpsaVwiOiBcImRpc3BsYXk6bGlzdC1pdGVtO1wiLFxuXHRcdFx0XCJkOnJpXCI6IFwiZGlzcGxheTpydW4taW47XCIsXG5cdFx0XHRcImQ6Y3BcIjogXCJkaXNwbGF5OmNvbXBhY3Q7XCIsXG5cdFx0XHRcImQ6dGJcIjogXCJkaXNwbGF5OnRhYmxlO1wiLFxuXHRcdFx0XCJkOml0YlwiOiBcImRpc3BsYXk6aW5saW5lLXRhYmxlO1wiLFxuXHRcdFx0XCJkOnRiY3BcIjogXCJkaXNwbGF5OnRhYmxlLWNhcHRpb247XCIsXG5cdFx0XHRcImQ6dGJjbFwiOiBcImRpc3BsYXk6dGFibGUtY29sdW1uO1wiLFxuXHRcdFx0XCJkOnRiY2xnXCI6IFwiZGlzcGxheTp0YWJsZS1jb2x1bW4tZ3JvdXA7XCIsXG5cdFx0XHRcImQ6dGJoZ1wiOiBcImRpc3BsYXk6dGFibGUtaGVhZGVyLWdyb3VwO1wiLFxuXHRcdFx0XCJkOnRiZmdcIjogXCJkaXNwbGF5OnRhYmxlLWZvb3Rlci1ncm91cDtcIixcblx0XHRcdFwiZDp0YnJcIjogXCJkaXNwbGF5OnRhYmxlLXJvdztcIixcblx0XHRcdFwiZDp0YnJnXCI6IFwiZGlzcGxheTp0YWJsZS1yb3ctZ3JvdXA7XCIsXG5cdFx0XHRcImQ6dGJjXCI6IFwiZGlzcGxheTp0YWJsZS1jZWxsO1wiLFxuXHRcdFx0XCJkOnJiXCI6IFwiZGlzcGxheTpydWJ5O1wiLFxuXHRcdFx0XCJkOnJiYlwiOiBcImRpc3BsYXk6cnVieS1iYXNlO1wiLFxuXHRcdFx0XCJkOnJiYmdcIjogXCJkaXNwbGF5OnJ1YnktYmFzZS1ncm91cDtcIixcblx0XHRcdFwiZDpyYnRcIjogXCJkaXNwbGF5OnJ1YnktdGV4dDtcIixcblx0XHRcdFwiZDpyYnRnXCI6IFwiZGlzcGxheTpydWJ5LXRleHQtZ3JvdXA7XCIsXG5cdFx0XHRcInZcIjogXCJ2aXNpYmlsaXR5OiR7MTpoaWRkZW59O1wiLFxuXHRcdFx0XCJ2OnZcIjogXCJ2aXNpYmlsaXR5OnZpc2libGU7XCIsXG5cdFx0XHRcInY6aFwiOiBcInZpc2liaWxpdHk6aGlkZGVuO1wiLFxuXHRcdFx0XCJ2OmNcIjogXCJ2aXNpYmlsaXR5OmNvbGxhcHNlO1wiLFxuXHRcdFx0XCJvdlwiOiBcIm92ZXJmbG93OiR7MTpoaWRkZW59O1wiLFxuXHRcdFx0XCJvdjp2XCI6IFwib3ZlcmZsb3c6dmlzaWJsZTtcIixcblx0XHRcdFwib3Y6aFwiOiBcIm92ZXJmbG93OmhpZGRlbjtcIixcblx0XHRcdFwib3Y6c1wiOiBcIm92ZXJmbG93OnNjcm9sbDtcIixcblx0XHRcdFwib3Y6YVwiOiBcIm92ZXJmbG93OmF1dG87XCIsXG5cdFx0XHRcIm92eFwiOiBcIm92ZXJmbG93LXg6JHsxOmhpZGRlbn07XCIsXG5cdFx0XHRcIm92eDp2XCI6IFwib3ZlcmZsb3cteDp2aXNpYmxlO1wiLFxuXHRcdFx0XCJvdng6aFwiOiBcIm92ZXJmbG93LXg6aGlkZGVuO1wiLFxuXHRcdFx0XCJvdng6c1wiOiBcIm92ZXJmbG93LXg6c2Nyb2xsO1wiLFxuXHRcdFx0XCJvdng6YVwiOiBcIm92ZXJmbG93LXg6YXV0bztcIixcblx0XHRcdFwib3Z5XCI6IFwib3ZlcmZsb3cteTokezE6aGlkZGVufTtcIixcblx0XHRcdFwib3Z5OnZcIjogXCJvdmVyZmxvdy15OnZpc2libGU7XCIsXG5cdFx0XHRcIm92eTpoXCI6IFwib3ZlcmZsb3cteTpoaWRkZW47XCIsXG5cdFx0XHRcIm92eTpzXCI6IFwib3ZlcmZsb3cteTpzY3JvbGw7XCIsXG5cdFx0XHRcIm92eTphXCI6IFwib3ZlcmZsb3cteTphdXRvO1wiLFxuXHRcdFx0XCJvdnNcIjogXCJvdmVyZmxvdy1zdHlsZTokezE6c2Nyb2xsYmFyfTtcIixcblx0XHRcdFwib3ZzOmFcIjogXCJvdmVyZmxvdy1zdHlsZTphdXRvO1wiLFxuXHRcdFx0XCJvdnM6c1wiOiBcIm92ZXJmbG93LXN0eWxlOnNjcm9sbGJhcjtcIixcblx0XHRcdFwib3ZzOnBcIjogXCJvdmVyZmxvdy1zdHlsZTpwYW5uZXI7XCIsXG5cdFx0XHRcIm92czptXCI6IFwib3ZlcmZsb3ctc3R5bGU6bW92ZTtcIixcblx0XHRcdFwib3ZzOm1xXCI6IFwib3ZlcmZsb3ctc3R5bGU6bWFycXVlZTtcIixcblx0XHRcdFwiem9vXCI6IFwiem9vbToxO1wiLFxuXHRcdFx0XCJ6bVwiOiBcInpvb206MTtcIixcblx0XHRcdFwiY3BcIjogXCJjbGlwOnw7XCIsXG5cdFx0XHRcImNwOmFcIjogXCJjbGlwOmF1dG87XCIsXG5cdFx0XHRcImNwOnJcIjogXCJjbGlwOnJlY3QoJHsxOnRvcH0gJHsyOnJpZ2h0fSAkezM6Ym90dG9tfSAkezQ6bGVmdH0pO1wiLFxuXHRcdFx0XCJieHpcIjogXCJib3gtc2l6aW5nOiR7MTpib3JkZXItYm94fTtcIixcblx0XHRcdFwiYnh6OmNiXCI6IFwiYm94LXNpemluZzpjb250ZW50LWJveDtcIixcblx0XHRcdFwiYnh6OmJiXCI6IFwiYm94LXNpemluZzpib3JkZXItYm94O1wiLFxuXHRcdFx0XCJieHNoXCI6IFwiYm94LXNoYWRvdzokezE6aW5zZXQgfSR7Mjpob2ZmfSAkezM6dm9mZn0gJHs0OmJsdXJ9ICR7NTpjb2xvcn07XCIsXG5cdFx0XHRcImJ4c2g6clwiOiBcImJveC1zaGFkb3c6JHsxOmluc2V0IH0kezI6aG9mZn0gJHszOnZvZmZ9ICR7NDpibHVyfSAkezU6c3ByZWFkIH1yZ2IoJHs2OjB9LCAkezc6MH0sICR7ODowfSk7XCIsXG5cdFx0XHRcImJ4c2g6cmFcIjogXCJib3gtc2hhZG93OiR7MTppbnNldCB9JHsyOmh9ICR7Mzp2fSAkezQ6Ymx1cn0gJHs1OnNwcmVhZCB9cmdiYSgkezY6MH0sICR7NzowfSwgJHs4OjB9LCAuJHs5OjV9KTtcIixcblx0XHRcdFwiYnhzaDpuXCI6IFwiYm94LXNoYWRvdzpub25lO1wiLFxuXHRcdFx0XCJtXCI6IFwibWFyZ2luOnw7XCIsXG5cdFx0XHRcIm06YVwiOiBcIm1hcmdpbjphdXRvO1wiLFxuXHRcdFx0XCJtdFwiOiBcIm1hcmdpbi10b3A6fDtcIixcblx0XHRcdFwibXQ6YVwiOiBcIm1hcmdpbi10b3A6YXV0bztcIixcblx0XHRcdFwibXJcIjogXCJtYXJnaW4tcmlnaHQ6fDtcIixcblx0XHRcdFwibXI6YVwiOiBcIm1hcmdpbi1yaWdodDphdXRvO1wiLFxuXHRcdFx0XCJtYlwiOiBcIm1hcmdpbi1ib3R0b206fDtcIixcblx0XHRcdFwibWI6YVwiOiBcIm1hcmdpbi1ib3R0b206YXV0bztcIixcblx0XHRcdFwibWxcIjogXCJtYXJnaW4tbGVmdDp8O1wiLFxuXHRcdFx0XCJtbDphXCI6IFwibWFyZ2luLWxlZnQ6YXV0bztcIixcblx0XHRcdFwicFwiOiBcInBhZGRpbmc6fDtcIixcblx0XHRcdFwicHRcIjogXCJwYWRkaW5nLXRvcDp8O1wiLFxuXHRcdFx0XCJwclwiOiBcInBhZGRpbmctcmlnaHQ6fDtcIixcblx0XHRcdFwicGJcIjogXCJwYWRkaW5nLWJvdHRvbTp8O1wiLFxuXHRcdFx0XCJwbFwiOiBcInBhZGRpbmctbGVmdDp8O1wiLFxuXHRcdFx0XCJ3XCI6IFwid2lkdGg6fDtcIixcblx0XHRcdFwidzphXCI6IFwid2lkdGg6YXV0bztcIixcblx0XHRcdFwiaFwiOiBcImhlaWdodDp8O1wiLFxuXHRcdFx0XCJoOmFcIjogXCJoZWlnaHQ6YXV0bztcIixcblx0XHRcdFwibWF3XCI6IFwibWF4LXdpZHRoOnw7XCIsXG5cdFx0XHRcIm1hdzpuXCI6IFwibWF4LXdpZHRoOm5vbmU7XCIsXG5cdFx0XHRcIm1haFwiOiBcIm1heC1oZWlnaHQ6fDtcIixcblx0XHRcdFwibWFoOm5cIjogXCJtYXgtaGVpZ2h0Om5vbmU7XCIsXG5cdFx0XHRcIm1pd1wiOiBcIm1pbi13aWR0aDp8O1wiLFxuXHRcdFx0XCJtaWhcIjogXCJtaW4taGVpZ2h0Onw7XCIsXG5cdFx0XHRcIm1hclwiOiBcIm1heC1yZXNvbHV0aW9uOiR7MTpyZXN9O1wiLFxuXHRcdFx0XCJtaXJcIjogXCJtaW4tcmVzb2x1dGlvbjokezE6cmVzfTtcIixcblx0XHRcdFwib3JpXCI6IFwib3JpZW50YXRpb246fDtcIixcblx0XHRcdFwib3JpOmxcIjogXCJvcmllbnRhdGlvbjpsYW5kc2NhcGU7XCIsXG5cdFx0XHRcIm9yaTpwXCI6IFwib3JpZW50YXRpb246cG9ydHJhaXQ7XCIsXG5cdFx0XHRcIm9sXCI6IFwib3V0bGluZTp8O1wiLFxuXHRcdFx0XCJvbDpuXCI6IFwib3V0bGluZTpub25lO1wiLFxuXHRcdFx0XCJvbG9cIjogXCJvdXRsaW5lLW9mZnNldDp8O1wiLFxuXHRcdFx0XCJvbHdcIjogXCJvdXRsaW5lLXdpZHRoOnw7XCIsXG5cdFx0XHRcIm9sdzp0blwiOiBcIm91dGxpbmUtd2lkdGg6dGhpbjtcIixcblx0XHRcdFwib2x3Om1cIjogXCJvdXRsaW5lLXdpZHRoOm1lZGl1bTtcIixcblx0XHRcdFwib2x3OnRjXCI6IFwib3V0bGluZS13aWR0aDp0aGljaztcIixcblx0XHRcdFwib2xzXCI6IFwib3V0bGluZS1zdHlsZTp8O1wiLFxuXHRcdFx0XCJvbHM6blwiOiBcIm91dGxpbmUtc3R5bGU6bm9uZTtcIixcblx0XHRcdFwib2xzOmR0XCI6IFwib3V0bGluZS1zdHlsZTpkb3R0ZWQ7XCIsXG5cdFx0XHRcIm9sczpkc1wiOiBcIm91dGxpbmUtc3R5bGU6ZGFzaGVkO1wiLFxuXHRcdFx0XCJvbHM6c1wiOiBcIm91dGxpbmUtc3R5bGU6c29saWQ7XCIsXG5cdFx0XHRcIm9sczpkYlwiOiBcIm91dGxpbmUtc3R5bGU6ZG91YmxlO1wiLFxuXHRcdFx0XCJvbHM6Z1wiOiBcIm91dGxpbmUtc3R5bGU6Z3Jvb3ZlO1wiLFxuXHRcdFx0XCJvbHM6clwiOiBcIm91dGxpbmUtc3R5bGU6cmlkZ2U7XCIsXG5cdFx0XHRcIm9sczppXCI6IFwib3V0bGluZS1zdHlsZTppbnNldDtcIixcblx0XHRcdFwib2xzOm9cIjogXCJvdXRsaW5lLXN0eWxlOm91dHNldDtcIixcblx0XHRcdFwib2xjXCI6IFwib3V0bGluZS1jb2xvcjojJHsxOjAwMH07XCIsXG5cdFx0XHRcIm9sYzppXCI6IFwib3V0bGluZS1jb2xvcjppbnZlcnQ7XCIsXG5cdFx0XHRcImJkXCI6IFwiYm9yZGVyOnw7XCIsXG5cdFx0XHRcImJkK1wiOiBcImJvcmRlcjokezE6MXB4fSAkezI6c29saWR9ICR7MzojMDAwfTtcIixcblx0XHRcdFwiYmQ6blwiOiBcImJvcmRlcjpub25lO1wiLFxuXHRcdFx0XCJiZGJrXCI6IFwiYm9yZGVyLWJyZWFrOiR7MTpjbG9zZX07XCIsXG5cdFx0XHRcImJkYms6Y1wiOiBcImJvcmRlci1icmVhazpjbG9zZTtcIixcblx0XHRcdFwiYmRjbFwiOiBcImJvcmRlci1jb2xsYXBzZTp8O1wiLFxuXHRcdFx0XCJiZGNsOmNcIjogXCJib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7XCIsXG5cdFx0XHRcImJkY2w6c1wiOiBcImJvcmRlci1jb2xsYXBzZTpzZXBhcmF0ZTtcIixcblx0XHRcdFwiYmRjXCI6IFwiYm9yZGVyLWNvbG9yOiMkezE6MDAwfTtcIixcblx0XHRcdFwiYmRjOnRcIjogXCJib3JkZXItY29sb3I6dHJhbnNwYXJlbnQ7XCIsXG5cdFx0XHRcImJkaVwiOiBcImJvcmRlci1pbWFnZTp1cmwofCk7XCIsXG5cdFx0XHRcImJkaTpuXCI6IFwiYm9yZGVyLWltYWdlOm5vbmU7XCIsXG5cdFx0XHRcImJkdGlcIjogXCJib3JkZXItdG9wLWltYWdlOnVybCh8KTtcIixcblx0XHRcdFwiYmR0aTpuXCI6IFwiYm9yZGVyLXRvcC1pbWFnZTpub25lO1wiLFxuXHRcdFx0XCJiZHJpXCI6IFwiYm9yZGVyLXJpZ2h0LWltYWdlOnVybCh8KTtcIixcblx0XHRcdFwiYmRyaTpuXCI6IFwiYm9yZGVyLXJpZ2h0LWltYWdlOm5vbmU7XCIsXG5cdFx0XHRcImJkYmlcIjogXCJib3JkZXItYm90dG9tLWltYWdlOnVybCh8KTtcIixcblx0XHRcdFwiYmRiaTpuXCI6IFwiYm9yZGVyLWJvdHRvbS1pbWFnZTpub25lO1wiLFxuXHRcdFx0XCJiZGxpXCI6IFwiYm9yZGVyLWxlZnQtaW1hZ2U6dXJsKHwpO1wiLFxuXHRcdFx0XCJiZGxpOm5cIjogXCJib3JkZXItbGVmdC1pbWFnZTpub25lO1wiLFxuXHRcdFx0XCJiZGNpXCI6IFwiYm9yZGVyLWNvcm5lci1pbWFnZTp1cmwofCk7XCIsXG5cdFx0XHRcImJkY2k6blwiOiBcImJvcmRlci1jb3JuZXItaW1hZ2U6bm9uZTtcIixcblx0XHRcdFwiYmRjaTpjXCI6IFwiYm9yZGVyLWNvcm5lci1pbWFnZTpjb250aW51ZTtcIixcblx0XHRcdFwiYmR0bGlcIjogXCJib3JkZXItdG9wLWxlZnQtaW1hZ2U6dXJsKHwpO1wiLFxuXHRcdFx0XCJiZHRsaTpuXCI6IFwiYm9yZGVyLXRvcC1sZWZ0LWltYWdlOm5vbmU7XCIsXG5cdFx0XHRcImJkdGxpOmNcIjogXCJib3JkZXItdG9wLWxlZnQtaW1hZ2U6Y29udGludWU7XCIsXG5cdFx0XHRcImJkdHJpXCI6IFwiYm9yZGVyLXRvcC1yaWdodC1pbWFnZTp1cmwofCk7XCIsXG5cdFx0XHRcImJkdHJpOm5cIjogXCJib3JkZXItdG9wLXJpZ2h0LWltYWdlOm5vbmU7XCIsXG5cdFx0XHRcImJkdHJpOmNcIjogXCJib3JkZXItdG9wLXJpZ2h0LWltYWdlOmNvbnRpbnVlO1wiLFxuXHRcdFx0XCJiZGJyaVwiOiBcImJvcmRlci1ib3R0b20tcmlnaHQtaW1hZ2U6dXJsKHwpO1wiLFxuXHRcdFx0XCJiZGJyaTpuXCI6IFwiYm9yZGVyLWJvdHRvbS1yaWdodC1pbWFnZTpub25lO1wiLFxuXHRcdFx0XCJiZGJyaTpjXCI6IFwiYm9yZGVyLWJvdHRvbS1yaWdodC1pbWFnZTpjb250aW51ZTtcIixcblx0XHRcdFwiYmRibGlcIjogXCJib3JkZXItYm90dG9tLWxlZnQtaW1hZ2U6dXJsKHwpO1wiLFxuXHRcdFx0XCJiZGJsaTpuXCI6IFwiYm9yZGVyLWJvdHRvbS1sZWZ0LWltYWdlOm5vbmU7XCIsXG5cdFx0XHRcImJkYmxpOmNcIjogXCJib3JkZXItYm90dG9tLWxlZnQtaW1hZ2U6Y29udGludWU7XCIsXG5cdFx0XHRcImJkZlwiOiBcImJvcmRlci1maXQ6JHsxOnJlcGVhdH07XCIsXG5cdFx0XHRcImJkZjpjXCI6IFwiYm9yZGVyLWZpdDpjbGlwO1wiLFxuXHRcdFx0XCJiZGY6clwiOiBcImJvcmRlci1maXQ6cmVwZWF0O1wiLFxuXHRcdFx0XCJiZGY6c2NcIjogXCJib3JkZXItZml0OnNjYWxlO1wiLFxuXHRcdFx0XCJiZGY6c3RcIjogXCJib3JkZXItZml0OnN0cmV0Y2g7XCIsXG5cdFx0XHRcImJkZjpvd1wiOiBcImJvcmRlci1maXQ6b3ZlcndyaXRlO1wiLFxuXHRcdFx0XCJiZGY6b2ZcIjogXCJib3JkZXItZml0Om92ZXJmbG93O1wiLFxuXHRcdFx0XCJiZGY6c3BcIjogXCJib3JkZXItZml0OnNwYWNlO1wiLFxuXHRcdFx0XCJiZGxlblwiOiBcImJvcmRlci1sZW5ndGg6fDtcIixcblx0XHRcdFwiYmRsZW46YVwiOiBcImJvcmRlci1sZW5ndGg6YXV0bztcIixcblx0XHRcdFwiYmRzcFwiOiBcImJvcmRlci1zcGFjaW5nOnw7XCIsXG5cdFx0XHRcImJkc1wiOiBcImJvcmRlci1zdHlsZTp8O1wiLFxuXHRcdFx0XCJiZHM6blwiOiBcImJvcmRlci1zdHlsZTpub25lO1wiLFxuXHRcdFx0XCJiZHM6aFwiOiBcImJvcmRlci1zdHlsZTpoaWRkZW47XCIsXG5cdFx0XHRcImJkczpkdFwiOiBcImJvcmRlci1zdHlsZTpkb3R0ZWQ7XCIsXG5cdFx0XHRcImJkczpkc1wiOiBcImJvcmRlci1zdHlsZTpkYXNoZWQ7XCIsXG5cdFx0XHRcImJkczpzXCI6IFwiYm9yZGVyLXN0eWxlOnNvbGlkO1wiLFxuXHRcdFx0XCJiZHM6ZGJcIjogXCJib3JkZXItc3R5bGU6ZG91YmxlO1wiLFxuXHRcdFx0XCJiZHM6ZHRkc1wiOiBcImJvcmRlci1zdHlsZTpkb3QtZGFzaDtcIixcblx0XHRcdFwiYmRzOmR0ZHRkc1wiOiBcImJvcmRlci1zdHlsZTpkb3QtZG90LWRhc2g7XCIsXG5cdFx0XHRcImJkczp3XCI6IFwiYm9yZGVyLXN0eWxlOndhdmU7XCIsXG5cdFx0XHRcImJkczpnXCI6IFwiYm9yZGVyLXN0eWxlOmdyb292ZTtcIixcblx0XHRcdFwiYmRzOnJcIjogXCJib3JkZXItc3R5bGU6cmlkZ2U7XCIsXG5cdFx0XHRcImJkczppXCI6IFwiYm9yZGVyLXN0eWxlOmluc2V0O1wiLFxuXHRcdFx0XCJiZHM6b1wiOiBcImJvcmRlci1zdHlsZTpvdXRzZXQ7XCIsXG5cdFx0XHRcImJkd1wiOiBcImJvcmRlci13aWR0aDp8O1wiLFxuXHRcdFx0XCJiZHR3XCI6IFwiYm9yZGVyLXRvcC13aWR0aDp8O1wiLFxuXHRcdFx0XCJiZHJ3XCI6IFwiYm9yZGVyLXJpZ2h0LXdpZHRoOnw7XCIsXG5cdFx0XHRcImJkYndcIjogXCJib3JkZXItYm90dG9tLXdpZHRoOnw7XCIsXG5cdFx0XHRcImJkbHdcIjogXCJib3JkZXItbGVmdC13aWR0aDp8O1wiLFxuXHRcdFx0XCJiZHRcIjogXCJib3JkZXItdG9wOnw7XCIsXG5cdFx0XHRcImJ0XCI6IFwiYm9yZGVyLXRvcDp8O1wiLFxuXHRcdFx0XCJiZHQrXCI6IFwiYm9yZGVyLXRvcDokezE6MXB4fSAkezI6c29saWR9ICR7MzojMDAwfTtcIixcblx0XHRcdFwiYmR0Om5cIjogXCJib3JkZXItdG9wOm5vbmU7XCIsXG5cdFx0XHRcImJkdHNcIjogXCJib3JkZXItdG9wLXN0eWxlOnw7XCIsXG5cdFx0XHRcImJkdHM6blwiOiBcImJvcmRlci10b3Atc3R5bGU6bm9uZTtcIixcblx0XHRcdFwiYmR0Y1wiOiBcImJvcmRlci10b3AtY29sb3I6IyR7MTowMDB9O1wiLFxuXHRcdFx0XCJiZHRjOnRcIjogXCJib3JkZXItdG9wLWNvbG9yOnRyYW5zcGFyZW50O1wiLFxuXHRcdFx0XCJiZHJcIjogXCJib3JkZXItcmlnaHQ6fDtcIixcblx0XHRcdFwiYnJcIjogXCJib3JkZXItcmlnaHQ6fDtcIixcblx0XHRcdFwiYmRyK1wiOiBcImJvcmRlci1yaWdodDokezE6MXB4fSAkezI6c29saWR9ICR7MzojMDAwfTtcIixcblx0XHRcdFwiYmRyOm5cIjogXCJib3JkZXItcmlnaHQ6bm9uZTtcIixcblx0XHRcdFwiYmRyc3RcIjogXCJib3JkZXItcmlnaHQtc3R5bGU6fDtcIixcblx0XHRcdFwiYmRyc3Q6blwiOiBcImJvcmRlci1yaWdodC1zdHlsZTpub25lO1wiLFxuXHRcdFx0XCJiZHJjXCI6IFwiYm9yZGVyLXJpZ2h0LWNvbG9yOiMkezE6MDAwfTtcIixcblx0XHRcdFwiYmRyYzp0XCI6IFwiYm9yZGVyLXJpZ2h0LWNvbG9yOnRyYW5zcGFyZW50O1wiLFxuXHRcdFx0XCJiZGJcIjogXCJib3JkZXItYm90dG9tOnw7XCIsXG5cdFx0XHRcImJiXCI6IFwiYm9yZGVyLWJvdHRvbTp8O1wiLFxuXHRcdFx0XCJiZGIrXCI6IFwiYm9yZGVyLWJvdHRvbTokezE6MXB4fSAkezI6c29saWR9ICR7MzojMDAwfTtcIixcblx0XHRcdFwiYmRiOm5cIjogXCJib3JkZXItYm90dG9tOm5vbmU7XCIsXG5cdFx0XHRcImJkYnNcIjogXCJib3JkZXItYm90dG9tLXN0eWxlOnw7XCIsXG5cdFx0XHRcImJkYnM6blwiOiBcImJvcmRlci1ib3R0b20tc3R5bGU6bm9uZTtcIixcblx0XHRcdFwiYmRiY1wiOiBcImJvcmRlci1ib3R0b20tY29sb3I6IyR7MTowMDB9O1wiLFxuXHRcdFx0XCJiZGJjOnRcIjogXCJib3JkZXItYm90dG9tLWNvbG9yOnRyYW5zcGFyZW50O1wiLFxuXHRcdFx0XCJiZGxcIjogXCJib3JkZXItbGVmdDp8O1wiLFxuXHRcdFx0XCJibFwiOiBcImJvcmRlci1sZWZ0Onw7XCIsXG5cdFx0XHRcImJkbCtcIjogXCJib3JkZXItbGVmdDokezE6MXB4fSAkezI6c29saWR9ICR7MzojMDAwfTtcIixcblx0XHRcdFwiYmRsOm5cIjogXCJib3JkZXItbGVmdDpub25lO1wiLFxuXHRcdFx0XCJiZGxzXCI6IFwiYm9yZGVyLWxlZnQtc3R5bGU6fDtcIixcblx0XHRcdFwiYmRsczpuXCI6IFwiYm9yZGVyLWxlZnQtc3R5bGU6bm9uZTtcIixcblx0XHRcdFwiYmRsY1wiOiBcImJvcmRlci1sZWZ0LWNvbG9yOiMkezE6MDAwfTtcIixcblx0XHRcdFwiYmRsYzp0XCI6IFwiYm9yZGVyLWxlZnQtY29sb3I6dHJhbnNwYXJlbnQ7XCIsXG5cdFx0XHRcImJkcnNcIjogXCJib3JkZXItcmFkaXVzOnw7XCIsXG5cdFx0XHRcImJkdHJyc1wiOiBcImJvcmRlci10b3AtcmlnaHQtcmFkaXVzOnw7XCIsXG5cdFx0XHRcImJkdGxyc1wiOiBcImJvcmRlci10b3AtbGVmdC1yYWRpdXM6fDtcIixcblx0XHRcdFwiYmRicnJzXCI6IFwiYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6fDtcIixcblx0XHRcdFwiYmRibHJzXCI6IFwiYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czp8O1wiLFxuXHRcdFx0XCJiZ1wiOiBcImJhY2tncm91bmQ6IyR7MTowMDB9O1wiLFxuXHRcdFx0XCJiZytcIjogXCJiYWNrZ3JvdW5kOiR7MTojZmZmfSB1cmwoJHsyfSkgJHszOjB9ICR7NDowfSAkezU6bm8tcmVwZWF0fTtcIixcblx0XHRcdFwiYmc6blwiOiBcImJhY2tncm91bmQ6bm9uZTtcIixcblx0XHRcdFwiYmc6aWVcIjogXCJmaWx0ZXI6cHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhSW1hZ2VMb2FkZXIoc3JjPSckezE6eH0ucG5nJyxzaXppbmdNZXRob2Q9JyR7Mjpjcm9wfScpO1wiLFxuXHRcdFx0XCJiZ2NcIjogXCJiYWNrZ3JvdW5kLWNvbG9yOiMkezE6ZmZmfTtcIixcblx0XHRcdFwiYmdjOnRcIjogXCJiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O1wiLFxuXHRcdFx0XCJiZ2lcIjogXCJiYWNrZ3JvdW5kLWltYWdlOnVybCh8KTtcIixcblx0XHRcdFwiYmdpOm5cIjogXCJiYWNrZ3JvdW5kLWltYWdlOm5vbmU7XCIsXG5cdFx0XHRcImJnclwiOiBcImJhY2tncm91bmQtcmVwZWF0Onw7XCIsXG5cdFx0XHRcImJncjpuXCI6IFwiYmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O1wiLFxuXHRcdFx0XCJiZ3I6eFwiOiBcImJhY2tncm91bmQtcmVwZWF0OnJlcGVhdC14O1wiLFxuXHRcdFx0XCJiZ3I6eVwiOiBcImJhY2tncm91bmQtcmVwZWF0OnJlcGVhdC15O1wiLFxuXHRcdFx0XCJiZ3I6c3BcIjogXCJiYWNrZ3JvdW5kLXJlcGVhdDpzcGFjZTtcIixcblx0XHRcdFwiYmdyOnJkXCI6IFwiYmFja2dyb3VuZC1yZXBlYXQ6cm91bmQ7XCIsXG5cdFx0XHRcImJnYVwiOiBcImJhY2tncm91bmQtYXR0YWNobWVudDp8O1wiLFxuXHRcdFx0XCJiZ2E6ZlwiOiBcImJhY2tncm91bmQtYXR0YWNobWVudDpmaXhlZDtcIixcblx0XHRcdFwiYmdhOnNcIjogXCJiYWNrZ3JvdW5kLWF0dGFjaG1lbnQ6c2Nyb2xsO1wiLFxuXHRcdFx0XCJiZ3BcIjogXCJiYWNrZ3JvdW5kLXBvc2l0aW9uOiR7MTowfSAkezI6MH07XCIsXG5cdFx0XHRcImJncHhcIjogXCJiYWNrZ3JvdW5kLXBvc2l0aW9uLXg6fDtcIixcblx0XHRcdFwiYmdweVwiOiBcImJhY2tncm91bmQtcG9zaXRpb24teTp8O1wiLFxuXHRcdFx0XCJiZ2JrXCI6IFwiYmFja2dyb3VuZC1icmVhazp8O1wiLFxuXHRcdFx0XCJiZ2JrOmJiXCI6IFwiYmFja2dyb3VuZC1icmVhazpib3VuZGluZy1ib3g7XCIsXG5cdFx0XHRcImJnYms6ZWJcIjogXCJiYWNrZ3JvdW5kLWJyZWFrOmVhY2gtYm94O1wiLFxuXHRcdFx0XCJiZ2JrOmNcIjogXCJiYWNrZ3JvdW5kLWJyZWFrOmNvbnRpbnVvdXM7XCIsXG5cdFx0XHRcImJnY3BcIjogXCJiYWNrZ3JvdW5kLWNsaXA6JHsxOnBhZGRpbmctYm94fTtcIixcblx0XHRcdFwiYmdjcDpiYlwiOiBcImJhY2tncm91bmQtY2xpcDpib3JkZXItYm94O1wiLFxuXHRcdFx0XCJiZ2NwOnBiXCI6IFwiYmFja2dyb3VuZC1jbGlwOnBhZGRpbmctYm94O1wiLFxuXHRcdFx0XCJiZ2NwOmNiXCI6IFwiYmFja2dyb3VuZC1jbGlwOmNvbnRlbnQtYm94O1wiLFxuXHRcdFx0XCJiZ2NwOm5jXCI6IFwiYmFja2dyb3VuZC1jbGlwOm5vLWNsaXA7XCIsXG5cdFx0XHRcImJnb1wiOiBcImJhY2tncm91bmQtb3JpZ2luOnw7XCIsXG5cdFx0XHRcImJnbzpwYlwiOiBcImJhY2tncm91bmQtb3JpZ2luOnBhZGRpbmctYm94O1wiLFxuXHRcdFx0XCJiZ286YmJcIjogXCJiYWNrZ3JvdW5kLW9yaWdpbjpib3JkZXItYm94O1wiLFxuXHRcdFx0XCJiZ286Y2JcIjogXCJiYWNrZ3JvdW5kLW9yaWdpbjpjb250ZW50LWJveDtcIixcblx0XHRcdFwiYmdzelwiOiBcImJhY2tncm91bmQtc2l6ZTp8O1wiLFxuXHRcdFx0XCJiZ3N6OmFcIjogXCJiYWNrZ3JvdW5kLXNpemU6YXV0bztcIixcblx0XHRcdFwiYmdzejpjdFwiOiBcImJhY2tncm91bmQtc2l6ZTpjb250YWluO1wiLFxuXHRcdFx0XCJiZ3N6OmN2XCI6IFwiYmFja2dyb3VuZC1zaXplOmNvdmVyO1wiLFxuXHRcdFx0XCJjXCI6IFwiY29sb3I6IyR7MTowMDB9O1wiLFxuXHRcdFx0XCJjOnJcIjogXCJjb2xvcjpyZ2IoJHsxOjB9LCAkezI6MH0sICR7MzowfSk7XCIsXG5cdFx0XHRcImM6cmFcIjogXCJjb2xvcjpyZ2JhKCR7MTowfSwgJHsyOjB9LCAkezM6MH0sIC4kezQ6NX0pO1wiLFxuXHRcdFx0XCJjbVwiOiBcIi8qIHwke2NoaWxkfSAqL1wiLFxuXHRcdFx0XCJjbnRcIjogXCJjb250ZW50Oid8JztcIixcblx0XHRcdFwiY250Om5cIjogXCJjb250ZW50Om5vcm1hbDtcIixcblx0XHRcdFwiY250Om9xXCI6IFwiY29udGVudDpvcGVuLXF1b3RlO1wiLFxuXHRcdFx0XCJjbnQ6bm9xXCI6IFwiY29udGVudDpuby1vcGVuLXF1b3RlO1wiLFxuXHRcdFx0XCJjbnQ6Y3FcIjogXCJjb250ZW50OmNsb3NlLXF1b3RlO1wiLFxuXHRcdFx0XCJjbnQ6bmNxXCI6IFwiY29udGVudDpuby1jbG9zZS1xdW90ZTtcIixcblx0XHRcdFwiY250OmFcIjogXCJjb250ZW50OmF0dHIofCk7XCIsXG5cdFx0XHRcImNudDpjXCI6IFwiY29udGVudDpjb3VudGVyKHwpO1wiLFxuXHRcdFx0XCJjbnQ6Y3NcIjogXCJjb250ZW50OmNvdW50ZXJzKHwpO1wiLFxuXG5cblx0XHRcdFwidGJsXCI6IFwidGFibGUtbGF5b3V0Onw7XCIsXG5cdFx0XHRcInRibDphXCI6IFwidGFibGUtbGF5b3V0OmF1dG87XCIsXG5cdFx0XHRcInRibDpmXCI6IFwidGFibGUtbGF5b3V0OmZpeGVkO1wiLFxuXHRcdFx0XCJjcHNcIjogXCJjYXB0aW9uLXNpZGU6fDtcIixcblx0XHRcdFwiY3BzOnRcIjogXCJjYXB0aW9uLXNpZGU6dG9wO1wiLFxuXHRcdFx0XCJjcHM6YlwiOiBcImNhcHRpb24tc2lkZTpib3R0b207XCIsXG5cdFx0XHRcImVjXCI6IFwiZW1wdHktY2VsbHM6fDtcIixcblx0XHRcdFwiZWM6c1wiOiBcImVtcHR5LWNlbGxzOnNob3c7XCIsXG5cdFx0XHRcImVjOmhcIjogXCJlbXB0eS1jZWxsczpoaWRlO1wiLFxuXHRcdFx0XCJsaXNcIjogXCJsaXN0LXN0eWxlOnw7XCIsXG5cdFx0XHRcImxpczpuXCI6IFwibGlzdC1zdHlsZTpub25lO1wiLFxuXHRcdFx0XCJsaXNwXCI6IFwibGlzdC1zdHlsZS1wb3NpdGlvbjp8O1wiLFxuXHRcdFx0XCJsaXNwOmlcIjogXCJsaXN0LXN0eWxlLXBvc2l0aW9uOmluc2lkZTtcIixcblx0XHRcdFwibGlzcDpvXCI6IFwibGlzdC1zdHlsZS1wb3NpdGlvbjpvdXRzaWRlO1wiLFxuXHRcdFx0XCJsaXN0XCI6IFwibGlzdC1zdHlsZS10eXBlOnw7XCIsXG5cdFx0XHRcImxpc3Q6blwiOiBcImxpc3Qtc3R5bGUtdHlwZTpub25lO1wiLFxuXHRcdFx0XCJsaXN0OmRcIjogXCJsaXN0LXN0eWxlLXR5cGU6ZGlzYztcIixcblx0XHRcdFwibGlzdDpjXCI6IFwibGlzdC1zdHlsZS10eXBlOmNpcmNsZTtcIixcblx0XHRcdFwibGlzdDpzXCI6IFwibGlzdC1zdHlsZS10eXBlOnNxdWFyZTtcIixcblx0XHRcdFwibGlzdDpkY1wiOiBcImxpc3Qtc3R5bGUtdHlwZTpkZWNpbWFsO1wiLFxuXHRcdFx0XCJsaXN0OmRjbHpcIjogXCJsaXN0LXN0eWxlLXR5cGU6ZGVjaW1hbC1sZWFkaW5nLXplcm87XCIsXG5cdFx0XHRcImxpc3Q6bHJcIjogXCJsaXN0LXN0eWxlLXR5cGU6bG93ZXItcm9tYW47XCIsXG5cdFx0XHRcImxpc3Q6dXJcIjogXCJsaXN0LXN0eWxlLXR5cGU6dXBwZXItcm9tYW47XCIsXG5cdFx0XHRcImxpc2lcIjogXCJsaXN0LXN0eWxlLWltYWdlOnw7XCIsXG5cdFx0XHRcImxpc2k6blwiOiBcImxpc3Qtc3R5bGUtaW1hZ2U6bm9uZTtcIixcblx0XHRcdFwicVwiOiBcInF1b3Rlczp8O1wiLFxuXHRcdFx0XCJxOm5cIjogXCJxdW90ZXM6bm9uZTtcIixcblx0XHRcdFwicTpydVwiOiBcInF1b3RlczonXFxcXDAwQUInICdcXFxcMDBCQicgJ1xcXFwyMDFFJyAnXFxcXDIwMUMnO1wiLFxuXHRcdFx0XCJxOmVuXCI6IFwicXVvdGVzOidcXFxcMjAxQycgJ1xcXFwyMDFEJyAnXFxcXDIwMTgnICdcXFxcMjAxOSc7XCIsXG5cdFx0XHRcImN0XCI6IFwiY29udGVudDp8O1wiLFxuXHRcdFx0XCJjdDpuXCI6IFwiY29udGVudDpub3JtYWw7XCIsXG5cdFx0XHRcImN0Om9xXCI6IFwiY29udGVudDpvcGVuLXF1b3RlO1wiLFxuXHRcdFx0XCJjdDpub3FcIjogXCJjb250ZW50Om5vLW9wZW4tcXVvdGU7XCIsXG5cdFx0XHRcImN0OmNxXCI6IFwiY29udGVudDpjbG9zZS1xdW90ZTtcIixcblx0XHRcdFwiY3Q6bmNxXCI6IFwiY29udGVudDpuby1jbG9zZS1xdW90ZTtcIixcblx0XHRcdFwiY3Q6YVwiOiBcImNvbnRlbnQ6YXR0cih8KTtcIixcblx0XHRcdFwiY3Q6Y1wiOiBcImNvbnRlbnQ6Y291bnRlcih8KTtcIixcblx0XHRcdFwiY3Q6Y3NcIjogXCJjb250ZW50OmNvdW50ZXJzKHwpO1wiLFxuXHRcdFx0XCJjb2lcIjogXCJjb3VudGVyLWluY3JlbWVudDp8O1wiLFxuXHRcdFx0XCJjb3JcIjogXCJjb3VudGVyLXJlc2V0Onw7XCIsXG5cdFx0XHRcInZhXCI6IFwidmVydGljYWwtYWxpZ246JHsxOnRvcH07XCIsXG5cdFx0XHRcInZhOnN1cFwiOiBcInZlcnRpY2FsLWFsaWduOnN1cGVyO1wiLFxuXHRcdFx0XCJ2YTp0XCI6IFwidmVydGljYWwtYWxpZ246dG9wO1wiLFxuXHRcdFx0XCJ2YTp0dFwiOiBcInZlcnRpY2FsLWFsaWduOnRleHQtdG9wO1wiLFxuXHRcdFx0XCJ2YTptXCI6IFwidmVydGljYWwtYWxpZ246bWlkZGxlO1wiLFxuXHRcdFx0XCJ2YTpibFwiOiBcInZlcnRpY2FsLWFsaWduOmJhc2VsaW5lO1wiLFxuXHRcdFx0XCJ2YTpiXCI6IFwidmVydGljYWwtYWxpZ246Ym90dG9tO1wiLFxuXHRcdFx0XCJ2YTp0YlwiOiBcInZlcnRpY2FsLWFsaWduOnRleHQtYm90dG9tO1wiLFxuXHRcdFx0XCJ2YTpzdWJcIjogXCJ2ZXJ0aWNhbC1hbGlnbjpzdWI7XCIsXG5cdFx0XHRcInRhXCI6IFwidGV4dC1hbGlnbjokezE6bGVmdH07XCIsXG5cdFx0XHRcInRhOmxcIjogXCJ0ZXh0LWFsaWduOmxlZnQ7XCIsXG5cdFx0XHRcInRhOmNcIjogXCJ0ZXh0LWFsaWduOmNlbnRlcjtcIixcblx0XHRcdFwidGE6clwiOiBcInRleHQtYWxpZ246cmlnaHQ7XCIsXG5cdFx0XHRcInRhOmpcIjogXCJ0ZXh0LWFsaWduOmp1c3RpZnk7XCIsXG5cdFx0XHRcInRhLWxzdFwiOiBcInRleHQtYWxpZ24tbGFzdDp8O1wiLFxuXHRcdFx0XCJ0YWw6YVwiOiBcInRleHQtYWxpZ24tbGFzdDphdXRvO1wiLFxuXHRcdFx0XCJ0YWw6bFwiOiBcInRleHQtYWxpZ24tbGFzdDpsZWZ0O1wiLFxuXHRcdFx0XCJ0YWw6Y1wiOiBcInRleHQtYWxpZ24tbGFzdDpjZW50ZXI7XCIsXG5cdFx0XHRcInRhbDpyXCI6IFwidGV4dC1hbGlnbi1sYXN0OnJpZ2h0O1wiLFxuXHRcdFx0XCJ0ZFwiOiBcInRleHQtZGVjb3JhdGlvbjokezE6bm9uZX07XCIsXG5cdFx0XHRcInRkOm5cIjogXCJ0ZXh0LWRlY29yYXRpb246bm9uZTtcIixcblx0XHRcdFwidGQ6dVwiOiBcInRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7XCIsXG5cdFx0XHRcInRkOm9cIjogXCJ0ZXh0LWRlY29yYXRpb246b3ZlcmxpbmU7XCIsXG5cdFx0XHRcInRkOmxcIjogXCJ0ZXh0LWRlY29yYXRpb246bGluZS10aHJvdWdoO1wiLFxuXHRcdFx0XCJ0ZVwiOiBcInRleHQtZW1waGFzaXM6fDtcIixcblx0XHRcdFwidGU6blwiOiBcInRleHQtZW1waGFzaXM6bm9uZTtcIixcblx0XHRcdFwidGU6YWNcIjogXCJ0ZXh0LWVtcGhhc2lzOmFjY2VudDtcIixcblx0XHRcdFwidGU6ZHRcIjogXCJ0ZXh0LWVtcGhhc2lzOmRvdDtcIixcblx0XHRcdFwidGU6Y1wiOiBcInRleHQtZW1waGFzaXM6Y2lyY2xlO1wiLFxuXHRcdFx0XCJ0ZTpkc1wiOiBcInRleHQtZW1waGFzaXM6ZGlzYztcIixcblx0XHRcdFwidGU6YlwiOiBcInRleHQtZW1waGFzaXM6YmVmb3JlO1wiLFxuXHRcdFx0XCJ0ZTphXCI6IFwidGV4dC1lbXBoYXNpczphZnRlcjtcIixcblx0XHRcdFwidGhcIjogXCJ0ZXh0LWhlaWdodDp8O1wiLFxuXHRcdFx0XCJ0aDphXCI6IFwidGV4dC1oZWlnaHQ6YXV0bztcIixcblx0XHRcdFwidGg6ZlwiOiBcInRleHQtaGVpZ2h0OmZvbnQtc2l6ZTtcIixcblx0XHRcdFwidGg6dFwiOiBcInRleHQtaGVpZ2h0OnRleHQtc2l6ZTtcIixcblx0XHRcdFwidGg6bVwiOiBcInRleHQtaGVpZ2h0Om1heC1zaXplO1wiLFxuXHRcdFx0XCJ0aVwiOiBcInRleHQtaW5kZW50Onw7XCIsXG5cdFx0XHRcInRpOi1cIjogXCJ0ZXh0LWluZGVudDotOTk5OXB4O1wiLFxuXHRcdFx0XCJ0alwiOiBcInRleHQtanVzdGlmeTp8O1wiLFxuXHRcdFx0XCJ0ajphXCI6IFwidGV4dC1qdXN0aWZ5OmF1dG87XCIsXG5cdFx0XHRcInRqOml3XCI6IFwidGV4dC1qdXN0aWZ5OmludGVyLXdvcmQ7XCIsXG5cdFx0XHRcInRqOmlpXCI6IFwidGV4dC1qdXN0aWZ5OmludGVyLWlkZW9ncmFwaDtcIixcblx0XHRcdFwidGo6aWNcIjogXCJ0ZXh0LWp1c3RpZnk6aW50ZXItY2x1c3RlcjtcIixcblx0XHRcdFwidGo6ZFwiOiBcInRleHQtanVzdGlmeTpkaXN0cmlidXRlO1wiLFxuXHRcdFx0XCJ0ajprXCI6IFwidGV4dC1qdXN0aWZ5Omthc2hpZGE7XCIsXG5cdFx0XHRcInRqOnRcIjogXCJ0ZXh0LWp1c3RpZnk6dGliZXRhbjtcIixcblx0XHRcdFwidG92XCI6IFwidGV4dC1vdmVyZmxvdzoke2VsbGlwc2lzfTtcIixcblx0XHRcdFwidG92OmVcIjogXCJ0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO1wiLFxuXHRcdFx0XCJ0b3Y6Y1wiOiBcInRleHQtb3ZlcmZsb3c6Y2xpcDtcIixcblx0XHRcdFwidG9cIjogXCJ0ZXh0LW91dGxpbmU6fDtcIixcblx0XHRcdFwidG8rXCI6IFwidGV4dC1vdXRsaW5lOiR7MTowfSAkezI6MH0gJHszOiMwMDB9O1wiLFxuXHRcdFx0XCJ0bzpuXCI6IFwidGV4dC1vdXRsaW5lOm5vbmU7XCIsXG5cdFx0XHRcInRyXCI6IFwidGV4dC1yZXBsYWNlOnw7XCIsXG5cdFx0XHRcInRyOm5cIjogXCJ0ZXh0LXJlcGxhY2U6bm9uZTtcIixcblx0XHRcdFwidHRcIjogXCJ0ZXh0LXRyYW5zZm9ybTokezE6dXBwZXJjYXNlfTtcIixcblx0XHRcdFwidHQ6blwiOiBcInRleHQtdHJhbnNmb3JtOm5vbmU7XCIsXG5cdFx0XHRcInR0OmNcIjogXCJ0ZXh0LXRyYW5zZm9ybTpjYXBpdGFsaXplO1wiLFxuXHRcdFx0XCJ0dDp1XCI6IFwidGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO1wiLFxuXHRcdFx0XCJ0dDpsXCI6IFwidGV4dC10cmFuc2Zvcm06bG93ZXJjYXNlO1wiLFxuXHRcdFx0XCJ0d1wiOiBcInRleHQtd3JhcDp8O1wiLFxuXHRcdFx0XCJ0dzpuXCI6IFwidGV4dC13cmFwOm5vcm1hbDtcIixcblx0XHRcdFwidHc6bm9cIjogXCJ0ZXh0LXdyYXA6bm9uZTtcIixcblx0XHRcdFwidHc6dVwiOiBcInRleHQtd3JhcDp1bnJlc3RyaWN0ZWQ7XCIsXG5cdFx0XHRcInR3OnNcIjogXCJ0ZXh0LXdyYXA6c3VwcHJlc3M7XCIsXG5cdFx0XHRcInRzaFwiOiBcInRleHQtc2hhZG93OiR7MTpob2ZmfSAkezI6dm9mZn0gJHszOmJsdXJ9ICR7NDojMDAwfTtcIixcblx0XHRcdFwidHNoOnJcIjogXCJ0ZXh0LXNoYWRvdzokezE6aH0gJHsyOnZ9ICR7MzpibHVyfSByZ2IoJHs0OjB9LCAkezU6MH0sICR7NjowfSk7XCIsXG5cdFx0XHRcInRzaDpyYVwiOiBcInRleHQtc2hhZG93OiR7MTpofSAkezI6dn0gJHszOmJsdXJ9IHJnYmEoJHs0OjB9LCAkezU6MH0sICR7NjowfSwgLiR7Nzo1fSk7XCIsXG5cdFx0XHRcInRzaCtcIjogXCJ0ZXh0LXNoYWRvdzokezE6MH0gJHsyOjB9ICR7MzowfSAkezQ6IzAwMH07XCIsXG5cdFx0XHRcInRzaDpuXCI6IFwidGV4dC1zaGFkb3c6bm9uZTtcIixcblx0XHRcdFwidHJmXCI6IFwidHJhbnNmb3JtOnw7XCIsXG5cdFx0XHRcInRyZjpza3hcIjogXCJ0cmFuc2Zvcm06IHNrZXdYKCR7MTphbmdsZX0pO1wiLFxuXHRcdFx0XCJ0cmY6c2t5XCI6IFwidHJhbnNmb3JtOiBza2V3WSgkezE6YW5nbGV9KTtcIixcblx0XHRcdFwidHJmOnNjXCI6IFwidHJhbnNmb3JtOiBzY2FsZSgkezE6eH0sICR7Mjp5fSk7XCIsXG5cdFx0XHRcInRyZjpzY3hcIjogXCJ0cmFuc2Zvcm06IHNjYWxlWCgkezE6eH0pO1wiLFxuXHRcdFx0XCJ0cmY6c2N5XCI6IFwidHJhbnNmb3JtOiBzY2FsZVkoJHsxOnl9KTtcIixcblx0XHRcdFwidHJmOnJcIjogXCJ0cmFuc2Zvcm06IHJvdGF0ZSgkezE6YW5nbGV9KTtcIixcblx0XHRcdFwidHJmOnRcIjogXCJ0cmFuc2Zvcm06IHRyYW5zbGF0ZSgkezE6eH0sICR7Mjp5fSk7XCIsXG5cdFx0XHRcInRyZjp0eFwiOiBcInRyYW5zZm9ybTogdHJhbnNsYXRlWCgkezE6eH0pO1wiLFxuXHRcdFx0XCJ0cmY6dHlcIjogXCJ0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoJHsxOnl9KTtcIixcblx0XHRcdFwidHJmb1wiOiBcInRyYW5zZm9ybS1vcmlnaW46fDtcIixcblx0XHRcdFwidHJmc1wiOiBcInRyYW5zZm9ybS1zdHlsZTokezE6cHJlc2VydmUtM2R9O1wiLFxuXHRcdFx0XCJ0cnNcIjogXCJ0cmFuc2l0aW9uOiR7MTpwcm9wfSAkezI6dGltZX07XCIsXG5cdFx0XHRcInRyc2RlXCI6IFwidHJhbnNpdGlvbi1kZWxheTokezE6dGltZX07XCIsXG5cdFx0XHRcInRyc2R1XCI6IFwidHJhbnNpdGlvbi1kdXJhdGlvbjokezE6dGltZX07XCIsXG5cdFx0XHRcInRyc3BcIjogXCJ0cmFuc2l0aW9uLXByb3BlcnR5OiR7MTpwcm9wfTtcIixcblx0XHRcdFwidHJzdGZcIjogXCJ0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjokezE6dGZ1bmN9O1wiLFxuXHRcdFx0XCJsaFwiOiBcImxpbmUtaGVpZ2h0Onw7XCIsXG5cdFx0XHRcIndoc1wiOiBcIndoaXRlLXNwYWNlOnw7XCIsXG5cdFx0XHRcIndoczpuXCI6IFwid2hpdGUtc3BhY2U6bm9ybWFsO1wiLFxuXHRcdFx0XCJ3aHM6cFwiOiBcIndoaXRlLXNwYWNlOnByZTtcIixcblx0XHRcdFwid2hzOm53XCI6IFwid2hpdGUtc3BhY2U6bm93cmFwO1wiLFxuXHRcdFx0XCJ3aHM6cHdcIjogXCJ3aGl0ZS1zcGFjZTpwcmUtd3JhcDtcIixcblx0XHRcdFwid2hzOnBsXCI6IFwid2hpdGUtc3BhY2U6cHJlLWxpbmU7XCIsXG5cdFx0XHRcIndoc2NcIjogXCJ3aGl0ZS1zcGFjZS1jb2xsYXBzZTp8O1wiLFxuXHRcdFx0XCJ3aHNjOm5cIjogXCJ3aGl0ZS1zcGFjZS1jb2xsYXBzZTpub3JtYWw7XCIsXG5cdFx0XHRcIndoc2M6a1wiOiBcIndoaXRlLXNwYWNlLWNvbGxhcHNlOmtlZXAtYWxsO1wiLFxuXHRcdFx0XCJ3aHNjOmxcIjogXCJ3aGl0ZS1zcGFjZS1jb2xsYXBzZTpsb29zZTtcIixcblx0XHRcdFwid2hzYzpic1wiOiBcIndoaXRlLXNwYWNlLWNvbGxhcHNlOmJyZWFrLXN0cmljdDtcIixcblx0XHRcdFwid2hzYzpiYVwiOiBcIndoaXRlLXNwYWNlLWNvbGxhcHNlOmJyZWFrLWFsbDtcIixcblx0XHRcdFwid29iXCI6IFwid29yZC1icmVhazp8O1wiLFxuXHRcdFx0XCJ3b2I6blwiOiBcIndvcmQtYnJlYWs6bm9ybWFsO1wiLFxuXHRcdFx0XCJ3b2I6a1wiOiBcIndvcmQtYnJlYWs6a2VlcC1hbGw7XCIsXG5cdFx0XHRcIndvYjpiYVwiOiBcIndvcmQtYnJlYWs6YnJlYWstYWxsO1wiLFxuXHRcdFx0XCJ3b3NcIjogXCJ3b3JkLXNwYWNpbmc6fDtcIixcblx0XHRcdFwid293XCI6IFwid29yZC13cmFwOnw7XCIsXG5cdFx0XHRcIndvdzpubVwiOiBcIndvcmQtd3JhcDpub3JtYWw7XCIsXG5cdFx0XHRcIndvdzpuXCI6IFwid29yZC13cmFwOm5vbmU7XCIsXG5cdFx0XHRcIndvdzp1XCI6IFwid29yZC13cmFwOnVucmVzdHJpY3RlZDtcIixcblx0XHRcdFwid293OnNcIjogXCJ3b3JkLXdyYXA6c3VwcHJlc3M7XCIsXG5cdFx0XHRcIndvdzpiXCI6IFwid29yZC13cmFwOmJyZWFrLXdvcmQ7XCIsXG5cdFx0XHRcIndtXCI6IFwid3JpdGluZy1tb2RlOiR7MTpsci10Yn07XCIsXG5cdFx0XHRcIndtOmxydFwiOiBcIndyaXRpbmctbW9kZTpsci10YjtcIixcblx0XHRcdFwid206bHJiXCI6IFwid3JpdGluZy1tb2RlOmxyLWJ0O1wiLFxuXHRcdFx0XCJ3bTpybHRcIjogXCJ3cml0aW5nLW1vZGU6cmwtdGI7XCIsXG5cdFx0XHRcIndtOnJsYlwiOiBcIndyaXRpbmctbW9kZTpybC1idDtcIixcblx0XHRcdFwid206dGJyXCI6IFwid3JpdGluZy1tb2RlOnRiLXJsO1wiLFxuXHRcdFx0XCJ3bTp0YmxcIjogXCJ3cml0aW5nLW1vZGU6dGItbHI7XCIsXG5cdFx0XHRcIndtOmJ0bFwiOiBcIndyaXRpbmctbW9kZTpidC1scjtcIixcblx0XHRcdFwid206YnRyXCI6IFwid3JpdGluZy1tb2RlOmJ0LXJsO1wiLFxuXHRcdFx0XCJsdHNcIjogXCJsZXR0ZXItc3BhY2luZzp8O1wiLFxuXHRcdFx0XCJsdHMtblwiOiBcImxldHRlci1zcGFjaW5nOm5vcm1hbDtcIixcblx0XHRcdFwiZlwiOiBcImZvbnQ6fDtcIixcblx0XHRcdFwiZitcIjogXCJmb250OiR7MToxZW19ICR7MjpBcmlhbCxzYW5zLXNlcmlmfTtcIixcblx0XHRcdFwiZndcIjogXCJmb250LXdlaWdodDp8O1wiLFxuXHRcdFx0XCJmdzpuXCI6IFwiZm9udC13ZWlnaHQ6bm9ybWFsO1wiLFxuXHRcdFx0XCJmdzpiXCI6IFwiZm9udC13ZWlnaHQ6Ym9sZDtcIixcblx0XHRcdFwiZnc6YnJcIjogXCJmb250LXdlaWdodDpib2xkZXI7XCIsXG5cdFx0XHRcImZ3OmxyXCI6IFwiZm9udC13ZWlnaHQ6bGlnaHRlcjtcIixcblx0XHRcdFwiZnNcIjogXCJmb250LXN0eWxlOiR7aXRhbGljfTtcIixcblx0XHRcdFwiZnM6blwiOiBcImZvbnQtc3R5bGU6bm9ybWFsO1wiLFxuXHRcdFx0XCJmczppXCI6IFwiZm9udC1zdHlsZTppdGFsaWM7XCIsXG5cdFx0XHRcImZzOm9cIjogXCJmb250LXN0eWxlOm9ibGlxdWU7XCIsXG5cdFx0XHRcImZ2XCI6IFwiZm9udC12YXJpYW50Onw7XCIsXG5cdFx0XHRcImZ2Om5cIjogXCJmb250LXZhcmlhbnQ6bm9ybWFsO1wiLFxuXHRcdFx0XCJmdjpzY1wiOiBcImZvbnQtdmFyaWFudDpzbWFsbC1jYXBzO1wiLFxuXHRcdFx0XCJmelwiOiBcImZvbnQtc2l6ZTp8O1wiLFxuXHRcdFx0XCJmemFcIjogXCJmb250LXNpemUtYWRqdXN0Onw7XCIsXG5cdFx0XHRcImZ6YTpuXCI6IFwiZm9udC1zaXplLWFkanVzdDpub25lO1wiLFxuXHRcdFx0XCJmZlwiOiBcImZvbnQtZmFtaWx5Onw7XCIsXG5cdFx0XHRcImZmOnNcIjogXCJmb250LWZhbWlseTpzZXJpZjtcIixcblx0XHRcdFwiZmY6c3NcIjogXCJmb250LWZhbWlseTpzYW5zLXNlcmlmO1wiLFxuXHRcdFx0XCJmZjpjXCI6IFwiZm9udC1mYW1pbHk6Y3Vyc2l2ZTtcIixcblx0XHRcdFwiZmY6ZlwiOiBcImZvbnQtZmFtaWx5OmZhbnRhc3k7XCIsXG5cdFx0XHRcImZmOm1cIjogXCJmb250LWZhbWlseTptb25vc3BhY2U7XCIsXG5cdFx0XHRcImZmOmFcIjogXCJmb250LWZhbWlseTogQXJpYWwsIFxcXCJIZWx2ZXRpY2EgTmV1ZVxcXCIsIEhlbHZldGljYSwgc2Fucy1zZXJpZjtcIixcblx0XHRcdFwiZmY6dFwiOiBcImZvbnQtZmFtaWx5OiBcXFwiVGltZXMgTmV3IFJvbWFuXFxcIiwgVGltZXMsIEJhc2tlcnZpbGxlLCBHZW9yZ2lhLCBzZXJpZjtcIixcblx0XHRcdFwiZmY6dlwiOiBcImZvbnQtZmFtaWx5OiBWZXJkYW5hLCBHZW5ldmEsIHNhbnMtc2VyaWY7XCIsXG5cdFx0XHRcImZlZlwiOiBcImZvbnQtZWZmZWN0Onw7XCIsXG5cdFx0XHRcImZlZjpuXCI6IFwiZm9udC1lZmZlY3Q6bm9uZTtcIixcblx0XHRcdFwiZmVmOmVnXCI6IFwiZm9udC1lZmZlY3Q6ZW5ncmF2ZTtcIixcblx0XHRcdFwiZmVmOmViXCI6IFwiZm9udC1lZmZlY3Q6ZW1ib3NzO1wiLFxuXHRcdFx0XCJmZWY6b1wiOiBcImZvbnQtZWZmZWN0Om91dGxpbmU7XCIsXG5cdFx0XHRcImZlbVwiOiBcImZvbnQtZW1waGFzaXplOnw7XCIsXG5cdFx0XHRcImZlbXBcIjogXCJmb250LWVtcGhhc2l6ZS1wb3NpdGlvbjp8O1wiLFxuXHRcdFx0XCJmZW1wOmJcIjogXCJmb250LWVtcGhhc2l6ZS1wb3NpdGlvbjpiZWZvcmU7XCIsXG5cdFx0XHRcImZlbXA6YVwiOiBcImZvbnQtZW1waGFzaXplLXBvc2l0aW9uOmFmdGVyO1wiLFxuXHRcdFx0XCJmZW1zXCI6IFwiZm9udC1lbXBoYXNpemUtc3R5bGU6fDtcIixcblx0XHRcdFwiZmVtczpuXCI6IFwiZm9udC1lbXBoYXNpemUtc3R5bGU6bm9uZTtcIixcblx0XHRcdFwiZmVtczphY1wiOiBcImZvbnQtZW1waGFzaXplLXN0eWxlOmFjY2VudDtcIixcblx0XHRcdFwiZmVtczpkdFwiOiBcImZvbnQtZW1waGFzaXplLXN0eWxlOmRvdDtcIixcblx0XHRcdFwiZmVtczpjXCI6IFwiZm9udC1lbXBoYXNpemUtc3R5bGU6Y2lyY2xlO1wiLFxuXHRcdFx0XCJmZW1zOmRzXCI6IFwiZm9udC1lbXBoYXNpemUtc3R5bGU6ZGlzYztcIixcblx0XHRcdFwiZnNtXCI6IFwiZm9udC1zbW9vdGg6fDtcIixcblx0XHRcdFwiZnNtOmFcIjogXCJmb250LXNtb290aDphdXRvO1wiLFxuXHRcdFx0XCJmc206blwiOiBcImZvbnQtc21vb3RoOm5ldmVyO1wiLFxuXHRcdFx0XCJmc206YXdcIjogXCJmb250LXNtb290aDphbHdheXM7XCIsXG5cdFx0XHRcImZzdFwiOiBcImZvbnQtc3RyZXRjaDp8O1wiLFxuXHRcdFx0XCJmc3Q6blwiOiBcImZvbnQtc3RyZXRjaDpub3JtYWw7XCIsXG5cdFx0XHRcImZzdDp1Y1wiOiBcImZvbnQtc3RyZXRjaDp1bHRyYS1jb25kZW5zZWQ7XCIsXG5cdFx0XHRcImZzdDplY1wiOiBcImZvbnQtc3RyZXRjaDpleHRyYS1jb25kZW5zZWQ7XCIsXG5cdFx0XHRcImZzdDpjXCI6IFwiZm9udC1zdHJldGNoOmNvbmRlbnNlZDtcIixcblx0XHRcdFwiZnN0OnNjXCI6IFwiZm9udC1zdHJldGNoOnNlbWktY29uZGVuc2VkO1wiLFxuXHRcdFx0XCJmc3Q6c2VcIjogXCJmb250LXN0cmV0Y2g6c2VtaS1leHBhbmRlZDtcIixcblx0XHRcdFwiZnN0OmVcIjogXCJmb250LXN0cmV0Y2g6ZXhwYW5kZWQ7XCIsXG5cdFx0XHRcImZzdDplZVwiOiBcImZvbnQtc3RyZXRjaDpleHRyYS1leHBhbmRlZDtcIixcblx0XHRcdFwiZnN0OnVlXCI6IFwiZm9udC1zdHJldGNoOnVsdHJhLWV4cGFuZGVkO1wiLFxuXHRcdFx0XCJvcFwiOiBcIm9wYWNpdHk6fDtcIixcblx0XHRcdFwib3ArXCI6IFwib3BhY2l0eTogJDE7XFxuZmlsdGVyOiBhbHBoYShvcGFjaXR5PSQyKTtcIixcblx0XHRcdFwib3A6aWVcIjogXCJmaWx0ZXI6cHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhKE9wYWNpdHk9MTAwKTtcIixcblx0XHRcdFwib3A6bXNcIjogXCItbXMtZmlsdGVyOidwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGEoT3BhY2l0eT0xMDApJztcIixcblx0XHRcdFwicnN6XCI6IFwicmVzaXplOnw7XCIsXG5cdFx0XHRcInJzejpuXCI6IFwicmVzaXplOm5vbmU7XCIsXG5cdFx0XHRcInJzejpiXCI6IFwicmVzaXplOmJvdGg7XCIsXG5cdFx0XHRcInJzejpoXCI6IFwicmVzaXplOmhvcml6b250YWw7XCIsXG5cdFx0XHRcInJzejp2XCI6IFwicmVzaXplOnZlcnRpY2FsO1wiLFxuXHRcdFx0XCJjdXJcIjogXCJjdXJzb3I6JHtwb2ludGVyfTtcIixcblx0XHRcdFwiY3VyOmFcIjogXCJjdXJzb3I6YXV0bztcIixcblx0XHRcdFwiY3VyOmRcIjogXCJjdXJzb3I6ZGVmYXVsdDtcIixcblx0XHRcdFwiY3VyOmNcIjogXCJjdXJzb3I6Y3Jvc3NoYWlyO1wiLFxuXHRcdFx0XCJjdXI6aGFcIjogXCJjdXJzb3I6aGFuZDtcIixcblx0XHRcdFwiY3VyOmhlXCI6IFwiY3Vyc29yOmhlbHA7XCIsXG5cdFx0XHRcImN1cjptXCI6IFwiY3Vyc29yOm1vdmU7XCIsXG5cdFx0XHRcImN1cjpwXCI6IFwiY3Vyc29yOnBvaW50ZXI7XCIsXG5cdFx0XHRcImN1cjp0XCI6IFwiY3Vyc29yOnRleHQ7XCIsXG5cdFx0XHRcInBnYmJcIjogXCJwYWdlLWJyZWFrLWJlZm9yZTp8O1wiLFxuXHRcdFx0XCJwZ2JiOmF1XCI6IFwicGFnZS1icmVhay1iZWZvcmU6YXV0bztcIixcblx0XHRcdFwicGdiYjphbFwiOiBcInBhZ2UtYnJlYWstYmVmb3JlOmFsd2F5cztcIixcblx0XHRcdFwicGdiYjpsXCI6IFwicGFnZS1icmVhay1iZWZvcmU6bGVmdDtcIixcblx0XHRcdFwicGdiYjpyXCI6IFwicGFnZS1icmVhay1iZWZvcmU6cmlnaHQ7XCIsXG5cdFx0XHRcInBnYmlcIjogXCJwYWdlLWJyZWFrLWluc2lkZTp8O1wiLFxuXHRcdFx0XCJwZ2JpOmF1XCI6IFwicGFnZS1icmVhay1pbnNpZGU6YXV0bztcIixcblx0XHRcdFwicGdiaTphdlwiOiBcInBhZ2UtYnJlYWstaW5zaWRlOmF2b2lkO1wiLFxuXHRcdFx0XCJwZ2JhXCI6IFwicGFnZS1icmVhay1hZnRlcjp8O1wiLFxuXHRcdFx0XCJwZ2JhOmF1XCI6IFwicGFnZS1icmVhay1hZnRlcjphdXRvO1wiLFxuXHRcdFx0XCJwZ2JhOmFsXCI6IFwicGFnZS1icmVhay1hZnRlcjphbHdheXM7XCIsXG5cdFx0XHRcInBnYmE6bFwiOiBcInBhZ2UtYnJlYWstYWZ0ZXI6bGVmdDtcIixcblx0XHRcdFwicGdiYTpyXCI6IFwicGFnZS1icmVhay1hZnRlcjpyaWdodDtcIixcblx0XHRcdFwib3JwXCI6IFwib3JwaGFuczp8O1wiLFxuXHRcdFx0XCJ1c1wiOiBcInVzZXItc2VsZWN0OiR7bm9uZX07XCIsXG5cdFx0XHRcIndpZFwiOiBcIndpZG93czp8O1wiLFxuXHRcdFx0XCJ3ZnNtXCI6IFwiLXdlYmtpdC1mb250LXNtb290aGluZzoke2FudGlhbGlhc2VkfTtcIixcblx0XHRcdFwid2ZzbTphXCI6IFwiLXdlYmtpdC1mb250LXNtb290aGluZzphbnRpYWxpYXNlZDtcIixcblx0XHRcdFwid2ZzbTpzXCI6IFwiLXdlYmtpdC1mb250LXNtb290aGluZzpzdWJwaXhlbC1hbnRpYWxpYXNlZDtcIixcblx0XHRcdFwid2ZzbTpzYVwiOiBcIi13ZWJraXQtZm9udC1zbW9vdGhpbmc6c3VicGl4ZWwtYW50aWFsaWFzZWQ7XCIsXG5cdFx0XHRcIndmc206blwiOiBcIi13ZWJraXQtZm9udC1zbW9vdGhpbmc6bm9uZTtcIlxuXHRcdH1cblx0fSxcblxuXHRcImh0bWxcIjoge1xuXHRcdFwiZmlsdGVyc1wiOiBcImh0bWxcIixcblx0XHRcInByb2ZpbGVcIjogXCJodG1sXCIsXG5cdFx0XCJzbmlwcGV0c1wiOiB7XG5cdFx0XHRcIiEhIVwiOiAgICBcIjwhZG9jdHlwZSBodG1sPlwiLFxuXHRcdFx0XCIhISE0dFwiOiAgXCI8IURPQ1RZUEUgSFRNTCBQVUJMSUMgXFxcIi0vL1czQy8vRFREIEhUTUwgNC4wMSBUcmFuc2l0aW9uYWwvL0VOXFxcIiBcXFwiaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDQvbG9vc2UuZHRkXFxcIj5cIixcblx0XHRcdFwiISEhNHNcIjogIFwiPCFET0NUWVBFIEhUTUwgUFVCTElDIFxcXCItLy9XM0MvL0RURCBIVE1MIDQuMDEvL0VOXFxcIiBcXFwiaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDQvc3RyaWN0LmR0ZFxcXCI+XCIsXG5cdFx0XHRcIiEhIXh0XCI6ICBcIjwhRE9DVFlQRSBodG1sIFBVQkxJQyBcXFwiLS8vVzNDLy9EVEQgWEhUTUwgMS4wIFRyYW5zaXRpb25hbC8vRU5cXFwiIFxcXCJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDEvRFREL3hodG1sMS10cmFuc2l0aW9uYWwuZHRkXFxcIj5cIixcblx0XHRcdFwiISEheHNcIjogIFwiPCFET0NUWVBFIGh0bWwgUFVCTElDIFxcXCItLy9XM0MvL0RURCBYSFRNTCAxLjAgU3RyaWN0Ly9FTlxcXCIgXFxcImh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1sMS9EVEQveGh0bWwxLXN0cmljdC5kdGRcXFwiPlwiLFxuXHRcdFx0XCIhISF4eHNcIjogXCI8IURPQ1RZUEUgaHRtbCBQVUJMSUMgXFxcIi0vL1czQy8vRFREIFhIVE1MIDEuMS8vRU5cXFwiIFxcXCJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDExL0RURC94aHRtbDExLmR0ZFxcXCI+XCIsXG5cblx0XHRcdFwiY1wiOiBcIjwhLS0gfCR7Y2hpbGR9IC0tPlwiLFxuXHRcdFx0XCJjYzppZTZcIjogXCI8IS0tW2lmIGx0ZSBJRSA2XT5cXG5cXHQke2NoaWxkfXxcXG48IVtlbmRpZl0tLT5cIixcblx0XHRcdFwiY2M6aWVcIjogXCI8IS0tW2lmIElFXT5cXG5cXHQke2NoaWxkfXxcXG48IVtlbmRpZl0tLT5cIixcblx0XHRcdFwiY2M6bm9pZVwiOiBcIjwhLS1baWYgIUlFXT48IS0tPlxcblxcdCR7Y2hpbGR9fFxcbjwhLS08IVtlbmRpZl0tLT5cIlxuXHRcdH0sXG5cblx0XHRcImFiYnJldmlhdGlvbnNcIjoge1xuXHRcdFx0XCIhXCI6IFwiaHRtbDo1XCIsXG5cdFx0XHRcImFcIjogXCI8YSBocmVmPVxcXCJcXFwiPlwiLFxuXHRcdFx0XCJhOmxpbmtcIjogXCI8YSBocmVmPVxcXCJodHRwOi8vfFxcXCI+XCIsXG5cdFx0XHRcImE6bWFpbFwiOiBcIjxhIGhyZWY9XFxcIm1haWx0bzp8XFxcIj5cIixcblx0XHRcdFwiYWJiclwiOiBcIjxhYmJyIHRpdGxlPVxcXCJcXFwiPlwiLFxuXHRcdFx0XCJhY3JvbnltXCI6IFwiPGFjcm9ueW0gdGl0bGU9XFxcIlxcXCI+XCIsXG5cdFx0XHRcImJhc2VcIjogXCI8YmFzZSBocmVmPVxcXCJcXFwiIC8+XCIsXG5cdFx0XHRcImJhc2Vmb250XCI6IFwiPGJhc2Vmb250Lz5cIixcblx0XHRcdFwiYnJcIjogXCI8YnIvPlwiLFxuXHRcdFx0XCJmcmFtZVwiOiBcIjxmcmFtZS8+XCIsXG5cdFx0XHRcImhyXCI6IFwiPGhyLz5cIixcblx0XHRcdFwiYmRvXCI6IFwiPGJkbyBkaXI9XFxcIlxcXCI+XCIsXG5cdFx0XHRcImJkbzpyXCI6IFwiPGJkbyBkaXI9XFxcInJ0bFxcXCI+XCIsXG5cdFx0XHRcImJkbzpsXCI6IFwiPGJkbyBkaXI9XFxcImx0clxcXCI+XCIsXG5cdFx0XHRcImNvbFwiOiBcIjxjb2wvPlwiLFxuXHRcdFx0XCJsaW5rXCI6IFwiPGxpbmsgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIiBocmVmPVxcXCJcXFwiIC8+XCIsXG5cdFx0XHRcImxpbms6Y3NzXCI6IFwiPGxpbmsgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIiBocmVmPVxcXCIkezE6c3R5bGV9LmNzc1xcXCIgLz5cIixcblx0XHRcdFwibGluazpwcmludFwiOiBcIjxsaW5rIHJlbD1cXFwic3R5bGVzaGVldFxcXCIgaHJlZj1cXFwiJHsxOnByaW50fS5jc3NcXFwiIG1lZGlhPVxcXCJwcmludFxcXCIgLz5cIixcblx0XHRcdFwibGluazpmYXZpY29uXCI6IFwiPGxpbmsgcmVsPVxcXCJzaG9ydGN1dCBpY29uXFxcIiB0eXBlPVxcXCJpbWFnZS94LWljb25cXFwiIGhyZWY9XFxcIiR7MTpmYXZpY29uLmljb31cXFwiIC8+XCIsXG5cdFx0XHRcImxpbms6dG91Y2hcIjogXCI8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIGhyZWY9XFxcIiR7MTpmYXZpY29uLnBuZ31cXFwiIC8+XCIsXG5cdFx0XHRcImxpbms6cnNzXCI6IFwiPGxpbmsgcmVsPVxcXCJhbHRlcm5hdGVcXFwiIHR5cGU9XFxcImFwcGxpY2F0aW9uL3Jzcyt4bWxcXFwiIHRpdGxlPVxcXCJSU1NcXFwiIGhyZWY9XFxcIiR7MTpyc3MueG1sfVxcXCIgLz5cIixcblx0XHRcdFwibGluazphdG9tXCI6IFwiPGxpbmsgcmVsPVxcXCJhbHRlcm5hdGVcXFwiIHR5cGU9XFxcImFwcGxpY2F0aW9uL2F0b20reG1sXFxcIiB0aXRsZT1cXFwiQXRvbVxcXCIgaHJlZj1cXFwiJHsxOmF0b20ueG1sfVxcXCIgLz5cIixcblx0XHRcdFwibWV0YVwiOiBcIjxtZXRhLz5cIixcblx0XHRcdFwibWV0YTp1dGZcIjogXCI8bWV0YSBodHRwLWVxdWl2PVxcXCJDb250ZW50LVR5cGVcXFwiIGNvbnRlbnQ9XFxcInRleHQvaHRtbDtjaGFyc2V0PVVURi04XFxcIiAvPlwiLFxuXHRcdFx0XCJtZXRhOndpblwiOiBcIjxtZXRhIGh0dHAtZXF1aXY9XFxcIkNvbnRlbnQtVHlwZVxcXCIgY29udGVudD1cXFwidGV4dC9odG1sO2NoYXJzZXQ9d2luZG93cy0xMjUxXFxcIiAvPlwiLFxuXHRcdFx0XCJtZXRhOnZwXCI6IFwiPG1ldGEgbmFtZT1cXFwidmlld3BvcnRcXFwiIGNvbnRlbnQ9XFxcIndpZHRoPSR7MTpkZXZpY2Utd2lkdGh9LCB1c2VyLXNjYWxhYmxlPSR7Mjpub30sIGluaXRpYWwtc2NhbGU9JHszOjEuMH0sIG1heGltdW0tc2NhbGU9JHs0OjEuMH0sIG1pbmltdW0tc2NhbGU9JHs1OjEuMH1cXFwiIC8+XCIsXG5cdFx0XHRcIm1ldGE6Y29tcGF0XCI6IFwiPG1ldGEgaHR0cC1lcXVpdj1cXFwiWC1VQS1Db21wYXRpYmxlXFxcIiBjb250ZW50PVxcXCIkezE6SUU9N31cXFwiIC8+XCIsXG5cdFx0XHRcInN0eWxlXCI6IFwiPHN0eWxlPlwiLFxuXHRcdFx0XCJzY3JpcHRcIjogXCI8c2NyaXB0PlwiLFxuXHRcdFx0XCJzY3JpcHQ6c3JjXCI6IFwiPHNjcmlwdCBzcmM9XFxcIlxcXCI+XCIsXG5cdFx0XHRcImltZ1wiOiBcIjxpbWcgc3JjPVxcXCJcXFwiIGFsdD1cXFwiXFxcIiAvPlwiLFxuXHRcdFx0XCJpZnJhbWVcIjogXCI8aWZyYW1lIHNyYz1cXFwiXFxcIiBmcmFtZWJvcmRlcj1cXFwiMFxcXCI+XCIsXG5cdFx0XHRcImVtYmVkXCI6IFwiPGVtYmVkIHNyYz1cXFwiXFxcIiB0eXBlPVxcXCJcXFwiIC8+XCIsXG5cdFx0XHRcIm9iamVjdFwiOiBcIjxvYmplY3QgZGF0YT1cXFwiXFxcIiB0eXBlPVxcXCJcXFwiPlwiLFxuXHRcdFx0XCJwYXJhbVwiOiBcIjxwYXJhbSBuYW1lPVxcXCJcXFwiIHZhbHVlPVxcXCJcXFwiIC8+XCIsXG5cdFx0XHRcIm1hcFwiOiBcIjxtYXAgbmFtZT1cXFwiXFxcIj5cIixcblx0XHRcdFwiYXJlYVwiOiBcIjxhcmVhIHNoYXBlPVxcXCJcXFwiIGNvb3Jkcz1cXFwiXFxcIiBocmVmPVxcXCJcXFwiIGFsdD1cXFwiXFxcIiAvPlwiLFxuXHRcdFx0XCJhcmVhOmRcIjogXCI8YXJlYSBzaGFwZT1cXFwiZGVmYXVsdFxcXCIgaHJlZj1cXFwiXFxcIiBhbHQ9XFxcIlxcXCIgLz5cIixcblx0XHRcdFwiYXJlYTpjXCI6IFwiPGFyZWEgc2hhcGU9XFxcImNpcmNsZVxcXCIgY29vcmRzPVxcXCJcXFwiIGhyZWY9XFxcIlxcXCIgYWx0PVxcXCJcXFwiIC8+XCIsXG5cdFx0XHRcImFyZWE6clwiOiBcIjxhcmVhIHNoYXBlPVxcXCJyZWN0XFxcIiBjb29yZHM9XFxcIlxcXCIgaHJlZj1cXFwiXFxcIiBhbHQ9XFxcIlxcXCIgLz5cIixcblx0XHRcdFwiYXJlYTpwXCI6IFwiPGFyZWEgc2hhcGU9XFxcInBvbHlcXFwiIGNvb3Jkcz1cXFwiXFxcIiBocmVmPVxcXCJcXFwiIGFsdD1cXFwiXFxcIiAvPlwiLFxuXHRcdFx0XCJmb3JtXCI6IFwiPGZvcm0gYWN0aW9uPVxcXCJcXFwiPlwiLFxuXHRcdFx0XCJmb3JtOmdldFwiOiBcIjxmb3JtIGFjdGlvbj1cXFwiXFxcIiBtZXRob2Q9XFxcImdldFxcXCI+XCIsXG5cdFx0XHRcImZvcm06cG9zdFwiOiBcIjxmb3JtIGFjdGlvbj1cXFwiXFxcIiBtZXRob2Q9XFxcInBvc3RcXFwiPlwiLFxuXHRcdFx0XCJsYWJlbFwiOiBcIjxsYWJlbCBmb3I9XFxcIlxcXCI+XCIsXG5cdFx0XHRcImlucHV0XCI6IFwiPGlucHV0IHR5cGU9XFxcIiR7MTp0ZXh0fVxcXCIgLz5cIixcblx0XHRcdFwiaW5wXCI6IFwiPGlucHV0IHR5cGU9XFxcIiR7MTp0ZXh0fVxcXCIgbmFtZT1cXFwiXFxcIiBpZD1cXFwiXFxcIiAvPlwiLFxuXHRcdFx0XCJpbnB1dDpoaWRkZW5cIjogXCJpbnB1dFt0eXBlPWhpZGRlbiBuYW1lXVwiLFxuXHRcdFx0XCJpbnB1dDpoXCI6IFwiaW5wdXQ6aGlkZGVuXCIsXG5cdFx0XHRcImlucHV0OnRleHRcIjogXCJpbnBcIixcblx0XHRcdFwiaW5wdXQ6dFwiOiBcImlucFwiLFxuXHRcdFx0XCJpbnB1dDpzZWFyY2hcIjogXCJpbnBbdHlwZT1zZWFyY2hdXCIsXG5cdFx0XHRcImlucHV0OmVtYWlsXCI6IFwiaW5wW3R5cGU9ZW1haWxdXCIsXG5cdFx0XHRcImlucHV0OnVybFwiOiBcImlucFt0eXBlPXVybF1cIixcblx0XHRcdFwiaW5wdXQ6cGFzc3dvcmRcIjogXCJpbnBbdHlwZT1wYXNzd29yZF1cIixcblx0XHRcdFwiaW5wdXQ6cFwiOiBcImlucHV0OnBhc3N3b3JkXCIsXG5cdFx0XHRcImlucHV0OmRhdGV0aW1lXCI6IFwiaW5wW3R5cGU9ZGF0ZXRpbWVdXCIsXG5cdFx0XHRcImlucHV0OmRhdGVcIjogXCJpbnBbdHlwZT1kYXRlXVwiLFxuXHRcdFx0XCJpbnB1dDpkYXRldGltZS1sb2NhbFwiOiBcImlucFt0eXBlPWRhdGV0aW1lLWxvY2FsXVwiLFxuXHRcdFx0XCJpbnB1dDptb250aFwiOiBcImlucFt0eXBlPW1vbnRoXVwiLFxuXHRcdFx0XCJpbnB1dDp3ZWVrXCI6IFwiaW5wW3R5cGU9d2Vla11cIixcblx0XHRcdFwiaW5wdXQ6dGltZVwiOiBcImlucFt0eXBlPXRpbWVdXCIsXG5cdFx0XHRcImlucHV0Om51bWJlclwiOiBcImlucFt0eXBlPW51bWJlcl1cIixcblx0XHRcdFwiaW5wdXQ6Y29sb3JcIjogXCJpbnBbdHlwZT1jb2xvcl1cIixcblx0XHRcdFwiaW5wdXQ6Y2hlY2tib3hcIjogXCJpbnBbdHlwZT1jaGVja2JveF1cIixcblx0XHRcdFwiaW5wdXQ6Y1wiOiBcImlucHV0OmNoZWNrYm94XCIsXG5cdFx0XHRcImlucHV0OnJhZGlvXCI6IFwiaW5wW3R5cGU9cmFkaW9dXCIsXG5cdFx0XHRcImlucHV0OnJcIjogXCJpbnB1dDpyYWRpb1wiLFxuXHRcdFx0XCJpbnB1dDpyYW5nZVwiOiBcImlucFt0eXBlPXJhbmdlXVwiLFxuXHRcdFx0XCJpbnB1dDpmaWxlXCI6IFwiaW5wW3R5cGU9ZmlsZV1cIixcblx0XHRcdFwiaW5wdXQ6ZlwiOiBcImlucHV0OmZpbGVcIixcblx0XHRcdFwiaW5wdXQ6c3VibWl0XCI6IFwiPGlucHV0IHR5cGU9XFxcInN1Ym1pdFxcXCIgdmFsdWU9XFxcIlxcXCIgLz5cIixcblx0XHRcdFwiaW5wdXQ6c1wiOiBcImlucHV0OnN1Ym1pdFwiLFxuXHRcdFx0XCJpbnB1dDppbWFnZVwiOiBcIjxpbnB1dCB0eXBlPVxcXCJpbWFnZVxcXCIgc3JjPVxcXCJcXFwiIGFsdD1cXFwiXFxcIiAvPlwiLFxuXHRcdFx0XCJpbnB1dDppXCI6IFwiaW5wdXQ6aW1hZ2VcIixcblx0XHRcdFwiaW5wdXQ6YnV0dG9uXCI6IFwiPGlucHV0IHR5cGU9XFxcImJ1dHRvblxcXCIgdmFsdWU9XFxcIlxcXCIgLz5cIixcblx0XHRcdFwiaW5wdXQ6YlwiOiBcImlucHV0OmJ1dHRvblwiLFxuXHRcdFx0XCJpc2luZGV4XCI6IFwiPGlzaW5kZXgvPlwiLFxuXHRcdFx0XCJpbnB1dDpyZXNldFwiOiBcImlucHV0OmJ1dHRvblt0eXBlPXJlc2V0XVwiLFxuXHRcdFx0XCJzZWxlY3RcIjogXCI8c2VsZWN0IG5hbWU9XFxcIlxcXCIgaWQ9XFxcIlxcXCI+XCIsXG5cdFx0XHRcInNlbGVjdDpkaXNhYmxlZFwiOiBcInNlbGVjdFtkaXNhYmxlZF1cIixcblx0XHRcdFwic2VsZWN0OmRcIjogXCJzZWxlY3RbZGlzYWJsZWRdXCIsXG5cdFx0XHRcIm9wdGlvblwiOiBcIjxvcHRpb24gdmFsdWU9XFxcIlxcXCI+XCIsXG5cdFx0XHRcInRleHRhcmVhXCI6IFwiPHRleHRhcmVhIG5hbWU9XFxcIlxcXCIgaWQ9XFxcIlxcXCIgY29scz1cXFwiJHsxOjMwfVxcXCIgcm93cz1cXFwiJHsyOjEwfVxcXCI+XCIsXG5cdFx0XHRcIm1hcnF1ZWVcIjogXCI8bWFycXVlZSBiZWhhdmlvcj1cXFwiXFxcIiBkaXJlY3Rpb249XFxcIlxcXCI+XCIsXG5cdFx0XHRcIm1lbnU6Y29udGV4dFwiOiBcIm1lbnVbdHlwZT1jb250ZXh0XT5cIixcblx0XHRcdFwibWVudTpjXCI6IFwibWVudTpjb250ZXh0XCIsXG5cdFx0XHRcIm1lbnU6dG9vbGJhclwiOiBcIm1lbnVbdHlwZT10b29sYmFyXT5cIixcblx0XHRcdFwibWVudTp0XCI6IFwibWVudTp0b29sYmFyXCIsXG5cdFx0XHRcInZpZGVvXCI6IFwiPHZpZGVvIHNyYz1cXFwiXFxcIj5cIixcblx0XHRcdFwiYXVkaW9cIjogXCI8YXVkaW8gc3JjPVxcXCJcXFwiPlwiLFxuXHRcdFx0XCJodG1sOnhtbFwiOiBcIjxodG1sIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXFxcIj5cIixcblx0XHRcdFwia2V5Z2VuXCI6IFwiPGtleWdlbi8+XCIsXG5cdFx0XHRcImNvbW1hbmRcIjogXCI8Y29tbWFuZC8+XCIsXG5cdFx0XHRcImJ1dHRvbjpzdWJtaXRcIiA6IFwiYnV0dG9uW3R5cGU9c3VibWl0XVwiLFxuXHRcdFx0XCJidXR0b246c1wiIDogXCJidXR0b25bdHlwZT1zdWJtaXRdXCIsXG5cdFx0XHRcImJ1dHRvbjpyZXNldFwiIDogXCJidXR0b25bdHlwZT1yZXNldF1cIixcblx0XHRcdFwiYnV0dG9uOnJcIiA6IFwiYnV0dG9uW3R5cGU9cmVzZXRdXCIsXG5cdFx0XHRcImJ1dHRvbjpkaXNhYmxlZFwiIDogXCJidXR0b25bZGlzYWJsZWRdXCIsXG5cdFx0XHRcImJ1dHRvbjpkXCIgOiBcImJ1dHRvbltkaXNhYmxlZF1cIixcblx0XHRcdFwiZmllbGRzZXQ6ZGlzYWJsZWRcIiA6IFwiZmllbGRzZXRbZGlzYWJsZWRdXCIsXG5cdFx0XHRcImZpZWxkc2V0OmRcIiA6IFwiZmllbGRzZXRbZGlzYWJsZWRdXCIsXG5cblx0XHRcdFwiYnFcIjogXCJibG9ja3F1b3RlXCIsXG5cdFx0XHRcImFjclwiOiBcImFjcm9ueW1cIixcblx0XHRcdFwiZmlnXCI6IFwiZmlndXJlXCIsXG5cdFx0XHRcImZpZ2NcIjogXCJmaWdjYXB0aW9uXCIsXG5cdFx0XHRcImlmclwiOiBcImlmcmFtZVwiLFxuXHRcdFx0XCJlbWJcIjogXCJlbWJlZFwiLFxuXHRcdFx0XCJvYmpcIjogXCJvYmplY3RcIixcblx0XHRcdFwic3JjXCI6IFwic291cmNlXCIsXG5cdFx0XHRcImNhcFwiOiBcImNhcHRpb25cIixcblx0XHRcdFwiY29sZ1wiOiBcImNvbGdyb3VwXCIsXG5cdFx0XHRcImZzdFwiOiBcImZpZWxkc2V0XCIsXG5cdFx0XHRcImZzdDpkXCI6IFwiZmllbGRzZXRbZGlzYWJsZWRdXCIsXG5cdFx0XHRcImJ0blwiOiBcImJ1dHRvblwiLFxuXHRcdFx0XCJidG46YlwiOiBcImJ1dHRvblt0eXBlPWJ1dHRvbl1cIixcblx0XHRcdFwiYnRuOnJcIjogXCJidXR0b25bdHlwZT1yZXNldF1cIixcblx0XHRcdFwiYnRuOnNcIjogXCJidXR0b25bdHlwZT1zdWJtaXRdXCIsXG5cdFx0XHRcImJ0bjpkXCI6IFwiYnV0dG9uW2Rpc2FibGVkXVwiLFxuXHRcdFx0XCJvcHRnXCI6IFwib3B0Z3JvdXBcIixcblx0XHRcdFwib3B0XCI6IFwib3B0aW9uXCIsXG5cdFx0XHRcInRhcmVhXCI6IFwidGV4dGFyZWFcIixcblx0XHRcdFwibGVnXCI6IFwibGVnZW5kXCIsXG5cdFx0XHRcInNlY3RcIjogXCJzZWN0aW9uXCIsXG5cdFx0XHRcImFydFwiOiBcImFydGljbGVcIixcblx0XHRcdFwiaGRyXCI6IFwiaGVhZGVyXCIsXG5cdFx0XHRcImZ0clwiOiBcImZvb3RlclwiLFxuXHRcdFx0XCJhZHJcIjogXCJhZGRyZXNzXCIsXG5cdFx0XHRcImRsZ1wiOiBcImRpYWxvZ1wiLFxuXHRcdFx0XCJzdHJcIjogXCJzdHJvbmdcIixcblx0XHRcdFwicHJvZ1wiOiBcInByb2dyZXNzXCIsXG5cdFx0XHRcImZzZXRcIjogXCJmaWVsZHNldFwiLFxuXHRcdFx0XCJmc2V0OmRcIjogXCJmaWVsZHNldFtkaXNhYmxlZF1cIixcblx0XHRcdFwiZGF0YWdcIjogXCJkYXRhZ3JpZFwiLFxuXHRcdFx0XCJkYXRhbFwiOiBcImRhdGFsaXN0XCIsXG5cdFx0XHRcImtnXCI6IFwia2V5Z2VuXCIsXG5cdFx0XHRcIm91dFwiOiBcIm91dHB1dFwiLFxuXHRcdFx0XCJkZXRcIjogXCJkZXRhaWxzXCIsXG5cdFx0XHRcImNtZFwiOiBcImNvbW1hbmRcIixcblx0XHRcdFwiZG9jXCI6IFwiaHRtbD4oaGVhZD5tZXRhW2NoYXJzZXQ9VVRGLThdK3RpdGxleyR7MTpEb2N1bWVudH19KStib2R5XCIsXG5cdFx0XHRcImRvYzRcIjogXCJodG1sPihoZWFkPm1ldGFbaHR0cC1lcXVpdj1cXFwiQ29udGVudC1UeXBlXFxcIiBjb250ZW50PVxcXCJ0ZXh0L2h0bWw7Y2hhcnNldD0ke2NoYXJzZXR9XFxcIl0rdGl0bGV7JHsxOkRvY3VtZW50fX0pK2JvZHlcIixcblxuXHRcdFx0XCJodG1sOjR0XCI6ICBcIiEhITR0K2RvYzRbbGFuZz0ke2xhbmd9XVwiLFxuXHRcdFx0XCJodG1sOjRzXCI6ICBcIiEhITRzK2RvYzRbbGFuZz0ke2xhbmd9XVwiLFxuXHRcdFx0XCJodG1sOnh0XCI6ICBcIiEhIXh0K2RvYzRbeG1sbnM9aHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCB4bWw6bGFuZz0ke2xhbmd9XVwiLFxuXHRcdFx0XCJodG1sOnhzXCI6ICBcIiEhIXhzK2RvYzRbeG1sbnM9aHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCB4bWw6bGFuZz0ke2xhbmd9XVwiLFxuXHRcdFx0XCJodG1sOnh4c1wiOiBcIiEhIXh4cytkb2M0W3htbG5zPWh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwgeG1sOmxhbmc9JHtsYW5nfV1cIixcblx0XHRcdFwiaHRtbDo1XCI6ICAgXCIhISErZG9jW2xhbmc9JHtsYW5nfV1cIixcblxuXHRcdFx0XCJvbCtcIjogXCJvbD5saVwiLFxuXHRcdFx0XCJ1bCtcIjogXCJ1bD5saVwiLFxuXHRcdFx0XCJkbCtcIjogXCJkbD5kdCtkZFwiLFxuXHRcdFx0XCJtYXArXCI6IFwibWFwPmFyZWFcIixcblx0XHRcdFwidGFibGUrXCI6IFwidGFibGU+dHI+dGRcIixcblx0XHRcdFwiY29sZ3JvdXArXCI6IFwiY29sZ3JvdXA+Y29sXCIsXG5cdFx0XHRcImNvbGcrXCI6IFwiY29sZ3JvdXA+Y29sXCIsXG5cdFx0XHRcInRyK1wiOiBcInRyPnRkXCIsXG5cdFx0XHRcInNlbGVjdCtcIjogXCJzZWxlY3Q+b3B0aW9uXCIsXG5cdFx0XHRcIm9wdGdyb3VwK1wiOiBcIm9wdGdyb3VwPm9wdGlvblwiLFxuXHRcdFx0XCJvcHRnK1wiOiBcIm9wdGdyb3VwPm9wdGlvblwiXG5cdFx0fVxuXHR9LFxuXG5cdFwieG1sXCI6IHtcblx0XHRcImV4dGVuZHNcIjogXCJodG1sXCIsXG5cdFx0XCJwcm9maWxlXCI6IFwieG1sXCIsXG5cdFx0XCJmaWx0ZXJzXCI6IFwiaHRtbFwiXG5cdH0sXG5cblx0XCJ4c2xcIjoge1xuXHRcdFwiZXh0ZW5kc1wiOiBcImh0bWxcIixcblx0XHRcInByb2ZpbGVcIjogXCJ4bWxcIixcblx0XHRcImZpbHRlcnNcIjogXCJodG1sLCB4c2xcIixcblx0XHRcImFiYnJldmlhdGlvbnNcIjoge1xuXHRcdFx0XCJ0bVwiOiBcIjx4c2w6dGVtcGxhdGUgbWF0Y2g9XFxcIlxcXCIgbW9kZT1cXFwiXFxcIj5cIixcblx0XHRcdFwidG1hdGNoXCI6IFwidG1cIixcblx0XHRcdFwidG5cIjogXCI8eHNsOnRlbXBsYXRlIG5hbWU9XFxcIlxcXCI+XCIsXG5cdFx0XHRcInRuYW1lXCI6IFwidG5cIixcblx0XHRcdFwiY2FsbFwiOiBcIjx4c2w6Y2FsbC10ZW1wbGF0ZSBuYW1lPVxcXCJcXFwiLz5cIixcblx0XHRcdFwiYXBcIjogXCI8eHNsOmFwcGx5LXRlbXBsYXRlcyBzZWxlY3Q9XFxcIlxcXCIgbW9kZT1cXFwiXFxcIi8+XCIsXG5cdFx0XHRcImFwaVwiOiBcIjx4c2w6YXBwbHktaW1wb3J0cy8+XCIsXG5cdFx0XHRcImltcFwiOiBcIjx4c2w6aW1wb3J0IGhyZWY9XFxcIlxcXCIvPlwiLFxuXHRcdFx0XCJpbmNcIjogXCI8eHNsOmluY2x1ZGUgaHJlZj1cXFwiXFxcIi8+XCIsXG5cblx0XHRcdFwiY2hcIjogXCI8eHNsOmNob29zZT5cIixcblx0XHRcdFwieHNsOndoZW5cIjogXCI8eHNsOndoZW4gdGVzdD1cXFwiXFxcIj5cIixcblx0XHRcdFwid2hcIjogXCJ4c2w6d2hlblwiLFxuXHRcdFx0XCJvdFwiOiBcIjx4c2w6b3RoZXJ3aXNlPlwiLFxuXHRcdFx0XCJpZlwiOiBcIjx4c2w6aWYgdGVzdD1cXFwiXFxcIj5cIixcblxuXHRcdFx0XCJwYXJcIjogXCI8eHNsOnBhcmFtIG5hbWU9XFxcIlxcXCI+XCIsXG5cdFx0XHRcInBhcmVcIjogXCI8eHNsOnBhcmFtIG5hbWU9XFxcIlxcXCIgc2VsZWN0PVxcXCJcXFwiLz5cIixcblx0XHRcdFwidmFyXCI6IFwiPHhzbDp2YXJpYWJsZSBuYW1lPVxcXCJcXFwiPlwiLFxuXHRcdFx0XCJ2YXJlXCI6IFwiPHhzbDp2YXJpYWJsZSBuYW1lPVxcXCJcXFwiIHNlbGVjdD1cXFwiXFxcIi8+XCIsXG5cdFx0XHRcIndwXCI6IFwiPHhzbDp3aXRoLXBhcmFtIG5hbWU9XFxcIlxcXCIgc2VsZWN0PVxcXCJcXFwiLz5cIixcblx0XHRcdFwia2V5XCI6IFwiPHhzbDprZXkgbmFtZT1cXFwiXFxcIiBtYXRjaD1cXFwiXFxcIiB1c2U9XFxcIlxcXCIvPlwiLFxuXG5cdFx0XHRcImVsZW1cIjogXCI8eHNsOmVsZW1lbnQgbmFtZT1cXFwiXFxcIj5cIixcblx0XHRcdFwiYXR0clwiOiBcIjx4c2w6YXR0cmlidXRlIG5hbWU9XFxcIlxcXCI+XCIsXG5cdFx0XHRcImF0dHJzXCI6IFwiPHhzbDphdHRyaWJ1dGUtc2V0IG5hbWU9XFxcIlxcXCI+XCIsXG5cblx0XHRcdFwiY3BcIjogXCI8eHNsOmNvcHkgc2VsZWN0PVxcXCJcXFwiLz5cIixcblx0XHRcdFwiY29cIjogXCI8eHNsOmNvcHktb2Ygc2VsZWN0PVxcXCJcXFwiLz5cIixcblx0XHRcdFwidmFsXCI6IFwiPHhzbDp2YWx1ZS1vZiBzZWxlY3Q9XFxcIlxcXCIvPlwiLFxuXHRcdFx0XCJlYWNoXCI6IFwiPHhzbDpmb3ItZWFjaCBzZWxlY3Q9XFxcIlxcXCI+XCIsXG5cdFx0XHRcImZvclwiOiBcImVhY2hcIixcblx0XHRcdFwidGV4XCI6IFwiPHhzbDp0ZXh0PjwveHNsOnRleHQ+XCIsXG5cblx0XHRcdFwiY29tXCI6IFwiPHhzbDpjb21tZW50PlwiLFxuXHRcdFx0XCJtc2dcIjogXCI8eHNsOm1lc3NhZ2UgdGVybWluYXRlPVxcXCJub1xcXCI+XCIsXG5cdFx0XHRcImZhbGxcIjogXCI8eHNsOmZhbGxiYWNrPlwiLFxuXHRcdFx0XCJudW1cIjogXCI8eHNsOm51bWJlciB2YWx1ZT1cXFwiXFxcIi8+XCIsXG5cdFx0XHRcIm5hbVwiOiBcIjxuYW1lc3BhY2UtYWxpYXMgc3R5bGVzaGVldC1wcmVmaXg9XFxcIlxcXCIgcmVzdWx0LXByZWZpeD1cXFwiXFxcIi8+XCIsXG5cdFx0XHRcInByZXNcIjogXCI8eHNsOnByZXNlcnZlLXNwYWNlIGVsZW1lbnRzPVxcXCJcXFwiLz5cIixcblx0XHRcdFwic3RyaXBcIjogXCI8eHNsOnN0cmlwLXNwYWNlIGVsZW1lbnRzPVxcXCJcXFwiLz5cIixcblx0XHRcdFwicHJvY1wiOiBcIjx4c2w6cHJvY2Vzc2luZy1pbnN0cnVjdGlvbiBuYW1lPVxcXCJcXFwiPlwiLFxuXHRcdFx0XCJzb3J0XCI6IFwiPHhzbDpzb3J0IHNlbGVjdD1cXFwiXFxcIiBvcmRlcj1cXFwiXFxcIi8+XCIsXG5cblx0XHRcdFwiY2hvb3NlK1wiOiBcInhzbDpjaG9vc2U+eHNsOndoZW4reHNsOm90aGVyd2lzZVwiLFxuXHRcdFx0XCJ4c2xcIjogXCIhISEreHNsOnN0eWxlc2hlZXRbdmVyc2lvbj0xLjAgeG1sbnM6eHNsPWh0dHA6Ly93d3cudzMub3JnLzE5OTkvWFNML1RyYW5zZm9ybV0+e1xcbnx9XCJcblx0XHR9LFxuXHRcdFwic25pcHBldHNcIjoge1xuXHRcdFx0XCIhISFcIjogXCI8P3htbCB2ZXJzaW9uPVxcXCIxLjBcXFwiIGVuY29kaW5nPVxcXCJVVEYtOFxcXCI/PlwiXG5cdFx0fVxuXHR9LFxuXG5cdFwiaGFtbFwiOiB7XG5cdFx0XCJmaWx0ZXJzXCI6IFwiaGFtbFwiLFxuXHRcdFwiZXh0ZW5kc1wiOiBcImh0bWxcIixcblx0XHRcInByb2ZpbGVcIjogXCJ4bWxcIlxuXHR9LFxuXG5cdFwic2Nzc1wiOiB7XG5cdFx0XCJleHRlbmRzXCI6IFwiY3NzXCJcblx0fSxcblxuXHRcInNhc3NcIjoge1xuXHRcdFwiZXh0ZW5kc1wiOiBcImNzc1wiXG5cdH0sXG5cblx0XCJsZXNzXCI6IHtcblx0XHRcImV4dGVuZHNcIjogXCJjc3NcIlxuXHR9LFxuXG5cdFwic3R5bHVzXCI6IHtcblx0XHRcImV4dGVuZHNcIjogXCJjc3NcIlxuXHR9LFxuXG5cdFwic3R5bFwiOiB7XG5cdFx0XCJleHRlbmRzXCI6IFwic3R5bHVzXCJcblx0fVxufVxuO1xudmFyIHJlcyA9IHJlcXVpcmUoJ3Jlc291cmNlcycpO1xudmFyIHVzZXJEYXRhID0gcmVzLmdldFZvY2FidWxhcnkoJ3VzZXInKSB8fCB7fTtcbnJlcy5zZXRWb2NhYnVsYXJ5KHJlcXVpcmUoJ3V0aWxzJykuZGVlcE1lcmdlKHVzZXJEYXRhLCBzbmlwcGV0cyksICd1c2VyJyk7XG59KTtcbiIsImRlZmluZShcImFjZS9zbmlwcGV0c1wiLFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIm1vZHVsZVwiLFwiYWNlL2xpYi9vb3BcIixcImFjZS9saWIvZXZlbnRfZW1pdHRlclwiLFwiYWNlL2xpYi9sYW5nXCIsXCJhY2UvcmFuZ2VcIixcImFjZS9hbmNob3JcIixcImFjZS9rZXlib2FyZC9oYXNoX2hhbmRsZXJcIixcImFjZS90b2tlbml6ZXJcIixcImFjZS9saWIvZG9tXCIsXCJhY2UvZWRpdG9yXCJdLGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKFwiLi9saWIvb29wXCIpLGk9ZShcIi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyLHM9ZShcIi4vbGliL2xhbmdcIiksbz1lKFwiLi9yYW5nZVwiKS5SYW5nZSx1PWUoXCIuL2FuY2hvclwiKS5BbmNob3IsYT1lKFwiLi9rZXlib2FyZC9oYXNoX2hhbmRsZXJcIikuSGFzaEhhbmRsZXIsZj1lKFwiLi90b2tlbml6ZXJcIikuVG9rZW5pemVyLGw9by5jb21wYXJlUG9pbnRzLGM9ZnVuY3Rpb24oKXt0aGlzLnNuaXBwZXRNYXA9e30sdGhpcy5zbmlwcGV0TmFtZU1hcD17fX07KGZ1bmN0aW9uKCl7ci5pbXBsZW1lbnQodGhpcyxpKSx0aGlzLmdldFRva2VuaXplcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3JldHVybiBlPWUuc3Vic3RyKDEpLC9eXFxkKyQvLnRlc3QoZSkmJiFuLmluRm9ybWF0U3RyaW5nP1t7dGFic3RvcElkOnBhcnNlSW50KGUsMTApfV06W3t0ZXh0OmV9XX1mdW5jdGlvbiB0KGUpe3JldHVyblwiKD86W15cXFxcXFxcXFwiK2UrXCJdfFxcXFxcXFxcLilcIn1yZXR1cm4gYy4kdG9rZW5pemVyPW5ldyBmKHtzdGFydDpbe3JlZ2V4Oi86Lyxvbk1hdGNoOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbi5sZW5ndGgmJm5bMF0uZXhwZWN0SWY/KG5bMF0uZXhwZWN0SWY9ITEsblswXS5lbHNlQnJhbmNoPW5bMF0sW25bMF1dKTpcIjpcIn19LHtyZWdleDovXFxcXC4vLG9uTWF0Y2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWVbMV07cmV0dXJuIHI9PVwifVwiJiZuLmxlbmd0aD9lPXI6XCJgJFxcXFxcIi5pbmRleE9mKHIpIT0tMT9lPXI6bi5pbkZvcm1hdFN0cmluZyYmKHI9PVwiblwiP2U9XCJcXG5cIjpyPT1cInRcIj9lPVwiXFxuXCI6XCJ1bFVMRVwiLmluZGV4T2YocikhPS0xJiYoZT17Y2hhbmdlQ2FzZTpyLGxvY2FsOnI+XCJhXCJ9KSksW2VdfX0se3JlZ2V4Oi99Lyxvbk1hdGNoOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bbi5sZW5ndGg/bi5zaGlmdCgpOmVdfX0se3JlZ2V4Oi9cXCQoPzpcXGQrfFxcdyspLyxvbk1hdGNoOmV9LHtyZWdleDovXFwkXFx7W1xcZEEtWl9hLXpdKy8sb25NYXRjaDpmdW5jdGlvbih0LG4scil7dmFyIGk9ZSh0LnN1YnN0cigxKSxuLHIpO3JldHVybiByLnVuc2hpZnQoaVswXSksaX0sbmV4dDpcInNuaXBwZXRWYXJcIn0se3JlZ2V4Oi9cXG4vLHRva2VuOlwibmV3bGluZVwiLG1lcmdlOiExfV0sc25pcHBldFZhcjpbe3JlZ2V4OlwiXFxcXHxcIit0KFwiXFxcXHxcIikrXCIqXFxcXHxcIixvbk1hdGNoOmZ1bmN0aW9uKGUsdCxuKXtuWzBdLmNob2ljZXM9ZS5zbGljZSgxLC0xKS5zcGxpdChcIixcIil9LG5leHQ6XCJzdGFydFwifSx7cmVnZXg6XCIvKFwiK3QoXCIvXCIpK1wiKykvKD86KFwiK3QoXCIvXCIpK1wiKikvKShcXFxcdyopOj9cIixvbk1hdGNoOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uWzBdO3JldHVybiByLmZtdFN0cmluZz1lLGU9dGhpcy5zcGxpdFJlZ2V4LmV4ZWMoZSksci5ndWFyZD1lWzFdLHIuZm10PWVbMl0sci5mbGFnPWVbM10sXCJcIn0sbmV4dDpcInN0YXJ0XCJ9LHtyZWdleDpcImBcIit0KFwiYFwiKStcIipgXCIsb25NYXRjaDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIG5bMF0uY29kZT1lLnNwbGljZSgxLC0xKSxcIlwifSxuZXh0Olwic3RhcnRcIn0se3JlZ2V4OlwiXFxcXD9cIixvbk1hdGNoOmZ1bmN0aW9uKGUsdCxuKXtuWzBdJiYoblswXS5leHBlY3RJZj0hMCl9LG5leHQ6XCJzdGFydFwifSx7cmVnZXg6XCIoW146fVxcXFxcXFxcXXxcXFxcXFxcXC4pKjo/XCIsdG9rZW46XCJcIixuZXh0Olwic3RhcnRcIn1dLGZvcm1hdFN0cmluZzpbe3JlZ2V4OlwiLyhcIit0KFwiL1wiKStcIispL1wiLHRva2VuOlwicmVnZXhcIn0se3JlZ2V4OlwiXCIsb25NYXRjaDpmdW5jdGlvbihlLHQsbil7bi5pbkZvcm1hdFN0cmluZz0hMH0sbmV4dDpcInN0YXJ0XCJ9XX0pLGMucHJvdG90eXBlLmdldFRva2VuaXplcj1mdW5jdGlvbigpe3JldHVybiBjLiR0b2tlbml6ZXJ9LGMuJHRva2VuaXplcn0sdGhpcy50b2tlbml6ZVRtU25pcHBldD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmdldFRva2VuaXplcigpLmdldExpbmVUb2tlbnMoZSx0KS50b2tlbnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnZhbHVlfHxlfSl9LHRoaXMuJGdldERlZmF1bHRWYWx1ZT1mdW5jdGlvbihlLHQpe2lmKC9eW0EtWl1cXGQrJC8udGVzdCh0KSl7dmFyIG49dC5zdWJzdHIoMSk7cmV0dXJuKHRoaXMudmFyaWFibGVzW3RbMF0rXCJfX1wiXXx8e30pW25dfWlmKC9eXFxkKyQvLnRlc3QodCkpcmV0dXJuKHRoaXMudmFyaWFibGVzLl9ffHx7fSlbdF07dD10LnJlcGxhY2UoL15UTV8vLFwiXCIpO2lmKCFlKXJldHVybjt2YXIgcj1lLnNlc3Npb247c3dpdGNoKHQpe2Nhc2VcIkNVUlJFTlRfV09SRFwiOnZhciBpPXIuZ2V0V29yZFJhbmdlKCk7Y2FzZVwiU0VMRUNUSU9OXCI6Y2FzZVwiU0VMRUNURURfVEVYVFwiOnJldHVybiByLmdldFRleHRSYW5nZShpKTtjYXNlXCJDVVJSRU5UX0xJTkVcIjpyZXR1cm4gci5nZXRMaW5lKGUuZ2V0Q3Vyc29yUG9zaXRpb24oKS5yb3cpO2Nhc2VcIlBSRVZfTElORVwiOnJldHVybiByLmdldExpbmUoZS5nZXRDdXJzb3JQb3NpdGlvbigpLnJvdy0xKTtjYXNlXCJMSU5FX0lOREVYXCI6cmV0dXJuIGUuZ2V0Q3Vyc29yUG9zaXRpb24oKS5jb2x1bW47Y2FzZVwiTElORV9OVU1CRVJcIjpyZXR1cm4gZS5nZXRDdXJzb3JQb3NpdGlvbigpLnJvdysxO2Nhc2VcIlNPRlRfVEFCU1wiOnJldHVybiByLmdldFVzZVNvZnRUYWJzKCk/XCJZRVNcIjpcIk5PXCI7Y2FzZVwiVEFCX1NJWkVcIjpyZXR1cm4gci5nZXRUYWJTaXplKCk7Y2FzZVwiRklMRU5BTUVcIjpjYXNlXCJGSUxFUEFUSFwiOnJldHVyblwiXCI7Y2FzZVwiRlVMTE5BTUVcIjpyZXR1cm5cIkFjZVwifX0sdGhpcy52YXJpYWJsZXM9e30sdGhpcy5nZXRWYXJpYWJsZVZhbHVlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMudmFyaWFibGVzLmhhc093blByb3BlcnR5KHQpP3RoaXMudmFyaWFibGVzW3RdKGUsdCl8fFwiXCI6dGhpcy4kZ2V0RGVmYXVsdFZhbHVlKGUsdCl8fFwiXCJ9LHRoaXMudG1TdHJGb3JtYXQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuZmxhZ3x8XCJcIixpPXQuZ3VhcmQ7aT1uZXcgUmVnRXhwKGksci5yZXBsYWNlKC9bXmdpXS8sXCJcIikpO3ZhciBzPXRoaXMudG9rZW5pemVUbVNuaXBwZXQodC5mbXQsXCJmb3JtYXRTdHJpbmdcIiksbz10aGlzLHU9ZS5yZXBsYWNlKGksZnVuY3Rpb24oKXtvLnZhcmlhYmxlcy5fXz1hcmd1bWVudHM7dmFyIGU9by5yZXNvbHZlVmFyaWFibGVzKHMsbiksdD1cIkVcIjtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGk9ZVtyXTtpZih0eXBlb2YgaT09XCJvYmplY3RcIil7ZVtyXT1cIlwiO2lmKGkuY2hhbmdlQ2FzZSYmaS5sb2NhbCl7dmFyIHU9ZVtyKzFdO3UmJnR5cGVvZiB1PT1cInN0cmluZ1wiJiYoaS5jaGFuZ2VDYXNlPT1cInVcIj9lW3JdPXVbMF0udG9VcHBlckNhc2UoKTplW3JdPXVbMF0udG9Mb3dlckNhc2UoKSxlW3IrMV09dS5zdWJzdHIoMSkpfWVsc2UgaS5jaGFuZ2VDYXNlJiYodD1pLmNoYW5nZUNhc2UpfWVsc2UgdD09XCJVXCI/ZVtyXT1pLnRvVXBwZXJDYXNlKCk6dD09XCJMXCImJihlW3JdPWkudG9Mb3dlckNhc2UoKSl9cmV0dXJuIGUuam9pbihcIlwiKX0pO3JldHVybiB0aGlzLnZhcmlhYmxlcy5fXz1udWxsLHV9LHRoaXMucmVzb2x2ZVZhcmlhYmxlcz1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG8odCl7dmFyIG49ZS5pbmRleE9mKHQscisxKTtuIT0tMSYmKHI9bil9dmFyIG49W107Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPWVbcl07aWYodHlwZW9mIGk9PVwic3RyaW5nXCIpbi5wdXNoKGkpO2Vsc2V7aWYodHlwZW9mIGkhPVwib2JqZWN0XCIpY29udGludWU7aWYoaS5za2lwKW8oaSk7ZWxzZXtpZihpLnByb2Nlc3NlZDxyKWNvbnRpbnVlO2lmKGkudGV4dCl7dmFyIHM9dGhpcy5nZXRWYXJpYWJsZVZhbHVlKHQsaS50ZXh0KTtzJiZpLmZtdFN0cmluZyYmKHM9dGhpcy50bVN0ckZvcm1hdChzLGkpKSxpLnByb2Nlc3NlZD1yLGkuZXhwZWN0SWY9PW51bGw/cyYmKG4ucHVzaChzKSxvKGkpKTpzP2kuc2tpcD1pLmVsc2VCcmFuY2g6byhpKX1lbHNlIGkudGFic3RvcElkIT1udWxsP24ucHVzaChpKTppLmNoYW5nZUNhc2UhPW51bGwmJm4ucHVzaChpKX19fXJldHVybiBufSx0aGlzLmluc2VydFNuaXBwZXRGb3JTZWxlY3Rpb249ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBmKGUpe3ZhciB0PVtdO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO2lmKHR5cGVvZiByPT1cIm9iamVjdFwiKXtpZihhW3IudGFic3RvcElkXSljb250aW51ZTt2YXIgaT1lLmxhc3RJbmRleE9mKHIsbi0xKTtyPXRbaV18fHt0YWJzdG9wSWQ6ci50YWJzdG9wSWR9fXRbbl09cn1yZXR1cm4gdH12YXIgbj1lLmdldEN1cnNvclBvc2l0aW9uKCkscj1lLnNlc3Npb24uZ2V0TGluZShuLnJvdyksaT1lLnNlc3Npb24uZ2V0VGFiU3RyaW5nKCkscz1yLm1hdGNoKC9eXFxzKi8pWzBdO24uY29sdW1uPHMubGVuZ3RoJiYocz1zLnNsaWNlKDAsbi5jb2x1bW4pKTt2YXIgbz10aGlzLnRva2VuaXplVG1TbmlwcGV0KHQpO289dGhpcy5yZXNvbHZlVmFyaWFibGVzKG8sZSksbz1vLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZT09XCJcXG5cIj9lK3M6dHlwZW9mIGU9PVwic3RyaW5nXCI/ZS5yZXBsYWNlKC9cXHQvZyxpKTplfSk7dmFyIHU9W107by5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIGUhPVwib2JqZWN0XCIpcmV0dXJuO3ZhciBuPWUudGFic3RvcElkLHI9dVtuXTtyfHwocj11W25dPVtdLHIuaW5kZXg9bixyLnZhbHVlPVwiXCIpO2lmKHIuaW5kZXhPZihlKSE9PS0xKXJldHVybjtyLnB1c2goZSk7dmFyIGk9by5pbmRleE9mKGUsdCsxKTtpZihpPT09LTEpcmV0dXJuO3ZhciBzPW8uc2xpY2UodCsxLGkpLGE9cy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZT09XCJvYmplY3RcIn0pO2EmJiFyLnZhbHVlP3IudmFsdWU9czpzLmxlbmd0aCYmKCFyLnZhbHVlfHx0eXBlb2Ygci52YWx1ZSE9XCJzdHJpbmdcIikmJihyLnZhbHVlPXMuam9pbihcIlwiKSl9KSx1LmZvckVhY2goZnVuY3Rpb24oZSl7ZS5sZW5ndGg9MH0pO3ZhciBhPXt9O2Zvcih2YXIgbD0wO2w8by5sZW5ndGg7bCsrKXt2YXIgYz1vW2xdO2lmKHR5cGVvZiBjIT1cIm9iamVjdFwiKWNvbnRpbnVlO3ZhciBwPWMudGFic3RvcElkLGQ9by5pbmRleE9mKGMsbCsxKTtpZihhW3BdKXthW3BdPT09YyYmKGFbcF09bnVsbCk7Y29udGludWV9dmFyIHY9dVtwXSxtPXR5cGVvZiB2LnZhbHVlPT1cInN0cmluZ1wiP1t2LnZhbHVlXTpmKHYudmFsdWUpO20udW5zaGlmdChsKzEsTWF0aC5tYXgoMCxkLWwpKSxtLnB1c2goYyksYVtwXT1jLG8uc3BsaWNlLmFwcGx5KG8sbSksdi5pbmRleE9mKGMpPT09LTEmJnYucHVzaChjKX12YXIgZz0wLHk9MCxiPVwiXCI7by5mb3JFYWNoKGZ1bmN0aW9uKGUpe3R5cGVvZiBlPT1cInN0cmluZ1wiPyhlWzBdPT09XCJcXG5cIj8oeT1lLmxlbmd0aC0xLGcrKyk6eSs9ZS5sZW5ndGgsYis9ZSk6ZS5zdGFydD9lLmVuZD17cm93OmcsY29sdW1uOnl9OmUuc3RhcnQ9e3JvdzpnLGNvbHVtbjp5fX0pO3ZhciB3PWUuZ2V0U2VsZWN0aW9uUmFuZ2UoKSxFPWUuc2Vzc2lvbi5yZXBsYWNlKHcsYiksUz1uZXcgaChlKSx4PWUuaW5WaXJ0dWFsU2VsZWN0aW9uTW9kZSYmZS5zZWxlY3Rpb24uaW5kZXg7Uy5hZGRUYWJzdG9wcyh1LHcuc3RhcnQsRSx4KX0sdGhpcy5pbnNlcnRTbmlwcGV0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztpZihlLmluVmlydHVhbFNlbGVjdGlvbk1vZGUpcmV0dXJuIG4uaW5zZXJ0U25pcHBldEZvclNlbGVjdGlvbihlLHQpO2UuZm9yRWFjaFNlbGVjdGlvbihmdW5jdGlvbigpe24uaW5zZXJ0U25pcHBldEZvclNlbGVjdGlvbihlLHQpfSxudWxsLHtrZWVwT3JkZXI6ITB9KSxlLnRhYnN0b3BNYW5hZ2VyJiZlLnRhYnN0b3BNYW5hZ2VyLnRhYk5leHQoKX0sdGhpcy4kZ2V0U2NvcGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZXNzaW9uLiRtb2RlLiRpZHx8XCJcIjt0PXQuc3BsaXQoXCIvXCIpLnBvcCgpO2lmKHQ9PT1cImh0bWxcInx8dD09PVwicGhwXCIpe3Q9PT1cInBocFwiJiYhZS5zZXNzaW9uLiRtb2RlLmlubGluZVBocCYmKHQ9XCJodG1sXCIpO3ZhciBuPWUuZ2V0Q3Vyc29yUG9zaXRpb24oKSxyPWUuc2Vzc2lvbi5nZXRTdGF0ZShuLnJvdyk7dHlwZW9mIHI9PVwib2JqZWN0XCImJihyPXJbMF0pLHIuc3Vic3RyaW5nJiYoci5zdWJzdHJpbmcoMCwzKT09XCJqcy1cIj90PVwiamF2YXNjcmlwdFwiOnIuc3Vic3RyaW5nKDAsNCk9PVwiY3NzLVwiP3Q9XCJjc3NcIjpyLnN1YnN0cmluZygwLDQpPT1cInBocC1cIiYmKHQ9XCJwaHBcIikpfXJldHVybiB0fSx0aGlzLmdldEFjdGl2ZVNjb3Blcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLiRnZXRTY29wZShlKSxuPVt0XSxyPXRoaXMuc25pcHBldE1hcDtyZXR1cm4gclt0XSYmclt0XS5pbmNsdWRlU2NvcGVzJiZuLnB1c2guYXBwbHkobixyW3RdLmluY2x1ZGVTY29wZXMpLG4ucHVzaChcIl9cIiksbn0sdGhpcy5leHBhbmRXaXRoVGFiPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxyPWUuZm9yRWFjaFNlbGVjdGlvbihmdW5jdGlvbigpe3JldHVybiBuLmV4cGFuZFNuaXBwZXRGb3JTZWxlY3Rpb24oZSx0KX0sbnVsbCx7a2VlcE9yZGVyOiEwfSk7cmV0dXJuIHImJmUudGFic3RvcE1hbmFnZXImJmUudGFic3RvcE1hbmFnZXIudGFiTmV4dCgpLHJ9LHRoaXMuZXhwYW5kU25pcHBldEZvclNlbGVjdGlvbj1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZ2V0Q3Vyc29yUG9zaXRpb24oKSxyPWUuc2Vzc2lvbi5nZXRMaW5lKG4ucm93KSxpPXIuc3Vic3RyaW5nKDAsbi5jb2x1bW4pLHM9ci5zdWJzdHIobi5jb2x1bW4pLG89dGhpcy5zbmlwcGV0TWFwLHU7cmV0dXJuIHRoaXMuZ2V0QWN0aXZlU2NvcGVzKGUpLnNvbWUoZnVuY3Rpb24oZSl7dmFyIHQ9b1tlXTtyZXR1cm4gdCYmKHU9dGhpcy5maW5kTWF0Y2hpbmdTbmlwcGV0KHQsaSxzKSksISF1fSx0aGlzKSx1P3QmJnQuZHJ5UnVuPyEwOihlLnNlc3Npb24uZG9jLnJlbW92ZUluTGluZShuLnJvdyxuLmNvbHVtbi11LnJlcGxhY2VCZWZvcmUubGVuZ3RoLG4uY29sdW1uK3UucmVwbGFjZUFmdGVyLmxlbmd0aCksdGhpcy52YXJpYWJsZXMuTV9fPXUubWF0Y2hCZWZvcmUsdGhpcy52YXJpYWJsZXMuVF9fPXUubWF0Y2hBZnRlcix0aGlzLmluc2VydFNuaXBwZXRGb3JTZWxlY3Rpb24oZSx1LmNvbnRlbnQpLHRoaXMudmFyaWFibGVzLk1fXz10aGlzLnZhcmlhYmxlcy5UX189bnVsbCwhMCk6ITF9LHRoaXMuZmluZE1hdGNoaW5nU25pcHBldD1mdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPWUubGVuZ3RoO3ItLTspe3ZhciBpPWVbcl07aWYoaS5zdGFydFJlJiYhaS5zdGFydFJlLnRlc3QodCkpY29udGludWU7aWYoaS5lbmRSZSYmIWkuZW5kUmUudGVzdChuKSljb250aW51ZTtpZighaS5zdGFydFJlJiYhaS5lbmRSZSljb250aW51ZTtyZXR1cm4gaS5tYXRjaEJlZm9yZT1pLnN0YXJ0UmU/aS5zdGFydFJlLmV4ZWModCk6W1wiXCJdLGkubWF0Y2hBZnRlcj1pLmVuZFJlP2kuZW5kUmUuZXhlYyhuKTpbXCJcIl0saS5yZXBsYWNlQmVmb3JlPWkudHJpZ2dlclJlP2kudHJpZ2dlclJlLmV4ZWModClbMF06XCJcIixpLnJlcGxhY2VBZnRlcj1pLmVuZFRyaWdnZXJSZT9pLmVuZFRyaWdnZXJSZS5leGVjKG4pWzBdOlwiXCIsaX19LHRoaXMuc25pcHBldE1hcD17fSx0aGlzLnNuaXBwZXROYW1lTWFwPXt9LHRoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBvKGUpe3JldHVybiBlJiYhL15cXF4/XFwoLipcXClcXCQ/JHxeXFxcXGIkLy50ZXN0KGUpJiYoZT1cIig/OlwiK2UrXCIpXCIpLGV8fFwiXCJ9ZnVuY3Rpb24gdShlLHQsbil7cmV0dXJuIGU9byhlKSx0PW8odCksbj8oZT10K2UsZSYmZVtlLmxlbmd0aC0xXSE9XCIkXCImJihlKz1cIiRcIikpOihlKz10LGUmJmVbMF0hPVwiXlwiJiYoZT1cIl5cIitlKSksbmV3IFJlZ0V4cChlKX1mdW5jdGlvbiBhKGUpe2Uuc2NvcGV8fChlLnNjb3BlPXR8fFwiX1wiKSx0PWUuc2NvcGUsblt0XXx8KG5bdF09W10sclt0XT17fSk7dmFyIG89clt0XTtpZihlLm5hbWUpe3ZhciBhPW9bZS5uYW1lXTthJiZpLnVucmVnaXN0ZXIoYSksb1tlLm5hbWVdPWV9blt0XS5wdXNoKGUpLGUudGFiVHJpZ2dlciYmIWUudHJpZ2dlciYmKCFlLmd1YXJkJiYvXlxcdy8udGVzdChlLnRhYlRyaWdnZXIpJiYoZS5ndWFyZD1cIlxcXFxiXCIpLGUudHJpZ2dlcj1zLmVzY2FwZVJlZ0V4cChlLnRhYlRyaWdnZXIpKTtpZighZS50cmlnZ2VyJiYhZS5ndWFyZCYmIWUuZW5kVHJpZ2dlciYmIWUuZW5kR3VhcmQpcmV0dXJuO2Uuc3RhcnRSZT11KGUudHJpZ2dlcixlLmd1YXJkLCEwKSxlLnRyaWdnZXJSZT1uZXcgUmVnRXhwKGUudHJpZ2dlcixcIlwiLCEwKSxlLmVuZFJlPXUoZS5lbmRUcmlnZ2VyLGUuZW5kR3VhcmQsITApLGUuZW5kVHJpZ2dlclJlPW5ldyBSZWdFeHAoZS5lbmRUcmlnZ2VyLFwiXCIsITApfXZhciBuPXRoaXMuc25pcHBldE1hcCxyPXRoaXMuc25pcHBldE5hbWVNYXAsaT10aGlzO2V8fChlPVtdKSxlJiZlLmNvbnRlbnQ/YShlKTpBcnJheS5pc0FycmF5KGUpJiZlLmZvckVhY2goYSksdGhpcy5fc2lnbmFsKFwicmVnaXN0ZXJTbmlwcGV0c1wiLHtzY29wZTp0fSl9LHRoaXMudW5yZWdpc3Rlcj1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGkoZSl7dmFyIGk9cltlLnNjb3BlfHx0XTtpZihpJiZpW2UubmFtZV0pe2RlbGV0ZSBpW2UubmFtZV07dmFyIHM9bltlLnNjb3BlfHx0XSxvPXMmJnMuaW5kZXhPZihlKTtvPj0wJiZzLnNwbGljZShvLDEpfX12YXIgbj10aGlzLnNuaXBwZXRNYXAscj10aGlzLnNuaXBwZXROYW1lTWFwO2UuY29udGVudD9pKGUpOkFycmF5LmlzQXJyYXkoZSkmJmUuZm9yRWFjaChpKX0sdGhpcy5wYXJzZVNuaXBwZXRGaWxlPWZ1bmN0aW9uKGUpe2U9ZS5yZXBsYWNlKC9cXHIvZyxcIlwiKTt2YXIgdD1bXSxuPXt9LHI9L14jLip8Xih7W1xcc1xcU10qfSlcXHMqJHxeKFxcUyspICguKikkfF4oKD86XFxuKlxcdC4qKSspL2dtLGk7d2hpbGUoaT1yLmV4ZWMoZSkpe2lmKGlbMV0pdHJ5e249SlNPTi5wYXJzZShpWzFdKSx0LnB1c2gobil9Y2F0Y2gocyl7fWlmKGlbNF0pbi5jb250ZW50PWlbNF0ucmVwbGFjZSgvXlxcdC9nbSxcIlwiKSx0LnB1c2gobiksbj17fTtlbHNle3ZhciBvPWlbMl0sdT1pWzNdO2lmKG89PVwicmVnZXhcIil7dmFyIGE9L1xcLygoPzpbXlxcL1xcXFxdfFxcXFwuKSopfCQvZztuLmd1YXJkPWEuZXhlYyh1KVsxXSxuLnRyaWdnZXI9YS5leGVjKHUpWzFdLG4uZW5kVHJpZ2dlcj1hLmV4ZWModSlbMV0sbi5lbmRHdWFyZD1hLmV4ZWModSlbMV19ZWxzZSBvPT1cInNuaXBwZXRcIj8obi50YWJUcmlnZ2VyPXUubWF0Y2goL15cXFMqLylbMF0sbi5uYW1lfHwobi5uYW1lPXUpKTpuW29dPXV9fXJldHVybiB0fSx0aGlzLmdldFNuaXBwZXRCeU5hbWU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLnNuaXBwZXROYW1lTWFwLHI7cmV0dXJuIHRoaXMuZ2V0QWN0aXZlU2NvcGVzKHQpLnNvbWUoZnVuY3Rpb24odCl7dmFyIGk9blt0XTtyZXR1cm4gaSYmKHI9aVtlXSksISFyfSx0aGlzKSxyfX0pLmNhbGwoYy5wcm90b3R5cGUpO3ZhciBoPWZ1bmN0aW9uKGUpe2lmKGUudGFic3RvcE1hbmFnZXIpcmV0dXJuIGUudGFic3RvcE1hbmFnZXI7ZS50YWJzdG9wTWFuYWdlcj10aGlzLHRoaXMuJG9uQ2hhbmdlPXRoaXMub25DaGFuZ2UuYmluZCh0aGlzKSx0aGlzLiRvbkNoYW5nZVNlbGVjdGlvbj1zLmRlbGF5ZWRDYWxsKHRoaXMub25DaGFuZ2VTZWxlY3Rpb24uYmluZCh0aGlzKSkuc2NoZWR1bGUsdGhpcy4kb25DaGFuZ2VTZXNzaW9uPXRoaXMub25DaGFuZ2VTZXNzaW9uLmJpbmQodGhpcyksdGhpcy4kb25BZnRlckV4ZWM9dGhpcy5vbkFmdGVyRXhlYy5iaW5kKHRoaXMpLHRoaXMuYXR0YWNoKGUpfTsoZnVuY3Rpb24oKXt0aGlzLmF0dGFjaD1mdW5jdGlvbihlKXt0aGlzLmluZGV4PTAsdGhpcy5yYW5nZXM9W10sdGhpcy50YWJzdG9wcz1bXSx0aGlzLiRvcGVuVGFic3RvcHM9bnVsbCx0aGlzLnNlbGVjdGVkVGFic3RvcD1udWxsLHRoaXMuZWRpdG9yPWUsdGhpcy5lZGl0b3Iub24oXCJjaGFuZ2VcIix0aGlzLiRvbkNoYW5nZSksdGhpcy5lZGl0b3Iub24oXCJjaGFuZ2VTZWxlY3Rpb25cIix0aGlzLiRvbkNoYW5nZVNlbGVjdGlvbiksdGhpcy5lZGl0b3Iub24oXCJjaGFuZ2VTZXNzaW9uXCIsdGhpcy4kb25DaGFuZ2VTZXNzaW9uKSx0aGlzLmVkaXRvci5jb21tYW5kcy5vbihcImFmdGVyRXhlY1wiLHRoaXMuJG9uQWZ0ZXJFeGVjKSx0aGlzLmVkaXRvci5rZXlCaW5kaW5nLmFkZEtleWJvYXJkSGFuZGxlcih0aGlzLmtleWJvYXJkSGFuZGxlcil9LHRoaXMuZGV0YWNoPWZ1bmN0aW9uKCl7dGhpcy50YWJzdG9wcy5mb3JFYWNoKHRoaXMucmVtb3ZlVGFic3RvcE1hcmtlcnMsdGhpcyksdGhpcy5yYW5nZXM9bnVsbCx0aGlzLnRhYnN0b3BzPW51bGwsdGhpcy5zZWxlY3RlZFRhYnN0b3A9bnVsbCx0aGlzLmVkaXRvci5yZW1vdmVMaXN0ZW5lcihcImNoYW5nZVwiLHRoaXMuJG9uQ2hhbmdlKSx0aGlzLmVkaXRvci5yZW1vdmVMaXN0ZW5lcihcImNoYW5nZVNlbGVjdGlvblwiLHRoaXMuJG9uQ2hhbmdlU2VsZWN0aW9uKSx0aGlzLmVkaXRvci5yZW1vdmVMaXN0ZW5lcihcImNoYW5nZVNlc3Npb25cIix0aGlzLiRvbkNoYW5nZVNlc3Npb24pLHRoaXMuZWRpdG9yLmNvbW1hbmRzLnJlbW92ZUxpc3RlbmVyKFwiYWZ0ZXJFeGVjXCIsdGhpcy4kb25BZnRlckV4ZWMpLHRoaXMuZWRpdG9yLmtleUJpbmRpbmcucmVtb3ZlS2V5Ym9hcmRIYW5kbGVyKHRoaXMua2V5Ym9hcmRIYW5kbGVyKSx0aGlzLmVkaXRvci50YWJzdG9wTWFuYWdlcj1udWxsLHRoaXMuZWRpdG9yPW51bGx9LHRoaXMub25DaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZSxuPWUuYWN0aW9uWzBdPT1cInJcIixyPWUuc3RhcnQsaT1lLmVuZCxzPXIucm93LG89aS5yb3csdT1vLXMsYT1pLmNvbHVtbi1yLmNvbHVtbjtuJiYodT0tdSxhPS1hKTtpZighdGhpcy4kaW5DaGFuZ2UmJm4pe3ZhciBmPXRoaXMuc2VsZWN0ZWRUYWJzdG9wLGM9ZiYmIWYuc29tZShmdW5jdGlvbihlKXtyZXR1cm4gbChlLnN0YXJ0LHIpPD0wJiZsKGUuZW5kLGkpPj0wfSk7aWYoYylyZXR1cm4gdGhpcy5kZXRhY2goKX12YXIgaD10aGlzLnJhbmdlcztmb3IodmFyIHA9MDtwPGgubGVuZ3RoO3ArKyl7dmFyIGQ9aFtwXTtpZihkLmVuZC5yb3c8ci5yb3cpY29udGludWU7aWYobiYmbChyLGQuc3RhcnQpPDAmJmwoaSxkLmVuZCk+MCl7dGhpcy5yZW1vdmVSYW5nZShkKSxwLS07Y29udGludWV9ZC5zdGFydC5yb3c9PXMmJmQuc3RhcnQuY29sdW1uPnIuY29sdW1uJiYoZC5zdGFydC5jb2x1bW4rPWEpLGQuZW5kLnJvdz09cyYmZC5lbmQuY29sdW1uPj1yLmNvbHVtbiYmKGQuZW5kLmNvbHVtbis9YSksZC5zdGFydC5yb3c+PXMmJihkLnN0YXJ0LnJvdys9dSksZC5lbmQucm93Pj1zJiYoZC5lbmQucm93Kz11KSxsKGQuc3RhcnQsZC5lbmQpPjAmJnRoaXMucmVtb3ZlUmFuZ2UoZCl9aC5sZW5ndGh8fHRoaXMuZGV0YWNoKCl9LHRoaXMudXBkYXRlTGlua2VkRmllbGRzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZWxlY3RlZFRhYnN0b3A7aWYoIWV8fCFlLmhhc0xpbmtlZFJhbmdlcylyZXR1cm47dGhpcy4kaW5DaGFuZ2U9ITA7dmFyIG49dGhpcy5lZGl0b3Iuc2Vzc2lvbixyPW4uZ2V0VGV4dFJhbmdlKGUuZmlyc3ROb25MaW5rZWQpO2Zvcih2YXIgaT1lLmxlbmd0aDtpLS07KXt2YXIgcz1lW2ldO2lmKCFzLmxpbmtlZCljb250aW51ZTt2YXIgbz10LnNuaXBwZXRNYW5hZ2VyLnRtU3RyRm9ybWF0KHIscy5vcmlnaW5hbCk7bi5yZXBsYWNlKHMsbyl9dGhpcy4kaW5DaGFuZ2U9ITF9LHRoaXMub25BZnRlckV4ZWM9ZnVuY3Rpb24oZSl7ZS5jb21tYW5kJiYhZS5jb21tYW5kLnJlYWRPbmx5JiZ0aGlzLnVwZGF0ZUxpbmtlZEZpZWxkcygpfSx0aGlzLm9uQ2hhbmdlU2VsZWN0aW9uPWZ1bmN0aW9uKCl7aWYoIXRoaXMuZWRpdG9yKXJldHVybjt2YXIgZT10aGlzLmVkaXRvci5zZWxlY3Rpb24ubGVhZCx0PXRoaXMuZWRpdG9yLnNlbGVjdGlvbi5hbmNob3Isbj10aGlzLmVkaXRvci5zZWxlY3Rpb24uaXNFbXB0eSgpO2Zvcih2YXIgcj10aGlzLnJhbmdlcy5sZW5ndGg7ci0tOyl7aWYodGhpcy5yYW5nZXNbcl0ubGlua2VkKWNvbnRpbnVlO3ZhciBpPXRoaXMucmFuZ2VzW3JdLmNvbnRhaW5zKGUucm93LGUuY29sdW1uKSxzPW58fHRoaXMucmFuZ2VzW3JdLmNvbnRhaW5zKHQucm93LHQuY29sdW1uKTtpZihpJiZzKXJldHVybn10aGlzLmRldGFjaCgpfSx0aGlzLm9uQ2hhbmdlU2Vzc2lvbj1mdW5jdGlvbigpe3RoaXMuZGV0YWNoKCl9LHRoaXMudGFiTmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnRhYnN0b3BzLmxlbmd0aCxuPXRoaXMuaW5kZXgrKGV8fDEpO249TWF0aC5taW4oTWF0aC5tYXgobiwxKSx0KSxuPT10JiYobj0wKSx0aGlzLnNlbGVjdFRhYnN0b3Aobiksbj09PTAmJnRoaXMuZGV0YWNoKCl9LHRoaXMuc2VsZWN0VGFic3RvcD1mdW5jdGlvbihlKXt0aGlzLiRvcGVuVGFic3RvcHM9bnVsbDt2YXIgdD10aGlzLnRhYnN0b3BzW3RoaXMuaW5kZXhdO3QmJnRoaXMuYWRkVGFic3RvcE1hcmtlcnModCksdGhpcy5pbmRleD1lLHQ9dGhpcy50YWJzdG9wc1t0aGlzLmluZGV4XTtpZighdHx8IXQubGVuZ3RoKXJldHVybjt0aGlzLnNlbGVjdGVkVGFic3RvcD10O2lmKCF0aGlzLmVkaXRvci5pblZpcnR1YWxTZWxlY3Rpb25Nb2RlKXt2YXIgbj10aGlzLmVkaXRvci5tdWx0aVNlbGVjdDtuLnRvU2luZ2xlUmFuZ2UodC5maXJzdE5vbkxpbmtlZC5jbG9uZSgpKTtmb3IodmFyIHI9dC5sZW5ndGg7ci0tOyl7aWYodC5oYXNMaW5rZWRSYW5nZXMmJnRbcl0ubGlua2VkKWNvbnRpbnVlO24uYWRkUmFuZ2UodFtyXS5jbG9uZSgpLCEwKX1uLnJhbmdlc1swXSYmbi5hZGRSYW5nZShuLnJhbmdlc1swXS5jbG9uZSgpKX1lbHNlIHRoaXMuZWRpdG9yLnNlbGVjdGlvbi5zZXRSYW5nZSh0LmZpcnN0Tm9uTGlua2VkKTt0aGlzLmVkaXRvci5rZXlCaW5kaW5nLmFkZEtleWJvYXJkSGFuZGxlcih0aGlzLmtleWJvYXJkSGFuZGxlcil9LHRoaXMuYWRkVGFic3RvcHM9ZnVuY3Rpb24oZSx0LG4pe3RoaXMuJG9wZW5UYWJzdG9wc3x8KHRoaXMuJG9wZW5UYWJzdG9wcz1bXSk7aWYoIWVbMF0pe3ZhciByPW8uZnJvbVBvaW50cyhuLG4pO3Yoci5zdGFydCx0KSx2KHIuZW5kLHQpLGVbMF09W3JdLGVbMF0uaW5kZXg9MH12YXIgaT10aGlzLmluZGV4LHM9W2krMSwwXSx1PXRoaXMucmFuZ2VzO2UuZm9yRWFjaChmdW5jdGlvbihlLG4pe3ZhciByPXRoaXMuJG9wZW5UYWJzdG9wc1tuXXx8ZTtmb3IodmFyIGk9ZS5sZW5ndGg7aS0tOyl7dmFyIGE9ZVtpXSxmPW8uZnJvbVBvaW50cyhhLnN0YXJ0LGEuZW5kfHxhLnN0YXJ0KTtkKGYuc3RhcnQsdCksZChmLmVuZCx0KSxmLm9yaWdpbmFsPWEsZi50YWJzdG9wPXIsdS5wdXNoKGYpLHIhPWU/ci51bnNoaWZ0KGYpOnJbaV09ZixhLmZtdFN0cmluZz8oZi5saW5rZWQ9ITAsci5oYXNMaW5rZWRSYW5nZXM9ITApOnIuZmlyc3ROb25MaW5rZWR8fChyLmZpcnN0Tm9uTGlua2VkPWYpfXIuZmlyc3ROb25MaW5rZWR8fChyLmhhc0xpbmtlZFJhbmdlcz0hMSkscj09PWUmJihzLnB1c2gociksdGhpcy4kb3BlblRhYnN0b3BzW25dPXIpLHRoaXMuYWRkVGFic3RvcE1hcmtlcnMocil9LHRoaXMpLHMubGVuZ3RoPjImJih0aGlzLnRhYnN0b3BzLmxlbmd0aCYmcy5wdXNoKHMuc3BsaWNlKDIsMSlbMF0pLHRoaXMudGFic3RvcHMuc3BsaWNlLmFwcGx5KHRoaXMudGFic3RvcHMscykpfSx0aGlzLmFkZFRhYnN0b3BNYXJrZXJzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZWRpdG9yLnNlc3Npb247ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UubWFya2VySWR8fChlLm1hcmtlcklkPXQuYWRkTWFya2VyKGUsXCJhY2Vfc25pcHBldC1tYXJrZXJcIixcInRleHRcIikpfSl9LHRoaXMucmVtb3ZlVGFic3RvcE1hcmtlcnM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5lZGl0b3Iuc2Vzc2lvbjtlLmZvckVhY2goZnVuY3Rpb24oZSl7dC5yZW1vdmVNYXJrZXIoZS5tYXJrZXJJZCksZS5tYXJrZXJJZD1udWxsfSl9LHRoaXMucmVtb3ZlUmFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YWJzdG9wLmluZGV4T2YoZSk7ZS50YWJzdG9wLnNwbGljZSh0LDEpLHQ9dGhpcy5yYW5nZXMuaW5kZXhPZihlKSx0aGlzLnJhbmdlcy5zcGxpY2UodCwxKSx0aGlzLmVkaXRvci5zZXNzaW9uLnJlbW92ZU1hcmtlcihlLm1hcmtlcklkKSxlLnRhYnN0b3AubGVuZ3RofHwodD10aGlzLnRhYnN0b3BzLmluZGV4T2YoZS50YWJzdG9wKSx0IT0tMSYmdGhpcy50YWJzdG9wcy5zcGxpY2UodCwxKSx0aGlzLnRhYnN0b3BzLmxlbmd0aHx8dGhpcy5kZXRhY2goKSl9LHRoaXMua2V5Ym9hcmRIYW5kbGVyPW5ldyBhLHRoaXMua2V5Ym9hcmRIYW5kbGVyLmJpbmRLZXlzKHtUYWI6ZnVuY3Rpb24oZSl7aWYodC5zbmlwcGV0TWFuYWdlciYmdC5zbmlwcGV0TWFuYWdlci5leHBhbmRXaXRoVGFiKGUpKXJldHVybjtlLnRhYnN0b3BNYW5hZ2VyLnRhYk5leHQoMSl9LFwiU2hpZnQtVGFiXCI6ZnVuY3Rpb24oZSl7ZS50YWJzdG9wTWFuYWdlci50YWJOZXh0KC0xKX0sRXNjOmZ1bmN0aW9uKGUpe2UudGFic3RvcE1hbmFnZXIuZGV0YWNoKCl9LFJldHVybjpmdW5jdGlvbihlKXtyZXR1cm4hMX19KX0pLmNhbGwoaC5wcm90b3R5cGUpO3ZhciBwPXt9O3Aub25DaGFuZ2U9dS5wcm90b3R5cGUub25DaGFuZ2UscC5zZXRQb3NpdGlvbj1mdW5jdGlvbihlLHQpe3RoaXMucG9zLnJvdz1lLHRoaXMucG9zLmNvbHVtbj10fSxwLnVwZGF0ZT1mdW5jdGlvbihlLHQsbil7dGhpcy4kaW5zZXJ0UmlnaHQ9bix0aGlzLnBvcz1lLHRoaXMub25DaGFuZ2UodCl9O3ZhciBkPWZ1bmN0aW9uKGUsdCl7ZS5yb3c9PTAmJihlLmNvbHVtbis9dC5jb2x1bW4pLGUucm93Kz10LnJvd30sdj1mdW5jdGlvbihlLHQpe2Uucm93PT10LnJvdyYmKGUuY29sdW1uLT10LmNvbHVtbiksZS5yb3ctPXQucm93fTtlKFwiLi9saWIvZG9tXCIpLmltcG9ydENzc1N0cmluZyhcIi5hY2Vfc25pcHBldC1tYXJrZXIgeyAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7ICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7ICAgIGJhY2tncm91bmQ6IHJnYmEoMTk0LCAxOTMsIDIwOCwgMC4wOSk7ICAgIGJvcmRlcjogMXB4IGRvdHRlZCByZ2JhKDIxMSwgMjA4LCAyMzUsIDAuNjIpOyAgICBwb3NpdGlvbjogYWJzb2x1dGU7fVwiKSx0LnNuaXBwZXRNYW5hZ2VyPW5ldyBjO3ZhciBtPWUoXCIuL2VkaXRvclwiKS5FZGl0b3I7KGZ1bmN0aW9uKCl7dGhpcy5pbnNlcnRTbmlwcGV0PWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuc25pcHBldE1hbmFnZXIuaW5zZXJ0U25pcHBldCh0aGlzLGUsbil9LHRoaXMuZXhwYW5kU25pcHBldD1mdW5jdGlvbihlKXtyZXR1cm4gdC5zbmlwcGV0TWFuYWdlci5leHBhbmRXaXRoVGFiKHRoaXMsZSl9fSkuY2FsbChtLnByb3RvdHlwZSl9KSxkZWZpbmUoXCJhY2UvZXh0L2VtbWV0XCIsW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwibW9kdWxlXCIsXCJhY2Uva2V5Ym9hcmQvaGFzaF9oYW5kbGVyXCIsXCJhY2UvZWRpdG9yXCIsXCJhY2Uvc25pcHBldHNcIixcImFjZS9yYW5nZVwiLFwicmVzb3VyY2VzXCIsXCJyZXNvdXJjZXNcIixcInJhbmdlXCIsXCJ0YWJTdG9wc1wiLFwicmVzb3VyY2VzXCIsXCJ1dGlsc1wiLFwiYWN0aW9uc1wiLFwiYWNlL2NvbmZpZ1wiLFwiYWNlL2NvbmZpZ1wiXSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZigpe312YXIgcj1lKFwiYWNlL2tleWJvYXJkL2hhc2hfaGFuZGxlclwiKS5IYXNoSGFuZGxlcixpPWUoXCJhY2UvZWRpdG9yXCIpLkVkaXRvcixzPWUoXCJhY2Uvc25pcHBldHNcIikuc25pcHBldE1hbmFnZXIsbz1lKFwiYWNlL3JhbmdlXCIpLlJhbmdlLHUsYTtmLnByb3RvdHlwZT17c2V0dXBDb250ZXh0OmZ1bmN0aW9uKGUpe3RoaXMuYWNlPWUsdGhpcy5pbmRlbnRhdGlvbj1lLnNlc3Npb24uZ2V0VGFiU3RyaW5nKCksdXx8KHU9d2luZG93LmVtbWV0KSx1LnJlcXVpcmUoXCJyZXNvdXJjZXNcIikuc2V0VmFyaWFibGUoXCJpbmRlbnRhdGlvblwiLHRoaXMuaW5kZW50YXRpb24pLHRoaXMuJHN5bnRheD1udWxsLHRoaXMuJHN5bnRheD10aGlzLmdldFN5bnRheCgpfSxnZXRTZWxlY3Rpb25SYW5nZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuYWNlLmdldFNlbGVjdGlvblJhbmdlKCksdD10aGlzLmFjZS5zZXNzaW9uLmRvYztyZXR1cm57c3RhcnQ6dC5wb3NpdGlvblRvSW5kZXgoZS5zdGFydCksZW5kOnQucG9zaXRpb25Ub0luZGV4KGUuZW5kKX19LGNyZWF0ZVNlbGVjdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuYWNlLnNlc3Npb24uZG9jO3RoaXMuYWNlLnNlbGVjdGlvbi5zZXRSYW5nZSh7c3RhcnQ6bi5pbmRleFRvUG9zaXRpb24oZSksZW5kOm4uaW5kZXhUb1Bvc2l0aW9uKHQpfSl9LGdldEN1cnJlbnRMaW5lUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmFjZSx0PWUuZ2V0Q3Vyc29yUG9zaXRpb24oKS5yb3csbj1lLnNlc3Npb24uZ2V0TGluZSh0KS5sZW5ndGgscj1lLnNlc3Npb24uZG9jLnBvc2l0aW9uVG9JbmRleCh7cm93OnQsY29sdW1uOjB9KTtyZXR1cm57c3RhcnQ6cixlbmQ6citufX0sZ2V0Q2FyZXRQb3M6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmFjZS5nZXRDdXJzb3JQb3NpdGlvbigpO3JldHVybiB0aGlzLmFjZS5zZXNzaW9uLmRvYy5wb3NpdGlvblRvSW5kZXgoZSl9LHNldENhcmV0UG9zOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYWNlLnNlc3Npb24uZG9jLmluZGV4VG9Qb3NpdGlvbihlKTt0aGlzLmFjZS5zZWxlY3Rpb24ubW92ZVRvUG9zaXRpb24odCl9LGdldEN1cnJlbnRMaW5lOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5hY2UuZ2V0Q3Vyc29yUG9zaXRpb24oKS5yb3c7cmV0dXJuIHRoaXMuYWNlLnNlc3Npb24uZ2V0TGluZShlKX0scmVwbGFjZUNvbnRlbnQ6ZnVuY3Rpb24oZSx0LG4scil7bj09bnVsbCYmKG49dD09bnVsbD90aGlzLmdldENvbnRlbnQoKS5sZW5ndGg6dCksdD09bnVsbCYmKHQ9MCk7dmFyIGk9dGhpcy5hY2UsdT1pLnNlc3Npb24uZG9jLGE9by5mcm9tUG9pbnRzKHUuaW5kZXhUb1Bvc2l0aW9uKHQpLHUuaW5kZXhUb1Bvc2l0aW9uKG4pKTtpLnNlc3Npb24ucmVtb3ZlKGEpLGEuZW5kPWEuc3RhcnQsZT10aGlzLiR1cGRhdGVUYWJzdG9wcyhlKSxzLmluc2VydFNuaXBwZXQoaSxlKX0sZ2V0Q29udGVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFjZS5nZXRWYWx1ZSgpfSxnZXRTeW50YXg6ZnVuY3Rpb24oKXtpZih0aGlzLiRzeW50YXgpcmV0dXJuIHRoaXMuJHN5bnRheDt2YXIgZT10aGlzLmFjZS5zZXNzaW9uLiRtb2RlSWQuc3BsaXQoXCIvXCIpLnBvcCgpO2lmKGU9PVwiaHRtbFwifHxlPT1cInBocFwiKXt2YXIgdD10aGlzLmFjZS5nZXRDdXJzb3JQb3NpdGlvbigpLG49dGhpcy5hY2Uuc2Vzc2lvbi5nZXRTdGF0ZSh0LnJvdyk7dHlwZW9mIG4hPVwic3RyaW5nXCImJihuPW5bMF0pLG4mJihuPW4uc3BsaXQoXCItXCIpLG4ubGVuZ3RoPjE/ZT1uWzBdOmU9PVwicGhwXCImJihlPVwiaHRtbFwiKSl9cmV0dXJuIGV9LGdldFByb2ZpbGVOYW1lOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZ2V0U3ludGF4KCkpe2Nhc2VcImNzc1wiOnJldHVyblwiY3NzXCI7Y2FzZVwieG1sXCI6Y2FzZVwieHNsXCI6cmV0dXJuXCJ4bWxcIjtjYXNlXCJodG1sXCI6dmFyIGU9dS5yZXF1aXJlKFwicmVzb3VyY2VzXCIpLmdldFZhcmlhYmxlKFwicHJvZmlsZVwiKTtyZXR1cm4gZXx8KGU9dGhpcy5hY2Uuc2Vzc2lvbi5nZXRMaW5lcygwLDIpLmpvaW4oXCJcIikuc2VhcmNoKC88IURPQ1RZUEVbXj5dK1hIVE1ML2kpIT0tMT9cInhodG1sXCI6XCJodG1sXCIpLGU7ZGVmYXVsdDp2YXIgdD10aGlzLmFjZS5zZXNzaW9uLiRtb2RlO3JldHVybiB0LmVtbWV0Q29uZmlnJiZ0LmVtbWV0Q29uZmlnLnByb2ZpbGV8fFwieGh0bWxcIn19LHByb21wdDpmdW5jdGlvbihlKXtyZXR1cm4gcHJvbXB0KGUpfSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY2Uuc2Vzc2lvbi5nZXRUZXh0UmFuZ2UoKX0sZ2V0RmlsZVBhdGg6ZnVuY3Rpb24oKXtyZXR1cm5cIlwifSwkdXBkYXRlVGFic3RvcHM6ZnVuY3Rpb24oZSl7dmFyIHQ9MWUzLG49MCxyPW51bGwsaT11LnJlcXVpcmUoXCJyYW5nZVwiKSxzPXUucmVxdWlyZShcInRhYlN0b3BzXCIpLG89dS5yZXF1aXJlKFwicmVzb3VyY2VzXCIpLmdldFZvY2FidWxhcnkoXCJ1c2VyXCIpLGE9e3RhYnN0b3A6ZnVuY3Rpb24oZSl7dmFyIG89cGFyc2VJbnQoZS5ncm91cCwxMCksdT1vPT09MDt1P289KytuOm8rPXQ7dmFyIGY9ZS5wbGFjZWhvbGRlcjtmJiYoZj1zLnByb2Nlc3NUZXh0KGYsYSkpO3ZhciBsPVwiJHtcIitvKyhmP1wiOlwiK2Y6XCJcIikrXCJ9XCI7cmV0dXJuIHUmJihyPWkuY3JlYXRlKGUuc3RhcnQsbCkpLGx9LGVzY2FwZTpmdW5jdGlvbihlKXtyZXR1cm4gZT09XCIkXCI/XCJcXFxcJFwiOmU9PVwiXFxcXFwiP1wiXFxcXFxcXFxcIjplfX07cmV0dXJuIGU9cy5wcm9jZXNzVGV4dChlLGEpLG8udmFyaWFibGVzLmluc2VydF9maW5hbF90YWJzdG9wJiYhL1xcJFxcezBcXH0kLy50ZXN0KGUpP2UrPVwiJHswfVwiOnImJihlPXUucmVxdWlyZShcInV0aWxzXCIpLnJlcGxhY2VTdWJzdHJpbmcoZSxcIiR7MH1cIixyKSksZX19O3ZhciBsPXtleHBhbmRfYWJicmV2aWF0aW9uOnttYWM6XCJjdHJsK2FsdCtlXCIsd2luOlwiYWx0K2VcIn0sbWF0Y2hfcGFpcl9vdXR3YXJkOnttYWM6XCJjdHJsK2RcIix3aW46XCJjdHJsKyxcIn0sbWF0Y2hfcGFpcl9pbndhcmQ6e21hYzpcImN0cmwralwiLHdpbjpcImN0cmwrc2hpZnQrMFwifSxtYXRjaGluZ19wYWlyOnttYWM6XCJjdHJsK2FsdCtqXCIsd2luOlwiYWx0K2pcIn0sbmV4dF9lZGl0X3BvaW50OlwiYWx0K3JpZ2h0XCIscHJldl9lZGl0X3BvaW50OlwiYWx0K2xlZnRcIix0b2dnbGVfY29tbWVudDp7bWFjOlwiY29tbWFuZCsvXCIsd2luOlwiY3RybCsvXCJ9LHNwbGl0X2pvaW5fdGFnOnttYWM6XCJzaGlmdCtjb21tYW5kKydcIix3aW46XCJzaGlmdCtjdHJsK2BcIn0scmVtb3ZlX3RhZzp7bWFjOlwiY29tbWFuZCsnXCIsd2luOlwic2hpZnQrY3RybCs7XCJ9LGV2YWx1YXRlX21hdGhfZXhwcmVzc2lvbjp7bWFjOlwic2hpZnQrY29tbWFuZCt5XCIsd2luOlwic2hpZnQrY3RybCt5XCJ9LGluY3JlbWVudF9udW1iZXJfYnlfMTpcImN0cmwrdXBcIixkZWNyZW1lbnRfbnVtYmVyX2J5XzE6XCJjdHJsK2Rvd25cIixpbmNyZW1lbnRfbnVtYmVyX2J5XzAxOlwiYWx0K3VwXCIsZGVjcmVtZW50X251bWJlcl9ieV8wMTpcImFsdCtkb3duXCIsaW5jcmVtZW50X251bWJlcl9ieV8xMDp7bWFjOlwiYWx0K2NvbW1hbmQrdXBcIix3aW46XCJzaGlmdCthbHQrdXBcIn0sZGVjcmVtZW50X251bWJlcl9ieV8xMDp7bWFjOlwiYWx0K2NvbW1hbmQrZG93blwiLHdpbjpcInNoaWZ0K2FsdCtkb3duXCJ9LHNlbGVjdF9uZXh0X2l0ZW06e21hYzpcInNoaWZ0K2NvbW1hbmQrLlwiLHdpbjpcInNoaWZ0K2N0cmwrLlwifSxzZWxlY3RfcHJldmlvdXNfaXRlbTp7bWFjOlwic2hpZnQrY29tbWFuZCssXCIsd2luOlwic2hpZnQrY3RybCssXCJ9LHJlZmxlY3RfY3NzX3ZhbHVlOnttYWM6XCJzaGlmdCtjb21tYW5kK3JcIix3aW46XCJzaGlmdCtjdHJsK3JcIn0sZW5jb2RlX2RlY29kZV9kYXRhX3VybDp7bWFjOlwic2hpZnQrY3RybCtkXCIsd2luOlwiY3RybCsnXCJ9LGV4cGFuZF9hYmJyZXZpYXRpb25fd2l0aF90YWI6XCJUYWJcIix3cmFwX3dpdGhfYWJicmV2aWF0aW9uOnttYWM6XCJzaGlmdCtjdHJsK2FcIix3aW46XCJzaGlmdCtjdHJsK2FcIn19LGM9bmV3IGY7dC5jb21tYW5kcz1uZXcgcix0LnJ1bkVtbWV0Q29tbWFuZD1mdW5jdGlvbiB2KGUpe3RyeXtjLnNldHVwQ29udGV4dChlKTt2YXIgdD11LnJlcXVpcmUoXCJhY3Rpb25zXCIpO2lmKHRoaXMuYWN0aW9uPT1cImV4cGFuZF9hYmJyZXZpYXRpb25fd2l0aF90YWJcIiYmIWUuc2VsZWN0aW9uLmlzRW1wdHkoKSlyZXR1cm4hMTtpZih0aGlzLmFjdGlvbj09XCJ3cmFwX3dpdGhfYWJicmV2aWF0aW9uXCIpcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnJ1bihcIndyYXBfd2l0aF9hYmJyZXZpYXRpb25cIixjKX0sMCk7dmFyIG49ZS5zZWxlY3Rpb24ubGVhZCxyPWUuc2Vzc2lvbi5nZXRUb2tlbkF0KG4ucm93LG4uY29sdW1uKTtpZihyJiYvXFxidGFnXFxiLy50ZXN0KHIudHlwZSkpcmV0dXJuITE7dmFyIGk9dC5ydW4odGhpcy5hY3Rpb24sYyl9Y2F0Y2gocyl7aWYoIXUpcmV0dXJuIGQodi5iaW5kKHRoaXMsZSkpLCEwO2UuX3NpZ25hbChcImNoYW5nZVN0YXR1c1wiLHR5cGVvZiBzPT1cInN0cmluZ1wiP3M6cy5tZXNzYWdlKSxjb25zb2xlLmxvZyhzKSxpPSExfXJldHVybiBpfTtmb3IodmFyIGggaW4gbCl0LmNvbW1hbmRzLmFkZENvbW1hbmQoe25hbWU6XCJlbW1ldDpcIitoLGFjdGlvbjpoLGJpbmRLZXk6bFtoXSxleGVjOnQucnVuRW1tZXRDb21tYW5kLG11bHRpU2VsZWN0QWN0aW9uOlwiZm9yRWFjaFwifSk7dC51cGRhdGVDb21tYW5kcz1mdW5jdGlvbihlLG4pe24/ZS5rZXlCaW5kaW5nLmFkZEtleWJvYXJkSGFuZGxlcih0LmNvbW1hbmRzKTplLmtleUJpbmRpbmcucmVtb3ZlS2V5Ym9hcmRIYW5kbGVyKHQuY29tbWFuZHMpfSx0LmlzU3VwcG9ydGVkTW9kZT1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4hMTtpZihlLmVtbWV0Q29uZmlnKXJldHVybiEwO3ZhciB0PWUuJGlkfHxlO3JldHVybi9jc3N8bGVzc3xzY3NzfHNhc3N8c3R5bHVzfGh0bWx8cGhwfHR3aWd8ZWpzfGhhbmRsZWJhcnMvLnRlc3QodCl9LHQuaXNBdmFpbGFibGU9ZnVuY3Rpb24oZSxuKXtpZigvKGV2YWx1YXRlX21hdGhfZXhwcmVzc2lvbnxleHBhbmRfYWJicmV2aWF0aW9uKSQvLnRlc3QobikpcmV0dXJuITA7dmFyIHI9ZS5zZXNzaW9uLiRtb2RlLGk9dC5pc1N1cHBvcnRlZE1vZGUocik7aWYoaSYmci4kbW9kZXMpdHJ5e2Muc2V0dXBDb250ZXh0KGUpLC9qc3xwaHAvLnRlc3QoYy5nZXRTeW50YXgoKSkmJihpPSExKX1jYXRjaChzKXt9cmV0dXJuIGl9O3ZhciBwPWZ1bmN0aW9uKGUsbil7dmFyIHI9bjtpZighcilyZXR1cm47dmFyIGk9dC5pc1N1cHBvcnRlZE1vZGUoci5zZXNzaW9uLiRtb2RlKTtlLmVuYWJsZUVtbWV0PT09ITEmJihpPSExKSxpJiZkKCksdC51cGRhdGVDb21tYW5kcyhyLGkpfSxkPWZ1bmN0aW9uKHQpe3R5cGVvZiBhPT1cInN0cmluZ1wiJiZlKFwiYWNlL2NvbmZpZ1wiKS5sb2FkTW9kdWxlKGEsZnVuY3Rpb24oKXthPW51bGwsdCYmdCgpfSl9O3QuQWNlRW1tZXRFZGl0b3I9ZixlKFwiYWNlL2NvbmZpZ1wiKS5kZWZpbmVPcHRpb25zKGkucHJvdG90eXBlLFwiZWRpdG9yXCIse2VuYWJsZUVtbWV0OntzZXQ6ZnVuY3Rpb24oZSl7dGhpc1tlP1wib25cIjpcInJlbW92ZUxpc3RlbmVyXCJdKFwiY2hhbmdlTW9kZVwiLHApLHAoe2VuYWJsZUVtbWV0OiEhZX0sdGhpcyl9LHZhbHVlOiEwfX0pLHQuc2V0Q29yZT1mdW5jdGlvbihlKXt0eXBlb2YgZT09XCJzdHJpbmdcIj9hPWU6dT1lfX0pO1xuICAgICAgICAgICAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlcXVpcmUoW1wiYWNlL2V4dC9lbW1ldFwiXSwgZnVuY3Rpb24oKSB7fSk7XG4gICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgIFxuIiwiZGVmaW5lKFwiYWNlL2V4dC90aGVtZWxpc3RcIixbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIixcImFjZS9saWIvZml4b2xkYnJvd3NlcnNcIl0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2UoXCJhY2UvbGliL2ZpeG9sZGJyb3dzZXJzXCIpO3ZhciByPVtbXCJDaHJvbWVcIl0sW1wiQ2xvdWRzXCJdLFtcIkNyaW1zb24gRWRpdG9yXCJdLFtcIkRhd25cIl0sW1wiRHJlYW13ZWF2ZXJcIl0sW1wiRWNsaXBzZVwiXSxbXCJHaXRIdWJcIl0sW1wiSVBsYXN0aWNcIl0sW1wiU29sYXJpemVkIExpZ2h0XCJdLFtcIlRleHRNYXRlXCJdLFtcIlRvbW9ycm93XCJdLFtcIlhDb2RlXCJdLFtcIkt1cm9pclwiXSxbXCJLYXR6ZW5NaWxjaFwiXSxbXCJTUUwgU2VydmVyXCIsXCJzcWxzZXJ2ZXJcIixcImxpZ2h0XCJdLFtcIkFtYmlhbmNlXCIsXCJhbWJpYW5jZVwiLFwiZGFya1wiXSxbXCJDaGFvc1wiLFwiY2hhb3NcIixcImRhcmtcIl0sW1wiQ2xvdWRzIE1pZG5pZ2h0XCIsXCJjbG91ZHNfbWlkbmlnaHRcIixcImRhcmtcIl0sW1wiQ29iYWx0XCIsXCJjb2JhbHRcIixcImRhcmtcIl0sW1wiaWRsZSBGaW5nZXJzXCIsXCJpZGxlX2ZpbmdlcnNcIixcImRhcmtcIl0sW1wia3JUaGVtZVwiLFwia3JfdGhlbWVcIixcImRhcmtcIl0sW1wiTWVyYml2b3JlXCIsXCJtZXJiaXZvcmVcIixcImRhcmtcIl0sW1wiTWVyYml2b3JlIFNvZnRcIixcIm1lcmJpdm9yZV9zb2Z0XCIsXCJkYXJrXCJdLFtcIk1vbm8gSW5kdXN0cmlhbFwiLFwibW9ub19pbmR1c3RyaWFsXCIsXCJkYXJrXCJdLFtcIk1vbm9rYWlcIixcIm1vbm9rYWlcIixcImRhcmtcIl0sW1wiUGFzdGVsIG9uIGRhcmtcIixcInBhc3RlbF9vbl9kYXJrXCIsXCJkYXJrXCJdLFtcIlNvbGFyaXplZCBEYXJrXCIsXCJzb2xhcml6ZWRfZGFya1wiLFwiZGFya1wiXSxbXCJUZXJtaW5hbFwiLFwidGVybWluYWxcIixcImRhcmtcIl0sW1wiVG9tb3Jyb3cgTmlnaHRcIixcInRvbW9ycm93X25pZ2h0XCIsXCJkYXJrXCJdLFtcIlRvbW9ycm93IE5pZ2h0IEJsdWVcIixcInRvbW9ycm93X25pZ2h0X2JsdWVcIixcImRhcmtcIl0sW1wiVG9tb3Jyb3cgTmlnaHQgQnJpZ2h0XCIsXCJ0b21vcnJvd19uaWdodF9icmlnaHRcIixcImRhcmtcIl0sW1wiVG9tb3Jyb3cgTmlnaHQgODBzXCIsXCJ0b21vcnJvd19uaWdodF9laWdodGllc1wiLFwiZGFya1wiXSxbXCJUd2lsaWdodFwiLFwidHdpbGlnaHRcIixcImRhcmtcIl0sW1wiVmlicmFudCBJbmtcIixcInZpYnJhbnRfaW5rXCIsXCJkYXJrXCJdXTt0LnRoZW1lc0J5TmFtZT17fSx0LnRoZW1lcz1yLm1hcChmdW5jdGlvbihlKXt2YXIgbj1lWzFdfHxlWzBdLnJlcGxhY2UoLyAvZyxcIl9cIikudG9Mb3dlckNhc2UoKSxyPXtjYXB0aW9uOmVbMF0sdGhlbWU6XCJhY2UvdGhlbWUvXCIrbixpc0Rhcms6ZVsyXT09XCJkYXJrXCIsbmFtZTpufTtyZXR1cm4gdC50aGVtZXNCeU5hbWVbbl09cixyfSl9KTtcbiAgICAgICAgICAgICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1aXJlKFtcImFjZS9leHQvdGhlbWVsaXN0XCJdLCBmdW5jdGlvbigpIHt9KTtcbiAgICAgICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgXG4iLCIvKiEgalF1ZXJ5IFVJIC0gdjEuMTEuNCAtIDIwMTUtMDMtMTFcbiogaHR0cDovL2pxdWVyeXVpLmNvbVxuKiBJbmNsdWRlczogY29yZS5qcywgd2lkZ2V0LmpzLCBtb3VzZS5qcywgcG9zaXRpb24uanMsIGFjY29yZGlvbi5qcywgYXV0b2NvbXBsZXRlLmpzLCBidXR0b24uanMsIGRhdGVwaWNrZXIuanMsIGRpYWxvZy5qcywgZHJhZ2dhYmxlLmpzLCBkcm9wcGFibGUuanMsIGVmZmVjdC5qcywgZWZmZWN0LWJsaW5kLmpzLCBlZmZlY3QtYm91bmNlLmpzLCBlZmZlY3QtY2xpcC5qcywgZWZmZWN0LWRyb3AuanMsIGVmZmVjdC1leHBsb2RlLmpzLCBlZmZlY3QtZmFkZS5qcywgZWZmZWN0LWZvbGQuanMsIGVmZmVjdC1oaWdobGlnaHQuanMsIGVmZmVjdC1wdWZmLmpzLCBlZmZlY3QtcHVsc2F0ZS5qcywgZWZmZWN0LXNjYWxlLmpzLCBlZmZlY3Qtc2hha2UuanMsIGVmZmVjdC1zaXplLmpzLCBlZmZlY3Qtc2xpZGUuanMsIGVmZmVjdC10cmFuc2Zlci5qcywgbWVudS5qcywgcHJvZ3Jlc3NiYXIuanMsIHJlc2l6YWJsZS5qcywgc2VsZWN0YWJsZS5qcywgc2VsZWN0bWVudS5qcywgc2xpZGVyLmpzLCBzb3J0YWJsZS5qcywgc3Bpbm5lci5qcywgdGFicy5qcywgdG9vbHRpcC5qc1xuKiBDb3B5cmlnaHQgMjAxNSBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzOyBMaWNlbnNlZCBNSVQgKi9cblxuKGZ1bmN0aW9uKGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGUpOmUoalF1ZXJ5KX0pKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxzKXt2YXIgbixhLG8scj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJhcmVhXCI9PT1yPyhuPXQucGFyZW50Tm9kZSxhPW4ubmFtZSx0LmhyZWYmJmEmJlwibWFwXCI9PT1uLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/KG89ZShcImltZ1t1c2VtYXA9JyNcIithK1wiJ11cIilbMF0sISFvJiZpKG8pKTohMSk6KC9eKGlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0KSQvLnRlc3Qocik/IXQuZGlzYWJsZWQ6XCJhXCI9PT1yP3QuaHJlZnx8czpzKSYmaSh0KX1mdW5jdGlvbiBpKHQpe3JldHVybiBlLmV4cHIuZmlsdGVycy52aXNpYmxlKHQpJiYhZSh0KS5wYXJlbnRzKCkuYWRkQmFjaygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVyblwiaGlkZGVuXCI9PT1lLmNzcyh0aGlzLFwidmlzaWJpbGl0eVwiKX0pLmxlbmd0aH1mdW5jdGlvbiBzKGUpe2Zvcih2YXIgdCxpO2UubGVuZ3RoJiZlWzBdIT09ZG9jdW1lbnQ7KXtpZih0PWUuY3NzKFwicG9zaXRpb25cIiksKFwiYWJzb2x1dGVcIj09PXR8fFwicmVsYXRpdmVcIj09PXR8fFwiZml4ZWRcIj09PXQpJiYoaT1wYXJzZUludChlLmNzcyhcInpJbmRleFwiKSwxMCksIWlzTmFOKGkpJiYwIT09aSkpcmV0dXJuIGk7ZT1lLnBhcmVudCgpfXJldHVybiAwfWZ1bmN0aW9uIG4oKXt0aGlzLl9jdXJJbnN0PW51bGwsdGhpcy5fa2V5RXZlbnQ9ITEsdGhpcy5fZGlzYWJsZWRJbnB1dHM9W10sdGhpcy5fZGF0ZXBpY2tlclNob3dpbmc9ITEsdGhpcy5faW5EaWFsb2c9ITEsdGhpcy5fbWFpbkRpdklkPVwidWktZGF0ZXBpY2tlci1kaXZcIix0aGlzLl9pbmxpbmVDbGFzcz1cInVpLWRhdGVwaWNrZXItaW5saW5lXCIsdGhpcy5fYXBwZW5kQ2xhc3M9XCJ1aS1kYXRlcGlja2VyLWFwcGVuZFwiLHRoaXMuX3RyaWdnZXJDbGFzcz1cInVpLWRhdGVwaWNrZXItdHJpZ2dlclwiLHRoaXMuX2RpYWxvZ0NsYXNzPVwidWktZGF0ZXBpY2tlci1kaWFsb2dcIix0aGlzLl9kaXNhYmxlQ2xhc3M9XCJ1aS1kYXRlcGlja2VyLWRpc2FibGVkXCIsdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3M9XCJ1aS1kYXRlcGlja2VyLXVuc2VsZWN0YWJsZVwiLHRoaXMuX2N1cnJlbnRDbGFzcz1cInVpLWRhdGVwaWNrZXItY3VycmVudC1kYXlcIix0aGlzLl9kYXlPdmVyQ2xhc3M9XCJ1aS1kYXRlcGlja2VyLWRheXMtY2VsbC1vdmVyXCIsdGhpcy5yZWdpb25hbD1bXSx0aGlzLnJlZ2lvbmFsW1wiXCJdPXtjbG9zZVRleHQ6XCJEb25lXCIscHJldlRleHQ6XCJQcmV2XCIsbmV4dFRleHQ6XCJOZXh0XCIsY3VycmVudFRleHQ6XCJUb2RheVwiLG1vbnRoTmFtZXM6W1wiSmFudWFyeVwiLFwiRmVicnVhcnlcIixcIk1hcmNoXCIsXCJBcHJpbFwiLFwiTWF5XCIsXCJKdW5lXCIsXCJKdWx5XCIsXCJBdWd1c3RcIixcIlNlcHRlbWJlclwiLFwiT2N0b2JlclwiLFwiTm92ZW1iZXJcIixcIkRlY2VtYmVyXCJdLG1vbnRoTmFtZXNTaG9ydDpbXCJKYW5cIixcIkZlYlwiLFwiTWFyXCIsXCJBcHJcIixcIk1heVwiLFwiSnVuXCIsXCJKdWxcIixcIkF1Z1wiLFwiU2VwXCIsXCJPY3RcIixcIk5vdlwiLFwiRGVjXCJdLGRheU5hbWVzOltcIlN1bmRheVwiLFwiTW9uZGF5XCIsXCJUdWVzZGF5XCIsXCJXZWRuZXNkYXlcIixcIlRodXJzZGF5XCIsXCJGcmlkYXlcIixcIlNhdHVyZGF5XCJdLGRheU5hbWVzU2hvcnQ6W1wiU3VuXCIsXCJNb25cIixcIlR1ZVwiLFwiV2VkXCIsXCJUaHVcIixcIkZyaVwiLFwiU2F0XCJdLGRheU5hbWVzTWluOltcIlN1XCIsXCJNb1wiLFwiVHVcIixcIldlXCIsXCJUaFwiLFwiRnJcIixcIlNhXCJdLHdlZWtIZWFkZXI6XCJXa1wiLGRhdGVGb3JtYXQ6XCJtbS9kZC95eVwiLGZpcnN0RGF5OjAsaXNSVEw6ITEsc2hvd01vbnRoQWZ0ZXJZZWFyOiExLHllYXJTdWZmaXg6XCJcIn0sdGhpcy5fZGVmYXVsdHM9e3Nob3dPbjpcImZvY3VzXCIsc2hvd0FuaW06XCJmYWRlSW5cIixzaG93T3B0aW9uczp7fSxkZWZhdWx0RGF0ZTpudWxsLGFwcGVuZFRleHQ6XCJcIixidXR0b25UZXh0OlwiLi4uXCIsYnV0dG9uSW1hZ2U6XCJcIixidXR0b25JbWFnZU9ubHk6ITEsaGlkZUlmTm9QcmV2TmV4dDohMSxuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0OiExLGdvdG9DdXJyZW50OiExLGNoYW5nZU1vbnRoOiExLGNoYW5nZVllYXI6ITEseWVhclJhbmdlOlwiYy0xMDpjKzEwXCIsc2hvd090aGVyTW9udGhzOiExLHNlbGVjdE90aGVyTW9udGhzOiExLHNob3dXZWVrOiExLGNhbGN1bGF0ZVdlZWs6dGhpcy5pc284NjAxV2VlayxzaG9ydFllYXJDdXRvZmY6XCIrMTBcIixtaW5EYXRlOm51bGwsbWF4RGF0ZTpudWxsLGR1cmF0aW9uOlwiZmFzdFwiLGJlZm9yZVNob3dEYXk6bnVsbCxiZWZvcmVTaG93Om51bGwsb25TZWxlY3Q6bnVsbCxvbkNoYW5nZU1vbnRoWWVhcjpudWxsLG9uQ2xvc2U6bnVsbCxudW1iZXJPZk1vbnRoczoxLHNob3dDdXJyZW50QXRQb3M6MCxzdGVwTW9udGhzOjEsc3RlcEJpZ01vbnRoczoxMixhbHRGaWVsZDpcIlwiLGFsdEZvcm1hdDpcIlwiLGNvbnN0cmFpbklucHV0OiEwLHNob3dCdXR0b25QYW5lbDohMSxhdXRvU2l6ZTohMSxkaXNhYmxlZDohMX0sZS5leHRlbmQodGhpcy5fZGVmYXVsdHMsdGhpcy5yZWdpb25hbFtcIlwiXSksdGhpcy5yZWdpb25hbC5lbj1lLmV4dGVuZCghMCx7fSx0aGlzLnJlZ2lvbmFsW1wiXCJdKSx0aGlzLnJlZ2lvbmFsW1wiZW4tVVNcIl09ZS5leHRlbmQoITAse30sdGhpcy5yZWdpb25hbC5lbiksdGhpcy5kcERpdj1hKGUoXCI8ZGl2IGlkPSdcIit0aGlzLl9tYWluRGl2SWQrXCInIGNsYXNzPSd1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbCc+PC9kaXY+XCIpKX1mdW5jdGlvbiBhKHQpe3ZhciBpPVwiYnV0dG9uLCAudWktZGF0ZXBpY2tlci1wcmV2LCAudWktZGF0ZXBpY2tlci1uZXh0LCAudWktZGF0ZXBpY2tlci1jYWxlbmRhciB0ZCBhXCI7cmV0dXJuIHQuZGVsZWdhdGUoaSxcIm1vdXNlb3V0XCIsZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtaG92ZXJcIiksLTEhPT10aGlzLmNsYXNzTmFtZS5pbmRleE9mKFwidWktZGF0ZXBpY2tlci1wcmV2XCIpJiZlKHRoaXMpLnJlbW92ZUNsYXNzKFwidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyXCIpLC0xIT09dGhpcy5jbGFzc05hbWUuaW5kZXhPZihcInVpLWRhdGVwaWNrZXItbmV4dFwiKSYmZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlclwiKX0pLmRlbGVnYXRlKGksXCJtb3VzZW92ZXJcIixvKX1mdW5jdGlvbiBvKCl7ZS5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcih2LmlubGluZT92LmRwRGl2LnBhcmVudCgpWzBdOnYuaW5wdXRbMF0pfHwoZSh0aGlzKS5wYXJlbnRzKFwiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXJcIikuZmluZChcImFcIikucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKSxlKHRoaXMpLmFkZENsYXNzKFwidWktc3RhdGUtaG92ZXJcIiksLTEhPT10aGlzLmNsYXNzTmFtZS5pbmRleE9mKFwidWktZGF0ZXBpY2tlci1wcmV2XCIpJiZlKHRoaXMpLmFkZENsYXNzKFwidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyXCIpLC0xIT09dGhpcy5jbGFzc05hbWUuaW5kZXhPZihcInVpLWRhdGVwaWNrZXItbmV4dFwiKSYmZSh0aGlzKS5hZGRDbGFzcyhcInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlclwiKSl9ZnVuY3Rpb24gcih0LGkpe2UuZXh0ZW5kKHQsaSk7Zm9yKHZhciBzIGluIGkpbnVsbD09aVtzXSYmKHRbc109aVtzXSk7cmV0dXJuIHR9ZnVuY3Rpb24gaChlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsZW1lbnQudmFsKCk7ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fcmVmcmVzaCgpLHQhPT10aGlzLmVsZW1lbnQudmFsKCkmJnRoaXMuX3RyaWdnZXIoXCJjaGFuZ2VcIil9fWUudWk9ZS51aXx8e30sZS5leHRlbmQoZS51aSx7dmVyc2lvbjpcIjEuMTEuNFwiLGtleUNvZGU6e0JBQ0tTUEFDRTo4LENPTU1BOjE4OCxERUxFVEU6NDYsRE9XTjo0MCxFTkQ6MzUsRU5URVI6MTMsRVNDQVBFOjI3LEhPTUU6MzYsTEVGVDozNyxQQUdFX0RPV046MzQsUEFHRV9VUDozMyxQRVJJT0Q6MTkwLFJJR0hUOjM5LFNQQUNFOjMyLFRBQjo5LFVQOjM4fX0pLGUuZm4uZXh0ZW5kKHtzY3JvbGxQYXJlbnQ6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5jc3MoXCJwb3NpdGlvblwiKSxzPVwiYWJzb2x1dGVcIj09PWksbj10Py8oYXV0b3xzY3JvbGx8aGlkZGVuKS86LyhhdXRvfHNjcm9sbCkvLGE9dGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTtyZXR1cm4gcyYmXCJzdGF0aWNcIj09PXQuY3NzKFwicG9zaXRpb25cIik/ITE6bi50ZXN0KHQuY3NzKFwib3ZlcmZsb3dcIikrdC5jc3MoXCJvdmVyZmxvdy15XCIpK3QuY3NzKFwib3ZlcmZsb3cteFwiKSl9KS5lcSgwKTtyZXR1cm5cImZpeGVkXCIhPT1pJiZhLmxlbmd0aD9hOmUodGhpc1swXS5vd25lckRvY3VtZW50fHxkb2N1bWVudCl9LHVuaXF1ZUlkOmZ1bmN0aW9uKCl7dmFyIGU9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5pZHx8KHRoaXMuaWQ9XCJ1aS1pZC1cIisgKytlKX0pfX0oKSxyZW1vdmVVbmlxdWVJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXsvXnVpLWlkLVxcZCskLy50ZXN0KHRoaXMuaWQpJiZlKHRoaXMpLnJlbW92ZUF0dHIoXCJpZFwiKX0pfX0pLGUuZXh0ZW5kKGUuZXhwcltcIjpcIl0se2RhdGE6ZS5leHByLmNyZWF0ZVBzZXVkbz9lLmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihpKXtyZXR1cm4hIWUuZGF0YShpLHQpfX0pOmZ1bmN0aW9uKHQsaSxzKXtyZXR1cm4hIWUuZGF0YSh0LHNbM10pfSxmb2N1c2FibGU6ZnVuY3Rpb24oaSl7cmV0dXJuIHQoaSwhaXNOYU4oZS5hdHRyKGksXCJ0YWJpbmRleFwiKSkpfSx0YWJiYWJsZTpmdW5jdGlvbihpKXt2YXIgcz1lLmF0dHIoaSxcInRhYmluZGV4XCIpLG49aXNOYU4ocyk7cmV0dXJuKG58fHM+PTApJiZ0KGksIW4pfX0pLGUoXCI8YT5cIikub3V0ZXJXaWR0aCgxKS5qcXVlcnl8fGUuZWFjaChbXCJXaWR0aFwiLFwiSGVpZ2h0XCJdLGZ1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gcyh0LGkscyxhKXtyZXR1cm4gZS5lYWNoKG4sZnVuY3Rpb24oKXtpLT1wYXJzZUZsb2F0KGUuY3NzKHQsXCJwYWRkaW5nXCIrdGhpcykpfHwwLHMmJihpLT1wYXJzZUZsb2F0KGUuY3NzKHQsXCJib3JkZXJcIit0aGlzK1wiV2lkdGhcIikpfHwwKSxhJiYoaS09cGFyc2VGbG9hdChlLmNzcyh0LFwibWFyZ2luXCIrdGhpcykpfHwwKX0pLGl9dmFyIG49XCJXaWR0aFwiPT09aT9bXCJMZWZ0XCIsXCJSaWdodFwiXTpbXCJUb3BcIixcIkJvdHRvbVwiXSxhPWkudG9Mb3dlckNhc2UoKSxvPXtpbm5lcldpZHRoOmUuZm4uaW5uZXJXaWR0aCxpbm5lckhlaWdodDplLmZuLmlubmVySGVpZ2h0LG91dGVyV2lkdGg6ZS5mbi5vdXRlcldpZHRoLG91dGVySGVpZ2h0OmUuZm4ub3V0ZXJIZWlnaHR9O2UuZm5bXCJpbm5lclwiK2ldPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10P29bXCJpbm5lclwiK2ldLmNhbGwodGhpcyk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS5jc3MoYSxzKHRoaXMsdCkrXCJweFwiKX0pfSxlLmZuW1wib3V0ZXJcIitpXT1mdW5jdGlvbih0LG4pe3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiB0P29bXCJvdXRlclwiK2ldLmNhbGwodGhpcyx0KTp0aGlzLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLmNzcyhhLHModGhpcyx0LCEwLG4pK1wicHhcIil9KX19KSxlLmZuLmFkZEJhY2t8fChlLmZuLmFkZEJhY2s9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWU/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoZSkpfSksZShcIjxhPlwiKS5kYXRhKFwiYS1iXCIsXCJhXCIpLnJlbW92ZURhdGEoXCJhLWJcIikuZGF0YShcImEtYlwiKSYmKGUuZm4ucmVtb3ZlRGF0YT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oaSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dC5jYWxsKHRoaXMsZS5jYW1lbENhc2UoaSkpOnQuY2FsbCh0aGlzKX19KGUuZm4ucmVtb3ZlRGF0YSkpLGUudWkuaWU9ISEvbXNpZSBbXFx3Ll0rLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSksZS5mbi5leHRlbmQoe2ZvY3VzOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBpP3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2UodCkuZm9jdXMoKSxzJiZzLmNhbGwodCl9LGkpfSk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fShlLmZuLmZvY3VzKSxkaXNhYmxlU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9XCJvbnNlbGVjdHN0YXJ0XCJpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpP1wic2VsZWN0c3RhcnRcIjpcIm1vdXNlZG93blwiO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmJpbmQoZStcIi51aS1kaXNhYmxlU2VsZWN0aW9uXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSl9fSgpLGVuYWJsZVNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuYmluZChcIi51aS1kaXNhYmxlU2VsZWN0aW9uXCIpfSx6SW5kZXg6ZnVuY3Rpb24odCl7aWYodm9pZCAwIT09dClyZXR1cm4gdGhpcy5jc3MoXCJ6SW5kZXhcIix0KTtpZih0aGlzLmxlbmd0aClmb3IodmFyIGkscyxuPWUodGhpc1swXSk7bi5sZW5ndGgmJm5bMF0hPT1kb2N1bWVudDspe2lmKGk9bi5jc3MoXCJwb3NpdGlvblwiKSwoXCJhYnNvbHV0ZVwiPT09aXx8XCJyZWxhdGl2ZVwiPT09aXx8XCJmaXhlZFwiPT09aSkmJihzPXBhcnNlSW50KG4uY3NzKFwiekluZGV4XCIpLDEwKSwhaXNOYU4ocykmJjAhPT1zKSlyZXR1cm4gcztuPW4ucGFyZW50KCl9cmV0dXJuIDB9fSksZS51aS5wbHVnaW49e2FkZDpmdW5jdGlvbih0LGkscyl7dmFyIG4sYT1lLnVpW3RdLnByb3RvdHlwZTtmb3IobiBpbiBzKWEucGx1Z2luc1tuXT1hLnBsdWdpbnNbbl18fFtdLGEucGx1Z2luc1tuXS5wdXNoKFtpLHNbbl1dKX0sY2FsbDpmdW5jdGlvbihlLHQsaSxzKXt2YXIgbixhPWUucGx1Z2luc1t0XTtpZihhJiYoc3x8ZS5lbGVtZW50WzBdLnBhcmVudE5vZGUmJjExIT09ZS5lbGVtZW50WzBdLnBhcmVudE5vZGUubm9kZVR5cGUpKWZvcihuPTA7YS5sZW5ndGg+bjtuKyspZS5vcHRpb25zW2Fbbl1bMF1dJiZhW25dWzFdLmFwcGx5KGUuZWxlbWVudCxpKX19O3ZhciBsPTAsdT1BcnJheS5wcm90b3R5cGUuc2xpY2U7ZS5jbGVhbkRhdGE9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGkpe3ZhciBzLG4sYTtmb3IoYT0wO251bGwhPShuPWlbYV0pO2ErKyl0cnl7cz1lLl9kYXRhKG4sXCJldmVudHNcIikscyYmcy5yZW1vdmUmJmUobikudHJpZ2dlckhhbmRsZXIoXCJyZW1vdmVcIil9Y2F0Y2gobyl7fXQoaSl9fShlLmNsZWFuRGF0YSksZS53aWRnZXQ9ZnVuY3Rpb24odCxpLHMpe3ZhciBuLGEsbyxyLGg9e30sbD10LnNwbGl0KFwiLlwiKVswXTtyZXR1cm4gdD10LnNwbGl0KFwiLlwiKVsxXSxuPWwrXCItXCIrdCxzfHwocz1pLGk9ZS5XaWRnZXQpLGUuZXhwcltcIjpcIl1bbi50b0xvd2VyQ2FzZSgpXT1mdW5jdGlvbih0KXtyZXR1cm4hIWUuZGF0YSh0LG4pfSxlW2xdPWVbbF18fHt9LGE9ZVtsXVt0XSxvPWVbbF1bdF09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY3JlYXRlV2lkZ2V0Pyhhcmd1bWVudHMubGVuZ3RoJiZ0aGlzLl9jcmVhdGVXaWRnZXQoZSx0KSx2b2lkIDApOm5ldyBvKGUsdCl9LGUuZXh0ZW5kKG8sYSx7dmVyc2lvbjpzLnZlcnNpb24sX3Byb3RvOmUuZXh0ZW5kKHt9LHMpLF9jaGlsZENvbnN0cnVjdG9yczpbXX0pLHI9bmV3IGksci5vcHRpb25zPWUud2lkZ2V0LmV4dGVuZCh7fSxyLm9wdGlvbnMpLGUuZWFjaChzLGZ1bmN0aW9uKHQscyl7cmV0dXJuIGUuaXNGdW5jdGlvbihzKT8oaFt0XT1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKCl7cmV0dXJuIGkucHJvdG90eXBlW3RdLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbj1mdW5jdGlvbihlKXtyZXR1cm4gaS5wcm90b3R5cGVbdF0uYXBwbHkodGhpcyxlKX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQsaT10aGlzLl9zdXBlcixhPXRoaXMuX3N1cGVyQXBwbHk7cmV0dXJuIHRoaXMuX3N1cGVyPWUsdGhpcy5fc3VwZXJBcHBseT1uLHQ9cy5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fc3VwZXI9aSx0aGlzLl9zdXBlckFwcGx5PWEsdH19KCksdm9pZCAwKTooaFt0XT1zLHZvaWQgMCl9KSxvLnByb3RvdHlwZT1lLndpZGdldC5leHRlbmQocix7d2lkZ2V0RXZlbnRQcmVmaXg6YT9yLndpZGdldEV2ZW50UHJlZml4fHx0OnR9LGgse2NvbnN0cnVjdG9yOm8sbmFtZXNwYWNlOmwsd2lkZ2V0TmFtZTp0LHdpZGdldEZ1bGxOYW1lOm59KSxhPyhlLmVhY2goYS5fY2hpbGRDb25zdHJ1Y3RvcnMsZnVuY3Rpb24odCxpKXt2YXIgcz1pLnByb3RvdHlwZTtlLndpZGdldChzLm5hbWVzcGFjZStcIi5cIitzLndpZGdldE5hbWUsbyxpLl9wcm90byl9KSxkZWxldGUgYS5fY2hpbGRDb25zdHJ1Y3RvcnMpOmkuX2NoaWxkQ29uc3RydWN0b3JzLnB1c2gobyksZS53aWRnZXQuYnJpZGdlKHQsbyksb30sZS53aWRnZXQuZXh0ZW5kPWZ1bmN0aW9uKHQpe2Zvcih2YXIgaSxzLG49dS5jYWxsKGFyZ3VtZW50cywxKSxhPTAsbz1uLmxlbmd0aDtvPmE7YSsrKWZvcihpIGluIG5bYV0pcz1uW2FdW2ldLG5bYV0uaGFzT3duUHJvcGVydHkoaSkmJnZvaWQgMCE9PXMmJih0W2ldPWUuaXNQbGFpbk9iamVjdChzKT9lLmlzUGxhaW5PYmplY3QodFtpXSk/ZS53aWRnZXQuZXh0ZW5kKHt9LHRbaV0scyk6ZS53aWRnZXQuZXh0ZW5kKHt9LHMpOnMpO3JldHVybiB0fSxlLndpZGdldC5icmlkZ2U9ZnVuY3Rpb24odCxpKXt2YXIgcz1pLnByb3RvdHlwZS53aWRnZXRGdWxsTmFtZXx8dDtlLmZuW3RdPWZ1bmN0aW9uKG4pe3ZhciBhPVwic3RyaW5nXCI9PXR5cGVvZiBuLG89dS5jYWxsKGFyZ3VtZW50cywxKSxyPXRoaXM7cmV0dXJuIGE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGksYT1lLmRhdGEodGhpcyxzKTtyZXR1cm5cImluc3RhbmNlXCI9PT1uPyhyPWEsITEpOmE/ZS5pc0Z1bmN0aW9uKGFbbl0pJiZcIl9cIiE9PW4uY2hhckF0KDApPyhpPWFbbl0uYXBwbHkoYSxvKSxpIT09YSYmdm9pZCAwIT09aT8ocj1pJiZpLmpxdWVyeT9yLnB1c2hTdGFjayhpLmdldCgpKTppLCExKTp2b2lkIDApOmUuZXJyb3IoXCJubyBzdWNoIG1ldGhvZCAnXCIrbitcIicgZm9yIFwiK3QrXCIgd2lkZ2V0IGluc3RhbmNlXCIpOmUuZXJyb3IoXCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uIFwiK3QrXCIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247IFwiK1wiYXR0ZW1wdGVkIHRvIGNhbGwgbWV0aG9kICdcIituK1wiJ1wiKX0pOihvLmxlbmd0aCYmKG49ZS53aWRnZXQuZXh0ZW5kLmFwcGx5KG51bGwsW25dLmNvbmNhdChvKSkpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUuZGF0YSh0aGlzLHMpO3Q/KHQub3B0aW9uKG58fHt9KSx0Ll9pbml0JiZ0Ll9pbml0KCkpOmUuZGF0YSh0aGlzLHMsbmV3IGkobix0aGlzKSl9KSkscn19LGUuV2lkZ2V0PWZ1bmN0aW9uKCl7fSxlLldpZGdldC5fY2hpbGRDb25zdHJ1Y3RvcnM9W10sZS5XaWRnZXQucHJvdG90eXBlPXt3aWRnZXROYW1lOlwid2lkZ2V0XCIsd2lkZ2V0RXZlbnRQcmVmaXg6XCJcIixkZWZhdWx0RWxlbWVudDpcIjxkaXY+XCIsb3B0aW9uczp7ZGlzYWJsZWQ6ITEsY3JlYXRlOm51bGx9LF9jcmVhdGVXaWRnZXQ6ZnVuY3Rpb24odCxpKXtpPWUoaXx8dGhpcy5kZWZhdWx0RWxlbWVudHx8dGhpcylbMF0sdGhpcy5lbGVtZW50PWUoaSksdGhpcy51dWlkPWwrKyx0aGlzLmV2ZW50TmFtZXNwYWNlPVwiLlwiK3RoaXMud2lkZ2V0TmFtZSt0aGlzLnV1aWQsdGhpcy5iaW5kaW5ncz1lKCksdGhpcy5ob3ZlcmFibGU9ZSgpLHRoaXMuZm9jdXNhYmxlPWUoKSxpIT09dGhpcyYmKGUuZGF0YShpLHRoaXMud2lkZ2V0RnVsbE5hbWUsdGhpcyksdGhpcy5fb24oITAsdGhpcy5lbGVtZW50LHtyZW1vdmU6ZnVuY3Rpb24oZSl7ZS50YXJnZXQ9PT1pJiZ0aGlzLmRlc3Ryb3koKX19KSx0aGlzLmRvY3VtZW50PWUoaS5zdHlsZT9pLm93bmVyRG9jdW1lbnQ6aS5kb2N1bWVudHx8aSksdGhpcy53aW5kb3c9ZSh0aGlzLmRvY3VtZW50WzBdLmRlZmF1bHRWaWV3fHx0aGlzLmRvY3VtZW50WzBdLnBhcmVudFdpbmRvdykpLHRoaXMub3B0aW9ucz1lLndpZGdldC5leHRlbmQoe30sdGhpcy5vcHRpb25zLHRoaXMuX2dldENyZWF0ZU9wdGlvbnMoKSx0KSx0aGlzLl9jcmVhdGUoKSx0aGlzLl90cmlnZ2VyKFwiY3JlYXRlXCIsbnVsbCx0aGlzLl9nZXRDcmVhdGVFdmVudERhdGEoKSksdGhpcy5faW5pdCgpfSxfZ2V0Q3JlYXRlT3B0aW9uczplLm5vb3AsX2dldENyZWF0ZUV2ZW50RGF0YTplLm5vb3AsX2NyZWF0ZTplLm5vb3AsX2luaXQ6ZS5ub29wLGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9kZXN0cm95KCksdGhpcy5lbGVtZW50LnVuYmluZCh0aGlzLmV2ZW50TmFtZXNwYWNlKS5yZW1vdmVEYXRhKHRoaXMud2lkZ2V0RnVsbE5hbWUpLnJlbW92ZURhdGEoZS5jYW1lbENhc2UodGhpcy53aWRnZXRGdWxsTmFtZSkpLHRoaXMud2lkZ2V0KCkudW5iaW5kKHRoaXMuZXZlbnROYW1lc3BhY2UpLnJlbW92ZUF0dHIoXCJhcmlhLWRpc2FibGVkXCIpLnJlbW92ZUNsYXNzKHRoaXMud2lkZ2V0RnVsbE5hbWUrXCItZGlzYWJsZWQgXCIrXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKSx0aGlzLmJpbmRpbmdzLnVuYmluZCh0aGlzLmV2ZW50TmFtZXNwYWNlKSx0aGlzLmhvdmVyYWJsZS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWhvdmVyXCIpLHRoaXMuZm9jdXNhYmxlLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZm9jdXNcIil9LF9kZXN0cm95OmUubm9vcCx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50fSxvcHRpb246ZnVuY3Rpb24odCxpKXt2YXIgcyxuLGEsbz10O2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBlLndpZGdldC5leHRlbmQoe30sdGhpcy5vcHRpb25zKTtpZihcInN0cmluZ1wiPT10eXBlb2YgdClpZihvPXt9LHM9dC5zcGxpdChcIi5cIiksdD1zLnNoaWZ0KCkscy5sZW5ndGgpe2ZvcihuPW9bdF09ZS53aWRnZXQuZXh0ZW5kKHt9LHRoaXMub3B0aW9uc1t0XSksYT0wO3MubGVuZ3RoLTE+YTthKyspbltzW2FdXT1uW3NbYV1dfHx7fSxuPW5bc1thXV07aWYodD1zLnBvcCgpLDE9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1uW3RdP251bGw6blt0XTtuW3RdPWl9ZWxzZXtpZigxPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09dGhpcy5vcHRpb25zW3RdP251bGw6dGhpcy5vcHRpb25zW3RdO29bdF09aX1yZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyhvKSx0aGlzfSxfc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlKXRoaXMuX3NldE9wdGlvbih0LGVbdF0pO3JldHVybiB0aGlzfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub3B0aW9uc1tlXT10LFwiZGlzYWJsZWRcIj09PWUmJih0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKHRoaXMud2lkZ2V0RnVsbE5hbWUrXCItZGlzYWJsZWRcIiwhIXQpLHQmJih0aGlzLmhvdmVyYWJsZS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWhvdmVyXCIpLHRoaXMuZm9jdXNhYmxlLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZm9jdXNcIikpKSx0aGlzfSxlbmFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyh7ZGlzYWJsZWQ6ITF9KX0sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZXRPcHRpb25zKHtkaXNhYmxlZDohMH0pfSxfb246ZnVuY3Rpb24odCxpLHMpe3ZhciBuLGE9dGhpcztcImJvb2xlYW5cIiE9dHlwZW9mIHQmJihzPWksaT10LHQ9ITEpLHM/KGk9bj1lKGkpLHRoaXMuYmluZGluZ3M9dGhpcy5iaW5kaW5ncy5hZGQoaSkpOihzPWksaT10aGlzLmVsZW1lbnQsbj10aGlzLndpZGdldCgpKSxlLmVhY2gocyxmdW5jdGlvbihzLG8pe2Z1bmN0aW9uIHIoKXtyZXR1cm4gdHx8YS5vcHRpb25zLmRpc2FibGVkIT09ITAmJiFlKHRoaXMpLmhhc0NsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIik/KFwic3RyaW5nXCI9PXR5cGVvZiBvP2Fbb106bykuYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH1cInN0cmluZ1wiIT10eXBlb2YgbyYmKHIuZ3VpZD1vLmd1aWQ9by5ndWlkfHxyLmd1aWR8fGUuZ3VpZCsrKTt2YXIgaD1zLm1hdGNoKC9eKFtcXHc6LV0qKVxccyooLiopJC8pLGw9aFsxXSthLmV2ZW50TmFtZXNwYWNlLHU9aFsyXTt1P24uZGVsZWdhdGUodSxsLHIpOmkuYmluZChsLHIpfSl9LF9vZmY6ZnVuY3Rpb24odCxpKXtpPShpfHxcIlwiKS5zcGxpdChcIiBcIikuam9pbih0aGlzLmV2ZW50TmFtZXNwYWNlK1wiIFwiKSt0aGlzLmV2ZW50TmFtZXNwYWNlLHQudW5iaW5kKGkpLnVuZGVsZWdhdGUoaSksdGhpcy5iaW5kaW5ncz1lKHRoaXMuYmluZGluZ3Mubm90KHQpLmdldCgpKSx0aGlzLmZvY3VzYWJsZT1lKHRoaXMuZm9jdXNhYmxlLm5vdCh0KS5nZXQoKSksdGhpcy5ob3ZlcmFibGU9ZSh0aGlzLmhvdmVyYWJsZS5ub3QodCkuZ2V0KCkpfSxfZGVsYXk6ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKCl7cmV0dXJuKFwic3RyaW5nXCI9PXR5cGVvZiBlP3NbZV06ZSkuYXBwbHkocyxhcmd1bWVudHMpfXZhciBzPXRoaXM7cmV0dXJuIHNldFRpbWVvdXQoaSx0fHwwKX0sX2hvdmVyYWJsZTpmdW5jdGlvbih0KXt0aGlzLmhvdmVyYWJsZT10aGlzLmhvdmVyYWJsZS5hZGQodCksdGhpcy5fb24odCx7bW91c2VlbnRlcjpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKX0sbW91c2VsZWF2ZTpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKX19KX0sX2ZvY3VzYWJsZTpmdW5jdGlvbih0KXt0aGlzLmZvY3VzYWJsZT10aGlzLmZvY3VzYWJsZS5hZGQodCksdGhpcy5fb24odCx7Zm9jdXNpbjpmdW5jdGlvbih0KXtlKHQuY3VycmVudFRhcmdldCkuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1mb2N1c1wiKX0sZm9jdXNvdXQ6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZm9jdXNcIil9fSl9LF90cmlnZ2VyOmZ1bmN0aW9uKHQsaSxzKXt2YXIgbixhLG89dGhpcy5vcHRpb25zW3RdO2lmKHM9c3x8e30saT1lLkV2ZW50KGkpLGkudHlwZT0odD09PXRoaXMud2lkZ2V0RXZlbnRQcmVmaXg/dDp0aGlzLndpZGdldEV2ZW50UHJlZml4K3QpLnRvTG93ZXJDYXNlKCksaS50YXJnZXQ9dGhpcy5lbGVtZW50WzBdLGE9aS5vcmlnaW5hbEV2ZW50KWZvcihuIGluIGEpbiBpbiBpfHwoaVtuXT1hW25dKTtyZXR1cm4gdGhpcy5lbGVtZW50LnRyaWdnZXIoaSxzKSwhKGUuaXNGdW5jdGlvbihvKSYmby5hcHBseSh0aGlzLmVsZW1lbnRbMF0sW2ldLmNvbmNhdChzKSk9PT0hMXx8aS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl9fSxlLmVhY2goe3Nob3c6XCJmYWRlSW5cIixoaWRlOlwiZmFkZU91dFwifSxmdW5jdGlvbih0LGkpe2UuV2lkZ2V0LnByb3RvdHlwZVtcIl9cIit0XT1mdW5jdGlvbihzLG4sYSl7XCJzdHJpbmdcIj09dHlwZW9mIG4mJihuPXtlZmZlY3Q6bn0pO3ZhciBvLHI9bj9uPT09ITB8fFwibnVtYmVyXCI9PXR5cGVvZiBuP2k6bi5lZmZlY3R8fGk6dDtuPW58fHt9LFwibnVtYmVyXCI9PXR5cGVvZiBuJiYobj17ZHVyYXRpb246bn0pLG89IWUuaXNFbXB0eU9iamVjdChuKSxuLmNvbXBsZXRlPWEsbi5kZWxheSYmcy5kZWxheShuLmRlbGF5KSxvJiZlLmVmZmVjdHMmJmUuZWZmZWN0cy5lZmZlY3Rbcl0/c1t0XShuKTpyIT09dCYmc1tyXT9zW3JdKG4uZHVyYXRpb24sbi5lYXNpbmcsYSk6cy5xdWV1ZShmdW5jdGlvbihpKXtlKHRoaXMpW3RdKCksYSYmYS5jYWxsKHNbMF0pLGkoKX0pfX0pLGUud2lkZ2V0O3ZhciBkPSExO2UoZG9jdW1lbnQpLm1vdXNldXAoZnVuY3Rpb24oKXtkPSExfSksZS53aWRnZXQoXCJ1aS5tb3VzZVwiLHt2ZXJzaW9uOlwiMS4xMS40XCIsb3B0aW9uczp7Y2FuY2VsOlwiaW5wdXQsdGV4dGFyZWEsYnV0dG9uLHNlbGVjdCxvcHRpb25cIixkaXN0YW5jZToxLGRlbGF5OjB9LF9tb3VzZUluaXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZWxlbWVudC5iaW5kKFwibW91c2Vkb3duLlwiK3RoaXMud2lkZ2V0TmFtZSxmdW5jdGlvbihlKXtyZXR1cm4gdC5fbW91c2VEb3duKGUpfSkuYmluZChcImNsaWNrLlwiK3RoaXMud2lkZ2V0TmFtZSxmdW5jdGlvbihpKXtyZXR1cm4hMD09PWUuZGF0YShpLnRhcmdldCx0LndpZGdldE5hbWUrXCIucHJldmVudENsaWNrRXZlbnRcIik/KGUucmVtb3ZlRGF0YShpLnRhcmdldCx0LndpZGdldE5hbWUrXCIucHJldmVudENsaWNrRXZlbnRcIiksaS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSwhMSk6dm9pZCAwfSksdGhpcy5zdGFydGVkPSExfSxfbW91c2VEZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnVuYmluZChcIi5cIit0aGlzLndpZGdldE5hbWUpLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlJiZ0aGlzLmRvY3VtZW50LnVuYmluZChcIm1vdXNlbW92ZS5cIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpLnVuYmluZChcIm1vdXNldXAuXCIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSl9LF9tb3VzZURvd246ZnVuY3Rpb24odCl7aWYoIWQpe3RoaXMuX21vdXNlTW92ZWQ9ITEsdGhpcy5fbW91c2VTdGFydGVkJiZ0aGlzLl9tb3VzZVVwKHQpLHRoaXMuX21vdXNlRG93bkV2ZW50PXQ7dmFyIGk9dGhpcyxzPTE9PT10LndoaWNoLG49XCJzdHJpbmdcIj09dHlwZW9mIHRoaXMub3B0aW9ucy5jYW5jZWwmJnQudGFyZ2V0Lm5vZGVOYW1lP2UodC50YXJnZXQpLmNsb3Nlc3QodGhpcy5vcHRpb25zLmNhbmNlbCkubGVuZ3RoOiExO3JldHVybiBzJiYhbiYmdGhpcy5fbW91c2VDYXB0dXJlKHQpPyh0aGlzLm1vdXNlRGVsYXlNZXQ9IXRoaXMub3B0aW9ucy5kZWxheSx0aGlzLm1vdXNlRGVsYXlNZXR8fCh0aGlzLl9tb3VzZURlbGF5VGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2kubW91c2VEZWxheU1ldD0hMH0sdGhpcy5vcHRpb25zLmRlbGF5KSksdGhpcy5fbW91c2VEaXN0YW5jZU1ldCh0KSYmdGhpcy5fbW91c2VEZWxheU1ldCh0KSYmKHRoaXMuX21vdXNlU3RhcnRlZD10aGlzLl9tb3VzZVN0YXJ0KHQpIT09ITEsIXRoaXMuX21vdXNlU3RhcnRlZCk/KHQucHJldmVudERlZmF1bHQoKSwhMCk6KCEwPT09ZS5kYXRhKHQudGFyZ2V0LHRoaXMud2lkZ2V0TmFtZStcIi5wcmV2ZW50Q2xpY2tFdmVudFwiKSYmZS5yZW1vdmVEYXRhKHQudGFyZ2V0LHRoaXMud2lkZ2V0TmFtZStcIi5wcmV2ZW50Q2xpY2tFdmVudFwiKSx0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZT1mdW5jdGlvbihlKXtyZXR1cm4gaS5fbW91c2VNb3ZlKGUpfSx0aGlzLl9tb3VzZVVwRGVsZWdhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGkuX21vdXNlVXAoZSl9LHRoaXMuZG9jdW1lbnQuYmluZChcIm1vdXNlbW92ZS5cIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpLmJpbmQoXCJtb3VzZXVwLlwiK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZVVwRGVsZWdhdGUpLHQucHJldmVudERlZmF1bHQoKSxkPSEwLCEwKSk6ITB9fSxfbW91c2VNb3ZlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX21vdXNlTW92ZWQpe2lmKGUudWkuaWUmJighZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHw5PmRvY3VtZW50LmRvY3VtZW50TW9kZSkmJiF0LmJ1dHRvbilyZXR1cm4gdGhpcy5fbW91c2VVcCh0KTtpZighdC53aGljaClyZXR1cm4gdGhpcy5fbW91c2VVcCh0KX1yZXR1cm4odC53aGljaHx8dC5idXR0b24pJiYodGhpcy5fbW91c2VNb3ZlZD0hMCksdGhpcy5fbW91c2VTdGFydGVkPyh0aGlzLl9tb3VzZURyYWcodCksdC5wcmV2ZW50RGVmYXVsdCgpKToodGhpcy5fbW91c2VEaXN0YW5jZU1ldCh0KSYmdGhpcy5fbW91c2VEZWxheU1ldCh0KSYmKHRoaXMuX21vdXNlU3RhcnRlZD10aGlzLl9tb3VzZVN0YXJ0KHRoaXMuX21vdXNlRG93bkV2ZW50LHQpIT09ITEsdGhpcy5fbW91c2VTdGFydGVkP3RoaXMuX21vdXNlRHJhZyh0KTp0aGlzLl9tb3VzZVVwKHQpKSwhdGhpcy5fbW91c2VTdGFydGVkKX0sX21vdXNlVXA6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZG9jdW1lbnQudW5iaW5kKFwibW91c2Vtb3ZlLlwiK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSkudW5iaW5kKFwibW91c2V1cC5cIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VVcERlbGVnYXRlKSx0aGlzLl9tb3VzZVN0YXJ0ZWQmJih0aGlzLl9tb3VzZVN0YXJ0ZWQ9ITEsdC50YXJnZXQ9PT10aGlzLl9tb3VzZURvd25FdmVudC50YXJnZXQmJmUuZGF0YSh0LnRhcmdldCx0aGlzLndpZGdldE5hbWUrXCIucHJldmVudENsaWNrRXZlbnRcIiwhMCksdGhpcy5fbW91c2VTdG9wKHQpKSxkPSExLCExfSxfbW91c2VEaXN0YW5jZU1ldDpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5tYXgoTWF0aC5hYnModGhpcy5fbW91c2VEb3duRXZlbnQucGFnZVgtZS5wYWdlWCksTWF0aC5hYnModGhpcy5fbW91c2VEb3duRXZlbnQucGFnZVktZS5wYWdlWSkpPj10aGlzLm9wdGlvbnMuZGlzdGFuY2V9LF9tb3VzZURlbGF5TWV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW91c2VEZWxheU1ldH0sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oKXt9LF9tb3VzZURyYWc6ZnVuY3Rpb24oKXt9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oKXt9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oKXtyZXR1cm4hMH19KSxmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSx0LGkpe3JldHVybltwYXJzZUZsb2F0KGVbMF0pKihwLnRlc3QoZVswXSk/dC8xMDA6MSkscGFyc2VGbG9hdChlWzFdKSoocC50ZXN0KGVbMV0pP2kvMTAwOjEpXX1mdW5jdGlvbiBpKHQsaSl7cmV0dXJuIHBhcnNlSW50KGUuY3NzKHQsaSksMTApfHwwfWZ1bmN0aW9uIHModCl7dmFyIGk9dFswXTtyZXR1cm4gOT09PWkubm9kZVR5cGU/e3dpZHRoOnQud2lkdGgoKSxoZWlnaHQ6dC5oZWlnaHQoKSxvZmZzZXQ6e3RvcDowLGxlZnQ6MH19OmUuaXNXaW5kb3coaSk/e3dpZHRoOnQud2lkdGgoKSxoZWlnaHQ6dC5oZWlnaHQoKSxvZmZzZXQ6e3RvcDp0LnNjcm9sbFRvcCgpLGxlZnQ6dC5zY3JvbGxMZWZ0KCl9fTppLnByZXZlbnREZWZhdWx0P3t3aWR0aDowLGhlaWdodDowLG9mZnNldDp7dG9wOmkucGFnZVksbGVmdDppLnBhZ2VYfX06e3dpZHRoOnQub3V0ZXJXaWR0aCgpLGhlaWdodDp0Lm91dGVySGVpZ2h0KCksb2Zmc2V0OnQub2Zmc2V0KCl9fWUudWk9ZS51aXx8e307dmFyIG4sYSxvPU1hdGgubWF4LHI9TWF0aC5hYnMsaD1NYXRoLnJvdW5kLGw9L2xlZnR8Y2VudGVyfHJpZ2h0Lyx1PS90b3B8Y2VudGVyfGJvdHRvbS8sZD0vW1xcK1xcLV1cXGQrKFxcLltcXGRdKyk/JT8vLGM9L15cXHcrLyxwPS8lJC8sZj1lLmZuLnBvc2l0aW9uO2UucG9zaXRpb249e3Njcm9sbGJhcldpZHRoOmZ1bmN0aW9uKCl7aWYodm9pZCAwIT09bilyZXR1cm4gbjt2YXIgdCxpLHM9ZShcIjxkaXYgc3R5bGU9J2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NTBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpoaWRkZW47Jz48ZGl2IHN0eWxlPSdoZWlnaHQ6MTAwcHg7d2lkdGg6YXV0bzsnPjwvZGl2PjwvZGl2PlwiKSxhPXMuY2hpbGRyZW4oKVswXTtyZXR1cm4gZShcImJvZHlcIikuYXBwZW5kKHMpLHQ9YS5vZmZzZXRXaWR0aCxzLmNzcyhcIm92ZXJmbG93XCIsXCJzY3JvbGxcIiksaT1hLm9mZnNldFdpZHRoLHQ9PT1pJiYoaT1zWzBdLmNsaWVudFdpZHRoKSxzLnJlbW92ZSgpLG49dC1pfSxnZXRTY3JvbGxJbmZvOmZ1bmN0aW9uKHQpe3ZhciBpPXQuaXNXaW5kb3d8fHQuaXNEb2N1bWVudD9cIlwiOnQuZWxlbWVudC5jc3MoXCJvdmVyZmxvdy14XCIpLHM9dC5pc1dpbmRvd3x8dC5pc0RvY3VtZW50P1wiXCI6dC5lbGVtZW50LmNzcyhcIm92ZXJmbG93LXlcIiksbj1cInNjcm9sbFwiPT09aXx8XCJhdXRvXCI9PT1pJiZ0LndpZHRoPHQuZWxlbWVudFswXS5zY3JvbGxXaWR0aCxhPVwic2Nyb2xsXCI9PT1zfHxcImF1dG9cIj09PXMmJnQuaGVpZ2h0PHQuZWxlbWVudFswXS5zY3JvbGxIZWlnaHQ7cmV0dXJue3dpZHRoOmE/ZS5wb3NpdGlvbi5zY3JvbGxiYXJXaWR0aCgpOjAsaGVpZ2h0Om4/ZS5wb3NpdGlvbi5zY3JvbGxiYXJXaWR0aCgpOjB9fSxnZXRXaXRoaW5JbmZvOmZ1bmN0aW9uKHQpe3ZhciBpPWUodHx8d2luZG93KSxzPWUuaXNXaW5kb3coaVswXSksbj0hIWlbMF0mJjk9PT1pWzBdLm5vZGVUeXBlO3JldHVybntlbGVtZW50OmksaXNXaW5kb3c6cyxpc0RvY3VtZW50Om4sb2Zmc2V0Omkub2Zmc2V0KCl8fHtsZWZ0OjAsdG9wOjB9LHNjcm9sbExlZnQ6aS5zY3JvbGxMZWZ0KCksc2Nyb2xsVG9wOmkuc2Nyb2xsVG9wKCksd2lkdGg6c3x8bj9pLndpZHRoKCk6aS5vdXRlcldpZHRoKCksaGVpZ2h0OnN8fG4/aS5oZWlnaHQoKTppLm91dGVySGVpZ2h0KCl9fX0sZS5mbi5wb3NpdGlvbj1mdW5jdGlvbihuKXtpZighbnx8IW4ub2YpcmV0dXJuIGYuYXBwbHkodGhpcyxhcmd1bWVudHMpO249ZS5leHRlbmQoe30sbik7dmFyIHAsbSxnLHYseSxiLF89ZShuLm9mKSx4PWUucG9zaXRpb24uZ2V0V2l0aGluSW5mbyhuLndpdGhpbiksdz1lLnBvc2l0aW9uLmdldFNjcm9sbEluZm8oeCksaz0obi5jb2xsaXNpb258fFwiZmxpcFwiKS5zcGxpdChcIiBcIiksVD17fTtyZXR1cm4gYj1zKF8pLF9bMF0ucHJldmVudERlZmF1bHQmJihuLmF0PVwibGVmdCB0b3BcIiksbT1iLndpZHRoLGc9Yi5oZWlnaHQsdj1iLm9mZnNldCx5PWUuZXh0ZW5kKHt9LHYpLGUuZWFjaChbXCJteVwiLFwiYXRcIl0sZnVuY3Rpb24oKXt2YXIgZSx0LGk9KG5bdGhpc118fFwiXCIpLnNwbGl0KFwiIFwiKTsxPT09aS5sZW5ndGgmJihpPWwudGVzdChpWzBdKT9pLmNvbmNhdChbXCJjZW50ZXJcIl0pOnUudGVzdChpWzBdKT9bXCJjZW50ZXJcIl0uY29uY2F0KGkpOltcImNlbnRlclwiLFwiY2VudGVyXCJdKSxpWzBdPWwudGVzdChpWzBdKT9pWzBdOlwiY2VudGVyXCIsaVsxXT11LnRlc3QoaVsxXSk/aVsxXTpcImNlbnRlclwiLGU9ZC5leGVjKGlbMF0pLHQ9ZC5leGVjKGlbMV0pLFRbdGhpc109W2U/ZVswXTowLHQ/dFswXTowXSxuW3RoaXNdPVtjLmV4ZWMoaVswXSlbMF0sYy5leGVjKGlbMV0pWzBdXX0pLDE9PT1rLmxlbmd0aCYmKGtbMV09a1swXSksXCJyaWdodFwiPT09bi5hdFswXT95LmxlZnQrPW06XCJjZW50ZXJcIj09PW4uYXRbMF0mJih5LmxlZnQrPW0vMiksXCJib3R0b21cIj09PW4uYXRbMV0/eS50b3ArPWc6XCJjZW50ZXJcIj09PW4uYXRbMV0mJih5LnRvcCs9Zy8yKSxwPXQoVC5hdCxtLGcpLHkubGVmdCs9cFswXSx5LnRvcCs9cFsxXSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgcyxsLHU9ZSh0aGlzKSxkPXUub3V0ZXJXaWR0aCgpLGM9dS5vdXRlckhlaWdodCgpLGY9aSh0aGlzLFwibWFyZ2luTGVmdFwiKSxiPWkodGhpcyxcIm1hcmdpblRvcFwiKSxEPWQrZitpKHRoaXMsXCJtYXJnaW5SaWdodFwiKSt3LndpZHRoLFM9YytiK2kodGhpcyxcIm1hcmdpbkJvdHRvbVwiKSt3LmhlaWdodCxNPWUuZXh0ZW5kKHt9LHkpLEM9dChULm15LHUub3V0ZXJXaWR0aCgpLHUub3V0ZXJIZWlnaHQoKSk7XCJyaWdodFwiPT09bi5teVswXT9NLmxlZnQtPWQ6XCJjZW50ZXJcIj09PW4ubXlbMF0mJihNLmxlZnQtPWQvMiksXCJib3R0b21cIj09PW4ubXlbMV0/TS50b3AtPWM6XCJjZW50ZXJcIj09PW4ubXlbMV0mJihNLnRvcC09Yy8yKSxNLmxlZnQrPUNbMF0sTS50b3ArPUNbMV0sYXx8KE0ubGVmdD1oKE0ubGVmdCksTS50b3A9aChNLnRvcCkpLHM9e21hcmdpbkxlZnQ6ZixtYXJnaW5Ub3A6Yn0sZS5lYWNoKFtcImxlZnRcIixcInRvcFwiXSxmdW5jdGlvbih0LGkpe2UudWkucG9zaXRpb25ba1t0XV0mJmUudWkucG9zaXRpb25ba1t0XV1baV0oTSx7dGFyZ2V0V2lkdGg6bSx0YXJnZXRIZWlnaHQ6ZyxlbGVtV2lkdGg6ZCxlbGVtSGVpZ2h0OmMsY29sbGlzaW9uUG9zaXRpb246cyxjb2xsaXNpb25XaWR0aDpELGNvbGxpc2lvbkhlaWdodDpTLG9mZnNldDpbcFswXStDWzBdLHBbMV0rQ1sxXV0sbXk6bi5teSxhdDpuLmF0LHdpdGhpbjp4LGVsZW06dX0pfSksbi51c2luZyYmKGw9ZnVuY3Rpb24oZSl7dmFyIHQ9di5sZWZ0LU0ubGVmdCxpPXQrbS1kLHM9di50b3AtTS50b3AsYT1zK2ctYyxoPXt0YXJnZXQ6e2VsZW1lbnQ6XyxsZWZ0OnYubGVmdCx0b3A6di50b3Asd2lkdGg6bSxoZWlnaHQ6Z30sZWxlbWVudDp7ZWxlbWVudDp1LGxlZnQ6TS5sZWZ0LHRvcDpNLnRvcCx3aWR0aDpkLGhlaWdodDpjfSxob3Jpem9udGFsOjA+aT9cImxlZnRcIjp0PjA/XCJyaWdodFwiOlwiY2VudGVyXCIsdmVydGljYWw6MD5hP1widG9wXCI6cz4wP1wiYm90dG9tXCI6XCJtaWRkbGVcIn07ZD5tJiZtPnIodCtpKSYmKGguaG9yaXpvbnRhbD1cImNlbnRlclwiKSxjPmcmJmc+cihzK2EpJiYoaC52ZXJ0aWNhbD1cIm1pZGRsZVwiKSxoLmltcG9ydGFudD1vKHIodCkscihpKSk+byhyKHMpLHIoYSkpP1wiaG9yaXpvbnRhbFwiOlwidmVydGljYWxcIixuLnVzaW5nLmNhbGwodGhpcyxlLGgpfSksdS5vZmZzZXQoZS5leHRlbmQoTSx7dXNpbmc6bH0pKX0pfSxlLnVpLnBvc2l0aW9uPXtmaXQ6e2xlZnQ6ZnVuY3Rpb24oZSx0KXt2YXIgaSxzPXQud2l0aGluLG49cy5pc1dpbmRvdz9zLnNjcm9sbExlZnQ6cy5vZmZzZXQubGVmdCxhPXMud2lkdGgscj1lLmxlZnQtdC5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0LGg9bi1yLGw9cit0LmNvbGxpc2lvbldpZHRoLWEtbjt0LmNvbGxpc2lvbldpZHRoPmE/aD4wJiYwPj1sPyhpPWUubGVmdCtoK3QuY29sbGlzaW9uV2lkdGgtYS1uLGUubGVmdCs9aC1pKTplLmxlZnQ9bD4wJiYwPj1oP246aD5sP24rYS10LmNvbGxpc2lvbldpZHRoOm46aD4wP2UubGVmdCs9aDpsPjA/ZS5sZWZ0LT1sOmUubGVmdD1vKGUubGVmdC1yLGUubGVmdCl9LHRvcDpmdW5jdGlvbihlLHQpe3ZhciBpLHM9dC53aXRoaW4sbj1zLmlzV2luZG93P3Muc2Nyb2xsVG9wOnMub2Zmc2V0LnRvcCxhPXQud2l0aGluLmhlaWdodCxyPWUudG9wLXQuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wLGg9bi1yLGw9cit0LmNvbGxpc2lvbkhlaWdodC1hLW47dC5jb2xsaXNpb25IZWlnaHQ+YT9oPjAmJjA+PWw/KGk9ZS50b3AraCt0LmNvbGxpc2lvbkhlaWdodC1hLW4sZS50b3ArPWgtaSk6ZS50b3A9bD4wJiYwPj1oP246aD5sP24rYS10LmNvbGxpc2lvbkhlaWdodDpuOmg+MD9lLnRvcCs9aDpsPjA/ZS50b3AtPWw6ZS50b3A9byhlLnRvcC1yLGUudG9wKX19LGZsaXA6e2xlZnQ6ZnVuY3Rpb24oZSx0KXt2YXIgaSxzLG49dC53aXRoaW4sYT1uLm9mZnNldC5sZWZ0K24uc2Nyb2xsTGVmdCxvPW4ud2lkdGgsaD1uLmlzV2luZG93P24uc2Nyb2xsTGVmdDpuLm9mZnNldC5sZWZ0LGw9ZS5sZWZ0LXQuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCx1PWwtaCxkPWwrdC5jb2xsaXNpb25XaWR0aC1vLWgsYz1cImxlZnRcIj09PXQubXlbMF0/LXQuZWxlbVdpZHRoOlwicmlnaHRcIj09PXQubXlbMF0/dC5lbGVtV2lkdGg6MCxwPVwibGVmdFwiPT09dC5hdFswXT90LnRhcmdldFdpZHRoOlwicmlnaHRcIj09PXQuYXRbMF0/LXQudGFyZ2V0V2lkdGg6MCxmPS0yKnQub2Zmc2V0WzBdOzA+dT8oaT1lLmxlZnQrYytwK2YrdC5jb2xsaXNpb25XaWR0aC1vLWEsKDA+aXx8cih1KT5pKSYmKGUubGVmdCs9YytwK2YpKTpkPjAmJihzPWUubGVmdC10LmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQrYytwK2YtaCwocz4wfHxkPnIocykpJiYoZS5sZWZ0Kz1jK3ArZikpfSx0b3A6ZnVuY3Rpb24oZSx0KXt2YXIgaSxzLG49dC53aXRoaW4sYT1uLm9mZnNldC50b3Arbi5zY3JvbGxUb3Asbz1uLmhlaWdodCxoPW4uaXNXaW5kb3c/bi5zY3JvbGxUb3A6bi5vZmZzZXQudG9wLGw9ZS50b3AtdC5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AsdT1sLWgsZD1sK3QuY29sbGlzaW9uSGVpZ2h0LW8taCxjPVwidG9wXCI9PT10Lm15WzFdLHA9Yz8tdC5lbGVtSGVpZ2h0OlwiYm90dG9tXCI9PT10Lm15WzFdP3QuZWxlbUhlaWdodDowLGY9XCJ0b3BcIj09PXQuYXRbMV0/dC50YXJnZXRIZWlnaHQ6XCJib3R0b21cIj09PXQuYXRbMV0/LXQudGFyZ2V0SGVpZ2h0OjAsbT0tMip0Lm9mZnNldFsxXTswPnU/KHM9ZS50b3ArcCtmK20rdC5jb2xsaXNpb25IZWlnaHQtby1hLCgwPnN8fHIodSk+cykmJihlLnRvcCs9cCtmK20pKTpkPjAmJihpPWUudG9wLXQuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wK3ArZittLWgsKGk+MHx8ZD5yKGkpKSYmKGUudG9wKz1wK2YrbSkpfX0sZmxpcGZpdDp7bGVmdDpmdW5jdGlvbigpe2UudWkucG9zaXRpb24uZmxpcC5sZWZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLnVpLnBvc2l0aW9uLmZpdC5sZWZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdG9wOmZ1bmN0aW9uKCl7ZS51aS5wb3NpdGlvbi5mbGlwLnRvcC5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS51aS5wb3NpdGlvbi5maXQudG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSxmdW5jdGlvbigpe3ZhciB0LGkscyxuLG8scj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0saD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChyP1wiZGl2XCI6XCJib2R5XCIpLHM9e3Zpc2liaWxpdHk6XCJoaWRkZW5cIix3aWR0aDowLGhlaWdodDowLGJvcmRlcjowLG1hcmdpbjowLGJhY2tncm91bmQ6XCJub25lXCJ9LHImJmUuZXh0ZW5kKHMse3Bvc2l0aW9uOlwiYWJzb2x1dGVcIixsZWZ0OlwiLTEwMDBweFwiLHRvcDpcIi0xMDAwcHhcIn0pO2ZvcihvIGluIHMpdC5zdHlsZVtvXT1zW29dO3QuYXBwZW5kQ2hpbGQoaCksaT1yfHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsaS5pbnNlcnRCZWZvcmUodCxpLmZpcnN0Q2hpbGQpLGguc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogMTAuNzQzMjIyMnB4O1wiLG49ZShoKS5vZmZzZXQoKS5sZWZ0LGE9bj4xMCYmMTE+bix0LmlubmVySFRNTD1cIlwiLGkucmVtb3ZlQ2hpbGQodCl9KCl9KCksZS51aS5wb3NpdGlvbixlLndpZGdldChcInVpLmFjY29yZGlvblwiLHt2ZXJzaW9uOlwiMS4xMS40XCIsb3B0aW9uczp7YWN0aXZlOjAsYW5pbWF0ZTp7fSxjb2xsYXBzaWJsZTohMSxldmVudDpcImNsaWNrXCIsaGVhZGVyOlwiPiBsaSA+IDpmaXJzdC1jaGlsZCw+IDpub3QobGkpOmV2ZW5cIixoZWlnaHRTdHlsZTpcImF1dG9cIixpY29uczp7YWN0aXZlSGVhZGVyOlwidWktaWNvbi10cmlhbmdsZS0xLXNcIixoZWFkZXI6XCJ1aS1pY29uLXRyaWFuZ2xlLTEtZVwifSxhY3RpdmF0ZTpudWxsLGJlZm9yZUFjdGl2YXRlOm51bGx9LGhpZGVQcm9wczp7Ym9yZGVyVG9wV2lkdGg6XCJoaWRlXCIsYm9yZGVyQm90dG9tV2lkdGg6XCJoaWRlXCIscGFkZGluZ1RvcDpcImhpZGVcIixwYWRkaW5nQm90dG9tOlwiaGlkZVwiLGhlaWdodDpcImhpZGVcIn0sc2hvd1Byb3BzOntib3JkZXJUb3BXaWR0aDpcInNob3dcIixib3JkZXJCb3R0b21XaWR0aDpcInNob3dcIixwYWRkaW5nVG9wOlwic2hvd1wiLHBhZGRpbmdCb3R0b206XCJzaG93XCIsaGVpZ2h0Olwic2hvd1wifSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zO3RoaXMucHJldlNob3c9dGhpcy5wcmV2SGlkZT1lKCksdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktYWNjb3JkaW9uIHVpLXdpZGdldCB1aS1oZWxwZXItcmVzZXRcIikuYXR0cihcInJvbGVcIixcInRhYmxpc3RcIiksdC5jb2xsYXBzaWJsZXx8dC5hY3RpdmUhPT0hMSYmbnVsbCE9dC5hY3RpdmV8fCh0LmFjdGl2ZT0wKSx0aGlzLl9wcm9jZXNzUGFuZWxzKCksMD50LmFjdGl2ZSYmKHQuYWN0aXZlKz10aGlzLmhlYWRlcnMubGVuZ3RoKSx0aGlzLl9yZWZyZXNoKCl9LF9nZXRDcmVhdGVFdmVudERhdGE6ZnVuY3Rpb24oKXtyZXR1cm57aGVhZGVyOnRoaXMuYWN0aXZlLHBhbmVsOnRoaXMuYWN0aXZlLmxlbmd0aD90aGlzLmFjdGl2ZS5uZXh0KCk6ZSgpfX0sX2NyZWF0ZUljb25zOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmljb25zO3QmJihlKFwiPHNwYW4+XCIpLmFkZENsYXNzKFwidWktYWNjb3JkaW9uLWhlYWRlci1pY29uIHVpLWljb24gXCIrdC5oZWFkZXIpLnByZXBlbmRUbyh0aGlzLmhlYWRlcnMpLHRoaXMuYWN0aXZlLmNoaWxkcmVuKFwiLnVpLWFjY29yZGlvbi1oZWFkZXItaWNvblwiKS5yZW1vdmVDbGFzcyh0LmhlYWRlcikuYWRkQ2xhc3ModC5hY3RpdmVIZWFkZXIpLHRoaXMuaGVhZGVycy5hZGRDbGFzcyhcInVpLWFjY29yZGlvbi1pY29uc1wiKSl9LF9kZXN0cm95SWNvbnM6ZnVuY3Rpb24oKXt0aGlzLmhlYWRlcnMucmVtb3ZlQ2xhc3MoXCJ1aS1hY2NvcmRpb24taWNvbnNcIikuY2hpbGRyZW4oXCIudWktYWNjb3JkaW9uLWhlYWRlci1pY29uXCIpLnJlbW92ZSgpfSxfZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlO3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLWFjY29yZGlvbiB1aS13aWRnZXQgdWktaGVscGVyLXJlc2V0XCIpLnJlbW92ZUF0dHIoXCJyb2xlXCIpLHRoaXMuaGVhZGVycy5yZW1vdmVDbGFzcyhcInVpLWFjY29yZGlvbi1oZWFkZXIgdWktYWNjb3JkaW9uLWhlYWRlci1hY3RpdmUgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWFjdGl2ZSB1aS1zdGF0ZS1kaXNhYmxlZCB1aS1jb3JuZXItdG9wXCIpLnJlbW92ZUF0dHIoXCJyb2xlXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWV4cGFuZGVkXCIpLnJlbW92ZUF0dHIoXCJhcmlhLXNlbGVjdGVkXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWNvbnRyb2xzXCIpLnJlbW92ZUF0dHIoXCJ0YWJJbmRleFwiKS5yZW1vdmVVbmlxdWVJZCgpLHRoaXMuX2Rlc3Ryb3lJY29ucygpLGU9dGhpcy5oZWFkZXJzLm5leHQoKS5yZW1vdmVDbGFzcyhcInVpLWhlbHBlci1yZXNldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tIHVpLWFjY29yZGlvbi1jb250ZW50IHVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZSB1aS1zdGF0ZS1kaXNhYmxlZFwiKS5jc3MoXCJkaXNwbGF5XCIsXCJcIikucmVtb3ZlQXR0cihcInJvbGVcIikucmVtb3ZlQXR0cihcImFyaWEtaGlkZGVuXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIikucmVtb3ZlVW5pcXVlSWQoKSxcImNvbnRlbnRcIiE9PXRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSYmZS5jc3MoXCJoZWlnaHRcIixcIlwiKX0sX3NldE9wdGlvbjpmdW5jdGlvbihlLHQpe3JldHVyblwiYWN0aXZlXCI9PT1lPyh0aGlzLl9hY3RpdmF0ZSh0KSx2b2lkIDApOihcImV2ZW50XCI9PT1lJiYodGhpcy5vcHRpb25zLmV2ZW50JiZ0aGlzLl9vZmYodGhpcy5oZWFkZXJzLHRoaXMub3B0aW9ucy5ldmVudCksdGhpcy5fc2V0dXBFdmVudHModCkpLHRoaXMuX3N1cGVyKGUsdCksXCJjb2xsYXBzaWJsZVwiIT09ZXx8dHx8dGhpcy5vcHRpb25zLmFjdGl2ZSE9PSExfHx0aGlzLl9hY3RpdmF0ZSgwKSxcImljb25zXCI9PT1lJiYodGhpcy5fZGVzdHJveUljb25zKCksdCYmdGhpcy5fY3JlYXRlSWNvbnMoKSksXCJkaXNhYmxlZFwiPT09ZSYmKHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIsISF0KS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLHQpLHRoaXMuaGVhZGVycy5hZGQodGhpcy5oZWFkZXJzLm5leHQoKSkudG9nZ2xlQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCEhdCkpLHZvaWQgMCl9LF9rZXlkb3duOmZ1bmN0aW9uKHQpe2lmKCF0LmFsdEtleSYmIXQuY3RybEtleSl7dmFyIGk9ZS51aS5rZXlDb2RlLHM9dGhpcy5oZWFkZXJzLmxlbmd0aCxuPXRoaXMuaGVhZGVycy5pbmRleCh0LnRhcmdldCksYT0hMTtzd2l0Y2godC5rZXlDb2RlKXtjYXNlIGkuUklHSFQ6Y2FzZSBpLkRPV046YT10aGlzLmhlYWRlcnNbKG4rMSklc107YnJlYWs7Y2FzZSBpLkxFRlQ6Y2FzZSBpLlVQOmE9dGhpcy5oZWFkZXJzWyhuLTErcyklc107YnJlYWs7Y2FzZSBpLlNQQUNFOmNhc2UgaS5FTlRFUjp0aGlzLl9ldmVudEhhbmRsZXIodCk7YnJlYWs7Y2FzZSBpLkhPTUU6YT10aGlzLmhlYWRlcnNbMF07YnJlYWs7Y2FzZSBpLkVORDphPXRoaXMuaGVhZGVyc1tzLTFdfWEmJihlKHQudGFyZ2V0KS5hdHRyKFwidGFiSW5kZXhcIiwtMSksZShhKS5hdHRyKFwidGFiSW5kZXhcIiwwKSxhLmZvY3VzKCksdC5wcmV2ZW50RGVmYXVsdCgpKX19LF9wYW5lbEtleURvd246ZnVuY3Rpb24odCl7dC5rZXlDb2RlPT09ZS51aS5rZXlDb2RlLlVQJiZ0LmN0cmxLZXkmJmUodC5jdXJyZW50VGFyZ2V0KS5wcmV2KCkuZm9jdXMoKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uczt0aGlzLl9wcm9jZXNzUGFuZWxzKCksdC5hY3RpdmU9PT0hMSYmdC5jb2xsYXBzaWJsZT09PSEwfHwhdGhpcy5oZWFkZXJzLmxlbmd0aD8odC5hY3RpdmU9ITEsdGhpcy5hY3RpdmU9ZSgpKTp0LmFjdGl2ZT09PSExP3RoaXMuX2FjdGl2YXRlKDApOnRoaXMuYWN0aXZlLmxlbmd0aCYmIWUuY29udGFpbnModGhpcy5lbGVtZW50WzBdLHRoaXMuYWN0aXZlWzBdKT90aGlzLmhlYWRlcnMubGVuZ3RoPT09dGhpcy5oZWFkZXJzLmZpbmQoXCIudWktc3RhdGUtZGlzYWJsZWRcIikubGVuZ3RoPyh0LmFjdGl2ZT0hMSx0aGlzLmFjdGl2ZT1lKCkpOnRoaXMuX2FjdGl2YXRlKE1hdGgubWF4KDAsdC5hY3RpdmUtMSkpOnQuYWN0aXZlPXRoaXMuaGVhZGVycy5pbmRleCh0aGlzLmFjdGl2ZSksdGhpcy5fZGVzdHJveUljb25zKCksdGhpcy5fcmVmcmVzaCgpfSxfcHJvY2Vzc1BhbmVsczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuaGVhZGVycyx0PXRoaXMucGFuZWxzO3RoaXMuaGVhZGVycz10aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMuaGVhZGVyKS5hZGRDbGFzcyhcInVpLWFjY29yZGlvbi1oZWFkZXIgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsXCIpLHRoaXMucGFuZWxzPXRoaXMuaGVhZGVycy5uZXh0KCkuYWRkQ2xhc3MoXCJ1aS1hY2NvcmRpb24tY29udGVudCB1aS1oZWxwZXItcmVzZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbVwiKS5maWx0ZXIoXCI6bm90KC51aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmUpXCIpLmhpZGUoKSx0JiYodGhpcy5fb2ZmKGUubm90KHRoaXMuaGVhZGVycykpLHRoaXMuX29mZih0Lm5vdCh0aGlzLnBhbmVscykpKX0sX3JlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgdCxpPXRoaXMub3B0aW9ucyxzPWkuaGVpZ2h0U3R5bGUsbj10aGlzLmVsZW1lbnQucGFyZW50KCk7dGhpcy5hY3RpdmU9dGhpcy5fZmluZEFjdGl2ZShpLmFjdGl2ZSkuYWRkQ2xhc3MoXCJ1aS1hY2NvcmRpb24taGVhZGVyLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmUgdWktY29ybmVyLXRvcFwiKS5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci1hbGxcIiksdGhpcy5hY3RpdmUubmV4dCgpLmFkZENsYXNzKFwidWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlXCIpLnNob3coKSx0aGlzLmhlYWRlcnMuYXR0cihcInJvbGVcIixcInRhYlwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxpPXQudW5pcXVlSWQoKS5hdHRyKFwiaWRcIikscz10Lm5leHQoKSxuPXMudW5pcXVlSWQoKS5hdHRyKFwiaWRcIik7dC5hdHRyKFwiYXJpYS1jb250cm9sc1wiLG4pLHMuYXR0cihcImFyaWEtbGFiZWxsZWRieVwiLGkpfSkubmV4dCgpLmF0dHIoXCJyb2xlXCIsXCJ0YWJwYW5lbFwiKSx0aGlzLmhlYWRlcnMubm90KHRoaXMuYWN0aXZlKS5hdHRyKHtcImFyaWEtc2VsZWN0ZWRcIjpcImZhbHNlXCIsXCJhcmlhLWV4cGFuZGVkXCI6XCJmYWxzZVwiLHRhYkluZGV4Oi0xfSkubmV4dCgpLmF0dHIoe1wiYXJpYS1oaWRkZW5cIjpcInRydWVcIn0pLmhpZGUoKSx0aGlzLmFjdGl2ZS5sZW5ndGg/dGhpcy5hY3RpdmUuYXR0cih7XCJhcmlhLXNlbGVjdGVkXCI6XCJ0cnVlXCIsXCJhcmlhLWV4cGFuZGVkXCI6XCJ0cnVlXCIsdGFiSW5kZXg6MH0pLm5leHQoKS5hdHRyKHtcImFyaWEtaGlkZGVuXCI6XCJmYWxzZVwifSk6dGhpcy5oZWFkZXJzLmVxKDApLmF0dHIoXCJ0YWJJbmRleFwiLDApLHRoaXMuX2NyZWF0ZUljb25zKCksdGhpcy5fc2V0dXBFdmVudHMoaS5ldmVudCksXCJmaWxsXCI9PT1zPyh0PW4uaGVpZ2h0KCksdGhpcy5lbGVtZW50LnNpYmxpbmdzKFwiOnZpc2libGVcIikuZWFjaChmdW5jdGlvbigpe3ZhciBpPWUodGhpcykscz1pLmNzcyhcInBvc2l0aW9uXCIpO1wiYWJzb2x1dGVcIiE9PXMmJlwiZml4ZWRcIiE9PXMmJih0LT1pLm91dGVySGVpZ2h0KCEwKSl9KSx0aGlzLmhlYWRlcnMuZWFjaChmdW5jdGlvbigpe3QtPWUodGhpcykub3V0ZXJIZWlnaHQoITApfSksdGhpcy5oZWFkZXJzLm5leHQoKS5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS5oZWlnaHQoTWF0aC5tYXgoMCx0LWUodGhpcykuaW5uZXJIZWlnaHQoKStlKHRoaXMpLmhlaWdodCgpKSl9KS5jc3MoXCJvdmVyZmxvd1wiLFwiYXV0b1wiKSk6XCJhdXRvXCI9PT1zJiYodD0wLHRoaXMuaGVhZGVycy5uZXh0KCkuZWFjaChmdW5jdGlvbigpe3Q9TWF0aC5tYXgodCxlKHRoaXMpLmNzcyhcImhlaWdodFwiLFwiXCIpLmhlaWdodCgpKX0pLmhlaWdodCh0KSl9LF9hY3RpdmF0ZTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9maW5kQWN0aXZlKHQpWzBdO2khPT10aGlzLmFjdGl2ZVswXSYmKGk9aXx8dGhpcy5hY3RpdmVbMF0sdGhpcy5fZXZlbnRIYW5kbGVyKHt0YXJnZXQ6aSxjdXJyZW50VGFyZ2V0OmkscHJldmVudERlZmF1bHQ6ZS5ub29wfSkpfSxfZmluZEFjdGl2ZTpmdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdD90aGlzLmhlYWRlcnMuZXEodCk6ZSgpfSxfc2V0dXBFdmVudHM6ZnVuY3Rpb24odCl7dmFyIGk9e2tleWRvd246XCJfa2V5ZG93blwifTt0JiZlLmVhY2godC5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSx0KXtpW3RdPVwiX2V2ZW50SGFuZGxlclwifSksdGhpcy5fb2ZmKHRoaXMuaGVhZGVycy5hZGQodGhpcy5oZWFkZXJzLm5leHQoKSkpLHRoaXMuX29uKHRoaXMuaGVhZGVycyxpKSx0aGlzLl9vbih0aGlzLmhlYWRlcnMubmV4dCgpLHtrZXlkb3duOlwiX3BhbmVsS2V5RG93blwifSksdGhpcy5faG92ZXJhYmxlKHRoaXMuaGVhZGVycyksdGhpcy5fZm9jdXNhYmxlKHRoaXMuaGVhZGVycyl9LF9ldmVudEhhbmRsZXI6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5vcHRpb25zLHM9dGhpcy5hY3RpdmUsbj1lKHQuY3VycmVudFRhcmdldCksYT1uWzBdPT09c1swXSxvPWEmJmkuY29sbGFwc2libGUscj1vP2UoKTpuLm5leHQoKSxoPXMubmV4dCgpLGw9e29sZEhlYWRlcjpzLG9sZFBhbmVsOmgsbmV3SGVhZGVyOm8/ZSgpOm4sbmV3UGFuZWw6cn07dC5wcmV2ZW50RGVmYXVsdCgpLGEmJiFpLmNvbGxhcHNpYmxlfHx0aGlzLl90cmlnZ2VyKFwiYmVmb3JlQWN0aXZhdGVcIix0LGwpPT09ITF8fChpLmFjdGl2ZT1vPyExOnRoaXMuaGVhZGVycy5pbmRleChuKSx0aGlzLmFjdGl2ZT1hP2UoKTpuLHRoaXMuX3RvZ2dsZShsKSxzLnJlbW92ZUNsYXNzKFwidWktYWNjb3JkaW9uLWhlYWRlci1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIpLGkuaWNvbnMmJnMuY2hpbGRyZW4oXCIudWktYWNjb3JkaW9uLWhlYWRlci1pY29uXCIpLnJlbW92ZUNsYXNzKGkuaWNvbnMuYWN0aXZlSGVhZGVyKS5hZGRDbGFzcyhpLmljb25zLmhlYWRlciksYXx8KG4ucmVtb3ZlQ2xhc3MoXCJ1aS1jb3JuZXItYWxsXCIpLmFkZENsYXNzKFwidWktYWNjb3JkaW9uLWhlYWRlci1hY3RpdmUgdWktc3RhdGUtYWN0aXZlIHVpLWNvcm5lci10b3BcIiksaS5pY29ucyYmbi5jaGlsZHJlbihcIi51aS1hY2NvcmRpb24taGVhZGVyLWljb25cIikucmVtb3ZlQ2xhc3MoaS5pY29ucy5oZWFkZXIpLmFkZENsYXNzKGkuaWNvbnMuYWN0aXZlSGVhZGVyKSxuLm5leHQoKS5hZGRDbGFzcyhcInVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZVwiKSkpfSxfdG9nZ2xlOmZ1bmN0aW9uKHQpe3ZhciBpPXQubmV3UGFuZWwscz10aGlzLnByZXZTaG93Lmxlbmd0aD90aGlzLnByZXZTaG93OnQub2xkUGFuZWw7dGhpcy5wcmV2U2hvdy5hZGQodGhpcy5wcmV2SGlkZSkuc3RvcCghMCwhMCksdGhpcy5wcmV2U2hvdz1pLHRoaXMucHJldkhpZGU9cyx0aGlzLm9wdGlvbnMuYW5pbWF0ZT90aGlzLl9hbmltYXRlKGkscyx0KToocy5oaWRlKCksaS5zaG93KCksdGhpcy5fdG9nZ2xlQ29tcGxldGUodCkpLHMuYXR0cih7XCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwifSkscy5wcmV2KCkuYXR0cih7XCJhcmlhLXNlbGVjdGVkXCI6XCJmYWxzZVwiLFwiYXJpYS1leHBhbmRlZFwiOlwiZmFsc2VcIn0pLGkubGVuZ3RoJiZzLmxlbmd0aD9zLnByZXYoKS5hdHRyKHt0YWJJbmRleDotMSxcImFyaWEtZXhwYW5kZWRcIjpcImZhbHNlXCJ9KTppLmxlbmd0aCYmdGhpcy5oZWFkZXJzLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAwPT09cGFyc2VJbnQoZSh0aGlzKS5hdHRyKFwidGFiSW5kZXhcIiksMTApfSkuYXR0cihcInRhYkluZGV4XCIsLTEpLGkuYXR0cihcImFyaWEtaGlkZGVuXCIsXCJmYWxzZVwiKS5wcmV2KCkuYXR0cih7XCJhcmlhLXNlbGVjdGVkXCI6XCJ0cnVlXCIsXCJhcmlhLWV4cGFuZGVkXCI6XCJ0cnVlXCIsdGFiSW5kZXg6MH0pfSxfYW5pbWF0ZTpmdW5jdGlvbihlLHQsaSl7dmFyIHMsbixhLG89dGhpcyxyPTAsaD1lLmNzcyhcImJveC1zaXppbmdcIiksbD1lLmxlbmd0aCYmKCF0Lmxlbmd0aHx8ZS5pbmRleCgpPHQuaW5kZXgoKSksdT10aGlzLm9wdGlvbnMuYW5pbWF0ZXx8e30sZD1sJiZ1LmRvd258fHUsYz1mdW5jdGlvbigpe28uX3RvZ2dsZUNvbXBsZXRlKGkpfTtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZCYmKGE9ZCksXCJzdHJpbmdcIj09dHlwZW9mIGQmJihuPWQpLG49bnx8ZC5lYXNpbmd8fHUuZWFzaW5nLGE9YXx8ZC5kdXJhdGlvbnx8dS5kdXJhdGlvbix0Lmxlbmd0aD9lLmxlbmd0aD8ocz1lLnNob3coKS5vdXRlckhlaWdodCgpLHQuYW5pbWF0ZSh0aGlzLmhpZGVQcm9wcyx7ZHVyYXRpb246YSxlYXNpbmc6bixzdGVwOmZ1bmN0aW9uKGUsdCl7dC5ub3c9TWF0aC5yb3VuZChlKX19KSxlLmhpZGUoKS5hbmltYXRlKHRoaXMuc2hvd1Byb3BzLHtkdXJhdGlvbjphLGVhc2luZzpuLGNvbXBsZXRlOmMsc3RlcDpmdW5jdGlvbihlLGkpe2kubm93PU1hdGgucm91bmQoZSksXCJoZWlnaHRcIiE9PWkucHJvcD9cImNvbnRlbnQtYm94XCI9PT1oJiYocis9aS5ub3cpOlwiY29udGVudFwiIT09by5vcHRpb25zLmhlaWdodFN0eWxlJiYoaS5ub3c9TWF0aC5yb3VuZChzLXQub3V0ZXJIZWlnaHQoKS1yKSxyPTApfX0pLHZvaWQgMCk6dC5hbmltYXRlKHRoaXMuaGlkZVByb3BzLGEsbixjKTplLmFuaW1hdGUodGhpcy5zaG93UHJvcHMsYSxuLGMpfSxfdG9nZ2xlQ29tcGxldGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vbGRQYW5lbDt0LnJlbW92ZUNsYXNzKFwidWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlXCIpLnByZXYoKS5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci10b3BcIikuYWRkQ2xhc3MoXCJ1aS1jb3JuZXItYWxsXCIpLHQubGVuZ3RoJiYodC5wYXJlbnQoKVswXS5jbGFzc05hbWU9dC5wYXJlbnQoKVswXS5jbGFzc05hbWUpLHRoaXMuX3RyaWdnZXIoXCJhY3RpdmF0ZVwiLG51bGwsZSl9fSksZS53aWRnZXQoXCJ1aS5tZW51XCIse3ZlcnNpb246XCIxLjExLjRcIixkZWZhdWx0RWxlbWVudDpcIjx1bD5cIixkZWxheTozMDAsb3B0aW9uczp7aWNvbnM6e3N1Ym1lbnU6XCJ1aS1pY29uLWNhcmF0LTEtZVwifSxpdGVtczpcIj4gKlwiLG1lbnVzOlwidWxcIixwb3NpdGlvbjp7bXk6XCJsZWZ0LTEgdG9wXCIsYXQ6XCJyaWdodCB0b3BcIn0scm9sZTpcIm1lbnVcIixibHVyOm51bGwsZm9jdXM6bnVsbCxzZWxlY3Q6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpe3RoaXMuYWN0aXZlTWVudT10aGlzLmVsZW1lbnQsdGhpcy5tb3VzZUhhbmRsZWQ9ITEsdGhpcy5lbGVtZW50LnVuaXF1ZUlkKCkuYWRkQ2xhc3MoXCJ1aS1tZW51IHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudFwiKS50b2dnbGVDbGFzcyhcInVpLW1lbnUtaWNvbnNcIiwhIXRoaXMuZWxlbWVudC5maW5kKFwiLnVpLWljb25cIikubGVuZ3RoKS5hdHRyKHtyb2xlOnRoaXMub3B0aW9ucy5yb2xlLHRhYkluZGV4OjB9KSx0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsXCJ0cnVlXCIpLHRoaXMuX29uKHtcIm1vdXNlZG93biAudWktbWVudS1pdGVtXCI6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSxcImNsaWNrIC51aS1tZW51LWl0ZW1cIjpmdW5jdGlvbih0KXt2YXIgaT1lKHQudGFyZ2V0KTshdGhpcy5tb3VzZUhhbmRsZWQmJmkubm90KFwiLnVpLXN0YXRlLWRpc2FibGVkXCIpLmxlbmd0aCYmKHRoaXMuc2VsZWN0KHQpLHQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKXx8KHRoaXMubW91c2VIYW5kbGVkPSEwKSxpLmhhcyhcIi51aS1tZW51XCIpLmxlbmd0aD90aGlzLmV4cGFuZCh0KTohdGhpcy5lbGVtZW50LmlzKFwiOmZvY3VzXCIpJiZlKHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCkuY2xvc2VzdChcIi51aS1tZW51XCIpLmxlbmd0aCYmKHRoaXMuZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIixbITBdKSx0aGlzLmFjdGl2ZSYmMT09PXRoaXMuYWN0aXZlLnBhcmVudHMoXCIudWktbWVudVwiKS5sZW5ndGgmJmNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSkpfSxcIm1vdXNlZW50ZXIgLnVpLW1lbnUtaXRlbVwiOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLnByZXZpb3VzRmlsdGVyKXt2YXIgaT1lKHQuY3VycmVudFRhcmdldCk7XG5pLnNpYmxpbmdzKFwiLnVpLXN0YXRlLWFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKSx0aGlzLmZvY3VzKHQsaSl9fSxtb3VzZWxlYXZlOlwiY29sbGFwc2VBbGxcIixcIm1vdXNlbGVhdmUgLnVpLW1lbnVcIjpcImNvbGxhcHNlQWxsXCIsZm9jdXM6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLmFjdGl2ZXx8dGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKS5lcSgwKTt0fHx0aGlzLmZvY3VzKGUsaSl9LGJsdXI6ZnVuY3Rpb24odCl7dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXtlLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSx0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQpfHx0aGlzLmNvbGxhcHNlQWxsKHQpfSl9LGtleWRvd246XCJfa2V5ZG93blwifSksdGhpcy5yZWZyZXNoKCksdGhpcy5fb24odGhpcy5kb2N1bWVudCx7Y2xpY2s6ZnVuY3Rpb24oZSl7dGhpcy5fY2xvc2VPbkRvY3VtZW50Q2xpY2soZSkmJnRoaXMuY29sbGFwc2VBbGwoZSksdGhpcy5tb3VzZUhhbmRsZWQ9ITF9fSl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIikuZmluZChcIi51aS1tZW51XCIpLmFkZEJhY2soKS5yZW1vdmVDbGFzcyhcInVpLW1lbnUgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLW1lbnUtaWNvbnMgdWktZnJvbnRcIikucmVtb3ZlQXR0cihcInJvbGVcIikucmVtb3ZlQXR0cihcInRhYkluZGV4XCIpLnJlbW92ZUF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIikucmVtb3ZlQXR0cihcImFyaWEtZXhwYW5kZWRcIikucmVtb3ZlQXR0cihcImFyaWEtaGlkZGVuXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWRpc2FibGVkXCIpLnJlbW92ZVVuaXF1ZUlkKCkuc2hvdygpLHRoaXMuZWxlbWVudC5maW5kKFwiLnVpLW1lbnUtaXRlbVwiKS5yZW1vdmVDbGFzcyhcInVpLW1lbnUtaXRlbVwiKS5yZW1vdmVBdHRyKFwicm9sZVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1kaXNhYmxlZFwiKS5yZW1vdmVVbmlxdWVJZCgpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtaG92ZXJcIikucmVtb3ZlQXR0cihcInRhYkluZGV4XCIpLnJlbW92ZUF0dHIoXCJyb2xlXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWhhc3BvcHVwXCIpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7dC5kYXRhKFwidWktbWVudS1zdWJtZW51LWNhcmF0XCIpJiZ0LnJlbW92ZSgpfSksdGhpcy5lbGVtZW50LmZpbmQoXCIudWktbWVudS1kaXZpZGVyXCIpLnJlbW92ZUNsYXNzKFwidWktbWVudS1kaXZpZGVyIHVpLXdpZGdldC1jb250ZW50XCIpfSxfa2V5ZG93bjpmdW5jdGlvbih0KXt2YXIgaSxzLG4sYSxvPSEwO3N3aXRjaCh0LmtleUNvZGUpe2Nhc2UgZS51aS5rZXlDb2RlLlBBR0VfVVA6dGhpcy5wcmV2aW91c1BhZ2UodCk7YnJlYWs7Y2FzZSBlLnVpLmtleUNvZGUuUEFHRV9ET1dOOnRoaXMubmV4dFBhZ2UodCk7YnJlYWs7Y2FzZSBlLnVpLmtleUNvZGUuSE9NRTp0aGlzLl9tb3ZlKFwiZmlyc3RcIixcImZpcnN0XCIsdCk7YnJlYWs7Y2FzZSBlLnVpLmtleUNvZGUuRU5EOnRoaXMuX21vdmUoXCJsYXN0XCIsXCJsYXN0XCIsdCk7YnJlYWs7Y2FzZSBlLnVpLmtleUNvZGUuVVA6dGhpcy5wcmV2aW91cyh0KTticmVhaztjYXNlIGUudWkua2V5Q29kZS5ET1dOOnRoaXMubmV4dCh0KTticmVhaztjYXNlIGUudWkua2V5Q29kZS5MRUZUOnRoaXMuY29sbGFwc2UodCk7YnJlYWs7Y2FzZSBlLnVpLmtleUNvZGUuUklHSFQ6dGhpcy5hY3RpdmUmJiF0aGlzLmFjdGl2ZS5pcyhcIi51aS1zdGF0ZS1kaXNhYmxlZFwiKSYmdGhpcy5leHBhbmQodCk7YnJlYWs7Y2FzZSBlLnVpLmtleUNvZGUuRU5URVI6Y2FzZSBlLnVpLmtleUNvZGUuU1BBQ0U6dGhpcy5fYWN0aXZhdGUodCk7YnJlYWs7Y2FzZSBlLnVpLmtleUNvZGUuRVNDQVBFOnRoaXMuY29sbGFwc2UodCk7YnJlYWs7ZGVmYXVsdDpvPSExLHM9dGhpcy5wcmV2aW91c0ZpbHRlcnx8XCJcIixuPVN0cmluZy5mcm9tQ2hhckNvZGUodC5rZXlDb2RlKSxhPSExLGNsZWFyVGltZW91dCh0aGlzLmZpbHRlclRpbWVyKSxuPT09cz9hPSEwOm49cytuLGk9dGhpcy5fZmlsdGVyTWVudUl0ZW1zKG4pLGk9YSYmLTEhPT1pLmluZGV4KHRoaXMuYWN0aXZlLm5leHQoKSk/dGhpcy5hY3RpdmUubmV4dEFsbChcIi51aS1tZW51LWl0ZW1cIik6aSxpLmxlbmd0aHx8KG49U3RyaW5nLmZyb21DaGFyQ29kZSh0LmtleUNvZGUpLGk9dGhpcy5fZmlsdGVyTWVudUl0ZW1zKG4pKSxpLmxlbmd0aD8odGhpcy5mb2N1cyh0LGkpLHRoaXMucHJldmlvdXNGaWx0ZXI9bix0aGlzLmZpbHRlclRpbWVyPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMucHJldmlvdXNGaWx0ZXJ9LDFlMykpOmRlbGV0ZSB0aGlzLnByZXZpb3VzRmlsdGVyfW8mJnQucHJldmVudERlZmF1bHQoKX0sX2FjdGl2YXRlOmZ1bmN0aW9uKGUpe3RoaXMuYWN0aXZlLmlzKFwiLnVpLXN0YXRlLWRpc2FibGVkXCIpfHwodGhpcy5hY3RpdmUuaXMoXCJbYXJpYS1oYXNwb3B1cD0ndHJ1ZSddXCIpP3RoaXMuZXhwYW5kKGUpOnRoaXMuc2VsZWN0KGUpKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciB0LGkscz10aGlzLG49dGhpcy5vcHRpb25zLmljb25zLnN1Ym1lbnUsYT10aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMubWVudXMpO3RoaXMuZWxlbWVudC50b2dnbGVDbGFzcyhcInVpLW1lbnUtaWNvbnNcIiwhIXRoaXMuZWxlbWVudC5maW5kKFwiLnVpLWljb25cIikubGVuZ3RoKSxhLmZpbHRlcihcIjpub3QoLnVpLW1lbnUpXCIpLmFkZENsYXNzKFwidWktbWVudSB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktZnJvbnRcIikuaGlkZSgpLmF0dHIoe3JvbGU6dGhpcy5vcHRpb25zLnJvbGUsXCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwiLFwiYXJpYS1leHBhbmRlZFwiOlwiZmFsc2VcIn0pLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLGk9dC5wYXJlbnQoKSxzPWUoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoXCJ1aS1tZW51LWljb24gdWktaWNvbiBcIituKS5kYXRhKFwidWktbWVudS1zdWJtZW51LWNhcmF0XCIsITApO2kuYXR0cihcImFyaWEtaGFzcG9wdXBcIixcInRydWVcIikucHJlcGVuZChzKSx0LmF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIixpLmF0dHIoXCJpZFwiKSl9KSx0PWEuYWRkKHRoaXMuZWxlbWVudCksaT10LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKSxpLm5vdChcIi51aS1tZW51LWl0ZW1cIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7cy5faXNEaXZpZGVyKHQpJiZ0LmFkZENsYXNzKFwidWktd2lkZ2V0LWNvbnRlbnQgdWktbWVudS1kaXZpZGVyXCIpfSksaS5ub3QoXCIudWktbWVudS1pdGVtLCAudWktbWVudS1kaXZpZGVyXCIpLmFkZENsYXNzKFwidWktbWVudS1pdGVtXCIpLnVuaXF1ZUlkKCkuYXR0cih7dGFiSW5kZXg6LTEscm9sZTp0aGlzLl9pdGVtUm9sZSgpfSksaS5maWx0ZXIoXCIudWktc3RhdGUtZGlzYWJsZWRcIikuYXR0cihcImFyaWEtZGlzYWJsZWRcIixcInRydWVcIiksdGhpcy5hY3RpdmUmJiFlLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSx0aGlzLmFjdGl2ZVswXSkmJnRoaXMuYmx1cigpfSxfaXRlbVJvbGU6ZnVuY3Rpb24oKXtyZXR1cm57bWVudTpcIm1lbnVpdGVtXCIsbGlzdGJveDpcIm9wdGlvblwifVt0aGlzLm9wdGlvbnMucm9sZV19LF9zZXRPcHRpb246ZnVuY3Rpb24oZSx0KXtcImljb25zXCI9PT1lJiZ0aGlzLmVsZW1lbnQuZmluZChcIi51aS1tZW51LWljb25cIikucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmljb25zLnN1Ym1lbnUpLmFkZENsYXNzKHQuc3VibWVudSksXCJkaXNhYmxlZFwiPT09ZSYmdGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIiwhIXQpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsdCksdGhpcy5fc3VwZXIoZSx0KX0sZm9jdXM6ZnVuY3Rpb24oZSx0KXt2YXIgaSxzO3RoaXMuYmx1cihlLGUmJlwiZm9jdXNcIj09PWUudHlwZSksdGhpcy5fc2Nyb2xsSW50b1ZpZXcodCksdGhpcy5hY3RpdmU9dC5maXJzdCgpLHM9dGhpcy5hY3RpdmUuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1mb2N1c1wiKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKSx0aGlzLm9wdGlvbnMucm9sZSYmdGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixzLmF0dHIoXCJpZFwiKSksdGhpcy5hY3RpdmUucGFyZW50KCkuY2xvc2VzdChcIi51aS1tZW51LWl0ZW1cIikuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksZSYmXCJrZXlkb3duXCI9PT1lLnR5cGU/dGhpcy5fY2xvc2UoKTp0aGlzLnRpbWVyPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5fY2xvc2UoKX0sdGhpcy5kZWxheSksaT10LmNoaWxkcmVuKFwiLnVpLW1lbnVcIiksaS5sZW5ndGgmJmUmJi9ebW91c2UvLnRlc3QoZS50eXBlKSYmdGhpcy5fc3RhcnRPcGVuaW5nKGkpLHRoaXMuYWN0aXZlTWVudT10LnBhcmVudCgpLHRoaXMuX3RyaWdnZXIoXCJmb2N1c1wiLGUse2l0ZW06dH0pfSxfc2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24odCl7dmFyIGkscyxuLGEsbyxyO3RoaXMuX2hhc1Njcm9sbCgpJiYoaT1wYXJzZUZsb2F0KGUuY3NzKHRoaXMuYWN0aXZlTWVudVswXSxcImJvcmRlclRvcFdpZHRoXCIpKXx8MCxzPXBhcnNlRmxvYXQoZS5jc3ModGhpcy5hY3RpdmVNZW51WzBdLFwicGFkZGluZ1RvcFwiKSl8fDAsbj10Lm9mZnNldCgpLnRvcC10aGlzLmFjdGl2ZU1lbnUub2Zmc2V0KCkudG9wLWktcyxhPXRoaXMuYWN0aXZlTWVudS5zY3JvbGxUb3AoKSxvPXRoaXMuYWN0aXZlTWVudS5oZWlnaHQoKSxyPXQub3V0ZXJIZWlnaHQoKSwwPm4/dGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcChhK24pOm4rcj5vJiZ0aGlzLmFjdGl2ZU1lbnUuc2Nyb2xsVG9wKGErbi1vK3IpKX0sYmx1cjpmdW5jdGlvbihlLHQpe3R8fGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLmFjdGl2ZSYmKHRoaXMuYWN0aXZlLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZm9jdXNcIiksdGhpcy5hY3RpdmU9bnVsbCx0aGlzLl90cmlnZ2VyKFwiYmx1clwiLGUse2l0ZW06dGhpcy5hY3RpdmV9KSl9LF9zdGFydE9wZW5pbmc6ZnVuY3Rpb24oZSl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLFwidHJ1ZVwiPT09ZS5hdHRyKFwiYXJpYS1oaWRkZW5cIikmJih0aGlzLnRpbWVyPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5fY2xvc2UoKSx0aGlzLl9vcGVuKGUpfSx0aGlzLmRlbGF5KSl9LF9vcGVuOmZ1bmN0aW9uKHQpe3ZhciBpPWUuZXh0ZW5kKHtvZjp0aGlzLmFjdGl2ZX0sdGhpcy5vcHRpb25zLnBvc2l0aW9uKTtjbGVhclRpbWVvdXQodGhpcy50aW1lciksdGhpcy5lbGVtZW50LmZpbmQoXCIudWktbWVudVwiKS5ub3QodC5wYXJlbnRzKFwiLnVpLW1lbnVcIikpLmhpZGUoKS5hdHRyKFwiYXJpYS1oaWRkZW5cIixcInRydWVcIiksdC5zaG93KCkucmVtb3ZlQXR0cihcImFyaWEtaGlkZGVuXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsXCJ0cnVlXCIpLnBvc2l0aW9uKGkpfSxjb2xsYXBzZUFsbDpmdW5jdGlvbih0LGkpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLnRpbWVyPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dmFyIHM9aT90aGlzLmVsZW1lbnQ6ZSh0JiZ0LnRhcmdldCkuY2xvc2VzdCh0aGlzLmVsZW1lbnQuZmluZChcIi51aS1tZW51XCIpKTtzLmxlbmd0aHx8KHM9dGhpcy5lbGVtZW50KSx0aGlzLl9jbG9zZShzKSx0aGlzLmJsdXIodCksdGhpcy5hY3RpdmVNZW51PXN9LHRoaXMuZGVsYXkpfSxfY2xvc2U6ZnVuY3Rpb24oZSl7ZXx8KGU9dGhpcy5hY3RpdmU/dGhpcy5hY3RpdmUucGFyZW50KCk6dGhpcy5lbGVtZW50KSxlLmZpbmQoXCIudWktbWVudVwiKS5oaWRlKCkuYXR0cihcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsXCJmYWxzZVwiKS5lbmQoKS5maW5kKFwiLnVpLXN0YXRlLWFjdGl2ZVwiKS5ub3QoXCIudWktc3RhdGUtZm9jdXNcIikucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIil9LF9jbG9zZU9uRG9jdW1lbnRDbGljazpmdW5jdGlvbih0KXtyZXR1cm4hZSh0LnRhcmdldCkuY2xvc2VzdChcIi51aS1tZW51XCIpLmxlbmd0aH0sX2lzRGl2aWRlcjpmdW5jdGlvbihlKXtyZXR1cm4hL1teXFwtXFx1MjAxNFxcdTIwMTNcXHNdLy50ZXN0KGUudGV4dCgpKX0sY29sbGFwc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5hY3RpdmUmJnRoaXMuYWN0aXZlLnBhcmVudCgpLmNsb3Nlc3QoXCIudWktbWVudS1pdGVtXCIsdGhpcy5lbGVtZW50KTt0JiZ0Lmxlbmd0aCYmKHRoaXMuX2Nsb3NlKCksdGhpcy5mb2N1cyhlLHQpKX0sZXhwYW5kOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYWN0aXZlJiZ0aGlzLmFjdGl2ZS5jaGlsZHJlbihcIi51aS1tZW51IFwiKS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuZmlyc3QoKTt0JiZ0Lmxlbmd0aCYmKHRoaXMuX29wZW4odC5wYXJlbnQoKSksdGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLmZvY3VzKGUsdCl9KSl9LG5leHQ6ZnVuY3Rpb24oZSl7dGhpcy5fbW92ZShcIm5leHRcIixcImZpcnN0XCIsZSl9LHByZXZpb3VzOmZ1bmN0aW9uKGUpe3RoaXMuX21vdmUoXCJwcmV2XCIsXCJsYXN0XCIsZSl9LGlzRmlyc3RJdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlJiYhdGhpcy5hY3RpdmUucHJldkFsbChcIi51aS1tZW51LWl0ZW1cIikubGVuZ3RofSxpc0xhc3RJdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlJiYhdGhpcy5hY3RpdmUubmV4dEFsbChcIi51aS1tZW51LWl0ZW1cIikubGVuZ3RofSxfbW92ZTpmdW5jdGlvbihlLHQsaSl7dmFyIHM7dGhpcy5hY3RpdmUmJihzPVwiZmlyc3RcIj09PWV8fFwibGFzdFwiPT09ZT90aGlzLmFjdGl2ZVtcImZpcnN0XCI9PT1lP1wicHJldkFsbFwiOlwibmV4dEFsbFwiXShcIi51aS1tZW51LWl0ZW1cIikuZXEoLTEpOnRoaXMuYWN0aXZlW2UrXCJBbGxcIl0oXCIudWktbWVudS1pdGVtXCIpLmVxKDApKSxzJiZzLmxlbmd0aCYmdGhpcy5hY3RpdmV8fChzPXRoaXMuYWN0aXZlTWVudS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcylbdF0oKSksdGhpcy5mb2N1cyhpLHMpfSxuZXh0UGFnZTpmdW5jdGlvbih0KXt2YXIgaSxzLG47cmV0dXJuIHRoaXMuYWN0aXZlPyh0aGlzLmlzTGFzdEl0ZW0oKXx8KHRoaXMuX2hhc1Njcm9sbCgpPyhzPXRoaXMuYWN0aXZlLm9mZnNldCgpLnRvcCxuPXRoaXMuZWxlbWVudC5oZWlnaHQoKSx0aGlzLmFjdGl2ZS5uZXh0QWxsKFwiLnVpLW1lbnUtaXRlbVwiKS5lYWNoKGZ1bmN0aW9uKCl7cmV0dXJuIGk9ZSh0aGlzKSwwPmkub2Zmc2V0KCkudG9wLXMtbn0pLHRoaXMuZm9jdXModCxpKSk6dGhpcy5mb2N1cyh0LHRoaXMuYWN0aXZlTWVudS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcylbdGhpcy5hY3RpdmU/XCJsYXN0XCI6XCJmaXJzdFwiXSgpKSksdm9pZCAwKToodGhpcy5uZXh0KHQpLHZvaWQgMCl9LHByZXZpb3VzUGFnZTpmdW5jdGlvbih0KXt2YXIgaSxzLG47cmV0dXJuIHRoaXMuYWN0aXZlPyh0aGlzLmlzRmlyc3RJdGVtKCl8fCh0aGlzLl9oYXNTY3JvbGwoKT8ocz10aGlzLmFjdGl2ZS5vZmZzZXQoKS50b3Asbj10aGlzLmVsZW1lbnQuaGVpZ2h0KCksdGhpcy5hY3RpdmUucHJldkFsbChcIi51aS1tZW51LWl0ZW1cIikuZWFjaChmdW5jdGlvbigpe3JldHVybiBpPWUodGhpcyksaS5vZmZzZXQoKS50b3AtcytuPjB9KSx0aGlzLmZvY3VzKHQsaSkpOnRoaXMuZm9jdXModCx0aGlzLmFjdGl2ZU1lbnUuZmluZCh0aGlzLm9wdGlvbnMuaXRlbXMpLmZpcnN0KCkpKSx2b2lkIDApOih0aGlzLm5leHQodCksdm9pZCAwKX0sX2hhc1Njcm9sbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKTx0aGlzLmVsZW1lbnQucHJvcChcInNjcm9sbEhlaWdodFwiKX0sc2VsZWN0OmZ1bmN0aW9uKHQpe3RoaXMuYWN0aXZlPXRoaXMuYWN0aXZlfHxlKHQudGFyZ2V0KS5jbG9zZXN0KFwiLnVpLW1lbnUtaXRlbVwiKTt2YXIgaT17aXRlbTp0aGlzLmFjdGl2ZX07dGhpcy5hY3RpdmUuaGFzKFwiLnVpLW1lbnVcIikubGVuZ3RofHx0aGlzLmNvbGxhcHNlQWxsKHQsITApLHRoaXMuX3RyaWdnZXIoXCJzZWxlY3RcIix0LGkpfSxfZmlsdGVyTWVudUl0ZW1zOmZ1bmN0aW9uKHQpe3ZhciBpPXQucmVwbGFjZSgvW1xcLVxcW1xcXXt9KCkqKz8uLFxcXFxcXF4kfCNcXHNdL2csXCJcXFxcJCZcIikscz1SZWdFeHAoXCJeXCIraSxcImlcIik7cmV0dXJuIHRoaXMuYWN0aXZlTWVudS5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuZmlsdGVyKFwiLnVpLW1lbnUtaXRlbVwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gcy50ZXN0KGUudHJpbShlKHRoaXMpLnRleHQoKSkpfSl9fSksZS53aWRnZXQoXCJ1aS5hdXRvY29tcGxldGVcIix7dmVyc2lvbjpcIjEuMTEuNFwiLGRlZmF1bHRFbGVtZW50OlwiPGlucHV0PlwiLG9wdGlvbnM6e2FwcGVuZFRvOm51bGwsYXV0b0ZvY3VzOiExLGRlbGF5OjMwMCxtaW5MZW5ndGg6MSxwb3NpdGlvbjp7bXk6XCJsZWZ0IHRvcFwiLGF0OlwibGVmdCBib3R0b21cIixjb2xsaXNpb246XCJub25lXCJ9LHNvdXJjZTpudWxsLGNoYW5nZTpudWxsLGNsb3NlOm51bGwsZm9jdXM6bnVsbCxvcGVuOm51bGwscmVzcG9uc2U6bnVsbCxzZWFyY2g6bnVsbCxzZWxlY3Q6bnVsbH0scmVxdWVzdEluZGV4OjAscGVuZGluZzowLF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdCxpLHMsbj10aGlzLmVsZW1lbnRbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxhPVwidGV4dGFyZWFcIj09PW4sbz1cImlucHV0XCI9PT1uO3RoaXMuaXNNdWx0aUxpbmU9YT8hMDpvPyExOnRoaXMuZWxlbWVudC5wcm9wKFwiaXNDb250ZW50RWRpdGFibGVcIiksdGhpcy52YWx1ZU1ldGhvZD10aGlzLmVsZW1lbnRbYXx8bz9cInZhbFwiOlwidGV4dFwiXSx0aGlzLmlzTmV3TWVudT0hMCx0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1hdXRvY29tcGxldGUtaW5wdXRcIikuYXR0cihcImF1dG9jb21wbGV0ZVwiLFwib2ZmXCIpLHRoaXMuX29uKHRoaXMuZWxlbWVudCx7a2V5ZG93bjpmdW5jdGlvbihuKXtpZih0aGlzLmVsZW1lbnQucHJvcChcInJlYWRPbmx5XCIpKXJldHVybiB0PSEwLHM9ITAsaT0hMCx2b2lkIDA7dD0hMSxzPSExLGk9ITE7dmFyIGE9ZS51aS5rZXlDb2RlO3N3aXRjaChuLmtleUNvZGUpe2Nhc2UgYS5QQUdFX1VQOnQ9ITAsdGhpcy5fbW92ZShcInByZXZpb3VzUGFnZVwiLG4pO2JyZWFrO2Nhc2UgYS5QQUdFX0RPV046dD0hMCx0aGlzLl9tb3ZlKFwibmV4dFBhZ2VcIixuKTticmVhaztjYXNlIGEuVVA6dD0hMCx0aGlzLl9rZXlFdmVudChcInByZXZpb3VzXCIsbik7YnJlYWs7Y2FzZSBhLkRPV046dD0hMCx0aGlzLl9rZXlFdmVudChcIm5leHRcIixuKTticmVhaztjYXNlIGEuRU5URVI6dGhpcy5tZW51LmFjdGl2ZSYmKHQ9ITAsbi5wcmV2ZW50RGVmYXVsdCgpLHRoaXMubWVudS5zZWxlY3QobikpO2JyZWFrO2Nhc2UgYS5UQUI6dGhpcy5tZW51LmFjdGl2ZSYmdGhpcy5tZW51LnNlbGVjdChuKTticmVhaztjYXNlIGEuRVNDQVBFOnRoaXMubWVudS5lbGVtZW50LmlzKFwiOnZpc2libGVcIikmJih0aGlzLmlzTXVsdGlMaW5lfHx0aGlzLl92YWx1ZSh0aGlzLnRlcm0pLHRoaXMuY2xvc2Uobiksbi5wcmV2ZW50RGVmYXVsdCgpKTticmVhaztkZWZhdWx0Omk9ITAsdGhpcy5fc2VhcmNoVGltZW91dChuKX19LGtleXByZXNzOmZ1bmN0aW9uKHMpe2lmKHQpcmV0dXJuIHQ9ITEsKCF0aGlzLmlzTXVsdGlMaW5lfHx0aGlzLm1lbnUuZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpKSYmcy5wcmV2ZW50RGVmYXVsdCgpLHZvaWQgMDtpZighaSl7dmFyIG49ZS51aS5rZXlDb2RlO3N3aXRjaChzLmtleUNvZGUpe2Nhc2Ugbi5QQUdFX1VQOnRoaXMuX21vdmUoXCJwcmV2aW91c1BhZ2VcIixzKTticmVhaztjYXNlIG4uUEFHRV9ET1dOOnRoaXMuX21vdmUoXCJuZXh0UGFnZVwiLHMpO2JyZWFrO2Nhc2Ugbi5VUDp0aGlzLl9rZXlFdmVudChcInByZXZpb3VzXCIscyk7YnJlYWs7Y2FzZSBuLkRPV046dGhpcy5fa2V5RXZlbnQoXCJuZXh0XCIscyl9fX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHM/KHM9ITEsZS5wcmV2ZW50RGVmYXVsdCgpLHZvaWQgMCk6KHRoaXMuX3NlYXJjaFRpbWVvdXQoZSksdm9pZCAwKX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkSXRlbT1udWxsLHRoaXMucHJldmlvdXM9dGhpcy5fdmFsdWUoKX0sYmx1cjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jYW5jZWxCbHVyPyhkZWxldGUgdGhpcy5jYW5jZWxCbHVyLHZvaWQgMCk6KGNsZWFyVGltZW91dCh0aGlzLnNlYXJjaGluZyksdGhpcy5jbG9zZShlKSx0aGlzLl9jaGFuZ2UoZSksdm9pZCAwKX19KSx0aGlzLl9pbml0U291cmNlKCksdGhpcy5tZW51PWUoXCI8dWw+XCIpLmFkZENsYXNzKFwidWktYXV0b2NvbXBsZXRlIHVpLWZyb250XCIpLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLm1lbnUoe3JvbGU6bnVsbH0pLmhpZGUoKS5tZW51KFwiaW5zdGFuY2VcIiksdGhpcy5fb24odGhpcy5tZW51LmVsZW1lbnQse21vdXNlZG93bjpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5jYW5jZWxCbHVyPSEwLHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuY2FuY2VsQmx1cn0pO3ZhciBpPXRoaXMubWVudS5lbGVtZW50WzBdO2UodC50YXJnZXQpLmNsb3Nlc3QoXCIudWktbWVudS1pdGVtXCIpLmxlbmd0aHx8dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZG9jdW1lbnQub25lKFwibW91c2Vkb3duXCIsZnVuY3Rpb24ocyl7cy50YXJnZXQ9PT10LmVsZW1lbnRbMF18fHMudGFyZ2V0PT09aXx8ZS5jb250YWlucyhpLHMudGFyZ2V0KXx8dC5jbG9zZSgpfSl9KX0sbWVudWZvY3VzOmZ1bmN0aW9uKHQsaSl7dmFyIHMsbjtyZXR1cm4gdGhpcy5pc05ld01lbnUmJih0aGlzLmlzTmV3TWVudT0hMSx0Lm9yaWdpbmFsRXZlbnQmJi9ebW91c2UvLnRlc3QodC5vcmlnaW5hbEV2ZW50LnR5cGUpKT8odGhpcy5tZW51LmJsdXIoKSx0aGlzLmRvY3VtZW50Lm9uZShcIm1vdXNlbW92ZVwiLGZ1bmN0aW9uKCl7ZSh0LnRhcmdldCkudHJpZ2dlcih0Lm9yaWdpbmFsRXZlbnQpfSksdm9pZCAwKToobj1pLml0ZW0uZGF0YShcInVpLWF1dG9jb21wbGV0ZS1pdGVtXCIpLCExIT09dGhpcy5fdHJpZ2dlcihcImZvY3VzXCIsdCx7aXRlbTpufSkmJnQub3JpZ2luYWxFdmVudCYmL15rZXkvLnRlc3QodC5vcmlnaW5hbEV2ZW50LnR5cGUpJiZ0aGlzLl92YWx1ZShuLnZhbHVlKSxzPWkuaXRlbS5hdHRyKFwiYXJpYS1sYWJlbFwiKXx8bi52YWx1ZSxzJiZlLnRyaW0ocykubGVuZ3RoJiYodGhpcy5saXZlUmVnaW9uLmNoaWxkcmVuKCkuaGlkZSgpLGUoXCI8ZGl2PlwiKS50ZXh0KHMpLmFwcGVuZFRvKHRoaXMubGl2ZVJlZ2lvbikpLHZvaWQgMCl9LG1lbnVzZWxlY3Q6ZnVuY3Rpb24oZSx0KXt2YXIgaT10Lml0ZW0uZGF0YShcInVpLWF1dG9jb21wbGV0ZS1pdGVtXCIpLHM9dGhpcy5wcmV2aW91czt0aGlzLmVsZW1lbnRbMF0hPT10aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQmJih0aGlzLmVsZW1lbnQuZm9jdXMoKSx0aGlzLnByZXZpb3VzPXMsdGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzPXMsdGhpcy5zZWxlY3RlZEl0ZW09aX0pKSwhMSE9PXRoaXMuX3RyaWdnZXIoXCJzZWxlY3RcIixlLHtpdGVtOml9KSYmdGhpcy5fdmFsdWUoaS52YWx1ZSksdGhpcy50ZXJtPXRoaXMuX3ZhbHVlKCksdGhpcy5jbG9zZShlKSx0aGlzLnNlbGVjdGVkSXRlbT1pfX0pLHRoaXMubGl2ZVJlZ2lvbj1lKFwiPHNwYW4+XCIse3JvbGU6XCJzdGF0dXNcIixcImFyaWEtbGl2ZVwiOlwiYXNzZXJ0aXZlXCIsXCJhcmlhLXJlbGV2YW50XCI6XCJhZGRpdGlvbnNcIn0pLmFkZENsYXNzKFwidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlXCIpLmFwcGVuZFRvKHRoaXMuZG9jdW1lbnRbMF0uYm9keSksdGhpcy5fb24odGhpcy53aW5kb3cse2JlZm9yZXVubG9hZDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyKFwiYXV0b2NvbXBsZXRlXCIpfX0pfSxfZGVzdHJveTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnNlYXJjaGluZyksdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktYXV0b2NvbXBsZXRlLWlucHV0XCIpLnJlbW92ZUF0dHIoXCJhdXRvY29tcGxldGVcIiksdGhpcy5tZW51LmVsZW1lbnQucmVtb3ZlKCksdGhpcy5saXZlUmVnaW9uLnJlbW92ZSgpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy5fc3VwZXIoZSx0KSxcInNvdXJjZVwiPT09ZSYmdGhpcy5faW5pdFNvdXJjZSgpLFwiYXBwZW5kVG9cIj09PWUmJnRoaXMubWVudS5lbGVtZW50LmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLFwiZGlzYWJsZWRcIj09PWUmJnQmJnRoaXMueGhyJiZ0aGlzLnhoci5hYm9ydCgpfSxfYXBwZW5kVG86ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuYXBwZW5kVG87cmV0dXJuIHQmJih0PXQuanF1ZXJ5fHx0Lm5vZGVUeXBlP2UodCk6dGhpcy5kb2N1bWVudC5maW5kKHQpLmVxKDApKSx0JiZ0WzBdfHwodD10aGlzLmVsZW1lbnQuY2xvc2VzdChcIi51aS1mcm9udFwiKSksdC5sZW5ndGh8fCh0PXRoaXMuZG9jdW1lbnRbMF0uYm9keSksdH0sX2luaXRTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgdCxpLHM9dGhpcztlLmlzQXJyYXkodGhpcy5vcHRpb25zLnNvdXJjZSk/KHQ9dGhpcy5vcHRpb25zLnNvdXJjZSx0aGlzLnNvdXJjZT1mdW5jdGlvbihpLHMpe3MoZS51aS5hdXRvY29tcGxldGUuZmlsdGVyKHQsaS50ZXJtKSl9KTpcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5vcHRpb25zLnNvdXJjZT8oaT10aGlzLm9wdGlvbnMuc291cmNlLHRoaXMuc291cmNlPWZ1bmN0aW9uKHQsbil7cy54aHImJnMueGhyLmFib3J0KCkscy54aHI9ZS5hamF4KHt1cmw6aSxkYXRhOnQsZGF0YVR5cGU6XCJqc29uXCIsc3VjY2VzczpmdW5jdGlvbihlKXtuKGUpfSxlcnJvcjpmdW5jdGlvbigpe24oW10pfX0pfSk6dGhpcy5zb3VyY2U9dGhpcy5vcHRpb25zLnNvdXJjZX0sX3NlYXJjaFRpbWVvdXQ6ZnVuY3Rpb24oZSl7Y2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoaW5nKSx0aGlzLnNlYXJjaGluZz10aGlzLl9kZWxheShmdW5jdGlvbigpe3ZhciB0PXRoaXMudGVybT09PXRoaXMuX3ZhbHVlKCksaT10aGlzLm1lbnUuZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpLHM9ZS5hbHRLZXl8fGUuY3RybEtleXx8ZS5tZXRhS2V5fHxlLnNoaWZ0S2V5OyghdHx8dCYmIWkmJiFzKSYmKHRoaXMuc2VsZWN0ZWRJdGVtPW51bGwsdGhpcy5zZWFyY2gobnVsbCxlKSl9LHRoaXMub3B0aW9ucy5kZWxheSl9LHNlYXJjaDpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGwhPWU/ZTp0aGlzLl92YWx1ZSgpLHRoaXMudGVybT10aGlzLl92YWx1ZSgpLGUubGVuZ3RoPHRoaXMub3B0aW9ucy5taW5MZW5ndGg/dGhpcy5jbG9zZSh0KTp0aGlzLl90cmlnZ2VyKFwic2VhcmNoXCIsdCkhPT0hMT90aGlzLl9zZWFyY2goZSk6dm9pZCAwfSxfc2VhcmNoOmZ1bmN0aW9uKGUpe3RoaXMucGVuZGluZysrLHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLWF1dG9jb21wbGV0ZS1sb2FkaW5nXCIpLHRoaXMuY2FuY2VsU2VhcmNoPSExLHRoaXMuc291cmNlKHt0ZXJtOmV9LHRoaXMuX3Jlc3BvbnNlKCkpfSxfcmVzcG9uc2U6ZnVuY3Rpb24oKXt2YXIgdD0rK3RoaXMucmVxdWVzdEluZGV4O3JldHVybiBlLnByb3h5KGZ1bmN0aW9uKGUpe3Q9PT10aGlzLnJlcXVlc3RJbmRleCYmdGhpcy5fX3Jlc3BvbnNlKGUpLHRoaXMucGVuZGluZy0tLHRoaXMucGVuZGluZ3x8dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktYXV0b2NvbXBsZXRlLWxvYWRpbmdcIil9LHRoaXMpfSxfX3Jlc3BvbnNlOmZ1bmN0aW9uKGUpe2UmJihlPXRoaXMuX25vcm1hbGl6ZShlKSksdGhpcy5fdHJpZ2dlcihcInJlc3BvbnNlXCIsbnVsbCx7Y29udGVudDplfSksIXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmZSYmZS5sZW5ndGgmJiF0aGlzLmNhbmNlbFNlYXJjaD8odGhpcy5fc3VnZ2VzdChlKSx0aGlzLl90cmlnZ2VyKFwib3BlblwiKSk6dGhpcy5fY2xvc2UoKX0sY2xvc2U6ZnVuY3Rpb24oZSl7dGhpcy5jYW5jZWxTZWFyY2g9ITAsdGhpcy5fY2xvc2UoZSl9LF9jbG9zZTpmdW5jdGlvbihlKXt0aGlzLm1lbnUuZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpJiYodGhpcy5tZW51LmVsZW1lbnQuaGlkZSgpLHRoaXMubWVudS5ibHVyKCksdGhpcy5pc05ld01lbnU9ITAsdGhpcy5fdHJpZ2dlcihcImNsb3NlXCIsZSkpfSxfY2hhbmdlOmZ1bmN0aW9uKGUpe3RoaXMucHJldmlvdXMhPT10aGlzLl92YWx1ZSgpJiZ0aGlzLl90cmlnZ2VyKFwiY2hhbmdlXCIsZSx7aXRlbTp0aGlzLnNlbGVjdGVkSXRlbX0pfSxfbm9ybWFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0Lmxlbmd0aCYmdFswXS5sYWJlbCYmdFswXS52YWx1ZT90OmUubWFwKHQsZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/e2xhYmVsOnQsdmFsdWU6dH06ZS5leHRlbmQoe30sdCx7bGFiZWw6dC5sYWJlbHx8dC52YWx1ZSx2YWx1ZTp0LnZhbHVlfHx0LmxhYmVsfSl9KX0sX3N1Z2dlc3Q6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5tZW51LmVsZW1lbnQuZW1wdHkoKTt0aGlzLl9yZW5kZXJNZW51KGksdCksdGhpcy5pc05ld01lbnU9ITAsdGhpcy5tZW51LnJlZnJlc2goKSxpLnNob3coKSx0aGlzLl9yZXNpemVNZW51KCksaS5wb3NpdGlvbihlLmV4dGVuZCh7b2Y6dGhpcy5lbGVtZW50fSx0aGlzLm9wdGlvbnMucG9zaXRpb24pKSx0aGlzLm9wdGlvbnMuYXV0b0ZvY3VzJiZ0aGlzLm1lbnUubmV4dCgpfSxfcmVzaXplTWVudTpmdW5jdGlvbigpe3ZhciBlPXRoaXMubWVudS5lbGVtZW50O2Uub3V0ZXJXaWR0aChNYXRoLm1heChlLndpZHRoKFwiXCIpLm91dGVyV2lkdGgoKSsxLHRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCkpKX0sX3JlbmRlck1lbnU6ZnVuY3Rpb24odCxpKXt2YXIgcz10aGlzO2UuZWFjaChpLGZ1bmN0aW9uKGUsaSl7cy5fcmVuZGVySXRlbURhdGEodCxpKX0pfSxfcmVuZGVySXRlbURhdGE6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fcmVuZGVySXRlbShlLHQpLmRhdGEoXCJ1aS1hdXRvY29tcGxldGUtaXRlbVwiLHQpfSxfcmVuZGVySXRlbTpmdW5jdGlvbih0LGkpe3JldHVybiBlKFwiPGxpPlwiKS50ZXh0KGkubGFiZWwpLmFwcGVuZFRvKHQpfSxfbW92ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1lbnUuZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpP3RoaXMubWVudS5pc0ZpcnN0SXRlbSgpJiYvXnByZXZpb3VzLy50ZXN0KGUpfHx0aGlzLm1lbnUuaXNMYXN0SXRlbSgpJiYvXm5leHQvLnRlc3QoZSk/KHRoaXMuaXNNdWx0aUxpbmV8fHRoaXMuX3ZhbHVlKHRoaXMudGVybSksdGhpcy5tZW51LmJsdXIoKSx2b2lkIDApOih0aGlzLm1lbnVbZV0odCksdm9pZCAwKToodGhpcy5zZWFyY2gobnVsbCx0KSx2b2lkIDApfSx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZW51LmVsZW1lbnR9LF92YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlTWV0aG9kLmFwcGx5KHRoaXMuZWxlbWVudCxhcmd1bWVudHMpfSxfa2V5RXZlbnQ6ZnVuY3Rpb24oZSx0KXsoIXRoaXMuaXNNdWx0aUxpbmV8fHRoaXMubWVudS5lbGVtZW50LmlzKFwiOnZpc2libGVcIikpJiYodGhpcy5fbW92ZShlLHQpLHQucHJldmVudERlZmF1bHQoKSl9fSksZS5leHRlbmQoZS51aS5hdXRvY29tcGxldGUse2VzY2FwZVJlZ2V4OmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1tcXC1cXFtcXF17fSgpKis/LixcXFxcXFxeJHwjXFxzXS9nLFwiXFxcXCQmXCIpfSxmaWx0ZXI6ZnVuY3Rpb24odCxpKXt2YXIgcz1SZWdFeHAoZS51aS5hdXRvY29tcGxldGUuZXNjYXBlUmVnZXgoaSksXCJpXCIpO3JldHVybiBlLmdyZXAodCxmdW5jdGlvbihlKXtyZXR1cm4gcy50ZXN0KGUubGFiZWx8fGUudmFsdWV8fGUpfSl9fSksZS53aWRnZXQoXCJ1aS5hdXRvY29tcGxldGVcIixlLnVpLmF1dG9jb21wbGV0ZSx7b3B0aW9uczp7bWVzc2FnZXM6e25vUmVzdWx0czpcIk5vIHNlYXJjaCByZXN1bHRzLlwiLHJlc3VsdHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUrKGU+MT9cIiByZXN1bHRzIGFyZVwiOlwiIHJlc3VsdCBpc1wiKStcIiBhdmFpbGFibGUsIHVzZSB1cCBhbmQgZG93biBhcnJvdyBrZXlzIHRvIG5hdmlnYXRlLlwifX19LF9fcmVzcG9uc2U6ZnVuY3Rpb24odCl7dmFyIGk7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLHRoaXMub3B0aW9ucy5kaXNhYmxlZHx8dGhpcy5jYW5jZWxTZWFyY2h8fChpPXQmJnQubGVuZ3RoP3RoaXMub3B0aW9ucy5tZXNzYWdlcy5yZXN1bHRzKHQubGVuZ3RoKTp0aGlzLm9wdGlvbnMubWVzc2FnZXMubm9SZXN1bHRzLHRoaXMubGl2ZVJlZ2lvbi5jaGlsZHJlbigpLmhpZGUoKSxlKFwiPGRpdj5cIikudGV4dChpKS5hcHBlbmRUbyh0aGlzLmxpdmVSZWdpb24pKX19KSxlLnVpLmF1dG9jb21wbGV0ZTt2YXIgYyxwPVwidWktYnV0dG9uIHVpLXdpZGdldCB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGxcIixmPVwidWktYnV0dG9uLWljb25zLW9ubHkgdWktYnV0dG9uLWljb24tb25seSB1aS1idXR0b24tdGV4dC1pY29ucyB1aS1idXR0b24tdGV4dC1pY29uLXByaW1hcnkgdWktYnV0dG9uLXRleHQtaWNvbi1zZWNvbmRhcnkgdWktYnV0dG9uLXRleHQtb25seVwiLG09ZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmZpbmQoXCI6dWktYnV0dG9uXCIpLmJ1dHRvbihcInJlZnJlc2hcIil9LDEpfSxnPWZ1bmN0aW9uKHQpe3ZhciBpPXQubmFtZSxzPXQuZm9ybSxuPWUoW10pO3JldHVybiBpJiYoaT1pLnJlcGxhY2UoLycvZyxcIlxcXFwnXCIpLG49cz9lKHMpLmZpbmQoXCJbbmFtZT0nXCIraStcIiddW3R5cGU9cmFkaW9dXCIpOmUoXCJbbmFtZT0nXCIraStcIiddW3R5cGU9cmFkaW9dXCIsdC5vd25lckRvY3VtZW50KS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5mb3JtfSkpLG59O2Uud2lkZ2V0KFwidWkuYnV0dG9uXCIse3ZlcnNpb246XCIxLjExLjRcIixkZWZhdWx0RWxlbWVudDpcIjxidXR0b24+XCIsb3B0aW9uczp7ZGlzYWJsZWQ6bnVsbCx0ZXh0OiEwLGxhYmVsOm51bGwsaWNvbnM6e3ByaW1hcnk6bnVsbCxzZWNvbmRhcnk6bnVsbH19LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuY2xvc2VzdChcImZvcm1cIikudW5iaW5kKFwicmVzZXRcIit0aGlzLmV2ZW50TmFtZXNwYWNlKS5iaW5kKFwicmVzZXRcIit0aGlzLmV2ZW50TmFtZXNwYWNlLG0pLFwiYm9vbGVhblwiIT10eXBlb2YgdGhpcy5vcHRpb25zLmRpc2FibGVkP3RoaXMub3B0aW9ucy5kaXNhYmxlZD0hIXRoaXMuZWxlbWVudC5wcm9wKFwiZGlzYWJsZWRcIik6dGhpcy5lbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiLHRoaXMub3B0aW9ucy5kaXNhYmxlZCksdGhpcy5fZGV0ZXJtaW5lQnV0dG9uVHlwZSgpLHRoaXMuaGFzVGl0bGU9ISF0aGlzLmJ1dHRvbkVsZW1lbnQuYXR0cihcInRpdGxlXCIpO3ZhciB0PXRoaXMsaT10aGlzLm9wdGlvbnMscz1cImNoZWNrYm94XCI9PT10aGlzLnR5cGV8fFwicmFkaW9cIj09PXRoaXMudHlwZSxuPXM/XCJcIjpcInVpLXN0YXRlLWFjdGl2ZVwiO251bGw9PT1pLmxhYmVsJiYoaS5sYWJlbD1cImlucHV0XCI9PT10aGlzLnR5cGU/dGhpcy5idXR0b25FbGVtZW50LnZhbCgpOnRoaXMuYnV0dG9uRWxlbWVudC5odG1sKCkpLHRoaXMuX2hvdmVyYWJsZSh0aGlzLmJ1dHRvbkVsZW1lbnQpLHRoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcyhwKS5hdHRyKFwicm9sZVwiLFwiYnV0dG9uXCIpLmJpbmQoXCJtb3VzZWVudGVyXCIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbigpe2kuZGlzYWJsZWR8fHRoaXM9PT1jJiZlKHRoaXMpLmFkZENsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpfSkuYmluZChcIm1vdXNlbGVhdmVcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7aS5kaXNhYmxlZHx8ZSh0aGlzKS5yZW1vdmVDbGFzcyhuKX0pLmJpbmQoXCJjbGlja1wiK3RoaXMuZXZlbnROYW1lc3BhY2UsZnVuY3Rpb24oZSl7aS5kaXNhYmxlZCYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKX0pLHRoaXMuX29uKHtmb2N1czpmdW5jdGlvbigpe3RoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcyhcInVpLXN0YXRlLWZvY3VzXCIpfSxibHVyOmZ1bmN0aW9uKCl7dGhpcy5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZm9jdXNcIil9fSkscyYmdGhpcy5lbGVtZW50LmJpbmQoXCJjaGFuZ2VcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7dC5yZWZyZXNoKCl9KSxcImNoZWNrYm94XCI9PT10aGlzLnR5cGU/dGhpcy5idXR0b25FbGVtZW50LmJpbmQoXCJjbGlja1wiK3RoaXMuZXZlbnROYW1lc3BhY2UsZnVuY3Rpb24oKXtyZXR1cm4gaS5kaXNhYmxlZD8hMTp2b2lkIDB9KTpcInJhZGlvXCI9PT10aGlzLnR5cGU/dGhpcy5idXR0b25FbGVtZW50LmJpbmQoXCJjbGlja1wiK3RoaXMuZXZlbnROYW1lc3BhY2UsZnVuY3Rpb24oKXtpZihpLmRpc2FibGVkKXJldHVybiExO2UodGhpcykuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksdC5idXR0b25FbGVtZW50LmF0dHIoXCJhcmlhLXByZXNzZWRcIixcInRydWVcIik7dmFyIHM9dC5lbGVtZW50WzBdO2cocykubm90KHMpLm1hcChmdW5jdGlvbigpe3JldHVybiBlKHRoaXMpLmJ1dHRvbihcIndpZGdldFwiKVswXX0pLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLmF0dHIoXCJhcmlhLXByZXNzZWRcIixcImZhbHNlXCIpfSk6KHRoaXMuYnV0dG9uRWxlbWVudC5iaW5kKFwibW91c2Vkb3duXCIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbigpe3JldHVybiBpLmRpc2FibGVkPyExOihlKHRoaXMpLmFkZENsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLGM9dGhpcyx0LmRvY3VtZW50Lm9uZShcIm1vdXNldXBcIixmdW5jdGlvbigpe2M9bnVsbH0pLHZvaWQgMCl9KS5iaW5kKFwibW91c2V1cFwiK3RoaXMuZXZlbnROYW1lc3BhY2UsZnVuY3Rpb24oKXtyZXR1cm4gaS5kaXNhYmxlZD8hMTooZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKSx2b2lkIDApfSkuYmluZChcImtleWRvd25cIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKHQpe3JldHVybiBpLmRpc2FibGVkPyExOigodC5rZXlDb2RlPT09ZS51aS5rZXlDb2RlLlNQQUNFfHx0LmtleUNvZGU9PT1lLnVpLmtleUNvZGUuRU5URVIpJiZlKHRoaXMpLmFkZENsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLHZvaWQgMCl9KS5iaW5kKFwia2V5dXBcIit0aGlzLmV2ZW50TmFtZXNwYWNlK1wiIGJsdXJcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKX0pLHRoaXMuYnV0dG9uRWxlbWVudC5pcyhcImFcIikmJnRoaXMuYnV0dG9uRWxlbWVudC5rZXl1cChmdW5jdGlvbih0KXt0LmtleUNvZGU9PT1lLnVpLmtleUNvZGUuU1BBQ0UmJmUodGhpcykuY2xpY2soKX0pKSx0aGlzLl9zZXRPcHRpb24oXCJkaXNhYmxlZFwiLGkuZGlzYWJsZWQpLHRoaXMuX3Jlc2V0QnV0dG9uKCl9LF9kZXRlcm1pbmVCdXR0b25UeXBlOmZ1bmN0aW9uKCl7dmFyIGUsdCxpO3RoaXMudHlwZT10aGlzLmVsZW1lbnQuaXMoXCJbdHlwZT1jaGVja2JveF1cIik/XCJjaGVja2JveFwiOnRoaXMuZWxlbWVudC5pcyhcIlt0eXBlPXJhZGlvXVwiKT9cInJhZGlvXCI6dGhpcy5lbGVtZW50LmlzKFwiaW5wdXRcIik/XCJpbnB1dFwiOlwiYnV0dG9uXCIsXCJjaGVja2JveFwiPT09dGhpcy50eXBlfHxcInJhZGlvXCI9PT10aGlzLnR5cGU/KGU9dGhpcy5lbGVtZW50LnBhcmVudHMoKS5sYXN0KCksdD1cImxhYmVsW2Zvcj0nXCIrdGhpcy5lbGVtZW50LmF0dHIoXCJpZFwiKStcIiddXCIsdGhpcy5idXR0b25FbGVtZW50PWUuZmluZCh0KSx0aGlzLmJ1dHRvbkVsZW1lbnQubGVuZ3RofHwoZT1lLmxlbmd0aD9lLnNpYmxpbmdzKCk6dGhpcy5lbGVtZW50LnNpYmxpbmdzKCksdGhpcy5idXR0b25FbGVtZW50PWUuZmlsdGVyKHQpLHRoaXMuYnV0dG9uRWxlbWVudC5sZW5ndGh8fCh0aGlzLmJ1dHRvbkVsZW1lbnQ9ZS5maW5kKHQpKSksdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlXCIpLGk9dGhpcy5lbGVtZW50LmlzKFwiOmNoZWNrZWRcIiksaSYmdGhpcy5idXR0b25FbGVtZW50LmFkZENsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLHRoaXMuYnV0dG9uRWxlbWVudC5wcm9wKFwiYXJpYS1wcmVzc2VkXCIsaSkpOnRoaXMuYnV0dG9uRWxlbWVudD10aGlzLmVsZW1lbnR9LHdpZGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1dHRvbkVsZW1lbnR9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlXCIpLHRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcyhwK1wiIHVpLXN0YXRlLWFjdGl2ZSBcIitmKS5yZW1vdmVBdHRyKFwicm9sZVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1wcmVzc2VkXCIpLmh0bWwodGhpcy5idXR0b25FbGVtZW50LmZpbmQoXCIudWktYnV0dG9uLXRleHRcIikuaHRtbCgpKSx0aGlzLmhhc1RpdGxlfHx0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cihcInRpdGxlXCIpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3N1cGVyKGUsdCksXCJkaXNhYmxlZFwiPT09ZT8odGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIsISF0KSx0aGlzLmVsZW1lbnQucHJvcChcImRpc2FibGVkXCIsISF0KSx0JiYoXCJjaGVja2JveFwiPT09dGhpcy50eXBlfHxcInJhZGlvXCI9PT10aGlzLnR5cGU/dGhpcy5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZm9jdXNcIik6dGhpcy5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZm9jdXMgdWktc3RhdGUtYWN0aXZlXCIpKSx2b2lkIDApOih0aGlzLl9yZXNldEJ1dHRvbigpLHZvaWQgMCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsZW1lbnQuaXMoXCJpbnB1dCwgYnV0dG9uXCIpP3RoaXMuZWxlbWVudC5pcyhcIjpkaXNhYmxlZFwiKTp0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoXCJ1aS1idXR0b24tZGlzYWJsZWRcIik7dCE9PXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmdGhpcy5fc2V0T3B0aW9uKFwiZGlzYWJsZWRcIix0KSxcInJhZGlvXCI9PT10aGlzLnR5cGU/Zyh0aGlzLmVsZW1lbnRbMF0pLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLmlzKFwiOmNoZWNrZWRcIik/ZSh0aGlzKS5idXR0b24oXCJ3aWRnZXRcIikuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIikuYXR0cihcImFyaWEtcHJlc3NlZFwiLFwidHJ1ZVwiKTplKHRoaXMpLmJ1dHRvbihcIndpZGdldFwiKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsXCJmYWxzZVwiKX0pOlwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmKHRoaXMuZWxlbWVudC5pcyhcIjpjaGVja2VkXCIpP3RoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsXCJ0cnVlXCIpOnRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsXCJmYWxzZVwiKSl9LF9yZXNldEJ1dHRvbjpmdW5jdGlvbigpe2lmKFwiaW5wdXRcIj09PXRoaXMudHlwZSlyZXR1cm4gdGhpcy5vcHRpb25zLmxhYmVsJiZ0aGlzLmVsZW1lbnQudmFsKHRoaXMub3B0aW9ucy5sYWJlbCksdm9pZCAwO3ZhciB0PXRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcyhmKSxpPWUoXCI8c3Bhbj48L3NwYW4+XCIsdGhpcy5kb2N1bWVudFswXSkuYWRkQ2xhc3MoXCJ1aS1idXR0b24tdGV4dFwiKS5odG1sKHRoaXMub3B0aW9ucy5sYWJlbCkuYXBwZW5kVG8odC5lbXB0eSgpKS50ZXh0KCkscz10aGlzLm9wdGlvbnMuaWNvbnMsbj1zLnByaW1hcnkmJnMuc2Vjb25kYXJ5LGE9W107cy5wcmltYXJ5fHxzLnNlY29uZGFyeT8odGhpcy5vcHRpb25zLnRleHQmJmEucHVzaChcInVpLWJ1dHRvbi10ZXh0LWljb25cIisobj9cInNcIjpzLnByaW1hcnk/XCItcHJpbWFyeVwiOlwiLXNlY29uZGFyeVwiKSkscy5wcmltYXJ5JiZ0LnByZXBlbmQoXCI8c3BhbiBjbGFzcz0ndWktYnV0dG9uLWljb24tcHJpbWFyeSB1aS1pY29uIFwiK3MucHJpbWFyeStcIic+PC9zcGFuPlwiKSxzLnNlY29uZGFyeSYmdC5hcHBlbmQoXCI8c3BhbiBjbGFzcz0ndWktYnV0dG9uLWljb24tc2Vjb25kYXJ5IHVpLWljb24gXCIrcy5zZWNvbmRhcnkrXCInPjwvc3Bhbj5cIiksdGhpcy5vcHRpb25zLnRleHR8fChhLnB1c2gobj9cInVpLWJ1dHRvbi1pY29ucy1vbmx5XCI6XCJ1aS1idXR0b24taWNvbi1vbmx5XCIpLHRoaXMuaGFzVGl0bGV8fHQuYXR0cihcInRpdGxlXCIsZS50cmltKGkpKSkpOmEucHVzaChcInVpLWJ1dHRvbi10ZXh0LW9ubHlcIiksdC5hZGRDbGFzcyhhLmpvaW4oXCIgXCIpKX19KSxlLndpZGdldChcInVpLmJ1dHRvbnNldFwiLHt2ZXJzaW9uOlwiMS4xMS40XCIsb3B0aW9uczp7aXRlbXM6XCJidXR0b24sIGlucHV0W3R5cGU9YnV0dG9uXSwgaW5wdXRbdHlwZT1zdWJtaXRdLCBpbnB1dFt0eXBlPXJlc2V0XSwgaW5wdXRbdHlwZT1jaGVja2JveF0sIGlucHV0W3R5cGU9cmFkaW9dLCBhLCA6ZGF0YSh1aS1idXR0b24pXCJ9LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1idXR0b25zZXRcIil9LF9pbml0OmZ1bmN0aW9uKCl7dGhpcy5yZWZyZXNoKCl9LF9zZXRPcHRpb246ZnVuY3Rpb24oZSx0KXtcImRpc2FibGVkXCI9PT1lJiZ0aGlzLmJ1dHRvbnMuYnV0dG9uKFwib3B0aW9uXCIsZSx0KSx0aGlzLl9zdXBlcihlLHQpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIHQ9XCJydGxcIj09PXRoaXMuZWxlbWVudC5jc3MoXCJkaXJlY3Rpb25cIiksaT10aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMuaXRlbXMpLHM9aS5maWx0ZXIoXCI6dWktYnV0dG9uXCIpO2kubm90KFwiOnVpLWJ1dHRvblwiKS5idXR0b24oKSxzLmJ1dHRvbihcInJlZnJlc2hcIiksdGhpcy5idXR0b25zPWkubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcykuYnV0dG9uKFwid2lkZ2V0XCIpWzBdfSkucmVtb3ZlQ2xhc3MoXCJ1aS1jb3JuZXItYWxsIHVpLWNvcm5lci1sZWZ0IHVpLWNvcm5lci1yaWdodFwiKS5maWx0ZXIoXCI6Zmlyc3RcIikuYWRkQ2xhc3ModD9cInVpLWNvcm5lci1yaWdodFwiOlwidWktY29ybmVyLWxlZnRcIikuZW5kKCkuZmlsdGVyKFwiOmxhc3RcIikuYWRkQ2xhc3ModD9cInVpLWNvcm5lci1sZWZ0XCI6XCJ1aS1jb3JuZXItcmlnaHRcIikuZW5kKCkuZW5kKCl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktYnV0dG9uc2V0XCIpLHRoaXMuYnV0dG9ucy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS5idXR0b24oXCJ3aWRnZXRcIilbMF19KS5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci1sZWZ0IHVpLWNvcm5lci1yaWdodFwiKS5lbmQoKS5idXR0b24oXCJkZXN0cm95XCIpfX0pLGUudWkuYnV0dG9uLGUuZXh0ZW5kKGUudWkse2RhdGVwaWNrZXI6e3ZlcnNpb246XCIxLjExLjRcIn19KTt2YXIgdjtlLmV4dGVuZChuLnByb3RvdHlwZSx7bWFya2VyQ2xhc3NOYW1lOlwiaGFzRGF0ZXBpY2tlclwiLG1heFJvd3M6NCxfd2lkZ2V0RGF0ZXBpY2tlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRwRGl2fSxzZXREZWZhdWx0czpmdW5jdGlvbihlKXtyZXR1cm4gcih0aGlzLl9kZWZhdWx0cyxlfHx7fSksdGhpc30sX2F0dGFjaERhdGVwaWNrZXI6ZnVuY3Rpb24odCxpKXt2YXIgcyxuLGE7cz10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksbj1cImRpdlwiPT09c3x8XCJzcGFuXCI9PT1zLHQuaWR8fCh0aGlzLnV1aWQrPTEsdC5pZD1cImRwXCIrdGhpcy51dWlkKSxhPXRoaXMuX25ld0luc3QoZSh0KSxuKSxhLnNldHRpbmdzPWUuZXh0ZW5kKHt9LGl8fHt9KSxcImlucHV0XCI9PT1zP3RoaXMuX2Nvbm5lY3REYXRlcGlja2VyKHQsYSk6biYmdGhpcy5faW5saW5lRGF0ZXBpY2tlcih0LGEpfSxfbmV3SW5zdDpmdW5jdGlvbih0LGkpe3ZhciBzPXRbMF0uaWQucmVwbGFjZSgvKFteQS1aYS16MC05X1xcLV0pL2csXCJcXFxcXFxcXCQxXCIpO3JldHVybntpZDpzLGlucHV0OnQsc2VsZWN0ZWREYXk6MCxzZWxlY3RlZE1vbnRoOjAsc2VsZWN0ZWRZZWFyOjAsZHJhd01vbnRoOjAsZHJhd1llYXI6MCxpbmxpbmU6aSxkcERpdjppP2EoZShcIjxkaXYgY2xhc3M9J1wiK3RoaXMuX2lubGluZUNsYXNzK1wiIHVpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsJz48L2Rpdj5cIikpOnRoaXMuZHBEaXZ9fSxfY29ubmVjdERhdGVwaWNrZXI6ZnVuY3Rpb24odCxpKXt2YXIgcz1lKHQpO2kuYXBwZW5kPWUoW10pLGkudHJpZ2dlcj1lKFtdKSxzLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKXx8KHRoaXMuX2F0dGFjaG1lbnRzKHMsaSkscy5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkua2V5ZG93bih0aGlzLl9kb0tleURvd24pLmtleXByZXNzKHRoaXMuX2RvS2V5UHJlc3MpLmtleXVwKHRoaXMuX2RvS2V5VXApLHRoaXMuX2F1dG9TaXplKGkpLGUuZGF0YSh0LFwiZGF0ZXBpY2tlclwiLGkpLGkuc2V0dGluZ3MuZGlzYWJsZWQmJnRoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHQpKX0sX2F0dGFjaG1lbnRzOmZ1bmN0aW9uKHQsaSl7dmFyIHMsbixhLG89dGhpcy5fZ2V0KGksXCJhcHBlbmRUZXh0XCIpLHI9dGhpcy5fZ2V0KGksXCJpc1JUTFwiKTtpLmFwcGVuZCYmaS5hcHBlbmQucmVtb3ZlKCksbyYmKGkuYXBwZW5kPWUoXCI8c3BhbiBjbGFzcz0nXCIrdGhpcy5fYXBwZW5kQ2xhc3MrXCInPlwiK28rXCI8L3NwYW4+XCIpLHRbcj9cImJlZm9yZVwiOlwiYWZ0ZXJcIl0oaS5hcHBlbmQpKSx0LnVuYmluZChcImZvY3VzXCIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpLGkudHJpZ2dlciYmaS50cmlnZ2VyLnJlbW92ZSgpLHM9dGhpcy5fZ2V0KGksXCJzaG93T25cIiksKFwiZm9jdXNcIj09PXN8fFwiYm90aFwiPT09cykmJnQuZm9jdXModGhpcy5fc2hvd0RhdGVwaWNrZXIpLChcImJ1dHRvblwiPT09c3x8XCJib3RoXCI9PT1zKSYmKG49dGhpcy5fZ2V0KGksXCJidXR0b25UZXh0XCIpLGE9dGhpcy5fZ2V0KGksXCJidXR0b25JbWFnZVwiKSxpLnRyaWdnZXI9ZSh0aGlzLl9nZXQoaSxcImJ1dHRvbkltYWdlT25seVwiKT9lKFwiPGltZy8+XCIpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuYXR0cih7c3JjOmEsYWx0Om4sdGl0bGU6bn0pOmUoXCI8YnV0dG9uIHR5cGU9J2J1dHRvbic+PC9idXR0b24+XCIpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuaHRtbChhP2UoXCI8aW1nLz5cIikuYXR0cih7c3JjOmEsYWx0Om4sdGl0bGU6bn0pOm4pKSx0W3I/XCJiZWZvcmVcIjpcImFmdGVyXCJdKGkudHJpZ2dlciksaS50cmlnZ2VyLmNsaWNrKGZ1bmN0aW9uKCl7cmV0dXJuIGUuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJmUuZGF0ZXBpY2tlci5fbGFzdElucHV0PT09dFswXT9lLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk6ZS5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmZS5kYXRlcGlja2VyLl9sYXN0SW5wdXQhPT10WzBdPyhlLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCksZS5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcih0WzBdKSk6ZS5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcih0WzBdKSwhMX0pKX0sX2F1dG9TaXplOmZ1bmN0aW9uKGUpe2lmKHRoaXMuX2dldChlLFwiYXV0b1NpemVcIikmJiFlLmlubGluZSl7dmFyIHQsaSxzLG4sYT1uZXcgRGF0ZSgyMDA5LDExLDIwKSxvPXRoaXMuX2dldChlLFwiZGF0ZUZvcm1hdFwiKTtvLm1hdGNoKC9bRE1dLykmJih0PWZ1bmN0aW9uKGUpe2ZvcihpPTAscz0wLG49MDtlLmxlbmd0aD5uO24rKyllW25dLmxlbmd0aD5pJiYoaT1lW25dLmxlbmd0aCxzPW4pO3JldHVybiBzfSxhLnNldE1vbnRoKHQodGhpcy5fZ2V0KGUsby5tYXRjaCgvTU0vKT9cIm1vbnRoTmFtZXNcIjpcIm1vbnRoTmFtZXNTaG9ydFwiKSkpLGEuc2V0RGF0ZSh0KHRoaXMuX2dldChlLG8ubWF0Y2goL0RELyk/XCJkYXlOYW1lc1wiOlwiZGF5TmFtZXNTaG9ydFwiKSkrMjAtYS5nZXREYXkoKSkpLGUuaW5wdXQuYXR0cihcInNpemVcIix0aGlzLl9mb3JtYXREYXRlKGUsYSkubGVuZ3RoKX19LF9pbmxpbmVEYXRlcGlja2VyOmZ1bmN0aW9uKHQsaSl7dmFyIHM9ZSh0KTtzLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKXx8KHMuYWRkQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmFwcGVuZChpLmRwRGl2KSxlLmRhdGEodCxcImRhdGVwaWNrZXJcIixpKSx0aGlzLl9zZXREYXRlKGksdGhpcy5fZ2V0RGVmYXVsdERhdGUoaSksITApLHRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaSksdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGkpLGkuc2V0dGluZ3MuZGlzYWJsZWQmJnRoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHQpLGkuZHBEaXYuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIikpfSxfZGlhbG9nRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGkscyxuLGEpe3ZhciBvLGgsbCx1LGQsYz10aGlzLl9kaWFsb2dJbnN0O3JldHVybiBjfHwodGhpcy51dWlkKz0xLG89XCJkcFwiK3RoaXMudXVpZCx0aGlzLl9kaWFsb2dJbnB1dD1lKFwiPGlucHV0IHR5cGU9J3RleHQnIGlkPSdcIitvK1wiJyBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlOyB0b3A6IC0xMDBweDsgd2lkdGg6IDBweDsnLz5cIiksdGhpcy5fZGlhbG9nSW5wdXQua2V5ZG93bih0aGlzLl9kb0tleURvd24pLGUoXCJib2R5XCIpLmFwcGVuZCh0aGlzLl9kaWFsb2dJbnB1dCksYz10aGlzLl9kaWFsb2dJbnN0PXRoaXMuX25ld0luc3QodGhpcy5fZGlhbG9nSW5wdXQsITEpLGMuc2V0dGluZ3M9e30sZS5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLFwiZGF0ZXBpY2tlclwiLGMpKSxyKGMuc2V0dGluZ3Msbnx8e30pLGk9aSYmaS5jb25zdHJ1Y3Rvcj09PURhdGU/dGhpcy5fZm9ybWF0RGF0ZShjLGkpOmksdGhpcy5fZGlhbG9nSW5wdXQudmFsKGkpLHRoaXMuX3Bvcz1hP2EubGVuZ3RoP2E6W2EucGFnZVgsYS5wYWdlWV06bnVsbCx0aGlzLl9wb3N8fChoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCxsPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQsdT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0LGQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AsdGhpcy5fcG9zPVtoLzItMTAwK3UsbC8yLTE1MCtkXSksdGhpcy5fZGlhbG9nSW5wdXQuY3NzKFwibGVmdFwiLHRoaXMuX3Bvc1swXSsyMCtcInB4XCIpLmNzcyhcInRvcFwiLHRoaXMuX3Bvc1sxXStcInB4XCIpLGMuc2V0dGluZ3Mub25TZWxlY3Q9cyx0aGlzLl9pbkRpYWxvZz0hMCx0aGlzLmRwRGl2LmFkZENsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKSx0aGlzLl9zaG93RGF0ZXBpY2tlcih0aGlzLl9kaWFsb2dJbnB1dFswXSksZS5ibG9ja1VJJiZlLmJsb2NrVUkodGhpcy5kcERpdiksZS5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLFwiZGF0ZXBpY2tlclwiLGMpLHRoaXN9LF9kZXN0cm95RGF0ZXBpY2tlcjpmdW5jdGlvbih0KXt2YXIgaSxzPWUodCksbj1lLmRhdGEodCxcImRhdGVwaWNrZXJcIik7cy5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkmJihpPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxlLnJlbW92ZURhdGEodCxcImRhdGVwaWNrZXJcIiksXCJpbnB1dFwiPT09aT8obi5hcHBlbmQucmVtb3ZlKCksbi50cmlnZ2VyLnJlbW92ZSgpLHMucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLnVuYmluZChcImZvY3VzXCIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpLnVuYmluZChcImtleWRvd25cIix0aGlzLl9kb0tleURvd24pLnVuYmluZChcImtleXByZXNzXCIsdGhpcy5fZG9LZXlQcmVzcykudW5iaW5kKFwia2V5dXBcIix0aGlzLl9kb0tleVVwKSk6KFwiZGl2XCI9PT1pfHxcInNwYW5cIj09PWkpJiZzLnJlbW92ZUNsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5lbXB0eSgpLHY9PT1uJiYodj1udWxsKSl9LF9lbmFibGVEYXRlcGlja2VyOmZ1bmN0aW9uKHQpe3ZhciBpLHMsbj1lKHQpLGE9ZS5kYXRhKHQsXCJkYXRlcGlja2VyXCIpO24uaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpJiYoaT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXCJpbnB1dFwiPT09aT8odC5kaXNhYmxlZD0hMSxhLnRyaWdnZXIuZmlsdGVyKFwiYnV0dG9uXCIpLmVhY2goZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPSExfSkuZW5kKCkuZmlsdGVyKFwiaW1nXCIpLmNzcyh7b3BhY2l0eTpcIjEuMFwiLGN1cnNvcjpcIlwifSkpOihcImRpdlwiPT09aXx8XCJzcGFuXCI9PT1pKSYmKHM9bi5jaGlsZHJlbihcIi5cIit0aGlzLl9pbmxpbmVDbGFzcykscy5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIikscy5maW5kKFwic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXJcIikucHJvcChcImRpc2FibGVkXCIsITEpKSx0aGlzLl9kaXNhYmxlZElucHV0cz1lLm1hcCh0aGlzLl9kaXNhYmxlZElucHV0cyxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/bnVsbDplfSkpfSxfZGlzYWJsZURhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIGkscyxuPWUodCksYT1lLmRhdGEodCxcImRhdGVwaWNrZXJcIik7bi5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkmJihpPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxcImlucHV0XCI9PT1pPyh0LmRpc2FibGVkPSEwLGEudHJpZ2dlci5maWx0ZXIoXCJidXR0b25cIikuZWFjaChmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ITB9KS5lbmQoKS5maWx0ZXIoXCJpbWdcIikuY3NzKHtvcGFjaXR5OlwiMC41XCIsY3Vyc29yOlwiZGVmYXVsdFwifSkpOihcImRpdlwiPT09aXx8XCJzcGFuXCI9PT1pKSYmKHM9bi5jaGlsZHJlbihcIi5cIit0aGlzLl9pbmxpbmVDbGFzcykscy5jaGlsZHJlbigpLmFkZENsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIikscy5maW5kKFwic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXJcIikucHJvcChcImRpc2FibGVkXCIsITApKSx0aGlzLl9kaXNhYmxlZElucHV0cz1lLm1hcCh0aGlzLl9kaXNhYmxlZElucHV0cyxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/bnVsbDplfSksdGhpcy5fZGlzYWJsZWRJbnB1dHNbdGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoXT10KX0sX2lzRGlzYWJsZWREYXRlcGlja2VyOmZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiExO2Zvcih2YXIgdD0wO3RoaXMuX2Rpc2FibGVkSW5wdXRzLmxlbmd0aD50O3QrKylpZih0aGlzLl9kaXNhYmxlZElucHV0c1t0XT09PWUpcmV0dXJuITA7cmV0dXJuITF9LF9nZXRJbnN0OmZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gZS5kYXRhKHQsXCJkYXRlcGlja2VyXCIpfWNhdGNoKGkpe3Rocm93XCJNaXNzaW5nIGluc3RhbmNlIGRhdGEgZm9yIHRoaXMgZGF0ZXBpY2tlclwifX0sX29wdGlvbkRhdGVwaWNrZXI6ZnVuY3Rpb24odCxpLHMpe3ZhciBuLGEsbyxoLGw9dGhpcy5fZ2V0SW5zdCh0KTtyZXR1cm4gMj09PWFyZ3VtZW50cy5sZW5ndGgmJlwic3RyaW5nXCI9PXR5cGVvZiBpP1wiZGVmYXVsdHNcIj09PWk/ZS5leHRlbmQoe30sZS5kYXRlcGlja2VyLl9kZWZhdWx0cyk6bD9cImFsbFwiPT09aT9lLmV4dGVuZCh7fSxsLnNldHRpbmdzKTp0aGlzLl9nZXQobCxpKTpudWxsOihuPWl8fHt9LFwic3RyaW5nXCI9PXR5cGVvZiBpJiYobj17fSxuW2ldPXMpLGwmJih0aGlzLl9jdXJJbnN0PT09bCYmdGhpcy5faGlkZURhdGVwaWNrZXIoKSxhPXRoaXMuX2dldERhdGVEYXRlcGlja2VyKHQsITApLG89dGhpcy5fZ2V0TWluTWF4RGF0ZShsLFwibWluXCIpLGg9dGhpcy5fZ2V0TWluTWF4RGF0ZShsLFwibWF4XCIpLHIobC5zZXR0aW5ncyxuKSxudWxsIT09byYmdm9pZCAwIT09bi5kYXRlRm9ybWF0JiZ2b2lkIDA9PT1uLm1pbkRhdGUmJihsLnNldHRpbmdzLm1pbkRhdGU9dGhpcy5fZm9ybWF0RGF0ZShsLG8pKSxudWxsIT09aCYmdm9pZCAwIT09bi5kYXRlRm9ybWF0JiZ2b2lkIDA9PT1uLm1heERhdGUmJihsLnNldHRpbmdzLm1heERhdGU9dGhpcy5fZm9ybWF0RGF0ZShsLGgpKSxcImRpc2FibGVkXCJpbiBuJiYobi5kaXNhYmxlZD90aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcih0KTp0aGlzLl9lbmFibGVEYXRlcGlja2VyKHQpKSx0aGlzLl9hdHRhY2htZW50cyhlKHQpLGwpLHRoaXMuX2F1dG9TaXplKGwpLHRoaXMuX3NldERhdGUobCxhKSx0aGlzLl91cGRhdGVBbHRlcm5hdGUobCksdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihsKSksdm9pZCAwKX0sX2NoYW5nZURhdGVwaWNrZXI6ZnVuY3Rpb24oZSx0LGkpe3RoaXMuX29wdGlvbkRhdGVwaWNrZXIoZSx0LGkpfSxfcmVmcmVzaERhdGVwaWNrZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0SW5zdChlKTt0JiZ0aGlzLl91cGRhdGVEYXRlcGlja2VyKHQpfSxfc2V0RGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLl9nZXRJbnN0KGUpO2kmJih0aGlzLl9zZXREYXRlKGksdCksdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpKSx0aGlzLl91cGRhdGVBbHRlcm5hdGUoaSkpfSxfZ2V0RGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLl9nZXRJbnN0KGUpO3JldHVybiBpJiYhaS5pbmxpbmUmJnRoaXMuX3NldERhdGVGcm9tRmllbGQoaSx0KSxpP3RoaXMuX2dldERhdGUoaSk6bnVsbH0sX2RvS2V5RG93bjpmdW5jdGlvbih0KXt2YXIgaSxzLG4sYT1lLmRhdGVwaWNrZXIuX2dldEluc3QodC50YXJnZXQpLG89ITAscj1hLmRwRGl2LmlzKFwiLnVpLWRhdGVwaWNrZXItcnRsXCIpO2lmKGEuX2tleUV2ZW50PSEwLGUuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcpc3dpdGNoKHQua2V5Q29kZSl7Y2FzZSA5OmUuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKSxvPSExO2JyZWFrO2Nhc2UgMTM6cmV0dXJuIG49ZShcInRkLlwiK2UuZGF0ZXBpY2tlci5fZGF5T3ZlckNsYXNzK1wiOm5vdCguXCIrZS5kYXRlcGlja2VyLl9jdXJyZW50Q2xhc3MrXCIpXCIsYS5kcERpdiksblswXSYmZS5kYXRlcGlja2VyLl9zZWxlY3REYXkodC50YXJnZXQsYS5zZWxlY3RlZE1vbnRoLGEuc2VsZWN0ZWRZZWFyLG5bMF0pLGk9ZS5kYXRlcGlja2VyLl9nZXQoYSxcIm9uU2VsZWN0XCIpLGk/KHM9ZS5kYXRlcGlja2VyLl9mb3JtYXREYXRlKGEpLGkuYXBwbHkoYS5pbnB1dD9hLmlucHV0WzBdOm51bGwsW3MsYV0pKTplLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCksITE7Y2FzZSAyNzplLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7YnJlYWs7Y2FzZSAzMzplLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQsdC5jdHJsS2V5Py1lLmRhdGVwaWNrZXIuX2dldChhLFwic3RlcEJpZ01vbnRoc1wiKTotZS5kYXRlcGlja2VyLl9nZXQoYSxcInN0ZXBNb250aHNcIiksXCJNXCIpO2JyZWFrO2Nhc2UgMzQ6ZS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKHQudGFyZ2V0LHQuY3RybEtleT8rZS5kYXRlcGlja2VyLl9nZXQoYSxcInN0ZXBCaWdNb250aHNcIik6K2UuZGF0ZXBpY2tlci5fZ2V0KGEsXCJzdGVwTW9udGhzXCIpLFwiTVwiKTticmVhaztjYXNlIDM1Oih0LmN0cmxLZXl8fHQubWV0YUtleSkmJmUuZGF0ZXBpY2tlci5fY2xlYXJEYXRlKHQudGFyZ2V0KSxvPXQuY3RybEtleXx8dC5tZXRhS2V5O2JyZWFrO2Nhc2UgMzY6KHQuY3RybEtleXx8dC5tZXRhS2V5KSYmZS5kYXRlcGlja2VyLl9nb3RvVG9kYXkodC50YXJnZXQpLG89dC5jdHJsS2V5fHx0Lm1ldGFLZXk7YnJlYWs7Y2FzZSAzNzoodC5jdHJsS2V5fHx0Lm1ldGFLZXkpJiZlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQscj8xOi0xLFwiRFwiKSxvPXQuY3RybEtleXx8dC5tZXRhS2V5LHQub3JpZ2luYWxFdmVudC5hbHRLZXkmJmUuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCx0LmN0cmxLZXk/LWUuZGF0ZXBpY2tlci5fZ2V0KGEsXCJzdGVwQmlnTW9udGhzXCIpOi1lLmRhdGVwaWNrZXIuX2dldChhLFwic3RlcE1vbnRoc1wiKSxcIk1cIik7YnJlYWs7Y2FzZSAzODoodC5jdHJsS2V5fHx0Lm1ldGFLZXkpJiZlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQsLTcsXCJEXCIpLG89dC5jdHJsS2V5fHx0Lm1ldGFLZXk7YnJlYWs7Y2FzZSAzOToodC5jdHJsS2V5fHx0Lm1ldGFLZXkpJiZlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQscj8tMToxLFwiRFwiKSxvPXQuY3RybEtleXx8dC5tZXRhS2V5LHQub3JpZ2luYWxFdmVudC5hbHRLZXkmJmUuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCx0LmN0cmxLZXk/K2UuZGF0ZXBpY2tlci5fZ2V0KGEsXCJzdGVwQmlnTW9udGhzXCIpOitlLmRhdGVwaWNrZXIuX2dldChhLFwic3RlcE1vbnRoc1wiKSxcIk1cIik7YnJlYWs7Y2FzZSA0MDoodC5jdHJsS2V5fHx0Lm1ldGFLZXkpJiZlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQsNyxcIkRcIiksbz10LmN0cmxLZXl8fHQubWV0YUtleTticmVhaztkZWZhdWx0Om89ITF9ZWxzZSAzNj09PXQua2V5Q29kZSYmdC5jdHJsS2V5P2UuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodGhpcyk6bz0hMTtvJiYodC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCkpfSxfZG9LZXlQcmVzczpmdW5jdGlvbih0KXt2YXIgaSxzLG49ZS5kYXRlcGlja2VyLl9nZXRJbnN0KHQudGFyZ2V0KTtcbnJldHVybiBlLmRhdGVwaWNrZXIuX2dldChuLFwiY29uc3RyYWluSW5wdXRcIik/KGk9ZS5kYXRlcGlja2VyLl9wb3NzaWJsZUNoYXJzKGUuZGF0ZXBpY2tlci5fZ2V0KG4sXCJkYXRlRm9ybWF0XCIpKSxzPVN0cmluZy5mcm9tQ2hhckNvZGUobnVsbD09dC5jaGFyQ29kZT90LmtleUNvZGU6dC5jaGFyQ29kZSksdC5jdHJsS2V5fHx0Lm1ldGFLZXl8fFwiIFwiPnN8fCFpfHxpLmluZGV4T2Yocyk+LTEpOnZvaWQgMH0sX2RvS2V5VXA6ZnVuY3Rpb24odCl7dmFyIGkscz1lLmRhdGVwaWNrZXIuX2dldEluc3QodC50YXJnZXQpO2lmKHMuaW5wdXQudmFsKCkhPT1zLmxhc3RWYWwpdHJ5e2k9ZS5kYXRlcGlja2VyLnBhcnNlRGF0ZShlLmRhdGVwaWNrZXIuX2dldChzLFwiZGF0ZUZvcm1hdFwiKSxzLmlucHV0P3MuaW5wdXQudmFsKCk6bnVsbCxlLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyhzKSksaSYmKGUuZGF0ZXBpY2tlci5fc2V0RGF0ZUZyb21GaWVsZChzKSxlLmRhdGVwaWNrZXIuX3VwZGF0ZUFsdGVybmF0ZShzKSxlLmRhdGVwaWNrZXIuX3VwZGF0ZURhdGVwaWNrZXIocykpfWNhdGNoKG4pe31yZXR1cm4hMH0sX3Nob3dEYXRlcGlja2VyOmZ1bmN0aW9uKHQpe2lmKHQ9dC50YXJnZXR8fHQsXCJpbnB1dFwiIT09dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYodD1lKFwiaW5wdXRcIix0LnBhcmVudE5vZGUpWzBdKSwhZS5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcih0KSYmZS5kYXRlcGlja2VyLl9sYXN0SW5wdXQhPT10KXt2YXIgaSxuLGEsbyxoLGwsdTtpPWUuZGF0ZXBpY2tlci5fZ2V0SW5zdCh0KSxlLmRhdGVwaWNrZXIuX2N1ckluc3QmJmUuZGF0ZXBpY2tlci5fY3VySW5zdCE9PWkmJihlLmRhdGVwaWNrZXIuX2N1ckluc3QuZHBEaXYuc3RvcCghMCwhMCksaSYmZS5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmZS5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcihlLmRhdGVwaWNrZXIuX2N1ckluc3QuaW5wdXRbMF0pKSxuPWUuZGF0ZXBpY2tlci5fZ2V0KGksXCJiZWZvcmVTaG93XCIpLGE9bj9uLmFwcGx5KHQsW3QsaV0pOnt9LGEhPT0hMSYmKHIoaS5zZXR0aW5ncyxhKSxpLmxhc3RWYWw9bnVsbCxlLmRhdGVwaWNrZXIuX2xhc3RJbnB1dD10LGUuZGF0ZXBpY2tlci5fc2V0RGF0ZUZyb21GaWVsZChpKSxlLmRhdGVwaWNrZXIuX2luRGlhbG9nJiYodC52YWx1ZT1cIlwiKSxlLmRhdGVwaWNrZXIuX3Bvc3x8KGUuZGF0ZXBpY2tlci5fcG9zPWUuZGF0ZXBpY2tlci5fZmluZFBvcyh0KSxlLmRhdGVwaWNrZXIuX3Bvc1sxXSs9dC5vZmZzZXRIZWlnaHQpLG89ITEsZSh0KS5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpe3JldHVybiBvfD1cImZpeGVkXCI9PT1lKHRoaXMpLmNzcyhcInBvc2l0aW9uXCIpLCFvfSksaD17bGVmdDplLmRhdGVwaWNrZXIuX3Bvc1swXSx0b3A6ZS5kYXRlcGlja2VyLl9wb3NbMV19LGUuZGF0ZXBpY2tlci5fcG9zPW51bGwsaS5kcERpdi5lbXB0eSgpLGkuZHBEaXYuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsZGlzcGxheTpcImJsb2NrXCIsdG9wOlwiLTEwMDBweFwifSksZS5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGkpLGg9ZS5kYXRlcGlja2VyLl9jaGVja09mZnNldChpLGgsbyksaS5kcERpdi5jc3Moe3Bvc2l0aW9uOmUuZGF0ZXBpY2tlci5faW5EaWFsb2cmJmUuYmxvY2tVST9cInN0YXRpY1wiOm8/XCJmaXhlZFwiOlwiYWJzb2x1dGVcIixkaXNwbGF5Olwibm9uZVwiLGxlZnQ6aC5sZWZ0K1wicHhcIix0b3A6aC50b3ArXCJweFwifSksaS5pbmxpbmV8fChsPWUuZGF0ZXBpY2tlci5fZ2V0KGksXCJzaG93QW5pbVwiKSx1PWUuZGF0ZXBpY2tlci5fZ2V0KGksXCJkdXJhdGlvblwiKSxpLmRwRGl2LmNzcyhcInotaW5kZXhcIixzKGUodCkpKzEpLGUuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmc9ITAsZS5lZmZlY3RzJiZlLmVmZmVjdHMuZWZmZWN0W2xdP2kuZHBEaXYuc2hvdyhsLGUuZGF0ZXBpY2tlci5fZ2V0KGksXCJzaG93T3B0aW9uc1wiKSx1KTppLmRwRGl2W2x8fFwic2hvd1wiXShsP3U6bnVsbCksZS5kYXRlcGlja2VyLl9zaG91bGRGb2N1c0lucHV0KGkpJiZpLmlucHV0LmZvY3VzKCksZS5kYXRlcGlja2VyLl9jdXJJbnN0PWkpKX19LF91cGRhdGVEYXRlcGlja2VyOmZ1bmN0aW9uKHQpe3RoaXMubWF4Um93cz00LHY9dCx0LmRwRGl2LmVtcHR5KCkuYXBwZW5kKHRoaXMuX2dlbmVyYXRlSFRNTCh0KSksdGhpcy5fYXR0YWNoSGFuZGxlcnModCk7dmFyIGkscz10aGlzLl9nZXROdW1iZXJPZk1vbnRocyh0KSxuPXNbMV0sYT0xNyxyPXQuZHBEaXYuZmluZChcIi5cIit0aGlzLl9kYXlPdmVyQ2xhc3MrXCIgYVwiKTtyLmxlbmd0aD4wJiZvLmFwcGx5KHIuZ2V0KDApKSx0LmRwRGl2LnJlbW92ZUNsYXNzKFwidWktZGF0ZXBpY2tlci1tdWx0aS0yIHVpLWRhdGVwaWNrZXItbXVsdGktMyB1aS1kYXRlcGlja2VyLW11bHRpLTRcIikud2lkdGgoXCJcIiksbj4xJiZ0LmRwRGl2LmFkZENsYXNzKFwidWktZGF0ZXBpY2tlci1tdWx0aS1cIituKS5jc3MoXCJ3aWR0aFwiLGEqbitcImVtXCIpLHQuZHBEaXZbKDEhPT1zWzBdfHwxIT09c1sxXT9cImFkZFwiOlwicmVtb3ZlXCIpK1wiQ2xhc3NcIl0oXCJ1aS1kYXRlcGlja2VyLW11bHRpXCIpLHQuZHBEaXZbKHRoaXMuX2dldCh0LFwiaXNSVExcIik/XCJhZGRcIjpcInJlbW92ZVwiKStcIkNsYXNzXCJdKFwidWktZGF0ZXBpY2tlci1ydGxcIiksdD09PWUuZGF0ZXBpY2tlci5fY3VySW5zdCYmZS5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmZS5kYXRlcGlja2VyLl9zaG91bGRGb2N1c0lucHV0KHQpJiZ0LmlucHV0LmZvY3VzKCksdC55ZWFyc2h0bWwmJihpPXQueWVhcnNodG1sLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpPT09dC55ZWFyc2h0bWwmJnQueWVhcnNodG1sJiZ0LmRwRGl2LmZpbmQoXCJzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyOmZpcnN0XCIpLnJlcGxhY2VXaXRoKHQueWVhcnNodG1sKSxpPXQueWVhcnNodG1sPW51bGx9LDApKX0sX3Nob3VsZEZvY3VzSW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5wdXQmJmUuaW5wdXQuaXMoXCI6dmlzaWJsZVwiKSYmIWUuaW5wdXQuaXMoXCI6ZGlzYWJsZWRcIikmJiFlLmlucHV0LmlzKFwiOmZvY3VzXCIpfSxfY2hlY2tPZmZzZXQ6ZnVuY3Rpb24odCxpLHMpe3ZhciBuPXQuZHBEaXYub3V0ZXJXaWR0aCgpLGE9dC5kcERpdi5vdXRlckhlaWdodCgpLG89dC5pbnB1dD90LmlucHV0Lm91dGVyV2lkdGgoKTowLHI9dC5pbnB1dD90LmlucHV0Lm91dGVySGVpZ2h0KCk6MCxoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCsocz8wOmUoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSksbD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KyhzPzA6ZShkb2N1bWVudCkuc2Nyb2xsVG9wKCkpO3JldHVybiBpLmxlZnQtPXRoaXMuX2dldCh0LFwiaXNSVExcIik/bi1vOjAsaS5sZWZ0LT1zJiZpLmxlZnQ9PT10LmlucHV0Lm9mZnNldCgpLmxlZnQ/ZShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpOjAsaS50b3AtPXMmJmkudG9wPT09dC5pbnB1dC5vZmZzZXQoKS50b3Arcj9lKGRvY3VtZW50KS5zY3JvbGxUb3AoKTowLGkubGVmdC09TWF0aC5taW4oaS5sZWZ0LGkubGVmdCtuPmgmJmg+bj9NYXRoLmFicyhpLmxlZnQrbi1oKTowKSxpLnRvcC09TWF0aC5taW4oaS50b3AsaS50b3ArYT5sJiZsPmE/TWF0aC5hYnMoYStyKTowKSxpfSxfZmluZFBvczpmdW5jdGlvbih0KXtmb3IodmFyIGkscz10aGlzLl9nZXRJbnN0KHQpLG49dGhpcy5fZ2V0KHMsXCJpc1JUTFwiKTt0JiYoXCJoaWRkZW5cIj09PXQudHlwZXx8MSE9PXQubm9kZVR5cGV8fGUuZXhwci5maWx0ZXJzLmhpZGRlbih0KSk7KXQ9dFtuP1wicHJldmlvdXNTaWJsaW5nXCI6XCJuZXh0U2libGluZ1wiXTtyZXR1cm4gaT1lKHQpLm9mZnNldCgpLFtpLmxlZnQsaS50b3BdfSxfaGlkZURhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIGkscyxuLGEsbz10aGlzLl9jdXJJbnN0OyFvfHx0JiZvIT09ZS5kYXRhKHQsXCJkYXRlcGlja2VyXCIpfHx0aGlzLl9kYXRlcGlja2VyU2hvd2luZyYmKGk9dGhpcy5fZ2V0KG8sXCJzaG93QW5pbVwiKSxzPXRoaXMuX2dldChvLFwiZHVyYXRpb25cIiksbj1mdW5jdGlvbigpe2UuZGF0ZXBpY2tlci5fdGlkeURpYWxvZyhvKX0sZS5lZmZlY3RzJiYoZS5lZmZlY3RzLmVmZmVjdFtpXXx8ZS5lZmZlY3RzW2ldKT9vLmRwRGl2LmhpZGUoaSxlLmRhdGVwaWNrZXIuX2dldChvLFwic2hvd09wdGlvbnNcIikscyxuKTpvLmRwRGl2W1wic2xpZGVEb3duXCI9PT1pP1wic2xpZGVVcFwiOlwiZmFkZUluXCI9PT1pP1wiZmFkZU91dFwiOlwiaGlkZVwiXShpP3M6bnVsbCxuKSxpfHxuKCksdGhpcy5fZGF0ZXBpY2tlclNob3dpbmc9ITEsYT10aGlzLl9nZXQobyxcIm9uQ2xvc2VcIiksYSYmYS5hcHBseShvLmlucHV0P28uaW5wdXRbMF06bnVsbCxbby5pbnB1dD9vLmlucHV0LnZhbCgpOlwiXCIsb10pLHRoaXMuX2xhc3RJbnB1dD1udWxsLHRoaXMuX2luRGlhbG9nJiYodGhpcy5fZGlhbG9nSW5wdXQuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsbGVmdDpcIjBcIix0b3A6XCItMTAwcHhcIn0pLGUuYmxvY2tVSSYmKGUudW5ibG9ja1VJKCksZShcImJvZHlcIikuYXBwZW5kKHRoaXMuZHBEaXYpKSksdGhpcy5faW5EaWFsb2c9ITEpfSxfdGlkeURpYWxvZzpmdW5jdGlvbihlKXtlLmRwRGl2LnJlbW92ZUNsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKS51bmJpbmQoXCIudWktZGF0ZXBpY2tlci1jYWxlbmRhclwiKX0sX2NoZWNrRXh0ZXJuYWxDbGljazpmdW5jdGlvbih0KXtpZihlLmRhdGVwaWNrZXIuX2N1ckluc3Qpe3ZhciBpPWUodC50YXJnZXQpLHM9ZS5kYXRlcGlja2VyLl9nZXRJbnN0KGlbMF0pOyhpWzBdLmlkIT09ZS5kYXRlcGlja2VyLl9tYWluRGl2SWQmJjA9PT1pLnBhcmVudHMoXCIjXCIrZS5kYXRlcGlja2VyLl9tYWluRGl2SWQpLmxlbmd0aCYmIWkuaGFzQ2xhc3MoZS5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkmJiFpLmNsb3Nlc3QoXCIuXCIrZS5kYXRlcGlja2VyLl90cmlnZ2VyQ2xhc3MpLmxlbmd0aCYmZS5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmKCFlLmRhdGVwaWNrZXIuX2luRGlhbG9nfHwhZS5ibG9ja1VJKXx8aS5oYXNDbGFzcyhlLmRhdGVwaWNrZXIubWFya2VyQ2xhc3NOYW1lKSYmZS5kYXRlcGlja2VyLl9jdXJJbnN0IT09cykmJmUuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKX19LF9hZGp1c3REYXRlOmZ1bmN0aW9uKHQsaSxzKXt2YXIgbj1lKHQpLGE9dGhpcy5fZ2V0SW5zdChuWzBdKTt0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihuWzBdKXx8KHRoaXMuX2FkanVzdEluc3REYXRlKGEsaSsoXCJNXCI9PT1zP3RoaXMuX2dldChhLFwic2hvd0N1cnJlbnRBdFBvc1wiKTowKSxzKSx0aGlzLl91cGRhdGVEYXRlcGlja2VyKGEpKX0sX2dvdG9Ub2RheTpmdW5jdGlvbih0KXt2YXIgaSxzPWUodCksbj10aGlzLl9nZXRJbnN0KHNbMF0pO3RoaXMuX2dldChuLFwiZ290b0N1cnJlbnRcIikmJm4uY3VycmVudERheT8obi5zZWxlY3RlZERheT1uLmN1cnJlbnREYXksbi5kcmF3TW9udGg9bi5zZWxlY3RlZE1vbnRoPW4uY3VycmVudE1vbnRoLG4uZHJhd1llYXI9bi5zZWxlY3RlZFllYXI9bi5jdXJyZW50WWVhcik6KGk9bmV3IERhdGUsbi5zZWxlY3RlZERheT1pLmdldERhdGUoKSxuLmRyYXdNb250aD1uLnNlbGVjdGVkTW9udGg9aS5nZXRNb250aCgpLG4uZHJhd1llYXI9bi5zZWxlY3RlZFllYXI9aS5nZXRGdWxsWWVhcigpKSx0aGlzLl9ub3RpZnlDaGFuZ2UobiksdGhpcy5fYWRqdXN0RGF0ZShzKX0sX3NlbGVjdE1vbnRoWWVhcjpmdW5jdGlvbih0LGkscyl7dmFyIG49ZSh0KSxhPXRoaXMuX2dldEluc3QoblswXSk7YVtcInNlbGVjdGVkXCIrKFwiTVwiPT09cz9cIk1vbnRoXCI6XCJZZWFyXCIpXT1hW1wiZHJhd1wiKyhcIk1cIj09PXM/XCJNb250aFwiOlwiWWVhclwiKV09cGFyc2VJbnQoaS5vcHRpb25zW2kuc2VsZWN0ZWRJbmRleF0udmFsdWUsMTApLHRoaXMuX25vdGlmeUNoYW5nZShhKSx0aGlzLl9hZGp1c3REYXRlKG4pfSxfc2VsZWN0RGF5OmZ1bmN0aW9uKHQsaSxzLG4pe3ZhciBhLG89ZSh0KTtlKG4pLmhhc0NsYXNzKHRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzKXx8dGhpcy5faXNEaXNhYmxlZERhdGVwaWNrZXIob1swXSl8fChhPXRoaXMuX2dldEluc3Qob1swXSksYS5zZWxlY3RlZERheT1hLmN1cnJlbnREYXk9ZShcImFcIixuKS5odG1sKCksYS5zZWxlY3RlZE1vbnRoPWEuY3VycmVudE1vbnRoPWksYS5zZWxlY3RlZFllYXI9YS5jdXJyZW50WWVhcj1zLHRoaXMuX3NlbGVjdERhdGUodCx0aGlzLl9mb3JtYXREYXRlKGEsYS5jdXJyZW50RGF5LGEuY3VycmVudE1vbnRoLGEuY3VycmVudFllYXIpKSl9LF9jbGVhckRhdGU6ZnVuY3Rpb24odCl7dmFyIGk9ZSh0KTt0aGlzLl9zZWxlY3REYXRlKGksXCJcIil9LF9zZWxlY3REYXRlOmZ1bmN0aW9uKHQsaSl7dmFyIHMsbj1lKHQpLGE9dGhpcy5fZ2V0SW5zdChuWzBdKTtpPW51bGwhPWk/aTp0aGlzLl9mb3JtYXREYXRlKGEpLGEuaW5wdXQmJmEuaW5wdXQudmFsKGkpLHRoaXMuX3VwZGF0ZUFsdGVybmF0ZShhKSxzPXRoaXMuX2dldChhLFwib25TZWxlY3RcIikscz9zLmFwcGx5KGEuaW5wdXQ/YS5pbnB1dFswXTpudWxsLFtpLGFdKTphLmlucHV0JiZhLmlucHV0LnRyaWdnZXIoXCJjaGFuZ2VcIiksYS5pbmxpbmU/dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihhKToodGhpcy5faGlkZURhdGVwaWNrZXIoKSx0aGlzLl9sYXN0SW5wdXQ9YS5pbnB1dFswXSxcIm9iamVjdFwiIT10eXBlb2YgYS5pbnB1dFswXSYmYS5pbnB1dC5mb2N1cygpLHRoaXMuX2xhc3RJbnB1dD1udWxsKX0sX3VwZGF0ZUFsdGVybmF0ZTpmdW5jdGlvbih0KXt2YXIgaSxzLG4sYT10aGlzLl9nZXQodCxcImFsdEZpZWxkXCIpO2EmJihpPXRoaXMuX2dldCh0LFwiYWx0Rm9ybWF0XCIpfHx0aGlzLl9nZXQodCxcImRhdGVGb3JtYXRcIikscz10aGlzLl9nZXREYXRlKHQpLG49dGhpcy5mb3JtYXREYXRlKGkscyx0aGlzLl9nZXRGb3JtYXRDb25maWcodCkpLGUoYSkuZWFjaChmdW5jdGlvbigpe2UodGhpcykudmFsKG4pfSkpfSxub1dlZWtlbmRzOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0RGF5KCk7cmV0dXJuW3Q+MCYmNj50LFwiXCJdfSxpc284NjAxV2VlazpmdW5jdGlvbihlKXt2YXIgdCxpPW5ldyBEYXRlKGUuZ2V0VGltZSgpKTtyZXR1cm4gaS5zZXREYXRlKGkuZ2V0RGF0ZSgpKzQtKGkuZ2V0RGF5KCl8fDcpKSx0PWkuZ2V0VGltZSgpLGkuc2V0TW9udGgoMCksaS5zZXREYXRlKDEpLE1hdGguZmxvb3IoTWF0aC5yb3VuZCgodC1pKS84NjRlNSkvNykrMX0scGFyc2VEYXRlOmZ1bmN0aW9uKHQsaSxzKXtpZihudWxsPT10fHxudWxsPT1pKXRocm93XCJJbnZhbGlkIGFyZ3VtZW50c1wiO2lmKGk9XCJvYmplY3RcIj09dHlwZW9mIGk/XCJcIitpOmkrXCJcIixcIlwiPT09aSlyZXR1cm4gbnVsbDt2YXIgbixhLG8scixoPTAsbD0ocz9zLnNob3J0WWVhckN1dG9mZjpudWxsKXx8dGhpcy5fZGVmYXVsdHMuc2hvcnRZZWFyQ3V0b2ZmLHU9XCJzdHJpbmdcIiE9dHlwZW9mIGw/bDoobmV3IERhdGUpLmdldEZ1bGxZZWFyKCklMTAwK3BhcnNlSW50KGwsMTApLGQ9KHM/cy5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LGM9KHM/cy5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMscD0ocz9zLm1vbnRoTmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LGY9KHM/cy5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLG09LTEsZz0tMSx2PS0xLHk9LTEsYj0hMSxfPWZ1bmN0aW9uKGUpe3ZhciBpPXQubGVuZ3RoPm4rMSYmdC5jaGFyQXQobisxKT09PWU7cmV0dXJuIGkmJm4rKyxpfSx4PWZ1bmN0aW9uKGUpe3ZhciB0PV8oZSkscz1cIkBcIj09PWU/MTQ6XCIhXCI9PT1lPzIwOlwieVwiPT09ZSYmdD80Olwib1wiPT09ZT8zOjIsbj1cInlcIj09PWU/czoxLGE9UmVnRXhwKFwiXlxcXFxke1wiK24rXCIsXCIrcytcIn1cIiksbz1pLnN1YnN0cmluZyhoKS5tYXRjaChhKTtpZighbyl0aHJvd1wiTWlzc2luZyBudW1iZXIgYXQgcG9zaXRpb24gXCIraDtyZXR1cm4gaCs9b1swXS5sZW5ndGgscGFyc2VJbnQob1swXSwxMCl9LHc9ZnVuY3Rpb24odCxzLG4pe3ZhciBhPS0xLG89ZS5tYXAoXyh0KT9uOnMsZnVuY3Rpb24oZSx0KXtyZXR1cm5bW3QsZV1dfSkuc29ydChmdW5jdGlvbihlLHQpe3JldHVybi0oZVsxXS5sZW5ndGgtdFsxXS5sZW5ndGgpfSk7aWYoZS5lYWNoKG8sZnVuY3Rpb24oZSx0KXt2YXIgcz10WzFdO3JldHVybiBpLnN1YnN0cihoLHMubGVuZ3RoKS50b0xvd2VyQ2FzZSgpPT09cy50b0xvd2VyQ2FzZSgpPyhhPXRbMF0saCs9cy5sZW5ndGgsITEpOnZvaWQgMH0pLC0xIT09YSlyZXR1cm4gYSsxO3Rocm93XCJVbmtub3duIG5hbWUgYXQgcG9zaXRpb24gXCIraH0saz1mdW5jdGlvbigpe2lmKGkuY2hhckF0KGgpIT09dC5jaGFyQXQobikpdGhyb3dcIlVuZXhwZWN0ZWQgbGl0ZXJhbCBhdCBwb3NpdGlvbiBcIitoO2grK307Zm9yKG49MDt0Lmxlbmd0aD5uO24rKylpZihiKVwiJ1wiIT09dC5jaGFyQXQobil8fF8oXCInXCIpP2soKTpiPSExO2Vsc2Ugc3dpdGNoKHQuY2hhckF0KG4pKXtjYXNlXCJkXCI6dj14KFwiZFwiKTticmVhaztjYXNlXCJEXCI6dyhcIkRcIixkLGMpO2JyZWFrO2Nhc2VcIm9cIjp5PXgoXCJvXCIpO2JyZWFrO2Nhc2VcIm1cIjpnPXgoXCJtXCIpO2JyZWFrO2Nhc2VcIk1cIjpnPXcoXCJNXCIscCxmKTticmVhaztjYXNlXCJ5XCI6bT14KFwieVwiKTticmVhaztjYXNlXCJAXCI6cj1uZXcgRGF0ZSh4KFwiQFwiKSksbT1yLmdldEZ1bGxZZWFyKCksZz1yLmdldE1vbnRoKCkrMSx2PXIuZ2V0RGF0ZSgpO2JyZWFrO2Nhc2VcIiFcIjpyPW5ldyBEYXRlKCh4KFwiIVwiKS10aGlzLl90aWNrc1RvMTk3MCkvMWU0KSxtPXIuZ2V0RnVsbFllYXIoKSxnPXIuZ2V0TW9udGgoKSsxLHY9ci5nZXREYXRlKCk7YnJlYWs7Y2FzZVwiJ1wiOl8oXCInXCIpP2soKTpiPSEwO2JyZWFrO2RlZmF1bHQ6aygpfWlmKGkubGVuZ3RoPmgmJihvPWkuc3Vic3RyKGgpLCEvXlxccysvLnRlc3QobykpKXRocm93XCJFeHRyYS91bnBhcnNlZCBjaGFyYWN0ZXJzIGZvdW5kIGluIGRhdGU6IFwiK287aWYoLTE9PT1tP209KG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpOjEwMD5tJiYobSs9KG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpLShuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSUxMDArKHU+PW0/MDotMTAwKSkseT4tMSlmb3IoZz0xLHY9eTs7KXtpZihhPXRoaXMuX2dldERheXNJbk1vbnRoKG0sZy0xKSxhPj12KWJyZWFrO2crKyx2LT1hfWlmKHI9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUobSxnLTEsdikpLHIuZ2V0RnVsbFllYXIoKSE9PW18fHIuZ2V0TW9udGgoKSsxIT09Z3x8ci5nZXREYXRlKCkhPT12KXRocm93XCJJbnZhbGlkIGRhdGVcIjtyZXR1cm4gcn0sQVRPTTpcInl5LW1tLWRkXCIsQ09PS0lFOlwiRCwgZGQgTSB5eVwiLElTT184NjAxOlwieXktbW0tZGRcIixSRkNfODIyOlwiRCwgZCBNIHlcIixSRkNfODUwOlwiREQsIGRkLU0teVwiLFJGQ18xMDM2OlwiRCwgZCBNIHlcIixSRkNfMTEyMzpcIkQsIGQgTSB5eVwiLFJGQ18yODIyOlwiRCwgZCBNIHl5XCIsUlNTOlwiRCwgZCBNIHlcIixUSUNLUzpcIiFcIixUSU1FU1RBTVA6XCJAXCIsVzNDOlwieXktbW0tZGRcIixfdGlja3NUbzE5NzA6MWU3KjYwKjYwKjI0Kig3MTg2ODUrTWF0aC5mbG9vcig0OTIuNSktTWF0aC5mbG9vcigxOS43KStNYXRoLmZsb29yKDQuOTI1KSksZm9ybWF0RGF0ZTpmdW5jdGlvbihlLHQsaSl7aWYoIXQpcmV0dXJuXCJcIjt2YXIgcyxuPShpP2kuZGF5TmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXNTaG9ydCxhPShpP2kuZGF5TmFtZXM6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzLG89KGk/aS5tb250aE5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydCxyPShpP2kubW9udGhOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lcyxoPWZ1bmN0aW9uKHQpe3ZhciBpPWUubGVuZ3RoPnMrMSYmZS5jaGFyQXQocysxKT09PXQ7cmV0dXJuIGkmJnMrKyxpfSxsPWZ1bmN0aW9uKGUsdCxpKXt2YXIgcz1cIlwiK3Q7aWYoaChlKSlmb3IoO2k+cy5sZW5ndGg7KXM9XCIwXCIrcztyZXR1cm4gc30sdT1mdW5jdGlvbihlLHQsaSxzKXtyZXR1cm4gaChlKT9zW3RdOmlbdF19LGQ9XCJcIixjPSExO2lmKHQpZm9yKHM9MDtlLmxlbmd0aD5zO3MrKylpZihjKVwiJ1wiIT09ZS5jaGFyQXQocyl8fGgoXCInXCIpP2QrPWUuY2hhckF0KHMpOmM9ITE7ZWxzZSBzd2l0Y2goZS5jaGFyQXQocykpe2Nhc2VcImRcIjpkKz1sKFwiZFwiLHQuZ2V0RGF0ZSgpLDIpO2JyZWFrO2Nhc2VcIkRcIjpkKz11KFwiRFwiLHQuZ2V0RGF5KCksbixhKTticmVhaztjYXNlXCJvXCI6ZCs9bChcIm9cIixNYXRoLnJvdW5kKChuZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLHQuZ2V0RGF0ZSgpKS5nZXRUaW1lKCktbmV3IERhdGUodC5nZXRGdWxsWWVhcigpLDAsMCkuZ2V0VGltZSgpKS84NjRlNSksMyk7YnJlYWs7Y2FzZVwibVwiOmQrPWwoXCJtXCIsdC5nZXRNb250aCgpKzEsMik7YnJlYWs7Y2FzZVwiTVwiOmQrPXUoXCJNXCIsdC5nZXRNb250aCgpLG8scik7YnJlYWs7Y2FzZVwieVwiOmQrPWgoXCJ5XCIpP3QuZ2V0RnVsbFllYXIoKTooMTA+dC5nZXRZZWFyKCklMTAwP1wiMFwiOlwiXCIpK3QuZ2V0WWVhcigpJTEwMDticmVhaztjYXNlXCJAXCI6ZCs9dC5nZXRUaW1lKCk7YnJlYWs7Y2FzZVwiIVwiOmQrPTFlNCp0LmdldFRpbWUoKSt0aGlzLl90aWNrc1RvMTk3MDticmVhaztjYXNlXCInXCI6aChcIidcIik/ZCs9XCInXCI6Yz0hMDticmVhaztkZWZhdWx0OmQrPWUuY2hhckF0KHMpfXJldHVybiBkfSxfcG9zc2libGVDaGFyczpmdW5jdGlvbihlKXt2YXIgdCxpPVwiXCIscz0hMSxuPWZ1bmN0aW9uKGkpe3ZhciBzPWUubGVuZ3RoPnQrMSYmZS5jaGFyQXQodCsxKT09PWk7cmV0dXJuIHMmJnQrKyxzfTtmb3IodD0wO2UubGVuZ3RoPnQ7dCsrKWlmKHMpXCInXCIhPT1lLmNoYXJBdCh0KXx8bihcIidcIik/aSs9ZS5jaGFyQXQodCk6cz0hMTtlbHNlIHN3aXRjaChlLmNoYXJBdCh0KSl7Y2FzZVwiZFwiOmNhc2VcIm1cIjpjYXNlXCJ5XCI6Y2FzZVwiQFwiOmkrPVwiMDEyMzQ1Njc4OVwiO2JyZWFrO2Nhc2VcIkRcIjpjYXNlXCJNXCI6cmV0dXJuIG51bGw7Y2FzZVwiJ1wiOm4oXCInXCIpP2krPVwiJ1wiOnM9ITA7YnJlYWs7ZGVmYXVsdDppKz1lLmNoYXJBdCh0KX1yZXR1cm4gaX0sX2dldDpmdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDAhPT1lLnNldHRpbmdzW3RdP2Uuc2V0dGluZ3NbdF06dGhpcy5fZGVmYXVsdHNbdF19LF9zZXREYXRlRnJvbUZpZWxkOmZ1bmN0aW9uKGUsdCl7aWYoZS5pbnB1dC52YWwoKSE9PWUubGFzdFZhbCl7dmFyIGk9dGhpcy5fZ2V0KGUsXCJkYXRlRm9ybWF0XCIpLHM9ZS5sYXN0VmFsPWUuaW5wdXQ/ZS5pbnB1dC52YWwoKTpudWxsLG49dGhpcy5fZ2V0RGVmYXVsdERhdGUoZSksYT1uLG89dGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGUpO3RyeXthPXRoaXMucGFyc2VEYXRlKGkscyxvKXx8bn1jYXRjaChyKXtzPXQ/XCJcIjpzfWUuc2VsZWN0ZWREYXk9YS5nZXREYXRlKCksZS5kcmF3TW9udGg9ZS5zZWxlY3RlZE1vbnRoPWEuZ2V0TW9udGgoKSxlLmRyYXdZZWFyPWUuc2VsZWN0ZWRZZWFyPWEuZ2V0RnVsbFllYXIoKSxlLmN1cnJlbnREYXk9cz9hLmdldERhdGUoKTowLGUuY3VycmVudE1vbnRoPXM/YS5nZXRNb250aCgpOjAsZS5jdXJyZW50WWVhcj1zP2EuZ2V0RnVsbFllYXIoKTowLHRoaXMuX2FkanVzdEluc3REYXRlKGUpfX0sX2dldERlZmF1bHREYXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9yZXN0cmljdE1pbk1heChlLHRoaXMuX2RldGVybWluZURhdGUoZSx0aGlzLl9nZXQoZSxcImRlZmF1bHREYXRlXCIpLG5ldyBEYXRlKSl9LF9kZXRlcm1pbmVEYXRlOmZ1bmN0aW9uKHQsaSxzKXt2YXIgbj1mdW5jdGlvbihlKXt2YXIgdD1uZXcgRGF0ZTtyZXR1cm4gdC5zZXREYXRlKHQuZ2V0RGF0ZSgpK2UpLHR9LGE9ZnVuY3Rpb24oaSl7dHJ5e3JldHVybiBlLmRhdGVwaWNrZXIucGFyc2VEYXRlKGUuZGF0ZXBpY2tlci5fZ2V0KHQsXCJkYXRlRm9ybWF0XCIpLGksZS5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcodCkpfWNhdGNoKHMpe31mb3IodmFyIG49KGkudG9Mb3dlckNhc2UoKS5tYXRjaCgvXmMvKT9lLmRhdGVwaWNrZXIuX2dldERhdGUodCk6bnVsbCl8fG5ldyBEYXRlLGE9bi5nZXRGdWxsWWVhcigpLG89bi5nZXRNb250aCgpLHI9bi5nZXREYXRlKCksaD0vKFsrXFwtXT9bMC05XSspXFxzKihkfER8d3xXfG18TXx5fFkpPy9nLGw9aC5leGVjKGkpO2w7KXtzd2l0Y2gobFsyXXx8XCJkXCIpe2Nhc2VcImRcIjpjYXNlXCJEXCI6cis9cGFyc2VJbnQobFsxXSwxMCk7YnJlYWs7Y2FzZVwid1wiOmNhc2VcIldcIjpyKz03KnBhcnNlSW50KGxbMV0sMTApO2JyZWFrO2Nhc2VcIm1cIjpjYXNlXCJNXCI6bys9cGFyc2VJbnQobFsxXSwxMCkscj1NYXRoLm1pbihyLGUuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgoYSxvKSk7YnJlYWs7Y2FzZVwieVwiOmNhc2VcIllcIjphKz1wYXJzZUludChsWzFdLDEwKSxyPU1hdGgubWluKHIsZS5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aChhLG8pKX1sPWguZXhlYyhpKX1yZXR1cm4gbmV3IERhdGUoYSxvLHIpfSxvPW51bGw9PWl8fFwiXCI9PT1pP3M6XCJzdHJpbmdcIj09dHlwZW9mIGk/YShpKTpcIm51bWJlclwiPT10eXBlb2YgaT9pc05hTihpKT9zOm4oaSk6bmV3IERhdGUoaS5nZXRUaW1lKCkpO3JldHVybiBvPW8mJlwiSW52YWxpZCBEYXRlXCI9PVwiXCIrbz9zOm8sbyYmKG8uc2V0SG91cnMoMCksby5zZXRNaW51dGVzKDApLG8uc2V0U2Vjb25kcygwKSxvLnNldE1pbGxpc2Vjb25kcygwKSksdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3Qobyl9LF9kYXlsaWdodFNhdmluZ0FkanVzdDpmdW5jdGlvbihlKXtyZXR1cm4gZT8oZS5zZXRIb3VycyhlLmdldEhvdXJzKCk+MTI/ZS5nZXRIb3VycygpKzI6MCksZSk6bnVsbH0sX3NldERhdGU6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPSF0LG49ZS5zZWxlY3RlZE1vbnRoLGE9ZS5zZWxlY3RlZFllYXIsbz10aGlzLl9yZXN0cmljdE1pbk1heChlLHRoaXMuX2RldGVybWluZURhdGUoZSx0LG5ldyBEYXRlKSk7ZS5zZWxlY3RlZERheT1lLmN1cnJlbnREYXk9by5nZXREYXRlKCksZS5kcmF3TW9udGg9ZS5zZWxlY3RlZE1vbnRoPWUuY3VycmVudE1vbnRoPW8uZ2V0TW9udGgoKSxlLmRyYXdZZWFyPWUuc2VsZWN0ZWRZZWFyPWUuY3VycmVudFllYXI9by5nZXRGdWxsWWVhcigpLG49PT1lLnNlbGVjdGVkTW9udGgmJmE9PT1lLnNlbGVjdGVkWWVhcnx8aXx8dGhpcy5fbm90aWZ5Q2hhbmdlKGUpLHRoaXMuX2FkanVzdEluc3REYXRlKGUpLGUuaW5wdXQmJmUuaW5wdXQudmFsKHM/XCJcIjp0aGlzLl9mb3JtYXREYXRlKGUpKX0sX2dldERhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9IWUuY3VycmVudFllYXJ8fGUuaW5wdXQmJlwiXCI9PT1lLmlucHV0LnZhbCgpP251bGw6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZS5jdXJyZW50WWVhcixlLmN1cnJlbnRNb250aCxlLmN1cnJlbnREYXkpKTtyZXR1cm4gdH0sX2F0dGFjaEhhbmRsZXJzOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX2dldCh0LFwic3RlcE1vbnRoc1wiKSxzPVwiI1wiK3QuaWQucmVwbGFjZSgvXFxcXFxcXFwvZyxcIlxcXFxcIik7dC5kcERpdi5maW5kKFwiW2RhdGEtaGFuZGxlcl1cIikubWFwKGZ1bmN0aW9uKCl7dmFyIHQ9e3ByZXY6ZnVuY3Rpb24oKXtlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUocywtaSxcIk1cIil9LG5leHQ6ZnVuY3Rpb24oKXtlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUocywraSxcIk1cIil9LGhpZGU6ZnVuY3Rpb24oKXtlLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9LHRvZGF5OmZ1bmN0aW9uKCl7ZS5kYXRlcGlja2VyLl9nb3RvVG9kYXkocyl9LHNlbGVjdERheTpmdW5jdGlvbigpe3JldHVybiBlLmRhdGVwaWNrZXIuX3NlbGVjdERheShzLCt0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtbW9udGhcIiksK3RoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS15ZWFyXCIpLHRoaXMpLCExfSxzZWxlY3RNb250aDpmdW5jdGlvbigpe3JldHVybiBlLmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihzLHRoaXMsXCJNXCIpLCExfSxzZWxlY3RZZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKHMsdGhpcyxcIllcIiksITF9fTtlKHRoaXMpLmJpbmQodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWV2ZW50XCIpLHRbdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhhbmRsZXJcIildKX0pfSxfZ2VuZXJhdGVIVE1MOmZ1bmN0aW9uKGUpe3ZhciB0LGkscyxuLGEsbyxyLGgsbCx1LGQsYyxwLGYsbSxnLHYseSxiLF8seCx3LGssVCxELFMsTSxDLE4sQSxQLEksSCx6LEYsRSxPLGosVyxMPW5ldyBEYXRlLFI9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoTC5nZXRGdWxsWWVhcigpLEwuZ2V0TW9udGgoKSxMLmdldERhdGUoKSkpLFk9dGhpcy5fZ2V0KGUsXCJpc1JUTFwiKSxCPXRoaXMuX2dldChlLFwic2hvd0J1dHRvblBhbmVsXCIpLEo9dGhpcy5fZ2V0KGUsXCJoaWRlSWZOb1ByZXZOZXh0XCIpLHE9dGhpcy5fZ2V0KGUsXCJuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0XCIpLEs9dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoZSksVj10aGlzLl9nZXQoZSxcInNob3dDdXJyZW50QXRQb3NcIiksVT10aGlzLl9nZXQoZSxcInN0ZXBNb250aHNcIiksUT0xIT09S1swXXx8MSE9PUtbMV0sRz10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChlLmN1cnJlbnREYXk/bmV3IERhdGUoZS5jdXJyZW50WWVhcixlLmN1cnJlbnRNb250aCxlLmN1cnJlbnREYXkpOm5ldyBEYXRlKDk5OTksOSw5KSksWD10aGlzLl9nZXRNaW5NYXhEYXRlKGUsXCJtaW5cIiksJD10aGlzLl9nZXRNaW5NYXhEYXRlKGUsXCJtYXhcIiksWj1lLmRyYXdNb250aC1WLGV0PWUuZHJhd1llYXI7aWYoMD5aJiYoWis9MTIsZXQtLSksJClmb3IodD10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSgkLmdldEZ1bGxZZWFyKCksJC5nZXRNb250aCgpLUtbMF0qS1sxXSsxLCQuZ2V0RGF0ZSgpKSksdD1YJiZYPnQ/WDp0O3RoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGV0LFosMSkpPnQ7KVotLSwwPlomJihaPTExLGV0LS0pO2ZvcihlLmRyYXdNb250aD1aLGUuZHJhd1llYXI9ZXQsaT10aGlzLl9nZXQoZSxcInByZXZUZXh0XCIpLGk9cT90aGlzLmZvcm1hdERhdGUoaSx0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShldCxaLVUsMSkpLHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSk6aSxzPXRoaXMuX2NhbkFkanVzdE1vbnRoKGUsLTEsZXQsWik/XCI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ncHJldicgZGF0YS1ldmVudD0nY2xpY2snIHRpdGxlPSdcIitpK1wiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS1cIisoWT9cImVcIjpcIndcIikrXCInPlwiK2krXCI8L3NwYW4+PC9hPlwiOko/XCJcIjpcIjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1kaXNhYmxlZCcgdGl0bGU9J1wiK2krXCInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLVwiKyhZP1wiZVwiOlwid1wiKStcIic+XCIraStcIjwvc3Bhbj48L2E+XCIsbj10aGlzLl9nZXQoZSxcIm5leHRUZXh0XCIpLG49cT90aGlzLmZvcm1hdERhdGUobix0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShldCxaK1UsMSkpLHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSk6bixhPXRoaXMuX2NhbkFkanVzdE1vbnRoKGUsMSxldCxaKT9cIjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLW5leHQgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSduZXh0JyBkYXRhLWV2ZW50PSdjbGljaycgdGl0bGU9J1wiK24rXCInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLVwiKyhZP1wid1wiOlwiZVwiKStcIic+XCIrbitcIjwvc3Bhbj48L2E+XCI6Sj9cIlwiOlwiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkJyB0aXRsZT0nXCIrbitcIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtXCIrKFk/XCJ3XCI6XCJlXCIpK1wiJz5cIituK1wiPC9zcGFuPjwvYT5cIixvPXRoaXMuX2dldChlLFwiY3VycmVudFRleHRcIikscj10aGlzLl9nZXQoZSxcImdvdG9DdXJyZW50XCIpJiZlLmN1cnJlbnREYXk/RzpSLG89cT90aGlzLmZvcm1hdERhdGUobyxyLHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSk6byxoPWUuaW5saW5lP1wiXCI6XCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3VpLWRhdGVwaWNrZXItY2xvc2UgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1wcmltYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0naGlkZScgZGF0YS1ldmVudD0nY2xpY2snPlwiK3RoaXMuX2dldChlLFwiY2xvc2VUZXh0XCIpK1wiPC9idXR0b24+XCIsbD1CP1wiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1idXR0b25wYW5lIHVpLXdpZGdldC1jb250ZW50Jz5cIisoWT9oOlwiXCIpKyh0aGlzLl9pc0luUmFuZ2UoZSxyKT9cIjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0ndWktZGF0ZXBpY2tlci1jdXJyZW50IHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktc2Vjb25kYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ndG9kYXknIGRhdGEtZXZlbnQ9J2NsaWNrJz5cIitvK1wiPC9idXR0b24+XCI6XCJcIikrKFk/XCJcIjpoKStcIjwvZGl2PlwiOlwiXCIsdT1wYXJzZUludCh0aGlzLl9nZXQoZSxcImZpcnN0RGF5XCIpLDEwKSx1PWlzTmFOKHUpPzA6dSxkPXRoaXMuX2dldChlLFwic2hvd1dlZWtcIiksYz10aGlzLl9nZXQoZSxcImRheU5hbWVzXCIpLHA9dGhpcy5fZ2V0KGUsXCJkYXlOYW1lc01pblwiKSxmPXRoaXMuX2dldChlLFwibW9udGhOYW1lc1wiKSxtPXRoaXMuX2dldChlLFwibW9udGhOYW1lc1Nob3J0XCIpLGc9dGhpcy5fZ2V0KGUsXCJiZWZvcmVTaG93RGF5XCIpLHY9dGhpcy5fZ2V0KGUsXCJzaG93T3RoZXJNb250aHNcIikseT10aGlzLl9nZXQoZSxcInNlbGVjdE90aGVyTW9udGhzXCIpLGI9dGhpcy5fZ2V0RGVmYXVsdERhdGUoZSksXz1cIlwiLHc9MDtLWzBdPnc7dysrKXtmb3Ioaz1cIlwiLHRoaXMubWF4Um93cz00LFQ9MDtLWzFdPlQ7VCsrKXtpZihEPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGV0LFosZS5zZWxlY3RlZERheSkpLFM9XCIgdWktY29ybmVyLWFsbFwiLE09XCJcIixRKXtpZihNKz1cIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItZ3JvdXBcIixLWzFdPjEpc3dpdGNoKFQpe2Nhc2UgMDpNKz1cIiB1aS1kYXRlcGlja2VyLWdyb3VwLWZpcnN0XCIsUz1cIiB1aS1jb3JuZXItXCIrKFk/XCJyaWdodFwiOlwibGVmdFwiKTticmVhaztjYXNlIEtbMV0tMTpNKz1cIiB1aS1kYXRlcGlja2VyLWdyb3VwLWxhc3RcIixTPVwiIHVpLWNvcm5lci1cIisoWT9cImxlZnRcIjpcInJpZ2h0XCIpO2JyZWFrO2RlZmF1bHQ6TSs9XCIgdWktZGF0ZXBpY2tlci1ncm91cC1taWRkbGVcIixTPVwiXCJ9TSs9XCInPlwifWZvcihNKz1cIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItaGVhZGVyIHVpLXdpZGdldC1oZWFkZXIgdWktaGVscGVyLWNsZWFyZml4XCIrUytcIic+XCIrKC9hbGx8bGVmdC8udGVzdChTKSYmMD09PXc/WT9hOnM6XCJcIikrKC9hbGx8cmlnaHQvLnRlc3QoUykmJjA9PT13P1k/czphOlwiXCIpK3RoaXMuX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyKGUsWixldCxYLCQsdz4wfHxUPjAsZixtKStcIjwvZGl2Pjx0YWJsZSBjbGFzcz0ndWktZGF0ZXBpY2tlci1jYWxlbmRhcic+PHRoZWFkPlwiK1wiPHRyPlwiLEM9ZD9cIjx0aCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+XCIrdGhpcy5fZ2V0KGUsXCJ3ZWVrSGVhZGVyXCIpK1wiPC90aD5cIjpcIlwiLHg9MDs3Png7eCsrKU49KHgrdSklNyxDKz1cIjx0aCBzY29wZT0nY29sJ1wiKygoeCt1KzYpJTc+PTU/XCIgY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1lbmQnXCI6XCJcIikrXCI+XCIrXCI8c3BhbiB0aXRsZT0nXCIrY1tOXStcIic+XCIrcFtOXStcIjwvc3Bhbj48L3RoPlwiO2ZvcihNKz1DK1wiPC90cj48L3RoZWFkPjx0Ym9keT5cIixBPXRoaXMuX2dldERheXNJbk1vbnRoKGV0LFopLGV0PT09ZS5zZWxlY3RlZFllYXImJlo9PT1lLnNlbGVjdGVkTW9udGgmJihlLnNlbGVjdGVkRGF5PU1hdGgubWluKGUuc2VsZWN0ZWREYXksQSkpLFA9KHRoaXMuX2dldEZpcnN0RGF5T2ZNb250aChldCxaKS11KzcpJTcsST1NYXRoLmNlaWwoKFArQSkvNyksSD1RP3RoaXMubWF4Um93cz5JP3RoaXMubWF4Um93czpJOkksdGhpcy5tYXhSb3dzPUgsej10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShldCxaLDEtUCkpLEY9MDtIPkY7RisrKXtmb3IoTSs9XCI8dHI+XCIsRT1kP1wiPHRkIGNsYXNzPSd1aS1kYXRlcGlja2VyLXdlZWstY29sJz5cIit0aGlzLl9nZXQoZSxcImNhbGN1bGF0ZVdlZWtcIikoeikrXCI8L3RkPlwiOlwiXCIseD0wOzc+eDt4KyspTz1nP2cuYXBwbHkoZS5pbnB1dD9lLmlucHV0WzBdOm51bGwsW3pdKTpbITAsXCJcIl0saj16LmdldE1vbnRoKCkhPT1aLFc9aiYmIXl8fCFPWzBdfHxYJiZYPnp8fCQmJno+JCxFKz1cIjx0ZCBjbGFzcz0nXCIrKCh4K3UrNiklNz49NT9cIiB1aS1kYXRlcGlja2VyLXdlZWstZW5kXCI6XCJcIikrKGo/XCIgdWktZGF0ZXBpY2tlci1vdGhlci1tb250aFwiOlwiXCIpKyh6LmdldFRpbWUoKT09PUQuZ2V0VGltZSgpJiZaPT09ZS5zZWxlY3RlZE1vbnRoJiZlLl9rZXlFdmVudHx8Yi5nZXRUaW1lKCk9PT16LmdldFRpbWUoKSYmYi5nZXRUaW1lKCk9PT1ELmdldFRpbWUoKT9cIiBcIit0aGlzLl9kYXlPdmVyQ2xhc3M6XCJcIikrKFc/XCIgXCIrdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MrXCIgdWktc3RhdGUtZGlzYWJsZWRcIjpcIlwiKSsoaiYmIXY/XCJcIjpcIiBcIitPWzFdKyh6LmdldFRpbWUoKT09PUcuZ2V0VGltZSgpP1wiIFwiK3RoaXMuX2N1cnJlbnRDbGFzczpcIlwiKSsoei5nZXRUaW1lKCk9PT1SLmdldFRpbWUoKT9cIiB1aS1kYXRlcGlja2VyLXRvZGF5XCI6XCJcIikpK1wiJ1wiKyhqJiYhdnx8IU9bMl0/XCJcIjpcIiB0aXRsZT0nXCIrT1syXS5yZXBsYWNlKC8nL2csXCImIzM5O1wiKStcIidcIikrKFc/XCJcIjpcIiBkYXRhLWhhbmRsZXI9J3NlbGVjdERheScgZGF0YS1ldmVudD0nY2xpY2snIGRhdGEtbW9udGg9J1wiK3ouZ2V0TW9udGgoKStcIicgZGF0YS15ZWFyPSdcIit6LmdldEZ1bGxZZWFyKCkrXCInXCIpK1wiPlwiKyhqJiYhdj9cIiYjeGEwO1wiOlc/XCI8c3BhbiBjbGFzcz0ndWktc3RhdGUtZGVmYXVsdCc+XCIrei5nZXREYXRlKCkrXCI8L3NwYW4+XCI6XCI8YSBjbGFzcz0ndWktc3RhdGUtZGVmYXVsdFwiKyh6LmdldFRpbWUoKT09PVIuZ2V0VGltZSgpP1wiIHVpLXN0YXRlLWhpZ2hsaWdodFwiOlwiXCIpKyh6LmdldFRpbWUoKT09PUcuZ2V0VGltZSgpP1wiIHVpLXN0YXRlLWFjdGl2ZVwiOlwiXCIpKyhqP1wiIHVpLXByaW9yaXR5LXNlY29uZGFyeVwiOlwiXCIpK1wiJyBocmVmPScjJz5cIit6LmdldERhdGUoKStcIjwvYT5cIikrXCI8L3RkPlwiLHouc2V0RGF0ZSh6LmdldERhdGUoKSsxKSx6PXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KHopO00rPUUrXCI8L3RyPlwifVorKyxaPjExJiYoWj0wLGV0KyspLE0rPVwiPC90Ym9keT48L3RhYmxlPlwiKyhRP1wiPC9kaXY+XCIrKEtbMF0+MCYmVD09PUtbMV0tMT9cIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItcm93LWJyZWFrJz48L2Rpdj5cIjpcIlwiKTpcIlwiKSxrKz1NfV8rPWt9cmV0dXJuIF8rPWwsZS5fa2V5RXZlbnQ9ITEsX30sX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyOmZ1bmN0aW9uKGUsdCxpLHMsbixhLG8scil7dmFyIGgsbCx1LGQsYyxwLGYsbSxnPXRoaXMuX2dldChlLFwiY2hhbmdlTW9udGhcIiksdj10aGlzLl9nZXQoZSxcImNoYW5nZVllYXJcIikseT10aGlzLl9nZXQoZSxcInNob3dNb250aEFmdGVyWWVhclwiKSxiPVwiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci10aXRsZSc+XCIsXz1cIlwiO2lmKGF8fCFnKV8rPVwiPHNwYW4gY2xhc3M9J3VpLWRhdGVwaWNrZXItbW9udGgnPlwiK29bdF0rXCI8L3NwYW4+XCI7ZWxzZXtmb3IoaD1zJiZzLmdldEZ1bGxZZWFyKCk9PT1pLGw9biYmbi5nZXRGdWxsWWVhcigpPT09aSxfKz1cIjxzZWxlY3QgY2xhc3M9J3VpLWRhdGVwaWNrZXItbW9udGgnIGRhdGEtaGFuZGxlcj0nc2VsZWN0TW9udGgnIGRhdGEtZXZlbnQ9J2NoYW5nZSc+XCIsdT0wOzEyPnU7dSsrKSghaHx8dT49cy5nZXRNb250aCgpKSYmKCFsfHxuLmdldE1vbnRoKCk+PXUpJiYoXys9XCI8b3B0aW9uIHZhbHVlPSdcIit1K1wiJ1wiKyh1PT09dD9cIiBzZWxlY3RlZD0nc2VsZWN0ZWQnXCI6XCJcIikrXCI+XCIrclt1XStcIjwvb3B0aW9uPlwiKTtfKz1cIjwvc2VsZWN0PlwifWlmKHl8fChiKz1fKyghYSYmZyYmdj9cIlwiOlwiJiN4YTA7XCIpKSwhZS55ZWFyc2h0bWwpaWYoZS55ZWFyc2h0bWw9XCJcIixhfHwhdiliKz1cIjxzcGFuIGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInPlwiK2krXCI8L3NwYW4+XCI7ZWxzZXtmb3IoZD10aGlzLl9nZXQoZSxcInllYXJSYW5nZVwiKS5zcGxpdChcIjpcIiksYz0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCkscD1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKC9jWytcXC1dLiovKT9pK3BhcnNlSW50KGUuc3Vic3RyaW5nKDEpLDEwKTplLm1hdGNoKC9bK1xcLV0uKi8pP2MrcGFyc2VJbnQoZSwxMCk6cGFyc2VJbnQoZSwxMCk7cmV0dXJuIGlzTmFOKHQpP2M6dH0sZj1wKGRbMF0pLG09TWF0aC5tYXgoZixwKGRbMV18fFwiXCIpKSxmPXM/TWF0aC5tYXgoZixzLmdldEZ1bGxZZWFyKCkpOmYsbT1uP01hdGgubWluKG0sbi5nZXRGdWxsWWVhcigpKTptLGUueWVhcnNodG1sKz1cIjxzZWxlY3QgY2xhc3M9J3VpLWRhdGVwaWNrZXIteWVhcicgZGF0YS1oYW5kbGVyPSdzZWxlY3RZZWFyJyBkYXRhLWV2ZW50PSdjaGFuZ2UnPlwiO20+PWY7ZisrKWUueWVhcnNodG1sKz1cIjxvcHRpb24gdmFsdWU9J1wiK2YrXCInXCIrKGY9PT1pP1wiIHNlbGVjdGVkPSdzZWxlY3RlZCdcIjpcIlwiKStcIj5cIitmK1wiPC9vcHRpb24+XCI7ZS55ZWFyc2h0bWwrPVwiPC9zZWxlY3Q+XCIsYis9ZS55ZWFyc2h0bWwsZS55ZWFyc2h0bWw9bnVsbH1yZXR1cm4gYis9dGhpcy5fZ2V0KGUsXCJ5ZWFyU3VmZml4XCIpLHkmJihiKz0oIWEmJmcmJnY/XCJcIjpcIiYjeGEwO1wiKStfKSxiKz1cIjwvZGl2PlwifSxfYWRqdXN0SW5zdERhdGU6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPWUuZHJhd1llYXIrKFwiWVwiPT09aT90OjApLG49ZS5kcmF3TW9udGgrKFwiTVwiPT09aT90OjApLGE9TWF0aC5taW4oZS5zZWxlY3RlZERheSx0aGlzLl9nZXREYXlzSW5Nb250aChzLG4pKSsoXCJEXCI9PT1pP3Q6MCksbz10aGlzLl9yZXN0cmljdE1pbk1heChlLHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHMsbixhKSkpO2Uuc2VsZWN0ZWREYXk9by5nZXREYXRlKCksZS5kcmF3TW9udGg9ZS5zZWxlY3RlZE1vbnRoPW8uZ2V0TW9udGgoKSxlLmRyYXdZZWFyPWUuc2VsZWN0ZWRZZWFyPW8uZ2V0RnVsbFllYXIoKSwoXCJNXCI9PT1pfHxcIllcIj09PWkpJiZ0aGlzLl9ub3RpZnlDaGFuZ2UoZSl9LF9yZXN0cmljdE1pbk1heDpmdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMuX2dldE1pbk1heERhdGUoZSxcIm1pblwiKSxzPXRoaXMuX2dldE1pbk1heERhdGUoZSxcIm1heFwiKSxuPWkmJmk+dD9pOnQ7cmV0dXJuIHMmJm4+cz9zOm59LF9ub3RpZnlDaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0KGUsXCJvbkNoYW5nZU1vbnRoWWVhclwiKTt0JiZ0LmFwcGx5KGUuaW5wdXQ/ZS5pbnB1dFswXTpudWxsLFtlLnNlbGVjdGVkWWVhcixlLnNlbGVjdGVkTW9udGgrMSxlXSl9LF9nZXROdW1iZXJPZk1vbnRoczpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXQoZSxcIm51bWJlck9mTW9udGhzXCIpO3JldHVybiBudWxsPT10P1sxLDFdOlwibnVtYmVyXCI9PXR5cGVvZiB0P1sxLHRdOnR9LF9nZXRNaW5NYXhEYXRlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2RldGVybWluZURhdGUoZSx0aGlzLl9nZXQoZSx0K1wiRGF0ZVwiKSxudWxsKX0sX2dldERheXNJbk1vbnRoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIDMyLXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGUsdCwzMikpLmdldERhdGUoKX0sX2dldEZpcnN0RGF5T2ZNb250aDpmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgRGF0ZShlLHQsMSkuZ2V0RGF5KCl9LF9jYW5BZGp1c3RNb250aDpmdW5jdGlvbihlLHQsaSxzKXt2YXIgbj10aGlzLl9nZXROdW1iZXJPZk1vbnRocyhlKSxhPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGkscysoMD50P3Q6blswXSpuWzFdKSwxKSk7cmV0dXJuIDA+dCYmYS5zZXREYXRlKHRoaXMuX2dldERheXNJbk1vbnRoKGEuZ2V0RnVsbFllYXIoKSxhLmdldE1vbnRoKCkpKSx0aGlzLl9pc0luUmFuZ2UoZSxhKX0sX2lzSW5SYW5nZTpmdW5jdGlvbihlLHQpe3ZhciBpLHMsbj10aGlzLl9nZXRNaW5NYXhEYXRlKGUsXCJtaW5cIiksYT10aGlzLl9nZXRNaW5NYXhEYXRlKGUsXCJtYXhcIiksbz1udWxsLHI9bnVsbCxoPXRoaXMuX2dldChlLFwieWVhclJhbmdlXCIpO3JldHVybiBoJiYoaT1oLnNwbGl0KFwiOlwiKSxzPShuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSxvPXBhcnNlSW50KGlbMF0sMTApLHI9cGFyc2VJbnQoaVsxXSwxMCksaVswXS5tYXRjaCgvWytcXC1dLiovKSYmKG8rPXMpLGlbMV0ubWF0Y2goL1srXFwtXS4qLykmJihyKz1zKSksKCFufHx0LmdldFRpbWUoKT49bi5nZXRUaW1lKCkpJiYoIWF8fHQuZ2V0VGltZSgpPD1hLmdldFRpbWUoKSkmJighb3x8dC5nZXRGdWxsWWVhcigpPj1vKSYmKCFyfHxyPj10LmdldEZ1bGxZZWFyKCkpfSxfZ2V0Rm9ybWF0Q29uZmlnOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldChlLFwic2hvcnRZZWFyQ3V0b2ZmXCIpO3JldHVybiB0PVwic3RyaW5nXCIhPXR5cGVvZiB0P3Q6KG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpJTEwMCtwYXJzZUludCh0LDEwKSx7c2hvcnRZZWFyQ3V0b2ZmOnQsZGF5TmFtZXNTaG9ydDp0aGlzLl9nZXQoZSxcImRheU5hbWVzU2hvcnRcIiksZGF5TmFtZXM6dGhpcy5fZ2V0KGUsXCJkYXlOYW1lc1wiKSxtb250aE5hbWVzU2hvcnQ6dGhpcy5fZ2V0KGUsXCJtb250aE5hbWVzU2hvcnRcIiksbW9udGhOYW1lczp0aGlzLl9nZXQoZSxcIm1vbnRoTmFtZXNcIil9fSxfZm9ybWF0RGF0ZTpmdW5jdGlvbihlLHQsaSxzKXt0fHwoZS5jdXJyZW50RGF5PWUuc2VsZWN0ZWREYXksZS5jdXJyZW50TW9udGg9ZS5zZWxlY3RlZE1vbnRoLGUuY3VycmVudFllYXI9ZS5zZWxlY3RlZFllYXIpO3ZhciBuPXQ/XCJvYmplY3RcIj09dHlwZW9mIHQ/dDp0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShzLGksdCkpOnRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGUuY3VycmVudFllYXIsZS5jdXJyZW50TW9udGgsZS5jdXJyZW50RGF5KSk7cmV0dXJuIHRoaXMuZm9ybWF0RGF0ZSh0aGlzLl9nZXQoZSxcImRhdGVGb3JtYXRcIiksbix0aGlzLl9nZXRGb3JtYXRDb25maWcoZSkpfX0pLGUuZm4uZGF0ZXBpY2tlcj1mdW5jdGlvbih0KXtpZighdGhpcy5sZW5ndGgpcmV0dXJuIHRoaXM7ZS5kYXRlcGlja2VyLmluaXRpYWxpemVkfHwoZShkb2N1bWVudCkubW91c2Vkb3duKGUuZGF0ZXBpY2tlci5fY2hlY2tFeHRlcm5hbENsaWNrKSxlLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQ9ITApLDA9PT1lKFwiI1wiK2UuZGF0ZXBpY2tlci5fbWFpbkRpdklkKS5sZW5ndGgmJmUoXCJib2R5XCIpLmFwcGVuZChlLmRhdGVwaWNrZXIuZHBEaXYpO3ZhciBpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgdHx8XCJpc0Rpc2FibGVkXCIhPT10JiZcImdldERhdGVcIiE9PXQmJlwid2lkZ2V0XCIhPT10P1wib3B0aW9uXCI9PT10JiYyPT09YXJndW1lbnRzLmxlbmd0aCYmXCJzdHJpbmdcIj09dHlwZW9mIGFyZ3VtZW50c1sxXT9lLmRhdGVwaWNrZXJbXCJfXCIrdCtcIkRhdGVwaWNrZXJcIl0uYXBwbHkoZS5kYXRlcGlja2VyLFt0aGlzWzBdXS5jb25jYXQoaSkpOnRoaXMuZWFjaChmdW5jdGlvbigpe1wic3RyaW5nXCI9PXR5cGVvZiB0P2UuZGF0ZXBpY2tlcltcIl9cIit0K1wiRGF0ZXBpY2tlclwiXS5hcHBseShlLmRhdGVwaWNrZXIsW3RoaXNdLmNvbmNhdChpKSk6ZS5kYXRlcGlja2VyLl9hdHRhY2hEYXRlcGlja2VyKHRoaXMsdCl9KTplLmRhdGVwaWNrZXJbXCJfXCIrdCtcIkRhdGVwaWNrZXJcIl0uYXBwbHkoZS5kYXRlcGlja2VyLFt0aGlzWzBdXS5jb25jYXQoaSkpfSxlLmRhdGVwaWNrZXI9bmV3IG4sZS5kYXRlcGlja2VyLmluaXRpYWxpemVkPSExLGUuZGF0ZXBpY2tlci51dWlkPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGUuZGF0ZXBpY2tlci52ZXJzaW9uPVwiMS4xMS40XCIsZS5kYXRlcGlja2VyLGUud2lkZ2V0KFwidWkuZHJhZ2dhYmxlXCIsZS51aS5tb3VzZSx7dmVyc2lvbjpcIjEuMTEuNFwiLHdpZGdldEV2ZW50UHJlZml4OlwiZHJhZ1wiLG9wdGlvbnM6e2FkZENsYXNzZXM6ITAsYXBwZW5kVG86XCJwYXJlbnRcIixheGlzOiExLGNvbm5lY3RUb1NvcnRhYmxlOiExLGNvbnRhaW5tZW50OiExLGN1cnNvcjpcImF1dG9cIixjdXJzb3JBdDohMSxncmlkOiExLGhhbmRsZTohMSxoZWxwZXI6XCJvcmlnaW5hbFwiLGlmcmFtZUZpeDohMSxvcGFjaXR5OiExLHJlZnJlc2hQb3NpdGlvbnM6ITEscmV2ZXJ0OiExLHJldmVydER1cmF0aW9uOjUwMCxzY29wZTpcImRlZmF1bHRcIixzY3JvbGw6ITAsc2Nyb2xsU2Vuc2l0aXZpdHk6MjAsc2Nyb2xsU3BlZWQ6MjAsc25hcDohMSxzbmFwTW9kZTpcImJvdGhcIixzbmFwVG9sZXJhbmNlOjIwLHN0YWNrOiExLHpJbmRleDohMSxkcmFnOm51bGwsc3RhcnQ6bnVsbCxzdG9wOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXtcIm9yaWdpbmFsXCI9PT10aGlzLm9wdGlvbnMuaGVscGVyJiZ0aGlzLl9zZXRQb3NpdGlvblJlbGF0aXZlKCksdGhpcy5vcHRpb25zLmFkZENsYXNzZXMmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLWRyYWdnYWJsZVwiKSx0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLWRyYWdnYWJsZS1kaXNhYmxlZFwiKSx0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKSx0aGlzLl9tb3VzZUluaXQoKX0sX3NldE9wdGlvbjpmdW5jdGlvbihlLHQpe3RoaXMuX3N1cGVyKGUsdCksXCJoYW5kbGVcIj09PWUmJih0aGlzLl9yZW1vdmVIYW5kbGVDbGFzc05hbWUoKSx0aGlzLl9zZXRIYW5kbGVDbGFzc05hbWUoKSl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuaGVscGVyfHx0aGlzLmVsZW1lbnQpLmlzKFwiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZ1wiKT8odGhpcy5kZXN0cm95T25DbGVhcj0hMCx2b2lkIDApOih0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1kcmFnZ2FibGUgdWktZHJhZ2dhYmxlLWRyYWdnaW5nIHVpLWRyYWdnYWJsZS1kaXNhYmxlZFwiKSx0aGlzLl9yZW1vdmVIYW5kbGVDbGFzc05hbWUoKSx0aGlzLl9tb3VzZURlc3Ryb3koKSx2b2lkIDApfSxfbW91c2VDYXB0dXJlOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMub3B0aW9ucztyZXR1cm4gdGhpcy5fYmx1ckFjdGl2ZUVsZW1lbnQodCksdGhpcy5oZWxwZXJ8fGkuZGlzYWJsZWR8fGUodC50YXJnZXQpLmNsb3Nlc3QoXCIudWktcmVzaXphYmxlLWhhbmRsZVwiKS5sZW5ndGg+MD8hMToodGhpcy5oYW5kbGU9dGhpcy5fZ2V0SGFuZGxlKHQpLHRoaXMuaGFuZGxlPyh0aGlzLl9ibG9ja0ZyYW1lcyhpLmlmcmFtZUZpeD09PSEwP1wiaWZyYW1lXCI6aS5pZnJhbWVGaXgpLCEwKTohMSl9LF9ibG9ja0ZyYW1lczpmdW5jdGlvbih0KXt0aGlzLmlmcmFtZUJsb2Nrcz10aGlzLmRvY3VtZW50LmZpbmQodCkubWFwKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTtyZXR1cm4gZShcIjxkaXY+XCIpLmNzcyhcInBvc2l0aW9uXCIsXCJhYnNvbHV0ZVwiKS5hcHBlbmRUbyh0LnBhcmVudCgpKS5vdXRlcldpZHRoKHQub3V0ZXJXaWR0aCgpKS5vdXRlckhlaWdodCh0Lm91dGVySGVpZ2h0KCkpLm9mZnNldCh0Lm9mZnNldCgpKVswXX0pfSxfdW5ibG9ja0ZyYW1lczpmdW5jdGlvbigpe3RoaXMuaWZyYW1lQmxvY2tzJiYodGhpcy5pZnJhbWVCbG9ja3MucmVtb3ZlKCksZGVsZXRlIHRoaXMuaWZyYW1lQmxvY2tzKX0sX2JsdXJBY3RpdmVFbGVtZW50OmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuZG9jdW1lbnRbMF07aWYodGhpcy5oYW5kbGVFbGVtZW50LmlzKHQudGFyZ2V0KSl0cnl7aS5hY3RpdmVFbGVtZW50JiZcImJvZHlcIiE9PWkuYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZlKGkuYWN0aXZlRWxlbWVudCkuYmx1cigpfWNhdGNoKHMpe319LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMub3B0aW9ucztyZXR1cm4gdGhpcy5oZWxwZXI9dGhpcy5fY3JlYXRlSGVscGVyKHQpLHRoaXMuaGVscGVyLmFkZENsYXNzKFwidWktZHJhZ2dhYmxlLWRyYWdnaW5nXCIpLHRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKSxlLnVpLmRkbWFuYWdlciYmKGUudWkuZGRtYW5hZ2VyLmN1cnJlbnQ9dGhpcyksdGhpcy5fY2FjaGVNYXJnaW5zKCksdGhpcy5jc3NQb3NpdGlvbj10aGlzLmhlbHBlci5jc3MoXCJwb3NpdGlvblwiKSx0aGlzLnNjcm9sbFBhcmVudD10aGlzLmhlbHBlci5zY3JvbGxQYXJlbnQoITApLHRoaXMub2Zmc2V0UGFyZW50PXRoaXMuaGVscGVyLm9mZnNldFBhcmVudCgpLHRoaXMuaGFzRml4ZWRBbmNlc3Rvcj10aGlzLmhlbHBlci5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuXCJmaXhlZFwiPT09ZSh0aGlzKS5jc3MoXCJwb3NpdGlvblwiKX0pLmxlbmd0aD4wLHRoaXMucG9zaXRpb25BYnM9dGhpcy5lbGVtZW50Lm9mZnNldCgpLHRoaXMuX3JlZnJlc2hPZmZzZXRzKHQpLHRoaXMub3JpZ2luYWxQb3NpdGlvbj10aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24odCwhMSksdGhpcy5vcmlnaW5hbFBhZ2VYPXQucGFnZVgsdGhpcy5vcmlnaW5hbFBhZ2VZPXQucGFnZVksaS5jdXJzb3JBdCYmdGhpcy5fYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcihpLmN1cnNvckF0KSx0aGlzLl9zZXRDb250YWlubWVudCgpLHRoaXMuX3RyaWdnZXIoXCJzdGFydFwiLHQpPT09ITE/KHRoaXMuX2NsZWFyKCksITEpOih0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCksZS51aS5kZG1hbmFnZXImJiFpLmRyb3BCZWhhdmlvdXImJmUudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsdCksdGhpcy5fbm9ybWFsaXplUmlnaHRCb3R0b20oKSx0aGlzLl9tb3VzZURyYWcodCwhMCksZS51aS5kZG1hbmFnZXImJmUudWkuZGRtYW5hZ2VyLmRyYWdTdGFydCh0aGlzLHQpLCEwKX0sX3JlZnJlc2hPZmZzZXRzOmZ1bmN0aW9uKGUpe3RoaXMub2Zmc2V0PXt0b3A6dGhpcy5wb3NpdGlvbkFicy50b3AtdGhpcy5tYXJnaW5zLnRvcCxsZWZ0OnRoaXMucG9zaXRpb25BYnMubGVmdC10aGlzLm1hcmdpbnMubGVmdCxzY3JvbGw6ITEscGFyZW50OnRoaXMuX2dldFBhcmVudE9mZnNldCgpLHJlbGF0aXZlOnRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KCl9LHRoaXMub2Zmc2V0LmNsaWNrPXtsZWZ0OmUucGFnZVgtdGhpcy5vZmZzZXQubGVmdCx0b3A6ZS5wYWdlWS10aGlzLm9mZnNldC50b3B9fSxfbW91c2VEcmFnOmZ1bmN0aW9uKHQsaSl7aWYodGhpcy5oYXNGaXhlZEFuY2VzdG9yJiYodGhpcy5vZmZzZXQucGFyZW50PXRoaXMuX2dldFBhcmVudE9mZnNldCgpKSx0aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24odCwhMCksdGhpcy5wb3NpdGlvbkFicz10aGlzLl9jb252ZXJ0UG9zaXRpb25UbyhcImFic29sdXRlXCIpLCFpKXt2YXIgcz10aGlzLl91aUhhc2goKTtpZih0aGlzLl90cmlnZ2VyKFwiZHJhZ1wiLHQscyk9PT0hMSlyZXR1cm4gdGhpcy5fbW91c2VVcCh7fSksITE7dGhpcy5wb3NpdGlvbj1zLnBvc2l0aW9ufXJldHVybiB0aGlzLmhlbHBlclswXS5zdHlsZS5sZWZ0PXRoaXMucG9zaXRpb24ubGVmdCtcInB4XCIsdGhpcy5oZWxwZXJbMF0uc3R5bGUudG9wPXRoaXMucG9zaXRpb24udG9wK1wicHhcIixlLnVpLmRkbWFuYWdlciYmZS51aS5kZG1hbmFnZXIuZHJhZyh0aGlzLHQpLCExfSxfbW91c2VTdG9wOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMscz0hMTtyZXR1cm4gZS51aS5kZG1hbmFnZXImJiF0aGlzLm9wdGlvbnMuZHJvcEJlaGF2aW91ciYmKHM9ZS51aS5kZG1hbmFnZXIuZHJvcCh0aGlzLHQpKSx0aGlzLmRyb3BwZWQmJihzPXRoaXMuZHJvcHBlZCx0aGlzLmRyb3BwZWQ9ITEpLFwiaW52YWxpZFwiPT09dGhpcy5vcHRpb25zLnJldmVydCYmIXN8fFwidmFsaWRcIj09PXRoaXMub3B0aW9ucy5yZXZlcnQmJnN8fHRoaXMub3B0aW9ucy5yZXZlcnQ9PT0hMHx8ZS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5yZXZlcnQpJiZ0aGlzLm9wdGlvbnMucmV2ZXJ0LmNhbGwodGhpcy5lbGVtZW50LHMpP2UodGhpcy5oZWxwZXIpLmFuaW1hdGUodGhpcy5vcmlnaW5hbFBvc2l0aW9uLHBhcnNlSW50KHRoaXMub3B0aW9ucy5yZXZlcnREdXJhdGlvbiwxMCksZnVuY3Rpb24oKXtpLl90cmlnZ2VyKFwic3RvcFwiLHQpIT09ITEmJmkuX2NsZWFyKCl9KTp0aGlzLl90cmlnZ2VyKFwic3RvcFwiLHQpIT09ITEmJnRoaXMuX2NsZWFyKCksITF9LF9tb3VzZVVwOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl91bmJsb2NrRnJhbWVzKCksZS51aS5kZG1hbmFnZXImJmUudWkuZGRtYW5hZ2VyLmRyYWdTdG9wKHRoaXMsdCksdGhpcy5oYW5kbGVFbGVtZW50LmlzKHQudGFyZ2V0KSYmdGhpcy5lbGVtZW50LmZvY3VzKCksZS51aS5tb3VzZS5wcm90b3R5cGUuX21vdXNlVXAuY2FsbCh0aGlzLHQpfSxjYW5jZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWxwZXIuaXMoXCIudWktZHJhZ2dhYmxlLWRyYWdnaW5nXCIpP3RoaXMuX21vdXNlVXAoe30pOnRoaXMuX2NsZWFyKCksdGhpc30sX2dldEhhbmRsZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLmhhbmRsZT8hIWUodC50YXJnZXQpLmNsb3Nlc3QodGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLmhhbmRsZSkpLmxlbmd0aDohMH0sX3NldEhhbmRsZUNsYXNzTmFtZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlRWxlbWVudD10aGlzLm9wdGlvbnMuaGFuZGxlP3RoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5oYW5kbGUpOnRoaXMuZWxlbWVudCx0aGlzLmhhbmRsZUVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1kcmFnZ2FibGUtaGFuZGxlXCIpfSxfcmVtb3ZlSGFuZGxlQ2xhc3NOYW1lOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVFbGVtZW50LnJlbW92ZUNsYXNzKFwidWktZHJhZ2dhYmxlLWhhbmRsZVwiKX0sX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnMscz1lLmlzRnVuY3Rpb24oaS5oZWxwZXIpLG49cz9lKGkuaGVscGVyLmFwcGx5KHRoaXMuZWxlbWVudFswXSxbdF0pKTpcImNsb25lXCI9PT1pLmhlbHBlcj90aGlzLmVsZW1lbnQuY2xvbmUoKS5yZW1vdmVBdHRyKFwiaWRcIik6dGhpcy5lbGVtZW50O3JldHVybiBuLnBhcmVudHMoXCJib2R5XCIpLmxlbmd0aHx8bi5hcHBlbmRUbyhcInBhcmVudFwiPT09aS5hcHBlbmRUbz90aGlzLmVsZW1lbnRbMF0ucGFyZW50Tm9kZTppLmFwcGVuZFRvKSxzJiZuWzBdPT09dGhpcy5lbGVtZW50WzBdJiZ0aGlzLl9zZXRQb3NpdGlvblJlbGF0aXZlKCksblswXT09PXRoaXMuZWxlbWVudFswXXx8LyhmaXhlZHxhYnNvbHV0ZSkvLnRlc3Qobi5jc3MoXCJwb3NpdGlvblwiKSl8fG4uY3NzKFwicG9zaXRpb25cIixcImFic29sdXRlXCIpLG59LF9zZXRQb3NpdGlvblJlbGF0aXZlOmZ1bmN0aW9uKCl7L14oPzpyfGF8ZikvLnRlc3QodGhpcy5lbGVtZW50LmNzcyhcInBvc2l0aW9uXCIpKXx8KHRoaXMuZWxlbWVudFswXS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpfSxfYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcjpmdW5jdGlvbih0KXtcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9dC5zcGxpdChcIiBcIikpLGUuaXNBcnJheSh0KSYmKHQ9e2xlZnQ6K3RbMF0sdG9wOit0WzFdfHwwfSksXCJsZWZ0XCJpbiB0JiYodGhpcy5vZmZzZXQuY2xpY2subGVmdD10LmxlZnQrdGhpcy5tYXJnaW5zLmxlZnQpLFwicmlnaHRcImluIHQmJih0aGlzLm9mZnNldC5jbGljay5sZWZ0PXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdC5yaWdodCt0aGlzLm1hcmdpbnMubGVmdCksXCJ0b3BcImluIHQmJih0aGlzLm9mZnNldC5jbGljay50b3A9dC50b3ArdGhpcy5tYXJnaW5zLnRvcCksXCJib3R0b21cImluIHQmJih0aGlzLm9mZnNldC5jbGljay50b3A9dGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdC5ib3R0b20rdGhpcy5tYXJnaW5zLnRvcCl9LF9pc1Jvb3ROb2RlOmZ1bmN0aW9uKGUpe3JldHVybi8oaHRtbHxib2R5KS9pLnRlc3QoZS50YWdOYW1lKXx8ZT09PXRoaXMuZG9jdW1lbnRbMF19LF9nZXRQYXJlbnRPZmZzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKSxpPXRoaXMuZG9jdW1lbnRbMF07cmV0dXJuXCJhYnNvbHV0ZVwiPT09dGhpcy5jc3NQb3NpdGlvbiYmdGhpcy5zY3JvbGxQYXJlbnRbMF0hPT1pJiZlLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKSYmKHQubGVmdCs9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpLHQudG9wKz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSksdGhpcy5faXNSb290Tm9kZSh0aGlzLm9mZnNldFBhcmVudFswXSkmJih0PXt0b3A6MCxsZWZ0OjB9KSx7dG9wOnQudG9wKyhwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoXCJib3JkZXJUb3BXaWR0aFwiKSwxMCl8fDApLGxlZnQ6dC5sZWZ0KyhwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoXCJib3JkZXJMZWZ0V2lkdGhcIiksMTApfHwwKX19LF9nZXRSZWxhdGl2ZU9mZnNldDpmdW5jdGlvbigpe2lmKFwicmVsYXRpdmVcIiE9PXRoaXMuY3NzUG9zaXRpb24pcmV0dXJue3RvcDowLGxlZnQ6MH07dmFyIGU9dGhpcy5lbGVtZW50LnBvc2l0aW9uKCksdD10aGlzLl9pc1Jvb3ROb2RlKHRoaXMuc2Nyb2xsUGFyZW50WzBdKTtyZXR1cm57dG9wOmUudG9wLShwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoXCJ0b3BcIiksMTApfHwwKSsodD8wOnRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpKSxsZWZ0OmUubGVmdC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKFwibGVmdFwiKSwxMCl8fDApKyh0PzA6dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpKX19LF9jYWNoZU1hcmdpbnM6ZnVuY3Rpb24oKXt0aGlzLm1hcmdpbnM9e2xlZnQ6cGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcyhcIm1hcmdpbkxlZnRcIiksMTApfHwwLHRvcDpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luVG9wXCIpLDEwKXx8MCxyaWdodDpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luUmlnaHRcIiksMTApfHwwLGJvdHRvbTpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luQm90dG9tXCIpLDEwKXx8MH19LF9jYWNoZUhlbHBlclByb3BvcnRpb25zOmZ1bmN0aW9uKCl7dGhpcy5oZWxwZXJQcm9wb3J0aW9ucz17d2lkdGg6dGhpcy5oZWxwZXIub3V0ZXJXaWR0aCgpLGhlaWdodDp0aGlzLmhlbHBlci5vdXRlckhlaWdodCgpfX0sX3NldENvbnRhaW5tZW50OmZ1bmN0aW9uKCl7dmFyIHQsaSxzLG49dGhpcy5vcHRpb25zLGE9dGhpcy5kb2N1bWVudFswXTtyZXR1cm4gdGhpcy5yZWxhdGl2ZUNvbnRhaW5lcj1udWxsLG4uY29udGFpbm1lbnQ/XCJ3aW5kb3dcIj09PW4uY29udGFpbm1lbnQ/KHRoaXMuY29udGFpbm1lbnQ9W2Uod2luZG93KS5zY3JvbGxMZWZ0KCktdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCxlKHdpbmRvdykuc2Nyb2xsVG9wKCktdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3AsZSh3aW5kb3cpLnNjcm9sbExlZnQoKStlKHdpbmRvdykud2lkdGgoKS10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLXRoaXMubWFyZ2lucy5sZWZ0LGUod2luZG93KS5zY3JvbGxUb3AoKSsoZSh3aW5kb3cpLmhlaWdodCgpfHxhLmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LXRoaXMubWFyZ2lucy50b3BdLHZvaWQgMCk6XCJkb2N1bWVudFwiPT09bi5jb250YWlubWVudD8odGhpcy5jb250YWlubWVudD1bMCwwLGUoYSkud2lkdGgoKS10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLXRoaXMubWFyZ2lucy5sZWZ0LChlKGEpLmhlaWdodCgpfHxhLmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LXRoaXMubWFyZ2lucy50b3BdLHZvaWQgMCk6bi5jb250YWlubWVudC5jb25zdHJ1Y3Rvcj09PUFycmF5Pyh0aGlzLmNvbnRhaW5tZW50PW4uY29udGFpbm1lbnQsdm9pZCAwKTooXCJwYXJlbnRcIj09PW4uY29udGFpbm1lbnQmJihuLmNvbnRhaW5tZW50PXRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGUpLGk9ZShuLmNvbnRhaW5tZW50KSxzPWlbMF0scyYmKHQ9LyhzY3JvbGx8YXV0bykvLnRlc3QoaS5jc3MoXCJvdmVyZmxvd1wiKSksdGhpcy5jb250YWlubWVudD1bKHBhcnNlSW50KGkuY3NzKFwiYm9yZGVyTGVmdFdpZHRoXCIpLDEwKXx8MCkrKHBhcnNlSW50KGkuY3NzKFwicGFkZGluZ0xlZnRcIiksMTApfHwwKSwocGFyc2VJbnQoaS5jc3MoXCJib3JkZXJUb3BXaWR0aFwiKSwxMCl8fDApKyhwYXJzZUludChpLmNzcyhcInBhZGRpbmdUb3BcIiksMTApfHwwKSwodD9NYXRoLm1heChzLnNjcm9sbFdpZHRoLHMub2Zmc2V0V2lkdGgpOnMub2Zmc2V0V2lkdGgpLShwYXJzZUludChpLmNzcyhcImJvcmRlclJpZ2h0V2lkdGhcIiksMTApfHwwKS0ocGFyc2VJbnQoaS5jc3MoXCJwYWRkaW5nUmlnaHRcIiksMTApfHwwKS10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLXRoaXMubWFyZ2lucy5sZWZ0LXRoaXMubWFyZ2lucy5yaWdodCwodD9NYXRoLm1heChzLnNjcm9sbEhlaWdodCxzLm9mZnNldEhlaWdodCk6cy5vZmZzZXRIZWlnaHQpLShwYXJzZUludChpLmNzcyhcImJvcmRlckJvdHRvbVdpZHRoXCIpLDEwKXx8MCktKHBhcnNlSW50KGkuY3NzKFwicGFkZGluZ0JvdHRvbVwiKSwxMCl8fDApLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LXRoaXMubWFyZ2lucy50b3AtdGhpcy5tYXJnaW5zLmJvdHRvbV0sdGhpcy5yZWxhdGl2ZUNvbnRhaW5lcj1pKSx2b2lkIDApOih0aGlzLmNvbnRhaW5tZW50PW51bGwsdm9pZCAwKVxufSxfY29udmVydFBvc2l0aW9uVG86ZnVuY3Rpb24oZSx0KXt0fHwodD10aGlzLnBvc2l0aW9uKTt2YXIgaT1cImFic29sdXRlXCI9PT1lPzE6LTEscz10aGlzLl9pc1Jvb3ROb2RlKHRoaXMuc2Nyb2xsUGFyZW50WzBdKTtyZXR1cm57dG9wOnQudG9wK3RoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCppK3RoaXMub2Zmc2V0LnBhcmVudC50b3AqaS0oXCJmaXhlZFwiPT09dGhpcy5jc3NQb3NpdGlvbj8tdGhpcy5vZmZzZXQuc2Nyb2xsLnRvcDpzPzA6dGhpcy5vZmZzZXQuc2Nyb2xsLnRvcCkqaSxsZWZ0OnQubGVmdCt0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0KmkrdGhpcy5vZmZzZXQucGFyZW50LmxlZnQqaS0oXCJmaXhlZFwiPT09dGhpcy5jc3NQb3NpdGlvbj8tdGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQ6cz8wOnRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0KSppfX0sX2dlbmVyYXRlUG9zaXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgaSxzLG4sYSxvPXRoaXMub3B0aW9ucyxyPXRoaXMuX2lzUm9vdE5vZGUodGhpcy5zY3JvbGxQYXJlbnRbMF0pLGg9ZS5wYWdlWCxsPWUucGFnZVk7cmV0dXJuIHImJnRoaXMub2Zmc2V0LnNjcm9sbHx8KHRoaXMub2Zmc2V0LnNjcm9sbD17dG9wOnRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpLGxlZnQ6dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpfSksdCYmKHRoaXMuY29udGFpbm1lbnQmJih0aGlzLnJlbGF0aXZlQ29udGFpbmVyPyhzPXRoaXMucmVsYXRpdmVDb250YWluZXIub2Zmc2V0KCksaT1bdGhpcy5jb250YWlubWVudFswXStzLmxlZnQsdGhpcy5jb250YWlubWVudFsxXStzLnRvcCx0aGlzLmNvbnRhaW5tZW50WzJdK3MubGVmdCx0aGlzLmNvbnRhaW5tZW50WzNdK3MudG9wXSk6aT10aGlzLmNvbnRhaW5tZW50LGUucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdDxpWzBdJiYoaD1pWzBdK3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQpLGUucGFnZVktdGhpcy5vZmZzZXQuY2xpY2sudG9wPGlbMV0mJihsPWlbMV0rdGhpcy5vZmZzZXQuY2xpY2sudG9wKSxlLnBhZ2VYLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+aVsyXSYmKGg9aVsyXSt0aGlzLm9mZnNldC5jbGljay5sZWZ0KSxlLnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD5pWzNdJiYobD1pWzNdK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCkpLG8uZ3JpZCYmKG49by5ncmlkWzFdP3RoaXMub3JpZ2luYWxQYWdlWStNYXRoLnJvdW5kKChsLXRoaXMub3JpZ2luYWxQYWdlWSkvby5ncmlkWzFdKSpvLmdyaWRbMV06dGhpcy5vcmlnaW5hbFBhZ2VZLGw9aT9uLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD49aVsxXXx8bi10aGlzLm9mZnNldC5jbGljay50b3A+aVszXT9uOm4tdGhpcy5vZmZzZXQuY2xpY2sudG9wPj1pWzFdP24tby5ncmlkWzFdOm4rby5ncmlkWzFdOm4sYT1vLmdyaWRbMF0/dGhpcy5vcmlnaW5hbFBhZ2VYK01hdGgucm91bmQoKGgtdGhpcy5vcmlnaW5hbFBhZ2VYKS9vLmdyaWRbMF0pKm8uZ3JpZFswXTp0aGlzLm9yaWdpbmFsUGFnZVgsaD1pP2EtdGhpcy5vZmZzZXQuY2xpY2subGVmdD49aVswXXx8YS10aGlzLm9mZnNldC5jbGljay5sZWZ0PmlbMl0/YTphLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+PWlbMF0/YS1vLmdyaWRbMF06YStvLmdyaWRbMF06YSksXCJ5XCI9PT1vLmF4aXMmJihoPXRoaXMub3JpZ2luYWxQYWdlWCksXCJ4XCI9PT1vLmF4aXMmJihsPXRoaXMub3JpZ2luYWxQYWdlWSkpLHt0b3A6bC10aGlzLm9mZnNldC5jbGljay50b3AtdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3ArKFwiZml4ZWRcIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMub2Zmc2V0LnNjcm9sbC50b3A6cj8wOnRoaXMub2Zmc2V0LnNjcm9sbC50b3ApLGxlZnQ6aC10aGlzLm9mZnNldC5jbGljay5sZWZ0LXRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQtdGhpcy5vZmZzZXQucGFyZW50LmxlZnQrKFwiZml4ZWRcIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0OnI/MDp0aGlzLm9mZnNldC5zY3JvbGwubGVmdCl9fSxfY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmhlbHBlci5yZW1vdmVDbGFzcyhcInVpLWRyYWdnYWJsZS1kcmFnZ2luZ1wiKSx0aGlzLmhlbHBlclswXT09PXRoaXMuZWxlbWVudFswXXx8dGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsfHx0aGlzLmhlbHBlci5yZW1vdmUoKSx0aGlzLmhlbHBlcj1udWxsLHRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMSx0aGlzLmRlc3Ryb3lPbkNsZWFyJiZ0aGlzLmRlc3Ryb3koKX0sX25vcm1hbGl6ZVJpZ2h0Qm90dG9tOmZ1bmN0aW9uKCl7XCJ5XCIhPT10aGlzLm9wdGlvbnMuYXhpcyYmXCJhdXRvXCIhPT10aGlzLmhlbHBlci5jc3MoXCJyaWdodFwiKSYmKHRoaXMuaGVscGVyLndpZHRoKHRoaXMuaGVscGVyLndpZHRoKCkpLHRoaXMuaGVscGVyLmNzcyhcInJpZ2h0XCIsXCJhdXRvXCIpKSxcInhcIiE9PXRoaXMub3B0aW9ucy5heGlzJiZcImF1dG9cIiE9PXRoaXMuaGVscGVyLmNzcyhcImJvdHRvbVwiKSYmKHRoaXMuaGVscGVyLmhlaWdodCh0aGlzLmhlbHBlci5oZWlnaHQoKSksdGhpcy5oZWxwZXIuY3NzKFwiYm90dG9tXCIsXCJhdXRvXCIpKX0sX3RyaWdnZXI6ZnVuY3Rpb24odCxpLHMpe3JldHVybiBzPXN8fHRoaXMuX3VpSGFzaCgpLGUudWkucGx1Z2luLmNhbGwodGhpcyx0LFtpLHMsdGhpc10sITApLC9eKGRyYWd8c3RhcnR8c3RvcCkvLnRlc3QodCkmJih0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKFwiYWJzb2x1dGVcIikscy5vZmZzZXQ9dGhpcy5wb3NpdGlvbkFicyksZS5XaWRnZXQucHJvdG90eXBlLl90cmlnZ2VyLmNhbGwodGhpcyx0LGkscyl9LHBsdWdpbnM6e30sX3VpSGFzaDpmdW5jdGlvbigpe3JldHVybntoZWxwZXI6dGhpcy5oZWxwZXIscG9zaXRpb246dGhpcy5wb3NpdGlvbixvcmlnaW5hbFBvc2l0aW9uOnRoaXMub3JpZ2luYWxQb3NpdGlvbixvZmZzZXQ6dGhpcy5wb3NpdGlvbkFic319fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJjb25uZWN0VG9Tb3J0YWJsZVwiLHtzdGFydDpmdW5jdGlvbih0LGkscyl7dmFyIG49ZS5leHRlbmQoe30saSx7aXRlbTpzLmVsZW1lbnR9KTtzLnNvcnRhYmxlcz1bXSxlKHMub3B0aW9ucy5jb25uZWN0VG9Tb3J0YWJsZSkuZWFjaChmdW5jdGlvbigpe3ZhciBpPWUodGhpcykuc29ydGFibGUoXCJpbnN0YW5jZVwiKTtpJiYhaS5vcHRpb25zLmRpc2FibGVkJiYocy5zb3J0YWJsZXMucHVzaChpKSxpLnJlZnJlc2hQb3NpdGlvbnMoKSxpLl90cmlnZ2VyKFwiYWN0aXZhdGVcIix0LG4pKX0pfSxzdG9wOmZ1bmN0aW9uKHQsaSxzKXt2YXIgbj1lLmV4dGVuZCh7fSxpLHtpdGVtOnMuZWxlbWVudH0pO3MuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMSxlLmVhY2gocy5zb3J0YWJsZXMsZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuaXNPdmVyPyhlLmlzT3Zlcj0wLHMuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMCxlLmNhbmNlbEhlbHBlclJlbW92YWw9ITEsZS5fc3RvcmVkQ1NTPXtwb3NpdGlvbjplLnBsYWNlaG9sZGVyLmNzcyhcInBvc2l0aW9uXCIpLHRvcDplLnBsYWNlaG9sZGVyLmNzcyhcInRvcFwiKSxsZWZ0OmUucGxhY2Vob2xkZXIuY3NzKFwibGVmdFwiKX0sZS5fbW91c2VTdG9wKHQpLGUub3B0aW9ucy5oZWxwZXI9ZS5vcHRpb25zLl9oZWxwZXIpOihlLmNhbmNlbEhlbHBlclJlbW92YWw9ITAsZS5fdHJpZ2dlcihcImRlYWN0aXZhdGVcIix0LG4pKX0pfSxkcmFnOmZ1bmN0aW9uKHQsaSxzKXtlLmVhY2gocy5zb3J0YWJsZXMsZnVuY3Rpb24oKXt2YXIgbj0hMSxhPXRoaXM7YS5wb3NpdGlvbkFicz1zLnBvc2l0aW9uQWJzLGEuaGVscGVyUHJvcG9ydGlvbnM9cy5oZWxwZXJQcm9wb3J0aW9ucyxhLm9mZnNldC5jbGljaz1zLm9mZnNldC5jbGljayxhLl9pbnRlcnNlY3RzV2l0aChhLmNvbnRhaW5lckNhY2hlKSYmKG49ITAsZS5lYWNoKHMuc29ydGFibGVzLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zaXRpb25BYnM9cy5wb3NpdGlvbkFicyx0aGlzLmhlbHBlclByb3BvcnRpb25zPXMuaGVscGVyUHJvcG9ydGlvbnMsdGhpcy5vZmZzZXQuY2xpY2s9cy5vZmZzZXQuY2xpY2ssdGhpcyE9PWEmJnRoaXMuX2ludGVyc2VjdHNXaXRoKHRoaXMuY29udGFpbmVyQ2FjaGUpJiZlLmNvbnRhaW5zKGEuZWxlbWVudFswXSx0aGlzLmVsZW1lbnRbMF0pJiYobj0hMSksbn0pKSxuPyhhLmlzT3Zlcnx8KGEuaXNPdmVyPTEscy5fcGFyZW50PWkuaGVscGVyLnBhcmVudCgpLGEuY3VycmVudEl0ZW09aS5oZWxwZXIuYXBwZW5kVG8oYS5lbGVtZW50KS5kYXRhKFwidWktc29ydGFibGUtaXRlbVwiLCEwKSxhLm9wdGlvbnMuX2hlbHBlcj1hLm9wdGlvbnMuaGVscGVyLGEub3B0aW9ucy5oZWxwZXI9ZnVuY3Rpb24oKXtyZXR1cm4gaS5oZWxwZXJbMF19LHQudGFyZ2V0PWEuY3VycmVudEl0ZW1bMF0sYS5fbW91c2VDYXB0dXJlKHQsITApLGEuX21vdXNlU3RhcnQodCwhMCwhMCksYS5vZmZzZXQuY2xpY2sudG9wPXMub2Zmc2V0LmNsaWNrLnRvcCxhLm9mZnNldC5jbGljay5sZWZ0PXMub2Zmc2V0LmNsaWNrLmxlZnQsYS5vZmZzZXQucGFyZW50LmxlZnQtPXMub2Zmc2V0LnBhcmVudC5sZWZ0LWEub2Zmc2V0LnBhcmVudC5sZWZ0LGEub2Zmc2V0LnBhcmVudC50b3AtPXMub2Zmc2V0LnBhcmVudC50b3AtYS5vZmZzZXQucGFyZW50LnRvcCxzLl90cmlnZ2VyKFwidG9Tb3J0YWJsZVwiLHQpLHMuZHJvcHBlZD1hLmVsZW1lbnQsZS5lYWNoKHMuc29ydGFibGVzLGZ1bmN0aW9uKCl7dGhpcy5yZWZyZXNoUG9zaXRpb25zKCl9KSxzLmN1cnJlbnRJdGVtPXMuZWxlbWVudCxhLmZyb21PdXRzaWRlPXMpLGEuY3VycmVudEl0ZW0mJihhLl9tb3VzZURyYWcodCksaS5wb3NpdGlvbj1hLnBvc2l0aW9uKSk6YS5pc092ZXImJihhLmlzT3Zlcj0wLGEuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMCxhLm9wdGlvbnMuX3JldmVydD1hLm9wdGlvbnMucmV2ZXJ0LGEub3B0aW9ucy5yZXZlcnQ9ITEsYS5fdHJpZ2dlcihcIm91dFwiLHQsYS5fdWlIYXNoKGEpKSxhLl9tb3VzZVN0b3AodCwhMCksYS5vcHRpb25zLnJldmVydD1hLm9wdGlvbnMuX3JldmVydCxhLm9wdGlvbnMuaGVscGVyPWEub3B0aW9ucy5faGVscGVyLGEucGxhY2Vob2xkZXImJmEucGxhY2Vob2xkZXIucmVtb3ZlKCksaS5oZWxwZXIuYXBwZW5kVG8ocy5fcGFyZW50KSxzLl9yZWZyZXNoT2Zmc2V0cyh0KSxpLnBvc2l0aW9uPXMuX2dlbmVyYXRlUG9zaXRpb24odCwhMCkscy5fdHJpZ2dlcihcImZyb21Tb3J0YWJsZVwiLHQpLHMuZHJvcHBlZD0hMSxlLmVhY2gocy5zb3J0YWJsZXMsZnVuY3Rpb24oKXt0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKX0pKX0pfX0pLGUudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLFwiY3Vyc29yXCIse3N0YXJ0OmZ1bmN0aW9uKHQsaSxzKXt2YXIgbj1lKFwiYm9keVwiKSxhPXMub3B0aW9ucztuLmNzcyhcImN1cnNvclwiKSYmKGEuX2N1cnNvcj1uLmNzcyhcImN1cnNvclwiKSksbi5jc3MoXCJjdXJzb3JcIixhLmN1cnNvcil9LHN0b3A6ZnVuY3Rpb24odCxpLHMpe3ZhciBuPXMub3B0aW9ucztuLl9jdXJzb3ImJmUoXCJib2R5XCIpLmNzcyhcImN1cnNvclwiLG4uX2N1cnNvcil9fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJvcGFjaXR5XCIse3N0YXJ0OmZ1bmN0aW9uKHQsaSxzKXt2YXIgbj1lKGkuaGVscGVyKSxhPXMub3B0aW9ucztuLmNzcyhcIm9wYWNpdHlcIikmJihhLl9vcGFjaXR5PW4uY3NzKFwib3BhY2l0eVwiKSksbi5jc3MoXCJvcGFjaXR5XCIsYS5vcGFjaXR5KX0sc3RvcDpmdW5jdGlvbih0LGkscyl7dmFyIG49cy5vcHRpb25zO24uX29wYWNpdHkmJmUoaS5oZWxwZXIpLmNzcyhcIm9wYWNpdHlcIixuLl9vcGFjaXR5KX19KSxlLnVpLnBsdWdpbi5hZGQoXCJkcmFnZ2FibGVcIixcInNjcm9sbFwiLHtzdGFydDpmdW5jdGlvbihlLHQsaSl7aS5zY3JvbGxQYXJlbnROb3RIaWRkZW58fChpLnNjcm9sbFBhcmVudE5vdEhpZGRlbj1pLmhlbHBlci5zY3JvbGxQYXJlbnQoITEpKSxpLnNjcm9sbFBhcmVudE5vdEhpZGRlblswXSE9PWkuZG9jdW1lbnRbMF0mJlwiSFRNTFwiIT09aS5zY3JvbGxQYXJlbnROb3RIaWRkZW5bMF0udGFnTmFtZSYmKGkub3ZlcmZsb3dPZmZzZXQ9aS5zY3JvbGxQYXJlbnROb3RIaWRkZW4ub2Zmc2V0KCkpfSxkcmFnOmZ1bmN0aW9uKHQsaSxzKXt2YXIgbj1zLm9wdGlvbnMsYT0hMSxvPXMuc2Nyb2xsUGFyZW50Tm90SGlkZGVuWzBdLHI9cy5kb2N1bWVudFswXTtvIT09ciYmXCJIVE1MXCIhPT1vLnRhZ05hbWU/KG4uYXhpcyYmXCJ4XCI9PT1uLmF4aXN8fChzLm92ZXJmbG93T2Zmc2V0LnRvcCtvLm9mZnNldEhlaWdodC10LnBhZ2VZPG4uc2Nyb2xsU2Vuc2l0aXZpdHk/by5zY3JvbGxUb3A9YT1vLnNjcm9sbFRvcCtuLnNjcm9sbFNwZWVkOnQucGFnZVktcy5vdmVyZmxvd09mZnNldC50b3A8bi5zY3JvbGxTZW5zaXRpdml0eSYmKG8uc2Nyb2xsVG9wPWE9by5zY3JvbGxUb3Atbi5zY3JvbGxTcGVlZCkpLG4uYXhpcyYmXCJ5XCI9PT1uLmF4aXN8fChzLm92ZXJmbG93T2Zmc2V0LmxlZnQrby5vZmZzZXRXaWR0aC10LnBhZ2VYPG4uc2Nyb2xsU2Vuc2l0aXZpdHk/by5zY3JvbGxMZWZ0PWE9by5zY3JvbGxMZWZ0K24uc2Nyb2xsU3BlZWQ6dC5wYWdlWC1zLm92ZXJmbG93T2Zmc2V0LmxlZnQ8bi5zY3JvbGxTZW5zaXRpdml0eSYmKG8uc2Nyb2xsTGVmdD1hPW8uc2Nyb2xsTGVmdC1uLnNjcm9sbFNwZWVkKSkpOihuLmF4aXMmJlwieFwiPT09bi5heGlzfHwodC5wYWdlWS1lKHIpLnNjcm9sbFRvcCgpPG4uc2Nyb2xsU2Vuc2l0aXZpdHk/YT1lKHIpLnNjcm9sbFRvcChlKHIpLnNjcm9sbFRvcCgpLW4uc2Nyb2xsU3BlZWQpOmUod2luZG93KS5oZWlnaHQoKS0odC5wYWdlWS1lKHIpLnNjcm9sbFRvcCgpKTxuLnNjcm9sbFNlbnNpdGl2aXR5JiYoYT1lKHIpLnNjcm9sbFRvcChlKHIpLnNjcm9sbFRvcCgpK24uc2Nyb2xsU3BlZWQpKSksbi5heGlzJiZcInlcIj09PW4uYXhpc3x8KHQucGFnZVgtZShyKS5zY3JvbGxMZWZ0KCk8bi5zY3JvbGxTZW5zaXRpdml0eT9hPWUocikuc2Nyb2xsTGVmdChlKHIpLnNjcm9sbExlZnQoKS1uLnNjcm9sbFNwZWVkKTplKHdpbmRvdykud2lkdGgoKS0odC5wYWdlWC1lKHIpLnNjcm9sbExlZnQoKSk8bi5zY3JvbGxTZW5zaXRpdml0eSYmKGE9ZShyKS5zY3JvbGxMZWZ0KGUocikuc2Nyb2xsTGVmdCgpK24uc2Nyb2xsU3BlZWQpKSkpLGEhPT0hMSYmZS51aS5kZG1hbmFnZXImJiFuLmRyb3BCZWhhdmlvdXImJmUudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHMsdCl9fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJzbmFwXCIse3N0YXJ0OmZ1bmN0aW9uKHQsaSxzKXt2YXIgbj1zLm9wdGlvbnM7cy5zbmFwRWxlbWVudHM9W10sZShuLnNuYXAuY29uc3RydWN0b3IhPT1TdHJpbmc/bi5zbmFwLml0ZW1zfHxcIjpkYXRhKHVpLWRyYWdnYWJsZSlcIjpuLnNuYXApLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLGk9dC5vZmZzZXQoKTt0aGlzIT09cy5lbGVtZW50WzBdJiZzLnNuYXBFbGVtZW50cy5wdXNoKHtpdGVtOnRoaXMsd2lkdGg6dC5vdXRlcldpZHRoKCksaGVpZ2h0OnQub3V0ZXJIZWlnaHQoKSx0b3A6aS50b3AsbGVmdDppLmxlZnR9KX0pfSxkcmFnOmZ1bmN0aW9uKHQsaSxzKXt2YXIgbixhLG8scixoLGwsdSxkLGMscCxmPXMub3B0aW9ucyxtPWYuc25hcFRvbGVyYW5jZSxnPWkub2Zmc2V0LmxlZnQsdj1nK3MuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgseT1pLm9mZnNldC50b3AsYj15K3MuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0O2ZvcihjPXMuc25hcEVsZW1lbnRzLmxlbmd0aC0xO2M+PTA7Yy0tKWg9cy5zbmFwRWxlbWVudHNbY10ubGVmdC1zLm1hcmdpbnMubGVmdCxsPWgrcy5zbmFwRWxlbWVudHNbY10ud2lkdGgsdT1zLnNuYXBFbGVtZW50c1tjXS50b3Atcy5tYXJnaW5zLnRvcCxkPXUrcy5zbmFwRWxlbWVudHNbY10uaGVpZ2h0LGgtbT52fHxnPmwrbXx8dS1tPmJ8fHk+ZCttfHwhZS5jb250YWlucyhzLnNuYXBFbGVtZW50c1tjXS5pdGVtLm93bmVyRG9jdW1lbnQscy5zbmFwRWxlbWVudHNbY10uaXRlbSk/KHMuc25hcEVsZW1lbnRzW2NdLnNuYXBwaW5nJiZzLm9wdGlvbnMuc25hcC5yZWxlYXNlJiZzLm9wdGlvbnMuc25hcC5yZWxlYXNlLmNhbGwocy5lbGVtZW50LHQsZS5leHRlbmQocy5fdWlIYXNoKCkse3NuYXBJdGVtOnMuc25hcEVsZW1lbnRzW2NdLml0ZW19KSkscy5zbmFwRWxlbWVudHNbY10uc25hcHBpbmc9ITEpOihcImlubmVyXCIhPT1mLnNuYXBNb2RlJiYobj1tPj1NYXRoLmFicyh1LWIpLGE9bT49TWF0aC5hYnMoZC15KSxvPW0+PU1hdGguYWJzKGgtdikscj1tPj1NYXRoLmFicyhsLWcpLG4mJihpLnBvc2l0aW9uLnRvcD1zLl9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIse3RvcDp1LXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LGxlZnQ6MH0pLnRvcCksYSYmKGkucG9zaXRpb24udG9wPXMuX2NvbnZlcnRQb3NpdGlvblRvKFwicmVsYXRpdmVcIix7dG9wOmQsbGVmdDowfSkudG9wKSxvJiYoaS5wb3NpdGlvbi5sZWZ0PXMuX2NvbnZlcnRQb3NpdGlvblRvKFwicmVsYXRpdmVcIix7dG9wOjAsbGVmdDpoLXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGh9KS5sZWZ0KSxyJiYoaS5wb3NpdGlvbi5sZWZ0PXMuX2NvbnZlcnRQb3NpdGlvblRvKFwicmVsYXRpdmVcIix7dG9wOjAsbGVmdDpsfSkubGVmdCkpLHA9bnx8YXx8b3x8cixcIm91dGVyXCIhPT1mLnNuYXBNb2RlJiYobj1tPj1NYXRoLmFicyh1LXkpLGE9bT49TWF0aC5hYnMoZC1iKSxvPW0+PU1hdGguYWJzKGgtZykscj1tPj1NYXRoLmFicyhsLXYpLG4mJihpLnBvc2l0aW9uLnRvcD1zLl9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIse3RvcDp1LGxlZnQ6MH0pLnRvcCksYSYmKGkucG9zaXRpb24udG9wPXMuX2NvbnZlcnRQb3NpdGlvblRvKFwicmVsYXRpdmVcIix7dG9wOmQtcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsbGVmdDowfSkudG9wKSxvJiYoaS5wb3NpdGlvbi5sZWZ0PXMuX2NvbnZlcnRQb3NpdGlvblRvKFwicmVsYXRpdmVcIix7dG9wOjAsbGVmdDpofSkubGVmdCksciYmKGkucG9zaXRpb24ubGVmdD1zLl9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIse3RvcDowLGxlZnQ6bC1zLmhlbHBlclByb3BvcnRpb25zLndpZHRofSkubGVmdCkpLCFzLnNuYXBFbGVtZW50c1tjXS5zbmFwcGluZyYmKG58fGF8fG98fHJ8fHApJiZzLm9wdGlvbnMuc25hcC5zbmFwJiZzLm9wdGlvbnMuc25hcC5zbmFwLmNhbGwocy5lbGVtZW50LHQsZS5leHRlbmQocy5fdWlIYXNoKCkse3NuYXBJdGVtOnMuc25hcEVsZW1lbnRzW2NdLml0ZW19KSkscy5zbmFwRWxlbWVudHNbY10uc25hcHBpbmc9bnx8YXx8b3x8cnx8cCl9fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJzdGFja1wiLHtzdGFydDpmdW5jdGlvbih0LGkscyl7dmFyIG4sYT1zLm9wdGlvbnMsbz1lLm1ha2VBcnJheShlKGEuc3RhY2spKS5zb3J0KGZ1bmN0aW9uKHQsaSl7cmV0dXJuKHBhcnNlSW50KGUodCkuY3NzKFwiekluZGV4XCIpLDEwKXx8MCktKHBhcnNlSW50KGUoaSkuY3NzKFwiekluZGV4XCIpLDEwKXx8MCl9KTtvLmxlbmd0aCYmKG49cGFyc2VJbnQoZShvWzBdKS5jc3MoXCJ6SW5kZXhcIiksMTApfHwwLGUobykuZWFjaChmdW5jdGlvbih0KXtlKHRoaXMpLmNzcyhcInpJbmRleFwiLG4rdCl9KSx0aGlzLmNzcyhcInpJbmRleFwiLG4rby5sZW5ndGgpKX19KSxlLnVpLnBsdWdpbi5hZGQoXCJkcmFnZ2FibGVcIixcInpJbmRleFwiLHtzdGFydDpmdW5jdGlvbih0LGkscyl7dmFyIG49ZShpLmhlbHBlciksYT1zLm9wdGlvbnM7bi5jc3MoXCJ6SW5kZXhcIikmJihhLl96SW5kZXg9bi5jc3MoXCJ6SW5kZXhcIikpLG4uY3NzKFwiekluZGV4XCIsYS56SW5kZXgpfSxzdG9wOmZ1bmN0aW9uKHQsaSxzKXt2YXIgbj1zLm9wdGlvbnM7bi5fekluZGV4JiZlKGkuaGVscGVyKS5jc3MoXCJ6SW5kZXhcIixuLl96SW5kZXgpfX0pLGUudWkuZHJhZ2dhYmxlLGUud2lkZ2V0KFwidWkucmVzaXphYmxlXCIsZS51aS5tb3VzZSx7dmVyc2lvbjpcIjEuMTEuNFwiLHdpZGdldEV2ZW50UHJlZml4OlwicmVzaXplXCIsb3B0aW9uczp7YWxzb1Jlc2l6ZTohMSxhbmltYXRlOiExLGFuaW1hdGVEdXJhdGlvbjpcInNsb3dcIixhbmltYXRlRWFzaW5nOlwic3dpbmdcIixhc3BlY3RSYXRpbzohMSxhdXRvSGlkZTohMSxjb250YWlubWVudDohMSxnaG9zdDohMSxncmlkOiExLGhhbmRsZXM6XCJlLHMsc2VcIixoZWxwZXI6ITEsbWF4SGVpZ2h0Om51bGwsbWF4V2lkdGg6bnVsbCxtaW5IZWlnaHQ6MTAsbWluV2lkdGg6MTAsekluZGV4OjkwLHJlc2l6ZTpudWxsLHN0YXJ0Om51bGwsc3RvcDpudWxsfSxfbnVtOmZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUludChlLDEwKXx8MH0sX2lzTnVtYmVyOmZ1bmN0aW9uKGUpe3JldHVybiFpc05hTihwYXJzZUludChlLDEwKSl9LF9oYXNTY3JvbGw6ZnVuY3Rpb24odCxpKXtpZihcImhpZGRlblwiPT09ZSh0KS5jc3MoXCJvdmVyZmxvd1wiKSlyZXR1cm4hMTt2YXIgcz1pJiZcImxlZnRcIj09PWk/XCJzY3JvbGxMZWZ0XCI6XCJzY3JvbGxUb3BcIixuPSExO3JldHVybiB0W3NdPjA/ITA6KHRbc109MSxuPXRbc10+MCx0W3NdPTAsbil9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdCxpLHMsbixhLG89dGhpcyxyPXRoaXMub3B0aW9ucztpZih0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1yZXNpemFibGVcIiksZS5leHRlbmQodGhpcyx7X2FzcGVjdFJhdGlvOiEhci5hc3BlY3RSYXRpbyxhc3BlY3RSYXRpbzpyLmFzcGVjdFJhdGlvLG9yaWdpbmFsRWxlbWVudDp0aGlzLmVsZW1lbnQsX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHM6W10sX2hlbHBlcjpyLmhlbHBlcnx8ci5naG9zdHx8ci5hbmltYXRlP3IuaGVscGVyfHxcInVpLXJlc2l6YWJsZS1oZWxwZXJcIjpudWxsfSksdGhpcy5lbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC9eKGNhbnZhc3x0ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9ufGltZykkL2kpJiYodGhpcy5lbGVtZW50LndyYXAoZShcIjxkaXYgY2xhc3M9J3VpLXdyYXBwZXInIHN0eWxlPSdvdmVyZmxvdzogaGlkZGVuOyc+PC9kaXY+XCIpLmNzcyh7cG9zaXRpb246dGhpcy5lbGVtZW50LmNzcyhcInBvc2l0aW9uXCIpLHdpZHRoOnRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpLHRvcDp0aGlzLmVsZW1lbnQuY3NzKFwidG9wXCIpLGxlZnQ6dGhpcy5lbGVtZW50LmNzcyhcImxlZnRcIil9KSksdGhpcy5lbGVtZW50PXRoaXMuZWxlbWVudC5wYXJlbnQoKS5kYXRhKFwidWktcmVzaXphYmxlXCIsdGhpcy5lbGVtZW50LnJlc2l6YWJsZShcImluc3RhbmNlXCIpKSx0aGlzLmVsZW1lbnRJc1dyYXBwZXI9ITAsdGhpcy5lbGVtZW50LmNzcyh7bWFyZ2luTGVmdDp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoXCJtYXJnaW5MZWZ0XCIpLG1hcmdpblRvcDp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoXCJtYXJnaW5Ub3BcIiksbWFyZ2luUmlnaHQ6dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKFwibWFyZ2luUmlnaHRcIiksbWFyZ2luQm90dG9tOnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhcIm1hcmdpbkJvdHRvbVwiKX0pLHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7bWFyZ2luTGVmdDowLG1hcmdpblRvcDowLG1hcmdpblJpZ2h0OjAsbWFyZ2luQm90dG9tOjB9KSx0aGlzLm9yaWdpbmFsUmVzaXplU3R5bGU9dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKFwicmVzaXplXCIpLHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhcInJlc2l6ZVwiLFwibm9uZVwiKSx0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLnB1c2godGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHtwb3NpdGlvbjpcInN0YXRpY1wiLHpvb206MSxkaXNwbGF5OlwiYmxvY2tcIn0pKSx0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3Moe21hcmdpbjp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoXCJtYXJnaW5cIil9KSx0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpKSx0aGlzLmhhbmRsZXM9ci5oYW5kbGVzfHwoZShcIi51aS1yZXNpemFibGUtaGFuZGxlXCIsdGhpcy5lbGVtZW50KS5sZW5ndGg/e246XCIudWktcmVzaXphYmxlLW5cIixlOlwiLnVpLXJlc2l6YWJsZS1lXCIsczpcIi51aS1yZXNpemFibGUtc1wiLHc6XCIudWktcmVzaXphYmxlLXdcIixzZTpcIi51aS1yZXNpemFibGUtc2VcIixzdzpcIi51aS1yZXNpemFibGUtc3dcIixuZTpcIi51aS1yZXNpemFibGUtbmVcIixudzpcIi51aS1yZXNpemFibGUtbndcIn06XCJlLHMsc2VcIiksdGhpcy5faGFuZGxlcz1lKCksdGhpcy5oYW5kbGVzLmNvbnN0cnVjdG9yPT09U3RyaW5nKWZvcihcImFsbFwiPT09dGhpcy5oYW5kbGVzJiYodGhpcy5oYW5kbGVzPVwibixlLHMsdyxzZSxzdyxuZSxud1wiKSx0PXRoaXMuaGFuZGxlcy5zcGxpdChcIixcIiksdGhpcy5oYW5kbGVzPXt9LGk9MDt0Lmxlbmd0aD5pO2krKylzPWUudHJpbSh0W2ldKSxhPVwidWktcmVzaXphYmxlLVwiK3Msbj1lKFwiPGRpdiBjbGFzcz0ndWktcmVzaXphYmxlLWhhbmRsZSBcIithK1wiJz48L2Rpdj5cIiksbi5jc3Moe3pJbmRleDpyLnpJbmRleH0pLFwic2VcIj09PXMmJm4uYWRkQ2xhc3MoXCJ1aS1pY29uIHVpLWljb24tZ3JpcHNtYWxsLWRpYWdvbmFsLXNlXCIpLHRoaXMuaGFuZGxlc1tzXT1cIi51aS1yZXNpemFibGUtXCIrcyx0aGlzLmVsZW1lbnQuYXBwZW5kKG4pO3RoaXMuX3JlbmRlckF4aXM9ZnVuY3Rpb24odCl7dmFyIGkscyxuLGE7dD10fHx0aGlzLmVsZW1lbnQ7Zm9yKGkgaW4gdGhpcy5oYW5kbGVzKXRoaXMuaGFuZGxlc1tpXS5jb25zdHJ1Y3Rvcj09PVN0cmluZz90aGlzLmhhbmRsZXNbaV09dGhpcy5lbGVtZW50LmNoaWxkcmVuKHRoaXMuaGFuZGxlc1tpXSkuZmlyc3QoKS5zaG93KCk6KHRoaXMuaGFuZGxlc1tpXS5qcXVlcnl8fHRoaXMuaGFuZGxlc1tpXS5ub2RlVHlwZSkmJih0aGlzLmhhbmRsZXNbaV09ZSh0aGlzLmhhbmRsZXNbaV0pLHRoaXMuX29uKHRoaXMuaGFuZGxlc1tpXSx7bW91c2Vkb3duOm8uX21vdXNlRG93bn0pKSx0aGlzLmVsZW1lbnRJc1dyYXBwZXImJnRoaXMub3JpZ2luYWxFbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC9eKHRleHRhcmVhfGlucHV0fHNlbGVjdHxidXR0b24pJC9pKSYmKHM9ZSh0aGlzLmhhbmRsZXNbaV0sdGhpcy5lbGVtZW50KSxhPS9zd3xuZXxud3xzZXxufHMvLnRlc3QoaSk/cy5vdXRlckhlaWdodCgpOnMub3V0ZXJXaWR0aCgpLG49W1wicGFkZGluZ1wiLC9uZXxud3xuLy50ZXN0KGkpP1wiVG9wXCI6L3NlfHN3fHMvLnRlc3QoaSk/XCJCb3R0b21cIjovXmUkLy50ZXN0KGkpP1wiUmlnaHRcIjpcIkxlZnRcIl0uam9pbihcIlwiKSx0LmNzcyhuLGEpLHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCkpLHRoaXMuX2hhbmRsZXM9dGhpcy5faGFuZGxlcy5hZGQodGhpcy5oYW5kbGVzW2ldKX0sdGhpcy5fcmVuZGVyQXhpcyh0aGlzLmVsZW1lbnQpLHRoaXMuX2hhbmRsZXM9dGhpcy5faGFuZGxlcy5hZGQodGhpcy5lbGVtZW50LmZpbmQoXCIudWktcmVzaXphYmxlLWhhbmRsZVwiKSksdGhpcy5faGFuZGxlcy5kaXNhYmxlU2VsZWN0aW9uKCksdGhpcy5faGFuZGxlcy5tb3VzZW92ZXIoZnVuY3Rpb24oKXtvLnJlc2l6aW5nfHwodGhpcy5jbGFzc05hbWUmJihuPXRoaXMuY2xhc3NOYW1lLm1hdGNoKC91aS1yZXNpemFibGUtKHNlfHN3fG5lfG53fG58ZXxzfHcpL2kpKSxvLmF4aXM9biYmblsxXT9uWzFdOlwic2VcIil9KSxyLmF1dG9IaWRlJiYodGhpcy5faGFuZGxlcy5oaWRlKCksZSh0aGlzLmVsZW1lbnQpLmFkZENsYXNzKFwidWktcmVzaXphYmxlLWF1dG9oaWRlXCIpLm1vdXNlZW50ZXIoZnVuY3Rpb24oKXtyLmRpc2FibGVkfHwoZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLXJlc2l6YWJsZS1hdXRvaGlkZVwiKSxvLl9oYW5kbGVzLnNob3coKSl9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCl7ci5kaXNhYmxlZHx8by5yZXNpemluZ3x8KGUodGhpcykuYWRkQ2xhc3MoXCJ1aS1yZXNpemFibGUtYXV0b2hpZGVcIiksby5faGFuZGxlcy5oaWRlKCkpfSkpLHRoaXMuX21vdXNlSW5pdCgpfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX21vdXNlRGVzdHJveSgpO3ZhciB0LGk9ZnVuY3Rpb24odCl7ZSh0KS5yZW1vdmVDbGFzcyhcInVpLXJlc2l6YWJsZSB1aS1yZXNpemFibGUtZGlzYWJsZWQgdWktcmVzaXphYmxlLXJlc2l6aW5nXCIpLnJlbW92ZURhdGEoXCJyZXNpemFibGVcIikucmVtb3ZlRGF0YShcInVpLXJlc2l6YWJsZVwiKS51bmJpbmQoXCIucmVzaXphYmxlXCIpLmZpbmQoXCIudWktcmVzaXphYmxlLWhhbmRsZVwiKS5yZW1vdmUoKX07cmV0dXJuIHRoaXMuZWxlbWVudElzV3JhcHBlciYmKGkodGhpcy5lbGVtZW50KSx0PXRoaXMuZWxlbWVudCx0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3Moe3Bvc2l0aW9uOnQuY3NzKFwicG9zaXRpb25cIiksd2lkdGg6dC5vdXRlcldpZHRoKCksaGVpZ2h0OnQub3V0ZXJIZWlnaHQoKSx0b3A6dC5jc3MoXCJ0b3BcIiksbGVmdDp0LmNzcyhcImxlZnRcIil9KS5pbnNlcnRBZnRlcih0KSx0LnJlbW92ZSgpKSx0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoXCJyZXNpemVcIix0aGlzLm9yaWdpbmFsUmVzaXplU3R5bGUpLGkodGhpcy5vcmlnaW5hbEVsZW1lbnQpLHRoaXN9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24odCl7dmFyIGkscyxuPSExO2ZvcihpIGluIHRoaXMuaGFuZGxlcylzPWUodGhpcy5oYW5kbGVzW2ldKVswXSwocz09PXQudGFyZ2V0fHxlLmNvbnRhaW5zKHMsdC50YXJnZXQpKSYmKG49ITApO3JldHVybiF0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJm59LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBpLHMsbixhPXRoaXMub3B0aW9ucyxvPXRoaXMuZWxlbWVudDtyZXR1cm4gdGhpcy5yZXNpemluZz0hMCx0aGlzLl9yZW5kZXJQcm94eSgpLGk9dGhpcy5fbnVtKHRoaXMuaGVscGVyLmNzcyhcImxlZnRcIikpLHM9dGhpcy5fbnVtKHRoaXMuaGVscGVyLmNzcyhcInRvcFwiKSksYS5jb250YWlubWVudCYmKGkrPWUoYS5jb250YWlubWVudCkuc2Nyb2xsTGVmdCgpfHwwLHMrPWUoYS5jb250YWlubWVudCkuc2Nyb2xsVG9wKCl8fDApLHRoaXMub2Zmc2V0PXRoaXMuaGVscGVyLm9mZnNldCgpLHRoaXMucG9zaXRpb249e2xlZnQ6aSx0b3A6c30sdGhpcy5zaXplPXRoaXMuX2hlbHBlcj97d2lkdGg6dGhpcy5oZWxwZXIud2lkdGgoKSxoZWlnaHQ6dGhpcy5oZWxwZXIuaGVpZ2h0KCl9Ont3aWR0aDpvLndpZHRoKCksaGVpZ2h0Om8uaGVpZ2h0KCl9LHRoaXMub3JpZ2luYWxTaXplPXRoaXMuX2hlbHBlcj97d2lkdGg6by5vdXRlcldpZHRoKCksaGVpZ2h0Om8ub3V0ZXJIZWlnaHQoKX06e3dpZHRoOm8ud2lkdGgoKSxoZWlnaHQ6by5oZWlnaHQoKX0sdGhpcy5zaXplRGlmZj17d2lkdGg6by5vdXRlcldpZHRoKCktby53aWR0aCgpLGhlaWdodDpvLm91dGVySGVpZ2h0KCktby5oZWlnaHQoKX0sdGhpcy5vcmlnaW5hbFBvc2l0aW9uPXtsZWZ0OmksdG9wOnN9LHRoaXMub3JpZ2luYWxNb3VzZVBvc2l0aW9uPXtsZWZ0OnQucGFnZVgsdG9wOnQucGFnZVl9LHRoaXMuYXNwZWN0UmF0aW89XCJudW1iZXJcIj09dHlwZW9mIGEuYXNwZWN0UmF0aW8/YS5hc3BlY3RSYXRpbzp0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aC90aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHR8fDEsbj1lKFwiLnVpLXJlc2l6YWJsZS1cIit0aGlzLmF4aXMpLmNzcyhcImN1cnNvclwiKSxlKFwiYm9keVwiKS5jc3MoXCJjdXJzb3JcIixcImF1dG9cIj09PW4/dGhpcy5heGlzK1wiLXJlc2l6ZVwiOm4pLG8uYWRkQ2xhc3MoXCJ1aS1yZXNpemFibGUtcmVzaXppbmdcIiksdGhpcy5fcHJvcGFnYXRlKFwic3RhcnRcIix0KSwhMH0sX21vdXNlRHJhZzpmdW5jdGlvbih0KXt2YXIgaSxzLG49dGhpcy5vcmlnaW5hbE1vdXNlUG9zaXRpb24sYT10aGlzLmF4aXMsbz10LnBhZ2VYLW4ubGVmdHx8MCxyPXQucGFnZVktbi50b3B8fDAsaD10aGlzLl9jaGFuZ2VbYV07cmV0dXJuIHRoaXMuX3VwZGF0ZVByZXZQcm9wZXJ0aWVzKCksaD8oaT1oLmFwcGx5KHRoaXMsW3QsbyxyXSksdGhpcy5fdXBkYXRlVmlydHVhbEJvdW5kYXJpZXModC5zaGlmdEtleSksKHRoaXMuX2FzcGVjdFJhdGlvfHx0LnNoaWZ0S2V5KSYmKGk9dGhpcy5fdXBkYXRlUmF0aW8oaSx0KSksaT10aGlzLl9yZXNwZWN0U2l6ZShpLHQpLHRoaXMuX3VwZGF0ZUNhY2hlKGkpLHRoaXMuX3Byb3BhZ2F0ZShcInJlc2l6ZVwiLHQpLHM9dGhpcy5fYXBwbHlDaGFuZ2VzKCksIXRoaXMuX2hlbHBlciYmdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGgmJnRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCksZS5pc0VtcHR5T2JqZWN0KHMpfHwodGhpcy5fdXBkYXRlUHJldlByb3BlcnRpZXMoKSx0aGlzLl90cmlnZ2VyKFwicmVzaXplXCIsdCx0aGlzLnVpKCkpLHRoaXMuX2FwcGx5Q2hhbmdlcygpKSwhMSk6ITF9LF9tb3VzZVN0b3A6ZnVuY3Rpb24odCl7dGhpcy5yZXNpemluZz0hMTt2YXIgaSxzLG4sYSxvLHIsaCxsPXRoaXMub3B0aW9ucyx1PXRoaXM7cmV0dXJuIHRoaXMuX2hlbHBlciYmKGk9dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cyxzPWkubGVuZ3RoJiYvdGV4dGFyZWEvaS50ZXN0KGlbMF0ubm9kZU5hbWUpLG49cyYmdGhpcy5faGFzU2Nyb2xsKGlbMF0sXCJsZWZ0XCIpPzA6dS5zaXplRGlmZi5oZWlnaHQsYT1zPzA6dS5zaXplRGlmZi53aWR0aCxvPXt3aWR0aDp1LmhlbHBlci53aWR0aCgpLWEsaGVpZ2h0OnUuaGVscGVyLmhlaWdodCgpLW59LHI9cGFyc2VJbnQodS5lbGVtZW50LmNzcyhcImxlZnRcIiksMTApKyh1LnBvc2l0aW9uLmxlZnQtdS5vcmlnaW5hbFBvc2l0aW9uLmxlZnQpfHxudWxsLGg9cGFyc2VJbnQodS5lbGVtZW50LmNzcyhcInRvcFwiKSwxMCkrKHUucG9zaXRpb24udG9wLXUub3JpZ2luYWxQb3NpdGlvbi50b3ApfHxudWxsLGwuYW5pbWF0ZXx8dGhpcy5lbGVtZW50LmNzcyhlLmV4dGVuZChvLHt0b3A6aCxsZWZ0OnJ9KSksdS5oZWxwZXIuaGVpZ2h0KHUuc2l6ZS5oZWlnaHQpLHUuaGVscGVyLndpZHRoKHUuc2l6ZS53aWR0aCksdGhpcy5faGVscGVyJiYhbC5hbmltYXRlJiZ0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpKSxlKFwiYm9keVwiKS5jc3MoXCJjdXJzb3JcIixcImF1dG9cIiksdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktcmVzaXphYmxlLXJlc2l6aW5nXCIpLHRoaXMuX3Byb3BhZ2F0ZShcInN0b3BcIix0KSx0aGlzLl9oZWxwZXImJnRoaXMuaGVscGVyLnJlbW92ZSgpLCExfSxfdXBkYXRlUHJldlByb3BlcnRpZXM6ZnVuY3Rpb24oKXt0aGlzLnByZXZQb3NpdGlvbj17dG9wOnRoaXMucG9zaXRpb24udG9wLGxlZnQ6dGhpcy5wb3NpdGlvbi5sZWZ0fSx0aGlzLnByZXZTaXplPXt3aWR0aDp0aGlzLnNpemUud2lkdGgsaGVpZ2h0OnRoaXMuc2l6ZS5oZWlnaHR9fSxfYXBwbHlDaGFuZ2VzOmZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIHRoaXMucG9zaXRpb24udG9wIT09dGhpcy5wcmV2UG9zaXRpb24udG9wJiYoZS50b3A9dGhpcy5wb3NpdGlvbi50b3ArXCJweFwiKSx0aGlzLnBvc2l0aW9uLmxlZnQhPT10aGlzLnByZXZQb3NpdGlvbi5sZWZ0JiYoZS5sZWZ0PXRoaXMucG9zaXRpb24ubGVmdCtcInB4XCIpLHRoaXMuc2l6ZS53aWR0aCE9PXRoaXMucHJldlNpemUud2lkdGgmJihlLndpZHRoPXRoaXMuc2l6ZS53aWR0aCtcInB4XCIpLHRoaXMuc2l6ZS5oZWlnaHQhPT10aGlzLnByZXZTaXplLmhlaWdodCYmKGUuaGVpZ2h0PXRoaXMuc2l6ZS5oZWlnaHQrXCJweFwiKSx0aGlzLmhlbHBlci5jc3MoZSksZX0sX3VwZGF0ZVZpcnR1YWxCb3VuZGFyaWVzOmZ1bmN0aW9uKGUpe3ZhciB0LGkscyxuLGEsbz10aGlzLm9wdGlvbnM7YT17bWluV2lkdGg6dGhpcy5faXNOdW1iZXIoby5taW5XaWR0aCk/by5taW5XaWR0aDowLG1heFdpZHRoOnRoaXMuX2lzTnVtYmVyKG8ubWF4V2lkdGgpP28ubWF4V2lkdGg6MS8wLG1pbkhlaWdodDp0aGlzLl9pc051bWJlcihvLm1pbkhlaWdodCk/by5taW5IZWlnaHQ6MCxtYXhIZWlnaHQ6dGhpcy5faXNOdW1iZXIoby5tYXhIZWlnaHQpP28ubWF4SGVpZ2h0OjEvMH0sKHRoaXMuX2FzcGVjdFJhdGlvfHxlKSYmKHQ9YS5taW5IZWlnaHQqdGhpcy5hc3BlY3RSYXRpbyxzPWEubWluV2lkdGgvdGhpcy5hc3BlY3RSYXRpbyxpPWEubWF4SGVpZ2h0KnRoaXMuYXNwZWN0UmF0aW8sbj1hLm1heFdpZHRoL3RoaXMuYXNwZWN0UmF0aW8sdD5hLm1pbldpZHRoJiYoYS5taW5XaWR0aD10KSxzPmEubWluSGVpZ2h0JiYoYS5taW5IZWlnaHQ9cyksYS5tYXhXaWR0aD5pJiYoYS5tYXhXaWR0aD1pKSxhLm1heEhlaWdodD5uJiYoYS5tYXhIZWlnaHQ9bikpLHRoaXMuX3ZCb3VuZGFyaWVzPWF9LF91cGRhdGVDYWNoZTpmdW5jdGlvbihlKXt0aGlzLm9mZnNldD10aGlzLmhlbHBlci5vZmZzZXQoKSx0aGlzLl9pc051bWJlcihlLmxlZnQpJiYodGhpcy5wb3NpdGlvbi5sZWZ0PWUubGVmdCksdGhpcy5faXNOdW1iZXIoZS50b3ApJiYodGhpcy5wb3NpdGlvbi50b3A9ZS50b3ApLHRoaXMuX2lzTnVtYmVyKGUuaGVpZ2h0KSYmKHRoaXMuc2l6ZS5oZWlnaHQ9ZS5oZWlnaHQpLHRoaXMuX2lzTnVtYmVyKGUud2lkdGgpJiYodGhpcy5zaXplLndpZHRoPWUud2lkdGgpfSxfdXBkYXRlUmF0aW86ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wb3NpdGlvbixpPXRoaXMuc2l6ZSxzPXRoaXMuYXhpcztyZXR1cm4gdGhpcy5faXNOdW1iZXIoZS5oZWlnaHQpP2Uud2lkdGg9ZS5oZWlnaHQqdGhpcy5hc3BlY3RSYXRpbzp0aGlzLl9pc051bWJlcihlLndpZHRoKSYmKGUuaGVpZ2h0PWUud2lkdGgvdGhpcy5hc3BlY3RSYXRpbyksXCJzd1wiPT09cyYmKGUubGVmdD10LmxlZnQrKGkud2lkdGgtZS53aWR0aCksZS50b3A9bnVsbCksXCJud1wiPT09cyYmKGUudG9wPXQudG9wKyhpLmhlaWdodC1lLmhlaWdodCksZS5sZWZ0PXQubGVmdCsoaS53aWR0aC1lLndpZHRoKSksZX0sX3Jlc3BlY3RTaXplOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3ZCb3VuZGFyaWVzLGk9dGhpcy5heGlzLHM9dGhpcy5faXNOdW1iZXIoZS53aWR0aCkmJnQubWF4V2lkdGgmJnQubWF4V2lkdGg8ZS53aWR0aCxuPXRoaXMuX2lzTnVtYmVyKGUuaGVpZ2h0KSYmdC5tYXhIZWlnaHQmJnQubWF4SGVpZ2h0PGUuaGVpZ2h0LGE9dGhpcy5faXNOdW1iZXIoZS53aWR0aCkmJnQubWluV2lkdGgmJnQubWluV2lkdGg+ZS53aWR0aCxvPXRoaXMuX2lzTnVtYmVyKGUuaGVpZ2h0KSYmdC5taW5IZWlnaHQmJnQubWluSGVpZ2h0PmUuaGVpZ2h0LHI9dGhpcy5vcmlnaW5hbFBvc2l0aW9uLmxlZnQrdGhpcy5vcmlnaW5hbFNpemUud2lkdGgsaD10aGlzLnBvc2l0aW9uLnRvcCt0aGlzLnNpemUuaGVpZ2h0LGw9L3N3fG53fHcvLnRlc3QoaSksdT0vbnd8bmV8bi8udGVzdChpKTtyZXR1cm4gYSYmKGUud2lkdGg9dC5taW5XaWR0aCksbyYmKGUuaGVpZ2h0PXQubWluSGVpZ2h0KSxzJiYoZS53aWR0aD10Lm1heFdpZHRoKSxuJiYoZS5oZWlnaHQ9dC5tYXhIZWlnaHQpLGEmJmwmJihlLmxlZnQ9ci10Lm1pbldpZHRoKSxzJiZsJiYoZS5sZWZ0PXItdC5tYXhXaWR0aCksbyYmdSYmKGUudG9wPWgtdC5taW5IZWlnaHQpLG4mJnUmJihlLnRvcD1oLXQubWF4SGVpZ2h0KSxlLndpZHRofHxlLmhlaWdodHx8ZS5sZWZ0fHwhZS50b3A/ZS53aWR0aHx8ZS5oZWlnaHR8fGUudG9wfHwhZS5sZWZ0fHwoZS5sZWZ0PW51bGwpOmUudG9wPW51bGwsZX0sX2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9uczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxpPVtdLHM9W2UuY3NzKFwiYm9yZGVyVG9wV2lkdGhcIiksZS5jc3MoXCJib3JkZXJSaWdodFdpZHRoXCIpLGUuY3NzKFwiYm9yZGVyQm90dG9tV2lkdGhcIiksZS5jc3MoXCJib3JkZXJMZWZ0V2lkdGhcIildLG49W2UuY3NzKFwicGFkZGluZ1RvcFwiKSxlLmNzcyhcInBhZGRpbmdSaWdodFwiKSxlLmNzcyhcInBhZGRpbmdCb3R0b21cIiksZS5jc3MoXCJwYWRkaW5nTGVmdFwiKV07ND50O3QrKylpW3RdPXBhcnNlSW50KHNbdF0sMTApfHwwLGlbdF0rPXBhcnNlSW50KG5bdF0sMTApfHwwO3JldHVybntoZWlnaHQ6aVswXStpWzJdLHdpZHRoOmlbMV0raVszXX19LF9wcm9wb3J0aW9uYWxseVJlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMubGVuZ3RoKWZvcih2YXIgZSx0PTAsaT10aGlzLmhlbHBlcnx8dGhpcy5lbGVtZW50O3RoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMubGVuZ3RoPnQ7dCsrKWU9dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50c1t0XSx0aGlzLm91dGVyRGltZW5zaW9uc3x8KHRoaXMub3V0ZXJEaW1lbnNpb25zPXRoaXMuX2dldFBhZGRpbmdQbHVzQm9yZGVyRGltZW5zaW9ucyhlKSksZS5jc3Moe2hlaWdodDppLmhlaWdodCgpLXRoaXMub3V0ZXJEaW1lbnNpb25zLmhlaWdodHx8MCx3aWR0aDppLndpZHRoKCktdGhpcy5vdXRlckRpbWVuc2lvbnMud2lkdGh8fDB9KX0sX3JlbmRlclByb3h5OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LGk9dGhpcy5vcHRpb25zO3RoaXMuZWxlbWVudE9mZnNldD10Lm9mZnNldCgpLHRoaXMuX2hlbHBlcj8odGhpcy5oZWxwZXI9dGhpcy5oZWxwZXJ8fGUoXCI8ZGl2IHN0eWxlPSdvdmVyZmxvdzpoaWRkZW47Jz48L2Rpdj5cIiksdGhpcy5oZWxwZXIuYWRkQ2xhc3ModGhpcy5faGVscGVyKS5jc3Moe3dpZHRoOnRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCktMSxoZWlnaHQ6dGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCktMSxwb3NpdGlvbjpcImFic29sdXRlXCIsbGVmdDp0aGlzLmVsZW1lbnRPZmZzZXQubGVmdCtcInB4XCIsdG9wOnRoaXMuZWxlbWVudE9mZnNldC50b3ArXCJweFwiLHpJbmRleDorK2kuekluZGV4fSksdGhpcy5oZWxwZXIuYXBwZW5kVG8oXCJib2R5XCIpLmRpc2FibGVTZWxlY3Rpb24oKSk6dGhpcy5oZWxwZXI9dGhpcy5lbGVtZW50fSxfY2hhbmdlOntlOmZ1bmN0aW9uKGUsdCl7cmV0dXJue3dpZHRoOnRoaXMub3JpZ2luYWxTaXplLndpZHRoK3R9fSx3OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5vcmlnaW5hbFNpemUscz10aGlzLm9yaWdpbmFsUG9zaXRpb247cmV0dXJue2xlZnQ6cy5sZWZ0K3Qsd2lkdGg6aS53aWR0aC10fX0sbjpmdW5jdGlvbihlLHQsaSl7dmFyIHM9dGhpcy5vcmlnaW5hbFNpemUsbj10aGlzLm9yaWdpbmFsUG9zaXRpb247cmV0dXJue3RvcDpuLnRvcCtpLGhlaWdodDpzLmhlaWdodC1pfX0sczpmdW5jdGlvbihlLHQsaSl7cmV0dXJue2hlaWdodDp0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQraX19LHNlOmZ1bmN0aW9uKHQsaSxzKXtyZXR1cm4gZS5leHRlbmQodGhpcy5fY2hhbmdlLnMuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsW3QsaSxzXSkpfSxzdzpmdW5jdGlvbih0LGkscyl7cmV0dXJuIGUuZXh0ZW5kKHRoaXMuX2NoYW5nZS5zLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9jaGFuZ2Uudy5hcHBseSh0aGlzLFt0LGksc10pKX0sbmU6ZnVuY3Rpb24odCxpLHMpe3JldHVybiBlLmV4dGVuZCh0aGlzLl9jaGFuZ2Uubi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fY2hhbmdlLmUuYXBwbHkodGhpcyxbdCxpLHNdKSl9LG53OmZ1bmN0aW9uKHQsaSxzKXtyZXR1cm4gZS5leHRlbmQodGhpcy5fY2hhbmdlLm4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS53LmFwcGx5KHRoaXMsW3QsaSxzXSkpfX0sX3Byb3BhZ2F0ZTpmdW5jdGlvbih0LGkpe2UudWkucGx1Z2luLmNhbGwodGhpcyx0LFtpLHRoaXMudWkoKV0pLFwicmVzaXplXCIhPT10JiZ0aGlzLl90cmlnZ2VyKHQsaSx0aGlzLnVpKCkpfSxwbHVnaW5zOnt9LHVpOmZ1bmN0aW9uKCl7cmV0dXJue29yaWdpbmFsRWxlbWVudDp0aGlzLm9yaWdpbmFsRWxlbWVudCxlbGVtZW50OnRoaXMuZWxlbWVudCxoZWxwZXI6dGhpcy5oZWxwZXIscG9zaXRpb246dGhpcy5wb3NpdGlvbixzaXplOnRoaXMuc2l6ZSxvcmlnaW5hbFNpemU6dGhpcy5vcmlnaW5hbFNpemUsb3JpZ2luYWxQb3NpdGlvbjp0aGlzLm9yaWdpbmFsUG9zaXRpb259fX0pLGUudWkucGx1Z2luLmFkZChcInJlc2l6YWJsZVwiLFwiYW5pbWF0ZVwiLHtzdG9wOmZ1bmN0aW9uKHQpe3ZhciBpPWUodGhpcykucmVzaXphYmxlKFwiaW5zdGFuY2VcIikscz1pLm9wdGlvbnMsbj1pLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLGE9bi5sZW5ndGgmJi90ZXh0YXJlYS9pLnRlc3QoblswXS5ub2RlTmFtZSksbz1hJiZpLl9oYXNTY3JvbGwoblswXSxcImxlZnRcIik/MDppLnNpemVEaWZmLmhlaWdodCxyPWE/MDppLnNpemVEaWZmLndpZHRoLGg9e3dpZHRoOmkuc2l6ZS53aWR0aC1yLGhlaWdodDppLnNpemUuaGVpZ2h0LW99LGw9cGFyc2VJbnQoaS5lbGVtZW50LmNzcyhcImxlZnRcIiksMTApKyhpLnBvc2l0aW9uLmxlZnQtaS5vcmlnaW5hbFBvc2l0aW9uLmxlZnQpfHxudWxsLHU9cGFyc2VJbnQoaS5lbGVtZW50LmNzcyhcInRvcFwiKSwxMCkrKGkucG9zaXRpb24udG9wLWkub3JpZ2luYWxQb3NpdGlvbi50b3ApfHxudWxsO2kuZWxlbWVudC5hbmltYXRlKGUuZXh0ZW5kKGgsdSYmbD97dG9wOnUsbGVmdDpsfTp7fSkse2R1cmF0aW9uOnMuYW5pbWF0ZUR1cmF0aW9uLGVhc2luZzpzLmFuaW1hdGVFYXNpbmcsc3RlcDpmdW5jdGlvbigpe3ZhciBzPXt3aWR0aDpwYXJzZUludChpLmVsZW1lbnQuY3NzKFwid2lkdGhcIiksMTApLGhlaWdodDpwYXJzZUludChpLmVsZW1lbnQuY3NzKFwiaGVpZ2h0XCIpLDEwKSx0b3A6cGFyc2VJbnQoaS5lbGVtZW50LmNzcyhcInRvcFwiKSwxMCksbGVmdDpwYXJzZUludChpLmVsZW1lbnQuY3NzKFwibGVmdFwiKSwxMCl9O24mJm4ubGVuZ3RoJiZlKG5bMF0pLmNzcyh7d2lkdGg6cy53aWR0aCxoZWlnaHQ6cy5oZWlnaHR9KSxpLl91cGRhdGVDYWNoZShzKSxpLl9wcm9wYWdhdGUoXCJyZXNpemVcIix0KX19KX19KSxlLnVpLnBsdWdpbi5hZGQoXCJyZXNpemFibGVcIixcImNvbnRhaW5tZW50XCIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIHQsaSxzLG4sYSxvLHIsaD1lKHRoaXMpLnJlc2l6YWJsZShcImluc3RhbmNlXCIpLGw9aC5vcHRpb25zLHU9aC5lbGVtZW50LGQ9bC5jb250YWlubWVudCxjPWQgaW5zdGFuY2VvZiBlP2QuZ2V0KDApOi9wYXJlbnQvLnRlc3QoZCk/dS5wYXJlbnQoKS5nZXQoMCk6ZDtjJiYoaC5jb250YWluZXJFbGVtZW50PWUoYyksL2RvY3VtZW50Ly50ZXN0KGQpfHxkPT09ZG9jdW1lbnQ/KGguY29udGFpbmVyT2Zmc2V0PXtsZWZ0OjAsdG9wOjB9LGguY29udGFpbmVyUG9zaXRpb249e2xlZnQ6MCx0b3A6MH0saC5wYXJlbnREYXRhPXtlbGVtZW50OmUoZG9jdW1lbnQpLGxlZnQ6MCx0b3A6MCx3aWR0aDplKGRvY3VtZW50KS53aWR0aCgpLGhlaWdodDplKGRvY3VtZW50KS5oZWlnaHQoKXx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodH0pOih0PWUoYyksaT1bXSxlKFtcIlRvcFwiLFwiUmlnaHRcIixcIkxlZnRcIixcIkJvdHRvbVwiXSkuZWFjaChmdW5jdGlvbihlLHMpe2lbZV09aC5fbnVtKHQuY3NzKFwicGFkZGluZ1wiK3MpKX0pLGguY29udGFpbmVyT2Zmc2V0PXQub2Zmc2V0KCksaC5jb250YWluZXJQb3NpdGlvbj10LnBvc2l0aW9uKCksaC5jb250YWluZXJTaXplPXtoZWlnaHQ6dC5pbm5lckhlaWdodCgpLWlbM10sd2lkdGg6dC5pbm5lcldpZHRoKCktaVsxXX0scz1oLmNvbnRhaW5lck9mZnNldCxuPWguY29udGFpbmVyU2l6ZS5oZWlnaHQsYT1oLmNvbnRhaW5lclNpemUud2lkdGgsbz1oLl9oYXNTY3JvbGwoYyxcImxlZnRcIik/Yy5zY3JvbGxXaWR0aDphLHI9aC5faGFzU2Nyb2xsKGMpP2Muc2Nyb2xsSGVpZ2h0Om4saC5wYXJlbnREYXRhPXtlbGVtZW50OmMsbGVmdDpzLmxlZnQsdG9wOnMudG9wLHdpZHRoOm8saGVpZ2h0OnJ9KSl9LHJlc2l6ZTpmdW5jdGlvbih0KXt2YXIgaSxzLG4sYSxvPWUodGhpcykucmVzaXphYmxlKFwiaW5zdGFuY2VcIikscj1vLm9wdGlvbnMsaD1vLmNvbnRhaW5lck9mZnNldCxsPW8ucG9zaXRpb24sdT1vLl9hc3BlY3RSYXRpb3x8dC5zaGlmdEtleSxkPXt0b3A6MCxsZWZ0OjB9LGM9by5jb250YWluZXJFbGVtZW50LHA9ITA7Y1swXSE9PWRvY3VtZW50JiYvc3RhdGljLy50ZXN0KGMuY3NzKFwicG9zaXRpb25cIikpJiYoZD1oKSxsLmxlZnQ8KG8uX2hlbHBlcj9oLmxlZnQ6MCkmJihvLnNpemUud2lkdGg9by5zaXplLndpZHRoKyhvLl9oZWxwZXI/by5wb3NpdGlvbi5sZWZ0LWgubGVmdDpvLnBvc2l0aW9uLmxlZnQtZC5sZWZ0KSx1JiYoby5zaXplLmhlaWdodD1vLnNpemUud2lkdGgvby5hc3BlY3RSYXRpbyxwPSExKSxvLnBvc2l0aW9uLmxlZnQ9ci5oZWxwZXI/aC5sZWZ0OjApLGwudG9wPChvLl9oZWxwZXI/aC50b3A6MCkmJihvLnNpemUuaGVpZ2h0PW8uc2l6ZS5oZWlnaHQrKG8uX2hlbHBlcj9vLnBvc2l0aW9uLnRvcC1oLnRvcDpvLnBvc2l0aW9uLnRvcCksdSYmKG8uc2l6ZS53aWR0aD1vLnNpemUuaGVpZ2h0Km8uYXNwZWN0UmF0aW8scD0hMSksby5wb3NpdGlvbi50b3A9by5faGVscGVyP2gudG9wOjApLG49by5jb250YWluZXJFbGVtZW50LmdldCgwKT09PW8uZWxlbWVudC5wYXJlbnQoKS5nZXQoMCksYT0vcmVsYXRpdmV8YWJzb2x1dGUvLnRlc3Qoby5jb250YWluZXJFbGVtZW50LmNzcyhcInBvc2l0aW9uXCIpKSxuJiZhPyhvLm9mZnNldC5sZWZ0PW8ucGFyZW50RGF0YS5sZWZ0K28ucG9zaXRpb24ubGVmdCxvLm9mZnNldC50b3A9by5wYXJlbnREYXRhLnRvcCtvLnBvc2l0aW9uLnRvcCk6KG8ub2Zmc2V0LmxlZnQ9by5lbGVtZW50Lm9mZnNldCgpLmxlZnQsby5vZmZzZXQudG9wPW8uZWxlbWVudC5vZmZzZXQoKS50b3ApLGk9TWF0aC5hYnMoby5zaXplRGlmZi53aWR0aCsoby5faGVscGVyP28ub2Zmc2V0LmxlZnQtZC5sZWZ0Om8ub2Zmc2V0LmxlZnQtaC5sZWZ0KSkscz1NYXRoLmFicyhvLnNpemVEaWZmLmhlaWdodCsoby5faGVscGVyP28ub2Zmc2V0LnRvcC1kLnRvcDpvLm9mZnNldC50b3AtaC50b3ApKSxpK28uc2l6ZS53aWR0aD49by5wYXJlbnREYXRhLndpZHRoJiYoby5zaXplLndpZHRoPW8ucGFyZW50RGF0YS53aWR0aC1pLHUmJihvLnNpemUuaGVpZ2h0PW8uc2l6ZS53aWR0aC9vLmFzcGVjdFJhdGlvLHA9ITEpKSxzK28uc2l6ZS5oZWlnaHQ+PW8ucGFyZW50RGF0YS5oZWlnaHQmJihvLnNpemUuaGVpZ2h0PW8ucGFyZW50RGF0YS5oZWlnaHQtcyx1JiYoby5zaXplLndpZHRoPW8uc2l6ZS5oZWlnaHQqby5hc3BlY3RSYXRpbyxwPSExKSkscHx8KG8ucG9zaXRpb24ubGVmdD1vLnByZXZQb3NpdGlvbi5sZWZ0LG8ucG9zaXRpb24udG9wPW8ucHJldlBvc2l0aW9uLnRvcCxvLnNpemUud2lkdGg9by5wcmV2U2l6ZS53aWR0aCxvLnNpemUuaGVpZ2h0PW8ucHJldlNpemUuaGVpZ2h0KX0sc3RvcDpmdW5jdGlvbigpe3ZhciB0PWUodGhpcykucmVzaXphYmxlKFwiaW5zdGFuY2VcIiksaT10Lm9wdGlvbnMscz10LmNvbnRhaW5lck9mZnNldCxuPXQuY29udGFpbmVyUG9zaXRpb24sYT10LmNvbnRhaW5lckVsZW1lbnQsbz1lKHQuaGVscGVyKSxyPW8ub2Zmc2V0KCksaD1vLm91dGVyV2lkdGgoKS10LnNpemVEaWZmLndpZHRoLGw9by5vdXRlckhlaWdodCgpLXQuc2l6ZURpZmYuaGVpZ2h0O3QuX2hlbHBlciYmIWkuYW5pbWF0ZSYmL3JlbGF0aXZlLy50ZXN0KGEuY3NzKFwicG9zaXRpb25cIikpJiZlKHRoaXMpLmNzcyh7bGVmdDpyLmxlZnQtbi5sZWZ0LXMubGVmdCx3aWR0aDpoLGhlaWdodDpsfSksdC5faGVscGVyJiYhaS5hbmltYXRlJiYvc3RhdGljLy50ZXN0KGEuY3NzKFwicG9zaXRpb25cIikpJiZlKHRoaXMpLmNzcyh7bGVmdDpyLmxlZnQtbi5sZWZ0LXMubGVmdCx3aWR0aDpoLGhlaWdodDpsfSl9fSksZS51aS5wbHVnaW4uYWRkKFwicmVzaXphYmxlXCIsXCJhbHNvUmVzaXplXCIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5yZXNpemFibGUoXCJpbnN0YW5jZVwiKSxpPXQub3B0aW9ucztlKGkuYWxzb1Jlc2l6ZSkuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7dC5kYXRhKFwidWktcmVzaXphYmxlLWFsc29yZXNpemVcIix7d2lkdGg6cGFyc2VJbnQodC53aWR0aCgpLDEwKSxoZWlnaHQ6cGFyc2VJbnQodC5oZWlnaHQoKSwxMCksbGVmdDpwYXJzZUludCh0LmNzcyhcImxlZnRcIiksMTApLHRvcDpwYXJzZUludCh0LmNzcyhcInRvcFwiKSwxMCl9KX0pfSxyZXNpemU6ZnVuY3Rpb24odCxpKXt2YXIgcz1lKHRoaXMpLnJlc2l6YWJsZShcImluc3RhbmNlXCIpLG49cy5vcHRpb25zLGE9cy5vcmlnaW5hbFNpemUsbz1zLm9yaWdpbmFsUG9zaXRpb24scj17aGVpZ2h0OnMuc2l6ZS5oZWlnaHQtYS5oZWlnaHR8fDAsd2lkdGg6cy5zaXplLndpZHRoLWEud2lkdGh8fDAsdG9wOnMucG9zaXRpb24udG9wLW8udG9wfHwwLGxlZnQ6cy5wb3NpdGlvbi5sZWZ0LW8ubGVmdHx8MH07ZShuLmFsc29SZXNpemUpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLHM9ZSh0aGlzKS5kYXRhKFwidWktcmVzaXphYmxlLWFsc29yZXNpemVcIiksbj17fSxhPXQucGFyZW50cyhpLm9yaWdpbmFsRWxlbWVudFswXSkubGVuZ3RoP1tcIndpZHRoXCIsXCJoZWlnaHRcIl06W1wid2lkdGhcIixcImhlaWdodFwiLFwidG9wXCIsXCJsZWZ0XCJdO2UuZWFjaChhLGZ1bmN0aW9uKGUsdCl7dmFyIGk9KHNbdF18fDApKyhyW3RdfHwwKTtpJiZpPj0wJiYoblt0XT1pfHxudWxsKX0pLHQuY3NzKG4pfSl9LHN0b3A6ZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZURhdGEoXCJyZXNpemFibGUtYWxzb3Jlc2l6ZVwiKX19KSxlLnVpLnBsdWdpbi5hZGQoXCJyZXNpemFibGVcIixcImdob3N0XCIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5yZXNpemFibGUoXCJpbnN0YW5jZVwiKSxpPXQub3B0aW9ucyxzPXQuc2l6ZTt0Lmdob3N0PXQub3JpZ2luYWxFbGVtZW50LmNsb25lKCksdC5naG9zdC5jc3Moe29wYWNpdHk6LjI1LGRpc3BsYXk6XCJibG9ja1wiLHBvc2l0aW9uOlwicmVsYXRpdmVcIixoZWlnaHQ6cy5oZWlnaHQsd2lkdGg6cy53aWR0aCxtYXJnaW46MCxsZWZ0OjAsdG9wOjB9KS5hZGRDbGFzcyhcInVpLXJlc2l6YWJsZS1naG9zdFwiKS5hZGRDbGFzcyhcInN0cmluZ1wiPT10eXBlb2YgaS5naG9zdD9pLmdob3N0OlwiXCIpLHQuZ2hvc3QuYXBwZW5kVG8odC5oZWxwZXIpfSxyZXNpemU6ZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLnJlc2l6YWJsZShcImluc3RhbmNlXCIpO3QuZ2hvc3QmJnQuZ2hvc3QuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCIsaGVpZ2h0OnQuc2l6ZS5oZWlnaHQsd2lkdGg6dC5zaXplLndpZHRofSl9LHN0b3A6ZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLnJlc2l6YWJsZShcImluc3RhbmNlXCIpO3QuZ2hvc3QmJnQuaGVscGVyJiZ0LmhlbHBlci5nZXQoMCkucmVtb3ZlQ2hpbGQodC5naG9zdC5nZXQoMCkpfX0pLGUudWkucGx1Z2luLmFkZChcInJlc2l6YWJsZVwiLFwiZ3JpZFwiLHtyZXNpemU6ZnVuY3Rpb24oKXt2YXIgdCxpPWUodGhpcykucmVzaXphYmxlKFwiaW5zdGFuY2VcIikscz1pLm9wdGlvbnMsbj1pLnNpemUsYT1pLm9yaWdpbmFsU2l6ZSxvPWkub3JpZ2luYWxQb3NpdGlvbixyPWkuYXhpcyxoPVwibnVtYmVyXCI9PXR5cGVvZiBzLmdyaWQ/W3MuZ3JpZCxzLmdyaWRdOnMuZ3JpZCxsPWhbMF18fDEsdT1oWzFdfHwxLGQ9TWF0aC5yb3VuZCgobi53aWR0aC1hLndpZHRoKS9sKSpsLGM9TWF0aC5yb3VuZCgobi5oZWlnaHQtYS5oZWlnaHQpL3UpKnUscD1hLndpZHRoK2QsZj1hLmhlaWdodCtjLG09cy5tYXhXaWR0aCYmcD5zLm1heFdpZHRoLGc9cy5tYXhIZWlnaHQmJmY+cy5tYXhIZWlnaHQsdj1zLm1pbldpZHRoJiZzLm1pbldpZHRoPnAseT1zLm1pbkhlaWdodCYmcy5taW5IZWlnaHQ+ZjtzLmdyaWQ9aCx2JiYocCs9bCkseSYmKGYrPXUpLG0mJihwLT1sKSxnJiYoZi09dSksL14oc2V8c3xlKSQvLnRlc3Qocik/KGkuc2l6ZS53aWR0aD1wLGkuc2l6ZS5oZWlnaHQ9Zik6L14obmUpJC8udGVzdChyKT8oaS5zaXplLndpZHRoPXAsaS5zaXplLmhlaWdodD1mLGkucG9zaXRpb24udG9wPW8udG9wLWMpOi9eKHN3KSQvLnRlc3Qocik/KGkuc2l6ZS53aWR0aD1wLGkuc2l6ZS5oZWlnaHQ9ZixpLnBvc2l0aW9uLmxlZnQ9by5sZWZ0LWQpOigoMD49Zi11fHwwPj1wLWwpJiYodD1pLl9nZXRQYWRkaW5nUGx1c0JvcmRlckRpbWVuc2lvbnModGhpcykpLGYtdT4wPyhpLnNpemUuaGVpZ2h0PWYsaS5wb3NpdGlvbi50b3A9by50b3AtYyk6KGY9dS10LmhlaWdodCxpLnNpemUuaGVpZ2h0PWYsaS5wb3NpdGlvbi50b3A9by50b3ArYS5oZWlnaHQtZikscC1sPjA/KGkuc2l6ZS53aWR0aD1wLGkucG9zaXRpb24ubGVmdD1vLmxlZnQtZCk6KHA9bC10LndpZHRoLGkuc2l6ZS53aWR0aD1wLGkucG9zaXRpb24ubGVmdD1vLmxlZnQrYS53aWR0aC1wKSl9fSksZS51aS5yZXNpemFibGUsZS53aWRnZXQoXCJ1aS5kaWFsb2dcIix7dmVyc2lvbjpcIjEuMTEuNFwiLG9wdGlvbnM6e2FwcGVuZFRvOlwiYm9keVwiLGF1dG9PcGVuOiEwLGJ1dHRvbnM6W10sY2xvc2VPbkVzY2FwZTohMCxjbG9zZVRleHQ6XCJDbG9zZVwiLGRpYWxvZ0NsYXNzOlwiXCIsZHJhZ2dhYmxlOiEwLGhpZGU6bnVsbCxoZWlnaHQ6XCJhdXRvXCIsbWF4SGVpZ2h0Om51bGwsbWF4V2lkdGg6bnVsbCxtaW5IZWlnaHQ6MTUwLG1pbldpZHRoOjE1MCxtb2RhbDohMSxwb3NpdGlvbjp7bXk6XCJjZW50ZXJcIixhdDpcImNlbnRlclwiLG9mOndpbmRvdyxjb2xsaXNpb246XCJmaXRcIix1c2luZzpmdW5jdGlvbih0KXt2YXIgaT1lKHRoaXMpLmNzcyh0KS5vZmZzZXQoKS50b3A7MD5pJiZlKHRoaXMpLmNzcyhcInRvcFwiLHQudG9wLWkpfX0scmVzaXphYmxlOiEwLHNob3c6bnVsbCx0aXRsZTpudWxsLHdpZHRoOjMwMCxiZWZvcmVDbG9zZTpudWxsLGNsb3NlOm51bGwsZHJhZzpudWxsLGRyYWdTdGFydDpudWxsLGRyYWdTdG9wOm51bGwsZm9jdXM6bnVsbCxvcGVuOm51bGwscmVzaXplOm51bGwscmVzaXplU3RhcnQ6bnVsbCxyZXNpemVTdG9wOm51bGx9LHNpemVSZWxhdGVkT3B0aW9uczp7YnV0dG9uczohMCxoZWlnaHQ6ITAsbWF4SGVpZ2h0OiEwLG1heFdpZHRoOiEwLG1pbkhlaWdodDohMCxtaW5XaWR0aDohMCx3aWR0aDohMH0scmVzaXphYmxlUmVsYXRlZE9wdGlvbnM6e21heEhlaWdodDohMCxtYXhXaWR0aDohMCxtaW5IZWlnaHQ6ITAsbWluV2lkdGg6ITB9LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLm9yaWdpbmFsQ3NzPXtkaXNwbGF5OnRoaXMuZWxlbWVudFswXS5zdHlsZS5kaXNwbGF5LHdpZHRoOnRoaXMuZWxlbWVudFswXS5zdHlsZS53aWR0aCxtaW5IZWlnaHQ6dGhpcy5lbGVtZW50WzBdLnN0eWxlLm1pbkhlaWdodCxtYXhIZWlnaHQ6dGhpcy5lbGVtZW50WzBdLnN0eWxlLm1heEhlaWdodCxoZWlnaHQ6dGhpcy5lbGVtZW50WzBdLnN0eWxlLmhlaWdodH0sdGhpcy5vcmlnaW5hbFBvc2l0aW9uPXtwYXJlbnQ6dGhpcy5lbGVtZW50LnBhcmVudCgpLGluZGV4OnRoaXMuZWxlbWVudC5wYXJlbnQoKS5jaGlsZHJlbigpLmluZGV4KHRoaXMuZWxlbWVudCl9LHRoaXMub3JpZ2luYWxUaXRsZT10aGlzLmVsZW1lbnQuYXR0cihcInRpdGxlXCIpLHRoaXMub3B0aW9ucy50aXRsZT10aGlzLm9wdGlvbnMudGl0bGV8fHRoaXMub3JpZ2luYWxUaXRsZSx0aGlzLl9jcmVhdGVXcmFwcGVyKCksdGhpcy5lbGVtZW50LnNob3coKS5yZW1vdmVBdHRyKFwidGl0bGVcIikuYWRkQ2xhc3MoXCJ1aS1kaWFsb2ctY29udGVudCB1aS13aWRnZXQtY29udGVudFwiKS5hcHBlbmRUbyh0aGlzLnVpRGlhbG9nKSx0aGlzLl9jcmVhdGVUaXRsZWJhcigpLHRoaXMuX2NyZWF0ZUJ1dHRvblBhbmUoKSx0aGlzLm9wdGlvbnMuZHJhZ2dhYmxlJiZlLmZuLmRyYWdnYWJsZSYmdGhpcy5fbWFrZURyYWdnYWJsZSgpLHRoaXMub3B0aW9ucy5yZXNpemFibGUmJmUuZm4ucmVzaXphYmxlJiZ0aGlzLl9tYWtlUmVzaXphYmxlKCksdGhpcy5faXNPcGVuPSExLHRoaXMuX3RyYWNrRm9jdXMoKX0sX2luaXQ6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYXV0b09wZW4mJnRoaXMub3BlbigpfSxfYXBwZW5kVG86ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuYXBwZW5kVG87cmV0dXJuIHQmJih0LmpxdWVyeXx8dC5ub2RlVHlwZSk/ZSh0KTp0aGlzLmRvY3VtZW50LmZpbmQodHx8XCJib2R5XCIpLmVxKDApfSxfZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5vcmlnaW5hbFBvc2l0aW9uO3RoaXMuX3VudHJhY2tJbnN0YW5jZSgpLHRoaXMuX2Rlc3Ryb3lPdmVybGF5KCksdGhpcy5lbGVtZW50LnJlbW92ZVVuaXF1ZUlkKCkucmVtb3ZlQ2xhc3MoXCJ1aS1kaWFsb2ctY29udGVudCB1aS13aWRnZXQtY29udGVudFwiKS5jc3ModGhpcy5vcmlnaW5hbENzcykuZGV0YWNoKCksdGhpcy51aURpYWxvZy5zdG9wKCEwLCEwKS5yZW1vdmUoKSx0aGlzLm9yaWdpbmFsVGl0bGUmJnRoaXMuZWxlbWVudC5hdHRyKFwidGl0bGVcIix0aGlzLm9yaWdpbmFsVGl0bGUpLGU9dC5wYXJlbnQuY2hpbGRyZW4oKS5lcSh0LmluZGV4KSxlLmxlbmd0aCYmZVswXSE9PXRoaXMuZWxlbWVudFswXT9lLmJlZm9yZSh0aGlzLmVsZW1lbnQpOnQucGFyZW50LmFwcGVuZCh0aGlzLmVsZW1lbnQpfSx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51aURpYWxvZ30sZGlzYWJsZTplLm5vb3AsZW5hYmxlOmUubm9vcCxjbG9zZTpmdW5jdGlvbih0KXt2YXIgaSxzPXRoaXM7aWYodGhpcy5faXNPcGVuJiZ0aGlzLl90cmlnZ2VyKFwiYmVmb3JlQ2xvc2VcIix0KSE9PSExKXtpZih0aGlzLl9pc09wZW49ITEsdGhpcy5fZm9jdXNlZEVsZW1lbnQ9bnVsbCx0aGlzLl9kZXN0cm95T3ZlcmxheSgpLHRoaXMuX3VudHJhY2tJbnN0YW5jZSgpLCF0aGlzLm9wZW5lci5maWx0ZXIoXCI6Zm9jdXNhYmxlXCIpLmZvY3VzKCkubGVuZ3RoKXRyeXtpPXRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCxpJiZcImJvZHlcIiE9PWkubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmZShpKS5ibHVyKCl9Y2F0Y2gobil7fXRoaXMuX2hpZGUodGhpcy51aURpYWxvZyx0aGlzLm9wdGlvbnMuaGlkZSxmdW5jdGlvbigpe3MuX3RyaWdnZXIoXCJjbG9zZVwiLHQpfSl9fSxpc09wZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNPcGVufSxtb3ZlVG9Ub3A6ZnVuY3Rpb24oKXt0aGlzLl9tb3ZlVG9Ub3AoKX0sX21vdmVUb1RvcDpmdW5jdGlvbih0LGkpe3ZhciBzPSExLG49dGhpcy51aURpYWxvZy5zaWJsaW5ncyhcIi51aS1mcm9udDp2aXNpYmxlXCIpLm1hcChmdW5jdGlvbigpe3JldHVybitlKHRoaXMpLmNzcyhcInotaW5kZXhcIil9KS5nZXQoKSxhPU1hdGgubWF4LmFwcGx5KG51bGwsbik7cmV0dXJuIGE+PSt0aGlzLnVpRGlhbG9nLmNzcyhcInotaW5kZXhcIikmJih0aGlzLnVpRGlhbG9nLmNzcyhcInotaW5kZXhcIixhKzEpLHM9ITApLHMmJiFpJiZ0aGlzLl90cmlnZ2VyKFwiZm9jdXNcIix0KSxzfSxvcGVuOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5faXNPcGVuPyh0aGlzLl9tb3ZlVG9Ub3AoKSYmdGhpcy5fZm9jdXNUYWJiYWJsZSgpLHZvaWQgMCk6KHRoaXMuX2lzT3Blbj0hMCx0aGlzLm9wZW5lcj1lKHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCksdGhpcy5fc2l6ZSgpLHRoaXMuX3Bvc2l0aW9uKCksdGhpcy5fY3JlYXRlT3ZlcmxheSgpLHRoaXMuX21vdmVUb1RvcChudWxsLCEwKSx0aGlzLm92ZXJsYXkmJnRoaXMub3ZlcmxheS5jc3MoXCJ6LWluZGV4XCIsdGhpcy51aURpYWxvZy5jc3MoXCJ6LWluZGV4XCIpLTEpLHRoaXMuX3Nob3codGhpcy51aURpYWxvZyx0aGlzLm9wdGlvbnMuc2hvdyxmdW5jdGlvbigpe3QuX2ZvY3VzVGFiYmFibGUoKSx0Ll90cmlnZ2VyKFwiZm9jdXNcIil9KSx0aGlzLl9tYWtlRm9jdXNUYXJnZXQoKSx0aGlzLl90cmlnZ2VyKFwib3BlblwiKSx2b2lkIDApfSxfZm9jdXNUYWJiYWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2ZvY3VzZWRFbGVtZW50O2V8fChlPXRoaXMuZWxlbWVudC5maW5kKFwiW2F1dG9mb2N1c11cIikpLGUubGVuZ3RofHwoZT10aGlzLmVsZW1lbnQuZmluZChcIjp0YWJiYWJsZVwiKSksZS5sZW5ndGh8fChlPXRoaXMudWlEaWFsb2dCdXR0b25QYW5lLmZpbmQoXCI6dGFiYmFibGVcIikpLGUubGVuZ3RofHwoZT10aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZS5maWx0ZXIoXCI6dGFiYmFibGVcIikpLGUubGVuZ3RofHwoZT10aGlzLnVpRGlhbG9nKSxlLmVxKDApLmZvY3VzKCl9LF9rZWVwRm9jdXM6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gaSgpe3ZhciB0PXRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCxpPXRoaXMudWlEaWFsb2dbMF09PT10fHxlLmNvbnRhaW5zKHRoaXMudWlEaWFsb2dbMF0sdCk7aXx8dGhpcy5fZm9jdXNUYWJiYWJsZSgpfXQucHJldmVudERlZmF1bHQoKSxpLmNhbGwodGhpcyksdGhpcy5fZGVsYXkoaSl9LF9jcmVhdGVXcmFwcGVyOmZ1bmN0aW9uKCl7dGhpcy51aURpYWxvZz1lKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJ1aS1kaWFsb2cgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwgdWktZnJvbnQgXCIrdGhpcy5vcHRpb25zLmRpYWxvZ0NsYXNzKS5oaWRlKCkuYXR0cih7dGFiSW5kZXg6LTEscm9sZTpcImRpYWxvZ1wifSkuYXBwZW5kVG8odGhpcy5fYXBwZW5kVG8oKSksdGhpcy5fb24odGhpcy51aURpYWxvZyx7a2V5ZG93bjpmdW5jdGlvbih0KXtpZih0aGlzLm9wdGlvbnMuY2xvc2VPbkVzY2FwZSYmIXQuaXNEZWZhdWx0UHJldmVudGVkKCkmJnQua2V5Q29kZSYmdC5rZXlDb2RlPT09ZS51aS5rZXlDb2RlLkVTQ0FQRSlyZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuY2xvc2UodCksdm9pZCAwO1xuaWYodC5rZXlDb2RlPT09ZS51aS5rZXlDb2RlLlRBQiYmIXQuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBpPXRoaXMudWlEaWFsb2cuZmluZChcIjp0YWJiYWJsZVwiKSxzPWkuZmlsdGVyKFwiOmZpcnN0XCIpLG49aS5maWx0ZXIoXCI6bGFzdFwiKTt0LnRhcmdldCE9PW5bMF0mJnQudGFyZ2V0IT09dGhpcy51aURpYWxvZ1swXXx8dC5zaGlmdEtleT90LnRhcmdldCE9PXNbMF0mJnQudGFyZ2V0IT09dGhpcy51aURpYWxvZ1swXXx8IXQuc2hpZnRLZXl8fCh0aGlzLl9kZWxheShmdW5jdGlvbigpe24uZm9jdXMoKX0pLHQucHJldmVudERlZmF1bHQoKSk6KHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7cy5mb2N1cygpfSksdC5wcmV2ZW50RGVmYXVsdCgpKX19LG1vdXNlZG93bjpmdW5jdGlvbihlKXt0aGlzLl9tb3ZlVG9Ub3AoZSkmJnRoaXMuX2ZvY3VzVGFiYmFibGUoKX19KSx0aGlzLmVsZW1lbnQuZmluZChcIlthcmlhLWRlc2NyaWJlZGJ5XVwiKS5sZW5ndGh8fHRoaXMudWlEaWFsb2cuYXR0cih7XCJhcmlhLWRlc2NyaWJlZGJ5XCI6dGhpcy5lbGVtZW50LnVuaXF1ZUlkKCkuYXR0cihcImlkXCIpfSl9LF9jcmVhdGVUaXRsZWJhcjpmdW5jdGlvbigpe3ZhciB0O3RoaXMudWlEaWFsb2dUaXRsZWJhcj1lKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJ1aS1kaWFsb2ctdGl0bGViYXIgdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsIHVpLWhlbHBlci1jbGVhcmZpeFwiKS5wcmVwZW5kVG8odGhpcy51aURpYWxvZyksdGhpcy5fb24odGhpcy51aURpYWxvZ1RpdGxlYmFyLHttb3VzZWRvd246ZnVuY3Rpb24odCl7ZSh0LnRhcmdldCkuY2xvc2VzdChcIi51aS1kaWFsb2ctdGl0bGViYXItY2xvc2VcIil8fHRoaXMudWlEaWFsb2cuZm9jdXMoKX19KSx0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZT1lKFwiPGJ1dHRvbiB0eXBlPSdidXR0b24nPjwvYnV0dG9uPlwiKS5idXR0b24oe2xhYmVsOnRoaXMub3B0aW9ucy5jbG9zZVRleHQsaWNvbnM6e3ByaW1hcnk6XCJ1aS1pY29uLWNsb3NldGhpY2tcIn0sdGV4dDohMX0pLmFkZENsYXNzKFwidWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlXCIpLmFwcGVuZFRvKHRoaXMudWlEaWFsb2dUaXRsZWJhciksdGhpcy5fb24odGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2Use2NsaWNrOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLmNsb3NlKGUpfX0pLHQ9ZShcIjxzcGFuPlwiKS51bmlxdWVJZCgpLmFkZENsYXNzKFwidWktZGlhbG9nLXRpdGxlXCIpLnByZXBlbmRUbyh0aGlzLnVpRGlhbG9nVGl0bGViYXIpLHRoaXMuX3RpdGxlKHQpLHRoaXMudWlEaWFsb2cuYXR0cih7XCJhcmlhLWxhYmVsbGVkYnlcIjp0LmF0dHIoXCJpZFwiKX0pfSxfdGl0bGU6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLnRpdGxlfHxlLmh0bWwoXCImIzE2MDtcIiksZS50ZXh0KHRoaXMub3B0aW9ucy50aXRsZSl9LF9jcmVhdGVCdXR0b25QYW5lOmZ1bmN0aW9uKCl7dGhpcy51aURpYWxvZ0J1dHRvblBhbmU9ZShcIjxkaXY+XCIpLmFkZENsYXNzKFwidWktZGlhbG9nLWJ1dHRvbnBhbmUgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4XCIpLHRoaXMudWlCdXR0b25TZXQ9ZShcIjxkaXY+XCIpLmFkZENsYXNzKFwidWktZGlhbG9nLWJ1dHRvbnNldFwiKS5hcHBlbmRUbyh0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZSksdGhpcy5fY3JlYXRlQnV0dG9ucygpfSxfY3JlYXRlQnV0dG9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMsaT10aGlzLm9wdGlvbnMuYnV0dG9ucztyZXR1cm4gdGhpcy51aURpYWxvZ0J1dHRvblBhbmUucmVtb3ZlKCksdGhpcy51aUJ1dHRvblNldC5lbXB0eSgpLGUuaXNFbXB0eU9iamVjdChpKXx8ZS5pc0FycmF5KGkpJiYhaS5sZW5ndGg/KHRoaXMudWlEaWFsb2cucmVtb3ZlQ2xhc3MoXCJ1aS1kaWFsb2ctYnV0dG9uc1wiKSx2b2lkIDApOihlLmVhY2goaSxmdW5jdGlvbihpLHMpe3ZhciBuLGE7cz1lLmlzRnVuY3Rpb24ocyk/e2NsaWNrOnMsdGV4dDppfTpzLHM9ZS5leHRlbmQoe3R5cGU6XCJidXR0b25cIn0scyksbj1zLmNsaWNrLHMuY2xpY2s9ZnVuY3Rpb24oKXtuLmFwcGx5KHQuZWxlbWVudFswXSxhcmd1bWVudHMpfSxhPXtpY29uczpzLmljb25zLHRleHQ6cy5zaG93VGV4dH0sZGVsZXRlIHMuaWNvbnMsZGVsZXRlIHMuc2hvd1RleHQsZShcIjxidXR0b24+PC9idXR0b24+XCIscykuYnV0dG9uKGEpLmFwcGVuZFRvKHQudWlCdXR0b25TZXQpfSksdGhpcy51aURpYWxvZy5hZGRDbGFzcyhcInVpLWRpYWxvZy1idXR0b25zXCIpLHRoaXMudWlEaWFsb2dCdXR0b25QYW5lLmFwcGVuZFRvKHRoaXMudWlEaWFsb2cpLHZvaWQgMCl9LF9tYWtlRHJhZ2dhYmxlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtyZXR1cm57cG9zaXRpb246ZS5wb3NpdGlvbixvZmZzZXQ6ZS5vZmZzZXR9fXZhciBpPXRoaXMscz10aGlzLm9wdGlvbnM7dGhpcy51aURpYWxvZy5kcmFnZ2FibGUoe2NhbmNlbDpcIi51aS1kaWFsb2ctY29udGVudCwgLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZVwiLGhhbmRsZTpcIi51aS1kaWFsb2ctdGl0bGViYXJcIixjb250YWlubWVudDpcImRvY3VtZW50XCIsc3RhcnQ6ZnVuY3Rpb24ocyxuKXtlKHRoaXMpLmFkZENsYXNzKFwidWktZGlhbG9nLWRyYWdnaW5nXCIpLGkuX2Jsb2NrRnJhbWVzKCksaS5fdHJpZ2dlcihcImRyYWdTdGFydFwiLHMsdChuKSl9LGRyYWc6ZnVuY3Rpb24oZSxzKXtpLl90cmlnZ2VyKFwiZHJhZ1wiLGUsdChzKSl9LHN0b3A6ZnVuY3Rpb24obixhKXt2YXIgbz1hLm9mZnNldC5sZWZ0LWkuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpLHI9YS5vZmZzZXQudG9wLWkuZG9jdW1lbnQuc2Nyb2xsVG9wKCk7cy5wb3NpdGlvbj17bXk6XCJsZWZ0IHRvcFwiLGF0OlwibGVmdFwiKyhvPj0wP1wiK1wiOlwiXCIpK28rXCIgXCIrXCJ0b3BcIisocj49MD9cIitcIjpcIlwiKStyLG9mOmkud2luZG93fSxlKHRoaXMpLnJlbW92ZUNsYXNzKFwidWktZGlhbG9nLWRyYWdnaW5nXCIpLGkuX3VuYmxvY2tGcmFtZXMoKSxpLl90cmlnZ2VyKFwiZHJhZ1N0b3BcIixuLHQoYSkpfX0pfSxfbWFrZVJlc2l6YWJsZTpmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7cmV0dXJue29yaWdpbmFsUG9zaXRpb246ZS5vcmlnaW5hbFBvc2l0aW9uLG9yaWdpbmFsU2l6ZTplLm9yaWdpbmFsU2l6ZSxwb3NpdGlvbjplLnBvc2l0aW9uLHNpemU6ZS5zaXplfX12YXIgaT10aGlzLHM9dGhpcy5vcHRpb25zLG49cy5yZXNpemFibGUsYT10aGlzLnVpRGlhbG9nLmNzcyhcInBvc2l0aW9uXCIpLG89XCJzdHJpbmdcIj09dHlwZW9mIG4/bjpcIm4sZSxzLHcsc2Usc3csbmUsbndcIjt0aGlzLnVpRGlhbG9nLnJlc2l6YWJsZSh7Y2FuY2VsOlwiLnVpLWRpYWxvZy1jb250ZW50XCIsY29udGFpbm1lbnQ6XCJkb2N1bWVudFwiLGFsc29SZXNpemU6dGhpcy5lbGVtZW50LG1heFdpZHRoOnMubWF4V2lkdGgsbWF4SGVpZ2h0OnMubWF4SGVpZ2h0LG1pbldpZHRoOnMubWluV2lkdGgsbWluSGVpZ2h0OnRoaXMuX21pbkhlaWdodCgpLGhhbmRsZXM6byxzdGFydDpmdW5jdGlvbihzLG4pe2UodGhpcykuYWRkQ2xhc3MoXCJ1aS1kaWFsb2ctcmVzaXppbmdcIiksaS5fYmxvY2tGcmFtZXMoKSxpLl90cmlnZ2VyKFwicmVzaXplU3RhcnRcIixzLHQobikpfSxyZXNpemU6ZnVuY3Rpb24oZSxzKXtpLl90cmlnZ2VyKFwicmVzaXplXCIsZSx0KHMpKX0sc3RvcDpmdW5jdGlvbihuLGEpe3ZhciBvPWkudWlEaWFsb2cub2Zmc2V0KCkscj1vLmxlZnQtaS5kb2N1bWVudC5zY3JvbGxMZWZ0KCksaD1vLnRvcC1pLmRvY3VtZW50LnNjcm9sbFRvcCgpO3MuaGVpZ2h0PWkudWlEaWFsb2cuaGVpZ2h0KCkscy53aWR0aD1pLnVpRGlhbG9nLndpZHRoKCkscy5wb3NpdGlvbj17bXk6XCJsZWZ0IHRvcFwiLGF0OlwibGVmdFwiKyhyPj0wP1wiK1wiOlwiXCIpK3IrXCIgXCIrXCJ0b3BcIisoaD49MD9cIitcIjpcIlwiKStoLG9mOmkud2luZG93fSxlKHRoaXMpLnJlbW92ZUNsYXNzKFwidWktZGlhbG9nLXJlc2l6aW5nXCIpLGkuX3VuYmxvY2tGcmFtZXMoKSxpLl90cmlnZ2VyKFwicmVzaXplU3RvcFwiLG4sdChhKSl9fSkuY3NzKFwicG9zaXRpb25cIixhKX0sX3RyYWNrRm9jdXM6ZnVuY3Rpb24oKXt0aGlzLl9vbih0aGlzLndpZGdldCgpLHtmb2N1c2luOmZ1bmN0aW9uKHQpe3RoaXMuX21ha2VGb2N1c1RhcmdldCgpLHRoaXMuX2ZvY3VzZWRFbGVtZW50PWUodC50YXJnZXQpfX0pfSxfbWFrZUZvY3VzVGFyZ2V0OmZ1bmN0aW9uKCl7dGhpcy5fdW50cmFja0luc3RhbmNlKCksdGhpcy5fdHJhY2tpbmdJbnN0YW5jZXMoKS51bnNoaWZ0KHRoaXMpfSxfdW50cmFja0luc3RhbmNlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdHJhY2tpbmdJbnN0YW5jZXMoKSxpPWUuaW5BcnJheSh0aGlzLHQpOy0xIT09aSYmdC5zcGxpY2UoaSwxKX0sX3RyYWNraW5nSW5zdGFuY2VzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kb2N1bWVudC5kYXRhKFwidWktZGlhbG9nLWluc3RhbmNlc1wiKTtyZXR1cm4gZXx8KGU9W10sdGhpcy5kb2N1bWVudC5kYXRhKFwidWktZGlhbG9nLWluc3RhbmNlc1wiLGUpKSxlfSxfbWluSGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVyblwiYXV0b1wiPT09ZS5oZWlnaHQ/ZS5taW5IZWlnaHQ6TWF0aC5taW4oZS5taW5IZWlnaHQsZS5oZWlnaHQpfSxfcG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnVpRGlhbG9nLmlzKFwiOnZpc2libGVcIik7ZXx8dGhpcy51aURpYWxvZy5zaG93KCksdGhpcy51aURpYWxvZy5wb3NpdGlvbih0aGlzLm9wdGlvbnMucG9zaXRpb24pLGV8fHRoaXMudWlEaWFsb2cuaGlkZSgpfSxfc2V0T3B0aW9uczpmdW5jdGlvbih0KXt2YXIgaT10aGlzLHM9ITEsbj17fTtlLmVhY2godCxmdW5jdGlvbihlLHQpe2kuX3NldE9wdGlvbihlLHQpLGUgaW4gaS5zaXplUmVsYXRlZE9wdGlvbnMmJihzPSEwKSxlIGluIGkucmVzaXphYmxlUmVsYXRlZE9wdGlvbnMmJihuW2VdPXQpfSkscyYmKHRoaXMuX3NpemUoKSx0aGlzLl9wb3NpdGlvbigpKSx0aGlzLnVpRGlhbG9nLmlzKFwiOmRhdGEodWktcmVzaXphYmxlKVwiKSYmdGhpcy51aURpYWxvZy5yZXNpemFibGUoXCJvcHRpb25cIixuKX0sX3NldE9wdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBpLHMsbj10aGlzLnVpRGlhbG9nO1wiZGlhbG9nQ2xhc3NcIj09PWUmJm4ucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmRpYWxvZ0NsYXNzKS5hZGRDbGFzcyh0KSxcImRpc2FibGVkXCIhPT1lJiYodGhpcy5fc3VwZXIoZSx0KSxcImFwcGVuZFRvXCI9PT1lJiZ0aGlzLnVpRGlhbG9nLmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLFwiYnV0dG9uc1wiPT09ZSYmdGhpcy5fY3JlYXRlQnV0dG9ucygpLFwiY2xvc2VUZXh0XCI9PT1lJiZ0aGlzLnVpRGlhbG9nVGl0bGViYXJDbG9zZS5idXR0b24oe2xhYmVsOlwiXCIrdH0pLFwiZHJhZ2dhYmxlXCI9PT1lJiYoaT1uLmlzKFwiOmRhdGEodWktZHJhZ2dhYmxlKVwiKSxpJiYhdCYmbi5kcmFnZ2FibGUoXCJkZXN0cm95XCIpLCFpJiZ0JiZ0aGlzLl9tYWtlRHJhZ2dhYmxlKCkpLFwicG9zaXRpb25cIj09PWUmJnRoaXMuX3Bvc2l0aW9uKCksXCJyZXNpemFibGVcIj09PWUmJihzPW4uaXMoXCI6ZGF0YSh1aS1yZXNpemFibGUpXCIpLHMmJiF0JiZuLnJlc2l6YWJsZShcImRlc3Ryb3lcIikscyYmXCJzdHJpbmdcIj09dHlwZW9mIHQmJm4ucmVzaXphYmxlKFwib3B0aW9uXCIsXCJoYW5kbGVzXCIsdCksc3x8dD09PSExfHx0aGlzLl9tYWtlUmVzaXphYmxlKCkpLFwidGl0bGVcIj09PWUmJnRoaXMuX3RpdGxlKHRoaXMudWlEaWFsb2dUaXRsZWJhci5maW5kKFwiLnVpLWRpYWxvZy10aXRsZVwiKSkpfSxfc2l6ZTpmdW5jdGlvbigpe3ZhciBlLHQsaSxzPXRoaXMub3B0aW9uczt0aGlzLmVsZW1lbnQuc2hvdygpLmNzcyh7d2lkdGg6XCJhdXRvXCIsbWluSGVpZ2h0OjAsbWF4SGVpZ2h0Olwibm9uZVwiLGhlaWdodDowfSkscy5taW5XaWR0aD5zLndpZHRoJiYocy53aWR0aD1zLm1pbldpZHRoKSxlPXRoaXMudWlEaWFsb2cuY3NzKHtoZWlnaHQ6XCJhdXRvXCIsd2lkdGg6cy53aWR0aH0pLm91dGVySGVpZ2h0KCksdD1NYXRoLm1heCgwLHMubWluSGVpZ2h0LWUpLGk9XCJudW1iZXJcIj09dHlwZW9mIHMubWF4SGVpZ2h0P01hdGgubWF4KDAscy5tYXhIZWlnaHQtZSk6XCJub25lXCIsXCJhdXRvXCI9PT1zLmhlaWdodD90aGlzLmVsZW1lbnQuY3NzKHttaW5IZWlnaHQ6dCxtYXhIZWlnaHQ6aSxoZWlnaHQ6XCJhdXRvXCJ9KTp0aGlzLmVsZW1lbnQuaGVpZ2h0KE1hdGgubWF4KDAscy5oZWlnaHQtZSkpLHRoaXMudWlEaWFsb2cuaXMoXCI6ZGF0YSh1aS1yZXNpemFibGUpXCIpJiZ0aGlzLnVpRGlhbG9nLnJlc2l6YWJsZShcIm9wdGlvblwiLFwibWluSGVpZ2h0XCIsdGhpcy5fbWluSGVpZ2h0KCkpfSxfYmxvY2tGcmFtZXM6ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZUJsb2Nrcz10aGlzLmRvY3VtZW50LmZpbmQoXCJpZnJhbWVcIikubWFwKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTtyZXR1cm4gZShcIjxkaXY+XCIpLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHdpZHRoOnQub3V0ZXJXaWR0aCgpLGhlaWdodDp0Lm91dGVySGVpZ2h0KCl9KS5hcHBlbmRUbyh0LnBhcmVudCgpKS5vZmZzZXQodC5vZmZzZXQoKSlbMF19KX0sX3VuYmxvY2tGcmFtZXM6ZnVuY3Rpb24oKXt0aGlzLmlmcmFtZUJsb2NrcyYmKHRoaXMuaWZyYW1lQmxvY2tzLnJlbW92ZSgpLGRlbGV0ZSB0aGlzLmlmcmFtZUJsb2Nrcyl9LF9hbGxvd0ludGVyYWN0aW9uOmZ1bmN0aW9uKHQpe3JldHVybiBlKHQudGFyZ2V0KS5jbG9zZXN0KFwiLnVpLWRpYWxvZ1wiKS5sZW5ndGg/ITA6ISFlKHQudGFyZ2V0KS5jbG9zZXN0KFwiLnVpLWRhdGVwaWNrZXJcIikubGVuZ3RofSxfY3JlYXRlT3ZlcmxheTpmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5tb2RhbCl7dmFyIHQ9ITA7dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0PSExfSksdGhpcy5kb2N1bWVudC5kYXRhKFwidWktZGlhbG9nLW92ZXJsYXlzXCIpfHx0aGlzLl9vbih0aGlzLmRvY3VtZW50LHtmb2N1c2luOmZ1bmN0aW9uKGUpe3R8fHRoaXMuX2FsbG93SW50ZXJhY3Rpb24oZSl8fChlLnByZXZlbnREZWZhdWx0KCksdGhpcy5fdHJhY2tpbmdJbnN0YW5jZXMoKVswXS5fZm9jdXNUYWJiYWJsZSgpKX19KSx0aGlzLm92ZXJsYXk9ZShcIjxkaXY+XCIpLmFkZENsYXNzKFwidWktd2lkZ2V0LW92ZXJsYXkgdWktZnJvbnRcIikuYXBwZW5kVG8odGhpcy5fYXBwZW5kVG8oKSksdGhpcy5fb24odGhpcy5vdmVybGF5LHttb3VzZWRvd246XCJfa2VlcEZvY3VzXCJ9KSx0aGlzLmRvY3VtZW50LmRhdGEoXCJ1aS1kaWFsb2ctb3ZlcmxheXNcIiwodGhpcy5kb2N1bWVudC5kYXRhKFwidWktZGlhbG9nLW92ZXJsYXlzXCIpfHwwKSsxKX19LF9kZXN0cm95T3ZlcmxheTpmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5tb2RhbCYmdGhpcy5vdmVybGF5KXt2YXIgZT10aGlzLmRvY3VtZW50LmRhdGEoXCJ1aS1kaWFsb2ctb3ZlcmxheXNcIiktMTtlP3RoaXMuZG9jdW1lbnQuZGF0YShcInVpLWRpYWxvZy1vdmVybGF5c1wiLGUpOnRoaXMuZG9jdW1lbnQudW5iaW5kKFwiZm9jdXNpblwiKS5yZW1vdmVEYXRhKFwidWktZGlhbG9nLW92ZXJsYXlzXCIpLHRoaXMub3ZlcmxheS5yZW1vdmUoKSx0aGlzLm92ZXJsYXk9bnVsbH19fSksZS53aWRnZXQoXCJ1aS5kcm9wcGFibGVcIix7dmVyc2lvbjpcIjEuMTEuNFwiLHdpZGdldEV2ZW50UHJlZml4OlwiZHJvcFwiLG9wdGlvbnM6e2FjY2VwdDpcIipcIixhY3RpdmVDbGFzczohMSxhZGRDbGFzc2VzOiEwLGdyZWVkeTohMSxob3ZlckNsYXNzOiExLHNjb3BlOlwiZGVmYXVsdFwiLHRvbGVyYW5jZTpcImludGVyc2VjdFwiLGFjdGl2YXRlOm51bGwsZGVhY3RpdmF0ZTpudWxsLGRyb3A6bnVsbCxvdXQ6bnVsbCxvdmVyOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdCxpPXRoaXMub3B0aW9ucyxzPWkuYWNjZXB0O3RoaXMuaXNvdmVyPSExLHRoaXMuaXNvdXQ9ITAsdGhpcy5hY2NlcHQ9ZS5pc0Z1bmN0aW9uKHMpP3M6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXMocyl9LHRoaXMucHJvcG9ydGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD1hcmd1bWVudHNbMF0sdm9pZCAwKTp0P3Q6dD17d2lkdGg6dGhpcy5lbGVtZW50WzBdLm9mZnNldFdpZHRoLGhlaWdodDp0aGlzLmVsZW1lbnRbMF0ub2Zmc2V0SGVpZ2h0fX0sdGhpcy5fYWRkVG9NYW5hZ2VyKGkuc2NvcGUpLGkuYWRkQ2xhc3NlcyYmdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktZHJvcHBhYmxlXCIpfSxfYWRkVG9NYW5hZ2VyOmZ1bmN0aW9uKHQpe2UudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdF09ZS51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1t0XXx8W10sZS51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1t0XS5wdXNoKHRoaXMpfSxfc3BsaWNlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO2UubGVuZ3RoPnQ7dCsrKWVbdF09PT10aGlzJiZlLnNwbGljZSh0LDEpfSxfZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0PWUudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdGhpcy5vcHRpb25zLnNjb3BlXTt0aGlzLl9zcGxpY2UodCksdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktZHJvcHBhYmxlIHVpLWRyb3BwYWJsZS1kaXNhYmxlZFwiKX0sX3NldE9wdGlvbjpmdW5jdGlvbih0LGkpe2lmKFwiYWNjZXB0XCI9PT10KXRoaXMuYWNjZXB0PWUuaXNGdW5jdGlvbihpKT9pOmZ1bmN0aW9uKGUpe3JldHVybiBlLmlzKGkpfTtlbHNlIGlmKFwic2NvcGVcIj09PXQpe3ZhciBzPWUudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdGhpcy5vcHRpb25zLnNjb3BlXTt0aGlzLl9zcGxpY2UocyksdGhpcy5fYWRkVG9NYW5hZ2VyKGkpfXRoaXMuX3N1cGVyKHQsaSl9LF9hY3RpdmF0ZTpmdW5jdGlvbih0KXt2YXIgaT1lLnVpLmRkbWFuYWdlci5jdXJyZW50O3RoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyYmdGhpcy5lbGVtZW50LmFkZENsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyksaSYmdGhpcy5fdHJpZ2dlcihcImFjdGl2YXRlXCIsdCx0aGlzLnVpKGkpKX0sX2RlYWN0aXZhdGU6ZnVuY3Rpb24odCl7dmFyIGk9ZS51aS5kZG1hbmFnZXIuY3VycmVudDt0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MmJnRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpLGkmJnRoaXMuX3RyaWdnZXIoXCJkZWFjdGl2YXRlXCIsdCx0aGlzLnVpKGkpKX0sX292ZXI6ZnVuY3Rpb24odCl7dmFyIGk9ZS51aS5kZG1hbmFnZXIuY3VycmVudDtpJiYoaS5jdXJyZW50SXRlbXx8aS5lbGVtZW50KVswXSE9PXRoaXMuZWxlbWVudFswXSYmdGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0saS5jdXJyZW50SXRlbXx8aS5lbGVtZW50KSYmKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpLHRoaXMuX3RyaWdnZXIoXCJvdmVyXCIsdCx0aGlzLnVpKGkpKSl9LF9vdXQ6ZnVuY3Rpb24odCl7dmFyIGk9ZS51aS5kZG1hbmFnZXIuY3VycmVudDtpJiYoaS5jdXJyZW50SXRlbXx8aS5lbGVtZW50KVswXSE9PXRoaXMuZWxlbWVudFswXSYmdGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0saS5jdXJyZW50SXRlbXx8aS5lbGVtZW50KSYmKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzJiZ0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpLHRoaXMuX3RyaWdnZXIoXCJvdXRcIix0LHRoaXMudWkoaSkpKX0sX2Ryb3A6ZnVuY3Rpb24odCxpKXt2YXIgcz1pfHxlLnVpLmRkbWFuYWdlci5jdXJyZW50LG49ITE7cmV0dXJuIHMmJihzLmN1cnJlbnRJdGVtfHxzLmVsZW1lbnQpWzBdIT09dGhpcy5lbGVtZW50WzBdPyh0aGlzLmVsZW1lbnQuZmluZChcIjpkYXRhKHVpLWRyb3BwYWJsZSlcIikubm90KFwiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZ1wiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9ZSh0aGlzKS5kcm9wcGFibGUoXCJpbnN0YW5jZVwiKTtyZXR1cm4gaS5vcHRpb25zLmdyZWVkeSYmIWkub3B0aW9ucy5kaXNhYmxlZCYmaS5vcHRpb25zLnNjb3BlPT09cy5vcHRpb25zLnNjb3BlJiZpLmFjY2VwdC5jYWxsKGkuZWxlbWVudFswXSxzLmN1cnJlbnRJdGVtfHxzLmVsZW1lbnQpJiZlLnVpLmludGVyc2VjdChzLGUuZXh0ZW5kKGkse29mZnNldDppLmVsZW1lbnQub2Zmc2V0KCl9KSxpLm9wdGlvbnMudG9sZXJhbmNlLHQpPyhuPSEwLCExKTp2b2lkIDB9KSxuPyExOnRoaXMuYWNjZXB0LmNhbGwodGhpcy5lbGVtZW50WzBdLHMuY3VycmVudEl0ZW18fHMuZWxlbWVudCk/KHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyYmdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyksdGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MmJnRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyksdGhpcy5fdHJpZ2dlcihcImRyb3BcIix0LHRoaXMudWkocykpLHRoaXMuZWxlbWVudCk6ITEpOiExfSx1aTpmdW5jdGlvbihlKXtyZXR1cm57ZHJhZ2dhYmxlOmUuY3VycmVudEl0ZW18fGUuZWxlbWVudCxoZWxwZXI6ZS5oZWxwZXIscG9zaXRpb246ZS5wb3NpdGlvbixvZmZzZXQ6ZS5wb3NpdGlvbkFic319fSksZS51aS5pbnRlcnNlY3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxpKXtyZXR1cm4gZT49dCYmdCtpPmV9cmV0dXJuIGZ1bmN0aW9uKHQsaSxzLG4pe2lmKCFpLm9mZnNldClyZXR1cm4hMTt2YXIgYT0odC5wb3NpdGlvbkFic3x8dC5wb3NpdGlvbi5hYnNvbHV0ZSkubGVmdCt0Lm1hcmdpbnMubGVmdCxvPSh0LnBvc2l0aW9uQWJzfHx0LnBvc2l0aW9uLmFic29sdXRlKS50b3ArdC5tYXJnaW5zLnRvcCxyPWErdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCxoPW8rdC5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsbD1pLm9mZnNldC5sZWZ0LHU9aS5vZmZzZXQudG9wLGQ9bCtpLnByb3BvcnRpb25zKCkud2lkdGgsYz11K2kucHJvcG9ydGlvbnMoKS5oZWlnaHQ7c3dpdGNoKHMpe2Nhc2VcImZpdFwiOnJldHVybiBhPj1sJiZkPj1yJiZvPj11JiZjPj1oO2Nhc2VcImludGVyc2VjdFwiOnJldHVybiBhK3QuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgvMj5sJiZkPnItdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC8yJiZvK3QuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzI+dSYmYz5oLXQuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzI7Y2FzZVwicG9pbnRlclwiOnJldHVybiBlKG4ucGFnZVksdSxpLnByb3BvcnRpb25zKCkuaGVpZ2h0KSYmZShuLnBhZ2VYLGwsaS5wcm9wb3J0aW9ucygpLndpZHRoKTtjYXNlXCJ0b3VjaFwiOnJldHVybihvPj11JiZjPj1vfHxoPj11JiZjPj1ofHx1Pm8mJmg+YykmJihhPj1sJiZkPj1hfHxyPj1sJiZkPj1yfHxsPmEmJnI+ZCk7ZGVmYXVsdDpyZXR1cm4hMX19fSgpLGUudWkuZGRtYW5hZ2VyPXtjdXJyZW50Om51bGwsZHJvcHBhYmxlczp7XCJkZWZhdWx0XCI6W119LHByZXBhcmVPZmZzZXRzOmZ1bmN0aW9uKHQsaSl7dmFyIHMsbixhPWUudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdC5vcHRpb25zLnNjb3BlXXx8W10sbz1pP2kudHlwZTpudWxsLHI9KHQuY3VycmVudEl0ZW18fHQuZWxlbWVudCkuZmluZChcIjpkYXRhKHVpLWRyb3BwYWJsZSlcIikuYWRkQmFjaygpO2U6Zm9yKHM9MDthLmxlbmd0aD5zO3MrKylpZighKGFbc10ub3B0aW9ucy5kaXNhYmxlZHx8dCYmIWFbc10uYWNjZXB0LmNhbGwoYVtzXS5lbGVtZW50WzBdLHQuY3VycmVudEl0ZW18fHQuZWxlbWVudCkpKXtmb3Iobj0wO3IubGVuZ3RoPm47bisrKWlmKHJbbl09PT1hW3NdLmVsZW1lbnRbMF0pe2Fbc10ucHJvcG9ydGlvbnMoKS5oZWlnaHQ9MDtjb250aW51ZSBlfWFbc10udmlzaWJsZT1cIm5vbmVcIiE9PWFbc10uZWxlbWVudC5jc3MoXCJkaXNwbGF5XCIpLGFbc10udmlzaWJsZSYmKFwibW91c2Vkb3duXCI9PT1vJiZhW3NdLl9hY3RpdmF0ZS5jYWxsKGFbc10saSksYVtzXS5vZmZzZXQ9YVtzXS5lbGVtZW50Lm9mZnNldCgpLGFbc10ucHJvcG9ydGlvbnMoe3dpZHRoOmFbc10uZWxlbWVudFswXS5vZmZzZXRXaWR0aCxoZWlnaHQ6YVtzXS5lbGVtZW50WzBdLm9mZnNldEhlaWdodH0pKX19LGRyb3A6ZnVuY3Rpb24odCxpKXt2YXIgcz0hMTtyZXR1cm4gZS5lYWNoKChlLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3Qub3B0aW9ucy5zY29wZV18fFtdKS5zbGljZSgpLGZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zJiYoIXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmdGhpcy52aXNpYmxlJiZlLnVpLmludGVyc2VjdCh0LHRoaXMsdGhpcy5vcHRpb25zLnRvbGVyYW5jZSxpKSYmKHM9dGhpcy5fZHJvcC5jYWxsKHRoaXMsaSl8fHMpLCF0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMudmlzaWJsZSYmdGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sdC5jdXJyZW50SXRlbXx8dC5lbGVtZW50KSYmKHRoaXMuaXNvdXQ9ITAsdGhpcy5pc292ZXI9ITEsdGhpcy5fZGVhY3RpdmF0ZS5jYWxsKHRoaXMsaSkpKX0pLHN9LGRyYWdTdGFydDpmdW5jdGlvbih0LGkpe3QuZWxlbWVudC5wYXJlbnRzVW50aWwoXCJib2R5XCIpLmJpbmQoXCJzY3JvbGwuZHJvcHBhYmxlXCIsZnVuY3Rpb24oKXt0Lm9wdGlvbnMucmVmcmVzaFBvc2l0aW9uc3x8ZS51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModCxpKX0pfSxkcmFnOmZ1bmN0aW9uKHQsaSl7dC5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnMmJmUudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHQsaSksZS5lYWNoKGUudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdC5vcHRpb25zLnNjb3BlXXx8W10sZnVuY3Rpb24oKXtpZighdGhpcy5vcHRpb25zLmRpc2FibGVkJiYhdGhpcy5ncmVlZHlDaGlsZCYmdGhpcy52aXNpYmxlKXt2YXIgcyxuLGEsbz1lLnVpLmludGVyc2VjdCh0LHRoaXMsdGhpcy5vcHRpb25zLnRvbGVyYW5jZSxpKSxyPSFvJiZ0aGlzLmlzb3Zlcj9cImlzb3V0XCI6byYmIXRoaXMuaXNvdmVyP1wiaXNvdmVyXCI6bnVsbDtyJiYodGhpcy5vcHRpb25zLmdyZWVkeSYmKG49dGhpcy5vcHRpb25zLnNjb3BlLGE9dGhpcy5lbGVtZW50LnBhcmVudHMoXCI6ZGF0YSh1aS1kcm9wcGFibGUpXCIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBlKHRoaXMpLmRyb3BwYWJsZShcImluc3RhbmNlXCIpLm9wdGlvbnMuc2NvcGU9PT1ufSksYS5sZW5ndGgmJihzPWUoYVswXSkuZHJvcHBhYmxlKFwiaW5zdGFuY2VcIikscy5ncmVlZHlDaGlsZD1cImlzb3ZlclwiPT09cikpLHMmJlwiaXNvdmVyXCI9PT1yJiYocy5pc292ZXI9ITEscy5pc291dD0hMCxzLl9vdXQuY2FsbChzLGkpKSx0aGlzW3JdPSEwLHRoaXNbXCJpc291dFwiPT09cj9cImlzb3ZlclwiOlwiaXNvdXRcIl09ITEsdGhpc1tcImlzb3ZlclwiPT09cj9cIl9vdmVyXCI6XCJfb3V0XCJdLmNhbGwodGhpcyxpKSxzJiZcImlzb3V0XCI9PT1yJiYocy5pc291dD0hMSxzLmlzb3Zlcj0hMCxzLl9vdmVyLmNhbGwocyxpKSkpfX0pfSxkcmFnU3RvcDpmdW5jdGlvbih0LGkpe3QuZWxlbWVudC5wYXJlbnRzVW50aWwoXCJib2R5XCIpLnVuYmluZChcInNjcm9sbC5kcm9wcGFibGVcIiksdC5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnN8fGUudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHQsaSl9fSxlLnVpLmRyb3BwYWJsZTt2YXIgeT1cInVpLWVmZmVjdHMtXCIsYj1lO2UuZWZmZWN0cz17ZWZmZWN0Ont9fSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGkoZSx0LGkpe3ZhciBzPWRbdC50eXBlXXx8e307cmV0dXJuIG51bGw9PWU/aXx8IXQuZGVmP251bGw6dC5kZWY6KGU9cy5mbG9vcj9+fmU6cGFyc2VGbG9hdChlKSxpc05hTihlKT90LmRlZjpzLm1vZD8oZStzLm1vZCklcy5tb2Q6MD5lPzA6ZT5zLm1heD9zLm1heDplKX1mdW5jdGlvbiBzKGkpe3ZhciBzPWwoKSxuPXMuX3JnYmE9W107cmV0dXJuIGk9aS50b0xvd2VyQ2FzZSgpLGYoaCxmdW5jdGlvbihlLGEpe3ZhciBvLHI9YS5yZS5leGVjKGkpLGg9ciYmYS5wYXJzZShyKSxsPWEuc3BhY2V8fFwicmdiYVwiO3JldHVybiBoPyhvPXNbbF0oaCksc1t1W2xdLmNhY2hlXT1vW3VbbF0uY2FjaGVdLG49cy5fcmdiYT1vLl9yZ2JhLCExKTp0fSksbi5sZW5ndGg/KFwiMCwwLDAsMFwiPT09bi5qb2luKCkmJmUuZXh0ZW5kKG4sYS50cmFuc3BhcmVudCkscyk6YVtpXX1mdW5jdGlvbiBuKGUsdCxpKXtyZXR1cm4gaT0oaSsxKSUxLDE+NippP2UrNioodC1lKSppOjE+MippP3Q6Mj4zKmk/ZSs2Kih0LWUpKigyLzMtaSk6ZX12YXIgYSxvPVwiYmFja2dyb3VuZENvbG9yIGJvcmRlckJvdHRvbUNvbG9yIGJvcmRlckxlZnRDb2xvciBib3JkZXJSaWdodENvbG9yIGJvcmRlclRvcENvbG9yIGNvbG9yIGNvbHVtblJ1bGVDb2xvciBvdXRsaW5lQ29sb3IgdGV4dERlY29yYXRpb25Db2xvciB0ZXh0RW1waGFzaXNDb2xvclwiLHI9L14oW1xcLStdKT1cXHMqKFxcZCtcXC4/XFxkKikvLGg9W3tyZTovcmdiYT9cXChcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqLFxccyooXFxkezEsM30pXFxzKig/OixcXHMqKFxcZD8oPzpcXC5cXGQrKT8pXFxzKik/XFwpLyxwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm5bZVsxXSxlWzJdLGVbM10sZVs0XV19fSx7cmU6L3JnYmE/XFwoXFxzKihcXGQrKD86XFwuXFxkKyk/KVxcJVxccyosXFxzKihcXGQrKD86XFwuXFxkKyk/KVxcJVxccyosXFxzKihcXGQrKD86XFwuXFxkKyk/KVxcJVxccyooPzosXFxzKihcXGQ/KD86XFwuXFxkKyk/KVxccyopP1xcKS8scGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuWzIuNTUqZVsxXSwyLjU1KmVbMl0sMi41NSplWzNdLGVbNF1dfX0se3JlOi8jKFthLWYwLTldezJ9KShbYS1mMC05XXsyfSkoW2EtZjAtOV17Mn0pLyxwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm5bcGFyc2VJbnQoZVsxXSwxNikscGFyc2VJbnQoZVsyXSwxNikscGFyc2VJbnQoZVszXSwxNildfX0se3JlOi8jKFthLWYwLTldKShbYS1mMC05XSkoW2EtZjAtOV0pLyxwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm5bcGFyc2VJbnQoZVsxXStlWzFdLDE2KSxwYXJzZUludChlWzJdK2VbMl0sMTYpLHBhcnNlSW50KGVbM10rZVszXSwxNildfX0se3JlOi9oc2xhP1xcKFxccyooXFxkKyg/OlxcLlxcZCspPylcXHMqLFxccyooXFxkKyg/OlxcLlxcZCspPylcXCVcXHMqLFxccyooXFxkKyg/OlxcLlxcZCspPylcXCVcXHMqKD86LFxccyooXFxkPyg/OlxcLlxcZCspPylcXHMqKT9cXCkvLHNwYWNlOlwiaHNsYVwiLHBhcnNlOmZ1bmN0aW9uKGUpe3JldHVybltlWzFdLGVbMl0vMTAwLGVbM10vMTAwLGVbNF1dfX1dLGw9ZS5Db2xvcj1mdW5jdGlvbih0LGkscyxuKXtyZXR1cm4gbmV3IGUuQ29sb3IuZm4ucGFyc2UodCxpLHMsbil9LHU9e3JnYmE6e3Byb3BzOntyZWQ6e2lkeDowLHR5cGU6XCJieXRlXCJ9LGdyZWVuOntpZHg6MSx0eXBlOlwiYnl0ZVwifSxibHVlOntpZHg6Mix0eXBlOlwiYnl0ZVwifX19LGhzbGE6e3Byb3BzOntodWU6e2lkeDowLHR5cGU6XCJkZWdyZWVzXCJ9LHNhdHVyYXRpb246e2lkeDoxLHR5cGU6XCJwZXJjZW50XCJ9LGxpZ2h0bmVzczp7aWR4OjIsdHlwZTpcInBlcmNlbnRcIn19fX0sZD17XCJieXRlXCI6e2Zsb29yOiEwLG1heDoyNTV9LHBlcmNlbnQ6e21heDoxfSxkZWdyZWVzOnttb2Q6MzYwLGZsb29yOiEwfX0sYz1sLnN1cHBvcnQ9e30scD1lKFwiPHA+XCIpWzBdLGY9ZS5lYWNoO3Auc3R5bGUuY3NzVGV4dD1cImJhY2tncm91bmQtY29sb3I6cmdiYSgxLDEsMSwuNSlcIixjLnJnYmE9cC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IuaW5kZXhPZihcInJnYmFcIik+LTEsZih1LGZ1bmN0aW9uKGUsdCl7dC5jYWNoZT1cIl9cIitlLHQucHJvcHMuYWxwaGE9e2lkeDozLHR5cGU6XCJwZXJjZW50XCIsZGVmOjF9fSksbC5mbj1lLmV4dGVuZChsLnByb3RvdHlwZSx7cGFyc2U6ZnVuY3Rpb24obixvLHIsaCl7aWYobj09PXQpcmV0dXJuIHRoaXMuX3JnYmE9W251bGwsbnVsbCxudWxsLG51bGxdLHRoaXM7KG4uanF1ZXJ5fHxuLm5vZGVUeXBlKSYmKG49ZShuKS5jc3Mobyksbz10KTt2YXIgZD10aGlzLGM9ZS50eXBlKG4pLHA9dGhpcy5fcmdiYT1bXTtyZXR1cm4gbyE9PXQmJihuPVtuLG8scixoXSxjPVwiYXJyYXlcIiksXCJzdHJpbmdcIj09PWM/dGhpcy5wYXJzZShzKG4pfHxhLl9kZWZhdWx0KTpcImFycmF5XCI9PT1jPyhmKHUucmdiYS5wcm9wcyxmdW5jdGlvbihlLHQpe3BbdC5pZHhdPWkoblt0LmlkeF0sdCl9KSx0aGlzKTpcIm9iamVjdFwiPT09Yz8obiBpbnN0YW5jZW9mIGw/Zih1LGZ1bmN0aW9uKGUsdCl7blt0LmNhY2hlXSYmKGRbdC5jYWNoZV09blt0LmNhY2hlXS5zbGljZSgpKX0pOmYodSxmdW5jdGlvbih0LHMpe3ZhciBhPXMuY2FjaGU7ZihzLnByb3BzLGZ1bmN0aW9uKGUsdCl7aWYoIWRbYV0mJnMudG8pe2lmKFwiYWxwaGFcIj09PWV8fG51bGw9PW5bZV0pcmV0dXJuO2RbYV09cy50byhkLl9yZ2JhKX1kW2FdW3QuaWR4XT1pKG5bZV0sdCwhMCl9KSxkW2FdJiYwPmUuaW5BcnJheShudWxsLGRbYV0uc2xpY2UoMCwzKSkmJihkW2FdWzNdPTEscy5mcm9tJiYoZC5fcmdiYT1zLmZyb20oZFthXSkpKX0pLHRoaXMpOnR9LGlzOmZ1bmN0aW9uKGUpe3ZhciBpPWwoZSkscz0hMCxuPXRoaXM7cmV0dXJuIGYodSxmdW5jdGlvbihlLGEpe3ZhciBvLHI9aVthLmNhY2hlXTtyZXR1cm4gciYmKG89blthLmNhY2hlXXx8YS50byYmYS50byhuLl9yZ2JhKXx8W10sZihhLnByb3BzLGZ1bmN0aW9uKGUsaSl7cmV0dXJuIG51bGwhPXJbaS5pZHhdP3M9cltpLmlkeF09PT1vW2kuaWR4XTp0fSkpLHN9KSxzfSxfc3BhY2U6ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PXRoaXM7cmV0dXJuIGYodSxmdW5jdGlvbihpLHMpe3Rbcy5jYWNoZV0mJmUucHVzaChpKX0pLGUucG9wKCl9LHRyYW5zaXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgcz1sKGUpLG49cy5fc3BhY2UoKSxhPXVbbl0sbz0wPT09dGhpcy5hbHBoYSgpP2woXCJ0cmFuc3BhcmVudFwiKTp0aGlzLHI9b1thLmNhY2hlXXx8YS50byhvLl9yZ2JhKSxoPXIuc2xpY2UoKTtyZXR1cm4gcz1zW2EuY2FjaGVdLGYoYS5wcm9wcyxmdW5jdGlvbihlLG4pe3ZhciBhPW4uaWR4LG89clthXSxsPXNbYV0sdT1kW24udHlwZV18fHt9O251bGwhPT1sJiYobnVsbD09PW8/aFthXT1sOih1Lm1vZCYmKGwtbz51Lm1vZC8yP28rPXUubW9kOm8tbD51Lm1vZC8yJiYoby09dS5tb2QpKSxoW2FdPWkoKGwtbykqdCtvLG4pKSl9KSx0aGlzW25dKGgpfSxibGVuZDpmdW5jdGlvbih0KXtpZigxPT09dGhpcy5fcmdiYVszXSlyZXR1cm4gdGhpczt2YXIgaT10aGlzLl9yZ2JhLnNsaWNlKCkscz1pLnBvcCgpLG49bCh0KS5fcmdiYTtyZXR1cm4gbChlLm1hcChpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuKDEtcykqblt0XStzKmV9KSl9LHRvUmdiYVN0cmluZzpmdW5jdGlvbigpe3ZhciB0PVwicmdiYShcIixpPWUubWFwKHRoaXMuX3JnYmEsZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09ZT90PjI/MTowOmV9KTtyZXR1cm4gMT09PWlbM10mJihpLnBvcCgpLHQ9XCJyZ2IoXCIpLHQraS5qb2luKCkrXCIpXCJ9LHRvSHNsYVN0cmluZzpmdW5jdGlvbigpe3ZhciB0PVwiaHNsYShcIixpPWUubWFwKHRoaXMuaHNsYSgpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG51bGw9PWUmJihlPXQ+Mj8xOjApLHQmJjM+dCYmKGU9TWF0aC5yb3VuZCgxMDAqZSkrXCIlXCIpLGV9KTtyZXR1cm4gMT09PWlbM10mJihpLnBvcCgpLHQ9XCJoc2woXCIpLHQraS5qb2luKCkrXCIpXCJ9LHRvSGV4U3RyaW5nOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX3JnYmEuc2xpY2UoKSxzPWkucG9wKCk7cmV0dXJuIHQmJmkucHVzaCh+figyNTUqcykpLFwiI1wiK2UubWFwKGksZnVuY3Rpb24oZSl7cmV0dXJuIGU9KGV8fDApLnRvU3RyaW5nKDE2KSwxPT09ZS5sZW5ndGg/XCIwXCIrZTplfSkuam9pbihcIlwiKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuX3JnYmFbM10/XCJ0cmFuc3BhcmVudFwiOnRoaXMudG9SZ2JhU3RyaW5nKCl9fSksbC5mbi5wYXJzZS5wcm90b3R5cGU9bC5mbix1LmhzbGEudG89ZnVuY3Rpb24oZSl7aWYobnVsbD09ZVswXXx8bnVsbD09ZVsxXXx8bnVsbD09ZVsyXSlyZXR1cm5bbnVsbCxudWxsLG51bGwsZVszXV07dmFyIHQsaSxzPWVbMF0vMjU1LG49ZVsxXS8yNTUsYT1lWzJdLzI1NSxvPWVbM10scj1NYXRoLm1heChzLG4sYSksaD1NYXRoLm1pbihzLG4sYSksbD1yLWgsdT1yK2gsZD0uNSp1O3JldHVybiB0PWg9PT1yPzA6cz09PXI/NjAqKG4tYSkvbCszNjA6bj09PXI/NjAqKGEtcykvbCsxMjA6NjAqKHMtbikvbCsyNDAsaT0wPT09bD8wOi41Pj1kP2wvdTpsLygyLXUpLFtNYXRoLnJvdW5kKHQpJTM2MCxpLGQsbnVsbD09bz8xOm9dfSx1LmhzbGEuZnJvbT1mdW5jdGlvbihlKXtpZihudWxsPT1lWzBdfHxudWxsPT1lWzFdfHxudWxsPT1lWzJdKXJldHVybltudWxsLG51bGwsbnVsbCxlWzNdXTt2YXIgdD1lWzBdLzM2MCxpPWVbMV0scz1lWzJdLGE9ZVszXSxvPS41Pj1zP3MqKDEraSk6cytpLXMqaSxyPTIqcy1vO3JldHVybltNYXRoLnJvdW5kKDI1NSpuKHIsbyx0KzEvMykpLE1hdGgucm91bmQoMjU1Km4ocixvLHQpKSxNYXRoLnJvdW5kKDI1NSpuKHIsbyx0LTEvMykpLGFdfSxmKHUsZnVuY3Rpb24ocyxuKXt2YXIgYT1uLnByb3BzLG89bi5jYWNoZSxoPW4udG8sdT1uLmZyb207bC5mbltzXT1mdW5jdGlvbihzKXtpZihoJiYhdGhpc1tvXSYmKHRoaXNbb109aCh0aGlzLl9yZ2JhKSkscz09PXQpcmV0dXJuIHRoaXNbb10uc2xpY2UoKTt2YXIgbixyPWUudHlwZShzKSxkPVwiYXJyYXlcIj09PXJ8fFwib2JqZWN0XCI9PT1yP3M6YXJndW1lbnRzLGM9dGhpc1tvXS5zbGljZSgpO3JldHVybiBmKGEsZnVuY3Rpb24oZSx0KXt2YXIgcz1kW1wib2JqZWN0XCI9PT1yP2U6dC5pZHhdO251bGw9PXMmJihzPWNbdC5pZHhdKSxjW3QuaWR4XT1pKHMsdCl9KSx1PyhuPWwodShjKSksbltvXT1jLG4pOmwoYyl9LGYoYSxmdW5jdGlvbih0LGkpe2wuZm5bdF18fChsLmZuW3RdPWZ1bmN0aW9uKG4pe3ZhciBhLG89ZS50eXBlKG4pLGg9XCJhbHBoYVwiPT09dD90aGlzLl9oc2xhP1wiaHNsYVwiOlwicmdiYVwiOnMsbD10aGlzW2hdKCksdT1sW2kuaWR4XTtyZXR1cm5cInVuZGVmaW5lZFwiPT09bz91OihcImZ1bmN0aW9uXCI9PT1vJiYobj1uLmNhbGwodGhpcyx1KSxvPWUudHlwZShuKSksbnVsbD09biYmaS5lbXB0eT90aGlzOihcInN0cmluZ1wiPT09byYmKGE9ci5leGVjKG4pLGEmJihuPXUrcGFyc2VGbG9hdChhWzJdKSooXCIrXCI9PT1hWzFdPzE6LTEpKSksbFtpLmlkeF09bix0aGlzW2hdKGwpKSl9KX0pfSksbC5ob29rPWZ1bmN0aW9uKHQpe3ZhciBpPXQuc3BsaXQoXCIgXCIpO2YoaSxmdW5jdGlvbih0LGkpe2UuY3NzSG9va3NbaV09e3NldDpmdW5jdGlvbih0LG4pe3ZhciBhLG8scj1cIlwiO2lmKFwidHJhbnNwYXJlbnRcIiE9PW4mJihcInN0cmluZ1wiIT09ZS50eXBlKG4pfHwoYT1zKG4pKSkpe2lmKG49bChhfHxuKSwhYy5yZ2JhJiYxIT09bi5fcmdiYVszXSl7Zm9yKG89XCJiYWNrZ3JvdW5kQ29sb3JcIj09PWk/dC5wYXJlbnROb2RlOnQ7KFwiXCI9PT1yfHxcInRyYW5zcGFyZW50XCI9PT1yKSYmbyYmby5zdHlsZTspdHJ5e3I9ZS5jc3MobyxcImJhY2tncm91bmRDb2xvclwiKSxvPW8ucGFyZW50Tm9kZX1jYXRjaChoKXt9bj1uLmJsZW5kKHImJlwidHJhbnNwYXJlbnRcIiE9PXI/cjpcIl9kZWZhdWx0XCIpfW49bi50b1JnYmFTdHJpbmcoKX10cnl7dC5zdHlsZVtpXT1ufWNhdGNoKGgpe319fSxlLmZ4LnN0ZXBbaV09ZnVuY3Rpb24odCl7dC5jb2xvckluaXR8fCh0LnN0YXJ0PWwodC5lbGVtLGkpLHQuZW5kPWwodC5lbmQpLHQuY29sb3JJbml0PSEwKSxlLmNzc0hvb2tzW2ldLnNldCh0LmVsZW0sdC5zdGFydC50cmFuc2l0aW9uKHQuZW5kLHQucG9zKSl9fSl9LGwuaG9vayhvKSxlLmNzc0hvb2tzLmJvcmRlckNvbG9yPXtleHBhbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9e307cmV0dXJuIGYoW1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLGZ1bmN0aW9uKGkscyl7dFtcImJvcmRlclwiK3MrXCJDb2xvclwiXT1lfSksdH19LGE9ZS5Db2xvci5uYW1lcz17YXF1YTpcIiMwMGZmZmZcIixibGFjazpcIiMwMDAwMDBcIixibHVlOlwiIzAwMDBmZlwiLGZ1Y2hzaWE6XCIjZmYwMGZmXCIsZ3JheTpcIiM4MDgwODBcIixncmVlbjpcIiMwMDgwMDBcIixsaW1lOlwiIzAwZmYwMFwiLG1hcm9vbjpcIiM4MDAwMDBcIixuYXZ5OlwiIzAwMDA4MFwiLG9saXZlOlwiIzgwODAwMFwiLHB1cnBsZTpcIiM4MDAwODBcIixyZWQ6XCIjZmYwMDAwXCIsc2lsdmVyOlwiI2MwYzBjMFwiLHRlYWw6XCIjMDA4MDgwXCIsd2hpdGU6XCIjZmZmZmZmXCIseWVsbG93OlwiI2ZmZmYwMFwiLHRyYW5zcGFyZW50OltudWxsLG51bGwsbnVsbCwwXSxfZGVmYXVsdDpcIiNmZmZmZmZcIn19KGIpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2YXIgaSxzLG49dC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3P3Qub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHQsbnVsbCk6dC5jdXJyZW50U3R5bGUsYT17fTtpZihuJiZuLmxlbmd0aCYmblswXSYmbltuWzBdXSlmb3Iocz1uLmxlbmd0aDtzLS07KWk9bltzXSxcInN0cmluZ1wiPT10eXBlb2YgbltpXSYmKGFbZS5jYW1lbENhc2UoaSldPW5baV0pO2Vsc2UgZm9yKGkgaW4gbilcInN0cmluZ1wiPT10eXBlb2YgbltpXSYmKGFbaV09bltpXSk7cmV0dXJuIGF9ZnVuY3Rpb24gaSh0LGkpe3ZhciBzLGEsbz17fTtmb3IocyBpbiBpKWE9aVtzXSx0W3NdIT09YSYmKG5bc118fChlLmZ4LnN0ZXBbc118fCFpc05hTihwYXJzZUZsb2F0KGEpKSkmJihvW3NdPWEpKTtyZXR1cm4gb312YXIgcz1bXCJhZGRcIixcInJlbW92ZVwiLFwidG9nZ2xlXCJdLG49e2JvcmRlcjoxLGJvcmRlckJvdHRvbToxLGJvcmRlckNvbG9yOjEsYm9yZGVyTGVmdDoxLGJvcmRlclJpZ2h0OjEsYm9yZGVyVG9wOjEsYm9yZGVyV2lkdGg6MSxtYXJnaW46MSxwYWRkaW5nOjF9O2UuZWFjaChbXCJib3JkZXJMZWZ0U3R5bGVcIixcImJvcmRlclJpZ2h0U3R5bGVcIixcImJvcmRlckJvdHRvbVN0eWxlXCIsXCJib3JkZXJUb3BTdHlsZVwiXSxmdW5jdGlvbih0LGkpe2UuZnguc3RlcFtpXT1mdW5jdGlvbihlKXsoXCJub25lXCIhPT1lLmVuZCYmIWUuc2V0QXR0cnx8MT09PWUucG9zJiYhZS5zZXRBdHRyKSYmKGIuc3R5bGUoZS5lbGVtLGksZS5lbmQpLGUuc2V0QXR0cj0hMCl9fSksZS5mbi5hZGRCYWNrfHwoZS5mbi5hZGRCYWNrPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFkZChudWxsPT1lP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKX0pLGUuZWZmZWN0cy5hbmltYXRlQ2xhc3M9ZnVuY3Rpb24obixhLG8scil7dmFyIGg9ZS5zcGVlZChhLG8scik7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgYSxvPWUodGhpcykscj1vLmF0dHIoXCJjbGFzc1wiKXx8XCJcIixsPWguY2hpbGRyZW4/by5maW5kKFwiKlwiKS5hZGRCYWNrKCk6bztsPWwubWFwKGZ1bmN0aW9uKCl7dmFyIGk9ZSh0aGlzKTtyZXR1cm57ZWw6aSxzdGFydDp0KHRoaXMpfX0pLGE9ZnVuY3Rpb24oKXtlLmVhY2gocyxmdW5jdGlvbihlLHQpe25bdF0mJm9bdCtcIkNsYXNzXCJdKG5bdF0pfSl9LGEoKSxsPWwubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kPXQodGhpcy5lbFswXSksdGhpcy5kaWZmPWkodGhpcy5zdGFydCx0aGlzLmVuZCksdGhpc30pLG8uYXR0cihcImNsYXNzXCIsciksbD1sLm1hcChmdW5jdGlvbigpe3ZhciB0PXRoaXMsaT1lLkRlZmVycmVkKCkscz1lLmV4dGVuZCh7fSxoLHtxdWV1ZTohMSxjb21wbGV0ZTpmdW5jdGlvbigpe2kucmVzb2x2ZSh0KX19KTtyZXR1cm4gdGhpcy5lbC5hbmltYXRlKHRoaXMuZGlmZixzKSxpLnByb21pc2UoKX0pLGUud2hlbi5hcHBseShlLGwuZ2V0KCkpLmRvbmUoZnVuY3Rpb24oKXthKCksZS5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWw7ZS5lYWNoKHRoaXMuZGlmZixmdW5jdGlvbihlKXt0LmNzcyhlLFwiXCIpfSl9KSxoLmNvbXBsZXRlLmNhbGwob1swXSl9KX0pfSxlLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGkscyxuLGEpe3JldHVybiBzP2UuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCh0aGlzLHthZGQ6aX0scyxuLGEpOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oZS5mbi5hZGRDbGFzcykscmVtb3ZlQ2xhc3M6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGkscyxuLGEpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjE/ZS5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMse3JlbW92ZTppfSxzLG4sYSk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fShlLmZuLnJlbW92ZUNsYXNzKSx0b2dnbGVDbGFzczpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oaSxzLG4sYSxvKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIHN8fHZvaWQgMD09PXM/bj9lLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwodGhpcyxzP3thZGQ6aX06e3JlbW92ZTppfSxuLGEsbyk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6ZS5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKHRoaXMse3RvZ2dsZTppfSxzLG4sYSl9fShlLmZuLnRvZ2dsZUNsYXNzKSxzd2l0Y2hDbGFzczpmdW5jdGlvbih0LGkscyxuLGEpe3JldHVybiBlLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwodGhpcyx7YWRkOmkscmVtb3ZlOnR9LHMsbixhKX19KX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxpLHMsbil7cmV0dXJuIGUuaXNQbGFpbk9iamVjdCh0KSYmKGk9dCx0PXQuZWZmZWN0KSx0PXtlZmZlY3Q6dH0sbnVsbD09aSYmKGk9e30pLGUuaXNGdW5jdGlvbihpKSYmKG49aSxzPW51bGwsaT17fSksKFwibnVtYmVyXCI9PXR5cGVvZiBpfHxlLmZ4LnNwZWVkc1tpXSkmJihuPXMscz1pLGk9e30pLGUuaXNGdW5jdGlvbihzKSYmKG49cyxzPW51bGwpLGkmJmUuZXh0ZW5kKHQsaSkscz1zfHxpLmR1cmF0aW9uLHQuZHVyYXRpb249ZS5meC5vZmY/MDpcIm51bWJlclwiPT10eXBlb2Ygcz9zOnMgaW4gZS5meC5zcGVlZHM/ZS5meC5zcGVlZHNbc106ZS5meC5zcGVlZHMuX2RlZmF1bHQsdC5jb21wbGV0ZT1ufHxpLmNvbXBsZXRlLHR9ZnVuY3Rpb24gaSh0KXtyZXR1cm4hdHx8XCJudW1iZXJcIj09dHlwZW9mIHR8fGUuZnguc3BlZWRzW3RdPyEwOlwic3RyaW5nXCIhPXR5cGVvZiB0fHxlLmVmZmVjdHMuZWZmZWN0W3RdP2UuaXNGdW5jdGlvbih0KT8hMDpcIm9iamVjdFwiIT10eXBlb2YgdHx8dC5lZmZlY3Q/ITE6ITA6ITB9ZS5leHRlbmQoZS5lZmZlY3RzLHt2ZXJzaW9uOlwiMS4xMS40XCIsc2F2ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgaT0wO3QubGVuZ3RoPmk7aSsrKW51bGwhPT10W2ldJiZlLmRhdGEoeSt0W2ldLGVbMF0uc3R5bGVbdFtpXV0pfSxyZXN0b3JlOmZ1bmN0aW9uKGUsdCl7dmFyIGkscztmb3Iocz0wO3QubGVuZ3RoPnM7cysrKW51bGwhPT10W3NdJiYoaT1lLmRhdGEoeSt0W3NdKSx2b2lkIDA9PT1pJiYoaT1cIlwiKSxlLmNzcyh0W3NdLGkpKX0sc2V0TW9kZTpmdW5jdGlvbihlLHQpe3JldHVyblwidG9nZ2xlXCI9PT10JiYodD1lLmlzKFwiOmhpZGRlblwiKT9cInNob3dcIjpcImhpZGVcIiksdH0sZ2V0QmFzZWxpbmU6ZnVuY3Rpb24oZSx0KXt2YXIgaSxzO3N3aXRjaChlWzBdKXtjYXNlXCJ0b3BcIjppPTA7YnJlYWs7Y2FzZVwibWlkZGxlXCI6aT0uNTticmVhaztjYXNlXCJib3R0b21cIjppPTE7YnJlYWs7ZGVmYXVsdDppPWVbMF0vdC5oZWlnaHR9c3dpdGNoKGVbMV0pe2Nhc2VcImxlZnRcIjpzPTA7YnJlYWs7Y2FzZVwiY2VudGVyXCI6cz0uNTticmVhaztjYXNlXCJyaWdodFwiOnM9MTticmVhaztkZWZhdWx0OnM9ZVsxXS90LndpZHRofXJldHVybnt4OnMseTppfX0sY3JlYXRlV3JhcHBlcjpmdW5jdGlvbih0KXtpZih0LnBhcmVudCgpLmlzKFwiLnVpLWVmZmVjdHMtd3JhcHBlclwiKSlyZXR1cm4gdC5wYXJlbnQoKTt2YXIgaT17d2lkdGg6dC5vdXRlcldpZHRoKCEwKSxoZWlnaHQ6dC5vdXRlckhlaWdodCghMCksXCJmbG9hdFwiOnQuY3NzKFwiZmxvYXRcIil9LHM9ZShcIjxkaXY+PC9kaXY+XCIpLmFkZENsYXNzKFwidWktZWZmZWN0cy13cmFwcGVyXCIpLmNzcyh7Zm9udFNpemU6XCIxMDAlXCIsYmFja2dyb3VuZDpcInRyYW5zcGFyZW50XCIsYm9yZGVyOlwibm9uZVwiLG1hcmdpbjowLHBhZGRpbmc6MH0pLG49e3dpZHRoOnQud2lkdGgoKSxoZWlnaHQ6dC5oZWlnaHQoKX0sYT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O3RyeXthLmlkfWNhdGNoKG8pe2E9ZG9jdW1lbnQuYm9keX1yZXR1cm4gdC53cmFwKHMpLCh0WzBdPT09YXx8ZS5jb250YWlucyh0WzBdLGEpKSYmZShhKS5mb2N1cygpLHM9dC5wYXJlbnQoKSxcInN0YXRpY1wiPT09dC5jc3MoXCJwb3NpdGlvblwiKT8ocy5jc3Moe3Bvc2l0aW9uOlwicmVsYXRpdmVcIn0pLHQuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KSk6KGUuZXh0ZW5kKGkse3Bvc2l0aW9uOnQuY3NzKFwicG9zaXRpb25cIiksekluZGV4OnQuY3NzKFwiei1pbmRleFwiKX0pLGUuZWFjaChbXCJ0b3BcIixcImxlZnRcIixcImJvdHRvbVwiLFwicmlnaHRcIl0sZnVuY3Rpb24oZSxzKXtpW3NdPXQuY3NzKHMpLGlzTmFOKHBhcnNlSW50KGlbc10sMTApKSYmKGlbc109XCJhdXRvXCIpfSksdC5jc3Moe3Bvc2l0aW9uOlwicmVsYXRpdmVcIix0b3A6MCxsZWZ0OjAscmlnaHQ6XCJhdXRvXCIsYm90dG9tOlwiYXV0b1wifSkpLHQuY3NzKG4pLHMuY3NzKGkpLnNob3coKX0scmVtb3ZlV3JhcHBlcjpmdW5jdGlvbih0KXt2YXIgaT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O3JldHVybiB0LnBhcmVudCgpLmlzKFwiLnVpLWVmZmVjdHMtd3JhcHBlclwiKSYmKHQucGFyZW50KCkucmVwbGFjZVdpdGgodCksKHRbMF09PT1pfHxlLmNvbnRhaW5zKHRbMF0saSkpJiZlKGkpLmZvY3VzKCkpLHR9LHNldFRyYW5zaXRpb246ZnVuY3Rpb24odCxpLHMsbil7cmV0dXJuIG49bnx8e30sZS5lYWNoKGksZnVuY3Rpb24oZSxpKXt2YXIgYT10LmNzc1VuaXQoaSk7YVswXT4wJiYobltpXT1hWzBdKnMrYVsxXSl9KSxufX0pLGUuZm4uZXh0ZW5kKHtlZmZlY3Q6ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKHQpe2Z1bmN0aW9uIGkoKXtlLmlzRnVuY3Rpb24oYSkmJmEuY2FsbChuWzBdKSxlLmlzRnVuY3Rpb24odCkmJnQoKX12YXIgbj1lKHRoaXMpLGE9cy5jb21wbGV0ZSxyPXMubW9kZTsobi5pcyhcIjpoaWRkZW5cIik/XCJoaWRlXCI9PT1yOlwic2hvd1wiPT09cik/KG5bcl0oKSxpKCkpOm8uY2FsbChuWzBdLHMsaSl9dmFyIHM9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyksbj1zLm1vZGUsYT1zLnF1ZXVlLG89ZS5lZmZlY3RzLmVmZmVjdFtzLmVmZmVjdF07cmV0dXJuIGUuZngub2ZmfHwhbz9uP3RoaXNbbl0ocy5kdXJhdGlvbixzLmNvbXBsZXRlKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtzLmNvbXBsZXRlJiZzLmNvbXBsZXRlLmNhbGwodGhpcyl9KTphPT09ITE/dGhpcy5lYWNoKGkpOnRoaXMucXVldWUoYXx8XCJmeFwiLGkpfSxzaG93OmZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihzKXtpZihpKHMpKXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgbj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbi5tb2RlPVwic2hvd1wiLHRoaXMuZWZmZWN0LmNhbGwodGhpcyxuKX19KGUuZm4uc2hvdyksaGlkZTpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24ocyl7aWYoaShzKSlyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIG49dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG4ubW9kZT1cImhpZGVcIix0aGlzLmVmZmVjdC5jYWxsKHRoaXMsbil9fShlLmZuLmhpZGUpLHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24ocyl7aWYoaShzKXx8XCJib29sZWFuXCI9PXR5cGVvZiBzKXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgbj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbi5tb2RlPVwidG9nZ2xlXCIsdGhpcy5lZmZlY3QuY2FsbCh0aGlzLG4pfX0oZS5mbi50b2dnbGUpLGNzc1VuaXQ6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5jc3ModCkscz1bXTtyZXR1cm4gZS5lYWNoKFtcImVtXCIsXCJweFwiLFwiJVwiLFwicHRcIl0sZnVuY3Rpb24oZSx0KXtpLmluZGV4T2YodCk+MCYmKHM9W3BhcnNlRmxvYXQoaSksdF0pfSksc319KX0oKSxmdW5jdGlvbigpe3ZhciB0PXt9O2UuZWFjaChbXCJRdWFkXCIsXCJDdWJpY1wiLFwiUXVhcnRcIixcIlF1aW50XCIsXCJFeHBvXCJdLGZ1bmN0aW9uKGUsaSl7dFtpXT1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3codCxlKzIpfX0pLGUuZXh0ZW5kKHQse1NpbmU6ZnVuY3Rpb24oZSl7cmV0dXJuIDEtTWF0aC5jb3MoZSpNYXRoLlBJLzIpfSxDaXJjOmZ1bmN0aW9uKGUpe3JldHVybiAxLU1hdGguc3FydCgxLWUqZSl9LEVsYXN0aWM6ZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT1lfHwxPT09ZT9lOi1NYXRoLnBvdygyLDgqKGUtMSkpKk1hdGguc2luKCg4MCooZS0xKS03LjUpKk1hdGguUEkvMTUpfSxCYWNrOmZ1bmN0aW9uKGUpe3JldHVybiBlKmUqKDMqZS0yKX0sQm91bmNlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxpPTQ7KCh0PU1hdGgucG93KDIsLS1pKSktMSkvMTE+ZTspO3JldHVybiAxL01hdGgucG93KDQsMy1pKS03LjU2MjUqTWF0aC5wb3coKDMqdC0yKS8yMi1lLDIpfX0pLGUuZWFjaCh0LGZ1bmN0aW9uKHQsaSl7ZS5lYXNpbmdbXCJlYXNlSW5cIit0XT1pLGUuZWFzaW5nW1wiZWFzZU91dFwiK3RdPWZ1bmN0aW9uKGUpe3JldHVybiAxLWkoMS1lKX0sZS5lYXNpbmdbXCJlYXNlSW5PdXRcIit0XT1mdW5jdGlvbihlKXtyZXR1cm4uNT5lP2koMiplKS8yOjEtaSgtMiplKzIpLzJ9fSl9KCksZS5lZmZlY3RzLGUuZWZmZWN0cy5lZmZlY3QuYmxpbmQ9ZnVuY3Rpb24odCxpKXt2YXIgcyxuLGEsbz1lKHRoaXMpLHI9L3VwfGRvd258dmVydGljYWwvLGg9L3VwfGxlZnR8dmVydGljYWx8aG9yaXpvbnRhbC8sbD1bXCJwb3NpdGlvblwiLFwidG9wXCIsXCJib3R0b21cIixcImxlZnRcIixcInJpZ2h0XCIsXCJoZWlnaHRcIixcIndpZHRoXCJdLHU9ZS5lZmZlY3RzLnNldE1vZGUobyx0Lm1vZGV8fFwiaGlkZVwiKSxkPXQuZGlyZWN0aW9ufHxcInVwXCIsYz1yLnRlc3QoZCkscD1jP1wiaGVpZ2h0XCI6XCJ3aWR0aFwiLGY9Yz9cInRvcFwiOlwibGVmdFwiLG09aC50ZXN0KGQpLGc9e30sdj1cInNob3dcIj09PXU7by5wYXJlbnQoKS5pcyhcIi51aS1lZmZlY3RzLXdyYXBwZXJcIik/ZS5lZmZlY3RzLnNhdmUoby5wYXJlbnQoKSxsKTplLmVmZmVjdHMuc2F2ZShvLGwpLG8uc2hvdygpLHM9ZS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIobykuY3NzKHtvdmVyZmxvdzpcImhpZGRlblwifSksbj1zW3BdKCksYT1wYXJzZUZsb2F0KHMuY3NzKGYpKXx8MCxnW3BdPXY/bjowLG18fChvLmNzcyhjP1wiYm90dG9tXCI6XCJyaWdodFwiLDApLmNzcyhjP1widG9wXCI6XCJsZWZ0XCIsXCJhdXRvXCIpLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwifSksZ1tmXT12P2E6bithKSx2JiYocy5jc3MocCwwKSxtfHxzLmNzcyhmLGErbikpLHMuYW5pbWF0ZShnLHtkdXJhdGlvbjp0LmR1cmF0aW9uLGVhc2luZzp0LmVhc2luZyxxdWV1ZTohMSxjb21wbGV0ZTpmdW5jdGlvbigpe1wiaGlkZVwiPT09dSYmby5oaWRlKCksZS5lZmZlY3RzLnJlc3RvcmUobyxsKSxlLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihvKSxpKCl9fSl9LGUuZWZmZWN0cy5lZmZlY3QuYm91bmNlPWZ1bmN0aW9uKHQsaSl7dmFyIHMsbixhLG89ZSh0aGlzKSxyPVtcInBvc2l0aW9uXCIsXCJ0b3BcIixcImJvdHRvbVwiLFwibGVmdFwiLFwicmlnaHRcIixcImhlaWdodFwiLFwid2lkdGhcIl0saD1lLmVmZmVjdHMuc2V0TW9kZShvLHQubW9kZXx8XCJlZmZlY3RcIiksbD1cImhpZGVcIj09PWgsdT1cInNob3dcIj09PWgsZD10LmRpcmVjdGlvbnx8XCJ1cFwiLGM9dC5kaXN0YW5jZSxwPXQudGltZXN8fDUsZj0yKnArKHV8fGw/MTowKSxtPXQuZHVyYXRpb24vZixnPXQuZWFzaW5nLHY9XCJ1cFwiPT09ZHx8XCJkb3duXCI9PT1kP1widG9wXCI6XCJsZWZ0XCIseT1cInVwXCI9PT1kfHxcImxlZnRcIj09PWQsYj1vLnF1ZXVlKCksXz1iLmxlbmd0aDtmb3IoKHV8fGwpJiZyLnB1c2goXCJvcGFjaXR5XCIpLGUuZWZmZWN0cy5zYXZlKG8sciksby5zaG93KCksZS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIobyksY3x8KGM9b1tcInRvcFwiPT09dj9cIm91dGVySGVpZ2h0XCI6XCJvdXRlcldpZHRoXCJdKCkvMyksdSYmKGE9e29wYWNpdHk6MX0sYVt2XT0wLG8uY3NzKFwib3BhY2l0eVwiLDApLmNzcyh2LHk/MiotYzoyKmMpLmFuaW1hdGUoYSxtLGcpKSxsJiYoYy89TWF0aC5wb3coMixwLTEpKSxhPXt9LGFbdl09MCxzPTA7cD5zO3MrKyluPXt9LG5bdl09KHk/XCItPVwiOlwiKz1cIikrYyxvLmFuaW1hdGUobixtLGcpLmFuaW1hdGUoYSxtLGcpLGM9bD8yKmM6Yy8yO2wmJihuPXtvcGFjaXR5OjB9LG5bdl09KHk/XCItPVwiOlwiKz1cIikrYyxvLmFuaW1hdGUobixtLGcpKSxvLnF1ZXVlKGZ1bmN0aW9uKCl7bCYmby5oaWRlKCksZS5lZmZlY3RzLnJlc3RvcmUobyxyKSxlLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihvKSxpKCl9KSxfPjEmJmIuc3BsaWNlLmFwcGx5KGIsWzEsMF0uY29uY2F0KGIuc3BsaWNlKF8sZisxKSkpLG8uZGVxdWV1ZSgpfSxlLmVmZmVjdHMuZWZmZWN0LmNsaXA9ZnVuY3Rpb24odCxpKXt2YXIgcyxuLGEsbz1lKHRoaXMpLHI9W1wicG9zaXRpb25cIixcInRvcFwiLFwiYm90dG9tXCIsXCJsZWZ0XCIsXCJyaWdodFwiLFwiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxoPWUuZWZmZWN0cy5zZXRNb2RlKG8sdC5tb2RlfHxcImhpZGVcIiksbD1cInNob3dcIj09PWgsdT10LmRpcmVjdGlvbnx8XCJ2ZXJ0aWNhbFwiLGQ9XCJ2ZXJ0aWNhbFwiPT09dSxjPWQ/XCJoZWlnaHRcIjpcIndpZHRoXCIscD1kP1widG9wXCI6XCJsZWZ0XCIsZj17fTtlLmVmZmVjdHMuc2F2ZShvLHIpLG8uc2hvdygpLHM9ZS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIobykuY3NzKHtvdmVyZmxvdzpcImhpZGRlblwifSksbj1cIklNR1wiPT09b1swXS50YWdOYW1lP3M6byxhPW5bY10oKSxsJiYobi5jc3MoYywwKSxuLmNzcyhwLGEvMikpLGZbY109bD9hOjAsZltwXT1sPzA6YS8yLG4uYW5pbWF0ZShmLHtxdWV1ZTohMSxkdXJhdGlvbjp0LmR1cmF0aW9uLGVhc2luZzp0LmVhc2luZyxjb21wbGV0ZTpmdW5jdGlvbigpe2x8fG8uaGlkZSgpLGUuZWZmZWN0cy5yZXN0b3JlKG8sciksZS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIobyksaSgpfX0pfSxlLmVmZmVjdHMuZWZmZWN0LmRyb3A9ZnVuY3Rpb24odCxpKXt2YXIgcyxuPWUodGhpcyksYT1bXCJwb3NpdGlvblwiLFwidG9wXCIsXCJib3R0b21cIixcImxlZnRcIixcInJpZ2h0XCIsXCJvcGFjaXR5XCIsXCJoZWlnaHRcIixcIndpZHRoXCJdLG89ZS5lZmZlY3RzLnNldE1vZGUobix0Lm1vZGV8fFwiaGlkZVwiKSxyPVwic2hvd1wiPT09byxoPXQuZGlyZWN0aW9ufHxcImxlZnRcIixsPVwidXBcIj09PWh8fFwiZG93blwiPT09aD9cInRvcFwiOlwibGVmdFwiLHU9XCJ1cFwiPT09aHx8XCJsZWZ0XCI9PT1oP1wicG9zXCI6XCJuZWdcIixkPXtvcGFjaXR5OnI/MTowfTtlLmVmZmVjdHMuc2F2ZShuLGEpLG4uc2hvdygpLGUuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKG4pLHM9dC5kaXN0YW5jZXx8bltcInRvcFwiPT09bD9cIm91dGVySGVpZ2h0XCI6XCJvdXRlcldpZHRoXCJdKCEwKS8yLHImJm4uY3NzKFwib3BhY2l0eVwiLDApLmNzcyhsLFwicG9zXCI9PT11Py1zOnMpLGRbbF09KHI/XCJwb3NcIj09PXU/XCIrPVwiOlwiLT1cIjpcInBvc1wiPT09dT9cIi09XCI6XCIrPVwiKStzLG4uYW5pbWF0ZShkLHtxdWV1ZTohMSxkdXJhdGlvbjp0LmR1cmF0aW9uLGVhc2luZzp0LmVhc2luZyxjb21wbGV0ZTpmdW5jdGlvbigpe1wiaGlkZVwiPT09byYmbi5oaWRlKCksZS5lZmZlY3RzLnJlc3RvcmUobixhKSxlLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihuKSxpKCl9fSl9LGUuZWZmZWN0cy5lZmZlY3QuZXhwbG9kZT1mdW5jdGlvbih0LGkpe2Z1bmN0aW9uIHMoKXtiLnB1c2godGhpcyksYi5sZW5ndGg9PT1kKmMmJm4oKX1mdW5jdGlvbiBuKCl7cC5jc3Moe3Zpc2liaWxpdHk6XCJ2aXNpYmxlXCJ9KSxlKGIpLnJlbW92ZSgpLG18fHAuaGlkZSgpLGkoKX12YXIgYSxvLHIsaCxsLHUsZD10LnBpZWNlcz9NYXRoLnJvdW5kKE1hdGguc3FydCh0LnBpZWNlcykpOjMsYz1kLHA9ZSh0aGlzKSxmPWUuZWZmZWN0cy5zZXRNb2RlKHAsdC5tb2RlfHxcImhpZGVcIiksbT1cInNob3dcIj09PWYsZz1wLnNob3coKS5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIikub2Zmc2V0KCksdj1NYXRoLmNlaWwocC5vdXRlcldpZHRoKCkvYykseT1NYXRoLmNlaWwocC5vdXRlckhlaWdodCgpL2QpLGI9W107Zm9yKGE9MDtkPmE7YSsrKWZvcihoPWcudG9wK2EqeSx1PWEtKGQtMSkvMixvPTA7Yz5vO28rKylyPWcubGVmdCtvKnYsbD1vLShjLTEpLzIscC5jbG9uZSgpLmFwcGVuZFRvKFwiYm9keVwiKS53cmFwKFwiPGRpdj48L2Rpdj5cIikuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsdmlzaWJpbGl0eTpcInZpc2libGVcIixsZWZ0Oi1vKnYsdG9wOi1hKnl9KS5wYXJlbnQoKS5hZGRDbGFzcyhcInVpLWVmZmVjdHMtZXhwbG9kZVwiKS5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIixvdmVyZmxvdzpcImhpZGRlblwiLHdpZHRoOnYsaGVpZ2h0OnksbGVmdDpyKyhtP2wqdjowKSx0b3A6aCsobT91Knk6MCksb3BhY2l0eTptPzA6MX0pLmFuaW1hdGUoe2xlZnQ6cisobT8wOmwqdiksdG9wOmgrKG0/MDp1KnkpLG9wYWNpdHk6bT8xOjB9LHQuZHVyYXRpb258fDUwMCx0LmVhc2luZyxzKX0sZS5lZmZlY3RzLmVmZmVjdC5mYWRlPWZ1bmN0aW9uKHQsaSl7dmFyIHM9ZSh0aGlzKSxuPWUuZWZmZWN0cy5zZXRNb2RlKHMsdC5tb2RlfHxcInRvZ2dsZVwiKTtzLmFuaW1hdGUoe29wYWNpdHk6bn0se3F1ZXVlOiExLGR1cmF0aW9uOnQuZHVyYXRpb24sZWFzaW5nOnQuZWFzaW5nLGNvbXBsZXRlOml9KX0sZS5lZmZlY3RzLmVmZmVjdC5mb2xkPWZ1bmN0aW9uKHQsaSl7dmFyIHMsbixhPWUodGhpcyksbz1bXCJwb3NpdGlvblwiLFwidG9wXCIsXCJib3R0b21cIixcImxlZnRcIixcInJpZ2h0XCIsXCJoZWlnaHRcIixcIndpZHRoXCJdLHI9ZS5lZmZlY3RzLnNldE1vZGUoYSx0Lm1vZGV8fFwiaGlkZVwiKSxoPVwic2hvd1wiPT09cixsPVwiaGlkZVwiPT09cix1PXQuc2l6ZXx8MTUsZD0vKFswLTldKyklLy5leGVjKHUpLGM9ISF0Lmhvcml6Rmlyc3QscD1oIT09YyxmPXA/W1wid2lkdGhcIixcImhlaWdodFwiXTpbXCJoZWlnaHRcIixcIndpZHRoXCJdLG09dC5kdXJhdGlvbi8yLGc9e30sdj17fTtlLmVmZmVjdHMuc2F2ZShhLG8pLGEuc2hvdygpLHM9ZS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoYSkuY3NzKHtvdmVyZmxvdzpcImhpZGRlblwifSksbj1wP1tzLndpZHRoKCkscy5oZWlnaHQoKV06W3MuaGVpZ2h0KCkscy53aWR0aCgpXSxkJiYodT1wYXJzZUludChkWzFdLDEwKS8xMDAqbltsPzA6MV0pLGgmJnMuY3NzKGM/e2hlaWdodDowLHdpZHRoOnV9OntoZWlnaHQ6dSx3aWR0aDowfSksZ1tmWzBdXT1oP25bMF06dSx2W2ZbMV1dPWg/blsxXTowLHMuYW5pbWF0ZShnLG0sdC5lYXNpbmcpLmFuaW1hdGUodixtLHQuZWFzaW5nLGZ1bmN0aW9uKCl7bCYmYS5oaWRlKCksZS5lZmZlY3RzLnJlc3RvcmUoYSxvKSxlLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihhKSxpKCl9KX0sZS5lZmZlY3RzLmVmZmVjdC5oaWdobGlnaHQ9ZnVuY3Rpb24odCxpKXt2YXIgcz1lKHRoaXMpLG49W1wiYmFja2dyb3VuZEltYWdlXCIsXCJiYWNrZ3JvdW5kQ29sb3JcIixcIm9wYWNpdHlcIl0sYT1lLmVmZmVjdHMuc2V0TW9kZShzLHQubW9kZXx8XCJzaG93XCIpLG89e2JhY2tncm91bmRDb2xvcjpzLmNzcyhcImJhY2tncm91bmRDb2xvclwiKX07XCJoaWRlXCI9PT1hJiYoby5vcGFjaXR5PTApLGUuZWZmZWN0cy5zYXZlKHMsbikscy5zaG93KCkuY3NzKHtiYWNrZ3JvdW5kSW1hZ2U6XCJub25lXCIsYmFja2dyb3VuZENvbG9yOnQuY29sb3J8fFwiI2ZmZmY5OVwifSkuYW5pbWF0ZShvLHtxdWV1ZTohMSxkdXJhdGlvbjp0LmR1cmF0aW9uLGVhc2luZzp0LmVhc2luZyxjb21wbGV0ZTpmdW5jdGlvbigpe1wiaGlkZVwiPT09YSYmcy5oaWRlKCksZS5lZmZlY3RzLnJlc3RvcmUocyxuKSxpKCl9fSl9LGUuZWZmZWN0cy5lZmZlY3Quc2l6ZT1mdW5jdGlvbih0LGkpe3ZhciBzLG4sYSxvPWUodGhpcykscj1bXCJwb3NpdGlvblwiLFwidG9wXCIsXCJib3R0b21cIixcImxlZnRcIixcInJpZ2h0XCIsXCJ3aWR0aFwiLFwiaGVpZ2h0XCIsXCJvdmVyZmxvd1wiLFwib3BhY2l0eVwiXSxoPVtcInBvc2l0aW9uXCIsXCJ0b3BcIixcImJvdHRvbVwiLFwibGVmdFwiLFwicmlnaHRcIixcIm92ZXJmbG93XCIsXCJvcGFjaXR5XCJdLGw9W1wid2lkdGhcIixcImhlaWdodFwiLFwib3ZlcmZsb3dcIl0sdT1bXCJmb250U2l6ZVwiXSxkPVtcImJvcmRlclRvcFdpZHRoXCIsXCJib3JkZXJCb3R0b21XaWR0aFwiLFwicGFkZGluZ1RvcFwiLFwicGFkZGluZ0JvdHRvbVwiXSxjPVtcImJvcmRlckxlZnRXaWR0aFwiLFwiYm9yZGVyUmlnaHRXaWR0aFwiLFwicGFkZGluZ0xlZnRcIixcInBhZGRpbmdSaWdodFwiXSxwPWUuZWZmZWN0cy5zZXRNb2RlKG8sdC5tb2RlfHxcImVmZmVjdFwiKSxmPXQucmVzdG9yZXx8XCJlZmZlY3RcIiE9PXAsbT10LnNjYWxlfHxcImJvdGhcIixnPXQub3JpZ2lufHxbXCJtaWRkbGVcIixcImNlbnRlclwiXSx2PW8uY3NzKFwicG9zaXRpb25cIikseT1mP3I6aCxiPXtoZWlnaHQ6MCx3aWR0aDowLG91dGVySGVpZ2h0OjAsb3V0ZXJXaWR0aDowfTtcInNob3dcIj09PXAmJm8uc2hvdygpLHM9e2hlaWdodDpvLmhlaWdodCgpLHdpZHRoOm8ud2lkdGgoKSxvdXRlckhlaWdodDpvLm91dGVySGVpZ2h0KCksb3V0ZXJXaWR0aDpvLm91dGVyV2lkdGgoKX0sXCJ0b2dnbGVcIj09PXQubW9kZSYmXCJzaG93XCI9PT1wPyhvLmZyb209dC50b3x8YixvLnRvPXQuZnJvbXx8cyk6KG8uZnJvbT10LmZyb218fChcInNob3dcIj09PXA/YjpzKSxvLnRvPXQudG98fChcImhpZGVcIj09PXA/YjpzKSksYT17ZnJvbTp7eTpvLmZyb20uaGVpZ2h0L3MuaGVpZ2h0LHg6by5mcm9tLndpZHRoL3Mud2lkdGh9LHRvOnt5Om8udG8uaGVpZ2h0L3MuaGVpZ2h0LHg6by50by53aWR0aC9zLndpZHRofX0sKFwiYm94XCI9PT1tfHxcImJvdGhcIj09PW0pJiYoYS5mcm9tLnkhPT1hLnRvLnkmJih5PXkuY29uY2F0KGQpLG8uZnJvbT1lLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihvLGQsYS5mcm9tLnksby5mcm9tKSxvLnRvPWUuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKG8sZCxhLnRvLnksby50bykpLGEuZnJvbS54IT09YS50by54JiYoeT15LmNvbmNhdChjKSxvLmZyb209ZS5lZmZlY3RzLnNldFRyYW5zaXRpb24obyxjLGEuZnJvbS54LG8uZnJvbSksby50bz1lLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihvLGMsYS50by54LG8udG8pKSksKFwiY29udGVudFwiPT09bXx8XCJib3RoXCI9PT1tKSYmYS5mcm9tLnkhPT1hLnRvLnkmJih5PXkuY29uY2F0KHUpLmNvbmNhdChsKSxvLmZyb209ZS5lZmZlY3RzLnNldFRyYW5zaXRpb24obyx1LGEuZnJvbS55LG8uZnJvbSksby50bz1lLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihvLHUsYS50by55LG8udG8pKSxlLmVmZmVjdHMuc2F2ZShvLHkpLG8uc2hvdygpLGUuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKG8pLG8uY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKS5jc3Moby5mcm9tKSxnJiYobj1lLmVmZmVjdHMuZ2V0QmFzZWxpbmUoZyxzKSxvLmZyb20udG9wPShzLm91dGVySGVpZ2h0LW8ub3V0ZXJIZWlnaHQoKSkqbi55LG8uZnJvbS5sZWZ0PShzLm91dGVyV2lkdGgtby5vdXRlcldpZHRoKCkpKm4ueCxvLnRvLnRvcD0ocy5vdXRlckhlaWdodC1vLnRvLm91dGVySGVpZ2h0KSpuLnksby50by5sZWZ0PShzLm91dGVyV2lkdGgtby50by5vdXRlcldpZHRoKSpuLngpLG8uY3NzKG8uZnJvbSksKFwiY29udGVudFwiPT09bXx8XCJib3RoXCI9PT1tKSYmKGQ9ZC5jb25jYXQoW1wibWFyZ2luVG9wXCIsXCJtYXJnaW5Cb3R0b21cIl0pLmNvbmNhdCh1KSxjPWMuY29uY2F0KFtcIm1hcmdpbkxlZnRcIixcIm1hcmdpblJpZ2h0XCJdKSxsPXIuY29uY2F0KGQpLmNvbmNhdChjKSxvLmZpbmQoXCIqW3dpZHRoXVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9ZSh0aGlzKSxzPXtoZWlnaHQ6aS5oZWlnaHQoKSx3aWR0aDppLndpZHRoKCksb3V0ZXJIZWlnaHQ6aS5vdXRlckhlaWdodCgpLG91dGVyV2lkdGg6aS5vdXRlcldpZHRoKCl9O1xuZiYmZS5lZmZlY3RzLnNhdmUoaSxsKSxpLmZyb209e2hlaWdodDpzLmhlaWdodCphLmZyb20ueSx3aWR0aDpzLndpZHRoKmEuZnJvbS54LG91dGVySGVpZ2h0OnMub3V0ZXJIZWlnaHQqYS5mcm9tLnksb3V0ZXJXaWR0aDpzLm91dGVyV2lkdGgqYS5mcm9tLnh9LGkudG89e2hlaWdodDpzLmhlaWdodCphLnRvLnksd2lkdGg6cy53aWR0aCphLnRvLngsb3V0ZXJIZWlnaHQ6cy5oZWlnaHQqYS50by55LG91dGVyV2lkdGg6cy53aWR0aCphLnRvLnh9LGEuZnJvbS55IT09YS50by55JiYoaS5mcm9tPWUuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGksZCxhLmZyb20ueSxpLmZyb20pLGkudG89ZS5lZmZlY3RzLnNldFRyYW5zaXRpb24oaSxkLGEudG8ueSxpLnRvKSksYS5mcm9tLnghPT1hLnRvLngmJihpLmZyb209ZS5lZmZlY3RzLnNldFRyYW5zaXRpb24oaSxjLGEuZnJvbS54LGkuZnJvbSksaS50bz1lLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihpLGMsYS50by54LGkudG8pKSxpLmNzcyhpLmZyb20pLGkuYW5pbWF0ZShpLnRvLHQuZHVyYXRpb24sdC5lYXNpbmcsZnVuY3Rpb24oKXtmJiZlLmVmZmVjdHMucmVzdG9yZShpLGwpfSl9KSksby5hbmltYXRlKG8udG8se3F1ZXVlOiExLGR1cmF0aW9uOnQuZHVyYXRpb24sZWFzaW5nOnQuZWFzaW5nLGNvbXBsZXRlOmZ1bmN0aW9uKCl7MD09PW8udG8ub3BhY2l0eSYmby5jc3MoXCJvcGFjaXR5XCIsby5mcm9tLm9wYWNpdHkpLFwiaGlkZVwiPT09cCYmby5oaWRlKCksZS5lZmZlY3RzLnJlc3RvcmUobyx5KSxmfHwoXCJzdGF0aWNcIj09PXY/by5jc3Moe3Bvc2l0aW9uOlwicmVsYXRpdmVcIix0b3A6by50by50b3AsbGVmdDpvLnRvLmxlZnR9KTplLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGUsdCl7by5jc3ModCxmdW5jdGlvbih0LGkpe3ZhciBzPXBhcnNlSW50KGksMTApLG49ZT9vLnRvLmxlZnQ6by50by50b3A7cmV0dXJuXCJhdXRvXCI9PT1pP24rXCJweFwiOnMrbitcInB4XCJ9KX0pKSxlLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihvKSxpKCl9fSl9LGUuZWZmZWN0cy5lZmZlY3Quc2NhbGU9ZnVuY3Rpb24odCxpKXt2YXIgcz1lKHRoaXMpLG49ZS5leHRlbmQoITAse30sdCksYT1lLmVmZmVjdHMuc2V0TW9kZShzLHQubW9kZXx8XCJlZmZlY3RcIiksbz1wYXJzZUludCh0LnBlcmNlbnQsMTApfHwoMD09PXBhcnNlSW50KHQucGVyY2VudCwxMCk/MDpcImhpZGVcIj09PWE/MDoxMDApLHI9dC5kaXJlY3Rpb258fFwiYm90aFwiLGg9dC5vcmlnaW4sbD17aGVpZ2h0OnMuaGVpZ2h0KCksd2lkdGg6cy53aWR0aCgpLG91dGVySGVpZ2h0OnMub3V0ZXJIZWlnaHQoKSxvdXRlcldpZHRoOnMub3V0ZXJXaWR0aCgpfSx1PXt5OlwiaG9yaXpvbnRhbFwiIT09cj9vLzEwMDoxLHg6XCJ2ZXJ0aWNhbFwiIT09cj9vLzEwMDoxfTtuLmVmZmVjdD1cInNpemVcIixuLnF1ZXVlPSExLG4uY29tcGxldGU9aSxcImVmZmVjdFwiIT09YSYmKG4ub3JpZ2luPWh8fFtcIm1pZGRsZVwiLFwiY2VudGVyXCJdLG4ucmVzdG9yZT0hMCksbi5mcm9tPXQuZnJvbXx8KFwic2hvd1wiPT09YT97aGVpZ2h0OjAsd2lkdGg6MCxvdXRlckhlaWdodDowLG91dGVyV2lkdGg6MH06bCksbi50bz17aGVpZ2h0OmwuaGVpZ2h0KnUueSx3aWR0aDpsLndpZHRoKnUueCxvdXRlckhlaWdodDpsLm91dGVySGVpZ2h0KnUueSxvdXRlcldpZHRoOmwub3V0ZXJXaWR0aCp1Lnh9LG4uZmFkZSYmKFwic2hvd1wiPT09YSYmKG4uZnJvbS5vcGFjaXR5PTAsbi50by5vcGFjaXR5PTEpLFwiaGlkZVwiPT09YSYmKG4uZnJvbS5vcGFjaXR5PTEsbi50by5vcGFjaXR5PTApKSxzLmVmZmVjdChuKX0sZS5lZmZlY3RzLmVmZmVjdC5wdWZmPWZ1bmN0aW9uKHQsaSl7dmFyIHM9ZSh0aGlzKSxuPWUuZWZmZWN0cy5zZXRNb2RlKHMsdC5tb2RlfHxcImhpZGVcIiksYT1cImhpZGVcIj09PW4sbz1wYXJzZUludCh0LnBlcmNlbnQsMTApfHwxNTAscj1vLzEwMCxoPXtoZWlnaHQ6cy5oZWlnaHQoKSx3aWR0aDpzLndpZHRoKCksb3V0ZXJIZWlnaHQ6cy5vdXRlckhlaWdodCgpLG91dGVyV2lkdGg6cy5vdXRlcldpZHRoKCl9O2UuZXh0ZW5kKHQse2VmZmVjdDpcInNjYWxlXCIscXVldWU6ITEsZmFkZTohMCxtb2RlOm4sY29tcGxldGU6aSxwZXJjZW50OmE/bzoxMDAsZnJvbTphP2g6e2hlaWdodDpoLmhlaWdodCpyLHdpZHRoOmgud2lkdGgqcixvdXRlckhlaWdodDpoLm91dGVySGVpZ2h0KnIsb3V0ZXJXaWR0aDpoLm91dGVyV2lkdGgqcn19KSxzLmVmZmVjdCh0KX0sZS5lZmZlY3RzLmVmZmVjdC5wdWxzYXRlPWZ1bmN0aW9uKHQsaSl7dmFyIHMsbj1lKHRoaXMpLGE9ZS5lZmZlY3RzLnNldE1vZGUobix0Lm1vZGV8fFwic2hvd1wiKSxvPVwic2hvd1wiPT09YSxyPVwiaGlkZVwiPT09YSxoPW98fFwiaGlkZVwiPT09YSxsPTIqKHQudGltZXN8fDUpKyhoPzE6MCksdT10LmR1cmF0aW9uL2wsZD0wLGM9bi5xdWV1ZSgpLHA9Yy5sZW5ndGg7Zm9yKChvfHwhbi5pcyhcIjp2aXNpYmxlXCIpKSYmKG4uY3NzKFwib3BhY2l0eVwiLDApLnNob3coKSxkPTEpLHM9MTtsPnM7cysrKW4uYW5pbWF0ZSh7b3BhY2l0eTpkfSx1LHQuZWFzaW5nKSxkPTEtZDtuLmFuaW1hdGUoe29wYWNpdHk6ZH0sdSx0LmVhc2luZyksbi5xdWV1ZShmdW5jdGlvbigpe3ImJm4uaGlkZSgpLGkoKX0pLHA+MSYmYy5zcGxpY2UuYXBwbHkoYyxbMSwwXS5jb25jYXQoYy5zcGxpY2UocCxsKzEpKSksbi5kZXF1ZXVlKCl9LGUuZWZmZWN0cy5lZmZlY3Quc2hha2U9ZnVuY3Rpb24odCxpKXt2YXIgcyxuPWUodGhpcyksYT1bXCJwb3NpdGlvblwiLFwidG9wXCIsXCJib3R0b21cIixcImxlZnRcIixcInJpZ2h0XCIsXCJoZWlnaHRcIixcIndpZHRoXCJdLG89ZS5lZmZlY3RzLnNldE1vZGUobix0Lm1vZGV8fFwiZWZmZWN0XCIpLHI9dC5kaXJlY3Rpb258fFwibGVmdFwiLGg9dC5kaXN0YW5jZXx8MjAsbD10LnRpbWVzfHwzLHU9MipsKzEsZD1NYXRoLnJvdW5kKHQuZHVyYXRpb24vdSksYz1cInVwXCI9PT1yfHxcImRvd25cIj09PXI/XCJ0b3BcIjpcImxlZnRcIixwPVwidXBcIj09PXJ8fFwibGVmdFwiPT09cixmPXt9LG09e30sZz17fSx2PW4ucXVldWUoKSx5PXYubGVuZ3RoO2ZvcihlLmVmZmVjdHMuc2F2ZShuLGEpLG4uc2hvdygpLGUuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKG4pLGZbY109KHA/XCItPVwiOlwiKz1cIikraCxtW2NdPShwP1wiKz1cIjpcIi09XCIpKzIqaCxnW2NdPShwP1wiLT1cIjpcIis9XCIpKzIqaCxuLmFuaW1hdGUoZixkLHQuZWFzaW5nKSxzPTE7bD5zO3MrKyluLmFuaW1hdGUobSxkLHQuZWFzaW5nKS5hbmltYXRlKGcsZCx0LmVhc2luZyk7bi5hbmltYXRlKG0sZCx0LmVhc2luZykuYW5pbWF0ZShmLGQvMix0LmVhc2luZykucXVldWUoZnVuY3Rpb24oKXtcImhpZGVcIj09PW8mJm4uaGlkZSgpLGUuZWZmZWN0cy5yZXN0b3JlKG4sYSksZS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIobiksaSgpfSkseT4xJiZ2LnNwbGljZS5hcHBseSh2LFsxLDBdLmNvbmNhdCh2LnNwbGljZSh5LHUrMSkpKSxuLmRlcXVldWUoKX0sZS5lZmZlY3RzLmVmZmVjdC5zbGlkZT1mdW5jdGlvbih0LGkpe3ZhciBzLG49ZSh0aGlzKSxhPVtcInBvc2l0aW9uXCIsXCJ0b3BcIixcImJvdHRvbVwiLFwibGVmdFwiLFwicmlnaHRcIixcIndpZHRoXCIsXCJoZWlnaHRcIl0sbz1lLmVmZmVjdHMuc2V0TW9kZShuLHQubW9kZXx8XCJzaG93XCIpLHI9XCJzaG93XCI9PT1vLGg9dC5kaXJlY3Rpb258fFwibGVmdFwiLGw9XCJ1cFwiPT09aHx8XCJkb3duXCI9PT1oP1widG9wXCI6XCJsZWZ0XCIsdT1cInVwXCI9PT1ofHxcImxlZnRcIj09PWgsZD17fTtlLmVmZmVjdHMuc2F2ZShuLGEpLG4uc2hvdygpLHM9dC5kaXN0YW5jZXx8bltcInRvcFwiPT09bD9cIm91dGVySGVpZ2h0XCI6XCJvdXRlcldpZHRoXCJdKCEwKSxlLmVmZmVjdHMuY3JlYXRlV3JhcHBlcihuKS5jc3Moe292ZXJmbG93OlwiaGlkZGVuXCJ9KSxyJiZuLmNzcyhsLHU/aXNOYU4ocyk/XCItXCIrczotczpzKSxkW2xdPShyP3U/XCIrPVwiOlwiLT1cIjp1P1wiLT1cIjpcIis9XCIpK3Msbi5hbmltYXRlKGQse3F1ZXVlOiExLGR1cmF0aW9uOnQuZHVyYXRpb24sZWFzaW5nOnQuZWFzaW5nLGNvbXBsZXRlOmZ1bmN0aW9uKCl7XCJoaWRlXCI9PT1vJiZuLmhpZGUoKSxlLmVmZmVjdHMucmVzdG9yZShuLGEpLGUuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKG4pLGkoKX19KX0sZS5lZmZlY3RzLmVmZmVjdC50cmFuc2Zlcj1mdW5jdGlvbih0LGkpe3ZhciBzPWUodGhpcyksbj1lKHQudG8pLGE9XCJmaXhlZFwiPT09bi5jc3MoXCJwb3NpdGlvblwiKSxvPWUoXCJib2R5XCIpLHI9YT9vLnNjcm9sbFRvcCgpOjAsaD1hP28uc2Nyb2xsTGVmdCgpOjAsbD1uLm9mZnNldCgpLHU9e3RvcDpsLnRvcC1yLGxlZnQ6bC5sZWZ0LWgsaGVpZ2h0Om4uaW5uZXJIZWlnaHQoKSx3aWR0aDpuLmlubmVyV2lkdGgoKX0sZD1zLm9mZnNldCgpLGM9ZShcIjxkaXYgY2xhc3M9J3VpLWVmZmVjdHMtdHJhbnNmZXInPjwvZGl2PlwiKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyh0LmNsYXNzTmFtZSkuY3NzKHt0b3A6ZC50b3AtcixsZWZ0OmQubGVmdC1oLGhlaWdodDpzLmlubmVySGVpZ2h0KCksd2lkdGg6cy5pbm5lcldpZHRoKCkscG9zaXRpb246YT9cImZpeGVkXCI6XCJhYnNvbHV0ZVwifSkuYW5pbWF0ZSh1LHQuZHVyYXRpb24sdC5lYXNpbmcsZnVuY3Rpb24oKXtjLnJlbW92ZSgpLGkoKX0pfSxlLndpZGdldChcInVpLnByb2dyZXNzYmFyXCIse3ZlcnNpb246XCIxLjExLjRcIixvcHRpb25zOnttYXg6MTAwLHZhbHVlOjAsY2hhbmdlOm51bGwsY29tcGxldGU6bnVsbH0sbWluOjAsX2NyZWF0ZTpmdW5jdGlvbigpe3RoaXMub2xkVmFsdWU9dGhpcy5vcHRpb25zLnZhbHVlPXRoaXMuX2NvbnN0cmFpbmVkVmFsdWUoKSx0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1wcm9ncmVzc2JhciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiKS5hdHRyKHtyb2xlOlwicHJvZ3Jlc3NiYXJcIixcImFyaWEtdmFsdWVtaW5cIjp0aGlzLm1pbn0pLHRoaXMudmFsdWVEaXY9ZShcIjxkaXYgY2xhc3M9J3VpLXByb2dyZXNzYmFyLXZhbHVlIHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWxlZnQnPjwvZGl2PlwiKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpLHRoaXMuX3JlZnJlc2hWYWx1ZSgpfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXByb2dyZXNzYmFyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsXCIpLnJlbW92ZUF0dHIoXCJyb2xlXCIpLnJlbW92ZUF0dHIoXCJhcmlhLXZhbHVlbWluXCIpLnJlbW92ZUF0dHIoXCJhcmlhLXZhbHVlbWF4XCIpLnJlbW92ZUF0dHIoXCJhcmlhLXZhbHVlbm93XCIpLHRoaXMudmFsdWVEaXYucmVtb3ZlKCl9LHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP3RoaXMub3B0aW9ucy52YWx1ZToodGhpcy5vcHRpb25zLnZhbHVlPXRoaXMuX2NvbnN0cmFpbmVkVmFsdWUoZSksdGhpcy5fcmVmcmVzaFZhbHVlKCksdm9pZCAwKX0sX2NvbnN0cmFpbmVkVmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPXRoaXMub3B0aW9ucy52YWx1ZSksdGhpcy5pbmRldGVybWluYXRlPWU9PT0hMSxcIm51bWJlclwiIT10eXBlb2YgZSYmKGU9MCksdGhpcy5pbmRldGVybWluYXRlPyExOk1hdGgubWluKHRoaXMub3B0aW9ucy5tYXgsTWF0aC5tYXgodGhpcy5taW4sZSkpfSxfc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdD1lLnZhbHVlO2RlbGV0ZSBlLnZhbHVlLHRoaXMuX3N1cGVyKGUpLHRoaXMub3B0aW9ucy52YWx1ZT10aGlzLl9jb25zdHJhaW5lZFZhbHVlKHQpLHRoaXMuX3JlZnJlc2hWYWx1ZSgpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsdCl7XCJtYXhcIj09PWUmJih0PU1hdGgubWF4KHRoaXMubWluLHQpKSxcImRpc2FibGVkXCI9PT1lJiZ0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCEhdCkuYXR0cihcImFyaWEtZGlzYWJsZWRcIix0KSx0aGlzLl9zdXBlcihlLHQpfSxfcGVyY2VudGFnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV0ZXJtaW5hdGU/MTAwOjEwMCoodGhpcy5vcHRpb25zLnZhbHVlLXRoaXMubWluKS8odGhpcy5vcHRpb25zLm1heC10aGlzLm1pbil9LF9yZWZyZXNoVmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMudmFsdWUsaT10aGlzLl9wZXJjZW50YWdlKCk7dGhpcy52YWx1ZURpdi50b2dnbGUodGhpcy5pbmRldGVybWluYXRlfHx0PnRoaXMubWluKS50b2dnbGVDbGFzcyhcInVpLWNvcm5lci1yaWdodFwiLHQ9PT10aGlzLm9wdGlvbnMubWF4KS53aWR0aChpLnRvRml4ZWQoMCkrXCIlXCIpLHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyhcInVpLXByb2dyZXNzYmFyLWluZGV0ZXJtaW5hdGVcIix0aGlzLmluZGV0ZXJtaW5hdGUpLHRoaXMuaW5kZXRlcm1pbmF0ZT8odGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLXZhbHVlbm93XCIpLHRoaXMub3ZlcmxheURpdnx8KHRoaXMub3ZlcmxheURpdj1lKFwiPGRpdiBjbGFzcz0ndWktcHJvZ3Jlc3NiYXItb3ZlcmxheSc+PC9kaXY+XCIpLmFwcGVuZFRvKHRoaXMudmFsdWVEaXYpKSk6KHRoaXMuZWxlbWVudC5hdHRyKHtcImFyaWEtdmFsdWVtYXhcIjp0aGlzLm9wdGlvbnMubWF4LFwiYXJpYS12YWx1ZW5vd1wiOnR9KSx0aGlzLm92ZXJsYXlEaXYmJih0aGlzLm92ZXJsYXlEaXYucmVtb3ZlKCksdGhpcy5vdmVybGF5RGl2PW51bGwpKSx0aGlzLm9sZFZhbHVlIT09dCYmKHRoaXMub2xkVmFsdWU9dCx0aGlzLl90cmlnZ2VyKFwiY2hhbmdlXCIpKSx0PT09dGhpcy5vcHRpb25zLm1heCYmdGhpcy5fdHJpZ2dlcihcImNvbXBsZXRlXCIpfX0pLGUud2lkZ2V0KFwidWkuc2VsZWN0YWJsZVwiLGUudWkubW91c2Use3ZlcnNpb246XCIxLjExLjRcIixvcHRpb25zOnthcHBlbmRUbzpcImJvZHlcIixhdXRvUmVmcmVzaDohMCxkaXN0YW5jZTowLGZpbHRlcjpcIipcIix0b2xlcmFuY2U6XCJ0b3VjaFwiLHNlbGVjdGVkOm51bGwsc2VsZWN0aW5nOm51bGwsc3RhcnQ6bnVsbCxzdG9wOm51bGwsdW5zZWxlY3RlZDpudWxsLHVuc2VsZWN0aW5nOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdCxpPXRoaXM7dGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktc2VsZWN0YWJsZVwiKSx0aGlzLmRyYWdnZWQ9ITEsdGhpcy5yZWZyZXNoPWZ1bmN0aW9uKCl7dD1lKGkub3B0aW9ucy5maWx0ZXIsaS5lbGVtZW50WzBdKSx0LmFkZENsYXNzKFwidWktc2VsZWN0ZWVcIiksdC5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxpPXQub2Zmc2V0KCk7ZS5kYXRhKHRoaXMsXCJzZWxlY3RhYmxlLWl0ZW1cIix7ZWxlbWVudDp0aGlzLCRlbGVtZW50OnQsbGVmdDppLmxlZnQsdG9wOmkudG9wLHJpZ2h0OmkubGVmdCt0Lm91dGVyV2lkdGgoKSxib3R0b206aS50b3ArdC5vdXRlckhlaWdodCgpLHN0YXJ0c2VsZWN0ZWQ6ITEsc2VsZWN0ZWQ6dC5oYXNDbGFzcyhcInVpLXNlbGVjdGVkXCIpLHNlbGVjdGluZzp0Lmhhc0NsYXNzKFwidWktc2VsZWN0aW5nXCIpLHVuc2VsZWN0aW5nOnQuaGFzQ2xhc3MoXCJ1aS11bnNlbGVjdGluZ1wiKX0pfSl9LHRoaXMucmVmcmVzaCgpLHRoaXMuc2VsZWN0ZWVzPXQuYWRkQ2xhc3MoXCJ1aS1zZWxlY3RlZVwiKSx0aGlzLl9tb3VzZUluaXQoKSx0aGlzLmhlbHBlcj1lKFwiPGRpdiBjbGFzcz0ndWktc2VsZWN0YWJsZS1oZWxwZXInPjwvZGl2PlwiKX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVlcy5yZW1vdmVDbGFzcyhcInVpLXNlbGVjdGVlXCIpLnJlbW92ZURhdGEoXCJzZWxlY3RhYmxlLWl0ZW1cIiksdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc2VsZWN0YWJsZSB1aS1zZWxlY3RhYmxlLWRpc2FibGVkXCIpLHRoaXMuX21vdXNlRGVzdHJveSgpfSxfbW91c2VTdGFydDpmdW5jdGlvbih0KXt2YXIgaT10aGlzLHM9dGhpcy5vcHRpb25zO3RoaXMub3Bvcz1bdC5wYWdlWCx0LnBhZ2VZXSx0aGlzLm9wdGlvbnMuZGlzYWJsZWR8fCh0aGlzLnNlbGVjdGVlcz1lKHMuZmlsdGVyLHRoaXMuZWxlbWVudFswXSksdGhpcy5fdHJpZ2dlcihcInN0YXJ0XCIsdCksZShzLmFwcGVuZFRvKS5hcHBlbmQodGhpcy5oZWxwZXIpLHRoaXMuaGVscGVyLmNzcyh7bGVmdDp0LnBhZ2VYLHRvcDp0LnBhZ2VZLHdpZHRoOjAsaGVpZ2h0OjB9KSxzLmF1dG9SZWZyZXNoJiZ0aGlzLnJlZnJlc2goKSx0aGlzLnNlbGVjdGVlcy5maWx0ZXIoXCIudWktc2VsZWN0ZWRcIikuZWFjaChmdW5jdGlvbigpe3ZhciBzPWUuZGF0YSh0aGlzLFwic2VsZWN0YWJsZS1pdGVtXCIpO3Muc3RhcnRzZWxlY3RlZD0hMCx0Lm1ldGFLZXl8fHQuY3RybEtleXx8KHMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1zZWxlY3RlZFwiKSxzLnNlbGVjdGVkPSExLHMuJGVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS11bnNlbGVjdGluZ1wiKSxzLnVuc2VsZWN0aW5nPSEwLGkuX3RyaWdnZXIoXCJ1bnNlbGVjdGluZ1wiLHQse3Vuc2VsZWN0aW5nOnMuZWxlbWVudH0pKX0pLGUodC50YXJnZXQpLnBhcmVudHMoKS5hZGRCYWNrKCkuZWFjaChmdW5jdGlvbigpe3ZhciBzLG49ZS5kYXRhKHRoaXMsXCJzZWxlY3RhYmxlLWl0ZW1cIik7cmV0dXJuIG4/KHM9IXQubWV0YUtleSYmIXQuY3RybEtleXx8IW4uJGVsZW1lbnQuaGFzQ2xhc3MoXCJ1aS1zZWxlY3RlZFwiKSxuLiRlbGVtZW50LnJlbW92ZUNsYXNzKHM/XCJ1aS11bnNlbGVjdGluZ1wiOlwidWktc2VsZWN0ZWRcIikuYWRkQ2xhc3Mocz9cInVpLXNlbGVjdGluZ1wiOlwidWktdW5zZWxlY3RpbmdcIiksbi51bnNlbGVjdGluZz0hcyxuLnNlbGVjdGluZz1zLG4uc2VsZWN0ZWQ9cyxzP2kuX3RyaWdnZXIoXCJzZWxlY3RpbmdcIix0LHtzZWxlY3Rpbmc6bi5lbGVtZW50fSk6aS5fdHJpZ2dlcihcInVuc2VsZWN0aW5nXCIsdCx7dW5zZWxlY3Rpbmc6bi5lbGVtZW50fSksITEpOnZvaWQgMH0pKX0sX21vdXNlRHJhZzpmdW5jdGlvbih0KXtpZih0aGlzLmRyYWdnZWQ9ITAsIXRoaXMub3B0aW9ucy5kaXNhYmxlZCl7dmFyIGkscz10aGlzLG49dGhpcy5vcHRpb25zLGE9dGhpcy5vcG9zWzBdLG89dGhpcy5vcG9zWzFdLHI9dC5wYWdlWCxoPXQucGFnZVk7cmV0dXJuIGE+ciYmKGk9cixyPWEsYT1pKSxvPmgmJihpPWgsaD1vLG89aSksdGhpcy5oZWxwZXIuY3NzKHtsZWZ0OmEsdG9wOm8sd2lkdGg6ci1hLGhlaWdodDpoLW99KSx0aGlzLnNlbGVjdGVlcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9ZS5kYXRhKHRoaXMsXCJzZWxlY3RhYmxlLWl0ZW1cIiksbD0hMTtpJiZpLmVsZW1lbnQhPT1zLmVsZW1lbnRbMF0mJihcInRvdWNoXCI9PT1uLnRvbGVyYW5jZT9sPSEoaS5sZWZ0PnJ8fGE+aS5yaWdodHx8aS50b3A+aHx8bz5pLmJvdHRvbSk6XCJmaXRcIj09PW4udG9sZXJhbmNlJiYobD1pLmxlZnQ+YSYmcj5pLnJpZ2h0JiZpLnRvcD5vJiZoPmkuYm90dG9tKSxsPyhpLnNlbGVjdGVkJiYoaS4kZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXNlbGVjdGVkXCIpLGkuc2VsZWN0ZWQ9ITEpLGkudW5zZWxlY3RpbmcmJihpLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwidWktdW5zZWxlY3RpbmdcIiksaS51bnNlbGVjdGluZz0hMSksaS5zZWxlY3Rpbmd8fChpLiRlbGVtZW50LmFkZENsYXNzKFwidWktc2VsZWN0aW5nXCIpLGkuc2VsZWN0aW5nPSEwLHMuX3RyaWdnZXIoXCJzZWxlY3RpbmdcIix0LHtzZWxlY3Rpbmc6aS5lbGVtZW50fSkpKTooaS5zZWxlY3RpbmcmJigodC5tZXRhS2V5fHx0LmN0cmxLZXkpJiZpLnN0YXJ0c2VsZWN0ZWQ/KGkuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1zZWxlY3RpbmdcIiksaS5zZWxlY3Rpbmc9ITEsaS4kZWxlbWVudC5hZGRDbGFzcyhcInVpLXNlbGVjdGVkXCIpLGkuc2VsZWN0ZWQ9ITApOihpLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwidWktc2VsZWN0aW5nXCIpLGkuc2VsZWN0aW5nPSExLGkuc3RhcnRzZWxlY3RlZCYmKGkuJGVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS11bnNlbGVjdGluZ1wiKSxpLnVuc2VsZWN0aW5nPSEwKSxzLl90cmlnZ2VyKFwidW5zZWxlY3RpbmdcIix0LHt1bnNlbGVjdGluZzppLmVsZW1lbnR9KSkpLGkuc2VsZWN0ZWQmJih0Lm1ldGFLZXl8fHQuY3RybEtleXx8aS5zdGFydHNlbGVjdGVkfHwoaS4kZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXNlbGVjdGVkXCIpLGkuc2VsZWN0ZWQ9ITEsaS4kZWxlbWVudC5hZGRDbGFzcyhcInVpLXVuc2VsZWN0aW5nXCIpLGkudW5zZWxlY3Rpbmc9ITAscy5fdHJpZ2dlcihcInVuc2VsZWN0aW5nXCIsdCx7dW5zZWxlY3Rpbmc6aS5lbGVtZW50fSkpKSkpfSksITF9fSxfbW91c2VTdG9wOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXM7cmV0dXJuIHRoaXMuZHJhZ2dlZD0hMSxlKFwiLnVpLXVuc2VsZWN0aW5nXCIsdGhpcy5lbGVtZW50WzBdKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHM9ZS5kYXRhKHRoaXMsXCJzZWxlY3RhYmxlLWl0ZW1cIik7cy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXVuc2VsZWN0aW5nXCIpLHMudW5zZWxlY3Rpbmc9ITEscy5zdGFydHNlbGVjdGVkPSExLGkuX3RyaWdnZXIoXCJ1bnNlbGVjdGVkXCIsdCx7dW5zZWxlY3RlZDpzLmVsZW1lbnR9KX0pLGUoXCIudWktc2VsZWN0aW5nXCIsdGhpcy5lbGVtZW50WzBdKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHM9ZS5kYXRhKHRoaXMsXCJzZWxlY3RhYmxlLWl0ZW1cIik7cy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXNlbGVjdGluZ1wiKS5hZGRDbGFzcyhcInVpLXNlbGVjdGVkXCIpLHMuc2VsZWN0aW5nPSExLHMuc2VsZWN0ZWQ9ITAscy5zdGFydHNlbGVjdGVkPSEwLGkuX3RyaWdnZXIoXCJzZWxlY3RlZFwiLHQse3NlbGVjdGVkOnMuZWxlbWVudH0pfSksdGhpcy5fdHJpZ2dlcihcInN0b3BcIix0KSx0aGlzLmhlbHBlci5yZW1vdmUoKSwhMX19KSxlLndpZGdldChcInVpLnNlbGVjdG1lbnVcIix7dmVyc2lvbjpcIjEuMTEuNFwiLGRlZmF1bHRFbGVtZW50OlwiPHNlbGVjdD5cIixvcHRpb25zOnthcHBlbmRUbzpudWxsLGRpc2FibGVkOm51bGwsaWNvbnM6e2J1dHRvbjpcInVpLWljb24tdHJpYW5nbGUtMS1zXCJ9LHBvc2l0aW9uOntteTpcImxlZnQgdG9wXCIsYXQ6XCJsZWZ0IGJvdHRvbVwiLGNvbGxpc2lvbjpcIm5vbmVcIn0sd2lkdGg6bnVsbCxjaGFuZ2U6bnVsbCxjbG9zZTpudWxsLGZvY3VzOm51bGwsb3BlbjpudWxsLHNlbGVjdDpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LnVuaXF1ZUlkKCkuYXR0cihcImlkXCIpO3RoaXMuaWRzPXtlbGVtZW50OmUsYnV0dG9uOmUrXCItYnV0dG9uXCIsbWVudTplK1wiLW1lbnVcIn0sdGhpcy5fZHJhd0J1dHRvbigpLHRoaXMuX2RyYXdNZW51KCksdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLmRpc2FibGUoKX0sX2RyYXdCdXR0b246ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMubGFiZWw9ZShcImxhYmVsW2Zvcj0nXCIrdGhpcy5pZHMuZWxlbWVudCtcIiddXCIpLmF0dHIoXCJmb3JcIix0aGlzLmlkcy5idXR0b24pLHRoaXMuX29uKHRoaXMubGFiZWwse2NsaWNrOmZ1bmN0aW9uKGUpe3RoaXMuYnV0dG9uLmZvY3VzKCksZS5wcmV2ZW50RGVmYXVsdCgpfX0pLHRoaXMuZWxlbWVudC5oaWRlKCksdGhpcy5idXR0b249ZShcIjxzcGFuPlwiLHtcImNsYXNzXCI6XCJ1aS1zZWxlY3RtZW51LWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsXCIsdGFiaW5kZXg6dGhpcy5vcHRpb25zLmRpc2FibGVkPy0xOjAsaWQ6dGhpcy5pZHMuYnV0dG9uLHJvbGU6XCJjb21ib2JveFwiLFwiYXJpYS1leHBhbmRlZFwiOlwiZmFsc2VcIixcImFyaWEtYXV0b2NvbXBsZXRlXCI6XCJsaXN0XCIsXCJhcmlhLW93bnNcIjp0aGlzLmlkcy5tZW51LFwiYXJpYS1oYXNwb3B1cFwiOlwidHJ1ZVwifSkuaW5zZXJ0QWZ0ZXIodGhpcy5lbGVtZW50KSxlKFwiPHNwYW4+XCIse1wiY2xhc3NcIjpcInVpLWljb24gXCIrdGhpcy5vcHRpb25zLmljb25zLmJ1dHRvbn0pLnByZXBlbmRUbyh0aGlzLmJ1dHRvbiksdGhpcy5idXR0b25UZXh0PWUoXCI8c3Bhbj5cIix7XCJjbGFzc1wiOlwidWktc2VsZWN0bWVudS10ZXh0XCJ9KS5hcHBlbmRUbyh0aGlzLmJ1dHRvbiksdGhpcy5fc2V0VGV4dCh0aGlzLmJ1dHRvblRleHQsdGhpcy5lbGVtZW50LmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpKSx0aGlzLl9yZXNpemVCdXR0b24oKSx0aGlzLl9vbih0aGlzLmJ1dHRvbix0aGlzLl9idXR0b25FdmVudHMpLHRoaXMuYnV0dG9uLm9uZShcImZvY3VzaW5cIixmdW5jdGlvbigpe3QubWVudUl0ZW1zfHx0Ll9yZWZyZXNoTWVudSgpfSksdGhpcy5faG92ZXJhYmxlKHRoaXMuYnV0dG9uKSx0aGlzLl9mb2N1c2FibGUodGhpcy5idXR0b24pfSxfZHJhd01lbnU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMubWVudT1lKFwiPHVsPlwiLHtcImFyaWEtaGlkZGVuXCI6XCJ0cnVlXCIsXCJhcmlhLWxhYmVsbGVkYnlcIjp0aGlzLmlkcy5idXR0b24saWQ6dGhpcy5pZHMubWVudX0pLHRoaXMubWVudVdyYXA9ZShcIjxkaXY+XCIse1wiY2xhc3NcIjpcInVpLXNlbGVjdG1lbnUtbWVudSB1aS1mcm9udFwifSkuYXBwZW5kKHRoaXMubWVudSkuYXBwZW5kVG8odGhpcy5fYXBwZW5kVG8oKSksdGhpcy5tZW51SW5zdGFuY2U9dGhpcy5tZW51Lm1lbnUoe3JvbGU6XCJsaXN0Ym94XCIsc2VsZWN0OmZ1bmN0aW9uKGUsaSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHQuX3NldFNlbGVjdGlvbigpLHQuX3NlbGVjdChpLml0ZW0uZGF0YShcInVpLXNlbGVjdG1lbnUtaXRlbVwiKSxlKX0sZm9jdXM6ZnVuY3Rpb24oZSxpKXt2YXIgcz1pLml0ZW0uZGF0YShcInVpLXNlbGVjdG1lbnUtaXRlbVwiKTtudWxsIT10LmZvY3VzSW5kZXgmJnMuaW5kZXghPT10LmZvY3VzSW5kZXgmJih0Ll90cmlnZ2VyKFwiZm9jdXNcIixlLHtpdGVtOnN9KSx0LmlzT3Blbnx8dC5fc2VsZWN0KHMsZSkpLHQuZm9jdXNJbmRleD1zLmluZGV4LHQuYnV0dG9uLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIix0Lm1lbnVJdGVtcy5lcShzLmluZGV4KS5hdHRyKFwiaWRcIikpfX0pLm1lbnUoXCJpbnN0YW5jZVwiKSx0aGlzLm1lbnUuYWRkQ2xhc3MoXCJ1aS1jb3JuZXItYm90dG9tXCIpLnJlbW92ZUNsYXNzKFwidWktY29ybmVyLWFsbFwiKSx0aGlzLm1lbnVJbnN0YW5jZS5fb2ZmKHRoaXMubWVudSxcIm1vdXNlbGVhdmVcIiksdGhpcy5tZW51SW5zdGFuY2UuX2Nsb3NlT25Eb2N1bWVudENsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHRoaXMubWVudUluc3RhbmNlLl9pc0RpdmlkZXI9ZnVuY3Rpb24oKXtyZXR1cm4hMX19LHJlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLl9yZWZyZXNoTWVudSgpLHRoaXMuX3NldFRleHQodGhpcy5idXR0b25UZXh0LHRoaXMuX2dldFNlbGVjdGVkSXRlbSgpLnRleHQoKSksdGhpcy5vcHRpb25zLndpZHRofHx0aGlzLl9yZXNpemVCdXR0b24oKX0sX3JlZnJlc2hNZW51OmZ1bmN0aW9uKCl7dGhpcy5tZW51LmVtcHR5KCk7dmFyIGUsdD10aGlzLmVsZW1lbnQuZmluZChcIm9wdGlvblwiKTt0Lmxlbmd0aCYmKHRoaXMuX3BhcnNlT3B0aW9ucyh0KSx0aGlzLl9yZW5kZXJNZW51KHRoaXMubWVudSx0aGlzLml0ZW1zKSx0aGlzLm1lbnVJbnN0YW5jZS5yZWZyZXNoKCksdGhpcy5tZW51SXRlbXM9dGhpcy5tZW51LmZpbmQoXCJsaVwiKS5ub3QoXCIudWktc2VsZWN0bWVudS1vcHRncm91cFwiKSxlPXRoaXMuX2dldFNlbGVjdGVkSXRlbSgpLHRoaXMubWVudUluc3RhbmNlLmZvY3VzKG51bGwsZSksdGhpcy5fc2V0QXJpYShlLmRhdGEoXCJ1aS1zZWxlY3RtZW51LWl0ZW1cIikpLHRoaXMuX3NldE9wdGlvbihcImRpc2FibGVkXCIsdGhpcy5lbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiKSkpfSxvcGVuOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kaXNhYmxlZHx8KHRoaXMubWVudUl0ZW1zPyh0aGlzLm1lbnUuZmluZChcIi51aS1zdGF0ZS1mb2N1c1wiKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWZvY3VzXCIpLHRoaXMubWVudUluc3RhbmNlLmZvY3VzKG51bGwsdGhpcy5fZ2V0U2VsZWN0ZWRJdGVtKCkpKTp0aGlzLl9yZWZyZXNoTWVudSgpLHRoaXMuaXNPcGVuPSEwLHRoaXMuX3RvZ2dsZUF0dHIoKSx0aGlzLl9yZXNpemVNZW51KCksdGhpcy5fcG9zaXRpb24oKSx0aGlzLl9vbih0aGlzLmRvY3VtZW50LHRoaXMuX2RvY3VtZW50Q2xpY2spLHRoaXMuX3RyaWdnZXIoXCJvcGVuXCIsZSkpfSxfcG9zaXRpb246ZnVuY3Rpb24oKXt0aGlzLm1lbnVXcmFwLnBvc2l0aW9uKGUuZXh0ZW5kKHtvZjp0aGlzLmJ1dHRvbn0sdGhpcy5vcHRpb25zLnBvc2l0aW9uKSl9LGNsb3NlOmZ1bmN0aW9uKGUpe3RoaXMuaXNPcGVuJiYodGhpcy5pc09wZW49ITEsdGhpcy5fdG9nZ2xlQXR0cigpLHRoaXMucmFuZ2U9bnVsbCx0aGlzLl9vZmYodGhpcy5kb2N1bWVudCksdGhpcy5fdHJpZ2dlcihcImNsb3NlXCIsZSkpfSx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idXR0b259LG1lbnVXaWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZW51fSxfcmVuZGVyTWVudTpmdW5jdGlvbih0LGkpe3ZhciBzPXRoaXMsbj1cIlwiO2UuZWFjaChpLGZ1bmN0aW9uKGksYSl7YS5vcHRncm91cCE9PW4mJihlKFwiPGxpPlwiLHtcImNsYXNzXCI6XCJ1aS1zZWxlY3RtZW51LW9wdGdyb3VwIHVpLW1lbnUtZGl2aWRlclwiKyhhLmVsZW1lbnQucGFyZW50KFwib3B0Z3JvdXBcIikucHJvcChcImRpc2FibGVkXCIpP1wiIHVpLXN0YXRlLWRpc2FibGVkXCI6XCJcIiksdGV4dDphLm9wdGdyb3VwfSkuYXBwZW5kVG8odCksbj1hLm9wdGdyb3VwKSxzLl9yZW5kZXJJdGVtRGF0YSh0LGEpfSl9LF9yZW5kZXJJdGVtRGF0YTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9yZW5kZXJJdGVtKGUsdCkuZGF0YShcInVpLXNlbGVjdG1lbnUtaXRlbVwiLHQpfSxfcmVuZGVySXRlbTpmdW5jdGlvbih0LGkpe3ZhciBzPWUoXCI8bGk+XCIpO3JldHVybiBpLmRpc2FibGVkJiZzLmFkZENsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIiksdGhpcy5fc2V0VGV4dChzLGkubGFiZWwpLHMuYXBwZW5kVG8odCl9LF9zZXRUZXh0OmZ1bmN0aW9uKGUsdCl7dD9lLnRleHQodCk6ZS5odG1sKFwiJiMxNjA7XCIpfSxfbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBpLHMsbj1cIi51aS1tZW51LWl0ZW1cIjt0aGlzLmlzT3Blbj9pPXRoaXMubWVudUl0ZW1zLmVxKHRoaXMuZm9jdXNJbmRleCk6KGk9dGhpcy5tZW51SXRlbXMuZXEodGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXgpLG4rPVwiOm5vdCgudWktc3RhdGUtZGlzYWJsZWQpXCIpLHM9XCJmaXJzdFwiPT09ZXx8XCJsYXN0XCI9PT1lP2lbXCJmaXJzdFwiPT09ZT9cInByZXZBbGxcIjpcIm5leHRBbGxcIl0obikuZXEoLTEpOmlbZStcIkFsbFwiXShuKS5lcSgwKSxzLmxlbmd0aCYmdGhpcy5tZW51SW5zdGFuY2UuZm9jdXModCxzKX0sX2dldFNlbGVjdGVkSXRlbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1lbnVJdGVtcy5lcSh0aGlzLmVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleCl9LF90b2dnbGU6ZnVuY3Rpb24oZSl7dGhpc1t0aGlzLmlzT3Blbj9cImNsb3NlXCI6XCJvcGVuXCJdKGUpfSxfc2V0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5yYW5nZSYmKHdpbmRvdy5nZXRTZWxlY3Rpb24/KGU9d2luZG93LmdldFNlbGVjdGlvbigpLGUucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZSh0aGlzLnJhbmdlKSk6dGhpcy5yYW5nZS5zZWxlY3QoKSx0aGlzLmJ1dHRvbi5mb2N1cygpKX0sX2RvY3VtZW50Q2xpY2s6e21vdXNlZG93bjpmdW5jdGlvbih0KXt0aGlzLmlzT3BlbiYmKGUodC50YXJnZXQpLmNsb3Nlc3QoXCIudWktc2VsZWN0bWVudS1tZW51LCAjXCIrdGhpcy5pZHMuYnV0dG9uKS5sZW5ndGh8fHRoaXMuY2xvc2UodCkpfX0sX2J1dHRvbkV2ZW50czp7bW91c2Vkb3duOmZ1bmN0aW9uKCl7dmFyIGU7d2luZG93LmdldFNlbGVjdGlvbj8oZT13aW5kb3cuZ2V0U2VsZWN0aW9uKCksZS5yYW5nZUNvdW50JiYodGhpcy5yYW5nZT1lLmdldFJhbmdlQXQoMCkpKTp0aGlzLnJhbmdlPWRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpfSxjbGljazpmdW5jdGlvbihlKXt0aGlzLl9zZXRTZWxlY3Rpb24oKSx0aGlzLl90b2dnbGUoZSl9LGtleWRvd246ZnVuY3Rpb24odCl7dmFyIGk9ITA7c3dpdGNoKHQua2V5Q29kZSl7Y2FzZSBlLnVpLmtleUNvZGUuVEFCOmNhc2UgZS51aS5rZXlDb2RlLkVTQ0FQRTp0aGlzLmNsb3NlKHQpLGk9ITE7YnJlYWs7Y2FzZSBlLnVpLmtleUNvZGUuRU5URVI6dGhpcy5pc09wZW4mJnRoaXMuX3NlbGVjdEZvY3VzZWRJdGVtKHQpO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLlVQOnQuYWx0S2V5P3RoaXMuX3RvZ2dsZSh0KTp0aGlzLl9tb3ZlKFwicHJldlwiLHQpO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLkRPV046dC5hbHRLZXk/dGhpcy5fdG9nZ2xlKHQpOnRoaXMuX21vdmUoXCJuZXh0XCIsdCk7YnJlYWs7Y2FzZSBlLnVpLmtleUNvZGUuU1BBQ0U6dGhpcy5pc09wZW4/dGhpcy5fc2VsZWN0Rm9jdXNlZEl0ZW0odCk6dGhpcy5fdG9nZ2xlKHQpO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLkxFRlQ6dGhpcy5fbW92ZShcInByZXZcIix0KTticmVhaztjYXNlIGUudWkua2V5Q29kZS5SSUdIVDp0aGlzLl9tb3ZlKFwibmV4dFwiLHQpO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLkhPTUU6Y2FzZSBlLnVpLmtleUNvZGUuUEFHRV9VUDp0aGlzLl9tb3ZlKFwiZmlyc3RcIix0KTticmVhaztjYXNlIGUudWkua2V5Q29kZS5FTkQ6Y2FzZSBlLnVpLmtleUNvZGUuUEFHRV9ET1dOOnRoaXMuX21vdmUoXCJsYXN0XCIsdCk7YnJlYWs7ZGVmYXVsdDp0aGlzLm1lbnUudHJpZ2dlcih0KSxpPSExfWkmJnQucHJldmVudERlZmF1bHQoKX19LF9zZWxlY3RGb2N1c2VkSXRlbTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm1lbnVJdGVtcy5lcSh0aGlzLmZvY3VzSW5kZXgpO3QuaGFzQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKXx8dGhpcy5fc2VsZWN0KHQuZGF0YShcInVpLXNlbGVjdG1lbnUtaXRlbVwiKSxlKX0sX3NlbGVjdDpmdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMuZWxlbWVudFswXS5zZWxlY3RlZEluZGV4O3RoaXMuZWxlbWVudFswXS5zZWxlY3RlZEluZGV4PWUuaW5kZXgsdGhpcy5fc2V0VGV4dCh0aGlzLmJ1dHRvblRleHQsZS5sYWJlbCksdGhpcy5fc2V0QXJpYShlKSx0aGlzLl90cmlnZ2VyKFwic2VsZWN0XCIsdCx7aXRlbTplfSksZS5pbmRleCE9PWkmJnRoaXMuX3RyaWdnZXIoXCJjaGFuZ2VcIix0LHtpdGVtOmV9KSx0aGlzLmNsb3NlKHQpfSxfc2V0QXJpYTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm1lbnVJdGVtcy5lcShlLmluZGV4KS5hdHRyKFwiaWRcIik7dGhpcy5idXR0b24uYXR0cih7XCJhcmlhLWxhYmVsbGVkYnlcIjp0LFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCI6dH0pLHRoaXMubWVudS5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsdCl9LF9zZXRPcHRpb246ZnVuY3Rpb24oZSx0KXtcImljb25zXCI9PT1lJiZ0aGlzLmJ1dHRvbi5maW5kKFwic3Bhbi51aS1pY29uXCIpLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5pY29ucy5idXR0b24pLmFkZENsYXNzKHQuYnV0dG9uKSx0aGlzLl9zdXBlcihlLHQpLFwiYXBwZW5kVG9cIj09PWUmJnRoaXMubWVudVdyYXAuYXBwZW5kVG8odGhpcy5fYXBwZW5kVG8oKSksXCJkaXNhYmxlZFwiPT09ZSYmKHRoaXMubWVudUluc3RhbmNlLm9wdGlvbihcImRpc2FibGVkXCIsdCksdGhpcy5idXR0b24udG9nZ2xlQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLHQpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsdCksdGhpcy5lbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiLHQpLHQ/KHRoaXMuYnV0dG9uLmF0dHIoXCJ0YWJpbmRleFwiLC0xKSx0aGlzLmNsb3NlKCkpOnRoaXMuYnV0dG9uLmF0dHIoXCJ0YWJpbmRleFwiLDApKSxcIndpZHRoXCI9PT1lJiZ0aGlzLl9yZXNpemVCdXR0b24oKX0sX2FwcGVuZFRvOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmFwcGVuZFRvO3JldHVybiB0JiYodD10LmpxdWVyeXx8dC5ub2RlVHlwZT9lKHQpOnRoaXMuZG9jdW1lbnQuZmluZCh0KS5lcSgwKSksdCYmdFswXXx8KHQ9dGhpcy5lbGVtZW50LmNsb3Nlc3QoXCIudWktZnJvbnRcIikpLHQubGVuZ3RofHwodD10aGlzLmRvY3VtZW50WzBdLmJvZHkpLHR9LF90b2dnbGVBdHRyOmZ1bmN0aW9uKCl7dGhpcy5idXR0b24udG9nZ2xlQ2xhc3MoXCJ1aS1jb3JuZXItdG9wXCIsdGhpcy5pc09wZW4pLnRvZ2dsZUNsYXNzKFwidWktY29ybmVyLWFsbFwiLCF0aGlzLmlzT3BlbikuYXR0cihcImFyaWEtZXhwYW5kZWRcIix0aGlzLmlzT3BlbiksdGhpcy5tZW51V3JhcC50b2dnbGVDbGFzcyhcInVpLXNlbGVjdG1lbnUtb3BlblwiLHRoaXMuaXNPcGVuKSx0aGlzLm1lbnUuYXR0cihcImFyaWEtaGlkZGVuXCIsIXRoaXMuaXNPcGVuKX0sX3Jlc2l6ZUJ1dHRvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy53aWR0aDtlfHwoZT10aGlzLmVsZW1lbnQuc2hvdygpLm91dGVyV2lkdGgoKSx0aGlzLmVsZW1lbnQuaGlkZSgpKSx0aGlzLmJ1dHRvbi5vdXRlcldpZHRoKGUpfSxfcmVzaXplTWVudTpmdW5jdGlvbigpe3RoaXMubWVudS5vdXRlcldpZHRoKE1hdGgubWF4KHRoaXMuYnV0dG9uLm91dGVyV2lkdGgoKSx0aGlzLm1lbnUud2lkdGgoXCJcIikub3V0ZXJXaWR0aCgpKzEpKX0sX2dldENyZWF0ZU9wdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm57ZGlzYWJsZWQ6dGhpcy5lbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiKX19LF9wYXJzZU9wdGlvbnM6ZnVuY3Rpb24odCl7dmFyIGk9W107dC5lYWNoKGZ1bmN0aW9uKHQscyl7dmFyIG49ZShzKSxhPW4ucGFyZW50KFwib3B0Z3JvdXBcIik7aS5wdXNoKHtlbGVtZW50Om4saW5kZXg6dCx2YWx1ZTpuLnZhbCgpLGxhYmVsOm4udGV4dCgpLG9wdGdyb3VwOmEuYXR0cihcImxhYmVsXCIpfHxcIlwiLGRpc2FibGVkOmEucHJvcChcImRpc2FibGVkXCIpfHxuLnByb3AoXCJkaXNhYmxlZFwiKX0pfSksdGhpcy5pdGVtcz1pfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMubWVudVdyYXAucmVtb3ZlKCksdGhpcy5idXR0b24ucmVtb3ZlKCksdGhpcy5lbGVtZW50LnNob3coKSx0aGlzLmVsZW1lbnQucmVtb3ZlVW5pcXVlSWQoKSx0aGlzLmxhYmVsLmF0dHIoXCJmb3JcIix0aGlzLmlkcy5lbGVtZW50KX19KSxlLndpZGdldChcInVpLnNsaWRlclwiLGUudWkubW91c2Use3ZlcnNpb246XCIxLjExLjRcIix3aWRnZXRFdmVudFByZWZpeDpcInNsaWRlXCIsb3B0aW9uczp7YW5pbWF0ZTohMSxkaXN0YW5jZTowLG1heDoxMDAsbWluOjAsb3JpZW50YXRpb246XCJob3Jpem9udGFsXCIscmFuZ2U6ITEsc3RlcDoxLHZhbHVlOjAsdmFsdWVzOm51bGwsY2hhbmdlOm51bGwsc2xpZGU6bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbH0sbnVtUGFnZXM6NSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5fa2V5U2xpZGluZz0hMSx0aGlzLl9tb3VzZVNsaWRpbmc9ITEsdGhpcy5fYW5pbWF0ZU9mZj0hMCx0aGlzLl9oYW5kbGVJbmRleD1udWxsLHRoaXMuX2RldGVjdE9yaWVudGF0aW9uKCksdGhpcy5fbW91c2VJbml0KCksdGhpcy5fY2FsY3VsYXRlTmV3TWF4KCksdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktc2xpZGVyIHVpLXNsaWRlci1cIit0aGlzLm9yaWVudGF0aW9uK1wiIHVpLXdpZGdldFwiK1wiIHVpLXdpZGdldC1jb250ZW50XCIrXCIgdWktY29ybmVyLWFsbFwiKSx0aGlzLl9yZWZyZXNoKCksdGhpcy5fc2V0T3B0aW9uKFwiZGlzYWJsZWRcIix0aGlzLm9wdGlvbnMuZGlzYWJsZWQpLHRoaXMuX2FuaW1hdGVPZmY9ITF9LF9yZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5fY3JlYXRlUmFuZ2UoKSx0aGlzLl9jcmVhdGVIYW5kbGVzKCksdGhpcy5fc2V0dXBFdmVudHMoKSx0aGlzLl9yZWZyZXNoVmFsdWUoKX0sX2NyZWF0ZUhhbmRsZXM6ZnVuY3Rpb24oKXt2YXIgdCxpLHM9dGhpcy5vcHRpb25zLG49dGhpcy5lbGVtZW50LmZpbmQoXCIudWktc2xpZGVyLWhhbmRsZVwiKS5hZGRDbGFzcyhcInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbFwiKSxhPVwiPHNwYW4gY2xhc3M9J3VpLXNsaWRlci1oYW5kbGUgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsJyB0YWJpbmRleD0nMCc+PC9zcGFuPlwiLG89W107Zm9yKGk9cy52YWx1ZXMmJnMudmFsdWVzLmxlbmd0aHx8MSxuLmxlbmd0aD5pJiYobi5zbGljZShpKS5yZW1vdmUoKSxuPW4uc2xpY2UoMCxpKSksdD1uLmxlbmd0aDtpPnQ7dCsrKW8ucHVzaChhKTt0aGlzLmhhbmRsZXM9bi5hZGQoZShvLmpvaW4oXCJcIikpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCkpLHRoaXMuaGFuZGxlPXRoaXMuaGFuZGxlcy5lcSgwKSx0aGlzLmhhbmRsZXMuZWFjaChmdW5jdGlvbih0KXtlKHRoaXMpLmRhdGEoXCJ1aS1zbGlkZXItaGFuZGxlLWluZGV4XCIsdCl9KX0sX2NyZWF0ZVJhbmdlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLGk9XCJcIjt0LnJhbmdlPyh0LnJhbmdlPT09ITAmJih0LnZhbHVlcz90LnZhbHVlcy5sZW5ndGgmJjIhPT10LnZhbHVlcy5sZW5ndGg/dC52YWx1ZXM9W3QudmFsdWVzWzBdLHQudmFsdWVzWzBdXTplLmlzQXJyYXkodC52YWx1ZXMpJiYodC52YWx1ZXM9dC52YWx1ZXMuc2xpY2UoMCkpOnQudmFsdWVzPVt0aGlzLl92YWx1ZU1pbigpLHRoaXMuX3ZhbHVlTWluKCldKSx0aGlzLnJhbmdlJiZ0aGlzLnJhbmdlLmxlbmd0aD90aGlzLnJhbmdlLnJlbW92ZUNsYXNzKFwidWktc2xpZGVyLXJhbmdlLW1pbiB1aS1zbGlkZXItcmFuZ2UtbWF4XCIpLmNzcyh7bGVmdDpcIlwiLGJvdHRvbTpcIlwifSk6KHRoaXMucmFuZ2U9ZShcIjxkaXY+PC9kaXY+XCIpLmFwcGVuZFRvKHRoaXMuZWxlbWVudCksaT1cInVpLXNsaWRlci1yYW5nZSB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGxcIiksdGhpcy5yYW5nZS5hZGRDbGFzcyhpKyhcIm1pblwiPT09dC5yYW5nZXx8XCJtYXhcIj09PXQucmFuZ2U/XCIgdWktc2xpZGVyLXJhbmdlLVwiK3QucmFuZ2U6XCJcIikpKToodGhpcy5yYW5nZSYmdGhpcy5yYW5nZS5yZW1vdmUoKSx0aGlzLnJhbmdlPW51bGwpfSxfc2V0dXBFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLl9vZmYodGhpcy5oYW5kbGVzKSx0aGlzLl9vbih0aGlzLmhhbmRsZXMsdGhpcy5faGFuZGxlRXZlbnRzKSx0aGlzLl9ob3ZlcmFibGUodGhpcy5oYW5kbGVzKSx0aGlzLl9mb2N1c2FibGUodGhpcy5oYW5kbGVzKX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXMucmVtb3ZlKCksdGhpcy5yYW5nZSYmdGhpcy5yYW5nZS5yZW1vdmUoKSx0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1zbGlkZXIgdWktc2xpZGVyLWhvcml6b250YWwgdWktc2xpZGVyLXZlcnRpY2FsIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsXCIpLHRoaXMuX21vdXNlRGVzdHJveSgpfSxfbW91c2VDYXB0dXJlOmZ1bmN0aW9uKHQpe3ZhciBpLHMsbixhLG8scixoLGwsdT10aGlzLGQ9dGhpcy5vcHRpb25zO3JldHVybiBkLmRpc2FibGVkPyExOih0aGlzLmVsZW1lbnRTaXplPXt3aWR0aDp0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpLGhlaWdodDp0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKX0sdGhpcy5lbGVtZW50T2Zmc2V0PXRoaXMuZWxlbWVudC5vZmZzZXQoKSxpPXt4OnQucGFnZVgseTp0LnBhZ2VZfSxzPXRoaXMuX25vcm1WYWx1ZUZyb21Nb3VzZShpKSxuPXRoaXMuX3ZhbHVlTWF4KCktdGhpcy5fdmFsdWVNaW4oKSsxLHRoaXMuaGFuZGxlcy5lYWNoKGZ1bmN0aW9uKHQpe3ZhciBpPU1hdGguYWJzKHMtdS52YWx1ZXModCkpOyhuPml8fG49PT1pJiYodD09PXUuX2xhc3RDaGFuZ2VkVmFsdWV8fHUudmFsdWVzKHQpPT09ZC5taW4pKSYmKG49aSxhPWUodGhpcyksbz10KX0pLHI9dGhpcy5fc3RhcnQodCxvKSxyPT09ITE/ITE6KHRoaXMuX21vdXNlU2xpZGluZz0hMCx0aGlzLl9oYW5kbGVJbmRleD1vLGEuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIikuZm9jdXMoKSxoPWEub2Zmc2V0KCksbD0hZSh0LnRhcmdldCkucGFyZW50cygpLmFkZEJhY2soKS5pcyhcIi51aS1zbGlkZXItaGFuZGxlXCIpLHRoaXMuX2NsaWNrT2Zmc2V0PWw/e2xlZnQ6MCx0b3A6MH06e2xlZnQ6dC5wYWdlWC1oLmxlZnQtYS53aWR0aCgpLzIsdG9wOnQucGFnZVktaC50b3AtYS5oZWlnaHQoKS8yLShwYXJzZUludChhLmNzcyhcImJvcmRlclRvcFdpZHRoXCIpLDEwKXx8MCktKHBhcnNlSW50KGEuY3NzKFwiYm9yZGVyQm90dG9tV2lkdGhcIiksMTApfHwwKSsocGFyc2VJbnQoYS5jc3MoXCJtYXJnaW5Ub3BcIiksMTApfHwwKX0sdGhpcy5oYW5kbGVzLmhhc0NsYXNzKFwidWktc3RhdGUtaG92ZXJcIil8fHRoaXMuX3NsaWRlKHQsbyxzKSx0aGlzLl9hbmltYXRlT2ZmPSEwLCEwKSl9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuITB9LF9tb3VzZURyYWc6ZnVuY3Rpb24oZSl7dmFyIHQ9e3g6ZS5wYWdlWCx5OmUucGFnZVl9LGk9dGhpcy5fbm9ybVZhbHVlRnJvbU1vdXNlKHQpO3JldHVybiB0aGlzLl9zbGlkZShlLHRoaXMuX2hhbmRsZUluZGV4LGkpLCExfSxfbW91c2VTdG9wOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhhbmRsZXMucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksdGhpcy5fbW91c2VTbGlkaW5nPSExLHRoaXMuX3N0b3AoZSx0aGlzLl9oYW5kbGVJbmRleCksdGhpcy5fY2hhbmdlKGUsdGhpcy5faGFuZGxlSW5kZXgpLHRoaXMuX2hhbmRsZUluZGV4PW51bGwsdGhpcy5fY2xpY2tPZmZzZXQ9bnVsbCx0aGlzLl9hbmltYXRlT2ZmPSExLCExfSxfZGV0ZWN0T3JpZW50YXRpb246ZnVuY3Rpb24oKXt0aGlzLm9yaWVudGF0aW9uPVwidmVydGljYWxcIj09PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbj9cInZlcnRpY2FsXCI6XCJob3Jpem9udGFsXCJ9LF9ub3JtVmFsdWVGcm9tTW91c2U6ZnVuY3Rpb24oZSl7dmFyIHQsaSxzLG4sYTtyZXR1cm5cImhvcml6b250YWxcIj09PXRoaXMub3JpZW50YXRpb24/KHQ9dGhpcy5lbGVtZW50U2l6ZS53aWR0aCxpPWUueC10aGlzLmVsZW1lbnRPZmZzZXQubGVmdC0odGhpcy5fY2xpY2tPZmZzZXQ/dGhpcy5fY2xpY2tPZmZzZXQubGVmdDowKSk6KHQ9dGhpcy5lbGVtZW50U2l6ZS5oZWlnaHQsaT1lLnktdGhpcy5lbGVtZW50T2Zmc2V0LnRvcC0odGhpcy5fY2xpY2tPZmZzZXQ/dGhpcy5fY2xpY2tPZmZzZXQudG9wOjApKSxzPWkvdCxzPjEmJihzPTEpLDA+cyYmKHM9MCksXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcmllbnRhdGlvbiYmKHM9MS1zKSxuPXRoaXMuX3ZhbHVlTWF4KCktdGhpcy5fdmFsdWVNaW4oKSxhPXRoaXMuX3ZhbHVlTWluKCkrcypuLHRoaXMuX3RyaW1BbGlnblZhbHVlKGEpfSxfc3RhcnQ6ZnVuY3Rpb24oZSx0KXt2YXIgaT17aGFuZGxlOnRoaXMuaGFuZGxlc1t0XSx2YWx1ZTp0aGlzLnZhbHVlKCl9O3JldHVybiB0aGlzLm9wdGlvbnMudmFsdWVzJiZ0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCYmKGkudmFsdWU9dGhpcy52YWx1ZXModCksaS52YWx1ZXM9dGhpcy52YWx1ZXMoKSksdGhpcy5fdHJpZ2dlcihcInN0YXJ0XCIsZSxpKX0sX3NsaWRlOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcyxuLGE7dGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGg/KHM9dGhpcy52YWx1ZXModD8wOjEpLDI9PT10aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCYmdGhpcy5vcHRpb25zLnJhbmdlPT09ITAmJigwPT09dCYmaT5zfHwxPT09dCYmcz5pKSYmKGk9cyksaSE9PXRoaXMudmFsdWVzKHQpJiYobj10aGlzLnZhbHVlcygpLG5bdF09aSxhPXRoaXMuX3RyaWdnZXIoXCJzbGlkZVwiLGUse2hhbmRsZTp0aGlzLmhhbmRsZXNbdF0sdmFsdWU6aSx2YWx1ZXM6bn0pLHM9dGhpcy52YWx1ZXModD8wOjEpLGEhPT0hMSYmdGhpcy52YWx1ZXModCxpKSkpOmkhPT10aGlzLnZhbHVlKCkmJihhPXRoaXMuX3RyaWdnZXIoXCJzbGlkZVwiLGUse2hhbmRsZTp0aGlzLmhhbmRsZXNbdF0sdmFsdWU6aX0pLGEhPT0hMSYmdGhpcy52YWx1ZShpKSl9LF9zdG9wOmZ1bmN0aW9uKGUsdCl7dmFyIGk9e2hhbmRsZTp0aGlzLmhhbmRsZXNbdF0sdmFsdWU6dGhpcy52YWx1ZSgpfTt0aGlzLm9wdGlvbnMudmFsdWVzJiZ0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCYmKGkudmFsdWU9dGhpcy52YWx1ZXModCksaS52YWx1ZXM9dGhpcy52YWx1ZXMoKSksdGhpcy5fdHJpZ2dlcihcInN0b3BcIixlLGkpfSxfY2hhbmdlOmZ1bmN0aW9uKGUsdCl7aWYoIXRoaXMuX2tleVNsaWRpbmcmJiF0aGlzLl9tb3VzZVNsaWRpbmcpe3ZhciBpPXtoYW5kbGU6dGhpcy5oYW5kbGVzW3RdLHZhbHVlOnRoaXMudmFsdWUoKX07dGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgmJihpLnZhbHVlPXRoaXMudmFsdWVzKHQpLGkudmFsdWVzPXRoaXMudmFsdWVzKCkpLHRoaXMuX2xhc3RDaGFuZ2VkVmFsdWU9dCx0aGlzLl90cmlnZ2VyKFwiY2hhbmdlXCIsZSxpKX19LHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0aGlzLm9wdGlvbnMudmFsdWU9dGhpcy5fdHJpbUFsaWduVmFsdWUoZSksdGhpcy5fcmVmcmVzaFZhbHVlKCksdGhpcy5fY2hhbmdlKG51bGwsMCksdm9pZCAwKTp0aGlzLl92YWx1ZSgpfSx2YWx1ZXM6ZnVuY3Rpb24odCxpKXt2YXIgcyxuLGE7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXJldHVybiB0aGlzLm9wdGlvbnMudmFsdWVzW3RdPXRoaXMuX3RyaW1BbGlnblZhbHVlKGkpLHRoaXMuX3JlZnJlc2hWYWx1ZSgpLHRoaXMuX2NoYW5nZShudWxsLHQpLHZvaWQgMDtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5fdmFsdWVzKCk7aWYoIWUuaXNBcnJheShhcmd1bWVudHNbMF0pKXJldHVybiB0aGlzLm9wdGlvbnMudmFsdWVzJiZ0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aD90aGlzLl92YWx1ZXModCk6dGhpcy52YWx1ZSgpO2ZvcihzPXRoaXMub3B0aW9ucy52YWx1ZXMsbj1hcmd1bWVudHNbMF0sYT0wO3MubGVuZ3RoPmE7YSs9MSlzW2FdPXRoaXMuX3RyaW1BbGlnblZhbHVlKG5bYV0pLHRoaXMuX2NoYW5nZShudWxsLGEpO3RoaXMuX3JlZnJlc2hWYWx1ZSgpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKHQsaSl7dmFyIHMsbj0wO3N3aXRjaChcInJhbmdlXCI9PT10JiZ0aGlzLm9wdGlvbnMucmFuZ2U9PT0hMCYmKFwibWluXCI9PT1pPyh0aGlzLm9wdGlvbnMudmFsdWU9dGhpcy5fdmFsdWVzKDApLHRoaXMub3B0aW9ucy52YWx1ZXM9bnVsbCk6XCJtYXhcIj09PWkmJih0aGlzLm9wdGlvbnMudmFsdWU9dGhpcy5fdmFsdWVzKHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoLTEpLHRoaXMub3B0aW9ucy52YWx1ZXM9bnVsbCkpLGUuaXNBcnJheSh0aGlzLm9wdGlvbnMudmFsdWVzKSYmKG49dGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpLFwiZGlzYWJsZWRcIj09PXQmJnRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIsISFpKSx0aGlzLl9zdXBlcih0LGkpLHQpe2Nhc2VcIm9yaWVudGF0aW9uXCI6dGhpcy5fZGV0ZWN0T3JpZW50YXRpb24oKSx0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1zbGlkZXItaG9yaXpvbnRhbCB1aS1zbGlkZXItdmVydGljYWxcIikuYWRkQ2xhc3MoXCJ1aS1zbGlkZXItXCIrdGhpcy5vcmllbnRhdGlvbiksdGhpcy5fcmVmcmVzaFZhbHVlKCksdGhpcy5oYW5kbGVzLmNzcyhcImhvcml6b250YWxcIj09PWk/XCJib3R0b21cIjpcImxlZnRcIixcIlwiKTticmVhaztjYXNlXCJ2YWx1ZVwiOnRoaXMuX2FuaW1hdGVPZmY9ITAsdGhpcy5fcmVmcmVzaFZhbHVlKCksdGhpcy5fY2hhbmdlKG51bGwsMCksdGhpcy5fYW5pbWF0ZU9mZj0hMTticmVhaztjYXNlXCJ2YWx1ZXNcIjpmb3IodGhpcy5fYW5pbWF0ZU9mZj0hMCx0aGlzLl9yZWZyZXNoVmFsdWUoKSxzPTA7bj5zO3MrPTEpdGhpcy5fY2hhbmdlKG51bGwscyk7dGhpcy5fYW5pbWF0ZU9mZj0hMTticmVhaztjYXNlXCJzdGVwXCI6Y2FzZVwibWluXCI6Y2FzZVwibWF4XCI6dGhpcy5fYW5pbWF0ZU9mZj0hMCx0aGlzLl9jYWxjdWxhdGVOZXdNYXgoKSx0aGlzLl9yZWZyZXNoVmFsdWUoKSx0aGlzLl9hbmltYXRlT2ZmPSExO2JyZWFrO2Nhc2VcInJhbmdlXCI6dGhpcy5fYW5pbWF0ZU9mZj0hMCx0aGlzLl9yZWZyZXNoKCksdGhpcy5fYW5pbWF0ZU9mZj0hMX19LF92YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucy52YWx1ZTtyZXR1cm4gZT10aGlzLl90cmltQWxpZ25WYWx1ZShlKX0sX3ZhbHVlczpmdW5jdGlvbihlKXt2YXIgdCxpLHM7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdD10aGlzLm9wdGlvbnMudmFsdWVzW2VdLHQ9dGhpcy5fdHJpbUFsaWduVmFsdWUodCk7aWYodGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpe2ZvcihpPXRoaXMub3B0aW9ucy52YWx1ZXMuc2xpY2UoKSxzPTA7aS5sZW5ndGg+cztzKz0xKWlbc109dGhpcy5fdHJpbUFsaWduVmFsdWUoaVtzXSk7cmV0dXJuIGl9cmV0dXJuW119LF90cmltQWxpZ25WYWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLl92YWx1ZU1pbigpPj1lKXJldHVybiB0aGlzLl92YWx1ZU1pbigpO2lmKGU+PXRoaXMuX3ZhbHVlTWF4KCkpcmV0dXJuIHRoaXMuX3ZhbHVlTWF4KCk7dmFyIHQ9dGhpcy5vcHRpb25zLnN0ZXA+MD90aGlzLm9wdGlvbnMuc3RlcDoxLGk9KGUtdGhpcy5fdmFsdWVNaW4oKSkldCxzPWUtaTtyZXR1cm4gMipNYXRoLmFicyhpKT49dCYmKHMrPWk+MD90Oi10KSxwYXJzZUZsb2F0KHMudG9GaXhlZCg1KSl9LF9jYWxjdWxhdGVOZXdNYXg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMubWF4LHQ9dGhpcy5fdmFsdWVNaW4oKSxpPXRoaXMub3B0aW9ucy5zdGVwLHM9TWF0aC5mbG9vcigrKGUtdCkudG9GaXhlZCh0aGlzLl9wcmVjaXNpb24oKSkvaSkqaTtlPXMrdCx0aGlzLm1heD1wYXJzZUZsb2F0KGUudG9GaXhlZCh0aGlzLl9wcmVjaXNpb24oKSkpfSxfcHJlY2lzaW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fcHJlY2lzaW9uT2YodGhpcy5vcHRpb25zLnN0ZXApO3JldHVybiBudWxsIT09dGhpcy5vcHRpb25zLm1pbiYmKGU9TWF0aC5tYXgoZSx0aGlzLl9wcmVjaXNpb25PZih0aGlzLm9wdGlvbnMubWluKSkpLGV9LF9wcmVjaXNpb25PZjpmdW5jdGlvbihlKXt2YXIgdD1cIlwiK2UsaT10LmluZGV4T2YoXCIuXCIpO3JldHVybi0xPT09aT8wOnQubGVuZ3RoLWktMX0sX3ZhbHVlTWluOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5taW59LF92YWx1ZU1heDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1heH0sX3JlZnJlc2hWYWx1ZTpmdW5jdGlvbigpe3ZhciB0LGkscyxuLGEsbz10aGlzLm9wdGlvbnMucmFuZ2Uscj10aGlzLm9wdGlvbnMsaD10aGlzLGw9dGhpcy5fYW5pbWF0ZU9mZj8hMTpyLmFuaW1hdGUsdT17fTt0aGlzLm9wdGlvbnMudmFsdWVzJiZ0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aD90aGlzLmhhbmRsZXMuZWFjaChmdW5jdGlvbihzKXtpPTEwMCooKGgudmFsdWVzKHMpLWguX3ZhbHVlTWluKCkpLyhoLl92YWx1ZU1heCgpLWguX3ZhbHVlTWluKCkpKSx1W1wiaG9yaXpvbnRhbFwiPT09aC5vcmllbnRhdGlvbj9cImxlZnRcIjpcImJvdHRvbVwiXT1pK1wiJVwiLGUodGhpcykuc3RvcCgxLDEpW2w/XCJhbmltYXRlXCI6XCJjc3NcIl0odSxyLmFuaW1hdGUpLGgub3B0aW9ucy5yYW5nZT09PSEwJiYoXCJob3Jpem9udGFsXCI9PT1oLm9yaWVudGF0aW9uPygwPT09cyYmaC5yYW5nZS5zdG9wKDEsMSlbbD9cImFuaW1hdGVcIjpcImNzc1wiXSh7bGVmdDppK1wiJVwifSxyLmFuaW1hdGUpLDE9PT1zJiZoLnJhbmdlW2w/XCJhbmltYXRlXCI6XCJjc3NcIl0oe3dpZHRoOmktdCtcIiVcIn0se3F1ZXVlOiExLGR1cmF0aW9uOnIuYW5pbWF0ZX0pKTooMD09PXMmJmgucmFuZ2Uuc3RvcCgxLDEpW2w/XCJhbmltYXRlXCI6XCJjc3NcIl0oe2JvdHRvbTppK1wiJVwifSxyLmFuaW1hdGUpLDE9PT1zJiZoLnJhbmdlW2w/XCJhbmltYXRlXCI6XCJjc3NcIl0oe2hlaWdodDppLXQrXCIlXCJ9LHtxdWV1ZTohMSxkdXJhdGlvbjpyLmFuaW1hdGV9KSkpLHQ9aX0pOihzPXRoaXMudmFsdWUoKSxuPXRoaXMuX3ZhbHVlTWluKCksYT10aGlzLl92YWx1ZU1heCgpLGk9YSE9PW4/MTAwKigocy1uKS8oYS1uKSk6MCx1W1wiaG9yaXpvbnRhbFwiPT09dGhpcy5vcmllbnRhdGlvbj9cImxlZnRcIjpcImJvdHRvbVwiXT1pK1wiJVwiLHRoaXMuaGFuZGxlLnN0b3AoMSwxKVtsP1wiYW5pbWF0ZVwiOlwiY3NzXCJdKHUsci5hbmltYXRlKSxcIm1pblwiPT09byYmXCJob3Jpem9udGFsXCI9PT10aGlzLm9yaWVudGF0aW9uJiZ0aGlzLnJhbmdlLnN0b3AoMSwxKVtsP1wiYW5pbWF0ZVwiOlwiY3NzXCJdKHt3aWR0aDppK1wiJVwifSxyLmFuaW1hdGUpLFwibWF4XCI9PT1vJiZcImhvcml6b250YWxcIj09PXRoaXMub3JpZW50YXRpb24mJnRoaXMucmFuZ2VbbD9cImFuaW1hdGVcIjpcImNzc1wiXSh7d2lkdGg6MTAwLWkrXCIlXCJ9LHtxdWV1ZTohMSxkdXJhdGlvbjpyLmFuaW1hdGV9KSxcIm1pblwiPT09byYmXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcmllbnRhdGlvbiYmdGhpcy5yYW5nZS5zdG9wKDEsMSlbbD9cImFuaW1hdGVcIjpcImNzc1wiXSh7aGVpZ2h0OmkrXCIlXCJ9LHIuYW5pbWF0ZSksXCJtYXhcIj09PW8mJlwidmVydGljYWxcIj09PXRoaXMub3JpZW50YXRpb24mJnRoaXMucmFuZ2VbbD9cImFuaW1hdGVcIjpcImNzc1wiXSh7aGVpZ2h0OjEwMC1pK1wiJVwifSx7cXVldWU6ITEsZHVyYXRpb246ci5hbmltYXRlfSkpfSxfaGFuZGxlRXZlbnRzOntrZXlkb3duOmZ1bmN0aW9uKHQpe3ZhciBpLHMsbixhLG89ZSh0LnRhcmdldCkuZGF0YShcInVpLXNsaWRlci1oYW5kbGUtaW5kZXhcIik7c3dpdGNoKHQua2V5Q29kZSl7Y2FzZSBlLnVpLmtleUNvZGUuSE9NRTpjYXNlIGUudWkua2V5Q29kZS5FTkQ6Y2FzZSBlLnVpLmtleUNvZGUuUEFHRV9VUDpjYXNlIGUudWkua2V5Q29kZS5QQUdFX0RPV046Y2FzZSBlLnVpLmtleUNvZGUuVVA6Y2FzZSBlLnVpLmtleUNvZGUuUklHSFQ6Y2FzZSBlLnVpLmtleUNvZGUuRE9XTjpjYXNlIGUudWkua2V5Q29kZS5MRUZUOmlmKHQucHJldmVudERlZmF1bHQoKSwhdGhpcy5fa2V5U2xpZGluZyYmKHRoaXMuX2tleVNsaWRpbmc9ITAsZSh0LnRhcmdldCkuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksaT10aGlzLl9zdGFydCh0LG8pLGk9PT0hMSkpcmV0dXJufXN3aXRjaChhPXRoaXMub3B0aW9ucy5zdGVwLHM9bj10aGlzLm9wdGlvbnMudmFsdWVzJiZ0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aD90aGlzLnZhbHVlcyhvKTp0aGlzLnZhbHVlKCksdC5rZXlDb2RlKXtjYXNlIGUudWkua2V5Q29kZS5IT01FOm49dGhpcy5fdmFsdWVNaW4oKTticmVhaztjYXNlIGUudWkua2V5Q29kZS5FTkQ6bj10aGlzLl92YWx1ZU1heCgpO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLlBBR0VfVVA6bj10aGlzLl90cmltQWxpZ25WYWx1ZShzKyh0aGlzLl92YWx1ZU1heCgpLXRoaXMuX3ZhbHVlTWluKCkpL3RoaXMubnVtUGFnZXMpO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLlBBR0VfRE9XTjpuPXRoaXMuX3RyaW1BbGlnblZhbHVlKHMtKHRoaXMuX3ZhbHVlTWF4KCktdGhpcy5fdmFsdWVNaW4oKSkvdGhpcy5udW1QYWdlcyk7YnJlYWs7Y2FzZSBlLnVpLmtleUNvZGUuVVA6Y2FzZSBlLnVpLmtleUNvZGUuUklHSFQ6aWYocz09PXRoaXMuX3ZhbHVlTWF4KCkpcmV0dXJuO249dGhpcy5fdHJpbUFsaWduVmFsdWUocythKTticmVhaztjYXNlIGUudWkua2V5Q29kZS5ET1dOOmNhc2UgZS51aS5rZXlDb2RlLkxFRlQ6aWYocz09PXRoaXMuX3ZhbHVlTWluKCkpcmV0dXJuO249dGhpcy5fdHJpbUFsaWduVmFsdWUocy1hKX10aGlzLl9zbGlkZSh0LG8sbil9LGtleXVwOmZ1bmN0aW9uKHQpe3ZhciBpPWUodC50YXJnZXQpLmRhdGEoXCJ1aS1zbGlkZXItaGFuZGxlLWluZGV4XCIpO3RoaXMuX2tleVNsaWRpbmcmJih0aGlzLl9rZXlTbGlkaW5nPSExLHRoaXMuX3N0b3AodCxpKSx0aGlzLl9jaGFuZ2UodCxpKSxlKHQudGFyZ2V0KS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKSl9fX0pLGUud2lkZ2V0KFwidWkuc29ydGFibGVcIixlLnVpLm1vdXNlLHt2ZXJzaW9uOlwiMS4xMS40XCIsd2lkZ2V0RXZlbnRQcmVmaXg6XCJzb3J0XCIscmVhZHk6ITEsb3B0aW9uczp7YXBwZW5kVG86XCJwYXJlbnRcIixheGlzOiExLGNvbm5lY3RXaXRoOiExLGNvbnRhaW5tZW50OiExLGN1cnNvcjpcImF1dG9cIixjdXJzb3JBdDohMSxkcm9wT25FbXB0eTohMCxmb3JjZVBsYWNlaG9sZGVyU2l6ZTohMSxmb3JjZUhlbHBlclNpemU6ITEsZ3JpZDohMSxoYW5kbGU6ITEsaGVscGVyOlwib3JpZ2luYWxcIixpdGVtczpcIj4gKlwiLG9wYWNpdHk6ITEscGxhY2Vob2xkZXI6ITEscmV2ZXJ0OiExLHNjcm9sbDohMCxzY3JvbGxTZW5zaXRpdml0eToyMCxzY3JvbGxTcGVlZDoyMCxzY29wZTpcImRlZmF1bHRcIix0b2xlcmFuY2U6XCJpbnRlcnNlY3RcIix6SW5kZXg6MWUzLGFjdGl2YXRlOm51bGwsYmVmb3JlU3RvcDpudWxsLGNoYW5nZTpudWxsLGRlYWN0aXZhdGU6bnVsbCxvdXQ6bnVsbCxvdmVyOm51bGwscmVjZWl2ZTpudWxsLHJlbW92ZTpudWxsLHNvcnQ6bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbCx1cGRhdGU6bnVsbH0sX2lzT3ZlckF4aXM6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiBlPj10JiZ0K2k+ZX0sX2lzRmxvYXRpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuL2xlZnR8cmlnaHQvLnRlc3QoZS5jc3MoXCJmbG9hdFwiKSl8fC9pbmxpbmV8dGFibGUtY2VsbC8udGVzdChlLmNzcyhcImRpc3BsYXlcIikpfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5jb250YWluZXJDYWNoZT17fSx0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1zb3J0YWJsZVwiKSx0aGlzLnJlZnJlc2goKSx0aGlzLm9mZnNldD10aGlzLmVsZW1lbnQub2Zmc2V0KCksdGhpcy5fbW91c2VJbml0KCksdGhpcy5fc2V0SGFuZGxlQ2xhc3NOYW1lKCksdGhpcy5yZWFkeT0hMH0sX3NldE9wdGlvbjpmdW5jdGlvbihlLHQpe3RoaXMuX3N1cGVyKGUsdCksXCJoYW5kbGVcIj09PWUmJnRoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpfSxfc2V0SGFuZGxlQ2xhc3NOYW1lOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmZpbmQoXCIudWktc29ydGFibGUtaGFuZGxlXCIpLnJlbW92ZUNsYXNzKFwidWktc29ydGFibGUtaGFuZGxlXCIpLGUuZWFjaCh0aGlzLml0ZW1zLGZ1bmN0aW9uKCl7KHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oYW5kbGU/dGhpcy5pdGVtLmZpbmQodGhpcy5pbnN0YW5jZS5vcHRpb25zLmhhbmRsZSk6dGhpcy5pdGVtKS5hZGRDbGFzcyhcInVpLXNvcnRhYmxlLWhhbmRsZVwiKX0pfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXNvcnRhYmxlIHVpLXNvcnRhYmxlLWRpc2FibGVkXCIpLmZpbmQoXCIudWktc29ydGFibGUtaGFuZGxlXCIpLnJlbW92ZUNsYXNzKFwidWktc29ydGFibGUtaGFuZGxlXCIpLHRoaXMuX21vdXNlRGVzdHJveSgpO2Zvcih2YXIgZT10aGlzLml0ZW1zLmxlbmd0aC0xO2U+PTA7ZS0tKXRoaXMuaXRlbXNbZV0uaXRlbS5yZW1vdmVEYXRhKHRoaXMud2lkZ2V0TmFtZStcIi1pdGVtXCIpO3JldHVybiB0aGlzfSxfbW91c2VDYXB0dXJlOmZ1bmN0aW9uKHQsaSl7dmFyIHM9bnVsbCxuPSExLGE9dGhpcztyZXR1cm4gdGhpcy5yZXZlcnRpbmc/ITE6dGhpcy5vcHRpb25zLmRpc2FibGVkfHxcInN0YXRpY1wiPT09dGhpcy5vcHRpb25zLnR5cGU/ITE6KHRoaXMuX3JlZnJlc2hJdGVtcyh0KSxlKHQudGFyZ2V0KS5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpe3JldHVybiBlLmRhdGEodGhpcyxhLndpZGdldE5hbWUrXCItaXRlbVwiKT09PWE/KHM9ZSh0aGlzKSwhMSk6dm9pZCAwfSksZS5kYXRhKHQudGFyZ2V0LGEud2lkZ2V0TmFtZStcIi1pdGVtXCIpPT09YSYmKHM9ZSh0LnRhcmdldCkpLHM/IXRoaXMub3B0aW9ucy5oYW5kbGV8fGl8fChlKHRoaXMub3B0aW9ucy5oYW5kbGUscykuZmluZChcIipcIikuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKXt0aGlzPT09dC50YXJnZXQmJihuPSEwKX0pLG4pPyh0aGlzLmN1cnJlbnRJdGVtPXMsdGhpcy5fcmVtb3ZlQ3VycmVudHNGcm9tSXRlbXMoKSwhMCk6ITE6ITEpfSxfbW91c2VTdGFydDpmdW5jdGlvbih0LGkscyl7dmFyIG4sYSxvPXRoaXMub3B0aW9ucztpZih0aGlzLmN1cnJlbnRDb250YWluZXI9dGhpcyx0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKSx0aGlzLmhlbHBlcj10aGlzLl9jcmVhdGVIZWxwZXIodCksdGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpLHRoaXMuX2NhY2hlTWFyZ2lucygpLHRoaXMuc2Nyb2xsUGFyZW50PXRoaXMuaGVscGVyLnNjcm9sbFBhcmVudCgpLHRoaXMub2Zmc2V0PXRoaXMuY3VycmVudEl0ZW0ub2Zmc2V0KCksdGhpcy5vZmZzZXQ9e3RvcDp0aGlzLm9mZnNldC50b3AtdGhpcy5tYXJnaW5zLnRvcCxsZWZ0OnRoaXMub2Zmc2V0LmxlZnQtdGhpcy5tYXJnaW5zLmxlZnR9LGUuZXh0ZW5kKHRoaXMub2Zmc2V0LHtjbGljazp7bGVmdDp0LnBhZ2VYLXRoaXMub2Zmc2V0LmxlZnQsdG9wOnQucGFnZVktdGhpcy5vZmZzZXQudG9wfSxwYXJlbnQ6dGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCkscmVsYXRpdmU6dGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKX0pLHRoaXMuaGVscGVyLmNzcyhcInBvc2l0aW9uXCIsXCJhYnNvbHV0ZVwiKSx0aGlzLmNzc1Bvc2l0aW9uPXRoaXMuaGVscGVyLmNzcyhcInBvc2l0aW9uXCIpLHRoaXMub3JpZ2luYWxQb3NpdGlvbj10aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKHQpLHRoaXMub3JpZ2luYWxQYWdlWD10LnBhZ2VYLHRoaXMub3JpZ2luYWxQYWdlWT10LnBhZ2VZLG8uY3Vyc29yQXQmJnRoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoby5jdXJzb3JBdCksdGhpcy5kb21Qb3NpdGlvbj17cHJldjp0aGlzLmN1cnJlbnRJdGVtLnByZXYoKVswXSxwYXJlbnQ6dGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKVswXX0sdGhpcy5oZWxwZXJbMF0hPT10aGlzLmN1cnJlbnRJdGVtWzBdJiZ0aGlzLmN1cnJlbnRJdGVtLmhpZGUoKSx0aGlzLl9jcmVhdGVQbGFjZWhvbGRlcigpLG8uY29udGFpbm1lbnQmJnRoaXMuX3NldENvbnRhaW5tZW50KCksby5jdXJzb3ImJlwiYXV0b1wiIT09by5jdXJzb3ImJihhPXRoaXMuZG9jdW1lbnQuZmluZChcImJvZHlcIiksdGhpcy5zdG9yZWRDdXJzb3I9YS5jc3MoXCJjdXJzb3JcIiksYS5jc3MoXCJjdXJzb3JcIixvLmN1cnNvciksdGhpcy5zdG9yZWRTdHlsZXNoZWV0PWUoXCI8c3R5bGU+KnsgY3Vyc29yOiBcIitvLmN1cnNvcitcIiAhaW1wb3J0YW50OyB9PC9zdHlsZT5cIikuYXBwZW5kVG8oYSkpLG8ub3BhY2l0eSYmKHRoaXMuaGVscGVyLmNzcyhcIm9wYWNpdHlcIikmJih0aGlzLl9zdG9yZWRPcGFjaXR5PXRoaXMuaGVscGVyLmNzcyhcIm9wYWNpdHlcIikpLHRoaXMuaGVscGVyLmNzcyhcIm9wYWNpdHlcIixvLm9wYWNpdHkpKSxvLnpJbmRleCYmKHRoaXMuaGVscGVyLmNzcyhcInpJbmRleFwiKSYmKHRoaXMuX3N0b3JlZFpJbmRleD10aGlzLmhlbHBlci5jc3MoXCJ6SW5kZXhcIikpLHRoaXMuaGVscGVyLmNzcyhcInpJbmRleFwiLG8uekluZGV4KSksdGhpcy5zY3JvbGxQYXJlbnRbMF0hPT10aGlzLmRvY3VtZW50WzBdJiZcIkhUTUxcIiE9PXRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUmJih0aGlzLm92ZXJmbG93T2Zmc2V0PXRoaXMuc2Nyb2xsUGFyZW50Lm9mZnNldCgpKSx0aGlzLl90cmlnZ2VyKFwic3RhcnRcIix0LHRoaXMuX3VpSGFzaCgpKSx0aGlzLl9wcmVzZXJ2ZUhlbHBlclByb3BvcnRpb25zfHx0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCksIXMpZm9yKG49dGhpcy5jb250YWluZXJzLmxlbmd0aC0xO24+PTA7bi0tKXRoaXMuY29udGFpbmVyc1tuXS5fdHJpZ2dlcihcImFjdGl2YXRlXCIsdCx0aGlzLl91aUhhc2godGhpcykpO1xucmV0dXJuIGUudWkuZGRtYW5hZ2VyJiYoZS51aS5kZG1hbmFnZXIuY3VycmVudD10aGlzKSxlLnVpLmRkbWFuYWdlciYmIW8uZHJvcEJlaGF2aW91ciYmZS51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcyx0KSx0aGlzLmRyYWdnaW5nPSEwLHRoaXMuaGVscGVyLmFkZENsYXNzKFwidWktc29ydGFibGUtaGVscGVyXCIpLHRoaXMuX21vdXNlRHJhZyh0KSwhMH0sX21vdXNlRHJhZzpmdW5jdGlvbih0KXt2YXIgaSxzLG4sYSxvPXRoaXMub3B0aW9ucyxyPSExO2Zvcih0aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24odCksdGhpcy5wb3NpdGlvbkFicz10aGlzLl9jb252ZXJ0UG9zaXRpb25UbyhcImFic29sdXRlXCIpLHRoaXMubGFzdFBvc2l0aW9uQWJzfHwodGhpcy5sYXN0UG9zaXRpb25BYnM9dGhpcy5wb3NpdGlvbkFicyksdGhpcy5vcHRpb25zLnNjcm9sbCYmKHRoaXMuc2Nyb2xsUGFyZW50WzBdIT09dGhpcy5kb2N1bWVudFswXSYmXCJIVE1MXCIhPT10aGlzLnNjcm9sbFBhcmVudFswXS50YWdOYW1lPyh0aGlzLm92ZXJmbG93T2Zmc2V0LnRvcCt0aGlzLnNjcm9sbFBhcmVudFswXS5vZmZzZXRIZWlnaHQtdC5wYWdlWTxvLnNjcm9sbFNlbnNpdGl2aXR5P3RoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcD1yPXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCtvLnNjcm9sbFNwZWVkOnQucGFnZVktdGhpcy5vdmVyZmxvd09mZnNldC50b3A8by5zY3JvbGxTZW5zaXRpdml0eSYmKHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcD1yPXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcC1vLnNjcm9sbFNwZWVkKSx0aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQrdGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0V2lkdGgtdC5wYWdlWDxvLnNjcm9sbFNlbnNpdGl2aXR5P3RoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQ9cj10aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0K28uc2Nyb2xsU3BlZWQ6dC5wYWdlWC10aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQ8by5zY3JvbGxTZW5zaXRpdml0eSYmKHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQ9cj10aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0LW8uc2Nyb2xsU3BlZWQpKToodC5wYWdlWS10aGlzLmRvY3VtZW50LnNjcm9sbFRvcCgpPG8uc2Nyb2xsU2Vuc2l0aXZpdHk/cj10aGlzLmRvY3VtZW50LnNjcm9sbFRvcCh0aGlzLmRvY3VtZW50LnNjcm9sbFRvcCgpLW8uc2Nyb2xsU3BlZWQpOnRoaXMud2luZG93LmhlaWdodCgpLSh0LnBhZ2VZLXRoaXMuZG9jdW1lbnQuc2Nyb2xsVG9wKCkpPG8uc2Nyb2xsU2Vuc2l0aXZpdHkmJihyPXRoaXMuZG9jdW1lbnQuc2Nyb2xsVG9wKHRoaXMuZG9jdW1lbnQuc2Nyb2xsVG9wKCkrby5zY3JvbGxTcGVlZCkpLHQucGFnZVgtdGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KCk8by5zY3JvbGxTZW5zaXRpdml0eT9yPXRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCh0aGlzLmRvY3VtZW50LnNjcm9sbExlZnQoKS1vLnNjcm9sbFNwZWVkKTp0aGlzLndpbmRvdy53aWR0aCgpLSh0LnBhZ2VYLXRoaXMuZG9jdW1lbnQuc2Nyb2xsTGVmdCgpKTxvLnNjcm9sbFNlbnNpdGl2aXR5JiYocj10aGlzLmRvY3VtZW50LnNjcm9sbExlZnQodGhpcy5kb2N1bWVudC5zY3JvbGxMZWZ0KCkrby5zY3JvbGxTcGVlZCkpKSxyIT09ITEmJmUudWkuZGRtYW5hZ2VyJiYhby5kcm9wQmVoYXZpb3VyJiZlLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLHQpKSx0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKFwiYWJzb2x1dGVcIiksdGhpcy5vcHRpb25zLmF4aXMmJlwieVwiPT09dGhpcy5vcHRpb25zLmF4aXN8fCh0aGlzLmhlbHBlclswXS5zdHlsZS5sZWZ0PXRoaXMucG9zaXRpb24ubGVmdCtcInB4XCIpLHRoaXMub3B0aW9ucy5heGlzJiZcInhcIj09PXRoaXMub3B0aW9ucy5heGlzfHwodGhpcy5oZWxwZXJbMF0uc3R5bGUudG9wPXRoaXMucG9zaXRpb24udG9wK1wicHhcIiksaT10aGlzLml0ZW1zLmxlbmd0aC0xO2k+PTA7aS0tKWlmKHM9dGhpcy5pdGVtc1tpXSxuPXMuaXRlbVswXSxhPXRoaXMuX2ludGVyc2VjdHNXaXRoUG9pbnRlcihzKSxhJiZzLmluc3RhbmNlPT09dGhpcy5jdXJyZW50Q29udGFpbmVyJiZuIT09dGhpcy5jdXJyZW50SXRlbVswXSYmdGhpcy5wbGFjZWhvbGRlclsxPT09YT9cIm5leHRcIjpcInByZXZcIl0oKVswXSE9PW4mJiFlLmNvbnRhaW5zKHRoaXMucGxhY2Vob2xkZXJbMF0sbikmJihcInNlbWktZHluYW1pY1wiPT09dGhpcy5vcHRpb25zLnR5cGU/IWUuY29udGFpbnModGhpcy5lbGVtZW50WzBdLG4pOiEwKSl7aWYodGhpcy5kaXJlY3Rpb249MT09PWE/XCJkb3duXCI6XCJ1cFwiLFwicG9pbnRlclwiIT09dGhpcy5vcHRpb25zLnRvbGVyYW5jZSYmIXRoaXMuX2ludGVyc2VjdHNXaXRoU2lkZXMocykpYnJlYWs7dGhpcy5fcmVhcnJhbmdlKHQscyksdGhpcy5fdHJpZ2dlcihcImNoYW5nZVwiLHQsdGhpcy5fdWlIYXNoKCkpO2JyZWFrfXJldHVybiB0aGlzLl9jb250YWN0Q29udGFpbmVycyh0KSxlLnVpLmRkbWFuYWdlciYmZS51aS5kZG1hbmFnZXIuZHJhZyh0aGlzLHQpLHRoaXMuX3RyaWdnZXIoXCJzb3J0XCIsdCx0aGlzLl91aUhhc2goKSksdGhpcy5sYXN0UG9zaXRpb25BYnM9dGhpcy5wb3NpdGlvbkFicywhMX0sX21vdXNlU3RvcDpmdW5jdGlvbih0LGkpe2lmKHQpe2lmKGUudWkuZGRtYW5hZ2VyJiYhdGhpcy5vcHRpb25zLmRyb3BCZWhhdmlvdXImJmUudWkuZGRtYW5hZ2VyLmRyb3AodGhpcyx0KSx0aGlzLm9wdGlvbnMucmV2ZXJ0KXt2YXIgcz10aGlzLG49dGhpcy5wbGFjZWhvbGRlci5vZmZzZXQoKSxhPXRoaXMub3B0aW9ucy5heGlzLG89e307YSYmXCJ4XCIhPT1hfHwoby5sZWZ0PW4ubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdC10aGlzLm1hcmdpbnMubGVmdCsodGhpcy5vZmZzZXRQYXJlbnRbMF09PT10aGlzLmRvY3VtZW50WzBdLmJvZHk/MDp0aGlzLm9mZnNldFBhcmVudFswXS5zY3JvbGxMZWZ0KSksYSYmXCJ5XCIhPT1hfHwoby50b3A9bi50b3AtdGhpcy5vZmZzZXQucGFyZW50LnRvcC10aGlzLm1hcmdpbnMudG9wKyh0aGlzLm9mZnNldFBhcmVudFswXT09PXRoaXMuZG9jdW1lbnRbMF0uYm9keT8wOnRoaXMub2Zmc2V0UGFyZW50WzBdLnNjcm9sbFRvcCkpLHRoaXMucmV2ZXJ0aW5nPSEwLGUodGhpcy5oZWxwZXIpLmFuaW1hdGUobyxwYXJzZUludCh0aGlzLm9wdGlvbnMucmV2ZXJ0LDEwKXx8NTAwLGZ1bmN0aW9uKCl7cy5fY2xlYXIodCl9KX1lbHNlIHRoaXMuX2NsZWFyKHQsaSk7cmV0dXJuITF9fSxjYW5jZWw6ZnVuY3Rpb24oKXtpZih0aGlzLmRyYWdnaW5nKXt0aGlzLl9tb3VzZVVwKHt0YXJnZXQ6bnVsbH0pLFwib3JpZ2luYWxcIj09PXRoaXMub3B0aW9ucy5oZWxwZXI/dGhpcy5jdXJyZW50SXRlbS5jc3ModGhpcy5fc3RvcmVkQ1NTKS5yZW1vdmVDbGFzcyhcInVpLXNvcnRhYmxlLWhlbHBlclwiKTp0aGlzLmN1cnJlbnRJdGVtLnNob3coKTtmb3IodmFyIHQ9dGhpcy5jb250YWluZXJzLmxlbmd0aC0xO3Q+PTA7dC0tKXRoaXMuY29udGFpbmVyc1t0XS5fdHJpZ2dlcihcImRlYWN0aXZhdGVcIixudWxsLHRoaXMuX3VpSGFzaCh0aGlzKSksdGhpcy5jb250YWluZXJzW3RdLmNvbnRhaW5lckNhY2hlLm92ZXImJih0aGlzLmNvbnRhaW5lcnNbdF0uX3RyaWdnZXIoXCJvdXRcIixudWxsLHRoaXMuX3VpSGFzaCh0aGlzKSksdGhpcy5jb250YWluZXJzW3RdLmNvbnRhaW5lckNhY2hlLm92ZXI9MCl9cmV0dXJuIHRoaXMucGxhY2Vob2xkZXImJih0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGUmJnRoaXMucGxhY2Vob2xkZXJbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnBsYWNlaG9sZGVyWzBdKSxcIm9yaWdpbmFsXCIhPT10aGlzLm9wdGlvbnMuaGVscGVyJiZ0aGlzLmhlbHBlciYmdGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZSYmdGhpcy5oZWxwZXIucmVtb3ZlKCksZS5leHRlbmQodGhpcyx7aGVscGVyOm51bGwsZHJhZ2dpbmc6ITEscmV2ZXJ0aW5nOiExLF9ub0ZpbmFsU29ydDpudWxsfSksdGhpcy5kb21Qb3NpdGlvbi5wcmV2P2UodGhpcy5kb21Qb3NpdGlvbi5wcmV2KS5hZnRlcih0aGlzLmN1cnJlbnRJdGVtKTplKHRoaXMuZG9tUG9zaXRpb24ucGFyZW50KS5wcmVwZW5kKHRoaXMuY3VycmVudEl0ZW0pKSx0aGlzfSxzZXJpYWxpemU6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fZ2V0SXRlbXNBc2pRdWVyeSh0JiZ0LmNvbm5lY3RlZCkscz1bXTtyZXR1cm4gdD10fHx7fSxlKGkpLmVhY2goZnVuY3Rpb24oKXt2YXIgaT0oZSh0Lml0ZW18fHRoaXMpLmF0dHIodC5hdHRyaWJ1dGV8fFwiaWRcIil8fFwiXCIpLm1hdGNoKHQuZXhwcmVzc2lvbnx8LyguKylbXFwtPV9dKC4rKS8pO2kmJnMucHVzaCgodC5rZXl8fGlbMV0rXCJbXVwiKStcIj1cIisodC5rZXkmJnQuZXhwcmVzc2lvbj9pWzFdOmlbMl0pKX0pLCFzLmxlbmd0aCYmdC5rZXkmJnMucHVzaCh0LmtleStcIj1cIikscy5qb2luKFwiJlwiKX0sdG9BcnJheTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KHQmJnQuY29ubmVjdGVkKSxzPVtdO3JldHVybiB0PXR8fHt9LGkuZWFjaChmdW5jdGlvbigpe3MucHVzaChlKHQuaXRlbXx8dGhpcykuYXR0cih0LmF0dHJpYnV0ZXx8XCJpZFwiKXx8XCJcIil9KSxzfSxfaW50ZXJzZWN0c1dpdGg6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wb3NpdGlvbkFicy5sZWZ0LGk9dCt0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLHM9dGhpcy5wb3NpdGlvbkFicy50b3Asbj1zK3RoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LGE9ZS5sZWZ0LG89YStlLndpZHRoLHI9ZS50b3AsaD1yK2UuaGVpZ2h0LGw9dGhpcy5vZmZzZXQuY2xpY2sudG9wLHU9dGhpcy5vZmZzZXQuY2xpY2subGVmdCxkPVwieFwiPT09dGhpcy5vcHRpb25zLmF4aXN8fHMrbD5yJiZoPnMrbCxjPVwieVwiPT09dGhpcy5vcHRpb25zLmF4aXN8fHQrdT5hJiZvPnQrdSxwPWQmJmM7cmV0dXJuXCJwb2ludGVyXCI9PT10aGlzLm9wdGlvbnMudG9sZXJhbmNlfHx0aGlzLm9wdGlvbnMuZm9yY2VQb2ludGVyRm9yQ29udGFpbmVyc3x8XCJwb2ludGVyXCIhPT10aGlzLm9wdGlvbnMudG9sZXJhbmNlJiZ0aGlzLmhlbHBlclByb3BvcnRpb25zW3RoaXMuZmxvYXRpbmc/XCJ3aWR0aFwiOlwiaGVpZ2h0XCJdPmVbdGhpcy5mbG9hdGluZz9cIndpZHRoXCI6XCJoZWlnaHRcIl0/cDp0K3RoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgvMj5hJiZvPmktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC8yJiZzK3RoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzI+ciYmaD5uLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzJ9LF9pbnRlcnNlY3RzV2l0aFBvaW50ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJ4XCI9PT10aGlzLm9wdGlvbnMuYXhpc3x8dGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLnRvcCt0aGlzLm9mZnNldC5jbGljay50b3AsZS50b3AsZS5oZWlnaHQpLGk9XCJ5XCI9PT10aGlzLm9wdGlvbnMuYXhpc3x8dGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLmxlZnQrdGhpcy5vZmZzZXQuY2xpY2subGVmdCxlLmxlZnQsZS53aWR0aCkscz10JiZpLG49dGhpcy5fZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uKCksYT10aGlzLl9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbigpO3JldHVybiBzP3RoaXMuZmxvYXRpbmc/YSYmXCJyaWdodFwiPT09YXx8XCJkb3duXCI9PT1uPzI6MTpuJiYoXCJkb3duXCI9PT1uPzI6MSk6ITF9LF9pbnRlcnNlY3RzV2l0aFNpZGVzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2lzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy50b3ArdGhpcy5vZmZzZXQuY2xpY2sudG9wLGUudG9wK2UuaGVpZ2h0LzIsZS5oZWlnaHQpLGk9dGhpcy5faXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLmxlZnQrdGhpcy5vZmZzZXQuY2xpY2subGVmdCxlLmxlZnQrZS53aWR0aC8yLGUud2lkdGgpLHM9dGhpcy5fZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uKCksbj10aGlzLl9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbigpO3JldHVybiB0aGlzLmZsb2F0aW5nJiZuP1wicmlnaHRcIj09PW4mJml8fFwibGVmdFwiPT09biYmIWk6cyYmKFwiZG93blwiPT09cyYmdHx8XCJ1cFwiPT09cyYmIXQpfSxfZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wb3NpdGlvbkFicy50b3AtdGhpcy5sYXN0UG9zaXRpb25BYnMudG9wO3JldHVybiAwIT09ZSYmKGU+MD9cImRvd25cIjpcInVwXCIpfSxfZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBvc2l0aW9uQWJzLmxlZnQtdGhpcy5sYXN0UG9zaXRpb25BYnMubGVmdDtyZXR1cm4gMCE9PWUmJihlPjA/XCJyaWdodFwiOlwibGVmdFwiKX0scmVmcmVzaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcmVmcmVzaEl0ZW1zKGUpLHRoaXMuX3NldEhhbmRsZUNsYXNzTmFtZSgpLHRoaXMucmVmcmVzaFBvc2l0aW9ucygpLHRoaXN9LF9jb25uZWN0V2l0aDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5jb25uZWN0V2l0aC5jb25zdHJ1Y3Rvcj09PVN0cmluZz9bZS5jb25uZWN0V2l0aF06ZS5jb25uZWN0V2l0aH0sX2dldEl0ZW1zQXNqUXVlcnk6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gaSgpe3IucHVzaCh0aGlzKX12YXIgcyxuLGEsbyxyPVtdLGg9W10sbD10aGlzLl9jb25uZWN0V2l0aCgpO2lmKGwmJnQpZm9yKHM9bC5sZW5ndGgtMTtzPj0wO3MtLSlmb3IoYT1lKGxbc10sdGhpcy5kb2N1bWVudFswXSksbj1hLmxlbmd0aC0xO24+PTA7bi0tKW89ZS5kYXRhKGFbbl0sdGhpcy53aWRnZXRGdWxsTmFtZSksbyYmbyE9PXRoaXMmJiFvLm9wdGlvbnMuZGlzYWJsZWQmJmgucHVzaChbZS5pc0Z1bmN0aW9uKG8ub3B0aW9ucy5pdGVtcyk/by5vcHRpb25zLml0ZW1zLmNhbGwoby5lbGVtZW50KTplKG8ub3B0aW9ucy5pdGVtcyxvLmVsZW1lbnQpLm5vdChcIi51aS1zb3J0YWJsZS1oZWxwZXJcIikubm90KFwiLnVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyXCIpLG9dKTtmb3IoaC5wdXNoKFtlLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLml0ZW1zKT90aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCh0aGlzLmVsZW1lbnQsbnVsbCx7b3B0aW9uczp0aGlzLm9wdGlvbnMsaXRlbTp0aGlzLmN1cnJlbnRJdGVtfSk6ZSh0aGlzLm9wdGlvbnMuaXRlbXMsdGhpcy5lbGVtZW50KS5ub3QoXCIudWktc29ydGFibGUtaGVscGVyXCIpLm5vdChcIi51aS1zb3J0YWJsZS1wbGFjZWhvbGRlclwiKSx0aGlzXSkscz1oLmxlbmd0aC0xO3M+PTA7cy0tKWhbc11bMF0uZWFjaChpKTtyZXR1cm4gZShyKX0sX3JlbW92ZUN1cnJlbnRzRnJvbUl0ZW1zOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jdXJyZW50SXRlbS5maW5kKFwiOmRhdGEoXCIrdGhpcy53aWRnZXROYW1lK1wiLWl0ZW0pXCIpO3RoaXMuaXRlbXM9ZS5ncmVwKHRoaXMuaXRlbXMsZnVuY3Rpb24oZSl7Zm9yKHZhciBpPTA7dC5sZW5ndGg+aTtpKyspaWYodFtpXT09PWUuaXRlbVswXSlyZXR1cm4hMTtyZXR1cm4hMH0pfSxfcmVmcmVzaEl0ZW1zOmZ1bmN0aW9uKHQpe3RoaXMuaXRlbXM9W10sdGhpcy5jb250YWluZXJzPVt0aGlzXTt2YXIgaSxzLG4sYSxvLHIsaCxsLHU9dGhpcy5pdGVtcyxkPVtbZS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5pdGVtcyk/dGhpcy5vcHRpb25zLml0ZW1zLmNhbGwodGhpcy5lbGVtZW50WzBdLHQse2l0ZW06dGhpcy5jdXJyZW50SXRlbX0pOmUodGhpcy5vcHRpb25zLml0ZW1zLHRoaXMuZWxlbWVudCksdGhpc11dLGM9dGhpcy5fY29ubmVjdFdpdGgoKTtpZihjJiZ0aGlzLnJlYWR5KWZvcihpPWMubGVuZ3RoLTE7aT49MDtpLS0pZm9yKG49ZShjW2ldLHRoaXMuZG9jdW1lbnRbMF0pLHM9bi5sZW5ndGgtMTtzPj0wO3MtLSlhPWUuZGF0YShuW3NdLHRoaXMud2lkZ2V0RnVsbE5hbWUpLGEmJmEhPT10aGlzJiYhYS5vcHRpb25zLmRpc2FibGVkJiYoZC5wdXNoKFtlLmlzRnVuY3Rpb24oYS5vcHRpb25zLml0ZW1zKT9hLm9wdGlvbnMuaXRlbXMuY2FsbChhLmVsZW1lbnRbMF0sdCx7aXRlbTp0aGlzLmN1cnJlbnRJdGVtfSk6ZShhLm9wdGlvbnMuaXRlbXMsYS5lbGVtZW50KSxhXSksdGhpcy5jb250YWluZXJzLnB1c2goYSkpO2ZvcihpPWQubGVuZ3RoLTE7aT49MDtpLS0pZm9yKG89ZFtpXVsxXSxyPWRbaV1bMF0scz0wLGw9ci5sZW5ndGg7bD5zO3MrKyloPWUocltzXSksaC5kYXRhKHRoaXMud2lkZ2V0TmFtZStcIi1pdGVtXCIsbyksdS5wdXNoKHtpdGVtOmgsaW5zdGFuY2U6byx3aWR0aDowLGhlaWdodDowLGxlZnQ6MCx0b3A6MH0pfSxyZWZyZXNoUG9zaXRpb25zOmZ1bmN0aW9uKHQpe3RoaXMuZmxvYXRpbmc9dGhpcy5pdGVtcy5sZW5ndGg/XCJ4XCI9PT10aGlzLm9wdGlvbnMuYXhpc3x8dGhpcy5faXNGbG9hdGluZyh0aGlzLml0ZW1zWzBdLml0ZW0pOiExLHRoaXMub2Zmc2V0UGFyZW50JiZ0aGlzLmhlbHBlciYmKHRoaXMub2Zmc2V0LnBhcmVudD10aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSk7dmFyIGkscyxuLGE7Zm9yKGk9dGhpcy5pdGVtcy5sZW5ndGgtMTtpPj0wO2ktLSlzPXRoaXMuaXRlbXNbaV0scy5pbnN0YW5jZSE9PXRoaXMuY3VycmVudENvbnRhaW5lciYmdGhpcy5jdXJyZW50Q29udGFpbmVyJiZzLml0ZW1bMF0hPT10aGlzLmN1cnJlbnRJdGVtWzBdfHwobj10aGlzLm9wdGlvbnMudG9sZXJhbmNlRWxlbWVudD9lKHRoaXMub3B0aW9ucy50b2xlcmFuY2VFbGVtZW50LHMuaXRlbSk6cy5pdGVtLHR8fChzLndpZHRoPW4ub3V0ZXJXaWR0aCgpLHMuaGVpZ2h0PW4ub3V0ZXJIZWlnaHQoKSksYT1uLm9mZnNldCgpLHMubGVmdD1hLmxlZnQscy50b3A9YS50b3ApO2lmKHRoaXMub3B0aW9ucy5jdXN0b20mJnRoaXMub3B0aW9ucy5jdXN0b20ucmVmcmVzaENvbnRhaW5lcnMpdGhpcy5vcHRpb25zLmN1c3RvbS5yZWZyZXNoQ29udGFpbmVycy5jYWxsKHRoaXMpO2Vsc2UgZm9yKGk9dGhpcy5jb250YWluZXJzLmxlbmd0aC0xO2k+PTA7aS0tKWE9dGhpcy5jb250YWluZXJzW2ldLmVsZW1lbnQub2Zmc2V0KCksdGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLmxlZnQ9YS5sZWZ0LHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS50b3A9YS50b3AsdGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLndpZHRoPXRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50Lm91dGVyV2lkdGgoKSx0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUuaGVpZ2h0PXRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50Lm91dGVySGVpZ2h0KCk7cmV0dXJuIHRoaXN9LF9jcmVhdGVQbGFjZWhvbGRlcjpmdW5jdGlvbih0KXt0PXR8fHRoaXM7dmFyIGkscz10Lm9wdGlvbnM7cy5wbGFjZWhvbGRlciYmcy5wbGFjZWhvbGRlci5jb25zdHJ1Y3RvciE9PVN0cmluZ3x8KGk9cy5wbGFjZWhvbGRlcixzLnBsYWNlaG9sZGVyPXtlbGVtZW50OmZ1bmN0aW9uKCl7dmFyIHM9dC5jdXJyZW50SXRlbVswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLG49ZShcIjxcIitzK1wiPlwiLHQuZG9jdW1lbnRbMF0pLmFkZENsYXNzKGl8fHQuY3VycmVudEl0ZW1bMF0uY2xhc3NOYW1lK1wiIHVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyXCIpLnJlbW92ZUNsYXNzKFwidWktc29ydGFibGUtaGVscGVyXCIpO3JldHVyblwidGJvZHlcIj09PXM/dC5fY3JlYXRlVHJQbGFjZWhvbGRlcih0LmN1cnJlbnRJdGVtLmZpbmQoXCJ0clwiKS5lcSgwKSxlKFwiPHRyPlwiLHQuZG9jdW1lbnRbMF0pLmFwcGVuZFRvKG4pKTpcInRyXCI9PT1zP3QuX2NyZWF0ZVRyUGxhY2Vob2xkZXIodC5jdXJyZW50SXRlbSxuKTpcImltZ1wiPT09cyYmbi5hdHRyKFwic3JjXCIsdC5jdXJyZW50SXRlbS5hdHRyKFwic3JjXCIpKSxpfHxuLmNzcyhcInZpc2liaWxpdHlcIixcImhpZGRlblwiKSxufSx1cGRhdGU6ZnVuY3Rpb24oZSxuKXsoIWl8fHMuZm9yY2VQbGFjZWhvbGRlclNpemUpJiYobi5oZWlnaHQoKXx8bi5oZWlnaHQodC5jdXJyZW50SXRlbS5pbm5lckhlaWdodCgpLXBhcnNlSW50KHQuY3VycmVudEl0ZW0uY3NzKFwicGFkZGluZ1RvcFwiKXx8MCwxMCktcGFyc2VJbnQodC5jdXJyZW50SXRlbS5jc3MoXCJwYWRkaW5nQm90dG9tXCIpfHwwLDEwKSksbi53aWR0aCgpfHxuLndpZHRoKHQuY3VycmVudEl0ZW0uaW5uZXJXaWR0aCgpLXBhcnNlSW50KHQuY3VycmVudEl0ZW0uY3NzKFwicGFkZGluZ0xlZnRcIil8fDAsMTApLXBhcnNlSW50KHQuY3VycmVudEl0ZW0uY3NzKFwicGFkZGluZ1JpZ2h0XCIpfHwwLDEwKSkpfX0pLHQucGxhY2Vob2xkZXI9ZShzLnBsYWNlaG9sZGVyLmVsZW1lbnQuY2FsbCh0LmVsZW1lbnQsdC5jdXJyZW50SXRlbSkpLHQuY3VycmVudEl0ZW0uYWZ0ZXIodC5wbGFjZWhvbGRlcikscy5wbGFjZWhvbGRlci51cGRhdGUodCx0LnBsYWNlaG9sZGVyKX0sX2NyZWF0ZVRyUGxhY2Vob2xkZXI6ZnVuY3Rpb24odCxpKXt2YXIgcz10aGlzO3QuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7ZShcIjx0ZD4mIzE2MDs8L3RkPlwiLHMuZG9jdW1lbnRbMF0pLmF0dHIoXCJjb2xzcGFuXCIsZSh0aGlzKS5hdHRyKFwiY29sc3BhblwiKXx8MSkuYXBwZW5kVG8oaSl9KX0sX2NvbnRhY3RDb250YWluZXJzOmZ1bmN0aW9uKHQpe3ZhciBpLHMsbixhLG8scixoLGwsdSxkLGM9bnVsbCxwPW51bGw7Zm9yKGk9dGhpcy5jb250YWluZXJzLmxlbmd0aC0xO2k+PTA7aS0tKWlmKCFlLmNvbnRhaW5zKHRoaXMuY3VycmVudEl0ZW1bMF0sdGhpcy5jb250YWluZXJzW2ldLmVsZW1lbnRbMF0pKWlmKHRoaXMuX2ludGVyc2VjdHNXaXRoKHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZSkpe2lmKGMmJmUuY29udGFpbnModGhpcy5jb250YWluZXJzW2ldLmVsZW1lbnRbMF0sYy5lbGVtZW50WzBdKSljb250aW51ZTtjPXRoaXMuY29udGFpbmVyc1tpXSxwPWl9ZWxzZSB0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3ZlciYmKHRoaXMuY29udGFpbmVyc1tpXS5fdHJpZ2dlcihcIm91dFwiLHQsdGhpcy5fdWlIYXNoKHRoaXMpKSx0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3Zlcj0wKTtpZihjKWlmKDE9PT10aGlzLmNvbnRhaW5lcnMubGVuZ3RoKXRoaXMuY29udGFpbmVyc1twXS5jb250YWluZXJDYWNoZS5vdmVyfHwodGhpcy5jb250YWluZXJzW3BdLl90cmlnZ2VyKFwib3ZlclwiLHQsdGhpcy5fdWlIYXNoKHRoaXMpKSx0aGlzLmNvbnRhaW5lcnNbcF0uY29udGFpbmVyQ2FjaGUub3Zlcj0xKTtlbHNle2ZvcihuPTFlNCxhPW51bGwsdT1jLmZsb2F0aW5nfHx0aGlzLl9pc0Zsb2F0aW5nKHRoaXMuY3VycmVudEl0ZW0pLG89dT9cImxlZnRcIjpcInRvcFwiLHI9dT9cIndpZHRoXCI6XCJoZWlnaHRcIixkPXU/XCJjbGllbnRYXCI6XCJjbGllbnRZXCIscz10aGlzLml0ZW1zLmxlbmd0aC0xO3M+PTA7cy0tKWUuY29udGFpbnModGhpcy5jb250YWluZXJzW3BdLmVsZW1lbnRbMF0sdGhpcy5pdGVtc1tzXS5pdGVtWzBdKSYmdGhpcy5pdGVtc1tzXS5pdGVtWzBdIT09dGhpcy5jdXJyZW50SXRlbVswXSYmKGg9dGhpcy5pdGVtc1tzXS5pdGVtLm9mZnNldCgpW29dLGw9ITEsdFtkXS1oPnRoaXMuaXRlbXNbc11bcl0vMiYmKGw9ITApLG4+TWF0aC5hYnModFtkXS1oKSYmKG49TWF0aC5hYnModFtkXS1oKSxhPXRoaXMuaXRlbXNbc10sdGhpcy5kaXJlY3Rpb249bD9cInVwXCI6XCJkb3duXCIpKTtpZighYSYmIXRoaXMub3B0aW9ucy5kcm9wT25FbXB0eSlyZXR1cm47aWYodGhpcy5jdXJyZW50Q29udGFpbmVyPT09dGhpcy5jb250YWluZXJzW3BdKXJldHVybiB0aGlzLmN1cnJlbnRDb250YWluZXIuY29udGFpbmVyQ2FjaGUub3Zlcnx8KHRoaXMuY29udGFpbmVyc1twXS5fdHJpZ2dlcihcIm92ZXJcIix0LHRoaXMuX3VpSGFzaCgpKSx0aGlzLmN1cnJlbnRDb250YWluZXIuY29udGFpbmVyQ2FjaGUub3Zlcj0xKSx2b2lkIDA7YT90aGlzLl9yZWFycmFuZ2UodCxhLG51bGwsITApOnRoaXMuX3JlYXJyYW5nZSh0LG51bGwsdGhpcy5jb250YWluZXJzW3BdLmVsZW1lbnQsITApLHRoaXMuX3RyaWdnZXIoXCJjaGFuZ2VcIix0LHRoaXMuX3VpSGFzaCgpKSx0aGlzLmNvbnRhaW5lcnNbcF0uX3RyaWdnZXIoXCJjaGFuZ2VcIix0LHRoaXMuX3VpSGFzaCh0aGlzKSksdGhpcy5jdXJyZW50Q29udGFpbmVyPXRoaXMuY29udGFpbmVyc1twXSx0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIudXBkYXRlKHRoaXMuY3VycmVudENvbnRhaW5lcix0aGlzLnBsYWNlaG9sZGVyKSx0aGlzLmNvbnRhaW5lcnNbcF0uX3RyaWdnZXIoXCJvdmVyXCIsdCx0aGlzLl91aUhhc2godGhpcykpLHRoaXMuY29udGFpbmVyc1twXS5jb250YWluZXJDYWNoZS5vdmVyPTF9fSxfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMub3B0aW9ucyxzPWUuaXNGdW5jdGlvbihpLmhlbHBlcik/ZShpLmhlbHBlci5hcHBseSh0aGlzLmVsZW1lbnRbMF0sW3QsdGhpcy5jdXJyZW50SXRlbV0pKTpcImNsb25lXCI9PT1pLmhlbHBlcj90aGlzLmN1cnJlbnRJdGVtLmNsb25lKCk6dGhpcy5jdXJyZW50SXRlbTtyZXR1cm4gcy5wYXJlbnRzKFwiYm9keVwiKS5sZW5ndGh8fGUoXCJwYXJlbnRcIiE9PWkuYXBwZW5kVG8/aS5hcHBlbmRUbzp0aGlzLmN1cnJlbnRJdGVtWzBdLnBhcmVudE5vZGUpWzBdLmFwcGVuZENoaWxkKHNbMF0pLHNbMF09PT10aGlzLmN1cnJlbnRJdGVtWzBdJiYodGhpcy5fc3RvcmVkQ1NTPXt3aWR0aDp0aGlzLmN1cnJlbnRJdGVtWzBdLnN0eWxlLndpZHRoLGhlaWdodDp0aGlzLmN1cnJlbnRJdGVtWzBdLnN0eWxlLmhlaWdodCxwb3NpdGlvbjp0aGlzLmN1cnJlbnRJdGVtLmNzcyhcInBvc2l0aW9uXCIpLHRvcDp0aGlzLmN1cnJlbnRJdGVtLmNzcyhcInRvcFwiKSxsZWZ0OnRoaXMuY3VycmVudEl0ZW0uY3NzKFwibGVmdFwiKX0pLCghc1swXS5zdHlsZS53aWR0aHx8aS5mb3JjZUhlbHBlclNpemUpJiZzLndpZHRoKHRoaXMuY3VycmVudEl0ZW0ud2lkdGgoKSksKCFzWzBdLnN0eWxlLmhlaWdodHx8aS5mb3JjZUhlbHBlclNpemUpJiZzLmhlaWdodCh0aGlzLmN1cnJlbnRJdGVtLmhlaWdodCgpKSxzfSxfYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcjpmdW5jdGlvbih0KXtcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9dC5zcGxpdChcIiBcIikpLGUuaXNBcnJheSh0KSYmKHQ9e2xlZnQ6K3RbMF0sdG9wOit0WzFdfHwwfSksXCJsZWZ0XCJpbiB0JiYodGhpcy5vZmZzZXQuY2xpY2subGVmdD10LmxlZnQrdGhpcy5tYXJnaW5zLmxlZnQpLFwicmlnaHRcImluIHQmJih0aGlzLm9mZnNldC5jbGljay5sZWZ0PXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdC5yaWdodCt0aGlzLm1hcmdpbnMubGVmdCksXCJ0b3BcImluIHQmJih0aGlzLm9mZnNldC5jbGljay50b3A9dC50b3ArdGhpcy5tYXJnaW5zLnRvcCksXCJib3R0b21cImluIHQmJih0aGlzLm9mZnNldC5jbGljay50b3A9dGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdC5ib3R0b20rdGhpcy5tYXJnaW5zLnRvcCl9LF9nZXRQYXJlbnRPZmZzZXQ6ZnVuY3Rpb24oKXt0aGlzLm9mZnNldFBhcmVudD10aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTt2YXIgdD10aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKTtyZXR1cm5cImFic29sdXRlXCI9PT10aGlzLmNzc1Bvc2l0aW9uJiZ0aGlzLnNjcm9sbFBhcmVudFswXSE9PXRoaXMuZG9jdW1lbnRbMF0mJmUuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sdGhpcy5vZmZzZXRQYXJlbnRbMF0pJiYodC5sZWZ0Kz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCksdC50b3ArPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpKSwodGhpcy5vZmZzZXRQYXJlbnRbMF09PT10aGlzLmRvY3VtZW50WzBdLmJvZHl8fHRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUmJlwiaHRtbFwiPT09dGhpcy5vZmZzZXRQYXJlbnRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZlLnVpLmllKSYmKHQ9e3RvcDowLGxlZnQ6MH0pLHt0b3A6dC50b3ArKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcyhcImJvcmRlclRvcFdpZHRoXCIpLDEwKXx8MCksbGVmdDp0LmxlZnQrKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcyhcImJvcmRlckxlZnRXaWR0aFwiKSwxMCl8fDApfX0sX2dldFJlbGF0aXZlT2Zmc2V0OmZ1bmN0aW9uKCl7aWYoXCJyZWxhdGl2ZVwiPT09dGhpcy5jc3NQb3NpdGlvbil7dmFyIGU9dGhpcy5jdXJyZW50SXRlbS5wb3NpdGlvbigpO3JldHVybnt0b3A6ZS50b3AtKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcyhcInRvcFwiKSwxMCl8fDApK3RoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpLGxlZnQ6ZS5sZWZ0LShwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoXCJsZWZ0XCIpLDEwKXx8MCkrdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpfX1yZXR1cm57dG9wOjAsbGVmdDowfX0sX2NhY2hlTWFyZ2luczpmdW5jdGlvbigpe3RoaXMubWFyZ2lucz17bGVmdDpwYXJzZUludCh0aGlzLmN1cnJlbnRJdGVtLmNzcyhcIm1hcmdpbkxlZnRcIiksMTApfHwwLHRvcDpwYXJzZUludCh0aGlzLmN1cnJlbnRJdGVtLmNzcyhcIm1hcmdpblRvcFwiKSwxMCl8fDB9fSxfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczpmdW5jdGlvbigpe3RoaXMuaGVscGVyUHJvcG9ydGlvbnM9e3dpZHRoOnRoaXMuaGVscGVyLm91dGVyV2lkdGgoKSxoZWlnaHQ6dGhpcy5oZWxwZXIub3V0ZXJIZWlnaHQoKX19LF9zZXRDb250YWlubWVudDpmdW5jdGlvbigpe3ZhciB0LGkscyxuPXRoaXMub3B0aW9ucztcInBhcmVudFwiPT09bi5jb250YWlubWVudCYmKG4uY29udGFpbm1lbnQ9dGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZSksKFwiZG9jdW1lbnRcIj09PW4uY29udGFpbm1lbnR8fFwid2luZG93XCI9PT1uLmNvbnRhaW5tZW50KSYmKHRoaXMuY29udGFpbm1lbnQ9WzAtdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCwwLXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wLFwiZG9jdW1lbnRcIj09PW4uY29udGFpbm1lbnQ/dGhpcy5kb2N1bWVudC53aWR0aCgpOnRoaXMud2luZG93LndpZHRoKCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdCwoXCJkb2N1bWVudFwiPT09bi5jb250YWlubWVudD90aGlzLmRvY3VtZW50LndpZHRoKCk6dGhpcy53aW5kb3cuaGVpZ2h0KCl8fHRoaXMuZG9jdW1lbnRbMF0uYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF0pLC9eKGRvY3VtZW50fHdpbmRvd3xwYXJlbnQpJC8udGVzdChuLmNvbnRhaW5tZW50KXx8KHQ9ZShuLmNvbnRhaW5tZW50KVswXSxpPWUobi5jb250YWlubWVudCkub2Zmc2V0KCkscz1cImhpZGRlblwiIT09ZSh0KS5jc3MoXCJvdmVyZmxvd1wiKSx0aGlzLmNvbnRhaW5tZW50PVtpLmxlZnQrKHBhcnNlSW50KGUodCkuY3NzKFwiYm9yZGVyTGVmdFdpZHRoXCIpLDEwKXx8MCkrKHBhcnNlSW50KGUodCkuY3NzKFwicGFkZGluZ0xlZnRcIiksMTApfHwwKS10aGlzLm1hcmdpbnMubGVmdCxpLnRvcCsocGFyc2VJbnQoZSh0KS5jc3MoXCJib3JkZXJUb3BXaWR0aFwiKSwxMCl8fDApKyhwYXJzZUludChlKHQpLmNzcyhcInBhZGRpbmdUb3BcIiksMTApfHwwKS10aGlzLm1hcmdpbnMudG9wLGkubGVmdCsocz9NYXRoLm1heCh0LnNjcm9sbFdpZHRoLHQub2Zmc2V0V2lkdGgpOnQub2Zmc2V0V2lkdGgpLShwYXJzZUludChlKHQpLmNzcyhcImJvcmRlckxlZnRXaWR0aFwiKSwxMCl8fDApLShwYXJzZUludChlKHQpLmNzcyhcInBhZGRpbmdSaWdodFwiKSwxMCl8fDApLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQsaS50b3ArKHM/TWF0aC5tYXgodC5zY3JvbGxIZWlnaHQsdC5vZmZzZXRIZWlnaHQpOnQub2Zmc2V0SGVpZ2h0KS0ocGFyc2VJbnQoZSh0KS5jc3MoXCJib3JkZXJUb3BXaWR0aFwiKSwxMCl8fDApLShwYXJzZUludChlKHQpLmNzcyhcInBhZGRpbmdCb3R0b21cIiksMTApfHwwKS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wXSl9LF9jb252ZXJ0UG9zaXRpb25UbzpmdW5jdGlvbih0LGkpe2l8fChpPXRoaXMucG9zaXRpb24pO3ZhciBzPVwiYWJzb2x1dGVcIj09PXQ/MTotMSxuPVwiYWJzb2x1dGVcIiE9PXRoaXMuY3NzUG9zaXRpb258fHRoaXMuc2Nyb2xsUGFyZW50WzBdIT09dGhpcy5kb2N1bWVudFswXSYmZS5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSk/dGhpcy5zY3JvbGxQYXJlbnQ6dGhpcy5vZmZzZXRQYXJlbnQsYT0vKGh0bWx8Ym9keSkvaS50ZXN0KG5bMF0udGFnTmFtZSk7cmV0dXJue3RvcDppLnRvcCt0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3Aqcyt0aGlzLm9mZnNldC5wYXJlbnQudG9wKnMtKFwiZml4ZWRcIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOmE/MDpuLnNjcm9sbFRvcCgpKSpzLGxlZnQ6aS5sZWZ0K3RoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQqcyt0aGlzLm9mZnNldC5wYXJlbnQubGVmdCpzLShcImZpeGVkXCI9PT10aGlzLmNzc1Bvc2l0aW9uPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk6YT8wOm4uc2Nyb2xsTGVmdCgpKSpzfX0sX2dlbmVyYXRlUG9zaXRpb246ZnVuY3Rpb24odCl7dmFyIGkscyxuPXRoaXMub3B0aW9ucyxhPXQucGFnZVgsbz10LnBhZ2VZLHI9XCJhYnNvbHV0ZVwiIT09dGhpcy5jc3NQb3NpdGlvbnx8dGhpcy5zY3JvbGxQYXJlbnRbMF0hPT10aGlzLmRvY3VtZW50WzBdJiZlLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKT90aGlzLnNjcm9sbFBhcmVudDp0aGlzLm9mZnNldFBhcmVudCxoPS8oaHRtbHxib2R5KS9pLnRlc3QoclswXS50YWdOYW1lKTtyZXR1cm5cInJlbGF0aXZlXCIhPT10aGlzLmNzc1Bvc2l0aW9ufHx0aGlzLnNjcm9sbFBhcmVudFswXSE9PXRoaXMuZG9jdW1lbnRbMF0mJnRoaXMuc2Nyb2xsUGFyZW50WzBdIT09dGhpcy5vZmZzZXRQYXJlbnRbMF18fCh0aGlzLm9mZnNldC5yZWxhdGl2ZT10aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpKSx0aGlzLm9yaWdpbmFsUG9zaXRpb24mJih0aGlzLmNvbnRhaW5tZW50JiYodC5wYWdlWC10aGlzLm9mZnNldC5jbGljay5sZWZ0PHRoaXMuY29udGFpbm1lbnRbMF0mJihhPXRoaXMuY29udGFpbm1lbnRbMF0rdGhpcy5vZmZzZXQuY2xpY2subGVmdCksdC5wYWdlWS10aGlzLm9mZnNldC5jbGljay50b3A8dGhpcy5jb250YWlubWVudFsxXSYmKG89dGhpcy5jb250YWlubWVudFsxXSt0aGlzLm9mZnNldC5jbGljay50b3ApLHQucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdD50aGlzLmNvbnRhaW5tZW50WzJdJiYoYT10aGlzLmNvbnRhaW5tZW50WzJdK3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQpLHQucGFnZVktdGhpcy5vZmZzZXQuY2xpY2sudG9wPnRoaXMuY29udGFpbm1lbnRbM10mJihvPXRoaXMuY29udGFpbm1lbnRbM10rdGhpcy5vZmZzZXQuY2xpY2sudG9wKSksbi5ncmlkJiYoaT10aGlzLm9yaWdpbmFsUGFnZVkrTWF0aC5yb3VuZCgoby10aGlzLm9yaWdpbmFsUGFnZVkpL24uZ3JpZFsxXSkqbi5ncmlkWzFdLG89dGhpcy5jb250YWlubWVudD9pLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD49dGhpcy5jb250YWlubWVudFsxXSYmaS10aGlzLm9mZnNldC5jbGljay50b3A8PXRoaXMuY29udGFpbm1lbnRbM10/aTppLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD49dGhpcy5jb250YWlubWVudFsxXT9pLW4uZ3JpZFsxXTppK24uZ3JpZFsxXTppLHM9dGhpcy5vcmlnaW5hbFBhZ2VYK01hdGgucm91bmQoKGEtdGhpcy5vcmlnaW5hbFBhZ2VYKS9uLmdyaWRbMF0pKm4uZ3JpZFswXSxhPXRoaXMuY29udGFpbm1lbnQ/cy10aGlzLm9mZnNldC5jbGljay5sZWZ0Pj10aGlzLmNvbnRhaW5tZW50WzBdJiZzLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ8PXRoaXMuY29udGFpbm1lbnRbMl0/czpzLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+PXRoaXMuY29udGFpbm1lbnRbMF0/cy1uLmdyaWRbMF06cytuLmdyaWRbMF06cykpLHt0b3A6by10aGlzLm9mZnNldC5jbGljay50b3AtdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3ArKFwiZml4ZWRcIj09PXRoaXMuY3NzUG9zaXRpb24/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOmg/MDpyLnNjcm9sbFRvcCgpKSxsZWZ0OmEtdGhpcy5vZmZzZXQuY2xpY2subGVmdC10aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0LXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0KyhcImZpeGVkXCI9PT10aGlzLmNzc1Bvc2l0aW9uPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk6aD8wOnIuc2Nyb2xsTGVmdCgpKX19LF9yZWFycmFuZ2U6ZnVuY3Rpb24oZSx0LGkscyl7aT9pWzBdLmFwcGVuZENoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pOnQuaXRlbVswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyWzBdLFwiZG93blwiPT09dGhpcy5kaXJlY3Rpb24/dC5pdGVtWzBdOnQuaXRlbVswXS5uZXh0U2libGluZyksdGhpcy5jb3VudGVyPXRoaXMuY291bnRlcj8rK3RoaXMuY291bnRlcjoxO3ZhciBuPXRoaXMuY291bnRlcjt0aGlzLl9kZWxheShmdW5jdGlvbigpe249PT10aGlzLmNvdW50ZXImJnRoaXMucmVmcmVzaFBvc2l0aW9ucyghcyl9KX0sX2NsZWFyOmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gaShlLHQsaSl7cmV0dXJuIGZ1bmN0aW9uKHMpe2kuX3RyaWdnZXIoZSxzLHQuX3VpSGFzaCh0KSl9fXRoaXMucmV2ZXJ0aW5nPSExO3ZhciBzLG49W107aWYoIXRoaXMuX25vRmluYWxTb3J0JiZ0aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpLmxlbmd0aCYmdGhpcy5wbGFjZWhvbGRlci5iZWZvcmUodGhpcy5jdXJyZW50SXRlbSksdGhpcy5fbm9GaW5hbFNvcnQ9bnVsbCx0aGlzLmhlbHBlclswXT09PXRoaXMuY3VycmVudEl0ZW1bMF0pe2ZvcihzIGluIHRoaXMuX3N0b3JlZENTUykoXCJhdXRvXCI9PT10aGlzLl9zdG9yZWRDU1Nbc118fFwic3RhdGljXCI9PT10aGlzLl9zdG9yZWRDU1Nbc10pJiYodGhpcy5fc3RvcmVkQ1NTW3NdPVwiXCIpO3RoaXMuY3VycmVudEl0ZW0uY3NzKHRoaXMuX3N0b3JlZENTUykucmVtb3ZlQ2xhc3MoXCJ1aS1zb3J0YWJsZS1oZWxwZXJcIil9ZWxzZSB0aGlzLmN1cnJlbnRJdGVtLnNob3coKTtmb3IodGhpcy5mcm9tT3V0c2lkZSYmIXQmJm4ucHVzaChmdW5jdGlvbihlKXt0aGlzLl90cmlnZ2VyKFwicmVjZWl2ZVwiLGUsdGhpcy5fdWlIYXNoKHRoaXMuZnJvbU91dHNpZGUpKX0pLCF0aGlzLmZyb21PdXRzaWRlJiZ0aGlzLmRvbVBvc2l0aW9uLnByZXY9PT10aGlzLmN1cnJlbnRJdGVtLnByZXYoKS5ub3QoXCIudWktc29ydGFibGUtaGVscGVyXCIpWzBdJiZ0aGlzLmRvbVBvc2l0aW9uLnBhcmVudD09PXRoaXMuY3VycmVudEl0ZW0ucGFyZW50KClbMF18fHR8fG4ucHVzaChmdW5jdGlvbihlKXt0aGlzLl90cmlnZ2VyKFwidXBkYXRlXCIsZSx0aGlzLl91aUhhc2goKSl9KSx0aGlzIT09dGhpcy5jdXJyZW50Q29udGFpbmVyJiYodHx8KG4ucHVzaChmdW5jdGlvbihlKXt0aGlzLl90cmlnZ2VyKFwicmVtb3ZlXCIsZSx0aGlzLl91aUhhc2goKSl9KSxuLnB1c2goZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2UuX3RyaWdnZXIoXCJyZWNlaXZlXCIsdCx0aGlzLl91aUhhc2godGhpcykpfX0uY2FsbCh0aGlzLHRoaXMuY3VycmVudENvbnRhaW5lcikpLG4ucHVzaChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7ZS5fdHJpZ2dlcihcInVwZGF0ZVwiLHQsdGhpcy5fdWlIYXNoKHRoaXMpKX19LmNhbGwodGhpcyx0aGlzLmN1cnJlbnRDb250YWluZXIpKSkpLHM9dGhpcy5jb250YWluZXJzLmxlbmd0aC0xO3M+PTA7cy0tKXR8fG4ucHVzaChpKFwiZGVhY3RpdmF0ZVwiLHRoaXMsdGhpcy5jb250YWluZXJzW3NdKSksdGhpcy5jb250YWluZXJzW3NdLmNvbnRhaW5lckNhY2hlLm92ZXImJihuLnB1c2goaShcIm91dFwiLHRoaXMsdGhpcy5jb250YWluZXJzW3NdKSksdGhpcy5jb250YWluZXJzW3NdLmNvbnRhaW5lckNhY2hlLm92ZXI9MCk7aWYodGhpcy5zdG9yZWRDdXJzb3ImJih0aGlzLmRvY3VtZW50LmZpbmQoXCJib2R5XCIpLmNzcyhcImN1cnNvclwiLHRoaXMuc3RvcmVkQ3Vyc29yKSx0aGlzLnN0b3JlZFN0eWxlc2hlZXQucmVtb3ZlKCkpLHRoaXMuX3N0b3JlZE9wYWNpdHkmJnRoaXMuaGVscGVyLmNzcyhcIm9wYWNpdHlcIix0aGlzLl9zdG9yZWRPcGFjaXR5KSx0aGlzLl9zdG9yZWRaSW5kZXgmJnRoaXMuaGVscGVyLmNzcyhcInpJbmRleFwiLFwiYXV0b1wiPT09dGhpcy5fc3RvcmVkWkluZGV4P1wiXCI6dGhpcy5fc3RvcmVkWkluZGV4KSx0aGlzLmRyYWdnaW5nPSExLHR8fHRoaXMuX3RyaWdnZXIoXCJiZWZvcmVTdG9wXCIsZSx0aGlzLl91aUhhc2goKSksdGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pLHRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbHx8KHRoaXMuaGVscGVyWzBdIT09dGhpcy5jdXJyZW50SXRlbVswXSYmdGhpcy5oZWxwZXIucmVtb3ZlKCksdGhpcy5oZWxwZXI9bnVsbCksIXQpe2ZvcihzPTA7bi5sZW5ndGg+cztzKyspbltzXS5jYWxsKHRoaXMsZSk7dGhpcy5fdHJpZ2dlcihcInN0b3BcIixlLHRoaXMuX3VpSGFzaCgpKX1yZXR1cm4gdGhpcy5mcm9tT3V0c2lkZT0hMSwhdGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsfSxfdHJpZ2dlcjpmdW5jdGlvbigpe2UuV2lkZ2V0LnByb3RvdHlwZS5fdHJpZ2dlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk9PT0hMSYmdGhpcy5jYW5jZWwoKX0sX3VpSGFzaDpmdW5jdGlvbih0KXt2YXIgaT10fHx0aGlzO3JldHVybntoZWxwZXI6aS5oZWxwZXIscGxhY2Vob2xkZXI6aS5wbGFjZWhvbGRlcnx8ZShbXSkscG9zaXRpb246aS5wb3NpdGlvbixvcmlnaW5hbFBvc2l0aW9uOmkub3JpZ2luYWxQb3NpdGlvbixvZmZzZXQ6aS5wb3NpdGlvbkFicyxpdGVtOmkuY3VycmVudEl0ZW0sc2VuZGVyOnQ/dC5lbGVtZW50Om51bGx9fX0pLGUud2lkZ2V0KFwidWkuc3Bpbm5lclwiLHt2ZXJzaW9uOlwiMS4xMS40XCIsZGVmYXVsdEVsZW1lbnQ6XCI8aW5wdXQ+XCIsd2lkZ2V0RXZlbnRQcmVmaXg6XCJzcGluXCIsb3B0aW9uczp7Y3VsdHVyZTpudWxsLGljb25zOntkb3duOlwidWktaWNvbi10cmlhbmdsZS0xLXNcIix1cDpcInVpLWljb24tdHJpYW5nbGUtMS1uXCJ9LGluY3JlbWVudGFsOiEwLG1heDpudWxsLG1pbjpudWxsLG51bWJlckZvcm1hdDpudWxsLHBhZ2U6MTAsc3RlcDoxLGNoYW5nZTpudWxsLHNwaW46bnVsbCxzdGFydDpudWxsLHN0b3A6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpe3RoaXMuX3NldE9wdGlvbihcIm1heFwiLHRoaXMub3B0aW9ucy5tYXgpLHRoaXMuX3NldE9wdGlvbihcIm1pblwiLHRoaXMub3B0aW9ucy5taW4pLHRoaXMuX3NldE9wdGlvbihcInN0ZXBcIix0aGlzLm9wdGlvbnMuc3RlcCksXCJcIiE9PXRoaXMudmFsdWUoKSYmdGhpcy5fdmFsdWUodGhpcy5lbGVtZW50LnZhbCgpLCEwKSx0aGlzLl9kcmF3KCksdGhpcy5fb24odGhpcy5fZXZlbnRzKSx0aGlzLl9yZWZyZXNoKCksdGhpcy5fb24odGhpcy53aW5kb3cse2JlZm9yZXVubG9hZDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyKFwiYXV0b2NvbXBsZXRlXCIpfX0pfSxfZ2V0Q3JlYXRlT3B0aW9uczpmdW5jdGlvbigpe3ZhciB0PXt9LGk9dGhpcy5lbGVtZW50O3JldHVybiBlLmVhY2goW1wibWluXCIsXCJtYXhcIixcInN0ZXBcIl0sZnVuY3Rpb24oZSxzKXt2YXIgbj1pLmF0dHIocyk7dm9pZCAwIT09biYmbi5sZW5ndGgmJih0W3NdPW4pfSksdH0sX2V2ZW50czp7a2V5ZG93bjpmdW5jdGlvbihlKXt0aGlzLl9zdGFydChlKSYmdGhpcy5fa2V5ZG93bihlKSYmZS5wcmV2ZW50RGVmYXVsdCgpfSxrZXl1cDpcIl9zdG9wXCIsZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzPXRoaXMuZWxlbWVudC52YWwoKX0sYmx1cjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jYW5jZWxCbHVyPyhkZWxldGUgdGhpcy5jYW5jZWxCbHVyLHZvaWQgMCk6KHRoaXMuX3N0b3AoKSx0aGlzLl9yZWZyZXNoKCksdGhpcy5wcmV2aW91cyE9PXRoaXMuZWxlbWVudC52YWwoKSYmdGhpcy5fdHJpZ2dlcihcImNoYW5nZVwiLGUpLHZvaWQgMCl9LG1vdXNld2hlZWw6ZnVuY3Rpb24oZSx0KXtpZih0KXtpZighdGhpcy5zcGlubmluZyYmIXRoaXMuX3N0YXJ0KGUpKXJldHVybiExO3RoaXMuX3NwaW4oKHQ+MD8xOi0xKSp0aGlzLm9wdGlvbnMuc3RlcCxlKSxjbGVhclRpbWVvdXQodGhpcy5tb3VzZXdoZWVsVGltZXIpLHRoaXMubW91c2V3aGVlbFRpbWVyPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5zcGlubmluZyYmdGhpcy5fc3RvcChlKX0sMTAwKSxlLnByZXZlbnREZWZhdWx0KCl9fSxcIm1vdXNlZG93biAudWktc3Bpbm5lci1idXR0b25cIjpmdW5jdGlvbih0KXtmdW5jdGlvbiBpKCl7dmFyIGU9dGhpcy5lbGVtZW50WzBdPT09dGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50O2V8fCh0aGlzLmVsZW1lbnQuZm9jdXMoKSx0aGlzLnByZXZpb3VzPXMsdGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzPXN9KSl9dmFyIHM7cz10aGlzLmVsZW1lbnRbMF09PT10aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQ/dGhpcy5wcmV2aW91czp0aGlzLmVsZW1lbnQudmFsKCksdC5wcmV2ZW50RGVmYXVsdCgpLGkuY2FsbCh0aGlzKSx0aGlzLmNhbmNlbEJsdXI9ITAsdGhpcy5fZGVsYXkoZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5jYW5jZWxCbHVyLGkuY2FsbCh0aGlzKX0pLHRoaXMuX3N0YXJ0KHQpIT09ITEmJnRoaXMuX3JlcGVhdChudWxsLGUodC5jdXJyZW50VGFyZ2V0KS5oYXNDbGFzcyhcInVpLXNwaW5uZXItdXBcIik/MTotMSx0KX0sXCJtb3VzZXVwIC51aS1zcGlubmVyLWJ1dHRvblwiOlwiX3N0b3BcIixcIm1vdXNlZW50ZXIgLnVpLXNwaW5uZXItYnV0dG9uXCI6ZnVuY3Rpb24odCl7cmV0dXJuIGUodC5jdXJyZW50VGFyZ2V0KS5oYXNDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKT90aGlzLl9zdGFydCh0KT09PSExPyExOih0aGlzLl9yZXBlYXQobnVsbCxlKHQuY3VycmVudFRhcmdldCkuaGFzQ2xhc3MoXCJ1aS1zcGlubmVyLXVwXCIpPzE6LTEsdCksdm9pZCAwKTp2b2lkIDB9LFwibW91c2VsZWF2ZSAudWktc3Bpbm5lci1idXR0b25cIjpcIl9zdG9wXCJ9LF9kcmF3OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy51aVNwaW5uZXI9dGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktc3Bpbm5lci1pbnB1dFwiKS5hdHRyKFwiYXV0b2NvbXBsZXRlXCIsXCJvZmZcIikud3JhcCh0aGlzLl91aVNwaW5uZXJIdG1sKCkpLnBhcmVudCgpLmFwcGVuZCh0aGlzLl9idXR0b25IdG1sKCkpO3RoaXMuZWxlbWVudC5hdHRyKFwicm9sZVwiLFwic3BpbmJ1dHRvblwiKSx0aGlzLmJ1dHRvbnM9ZS5maW5kKFwiLnVpLXNwaW5uZXItYnV0dG9uXCIpLmF0dHIoXCJ0YWJJbmRleFwiLC0xKS5idXR0b24oKS5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci1hbGxcIiksdGhpcy5idXR0b25zLmhlaWdodCgpPk1hdGguY2VpbCguNSplLmhlaWdodCgpKSYmZS5oZWlnaHQoKT4wJiZlLmhlaWdodChlLmhlaWdodCgpKSx0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMuZGlzYWJsZSgpfSxfa2V5ZG93bjpmdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnMscz1lLnVpLmtleUNvZGU7c3dpdGNoKHQua2V5Q29kZSl7Y2FzZSBzLlVQOnJldHVybiB0aGlzLl9yZXBlYXQobnVsbCwxLHQpLCEwO2Nhc2Ugcy5ET1dOOnJldHVybiB0aGlzLl9yZXBlYXQobnVsbCwtMSx0KSwhMDtjYXNlIHMuUEFHRV9VUDpyZXR1cm4gdGhpcy5fcmVwZWF0KG51bGwsaS5wYWdlLHQpLCEwO2Nhc2Ugcy5QQUdFX0RPV046cmV0dXJuIHRoaXMuX3JlcGVhdChudWxsLC1pLnBhZ2UsdCksITB9cmV0dXJuITF9LF91aVNwaW5uZXJIdG1sOmZ1bmN0aW9uKCl7cmV0dXJuXCI8c3BhbiBjbGFzcz0ndWktc3Bpbm5lciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCc+PC9zcGFuPlwifSxfYnV0dG9uSHRtbDpmdW5jdGlvbigpe3JldHVyblwiPGEgY2xhc3M9J3VpLXNwaW5uZXItYnV0dG9uIHVpLXNwaW5uZXItdXAgdWktY29ybmVyLXRyJz48c3BhbiBjbGFzcz0ndWktaWNvbiBcIit0aGlzLm9wdGlvbnMuaWNvbnMudXArXCInPiYjOTY1MDs8L3NwYW4+XCIrXCI8L2E+XCIrXCI8YSBjbGFzcz0ndWktc3Bpbm5lci1idXR0b24gdWktc3Bpbm5lci1kb3duIHVpLWNvcm5lci1icic+XCIrXCI8c3BhbiBjbGFzcz0ndWktaWNvbiBcIit0aGlzLm9wdGlvbnMuaWNvbnMuZG93bitcIic+JiM5NjYwOzwvc3Bhbj5cIitcIjwvYT5cIn0sX3N0YXJ0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwaW5uaW5nfHx0aGlzLl90cmlnZ2VyKFwic3RhcnRcIixlKSE9PSExPyh0aGlzLmNvdW50ZXJ8fCh0aGlzLmNvdW50ZXI9MSksdGhpcy5zcGlubmluZz0hMCwhMCk6ITF9LF9yZXBlYXQ6ZnVuY3Rpb24oZSx0LGkpe2U9ZXx8NTAwLGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLnRpbWVyPXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5fcmVwZWF0KDQwLHQsaSl9LGUpLHRoaXMuX3NwaW4odCp0aGlzLm9wdGlvbnMuc3RlcCxpKX0sX3NwaW46ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLnZhbHVlKCl8fDA7dGhpcy5jb3VudGVyfHwodGhpcy5jb3VudGVyPTEpLGk9dGhpcy5fYWRqdXN0VmFsdWUoaStlKnRoaXMuX2luY3JlbWVudCh0aGlzLmNvdW50ZXIpKSx0aGlzLnNwaW5uaW5nJiZ0aGlzLl90cmlnZ2VyKFwic3BpblwiLHQse3ZhbHVlOml9KT09PSExfHwodGhpcy5fdmFsdWUoaSksdGhpcy5jb3VudGVyKyspfSxfaW5jcmVtZW50OmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMub3B0aW9ucy5pbmNyZW1lbnRhbDtyZXR1cm4gaT9lLmlzRnVuY3Rpb24oaSk/aSh0KTpNYXRoLmZsb29yKHQqdCp0LzVlNC10KnQvNTAwKzE3KnQvMjAwKzEpOjF9LF9wcmVjaXNpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9wcmVjaXNpb25PZih0aGlzLm9wdGlvbnMuc3RlcCk7cmV0dXJuIG51bGwhPT10aGlzLm9wdGlvbnMubWluJiYoZT1NYXRoLm1heChlLHRoaXMuX3ByZWNpc2lvbk9mKHRoaXMub3B0aW9ucy5taW4pKSksZX0sX3ByZWNpc2lvbk9mOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIrZSxpPXQuaW5kZXhPZihcIi5cIik7cmV0dXJuLTE9PT1pPzA6dC5sZW5ndGgtaS0xfSxfYWRqdXN0VmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQsaSxzPXRoaXMub3B0aW9ucztyZXR1cm4gdD1udWxsIT09cy5taW4/cy5taW46MCxpPWUtdCxpPU1hdGgucm91bmQoaS9zLnN0ZXApKnMuc3RlcCxlPXQraSxlPXBhcnNlRmxvYXQoZS50b0ZpeGVkKHRoaXMuX3ByZWNpc2lvbigpKSksbnVsbCE9PXMubWF4JiZlPnMubWF4P3MubWF4Om51bGwhPT1zLm1pbiYmcy5taW4+ZT9zLm1pbjplfSxfc3RvcDpmdW5jdGlvbihlKXt0aGlzLnNwaW5uaW5nJiYoY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLGNsZWFyVGltZW91dCh0aGlzLm1vdXNld2hlZWxUaW1lciksdGhpcy5jb3VudGVyPTAsdGhpcy5zcGlubmluZz0hMSx0aGlzLl90cmlnZ2VyKFwic3RvcFwiLGUpKX0sX3NldE9wdGlvbjpmdW5jdGlvbihlLHQpe2lmKFwiY3VsdHVyZVwiPT09ZXx8XCJudW1iZXJGb3JtYXRcIj09PWUpe3ZhciBpPXRoaXMuX3BhcnNlKHRoaXMuZWxlbWVudC52YWwoKSk7cmV0dXJuIHRoaXMub3B0aW9uc1tlXT10LHRoaXMuZWxlbWVudC52YWwodGhpcy5fZm9ybWF0KGkpKSx2b2lkIDB9KFwibWF4XCI9PT1lfHxcIm1pblwiPT09ZXx8XCJzdGVwXCI9PT1lKSYmXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PXRoaXMuX3BhcnNlKHQpKSxcImljb25zXCI9PT1lJiYodGhpcy5idXR0b25zLmZpcnN0KCkuZmluZChcIi51aS1pY29uXCIpLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5pY29ucy51cCkuYWRkQ2xhc3ModC51cCksdGhpcy5idXR0b25zLmxhc3QoKS5maW5kKFwiLnVpLWljb25cIikucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmljb25zLmRvd24pLmFkZENsYXNzKHQuZG93bikpLHRoaXMuX3N1cGVyKGUsdCksXCJkaXNhYmxlZFwiPT09ZSYmKHRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCEhdCksdGhpcy5lbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiLCEhdCksdGhpcy5idXR0b25zLmJ1dHRvbih0P1wiZGlzYWJsZVwiOlwiZW5hYmxlXCIpKX0sX3NldE9wdGlvbnM6aChmdW5jdGlvbihlKXt0aGlzLl9zdXBlcihlKX0pLF9wYXJzZTpmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZSYmXCJcIiE9PWUmJihlPXdpbmRvdy5HbG9iYWxpemUmJnRoaXMub3B0aW9ucy5udW1iZXJGb3JtYXQ/R2xvYmFsaXplLnBhcnNlRmxvYXQoZSwxMCx0aGlzLm9wdGlvbnMuY3VsdHVyZSk6K2UpLFwiXCI9PT1lfHxpc05hTihlKT9udWxsOmV9LF9mb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuXCJcIj09PWU/XCJcIjp3aW5kb3cuR2xvYmFsaXplJiZ0aGlzLm9wdGlvbnMubnVtYmVyRm9ybWF0P0dsb2JhbGl6ZS5mb3JtYXQoZSx0aGlzLm9wdGlvbnMubnVtYmVyRm9ybWF0LHRoaXMub3B0aW9ucy5jdWx0dXJlKTplfSxfcmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hdHRyKHtcImFyaWEtdmFsdWVtaW5cIjp0aGlzLm9wdGlvbnMubWluLFwiYXJpYS12YWx1ZW1heFwiOnRoaXMub3B0aW9ucy5tYXgsXCJhcmlhLXZhbHVlbm93XCI6dGhpcy5fcGFyc2UodGhpcy5lbGVtZW50LnZhbCgpKX0pfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy52YWx1ZSgpO3JldHVybiBudWxsPT09ZT8hMTplPT09dGhpcy5fYWRqdXN0VmFsdWUoZSl9LF92YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBpO1wiXCIhPT1lJiYoaT10aGlzLl9wYXJzZShlKSxudWxsIT09aSYmKHR8fChpPXRoaXMuX2FkanVzdFZhbHVlKGkpKSxlPXRoaXMuX2Zvcm1hdChpKSkpLHRoaXMuZWxlbWVudC52YWwoZSksdGhpcy5fcmVmcmVzaCgpfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXNwaW5uZXItaW5wdXRcIikucHJvcChcImRpc2FibGVkXCIsITEpLnJlbW92ZUF0dHIoXCJhdXRvY29tcGxldGVcIikucmVtb3ZlQXR0cihcInJvbGVcIikucmVtb3ZlQXR0cihcImFyaWEtdmFsdWVtaW5cIikucmVtb3ZlQXR0cihcImFyaWEtdmFsdWVtYXhcIikucmVtb3ZlQXR0cihcImFyaWEtdmFsdWVub3dcIiksdGhpcy51aVNwaW5uZXIucmVwbGFjZVdpdGgodGhpcy5lbGVtZW50KX0sc3RlcFVwOmgoZnVuY3Rpb24oZSl7dGhpcy5fc3RlcFVwKGUpfSksX3N0ZXBVcDpmdW5jdGlvbihlKXt0aGlzLl9zdGFydCgpJiYodGhpcy5fc3BpbigoZXx8MSkqdGhpcy5vcHRpb25zLnN0ZXApLHRoaXMuX3N0b3AoKSl9LHN0ZXBEb3duOmgoZnVuY3Rpb24oZSl7dGhpcy5fc3RlcERvd24oZSl9KSxfc3RlcERvd246ZnVuY3Rpb24oZSl7dGhpcy5fc3RhcnQoKSYmKHRoaXMuX3NwaW4oKGV8fDEpKi10aGlzLm9wdGlvbnMuc3RlcCksdGhpcy5fc3RvcCgpKX0scGFnZVVwOmgoZnVuY3Rpb24oZSl7dGhpcy5fc3RlcFVwKChlfHwxKSp0aGlzLm9wdGlvbnMucGFnZSl9KSxwYWdlRG93bjpoKGZ1bmN0aW9uKGUpe3RoaXMuX3N0ZXBEb3duKChlfHwxKSp0aGlzLm9wdGlvbnMucGFnZSl9KSx2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaCh0aGlzLl92YWx1ZSkuY2FsbCh0aGlzLGUpLHZvaWQgMCk6dGhpcy5fcGFyc2UodGhpcy5lbGVtZW50LnZhbCgpKX0sd2lkZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWlTcGlubmVyfX0pLGUud2lkZ2V0KFwidWkudGFic1wiLHt2ZXJzaW9uOlwiMS4xMS40XCIsZGVsYXk6MzAwLG9wdGlvbnM6e2FjdGl2ZTpudWxsLGNvbGxhcHNpYmxlOiExLGV2ZW50OlwiY2xpY2tcIixoZWlnaHRTdHlsZTpcImNvbnRlbnRcIixoaWRlOm51bGwsc2hvdzpudWxsLGFjdGl2YXRlOm51bGwsYmVmb3JlQWN0aXZhdGU6bnVsbCxiZWZvcmVMb2FkOm51bGwsbG9hZDpudWxsfSxfaXNMb2NhbDpmdW5jdGlvbigpe3ZhciBlPS8jLiokLztyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGksczt0PXQuY2xvbmVOb2RlKCExKSxpPXQuaHJlZi5yZXBsYWNlKGUsXCJcIikscz1sb2NhdGlvbi5ocmVmLnJlcGxhY2UoZSxcIlwiKTt0cnl7aT1kZWNvZGVVUklDb21wb25lbnQoaSl9Y2F0Y2gobil7fXRyeXtzPWRlY29kZVVSSUNvbXBvbmVudChzKX1jYXRjaChuKXt9cmV0dXJuIHQuaGFzaC5sZW5ndGg+MSYmaT09PXN9fSgpLF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGk9dGhpcy5vcHRpb25zO3RoaXMucnVubmluZz0hMSx0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsXCIpLnRvZ2dsZUNsYXNzKFwidWktdGFicy1jb2xsYXBzaWJsZVwiLGkuY29sbGFwc2libGUpLHRoaXMuX3Byb2Nlc3NUYWJzKCksaS5hY3RpdmU9dGhpcy5faW5pdGlhbEFjdGl2ZSgpLGUuaXNBcnJheShpLmRpc2FibGVkKSYmKGkuZGlzYWJsZWQ9ZS51bmlxdWUoaS5kaXNhYmxlZC5jb25jYXQoZS5tYXAodGhpcy50YWJzLmZpbHRlcihcIi51aS1zdGF0ZS1kaXNhYmxlZFwiKSxmdW5jdGlvbihlKXtyZXR1cm4gdC50YWJzLmluZGV4KGUpfSkpKS5zb3J0KCkpLHRoaXMuYWN0aXZlPXRoaXMub3B0aW9ucy5hY3RpdmUhPT0hMSYmdGhpcy5hbmNob3JzLmxlbmd0aD90aGlzLl9maW5kQWN0aXZlKGkuYWN0aXZlKTplKCksdGhpcy5fcmVmcmVzaCgpLHRoaXMuYWN0aXZlLmxlbmd0aCYmdGhpcy5sb2FkKGkuYWN0aXZlKX0sX2luaXRpYWxBY3RpdmU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuYWN0aXZlLGk9dGhpcy5vcHRpb25zLmNvbGxhcHNpYmxlLHM9bG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSk7cmV0dXJuIG51bGw9PT10JiYocyYmdGhpcy50YWJzLmVhY2goZnVuY3Rpb24oaSxuKXtyZXR1cm4gZShuKS5hdHRyKFwiYXJpYS1jb250cm9sc1wiKT09PXM/KHQ9aSwhMSk6dm9pZCAwfSksbnVsbD09PXQmJih0PXRoaXMudGFicy5pbmRleCh0aGlzLnRhYnMuZmlsdGVyKFwiLnVpLXRhYnMtYWN0aXZlXCIpKSksKG51bGw9PT10fHwtMT09PXQpJiYodD10aGlzLnRhYnMubGVuZ3RoPzA6ITEpKSx0IT09ITEmJih0PXRoaXMudGFicy5pbmRleCh0aGlzLnRhYnMuZXEodCkpLC0xPT09dCYmKHQ9aT8hMTowKSksIWkmJnQ9PT0hMSYmdGhpcy5hbmNob3JzLmxlbmd0aCYmKHQ9MCksdH0sX2dldENyZWF0ZUV2ZW50RGF0YTpmdW5jdGlvbigpe3JldHVybnt0YWI6dGhpcy5hY3RpdmUscGFuZWw6dGhpcy5hY3RpdmUubGVuZ3RoP3RoaXMuX2dldFBhbmVsRm9yVGFiKHRoaXMuYWN0aXZlKTplKCl9fSxfdGFiS2V5ZG93bjpmdW5jdGlvbih0KXt2YXIgaT1lKHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCkuY2xvc2VzdChcImxpXCIpLHM9dGhpcy50YWJzLmluZGV4KGkpLG49ITA7aWYoIXRoaXMuX2hhbmRsZVBhZ2VOYXYodCkpe3N3aXRjaCh0LmtleUNvZGUpe2Nhc2UgZS51aS5rZXlDb2RlLlJJR0hUOmNhc2UgZS51aS5rZXlDb2RlLkRPV046cysrO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLlVQOmNhc2UgZS51aS5rZXlDb2RlLkxFRlQ6bj0hMSxzLS07YnJlYWs7Y2FzZSBlLnVpLmtleUNvZGUuRU5EOnM9dGhpcy5hbmNob3JzLmxlbmd0aC0xO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLkhPTUU6cz0wO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLlNQQUNFOnJldHVybiB0LnByZXZlbnREZWZhdWx0KCksY2xlYXJUaW1lb3V0KHRoaXMuYWN0aXZhdGluZyksdGhpcy5fYWN0aXZhdGUocyksdm9pZCAwO2Nhc2UgZS51aS5rZXlDb2RlLkVOVEVSOnJldHVybiB0LnByZXZlbnREZWZhdWx0KCksY2xlYXJUaW1lb3V0KHRoaXMuYWN0aXZhdGluZyksdGhpcy5fYWN0aXZhdGUocz09PXRoaXMub3B0aW9ucy5hY3RpdmU/ITE6cyksdm9pZCAwO2RlZmF1bHQ6cmV0dXJufXQucHJldmVudERlZmF1bHQoKSxjbGVhclRpbWVvdXQodGhpcy5hY3RpdmF0aW5nKSxzPXRoaXMuX2ZvY3VzTmV4dFRhYihzLG4pLHQuY3RybEtleXx8dC5tZXRhS2V5fHwoaS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLFwiZmFsc2VcIiksdGhpcy50YWJzLmVxKHMpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsXCJ0cnVlXCIpLHRoaXMuYWN0aXZhdGluZz10aGlzLl9kZWxheShmdW5jdGlvbigpe3RoaXMub3B0aW9uKFwiYWN0aXZlXCIscyl9LHRoaXMuZGVsYXkpKX19LF9wYW5lbEtleWRvd246ZnVuY3Rpb24odCl7dGhpcy5faGFuZGxlUGFnZU5hdih0KXx8dC5jdHJsS2V5JiZ0LmtleUNvZGU9PT1lLnVpLmtleUNvZGUuVVAmJih0LnByZXZlbnREZWZhdWx0KCksdGhpcy5hY3RpdmUuZm9jdXMoKSl9LF9oYW5kbGVQYWdlTmF2OmZ1bmN0aW9uKHQpe3JldHVybiB0LmFsdEtleSYmdC5rZXlDb2RlPT09ZS51aS5rZXlDb2RlLlBBR0VfVVA/KHRoaXMuX2FjdGl2YXRlKHRoaXMuX2ZvY3VzTmV4dFRhYih0aGlzLm9wdGlvbnMuYWN0aXZlLTEsITEpKSwhMCk6dC5hbHRLZXkmJnQua2V5Q29kZT09PWUudWkua2V5Q29kZS5QQUdFX0RPV04/KHRoaXMuX2FjdGl2YXRlKHRoaXMuX2ZvY3VzTmV4dFRhYih0aGlzLm9wdGlvbnMuYWN0aXZlKzEsITApKSwhMCk6dm9pZCAwfSxfZmluZE5leHRUYWI6ZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBzKCl7cmV0dXJuIHQ+biYmKHQ9MCksMD50JiYodD1uKSx0fWZvcih2YXIgbj10aGlzLnRhYnMubGVuZ3RoLTE7LTEhPT1lLmluQXJyYXkocygpLHRoaXMub3B0aW9ucy5kaXNhYmxlZCk7KXQ9aT90KzE6dC0xO3JldHVybiB0fSxfZm9jdXNOZXh0VGFiOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9dGhpcy5fZmluZE5leHRUYWIoZSx0KSx0aGlzLnRhYnMuZXEoZSkuZm9jdXMoKSxlfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJhY3RpdmVcIj09PWU/KHRoaXMuX2FjdGl2YXRlKHQpLHZvaWQgMCk6XCJkaXNhYmxlZFwiPT09ZT8odGhpcy5fc2V0dXBEaXNhYmxlZCh0KSx2b2lkIDApOih0aGlzLl9zdXBlcihlLHQpLFwiY29sbGFwc2libGVcIj09PWUmJih0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoXCJ1aS10YWJzLWNvbGxhcHNpYmxlXCIsdCksdHx8dGhpcy5vcHRpb25zLmFjdGl2ZSE9PSExfHx0aGlzLl9hY3RpdmF0ZSgwKSksXCJldmVudFwiPT09ZSYmdGhpcy5fc2V0dXBFdmVudHModCksXCJoZWlnaHRTdHlsZVwiPT09ZSYmdGhpcy5fc2V0dXBIZWlnaHRTdHlsZSh0KSx2b2lkIDApfSxfc2FuaXRpemVTZWxlY3RvcjpmdW5jdGlvbihlKXtyZXR1cm4gZT9lLnJlcGxhY2UoL1shXCIkJSYnKCkqKywuXFwvOjs8PT4/QFxcW1xcXVxcXmB7fH1+XS9nLFwiXFxcXCQmXCIpOlwiXCJ9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMsaT10aGlzLnRhYmxpc3QuY2hpbGRyZW4oXCI6aGFzKGFbaHJlZl0pXCIpO3QuZGlzYWJsZWQ9ZS5tYXAoaS5maWx0ZXIoXCIudWktc3RhdGUtZGlzYWJsZWRcIiksZnVuY3Rpb24oZSl7cmV0dXJuIGkuaW5kZXgoZSl9KSx0aGlzLl9wcm9jZXNzVGFicygpLHQuYWN0aXZlIT09ITEmJnRoaXMuYW5jaG9ycy5sZW5ndGg/dGhpcy5hY3RpdmUubGVuZ3RoJiYhZS5jb250YWlucyh0aGlzLnRhYmxpc3RbMF0sdGhpcy5hY3RpdmVbMF0pP3RoaXMudGFicy5sZW5ndGg9PT10LmRpc2FibGVkLmxlbmd0aD8odC5hY3RpdmU9ITEsdGhpcy5hY3RpdmU9ZSgpKTp0aGlzLl9hY3RpdmF0ZSh0aGlzLl9maW5kTmV4dFRhYihNYXRoLm1heCgwLHQuYWN0aXZlLTEpLCExKSk6dC5hY3RpdmU9dGhpcy50YWJzLmluZGV4KHRoaXMuYWN0aXZlKToodC5hY3RpdmU9ITEsdGhpcy5hY3RpdmU9ZSgpKSx0aGlzLl9yZWZyZXNoKCl9LF9yZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5fc2V0dXBEaXNhYmxlZCh0aGlzLm9wdGlvbnMuZGlzYWJsZWQpLHRoaXMuX3NldHVwRXZlbnRzKHRoaXMub3B0aW9ucy5ldmVudCksdGhpcy5fc2V0dXBIZWlnaHRTdHlsZSh0aGlzLm9wdGlvbnMuaGVpZ2h0U3R5bGUpLHRoaXMudGFicy5ub3QodGhpcy5hY3RpdmUpLmF0dHIoe1wiYXJpYS1zZWxlY3RlZFwiOlwiZmFsc2VcIixcImFyaWEtZXhwYW5kZWRcIjpcImZhbHNlXCIsdGFiSW5kZXg6LTF9KSx0aGlzLnBhbmVscy5ub3QodGhpcy5fZ2V0UGFuZWxGb3JUYWIodGhpcy5hY3RpdmUpKS5oaWRlKCkuYXR0cih7XCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwifSksdGhpcy5hY3RpdmUubGVuZ3RoPyh0aGlzLmFjdGl2ZS5hZGRDbGFzcyhcInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiKS5hdHRyKHtcImFyaWEtc2VsZWN0ZWRcIjpcInRydWVcIixcImFyaWEtZXhwYW5kZWRcIjpcInRydWVcIix0YWJJbmRleDowfSksdGhpcy5fZ2V0UGFuZWxGb3JUYWIodGhpcy5hY3RpdmUpLnNob3coKS5hdHRyKHtcImFyaWEtaGlkZGVuXCI6XCJmYWxzZVwifSkpOnRoaXMudGFicy5lcSgwKS5hdHRyKFwidGFiSW5kZXhcIiwwKX0sX3Byb2Nlc3NUYWJzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPXRoaXMudGFicyxzPXRoaXMuYW5jaG9ycyxuPXRoaXMucGFuZWxzO1xudGhpcy50YWJsaXN0PXRoaXMuX2dldExpc3QoKS5hZGRDbGFzcyhcInVpLXRhYnMtbmF2IHVpLWhlbHBlci1yZXNldCB1aS1oZWxwZXItY2xlYXJmaXggdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsXCIpLmF0dHIoXCJyb2xlXCIsXCJ0YWJsaXN0XCIpLmRlbGVnYXRlKFwiPiBsaVwiLFwibW91c2Vkb3duXCIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbih0KXtlKHRoaXMpLmlzKFwiLnVpLXN0YXRlLWRpc2FibGVkXCIpJiZ0LnByZXZlbnREZWZhdWx0KCl9KS5kZWxlZ2F0ZShcIi51aS10YWJzLWFuY2hvclwiLFwiZm9jdXNcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7ZSh0aGlzKS5jbG9zZXN0KFwibGlcIikuaXMoXCIudWktc3RhdGUtZGlzYWJsZWRcIikmJnRoaXMuYmx1cigpfSksdGhpcy50YWJzPXRoaXMudGFibGlzdC5maW5kKFwiPiBsaTpoYXMoYVtocmVmXSlcIikuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci10b3BcIikuYXR0cih7cm9sZTpcInRhYlwiLHRhYkluZGV4Oi0xfSksdGhpcy5hbmNob3JzPXRoaXMudGFicy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZShcImFcIix0aGlzKVswXX0pLmFkZENsYXNzKFwidWktdGFicy1hbmNob3JcIikuYXR0cih7cm9sZTpcInByZXNlbnRhdGlvblwiLHRhYkluZGV4Oi0xfSksdGhpcy5wYW5lbHM9ZSgpLHRoaXMuYW5jaG9ycy5lYWNoKGZ1bmN0aW9uKGkscyl7dmFyIG4sYSxvLHI9ZShzKS51bmlxdWVJZCgpLmF0dHIoXCJpZFwiKSxoPWUocykuY2xvc2VzdChcImxpXCIpLGw9aC5hdHRyKFwiYXJpYS1jb250cm9sc1wiKTt0Ll9pc0xvY2FsKHMpPyhuPXMuaGFzaCxvPW4uc3Vic3RyaW5nKDEpLGE9dC5lbGVtZW50LmZpbmQodC5fc2FuaXRpemVTZWxlY3RvcihuKSkpOihvPWguYXR0cihcImFyaWEtY29udHJvbHNcIil8fGUoe30pLnVuaXF1ZUlkKClbMF0uaWQsbj1cIiNcIitvLGE9dC5lbGVtZW50LmZpbmQobiksYS5sZW5ndGh8fChhPXQuX2NyZWF0ZVBhbmVsKG8pLGEuaW5zZXJ0QWZ0ZXIodC5wYW5lbHNbaS0xXXx8dC50YWJsaXN0KSksYS5hdHRyKFwiYXJpYS1saXZlXCIsXCJwb2xpdGVcIikpLGEubGVuZ3RoJiYodC5wYW5lbHM9dC5wYW5lbHMuYWRkKGEpKSxsJiZoLmRhdGEoXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIixsKSxoLmF0dHIoe1wiYXJpYS1jb250cm9sc1wiOm8sXCJhcmlhLWxhYmVsbGVkYnlcIjpyfSksYS5hdHRyKFwiYXJpYS1sYWJlbGxlZGJ5XCIscil9KSx0aGlzLnBhbmVscy5hZGRDbGFzcyhcInVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbVwiKS5hdHRyKFwicm9sZVwiLFwidGFicGFuZWxcIiksaSYmKHRoaXMuX29mZihpLm5vdCh0aGlzLnRhYnMpKSx0aGlzLl9vZmYocy5ub3QodGhpcy5hbmNob3JzKSksdGhpcy5fb2ZmKG4ubm90KHRoaXMucGFuZWxzKSkpfSxfZ2V0TGlzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRhYmxpc3R8fHRoaXMuZWxlbWVudC5maW5kKFwib2wsdWxcIikuZXEoMCl9LF9jcmVhdGVQYW5lbDpmdW5jdGlvbih0KXtyZXR1cm4gZShcIjxkaXY+XCIpLmF0dHIoXCJpZFwiLHQpLmFkZENsYXNzKFwidWktdGFicy1wYW5lbCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tXCIpLmRhdGEoXCJ1aS10YWJzLWRlc3Ryb3lcIiwhMCl9LF9zZXR1cERpc2FibGVkOmZ1bmN0aW9uKHQpe2UuaXNBcnJheSh0KSYmKHQubGVuZ3RoP3QubGVuZ3RoPT09dGhpcy5hbmNob3JzLmxlbmd0aCYmKHQ9ITApOnQ9ITEpO2Zvcih2YXIgaSxzPTA7aT10aGlzLnRhYnNbc107cysrKXQ9PT0hMHx8LTEhPT1lLmluQXJyYXkocyx0KT9lKGkpLmFkZENsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIikuYXR0cihcImFyaWEtZGlzYWJsZWRcIixcInRydWVcIik6ZShpKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWRpc2FibGVkXCIpO3RoaXMub3B0aW9ucy5kaXNhYmxlZD10fSxfc2V0dXBFdmVudHM6ZnVuY3Rpb24odCl7dmFyIGk9e307dCYmZS5lYWNoKHQuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGUsdCl7aVt0XT1cIl9ldmVudEhhbmRsZXJcIn0pLHRoaXMuX29mZih0aGlzLmFuY2hvcnMuYWRkKHRoaXMudGFicykuYWRkKHRoaXMucGFuZWxzKSksdGhpcy5fb24oITAsdGhpcy5hbmNob3JzLHtjbGljazpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9fSksdGhpcy5fb24odGhpcy5hbmNob3JzLGkpLHRoaXMuX29uKHRoaXMudGFicyx7a2V5ZG93bjpcIl90YWJLZXlkb3duXCJ9KSx0aGlzLl9vbih0aGlzLnBhbmVscyx7a2V5ZG93bjpcIl9wYW5lbEtleWRvd25cIn0pLHRoaXMuX2ZvY3VzYWJsZSh0aGlzLnRhYnMpLHRoaXMuX2hvdmVyYWJsZSh0aGlzLnRhYnMpfSxfc2V0dXBIZWlnaHRTdHlsZTpmdW5jdGlvbih0KXt2YXIgaSxzPXRoaXMuZWxlbWVudC5wYXJlbnQoKTtcImZpbGxcIj09PXQ/KGk9cy5oZWlnaHQoKSxpLT10aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKS10aGlzLmVsZW1lbnQuaGVpZ2h0KCksdGhpcy5lbGVtZW50LnNpYmxpbmdzKFwiOnZpc2libGVcIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcykscz10LmNzcyhcInBvc2l0aW9uXCIpO1wiYWJzb2x1dGVcIiE9PXMmJlwiZml4ZWRcIiE9PXMmJihpLT10Lm91dGVySGVpZ2h0KCEwKSl9KSx0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKS5ub3QodGhpcy5wYW5lbHMpLmVhY2goZnVuY3Rpb24oKXtpLT1lKHRoaXMpLm91dGVySGVpZ2h0KCEwKX0pLHRoaXMucGFuZWxzLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLmhlaWdodChNYXRoLm1heCgwLGktZSh0aGlzKS5pbm5lckhlaWdodCgpK2UodGhpcykuaGVpZ2h0KCkpKX0pLmNzcyhcIm92ZXJmbG93XCIsXCJhdXRvXCIpKTpcImF1dG9cIj09PXQmJihpPTAsdGhpcy5wYW5lbHMuZWFjaChmdW5jdGlvbigpe2k9TWF0aC5tYXgoaSxlKHRoaXMpLmhlaWdodChcIlwiKS5oZWlnaHQoKSl9KS5oZWlnaHQoaSkpfSxfZXZlbnRIYW5kbGVyOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMub3B0aW9ucyxzPXRoaXMuYWN0aXZlLG49ZSh0LmN1cnJlbnRUYXJnZXQpLGE9bi5jbG9zZXN0KFwibGlcIiksbz1hWzBdPT09c1swXSxyPW8mJmkuY29sbGFwc2libGUsaD1yP2UoKTp0aGlzLl9nZXRQYW5lbEZvclRhYihhKSxsPXMubGVuZ3RoP3RoaXMuX2dldFBhbmVsRm9yVGFiKHMpOmUoKSx1PXtvbGRUYWI6cyxvbGRQYW5lbDpsLG5ld1RhYjpyP2UoKTphLG5ld1BhbmVsOmh9O3QucHJldmVudERlZmF1bHQoKSxhLmhhc0NsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIil8fGEuaGFzQ2xhc3MoXCJ1aS10YWJzLWxvYWRpbmdcIil8fHRoaXMucnVubmluZ3x8byYmIWkuY29sbGFwc2libGV8fHRoaXMuX3RyaWdnZXIoXCJiZWZvcmVBY3RpdmF0ZVwiLHQsdSk9PT0hMXx8KGkuYWN0aXZlPXI/ITE6dGhpcy50YWJzLmluZGV4KGEpLHRoaXMuYWN0aXZlPW8/ZSgpOmEsdGhpcy54aHImJnRoaXMueGhyLmFib3J0KCksbC5sZW5ndGh8fGgubGVuZ3RofHxlLmVycm9yKFwialF1ZXJ5IFVJIFRhYnM6IE1pc21hdGNoaW5nIGZyYWdtZW50IGlkZW50aWZpZXIuXCIpLGgubGVuZ3RoJiZ0aGlzLmxvYWQodGhpcy50YWJzLmluZGV4KGEpLHQpLHRoaXMuX3RvZ2dsZSh0LHUpKX0sX3RvZ2dsZTpmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIHMoKXthLnJ1bm5pbmc9ITEsYS5fdHJpZ2dlcihcImFjdGl2YXRlXCIsdCxpKX1mdW5jdGlvbiBuKCl7aS5uZXdUYWIuY2xvc2VzdChcImxpXCIpLmFkZENsYXNzKFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIpLG8ubGVuZ3RoJiZhLm9wdGlvbnMuc2hvdz9hLl9zaG93KG8sYS5vcHRpb25zLnNob3cscyk6KG8uc2hvdygpLHMoKSl9dmFyIGE9dGhpcyxvPWkubmV3UGFuZWwscj1pLm9sZFBhbmVsO3RoaXMucnVubmluZz0hMCxyLmxlbmd0aCYmdGhpcy5vcHRpb25zLmhpZGU/dGhpcy5faGlkZShyLHRoaXMub3B0aW9ucy5oaWRlLGZ1bmN0aW9uKCl7aS5vbGRUYWIuY2xvc2VzdChcImxpXCIpLnJlbW92ZUNsYXNzKFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIpLG4oKX0pOihpLm9sZFRhYi5jbG9zZXN0KFwibGlcIikucmVtb3ZlQ2xhc3MoXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiksci5oaWRlKCksbigpKSxyLmF0dHIoXCJhcmlhLWhpZGRlblwiLFwidHJ1ZVwiKSxpLm9sZFRhYi5hdHRyKHtcImFyaWEtc2VsZWN0ZWRcIjpcImZhbHNlXCIsXCJhcmlhLWV4cGFuZGVkXCI6XCJmYWxzZVwifSksby5sZW5ndGgmJnIubGVuZ3RoP2kub2xkVGFiLmF0dHIoXCJ0YWJJbmRleFwiLC0xKTpvLmxlbmd0aCYmdGhpcy50YWJzLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAwPT09ZSh0aGlzKS5hdHRyKFwidGFiSW5kZXhcIil9KS5hdHRyKFwidGFiSW5kZXhcIiwtMSksby5hdHRyKFwiYXJpYS1oaWRkZW5cIixcImZhbHNlXCIpLGkubmV3VGFiLmF0dHIoe1wiYXJpYS1zZWxlY3RlZFwiOlwidHJ1ZVwiLFwiYXJpYS1leHBhbmRlZFwiOlwidHJ1ZVwiLHRhYkluZGV4OjB9KX0sX2FjdGl2YXRlOmZ1bmN0aW9uKHQpe3ZhciBpLHM9dGhpcy5fZmluZEFjdGl2ZSh0KTtzWzBdIT09dGhpcy5hY3RpdmVbMF0mJihzLmxlbmd0aHx8KHM9dGhpcy5hY3RpdmUpLGk9cy5maW5kKFwiLnVpLXRhYnMtYW5jaG9yXCIpWzBdLHRoaXMuX2V2ZW50SGFuZGxlcih7dGFyZ2V0OmksY3VycmVudFRhcmdldDppLHByZXZlbnREZWZhdWx0OmUubm9vcH0pKX0sX2ZpbmRBY3RpdmU6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT0hMT9lKCk6dGhpcy50YWJzLmVxKHQpfSxfZ2V0SW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPXRoaXMuYW5jaG9ycy5pbmRleCh0aGlzLmFuY2hvcnMuZmlsdGVyKFwiW2hyZWYkPSdcIitlK1wiJ11cIikpKSxlfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMueGhyJiZ0aGlzLnhoci5hYm9ydCgpLHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXRhYnMgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwgdWktdGFicy1jb2xsYXBzaWJsZVwiKSx0aGlzLnRhYmxpc3QucmVtb3ZlQ2xhc3MoXCJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbFwiKS5yZW1vdmVBdHRyKFwicm9sZVwiKSx0aGlzLmFuY2hvcnMucmVtb3ZlQ2xhc3MoXCJ1aS10YWJzLWFuY2hvclwiKS5yZW1vdmVBdHRyKFwicm9sZVwiKS5yZW1vdmVBdHRyKFwidGFiSW5kZXhcIikucmVtb3ZlVW5pcXVlSWQoKSx0aGlzLnRhYmxpc3QudW5iaW5kKHRoaXMuZXZlbnROYW1lc3BhY2UpLHRoaXMudGFicy5hZGQodGhpcy5wYW5lbHMpLmVhY2goZnVuY3Rpb24oKXtlLmRhdGEodGhpcyxcInVpLXRhYnMtZGVzdHJveVwiKT9lKHRoaXMpLnJlbW92ZSgpOmUodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1kZWZhdWx0IHVpLXN0YXRlLWFjdGl2ZSB1aS1zdGF0ZS1kaXNhYmxlZCB1aS1jb3JuZXItdG9wIHVpLWNvcm5lci1ib3R0b20gdWktd2lkZ2V0LWNvbnRlbnQgdWktdGFicy1hY3RpdmUgdWktdGFicy1wYW5lbFwiKS5yZW1vdmVBdHRyKFwidGFiSW5kZXhcIikucmVtb3ZlQXR0cihcImFyaWEtbGl2ZVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1idXN5XCIpLnJlbW92ZUF0dHIoXCJhcmlhLXNlbGVjdGVkXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIikucmVtb3ZlQXR0cihcImFyaWEtaGlkZGVuXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWV4cGFuZGVkXCIpLnJlbW92ZUF0dHIoXCJyb2xlXCIpfSksdGhpcy50YWJzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLGk9dC5kYXRhKFwidWktdGFicy1hcmlhLWNvbnRyb2xzXCIpO2k/dC5hdHRyKFwiYXJpYS1jb250cm9sc1wiLGkpLnJlbW92ZURhdGEoXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIik6dC5yZW1vdmVBdHRyKFwiYXJpYS1jb250cm9sc1wiKX0pLHRoaXMucGFuZWxzLnNob3coKSxcImNvbnRlbnRcIiE9PXRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSYmdGhpcy5wYW5lbHMuY3NzKFwiaGVpZ2h0XCIsXCJcIil9LGVuYWJsZTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnMuZGlzYWJsZWQ7aSE9PSExJiYodm9pZCAwPT09dD9pPSExOih0PXRoaXMuX2dldEluZGV4KHQpLGk9ZS5pc0FycmF5KGkpP2UubWFwKGksZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT10P2U6bnVsbH0pOmUubWFwKHRoaXMudGFicyxmdW5jdGlvbihlLGkpe3JldHVybiBpIT09dD9pOm51bGx9KSksdGhpcy5fc2V0dXBEaXNhYmxlZChpKSl9LGRpc2FibGU6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5vcHRpb25zLmRpc2FibGVkO2lmKGkhPT0hMCl7aWYodm9pZCAwPT09dClpPSEwO2Vsc2V7aWYodD10aGlzLl9nZXRJbmRleCh0KSwtMSE9PWUuaW5BcnJheSh0LGkpKXJldHVybjtpPWUuaXNBcnJheShpKT9lLm1lcmdlKFt0XSxpKS5zb3J0KCk6W3RdfXRoaXMuX3NldHVwRGlzYWJsZWQoaSl9fSxsb2FkOmZ1bmN0aW9uKHQsaSl7dD10aGlzLl9nZXRJbmRleCh0KTt2YXIgcz10aGlzLG49dGhpcy50YWJzLmVxKHQpLGE9bi5maW5kKFwiLnVpLXRhYnMtYW5jaG9yXCIpLG89dGhpcy5fZ2V0UGFuZWxGb3JUYWIobikscj17dGFiOm4scGFuZWw6b30saD1mdW5jdGlvbihlLHQpe1wiYWJvcnRcIj09PXQmJnMucGFuZWxzLnN0b3AoITEsITApLG4ucmVtb3ZlQ2xhc3MoXCJ1aS10YWJzLWxvYWRpbmdcIiksby5yZW1vdmVBdHRyKFwiYXJpYS1idXN5XCIpLGU9PT1zLnhociYmZGVsZXRlIHMueGhyfTt0aGlzLl9pc0xvY2FsKGFbMF0pfHwodGhpcy54aHI9ZS5hamF4KHRoaXMuX2FqYXhTZXR0aW5ncyhhLGkscikpLHRoaXMueGhyJiZcImNhbmNlbGVkXCIhPT10aGlzLnhoci5zdGF0dXNUZXh0JiYobi5hZGRDbGFzcyhcInVpLXRhYnMtbG9hZGluZ1wiKSxvLmF0dHIoXCJhcmlhLWJ1c3lcIixcInRydWVcIiksdGhpcy54aHIuZG9uZShmdW5jdGlvbihlLHQsbil7c2V0VGltZW91dChmdW5jdGlvbigpe28uaHRtbChlKSxzLl90cmlnZ2VyKFwibG9hZFwiLGksciksaChuLHQpfSwxKX0pLmZhaWwoZnVuY3Rpb24oZSx0KXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aChlLHQpfSwxKX0pKSl9LF9hamF4U2V0dGluZ3M6ZnVuY3Rpb24odCxpLHMpe3ZhciBuPXRoaXM7cmV0dXJue3VybDp0LmF0dHIoXCJocmVmXCIpLGJlZm9yZVNlbmQ6ZnVuY3Rpb24odCxhKXtyZXR1cm4gbi5fdHJpZ2dlcihcImJlZm9yZUxvYWRcIixpLGUuZXh0ZW5kKHtqcVhIUjp0LGFqYXhTZXR0aW5nczphfSxzKSl9fX0sX2dldFBhbmVsRm9yVGFiOmZ1bmN0aW9uKHQpe3ZhciBpPWUodCkuYXR0cihcImFyaWEtY29udHJvbHNcIik7cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKHRoaXMuX3Nhbml0aXplU2VsZWN0b3IoXCIjXCIraSkpfX0pLGUud2lkZ2V0KFwidWkudG9vbHRpcFwiLHt2ZXJzaW9uOlwiMS4xMS40XCIsb3B0aW9uczp7Y29udGVudDpmdW5jdGlvbigpe3ZhciB0PWUodGhpcykuYXR0cihcInRpdGxlXCIpfHxcIlwiO3JldHVybiBlKFwiPGE+XCIpLnRleHQodCkuaHRtbCgpfSxoaWRlOiEwLGl0ZW1zOlwiW3RpdGxlXTpub3QoW2Rpc2FibGVkXSlcIixwb3NpdGlvbjp7bXk6XCJsZWZ0IHRvcCsxNVwiLGF0OlwibGVmdCBib3R0b21cIixjb2xsaXNpb246XCJmbGlwZml0IGZsaXBcIn0sc2hvdzohMCx0b29sdGlwQ2xhc3M6bnVsbCx0cmFjazohMSxjbG9zZTpudWxsLG9wZW46bnVsbH0sX2FkZERlc2NyaWJlZEJ5OmZ1bmN0aW9uKHQsaSl7dmFyIHM9KHQuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIil8fFwiXCIpLnNwbGl0KC9cXHMrLyk7cy5wdXNoKGkpLHQuZGF0YShcInVpLXRvb2x0aXAtaWRcIixpKS5hdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiLGUudHJpbShzLmpvaW4oXCIgXCIpKSl9LF9yZW1vdmVEZXNjcmliZWRCeTpmdW5jdGlvbih0KXt2YXIgaT10LmRhdGEoXCJ1aS10b29sdGlwLWlkXCIpLHM9KHQuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIil8fFwiXCIpLnNwbGl0KC9cXHMrLyksbj1lLmluQXJyYXkoaSxzKTstMSE9PW4mJnMuc3BsaWNlKG4sMSksdC5yZW1vdmVEYXRhKFwidWktdG9vbHRpcC1pZFwiKSxzPWUudHJpbShzLmpvaW4oXCIgXCIpKSxzP3QuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIixzKTp0LnJlbW92ZUF0dHIoXCJhcmlhLWRlc2NyaWJlZGJ5XCIpfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5fb24oe21vdXNlb3ZlcjpcIm9wZW5cIixmb2N1c2luOlwib3BlblwifSksdGhpcy50b29sdGlwcz17fSx0aGlzLnBhcmVudHM9e30sdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLl9kaXNhYmxlKCksdGhpcy5saXZlUmVnaW9uPWUoXCI8ZGl2PlwiKS5hdHRyKHtyb2xlOlwibG9nXCIsXCJhcmlhLWxpdmVcIjpcImFzc2VydGl2ZVwiLFwiYXJpYS1yZWxldmFudFwiOlwiYWRkaXRpb25zXCJ9KS5hZGRDbGFzcyhcInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZVwiKS5hcHBlbmRUbyh0aGlzLmRvY3VtZW50WzBdLmJvZHkpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKHQsaSl7dmFyIHM9dGhpcztyZXR1cm5cImRpc2FibGVkXCI9PT10Pyh0aGlzW2k/XCJfZGlzYWJsZVwiOlwiX2VuYWJsZVwiXSgpLHRoaXMub3B0aW9uc1t0XT1pLHZvaWQgMCk6KHRoaXMuX3N1cGVyKHQsaSksXCJjb250ZW50XCI9PT10JiZlLmVhY2godGhpcy50b29sdGlwcyxmdW5jdGlvbihlLHQpe3MuX3VwZGF0ZUNvbnRlbnQodC5lbGVtZW50KX0pLHZvaWQgMCl9LF9kaXNhYmxlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztlLmVhY2godGhpcy50b29sdGlwcyxmdW5jdGlvbihpLHMpe3ZhciBuPWUuRXZlbnQoXCJibHVyXCIpO24udGFyZ2V0PW4uY3VycmVudFRhcmdldD1zLmVsZW1lbnRbMF0sdC5jbG9zZShuLCEwKX0pLHRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuYWRkQmFjaygpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO3QuaXMoXCJbdGl0bGVdXCIpJiZ0LmRhdGEoXCJ1aS10b29sdGlwLXRpdGxlXCIsdC5hdHRyKFwidGl0bGVcIikpLnJlbW92ZUF0dHIoXCJ0aXRsZVwiKX0pfSxfZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLml0ZW1zKS5hZGRCYWNrKCkuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7dC5kYXRhKFwidWktdG9vbHRpcC10aXRsZVwiKSYmdC5hdHRyKFwidGl0bGVcIix0LmRhdGEoXCJ1aS10b29sdGlwLXRpdGxlXCIpKX0pfSxvcGVuOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMscz1lKHQ/dC50YXJnZXQ6dGhpcy5lbGVtZW50KS5jbG9zZXN0KHRoaXMub3B0aW9ucy5pdGVtcyk7cy5sZW5ndGgmJiFzLmRhdGEoXCJ1aS10b29sdGlwLWlkXCIpJiYocy5hdHRyKFwidGl0bGVcIikmJnMuZGF0YShcInVpLXRvb2x0aXAtdGl0bGVcIixzLmF0dHIoXCJ0aXRsZVwiKSkscy5kYXRhKFwidWktdG9vbHRpcC1vcGVuXCIsITApLHQmJlwibW91c2VvdmVyXCI9PT10LnR5cGUmJnMucGFyZW50cygpLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxzPWUodGhpcyk7cy5kYXRhKFwidWktdG9vbHRpcC1vcGVuXCIpJiYodD1lLkV2ZW50KFwiYmx1clwiKSx0LnRhcmdldD10LmN1cnJlbnRUYXJnZXQ9dGhpcyxpLmNsb3NlKHQsITApKSxzLmF0dHIoXCJ0aXRsZVwiKSYmKHMudW5pcXVlSWQoKSxpLnBhcmVudHNbdGhpcy5pZF09e2VsZW1lbnQ6dGhpcyx0aXRsZTpzLmF0dHIoXCJ0aXRsZVwiKX0scy5hdHRyKFwidGl0bGVcIixcIlwiKSl9KSx0aGlzLl9yZWdpc3RlckNsb3NlSGFuZGxlcnModCxzKSx0aGlzLl91cGRhdGVDb250ZW50KHMsdCkpfSxfdXBkYXRlQ29udGVudDpmdW5jdGlvbihlLHQpe3ZhciBpLHM9dGhpcy5vcHRpb25zLmNvbnRlbnQsbj10aGlzLGE9dD90LnR5cGU6bnVsbDtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2Ygcz90aGlzLl9vcGVuKHQsZSxzKTooaT1zLmNhbGwoZVswXSxmdW5jdGlvbihpKXtuLl9kZWxheShmdW5jdGlvbigpe2UuZGF0YShcInVpLXRvb2x0aXAtb3BlblwiKSYmKHQmJih0LnR5cGU9YSksdGhpcy5fb3Blbih0LGUsaSkpfSl9KSxpJiZ0aGlzLl9vcGVuKHQsZSxpKSx2b2lkIDApfSxfb3BlbjpmdW5jdGlvbih0LGkscyl7ZnVuY3Rpb24gbihlKXtsLm9mPWUsby5pcyhcIjpoaWRkZW5cIil8fG8ucG9zaXRpb24obCl9dmFyIGEsbyxyLGgsbD1lLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMucG9zaXRpb24pO2lmKHMpe2lmKGE9dGhpcy5fZmluZChpKSlyZXR1cm4gYS50b29sdGlwLmZpbmQoXCIudWktdG9vbHRpcC1jb250ZW50XCIpLmh0bWwocyksdm9pZCAwO2kuaXMoXCJbdGl0bGVdXCIpJiYodCYmXCJtb3VzZW92ZXJcIj09PXQudHlwZT9pLmF0dHIoXCJ0aXRsZVwiLFwiXCIpOmkucmVtb3ZlQXR0cihcInRpdGxlXCIpKSxhPXRoaXMuX3Rvb2x0aXAoaSksbz1hLnRvb2x0aXAsdGhpcy5fYWRkRGVzY3JpYmVkQnkoaSxvLmF0dHIoXCJpZFwiKSksby5maW5kKFwiLnVpLXRvb2x0aXAtY29udGVudFwiKS5odG1sKHMpLHRoaXMubGl2ZVJlZ2lvbi5jaGlsZHJlbigpLmhpZGUoKSxzLmNsb25lPyhoPXMuY2xvbmUoKSxoLnJlbW92ZUF0dHIoXCJpZFwiKS5maW5kKFwiW2lkXVwiKS5yZW1vdmVBdHRyKFwiaWRcIikpOmg9cyxlKFwiPGRpdj5cIikuaHRtbChoKS5hcHBlbmRUbyh0aGlzLmxpdmVSZWdpb24pLHRoaXMub3B0aW9ucy50cmFjayYmdCYmL15tb3VzZS8udGVzdCh0LnR5cGUpPyh0aGlzLl9vbih0aGlzLmRvY3VtZW50LHttb3VzZW1vdmU6bn0pLG4odCkpOm8ucG9zaXRpb24oZS5leHRlbmQoe29mOml9LHRoaXMub3B0aW9ucy5wb3NpdGlvbikpLG8uaGlkZSgpLHRoaXMuX3Nob3cobyx0aGlzLm9wdGlvbnMuc2hvdyksdGhpcy5vcHRpb25zLnNob3cmJnRoaXMub3B0aW9ucy5zaG93LmRlbGF5JiYocj10aGlzLmRlbGF5ZWRTaG93PXNldEludGVydmFsKGZ1bmN0aW9uKCl7by5pcyhcIjp2aXNpYmxlXCIpJiYobihsLm9mKSxjbGVhckludGVydmFsKHIpKX0sZS5meC5pbnRlcnZhbCkpLHRoaXMuX3RyaWdnZXIoXCJvcGVuXCIsdCx7dG9vbHRpcDpvfSl9fSxfcmVnaXN0ZXJDbG9zZUhhbmRsZXJzOmZ1bmN0aW9uKHQsaSl7dmFyIHM9e2tleXVwOmZ1bmN0aW9uKHQpe2lmKHQua2V5Q29kZT09PWUudWkua2V5Q29kZS5FU0NBUEUpe3ZhciBzPWUuRXZlbnQodCk7cy5jdXJyZW50VGFyZ2V0PWlbMF0sdGhpcy5jbG9zZShzLCEwKX19fTtpWzBdIT09dGhpcy5lbGVtZW50WzBdJiYocy5yZW1vdmU9ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVUb29sdGlwKHRoaXMuX2ZpbmQoaSkudG9vbHRpcCl9KSx0JiZcIm1vdXNlb3ZlclwiIT09dC50eXBlfHwocy5tb3VzZWxlYXZlPVwiY2xvc2VcIiksdCYmXCJmb2N1c2luXCIhPT10LnR5cGV8fChzLmZvY3Vzb3V0PVwiY2xvc2VcIiksdGhpcy5fb24oITAsaSxzKX0sY2xvc2U6ZnVuY3Rpb24odCl7dmFyIGkscz10aGlzLG49ZSh0P3QuY3VycmVudFRhcmdldDp0aGlzLmVsZW1lbnQpLGE9dGhpcy5fZmluZChuKTtyZXR1cm4gYT8oaT1hLnRvb2x0aXAsYS5jbG9zaW5nfHwoY2xlYXJJbnRlcnZhbCh0aGlzLmRlbGF5ZWRTaG93KSxuLmRhdGEoXCJ1aS10b29sdGlwLXRpdGxlXCIpJiYhbi5hdHRyKFwidGl0bGVcIikmJm4uYXR0cihcInRpdGxlXCIsbi5kYXRhKFwidWktdG9vbHRpcC10aXRsZVwiKSksdGhpcy5fcmVtb3ZlRGVzY3JpYmVkQnkobiksYS5oaWRpbmc9ITAsaS5zdG9wKCEwKSx0aGlzLl9oaWRlKGksdGhpcy5vcHRpb25zLmhpZGUsZnVuY3Rpb24oKXtzLl9yZW1vdmVUb29sdGlwKGUodGhpcykpfSksbi5yZW1vdmVEYXRhKFwidWktdG9vbHRpcC1vcGVuXCIpLHRoaXMuX29mZihuLFwibW91c2VsZWF2ZSBmb2N1c291dCBrZXl1cFwiKSxuWzBdIT09dGhpcy5lbGVtZW50WzBdJiZ0aGlzLl9vZmYobixcInJlbW92ZVwiKSx0aGlzLl9vZmYodGhpcy5kb2N1bWVudCxcIm1vdXNlbW92ZVwiKSx0JiZcIm1vdXNlbGVhdmVcIj09PXQudHlwZSYmZS5lYWNoKHRoaXMucGFyZW50cyxmdW5jdGlvbih0LGkpe2UoaS5lbGVtZW50KS5hdHRyKFwidGl0bGVcIixpLnRpdGxlKSxkZWxldGUgcy5wYXJlbnRzW3RdfSksYS5jbG9zaW5nPSEwLHRoaXMuX3RyaWdnZXIoXCJjbG9zZVwiLHQse3Rvb2x0aXA6aX0pLGEuaGlkaW5nfHwoYS5jbG9zaW5nPSExKSksdm9pZCAwKToobi5yZW1vdmVEYXRhKFwidWktdG9vbHRpcC1vcGVuXCIpLHZvaWQgMCl9LF90b29sdGlwOmZ1bmN0aW9uKHQpe3ZhciBpPWUoXCI8ZGl2PlwiKS5hdHRyKFwicm9sZVwiLFwidG9vbHRpcFwiKS5hZGRDbGFzcyhcInVpLXRvb2x0aXAgdWktd2lkZ2V0IHVpLWNvcm5lci1hbGwgdWktd2lkZ2V0LWNvbnRlbnQgXCIrKHRoaXMub3B0aW9ucy50b29sdGlwQ2xhc3N8fFwiXCIpKSxzPWkudW5pcXVlSWQoKS5hdHRyKFwiaWRcIik7cmV0dXJuIGUoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcInVpLXRvb2x0aXAtY29udGVudFwiKS5hcHBlbmRUbyhpKSxpLmFwcGVuZFRvKHRoaXMuZG9jdW1lbnRbMF0uYm9keSksdGhpcy50b29sdGlwc1tzXT17ZWxlbWVudDp0LHRvb2x0aXA6aX19LF9maW5kOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZGF0YShcInVpLXRvb2x0aXAtaWRcIik7cmV0dXJuIHQ/dGhpcy50b29sdGlwc1t0XTpudWxsfSxfcmVtb3ZlVG9vbHRpcDpmdW5jdGlvbihlKXtlLnJlbW92ZSgpLGRlbGV0ZSB0aGlzLnRvb2x0aXBzW2UuYXR0cihcImlkXCIpXX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2UuZWFjaCh0aGlzLnRvb2x0aXBzLGZ1bmN0aW9uKGkscyl7dmFyIG49ZS5FdmVudChcImJsdXJcIiksYT1zLmVsZW1lbnQ7bi50YXJnZXQ9bi5jdXJyZW50VGFyZ2V0PWFbMF0sdC5jbG9zZShuLCEwKSxlKFwiI1wiK2kpLnJlbW92ZSgpLGEuZGF0YShcInVpLXRvb2x0aXAtdGl0bGVcIikmJihhLmF0dHIoXCJ0aXRsZVwiKXx8YS5hdHRyKFwidGl0bGVcIixhLmRhdGEoXCJ1aS10b29sdGlwLXRpdGxlXCIpKSxhLnJlbW92ZURhdGEoXCJ1aS10b29sdGlwLXRpdGxlXCIpKX0pLHRoaXMubGl2ZVJlZ2lvbi5yZW1vdmUoKX19KX0pO1xuIiwiLyohIENvcHlyaWdodCAoYykgMjAxMyBCcmFuZG9uIEFhcm9uIChodHRwOi8vYnJhbmRvbi5hYXJvbi5zaClcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTElDRU5TRS50eHQpLlxuICpcbiAqIFZlcnNpb246IDMuMS45XG4gKlxuICogUmVxdWlyZXM6IGpRdWVyeSAxLjIuMitcbiAqL1xuIWZ1bmN0aW9uKGEpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGEpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWE6YShqUXVlcnkpfShmdW5jdGlvbihhKXtmdW5jdGlvbiBpKGIpe3ZhciBjPWJ8fHdpbmRvdy5ldmVudCxnPWQuY2FsbChhcmd1bWVudHMsMSksaD0wLGk9MCxsPTAsbT0wO2lmKGI9YS5ldmVudC5maXgoYyksYi50eXBlPVwibW91c2V3aGVlbFwiLFwiZGV0YWlsXCJpbiBjJiYobD0tMSpjLmRldGFpbCksXCJ3aGVlbERlbHRhXCJpbiBjJiYobD1jLndoZWVsRGVsdGEpLFwid2hlZWxEZWx0YVlcImluIGMmJihsPWMud2hlZWxEZWx0YVkpLFwid2hlZWxEZWx0YVhcImluIGMmJihpPS0xKmMud2hlZWxEZWx0YVgpLFwiYXhpc1wiaW4gYyYmYy5heGlzPT09Yy5IT1JJWk9OVEFMX0FYSVMmJihpPS0xKmwsbD0wKSxoPTA9PT1sP2k6bCxcImRlbHRhWVwiaW4gYyYmKGw9LTEqYy5kZWx0YVksaD1sKSxcImRlbHRhWFwiaW4gYyYmKGk9Yy5kZWx0YVgsMD09PWwmJihoPS0xKmkpKSwwIT09bHx8MCE9PWkpe2lmKDE9PT1jLmRlbHRhTW9kZSl7dmFyIG49YS5kYXRhKHRoaXMsXCJtb3VzZXdoZWVsLWxpbmUtaGVpZ2h0XCIpO2gqPW4sbCo9bixpKj1ufWVsc2UgaWYoMj09PWMuZGVsdGFNb2RlKXt2YXIgbz1hLmRhdGEodGhpcyxcIm1vdXNld2hlZWwtcGFnZS1oZWlnaHRcIik7aCo9byxsKj1vLGkqPW99cmV0dXJuIG09TWF0aC5tYXgoTWF0aC5hYnMobCksTWF0aC5hYnMoaSkpLCghZnx8Zj5tKSYmKGY9bSxrKGMsbSkmJihmLz00MCkpLGsoYyxtKSYmKGgvPTQwLGkvPTQwLGwvPTQwKSxoPU1hdGhbaD49MT9cImZsb29yXCI6XCJjZWlsXCJdKGgvZiksaT1NYXRoW2k+PTE/XCJmbG9vclwiOlwiY2VpbFwiXShpL2YpLGw9TWF0aFtsPj0xP1wiZmxvb3JcIjpcImNlaWxcIl0obC9mKSxiLmRlbHRhWD1pLGIuZGVsdGFZPWwsYi5kZWx0YUZhY3Rvcj1mLGIuZGVsdGFNb2RlPTAsZy51bnNoaWZ0KGIsaCxpLGwpLGUmJmNsZWFyVGltZW91dChlKSxlPXNldFRpbWVvdXQoaiwyMDApLChhLmV2ZW50LmRpc3BhdGNofHxhLmV2ZW50LmhhbmRsZSkuYXBwbHkodGhpcyxnKX19ZnVuY3Rpb24gaigpe2Y9bnVsbH1mdW5jdGlvbiBrKGEsYil7cmV0dXJuIGguc2V0dGluZ3MuYWRqdXN0T2xkRGVsdGFzJiZcIm1vdXNld2hlZWxcIj09PWEudHlwZSYmMD09PWIlMTIwfXZhciBlLGYsYj1bXCJ3aGVlbFwiLFwibW91c2V3aGVlbFwiLFwiRE9NTW91c2VTY3JvbGxcIixcIk1vek1vdXNlUGl4ZWxTY3JvbGxcIl0sYz1cIm9ud2hlZWxcImluIGRvY3VtZW50fHxkb2N1bWVudC5kb2N1bWVudE1vZGU+PTk/W1wid2hlZWxcIl06W1wibW91c2V3aGVlbFwiLFwiRG9tTW91c2VTY3JvbGxcIixcIk1vek1vdXNlUGl4ZWxTY3JvbGxcIl0sZD1BcnJheS5wcm90b3R5cGUuc2xpY2U7aWYoYS5ldmVudC5maXhIb29rcylmb3IodmFyIGc9Yi5sZW5ndGg7ZzspYS5ldmVudC5maXhIb29rc1tiWy0tZ11dPWEuZXZlbnQubW91c2VIb29rczt2YXIgaD1hLmV2ZW50LnNwZWNpYWwubW91c2V3aGVlbD17dmVyc2lvbjpcIjMuMS45XCIsc2V0dXA6ZnVuY3Rpb24oKXtpZih0aGlzLmFkZEV2ZW50TGlzdGVuZXIpZm9yKHZhciBiPWMubGVuZ3RoO2I7KXRoaXMuYWRkRXZlbnRMaXN0ZW5lcihjWy0tYl0saSwhMSk7ZWxzZSB0aGlzLm9ubW91c2V3aGVlbD1pO2EuZGF0YSh0aGlzLFwibW91c2V3aGVlbC1saW5lLWhlaWdodFwiLGguZ2V0TGluZUhlaWdodCh0aGlzKSksYS5kYXRhKHRoaXMsXCJtb3VzZXdoZWVsLXBhZ2UtaGVpZ2h0XCIsaC5nZXRQYWdlSGVpZ2h0KHRoaXMpKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtpZih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIpZm9yKHZhciBhPWMubGVuZ3RoO2E7KXRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihjWy0tYV0saSwhMSk7ZWxzZSB0aGlzLm9ubW91c2V3aGVlbD1udWxsfSxnZXRMaW5lSGVpZ2h0OmZ1bmN0aW9uKGIpe3JldHVybiBwYXJzZUludChhKGIpW1wib2Zmc2V0UGFyZW50XCJpbiBhLmZuP1wib2Zmc2V0UGFyZW50XCI6XCJwYXJlbnRcIl0oKS5jc3MoXCJmb250U2l6ZVwiKSwxMCl9LGdldFBhZ2VIZWlnaHQ6ZnVuY3Rpb24oYil7cmV0dXJuIGEoYikuaGVpZ2h0KCl9LHNldHRpbmdzOnthZGp1c3RPbGREZWx0YXM6ITB9fTthLmZuLmV4dGVuZCh7bW91c2V3aGVlbDpmdW5jdGlvbihhKXtyZXR1cm4gYT90aGlzLmJpbmQoXCJtb3VzZXdoZWVsXCIsYSk6dGhpcy50cmlnZ2VyKFwibW91c2V3aGVlbFwiKX0sdW5tb3VzZXdoZWVsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnVuYmluZChcIm1vdXNld2hlZWxcIixhKX19KX0pO1xuIiwiZnVuY3Rpb24gQXBpKG1ldGhvZCwgdXJsLCBjYWxsYmFjaywgZGF0YSwgcmF3KSB7XG4gIHVybCA9ICdodHRwczovL2FwaS5naXRodWIuY29tJyArIHVybDtcbiAgdXJsICs9ICgoL1xcPy8pLnRlc3QodXJsKSA/ICcmJyA6ICc/Jyk7XG4gIHVybCArPSAnJicgKyAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuXG4gIGlmKGRhdGEgJiYgT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID4gMSl7XG4gICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gIH1cblxuICAkLmFqYXgoe1xuICAgIHR5cGU6IG1ldGhvZCxcbiAgICB1cmw6IHVybCxcbiAgICBkYXRhOiBkYXRhLFxuICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oeGhyT2JqKXtcbiAgICAgIHhock9iai5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCdhcHBsaWNhdGlvbi92bmQuZ2l0aHViLnYzK2pzb24nKTtcbiAgICAgIHhock9iai5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnKTtcbiAgICAgIHhock9iai5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ3Rva2VuICcgKyAkLnRyaW0oQWNjZXNzVG9rZW4pKTtcbiAgICB9LFxuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGNhbGxiYWNrKGRhdGEpXG4gICAgfSxcbiAgICBlcnJvcjogZnVuY3Rpb24oZGF0YSwgYXJndW1lbnQyLCBhcmd1bWVudDMpIHtcbiAgICAgIGNhbGxiYWNrKGRhdGEuc3RhdHVzKTtcbiAgICB9XG4gIH0pO1xuXG59XG4vL0N1cnJlbnQgdXNlclxuICBmdW5jdGlvbiBDdXJyZW50VXNlcihjYWxsYmFjaykge1xuICAgIEFwaSgnR0VUJywgJy91c2VyJywgY2FsbGJhY2spO1xuICB9O1xuXG4vL1Nob3cgUmVwb3NcbiAgZnVuY3Rpb24gUmVwb3MoY2FsbGJhY2spIHtcbiAgICBBcGkoJ0dFVCcsICcvdXNlci9yZXBvcz90eXBlPXB1YmxpYyZwZXJfcGFnZT0xMDAwJywgY2FsbGJhY2spO1xuICB9O1xuXG4vL1Nob3cgVHJlZVxuICBmdW5jdGlvbiBUcmVlKGJyYW5jaCwgY2FsbGJhY2spe1xuICAgIEFwaSgnR0VUJywgUmVwb1BhdGggKyAnZ2l0L3RyZWVzLycgKyBicmFuY2ggKyAnP3Blcl9wYWdlPTEwMDAnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBjYWxsYmFjayhkYXRhLnRyZWUpO1xuICAgIH0pO1xuICB9XG5cbi8vU2hvdyBGb2xkZXJzIENvbnRlbnRcbiAgZnVuY3Rpb24gQ29udGVudChwYXRoLCBicmFuY2gsIGNhbGxiYWNrKSB7XG4gICAgQXBpKCdHRVQnLCBSZXBvUGF0aCArICdjb250ZW50cycgKyAocGF0aCA/ICcvJyArIGVuY29kZVVSSShwYXRoKSA6ICcnKSArICc/cGVyX3BhZ2U9MTAwMCcsIGNhbGxiYWNrLCB7IHJlZjogYnJhbmNoIH0pO1xuICB9O1xuXG4vL1Nob3cgRmlsZXMgQ29udGVudFxuICBmdW5jdGlvbiBSZWFkKHBhdGgsIGJyYW5jaCwgY2FsbGJhY2spIHtcbiAgICBBcGkoJ0dFVCcsIFJlcG9QYXRoICsgJ2NvbnRlbnRzLycgKyBlbmNvZGVVUkkocGF0aCkgKyAnP3JlZj0nICsgYnJhbmNoICsgJyZwZXJfcGFnZT0xMDAwJywgZnVuY3Rpb24oZGF0YSl7XG4gICAgXHRjYWxsYmFjayh3aW5kb3cuYXRvYihkYXRhLmNvbnRlbnQpKTtcbiAgICB9KTtcbiAgfTtcblxuLy9HZXQgU2hhXG4gIGZ1bmN0aW9uIFNoYShwYXRoLCBicmFuY2gsIGNhbGxiYWNrKSB7XG4gICAgQXBpKFwiR0VUXCIsIFJlcG9QYXRoICsgXCJjb250ZW50cy9cIiArIHBhdGggKyBcIj9yZWY9XCIgKyBicmFuY2gsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGlmKGRhdGEgPT09IDQwMyl7Ly9pZiBmaWxlIGlzIGJpZ2dlciB0aGFuIDFtYiBpdCdzIG5vdCByZXR1cm5lZCBzbyBsb29rIGluc2lkZSB0aGUgY29udGFpbmVyIGZvbGRlclxuICAgICAgICBjdXQgPSBwYXRoLmxhc3RJbmRleE9mKCcvJyk7XG4gICAgICAgIGZuYW1lID0gcGF0aC5zdWJzdHJpbmcoY3V0ICsgMSk7XG4gICAgICAgIGZpbmRJbiA9IGRlY29kZVVSSShwYXRoKS5yZXBsYWNlKCcvJyArIGZuYW1lLCAnJyk7XG4gICAgICAgIENvbnRlbnQoZmluZEluLCBicmFuY2gsIGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICBcdGlmKGRhdGEgPT09IDQwMyl7IC8vIElmIGxvb2tpbmcgaW4gdGhlIGNvbnRhaW5lciBmb2xkZXIgdGhyb3dzIGVycm9yIGl0J3Mgbm90IGluIGEgZm9sZGVyIGJ1dCBpbiB0aGUgcm9vdFxuICAgICAgICBcdFx0VHJlZShicmFuY2gsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0XHRcdCAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24oIGluZGV4LCB2YWx1ZSApe1xuXHRcdCAgICAgICAgICAgIGlmKHZhbHVlLnBhdGggPT09IGRlY29kZVVSSShwYXRoKSl7XG5cdFx0ICAgICAgICAgICAgICBjYWxsYmFjayh2YWx1ZS5zaGEpO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgfSk7XG5cdFx0XHRcdCAgICB9KTtcbiAgICAgICAgXHR9ZWxzZXtcblx0ICAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbiggaW5kZXgsIHZhbHVlICl7XG5cdCAgICAgICAgICAgIGlmKHZhbHVlLnBhdGggPT09IGRlY29kZVVSSShwYXRoKSl7XG5cdCAgICAgICAgICAgICAgY2FsbGJhY2sodmFsdWUuc2hhKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG4gICAgICAgIFx0fVxuICAgICAgICB9KTtcbiAgICAgIH1lbHNlIGlmKGRhdGEgPT09IDQwNCl7XG4gICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgfWVsc2V7XG4gICAgICAgIGNhbGxiYWNrKGRhdGEuc2hhKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuLy9VcGRhdGUgZmlsZXNcbiAgZnVuY3Rpb24gV3JpdGUocGF0aCwgYnJhbmNoLCBjb250ZW50LCBDb21taXRNc2csIGNhbGxiYWNrKSB7XG4gICAgU2hhKGVuY29kZVVSSShwYXRoKSwgYnJhbmNoLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBBcGkoXCJQVVRcIiwgUmVwb1BhdGggKyBcImNvbnRlbnRzL1wiICsgZW5jb2RlVVJJKHBhdGgpLCBjYWxsYmFjaywge1xuICAgICAgICBtZXNzYWdlOiBDb21taXRNc2csXG4gICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgIGJyYW5jaDogYnJhbmNoLFxuICAgICAgICBzaGE6IGRhdGFcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4vL0NyZWF0ZSBmaWxlc1xuICBmdW5jdGlvbiBDcmVhdGUocGF0aCwgYnJhbmNoLCBjb250ZW50LCBDb21taXRNc2csIGNhbGxiYWNrKSB7XG4gICAgQXBpKFwiUFVUXCIsIFJlcG9QYXRoICsgXCJjb250ZW50cy9cIiArIGVuY29kZVVSSShwYXRoKSwgY2FsbGJhY2ssIHtcbiAgICAgIG1lc3NhZ2U6IENvbW1pdE1zZyxcbiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICBicmFuY2g6IGJyYW5jaFxuICAgIH0pO1xuICB9O1xuXG4vL1JlbW92ZSBmaWxlc1xuICBmdW5jdGlvbiBEZWxldGUocGF0aCwgYnJhbmNoLCBjYWxsYmFjaykge1xuICAgIFNoYShlbmNvZGVVUkkocGF0aCksIGJyYW5jaCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgQXBpKCdERUxFVEUnLCBSZXBvUGF0aCArICdjb250ZW50cy8nICsgZW5jb2RlVVJJKHBhdGgpLCBjYWxsYmFjaywge1xuICAgICAgICBtZXNzYWdlOiBwYXRoICsgJyBpcyByZW1vdmVkJyxcbiAgICAgICAgc2hhOiBkYXRhLFxuICAgICAgICBicmFuY2g6IGJyYW5jaFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbi8vUmVuYW1lXG4gIGZ1bmN0aW9uIFJlbmFtZShwYXRoLCBuZXdOYW1lLCBjYWxsYmFjayl7XG4gICAgQXBpKCdQQVRDSCcsIHBhdGgsIGNhbGxiYWNrLCB7XG4gICAgICBuYW1lOiBuZXdOYW1lLFxuICAgIH0pO1xuICB9XG5cbi8qLy9Gb3JrXG4gIGZ1bmN0aW9uIEZvcmsoZm9ya1VzZXIsIGZvcmtSZXBvLCBjYWxsYmFjaykge1xuICAgIEFwaSgnUE9TVCcsICcvcmVwb3MvJyArIGZvcmtVc2VyICsgJy8nICsgZm9ya1JlcG8gKyAnL2ZvcmtzJywgY2FsbGJhY2spO1xuICB9OyovXG5cbi8vVG9nZ2xlIHNpZGViYXJcblx0JCgnI3RvZ2dsZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuXHQgICQoJ2JvZHknKS50b2dnbGVDbGFzcygndG9nZ2xlZCcpO1xuXHQgICQoJ2hlYWRlciArIGRpdicpLnRvZ2dsZUNsYXNzKCdyb3cnKTtcblx0fSk7XG5cbi8vQmFjayBidXR0b25cblx0JCgnI2JhY2snKS5jbGljayhmdW5jdGlvbigpe1xuXHRcdGlmKCQoJ2hlYWRlciAuYnJlYWRjcnVtYicpLmNoaWxkcmVuKCkubGVuZ3RoID09PSAxKXtcblx0XHRcdFNob3dXZWJzaXRlcygpO1xuXHRcdH1lbHNle1xuXHRcdFx0JCgnaGVhZGVyIC5icmVhZGNydW1iIHNwYW46bGFzdC1jaGlsZCBzcGFuJykudHJpZ2dlcignY2xpY2snKTtcblx0XHR9XG5cdH0pO1xuXG5cbnZhciBVc2VyTG9naW47XG5cbnZhciBSZXBvTmFtZTtcbnZhciBSZXBvUGF0aDtcbnZhciBSZXBvT3duZXI7XG52YXIgUmVwb0JyYW5jaDtcbnZhciBSZXBvVXJsO1xuXG52YXIgQ3VycmVudE5hbWU7XG52YXIgQ3VycmVudFBhdGg7XG5cbnZhciBDb21taXRNc2cgPSAnQ2hhbmdlcyBtYWRlIGJ5ICc7XG52YXIgU2F2ZUJ0biA9ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc3VjY2Vzc1wiIGRpc2FibGVkPjwvYnV0dG9uPic7XG5cbnZhciBJbnNlcnRJbWFnZTtcbnZhciBGcm9udE1hdHRlcjtcblxuLy9HZXQgY3VycmVudCB1c2VyIGluZm9cblx0Q3VycmVudFVzZXIoZnVuY3Rpb24oZGF0YSkge1xuXHRcdFVzZXJMb2dpbiA9IGRhdGEubG9naW47XG5cdFx0JChcIi5hdmF0YXJcIikuYXR0cignc3JjJywgZGF0YS5hdmF0YXJfdXJsKTtcblx0XHRpZihkYXRhLm5hbWUgPT09IG51bGwpe1xuXHRcdFx0JChcIi51c2VyLW5hbWVcIikuaHRtbCgnPGEgc3JjPVwiJyArIGRhdGEuaHRtbF91cmwgKyAnXCI+JyArIGRhdGEubG9naW4gKyAnPC9hPicpO1xuXHRcdH1lbHNle1xuXHRcdFx0JChcIi51c2VyLW5hbWVcIikuaHRtbCgnPGEgc3JjPVwiJyArIGRhdGEuaHRtbF91cmwgKyAnXCI+JyArIGRhdGEubmFtZSArICc8L2E+Jyk7XG5cdFx0fVxuXHRcdCQoJyNjb21taXQnKS5hdHRyKCdwbGFjZWhvbGRlcicsIENvbW1pdE1zZyArIFVzZXJMb2dpbik7XG5cdFx0U2hvd1dlYnNpdGVzKCk7XG5cdH0pO1xuXG4vL1Nob3cgdXNlciB3ZWJzaXRlc1xuXHRmdW5jdGlvbiBTaG93V2Vic2l0ZXMoKSB7XG5cdFx0JCgnYm9keScpLmF0dHIoJ2RhdGEtY29udGVudCcsICdzaXRlcycpLmF0dHIoJ2RhdGEtcGFnZXMnLCAnMCcpO1xuXHRcdCQoJ2hlYWRlciAudGl0bGUnKS50ZXh0KCdNeSB3ZWJzaXRlcycpLnJlbW92ZUF0dHIoJ2RhdGEtc2l0ZScpO1xuXHRcdCQoJ2hlYWRlciAudXJsLCBhc2lkZSAubGlzdCAudGl0bGUsIGFzaWRlIHVsLCBtYWluIC5jb250ZW50LCBtYWluIC5pbWFnZXMnKS5lbXB0eSgpO1xuXHRcdCQoJy5icmVhZGNydW1iIC5mYS1ob21lJykubmV4dEFsbCgpLnJlbW92ZSgpO1xuXHRcdGlmKCQoJy5sb2FkaW5nJykuaXMoJzpoaWRkZW4nKSl7XG5cdFx0XHQkKCcubG9hZGluZywgLm5vY2xpY2snKS50b2dnbGUoKTtcblx0XHR9XG5cblx0XHRSZXBvcyhmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHR2YXIgX3RvdGFsUGFnZXMgPSAwO1xuXHRcdFx0JC5lYWNoKGRhdGEsIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XG5cdFx0XHRcdGlmKHZhbHVlLmhhc19wYWdlcyA9PT0gdHJ1ZSl7XG5cdFx0XHRcdFx0aWYodmFsdWUubmFtZSA9PT0gdmFsdWUub3duZXIubG9naW4udG9Mb3dlckNhc2UoKSArICcuZ2l0aHViLmlvJyl7XG5cdCAgICAgIFx0XHR2YXIgX3VybCA9IHZhbHVlLmh0bWxfdXJsO1xuXHQgICAgICBcdFx0dmFyIF9yZXBvVXJsID0gdmFsdWUubmFtZTtcblx0ICAgICAgXHRcdHZhciBfYnJhbmNoID0gJ21hc3Rlcidcblx0ICAgICAgXHR9ZWxzZSB7XG5cdCAgICAgIFx0XHR2YXIgX3VybCA9IHZhbHVlLmh0bWxfdXJsICsgJy90cmVlL2doLXBhZ2VzJztcblx0ICAgICAgXHRcdHZhciBfcmVwb1VybCA9IFVzZXJMb2dpbi50b0xvd2VyQ2FzZSgpICsgJy5naXRodWIuaW8nICsgJy8nICsgdmFsdWUubmFtZTtcblx0ICAgICAgXHRcdHZhciBfYnJhbmNoID0gJ2doLXBhZ2VzJ1xuXHQgICAgICBcdH1cblx0ICAgICAgXHQkKCdtYWluIC5jb250ZW50JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiY2FyZFwiPjxkaXYgY2xhc3M9XCJjYXJkLWJsb2NrXCI+PGEgaHJlZj1cIicgKyBfdXJsICsgJ1wiIHRhcmdldD1cIl9ibGFua1wiPjxpIGNsYXNzPVwiZmEgZmEtZ2l0aHViLXNxdWFyZVwiPjwvaT48L2E+ICcgKyB2YWx1ZS5uYW1lICsgJzwvZGl2PjxkaXYgZGF0YS1zaXRlPVwiJyArIHZhbHVlLm5hbWUgKyAnXCIgZGF0YS1vd25lcj1cIicgKyB2YWx1ZS5vd25lci5sb2dpbi50b0xvd2VyQ2FzZSgpICsgJ1wiIGRhdGEtYnJhbmNoPVwiJyArIF9icmFuY2ggKyAnXCIgZGF0YS11cmw9XCInICsgX3JlcG9VcmwgKyAnXCIgY2xhc3M9XCJjYXJkLWZvb3RlclwiPk1hbmFnZSA8aSBjbGFzcz1cImZhIGZhLWFycm93LWNpcmNsZS1vLXJpZ2h0XCI+PC9pPjwvZGl2PjwvZGl2PicpO1xuXHQgICAgICBcdF90b3RhbFBhZ2VzICs9IDE7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcdFx0JCgnYXNpZGUgLm15LXdlYnNpdGVzIC5sYWJlbCcpLnRleHQoX3RvdGFsUGFnZXMpO1xuXHRcdFx0aWYoZGF0YS5sZW5ndGggPCAxKXtcblx0XHRcdFx0JCgnbWFpbiAuY29udGVudCcpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiIHJvbGU9XCJhbGVydFwiPjxzdHJvbmc+T2ggb2ghPC9zdHJvbmc+IEl0IHNlZW1zIGxpa2UgdGhlcmUgYXJlIG5vIHB1YmxpYyByZXBvc2l0b3JpZXMgaW4geW91ciBhY2NvdW50LiBNZWV0IEh5ZGUgb25seSB0cmFja3MgcHViaWMgcmVwb3NpdG9yaWVzIGJlY2F1c2Ugd2Vic2l0ZXMgYXJlIG1lYW50IHRvIGJlIHB1YmxpYyByaWdodD9cIjwvZGl2PicpO1xuXHRcdFx0fWVsc2UgaWYoX3RvdGFsUGFnZXMgPCAxKXtcblx0XHRcdFx0JCgnbWFpbiAuY29udGVudCcpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiIHJvbGU9XCJhbGVydFwiPjxzdHJvbmc+T2ggb2ghPC9zdHJvbmc+IEl0IHNlZW1zIGxpa2UgdGhlcmUgYXJlIG5vIHdlYnNpdGVzIGluIGFueSBvZiB5b3VyIHJlcG9zaXRvcmllcy4gTWVldCBIeWRlIG9ubHkgdHJhY2tzIHJlcG9zaXRvcmllcyB3aXRoIFwiZ2gtcGFnZXNcIiBicmFuY2hlcyBhbmQgdXNlciBwYWdlcyB3aGljaCBhcmUgcmVwb3NpdG9yaWVzIG5hbWVkIHRoaXMgd2F5OiBcInVzZXItbmFtZS5naXRodWIuaW9cIjwvZGl2PicpO1xuXHRcdFx0fVxuXHRcdFx0aWYoJCgnLmxvYWRpbmcnKS5pcygnOnZpc2libGUnKSl7XG5cdFx0XHRcdCQoJy5sb2FkaW5nLCAubm9jbGljaycpLnRvZ2dsZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly9BcHBlbmQgb3B0aW9uIHRvIGNyZWF0ZSBhIG5ldyB3ZWJzaXRlIChpbiBwcm9ncmVzcylcblx0XHRcdC8vJCgnbWFpbiAuY29udGVudCcpLmFwcGVuZCgnPGRpdiBpZD1cImZvcmtcIiBjbGFzcz1cImNhcmRcIiBkYXRhLXRvZ2dsZT1cIm1vZGFsXCIgZGF0YS10YXJnZXQ9XCIjRm9ya1wiPjxkaXYgY2xhc3M9XCJjYXJkLWJsb2NrXCI+PGkgY2xhc3M9XCJmYSBmYS1wbHVzLWNpcmNsZVwiPjwvaT4gTmV3PC9kaXY+PGRpdiBjbGFzcz1cImNhcmQtZm9vdGVyXCI+Q3JlYXRlIGEgbmV3IHdlYnNpdGUgPGkgY2xhc3M9XCJmYSBmYS1hcnJvdy1jaXJjbGUtby1yaWdodFwiPjwvaT48L2Rpdj48L2Rpdj4nKTtcblx0fVxuXG5cdC8vQ2FsbCB0aGUgZnVuY3Rpb24gKGl0cyBjYWxsZWQgb24gbG9hZCBvciBvbiBjbGljayBvZiAubXktd2Vic2l0ZXMpXG5cdFx0JCgnLm15LXdlYnNpdGVzJykuY2xpY2soZnVuY3Rpb24oKXtcblx0XHRcdFNob3dXZWJzaXRlcygpO1xuXG5cdFx0fSk7XG5cbi8vU2hvdyB0aGUgdHJlZSBmb3IgYSB3ZWJzaXRlXG5cdGZ1bmN0aW9uIFJvb3QoX3JlcG9OYW1lLCBfcmVwb093bmVyLCBfcmVwb0JyYW5jaCwgX3JlcG9VcmwsIF9zaG93UGFnZXMgKXtcblx0XHRSZXBvTmFtZSA9IF9yZXBvTmFtZTtcblx0XHRSZXBvT3duZXIgPSBfcmVwb093bmVyO1xuXHRcdFJlcG9QYXRoID0gJy9yZXBvcy8nICsgUmVwb093bmVyICsgJy8nICsgUmVwb05hbWUgKyAnLyc7XG5cdFx0UmVwb0JyYW5jaCA9IF9yZXBvQnJhbmNoO1xuXHRcdFJlcG9VcmwgPSBfcmVwb1VybDtcblxuXHRcdCQoJy5sb2FkaW5nLCAubm9jbGljaycpLnRvZ2dsZSgpO1xuXHRcdCQoJ2JvZHknKS5hdHRyKCdkYXRhLWNvbnRlbnQnLCAndHJlZScpO1xuXHRcdCQoJ21haW4gLmNvbnRlbnQsIG1haW4gLmltYWdlcywgYXNpZGUgdWwsICNGVGl0bGUnKS5lbXB0eSgpO1xuXHRcdCQoJy50aXRsZScpLnRleHQoUmVwb05hbWUpLmF0dHIoJ2RhdGEtc2l0ZScsIFJlcG9OYW1lKS5hdHRyKCdkYXRhLW93bmVyJywgUmVwb093bmVyKS5hdHRyKCdkYXRhLWJyYW5jaCcsIFJlcG9CcmFuY2gpLmF0dHIoJ2RhdGEtdXJsJywgUmVwb1VybCk7XG5cdFx0aWYoIV9zaG93UGFnZXMpe1xuXHRcdFx0JCgnaGVhZGVyIC51cmwnKS5odG1sKCcoPGEgaHJlZj1cImh0dHA6Ly8nICsgUmVwb1VybCArICdcIiB0YXJnZXQ9XCJfYmxhbmtcIj4nICsgUmVwb1VybCArICc8L2E+KScpO1xuXHRcdFx0JCgnYm9keScpLmF0dHIoJ2RhdGEtcGFnZXMnLCAnMCcpO1xuXHRcdH1lbHNle1xuXHRcdFx0JCgnYm9keScpLmF0dHIoJ2RhdGEtcGFnZXMnLCAnMScpO1xuXHRcdH1cblxuXHRcdFRyZWUoUmVwb0JyYW5jaCwgZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0dmFyIF9uYW1lO1xuXHRcdFx0JC5lYWNoKGRhdGEsIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XG5cdFx0XHRcdF9uYW1lID0gdmFsdWUucGF0aC50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0XHRcdGlmIChfbmFtZS5tYXRjaCgnLm1kJCcpICYmIF9uYW1lICE9PSAncmVhZG1lLm1kJyB8fCBfbmFtZS5tYXRjaCgnLmh0bWwkJykgfHwgX25hbWUubWF0Y2goJy5odG0kJykgfHwgX25hbWUubWF0Y2goJy5tYXJrZG93biQnKSl7XG5cdFx0XHRcdFx0aWYoX3Nob3dQYWdlcyl7XG5cdFx0XHRcdFx0XHQkKCcjRlRpdGxlJykudGV4dCgnUGFnZXMnKTtcblx0XHRcdFx0XHRcdCQoJ21haW4gLmNvbnRlbnQnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJjYXJkXCIgZGF0YS1pY29uPVwiJyArIHZhbHVlLnR5cGUgKyAnXCIgPjxkaXYgY2xhc3M9XCJjYXJkLWJsb2NrXCI+PGkgY2xhc3M9XCJmYVwiPiA8L2k+PGRpdiBjbGFzcz1cIm9wdGlvbnNcIj48c3BhbiBjbGFzcz1cImRlbGV0ZVwiIGRhdGEtcGF0aD1cIicgKyB2YWx1ZS5wYXRoICsgJ1wiPmRlbGV0ZTwvc3Bhbj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwiY2FyZC1mb290ZXJcIiBkYXRhLXR5cGU9XCInICsgdmFsdWUudHlwZSArICdcIiBkYXRhLXBhdGg9XCInICsgdmFsdWUucGF0aCArICdcIiBkYXRhLW5hbWU9XCInICsgdmFsdWUucGF0aCArICdcIiA+JyArIHZhbHVlLnBhdGggKyAnIDxpIGNsYXNzPVwiZmFcIj48L2k+PC9kaXY+PC9kaXY+Jyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRpZighX3Nob3dQYWdlcyl7XG5cdFx0XHRcdFx0XHRpZihfbmFtZS5tYXRjaCgnLmpwZyQnKSB8fCBfbmFtZS5tYXRjaCgnLnBuZyQnKSB8fCBfbmFtZS5tYXRjaCgnLmdpZiQnKSB8fCBfbmFtZS5tYXRjaCgnLnN2ZyQnKSl7XG5cdFx0XHRcdFx0XHRcdCQoJ21haW4gLmltYWdlcycpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImNhcmQgaW1hZ2VcIiBkYXRhLW5hbWU9XCInICsgdmFsdWUubmFtZSArICdcIiBkYXRhLXBhdGg9XCInICsgdmFsdWUucGF0aCArICdcIj48aW1nIHNyYz1cImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS8nICsgUmVwb093bmVyICsgJy8nICsgUmVwb05hbWUgKyAnLycgKyBSZXBvQnJhbmNoICsgJy8nICsgdmFsdWUucGF0aCArICdcIj48ZGl2IGNsYXNzPVwib3B0aW9uc1wiPjxzcGFuIGNsYXNzPVwibmFtZVwiPicgKyB2YWx1ZS5wYXRoICsgJzwvc3Bhbj48c3BhbiBjbGFzcz1cImRlbGV0ZVwiIGRhdGEtcGF0aD1cIicgKyB2YWx1ZS5wYXRoICsgJ1wiPmRlbGV0ZTwvc3Bhbj48L2Rpdj48L2Rpdj4nKTtcblx0XHRcdFx0XHRcdH1lbHNlIGlmIChfbmFtZSAhPT0gJy5kc19zdG9yZScgfHwgX25hbWUgIT09ICdfc2l0ZScpe1xuXHRcdFx0XHRcdFx0XHQkKCdtYWluIC5jb250ZW50JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiY2FyZFwiIGRhdGEtaWNvbj1cIicgKyB2YWx1ZS50eXBlICsgJ1wiID48ZGl2IGNsYXNzPVwiY2FyZC1ibG9ja1wiPjxpIGNsYXNzPVwiZmFcIj4gPC9pPjxkaXYgY2xhc3M9XCJvcHRpb25zXCI+PHNwYW4gY2xhc3M9XCJkZWxldGVcIiBkYXRhLXBhdGg9XCInICsgdmFsdWUucGF0aCArICdcIj5kZWxldGU8L3NwYW4+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImNhcmQtZm9vdGVyXCIgZGF0YS10eXBlPVwiJyArIHZhbHVlLnR5cGUgKyAnXCIgZGF0YS1wYXRoPVwiJyArIHZhbHVlLnBhdGggKyAnXCIgZGF0YS1uYW1lPVwiJyArIHZhbHVlLnBhdGggKyAnXCIgPicgKyB2YWx1ZS5wYXRoICsgJyA8aSBjbGFzcz1cImZhXCI+PC9pPjwvZGl2PjwvZGl2PicpO1xuXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCQoJ2FzaWRlIHVsJykuYXBwZW5kKCc8bGkgZGF0YS10eXBlPVwiJyArIHZhbHVlLnR5cGUgKyAnXCIgZGF0YS1wYXRoPVwiJyArIHZhbHVlLnBhdGggKyAnXCIgZGF0YS1uYW1lPVwiJyArIHZhbHVlLnBhdGggKyAnXCI+PGkgY2xhc3M9XCJmYVwiPjwvaT4gJyArIHZhbHVlLnBhdGggKyAnPC9saT4nKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh2YWx1ZS5wYXRoID09PSAnQ05BTUUnKSB7XG5cdFx0XHRcdFx0UmVhZCgnQ05BTUUnLCBSZXBvQnJhbmNoLCBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0XHRpZihkYXRhLmluZGV4T2YoJy4nKSAhPSAtMSl7XG5cdFx0XHRcdFx0XHRcdCQoJ2hlYWRlciAudXJsJykuaHRtbCgnKDxhIGhyZWY9XCJodHRwOi8vJyArIGRhdGEgKyAnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JyArIGRhdGEgKyAnPC9hPiknKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGlmKCFfc2hvd1BhZ2VzKXtcblx0XHRcdFx0JCgnbWFpbiAuY29udGVudCcpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImNhcmRcIiBkYXRhLWljb249XCJ0cmVlXCIgPjxkaXYgY2xhc3M9XCJjYXJkLWJsb2NrXCI+PGkgY2xhc3M9XCJmYVwiPiA8L2k+PC9kaXY+PGRpdiBjbGFzcz1cImNhcmQtZm9vdGVyXCIgZGF0YS1zaXRlPVwiJyArIFJlcG9OYW1lICsnXCIgZGF0YS1vd25lcj1cIicgKyBSZXBvT3duZXIgKyAnXCIgZGF0YS1icmFuY2g9XCInICsgUmVwb0JyYW5jaCArICdcIiBkYXRhLXVybD1cIicgKyBfcmVwb1VybCArICdcIiBkYXRhLXBhZ2VzPVwiJyArIHRydWUgKyAnXCI+UGFnZXMgPGkgY2xhc3M9XCJmYVwiPjwvaT48L2Rpdj48L2Rpdj4nKTtcblx0XHRcdH1cblxuXHRcdFx0JCgnYXNpZGUgdWwnKS5hcHBlbmQoJzxsaSBkYXRhLXNpdGU9XCInICsgUmVwb05hbWUgKydcIiBkYXRhLW93bmVyPVwiJyArIFJlcG9Pd25lciArICdcIiBkYXRhLWJyYW5jaD1cIicgKyBSZXBvQnJhbmNoICsgJ1wiIGRhdGEtdXJsPVwiJysgUmVwb05hbWUgKyAnXCIgZGF0YS1wYWdlcz1cIicgKyB0cnVlICsgJ1wiPjxpIGNsYXNzPVwiZmEgZmEtZm9sZGVyLW9wZW4tb1wiPjwvaT4gUGFnZXM8L2xpPicpO1xuXG5cdFx0XHQkKCdhc2lkZSB1bCcpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdCAgICAkKCdbZGF0YS10eXBlPVwiYmxvYlwiXScsIHRoaXMpLnByZXBlbmRUbyh0aGlzKTtcblx0XHQgICAgJCgnW2RhdGEtdHlwZT1cInRyZWVcIl0nLCB0aGlzKS5hcHBlbmRUbyh0aGlzKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdCQoJy5sb2FkaW5nLCAubm9jbGljaycpLnRvZ2dsZSgpO1xuXHR9XG5cdC8vQ2FsbCB0aGUgZnVuY3Rpb24gKEhlYWRlciByZXBvIG5hbWUsIHNpZGViYXIgcmVwbyBuYW1lLCBicmVhZGNydW1iIHJlcG8gbmFtZSlcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLXNpdGVdJywgZnVuY3Rpb24oKXtcblx0XHRcdCQoJy5icmVhZGNydW1iIC5mYS1ob21lJykubmV4dEFsbCgpLnJlbW92ZSgpO1xuXHRcdFx0aWYoJCh0aGlzKS5hdHRyKCdkYXRhLXBhZ2VzJykpe1xuXHRcdFx0XHQkKCcuYnJlYWRjcnVtYicpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJyZXBvXCI+PGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1kb3VibGUtcmlnaHRcIj48L2k+IDxzcGFuIGRhdGEtc2l0ZT1cIicgKyBSZXBvTmFtZSArICdcIiBkYXRhLW93bmVyPVwiJyArIFJlcG9Pd25lciArICdcIiBkYXRhLWJyYW5jaD1cIicgKyBSZXBvQnJhbmNoICsgJ1wiIGRhdGEtdXJsPScgKyBSZXBvVXJsICsgJz4nICsgUmVwb05hbWUgKyAnPC9zcGFuPjwvc3Bhbj4nKTtcblx0XHRcdH1cblx0XHRcdFJvb3QoJCh0aGlzKS5hdHRyKCdkYXRhLXNpdGUnKSwgJCh0aGlzKS5hdHRyKCdkYXRhLW93bmVyJyksICQodGhpcykuYXR0cignZGF0YS1icmFuY2gnKSwgJCh0aGlzKS5hdHRyKCdkYXRhLXVybCcpLCAkKHRoaXMpLmF0dHIoJ2RhdGEtcGFnZXMnKSk7XG5cdFx0fSk7XG5cblxuLy8gU2hvdyBmb2xkZXIgY29udGVudHNcblx0ZnVuY3Rpb24gT3BlbihfY3VycmVudE5hbWUsIF9jdXJyZW50UGF0aCl7XG5cdFx0Q3VycmVudE5hbWUgPSBfY3VycmVudE5hbWU7XG5cdFx0Q3VycmVudFBhdGggPSBfY3VycmVudFBhdGg7XG5cdFx0JCgnLmxvYWRpbmcsIC5ub2NsaWNrJykudG9nZ2xlKCk7XG5cdFx0JCgnYm9keScpLmF0dHIoJ2RhdGEtY29udGVudCcsICdkaXInKS5hdHRyKCdkYXRhLXBhZ2VzJywgJzAnKTtcblx0XHQkKCcjRlRpdGxlJykudGV4dChDdXJyZW50TmFtZSk7XG5cdFx0JCgnbWFpbiAuY29udGVudCwgbWFpbiAuaW1hZ2VzJykuZW1wdHkoKTtcblxuXHRcdENvbnRlbnQoQ3VycmVudFBhdGgsIFJlcG9CcmFuY2gsIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdHZhciBfbmFtZTtcblx0XHRcdGlmKGRhdGEgIT09IDQwNCl7Ly9pZiB0aGUgZnVuY3Rpb24gcmV0cmlldmVzIGNvbnRlbnRzICh3aGVuIGRlbGV0aW5nIGZpbGVzIGlmIHRoZSBmb2xkZXIgaXMgbGVmdCBlbXB0eSB0aGUgZm9sZGVyIGlzIGRlbGV0ZWQgdG9vIHNvIHRoZSBmdW5jdGlvbiByZXR1cm5zIGVycm9yKVxuXHRcdFx0XHQkLmVhY2goZGF0YSwgZnVuY3Rpb24oIGluZGV4LCB2YWx1ZSApe1xuXHRcdFx0XHRcdF9uYW1lID0gdmFsdWUucGF0aC50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdGlmKCF2YWx1ZS5wYXRoLm1hdGNoKCcuZHNfc3RvcmUkJykpe1xuXHRcdFx0XHRcdFx0aWYodmFsdWUucGF0aC5tYXRjaCgnLmpwZyQnKSB8fCB2YWx1ZS5wYXRoLm1hdGNoKCcucG5nJCcpIHx8IHZhbHVlLnBhdGgubWF0Y2goJy5naWYkJykgfHwgdmFsdWUucGF0aC5tYXRjaCgnLnN2ZyQnKSl7XG5cdFx0XHRcdFx0XHRcdCQoJ21haW4gLmltYWdlcycpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImNhcmQgaW1hZ2VcIiBkYXRhLW5hbWU9XCInICsgdmFsdWUubmFtZSArICdcIiBkYXRhLXBhdGg9XCInICsgdmFsdWUucGF0aCArICdcIj48ZGl2IGNsYXNzPVwiY2FyZC1ibG9ja1wiPjxpbWcgc3JjPVwiJyArIHZhbHVlLmRvd25sb2FkX3VybCArICdcIj48ZGl2IGNsYXNzPVwib3B0aW9uc1wiPjxzcGFuIGNsYXNzPVwibmFtZVwiPicgKyB2YWx1ZS5uYW1lICsgJzwvc3Bhbj48c3BhbiBjbGFzcz1cImRlbGV0ZVwiIGRhdGEtcGF0aD1cIicgKyB2YWx1ZS5wYXRoICsgJ1wiPmRlbGV0ZTwvc3Bhbj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcblx0XHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0XHQkKCdtYWluIC5jb250ZW50JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiY2FyZFwiIGRhdGEtaWNvbj1cIicgKyB2YWx1ZS50eXBlICsgJ1wiPjxkaXYgY2xhc3M9XCJjYXJkLWJsb2NrXCI+PGkgY2xhc3M9XCJmYVwiPjwvaT48ZGl2IGNsYXNzPVwib3B0aW9uc1wiPjxzcGFuIGNsYXNzPVwiZGVsZXRlXCIgZGF0YS1wYXRoPVwiJyArIHZhbHVlLnBhdGggKyAnXCI+ZGVsZXRlPC9zcGFuPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJjYXJkLWZvb3RlclwiIGRhdGEtdHlwZT1cIicgKyB2YWx1ZS50eXBlICsgJ1wiIGRhdGEtcGF0aD1cIicgKyB2YWx1ZS5wYXRoICsgJ1wiIGRhdGEtbmFtZT1cIicgKyB2YWx1ZS5uYW1lICsgJ1wiID4nICsgdmFsdWUubmFtZSArICcgPGkgY2xhc3M9XCJmYVwiPjwvaT48L2Rpdj48L2Rpdj4nKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fWVsc2V7Ly9pbiB0aGlzIGNhc2UgZ28gdG8gdGhlIHByZWNlZGluZyBmb2xkZXJcblx0XHRcdFx0JCgnaGVhZGVyIC5icmVhZGNydW1iIHNwYW46bGFzdC1jaGlsZCBzcGFuJykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdH1cblx0XHRcdCQoJy5sb2FkaW5nLCAubm9jbGljaycpLnRvZ2dsZSgpO1xuXHRcdH0pO1xuXHR9XG5cdC8vQ2FsbCB0aGUgZnVuY3Rpb25cblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLXR5cGU9XCJ0cmVlXCJdLCBbZGF0YS10eXBlPVwiZGlyXCJdLCBbZGF0YS10eXBlPVwiYnJlYWRjcnVtYlwiXScsIGZ1bmN0aW9uKCl7XG5cdFx0XHRpZigkKHRoaXMpLmF0dHIoJ2RhdGEtdHlwZScpID09PSBcInRyZWVcIil7XG5cdFx0XHRcdCQoJy5icmVhZGNydW1iIC5mYS1ob21lJykubmV4dEFsbCgpLnJlbW92ZSgpO1xuXHRcdFx0XHQkKCcuYnJlYWRjcnVtYicpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJyZXBvXCI+PGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1kb3VibGUtcmlnaHRcIj48L2k+IDxzcGFuIGRhdGEtc2l0ZT1cIicgKyBSZXBvTmFtZSArICdcIiBkYXRhLW93bmVyPVwiJyArIFJlcG9Pd25lciArICdcIiBkYXRhLWJyYW5jaD1cIicgKyBSZXBvQnJhbmNoICsgJ1wiIGRhdGEtdXJsPVwiJyArIFJlcG9VcmwgKyAnXCI+JyArIFJlcG9OYW1lICsgJzwvc3Bhbj48L3NwYW4+Jyk7XG5cdFx0XHR9ZWxzZSBpZigkKHRoaXMpLmF0dHIoJ2RhdGEtdHlwZScpID09PSBcImJyZWFkY3J1bWJcIil7XG5cdFx0XHRcdCQodGhpcykucGFyZW50KCcuZm9sZGVyJykubmV4dEFsbCgpLnJlbW92ZSgpO1xuXHRcdFx0XHQkKHRoaXMpLnBhcmVudCgnLmZvbGRlcicpLnJlbW92ZSgpO1xuXHRcdFx0fWVsc2V7Ly9pZiBjbGljayBpbiBhIGRpclxuXHRcdFx0XHQkKCcuYnJlYWRjcnVtYicpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJmb2xkZXJcIj48aSBjbGFzcz1cImZhIGZhLWFuZ2xlLWRvdWJsZS1yaWdodFwiPjwvaT4gPHNwYW4gZGF0YS10eXBlPVwiYnJlYWRjcnVtYlwiIGRhdGEtcGF0aD1cIicgKyBDdXJyZW50UGF0aCArICdcIiBkYXRhLW5hbWU9XCInICsgQ3VycmVudE5hbWUgKyAnXCI+JyArIEN1cnJlbnROYW1lICsgJzwvc3Bhbj48L3NwYW4+Jyk7XG5cdFx0XHR9XG5cblx0XHRcdE9wZW4oJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKSwgJCh0aGlzKS5hdHRyKCdkYXRhLXBhdGgnKSk7XG5cdFx0fSk7XG5cbi8vU2hvdyBmaWxlIGNvbnRlbnRzXG5cdGZ1bmN0aW9uIEVkaXQoX2N1cnJlbnROYW1lLCBfY3VycmVudFBhdGgsIF9lZGl0b3Ipe1xuQ3VycmVudE5hbWUgPSBfY3VycmVudE5hbWU7XG5cdFx0Q3VycmVudFBhdGggPSBfY3VycmVudFBhdGg7XG5cdFx0JCgnLmxvYWRpbmcsIC5ub2NsaWNrJykudG9nZ2xlKCk7XG5cdFx0JCgnYm9keScpLmF0dHIoJ2RhdGEtY29udGVudCcsICdmaWxlJykuYXR0cignZGF0YS1wYWdlcycsICcwJyk7XG5cdFx0JCgnI0ZUaXRsZScpLnRleHQoQ3VycmVudE5hbWUpO1xuXHRcdCQoJ21haW4gLmNvbnRlbnQsIG1haW4gLmltYWdlcycpLmVtcHR5KCk7XG5cblx0XHRSZWFkKEN1cnJlbnRQYXRoLCBSZXBvQnJhbmNoLCBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRpZihfZWRpdG9yID09PSAnbWQnKXtcblx0XHRcdFx0aWYoZGF0YS5zdWJzdHJpbmcoMCwgNCkgPT09IFwiLS0tXFxuXCIpeyAvL0V4dHJhY3QgRnJvbnQgTWF0dGVyXG5cdFx0XHRcdFx0RnJvbnRNYXR0ZXIgPSAkLnRyaW0oZGF0YS5zcGxpdCgnLS0tJylbMV0uc3BsaXQoJy0tLScpWzBdKTtcblx0XHRcdFx0XHRkYXRhID0gZGF0YS5yZXBsYWNlKEZyb250TWF0dGVyICwgJycpO1xuXHRcdFx0XHRcdGRhdGEgPSBkYXRhLnJlcGxhY2UoJy0tLScgLCAnJyk7XG5cdFx0XHRcdFx0ZGF0YSA9ICQudHJpbShkYXRhLnJlcGxhY2UoJy0tLScgLCAnJykpO1xuXHRcdFx0XHR9ZWxzZXsgLy9TZXQgYSBkZWZhdWx0IEZyb250IE1hdHRlciAod29udCBiZSBzYXZlZClcblx0XHRcdFx0XHRGcm9udE1hdHRlciA9ICdSZXBsYWNlIHRoaXMgdGV4dCB3aXRoIHlvdXIgRnJvbnQgTWF0dGVyIGJsb2NrLlxcblxcbiEgVElQOiBZb3UgY2FuIHNraXAgdGhlIHRyaXBsZS1kYXNoZWQgbGluZXMgKC0tLSksIHRoZXkgd2lsbCBiZSBhZGRlZCBhdXRvbWF0aWNhbGx5Jztcblx0XHRcdFx0fVxuXHRcdFx0XHRtZEVkaXRvcihkYXRhLCBGcm9udE1hdHRlcik7XG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0aHRtbEVkaXRvcihkYXRhLCAnbWFpbiAuY29udGVudCcpO1xuXHRcdFx0fVxuXHRcdFx0JCgnLmxvYWRpbmcsIC5ub2NsaWNrJykudG9nZ2xlKCk7XG5cdFx0fSk7XG5cdH1cblx0Ly9DYWxsIHRoZSBmdW5jdGlvblxuXHQgXHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLXR5cGU9XCJibG9iXCJdLCBbZGF0YS10eXBlPVwiZmlsZVwiXScsIGZ1bmN0aW9uKCl7XG5cdCBcdFx0aWYoJCh0aGlzKS5hdHRyKCdkYXRhLXR5cGUnKSA9PT0gXCJibG9iXCIpe1xuXHQgXHRcdFx0aWYoJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKSA9PT0gJ0NOQU1FJyB8fCAkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpLm1hdGNoKCcueW1sJCcpIHx8ICQodGhpcykuYXR0cignZGF0YS1uYW1lJykubWF0Y2goJy54bWwkJykpe1xuXHQgXHRcdFx0XHQkKCcuYnJlYWRjcnVtYiAuZmEtaG9tZScpLm5leHRBbGwoKS5yZW1vdmUoKTtcblx0XHRcdFx0XHQkKCcuYnJlYWRjcnVtYicpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJyZXBvXCI+PGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1kb3VibGUtcmlnaHRcIj48L2k+IDxzcGFuIGRhdGEtc2l0ZT1cIicgKyBSZXBvTmFtZSArICdcIiBkYXRhLW93bmVyPVwiJyArIFJlcG9Pd25lciArICdcIiBkYXRhLWJyYW5jaD1cIicgKyBSZXBvQnJhbmNoICsgJ1wiIGRhdGEtdXJsPVwiJyArIFJlcG9VcmwgKyAnXCI+JyArIFJlcG9OYW1lICsgJzwvc3Bhbj48L3NwYW4+Jyk7XG5cdFx0IFx0XHR9XG5cdFx0XHR9ZWxzZSBpZighJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKS5tYXRjaCgnLmh0bWwkJykgJiYgISQodGhpcykuYXR0cignZGF0YS1uYW1lJykubWF0Y2goJy5tZCQnKSAmJiAhJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKS5tYXRjaCgnLmh0bSQnKSAmJiAhJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKS5tYXRjaCgnLm1hcmtkb3duJCcpKXtcblx0XHRcdFx0JCgnLmJyZWFkY3J1bWInKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVwiZm9sZGVyXCI+PGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1kb3VibGUtcmlnaHRcIj48L2k+IDxzcGFuIGRhdGEtdHlwZT1cImJyZWFkY3J1bWJcIiBkYXRhLXBhdGg9XCInICsgQ3VycmVudFBhdGggKyAnXCIgZGF0YS1uYW1lPVwiJyArIEN1cnJlbnROYW1lICsgJ1wiPicgKyBDdXJyZW50TmFtZSArICc8L3NwYW4+PC9zcGFuPicpO1xuXHRcdCBcdH1cblxuXHQgXHRcdGlmKCQodGhpcykuYXR0cignZGF0YS1uYW1lJykubWF0Y2goJy5odG1sJCcpIHx8ICQodGhpcykuYXR0cignZGF0YS1uYW1lJykubWF0Y2goJy5tZCQnKSB8fCAkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpLm1hdGNoKCcuaHRtJCcpIHx8ICQodGhpcykuYXR0cignZGF0YS1uYW1lJykubWF0Y2goJy5tYXJrZG93biQnKSl7XG5cdCBcdFx0XHQkKCcjRWRpdG9ycyAubW9kYWwtZm9vdGVyIC5idG4nKS5hdHRyKCdkYXRhLXR5cGUnLCAkKHRoaXMpLmF0dHIoJ2RhdGEtdHlwZScpKS5hdHRyKCdkYXRhLW5hbWUnLCAkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpKS5hdHRyKCdkYXRhLXBhdGgnLCAkKHRoaXMpLmF0dHIoJ2RhdGEtcGF0aCcpKS5hdHRyKCdkYXRhLWNsYXNzJywgJCh0aGlzKS5hdHRyKCdkYXRhLWNsYXNzJykpO1xuXHQgXHRcdFx0JCgnI0VkaXRvcnMnKS5tb2RhbCgndG9nZ2xlJyk7XG5cdCBcdFx0fWVsc2UgaWYgKCQodGhpcykuYXR0cignZGF0YS1uYW1lJykgPT09ICdDTkFNRScpe1xuXHQgXHRcdFx0JCgnI0NOQU1FJykubW9kYWwoJ3RvZ2dsZScpO1xuXHQgXHRcdFx0UmVhZCgnQ05BTUUnLCBSZXBvQnJhbmNoLCBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0JCgnI0N1c3RvbURvbWFpbicpLnZhbCgkLnRyaW0oZGF0YSkpO1xuXHRcdFx0XHR9KTtcblx0IFx0XHR9ZWxzZXtcblx0IFx0XHRcdEVkaXQoJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKSwgJCh0aGlzKS5hdHRyKCdkYXRhLXBhdGgnKSwgJ2h0bWwnKVxuXHQgXHRcdH1cblx0XHR9KTtcblxuXHRcdCQoJyNFZGl0b3JzIC5tb2RhbC1mb290ZXIgLmJ0bicpLmNsaWNrKGZ1bmN0aW9uKCl7XG5cdFx0XHRpZigkKHRoaXMpLmF0dHIoJ2RhdGEtdHlwZScpID09PSBcImJsb2JcIil7XG5cdFx0XHRcdCQoJy5icmVhZGNydW1iIC5mYS1ob21lJykubmV4dEFsbCgpLnJlbW92ZSgpOy8vdXBkYXRlIHRoZSBicmVhZGNydW1iXG5cdFx0XHRcdCQoJy5icmVhZGNydW1iJykuYXBwZW5kKCc8c3BhbiBjbGFzcz1cInJlcG9cIj48aSBjbGFzcz1cImZhIGZhLWFuZ2xlLWRvdWJsZS1yaWdodFwiPjwvaT4gPHNwYW4gZGF0YS1zaXRlPVwiJyArIFJlcG9OYW1lICsgJ1wiIGRhdGEtb3duZXI9XCInICsgUmVwb093bmVyICsgJ1wiIGRhdGEtYnJhbmNoPVwiJyArIFJlcG9CcmFuY2ggKyAnXCIgZGF0YS11cmw9XCInICsgUmVwb1VybCArICdcIj4nICsgUmVwb05hbWUgKyAnPC9zcGFuPjwvc3Bhbj4nKTtcblx0XHRcdFx0aWYoJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKS5tYXRjaCgnLm1kJCcpICYmICQodGhpcykuYXR0cignZGF0YS1uYW1lJykgIT09ICdSRUFETUUubWQnIHx8ICQodGhpcykuYXR0cignZGF0YS1uYW1lJykubWF0Y2goJy5odG1sJCcpIHx8ICQodGhpcykuYXR0cignZGF0YS1uYW1lJykubWF0Y2goJy5odG0kJykgfHwgJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKS5tYXRjaCgnLm1hcmtkb3duJCcpKXtcblx0XHRcdFx0XHQkKCcuYnJlYWRjcnVtYicpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJyZXBvXCI+PGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1kb3VibGUtcmlnaHRcIj48L2k+IDxzcGFuIGRhdGEtc2l0ZT1cIicgKyBSZXBvTmFtZSArICdcIiBkYXRhLW93bmVyPVwiJyArIFJlcG9Pd25lciArICdcIiBkYXRhLWJyYW5jaD1cIicgKyBSZXBvQnJhbmNoICsgJ1wiIGRhdGEtdXJsPVwiJyArIFJlcG9VcmwgKyAnXCIgZGF0YS1wYWdlcz1cIicgKyB0cnVlICsgJ1wiPlBhZ2VzPC9zcGFuPjwvc3Bhbj4nKTtcblx0XHRcdFx0fVxuIFx0XHRcdH1lbHNle1xuXHRcdFx0XHQkKCcuYnJlYWRjcnVtYicpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJmb2xkZXJcIj48aSBjbGFzcz1cImZhIGZhLWFuZ2xlLWRvdWJsZS1yaWdodFwiPjwvaT4gPHNwYW4gZGF0YS10eXBlPVwiYnJlYWRjcnVtYlwiIGRhdGEtcGF0aD1cIicgKyBDdXJyZW50UGF0aCArICdcIiBkYXRhLW5hbWU9XCInICsgQ3VycmVudE5hbWUgKyAnXCI+JyArIEN1cnJlbnROYW1lICsgJzwvc3Bhbj48L3NwYW4+Jyk7XG5cdFx0IFx0fVxuXG5cdFx0XHRFZGl0KCQodGhpcykuYXR0cignZGF0YS1uYW1lJyksICQodGhpcykuYXR0cignZGF0YS1wYXRoJyksICQodGhpcykuYXR0cignZGF0YS1lZGl0b3InKSk7XG5cdFx0fSk7XG5cbi8vSHRtbCBlZGl0b3Jcblx0ZnVuY3Rpb24gaHRtbEVkaXRvcihfZGF0YSwgX2xvY2F0aW9uKXtcblx0XHQkKF9sb2NhdGlvbikuaHRtbCgnPHByZSBpZD1cImVkaXRvclwiPjwvcHJlPicpO1xuXHRcdCQoJ21haW4gLmNvbnRlbnQnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmaWxlQWN0aW9uc1wiPicgKyBTYXZlQnRuICsgJzwvZGl2PicpO1xuXHRcdCQoJy5maWxlQWN0aW9ucyAuYnRuJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS1jaGVja1wiPjwvaT4gVXAgdG8gZGF0ZScpO1xuXG5cdFx0dmFyIGVkaXRvciA9IGFjZS5lZGl0KFwiZWRpdG9yXCIpO1xuXHRcdGVkaXRvci4kYmxvY2tTY3JvbGxpbmcgPSBJbmZpbml0eTtcblx0XHRlZGl0b3Iuc2Vzc2lvbi5zZXRNb2RlKFwiYWNlL21vZGUvaHRtbFwiKTtcblx0XHRlZGl0b3Iuc2V0T3B0aW9uKFwiZW5hYmxlRW1tZXRcIiwgdHJ1ZSk7XG5cdFx0ZWRpdG9yLnJlbmRlcmVyLnNldFNjcm9sbE1hcmdpbigxMCwgMTApO1xuXHRcdGVkaXRvci5zZXRPcHRpb25zKHtcblx0XHQgIGF1dG9TY3JvbGxFZGl0b3JJbnRvVmlldzogdHJ1ZVxuXHRcdH0pO1xuXG5cdFx0ZWRpdG9yLnNldFZhbHVlKF9kYXRhLCAtMSk7XG5cdFx0ZWRpdG9yLmdldFNlc3Npb24oKS5zZXRUYWJTaXplKGh0bWxFZGl0b3JUYWJTaXplKTtcblxuXHRcdGVkaXRvci5vbignaW5wdXQnLCBmdW5jdGlvbigpIHtcblx0XHRcdGlmKF9kYXRhID09PSBlZGl0b3IuZ2V0VmFsdWUoKSl7XG5cdFx0XHRcdCQoJy5maWxlQWN0aW9ucyAuYnRuJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS1jaGVja1wiPjwvaT4gVXAgdG8gZGF0ZScpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0JCgnLmZpbGVBY3Rpb25zIC5idG4nKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLXNhdmVcIj48L2k+IFNhdmUnKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQkKGRvY3VtZW50KS5vbmUoJ2NsaWNrJywgJy5maWxlQWN0aW9ucyAuYnRuJywgZnVuY3Rpb24oKXtcblx0XHRcdGlmKF9sb2NhdGlvbiA9PT0gJ21haW4gLmNvbnRlbnQnKXtcblx0XHRcdFx0c2F2ZUNoYW5nZXMoZWRpdG9yLmdldFZhbHVlKCkpO1xuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdEZyb250TWF0dGVyID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cdFx0XHRcdCQoJyNzYXZlSW5NZCcpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0fVxuXG4vL01hcmtkb3duIGVkaXRvclxuXHRmdW5jdGlvbiBtZEVkaXRvcihfZGF0YSwgX2ZtKXtcblx0XHQkKCdtYWluIC5jb250ZW50JykuaHRtbCgnPHVsIGNsYXNzPVwibmF2IG5hdi10YWJzXCIgcm9sZT1cInRhYmxpc3RcIj48bGkgY2xhc3M9XCJuYXYtaXRlbVwiPjxhIGNsYXNzPVwibmF2LWxpbmsgYWN0aXZlXCIgaHJlZj1cIiNlZGl0Q29udGVudFwiIHJvbGU9XCJ0YWJcIiBkYXRhLXRvZ2dsZT1cInRhYlwiPkNvbnRlbnQ8L2E+PC9saT48bGkgY2xhc3M9XCJuYXYtaXRlbVwiPjxhIGNsYXNzPVwibmF2LWxpbmtcIiBocmVmPVwiI2VkaXRGbVwiIHJvbGU9XCJ0YWJcIiBkYXRhLXRvZ2dsZT1cInRhYlwiPkZyb250IE1hdHRlcjwvYT48L2xpPjwvdWw+PGRpdiBjbGFzcz1cInRhYi1jb250ZW50XCI+PGRpdiByb2xlPVwidGFicGFuZWxcIiBjbGFzcz1cInRhYi1wYW5lIGFjdGl2ZVwiIGlkPVwiZWRpdENvbnRlbnRcIj48dGV4dGFyZWEgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cIm1kRWRpdG9yXCI+PC90ZXh0YXJlYT48L2Rpdj48ZGl2IHJvbGU9XCJ0YWJwYW5lbFwiIGNsYXNzPVwidGFiLXBhbmVcIiBpZD1cImVkaXRGbVwiPjwvZGl2PjwvZGl2PjxkaXYgaWQ9XCJzYXZlSW5NZFwiIGNsYXNzPVwiaGlkZGVuXCI+PC9kaXY+Jyk7XG5cblx0XHRodG1sRWRpdG9yKF9mbSwgJyNlZGl0Rm0nKTtcblxuXHRcdHZhciBzaW1wbGVtZGUgPSBuZXcgU2ltcGxlTURFKHtcblx0XHRcdFx0XHRlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1kRWRpdG9yXCIpLFxuXHRcdFx0XHRcdHNwZWxsQ2hlY2tlcjogZmFsc2UsXG5cdFx0XHRcdFx0dGFiU2l6ZTogNCxcblx0XHRcdFx0XHR0b29sYmFyOiBbXCJib2xkXCIsIFwiaXRhbGljXCIsIFwic3RyaWtldGhyb3VnaFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcInxcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJoZWFkaW5nXCIsIFwiaGVhZGluZy1zbWFsbGVyXCIsIFwiaGVhZGluZy1iaWdnZXJcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ8XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwiY29kZVwiLCBcInF1b3RlXCIsIFwidW5vcmRlcmVkLWxpc3RcIiwgXCJvcmRlcmVkLWxpc3RcIiwgXCJob3Jpem9udGFsLXJ1bGVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ8XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwibGlua1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgbmFtZTogXCJpbWFnZVwiLFxuXHRcdFx0XHRcdCAgICAgICAgICAgIGNsYXNzTmFtZTogXCJzZWFyY2gtaW1hZ2UgZmEgZmEtcGljdHVyZS1vXCIsXG5cdFx0XHRcdFx0ICAgICAgICAgICAgYWN0aW9uOiBzZWFyY2hJbWFnZSxcblx0XHRcdFx0XHQgICAgICAgICAgICB0aXRsZTogXCJJbnNlcnQgSW1hZ2VcIixcblx0XHRcdFx0XHQgICAgICAgICAgfSxcblx0XHRcdFx0XHQgICAgICAgICAge1xuXHRcdFx0XHRcdCAgICAgICAgICAgIG5hbWU6IFwiaW1hZ2UyXCIsXG5cdFx0XHRcdFx0ICAgICAgICAgICAgY2xhc3NOYW1lOiBcImluc2VydC1pbWFnZSBmYSBmYS10aW1lc1wiLFxuXHRcdFx0XHRcdCAgICAgICAgICAgIGFjdGlvbjogX2RyYXdJbWFnZSxcblx0XHRcdFx0XHQgICAgICAgICAgICB0aXRsZTogXCJJbnNlcnQgSW1hZ2VcIixcblx0XHRcdFx0XHQgICAgICAgICAgfSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ8XCIgLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcInNpZGUtYnktc2lkZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgbmFtZTogXCJleHBhbmRcIixcblx0XHRcdFx0XHQgICAgICAgICAgICBhY3Rpb246IG1kZXhwYW5kLFxuXHRcdFx0XHRcdCAgICAgICAgICAgIGNsYXNzTmFtZTogXCJleHBhbmQgZmEgZmEtYXJyb3dzLWFsdFwiLFxuXHRcdFx0XHRcdCAgICAgICAgICAgIHRpdGxlOiBcIlRvZ2dsZSBGdWxsc2NyZWVuXCIsXG5cdFx0XHQgICAgICAgIFx0XHRcdH0sXG5cdFx0XHQgICAgICAgIFx0XHRcdFwiZnVsbHNjcmVlblwiLCBcInByZXZpZXdcIlxuXHRcdFx0ICAgICAgICBcdFx0IF1cblx0XHRcdFx0fSk7XG5cblx0XHRmdW5jdGlvbiBfZHJhd0ltYWdlKGVkaXRvcikge1xuXHRcdFx0dmFyIGNtID0gZWRpdG9yLmNvZGVtaXJyb3I7XG5cdFx0XHR2YXIgc3RhdCA9IF9nZXRTdGF0ZShjbSk7XG5cdFx0XHRfcmVwbGFjZXNlbGVjdGlvbihjbSwgc3RhdC5pbWFnZSwgJ1xcbicgKyBJbnNlcnRJbWFnZSArICdcXG4nICwgXCJcIik7XG5cdFx0XHRJbnNlcnRJbWFnZSA9IFwiXCI7XG5cdFx0fVxuXHRcdFNpbXBsZU1ERS5fZHJhd0ltYWdlID0gX2RyYXdJbWFnZTtcblx0XHRTaW1wbGVNREUucHJvdG90eXBlLl9kcmF3SW1hZ2UgPSBmdW5jdGlvbigpIHtcblx0XHRcdF9kcmF3SW1hZ2UodGhpcyk7XG5cdFx0fTtcblx0XHRmdW5jdGlvbiBfZ2V0U3RhdGUoY20sIHBvcykge1xuXHRcdFx0cG9zID0gcG9zIHx8IGNtLmdldEN1cnNvcihcInN0YXJ0XCIpO1xuXHRcdFx0dmFyIHN0YXQgPSBjbS5nZXRUb2tlbkF0KHBvcyk7XG5cdFx0XHRpZighc3RhdC50eXBlKSByZXR1cm4ge307XG5cblx0XHRcdHZhciB0eXBlcyA9IHN0YXQudHlwZS5zcGxpdChcIiBcIik7XG5cblx0XHRcdHZhciByZXQgPSB7fSxcblx0XHRcdFx0ZGF0YSwgdGV4dDtcblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0eXBlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRkYXRhID0gdHlwZXNbaV07XG5cdFx0XHRcdGlmKGRhdGEgPT09IFwic3Ryb25nXCIpIHtcblx0XHRcdFx0XHRyZXQuYm9sZCA9IHRydWU7XG5cdFx0XHRcdH0gZWxzZSBpZihkYXRhID09PSBcInZhcmlhYmxlLTJcIikge1xuXHRcdFx0XHRcdHRleHQgPSBjbS5nZXRMaW5lKHBvcy5saW5lKTtcblx0XHRcdFx0XHRpZigvXlxccypcXGQrXFwuXFxzLy50ZXN0KHRleHQpKSB7XG5cdFx0XHRcdFx0XHRyZXRbXCJvcmRlcmVkLWxpc3RcIl0gPSB0cnVlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXRbXCJ1bm9yZGVyZWQtbGlzdFwiXSA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYoZGF0YSA9PT0gXCJhdG9tXCIpIHtcblx0XHRcdFx0XHRyZXQucXVvdGUgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2UgaWYoZGF0YSA9PT0gXCJlbVwiKSB7XG5cdFx0XHRcdFx0cmV0Lml0YWxpYyA9IHRydWU7XG5cdFx0XHRcdH0gZWxzZSBpZihkYXRhID09PSBcInF1b3RlXCIpIHtcblx0XHRcdFx0XHRyZXQucXVvdGUgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2UgaWYoZGF0YSA9PT0gXCJzdHJpa2V0aHJvdWdoXCIpIHtcblx0XHRcdFx0XHRyZXQuc3RyaWtldGhyb3VnaCA9IHRydWU7XG5cdFx0XHRcdH0gZWxzZSBpZihkYXRhID09PSBcImNvbW1lbnRcIikge1xuXHRcdFx0XHRcdHJldC5jb2RlID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gX3JlcGxhY2VzZWxlY3Rpb24oY20sIGFjdGl2ZSwgc3RhcnQsIGVuZCkge1xuXHRcdFx0aWYoL2VkaXRvci1wcmV2aWV3LWFjdGl2ZS8udGVzdChjbS5nZXRXcmFwcGVyRWxlbWVudCgpLmxhc3RDaGlsZC5jbGFzc05hbWUpKVxuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdHZhciB0ZXh0O1xuXHRcdFx0dmFyIHN0YXJ0UG9pbnQgPSBjbS5nZXRDdXJzb3IoXCJzdGFydFwiKTtcblx0XHRcdHZhciBlbmRQb2ludCA9IGNtLmdldEN1cnNvcihcImVuZFwiKTtcblx0XHRcdGlmKGFjdGl2ZSkge1xuXHRcdFx0XHR0ZXh0ID0gY20uZ2V0TGluZShzdGFydFBvaW50LmxpbmUpO1xuXHRcdFx0XHRzdGFydCA9IHRleHQuc2xpY2UoMCwgc3RhcnRQb2ludC5jaCk7XG5cdFx0XHRcdGVuZCA9IHRleHQuc2xpY2Uoc3RhcnRQb2ludC5jaCk7XG5cdFx0XHRcdGNtLnJlcGxhY2VSYW5nZShzdGFydCArIGVuZCwge1xuXHRcdFx0XHRcdGxpbmU6IHN0YXJ0UG9pbnQubGluZSxcblx0XHRcdFx0XHRjaDogMFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRleHQgPSBjbS5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdFx0Y20ucmVwbGFjZVNlbGVjdGlvbihzdGFydCArIHRleHQgKyBlbmQpO1xuXG5cdFx0XHRcdHN0YXJ0UG9pbnQuY2ggKz0gc3RhcnQubGVuZ3RoO1xuXHRcdFx0XHRpZihzdGFydFBvaW50ICE9PSBlbmRQb2ludCkge1xuXHRcdFx0XHRcdGVuZFBvaW50LmNoICs9IHN0YXJ0Lmxlbmd0aDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Y20uc2V0U2VsZWN0aW9uKHN0YXJ0UG9pbnQsIGVuZFBvaW50KTtcblx0XHRcdGNtLmZvY3VzKCk7XG5cdFx0fVxuXG5cdFx0c2ltcGxlbWRlLnZhbHVlKF9kYXRhKTtcblxuXHRcdCQoJy5lZGl0b3ItdG9vbGJhciAuZmEtY29sdW1ucycpLnRyaWdnZXIoICdjbGljaycgKTtcblx0XHQkKCcuZmEtYXJyb3dzLWFsdDpub3QoLmV4cGFuZCknKS5oaWRlKCk7XG5cdFx0JCgnbWFpbiAuY29udGVudCcpLndyYXBJbm5lcignPGRpdiBpZD1cIm1kLWVkaXRvclwiIGNsYXNzPVwibm9mdWxsXCIgLz4nKTtcblx0XHQkKCcuZWRpdG9yLXRvb2xiYXInKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmaWxlQWN0aW9uc1wiPicgKyBTYXZlQnRuICsgJzwvZGl2PicpO1xuXHRcdCQoJy5lZGl0b3ItdG9vbGJhciAuYWN0aW9ucycpLnRvZ2dsZSgpO1xuXG5cdFx0c2ltcGxlbWRlLmNvZGVtaXJyb3Iub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24oKXtcblx0XHRcdGlmKF9kYXRhID09PSBzaW1wbGVtZGUudmFsdWUoKSl7XG5cdFx0XHRcdCQoJy5maWxlQWN0aW9ucyAuYnRuJykuaHRtbCgnPGkgY2xhc3M9XCJmYSBmYS1jaGVja1wiPjwvaT4gVXAgdG8gZGF0ZScpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0JCgnLmZpbGVBY3Rpb25zIC5idG4nKS5odG1sKCc8aSBjbGFzcz1cImZhIGZhLXNhdmVcIj48L2k+IFNhdmUnKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdCQoZG9jdW1lbnQpLm9uZSgnY2xpY2snLCAnI3NhdmVJbk1kJywgZnVuY3Rpb24oKXtcblx0XHRcdHNhdmVDaGFuZ2VzKEZyb250TWF0dGVyLCBzaW1wbGVtZGUudmFsdWUoKSlcblx0XHR9KTtcblx0fVxuXG5cdC8vRWRpdG9yIGZ1bGwgc2NyZWVuXG5cdFx0ZnVuY3Rpb24gbWRleHBhbmQoKXtcblx0XHRcdCQoJy5leHBhbmQnKS50b2dnbGVDbGFzcygnaXNhY3RpdmUnKTtcblx0XHRcdCQoJyNtZC1lZGl0b3InKS50b2dnbGVDbGFzcygnbm9mdWxsJyk7XG5cdFx0XHQkKCcuZWRpdG9yLXRvb2xiYXIgLmFjdGlvbnMnKS50b2dnbGUoKTtcblx0XHR9XG5cblx0Ly9PcGVuIHRoZSBpbWFnZSBtYW5hZ2VyXG5cdFx0ZnVuY3Rpb24gc2VhcmNoSW1hZ2UoKXtcblx0XHRcdCQoJyNNZEltYWdlJykubW9kYWwoJ3RvZ2dsZScpO1xuXHRcdFx0TWRJbWFnZSgpO1xuXHRcdH1cblxuXHQvL01hcmtkb3duIGltYWdlIG1hbmFnZXJcblx0XHRmdW5jdGlvbiBNZEltYWdlKF9wYXRoKXtcblx0XHRcdCQoJyNNZEltYWdlIC5mb2xkZXJzLCAjTWRJbWFnZSAuZmlsZXMnKS5lbXB0eSgpO1xuXHRcdFx0JCgnI01kSW1hZ2UgLmxvYWRpbmcsIC5ub2NsaWNrJykudG9nZ2xlKCk7XG5cdFx0XHRpZihfcGF0aCl7XG5cdFx0XHRcdCQoJyNNZEltYWdlIC5icmVhZGNydW1iJykuYXR0cignZGF0YS1jdXJyZW50LXBhdGgnLCBfcGF0aClcblx0XHRcdFx0Q29udGVudChfcGF0aCwgUmVwb0JyYW5jaCwgZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHRcdGlmKGRhdGEgIT09IDQwNCl7Ly9pZiB0aGUgZnVuY3Rpb24gcmV0cmlldmVzIGNvbnRlbnRzICh3aGVuIGRlbGV0aW5nIGZpbGVzIGlmIHRoZSBmb2xkZXIgaXMgbGVmdCBlbXB0eSB0aGUgZm9sZGVyIGlzIGRlbGV0ZWQgdG9vIHNvIHRoZSBmdW5jdGlvbiByZXR1cm5zIGVycm9yKVxuXHRcdFx0XHRcdFx0JC5lYWNoKGRhdGEsIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKXtcblx0XHRcdFx0XHRcdFx0aWYoIXZhbHVlLnBhdGgubWF0Y2goJy5EU19TdG9yZSQnKSl7XG5cdFx0XHRcdFx0XHRcdFx0aWYodmFsdWUucGF0aC5tYXRjaCgnLmpwZyQnKSB8fCB2YWx1ZS5wYXRoLm1hdGNoKCcucG5nJCcpIHx8IHZhbHVlLnBhdGgubWF0Y2goJy5KUEckJykgfHwgdmFsdWUucGF0aC5tYXRjaCgnLlBORyQnKSB8fCB2YWx1ZS5wYXRoLm1hdGNoKCcuZ2lmJCcpIHx8IHZhbHVlLnBhdGgubWF0Y2goJy5HSUYkJykgfHwgdmFsdWUucGF0aC5tYXRjaCgnLnN2ZyQnKSB8fCB2YWx1ZS5wYXRoLm1hdGNoKCcuU1ZHJCcpKXtcblx0XHRcdFx0XHRcdFx0XHRcdCQoJyNNZEltYWdlIC5maWxlcycpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImltYWdlXCI+PGltZyBjbGFzcz1cImNhcmRTZWxlY3RcIiBzcmM9XCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vJyArIFJlcG9Pd25lciArICcvJyArIFJlcG9OYW1lICsgJy8nICsgUmVwb0JyYW5jaCArICcvJyArIHZhbHVlLnBhdGggKyAnXCI+PGRpdiBjbGFzcz1cIm9wdGlvbnNcIj48c3BhbiBjbGFzcz1cIm5hbWVcIj4nICsgdmFsdWUucGF0aCArICc8L3NwYW4+PC9kaXY+PGRpdiBkYXRhLW5hbWU9XCInICsgdmFsdWUubmFtZSArICdcIiBkYXRhLXVybD1cImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS8nICsgUmVwb093bmVyICsgJy8nICsgUmVwb05hbWUgKyAnLycgKyBSZXBvQnJhbmNoICsgJy8nICsgdmFsdWUucGF0aCArICdcIiBjbGFzcz1cImJ0biBidG4tc3VjY2VzcyBidG4tYmxvY2tcIj48aSBjbGFzcz1cImZhIGZhLWNoZWNrXCI+PC9pPkFkZDwvZGl2PjwvZGl2PicpO1xuXHRcdFx0XHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0XHRcdFx0JCgnI01kSW1hZ2UgLmZvbGRlcnMnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJmb2xkZXJcIiBkYXRhLXBhdGg9XCInICsgdmFsdWUucGF0aCArICdcIj48aSBjbGFzcz1cImZhIGZhLWZvbGRlci1vcGVuLW9cIj48L2k+PGRpdj4nICsgdmFsdWUubmFtZSArICc8L2Rpdj48L2Rpdj4nKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1lbHNley8vaW4gdGhpcyBjYXNlIGdvIHRvIHRoZSBwcmVjZWRpbmcgZm9sZGVyXG5cdFx0XHRcdFx0XHQkKCdoZWFkZXIgLmJyZWFkY3J1bWIgc3BhbjpsYXN0LWNoaWxkIHNwYW4nKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkKCcjTWRJbWFnZSAubG9hZGluZywgLm5vY2xpY2snKS50b2dnbGUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0JCgnI01kSW1hZ2UgLmJyZWFkY3J1bWInKS5odG1sKCc8c3BhbiBkYXRhLXBhdGg9XCJcIj4nICsgUmVwb05hbWUgKyAnPC9zcGFuPicpO1xuXHRcdFx0XHRUcmVlKFJlcG9CcmFuY2gsIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHQkLmVhY2goZGF0YSwgZnVuY3Rpb24oIGluZGV4LCB2YWx1ZSApIHtcblx0XHRcdFx0XHRcdGlmKHZhbHVlLnR5cGUgPT09ICd0cmVlJyl7XG5cdFx0XHRcdFx0XHRcdCQoJyNNZEltYWdlIC5mb2xkZXJzJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZm9sZGVyXCIgZGF0YS1wYXRoPVwiJyArIHZhbHVlLnBhdGggKyAnXCI+PGkgY2xhc3M9XCJmYSBmYS1mb2xkZXItb3Blbi1vXCI+PC9pPjxkaXY+JyArIHZhbHVlLnBhdGggKyAnPC9kaXY+PC9kaXY+Jyk7XG5cdFx0XHRcdFx0XHR9ZWxzZSBpZih2YWx1ZS5wYXRoLm1hdGNoKCcuanBnJCcpIHx8IHZhbHVlLnBhdGgubWF0Y2goJy5wbmckJykgfHwgdmFsdWUucGF0aC5tYXRjaCgnLkpQRyQnKSB8fCB2YWx1ZS5wYXRoLm1hdGNoKCcuUE5HJCcpIHx8IHZhbHVlLnBhdGgubWF0Y2goJy5naWYkJykgfHwgdmFsdWUucGF0aC5tYXRjaCgnLkdJRiQnKSB8fCB2YWx1ZS5wYXRoLm1hdGNoKCcuc3ZnJCcpIHx8IHZhbHVlLnBhdGgubWF0Y2goJy5TVkckJykpe1xuXHRcdFx0XHRcdFx0XHQkKCcjTWRJbWFnZSAuZmlsZXMnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJpbWFnZVwiPjxpbWcgY2xhc3M9XCJjYXJkU2VsZWN0XCIgc3JjPVwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLycgKyBSZXBvT3duZXIgKyAnLycgKyBSZXBvTmFtZSArICcvJyArIFJlcG9CcmFuY2ggKyAnLycgKyB2YWx1ZS5wYXRoICsgJ1wiPjxkaXYgY2xhc3M9XCJvcHRpb25zXCI+PHNwYW4gY2xhc3M9XCJuYW1lXCI+JyArIHZhbHVlLnBhdGggKyAnPC9zcGFuPjwvZGl2PjxkaXYgZGF0YS1uYW1lPVwiJyArIHZhbHVlLm5hbWUgKyAnXCIgZGF0YS11cmw9XCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vJyArIFJlcG9Pd25lciArICcvJyArIFJlcG9OYW1lICsgJy8nICsgUmVwb0JyYW5jaCArICcvJyArIHZhbHVlLnBhdGggKyAnXCIgY2xhc3M9XCJidG4gYnRuLXN1Y2Nlc3MgYnRuLWJsb2NrXCI+PGkgY2xhc3M9XCJmYSBmYS1jaGVja1wiPjwvaT5BZGQ8L2Rpdj48L2Rpdj4nKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQkKCcjTWRJbWFnZSAubG9hZGluZywgLm5vY2xpY2snKS50b2dnbGUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly9OYXZpZ2F0ZSB0aHJvdWdoIGZvbGRlcnNcblx0XHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnI01kSW1hZ2UgW2RhdGEtcGF0aF0nLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRNZEltYWdlKCQodGhpcykuYXR0cignZGF0YS1wYXRoJykpO1xuXHRcdFx0XHRpZiAoJCh0aGlzKS5oYXNDbGFzcygnZm9sZGVyJykpe1xuXHRcdFx0XHRcdCQoJyNNZEltYWdlIC5icmVhZGNydW1iJykuYXBwZW5kKCc8aSBjbGFzcz1cImZhIGZhLWFuZ2xlLWRvdWJsZS1yaWdodFwiPjwvaT48c3BhbiBjbGFzcz1cImltYWdlLXBhdGhcIiBkYXRhLXBhdGg9XCInICsgJCh0aGlzKS5hdHRyKCdkYXRhLXBhdGgnKSArICdcIj4nICsgJCh0aGlzKS5jaGlsZHJlbignZGl2JykuaHRtbCgpICsgJzwvc3Bhbj4nKTtcblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0JCh0aGlzKS5uZXh0QWxsKCkucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0Ly9BdHRhY2ggbW91c2V3aGVlbCB0byBob3Jpem9udGFsIGZvbGRlcnNcblx0XHRcdCQoXCIjTWRJbWFnZSAuZm9sZGVyc1wiKS5tb3VzZXdoZWVsKGZ1bmN0aW9uKGV2ZW50LCBkZWx0YSkge1xuXHRcdFx0XHR0aGlzLnNjcm9sbExlZnQgLT0gKGRlbHRhICogMzApO1xuXHRcdCAgXHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fSk7XG5cblx0XHQvL0luc2VydCBpbWFnZXMgb24gbWRlZGl0b3Jcblx0XHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnI01kSW1hZ2UgLmltYWdlID4gLmJ0bicsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdEluc2VydEltYWdlID0gJyFbJyArICQodGhpcykuYXR0cignZGF0YS1uYW1lJykgKyAnXSgnICsgJCh0aGlzKS5hdHRyKCdkYXRhLXVybCcpICsgJyknO1xuXHRcdFx0XHQkKCcuZWRpdG9yLXRvb2xiYXIgLmluc2VydC1pbWFnZScpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHRcdCQoJyNNZEltYWdlJykubW9kYWwoJ3RvZ2dsZScpO1xuXHRcdFx0fSk7XG5cdFx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJyNpbnNlcnRVcmwgLm1vZGFsLWZvb3RlciAuYnRuJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0SW5zZXJ0SW1hZ2UgPSAnIVtdKCcgKyAkKCcjaW5zZXJ0VXJsIGlucHV0JykudmFsKCkgKyAnKSc7XG5cdFx0XHRcdCQoJy5lZGl0b3ItdG9vbGJhciAuaW5zZXJ0LWltYWdlJykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0JCgnI01kSW1hZ2UnKS5tb2RhbCgndG9nZ2xlJyk7XG5cdFx0XHR9KTtcblxuXHRcdC8vVG9wIGJhclxuXHRcdFx0Ly91cGxvYWRcblx0XHRcdFx0JCgnYm9keScpLm9uKCdjbGljaycsICcjVXBsb2FkJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHQkKCcjTWRJbWFnZSAudXBsb2FkZXIsICNNZEltYWdlIC5mb2xkZXJzLCAjTWRJbWFnZSAuZmlsZXMnKS50b2dnbGUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdC8vUmVtb3ZlIGltYWdlIGZyb20gdXBsb2FkIHF1ZVxuXHRcdFx0XHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnLmR6LXJlbW92ZScsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5kei1wcmV2aWV3JykucmVtb3ZlKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdC8vQ2xvc2UgdGhlIGRyb3Bib3hcblx0XHRcdFx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJy51cGxvYWRlciAuYnRuLWRhbmdlcicsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHQkKCcjTWRJbWFnZSAudXBsb2FkZXIsICNNZEltYWdlIC5mb2xkZXJzLCAjTWRJbWFnZSAuZmlsZXMnKS50b2dnbGUoKTtcblx0XHRcdFx0XHRcdCQoJ2Zvcm0uZHJvcHpvbmUgLmR6LXByZXZpZXcnKS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdCQoJ2Zvcm0uZHJvcHpvbmUnKS5yZW1vdmVDbGFzcygnZHotc3RhcnRlZCcpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHQvL1VwbG9hZCB0aGUgaW1hZ2VzXG5cdFx0XHRcdFx0JCgnYm9keScpLm9uKCdjbGljaycsICcjTWRJbWFnZSAudXBsb2FkZXIgLmJ0bi1zdWNjZXNzJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdF9wYXRoID0gJCgnI01kSW1hZ2UgLmJyZWFkY3J1bWInKS5hdHRyKCdkYXRhLWN1cnJlbnQtcGF0aCcpO1xuXHRcdFx0XHRcdFx0aWYoX3BhdGgpe1xuXHRcdFx0XHRcdFx0XHRfc2F2ZUluID0gX3BhdGggKyAnLyc7XG5cdFx0XHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRcdFx0X3NhdmVJbiA9ICcnO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0X2ltYWdlc1RvVXBsb2FkID0gKCQoJyNNZEltYWdlIC5tYW5hZ2VyLWRyb3AgaW1nJykubGVuZ3RoKTsgLy8jIG9mIGltYWdlcyB0byB1cGxvYWRcblx0XHRcdFx0XHRcdF9hdWdtZW50SW4gPSAxMDAgLyBfaW1hZ2VzVG9VcGxvYWQ7XG5cdFx0XHRcdFx0XHRfaW1hZ2VzVXBsb2FkZWQgPSAwO1xuXHRcdFx0XHRcdFx0aWYgKF9pbWFnZXNUb1VwbG9hZCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0ICBhbGVydCgnVGhlcmUgYXJlIG5vIGltYWdlcyB0byB1cGxvYWQnKTtcblx0XHRcdFx0XHRcdH1lbHNlIHtcblx0XHRcdFx0XHRcdFx0JCgnI01kSW1hZ2UgLnVwbG9hZGluZywgLm5vY2xpY2snKS50b2dnbGUoKTtcblx0XHRcdFx0XHRcdFx0JCgnI01kSW1hZ2UgLm1hbmFnZXItZHJvcCBpbWcnKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRcdFx0X2Jhc2UgPSAkKHRoaXMpLmF0dHIoJ3NyYycpO1xuXHRcdFx0XHRcdFx0XHRcdF9iYXNlQ2xlYW4gPSBfYmFzZS5yZXBsYWNlKCdkYXRhOmltYWdlL3BuZztiYXNlNjQsJywnJyk7XG5cdFx0XHRcdFx0XHRcdFx0X2ltZ05hbWUgPSAkKHRoaXMpLmF0dHIoJ2FsdCcpO1xuXHRcdFx0XHRcdFx0XHRcdENyZWF0ZShfc2F2ZUluICsgX2ltZ05hbWUsIFJlcG9CcmFuY2gsIF9iYXNlQ2xlYW4sICd1cGxvYWRlZCBieScgKyBVc2VyTG9naW4sIGZ1bmN0aW9uKGVycikge1xuXHRcdFx0XHRcdFx0XHRcdFx0JCgnI01kSW1hZ2UgLnVwbG9hZGluZyAucHJvZ3Jlc3MnKS5hdHRyKCd2YWx1ZScsIHBhcnNlRmxvYXQoJCgnI01kSW1hZ2UgLnByb2dyZXNzJykuYXR0cigndmFsdWUnKSkgKyBwYXJzZUZsb2F0KF9hdWdtZW50SW4pKTtcblx0XHRcdFx0XHRcdFx0XHRcdCQoJyNNZEltYWdlIC51cGxvYWRpbmcgLnBlcmNlbnQnKS50ZXh0KE1hdGguZmxvb3IocGFyc2VJbnQoJCgnI01kSW1hZ2UgLnVwbG9hZGluZyAucGVyY2VudCcpLnByZXYoKS5hdHRyKCd2YWx1ZScpKSkgKyAnICUnKTtcblx0XHRcdFx0XHRcdFx0XHRcdF9pbWFnZXNVcGxvYWRlZCArPSAxO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYoX2ltYWdlc1VwbG9hZGVkID09PSAgX2ltYWdlc1RvVXBsb2FkKXtcblx0XHRcdFx0XHRcdFx0XHRcdFx0TWRJbWFnZShfcGF0aCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCQoJyNNZEltYWdlIC51cGxvYWRlciwgI01kSW1hZ2UgLmZvbGRlcnMsICNNZEltYWdlIC5maWxlcycpLnRvZ2dsZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQkKCcjTWRJbWFnZSBmb3JtLm1hbmFnZXItZHJvcCAuZHotcHJldmlldycpLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQkKCcjTWRJbWFnZSBmb3JtLm1hbmFnZXItZHJvcCcpLnJlbW92ZUNsYXNzKCdkei1zdGFydGVkJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCQoJyNNZEltYWdlIC51cGxvYWRpbmcgLnByb2dyZXNzJykuYXR0cigndmFsdWUnLCAnMCcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQkKCcjTWRJbWFnZSAudXBsb2FkaW5nIC5wZXJjZW50JykudGV4dCgnMCcpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQkKCcjTWRJbWFnZSAudXBsb2FkaW5nLCAubm9jbGljaycpLnRvZ2dsZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvL0luc2VydCBmcm9tIHVybFxuXHRcdFx0XHRcdCQoJyNGcm9tVXJsJykuY2xpY2soZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdCQoJyNpbnNlcnRVcmwnKS5tb2RhbCgndG9nZ2xlJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0JCgnYm9keScpLm9uKCdpbnB1dCcsICcjaW5zZXJ0VXJsIGlucHV0JywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdF9pbWFnZVVybCA9ICQodGhpcykudmFsKCk7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLnBhcmVudCgpLm5leHQoKS5jaGlsZHJlbigpLmF0dHIoJ3NyYycsIF9pbWFnZVVybCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0JCgnI2luc2VydFVybCcpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0ICAkKCcjaW5zZXJ0VXJsIGlucHV0JykudmFsKCcnKTtcblx0XHRcdFx0XHQgICQoJyNpbnNlcnRVcmwgaW1nJykuYXR0cignc3JjJywgJycpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0Ly9DbGVhciBkYXRhIG9uIGNsb3NlXG5cdFx0ICAkKCcjTWRJbWFnZScpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHQgICQoJyNNZEltYWdlIC5mb2xkZXJzLCAjTWRJbWFnZSAuZmlsZXMsICNNZEltYWdlIC5pbWFnZXMnKS5lbXB0eSgpO1xuXHRcdFx0fSk7XG5cbi8vU2F2ZSBmaWxlc1xuXHRmdW5jdGlvbiBzYXZlQ2hhbmdlcyhfaHRtbCwgX21kKXtcblx0XHR2YXIgX3NhdmVDb250ZW50O1xuXG5cdFx0aWYgKCQoXCIjY29tbWl0XCIpLnZhbCgpKSB7XG5cdFx0ICBDb21taXRNc2cgPSAkKFwiI2NvbW1pdFwiKS52YWwoKTtcblx0XHR9XG5cblx0XHQkKCcuZmlsZUFjdGlvbnMgLmJ0bicpLmh0bWwoJzxkaXYgY2xhc3M9XCJzcGlubmVyXCI+PGRpdiBjbGFzcz1cImRvdWJsZS1ib3VuY2UxXCI+PC9kaXY+PGRpdiBjbGFzcz1cImRvdWJsZS1ib3VuY2UyXCI+PC9kaXY+PC9kaXY+JykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTsvL2NvbnRlbnQgZm9yIHRoZSBidXR0b25cblxuXHRcdGlmIChfbWQpey8vSWYgdGhlIGVkaXRpbmcgaXMgYmVpbmcgbWFkZSB3aXRoIE1hcmtEb3duXG5cdFx0XHRpZiAoX2h0bWwuaW5kZXhPZihcIlJlcGxhY2UgdGhpcyB0ZXh0IHdpdGggeW91ciBGcm9udCBNYXR0ZXIgYmxvY2suXCIpID49IDApe1xuXHRcdFx0XHRfc2F2ZUNvbnRlbnQgPSBfbWQ7XG5cdFx0XHR9ZWxzZSBpZiAoX2h0bWwuc3Vic3RyaW5nKDAsIDQpID09PSBcIi0tLVxcblwiKXtcblx0XHRcdFx0X3NhdmVDb250ZW50ID0gJy0tLVxcbicgKyAkLnRyaW0oX2h0bWwuc3BsaXQoJy0tLScpWzFdLnNwbGl0KCctLS0nKVswXSkgKyAnXFxuLS0tXFxuJyArIF9tZDtcblx0XHRcdH1lbHNle1xuXHRcdFx0XHRfc2F2ZUNvbnRlbnQgPSAnLS0tXFxuJyArICQudHJpbShfaHRtbCkgKyAnXFxuLS0tXFxuJyArIF9tZDtcblx0XHRcdH1cblx0XHR9ZWxzZSB7IC8vSWYgdGhlIGVkaXRpbmcgaXMgYmVpbmcgbWFkZSB3aXRoIEh0bWxcblx0XHRcdF9zYXZlQ29udGVudCA9IF9odG1sO1xuXHRcdH1cblxuXHRcdFdyaXRlKEN1cnJlbnRQYXRoLCBSZXBvQnJhbmNoLCB3aW5kb3cuYnRvYShfc2F2ZUNvbnRlbnQpLCBDb21taXRNc2csIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdCQoJ21haW4gLmNvbnRlbnQnKS5lbXB0eSgpO1xuXHRcdFx0aWYoX21kKXtcblx0XHRcdFx0bWRFZGl0b3IoX21kLCBfaHRtbClcblx0XHRcdH1lbHNle1xuXHRcdFx0XHRodG1sRWRpdG9yKF9odG1sLCAnbWFpbiAuY29udGVudCcpXG5cdFx0XHR9XG5cdFx0XHRDb21taXRNc2cgPSAnQ2hhbmdlcyBtYWRlIGJ5ICcgKyBVc2VyTG9naW47XG5cdFx0XHQkKFwiI2NvbW1pdFwiKS52YWwoJycpO1xuXHRcdH0pO1xuXHR9XG5cbi8vRGVsZXRlIGZpbGVzXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcub3B0aW9ucyAuZGVsZXRlJywgZnVuY3Rpb24oKXtcblx0XHQkKCcjY29uZmlybURlbGV0ZScpLm1vZGFsKCd0b2dnbGUnKTtcblx0XHQkKCcjY29uZmlybURlbGV0ZSAjQ29uZmlybScpLmF0dHIoJ2RhdGEtcGF0aCcsICQodGhpcykuYXR0cignZGF0YS1wYXRoJykpO1xuXHR9KTtcblxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2NvbmZpcm1EZWxldGUgI0NvbmZpcm0nLCBmdW5jdGlvbigpe1xuXHRcdCQoJy5kZWxldGluZywgLm5vY2xpY2snKS50b2dnbGUoKTtcblx0XHR2YXIgX3JlbW92ZSA9ICQodGhpcykuYXR0cignZGF0YS1wYXRoJyk7XG5cdFx0RGVsZXRlKCQodGhpcykuYXR0cignZGF0YS1wYXRoJyksIFJlcG9CcmFuY2gsIGZ1bmN0aW9uKCkge1xuXHRcdFx0JCgnbWFpbiAuY2FyZCAuZGVsZXRlJykuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHRpZigkKHRoaXMpLmF0dHIoJ2RhdGEtcGF0aCcpID09PSBfcmVtb3ZlKXtcblx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkJykucmVtb3ZlKCk7XG5cdFx0XHRcdFx0JCgnXHQuZGVsZXRpbmcsIC5ub2NsaWNrJykudG9nZ2xlKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcbiAgfSk7XG5cbi8vR2V0IGN1cnJlbnQgZGF0ZVxuXHRmdW5jdGlvbiBDdXJyZW50RGF0ZSgpe1xuXHRcdHZhciBkID0gbmV3IERhdGUoKTtcblx0XHR2YXIgbW9udGggPSBkLmdldE1vbnRoKCkrMTtcblx0XHR2YXIgZGF5ID0gZC5nZXREYXRlKCk7XG5cblx0XHRyZXR1cm4gZC5nZXRGdWxsWWVhcigpICsgJy0nICtcblx0XHQgICAgKG1vbnRoPDEwID8gJzAnIDogJycpICsgbW9udGggKyAnLScgK1xuXHRcdCAgICAoZGF5PDEwID8gJzAnIDogJycpICsgZGF5ICsgJy0nO1xuXHR9XG5cbi8vQ3JlYXRlIGZpbGVzXG5cdCQoJy5jcmVhdGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFx0aWYoJCgnYm9keScpLmF0dHIoJ2RhdGEtY29udGVudCcpID09PSAnZGlyJyl7XG5cdFx0XHQkKCcjY3JlYXRlRmlsZSBmb3JtIGxhYmVsJykudGV4dChSZXBvTmFtZSArICcvJyArIEN1cnJlbnRQYXRoICsgJy8nKTtcblx0XHR9XG5cdFx0ZWxzZSBpZigkKCdib2R5JykuYXR0cignZGF0YS1wYWdlcycpID09PSAnMScpe1xuXHRcdFx0JCgnI2NyZWF0ZUZpbGUgZm9ybSBsYWJlbCcpLnRleHQoUmVwb05hbWUgKyAnL1BhZ2VzLycpO1xuXHRcdH1lbHNle1xuXHRcdFx0JCgnI2NyZWF0ZUZpbGUgZm9ybSBsYWJlbCcpLnRleHQoUmVwb05hbWUgKyAnLycpO1xuXHRcdH1cblx0fSk7XG5cblx0JCgnI2NyZWF0ZUZpbGUgaW5wdXQnKS5vbignaW5wdXQnLCBmdW5jdGlvbigpe1xuXHRcdGlmKCQodGhpcykudmFsKCkubGVuZ3RoID09PSAwKXtcblx0XHRcdCQoJyNjcmVhdGVGaWxlIC5tb2RhbC1mb290ZXInKS5odG1sKCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc3VjY2VzcyB1c2UtaW1hZ2VzXCIgZGlzYWJsZWQ+PGkgY2xhc3M9XCJmYSBmYS1iYW5cIj48L2k+PC9idXR0b24+Jyk7XG5cdFx0fWVsc2UgaWYoJCh0aGlzKS52YWwoKS5sZW5ndGggPT09IDEpIHtcblx0XHRcdCQoJyNjcmVhdGVGaWxlIC5tb2RhbC1mb290ZXInKS5odG1sKCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNyZWF0ZSBidG4gYnRuLXN1Y2Nlc3MgdXNlLWltYWdlc1wiPjxpIGNsYXNzPVwiZmEgZmEtY2hlY2tcIj48L2k+IENyZWF0ZTwvYnV0dG9uPicpO1xuXHRcdH1cblx0fSk7XG5cblx0JCgnYm9keScpLm9uKCdjbGljaycsICcjY3JlYXRlRmlsZSAubW9kYWwtZm9vdGVyIC5jcmVhdGUnLCBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIF9uZXdGaWxlO1xuXG5cdFx0JCgnI2NyZWF0ZUZpbGUgLm1vZGFsLWZvb3RlcicpLmh0bWwoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzIHVzZS1pbWFnZXNcIiBkaXNhYmxlZD48ZGl2IGNsYXNzPVwic3Bpbm5lclwiPjxkaXYgY2xhc3M9XCJkb3VibGUtYm91bmNlMVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJkb3VibGUtYm91bmNlMlwiPjwvZGl2PjwvZGl2PjwvYnV0dG9uPicpO1xuXG5cdFx0aWYoJCgnYm9keScpLmF0dHIoJ2RhdGEtY29udGVudCcpID09PSAnZGlyJyl7XG5cdFx0XHRpZihDdXJyZW50UGF0aC5pbmRleE9mKCdfcG9zdHMnKSA+PSAwKXtcblx0XHRcdFx0X25ld0ZpbGUgPSBDdXJyZW50UGF0aCArICcvJyArIEN1cnJlbnREYXRlKCkgKyAkKCcjY3JlYXRlRmlsZSBmb3JtIGlucHV0JykudmFsKCk7XG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0X25ld0ZpbGUgPSBDdXJyZW50UGF0aCArICcvJyArICQoJyNjcmVhdGVGaWxlIGZvcm0gaW5wdXQnKS52YWwoKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZXtcblx0XHRcdF9uZXdGaWxlID0gJCgnI2NyZWF0ZUZpbGUgZm9ybSBpbnB1dCcpLnZhbCgpO1xuXHRcdH1cblxuXHRcdENyZWF0ZShfbmV3RmlsZSwgUmVwb0JyYW5jaCwgd2luZG93LmJ0b2EoJycpLCAnY3JlYXRlZCBieScgKyBVc2VyTG9naW4sIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdCQoJyNjcmVhdGVGaWxlJykubW9kYWwoJ3RvZ2dsZScpO1xuXHRcdFx0aWYoJCgnYm9keScpLmF0dHIoJ2RhdGEtY29udGVudCcpID09PSAnZGlyJyl7XG5cdFx0XHRcdE9wZW4oQ3VycmVudE5hbWUsIEN1cnJlbnRQYXRoKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoJCgnYm9keScpLmF0dHIoJ2RhdGEtcGFnZXMnKSA9PT0gJzEnKXtcblx0XHRcdFx0Um9vdChSZXBvTmFtZSwgUmVwb093bmVyLCBSZXBvQnJhbmNoLCBSZXBvVXJsLCB0cnVlKTtcblx0XHRcdH1lbHNle1xuXHRcdFx0XHRSb290KFJlcG9OYW1lLCBSZXBvT3duZXIsIFJlcG9CcmFuY2gsIFJlcG9VcmwpO1xuXHRcdFx0fVxuXG5cdFx0XHQkKCcjY3JlYXRlRmlsZSAubW9kYWwtZm9vdGVyJykuaHRtbCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXN1Y2Nlc3MgdXNlLWltYWdlc1wiIGRpc2FibGVkPjxpIGNsYXNzPVwiZmEgZmEtYmFuXCI+PC9pPjwvYnV0dG9uPicpO1xuXHRcdH0pO1xuXHR9KTtcblx0JCgnI2NyZWF0ZUZpbGUnKS5vbignaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkgeyAvL0NsZWFyIHZhbHVlcyBvbiBtb2RhbCBjbG9zZVxuXHQgICQoJyNjcmVhdGVGaWxlIC5tb2RhbC1mb290ZXInKS5odG1sKCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc3VjY2VzcyB1c2UtaW1hZ2VzXCIgZGlzYWJsZWQ+PGkgY2xhc3M9XCJmYSBmYS1iYW5cIj48L2k+PC9idXR0b24+Jyk7XG5cdCAgJCgnI2NyZWF0ZUZpbGUgaW5wdXQnKS52YWwoJycpO1xuXHR9KTtcblxuLy9VcGxvYWQgZmlsZXNcblx0RHJvcHpvbmUub3B0aW9ucy5hZGRGcm9tRm9sZGVyID0geyAvL0Rpc2FibGUgaW1hZ2UgcmVzaXplXG5cdCAgdGh1bWJuYWlsV2lkdGg6IG51bGwsXG5cdCAgdGh1bWJuYWlsSGVpZ2h0OiBudWxsLFxuXHQgIGluaXQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgdGhpcy5vbihcInRodW1ibmFpbFwiLCBmdW5jdGlvbihmaWxlLCBkYXRhVXJsKSB7XG5cdCAgICBcdCQoJ2ltZ1thbHQ9XCInICsgZmlsZS5uYW1lICsgJ1wiXScpLnBhcmVudCgpLm5leHQoKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJkei1yZW1vdmVcIj48aSBjbGFzcz1cImZhIGZhLXRpbWVzLWNpcmNsZVwiPjwvaT4gUmVtb3ZlPC9kaXY+Jyk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH1cblx0RHJvcHpvbmUub3B0aW9ucy5NZFVwbG9hZGVyID0geyAvL0Rpc2FibGUgaW1hZ2UgcmVzaXplXG5cdCAgdGh1bWJuYWlsV2lkdGg6IG51bGwsXG5cdCAgdGh1bWJuYWlsSGVpZ2h0OiBudWxsLFxuXHR9XG5cdERyb3B6b25lLnByb3RvdHlwZS5zdWJtaXRSZXF1ZXN0ID0gZnVuY3Rpb24oeGhyLCBmb3JtRGF0YSwgZmlsZXMpIHsgLy9EaXNhYmxlIGF1dG8tdXBsb2Fkc1xuICB9O1xuXG5cdCQoJy51cGxvYWQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFx0aWYoJCgnYm9keScpLmF0dHIoJ2RhdGEtY29udGVudCcpID09PSAnZGlyJyl7XG5cdFx0XHQkKCcjdXBsb2FkRmlsZSBmb3JtIGxhYmVsJykudGV4dChSZXBvTmFtZSArICcvJyArIEN1cnJlbnRQYXRoICsgJy8nKTtcblx0XHR9XG5cdFx0ZWxzZSBpZigkKCdib2R5JykuYXR0cignZGF0YS1wYWdlcycpID09PSAnMScpe1xuXHRcdFx0JCgnI3VwbG9hZEZpbGUgZm9ybSBsYWJlbCcpLnRleHQoUmVwb05hbWUgKyAnL1BhZ2VzLycpO1xuXHRcdH1lbHNle1xuXHRcdFx0JCgnI3VwbG9hZEZpbGUgZm9ybSBsYWJlbCcpLnRleHQoUmVwb05hbWUgKyAnLycpO1xuXHRcdH1cblx0fSk7XG5cblx0JCgnYm9keScpLm9uKCdjbGljaycsICcjdXBsb2FkRmlsZSAudXBsb2FkZXIgLmJ0bi1zdWNjZXNzJywgZnVuY3Rpb24oKXtcblx0XHR2YXIgX2ZpbGVzVG9VcGxvYWQgPSAoJCgnI3VwbG9hZEZpbGUgLmFkZGltYWdlLWRyb3AgaW1nJykubGVuZ3RoKTtcblx0XHR2YXIgX2F1Z21lbnRJbiA9IDEwMCAvIF9maWxlc1RvVXBsb2FkO1xuXHRcdHZhciBfaW1hZ2VzVXBsb2FkZWQgPSAwO1xuXHRcdHZhciBfc2F2ZUluO1xuXHRcdHZhciBfY29udGVudDtcblx0XHR2YXIgX2ltZ05hbWU7XG5cdFx0dmFyIF9jdXJyZW50TmFtZSA9IEN1cnJlbnROYW1lO1xuXHRcdCQoJy51cGxvYWQnKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdCQoJyN1cGxvYWRGaWxlLCAjVXBsb2FkaW5nJykubW9kYWwoJ3RvZ2dsZScpO1xuXG5cdFx0aWYgKF9maWxlc1RvVXBsb2FkID09PSAwKSB7XG5cdFx0ICBhbGVydCgnVGhlcmUgYXJlIG5vIGltYWdlcyB0byB1cGxvYWQnKTtcblx0XHR9ZWxzZSB7XG5cdFx0XHRpZigkKCdib2R5JykuYXR0cignZGF0YS1jb250ZW50JykgPT09ICdkaXInKXtcblx0XHRcdFx0aWYgKCQoJyN1cGxvYWRGaWxlIGlucHV0JykudmFsKCkpe1xuXHRcdFx0XHRcdF9zYXZlSW4gPSBDdXJyZW50UGF0aCArICcvJyArICQoJyN1cGxvYWRGaWxlIGZvcm0gaW5wdXQnKS52YWwoKSArICcvJztcblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0X3NhdmVJbiA9IEN1cnJlbnRQYXRoICsgJy8nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNle1xuXHRcdFx0XHRpZiAoJCgnI3VwbG9hZEZpbGUgaW5wdXQnKS52YWwoKSl7XG5cdFx0XHRcdFx0X3NhdmVJbiA9ICQoJyN1cGxvYWRGaWxlIGZvcm0gaW5wdXQnKS52YWwoKSArICcvJztcblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0X3NhdmVJbiA9ICcnO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdCQoJyN1cGxvYWRGaWxlIC5hZGRpbWFnZS1kcm9wIGltZycpLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdFx0X2NvbnRlbnQgPSAkKHRoaXMpLmF0dHIoJ3NyYycpLnJlcGxhY2UoJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnLCcnKTtcblx0XHRcdFx0X2ltZ05hbWUgPSAkKHRoaXMpLmF0dHIoJ2FsdCcpO1xuXHRcdFx0XHRDcmVhdGUoX3NhdmVJbiArIF9pbWdOYW1lLCBSZXBvQnJhbmNoLCBfY29udGVudCwgJ3VwbG9hZGVkIGJ5JyArIFVzZXJMb2dpbiwgZnVuY3Rpb24oZXJyKSB7XG5cdFx0XHRcdFx0JCgnI1VwbG9hZGluZyAucHJvZ3Jlc3MnKS5hdHRyKCd2YWx1ZScsIHBhcnNlRmxvYXQoJCgnI1VwbG9hZGluZyAucHJvZ3Jlc3MnKS5hdHRyKCd2YWx1ZScpKSArIHBhcnNlRmxvYXQoX2F1Z21lbnRJbikpO1xuXHRcdFx0XHRcdCQoJyNVcGxvYWRpbmcgLnBlcmNlbnQnKS50ZXh0KE1hdGguZmxvb3IocGFyc2VJbnQoJCgnI1VwbG9hZGluZyAucHJvZ3Jlc3MnKS5hdHRyKCd2YWx1ZScpKSkgKyAnICUnKTtcblx0XHRcdFx0XHRfaW1hZ2VzVXBsb2FkZWQgKz0gMTtcblx0XHRcdFx0XHRpZihfaW1hZ2VzVXBsb2FkZWQgPT09IF9maWxlc1RvVXBsb2FkKXtcblx0XHRcdFx0XHRcdGlmKF9jdXJyZW50TmFtZSA9PT0gQ3VycmVudE5hbWUpe1xuXHRcdFx0XHRcdFx0XHRpZigkKCdib2R5JykuYXR0cignZGF0YS1jb250ZW50JykgPT09ICdkaXInKXtcblx0XHRcdFx0XHRcdFx0XHRPcGVuKEN1cnJlbnROYW1lLCBDdXJyZW50UGF0aCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSBpZigkKCdib2R5JykuYXR0cignZGF0YS1wYWdlcycpID09PSAnMScpe1xuXHRcdFx0XHRcdFx0XHRcdFJvb3QoUmVwb05hbWUsIFJlcG9Pd25lciwgUmVwb0JyYW5jaCwgUmVwb1VybCwgdHJ1ZSApO1xuXHRcdFx0XHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRcdFx0XHRSb290KFJlcG9OYW1lLCBSZXBvT3duZXIsIFJlcG9CcmFuY2gsIFJlcG9VcmwpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdCQoJyNVcGxvYWRTdWNjZXNzLCAjVXBsb2FkaW5nJykubW9kYWwoJ3RvZ2dsZScpO1xuXHRcdFx0XHRcdFx0JCgnLnVwbG9hZCcpLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHRcdFx0XHRcdFx0JCgnI3VwbG9hZEZpbGUgZm9ybS5hZGRpbWFnZS1kcm9wIC5kei1wcmV2aWV3JykucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHQkKCcjdXBsb2FkRmlsZSAjZmlsZW5hbWUnKS52YWwoJycpO1xuXHRcdFx0XHRcdFx0JCgnI3VwbG9hZEZpbGUgZm9ybS5hZGRpbWFnZS1kcm9wJykucmVtb3ZlQ2xhc3MoJ2R6LXN0YXJ0ZWQnKTtcblx0XHRcdFx0XHRcdCQoJyNVcGxvYWRpbmcgLnByb2dyZXNzJykuYXR0cigndmFsdWUnLCAnMCcpO1xuXHRcdFx0XHRcdFx0JCgnI1VwbG9hZGluZyAucGVyY2VudCcpLnRleHQoJzAnKTtcblx0XHRcdFx0XHRcdCQoJyN1cGxvYWRGaWxlIGlucHV0JykudmFsKCcnKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xuXHQkKCcjdXBsb2FkRmlsZScpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG5cdFx0JCgnI3VwbG9hZEZpbGUgZm9ybS5hZGRpbWFnZS1kcm9wIC5kei1wcmV2aWV3JykucmVtb3ZlKCk7XG5cdFx0JCgnI3VwbG9hZEZpbGUgI2ZpbGVuYW1lJykudmFsKCcnKTtcblx0fSk7XG5cdCQoJyNVcGxvYWRpbmcgYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKXtcblx0XHQkKCcjVXBsb2FkaW5nIC5ub2NsaWNrJykudG9nZ2xlKCk7XG5cdFx0JCgnI1VwbG9hZGluZycpLnRvZ2dsZUNsYXNzKCdtaW5pbWl6ZWQnKTtcblx0XHQkKCcjVXBsb2FkaW5nIGJ1dHRvbiBpJykudG9nZ2xlQ2xhc3MoJ2ZhLW1pbnVzJykudG9nZ2xlQ2xhc3MoJ2ZhLXBsdXMnKTtcblx0fSk7XG5cbi8qL0ZvcmsgcmVwb3Ncblx0JCgnI0ZvcmsgaW5wdXQnKS5vbignaW5wdXQnLCBmdW5jdGlvbigpe1xuXHRcdGlmKCQoJyNGb3JrIC5uZXduYW1lJykudmFsKCkubGVuZ3RoID09PSAwIHx8ICQoJyNGb3JrIC51c2VybmFtZScpLnZhbCgpLmxlbmd0aCA9PT0gMCB8fCAkKCcjRm9yayAucmVwb25hbWUnKS52YWwoKS5sZW5ndGggPT09IDApe1xuXHRcdFx0JCgnI0ZvcmsgLm1vZGFsLWZvb3RlcicpLmh0bWwoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzIGZvcmtcIiBkaXNhYmxlZD48aSBjbGFzcz1cImZhIGZhLWJhblwiPjwvaT48L2J1dHRvbj4nKTtcblx0XHR9ZWxzZXtcblx0XHRcdCQoJyNGb3JrIC5tb2RhbC1mb290ZXInKS5odG1sKCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNyZWF0ZSBidG4gYnRuLXN1Y2Nlc3MgZm9ya1wiPjxpIGNsYXNzPVwiZmEgZmEtY2hlY2tcIj48L2k+IENyZWF0ZTwvYnV0dG9uPicpO1xuXHRcdH1cblx0fSk7XG5cblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNGb3JrIC5idG4uZm9yaycsIGZ1bmN0aW9uKCl7XG5cdFx0Rm9yaygkKCcjRm9yayAudXNlcm5hbWUnKS52YWwoKSwgJCgnI0ZvcmsgLnJlcG9uYW1lJykudmFsKCksIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdCAgcmVuYW1lKCcvcmVwb3MvJyArIGRhdGEuZnVsbF9uYW1lLCAkKCcjRm9yayAubmV3bmFtZScpLnZhbCgpLCBmdW5jdGlvbihkYXRhKXtcblx0XHQgICAgUmVwb3MoZnVuY3Rpb24oZGF0YSkgey8vZGF0YSBpcyBhbiBhcnJheSBvZiBvYmplY3RzLCBlYWNoIG9iamVjdCBpcyBhIHJlcG9cblx0XHRcdFx0XHQkLmVhY2goZGF0YSwgZnVuY3Rpb24oIGluZGV4LCB2YWx1ZSApIHsgLy9pdGVyYXRlIHRocm91Z2ggZWFjaCBkYXRhKGVhY2ggcmVwbykgb24gdGhlIGRhdGEgYXJyYXlcblx0XHRcdFx0XHRcdGlmKHZhbHVlLm5hbWUgPT09ICQoJyNGb3JrIC51c2VybmFtZScpLnZhbCgpICYmIHZhbHVlLmhhc19wYWdlcyA9PT0gZmFsc2Upe1xuXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0pOyovXG4iLCIvKipcbiAqIHNpbXBsZW1kZSB2MS44LjFcbiAqIENvcHlyaWdodCBOZXh0IFN0ZXAgV2VicywgSW5jLlxuICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL05leHRTdGVwV2Vicy9zaW1wbGVtZGUtbWFya2Rvd24tZWRpdG9yXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuIWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyx0LlNpbXBsZU1ERT1lKCl9fShmdW5jdGlvbigpe3ZhciBlO3JldHVybiBmdW5jdGlvbiB0KGUsbixyKXtmdW5jdGlvbiBpKGwsYSl7aWYoIW5bbF0pe2lmKCFlW2xdKXt2YXIgcz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFhJiZzKXJldHVybiBzKGwsITApO2lmKG8pcmV0dXJuIG8obCwhMCk7dmFyIGM9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitsK1wiJ1wiKTt0aHJvdyBjLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsY312YXIgdT1uW2xdPXtleHBvcnRzOnt9fTtlW2xdWzBdLmNhbGwodS5leHBvcnRzLGZ1bmN0aW9uKHQpe3ZhciBuPWVbbF1bMV1bdF07cmV0dXJuIGkobj9uOnQpfSx1LHUuZXhwb3J0cyx0LGUsbixyKX1yZXR1cm4gbltsXS5leHBvcnRzfWZvcih2YXIgbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGw9MDtsPHIubGVuZ3RoO2wrKylpKHJbbF0pO3JldHVybiBpfSh7MTpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihuKXtUeXBvPW4uVHlwbz1lKFwiL1VzZXJzL3dlc2Nvc3NpY2svRG9jdW1lbnRzL1dlYnNpdGVzL3NpbXBsZW1kZS1tYXJrZG93bi1lZGl0b3Ivbm9kZV9tb2R1bGVzL2NvZGVtaXJyb3Itc3BlbGwtY2hlY2tlci9zcmMvanMvdHlwby5qc1wiKSxDb2RlTWlycm9yPW4uQ29kZU1pcnJvcj1lKFwiY29kZW1pcnJvclwiKTsoZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPSExLGw9ITEsYT1cIlwiLHM9XCJcIjtDb2RlTWlycm9yLmRlZmluZU1vZGUoXCJzcGVsbC1jaGVja2VyXCIsZnVuY3Rpb24oZSx0KXtpZighbyl7bz0hMDt2YXIgbj1uZXcgWE1MSHR0cFJlcXVlc3Q7bi5vcGVuKFwiR0VUXCIsXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvY29kZW1pcnJvci5zcGVsbC1jaGVja2VyL2xhdGVzdC9lbl9VUy5hZmZcIiwhMCksbi5vbmxvYWQ9ZnVuY3Rpb24oZSl7ND09PW4ucmVhZHlTdGF0ZSYmMjAwPT09bi5zdGF0dXMmJihhPW4ucmVzcG9uc2VUZXh0LGkrKywyPT1pJiYocj1uZXcgVHlwbyhcImVuX1VTXCIsYSxzLHtwbGF0Zm9ybTpcImFueVwifSkpKX0sbi5zZW5kKG51bGwpfWlmKCFsKXtsPSEwO3ZhciBjPW5ldyBYTUxIdHRwUmVxdWVzdDtjLm9wZW4oXCJHRVRcIixcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9jb2RlbWlycm9yLnNwZWxsLWNoZWNrZXIvbGF0ZXN0L2VuX1VTLmRpY1wiLCEwKSxjLm9ubG9hZD1mdW5jdGlvbihlKXs0PT09Yy5yZWFkeVN0YXRlJiYyMDA9PT1jLnN0YXR1cyYmKHM9Yy5yZXNwb25zZVRleHQsaSsrLDI9PWkmJihyPW5ldyBUeXBvKFwiZW5fVVNcIixhLHMse3BsYXRmb3JtOlwiYW55XCJ9KSkpfSxjLnNlbmQobnVsbCl9dmFyIHU9JyFcIiMkJSYoKSorLC0uLzo7PD0+P0BbXFxcXF1eX2B7fH1+ICcsZD17dG9rZW46ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnBlZWsoKSxpPVwiXCI7aWYodS5pbmNsdWRlcyhuKSlyZXR1cm4gZS5uZXh0KCksbnVsbDtmb3IoO251bGwhPShuPWUucGVlaygpKSYmIXUuaW5jbHVkZXMobik7KWkrPW4sZS5uZXh0KCk7cmV0dXJuIHImJiFyLmNoZWNrKGkpP1wic3BlbGwtZXJyb3JcIjpudWxsfX0saD1Db2RlTWlycm9yLmdldE1vZGUoZSxlLmJhY2tkcm9wfHxcInRleHQvcGxhaW5cIik7cmV0dXJuIENvZGVNaXJyb3Iub3ZlcmxheU1vZGUoaCxkLCEwKX0pLFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXN8fChTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzPWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuLTEhPT1TdHJpbmcucHJvdG90eXBlLmluZGV4T2YuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9KS5jYWxsKG4sdCx2b2lkIDAsdm9pZCAwKX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se1wiL1VzZXJzL3dlc2Nvc3NpY2svRG9jdW1lbnRzL1dlYnNpdGVzL3NpbXBsZW1kZS1tYXJrZG93bi1lZGl0b3Ivbm9kZV9tb2R1bGVzL2NvZGVtaXJyb3Itc3BlbGwtY2hlY2tlci9zcmMvanMvdHlwby5qc1wiOjIsY29kZW1pcnJvcjo2fV0sMjpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihlKXsoZnVuY3Rpb24oZSx0LG4scixpKXtcInVzZSBzdHJpY3RcIjt2YXIgbz1mdW5jdGlvbihlLHQsbixyKXtpZihyPXJ8fHt9LHRoaXMucGxhdGZvcm09ci5wbGF0Zm9ybXx8XCJjaHJvbWVcIix0aGlzLmRpY3Rpb25hcnk9bnVsbCx0aGlzLnJ1bGVzPXt9LHRoaXMuZGljdGlvbmFyeVRhYmxlPXt9LHRoaXMuY29tcG91bmRSdWxlcz1bXSx0aGlzLmNvbXBvdW5kUnVsZUNvZGVzPXt9LHRoaXMucmVwbGFjZW1lbnRUYWJsZT1bXSx0aGlzLmZsYWdzPXIuZmxhZ3N8fHt9LGUpe2lmKHRoaXMuZGljdGlvbmFyeT1lLFwiY2hyb21lXCI9PXRoaXMucGxhdGZvcm0pdHx8KHQ9dGhpcy5fcmVhZEZpbGUoY2hyb21lLmV4dGVuc2lvbi5nZXRVUkwoXCJsaWIvdHlwby9kaWN0aW9uYXJpZXMvXCIrZStcIi9cIitlK1wiLmFmZlwiKSkpLG58fChuPXRoaXMuX3JlYWRGaWxlKGNocm9tZS5leHRlbnNpb24uZ2V0VVJMKFwibGliL3R5cG8vZGljdGlvbmFyaWVzL1wiK2UrXCIvXCIrZStcIi5kaWNcIikpKTtlbHNle3ZhciBpPXIuZGljdGlvbmFyeVBhdGh8fFwiXCI7dHx8KHQ9dGhpcy5fcmVhZEZpbGUoaStcIi9cIitlK1wiL1wiK2UrXCIuYWZmXCIpKSxufHwobj10aGlzLl9yZWFkRmlsZShpK1wiL1wiK2UrXCIvXCIrZStcIi5kaWNcIikpfXRoaXMucnVsZXM9dGhpcy5fcGFyc2VBRkYodCksdGhpcy5jb21wb3VuZFJ1bGVDb2Rlcz17fTtmb3IodmFyIG89MCxsPXRoaXMuY29tcG91bmRSdWxlcy5sZW5ndGg7bD5vO28rKylmb3IodmFyIGE9dGhpcy5jb21wb3VuZFJ1bGVzW29dLHM9MCxjPWEubGVuZ3RoO2M+cztzKyspdGhpcy5jb21wb3VuZFJ1bGVDb2Rlc1thW3NdXT1bXTtcIk9OTFlJTkNPTVBPVU5EXCJpbiB0aGlzLmZsYWdzJiYodGhpcy5jb21wb3VuZFJ1bGVDb2Rlc1t0aGlzLmZsYWdzLk9OTFlJTkNPTVBPVU5EXT1bXSksdGhpcy5kaWN0aW9uYXJ5VGFibGU9dGhpcy5fcGFyc2VESUMobik7Zm9yKHZhciBvIGluIHRoaXMuY29tcG91bmRSdWxlQ29kZXMpMD09dGhpcy5jb21wb3VuZFJ1bGVDb2Rlc1tvXS5sZW5ndGgmJmRlbGV0ZSB0aGlzLmNvbXBvdW5kUnVsZUNvZGVzW29dO2Zvcih2YXIgbz0wLGw9dGhpcy5jb21wb3VuZFJ1bGVzLmxlbmd0aDtsPm87bysrKXtmb3IodmFyIHU9dGhpcy5jb21wb3VuZFJ1bGVzW29dLGQ9XCJcIixzPTAsYz11Lmxlbmd0aDtjPnM7cysrKXt2YXIgaD11W3NdO2QrPWggaW4gdGhpcy5jb21wb3VuZFJ1bGVDb2Rlcz9cIihcIit0aGlzLmNvbXBvdW5kUnVsZUNvZGVzW2hdLmpvaW4oXCJ8XCIpK1wiKVwiOmh9dGhpcy5jb21wb3VuZFJ1bGVzW29dPW5ldyBSZWdFeHAoZCxcImlcIil9fXJldHVybiB0aGlzfTtvLnByb3RvdHlwZT17bG9hZDpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzW3RdPWVbdF07cmV0dXJuIHRoaXN9LF9yZWFkRmlsZTpmdW5jdGlvbihlLHQpe3R8fCh0PVwiSVNPODg1OS0xXCIpO3ZhciBuPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gbi5vcGVuKFwiR0VUXCIsZSwhMSksbi5vdmVycmlkZU1pbWVUeXBlJiZuLm92ZXJyaWRlTWltZVR5cGUoXCJ0ZXh0L3BsYWluOyBjaGFyc2V0PVwiK3QpLG4uc2VuZChudWxsKSxuLnJlc3BvbnNlVGV4dH0sX3BhcnNlQUZGOmZ1bmN0aW9uKGUpe3ZhciB0PXt9O2U9dGhpcy5fcmVtb3ZlQWZmaXhDb21tZW50cyhlKTtmb3IodmFyIG49ZS5zcGxpdChcIlxcblwiKSxyPTAsaT1uLmxlbmd0aDtpPnI7cisrKXt2YXIgbz1uW3JdLGw9by5zcGxpdCgvXFxzKy8pLGE9bFswXTtpZihcIlBGWFwiPT1hfHxcIlNGWFwiPT1hKXtmb3IodmFyIHM9bFsxXSxjPWxbMl0sdT1wYXJzZUludChsWzNdLDEwKSxkPVtdLGg9cisxLGY9cisxK3U7Zj5oO2grKyl7dmFyIG89bltoXSxwPW8uc3BsaXQoL1xccysvKSxtPXBbMl0sZz1wWzNdLnNwbGl0KFwiL1wiKSx2PWdbMF07XCIwXCI9PT12JiYodj1cIlwiKTt2YXIgeT10aGlzLnBhcnNlUnVsZUNvZGVzKGdbMV0pLHg9cFs0XSxiPXt9O2IuYWRkPXYseS5sZW5ndGg+MCYmKGIuY29udGludWF0aW9uQ2xhc3Nlcz15KSxcIi5cIiE9PXgmJihcIlNGWFwiPT09YT9iLm1hdGNoPW5ldyBSZWdFeHAoeCtcIiRcIik6Yi5tYXRjaD1uZXcgUmVnRXhwKFwiXlwiK3gpKSxcIjBcIiE9bSYmKFwiU0ZYXCI9PT1hP2IucmVtb3ZlPW5ldyBSZWdFeHAobStcIiRcIik6Yi5yZW1vdmU9bSksZC5wdXNoKGIpfXRbc109e3R5cGU6YSxjb21iaW5lYWJsZTpcIllcIj09YyxlbnRyaWVzOmR9LHIrPXV9ZWxzZSBpZihcIkNPTVBPVU5EUlVMRVwiPT09YSl7Zm9yKHZhciB1PXBhcnNlSW50KGxbMV0sMTApLGg9cisxLGY9cisxK3U7Zj5oO2grKyl7dmFyIG89bltoXSxwPW8uc3BsaXQoL1xccysvKTt0aGlzLmNvbXBvdW5kUnVsZXMucHVzaChwWzFdKX1yKz11fWVsc2UgaWYoXCJSRVBcIj09PWEpe3ZhciBwPW8uc3BsaXQoL1xccysvKTszPT09cC5sZW5ndGgmJnRoaXMucmVwbGFjZW1lbnRUYWJsZS5wdXNoKFtwWzFdLHBbMl1dKX1lbHNlIHRoaXMuZmxhZ3NbYV09bFsxXX1yZXR1cm4gdH0sX3JlbW92ZUFmZml4Q29tbWVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5yZXBsYWNlKC8jLiokL2dtLFwiXCIpLGU9ZS5yZXBsYWNlKC9eXFxzXFxzKi9tLFwiXCIpLnJlcGxhY2UoL1xcc1xccyokL20sXCJcIiksZT1lLnJlcGxhY2UoL1xcbnsyLH0vZyxcIlxcblwiKSxlPWUucmVwbGFjZSgvXlxcc1xccyovLFwiXCIpLnJlcGxhY2UoL1xcc1xccyokLyxcIlwiKX0sX3BhcnNlRElDOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtlIGluIHImJlwib2JqZWN0XCI9PXR5cGVvZiByW2VdfHwocltlXT1bXSkscltlXS5wdXNoKHQpfWU9dGhpcy5fcmVtb3ZlRGljQ29tbWVudHMoZSk7Zm9yKHZhciBuPWUuc3BsaXQoXCJcXG5cIikscj17fSxpPTEsbz1uLmxlbmd0aDtvPmk7aSsrKXt2YXIgbD1uW2ldLGE9bC5zcGxpdChcIi9cIiwyKSxzPWFbMF07aWYoYS5sZW5ndGg+MSl7dmFyIGM9dGhpcy5wYXJzZVJ1bGVDb2RlcyhhWzFdKTtcIk5FRURBRkZJWFwiaW4gdGhpcy5mbGFncyYmLTEhPWMuaW5kZXhPZih0aGlzLmZsYWdzLk5FRURBRkZJWCl8fHQocyxjKTtmb3IodmFyIHU9MCxkPWMubGVuZ3RoO2Q+dTt1Kyspe3ZhciBoPWNbdV0sZj10aGlzLnJ1bGVzW2hdO2lmKGYpZm9yKHZhciBwPXRoaXMuX2FwcGx5UnVsZShzLGYpLG09MCxnPXAubGVuZ3RoO2c+bTttKyspe3ZhciB2PXBbbV07aWYodCh2LFtdKSxmLmNvbWJpbmVhYmxlKWZvcih2YXIgeT11KzE7ZD55O3krKyl7dmFyIHg9Y1t5XSxiPXRoaXMucnVsZXNbeF07aWYoYiYmYi5jb21iaW5lYWJsZSYmZi50eXBlIT1iLnR5cGUpZm9yKHZhciB3PXRoaXMuX2FwcGx5UnVsZSh2LGIpLGs9MCxDPXcubGVuZ3RoO0M+aztrKyspe3ZhciBTPXdba107dChTLFtdKX19fWggaW4gdGhpcy5jb21wb3VuZFJ1bGVDb2RlcyYmdGhpcy5jb21wb3VuZFJ1bGVDb2Rlc1toXS5wdXNoKHMpfX1lbHNlIHQocy50cmltKCksW10pfXJldHVybiByfSxfcmVtb3ZlRGljQ29tbWVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5yZXBsYWNlKC9eXFx0LiokL2dtLFwiXCIpfSxwYXJzZVJ1bGVDb2RlczpmdW5jdGlvbihlKXtpZighZSlyZXR1cm5bXTtpZighKFwiRkxBR1wiaW4gdGhpcy5mbGFncykpcmV0dXJuIGUuc3BsaXQoXCJcIik7aWYoXCJsb25nXCI9PT10aGlzLmZsYWdzLkZMQUcpe2Zvcih2YXIgdD1bXSxuPTAscj1lLmxlbmd0aDtyPm47bis9Mil0LnB1c2goZS5zdWJzdHIobiwyKSk7cmV0dXJuIHR9cmV0dXJuXCJudW1cIj09PXRoaXMuZmxhZ3MuRkxBRz90ZXh0Q29kZS5zcGxpdChcIixcIik6dm9pZCAwfSxfYXBwbHlSdWxlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXQuZW50cmllcyxyPVtdLGk9MCxvPW4ubGVuZ3RoO28+aTtpKyspe3ZhciBsPW5baV07aWYoIWwubWF0Y2h8fGUubWF0Y2gobC5tYXRjaCkpe3ZhciBhPWU7aWYobC5yZW1vdmUmJihhPWEucmVwbGFjZShsLnJlbW92ZSxcIlwiKSksXCJTRlhcIj09PXQudHlwZT9hKz1sLmFkZDphPWwuYWRkK2Esci5wdXNoKGEpLFwiY29udGludWF0aW9uQ2xhc3Nlc1wiaW4gbClmb3IodmFyIHM9MCxjPWwuY29udGludWF0aW9uQ2xhc3Nlcy5sZW5ndGg7Yz5zO3MrKyl7dmFyIHU9dGhpcy5ydWxlc1tsLmNvbnRpbnVhdGlvbkNsYXNzZXNbc11dO3UmJihyPXIuY29uY2F0KHRoaXMuX2FwcGx5UnVsZShhLHUpKSl9fX1yZXR1cm4gcn0sY2hlY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKC9eXFxzXFxzKi8sXCJcIikucmVwbGFjZSgvXFxzXFxzKiQvLFwiXCIpO2lmKHRoaXMuY2hlY2tFeGFjdCh0KSlyZXR1cm4hMDtpZih0LnRvVXBwZXJDYXNlKCk9PT10KXt2YXIgbj10WzBdK3Quc3Vic3RyaW5nKDEpLnRvTG93ZXJDYXNlKCk7aWYodGhpcy5oYXNGbGFnKG4sXCJLRUVQQ0FTRVwiKSlyZXR1cm4hMTtpZih0aGlzLmNoZWNrRXhhY3QobikpcmV0dXJuITB9dmFyIHI9dC50b0xvd2VyQ2FzZSgpO2lmKHIhPT10KXtpZih0aGlzLmhhc0ZsYWcocixcIktFRVBDQVNFXCIpKXJldHVybiExO2lmKHRoaXMuY2hlY2tFeGFjdChyKSlyZXR1cm4hMH1yZXR1cm4hMX0sY2hlY2tFeGFjdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmRpY3Rpb25hcnlUYWJsZVtlXTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgdCl7aWYoXCJDT01QT1VORE1JTlwiaW4gdGhpcy5mbGFncyYmZS5sZW5ndGg+PXRoaXMuZmxhZ3MuQ09NUE9VTkRNSU4pZm9yKHZhciBuPTAscj10aGlzLmNvbXBvdW5kUnVsZXMubGVuZ3RoO3I+bjtuKyspaWYoZS5tYXRjaCh0aGlzLmNvbXBvdW5kUnVsZXNbbl0pKXJldHVybiEwO3JldHVybiExfWZvcih2YXIgbj0wLHI9dC5sZW5ndGg7cj5uO24rKylpZighdGhpcy5oYXNGbGFnKGUsXCJPTkxZSU5DT01QT1VORFwiLHRbbl0pKXJldHVybiEwO3JldHVybiExfSxoYXNGbGFnOmZ1bmN0aW9uKGUsdCxuKXtpZih0IGluIHRoaXMuZmxhZ3Mpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBuKXZhciBuPUFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sdGhpcy5kaWN0aW9uYXJ5VGFibGVbZV0pO2lmKG4mJi0xIT09bi5pbmRleE9mKHRoaXMuZmxhZ3NbdF0pKXJldHVybiEwfXJldHVybiExfSxhbHBoYWJldDpcIlwiLHN1Z2dlc3Q6ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe2Zvcih2YXIgdD1bXSxuPTAscj1lLmxlbmd0aDtyPm47bisrKXtmb3IodmFyIGk9ZVtuXSxvPVtdLGw9MCxhPWkubGVuZ3RoKzE7YT5sO2wrKylvLnB1c2goW2kuc3Vic3RyaW5nKDAsbCksaS5zdWJzdHJpbmcobCxpLmxlbmd0aCldKTtmb3IodmFyIHM9W10sbD0wLGE9by5sZW5ndGg7YT5sO2wrKyl7dmFyIHU9b1tsXTt1WzFdJiZzLnB1c2godVswXSt1WzFdLnN1YnN0cmluZygxKSl9Zm9yKHZhciBkPVtdLGw9MCxhPW8ubGVuZ3RoO2E+bDtsKyspe3ZhciB1PW9bbF07dVsxXS5sZW5ndGg+MSYmZC5wdXNoKHVbMF0rdVsxXVsxXSt1WzFdWzBdK3VbMV0uc3Vic3RyaW5nKDIpKX1mb3IodmFyIGg9W10sbD0wLGE9by5sZW5ndGg7YT5sO2wrKyl7dmFyIHU9b1tsXTtpZih1WzFdKWZvcih2YXIgZj0wLHA9Yy5hbHBoYWJldC5sZW5ndGg7cD5mO2YrKyloLnB1c2godVswXStjLmFscGhhYmV0W2ZdK3VbMV0uc3Vic3RyaW5nKDEpKX1mb3IodmFyIG09W10sbD0wLGE9by5sZW5ndGg7YT5sO2wrKyl7dmFyIHU9b1tsXTtpZih1WzFdKWZvcih2YXIgZj0wLHA9Yy5hbHBoYWJldC5sZW5ndGg7cD5mO2YrKyloLnB1c2godVswXStjLmFscGhhYmV0W2ZdK3VbMV0pfXQ9dC5jb25jYXQocyksdD10LmNvbmNhdChkKSx0PXQuY29uY2F0KGgpLHQ9dC5jb25jYXQobSl9cmV0dXJuIHR9ZnVuY3Rpb24gcihlKXtmb3IodmFyIHQ9W10sbj0wO248ZS5sZW5ndGg7bisrKWMuY2hlY2soZVtuXSkmJnQucHVzaChlW25dKTtyZXR1cm4gdH1mdW5jdGlvbiBpKGUpe2Z1bmN0aW9uIGkoZSx0KXtyZXR1cm4gZVsxXTx0WzFdPy0xOjF9Zm9yKHZhciBvPW4oW2VdKSxsPW4obyksYT1yKG8pLmNvbmNhdChyKGwpKSxzPXt9LHU9MCxkPWEubGVuZ3RoO2Q+dTt1KyspYVt1XWluIHM/c1thW3VdXSs9MTpzW2FbdV1dPTE7dmFyIGg9W107Zm9yKHZhciB1IGluIHMpaC5wdXNoKFt1LHNbdV1dKTtoLnNvcnQoaSkucmV2ZXJzZSgpO2Zvcih2YXIgZj1bXSx1PTAsZD1NYXRoLm1pbih0LGgubGVuZ3RoKTtkPnU7dSsrKWMuaGFzRmxhZyhoW3VdWzBdLFwiTk9TVUdHRVNUXCIpfHxmLnB1c2goaFt1XVswXSk7cmV0dXJuIGZ9aWYodHx8KHQ9NSksdGhpcy5jaGVjayhlKSlyZXR1cm5bXTtmb3IodmFyIG89MCxsPXRoaXMucmVwbGFjZW1lbnRUYWJsZS5sZW5ndGg7bD5vO28rKyl7dmFyIGE9dGhpcy5yZXBsYWNlbWVudFRhYmxlW29dO2lmKC0xIT09ZS5pbmRleE9mKGFbMF0pKXt2YXIgcz1lLnJlcGxhY2UoYVswXSxhWzFdKTtpZih0aGlzLmNoZWNrKHMpKXJldHVybltzXX19dmFyIGM9dGhpcztyZXR1cm4gYy5hbHBoYWJldD1cImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCIsaShlKX19LGkoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG8/bzp3aW5kb3cuVHlwbyl9KS5jYWxsKGUsdm9pZCAwLHZvaWQgMCx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKGUpe3QuZXhwb3J0cz1lfSl9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHt9XSwzOltmdW5jdGlvbih0LG4scil7IWZ1bmN0aW9uKGkpe1wib2JqZWN0XCI9PXR5cGVvZiByJiZcIm9iamVjdFwiPT10eXBlb2Ygbj9pKHQoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk6XCJmdW5jdGlvblwiPT10eXBlb2YgZSYmZS5hbWQ/ZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSxpKTppKENvZGVNaXJyb3IpfShmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3ZhciB0PWUuZ2V0V3JhcHBlckVsZW1lbnQoKTtlLnN0YXRlLmZ1bGxTY3JlZW5SZXN0b3JlPXtzY3JvbGxUb3A6d2luZG93LnBhZ2VZT2Zmc2V0LHNjcm9sbExlZnQ6d2luZG93LnBhZ2VYT2Zmc2V0LHdpZHRoOnQuc3R5bGUud2lkdGgsaGVpZ2h0OnQuc3R5bGUuaGVpZ2h0fSx0LnN0eWxlLndpZHRoPVwiXCIsdC5zdHlsZS5oZWlnaHQ9XCJhdXRvXCIsdC5jbGFzc05hbWUrPVwiIENvZGVNaXJyb3ItZnVsbHNjcmVlblwiLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLGUucmVmcmVzaCgpfWZ1bmN0aW9uIG4oZSl7dmFyIHQ9ZS5nZXRXcmFwcGVyRWxlbWVudCgpO3QuY2xhc3NOYW1lPXQuY2xhc3NOYW1lLnJlcGxhY2UoL1xccypDb2RlTWlycm9yLWZ1bGxzY3JlZW5cXGIvLFwiXCIpLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdz1cIlwiO3ZhciBuPWUuc3RhdGUuZnVsbFNjcmVlblJlc3RvcmU7dC5zdHlsZS53aWR0aD1uLndpZHRoLHQuc3R5bGUuaGVpZ2h0PW4uaGVpZ2h0LHdpbmRvdy5zY3JvbGxUbyhuLnNjcm9sbExlZnQsbi5zY3JvbGxUb3ApLGUucmVmcmVzaCgpfWUuZGVmaW5lT3B0aW9uKFwiZnVsbFNjcmVlblwiLCExLGZ1bmN0aW9uKHIsaSxvKXtvPT1lLkluaXQmJihvPSExKSwhbyE9IWkmJihpP3Qocik6bihyKSl9KX0pfSx7XCIuLi8uLi9saWIvY29kZW1pcnJvclwiOjZ9XSw0OltmdW5jdGlvbih0LG4scil7IWZ1bmN0aW9uKGkpe1wib2JqZWN0XCI9PXR5cGVvZiByJiZcIm9iamVjdFwiPT10eXBlb2Ygbj9pKHQoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk6XCJmdW5jdGlvblwiPT10eXBlb2YgZSYmZS5hbWQ/ZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSxpKTppKENvZGVNaXJyb3IpfShmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjt2YXIgdD0vXihcXHMqKSg+Wz4gXSp8WyorLV1cXHN8KFxcZCspKFsuKV0pKShcXHMqKS8sbj0vXihcXHMqKSg+Wz4gXSp8WyorLV18KFxcZCspWy4pXSkoXFxzKikkLyxyPS9bKistXVxccy87ZS5jb21tYW5kcy5uZXdsaW5lQW5kSW5kZW50Q29udGludWVNYXJrZG93bkxpc3Q9ZnVuY3Rpb24oaSl7aWYoaS5nZXRPcHRpb24oXCJkaXNhYmxlSW5wdXRcIikpcmV0dXJuIGUuUGFzcztmb3IodmFyIG89aS5saXN0U2VsZWN0aW9ucygpLGw9W10sYT0wO2E8by5sZW5ndGg7YSsrKXt2YXIgcz1vW2FdLmhlYWQsYz1pLmdldFN0YXRlQWZ0ZXIocy5saW5lKSx1PWMubGlzdCE9PSExLGQ9MCE9PWMucXVvdGUsaD1pLmdldExpbmUocy5saW5lKSxmPXQuZXhlYyhoKTtpZighb1thXS5lbXB0eSgpfHwhdSYmIWR8fCFmKXJldHVybiB2b2lkIGkuZXhlY0NvbW1hbmQoXCJuZXdsaW5lQW5kSW5kZW50XCIpO2lmKG4udGVzdChoKSlpLnJlcGxhY2VSYW5nZShcIlwiLHtsaW5lOnMubGluZSxjaDowfSx7bGluZTpzLmxpbmUsY2g6cy5jaCsxfSksbFthXT1cIlxcblwiO2Vsc2V7dmFyIHA9ZlsxXSxtPWZbNV0sZz1yLnRlc3QoZlsyXSl8fGZbMl0uaW5kZXhPZihcIj5cIik+PTA/ZlsyXTpwYXJzZUludChmWzNdLDEwKSsxK2ZbNF07bFthXT1cIlxcblwiK3ArZyttfX1pLnJlcGxhY2VTZWxlY3Rpb25zKGwpfX0pfSx7XCIuLi8uLi9saWIvY29kZW1pcnJvclwiOjZ9XSw1OltmdW5jdGlvbih0LG4scil7IWZ1bmN0aW9uKGkpe1wib2JqZWN0XCI9PXR5cGVvZiByJiZcIm9iamVjdFwiPT10eXBlb2Ygbj9pKHQoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk6XCJmdW5jdGlvblwiPT10eXBlb2YgZSYmZS5hbWQ/ZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSxpKTppKENvZGVNaXJyb3IpfShmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlLm92ZXJsYXlNb2RlPWZ1bmN0aW9uKHQsbixyKXtyZXR1cm57c3RhcnRTdGF0ZTpmdW5jdGlvbigpe3JldHVybntiYXNlOmUuc3RhcnRTdGF0ZSh0KSxvdmVybGF5OmUuc3RhcnRTdGF0ZShuKSxiYXNlUG9zOjAsYmFzZUN1cjpudWxsLG92ZXJsYXlQb3M6MCxvdmVybGF5Q3VyOm51bGwsc3RyZWFtU2VlbjpudWxsfX0sY29weVN0YXRlOmZ1bmN0aW9uKHIpe3JldHVybntiYXNlOmUuY29weVN0YXRlKHQsci5iYXNlKSxvdmVybGF5OmUuY29weVN0YXRlKG4sci5vdmVybGF5KSxiYXNlUG9zOnIuYmFzZVBvcyxiYXNlQ3VyOm51bGwsb3ZlcmxheVBvczpyLm92ZXJsYXlQb3Msb3ZlcmxheUN1cjpudWxsfX0sdG9rZW46ZnVuY3Rpb24oZSxpKXtyZXR1cm4oZSE9aS5zdHJlYW1TZWVufHxNYXRoLm1pbihpLmJhc2VQb3MsaS5vdmVybGF5UG9zKTxlLnN0YXJ0KSYmKGkuc3RyZWFtU2Vlbj1lLGkuYmFzZVBvcz1pLm92ZXJsYXlQb3M9ZS5zdGFydCksZS5zdGFydD09aS5iYXNlUG9zJiYoaS5iYXNlQ3VyPXQudG9rZW4oZSxpLmJhc2UpLGkuYmFzZVBvcz1lLnBvcyksZS5zdGFydD09aS5vdmVybGF5UG9zJiYoZS5wb3M9ZS5zdGFydCxpLm92ZXJsYXlDdXI9bi50b2tlbihlLGkub3ZlcmxheSksaS5vdmVybGF5UG9zPWUucG9zKSxlLnBvcz1NYXRoLm1pbihpLmJhc2VQb3MsaS5vdmVybGF5UG9zKSxudWxsPT1pLm92ZXJsYXlDdXI/aS5iYXNlQ3VyOm51bGwhPWkuYmFzZUN1ciYmaS5vdmVybGF5LmNvbWJpbmVUb2tlbnN8fHImJm51bGw9PWkub3ZlcmxheS5jb21iaW5lVG9rZW5zP2kuYmFzZUN1citcIiBcIitpLm92ZXJsYXlDdXI6aS5vdmVybGF5Q3VyfSxpbmRlbnQ6dC5pbmRlbnQmJmZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuaW5kZW50KGUuYmFzZSxuKX0sZWxlY3RyaWNDaGFyczp0LmVsZWN0cmljQ2hhcnMsaW5uZXJNb2RlOmZ1bmN0aW9uKGUpe3JldHVybntzdGF0ZTplLmJhc2UsbW9kZTp0fX0sYmxhbmtMaW5lOmZ1bmN0aW9uKGUpe3QuYmxhbmtMaW5lJiZ0LmJsYW5rTGluZShlLmJhc2UpLG4uYmxhbmtMaW5lJiZuLmJsYW5rTGluZShlLm92ZXJsYXkpfX19fSl9LHtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCI6Nn1dLDY6W2Z1bmN0aW9uKHQsbixyKXshZnVuY3Rpb24odCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHImJlwib2JqZWN0XCI9PXR5cGVvZiBuKW4uZXhwb3J0cz10KCk7ZWxzZXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlLmFtZClyZXR1cm4gZShbXSx0KTt0aGlzLkNvZGVNaXJyb3I9dCgpfX0oZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKG4scil7aWYoISh0aGlzIGluc3RhbmNlb2YgZSkpcmV0dXJuIG5ldyBlKG4scik7dGhpcy5vcHRpb25zPXI9cj9QaShyKTp7fSxQaShRbyxyLCExKSxmKHIpO3ZhciBpPXIudmFsdWU7XCJzdHJpbmdcIj09dHlwZW9mIGkmJihpPW5ldyBrbChpLHIubW9kZSxudWxsLHIubGluZVNlcGFyYXRvcikpLHRoaXMuZG9jPWk7dmFyIG89bmV3IGUuaW5wdXRTdHlsZXNbci5pbnB1dFN0eWxlXSh0aGlzKSxsPXRoaXMuZGlzcGxheT1uZXcgdChuLGksbyk7bC53cmFwcGVyLkNvZGVNaXJyb3I9dGhpcyxjKHRoaXMpLGEodGhpcyksci5saW5lV3JhcHBpbmcmJih0aGlzLmRpc3BsYXkud3JhcHBlci5jbGFzc05hbWUrPVwiIENvZGVNaXJyb3Itd3JhcFwiKSxyLmF1dG9mb2N1cyYmIU5vJiZsLmlucHV0LmZvY3VzKCksdih0aGlzKSx0aGlzLnN0YXRlPXtrZXlNYXBzOltdLG92ZXJsYXlzOltdLG1vZGVHZW46MCxvdmVyd3JpdGU6ITEsZGVsYXlpbmdCbHVyRXZlbnQ6ITEsZm9jdXNlZDohMSxzdXBwcmVzc0VkaXRzOiExLHBhc3RlSW5jb21pbmc6ITEsY3V0SW5jb21pbmc6ITEsc2VsZWN0aW5nVGV4dDohMSxkcmFnZ2luZ1RleHQ6ITEsaGlnaGxpZ2h0Om5ldyBBaSxrZXlTZXE6bnVsbCxzcGVjaWFsQ2hhcnM6bnVsbH07dmFyIHM9dGhpczt5byYmMTE+eG8mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLmRpc3BsYXkuaW5wdXQucmVzZXQoITApfSwyMCksX3QodGhpcyksS2koKSx4dCh0aGlzKSx0aGlzLmN1ck9wLmZvcmNlVXBkYXRlPSEwLFhyKHRoaXMsaSksci5hdXRvZm9jdXMmJiFOb3x8cy5oYXNGb2N1cygpP3NldFRpbWVvdXQoemkoZ24sdGhpcyksMjApOnZuKHRoaXMpO2Zvcih2YXIgdSBpbiBKbylKby5oYXNPd25Qcm9wZXJ0eSh1KSYmSm9bdV0odGhpcyxyW3VdLGVsKTtrKHRoaXMpLHIuZmluaXNoSW5pdCYmci5maW5pc2hJbml0KHRoaXMpO2Zvcih2YXIgZD0wO2Q8aWwubGVuZ3RoOysrZClpbFtkXSh0aGlzKTt3dCh0aGlzKSxibyYmci5saW5lV3JhcHBpbmcmJlwib3B0aW1pemVsZWdpYmlsaXR5XCI9PWdldENvbXB1dGVkU3R5bGUobC5saW5lRGl2KS50ZXh0UmVuZGVyaW5nJiYobC5saW5lRGl2LnN0eWxlLnRleHRSZW5kZXJpbmc9XCJhdXRvXCIpfWZ1bmN0aW9uIHQoZSx0LG4pe3ZhciByPXRoaXM7dGhpcy5pbnB1dD1uLHIuc2Nyb2xsYmFyRmlsbGVyPV9pKFwiZGl2XCIsbnVsbCxcIkNvZGVNaXJyb3Itc2Nyb2xsYmFyLWZpbGxlclwiKSxyLnNjcm9sbGJhckZpbGxlci5zZXRBdHRyaWJ1dGUoXCJjbS1ub3QtY29udGVudFwiLFwidHJ1ZVwiKSxyLmd1dHRlckZpbGxlcj1faShcImRpdlwiLG51bGwsXCJDb2RlTWlycm9yLWd1dHRlci1maWxsZXJcIiksci5ndXR0ZXJGaWxsZXIuc2V0QXR0cmlidXRlKFwiY20tbm90LWNvbnRlbnRcIixcInRydWVcIiksci5saW5lRGl2PV9pKFwiZGl2XCIsbnVsbCxcIkNvZGVNaXJyb3ItY29kZVwiKSxyLnNlbGVjdGlvbkRpdj1faShcImRpdlwiLG51bGwsbnVsbCxcInBvc2l0aW9uOiByZWxhdGl2ZTsgei1pbmRleDogMVwiKSxyLmN1cnNvckRpdj1faShcImRpdlwiLG51bGwsXCJDb2RlTWlycm9yLWN1cnNvcnNcIiksci5tZWFzdXJlPV9pKFwiZGl2XCIsbnVsbCxcIkNvZGVNaXJyb3ItbWVhc3VyZVwiKSxyLmxpbmVNZWFzdXJlPV9pKFwiZGl2XCIsbnVsbCxcIkNvZGVNaXJyb3ItbWVhc3VyZVwiKSxyLmxpbmVTcGFjZT1faShcImRpdlwiLFtyLm1lYXN1cmUsci5saW5lTWVhc3VyZSxyLnNlbGVjdGlvbkRpdixyLmN1cnNvckRpdixyLmxpbmVEaXZdLG51bGwsXCJwb3NpdGlvbjogcmVsYXRpdmU7IG91dGxpbmU6IG5vbmVcIiksci5tb3Zlcj1faShcImRpdlwiLFtfaShcImRpdlwiLFtyLmxpbmVTcGFjZV0sXCJDb2RlTWlycm9yLWxpbmVzXCIpXSxudWxsLFwicG9zaXRpb246IHJlbGF0aXZlXCIpLHIuc2l6ZXI9X2koXCJkaXZcIixbci5tb3Zlcl0sXCJDb2RlTWlycm9yLXNpemVyXCIpLHIuc2l6ZXJXaWR0aD1udWxsLHIuaGVpZ2h0Rm9yY2VyPV9pKFwiZGl2XCIsbnVsbCxudWxsLFwicG9zaXRpb246IGFic29sdXRlOyBoZWlnaHQ6IFwiK0RsK1wicHg7IHdpZHRoOiAxcHg7XCIpLHIuZ3V0dGVycz1faShcImRpdlwiLG51bGwsXCJDb2RlTWlycm9yLWd1dHRlcnNcIiksci5saW5lR3V0dGVyPW51bGwsci5zY3JvbGxlcj1faShcImRpdlwiLFtyLnNpemVyLHIuaGVpZ2h0Rm9yY2VyLHIuZ3V0dGVyc10sXCJDb2RlTWlycm9yLXNjcm9sbFwiKSxyLnNjcm9sbGVyLnNldEF0dHJpYnV0ZShcInRhYkluZGV4XCIsXCItMVwiKSxyLndyYXBwZXI9X2koXCJkaXZcIixbci5zY3JvbGxiYXJGaWxsZXIsci5ndXR0ZXJGaWxsZXIsci5zY3JvbGxlcl0sXCJDb2RlTWlycm9yXCIpLHlvJiY4PnhvJiYoci5ndXR0ZXJzLnN0eWxlLnpJbmRleD0tMSxyLnNjcm9sbGVyLnN0eWxlLnBhZGRpbmdSaWdodD0wKSxib3x8bW8mJk5vfHwoci5zY3JvbGxlci5kcmFnZ2FibGU9ITApLGUmJihlLmFwcGVuZENoaWxkP2UuYXBwZW5kQ2hpbGQoci53cmFwcGVyKTplKHIud3JhcHBlcikpLHIudmlld0Zyb209ci52aWV3VG89dC5maXJzdCxyLnJlcG9ydGVkVmlld0Zyb209ci5yZXBvcnRlZFZpZXdUbz10LmZpcnN0LHIudmlldz1bXSxyLnJlbmRlcmVkVmlldz1udWxsLHIuZXh0ZXJuYWxNZWFzdXJlZD1udWxsLHIudmlld09mZnNldD0wLHIubGFzdFdyYXBIZWlnaHQ9ci5sYXN0V3JhcFdpZHRoPTAsci51cGRhdGVMaW5lTnVtYmVycz1udWxsLHIubmF0aXZlQmFyV2lkdGg9ci5iYXJIZWlnaHQ9ci5iYXJXaWR0aD0wLHIuc2Nyb2xsYmFyc0NsaXBwZWQ9ITEsci5saW5lTnVtV2lkdGg9ci5saW5lTnVtSW5uZXJXaWR0aD1yLmxpbmVOdW1DaGFycz1udWxsLHIuYWxpZ25XaWRnZXRzPSExLHIuY2FjaGVkQ2hhcldpZHRoPXIuY2FjaGVkVGV4dEhlaWdodD1yLmNhY2hlZFBhZGRpbmdIPW51bGwsci5tYXhMaW5lPW51bGwsci5tYXhMaW5lTGVuZ3RoPTAsci5tYXhMaW5lQ2hhbmdlZD0hMSxyLndoZWVsRFg9ci53aGVlbERZPXIud2hlZWxTdGFydFg9ci53aGVlbFN0YXJ0WT1udWxsLHIuc2hpZnQ9ITEsci5zZWxGb3JDb250ZXh0TWVudT1udWxsLHIuYWN0aXZlVG91Y2g9bnVsbCxuLmluaXQocil9ZnVuY3Rpb24gbih0KXt0LmRvYy5tb2RlPWUuZ2V0TW9kZSh0Lm9wdGlvbnMsdC5kb2MubW9kZU9wdGlvbikscih0KX1mdW5jdGlvbiByKGUpe2UuZG9jLml0ZXIoZnVuY3Rpb24oZSl7ZS5zdGF0ZUFmdGVyJiYoZS5zdGF0ZUFmdGVyPW51bGwpLGUuc3R5bGVzJiYoZS5zdHlsZXM9bnVsbCl9KSxlLmRvYy5mcm9udGllcj1lLmRvYy5maXJzdCxGZShlLDEwMCksZS5zdGF0ZS5tb2RlR2VuKyssZS5jdXJPcCYmRXQoZSl9ZnVuY3Rpb24gaShlKXtlLm9wdGlvbnMubGluZVdyYXBwaW5nPyhZbChlLmRpc3BsYXkud3JhcHBlcixcIkNvZGVNaXJyb3Itd3JhcFwiKSxlLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWluV2lkdGg9XCJcIixlLmRpc3BsYXkuc2l6ZXJXaWR0aD1udWxsKTooWGwoZS5kaXNwbGF5LndyYXBwZXIsXCJDb2RlTWlycm9yLXdyYXBcIiksaChlKSksbChlKSxFdChlKSxsdChlKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eShlKX0sMTAwKX1mdW5jdGlvbiBvKGUpe3ZhciB0PXZ0KGUuZGlzcGxheSksbj1lLm9wdGlvbnMubGluZVdyYXBwaW5nLHI9biYmTWF0aC5tYXgoNSxlLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGgveXQoZS5kaXNwbGF5KS0zKTtyZXR1cm4gZnVuY3Rpb24oaSl7aWYod3IoZS5kb2MsaSkpcmV0dXJuIDA7dmFyIG89MDtpZihpLndpZGdldHMpZm9yKHZhciBsPTA7bDxpLndpZGdldHMubGVuZ3RoO2wrKylpLndpZGdldHNbbF0uaGVpZ2h0JiYobys9aS53aWRnZXRzW2xdLmhlaWdodCk7cmV0dXJuIG4/bysoTWF0aC5jZWlsKGkudGV4dC5sZW5ndGgvcil8fDEpKnQ6byt0fX1mdW5jdGlvbiBsKGUpe3ZhciB0PWUuZG9jLG49byhlKTt0Lml0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ9bihlKTt0IT1lLmhlaWdodCYmSnIoZSx0KX0pfWZ1bmN0aW9uIGEoZSl7ZS5kaXNwbGF5LndyYXBwZXIuY2xhc3NOYW1lPWUuZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZS5yZXBsYWNlKC9cXHMqY20tcy1cXFMrL2csXCJcIikrZS5vcHRpb25zLnRoZW1lLnJlcGxhY2UoLyhefFxccylcXHMqL2csXCIgY20tcy1cIiksbHQoZSl9ZnVuY3Rpb24gcyhlKXtjKGUpLEV0KGUpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt3KGUpfSwyMCl9ZnVuY3Rpb24gYyhlKXt2YXIgdD1lLmRpc3BsYXkuZ3V0dGVycyxuPWUub3B0aW9ucy5ndXR0ZXJzO2ppKHQpO2Zvcih2YXIgcj0wO3I8bi5sZW5ndGg7KytyKXt2YXIgaT1uW3JdLG89dC5hcHBlbmRDaGlsZChfaShcImRpdlwiLG51bGwsXCJDb2RlTWlycm9yLWd1dHRlciBcIitpKSk7XCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCI9PWkmJihlLmRpc3BsYXkubGluZUd1dHRlcj1vLG8uc3R5bGUud2lkdGg9KGUuZGlzcGxheS5saW5lTnVtV2lkdGh8fDEpK1wicHhcIil9dC5zdHlsZS5kaXNwbGF5PXI/XCJcIjpcIm5vbmVcIix1KGUpfWZ1bmN0aW9uIHUoZSl7dmFyIHQ9ZS5kaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGg7ZS5kaXNwbGF5LnNpemVyLnN0eWxlLm1hcmdpbkxlZnQ9dCtcInB4XCJ9ZnVuY3Rpb24gZChlKXtpZigwPT1lLmhlaWdodClyZXR1cm4gMDtmb3IodmFyIHQsbj1lLnRleHQubGVuZ3RoLHI9ZTt0PXByKHIpOyl7dmFyIGk9dC5maW5kKDAsITApO3I9aS5mcm9tLmxpbmUsbis9aS5mcm9tLmNoLWkudG8uY2h9Zm9yKHI9ZTt0PW1yKHIpOyl7dmFyIGk9dC5maW5kKDAsITApO24tPXIudGV4dC5sZW5ndGgtaS5mcm9tLmNoLHI9aS50by5saW5lLG4rPXIudGV4dC5sZW5ndGgtaS50by5jaH1yZXR1cm4gbn1mdW5jdGlvbiBoKGUpe3ZhciB0PWUuZGlzcGxheSxuPWUuZG9jO3QubWF4TGluZT1ZcihuLG4uZmlyc3QpLHQubWF4TGluZUxlbmd0aD1kKHQubWF4TGluZSksdC5tYXhMaW5lQ2hhbmdlZD0hMCxuLml0ZXIoZnVuY3Rpb24oZSl7dmFyIG49ZChlKTtuPnQubWF4TGluZUxlbmd0aCYmKHQubWF4TGluZUxlbmd0aD1uLHQubWF4TGluZT1lKX0pfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9SGkoZS5ndXR0ZXJzLFwiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiKTstMT09dCYmZS5saW5lTnVtYmVycz9lLmd1dHRlcnM9ZS5ndXR0ZXJzLmNvbmNhdChbXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCJdKTp0Pi0xJiYhZS5saW5lTnVtYmVycyYmKGUuZ3V0dGVycz1lLmd1dHRlcnMuc2xpY2UoMCksZS5ndXR0ZXJzLnNwbGljZSh0LDEpKX1mdW5jdGlvbiBwKGUpe3ZhciB0PWUuZGlzcGxheSxuPXQuZ3V0dGVycy5vZmZzZXRXaWR0aCxyPU1hdGgucm91bmQoZS5kb2MuaGVpZ2h0K3FlKGUuZGlzcGxheSkpO3JldHVybntjbGllbnRIZWlnaHQ6dC5zY3JvbGxlci5jbGllbnRIZWlnaHQsdmlld0hlaWdodDp0LndyYXBwZXIuY2xpZW50SGVpZ2h0LHNjcm9sbFdpZHRoOnQuc2Nyb2xsZXIuc2Nyb2xsV2lkdGgsY2xpZW50V2lkdGg6dC5zY3JvbGxlci5jbGllbnRXaWR0aCx2aWV3V2lkdGg6dC53cmFwcGVyLmNsaWVudFdpZHRoLGJhckxlZnQ6ZS5vcHRpb25zLmZpeGVkR3V0dGVyP246MCxkb2NIZWlnaHQ6cixzY3JvbGxIZWlnaHQ6citVZShlKSt0LmJhckhlaWdodCxuYXRpdmVCYXJXaWR0aDp0Lm5hdGl2ZUJhcldpZHRoLGd1dHRlcldpZHRoOm59fWZ1bmN0aW9uIG0oZSx0LG4pe3RoaXMuY209bjt2YXIgcj10aGlzLnZlcnQ9X2koXCJkaXZcIixbX2koXCJkaXZcIixudWxsLG51bGwsXCJtaW4td2lkdGg6IDFweFwiKV0sXCJDb2RlTWlycm9yLXZzY3JvbGxiYXJcIiksaT10aGlzLmhvcml6PV9pKFwiZGl2XCIsW19pKFwiZGl2XCIsbnVsbCxudWxsLFwiaGVpZ2h0OiAxMDAlOyBtaW4taGVpZ2h0OiAxcHhcIildLFwiQ29kZU1pcnJvci1oc2Nyb2xsYmFyXCIpO2UociksZShpKSxObChyLFwic2Nyb2xsXCIsZnVuY3Rpb24oKXtyLmNsaWVudEhlaWdodCYmdChyLnNjcm9sbFRvcCxcInZlcnRpY2FsXCIpfSksTmwoaSxcInNjcm9sbFwiLGZ1bmN0aW9uKCl7aS5jbGllbnRXaWR0aCYmdChpLnNjcm9sbExlZnQsXCJob3Jpem9udGFsXCIpfSksdGhpcy5jaGVja2VkWmVyb1dpZHRoPSExLHlvJiY4PnhvJiYodGhpcy5ob3Jpei5zdHlsZS5taW5IZWlnaHQ9dGhpcy52ZXJ0LnN0eWxlLm1pbldpZHRoPVwiMThweFwiKX1mdW5jdGlvbiBnKCl7fWZ1bmN0aW9uIHYodCl7dC5kaXNwbGF5LnNjcm9sbGJhcnMmJih0LmRpc3BsYXkuc2Nyb2xsYmFycy5jbGVhcigpLHQuZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzJiZYbCh0LmRpc3BsYXkud3JhcHBlcix0LmRpc3BsYXkuc2Nyb2xsYmFycy5hZGRDbGFzcykpLHQuZGlzcGxheS5zY3JvbGxiYXJzPW5ldyBlLnNjcm9sbGJhck1vZGVsW3Qub3B0aW9ucy5zY3JvbGxiYXJTdHlsZV0oZnVuY3Rpb24oZSl7dC5kaXNwbGF5LndyYXBwZXIuaW5zZXJ0QmVmb3JlKGUsdC5kaXNwbGF5LnNjcm9sbGJhckZpbGxlciksTmwoZSxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKCl7dC5zdGF0ZS5mb2N1c2VkJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5kaXNwbGF5LmlucHV0LmZvY3VzKCl9LDApfSksZS5zZXRBdHRyaWJ1dGUoXCJjbS1ub3QtY29udGVudFwiLFwidHJ1ZVwiKX0sZnVuY3Rpb24oZSxuKXtcImhvcml6b250YWxcIj09bj9ybih0LGUpOm5uKHQsZSl9LHQpLHQuZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzJiZZbCh0LmRpc3BsYXkud3JhcHBlcix0LmRpc3BsYXkuc2Nyb2xsYmFycy5hZGRDbGFzcyl9ZnVuY3Rpb24geShlLHQpe3R8fCh0PXAoZSkpO3ZhciBuPWUuZGlzcGxheS5iYXJXaWR0aCxyPWUuZGlzcGxheS5iYXJIZWlnaHQ7eChlLHQpO2Zvcih2YXIgaT0wOzQ+aSYmbiE9ZS5kaXNwbGF5LmJhcldpZHRofHxyIT1lLmRpc3BsYXkuYmFySGVpZ2h0O2krKyluIT1lLmRpc3BsYXkuYmFyV2lkdGgmJmUub3B0aW9ucy5saW5lV3JhcHBpbmcmJlcoZSkseChlLHAoZSkpLG49ZS5kaXNwbGF5LmJhcldpZHRoLHI9ZS5kaXNwbGF5LmJhckhlaWdodH1mdW5jdGlvbiB4KGUsdCl7dmFyIG49ZS5kaXNwbGF5LHI9bi5zY3JvbGxiYXJzLnVwZGF0ZSh0KTtuLnNpemVyLnN0eWxlLnBhZGRpbmdSaWdodD0obi5iYXJXaWR0aD1yLnJpZ2h0KStcInB4XCIsbi5zaXplci5zdHlsZS5wYWRkaW5nQm90dG9tPShuLmJhckhlaWdodD1yLmJvdHRvbSkrXCJweFwiLHIucmlnaHQmJnIuYm90dG9tPyhuLnNjcm9sbGJhckZpbGxlci5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixuLnNjcm9sbGJhckZpbGxlci5zdHlsZS5oZWlnaHQ9ci5ib3R0b20rXCJweFwiLG4uc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLndpZHRoPXIucmlnaHQrXCJweFwiKTpuLnNjcm9sbGJhckZpbGxlci5zdHlsZS5kaXNwbGF5PVwiXCIsci5ib3R0b20mJmUub3B0aW9ucy5jb3Zlckd1dHRlck5leHRUb1Njcm9sbGJhciYmZS5vcHRpb25zLmZpeGVkR3V0dGVyPyhuLmd1dHRlckZpbGxlci5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixuLmd1dHRlckZpbGxlci5zdHlsZS5oZWlnaHQ9ci5ib3R0b20rXCJweFwiLG4uZ3V0dGVyRmlsbGVyLnN0eWxlLndpZHRoPXQuZ3V0dGVyV2lkdGgrXCJweFwiKTpuLmd1dHRlckZpbGxlci5zdHlsZS5kaXNwbGF5PVwiXCJ9ZnVuY3Rpb24gYihlLHQsbil7dmFyIHI9biYmbnVsbCE9bi50b3A/TWF0aC5tYXgoMCxuLnRvcCk6ZS5zY3JvbGxlci5zY3JvbGxUb3A7cj1NYXRoLmZsb29yKHItamUoZSkpO3ZhciBpPW4mJm51bGwhPW4uYm90dG9tP24uYm90dG9tOnIrZS53cmFwcGVyLmNsaWVudEhlaWdodCxvPXRpKHQsciksbD10aSh0LGkpO2lmKG4mJm4uZW5zdXJlKXt2YXIgYT1uLmVuc3VyZS5mcm9tLmxpbmUscz1uLmVuc3VyZS50by5saW5lO28+YT8obz1hLGw9dGkodCxuaShZcih0LGEpKStlLndyYXBwZXIuY2xpZW50SGVpZ2h0KSk6TWF0aC5taW4ocyx0Lmxhc3RMaW5lKCkpPj1sJiYobz10aSh0LG5pKFlyKHQscykpLWUud3JhcHBlci5jbGllbnRIZWlnaHQpLGw9cyl9cmV0dXJue2Zyb206byx0bzpNYXRoLm1heChsLG8rMSl9fWZ1bmN0aW9uIHcoZSl7dmFyIHQ9ZS5kaXNwbGF5LG49dC52aWV3O2lmKHQuYWxpZ25XaWRnZXRzfHx0Lmd1dHRlcnMuZmlyc3RDaGlsZCYmZS5vcHRpb25zLmZpeGVkR3V0dGVyKXtmb3IodmFyIHI9Uyh0KS10LnNjcm9sbGVyLnNjcm9sbExlZnQrZS5kb2Muc2Nyb2xsTGVmdCxpPXQuZ3V0dGVycy5vZmZzZXRXaWR0aCxvPXIrXCJweFwiLGw9MDtsPG4ubGVuZ3RoO2wrKylpZighbltsXS5oaWRkZW4pe2Uub3B0aW9ucy5maXhlZEd1dHRlciYmbltsXS5ndXR0ZXImJihuW2xdLmd1dHRlci5zdHlsZS5sZWZ0PW8pO3ZhciBhPW5bbF0uYWxpZ25hYmxlO2lmKGEpZm9yKHZhciBzPTA7czxhLmxlbmd0aDtzKyspYVtzXS5zdHlsZS5sZWZ0PW99ZS5vcHRpb25zLmZpeGVkR3V0dGVyJiYodC5ndXR0ZXJzLnN0eWxlLmxlZnQ9citpK1wicHhcIil9fWZ1bmN0aW9uIGsoZSl7aWYoIWUub3B0aW9ucy5saW5lTnVtYmVycylyZXR1cm4hMTt2YXIgdD1lLmRvYyxuPUMoZS5vcHRpb25zLHQuZmlyc3QrdC5zaXplLTEpLHI9ZS5kaXNwbGF5O2lmKG4ubGVuZ3RoIT1yLmxpbmVOdW1DaGFycyl7dmFyIGk9ci5tZWFzdXJlLmFwcGVuZENoaWxkKF9pKFwiZGl2XCIsW19pKFwiZGl2XCIsbildLFwiQ29kZU1pcnJvci1saW5lbnVtYmVyIENvZGVNaXJyb3ItZ3V0dGVyLWVsdFwiKSksbz1pLmZpcnN0Q2hpbGQub2Zmc2V0V2lkdGgsbD1pLm9mZnNldFdpZHRoLW87cmV0dXJuIHIubGluZUd1dHRlci5zdHlsZS53aWR0aD1cIlwiLHIubGluZU51bUlubmVyV2lkdGg9TWF0aC5tYXgobyxyLmxpbmVHdXR0ZXIub2Zmc2V0V2lkdGgtbCkrMSxyLmxpbmVOdW1XaWR0aD1yLmxpbmVOdW1Jbm5lcldpZHRoK2wsci5saW5lTnVtQ2hhcnM9ci5saW5lTnVtSW5uZXJXaWR0aD9uLmxlbmd0aDotMSxyLmxpbmVHdXR0ZXIuc3R5bGUud2lkdGg9ci5saW5lTnVtV2lkdGgrXCJweFwiLHUoZSksITB9cmV0dXJuITF9ZnVuY3Rpb24gQyhlLHQpe3JldHVybiBTdHJpbmcoZS5saW5lTnVtYmVyRm9ybWF0dGVyKHQrZS5maXJzdExpbmVOdW1iZXIpKX1mdW5jdGlvbiBTKGUpe3JldHVybiBlLnNjcm9sbGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtZS5zaXplci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fWZ1bmN0aW9uIEwoZSx0LG4pe3ZhciByPWUuZGlzcGxheTt0aGlzLnZpZXdwb3J0PXQsdGhpcy52aXNpYmxlPWIocixlLmRvYyx0KSx0aGlzLmVkaXRvcklzSGlkZGVuPSFyLndyYXBwZXIub2Zmc2V0V2lkdGgsdGhpcy53cmFwcGVySGVpZ2h0PXIud3JhcHBlci5jbGllbnRIZWlnaHQsdGhpcy53cmFwcGVyV2lkdGg9ci53cmFwcGVyLmNsaWVudFdpZHRoLHRoaXMub2xkRGlzcGxheVdpZHRoPSRlKGUpLHRoaXMuZm9yY2U9bix0aGlzLmRpbXM9RChlKSx0aGlzLmV2ZW50cz1bXX1mdW5jdGlvbiBUKGUpe3ZhciB0PWUuZGlzcGxheTshdC5zY3JvbGxiYXJzQ2xpcHBlZCYmdC5zY3JvbGxlci5vZmZzZXRXaWR0aCYmKHQubmF0aXZlQmFyV2lkdGg9dC5zY3JvbGxlci5vZmZzZXRXaWR0aC10LnNjcm9sbGVyLmNsaWVudFdpZHRoLHQuaGVpZ2h0Rm9yY2VyLnN0eWxlLmhlaWdodD1VZShlKStcInB4XCIsdC5zaXplci5zdHlsZS5tYXJnaW5Cb3R0b209LXQubmF0aXZlQmFyV2lkdGgrXCJweFwiLHQuc2l6ZXIuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aD1VZShlKStcInB4XCIsdC5zY3JvbGxiYXJzQ2xpcHBlZD0hMCl9ZnVuY3Rpb24gTShlLHQpe3ZhciBuPWUuZGlzcGxheSxyPWUuZG9jO2lmKHQuZWRpdG9ySXNIaWRkZW4pcmV0dXJuIFB0KGUpLCExO2lmKCF0LmZvcmNlJiZ0LnZpc2libGUuZnJvbT49bi52aWV3RnJvbSYmdC52aXNpYmxlLnRvPD1uLnZpZXdUbyYmKG51bGw9PW4udXBkYXRlTGluZU51bWJlcnN8fG4udXBkYXRlTGluZU51bWJlcnM+PW4udmlld1RvKSYmbi5yZW5kZXJlZFZpZXc9PW4udmlldyYmMD09QnQoZSkpcmV0dXJuITE7ayhlKSYmKFB0KGUpLHQuZGltcz1EKGUpKTt2YXIgaT1yLmZpcnN0K3Iuc2l6ZSxvPU1hdGgubWF4KHQudmlzaWJsZS5mcm9tLWUub3B0aW9ucy52aWV3cG9ydE1hcmdpbixyLmZpcnN0KSxsPU1hdGgubWluKGksdC52aXNpYmxlLnRvK2Uub3B0aW9ucy52aWV3cG9ydE1hcmdpbik7bi52aWV3RnJvbTxvJiZvLW4udmlld0Zyb208MjAmJihvPU1hdGgubWF4KHIuZmlyc3Qsbi52aWV3RnJvbSkpLG4udmlld1RvPmwmJm4udmlld1RvLWw8MjAmJihsPU1hdGgubWluKGksbi52aWV3VG8pKSxJbyYmKG89eHIoZS5kb2MsbyksbD1icihlLmRvYyxsKSk7dmFyIGE9byE9bi52aWV3RnJvbXx8bCE9bi52aWV3VG98fG4ubGFzdFdyYXBIZWlnaHQhPXQud3JhcHBlckhlaWdodHx8bi5sYXN0V3JhcFdpZHRoIT10LndyYXBwZXJXaWR0aDtSdChlLG8sbCksbi52aWV3T2Zmc2V0PW5pKFlyKGUuZG9jLG4udmlld0Zyb20pKSxlLmRpc3BsYXkubW92ZXIuc3R5bGUudG9wPW4udmlld09mZnNldCtcInB4XCI7dmFyIHM9QnQoZSk7aWYoIWEmJjA9PXMmJiF0LmZvcmNlJiZuLnJlbmRlcmVkVmlldz09bi52aWV3JiYobnVsbD09bi51cGRhdGVMaW5lTnVtYmVyc3x8bi51cGRhdGVMaW5lTnVtYmVycz49bi52aWV3VG8pKXJldHVybiExO3ZhciBjPUdpKCk7cmV0dXJuIHM+NCYmKG4ubGluZURpdi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKSxFKGUsbi51cGRhdGVMaW5lTnVtYmVycyx0LmRpbXMpLHM+NCYmKG4ubGluZURpdi5zdHlsZS5kaXNwbGF5PVwiXCIpLG4ucmVuZGVyZWRWaWV3PW4udmlldyxjJiZHaSgpIT1jJiZjLm9mZnNldEhlaWdodCYmYy5mb2N1cygpLGppKG4uY3Vyc29yRGl2KSxqaShuLnNlbGVjdGlvbkRpdiksbi5ndXR0ZXJzLnN0eWxlLmhlaWdodD1uLnNpemVyLnN0eWxlLm1pbkhlaWdodD0wLGEmJihuLmxhc3RXcmFwSGVpZ2h0PXQud3JhcHBlckhlaWdodCxuLmxhc3RXcmFwV2lkdGg9dC53cmFwcGVyV2lkdGgsRmUoZSw0MDApKSxuLnVwZGF0ZUxpbmVOdW1iZXJzPW51bGwsITB9ZnVuY3Rpb24gTihlLHQpe2Zvcih2YXIgbj10LnZpZXdwb3J0LHI9ITA7KHImJmUub3B0aW9ucy5saW5lV3JhcHBpbmcmJnQub2xkRGlzcGxheVdpZHRoIT0kZShlKXx8KG4mJm51bGwhPW4udG9wJiYobj17dG9wOk1hdGgubWluKGUuZG9jLmhlaWdodCtxZShlLmRpc3BsYXkpLVZlKGUpLG4udG9wKX0pLHQudmlzaWJsZT1iKGUuZGlzcGxheSxlLmRvYyxuKSwhKHQudmlzaWJsZS5mcm9tPj1lLmRpc3BsYXkudmlld0Zyb20mJnQudmlzaWJsZS50bzw9ZS5kaXNwbGF5LnZpZXdUbykpKSYmTShlLHQpO3I9ITEpe1coZSk7dmFyIGk9cChlKTtEZShlKSxPKGUsaSkseShlLGkpfXQuc2lnbmFsKGUsXCJ1cGRhdGVcIixlKSwoZS5kaXNwbGF5LnZpZXdGcm9tIT1lLmRpc3BsYXkucmVwb3J0ZWRWaWV3RnJvbXx8ZS5kaXNwbGF5LnZpZXdUbyE9ZS5kaXNwbGF5LnJlcG9ydGVkVmlld1RvKSYmKHQuc2lnbmFsKGUsXCJ2aWV3cG9ydENoYW5nZVwiLGUsZS5kaXNwbGF5LnZpZXdGcm9tLGUuZGlzcGxheS52aWV3VG8pLGUuZGlzcGxheS5yZXBvcnRlZFZpZXdGcm9tPWUuZGlzcGxheS52aWV3RnJvbSxlLmRpc3BsYXkucmVwb3J0ZWRWaWV3VG89ZS5kaXNwbGF5LnZpZXdUbyl9ZnVuY3Rpb24gQShlLHQpe3ZhciBuPW5ldyBMKGUsdCk7aWYoTShlLG4pKXtXKGUpLE4oZSxuKTt2YXIgcj1wKGUpO0RlKGUpLE8oZSxyKSx5KGUsciksbi5maW5pc2goKX19ZnVuY3Rpb24gTyhlLHQpe2UuZGlzcGxheS5zaXplci5zdHlsZS5taW5IZWlnaHQ9dC5kb2NIZWlnaHQrXCJweFwiO3ZhciBuPXQuZG9jSGVpZ2h0K2UuZGlzcGxheS5iYXJIZWlnaHQ7ZS5kaXNwbGF5LmhlaWdodEZvcmNlci5zdHlsZS50b3A9bitcInB4XCIsZS5kaXNwbGF5Lmd1dHRlcnMuc3R5bGUuaGVpZ2h0PU1hdGgubWF4KG4rVWUoZSksdC5jbGllbnRIZWlnaHQpK1wicHhcIn1mdW5jdGlvbiBXKGUpe2Zvcih2YXIgdD1lLmRpc3BsYXksbj10LmxpbmVEaXYub2Zmc2V0VG9wLHI9MDtyPHQudmlldy5sZW5ndGg7cisrKXt2YXIgaSxvPXQudmlld1tyXTtpZighby5oaWRkZW4pe2lmKHlvJiY4PnhvKXt2YXIgbD1vLm5vZGUub2Zmc2V0VG9wK28ubm9kZS5vZmZzZXRIZWlnaHQ7aT1sLW4sbj1sfWVsc2V7dmFyIGE9by5ub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2k9YS5ib3R0b20tYS50b3B9dmFyIHM9by5saW5lLmhlaWdodC1pO2lmKDI+aSYmKGk9dnQodCkpLChzPi4wMDF8fC0uMDAxPnMpJiYoSnIoby5saW5lLGkpLEgoby5saW5lKSxvLnJlc3QpKWZvcih2YXIgYz0wO2M8by5yZXN0Lmxlbmd0aDtjKyspSChvLnJlc3RbY10pfX19ZnVuY3Rpb24gSChlKXtpZihlLndpZGdldHMpZm9yKHZhciB0PTA7dDxlLndpZGdldHMubGVuZ3RoOysrdCllLndpZGdldHNbdF0uaGVpZ2h0PWUud2lkZ2V0c1t0XS5ub2RlLm9mZnNldEhlaWdodH1mdW5jdGlvbiBEKGUpe2Zvcih2YXIgdD1lLmRpc3BsYXksbj17fSxyPXt9LGk9dC5ndXR0ZXJzLmNsaWVudExlZnQsbz10Lmd1dHRlcnMuZmlyc3RDaGlsZCxsPTA7bztvPW8ubmV4dFNpYmxpbmcsKytsKW5bZS5vcHRpb25zLmd1dHRlcnNbbF1dPW8ub2Zmc2V0TGVmdCtvLmNsaWVudExlZnQraSxyW2Uub3B0aW9ucy5ndXR0ZXJzW2xdXT1vLmNsaWVudFdpZHRoO3JldHVybntmaXhlZFBvczpTKHQpLGd1dHRlclRvdGFsV2lkdGg6dC5ndXR0ZXJzLm9mZnNldFdpZHRoLGd1dHRlckxlZnQ6bixndXR0ZXJXaWR0aDpyLHdyYXBwZXJXaWR0aDp0LndyYXBwZXIuY2xpZW50V2lkdGh9fWZ1bmN0aW9uIEUoZSx0LG4pe2Z1bmN0aW9uIHIodCl7dmFyIG49dC5uZXh0U2libGluZztyZXR1cm4gYm8mJkFvJiZlLmRpc3BsYXkuY3VycmVudFdoZWVsVGFyZ2V0PT10P3Quc3R5bGUuZGlzcGxheT1cIm5vbmVcIjp0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksbn1mb3IodmFyIGk9ZS5kaXNwbGF5LG89ZS5vcHRpb25zLmxpbmVOdW1iZXJzLGw9aS5saW5lRGl2LGE9bC5maXJzdENoaWxkLHM9aS52aWV3LGM9aS52aWV3RnJvbSx1PTA7dTxzLmxlbmd0aDt1Kyspe3ZhciBkPXNbdV07aWYoZC5oaWRkZW4pO2Vsc2UgaWYoZC5ub2RlJiZkLm5vZGUucGFyZW50Tm9kZT09bCl7Zm9yKDthIT1kLm5vZGU7KWE9cihhKTt2YXIgaD1vJiZudWxsIT10JiZjPj10JiZkLmxpbmVOdW1iZXI7ZC5jaGFuZ2VzJiYoSGkoZC5jaGFuZ2VzLFwiZ3V0dGVyXCIpPi0xJiYoaD0hMSksSShlLGQsYyxuKSksaCYmKGppKGQubGluZU51bWJlciksZC5saW5lTnVtYmVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKEMoZS5vcHRpb25zLGMpKSkpLGE9ZC5ub2RlLm5leHRTaWJsaW5nfWVsc2V7dmFyIGY9cShlLGQsYyxuKTtsLmluc2VydEJlZm9yZShmLGEpfWMrPWQuc2l6ZX1mb3IoO2E7KWE9cihhKX1mdW5jdGlvbiBJKGUsdCxuLHIpe2Zvcih2YXIgaT0wO2k8dC5jaGFuZ2VzLmxlbmd0aDtpKyspe3ZhciBvPXQuY2hhbmdlc1tpXTtcInRleHRcIj09bz9SKGUsdCk6XCJndXR0ZXJcIj09bz9fKGUsdCxuLHIpOlwiY2xhc3NcIj09bz9CKHQpOlwid2lkZ2V0XCI9PW8mJmooZSx0LHIpfXQuY2hhbmdlcz1udWxsfWZ1bmN0aW9uIFAoZSl7cmV0dXJuIGUubm9kZT09ZS50ZXh0JiYoZS5ub2RlPV9pKFwiZGl2XCIsbnVsbCxudWxsLFwicG9zaXRpb246IHJlbGF0aXZlXCIpLGUudGV4dC5wYXJlbnROb2RlJiZlLnRleHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZS5ub2RlLGUudGV4dCksZS5ub2RlLmFwcGVuZENoaWxkKGUudGV4dCkseW8mJjg+eG8mJihlLm5vZGUuc3R5bGUuekluZGV4PTIpKSxlLm5vZGV9ZnVuY3Rpb24geihlKXt2YXIgdD1lLmJnQ2xhc3M/ZS5iZ0NsYXNzK1wiIFwiKyhlLmxpbmUuYmdDbGFzc3x8XCJcIik6ZS5saW5lLmJnQ2xhc3M7aWYodCYmKHQrPVwiIENvZGVNaXJyb3ItbGluZWJhY2tncm91bmRcIiksZS5iYWNrZ3JvdW5kKXQ/ZS5iYWNrZ3JvdW5kLmNsYXNzTmFtZT10OihlLmJhY2tncm91bmQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlLmJhY2tncm91bmQpLGUuYmFja2dyb3VuZD1udWxsKTtlbHNlIGlmKHQpe3ZhciBuPVAoZSk7ZS5iYWNrZ3JvdW5kPW4uaW5zZXJ0QmVmb3JlKF9pKFwiZGl2XCIsbnVsbCx0KSxuLmZpcnN0Q2hpbGQpfX1mdW5jdGlvbiBGKGUsdCl7dmFyIG49ZS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQ7cmV0dXJuIG4mJm4ubGluZT09dC5saW5lPyhlLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZD1udWxsLHQubWVhc3VyZT1uLm1lYXN1cmUsbi5idWlsdCk6enIoZSx0KX1mdW5jdGlvbiBSKGUsdCl7dmFyIG49dC50ZXh0LmNsYXNzTmFtZSxyPUYoZSx0KTt0LnRleHQ9PXQubm9kZSYmKHQubm9kZT1yLnByZSksdC50ZXh0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHIucHJlLHQudGV4dCksdC50ZXh0PXIucHJlLHIuYmdDbGFzcyE9dC5iZ0NsYXNzfHxyLnRleHRDbGFzcyE9dC50ZXh0Q2xhc3M/KHQuYmdDbGFzcz1yLmJnQ2xhc3MsdC50ZXh0Q2xhc3M9ci50ZXh0Q2xhc3MsQih0KSk6biYmKHQudGV4dC5jbGFzc05hbWU9bil9ZnVuY3Rpb24gQihlKXt6KGUpLGUubGluZS53cmFwQ2xhc3M/UChlKS5jbGFzc05hbWU9ZS5saW5lLndyYXBDbGFzczplLm5vZGUhPWUudGV4dCYmKGUubm9kZS5jbGFzc05hbWU9XCJcIik7dmFyIHQ9ZS50ZXh0Q2xhc3M/ZS50ZXh0Q2xhc3MrXCIgXCIrKGUubGluZS50ZXh0Q2xhc3N8fFwiXCIpOmUubGluZS50ZXh0Q2xhc3M7ZS50ZXh0LmNsYXNzTmFtZT10fHxcIlwifWZ1bmN0aW9uIF8oZSx0LG4scil7aWYodC5ndXR0ZXImJih0Lm5vZGUucmVtb3ZlQ2hpbGQodC5ndXR0ZXIpLHQuZ3V0dGVyPW51bGwpLHQuZ3V0dGVyQmFja2dyb3VuZCYmKHQubm9kZS5yZW1vdmVDaGlsZCh0Lmd1dHRlckJhY2tncm91bmQpLHQuZ3V0dGVyQmFja2dyb3VuZD1udWxsKSx0LmxpbmUuZ3V0dGVyQ2xhc3Mpe3ZhciBpPVAodCk7dC5ndXR0ZXJCYWNrZ3JvdW5kPV9pKFwiZGl2XCIsbnVsbCxcIkNvZGVNaXJyb3ItZ3V0dGVyLWJhY2tncm91bmQgXCIrdC5saW5lLmd1dHRlckNsYXNzLFwibGVmdDogXCIrKGUub3B0aW9ucy5maXhlZEd1dHRlcj9yLmZpeGVkUG9zOi1yLmd1dHRlclRvdGFsV2lkdGgpK1wicHg7IHdpZHRoOiBcIityLmd1dHRlclRvdGFsV2lkdGgrXCJweFwiKSxpLmluc2VydEJlZm9yZSh0Lmd1dHRlckJhY2tncm91bmQsdC50ZXh0KX12YXIgbz10LmxpbmUuZ3V0dGVyTWFya2VycztpZihlLm9wdGlvbnMubGluZU51bWJlcnN8fG8pe3ZhciBpPVAodCksbD10Lmd1dHRlcj1faShcImRpdlwiLG51bGwsXCJDb2RlTWlycm9yLWd1dHRlci13cmFwcGVyXCIsXCJsZWZ0OiBcIisoZS5vcHRpb25zLmZpeGVkR3V0dGVyP3IuZml4ZWRQb3M6LXIuZ3V0dGVyVG90YWxXaWR0aCkrXCJweFwiKTtpZihlLmRpc3BsYXkuaW5wdXQuc2V0VW5lZGl0YWJsZShsKSxpLmluc2VydEJlZm9yZShsLHQudGV4dCksdC5saW5lLmd1dHRlckNsYXNzJiYobC5jbGFzc05hbWUrPVwiIFwiK3QubGluZS5ndXR0ZXJDbGFzcyksIWUub3B0aW9ucy5saW5lTnVtYmVyc3x8byYmb1tcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIl18fCh0LmxpbmVOdW1iZXI9bC5hcHBlbmRDaGlsZChfaShcImRpdlwiLEMoZS5vcHRpb25zLG4pLFwiQ29kZU1pcnJvci1saW5lbnVtYmVyIENvZGVNaXJyb3ItZ3V0dGVyLWVsdFwiLFwibGVmdDogXCIrci5ndXR0ZXJMZWZ0W1wiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiXStcInB4OyB3aWR0aDogXCIrZS5kaXNwbGF5LmxpbmVOdW1Jbm5lcldpZHRoK1wicHhcIikpKSxvKWZvcih2YXIgYT0wO2E8ZS5vcHRpb25zLmd1dHRlcnMubGVuZ3RoOysrYSl7dmFyIHM9ZS5vcHRpb25zLmd1dHRlcnNbYV0sYz1vLmhhc093blByb3BlcnR5KHMpJiZvW3NdO2MmJmwuYXBwZW5kQ2hpbGQoX2koXCJkaXZcIixbY10sXCJDb2RlTWlycm9yLWd1dHRlci1lbHRcIixcImxlZnQ6IFwiK3IuZ3V0dGVyTGVmdFtzXStcInB4OyB3aWR0aDogXCIrci5ndXR0ZXJXaWR0aFtzXStcInB4XCIpKX19fWZ1bmN0aW9uIGooZSx0LG4pe3QuYWxpZ25hYmxlJiYodC5hbGlnbmFibGU9bnVsbCk7Zm9yKHZhciByLGk9dC5ub2RlLmZpcnN0Q2hpbGQ7aTtpPXIpe3ZhciByPWkubmV4dFNpYmxpbmc7XCJDb2RlTWlycm9yLWxpbmV3aWRnZXRcIj09aS5jbGFzc05hbWUmJnQubm9kZS5yZW1vdmVDaGlsZChpKX1HKGUsdCxuKX1mdW5jdGlvbiBxKGUsdCxuLHIpe3ZhciBpPUYoZSx0KTtyZXR1cm4gdC50ZXh0PXQubm9kZT1pLnByZSxpLmJnQ2xhc3MmJih0LmJnQ2xhc3M9aS5iZ0NsYXNzKSxpLnRleHRDbGFzcyYmKHQudGV4dENsYXNzPWkudGV4dENsYXNzKSxCKHQpLF8oZSx0LG4sciksRyhlLHQsciksdC5ub2RlfWZ1bmN0aW9uIEcoZSx0LG4pe2lmKFUoZSx0LmxpbmUsdCxuLCEwKSx0LnJlc3QpZm9yKHZhciByPTA7cjx0LnJlc3QubGVuZ3RoO3IrKylVKGUsdC5yZXN0W3JdLHQsbiwhMSl9ZnVuY3Rpb24gVShlLHQsbixyLGkpe2lmKHQud2lkZ2V0cylmb3IodmFyIG89UChuKSxsPTAsYT10LndpZGdldHM7bDxhLmxlbmd0aDsrK2wpe3ZhciBzPWFbbF0sYz1faShcImRpdlwiLFtzLm5vZGVdLFwiQ29kZU1pcnJvci1saW5ld2lkZ2V0XCIpO3MuaGFuZGxlTW91c2VFdmVudHN8fGMuc2V0QXR0cmlidXRlKFwiY20taWdub3JlLWV2ZW50c1wiLFwidHJ1ZVwiKSwkKHMsYyxuLHIpLGUuZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKGMpLGkmJnMuYWJvdmU/by5pbnNlcnRCZWZvcmUoYyxuLmd1dHRlcnx8bi50ZXh0KTpvLmFwcGVuZENoaWxkKGMpLENpKHMsXCJyZWRyYXdcIil9fWZ1bmN0aW9uICQoZSx0LG4scil7aWYoZS5ub0hTY3JvbGwpeyhuLmFsaWduYWJsZXx8KG4uYWxpZ25hYmxlPVtdKSkucHVzaCh0KTt2YXIgaT1yLndyYXBwZXJXaWR0aDt0LnN0eWxlLmxlZnQ9ci5maXhlZFBvcytcInB4XCIsZS5jb3Zlckd1dHRlcnx8KGktPXIuZ3V0dGVyVG90YWxXaWR0aCx0LnN0eWxlLnBhZGRpbmdMZWZ0PXIuZ3V0dGVyVG90YWxXaWR0aCtcInB4XCIpLHQuc3R5bGUud2lkdGg9aStcInB4XCJ9ZS5jb3Zlckd1dHRlciYmKHQuc3R5bGUuekluZGV4PTUsdC5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIsZS5ub0hTY3JvbGx8fCh0LnN0eWxlLm1hcmdpbkxlZnQ9LXIuZ3V0dGVyVG90YWxXaWR0aCtcInB4XCIpKX1mdW5jdGlvbiBWKGUpe3JldHVybiBQbyhlLmxpbmUsZS5jaCl9ZnVuY3Rpb24gSyhlLHQpe3JldHVybiB6byhlLHQpPDA/dDplfWZ1bmN0aW9uIFgoZSx0KXtyZXR1cm4gem8oZSx0KTwwP2U6dH1mdW5jdGlvbiBZKGUpe2Uuc3RhdGUuZm9jdXNlZHx8KGUuZGlzcGxheS5pbnB1dC5mb2N1cygpLGduKGUpKX1mdW5jdGlvbiBaKGUpe3JldHVybiBlLm9wdGlvbnMucmVhZE9ubHl8fGUuZG9jLmNhbnRFZGl0fWZ1bmN0aW9uIFEoZSx0LG4scixpKXt2YXIgbz1lLmRvYztlLmRpc3BsYXkuc2hpZnQ9ITEscnx8KHI9by5zZWwpO3ZhciBsPWUuc3RhdGUucGFzdGVJbmNvbWluZ3x8XCJwYXN0ZVwiPT1pLGE9by5zcGxpdExpbmVzKHQpLHM9bnVsbDtpZihsJiZyLnJhbmdlcy5sZW5ndGg+MSlpZihGbyYmRm8uam9pbihcIlxcblwiKT09dCl7aWYoci5yYW5nZXMubGVuZ3RoJUZvLmxlbmd0aD09MCl7cz1bXTtmb3IodmFyIGM9MDtjPEZvLmxlbmd0aDtjKyspcy5wdXNoKG8uc3BsaXRMaW5lcyhGb1tjXSkpfX1lbHNlIGEubGVuZ3RoPT1yLnJhbmdlcy5sZW5ndGgmJihzPURpKGEsZnVuY3Rpb24oZSl7cmV0dXJuW2VdfSkpO2Zvcih2YXIgYz1yLnJhbmdlcy5sZW5ndGgtMTtjPj0wO2MtLSl7dmFyIHU9ci5yYW5nZXNbY10sZD11LmZyb20oKSxoPXUudG8oKTt1LmVtcHR5KCkmJihuJiZuPjA/ZD1QbyhkLmxpbmUsZC5jaC1uKTplLnN0YXRlLm92ZXJ3cml0ZSYmIWwmJihoPVBvKGgubGluZSxNYXRoLm1pbihZcihvLGgubGluZSkudGV4dC5sZW5ndGgsaC5jaCtXaShhKS5sZW5ndGgpKSkpO3ZhciBmPWUuY3VyT3AudXBkYXRlSW5wdXQscD17ZnJvbTpkLHRvOmgsdGV4dDpzP3NbYyVzLmxlbmd0aF06YSxvcmlnaW46aXx8KGw/XCJwYXN0ZVwiOmUuc3RhdGUuY3V0SW5jb21pbmc/XCJjdXRcIjpcIitpbnB1dFwiKX07TG4oZS5kb2MscCksQ2koZSxcImlucHV0UmVhZFwiLGUscCl9dCYmIWwmJmVlKGUsdCksem4oZSksZS5jdXJPcC51cGRhdGVJbnB1dD1mLGUuY3VyT3AudHlwaW5nPSEwLGUuc3RhdGUucGFzdGVJbmNvbWluZz1lLnN0YXRlLmN1dEluY29taW5nPSExfWZ1bmN0aW9uIEooZSx0KXt2YXIgbj1lLmNsaXBib2FyZERhdGEmJmUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKTtyZXR1cm4gbj8oZS5wcmV2ZW50RGVmYXVsdCgpLFoodCl8fHQub3B0aW9ucy5kaXNhYmxlSW5wdXR8fE50KHQsZnVuY3Rpb24oKXtRKHQsbiwwLG51bGwsXCJwYXN0ZVwiKX0pLCEwKTp2b2lkIDB9ZnVuY3Rpb24gZWUoZSx0KXtpZihlLm9wdGlvbnMuZWxlY3RyaWNDaGFycyYmZS5vcHRpb25zLnNtYXJ0SW5kZW50KWZvcih2YXIgbj1lLmRvYy5zZWwscj1uLnJhbmdlcy5sZW5ndGgtMTtyPj0wO3ItLSl7dmFyIGk9bi5yYW5nZXNbcl07aWYoIShpLmhlYWQuY2g+MTAwfHxyJiZuLnJhbmdlc1tyLTFdLmhlYWQubGluZT09aS5oZWFkLmxpbmUpKXt2YXIgbz1lLmdldE1vZGVBdChpLmhlYWQpLGw9ITE7aWYoby5lbGVjdHJpY0NoYXJzKXtmb3IodmFyIGE9MDthPG8uZWxlY3RyaWNDaGFycy5sZW5ndGg7YSsrKWlmKHQuaW5kZXhPZihvLmVsZWN0cmljQ2hhcnMuY2hhckF0KGEpKT4tMSl7bD1SbihlLGkuaGVhZC5saW5lLFwic21hcnRcIik7YnJlYWt9fWVsc2Ugby5lbGVjdHJpY0lucHV0JiZvLmVsZWN0cmljSW5wdXQudGVzdChZcihlLmRvYyxpLmhlYWQubGluZSkudGV4dC5zbGljZSgwLGkuaGVhZC5jaCkpJiYobD1SbihlLGkuaGVhZC5saW5lLFwic21hcnRcIikpO2wmJkNpKGUsXCJlbGVjdHJpY0lucHV0XCIsZSxpLmhlYWQubGluZSl9fX1mdW5jdGlvbiB0ZShlKXtmb3IodmFyIHQ9W10sbj1bXSxyPTA7cjxlLmRvYy5zZWwucmFuZ2VzLmxlbmd0aDtyKyspe3ZhciBpPWUuZG9jLnNlbC5yYW5nZXNbcl0uaGVhZC5saW5lLG89e2FuY2hvcjpQbyhpLDApLGhlYWQ6UG8oaSsxLDApfTtuLnB1c2gobyksdC5wdXNoKGUuZ2V0UmFuZ2Uoby5hbmNob3Isby5oZWFkKSl9cmV0dXJue3RleHQ6dCxyYW5nZXM6bn19ZnVuY3Rpb24gbmUoZSl7ZS5zZXRBdHRyaWJ1dGUoXCJhdXRvY29ycmVjdFwiLFwib2ZmXCIpLGUuc2V0QXR0cmlidXRlKFwiYXV0b2NhcGl0YWxpemVcIixcIm9mZlwiKSxlLnNldEF0dHJpYnV0ZShcInNwZWxsY2hlY2tcIixcImZhbHNlXCIpfWZ1bmN0aW9uIHJlKGUpe3RoaXMuY209ZSx0aGlzLnByZXZJbnB1dD1cIlwiLHRoaXMucG9sbGluZ0Zhc3Q9ITEsdGhpcy5wb2xsaW5nPW5ldyBBaSx0aGlzLmluYWNjdXJhdGVTZWxlY3Rpb249ITEsdGhpcy5oYXNTZWxlY3Rpb249ITEsdGhpcy5jb21wb3Npbmc9bnVsbH1mdW5jdGlvbiBpZSgpe3ZhciBlPV9pKFwidGV4dGFyZWFcIixudWxsLG51bGwsXCJwb3NpdGlvbjogYWJzb2x1dGU7IHBhZGRpbmc6IDA7IHdpZHRoOiAxcHg7IGhlaWdodDogMWVtOyBvdXRsaW5lOiBub25lXCIpLHQ9X2koXCJkaXZcIixbZV0sbnVsbCxcIm92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsgd2lkdGg6IDNweDsgaGVpZ2h0OiAwcHg7XCIpO3JldHVybiBibz9lLnN0eWxlLndpZHRoPVwiMTAwMHB4XCI6ZS5zZXRBdHRyaWJ1dGUoXCJ3cmFwXCIsXCJvZmZcIiksTW8mJihlLnN0eWxlLmJvcmRlcj1cIjFweCBzb2xpZCBibGFja1wiKSxuZShlKSx0fWZ1bmN0aW9uIG9lKGUpe3RoaXMuY209ZSx0aGlzLmxhc3RBbmNob3JOb2RlPXRoaXMubGFzdEFuY2hvck9mZnNldD10aGlzLmxhc3RGb2N1c05vZGU9dGhpcy5sYXN0Rm9jdXNPZmZzZXQ9bnVsbCx0aGlzLnBvbGxpbmc9bmV3IEFpLHRoaXMuZ3JhY2VQZXJpb2Q9ITF9ZnVuY3Rpb24gbGUoZSx0KXt2YXIgbj1RZShlLHQubGluZSk7aWYoIW58fG4uaGlkZGVuKXJldHVybiBudWxsO3ZhciByPVlyKGUuZG9jLHQubGluZSksaT1YZShuLHIsdC5saW5lKSxvPXJpKHIpLGw9XCJsZWZ0XCI7aWYobyl7dmFyIGE9c28obyx0LmNoKTtsPWElMj9cInJpZ2h0XCI6XCJsZWZ0XCJ9dmFyIHM9dHQoaS5tYXAsdC5jaCxsKTtyZXR1cm4gcy5vZmZzZXQ9XCJyaWdodFwiPT1zLmNvbGxhcHNlP3MuZW5kOnMuc3RhcnQsc31mdW5jdGlvbiBhZShlLHQpe3JldHVybiB0JiYoZS5iYWQ9ITApLGV9ZnVuY3Rpb24gc2UoZSx0LG4pe3ZhciByO2lmKHQ9PWUuZGlzcGxheS5saW5lRGl2KXtpZihyPWUuZGlzcGxheS5saW5lRGl2LmNoaWxkTm9kZXNbbl0sIXIpcmV0dXJuIGFlKGUuY2xpcFBvcyhQbyhlLmRpc3BsYXkudmlld1RvLTEpKSwhMCk7dD1udWxsLG49MH1lbHNlIGZvcihyPXQ7O3I9ci5wYXJlbnROb2RlKXtpZighcnx8cj09ZS5kaXNwbGF5LmxpbmVEaXYpcmV0dXJuIG51bGw7aWYoci5wYXJlbnROb2RlJiZyLnBhcmVudE5vZGU9PWUuZGlzcGxheS5saW5lRGl2KWJyZWFrfVxuZm9yKHZhciBpPTA7aTxlLmRpc3BsYXkudmlldy5sZW5ndGg7aSsrKXt2YXIgbz1lLmRpc3BsYXkudmlld1tpXTtpZihvLm5vZGU9PXIpcmV0dXJuIGNlKG8sdCxuKX19ZnVuY3Rpb24gY2UoZSx0LG4pe2Z1bmN0aW9uIHIodCxuLHIpe2Zvcih2YXIgaT0tMTtpPCh1P3UubGVuZ3RoOjApO2krKylmb3IodmFyIG89MD5pP2MubWFwOnVbaV0sbD0wO2w8by5sZW5ndGg7bCs9Myl7dmFyIGE9b1tsKzJdO2lmKGE9PXR8fGE9PW4pe3ZhciBzPWVpKDA+aT9lLmxpbmU6ZS5yZXN0W2ldKSxkPW9bbF0rcjtyZXR1cm4oMD5yfHxhIT10KSYmKGQ9b1tsKyhyPzE6MCldKSxQbyhzLGQpfX19dmFyIGk9ZS50ZXh0LmZpcnN0Q2hpbGQsbz0hMTtpZighdHx8ISRsKGksdCkpcmV0dXJuIGFlKFBvKGVpKGUubGluZSksMCksITApO2lmKHQ9PWkmJihvPSEwLHQ9aS5jaGlsZE5vZGVzW25dLG49MCwhdCkpe3ZhciBsPWUucmVzdD9XaShlLnJlc3QpOmUubGluZTtyZXR1cm4gYWUoUG8oZWkobCksbC50ZXh0Lmxlbmd0aCksbyl9dmFyIGE9Mz09dC5ub2RlVHlwZT90Om51bGwscz10O2ZvcihhfHwxIT10LmNoaWxkTm9kZXMubGVuZ3RofHwzIT10LmZpcnN0Q2hpbGQubm9kZVR5cGV8fChhPXQuZmlyc3RDaGlsZCxuJiYobj1hLm5vZGVWYWx1ZS5sZW5ndGgpKTtzLnBhcmVudE5vZGUhPWk7KXM9cy5wYXJlbnROb2RlO3ZhciBjPWUubWVhc3VyZSx1PWMubWFwcyxkPXIoYSxzLG4pO2lmKGQpcmV0dXJuIGFlKGQsbyk7Zm9yKHZhciBoPXMubmV4dFNpYmxpbmcsZj1hP2Eubm9kZVZhbHVlLmxlbmd0aC1uOjA7aDtoPWgubmV4dFNpYmxpbmcpe2lmKGQ9cihoLGguZmlyc3RDaGlsZCwwKSlyZXR1cm4gYWUoUG8oZC5saW5lLGQuY2gtZiksbyk7Zis9aC50ZXh0Q29udGVudC5sZW5ndGh9Zm9yKHZhciBwPXMucHJldmlvdXNTaWJsaW5nLGY9bjtwO3A9cC5wcmV2aW91c1NpYmxpbmcpe2lmKGQ9cihwLHAuZmlyc3RDaGlsZCwtMSkpcmV0dXJuIGFlKFBvKGQubGluZSxkLmNoK2YpLG8pO2YrPWgudGV4dENvbnRlbnQubGVuZ3RofX1mdW5jdGlvbiB1ZShlLHQsbixyLGkpe2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiB0LmlkPT1lfX1mdW5jdGlvbiBsKHQpe2lmKDE9PXQubm9kZVR5cGUpe3ZhciBuPXQuZ2V0QXR0cmlidXRlKFwiY20tdGV4dFwiKTtpZihudWxsIT1uKXJldHVyblwiXCI9PW4mJihuPXQudGV4dENvbnRlbnQucmVwbGFjZSgvXFx1MjAwYi9nLFwiXCIpKSx2b2lkKGErPW4pO3ZhciB1LGQ9dC5nZXRBdHRyaWJ1dGUoXCJjbS1tYXJrZXJcIik7aWYoZCl7dmFyIGg9ZS5maW5kTWFya3MoUG8ociwwKSxQbyhpKzEsMCksbygrZCkpO3JldHVybiB2b2lkKGgubGVuZ3RoJiYodT1oWzBdLmZpbmQoKSkmJihhKz1acihlLmRvYyx1LmZyb20sdS50bykuam9pbihjKSkpfWlmKFwiZmFsc2VcIj09dC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpcmV0dXJuO2Zvcih2YXIgZj0wO2Y8dC5jaGlsZE5vZGVzLmxlbmd0aDtmKyspbCh0LmNoaWxkTm9kZXNbZl0pOy9eKHByZXxkaXZ8cCkkL2kudGVzdCh0Lm5vZGVOYW1lKSYmKHM9ITApfWVsc2UgaWYoMz09dC5ub2RlVHlwZSl7dmFyIHA9dC5ub2RlVmFsdWU7aWYoIXApcmV0dXJuO3MmJihhKz1jLHM9ITEpLGErPXB9fWZvcih2YXIgYT1cIlwiLHM9ITEsYz1lLmRvYy5saW5lU2VwYXJhdG9yKCk7bCh0KSx0IT1uOyl0PXQubmV4dFNpYmxpbmc7cmV0dXJuIGF9ZnVuY3Rpb24gZGUoZSx0KXt0aGlzLnJhbmdlcz1lLHRoaXMucHJpbUluZGV4PXR9ZnVuY3Rpb24gaGUoZSx0KXt0aGlzLmFuY2hvcj1lLHRoaXMuaGVhZD10fWZ1bmN0aW9uIGZlKGUsdCl7dmFyIG49ZVt0XTtlLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gem8oZS5mcm9tKCksdC5mcm9tKCkpfSksdD1IaShlLG4pO2Zvcih2YXIgcj0xO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdLG89ZVtyLTFdO2lmKHpvKG8udG8oKSxpLmZyb20oKSk+PTApe3ZhciBsPVgoby5mcm9tKCksaS5mcm9tKCkpLGE9SyhvLnRvKCksaS50bygpKSxzPW8uZW1wdHkoKT9pLmZyb20oKT09aS5oZWFkOm8uZnJvbSgpPT1vLmhlYWQ7dD49ciYmLS10LGUuc3BsaWNlKC0tciwyLG5ldyBoZShzP2E6bCxzP2w6YSkpfX1yZXR1cm4gbmV3IGRlKGUsdCl9ZnVuY3Rpb24gcGUoZSx0KXtyZXR1cm4gbmV3IGRlKFtuZXcgaGUoZSx0fHxlKV0sMCl9ZnVuY3Rpb24gbWUoZSx0KXtyZXR1cm4gTWF0aC5tYXgoZS5maXJzdCxNYXRoLm1pbih0LGUuZmlyc3QrZS5zaXplLTEpKX1mdW5jdGlvbiBnZShlLHQpe2lmKHQubGluZTxlLmZpcnN0KXJldHVybiBQbyhlLmZpcnN0LDApO3ZhciBuPWUuZmlyc3QrZS5zaXplLTE7cmV0dXJuIHQubGluZT5uP1BvKG4sWXIoZSxuKS50ZXh0Lmxlbmd0aCk6dmUodCxZcihlLHQubGluZSkudGV4dC5sZW5ndGgpfWZ1bmN0aW9uIHZlKGUsdCl7dmFyIG49ZS5jaDtyZXR1cm4gbnVsbD09bnx8bj50P1BvKGUubGluZSx0KTowPm4/UG8oZS5saW5lLDApOmV9ZnVuY3Rpb24geWUoZSx0KXtyZXR1cm4gdD49ZS5maXJzdCYmdDxlLmZpcnN0K2Uuc2l6ZX1mdW5jdGlvbiB4ZShlLHQpe2Zvcih2YXIgbj1bXSxyPTA7cjx0Lmxlbmd0aDtyKyspbltyXT1nZShlLHRbcl0pO3JldHVybiBufWZ1bmN0aW9uIGJlKGUsdCxuLHIpe2lmKGUuY20mJmUuY20uZGlzcGxheS5zaGlmdHx8ZS5leHRlbmQpe3ZhciBpPXQuYW5jaG9yO2lmKHIpe3ZhciBvPXpvKG4saSk8MDtvIT16byhyLGkpPDA/KGk9bixuPXIpOm8hPXpvKG4scik8MCYmKG49cil9cmV0dXJuIG5ldyBoZShpLG4pfXJldHVybiBuZXcgaGUocnx8bixuKX1mdW5jdGlvbiB3ZShlLHQsbixyKXtNZShlLG5ldyBkZShbYmUoZSxlLnNlbC5wcmltYXJ5KCksdCxuKV0sMCkscil9ZnVuY3Rpb24ga2UoZSx0LG4pe2Zvcih2YXIgcj1bXSxpPTA7aTxlLnNlbC5yYW5nZXMubGVuZ3RoO2krKylyW2ldPWJlKGUsZS5zZWwucmFuZ2VzW2ldLHRbaV0sbnVsbCk7dmFyIG89ZmUocixlLnNlbC5wcmltSW5kZXgpO01lKGUsbyxuKX1mdW5jdGlvbiBDZShlLHQsbixyKXt2YXIgaT1lLnNlbC5yYW5nZXMuc2xpY2UoMCk7aVt0XT1uLE1lKGUsZmUoaSxlLnNlbC5wcmltSW5kZXgpLHIpfWZ1bmN0aW9uIFNlKGUsdCxuLHIpe01lKGUscGUodCxuKSxyKX1mdW5jdGlvbiBMZShlLHQpe3ZhciBuPXtyYW5nZXM6dC5yYW5nZXMsdXBkYXRlOmZ1bmN0aW9uKHQpe3RoaXMucmFuZ2VzPVtdO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXRoaXMucmFuZ2VzW25dPW5ldyBoZShnZShlLHRbbl0uYW5jaG9yKSxnZShlLHRbbl0uaGVhZCkpfX07cmV0dXJuIFdsKGUsXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIixlLG4pLGUuY20mJldsKGUuY20sXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIixlLmNtLG4pLG4ucmFuZ2VzIT10LnJhbmdlcz9mZShuLnJhbmdlcyxuLnJhbmdlcy5sZW5ndGgtMSk6dH1mdW5jdGlvbiBUZShlLHQsbil7dmFyIHI9ZS5oaXN0b3J5LmRvbmUsaT1XaShyKTtpJiZpLnJhbmdlcz8ocltyLmxlbmd0aC0xXT10LE5lKGUsdCxuKSk6TWUoZSx0LG4pfWZ1bmN0aW9uIE1lKGUsdCxuKXtOZShlLHQsbiksdWkoZSxlLnNlbCxlLmNtP2UuY20uY3VyT3AuaWQ6TmFOLG4pfWZ1bmN0aW9uIE5lKGUsdCxuKXsoTWkoZSxcImJlZm9yZVNlbGVjdGlvbkNoYW5nZVwiKXx8ZS5jbSYmTWkoZS5jbSxcImJlZm9yZVNlbGVjdGlvbkNoYW5nZVwiKSkmJih0PUxlKGUsdCkpO3ZhciByPW4mJm4uYmlhc3x8KHpvKHQucHJpbWFyeSgpLmhlYWQsZS5zZWwucHJpbWFyeSgpLmhlYWQpPDA/LTE6MSk7QWUoZSxXZShlLHQsciwhMCkpLG4mJm4uc2Nyb2xsPT09ITF8fCFlLmNtfHx6bihlLmNtKX1mdW5jdGlvbiBBZShlLHQpe3QuZXF1YWxzKGUuc2VsKXx8KGUuc2VsPXQsZS5jbSYmKGUuY20uY3VyT3AudXBkYXRlSW5wdXQ9ZS5jbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkPSEwLFRpKGUuY20pKSxDaShlLFwiY3Vyc29yQWN0aXZpdHlcIixlKSl9ZnVuY3Rpb24gT2UoZSl7QWUoZSxXZShlLGUuc2VsLG51bGwsITEpLElsKX1mdW5jdGlvbiBXZShlLHQsbixyKXtmb3IodmFyIGksbz0wO288dC5yYW5nZXMubGVuZ3RoO28rKyl7dmFyIGw9dC5yYW5nZXNbb10sYT1IZShlLGwuYW5jaG9yLG4scikscz1IZShlLGwuaGVhZCxuLHIpOyhpfHxhIT1sLmFuY2hvcnx8cyE9bC5oZWFkKSYmKGl8fChpPXQucmFuZ2VzLnNsaWNlKDAsbykpLGlbb109bmV3IGhlKGEscykpfXJldHVybiBpP2ZlKGksdC5wcmltSW5kZXgpOnR9ZnVuY3Rpb24gSGUoZSx0LG4scil7dmFyIGk9ITEsbz10LGw9bnx8MTtlLmNhbnRFZGl0PSExO2U6Zm9yKDs7KXt2YXIgYT1ZcihlLG8ubGluZSk7aWYoYS5tYXJrZWRTcGFucylmb3IodmFyIHM9MDtzPGEubWFya2VkU3BhbnMubGVuZ3RoOysrcyl7dmFyIGM9YS5tYXJrZWRTcGFuc1tzXSx1PWMubWFya2VyO2lmKChudWxsPT1jLmZyb218fCh1LmluY2x1c2l2ZUxlZnQ/Yy5mcm9tPD1vLmNoOmMuZnJvbTxvLmNoKSkmJihudWxsPT1jLnRvfHwodS5pbmNsdXNpdmVSaWdodD9jLnRvPj1vLmNoOmMudG8+by5jaCkpKXtpZihyJiYoV2wodSxcImJlZm9yZUN1cnNvckVudGVyXCIpLHUuZXhwbGljaXRseUNsZWFyZWQpKXtpZihhLm1hcmtlZFNwYW5zKXstLXM7Y29udGludWV9YnJlYWt9aWYoIXUuYXRvbWljKWNvbnRpbnVlO3ZhciBkPXUuZmluZCgwPmw/LTE6MSk7aWYoMD09em8oZCxvKSYmKGQuY2grPWwsZC5jaDwwP2Q9ZC5saW5lPmUuZmlyc3Q/Z2UoZSxQbyhkLmxpbmUtMSkpOm51bGw6ZC5jaD5hLnRleHQubGVuZ3RoJiYoZD1kLmxpbmU8ZS5maXJzdCtlLnNpemUtMT9QbyhkLmxpbmUrMSwwKTpudWxsKSwhZCkpe2lmKGkpcmV0dXJuIHI/KGUuY2FudEVkaXQ9ITAsUG8oZS5maXJzdCwwKSk6SGUoZSx0LG4sITApO2k9ITAsZD10LGw9LWx9bz1kO2NvbnRpbnVlIGV9fXJldHVybiBvfX1mdW5jdGlvbiBEZShlKXtlLmRpc3BsYXkuaW5wdXQuc2hvd1NlbGVjdGlvbihlLmRpc3BsYXkuaW5wdXQucHJlcGFyZVNlbGVjdGlvbigpKX1mdW5jdGlvbiBFZShlLHQpe2Zvcih2YXIgbj1lLmRvYyxyPXt9LGk9ci5jdXJzb3JzPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxvPXIuc2VsZWN0aW9uPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxsPTA7bDxuLnNlbC5yYW5nZXMubGVuZ3RoO2wrKylpZih0IT09ITF8fGwhPW4uc2VsLnByaW1JbmRleCl7dmFyIGE9bi5zZWwucmFuZ2VzW2xdLHM9YS5lbXB0eSgpOyhzfHxlLm9wdGlvbnMuc2hvd0N1cnNvcldoZW5TZWxlY3RpbmcpJiZJZShlLGEuaGVhZCxpKSxzfHxQZShlLGEsbyl9cmV0dXJuIHJ9ZnVuY3Rpb24gSWUoZSx0LG4pe3ZhciByPWh0KGUsdCxcImRpdlwiLG51bGwsbnVsbCwhZS5vcHRpb25zLnNpbmdsZUN1cnNvckhlaWdodFBlckxpbmUpLGk9bi5hcHBlbmRDaGlsZChfaShcImRpdlwiLFwiIFwiLFwiQ29kZU1pcnJvci1jdXJzb3JcIikpO2lmKGkuc3R5bGUubGVmdD1yLmxlZnQrXCJweFwiLGkuc3R5bGUudG9wPXIudG9wK1wicHhcIixpLnN0eWxlLmhlaWdodD1NYXRoLm1heCgwLHIuYm90dG9tLXIudG9wKSplLm9wdGlvbnMuY3Vyc29ySGVpZ2h0K1wicHhcIixyLm90aGVyKXt2YXIgbz1uLmFwcGVuZENoaWxkKF9pKFwiZGl2XCIsXCIgXCIsXCJDb2RlTWlycm9yLWN1cnNvciBDb2RlTWlycm9yLXNlY29uZGFyeWN1cnNvclwiKSk7by5zdHlsZS5kaXNwbGF5PVwiXCIsby5zdHlsZS5sZWZ0PXIub3RoZXIubGVmdCtcInB4XCIsby5zdHlsZS50b3A9ci5vdGhlci50b3ArXCJweFwiLG8uc3R5bGUuaGVpZ2h0PS44NSooci5vdGhlci5ib3R0b20tci5vdGhlci50b3ApK1wicHhcIn19ZnVuY3Rpb24gUGUoZSx0LG4pe2Z1bmN0aW9uIHIoZSx0LG4scil7MD50JiYodD0wKSx0PU1hdGgucm91bmQodCkscj1NYXRoLnJvdW5kKHIpLGEuYXBwZW5kQ2hpbGQoX2koXCJkaXZcIixudWxsLFwiQ29kZU1pcnJvci1zZWxlY3RlZFwiLFwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiBcIitlK1wicHg7IHRvcDogXCIrdCtcInB4OyB3aWR0aDogXCIrKG51bGw9PW4/dS1lOm4pK1wicHg7IGhlaWdodDogXCIrKHItdCkrXCJweFwiKSl9ZnVuY3Rpb24gaSh0LG4saSl7ZnVuY3Rpb24gbyhuLHIpe3JldHVybiBkdChlLFBvKHQsbiksXCJkaXZcIixkLHIpfXZhciBhLHMsZD1ZcihsLHQpLGg9ZC50ZXh0Lmxlbmd0aDtyZXR1cm4gSmkocmkoZCksbnx8MCxudWxsPT1pP2g6aSxmdW5jdGlvbihlLHQsbCl7dmFyIGQsZixwLG09byhlLFwibGVmdFwiKTtpZihlPT10KWQ9bSxmPXA9bS5sZWZ0O2Vsc2V7aWYoZD1vKHQtMSxcInJpZ2h0XCIpLFwicnRsXCI9PWwpe3ZhciBnPW07bT1kLGQ9Z31mPW0ubGVmdCxwPWQucmlnaHR9bnVsbD09biYmMD09ZSYmKGY9YyksZC50b3AtbS50b3A+MyYmKHIoZixtLnRvcCxudWxsLG0uYm90dG9tKSxmPWMsbS5ib3R0b208ZC50b3AmJnIoZixtLmJvdHRvbSxudWxsLGQudG9wKSksbnVsbD09aSYmdD09aCYmKHA9dSksKCFhfHxtLnRvcDxhLnRvcHx8bS50b3A9PWEudG9wJiZtLmxlZnQ8YS5sZWZ0KSYmKGE9bSksKCFzfHxkLmJvdHRvbT5zLmJvdHRvbXx8ZC5ib3R0b209PXMuYm90dG9tJiZkLnJpZ2h0PnMucmlnaHQpJiYocz1kKSxjKzE+ZiYmKGY9YykscihmLGQudG9wLHAtZixkLmJvdHRvbSl9KSx7c3RhcnQ6YSxlbmQ6c319dmFyIG89ZS5kaXNwbGF5LGw9ZS5kb2MsYT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkscz1HZShlLmRpc3BsYXkpLGM9cy5sZWZ0LHU9TWF0aC5tYXgoby5zaXplcldpZHRoLCRlKGUpLW8uc2l6ZXIub2Zmc2V0TGVmdCktcy5yaWdodCxkPXQuZnJvbSgpLGg9dC50bygpO2lmKGQubGluZT09aC5saW5lKWkoZC5saW5lLGQuY2gsaC5jaCk7ZWxzZXt2YXIgZj1ZcihsLGQubGluZSkscD1ZcihsLGgubGluZSksbT12cihmKT09dnIocCksZz1pKGQubGluZSxkLmNoLG0/Zi50ZXh0Lmxlbmd0aCsxOm51bGwpLmVuZCx2PWkoaC5saW5lLG0/MDpudWxsLGguY2gpLnN0YXJ0O20mJihnLnRvcDx2LnRvcC0yPyhyKGcucmlnaHQsZy50b3AsbnVsbCxnLmJvdHRvbSkscihjLHYudG9wLHYubGVmdCx2LmJvdHRvbSkpOnIoZy5yaWdodCxnLnRvcCx2LmxlZnQtZy5yaWdodCxnLmJvdHRvbSkpLGcuYm90dG9tPHYudG9wJiZyKGMsZy5ib3R0b20sbnVsbCx2LnRvcCl9bi5hcHBlbmRDaGlsZChhKX1mdW5jdGlvbiB6ZShlKXtpZihlLnN0YXRlLmZvY3VzZWQpe3ZhciB0PWUuZGlzcGxheTtjbGVhckludGVydmFsKHQuYmxpbmtlcik7dmFyIG49ITA7dC5jdXJzb3JEaXYuc3R5bGUudmlzaWJpbGl0eT1cIlwiLGUub3B0aW9ucy5jdXJzb3JCbGlua1JhdGU+MD90LmJsaW5rZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt0LmN1cnNvckRpdi5zdHlsZS52aXNpYmlsaXR5PShuPSFuKT9cIlwiOlwiaGlkZGVuXCJ9LGUub3B0aW9ucy5jdXJzb3JCbGlua1JhdGUpOmUub3B0aW9ucy5jdXJzb3JCbGlua1JhdGU8MCYmKHQuY3Vyc29yRGl2LnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIil9fWZ1bmN0aW9uIEZlKGUsdCl7ZS5kb2MubW9kZS5zdGFydFN0YXRlJiZlLmRvYy5mcm9udGllcjxlLmRpc3BsYXkudmlld1RvJiZlLnN0YXRlLmhpZ2hsaWdodC5zZXQodCx6aShSZSxlKSl9ZnVuY3Rpb24gUmUoZSl7dmFyIHQ9ZS5kb2M7aWYodC5mcm9udGllcjx0LmZpcnN0JiYodC5mcm9udGllcj10LmZpcnN0KSwhKHQuZnJvbnRpZXI+PWUuZGlzcGxheS52aWV3VG8pKXt2YXIgbj0rbmV3IERhdGUrZS5vcHRpb25zLndvcmtUaW1lLHI9bGwodC5tb2RlLF9lKGUsdC5mcm9udGllcikpLGk9W107dC5pdGVyKHQuZnJvbnRpZXIsTWF0aC5taW4odC5maXJzdCt0LnNpemUsZS5kaXNwbGF5LnZpZXdUbys1MDApLGZ1bmN0aW9uKG8pe2lmKHQuZnJvbnRpZXI+PWUuZGlzcGxheS52aWV3RnJvbSl7dmFyIGw9by5zdHlsZXMsYT1vLnRleHQubGVuZ3RoPmUub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGgscz1EcihlLG8sYT9sbCh0Lm1vZGUscik6ciwhMCk7by5zdHlsZXM9cy5zdHlsZXM7dmFyIGM9by5zdHlsZUNsYXNzZXMsdT1zLmNsYXNzZXM7dT9vLnN0eWxlQ2xhc3Nlcz11OmMmJihvLnN0eWxlQ2xhc3Nlcz1udWxsKTtmb3IodmFyIGQ9IWx8fGwubGVuZ3RoIT1vLnN0eWxlcy5sZW5ndGh8fGMhPXUmJighY3x8IXV8fGMuYmdDbGFzcyE9dS5iZ0NsYXNzfHxjLnRleHRDbGFzcyE9dS50ZXh0Q2xhc3MpLGg9MDshZCYmaDxsLmxlbmd0aDsrK2gpZD1sW2hdIT1vLnN0eWxlc1toXTtkJiZpLnB1c2godC5mcm9udGllciksby5zdGF0ZUFmdGVyPWE/cjpsbCh0Lm1vZGUscil9ZWxzZSBvLnRleHQubGVuZ3RoPD1lLm9wdGlvbnMubWF4SGlnaGxpZ2h0TGVuZ3RoJiZJcihlLG8udGV4dCxyKSxvLnN0YXRlQWZ0ZXI9dC5mcm9udGllciU1PT0wP2xsKHQubW9kZSxyKTpudWxsO3JldHVybisrdC5mcm9udGllciwrbmV3IERhdGU+bj8oRmUoZSxlLm9wdGlvbnMud29ya0RlbGF5KSwhMCk6dm9pZCAwfSksaS5sZW5ndGgmJk50KGUsZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PGkubGVuZ3RoO3QrKylJdChlLGlbdF0sXCJ0ZXh0XCIpfSl9fWZ1bmN0aW9uIEJlKGUsdCxuKXtmb3IodmFyIHIsaSxvPWUuZG9jLGw9bj8tMTp0LShlLmRvYy5tb2RlLmlubmVyTW9kZT8xZTM6MTAwKSxhPXQ7YT5sOy0tYSl7aWYoYTw9by5maXJzdClyZXR1cm4gby5maXJzdDt2YXIgcz1ZcihvLGEtMSk7aWYocy5zdGF0ZUFmdGVyJiYoIW58fGE8PW8uZnJvbnRpZXIpKXJldHVybiBhO3ZhciBjPUZsKHMudGV4dCxudWxsLGUub3B0aW9ucy50YWJTaXplKTsobnVsbD09aXx8cj5jKSYmKGk9YS0xLHI9Yyl9cmV0dXJuIGl9ZnVuY3Rpb24gX2UoZSx0LG4pe3ZhciByPWUuZG9jLGk9ZS5kaXNwbGF5O2lmKCFyLm1vZGUuc3RhcnRTdGF0ZSlyZXR1cm4hMDt2YXIgbz1CZShlLHQsbiksbD1vPnIuZmlyc3QmJllyKHIsby0xKS5zdGF0ZUFmdGVyO3JldHVybiBsPWw/bGwoci5tb2RlLGwpOmFsKHIubW9kZSksci5pdGVyKG8sdCxmdW5jdGlvbihuKXtJcihlLG4udGV4dCxsKTt2YXIgYT1vPT10LTF8fG8lNT09MHx8bz49aS52aWV3RnJvbSYmbzxpLnZpZXdUbztuLnN0YXRlQWZ0ZXI9YT9sbChyLm1vZGUsbCk6bnVsbCwrK299KSxuJiYoci5mcm9udGllcj1vKSxsfWZ1bmN0aW9uIGplKGUpe3JldHVybiBlLmxpbmVTcGFjZS5vZmZzZXRUb3B9ZnVuY3Rpb24gcWUoZSl7cmV0dXJuIGUubW92ZXIub2Zmc2V0SGVpZ2h0LWUubGluZVNwYWNlLm9mZnNldEhlaWdodH1mdW5jdGlvbiBHZShlKXtpZihlLmNhY2hlZFBhZGRpbmdIKXJldHVybiBlLmNhY2hlZFBhZGRpbmdIO3ZhciB0PXFpKGUubWVhc3VyZSxfaShcInByZVwiLFwieFwiKSksbj13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZT93aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KTp0LmN1cnJlbnRTdHlsZSxyPXtsZWZ0OnBhcnNlSW50KG4ucGFkZGluZ0xlZnQpLHJpZ2h0OnBhcnNlSW50KG4ucGFkZGluZ1JpZ2h0KX07cmV0dXJuIGlzTmFOKHIubGVmdCl8fGlzTmFOKHIucmlnaHQpfHwoZS5jYWNoZWRQYWRkaW5nSD1yKSxyfWZ1bmN0aW9uIFVlKGUpe3JldHVybiBEbC1lLmRpc3BsYXkubmF0aXZlQmFyV2lkdGh9ZnVuY3Rpb24gJGUoZSl7cmV0dXJuIGUuZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aC1VZShlKS1lLmRpc3BsYXkuYmFyV2lkdGh9ZnVuY3Rpb24gVmUoZSl7cmV0dXJuIGUuZGlzcGxheS5zY3JvbGxlci5jbGllbnRIZWlnaHQtVWUoZSktZS5kaXNwbGF5LmJhckhlaWdodH1mdW5jdGlvbiBLZShlLHQsbil7dmFyIHI9ZS5vcHRpb25zLmxpbmVXcmFwcGluZyxpPXImJiRlKGUpO2lmKCF0Lm1lYXN1cmUuaGVpZ2h0c3x8ciYmdC5tZWFzdXJlLndpZHRoIT1pKXt2YXIgbz10Lm1lYXN1cmUuaGVpZ2h0cz1bXTtpZihyKXt0Lm1lYXN1cmUud2lkdGg9aTtmb3IodmFyIGw9dC50ZXh0LmZpcnN0Q2hpbGQuZ2V0Q2xpZW50UmVjdHMoKSxhPTA7YTxsLmxlbmd0aC0xO2ErKyl7dmFyIHM9bFthXSxjPWxbYSsxXTtNYXRoLmFicyhzLmJvdHRvbS1jLmJvdHRvbSk+MiYmby5wdXNoKChzLmJvdHRvbStjLnRvcCkvMi1uLnRvcCl9fW8ucHVzaChuLmJvdHRvbS1uLnRvcCl9fWZ1bmN0aW9uIFhlKGUsdCxuKXtpZihlLmxpbmU9PXQpcmV0dXJue21hcDplLm1lYXN1cmUubWFwLGNhY2hlOmUubWVhc3VyZS5jYWNoZX07Zm9yKHZhciByPTA7cjxlLnJlc3QubGVuZ3RoO3IrKylpZihlLnJlc3Rbcl09PXQpcmV0dXJue21hcDplLm1lYXN1cmUubWFwc1tyXSxjYWNoZTplLm1lYXN1cmUuY2FjaGVzW3JdfTtmb3IodmFyIHI9MDtyPGUucmVzdC5sZW5ndGg7cisrKWlmKGVpKGUucmVzdFtyXSk+bilyZXR1cm57bWFwOmUubWVhc3VyZS5tYXBzW3JdLGNhY2hlOmUubWVhc3VyZS5jYWNoZXNbcl0sYmVmb3JlOiEwfX1mdW5jdGlvbiBZZShlLHQpe3Q9dnIodCk7dmFyIG49ZWkodCkscj1lLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZD1uZXcgSHQoZS5kb2MsdCxuKTtyLmxpbmVOPW47dmFyIGk9ci5idWlsdD16cihlLHIpO3JldHVybiByLnRleHQ9aS5wcmUscWkoZS5kaXNwbGF5LmxpbmVNZWFzdXJlLGkucHJlKSxyfWZ1bmN0aW9uIFplKGUsdCxuLHIpe3JldHVybiBldChlLEplKGUsdCksbixyKX1mdW5jdGlvbiBRZShlLHQpe2lmKHQ+PWUuZGlzcGxheS52aWV3RnJvbSYmdDxlLmRpc3BsYXkudmlld1RvKXJldHVybiBlLmRpc3BsYXkudmlld1t6dChlLHQpXTt2YXIgbj1lLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtyZXR1cm4gbiYmdD49bi5saW5lTiYmdDxuLmxpbmVOK24uc2l6ZT9uOnZvaWQgMH1mdW5jdGlvbiBKZShlLHQpe3ZhciBuPWVpKHQpLHI9UWUoZSxuKTtyJiYhci50ZXh0P3I9bnVsbDpyJiZyLmNoYW5nZXMmJihJKGUscixuLEQoZSkpLGUuY3VyT3AuZm9yY2VVcGRhdGU9ITApLHJ8fChyPVllKGUsdCkpO3ZhciBpPVhlKHIsdCxuKTtyZXR1cm57bGluZTp0LHZpZXc6cixyZWN0Om51bGwsbWFwOmkubWFwLGNhY2hlOmkuY2FjaGUsYmVmb3JlOmkuYmVmb3JlLGhhc0hlaWdodHM6ITF9fWZ1bmN0aW9uIGV0KGUsdCxuLHIsaSl7dC5iZWZvcmUmJihuPS0xKTt2YXIgbyxsPW4rKHJ8fFwiXCIpO3JldHVybiB0LmNhY2hlLmhhc093blByb3BlcnR5KGwpP289dC5jYWNoZVtsXToodC5yZWN0fHwodC5yZWN0PXQudmlldy50ZXh0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSx0Lmhhc0hlaWdodHN8fChLZShlLHQudmlldyx0LnJlY3QpLHQuaGFzSGVpZ2h0cz0hMCksbz1udChlLHQsbixyKSxvLmJvZ3VzfHwodC5jYWNoZVtsXT1vKSkse2xlZnQ6by5sZWZ0LHJpZ2h0Om8ucmlnaHQsdG9wOmk/by5ydG9wOm8udG9wLGJvdHRvbTppP28ucmJvdHRvbTpvLmJvdHRvbX19ZnVuY3Rpb24gdHQoZSx0LG4pe2Zvcih2YXIgcixpLG8sbCxhPTA7YTxlLmxlbmd0aDthKz0zKXt2YXIgcz1lW2FdLGM9ZVthKzFdO2lmKHM+dD8oaT0wLG89MSxsPVwibGVmdFwiKTpjPnQ/KGk9dC1zLG89aSsxKTooYT09ZS5sZW5ndGgtM3x8dD09YyYmZVthKzNdPnQpJiYobz1jLXMsaT1vLTEsdD49YyYmKGw9XCJyaWdodFwiKSksbnVsbCE9aSl7aWYocj1lW2ErMl0scz09YyYmbj09KHIuaW5zZXJ0TGVmdD9cImxlZnRcIjpcInJpZ2h0XCIpJiYobD1uKSxcImxlZnRcIj09biYmMD09aSlmb3IoO2EmJmVbYS0yXT09ZVthLTNdJiZlW2EtMV0uaW5zZXJ0TGVmdDspcj1lWyhhLT0zKSsyXSxsPVwibGVmdFwiO2lmKFwicmlnaHRcIj09biYmaT09Yy1zKWZvcig7YTxlLmxlbmd0aC0zJiZlW2ErM109PWVbYSs0XSYmIWVbYSs1XS5pbnNlcnRMZWZ0OylyPWVbKGErPTMpKzJdLGw9XCJyaWdodFwiO2JyZWFrfX1yZXR1cm57bm9kZTpyLHN0YXJ0OmksZW5kOm8sY29sbGFwc2U6bCxjb3ZlclN0YXJ0OnMsY292ZXJFbmQ6Y319ZnVuY3Rpb24gbnQoZSx0LG4scil7dmFyIGksbz10dCh0Lm1hcCxuLHIpLGw9by5ub2RlLGE9by5zdGFydCxzPW8uZW5kLGM9by5jb2xsYXBzZTtpZigzPT1sLm5vZGVUeXBlKXtmb3IodmFyIHU9MDs0PnU7dSsrKXtmb3IoO2EmJkJpKHQubGluZS50ZXh0LmNoYXJBdChvLmNvdmVyU3RhcnQrYSkpOyktLWE7Zm9yKDtvLmNvdmVyU3RhcnQrczxvLmNvdmVyRW5kJiZCaSh0LmxpbmUudGV4dC5jaGFyQXQoby5jb3ZlclN0YXJ0K3MpKTspKytzO2lmKHlvJiY5PnhvJiYwPT1hJiZzPT1vLmNvdmVyRW5kLW8uY292ZXJTdGFydClpPWwucGFyZW50Tm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtlbHNlIGlmKHlvJiZlLm9wdGlvbnMubGluZVdyYXBwaW5nKXt2YXIgZD1qbChsLGEscykuZ2V0Q2xpZW50UmVjdHMoKTtpPWQubGVuZ3RoP2RbXCJyaWdodFwiPT1yP2QubGVuZ3RoLTE6MF06am99ZWxzZSBpPWpsKGwsYSxzKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKXx8am87aWYoaS5sZWZ0fHxpLnJpZ2h0fHwwPT1hKWJyZWFrO3M9YSxhLT0xLGM9XCJyaWdodFwifXlvJiYxMT54byYmKGk9cnQoZS5kaXNwbGF5Lm1lYXN1cmUsaSkpfWVsc2V7YT4wJiYoYz1yPVwicmlnaHRcIik7dmFyIGQ7aT1lLm9wdGlvbnMubGluZVdyYXBwaW5nJiYoZD1sLmdldENsaWVudFJlY3RzKCkpLmxlbmd0aD4xP2RbXCJyaWdodFwiPT1yP2QubGVuZ3RoLTE6MF06bC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1pZih5byYmOT54byYmIWEmJighaXx8IWkubGVmdCYmIWkucmlnaHQpKXt2YXIgaD1sLnBhcmVudE5vZGUuZ2V0Q2xpZW50UmVjdHMoKVswXTtpPWg/e2xlZnQ6aC5sZWZ0LHJpZ2h0OmgubGVmdCt5dChlLmRpc3BsYXkpLHRvcDpoLnRvcCxib3R0b206aC5ib3R0b219OmpvfWZvcih2YXIgZj1pLnRvcC10LnJlY3QudG9wLHA9aS5ib3R0b20tdC5yZWN0LnRvcCxtPShmK3ApLzIsZz10LnZpZXcubWVhc3VyZS5oZWlnaHRzLHU9MDt1PGcubGVuZ3RoLTEmJiEobTxnW3VdKTt1KyspO3ZhciB2PXU/Z1t1LTFdOjAseT1nW3VdLHg9e2xlZnQ6KFwicmlnaHRcIj09Yz9pLnJpZ2h0OmkubGVmdCktdC5yZWN0LmxlZnQscmlnaHQ6KFwibGVmdFwiPT1jP2kubGVmdDppLnJpZ2h0KS10LnJlY3QubGVmdCx0b3A6dixib3R0b206eX07cmV0dXJuIGkubGVmdHx8aS5yaWdodHx8KHguYm9ndXM9ITApLGUub3B0aW9ucy5zaW5nbGVDdXJzb3JIZWlnaHRQZXJMaW5lfHwoeC5ydG9wPWYseC5yYm90dG9tPXApLHh9ZnVuY3Rpb24gcnQoZSx0KXtpZighd2luZG93LnNjcmVlbnx8bnVsbD09c2NyZWVuLmxvZ2ljYWxYRFBJfHxzY3JlZW4ubG9naWNhbFhEUEk9PXNjcmVlbi5kZXZpY2VYRFBJfHwhUWkoZSkpcmV0dXJuIHQ7dmFyIG49c2NyZWVuLmxvZ2ljYWxYRFBJL3NjcmVlbi5kZXZpY2VYRFBJLHI9c2NyZWVuLmxvZ2ljYWxZRFBJL3NjcmVlbi5kZXZpY2VZRFBJO3JldHVybntsZWZ0OnQubGVmdCpuLHJpZ2h0OnQucmlnaHQqbix0b3A6dC50b3Aqcixib3R0b206dC5ib3R0b20qcn19ZnVuY3Rpb24gaXQoZSl7aWYoZS5tZWFzdXJlJiYoZS5tZWFzdXJlLmNhY2hlPXt9LGUubWVhc3VyZS5oZWlnaHRzPW51bGwsZS5yZXN0KSlmb3IodmFyIHQ9MDt0PGUucmVzdC5sZW5ndGg7dCsrKWUubWVhc3VyZS5jYWNoZXNbdF09e319ZnVuY3Rpb24gb3QoZSl7ZS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZT1udWxsLGppKGUuZGlzcGxheS5saW5lTWVhc3VyZSk7Zm9yKHZhciB0PTA7dDxlLmRpc3BsYXkudmlldy5sZW5ndGg7dCsrKWl0KGUuZGlzcGxheS52aWV3W3RdKX1mdW5jdGlvbiBsdChlKXtvdChlKSxlLmRpc3BsYXkuY2FjaGVkQ2hhcldpZHRoPWUuZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0PWUuZGlzcGxheS5jYWNoZWRQYWRkaW5nSD1udWxsLGUub3B0aW9ucy5saW5lV3JhcHBpbmd8fChlLmRpc3BsYXkubWF4TGluZUNoYW5nZWQ9ITApLGUuZGlzcGxheS5saW5lTnVtQ2hhcnM9bnVsbH1mdW5jdGlvbiBhdCgpe3JldHVybiB3aW5kb3cucGFnZVhPZmZzZXR8fChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR8fGRvY3VtZW50LmJvZHkpLnNjcm9sbExlZnR9ZnVuY3Rpb24gc3QoKXtyZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0fHwoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fHxkb2N1bWVudC5ib2R5KS5zY3JvbGxUb3B9ZnVuY3Rpb24gY3QoZSx0LG4scil7aWYodC53aWRnZXRzKWZvcih2YXIgaT0wO2k8dC53aWRnZXRzLmxlbmd0aDsrK2kpaWYodC53aWRnZXRzW2ldLmFib3ZlKXt2YXIgbz1Tcih0LndpZGdldHNbaV0pO24udG9wKz1vLG4uYm90dG9tKz1vfWlmKFwibGluZVwiPT1yKXJldHVybiBuO3J8fChyPVwibG9jYWxcIik7dmFyIGw9bmkodCk7aWYoXCJsb2NhbFwiPT1yP2wrPWplKGUuZGlzcGxheSk6bC09ZS5kaXNwbGF5LnZpZXdPZmZzZXQsXCJwYWdlXCI9PXJ8fFwid2luZG93XCI9PXIpe3ZhciBhPWUuZGlzcGxheS5saW5lU3BhY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bCs9YS50b3ArKFwid2luZG93XCI9PXI/MDpzdCgpKTt2YXIgcz1hLmxlZnQrKFwid2luZG93XCI9PXI/MDphdCgpKTtuLmxlZnQrPXMsbi5yaWdodCs9c31yZXR1cm4gbi50b3ArPWwsbi5ib3R0b20rPWwsbn1mdW5jdGlvbiB1dChlLHQsbil7aWYoXCJkaXZcIj09bilyZXR1cm4gdDt2YXIgcj10LmxlZnQsaT10LnRvcDtpZihcInBhZ2VcIj09bilyLT1hdCgpLGktPXN0KCk7ZWxzZSBpZihcImxvY2FsXCI9PW58fCFuKXt2YXIgbz1lLmRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cis9by5sZWZ0LGkrPW8udG9wfXZhciBsPWUuZGlzcGxheS5saW5lU3BhY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue2xlZnQ6ci1sLmxlZnQsdG9wOmktbC50b3B9fWZ1bmN0aW9uIGR0KGUsdCxuLHIsaSl7cmV0dXJuIHJ8fChyPVlyKGUuZG9jLHQubGluZSkpLGN0KGUscixaZShlLHIsdC5jaCxpKSxuKX1mdW5jdGlvbiBodChlLHQsbixyLGksbyl7ZnVuY3Rpb24gbCh0LGwpe3ZhciBhPWV0KGUsaSx0LGw/XCJyaWdodFwiOlwibGVmdFwiLG8pO3JldHVybiBsP2EubGVmdD1hLnJpZ2h0OmEucmlnaHQ9YS5sZWZ0LGN0KGUscixhLG4pfWZ1bmN0aW9uIGEoZSx0KXt2YXIgbj1zW3RdLHI9bi5sZXZlbCUyO3JldHVybiBlPT1lbyhuKSYmdCYmbi5sZXZlbDxzW3QtMV0ubGV2ZWw/KG49c1stLXRdLGU9dG8obiktKG4ubGV2ZWwlMj8wOjEpLHI9ITApOmU9PXRvKG4pJiZ0PHMubGVuZ3RoLTEmJm4ubGV2ZWw8c1t0KzFdLmxldmVsJiYobj1zWysrdF0sZT1lbyhuKS1uLmxldmVsJTIscj0hMSksciYmZT09bi50byYmZT5uLmZyb20/bChlLTEpOmwoZSxyKX1yPXJ8fFlyKGUuZG9jLHQubGluZSksaXx8KGk9SmUoZSxyKSk7dmFyIHM9cmkociksYz10LmNoO2lmKCFzKXJldHVybiBsKGMpO3ZhciB1PXNvKHMsYyksZD1hKGMsdSk7cmV0dXJuIG51bGwhPWlhJiYoZC5vdGhlcj1hKGMsaWEpKSxkfWZ1bmN0aW9uIGZ0KGUsdCl7dmFyIG49MCx0PWdlKGUuZG9jLHQpO2Uub3B0aW9ucy5saW5lV3JhcHBpbmd8fChuPXl0KGUuZGlzcGxheSkqdC5jaCk7dmFyIHI9WXIoZS5kb2MsdC5saW5lKSxpPW5pKHIpK2plKGUuZGlzcGxheSk7cmV0dXJue2xlZnQ6bixyaWdodDpuLHRvcDppLGJvdHRvbTppK3IuaGVpZ2h0fX1mdW5jdGlvbiBwdChlLHQsbixyKXt2YXIgaT1QbyhlLHQpO3JldHVybiBpLnhSZWw9cixuJiYoaS5vdXRzaWRlPSEwKSxpfWZ1bmN0aW9uIG10KGUsdCxuKXt2YXIgcj1lLmRvYztpZihuKz1lLmRpc3BsYXkudmlld09mZnNldCwwPm4pcmV0dXJuIHB0KHIuZmlyc3QsMCwhMCwtMSk7dmFyIGk9dGkocixuKSxvPXIuZmlyc3Qrci5zaXplLTE7aWYoaT5vKXJldHVybiBwdChyLmZpcnN0K3Iuc2l6ZS0xLFlyKHIsbykudGV4dC5sZW5ndGgsITAsMSk7MD50JiYodD0wKTtmb3IodmFyIGw9WXIocixpKTs7KXt2YXIgYT1ndChlLGwsaSx0LG4pLHM9bXIobCksYz1zJiZzLmZpbmQoMCwhMCk7aWYoIXN8fCEoYS5jaD5jLmZyb20uY2h8fGEuY2g9PWMuZnJvbS5jaCYmYS54UmVsPjApKXJldHVybiBhO2k9ZWkobD1jLnRvLmxpbmUpfX1mdW5jdGlvbiBndChlLHQsbixyLGkpe2Z1bmN0aW9uIG8ocil7dmFyIGk9aHQoZSxQbyhuLHIpLFwibGluZVwiLHQsYyk7cmV0dXJuIGE9ITAsbD5pLmJvdHRvbT9pLmxlZnQtczpsPGkudG9wP2kubGVmdCtzOihhPSExLGkubGVmdCl9dmFyIGw9aS1uaSh0KSxhPSExLHM9MiplLmRpc3BsYXkud3JhcHBlci5jbGllbnRXaWR0aCxjPUplKGUsdCksdT1yaSh0KSxkPXQudGV4dC5sZW5ndGgsaD1ubyh0KSxmPXJvKHQpLHA9byhoKSxtPWEsZz1vKGYpLHY9YTtpZihyPmcpcmV0dXJuIHB0KG4sZix2LDEpO2Zvcig7Oyl7aWYodT9mPT1ofHxmPT11byh0LGgsMSk6MT49Zi1oKXtmb3IodmFyIHk9cD5yfHxnLXI+PXItcD9oOmYseD1yLSh5PT1oP3A6Zyk7QmkodC50ZXh0LmNoYXJBdCh5KSk7KSsreTt2YXIgYj1wdChuLHkseT09aD9tOnYsLTE+eD8tMTp4PjE/MTowKTtyZXR1cm4gYn12YXIgdz1NYXRoLmNlaWwoZC8yKSxrPWgrdztpZih1KXtrPWg7Zm9yKHZhciBDPTA7dz5DOysrQylrPXVvKHQsaywxKX12YXIgUz1vKGspO1M+cj8oZj1rLGc9Uywodj1hKSYmKGcrPTFlMyksZD13KTooaD1rLHA9UyxtPWEsZC09dyl9fWZ1bmN0aW9uIHZ0KGUpe2lmKG51bGwhPWUuY2FjaGVkVGV4dEhlaWdodClyZXR1cm4gZS5jYWNoZWRUZXh0SGVpZ2h0O2lmKG51bGw9PVJvKXtSbz1faShcInByZVwiKTtmb3IodmFyIHQ9MDs0OT50OysrdClSby5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInhcIikpLFJvLmFwcGVuZENoaWxkKF9pKFwiYnJcIikpO1JvLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwieFwiKSl9cWkoZS5tZWFzdXJlLFJvKTt2YXIgbj1Sby5vZmZzZXRIZWlnaHQvNTA7cmV0dXJuIG4+MyYmKGUuY2FjaGVkVGV4dEhlaWdodD1uKSxqaShlLm1lYXN1cmUpLG58fDF9ZnVuY3Rpb24geXQoZSl7aWYobnVsbCE9ZS5jYWNoZWRDaGFyV2lkdGgpcmV0dXJuIGUuY2FjaGVkQ2hhcldpZHRoO3ZhciB0PV9pKFwic3BhblwiLFwieHh4eHh4eHh4eFwiKSxuPV9pKFwicHJlXCIsW3RdKTtxaShlLm1lYXN1cmUsbik7dmFyIHI9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPShyLnJpZ2h0LXIubGVmdCkvMTA7cmV0dXJuIGk+MiYmKGUuY2FjaGVkQ2hhcldpZHRoPWkpLGl8fDEwfWZ1bmN0aW9uIHh0KGUpe2UuY3VyT3A9e2NtOmUsdmlld0NoYW5nZWQ6ITEsc3RhcnRIZWlnaHQ6ZS5kb2MuaGVpZ2h0LGZvcmNlVXBkYXRlOiExLHVwZGF0ZUlucHV0Om51bGwsdHlwaW5nOiExLGNoYW5nZU9ianM6bnVsbCxjdXJzb3JBY3Rpdml0eUhhbmRsZXJzOm51bGwsY3Vyc29yQWN0aXZpdHlDYWxsZWQ6MCxzZWxlY3Rpb25DaGFuZ2VkOiExLHVwZGF0ZU1heExpbmU6ITEsc2Nyb2xsTGVmdDpudWxsLHNjcm9sbFRvcDpudWxsLHNjcm9sbFRvUG9zOm51bGwsZm9jdXM6ITEsaWQ6KytHb30scW8/cW8ub3BzLnB1c2goZS5jdXJPcCk6ZS5jdXJPcC5vd25zR3JvdXA9cW89e29wczpbZS5jdXJPcF0sZGVsYXllZENhbGxiYWNrczpbXX19ZnVuY3Rpb24gYnQoZSl7dmFyIHQ9ZS5kZWxheWVkQ2FsbGJhY2tzLG49MDtkb3tmb3IoO248dC5sZW5ndGg7bisrKXRbbl0uY2FsbChudWxsKTtmb3IodmFyIHI9MDtyPGUub3BzLmxlbmd0aDtyKyspe3ZhciBpPWUub3BzW3JdO2lmKGkuY3Vyc29yQWN0aXZpdHlIYW5kbGVycylmb3IoO2kuY3Vyc29yQWN0aXZpdHlDYWxsZWQ8aS5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzLmxlbmd0aDspaS5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzW2kuY3Vyc29yQWN0aXZpdHlDYWxsZWQrK10uY2FsbChudWxsLGkuY20pfX13aGlsZShuPHQubGVuZ3RoKX1mdW5jdGlvbiB3dChlKXt2YXIgdD1lLmN1ck9wLG49dC5vd25zR3JvdXA7aWYobil0cnl7YnQobil9ZmluYWxseXtxbz1udWxsO2Zvcih2YXIgcj0wO3I8bi5vcHMubGVuZ3RoO3IrKyluLm9wc1tyXS5jbS5jdXJPcD1udWxsO2t0KG4pfX1mdW5jdGlvbiBrdChlKXtmb3IodmFyIHQ9ZS5vcHMsbj0wO248dC5sZW5ndGg7bisrKUN0KHRbbl0pO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKVN0KHRbbl0pO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKUx0KHRbbl0pO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKVR0KHRbbl0pO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKU10KHRbbl0pfWZ1bmN0aW9uIEN0KGUpe3ZhciB0PWUuY20sbj10LmRpc3BsYXk7VCh0KSxlLnVwZGF0ZU1heExpbmUmJmgodCksZS5tdXN0VXBkYXRlPWUudmlld0NoYW5nZWR8fGUuZm9yY2VVcGRhdGV8fG51bGwhPWUuc2Nyb2xsVG9wfHxlLnNjcm9sbFRvUG9zJiYoZS5zY3JvbGxUb1Bvcy5mcm9tLmxpbmU8bi52aWV3RnJvbXx8ZS5zY3JvbGxUb1Bvcy50by5saW5lPj1uLnZpZXdUbyl8fG4ubWF4TGluZUNoYW5nZWQmJnQub3B0aW9ucy5saW5lV3JhcHBpbmcsZS51cGRhdGU9ZS5tdXN0VXBkYXRlJiZuZXcgTCh0LGUubXVzdFVwZGF0ZSYme3RvcDplLnNjcm9sbFRvcCxlbnN1cmU6ZS5zY3JvbGxUb1Bvc30sZS5mb3JjZVVwZGF0ZSl9ZnVuY3Rpb24gU3QoZSl7ZS51cGRhdGVkRGlzcGxheT1lLm11c3RVcGRhdGUmJk0oZS5jbSxlLnVwZGF0ZSl9ZnVuY3Rpb24gTHQoZSl7dmFyIHQ9ZS5jbSxuPXQuZGlzcGxheTtlLnVwZGF0ZWREaXNwbGF5JiZXKHQpLGUuYmFyTWVhc3VyZT1wKHQpLG4ubWF4TGluZUNoYW5nZWQmJiF0Lm9wdGlvbnMubGluZVdyYXBwaW5nJiYoZS5hZGp1c3RXaWR0aFRvPVplKHQsbi5tYXhMaW5lLG4ubWF4TGluZS50ZXh0Lmxlbmd0aCkubGVmdCszLHQuZGlzcGxheS5zaXplcldpZHRoPWUuYWRqdXN0V2lkdGhUbyxlLmJhck1lYXN1cmUuc2Nyb2xsV2lkdGg9TWF0aC5tYXgobi5zY3JvbGxlci5jbGllbnRXaWR0aCxuLnNpemVyLm9mZnNldExlZnQrZS5hZGp1c3RXaWR0aFRvK1VlKHQpK3QuZGlzcGxheS5iYXJXaWR0aCksZS5tYXhTY3JvbGxMZWZ0PU1hdGgubWF4KDAsbi5zaXplci5vZmZzZXRMZWZ0K2UuYWRqdXN0V2lkdGhUby0kZSh0KSkpLChlLnVwZGF0ZWREaXNwbGF5fHxlLnNlbGVjdGlvbkNoYW5nZWQpJiYoZS5wcmVwYXJlZFNlbGVjdGlvbj1uLmlucHV0LnByZXBhcmVTZWxlY3Rpb24oKSl9ZnVuY3Rpb24gVHQoZSl7dmFyIHQ9ZS5jbTtudWxsIT1lLmFkanVzdFdpZHRoVG8mJih0LmRpc3BsYXkuc2l6ZXIuc3R5bGUubWluV2lkdGg9ZS5hZGp1c3RXaWR0aFRvK1wicHhcIixlLm1heFNjcm9sbExlZnQ8dC5kb2Muc2Nyb2xsTGVmdCYmcm4odCxNYXRoLm1pbih0LmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCxlLm1heFNjcm9sbExlZnQpLCEwKSx0LmRpc3BsYXkubWF4TGluZUNoYW5nZWQ9ITEpLGUucHJlcGFyZWRTZWxlY3Rpb24mJnQuZGlzcGxheS5pbnB1dC5zaG93U2VsZWN0aW9uKGUucHJlcGFyZWRTZWxlY3Rpb24pLGUudXBkYXRlZERpc3BsYXkmJk8odCxlLmJhck1lYXN1cmUpLChlLnVwZGF0ZWREaXNwbGF5fHxlLnN0YXJ0SGVpZ2h0IT10LmRvYy5oZWlnaHQpJiZ5KHQsZS5iYXJNZWFzdXJlKSxlLnNlbGVjdGlvbkNoYW5nZWQmJnplKHQpLHQuc3RhdGUuZm9jdXNlZCYmZS51cGRhdGVJbnB1dCYmdC5kaXNwbGF5LmlucHV0LnJlc2V0KGUudHlwaW5nKSwhZS5mb2N1c3x8ZS5mb2N1cyE9R2koKXx8ZG9jdW1lbnQuaGFzRm9jdXMmJiFkb2N1bWVudC5oYXNGb2N1cygpfHxZKGUuY20pfWZ1bmN0aW9uIE10KGUpe3ZhciB0PWUuY20sbj10LmRpc3BsYXkscj10LmRvYztpZihlLnVwZGF0ZWREaXNwbGF5JiZOKHQsZS51cGRhdGUpLG51bGw9PW4ud2hlZWxTdGFydFh8fG51bGw9PWUuc2Nyb2xsVG9wJiZudWxsPT1lLnNjcm9sbExlZnQmJiFlLnNjcm9sbFRvUG9zfHwobi53aGVlbFN0YXJ0WD1uLndoZWVsU3RhcnRZPW51bGwpLG51bGw9PWUuc2Nyb2xsVG9wfHxuLnNjcm9sbGVyLnNjcm9sbFRvcD09ZS5zY3JvbGxUb3AmJiFlLmZvcmNlU2Nyb2xsfHwoci5zY3JvbGxUb3A9TWF0aC5tYXgoMCxNYXRoLm1pbihuLnNjcm9sbGVyLnNjcm9sbEhlaWdodC1uLnNjcm9sbGVyLmNsaWVudEhlaWdodCxlLnNjcm9sbFRvcCkpLG4uc2Nyb2xsYmFycy5zZXRTY3JvbGxUb3Aoci5zY3JvbGxUb3ApLG4uc2Nyb2xsZXIuc2Nyb2xsVG9wPXIuc2Nyb2xsVG9wKSxudWxsPT1lLnNjcm9sbExlZnR8fG4uc2Nyb2xsZXIuc2Nyb2xsTGVmdD09ZS5zY3JvbGxMZWZ0JiYhZS5mb3JjZVNjcm9sbHx8KHIuc2Nyb2xsTGVmdD1NYXRoLm1heCgwLE1hdGgubWluKG4uc2Nyb2xsZXIuc2Nyb2xsV2lkdGgtJGUodCksZS5zY3JvbGxMZWZ0KSksbi5zY3JvbGxiYXJzLnNldFNjcm9sbExlZnQoci5zY3JvbGxMZWZ0KSxuLnNjcm9sbGVyLnNjcm9sbExlZnQ9ci5zY3JvbGxMZWZ0LHcodCkpLGUuc2Nyb2xsVG9Qb3Mpe3ZhciBpPURuKHQsZ2UocixlLnNjcm9sbFRvUG9zLmZyb20pLGdlKHIsZS5zY3JvbGxUb1Bvcy50byksZS5zY3JvbGxUb1Bvcy5tYXJnaW4pO2Uuc2Nyb2xsVG9Qb3MuaXNDdXJzb3ImJnQuc3RhdGUuZm9jdXNlZCYmSG4odCxpKX12YXIgbz1lLm1heWJlSGlkZGVuTWFya2VycyxsPWUubWF5YmVVbmhpZGRlbk1hcmtlcnM7aWYobylmb3IodmFyIGE9MDthPG8ubGVuZ3RoOysrYSlvW2FdLmxpbmVzLmxlbmd0aHx8V2wob1thXSxcImhpZGVcIik7aWYobClmb3IodmFyIGE9MDthPGwubGVuZ3RoOysrYSlsW2FdLmxpbmVzLmxlbmd0aCYmV2wobFthXSxcInVuaGlkZVwiKTtuLndyYXBwZXIub2Zmc2V0SGVpZ2h0JiYoci5zY3JvbGxUb3A9dC5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCksZS5jaGFuZ2VPYmpzJiZXbCh0LFwiY2hhbmdlc1wiLHQsZS5jaGFuZ2VPYmpzKSxlLnVwZGF0ZSYmZS51cGRhdGUuZmluaXNoKCl9ZnVuY3Rpb24gTnQoZSx0KXtpZihlLmN1ck9wKXJldHVybiB0KCk7eHQoZSk7dHJ5e3JldHVybiB0KCl9ZmluYWxseXt3dChlKX19ZnVuY3Rpb24gQXQoZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtpZihlLmN1ck9wKXJldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKTt4dChlKTt0cnl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfWZpbmFsbHl7d3QoZSl9fX1mdW5jdGlvbiBPdChlKXtyZXR1cm4gZnVuY3Rpb24oKXtpZih0aGlzLmN1ck9wKXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt4dCh0aGlzKTt0cnl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZpbmFsbHl7d3QodGhpcyl9fX1mdW5jdGlvbiBXdChlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNtO2lmKCF0fHx0LmN1ck9wKXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt4dCh0KTt0cnl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZpbmFsbHl7d3QodCl9fX1mdW5jdGlvbiBIdChlLHQsbil7dGhpcy5saW5lPXQsdGhpcy5yZXN0PXlyKHQpLHRoaXMuc2l6ZT10aGlzLnJlc3Q/ZWkoV2kodGhpcy5yZXN0KSktbisxOjEsdGhpcy5ub2RlPXRoaXMudGV4dD1udWxsLHRoaXMuaGlkZGVuPXdyKGUsdCl9ZnVuY3Rpb24gRHQoZSx0LG4pe2Zvcih2YXIgcixpPVtdLG89dDtuPm87bz1yKXt2YXIgbD1uZXcgSHQoZS5kb2MsWXIoZS5kb2Msbyksbyk7cj1vK2wuc2l6ZSxpLnB1c2gobCl9cmV0dXJuIGl9ZnVuY3Rpb24gRXQoZSx0LG4scil7bnVsbD09dCYmKHQ9ZS5kb2MuZmlyc3QpLG51bGw9PW4mJihuPWUuZG9jLmZpcnN0K2UuZG9jLnNpemUpLHJ8fChyPTApO3ZhciBpPWUuZGlzcGxheTtpZihyJiZuPGkudmlld1RvJiYobnVsbD09aS51cGRhdGVMaW5lTnVtYmVyc3x8aS51cGRhdGVMaW5lTnVtYmVycz50KSYmKGkudXBkYXRlTGluZU51bWJlcnM9dCksZS5jdXJPcC52aWV3Q2hhbmdlZD0hMCx0Pj1pLnZpZXdUbylJbyYmeHIoZS5kb2MsdCk8aS52aWV3VG8mJlB0KGUpO2Vsc2UgaWYobjw9aS52aWV3RnJvbSlJbyYmYnIoZS5kb2MsbityKT5pLnZpZXdGcm9tP1B0KGUpOihpLnZpZXdGcm9tKz1yLGkudmlld1RvKz1yKTtlbHNlIGlmKHQ8PWkudmlld0Zyb20mJm4+PWkudmlld1RvKVB0KGUpO2Vsc2UgaWYodDw9aS52aWV3RnJvbSl7dmFyIG89RnQoZSxuLG4rciwxKTtvPyhpLnZpZXc9aS52aWV3LnNsaWNlKG8uaW5kZXgpLGkudmlld0Zyb209by5saW5lTixpLnZpZXdUbys9cik6UHQoZSl9ZWxzZSBpZihuPj1pLnZpZXdUbyl7dmFyIG89RnQoZSx0LHQsLTEpO28/KGkudmlldz1pLnZpZXcuc2xpY2UoMCxvLmluZGV4KSxpLnZpZXdUbz1vLmxpbmVOKTpQdChlKX1lbHNle3ZhciBsPUZ0KGUsdCx0LC0xKSxhPUZ0KGUsbixuK3IsMSk7bCYmYT8oaS52aWV3PWkudmlldy5zbGljZSgwLGwuaW5kZXgpLmNvbmNhdChEdChlLGwubGluZU4sYS5saW5lTikpLmNvbmNhdChpLnZpZXcuc2xpY2UoYS5pbmRleCkpLGkudmlld1RvKz1yKTpQdChlKX12YXIgcz1pLmV4dGVybmFsTWVhc3VyZWQ7cyYmKG48cy5saW5lTj9zLmxpbmVOKz1yOnQ8cy5saW5lTitzLnNpemUmJihpLmV4dGVybmFsTWVhc3VyZWQ9bnVsbCkpfWZ1bmN0aW9uIEl0KGUsdCxuKXtlLmN1ck9wLnZpZXdDaGFuZ2VkPSEwO3ZhciByPWUuZGlzcGxheSxpPWUuZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkO2lmKGkmJnQ+PWkubGluZU4mJnQ8aS5saW5lTitpLnNpemUmJihyLmV4dGVybmFsTWVhc3VyZWQ9bnVsbCksISh0PHIudmlld0Zyb218fHQ+PXIudmlld1RvKSl7dmFyIG89ci52aWV3W3p0KGUsdCldO2lmKG51bGwhPW8ubm9kZSl7dmFyIGw9by5jaGFuZ2VzfHwoby5jaGFuZ2VzPVtdKTstMT09SGkobCxuKSYmbC5wdXNoKG4pfX19ZnVuY3Rpb24gUHQoZSl7ZS5kaXNwbGF5LnZpZXdGcm9tPWUuZGlzcGxheS52aWV3VG89ZS5kb2MuZmlyc3QsZS5kaXNwbGF5LnZpZXc9W10sZS5kaXNwbGF5LnZpZXdPZmZzZXQ9MH1mdW5jdGlvbiB6dChlLHQpe2lmKHQ+PWUuZGlzcGxheS52aWV3VG8pcmV0dXJuIG51bGw7aWYodC09ZS5kaXNwbGF5LnZpZXdGcm9tLDA+dClyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5kaXNwbGF5LnZpZXcscj0wO3I8bi5sZW5ndGg7cisrKWlmKHQtPW5bcl0uc2l6ZSwwPnQpcmV0dXJuIHJ9ZnVuY3Rpb24gRnQoZSx0LG4scil7dmFyIGksbz16dChlLHQpLGw9ZS5kaXNwbGF5LnZpZXc7aWYoIUlvfHxuPT1lLmRvYy5maXJzdCtlLmRvYy5zaXplKXJldHVybntpbmRleDpvLGxpbmVOOm59O2Zvcih2YXIgYT0wLHM9ZS5kaXNwbGF5LnZpZXdGcm9tO28+YTthKyspcys9bFthXS5zaXplO2lmKHMhPXQpe2lmKHI+MCl7aWYobz09bC5sZW5ndGgtMSlyZXR1cm4gbnVsbDtpPXMrbFtvXS5zaXplLXQsbysrfWVsc2UgaT1zLXQ7dCs9aSxuKz1pfWZvcig7eHIoZS5kb2MsbikhPW47KXtpZihvPT0oMD5yPzA6bC5sZW5ndGgtMSkpcmV0dXJuIG51bGw7bis9cipsW28tKDA+cj8xOjApXS5zaXplLG8rPXJ9cmV0dXJue2luZGV4Om8sbGluZU46bn19ZnVuY3Rpb24gUnQoZSx0LG4pe3ZhciByPWUuZGlzcGxheSxpPXIudmlldzswPT1pLmxlbmd0aHx8dD49ci52aWV3VG98fG48PXIudmlld0Zyb20/KHIudmlldz1EdChlLHQsbiksci52aWV3RnJvbT10KTooci52aWV3RnJvbT50P3Iudmlldz1EdChlLHQsci52aWV3RnJvbSkuY29uY2F0KHIudmlldyk6ci52aWV3RnJvbTx0JiYoci52aWV3PXIudmlldy5zbGljZSh6dChlLHQpKSksci52aWV3RnJvbT10LHIudmlld1RvPG4/ci52aWV3PXIudmlldy5jb25jYXQoRHQoZSxyLnZpZXdUbyxuKSk6ci52aWV3VG8+biYmKHIudmlldz1yLnZpZXcuc2xpY2UoMCx6dChlLG4pKSkpLHIudmlld1RvPW59ZnVuY3Rpb24gQnQoZSl7Zm9yKHZhciB0PWUuZGlzcGxheS52aWV3LG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBpPXRbcl07aS5oaWRkZW58fGkubm9kZSYmIWkuY2hhbmdlc3x8KytufXJldHVybiBufWZ1bmN0aW9uIF90KGUpe2Z1bmN0aW9uIHQoKXtpLmFjdGl2ZVRvdWNoJiYobz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5hY3RpdmVUb3VjaD1udWxsfSwxZTMpLGw9aS5hY3RpdmVUb3VjaCxsLmVuZD0rbmV3IERhdGUpfWZ1bmN0aW9uIG4oZSl7aWYoMSE9ZS50b3VjaGVzLmxlbmd0aClyZXR1cm4hMTt2YXIgdD1lLnRvdWNoZXNbMF07cmV0dXJuIHQucmFkaXVzWDw9MSYmdC5yYWRpdXNZPD0xfWZ1bmN0aW9uIHIoZSx0KXtpZihudWxsPT10LmxlZnQpcmV0dXJuITA7dmFyIG49dC5sZWZ0LWUubGVmdCxyPXQudG9wLWUudG9wO3JldHVybiBuKm4rcipyPjQwMH12YXIgaT1lLmRpc3BsYXk7TmwoaS5zY3JvbGxlcixcIm1vdXNlZG93blwiLEF0KGUsJHQpKSx5byYmMTE+eG8/TmwoaS5zY3JvbGxlcixcImRibGNsaWNrXCIsQXQoZSxmdW5jdGlvbih0KXtpZighTGkoZSx0KSl7dmFyIG49VXQoZSx0KTtpZihuJiYhWnQoZSx0KSYmIUd0KGUuZGlzcGxheSx0KSl7TGwodCk7dmFyIHI9ZS5maW5kV29yZEF0KG4pO3dlKGUuZG9jLHIuYW5jaG9yLHIuaGVhZCl9fX0pKTpObChpLnNjcm9sbGVyLFwiZGJsY2xpY2tcIixmdW5jdGlvbih0KXtMaShlLHQpfHxMbCh0KX0pLERvfHxObChpLnNjcm9sbGVyLFwiY29udGV4dG1lbnVcIixmdW5jdGlvbih0KXt5bihlLHQpfSk7dmFyIG8sbD17ZW5kOjB9O05sKGkuc2Nyb2xsZXIsXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oZSl7aWYoIW4oZSkpe2NsZWFyVGltZW91dChvKTt2YXIgdD0rbmV3IERhdGU7aS5hY3RpdmVUb3VjaD17c3RhcnQ6dCxtb3ZlZDohMSxwcmV2OnQtbC5lbmQ8PTMwMD9sOm51bGx9LDE9PWUudG91Y2hlcy5sZW5ndGgmJihpLmFjdGl2ZVRvdWNoLmxlZnQ9ZS50b3VjaGVzWzBdLnBhZ2VYLGkuYWN0aXZlVG91Y2gudG9wPWUudG91Y2hlc1swXS5wYWdlWSl9fSksTmwoaS5zY3JvbGxlcixcInRvdWNobW92ZVwiLGZ1bmN0aW9uKCl7aS5hY3RpdmVUb3VjaCYmKGkuYWN0aXZlVG91Y2gubW92ZWQ9ITApfSksTmwoaS5zY3JvbGxlcixcInRvdWNoZW5kXCIsZnVuY3Rpb24obil7dmFyIG89aS5hY3RpdmVUb3VjaDtpZihvJiYhR3QoaSxuKSYmbnVsbCE9by5sZWZ0JiYhby5tb3ZlZCYmbmV3IERhdGUtby5zdGFydDwzMDApe3ZhciBsLGE9ZS5jb29yZHNDaGFyKGkuYWN0aXZlVG91Y2gsXCJwYWdlXCIpO2w9IW8ucHJldnx8cihvLG8ucHJldik/bmV3IGhlKGEsYSk6IW8ucHJldi5wcmV2fHxyKG8sby5wcmV2LnByZXYpP2UuZmluZFdvcmRBdChhKTpuZXcgaGUoUG8oYS5saW5lLDApLGdlKGUuZG9jLFBvKGEubGluZSsxLDApKSksZS5zZXRTZWxlY3Rpb24obC5hbmNob3IsbC5oZWFkKSxlLmZvY3VzKCksTGwobil9dCgpfSksTmwoaS5zY3JvbGxlcixcInRvdWNoY2FuY2VsXCIsdCksTmwoaS5zY3JvbGxlcixcInNjcm9sbFwiLGZ1bmN0aW9uKCl7aS5zY3JvbGxlci5jbGllbnRIZWlnaHQmJihubihlLGkuc2Nyb2xsZXIuc2Nyb2xsVG9wKSxybihlLGkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCwhMCksV2woZSxcInNjcm9sbFwiLGUpKX0pLE5sKGkuc2Nyb2xsZXIsXCJtb3VzZXdoZWVsXCIsZnVuY3Rpb24odCl7b24oZSx0KX0pLE5sKGkuc2Nyb2xsZXIsXCJET01Nb3VzZVNjcm9sbFwiLGZ1bmN0aW9uKHQpe29uKGUsdCl9KSxObChpLndyYXBwZXIsXCJzY3JvbGxcIixmdW5jdGlvbigpe2kud3JhcHBlci5zY3JvbGxUb3A9aS53cmFwcGVyLnNjcm9sbExlZnQ9MH0pLGkuZHJhZ0Z1bmN0aW9ucz17ZW50ZXI6ZnVuY3Rpb24odCl7TGkoZSx0KXx8TWwodCl9LG92ZXI6ZnVuY3Rpb24odCl7TGkoZSx0KXx8KGVuKGUsdCksTWwodCkpfSxzdGFydDpmdW5jdGlvbih0KXtKdChlLHQpfSxkcm9wOkF0KGUsUXQpLGxlYXZlOmZ1bmN0aW9uKCl7dG4oZSl9fTt2YXIgYT1pLmlucHV0LmdldEZpZWxkKCk7TmwoYSxcImtleXVwXCIsZnVuY3Rpb24odCl7Zm4uY2FsbChlLHQpfSksTmwoYSxcImtleWRvd25cIixBdChlLGRuKSksTmwoYSxcImtleXByZXNzXCIsQXQoZSxwbikpLE5sKGEsXCJmb2N1c1wiLHppKGduLGUpKSxObChhLFwiYmx1clwiLHppKHZuLGUpKX1mdW5jdGlvbiBqdCh0LG4scil7dmFyIGk9ciYmciE9ZS5Jbml0O2lmKCFuIT0haSl7dmFyIG89dC5kaXNwbGF5LmRyYWdGdW5jdGlvbnMsbD1uP05sOk9sO2wodC5kaXNwbGF5LnNjcm9sbGVyLFwiZHJhZ3N0YXJ0XCIsby5zdGFydCksbCh0LmRpc3BsYXkuc2Nyb2xsZXIsXCJkcmFnZW50ZXJcIixvLmVudGVyKSxsKHQuZGlzcGxheS5zY3JvbGxlcixcImRyYWdvdmVyXCIsby5vdmVyKSxsKHQuZGlzcGxheS5zY3JvbGxlcixcImRyYWdsZWF2ZVwiLG8ubGVhdmUpLGwodC5kaXNwbGF5LnNjcm9sbGVyLFwiZHJvcFwiLG8uZHJvcCl9fWZ1bmN0aW9uIHF0KGUpe3ZhciB0PWUuZGlzcGxheTsodC5sYXN0V3JhcEhlaWdodCE9dC53cmFwcGVyLmNsaWVudEhlaWdodHx8dC5sYXN0V3JhcFdpZHRoIT10LndyYXBwZXIuY2xpZW50V2lkdGgpJiYodC5jYWNoZWRDaGFyV2lkdGg9dC5jYWNoZWRUZXh0SGVpZ2h0PXQuY2FjaGVkUGFkZGluZ0g9bnVsbCx0LnNjcm9sbGJhcnNDbGlwcGVkPSExLGUuc2V0U2l6ZSgpKX1mdW5jdGlvbiBHdChlLHQpe2Zvcih2YXIgbj1iaSh0KTtuIT1lLndyYXBwZXI7bj1uLnBhcmVudE5vZGUpaWYoIW58fDE9PW4ubm9kZVR5cGUmJlwidHJ1ZVwiPT1uLmdldEF0dHJpYnV0ZShcImNtLWlnbm9yZS1ldmVudHNcIil8fG4ucGFyZW50Tm9kZT09ZS5zaXplciYmbiE9ZS5tb3ZlcilyZXR1cm4hMH1mdW5jdGlvbiBVdChlLHQsbixyKXt2YXIgaT1lLmRpc3BsYXk7aWYoIW4mJlwidHJ1ZVwiPT1iaSh0KS5nZXRBdHRyaWJ1dGUoXCJjbS1ub3QtY29udGVudFwiKSlyZXR1cm4gbnVsbDt2YXIgbyxsLGE9aS5saW5lU3BhY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dHJ5e289dC5jbGllbnRYLWEubGVmdCxsPXQuY2xpZW50WS1hLnRvcH1jYXRjaCh0KXtyZXR1cm4gbnVsbH12YXIgcyxjPW10KGUsbyxsKTtpZihyJiYxPT1jLnhSZWwmJihzPVlyKGUuZG9jLGMubGluZSkudGV4dCkubGVuZ3RoPT1jLmNoKXt2YXIgdT1GbChzLHMubGVuZ3RoLGUub3B0aW9ucy50YWJTaXplKS1zLmxlbmd0aDtjPVBvKGMubGluZSxNYXRoLm1heCgwLE1hdGgucm91bmQoKG8tR2UoZS5kaXNwbGF5KS5sZWZ0KS95dChlLmRpc3BsYXkpKS11KSl9cmV0dXJuIGN9ZnVuY3Rpb24gJHQoZSl7dmFyIHQ9dGhpcyxuPXQuZGlzcGxheTtpZighKG4uYWN0aXZlVG91Y2gmJm4uaW5wdXQuc3VwcG9ydHNUb3VjaCgpfHxMaSh0LGUpKSl7aWYobi5zaGlmdD1lLnNoaWZ0S2V5LEd0KG4sZSkpcmV0dXJuIHZvaWQoYm98fChuLnNjcm9sbGVyLmRyYWdnYWJsZT0hMSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5zY3JvbGxlci5kcmFnZ2FibGU9ITB9LDEwMCkpKTtpZighWnQodCxlKSl7dmFyIHI9VXQodCxlKTtzd2l0Y2god2luZG93LmZvY3VzKCksd2koZSkpe2Nhc2UgMTp0LnN0YXRlLnNlbGVjdGluZ1RleHQ/dC5zdGF0ZS5zZWxlY3RpbmdUZXh0KGUpOnI/VnQodCxlLHIpOmJpKGUpPT1uLnNjcm9sbGVyJiZMbChlKTticmVhaztjYXNlIDI6Ym8mJih0LnN0YXRlLmxhc3RNaWRkbGVEb3duPStuZXcgRGF0ZSksciYmd2UodC5kb2Msciksc2V0VGltZW91dChmdW5jdGlvbigpe24uaW5wdXQuZm9jdXMoKX0sMjApLExsKGUpO2JyZWFrO2Nhc2UgMzpEbz95bih0LGUpOm1uKHQpfX19fWZ1bmN0aW9uIFZ0KGUsdCxuKXt5bz9zZXRUaW1lb3V0KHppKFksZSksMCk6ZS5jdXJPcC5mb2N1cz1HaSgpO3ZhciByLGk9K25ldyBEYXRlO19vJiZfby50aW1lPmktNDAwJiYwPT16byhfby5wb3Msbik/cj1cInRyaXBsZVwiOkJvJiZCby50aW1lPmktNDAwJiYwPT16byhCby5wb3Msbik/KHI9XCJkb3VibGVcIixfbz17dGltZTppLHBvczpufSk6KHI9XCJzaW5nbGVcIixCbz17dGltZTppLHBvczpufSk7dmFyIG8sbD1lLmRvYy5zZWwsYT1Bbz90Lm1ldGFLZXk6dC5jdHJsS2V5O2Uub3B0aW9ucy5kcmFnRHJvcCYmUWwmJiFaKGUpJiZcInNpbmdsZVwiPT1yJiYobz1sLmNvbnRhaW5zKG4pKT4tMSYmKHpvKChvPWwucmFuZ2VzW29dKS5mcm9tKCksbik8MHx8bi54UmVsPjApJiYoem8oby50bygpLG4pPjB8fG4ueFJlbDwwKT9LdChlLHQsbixhKTpYdChlLHQsbixyLGEpfWZ1bmN0aW9uIEt0KGUsdCxuLHIpe3ZhciBpPWUuZGlzcGxheSxvPStuZXcgRGF0ZSxsPUF0KGUsZnVuY3Rpb24oYSl7Ym8mJihpLnNjcm9sbGVyLmRyYWdnYWJsZT0hMSksZS5zdGF0ZS5kcmFnZ2luZ1RleHQ9ITEsT2woZG9jdW1lbnQsXCJtb3VzZXVwXCIsbCksT2woaS5zY3JvbGxlcixcImRyb3BcIixsKSxNYXRoLmFicyh0LmNsaWVudFgtYS5jbGllbnRYKStNYXRoLmFicyh0LmNsaWVudFktYS5jbGllbnRZKTwxMCYmKExsKGEpLCFyJiYrbmV3IERhdGUtMjAwPG8mJndlKGUuZG9jLG4pLGJvfHx5byYmOT09eG8/c2V0VGltZW91dChmdW5jdGlvbigpe2RvY3VtZW50LmJvZHkuZm9jdXMoKSxpLmlucHV0LmZvY3VzKCl9LDIwKTppLmlucHV0LmZvY3VzKCkpfSk7Ym8mJihpLnNjcm9sbGVyLmRyYWdnYWJsZT0hMCksZS5zdGF0ZS5kcmFnZ2luZ1RleHQ9bCxpLnNjcm9sbGVyLmRyYWdEcm9wJiZpLnNjcm9sbGVyLmRyYWdEcm9wKCksTmwoZG9jdW1lbnQsXCJtb3VzZXVwXCIsbCksTmwoaS5zY3JvbGxlcixcImRyb3BcIixsKX1mdW5jdGlvbiBYdChlLHQsbixyLGkpe2Z1bmN0aW9uIG8odCl7aWYoMCE9em8oZyx0KSlpZihnPXQsXCJyZWN0XCI9PXIpe2Zvcih2YXIgaT1bXSxvPWUub3B0aW9ucy50YWJTaXplLGw9RmwoWXIoYyxuLmxpbmUpLnRleHQsbi5jaCxvKSxhPUZsKFlyKGMsdC5saW5lKS50ZXh0LHQuY2gsbykscz1NYXRoLm1pbihsLGEpLGY9TWF0aC5tYXgobCxhKSxwPU1hdGgubWluKG4ubGluZSx0LmxpbmUpLG09TWF0aC5taW4oZS5sYXN0TGluZSgpLE1hdGgubWF4KG4ubGluZSx0LmxpbmUpKTttPj1wO3ArKyl7dmFyIHY9WXIoYyxwKS50ZXh0LHk9UmwodixzLG8pO3M9PWY/aS5wdXNoKG5ldyBoZShQbyhwLHkpLFBvKHAseSkpKTp2Lmxlbmd0aD55JiZpLnB1c2gobmV3IGhlKFBvKHAseSksUG8ocCxSbCh2LGYsbykpKSl9aS5sZW5ndGh8fGkucHVzaChuZXcgaGUobixuKSksTWUoYyxmZShoLnJhbmdlcy5zbGljZSgwLGQpLmNvbmNhdChpKSxkKSx7b3JpZ2luOlwiKm1vdXNlXCIsc2Nyb2xsOiExfSksZS5zY3JvbGxJbnRvVmlldyh0KX1lbHNle3ZhciB4PXUsYj14LmFuY2hvcix3PXQ7aWYoXCJzaW5nbGVcIiE9cil7aWYoXCJkb3VibGVcIj09cil2YXIgaz1lLmZpbmRXb3JkQXQodCk7ZWxzZSB2YXIgaz1uZXcgaGUoUG8odC5saW5lLDApLGdlKGMsUG8odC5saW5lKzEsMCkpKTt6byhrLmFuY2hvcixiKT4wPyh3PWsuaGVhZCxiPVgoeC5mcm9tKCksay5hbmNob3IpKToodz1rLmFuY2hvcixiPUsoeC50bygpLGsuaGVhZCkpfXZhciBpPWgucmFuZ2VzLnNsaWNlKDApO2lbZF09bmV3IGhlKGdlKGMsYiksdyksTWUoYyxmZShpLGQpLFBsKX19ZnVuY3Rpb24gbCh0KXt2YXIgbj0rK3ksaT1VdChlLHQsITAsXCJyZWN0XCI9PXIpO2lmKGkpaWYoMCE9em8oaSxnKSl7ZS5jdXJPcC5mb2N1cz1HaSgpLG8oaSk7dmFyIGE9YihzLGMpOyhpLmxpbmU+PWEudG98fGkubGluZTxhLmZyb20pJiZzZXRUaW1lb3V0KEF0KGUsZnVuY3Rpb24oKXt5PT1uJiZsKHQpfSksMTUwKX1lbHNle3ZhciB1PXQuY2xpZW50WTx2LnRvcD8tMjA6dC5jbGllbnRZPnYuYm90dG9tPzIwOjA7dSYmc2V0VGltZW91dChBdChlLGZ1bmN0aW9uKCl7eT09biYmKHMuc2Nyb2xsZXIuc2Nyb2xsVG9wKz11LGwodCkpfSksNTApfX1mdW5jdGlvbiBhKHQpe2Uuc3RhdGUuc2VsZWN0aW5nVGV4dD0hMSx5PTEvMCxMbCh0KSxzLmlucHV0LmZvY3VzKCksT2woZG9jdW1lbnQsXCJtb3VzZW1vdmVcIix4KSxPbChkb2N1bWVudCxcIm1vdXNldXBcIix3KSxjLmhpc3RvcnkubGFzdFNlbE9yaWdpbj1udWxsfXZhciBzPWUuZGlzcGxheSxjPWUuZG9jO0xsKHQpO3ZhciB1LGQsaD1jLnNlbCxmPWgucmFuZ2VzO2lmKGkmJiF0LnNoaWZ0S2V5PyhkPWMuc2VsLmNvbnRhaW5zKG4pLHU9ZD4tMT9mW2RdOm5ldyBoZShuLG4pKToodT1jLnNlbC5wcmltYXJ5KCksZD1jLnNlbC5wcmltSW5kZXgpLHQuYWx0S2V5KXI9XCJyZWN0XCIsaXx8KHU9bmV3IGhlKG4sbikpLG49VXQoZSx0LCEwLCEwKSxkPS0xO2Vsc2UgaWYoXCJkb3VibGVcIj09cil7dmFyIHA9ZS5maW5kV29yZEF0KG4pO3U9ZS5kaXNwbGF5LnNoaWZ0fHxjLmV4dGVuZD9iZShjLHUscC5hbmNob3IscC5oZWFkKTpwfWVsc2UgaWYoXCJ0cmlwbGVcIj09cil7dmFyIG09bmV3IGhlKFBvKG4ubGluZSwwKSxnZShjLFBvKG4ubGluZSsxLDApKSk7dT1lLmRpc3BsYXkuc2hpZnR8fGMuZXh0ZW5kP2JlKGMsdSxtLmFuY2hvcixtLmhlYWQpOm19ZWxzZSB1PWJlKGMsdSxuKTtpPy0xPT1kPyhkPWYubGVuZ3RoLE1lKGMsZmUoZi5jb25jYXQoW3VdKSxkKSx7c2Nyb2xsOiExLG9yaWdpbjpcIiptb3VzZVwifSkpOmYubGVuZ3RoPjEmJmZbZF0uZW1wdHkoKSYmXCJzaW5nbGVcIj09ciYmIXQuc2hpZnRLZXk/KE1lKGMsZmUoZi5zbGljZSgwLGQpLmNvbmNhdChmLnNsaWNlKGQrMSkpLDApLHtzY3JvbGw6ITEsb3JpZ2luOlwiKm1vdXNlXCJ9KSxoPWMuc2VsKTpDZShjLGQsdSxQbCk6KGQ9MCxNZShjLG5ldyBkZShbdV0sMCksUGwpLGg9Yy5zZWwpO3ZhciBnPW4sdj1zLndyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkseT0wLHg9QXQoZSxmdW5jdGlvbihlKXt3aShlKT9sKGUpOmEoZSl9KSx3PUF0KGUsYSk7ZS5zdGF0ZS5zZWxlY3RpbmdUZXh0PXcsTmwoZG9jdW1lbnQsXCJtb3VzZW1vdmVcIix4KSxObChkb2N1bWVudCxcIm1vdXNldXBcIix3KX1mdW5jdGlvbiBZdChlLHQsbixyKXt0cnl7dmFyIGk9dC5jbGllbnRYLG89dC5jbGllbnRZfWNhdGNoKHQpe3JldHVybiExfWlmKGk+PU1hdGguZmxvb3IoZS5kaXNwbGF5Lmd1dHRlcnMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQpKXJldHVybiExO3ImJkxsKHQpO3ZhciBsPWUuZGlzcGxheSxhPWwubGluZURpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihvPmEuYm90dG9tfHwhTWkoZSxuKSlyZXR1cm4geGkodCk7by09YS50b3AtbC52aWV3T2Zmc2V0O2Zvcih2YXIgcz0wO3M8ZS5vcHRpb25zLmd1dHRlcnMubGVuZ3RoOysrcyl7dmFyIGM9bC5ndXR0ZXJzLmNoaWxkTm9kZXNbc107aWYoYyYmYy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodD49aSl7dmFyIHU9dGkoZS5kb2MsbyksZD1lLm9wdGlvbnMuZ3V0dGVyc1tzXTtyZXR1cm4gV2woZSxuLGUsdSxkLHQpLHhpKHQpfX19ZnVuY3Rpb24gWnQoZSx0KXtyZXR1cm4gWXQoZSx0LFwiZ3V0dGVyQ2xpY2tcIiwhMCl9ZnVuY3Rpb24gUXQoZSl7dmFyIHQ9dGhpcztpZih0bih0KSwhTGkodCxlKSYmIUd0KHQuZGlzcGxheSxlKSl7TGwoZSkseW8mJihVbz0rbmV3IERhdGUpO3ZhciBuPVV0KHQsZSwhMCkscj1lLmRhdGFUcmFuc2Zlci5maWxlcztpZihuJiYhWih0KSlpZihyJiZyLmxlbmd0aCYmd2luZG93LkZpbGVSZWFkZXImJndpbmRvdy5GaWxlKWZvcih2YXIgaT1yLmxlbmd0aCxvPUFycmF5KGkpLGw9MCxhPWZ1bmN0aW9uKGUscil7aWYoIXQub3B0aW9ucy5hbGxvd0Ryb3BGaWxlVHlwZXN8fC0xIT1IaSh0Lm9wdGlvbnMuYWxsb3dEcm9wRmlsZVR5cGVzLGUudHlwZSkpe3ZhciBhPW5ldyBGaWxlUmVhZGVyO2Eub25sb2FkPUF0KHQsZnVuY3Rpb24oKXt2YXIgZT1hLnJlc3VsdDtpZigvW1xceDAwLVxceDA4XFx4MGUtXFx4MWZdezJ9Ly50ZXN0KGUpJiYoZT1cIlwiKSxvW3JdPWUsKytsPT1pKXtuPWdlKHQuZG9jLG4pO3ZhciBzPXtmcm9tOm4sdG86bix0ZXh0OnQuZG9jLnNwbGl0TGluZXMoby5qb2luKHQuZG9jLmxpbmVTZXBhcmF0b3IoKSkpLG9yaWdpbjpcInBhc3RlXCJ9O0xuKHQuZG9jLHMpLFRlKHQuZG9jLHBlKG4sWm8ocykpKX19KSxhLnJlYWRBc1RleHQoZSl9fSxzPTA7aT5zOysrcylhKHJbc10scyk7ZWxzZXtpZih0LnN0YXRlLmRyYWdnaW5nVGV4dCYmdC5kb2Muc2VsLmNvbnRhaW5zKG4pPi0xKXJldHVybiB0LnN0YXRlLmRyYWdnaW5nVGV4dChlKSx2b2lkIHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmRpc3BsYXkuaW5wdXQuZm9jdXMoKX0sMjApO3RyeXt2YXIgbz1lLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwiVGV4dFwiKTtpZihvKXtpZih0LnN0YXRlLmRyYWdnaW5nVGV4dCYmIShBbz9lLmFsdEtleTplLmN0cmxLZXkpKXZhciBjPXQubGlzdFNlbGVjdGlvbnMoKTtpZihOZSh0LmRvYyxwZShuLG4pKSxjKWZvcih2YXIgcz0wO3M8Yy5sZW5ndGg7KytzKVduKHQuZG9jLFwiXCIsY1tzXS5hbmNob3IsY1tzXS5oZWFkLFwiZHJhZ1wiKTt0LnJlcGxhY2VTZWxlY3Rpb24obyxcImFyb3VuZFwiLFwicGFzdGVcIiksdC5kaXNwbGF5LmlucHV0LmZvY3VzKCl9fWNhdGNoKGUpe319fX1mdW5jdGlvbiBKdChlLHQpe2lmKHlvJiYoIWUuc3RhdGUuZHJhZ2dpbmdUZXh0fHwrbmV3IERhdGUtVW88MTAwKSlyZXR1cm4gdm9pZCBNbCh0KTtpZighTGkoZSx0KSYmIUd0KGUuZGlzcGxheSx0KSYmKHQuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJUZXh0XCIsZS5nZXRTZWxlY3Rpb24oKSksdC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlJiYhU28pKXt2YXIgbj1faShcImltZ1wiLG51bGwsbnVsbCxcInBvc2l0aW9uOiBmaXhlZDsgbGVmdDogMDsgdG9wOiAwO1wiKTtuLnNyYz1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09XCIsQ28mJihuLndpZHRoPW4uaGVpZ2h0PTEsZS5kaXNwbGF5LndyYXBwZXIuYXBwZW5kQ2hpbGQobiksbi5fdG9wPW4ub2Zmc2V0VG9wKSxcbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShuLDAsMCksQ28mJm4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKX19ZnVuY3Rpb24gZW4oZSx0KXt2YXIgbj1VdChlLHQpO2lmKG4pe3ZhciByPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtJZShlLG4sciksZS5kaXNwbGF5LmRyYWdDdXJzb3J8fChlLmRpc3BsYXkuZHJhZ0N1cnNvcj1faShcImRpdlwiLG51bGwsXCJDb2RlTWlycm9yLWN1cnNvcnMgQ29kZU1pcnJvci1kcmFnY3Vyc29yc1wiKSxlLmRpc3BsYXkubGluZVNwYWNlLmluc2VydEJlZm9yZShlLmRpc3BsYXkuZHJhZ0N1cnNvcixlLmRpc3BsYXkuY3Vyc29yRGl2KSkscWkoZS5kaXNwbGF5LmRyYWdDdXJzb3Iscil9fWZ1bmN0aW9uIHRuKGUpe2UuZGlzcGxheS5kcmFnQ3Vyc29yJiYoZS5kaXNwbGF5LmxpbmVTcGFjZS5yZW1vdmVDaGlsZChlLmRpc3BsYXkuZHJhZ0N1cnNvciksZS5kaXNwbGF5LmRyYWdDdXJzb3I9bnVsbCl9ZnVuY3Rpb24gbm4oZSx0KXtNYXRoLmFicyhlLmRvYy5zY3JvbGxUb3AtdCk8Mnx8KGUuZG9jLnNjcm9sbFRvcD10LG1vfHxBKGUse3RvcDp0fSksZS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCE9dCYmKGUuZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A9dCksZS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKHQpLG1vJiZBKGUpLEZlKGUsMTAwKSl9ZnVuY3Rpb24gcm4oZSx0LG4peyhuP3Q9PWUuZG9jLnNjcm9sbExlZnQ6TWF0aC5hYnMoZS5kb2Muc2Nyb2xsTGVmdC10KTwyKXx8KHQ9TWF0aC5taW4odCxlLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsV2lkdGgtZS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoKSxlLmRvYy5zY3JvbGxMZWZ0PXQsdyhlKSxlLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCE9dCYmKGUuZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0PXQpLGUuZGlzcGxheS5zY3JvbGxiYXJzLnNldFNjcm9sbExlZnQodCkpfWZ1bmN0aW9uIG9uKGUsdCl7dmFyIG49S28odCkscj1uLngsaT1uLnksbz1lLmRpc3BsYXksbD1vLnNjcm9sbGVyLGE9bC5zY3JvbGxXaWR0aD5sLmNsaWVudFdpZHRoLHM9bC5zY3JvbGxIZWlnaHQ+bC5jbGllbnRIZWlnaHQ7aWYociYmYXx8aSYmcyl7aWYoaSYmQW8mJmJvKWU6Zm9yKHZhciBjPXQudGFyZ2V0LHU9by52aWV3O2MhPWw7Yz1jLnBhcmVudE5vZGUpZm9yKHZhciBkPTA7ZDx1Lmxlbmd0aDtkKyspaWYodVtkXS5ub2RlPT1jKXtlLmRpc3BsYXkuY3VycmVudFdoZWVsVGFyZ2V0PWM7YnJlYWsgZX1pZihyJiYhbW8mJiFDbyYmbnVsbCE9Vm8pcmV0dXJuIGkmJnMmJm5uKGUsTWF0aC5tYXgoMCxNYXRoLm1pbihsLnNjcm9sbFRvcCtpKlZvLGwuc2Nyb2xsSGVpZ2h0LWwuY2xpZW50SGVpZ2h0KSkpLHJuKGUsTWF0aC5tYXgoMCxNYXRoLm1pbihsLnNjcm9sbExlZnQrcipWbyxsLnNjcm9sbFdpZHRoLWwuY2xpZW50V2lkdGgpKSksKCFpfHxpJiZzKSYmTGwodCksdm9pZChvLndoZWVsU3RhcnRYPW51bGwpO2lmKGkmJm51bGwhPVZvKXt2YXIgaD1pKlZvLGY9ZS5kb2Muc2Nyb2xsVG9wLHA9ZitvLndyYXBwZXIuY2xpZW50SGVpZ2h0OzA+aD9mPU1hdGgubWF4KDAsZitoLTUwKTpwPU1hdGgubWluKGUuZG9jLmhlaWdodCxwK2grNTApLEEoZSx7dG9wOmYsYm90dG9tOnB9KX0yMD4kbyYmKG51bGw9PW8ud2hlZWxTdGFydFg/KG8ud2hlZWxTdGFydFg9bC5zY3JvbGxMZWZ0LG8ud2hlZWxTdGFydFk9bC5zY3JvbGxUb3Asby53aGVlbERYPXIsby53aGVlbERZPWksc2V0VGltZW91dChmdW5jdGlvbigpe2lmKG51bGwhPW8ud2hlZWxTdGFydFgpe3ZhciBlPWwuc2Nyb2xsTGVmdC1vLndoZWVsU3RhcnRYLHQ9bC5zY3JvbGxUb3Atby53aGVlbFN0YXJ0WSxuPXQmJm8ud2hlZWxEWSYmdC9vLndoZWVsRFl8fGUmJm8ud2hlZWxEWCYmZS9vLndoZWVsRFg7by53aGVlbFN0YXJ0WD1vLndoZWVsU3RhcnRZPW51bGwsbiYmKFZvPShWbyokbytuKS8oJG8rMSksKyskbyl9fSwyMDApKTooby53aGVlbERYKz1yLG8ud2hlZWxEWSs9aSkpfX1mdW5jdGlvbiBsbihlLHQsbil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PXNsW3RdLCF0KSlyZXR1cm4hMTtlLmRpc3BsYXkuaW5wdXQuZW5zdXJlUG9sbGVkKCk7dmFyIHI9ZS5kaXNwbGF5LnNoaWZ0LGk9ITE7dHJ5e1ooZSkmJihlLnN0YXRlLnN1cHByZXNzRWRpdHM9ITApLG4mJihlLmRpc3BsYXkuc2hpZnQ9ITEpLGk9dChlKSE9RWx9ZmluYWxseXtlLmRpc3BsYXkuc2hpZnQ9cixlLnN0YXRlLnN1cHByZXNzRWRpdHM9ITF9cmV0dXJuIGl9ZnVuY3Rpb24gYW4oZSx0LG4pe2Zvcih2YXIgcj0wO3I8ZS5zdGF0ZS5rZXlNYXBzLmxlbmd0aDtyKyspe3ZhciBpPXVsKHQsZS5zdGF0ZS5rZXlNYXBzW3JdLG4sZSk7aWYoaSlyZXR1cm4gaX1yZXR1cm4gZS5vcHRpb25zLmV4dHJhS2V5cyYmdWwodCxlLm9wdGlvbnMuZXh0cmFLZXlzLG4sZSl8fHVsKHQsZS5vcHRpb25zLmtleU1hcCxuLGUpfWZ1bmN0aW9uIHNuKGUsdCxuLHIpe3ZhciBpPWUuc3RhdGUua2V5U2VxO2lmKGkpe2lmKGRsKHQpKXJldHVyblwiaGFuZGxlZFwiO1hvLnNldCg1MCxmdW5jdGlvbigpe2Uuc3RhdGUua2V5U2VxPT1pJiYoZS5zdGF0ZS5rZXlTZXE9bnVsbCxlLmRpc3BsYXkuaW5wdXQucmVzZXQoKSl9KSx0PWkrXCIgXCIrdH12YXIgbz1hbihlLHQscik7cmV0dXJuXCJtdWx0aVwiPT1vJiYoZS5zdGF0ZS5rZXlTZXE9dCksXCJoYW5kbGVkXCI9PW8mJkNpKGUsXCJrZXlIYW5kbGVkXCIsZSx0LG4pLChcImhhbmRsZWRcIj09b3x8XCJtdWx0aVwiPT1vKSYmKExsKG4pLHplKGUpKSxpJiYhbyYmL1xcJyQvLnRlc3QodCk/KExsKG4pLCEwKTohIW99ZnVuY3Rpb24gY24oZSx0KXt2YXIgbj1obCh0LCEwKTtyZXR1cm4gbj90LnNoaWZ0S2V5JiYhZS5zdGF0ZS5rZXlTZXE/c24oZSxcIlNoaWZ0LVwiK24sdCxmdW5jdGlvbih0KXtyZXR1cm4gbG4oZSx0LCEwKX0pfHxzbihlLG4sdCxmdW5jdGlvbih0KXtyZXR1cm4oXCJzdHJpbmdcIj09dHlwZW9mIHQ/L15nb1tBLVpdLy50ZXN0KHQpOnQubW90aW9uKT9sbihlLHQpOnZvaWQgMH0pOnNuKGUsbix0LGZ1bmN0aW9uKHQpe3JldHVybiBsbihlLHQpfSk6ITF9ZnVuY3Rpb24gdW4oZSx0LG4pe3JldHVybiBzbihlLFwiJ1wiK24rXCInXCIsdCxmdW5jdGlvbih0KXtyZXR1cm4gbG4oZSx0LCEwKX0pfWZ1bmN0aW9uIGRuKGUpe3ZhciB0PXRoaXM7aWYodC5jdXJPcC5mb2N1cz1HaSgpLCFMaSh0LGUpKXt5byYmMTE+eG8mJjI3PT1lLmtleUNvZGUmJihlLnJldHVyblZhbHVlPSExKTt2YXIgbj1lLmtleUNvZGU7dC5kaXNwbGF5LnNoaWZ0PTE2PT1ufHxlLnNoaWZ0S2V5O3ZhciByPWNuKHQsZSk7Q28mJihZbz1yP246bnVsbCwhciYmODg9PW4mJiF0YSYmKEFvP2UubWV0YUtleTplLmN0cmxLZXkpJiZ0LnJlcGxhY2VTZWxlY3Rpb24oXCJcIixudWxsLFwiY3V0XCIpKSwxOCE9bnx8L1xcYkNvZGVNaXJyb3ItY3Jvc3NoYWlyXFxiLy50ZXN0KHQuZGlzcGxheS5saW5lRGl2LmNsYXNzTmFtZSl8fGhuKHQpfX1mdW5jdGlvbiBobihlKXtmdW5jdGlvbiB0KGUpezE4IT1lLmtleUNvZGUmJmUuYWx0S2V5fHwoWGwobixcIkNvZGVNaXJyb3ItY3Jvc3NoYWlyXCIpLE9sKGRvY3VtZW50LFwia2V5dXBcIix0KSxPbChkb2N1bWVudCxcIm1vdXNlb3ZlclwiLHQpKX12YXIgbj1lLmRpc3BsYXkubGluZURpdjtZbChuLFwiQ29kZU1pcnJvci1jcm9zc2hhaXJcIiksTmwoZG9jdW1lbnQsXCJrZXl1cFwiLHQpLE5sKGRvY3VtZW50LFwibW91c2VvdmVyXCIsdCl9ZnVuY3Rpb24gZm4oZSl7MTY9PWUua2V5Q29kZSYmKHRoaXMuZG9jLnNlbC5zaGlmdD0hMSksTGkodGhpcyxlKX1mdW5jdGlvbiBwbihlKXt2YXIgdD10aGlzO2lmKCEoR3QodC5kaXNwbGF5LGUpfHxMaSh0LGUpfHxlLmN0cmxLZXkmJiFlLmFsdEtleXx8QW8mJmUubWV0YUtleSkpe3ZhciBuPWUua2V5Q29kZSxyPWUuY2hhckNvZGU7aWYoQ28mJm49PVlvKXJldHVybiBZbz1udWxsLHZvaWQgTGwoZSk7aWYoIUNvfHxlLndoaWNoJiYhKGUud2hpY2g8MTApfHwhY24odCxlKSl7dmFyIGk9U3RyaW5nLmZyb21DaGFyQ29kZShudWxsPT1yP246cik7dW4odCxlLGkpfHx0LmRpc3BsYXkuaW5wdXQub25LZXlQcmVzcyhlKX19fWZ1bmN0aW9uIG1uKGUpe2Uuc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQ9ITAsc2V0VGltZW91dChmdW5jdGlvbigpe2Uuc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQmJihlLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50PSExLHZuKGUpKX0sMTAwKX1mdW5jdGlvbiBnbihlKXtlLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50JiYoZS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudD0hMSksXCJub2N1cnNvclwiIT1lLm9wdGlvbnMucmVhZE9ubHkmJihlLnN0YXRlLmZvY3VzZWR8fChXbChlLFwiZm9jdXNcIixlKSxlLnN0YXRlLmZvY3VzZWQ9ITAsWWwoZS5kaXNwbGF5LndyYXBwZXIsXCJDb2RlTWlycm9yLWZvY3VzZWRcIiksZS5jdXJPcHx8ZS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51PT1lLmRvYy5zZWx8fChlLmRpc3BsYXkuaW5wdXQucmVzZXQoKSxibyYmc2V0VGltZW91dChmdW5jdGlvbigpe2UuZGlzcGxheS5pbnB1dC5yZXNldCghMCl9LDIwKSksZS5kaXNwbGF5LmlucHV0LnJlY2VpdmVkRm9jdXMoKSksemUoZSkpfWZ1bmN0aW9uIHZuKGUpe2Uuc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnR8fChlLnN0YXRlLmZvY3VzZWQmJihXbChlLFwiYmx1clwiLGUpLGUuc3RhdGUuZm9jdXNlZD0hMSxYbChlLmRpc3BsYXkud3JhcHBlcixcIkNvZGVNaXJyb3ItZm9jdXNlZFwiKSksY2xlYXJJbnRlcnZhbChlLmRpc3BsYXkuYmxpbmtlciksc2V0VGltZW91dChmdW5jdGlvbigpe2Uuc3RhdGUuZm9jdXNlZHx8KGUuZGlzcGxheS5zaGlmdD0hMSl9LDE1MCkpfWZ1bmN0aW9uIHluKGUsdCl7R3QoZS5kaXNwbGF5LHQpfHx4bihlLHQpfHxMaShlLHQsXCJjb250ZXh0bWVudVwiKXx8ZS5kaXNwbGF5LmlucHV0Lm9uQ29udGV4dE1lbnUodCl9ZnVuY3Rpb24geG4oZSx0KXtyZXR1cm4gTWkoZSxcImd1dHRlckNvbnRleHRNZW51XCIpP1l0KGUsdCxcImd1dHRlckNvbnRleHRNZW51XCIsITEpOiExfWZ1bmN0aW9uIGJuKGUsdCl7aWYoem8oZSx0LmZyb20pPDApcmV0dXJuIGU7aWYoem8oZSx0LnRvKTw9MClyZXR1cm4gWm8odCk7dmFyIG49ZS5saW5lK3QudGV4dC5sZW5ndGgtKHQudG8ubGluZS10LmZyb20ubGluZSktMSxyPWUuY2g7cmV0dXJuIGUubGluZT09dC50by5saW5lJiYocis9Wm8odCkuY2gtdC50by5jaCksUG8obixyKX1mdW5jdGlvbiB3bihlLHQpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLnNlbC5yYW5nZXMubGVuZ3RoO3IrKyl7dmFyIGk9ZS5zZWwucmFuZ2VzW3JdO24ucHVzaChuZXcgaGUoYm4oaS5hbmNob3IsdCksYm4oaS5oZWFkLHQpKSl9cmV0dXJuIGZlKG4sZS5zZWwucHJpbUluZGV4KX1mdW5jdGlvbiBrbihlLHQsbil7cmV0dXJuIGUubGluZT09dC5saW5lP1BvKG4ubGluZSxlLmNoLXQuY2grbi5jaCk6UG8obi5saW5lKyhlLmxpbmUtdC5saW5lKSxlLmNoKX1mdW5jdGlvbiBDbihlLHQsbil7Zm9yKHZhciByPVtdLGk9UG8oZS5maXJzdCwwKSxvPWksbD0wO2w8dC5sZW5ndGg7bCsrKXt2YXIgYT10W2xdLHM9a24oYS5mcm9tLGksbyksYz1rbihabyhhKSxpLG8pO2lmKGk9YS50byxvPWMsXCJhcm91bmRcIj09bil7dmFyIHU9ZS5zZWwucmFuZ2VzW2xdLGQ9em8odS5oZWFkLHUuYW5jaG9yKTwwO3JbbF09bmV3IGhlKGQ/YzpzLGQ/czpjKX1lbHNlIHJbbF09bmV3IGhlKHMscyl9cmV0dXJuIG5ldyBkZShyLGUuc2VsLnByaW1JbmRleCl9ZnVuY3Rpb24gU24oZSx0LG4pe3ZhciByPXtjYW5jZWxlZDohMSxmcm9tOnQuZnJvbSx0bzp0LnRvLHRleHQ6dC50ZXh0LG9yaWdpbjp0Lm9yaWdpbixjYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbGVkPSEwfX07cmV0dXJuIG4mJihyLnVwZGF0ZT1mdW5jdGlvbih0LG4scixpKXt0JiYodGhpcy5mcm9tPWdlKGUsdCkpLG4mJih0aGlzLnRvPWdlKGUsbikpLHImJih0aGlzLnRleHQ9ciksdm9pZCAwIT09aSYmKHRoaXMub3JpZ2luPWkpfSksV2woZSxcImJlZm9yZUNoYW5nZVwiLGUsciksZS5jbSYmV2woZS5jbSxcImJlZm9yZUNoYW5nZVwiLGUuY20sciksci5jYW5jZWxlZD9udWxsOntmcm9tOnIuZnJvbSx0bzpyLnRvLHRleHQ6ci50ZXh0LG9yaWdpbjpyLm9yaWdpbn19ZnVuY3Rpb24gTG4oZSx0LG4pe2lmKGUuY20pe2lmKCFlLmNtLmN1ck9wKXJldHVybiBBdChlLmNtLExuKShlLHQsbik7aWYoZS5jbS5zdGF0ZS5zdXBwcmVzc0VkaXRzKXJldHVybn1pZighKE1pKGUsXCJiZWZvcmVDaGFuZ2VcIil8fGUuY20mJk1pKGUuY20sXCJiZWZvcmVDaGFuZ2VcIikpfHwodD1TbihlLHQsITApKSl7dmFyIHI9RW8mJiFuJiZhcihlLHQuZnJvbSx0LnRvKTtpZihyKWZvcih2YXIgaT1yLmxlbmd0aC0xO2k+PTA7LS1pKVRuKGUse2Zyb206cltpXS5mcm9tLHRvOnJbaV0udG8sdGV4dDppP1tcIlwiXTp0LnRleHR9KTtlbHNlIFRuKGUsdCl9fWZ1bmN0aW9uIFRuKGUsdCl7aWYoMSE9dC50ZXh0Lmxlbmd0aHx8XCJcIiE9dC50ZXh0WzBdfHwwIT16byh0LmZyb20sdC50bykpe3ZhciBuPXduKGUsdCk7c2koZSx0LG4sZS5jbT9lLmNtLmN1ck9wLmlkOk5hTiksQW4oZSx0LG4saXIoZSx0KSk7dmFyIHI9W107S3IoZSxmdW5jdGlvbihlLG4pe258fC0xIT1IaShyLGUuaGlzdG9yeSl8fCh5aShlLmhpc3RvcnksdCksci5wdXNoKGUuaGlzdG9yeSkpLEFuKGUsdCxudWxsLGlyKGUsdCkpfSl9fWZ1bmN0aW9uIE1uKGUsdCxuKXtpZighZS5jbXx8IWUuY20uc3RhdGUuc3VwcHJlc3NFZGl0cyl7Zm9yKHZhciByLGk9ZS5oaXN0b3J5LG89ZS5zZWwsbD1cInVuZG9cIj09dD9pLmRvbmU6aS51bmRvbmUsYT1cInVuZG9cIj09dD9pLnVuZG9uZTppLmRvbmUscz0wO3M8bC5sZW5ndGgmJihyPWxbc10sbj8hci5yYW5nZXN8fHIuZXF1YWxzKGUuc2VsKTpyLnJhbmdlcyk7cysrKTtpZihzIT1sLmxlbmd0aCl7Zm9yKGkubGFzdE9yaWdpbj1pLmxhc3RTZWxPcmlnaW49bnVsbDtyPWwucG9wKCksci5yYW5nZXM7KXtpZihkaShyLGEpLG4mJiFyLmVxdWFscyhlLnNlbCkpcmV0dXJuIHZvaWQgTWUoZSxyLHtjbGVhclJlZG86ITF9KTtvPXJ9dmFyIGM9W107ZGkobyxhKSxhLnB1c2goe2NoYW5nZXM6YyxnZW5lcmF0aW9uOmkuZ2VuZXJhdGlvbn0pLGkuZ2VuZXJhdGlvbj1yLmdlbmVyYXRpb258fCsraS5tYXhHZW5lcmF0aW9uO2Zvcih2YXIgdT1NaShlLFwiYmVmb3JlQ2hhbmdlXCIpfHxlLmNtJiZNaShlLmNtLFwiYmVmb3JlQ2hhbmdlXCIpLHM9ci5jaGFuZ2VzLmxlbmd0aC0xO3M+PTA7LS1zKXt2YXIgZD1yLmNoYW5nZXNbc107aWYoZC5vcmlnaW49dCx1JiYhU24oZSxkLCExKSlyZXR1cm4gdm9pZChsLmxlbmd0aD0wKTtjLnB1c2gob2koZSxkKSk7dmFyIGg9cz93bihlLGQpOldpKGwpO0FuKGUsZCxoLGxyKGUsZCkpLCFzJiZlLmNtJiZlLmNtLnNjcm9sbEludG9WaWV3KHtmcm9tOmQuZnJvbSx0bzpabyhkKX0pO3ZhciBmPVtdO0tyKGUsZnVuY3Rpb24oZSx0KXt0fHwtMSE9SGkoZixlLmhpc3RvcnkpfHwoeWkoZS5oaXN0b3J5LGQpLGYucHVzaChlLmhpc3RvcnkpKSxBbihlLGQsbnVsbCxscihlLGQpKX0pfX19fWZ1bmN0aW9uIE5uKGUsdCl7aWYoMCE9dCYmKGUuZmlyc3QrPXQsZS5zZWw9bmV3IGRlKERpKGUuc2VsLnJhbmdlcyxmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGhlKFBvKGUuYW5jaG9yLmxpbmUrdCxlLmFuY2hvci5jaCksUG8oZS5oZWFkLmxpbmUrdCxlLmhlYWQuY2gpKX0pLGUuc2VsLnByaW1JbmRleCksZS5jbSkpe0V0KGUuY20sZS5maXJzdCxlLmZpcnN0LXQsdCk7Zm9yKHZhciBuPWUuY20uZGlzcGxheSxyPW4udmlld0Zyb207cjxuLnZpZXdUbztyKyspSXQoZS5jbSxyLFwiZ3V0dGVyXCIpfX1mdW5jdGlvbiBBbihlLHQsbixyKXtpZihlLmNtJiYhZS5jbS5jdXJPcClyZXR1cm4gQXQoZS5jbSxBbikoZSx0LG4scik7aWYodC50by5saW5lPGUuZmlyc3QpcmV0dXJuIHZvaWQgTm4oZSx0LnRleHQubGVuZ3RoLTEtKHQudG8ubGluZS10LmZyb20ubGluZSkpO2lmKCEodC5mcm9tLmxpbmU+ZS5sYXN0TGluZSgpKSl7aWYodC5mcm9tLmxpbmU8ZS5maXJzdCl7dmFyIGk9dC50ZXh0Lmxlbmd0aC0xLShlLmZpcnN0LXQuZnJvbS5saW5lKTtObihlLGkpLHQ9e2Zyb206UG8oZS5maXJzdCwwKSx0bzpQbyh0LnRvLmxpbmUraSx0LnRvLmNoKSx0ZXh0OltXaSh0LnRleHQpXSxvcmlnaW46dC5vcmlnaW59fXZhciBvPWUubGFzdExpbmUoKTt0LnRvLmxpbmU+byYmKHQ9e2Zyb206dC5mcm9tLHRvOlBvKG8sWXIoZSxvKS50ZXh0Lmxlbmd0aCksdGV4dDpbdC50ZXh0WzBdXSxvcmlnaW46dC5vcmlnaW59KSx0LnJlbW92ZWQ9WnIoZSx0LmZyb20sdC50byksbnx8KG49d24oZSx0KSksZS5jbT9PbihlLmNtLHQscik6VXIoZSx0LHIpLE5lKGUsbixJbCl9fWZ1bmN0aW9uIE9uKGUsdCxuKXt2YXIgcj1lLmRvYyxpPWUuZGlzcGxheSxsPXQuZnJvbSxhPXQudG8scz0hMSxjPWwubGluZTtlLm9wdGlvbnMubGluZVdyYXBwaW5nfHwoYz1laSh2cihZcihyLGwubGluZSkpKSxyLml0ZXIoYyxhLmxpbmUrMSxmdW5jdGlvbihlKXtyZXR1cm4gZT09aS5tYXhMaW5lPyhzPSEwLCEwKTp2b2lkIDB9KSksci5zZWwuY29udGFpbnModC5mcm9tLHQudG8pPi0xJiZUaShlKSxVcihyLHQsbixvKGUpKSxlLm9wdGlvbnMubGluZVdyYXBwaW5nfHwoci5pdGVyKGMsbC5saW5lK3QudGV4dC5sZW5ndGgsZnVuY3Rpb24oZSl7dmFyIHQ9ZChlKTt0PmkubWF4TGluZUxlbmd0aCYmKGkubWF4TGluZT1lLGkubWF4TGluZUxlbmd0aD10LGkubWF4TGluZUNoYW5nZWQ9ITAscz0hMSl9KSxzJiYoZS5jdXJPcC51cGRhdGVNYXhMaW5lPSEwKSksci5mcm9udGllcj1NYXRoLm1pbihyLmZyb250aWVyLGwubGluZSksRmUoZSw0MDApO3ZhciB1PXQudGV4dC5sZW5ndGgtKGEubGluZS1sLmxpbmUpLTE7dC5mdWxsP0V0KGUpOmwubGluZSE9YS5saW5lfHwxIT10LnRleHQubGVuZ3RofHxHcihlLmRvYyx0KT9FdChlLGwubGluZSxhLmxpbmUrMSx1KTpJdChlLGwubGluZSxcInRleHRcIik7dmFyIGg9TWkoZSxcImNoYW5nZXNcIiksZj1NaShlLFwiY2hhbmdlXCIpO2lmKGZ8fGgpe3ZhciBwPXtmcm9tOmwsdG86YSx0ZXh0OnQudGV4dCxyZW1vdmVkOnQucmVtb3ZlZCxvcmlnaW46dC5vcmlnaW59O2YmJkNpKGUsXCJjaGFuZ2VcIixlLHApLGgmJihlLmN1ck9wLmNoYW5nZU9ianN8fChlLmN1ck9wLmNoYW5nZU9ianM9W10pKS5wdXNoKHApfWUuZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudT1udWxsfWZ1bmN0aW9uIFduKGUsdCxuLHIsaSl7aWYocnx8KHI9biksem8ocixuKTwwKXt2YXIgbz1yO3I9bixuPW99XCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PWUuc3BsaXRMaW5lcyh0KSksTG4oZSx7ZnJvbTpuLHRvOnIsdGV4dDp0LG9yaWdpbjppfSl9ZnVuY3Rpb24gSG4oZSx0KXtpZighTGkoZSxcInNjcm9sbEN1cnNvckludG9WaWV3XCIpKXt2YXIgbj1lLmRpc3BsYXkscj1uLnNpemVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGk9bnVsbDtpZih0LnRvcCtyLnRvcDwwP2k9ITA6dC5ib3R0b20rci50b3A+KHdpbmRvdy5pbm5lckhlaWdodHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkmJihpPSExKSxudWxsIT1pJiYhVG8pe3ZhciBvPV9pKFwiZGl2XCIsXCLigItcIixudWxsLFwicG9zaXRpb246IGFic29sdXRlOyB0b3A6IFwiKyh0LnRvcC1uLnZpZXdPZmZzZXQtamUoZS5kaXNwbGF5KSkrXCJweDsgaGVpZ2h0OiBcIisodC5ib3R0b20tdC50b3ArVWUoZSkrbi5iYXJIZWlnaHQpK1wicHg7IGxlZnQ6IFwiK3QubGVmdCtcInB4OyB3aWR0aDogMnB4O1wiKTtlLmRpc3BsYXkubGluZVNwYWNlLmFwcGVuZENoaWxkKG8pLG8uc2Nyb2xsSW50b1ZpZXcoaSksZS5kaXNwbGF5LmxpbmVTcGFjZS5yZW1vdmVDaGlsZChvKX19fWZ1bmN0aW9uIERuKGUsdCxuLHIpe251bGw9PXImJihyPTApO2Zvcih2YXIgaT0wOzU+aTtpKyspe3ZhciBvPSExLGw9aHQoZSx0KSxhPW4mJm4hPXQ/aHQoZSxuKTpsLHM9SW4oZSxNYXRoLm1pbihsLmxlZnQsYS5sZWZ0KSxNYXRoLm1pbihsLnRvcCxhLnRvcCktcixNYXRoLm1heChsLmxlZnQsYS5sZWZ0KSxNYXRoLm1heChsLmJvdHRvbSxhLmJvdHRvbSkrciksYz1lLmRvYy5zY3JvbGxUb3AsdT1lLmRvYy5zY3JvbGxMZWZ0O2lmKG51bGwhPXMuc2Nyb2xsVG9wJiYobm4oZSxzLnNjcm9sbFRvcCksTWF0aC5hYnMoZS5kb2Muc2Nyb2xsVG9wLWMpPjEmJihvPSEwKSksbnVsbCE9cy5zY3JvbGxMZWZ0JiYocm4oZSxzLnNjcm9sbExlZnQpLE1hdGguYWJzKGUuZG9jLnNjcm9sbExlZnQtdSk+MSYmKG89ITApKSwhbylicmVha31yZXR1cm4gbH1mdW5jdGlvbiBFbihlLHQsbixyLGkpe3ZhciBvPUluKGUsdCxuLHIsaSk7bnVsbCE9by5zY3JvbGxUb3AmJm5uKGUsby5zY3JvbGxUb3ApLG51bGwhPW8uc2Nyb2xsTGVmdCYmcm4oZSxvLnNjcm9sbExlZnQpfWZ1bmN0aW9uIEluKGUsdCxuLHIsaSl7dmFyIG89ZS5kaXNwbGF5LGw9dnQoZS5kaXNwbGF5KTswPm4mJihuPTApO3ZhciBhPWUuY3VyT3AmJm51bGwhPWUuY3VyT3Auc2Nyb2xsVG9wP2UuY3VyT3Auc2Nyb2xsVG9wOm8uc2Nyb2xsZXIuc2Nyb2xsVG9wLHM9VmUoZSksYz17fTtpLW4+cyYmKGk9bitzKTt2YXIgdT1lLmRvYy5oZWlnaHQrcWUobyksZD1sPm4saD1pPnUtbDtpZihhPm4pYy5zY3JvbGxUb3A9ZD8wOm47ZWxzZSBpZihpPmErcyl7dmFyIGY9TWF0aC5taW4obiwoaD91OmkpLXMpO2YhPWEmJihjLnNjcm9sbFRvcD1mKX12YXIgcD1lLmN1ck9wJiZudWxsIT1lLmN1ck9wLnNjcm9sbExlZnQ/ZS5jdXJPcC5zY3JvbGxMZWZ0Om8uc2Nyb2xsZXIuc2Nyb2xsTGVmdCxtPSRlKGUpLShlLm9wdGlvbnMuZml4ZWRHdXR0ZXI/by5ndXR0ZXJzLm9mZnNldFdpZHRoOjApLGc9ci10Pm07cmV0dXJuIGcmJihyPXQrbSksMTA+dD9jLnNjcm9sbExlZnQ9MDpwPnQ/Yy5zY3JvbGxMZWZ0PU1hdGgubWF4KDAsdC0oZz8wOjEwKSk6cj5tK3AtMyYmKGMuc2Nyb2xsTGVmdD1yKyhnPzA6MTApLW0pLGN9ZnVuY3Rpb24gUG4oZSx0LG4peyhudWxsIT10fHxudWxsIT1uKSYmRm4oZSksbnVsbCE9dCYmKGUuY3VyT3Auc2Nyb2xsTGVmdD0obnVsbD09ZS5jdXJPcC5zY3JvbGxMZWZ0P2UuZG9jLnNjcm9sbExlZnQ6ZS5jdXJPcC5zY3JvbGxMZWZ0KSt0KSxudWxsIT1uJiYoZS5jdXJPcC5zY3JvbGxUb3A9KG51bGw9PWUuY3VyT3Auc2Nyb2xsVG9wP2UuZG9jLnNjcm9sbFRvcDplLmN1ck9wLnNjcm9sbFRvcCkrbil9ZnVuY3Rpb24gem4oZSl7Rm4oZSk7dmFyIHQ9ZS5nZXRDdXJzb3IoKSxuPXQscj10O2Uub3B0aW9ucy5saW5lV3JhcHBpbmd8fChuPXQuY2g/UG8odC5saW5lLHQuY2gtMSk6dCxyPVBvKHQubGluZSx0LmNoKzEpKSxlLmN1ck9wLnNjcm9sbFRvUG9zPXtmcm9tOm4sdG86cixtYXJnaW46ZS5vcHRpb25zLmN1cnNvclNjcm9sbE1hcmdpbixpc0N1cnNvcjohMH19ZnVuY3Rpb24gRm4oZSl7dmFyIHQ9ZS5jdXJPcC5zY3JvbGxUb1BvcztpZih0KXtlLmN1ck9wLnNjcm9sbFRvUG9zPW51bGw7dmFyIG49ZnQoZSx0LmZyb20pLHI9ZnQoZSx0LnRvKSxpPUluKGUsTWF0aC5taW4obi5sZWZ0LHIubGVmdCksTWF0aC5taW4obi50b3Asci50b3ApLXQubWFyZ2luLE1hdGgubWF4KG4ucmlnaHQsci5yaWdodCksTWF0aC5tYXgobi5ib3R0b20sci5ib3R0b20pK3QubWFyZ2luKTtlLnNjcm9sbFRvKGkuc2Nyb2xsTGVmdCxpLnNjcm9sbFRvcCl9fWZ1bmN0aW9uIFJuKGUsdCxuLHIpe3ZhciBpLG89ZS5kb2M7bnVsbD09biYmKG49XCJhZGRcIiksXCJzbWFydFwiPT1uJiYoby5tb2RlLmluZGVudD9pPV9lKGUsdCk6bj1cInByZXZcIik7dmFyIGw9ZS5vcHRpb25zLnRhYlNpemUsYT1ZcihvLHQpLHM9RmwoYS50ZXh0LG51bGwsbCk7YS5zdGF0ZUFmdGVyJiYoYS5zdGF0ZUFmdGVyPW51bGwpO3ZhciBjLHU9YS50ZXh0Lm1hdGNoKC9eXFxzKi8pWzBdO2lmKHJ8fC9cXFMvLnRlc3QoYS50ZXh0KSl7aWYoXCJzbWFydFwiPT1uJiYoYz1vLm1vZGUuaW5kZW50KGksYS50ZXh0LnNsaWNlKHUubGVuZ3RoKSxhLnRleHQpLGM9PUVsfHxjPjE1MCkpe2lmKCFyKXJldHVybjtuPVwicHJldlwifX1lbHNlIGM9MCxuPVwibm90XCI7XCJwcmV2XCI9PW4/Yz10Pm8uZmlyc3Q/RmwoWXIobyx0LTEpLnRleHQsbnVsbCxsKTowOlwiYWRkXCI9PW4/Yz1zK2Uub3B0aW9ucy5pbmRlbnRVbml0Olwic3VidHJhY3RcIj09bj9jPXMtZS5vcHRpb25zLmluZGVudFVuaXQ6XCJudW1iZXJcIj09dHlwZW9mIG4mJihjPXMrbiksYz1NYXRoLm1heCgwLGMpO3ZhciBkPVwiXCIsaD0wO2lmKGUub3B0aW9ucy5pbmRlbnRXaXRoVGFicylmb3IodmFyIGY9TWF0aC5mbG9vcihjL2wpO2Y7LS1mKWgrPWwsZCs9XCJcdFwiO2lmKGM+aCYmKGQrPU9pKGMtaCkpLGQhPXUpcmV0dXJuIFduKG8sZCxQbyh0LDApLFBvKHQsdS5sZW5ndGgpLFwiK2lucHV0XCIpLGEuc3RhdGVBZnRlcj1udWxsLCEwO2Zvcih2YXIgZj0wO2Y8by5zZWwucmFuZ2VzLmxlbmd0aDtmKyspe3ZhciBwPW8uc2VsLnJhbmdlc1tmXTtpZihwLmhlYWQubGluZT09dCYmcC5oZWFkLmNoPHUubGVuZ3RoKXt2YXIgaD1Qbyh0LHUubGVuZ3RoKTtDZShvLGYsbmV3IGhlKGgsaCkpO2JyZWFrfX19ZnVuY3Rpb24gQm4oZSx0LG4scil7dmFyIGk9dCxvPXQ7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/bz1ZcihlLG1lKGUsdCkpOmk9ZWkodCksbnVsbD09aT9udWxsOihyKG8saSkmJmUuY20mJkl0KGUuY20saSxuKSxvKX1mdW5jdGlvbiBfbihlLHQpe2Zvcih2YXIgbj1lLmRvYy5zZWwucmFuZ2VzLHI9W10saT0wO2k8bi5sZW5ndGg7aSsrKXtmb3IodmFyIG89dChuW2ldKTtyLmxlbmd0aCYmem8oby5mcm9tLFdpKHIpLnRvKTw9MDspe3ZhciBsPXIucG9wKCk7aWYoem8obC5mcm9tLG8uZnJvbSk8MCl7by5mcm9tPWwuZnJvbTticmVha319ci5wdXNoKG8pfU50KGUsZnVuY3Rpb24oKXtmb3IodmFyIHQ9ci5sZW5ndGgtMTt0Pj0wO3QtLSlXbihlLmRvYyxcIlwiLHJbdF0uZnJvbSxyW3RdLnRvLFwiK2RlbGV0ZVwiKTt6bihlKX0pfWZ1bmN0aW9uIGpuKGUsdCxuLHIsaSl7ZnVuY3Rpb24gbygpe3ZhciB0PWErbjtyZXR1cm4gdDxlLmZpcnN0fHx0Pj1lLmZpcnN0K2Uuc2l6ZT9kPSExOihhPXQsdT1ZcihlLHQpKX1mdW5jdGlvbiBsKGUpe3ZhciB0PShpP3VvOmhvKSh1LHMsbiwhMCk7aWYobnVsbD09dCl7aWYoZXx8IW8oKSlyZXR1cm4gZD0hMTtzPWk/KDA+bj9ybzpubykodSk6MD5uP3UudGV4dC5sZW5ndGg6MH1lbHNlIHM9dDtyZXR1cm4hMH12YXIgYT10LmxpbmUscz10LmNoLGM9bix1PVlyKGUsYSksZD0hMDtpZihcImNoYXJcIj09cilsKCk7ZWxzZSBpZihcImNvbHVtblwiPT1yKWwoITApO2Vsc2UgaWYoXCJ3b3JkXCI9PXJ8fFwiZ3JvdXBcIj09cilmb3IodmFyIGg9bnVsbCxmPVwiZ3JvdXBcIj09cixwPWUuY20mJmUuY20uZ2V0SGVscGVyKHQsXCJ3b3JkQ2hhcnNcIiksbT0hMDshKDA+bil8fGwoIW0pO209ITEpe3ZhciBnPXUudGV4dC5jaGFyQXQocyl8fFwiXFxuXCIsdj1GaShnLHApP1wid1wiOmYmJlwiXFxuXCI9PWc/XCJuXCI6IWZ8fC9cXHMvLnRlc3QoZyk/bnVsbDpcInBcIjtpZighZnx8bXx8dnx8KHY9XCJzXCIpLGgmJmghPXYpezA+biYmKG49MSxsKCkpO2JyZWFrfWlmKHYmJihoPXYpLG4+MCYmIWwoIW0pKWJyZWFrfXZhciB5PUhlKGUsUG8oYSxzKSxjLCEwKTtyZXR1cm4gZHx8KHkuaGl0U2lkZT0hMCkseX1mdW5jdGlvbiBxbihlLHQsbixyKXt2YXIgaSxvPWUuZG9jLGw9dC5sZWZ0O2lmKFwicGFnZVwiPT1yKXt2YXIgYT1NYXRoLm1pbihlLmRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQsd2luZG93LmlubmVySGVpZ2h0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KTtpPXQudG9wK24qKGEtKDA+bj8xLjU6LjUpKnZ0KGUuZGlzcGxheSkpfWVsc2VcImxpbmVcIj09ciYmKGk9bj4wP3QuYm90dG9tKzM6dC50b3AtMyk7Zm9yKDs7KXt2YXIgcz1tdChlLGwsaSk7aWYoIXMub3V0c2lkZSlicmVhaztpZigwPm4/MD49aTppPj1vLmhlaWdodCl7cy5oaXRTaWRlPSEwO2JyZWFrfWkrPTUqbn1yZXR1cm4gc31mdW5jdGlvbiBHbih0LG4scixpKXtlLmRlZmF1bHRzW3RdPW4sciYmKEpvW3RdPWk/ZnVuY3Rpb24oZSx0LG4pe24hPWVsJiZyKGUsdCxuKX06cil9ZnVuY3Rpb24gVW4oZSl7Zm9yKHZhciB0LG4scixpLG89ZS5zcGxpdCgvLSg/ISQpLyksZT1vW28ubGVuZ3RoLTFdLGw9MDtsPG8ubGVuZ3RoLTE7bCsrKXt2YXIgYT1vW2xdO2lmKC9eKGNtZHxtZXRhfG0pJC9pLnRlc3QoYSkpaT0hMDtlbHNlIGlmKC9eYShsdCk/JC9pLnRlc3QoYSkpdD0hMDtlbHNlIGlmKC9eKGN8Y3RybHxjb250cm9sKSQvaS50ZXN0KGEpKW49ITA7ZWxzZXtpZighL15zKGhpZnQpJC9pLnRlc3QoYSkpdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIG1vZGlmaWVyIG5hbWU6IFwiK2EpO3I9ITB9fXJldHVybiB0JiYoZT1cIkFsdC1cIitlKSxuJiYoZT1cIkN0cmwtXCIrZSksaSYmKGU9XCJDbWQtXCIrZSksciYmKGU9XCJTaGlmdC1cIitlKSxlfWZ1bmN0aW9uICRuKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP2NsW2VdOmV9ZnVuY3Rpb24gVm4oZSx0LG4scixpKXtpZihyJiZyLnNoYXJlZClyZXR1cm4gS24oZSx0LG4scixpKTtpZihlLmNtJiYhZS5jbS5jdXJPcClyZXR1cm4gQXQoZS5jbSxWbikoZSx0LG4scixpKTt2YXIgbz1uZXcgbWwoZSxpKSxsPXpvKHQsbik7aWYociYmUGkocixvLCExKSxsPjB8fDA9PWwmJm8uY2xlYXJXaGVuRW1wdHkhPT0hMSlyZXR1cm4gbztpZihvLnJlcGxhY2VkV2l0aCYmKG8uY29sbGFwc2VkPSEwLG8ud2lkZ2V0Tm9kZT1faShcInNwYW5cIixbby5yZXBsYWNlZFdpdGhdLFwiQ29kZU1pcnJvci13aWRnZXRcIiksci5oYW5kbGVNb3VzZUV2ZW50c3x8by53aWRnZXROb2RlLnNldEF0dHJpYnV0ZShcImNtLWlnbm9yZS1ldmVudHNcIixcInRydWVcIiksci5pbnNlcnRMZWZ0JiYoby53aWRnZXROb2RlLmluc2VydExlZnQ9ITApKSxvLmNvbGxhcHNlZCl7aWYoZ3IoZSx0LmxpbmUsdCxuLG8pfHx0LmxpbmUhPW4ubGluZSYmZ3IoZSxuLmxpbmUsdCxuLG8pKXRocm93IG5ldyBFcnJvcihcIkluc2VydGluZyBjb2xsYXBzZWQgbWFya2VyIHBhcnRpYWxseSBvdmVybGFwcGluZyBhbiBleGlzdGluZyBvbmVcIik7SW89ITB9by5hZGRUb0hpc3RvcnkmJnNpKGUse2Zyb206dCx0bzpuLG9yaWdpbjpcIm1hcmtUZXh0XCJ9LGUuc2VsLE5hTik7dmFyIGEscz10LmxpbmUsYz1lLmNtO2lmKGUuaXRlcihzLG4ubGluZSsxLGZ1bmN0aW9uKGUpe2MmJm8uY29sbGFwc2VkJiYhYy5vcHRpb25zLmxpbmVXcmFwcGluZyYmdnIoZSk9PWMuZGlzcGxheS5tYXhMaW5lJiYoYT0hMCksby5jb2xsYXBzZWQmJnMhPXQubGluZSYmSnIoZSwwKSx0cihlLG5ldyBRbihvLHM9PXQubGluZT90LmNoOm51bGwscz09bi5saW5lP24uY2g6bnVsbCkpLCsrc30pLG8uY29sbGFwc2VkJiZlLml0ZXIodC5saW5lLG4ubGluZSsxLGZ1bmN0aW9uKHQpe3dyKGUsdCkmJkpyKHQsMCl9KSxvLmNsZWFyT25FbnRlciYmTmwobyxcImJlZm9yZUN1cnNvckVudGVyXCIsZnVuY3Rpb24oKXtvLmNsZWFyKCl9KSxvLnJlYWRPbmx5JiYoRW89ITAsKGUuaGlzdG9yeS5kb25lLmxlbmd0aHx8ZS5oaXN0b3J5LnVuZG9uZS5sZW5ndGgpJiZlLmNsZWFySGlzdG9yeSgpKSxvLmNvbGxhcHNlZCYmKG8uaWQ9KytwbCxvLmF0b21pYz0hMCksYyl7aWYoYSYmKGMuY3VyT3AudXBkYXRlTWF4TGluZT0hMCksby5jb2xsYXBzZWQpRXQoYyx0LmxpbmUsbi5saW5lKzEpO2Vsc2UgaWYoby5jbGFzc05hbWV8fG8udGl0bGV8fG8uc3RhcnRTdHlsZXx8by5lbmRTdHlsZXx8by5jc3MpZm9yKHZhciB1PXQubGluZTt1PD1uLmxpbmU7dSsrKUl0KGMsdSxcInRleHRcIik7by5hdG9taWMmJk9lKGMuZG9jKSxDaShjLFwibWFya2VyQWRkZWRcIixjLG8pfXJldHVybiBvfWZ1bmN0aW9uIEtuKGUsdCxuLHIsaSl7cj1QaShyKSxyLnNoYXJlZD0hMTt2YXIgbz1bVm4oZSx0LG4scixpKV0sbD1vWzBdLGE9ci53aWRnZXROb2RlO3JldHVybiBLcihlLGZ1bmN0aW9uKGUpe2EmJihyLndpZGdldE5vZGU9YS5jbG9uZU5vZGUoITApKSxvLnB1c2goVm4oZSxnZShlLHQpLGdlKGUsbikscixpKSk7Zm9yKHZhciBzPTA7czxlLmxpbmtlZC5sZW5ndGg7KytzKWlmKGUubGlua2VkW3NdLmlzUGFyZW50KXJldHVybjtsPVdpKG8pfSksbmV3IGdsKG8sbCl9ZnVuY3Rpb24gWG4oZSl7cmV0dXJuIGUuZmluZE1hcmtzKFBvKGUuZmlyc3QsMCksZS5jbGlwUG9zKFBvKGUubGFzdExpbmUoKSkpLGZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudH0pfWZ1bmN0aW9uIFluKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl0saT1yLmZpbmQoKSxvPWUuY2xpcFBvcyhpLmZyb20pLGw9ZS5jbGlwUG9zKGkudG8pO2lmKHpvKG8sbCkpe3ZhciBhPVZuKGUsbyxsLHIucHJpbWFyeSxyLnByaW1hcnkudHlwZSk7ci5tYXJrZXJzLnB1c2goYSksYS5wYXJlbnQ9cn19fWZ1bmN0aW9uIFpuKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgbj1lW3RdLHI9W24ucHJpbWFyeS5kb2NdO0tyKG4ucHJpbWFyeS5kb2MsZnVuY3Rpb24oZSl7ci5wdXNoKGUpfSk7Zm9yKHZhciBpPTA7aTxuLm1hcmtlcnMubGVuZ3RoO2krKyl7dmFyIG89bi5tYXJrZXJzW2ldOy0xPT1IaShyLG8uZG9jKSYmKG8ucGFyZW50PW51bGwsbi5tYXJrZXJzLnNwbGljZShpLS0sMSkpfX19ZnVuY3Rpb24gUW4oZSx0LG4pe3RoaXMubWFya2VyPWUsdGhpcy5mcm9tPXQsdGhpcy50bz1ufWZ1bmN0aW9uIEpuKGUsdCl7aWYoZSlmb3IodmFyIG49MDtuPGUubGVuZ3RoOysrbil7dmFyIHI9ZVtuXTtpZihyLm1hcmtlcj09dClyZXR1cm4gcn19ZnVuY3Rpb24gZXIoZSx0KXtmb3IodmFyIG4scj0wO3I8ZS5sZW5ndGg7KytyKWVbcl0hPXQmJihufHwobj1bXSkpLnB1c2goZVtyXSk7cmV0dXJuIG59ZnVuY3Rpb24gdHIoZSx0KXtlLm1hcmtlZFNwYW5zPWUubWFya2VkU3BhbnM/ZS5tYXJrZWRTcGFucy5jb25jYXQoW3RdKTpbdF0sdC5tYXJrZXIuYXR0YWNoTGluZShlKX1mdW5jdGlvbiBucihlLHQsbil7aWYoZSlmb3IodmFyIHIsaT0wO2k8ZS5sZW5ndGg7KytpKXt2YXIgbz1lW2ldLGw9by5tYXJrZXIsYT1udWxsPT1vLmZyb218fChsLmluY2x1c2l2ZUxlZnQ/by5mcm9tPD10Om8uZnJvbTx0KTtpZihhfHxvLmZyb209PXQmJlwiYm9va21hcmtcIj09bC50eXBlJiYoIW58fCFvLm1hcmtlci5pbnNlcnRMZWZ0KSl7dmFyIHM9bnVsbD09by50b3x8KGwuaW5jbHVzaXZlUmlnaHQ/by50bz49dDpvLnRvPnQpOyhyfHwocj1bXSkpLnB1c2gobmV3IFFuKGwsby5mcm9tLHM/bnVsbDpvLnRvKSl9fXJldHVybiByfWZ1bmN0aW9uIHJyKGUsdCxuKXtpZihlKWZvcih2YXIgcixpPTA7aTxlLmxlbmd0aDsrK2kpe3ZhciBvPWVbaV0sbD1vLm1hcmtlcixhPW51bGw9PW8udG98fChsLmluY2x1c2l2ZVJpZ2h0P28udG8+PXQ6by50bz50KTtpZihhfHxvLmZyb209PXQmJlwiYm9va21hcmtcIj09bC50eXBlJiYoIW58fG8ubWFya2VyLmluc2VydExlZnQpKXt2YXIgcz1udWxsPT1vLmZyb218fChsLmluY2x1c2l2ZUxlZnQ/by5mcm9tPD10Om8uZnJvbTx0KTsocnx8KHI9W10pKS5wdXNoKG5ldyBRbihsLHM/bnVsbDpvLmZyb20tdCxudWxsPT1vLnRvP251bGw6by50by10KSl9fXJldHVybiByfWZ1bmN0aW9uIGlyKGUsdCl7aWYodC5mdWxsKXJldHVybiBudWxsO3ZhciBuPXllKGUsdC5mcm9tLmxpbmUpJiZZcihlLHQuZnJvbS5saW5lKS5tYXJrZWRTcGFucyxyPXllKGUsdC50by5saW5lKSYmWXIoZSx0LnRvLmxpbmUpLm1hcmtlZFNwYW5zO2lmKCFuJiYhcilyZXR1cm4gbnVsbDt2YXIgaT10LmZyb20uY2gsbz10LnRvLmNoLGw9MD09em8odC5mcm9tLHQudG8pLGE9bnIobixpLGwpLHM9cnIocixvLGwpLGM9MT09dC50ZXh0Lmxlbmd0aCx1PVdpKHQudGV4dCkubGVuZ3RoKyhjP2k6MCk7aWYoYSlmb3IodmFyIGQ9MDtkPGEubGVuZ3RoOysrZCl7dmFyIGg9YVtkXTtpZihudWxsPT1oLnRvKXt2YXIgZj1KbihzLGgubWFya2VyKTtmP2MmJihoLnRvPW51bGw9PWYudG8/bnVsbDpmLnRvK3UpOmgudG89aX19aWYocylmb3IodmFyIGQ9MDtkPHMubGVuZ3RoOysrZCl7dmFyIGg9c1tkXTtpZihudWxsIT1oLnRvJiYoaC50bys9dSksbnVsbD09aC5mcm9tKXt2YXIgZj1KbihhLGgubWFya2VyKTtmfHwoaC5mcm9tPXUsYyYmKGF8fChhPVtdKSkucHVzaChoKSl9ZWxzZSBoLmZyb20rPXUsYyYmKGF8fChhPVtdKSkucHVzaChoKX1hJiYoYT1vcihhKSkscyYmcyE9YSYmKHM9b3IocykpO3ZhciBwPVthXTtpZighYyl7dmFyIG0sZz10LnRleHQubGVuZ3RoLTI7aWYoZz4wJiZhKWZvcih2YXIgZD0wO2Q8YS5sZW5ndGg7KytkKW51bGw9PWFbZF0udG8mJihtfHwobT1bXSkpLnB1c2gobmV3IFFuKGFbZF0ubWFya2VyLG51bGwsbnVsbCkpO2Zvcih2YXIgZD0wO2c+ZDsrK2QpcC5wdXNoKG0pO3AucHVzaChzKX1yZXR1cm4gcH1mdW5jdGlvbiBvcihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoOysrdCl7dmFyIG49ZVt0XTtudWxsIT1uLmZyb20mJm4uZnJvbT09bi50byYmbi5tYXJrZXIuY2xlYXJXaGVuRW1wdHkhPT0hMSYmZS5zcGxpY2UodC0tLDEpfXJldHVybiBlLmxlbmd0aD9lOm51bGx9ZnVuY3Rpb24gbHIoZSx0KXt2YXIgbj1waShlLHQpLHI9aXIoZSx0KTtpZighbilyZXR1cm4gcjtpZighcilyZXR1cm4gbjtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoOysraSl7dmFyIG89bltpXSxsPXJbaV07aWYobyYmbCllOmZvcih2YXIgYT0wO2E8bC5sZW5ndGg7KythKXtmb3IodmFyIHM9bFthXSxjPTA7YzxvLmxlbmd0aDsrK2MpaWYob1tjXS5tYXJrZXI9PXMubWFya2VyKWNvbnRpbnVlIGU7by5wdXNoKHMpfWVsc2UgbCYmKG5baV09bCl9cmV0dXJuIG59ZnVuY3Rpb24gYXIoZSx0LG4pe3ZhciByPW51bGw7aWYoZS5pdGVyKHQubGluZSxuLmxpbmUrMSxmdW5jdGlvbihlKXtpZihlLm1hcmtlZFNwYW5zKWZvcih2YXIgdD0wO3Q8ZS5tYXJrZWRTcGFucy5sZW5ndGg7Kyt0KXt2YXIgbj1lLm1hcmtlZFNwYW5zW3RdLm1hcmtlcjshbi5yZWFkT25seXx8ciYmLTEhPUhpKHIsbil8fChyfHwocj1bXSkpLnB1c2gobil9fSksIXIpcmV0dXJuIG51bGw7Zm9yKHZhciBpPVt7ZnJvbTp0LHRvOm59XSxvPTA7bzxyLmxlbmd0aDsrK28pZm9yKHZhciBsPXJbb10sYT1sLmZpbmQoMCkscz0wO3M8aS5sZW5ndGg7KytzKXt2YXIgYz1pW3NdO2lmKCEoem8oYy50byxhLmZyb20pPDB8fHpvKGMuZnJvbSxhLnRvKT4wKSl7dmFyIHU9W3MsMV0sZD16byhjLmZyb20sYS5mcm9tKSxoPXpvKGMudG8sYS50byk7KDA+ZHx8IWwuaW5jbHVzaXZlTGVmdCYmIWQpJiZ1LnB1c2goe2Zyb206Yy5mcm9tLHRvOmEuZnJvbX0pLChoPjB8fCFsLmluY2x1c2l2ZVJpZ2h0JiYhaCkmJnUucHVzaCh7ZnJvbTphLnRvLHRvOmMudG99KSxpLnNwbGljZS5hcHBseShpLHUpLHMrPXUubGVuZ3RoLTF9fXJldHVybiBpfWZ1bmN0aW9uIHNyKGUpe3ZhciB0PWUubWFya2VkU3BhbnM7aWYodCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDsrK24pdFtuXS5tYXJrZXIuZGV0YWNoTGluZShlKTtlLm1hcmtlZFNwYW5zPW51bGx9fWZ1bmN0aW9uIGNyKGUsdCl7aWYodCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDsrK24pdFtuXS5tYXJrZXIuYXR0YWNoTGluZShlKTtlLm1hcmtlZFNwYW5zPXR9fWZ1bmN0aW9uIHVyKGUpe3JldHVybiBlLmluY2x1c2l2ZUxlZnQ/LTE6MH1mdW5jdGlvbiBkcihlKXtyZXR1cm4gZS5pbmNsdXNpdmVSaWdodD8xOjB9ZnVuY3Rpb24gaHIoZSx0KXt2YXIgbj1lLmxpbmVzLmxlbmd0aC10LmxpbmVzLmxlbmd0aDtpZigwIT1uKXJldHVybiBuO3ZhciByPWUuZmluZCgpLGk9dC5maW5kKCksbz16byhyLmZyb20saS5mcm9tKXx8dXIoZSktdXIodCk7aWYobylyZXR1cm4tbzt2YXIgbD16byhyLnRvLGkudG8pfHxkcihlKS1kcih0KTtyZXR1cm4gbD9sOnQuaWQtZS5pZH1mdW5jdGlvbiBmcihlLHQpe3ZhciBuLHI9SW8mJmUubWFya2VkU3BhbnM7aWYocilmb3IodmFyIGksbz0wO288ci5sZW5ndGg7KytvKWk9cltvXSxpLm1hcmtlci5jb2xsYXBzZWQmJm51bGw9PSh0P2kuZnJvbTppLnRvKSYmKCFufHxocihuLGkubWFya2VyKTwwKSYmKG49aS5tYXJrZXIpO3JldHVybiBufWZ1bmN0aW9uIHByKGUpe3JldHVybiBmcihlLCEwKX1mdW5jdGlvbiBtcihlKXtyZXR1cm4gZnIoZSwhMSl9ZnVuY3Rpb24gZ3IoZSx0LG4scixpKXt2YXIgbz1ZcihlLHQpLGw9SW8mJm8ubWFya2VkU3BhbnM7aWYobClmb3IodmFyIGE9MDthPGwubGVuZ3RoOysrYSl7dmFyIHM9bFthXTtpZihzLm1hcmtlci5jb2xsYXBzZWQpe3ZhciBjPXMubWFya2VyLmZpbmQoMCksdT16byhjLmZyb20sbil8fHVyKHMubWFya2VyKS11cihpKSxkPXpvKGMudG8scil8fGRyKHMubWFya2VyKS1kcihpKTtpZighKHU+PTAmJjA+PWR8fDA+PXUmJmQ+PTApJiYoMD49dSYmKHpvKGMudG8sbik+MHx8cy5tYXJrZXIuaW5jbHVzaXZlUmlnaHQmJmkuaW5jbHVzaXZlTGVmdCl8fHU+PTAmJih6byhjLmZyb20scik8MHx8cy5tYXJrZXIuaW5jbHVzaXZlTGVmdCYmaS5pbmNsdXNpdmVSaWdodCkpKXJldHVybiEwfX19ZnVuY3Rpb24gdnIoZSl7Zm9yKHZhciB0O3Q9cHIoZSk7KWU9dC5maW5kKC0xLCEwKS5saW5lO3JldHVybiBlfWZ1bmN0aW9uIHlyKGUpe2Zvcih2YXIgdCxuO3Q9bXIoZSk7KWU9dC5maW5kKDEsITApLmxpbmUsKG58fChuPVtdKSkucHVzaChlKTtyZXR1cm4gbn1mdW5jdGlvbiB4cihlLHQpe3ZhciBuPVlyKGUsdCkscj12cihuKTtyZXR1cm4gbj09cj90OmVpKHIpfWZ1bmN0aW9uIGJyKGUsdCl7aWYodD5lLmxhc3RMaW5lKCkpcmV0dXJuIHQ7dmFyIG4scj1ZcihlLHQpO2lmKCF3cihlLHIpKXJldHVybiB0O2Zvcig7bj1tcihyKTspcj1uLmZpbmQoMSwhMCkubGluZTtyZXR1cm4gZWkocikrMX1mdW5jdGlvbiB3cihlLHQpe3ZhciBuPUlvJiZ0Lm1hcmtlZFNwYW5zO2lmKG4pZm9yKHZhciByLGk9MDtpPG4ubGVuZ3RoOysraSlpZihyPW5baV0sci5tYXJrZXIuY29sbGFwc2VkKXtpZihudWxsPT1yLmZyb20pcmV0dXJuITA7aWYoIXIubWFya2VyLndpZGdldE5vZGUmJjA9PXIuZnJvbSYmci5tYXJrZXIuaW5jbHVzaXZlTGVmdCYma3IoZSx0LHIpKXJldHVybiEwfX1mdW5jdGlvbiBrcihlLHQsbil7aWYobnVsbD09bi50byl7dmFyIHI9bi5tYXJrZXIuZmluZCgxLCEwKTtyZXR1cm4ga3IoZSxyLmxpbmUsSm4oci5saW5lLm1hcmtlZFNwYW5zLG4ubWFya2VyKSl9aWYobi5tYXJrZXIuaW5jbHVzaXZlUmlnaHQmJm4udG89PXQudGV4dC5sZW5ndGgpcmV0dXJuITA7Zm9yKHZhciBpLG89MDtvPHQubWFya2VkU3BhbnMubGVuZ3RoOysrbylpZihpPXQubWFya2VkU3BhbnNbb10saS5tYXJrZXIuY29sbGFwc2VkJiYhaS5tYXJrZXIud2lkZ2V0Tm9kZSYmaS5mcm9tPT1uLnRvJiYobnVsbD09aS50b3x8aS50byE9bi5mcm9tKSYmKGkubWFya2VyLmluY2x1c2l2ZUxlZnR8fG4ubWFya2VyLmluY2x1c2l2ZVJpZ2h0KSYma3IoZSx0LGkpKXJldHVybiEwfWZ1bmN0aW9uIENyKGUsdCxuKXtuaSh0KTwoZS5jdXJPcCYmZS5jdXJPcC5zY3JvbGxUb3B8fGUuZG9jLnNjcm9sbFRvcCkmJlBuKGUsbnVsbCxuKX1mdW5jdGlvbiBTcihlKXtpZihudWxsIT1lLmhlaWdodClyZXR1cm4gZS5oZWlnaHQ7dmFyIHQ9ZS5kb2MuY207aWYoIXQpcmV0dXJuIDA7aWYoISRsKGRvY3VtZW50LmJvZHksZS5ub2RlKSl7dmFyIG49XCJwb3NpdGlvbjogcmVsYXRpdmU7XCI7ZS5jb3Zlckd1dHRlciYmKG4rPVwibWFyZ2luLWxlZnQ6IC1cIit0LmRpc3BsYXkuZ3V0dGVycy5vZmZzZXRXaWR0aCtcInB4O1wiKSxlLm5vSFNjcm9sbCYmKG4rPVwid2lkdGg6IFwiK3QuZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoK1wicHg7XCIpLHFpKHQuZGlzcGxheS5tZWFzdXJlLF9pKFwiZGl2XCIsW2Uubm9kZV0sbnVsbCxuKSl9cmV0dXJuIGUuaGVpZ2h0PWUubm9kZS5vZmZzZXRIZWlnaHR9ZnVuY3Rpb24gTHIoZSx0LG4scil7dmFyIGk9bmV3IHZsKGUsbixyKSxvPWUuY207cmV0dXJuIG8mJmkubm9IU2Nyb2xsJiYoby5kaXNwbGF5LmFsaWduV2lkZ2V0cz0hMCksQm4oZSx0LFwid2lkZ2V0XCIsZnVuY3Rpb24odCl7dmFyIG49dC53aWRnZXRzfHwodC53aWRnZXRzPVtdKTtpZihudWxsPT1pLmluc2VydEF0P24ucHVzaChpKTpuLnNwbGljZShNYXRoLm1pbihuLmxlbmd0aC0xLE1hdGgubWF4KDAsaS5pbnNlcnRBdCkpLDAsaSksaS5saW5lPXQsbyYmIXdyKGUsdCkpe3ZhciByPW5pKHQpPGUuc2Nyb2xsVG9wO0pyKHQsdC5oZWlnaHQrU3IoaSkpLHImJlBuKG8sbnVsbCxpLmhlaWdodCksby5jdXJPcC5mb3JjZVVwZGF0ZT0hMH1yZXR1cm4hMH0pLGl9ZnVuY3Rpb24gVHIoZSx0LG4scil7ZS50ZXh0PXQsZS5zdGF0ZUFmdGVyJiYoZS5zdGF0ZUFmdGVyPW51bGwpLGUuc3R5bGVzJiYoZS5zdHlsZXM9bnVsbCksbnVsbCE9ZS5vcmRlciYmKGUub3JkZXI9bnVsbCksc3IoZSksY3IoZSxuKTt2YXIgaT1yP3IoZSk6MTtpIT1lLmhlaWdodCYmSnIoZSxpKX1mdW5jdGlvbiBNcihlKXtlLnBhcmVudD1udWxsLHNyKGUpfWZ1bmN0aW9uIE5yKGUsdCl7aWYoZSlmb3IoOzspe3ZhciBuPWUubWF0Y2goLyg/Ol58XFxzKylsaW5lLShiYWNrZ3JvdW5kLSk/KFxcUyspLyk7aWYoIW4pYnJlYWs7ZT1lLnNsaWNlKDAsbi5pbmRleCkrZS5zbGljZShuLmluZGV4K25bMF0ubGVuZ3RoKTt2YXIgcj1uWzFdP1wiYmdDbGFzc1wiOlwidGV4dENsYXNzXCI7bnVsbD09dFtyXT90W3JdPW5bMl06bmV3IFJlZ0V4cChcIig/Ol58cylcIituWzJdK1wiKD86JHxzKVwiKS50ZXN0KHRbcl0pfHwodFtyXSs9XCIgXCIrblsyXSl9cmV0dXJuIGV9ZnVuY3Rpb24gQXIodCxuKXtpZih0LmJsYW5rTGluZSlyZXR1cm4gdC5ibGFua0xpbmUobik7aWYodC5pbm5lck1vZGUpe3ZhciByPWUuaW5uZXJNb2RlKHQsbik7cmV0dXJuIHIubW9kZS5ibGFua0xpbmU/ci5tb2RlLmJsYW5rTGluZShyLnN0YXRlKTp2b2lkIDB9fWZ1bmN0aW9uIE9yKHQsbixyLGkpe2Zvcih2YXIgbz0wOzEwPm87bysrKXtpJiYoaVswXT1lLmlubmVyTW9kZSh0LHIpLm1vZGUpO3ZhciBsPXQudG9rZW4obixyKTtpZihuLnBvcz5uLnN0YXJ0KXJldHVybiBsfXRocm93IG5ldyBFcnJvcihcIk1vZGUgXCIrdC5uYW1lK1wiIGZhaWxlZCB0byBhZHZhbmNlIHN0cmVhbS5cIil9ZnVuY3Rpb24gV3IoZSx0LG4scil7ZnVuY3Rpb24gaShlKXtyZXR1cm57c3RhcnQ6ZC5zdGFydCxlbmQ6ZC5wb3Msc3RyaW5nOmQuY3VycmVudCgpLHR5cGU6b3x8bnVsbCxzdGF0ZTplP2xsKGwubW9kZSx1KTp1fX12YXIgbyxsPWUuZG9jLGE9bC5tb2RlO3Q9Z2UobCx0KTt2YXIgcyxjPVlyKGwsdC5saW5lKSx1PV9lKGUsdC5saW5lLG4pLGQ9bmV3IGZsKGMudGV4dCxlLm9wdGlvbnMudGFiU2l6ZSk7Zm9yKHImJihzPVtdKTsocnx8ZC5wb3M8dC5jaCkmJiFkLmVvbCgpOylkLnN0YXJ0PWQucG9zLG89T3IoYSxkLHUpLHImJnMucHVzaChpKCEwKSk7cmV0dXJuIHI/czppKCl9ZnVuY3Rpb24gSHIoZSx0LG4scixpLG8sbCl7dmFyIGE9bi5mbGF0dGVuU3BhbnM7bnVsbD09YSYmKGE9ZS5vcHRpb25zLmZsYXR0ZW5TcGFucyk7dmFyIHMsYz0wLHU9bnVsbCxkPW5ldyBmbCh0LGUub3B0aW9ucy50YWJTaXplKSxoPWUub3B0aW9ucy5hZGRNb2RlQ2xhc3MmJltudWxsXTtmb3IoXCJcIj09dCYmTnIoQXIobixyKSxvKTshZC5lb2woKTspe2lmKGQucG9zPmUub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGg/KGE9ITEsbCYmSXIoZSx0LHIsZC5wb3MpLGQucG9zPXQubGVuZ3RoLHM9bnVsbCk6cz1OcihPcihuLGQscixoKSxvKSxoKXt2YXIgZj1oWzBdLm5hbWU7ZiYmKHM9XCJtLVwiKyhzP2YrXCIgXCIrczpmKSl9aWYoIWF8fHUhPXMpe2Zvcig7YzxkLnN0YXJ0OyljPU1hdGgubWluKGQuc3RhcnQsYys1ZTQpLGkoYyx1KTt1PXN9ZC5zdGFydD1kLnBvc31mb3IoO2M8ZC5wb3M7KXt2YXIgcD1NYXRoLm1pbihkLnBvcyxjKzVlNCk7aShwLHUpLGM9cH19ZnVuY3Rpb24gRHIoZSx0LG4scil7dmFyIGk9W2Uuc3RhdGUubW9kZUdlbl0sbz17fTtIcihlLHQudGV4dCxlLmRvYy5tb2RlLG4sZnVuY3Rpb24oZSx0KXtpLnB1c2goZSx0KX0sbyxyKTtmb3IodmFyIGw9MDtsPGUuc3RhdGUub3ZlcmxheXMubGVuZ3RoOysrbCl7dmFyIGE9ZS5zdGF0ZS5vdmVybGF5c1tsXSxzPTEsYz0wO0hyKGUsdC50ZXh0LGEubW9kZSwhMCxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1zO2U+Yzspe3ZhciByPWlbc107cj5lJiZpLnNwbGljZShzLDEsZSxpW3MrMV0scikscys9MixjPU1hdGgubWluKGUscil9aWYodClpZihhLm9wYXF1ZSlpLnNwbGljZShuLHMtbixlLFwiY20tb3ZlcmxheSBcIit0KSxzPW4rMjtlbHNlIGZvcig7cz5uO24rPTIpe3ZhciBvPWlbbisxXTtpW24rMV09KG8/bytcIiBcIjpcIlwiKStcImNtLW92ZXJsYXkgXCIrdH19LG8pfXJldHVybntzdHlsZXM6aSxjbGFzc2VzOm8uYmdDbGFzc3x8by50ZXh0Q2xhc3M/bzpudWxsfX1mdW5jdGlvbiBFcihlLHQsbil7aWYoIXQuc3R5bGVzfHx0LnN0eWxlc1swXSE9ZS5zdGF0ZS5tb2RlR2VuKXt2YXIgcj1fZShlLGVpKHQpKSxpPURyKGUsdCx0LnRleHQubGVuZ3RoPmUub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGg/bGwoZS5kb2MubW9kZSxyKTpyKTt0LnN0YXRlQWZ0ZXI9cix0LnN0eWxlcz1pLnN0eWxlcyxpLmNsYXNzZXM/dC5zdHlsZUNsYXNzZXM9aS5jbGFzc2VzOnQuc3R5bGVDbGFzc2VzJiYodC5zdHlsZUNsYXNzZXM9bnVsbCksbj09PWUuZG9jLmZyb250aWVyJiZlLmRvYy5mcm9udGllcisrfXJldHVybiB0LnN0eWxlc31mdW5jdGlvbiBJcihlLHQsbixyKXt2YXIgaT1lLmRvYy5tb2RlLG89bmV3IGZsKHQsZS5vcHRpb25zLnRhYlNpemUpO2ZvcihvLnN0YXJ0PW8ucG9zPXJ8fDAsXCJcIj09dCYmQXIoaSxuKTshby5lb2woKTspT3IoaSxvLG4pLG8uc3RhcnQ9by5wb3N9ZnVuY3Rpb24gUHIoZSx0KXtpZighZXx8L15cXHMqJC8udGVzdChlKSlyZXR1cm4gbnVsbDt2YXIgbj10LmFkZE1vZGVDbGFzcz9ibDp4bDtyZXR1cm4gbltlXXx8KG5bZV09ZS5yZXBsYWNlKC9cXFMrL2csXCJjbS0kJlwiKSl9ZnVuY3Rpb24genIoZSx0KXt2YXIgbj1faShcInNwYW5cIixudWxsLG51bGwsYm8/XCJwYWRkaW5nLXJpZ2h0OiAuMXB4XCI6bnVsbCkscj17cHJlOl9pKFwicHJlXCIsW25dLFwiQ29kZU1pcnJvci1saW5lXCIpLGNvbnRlbnQ6bixjb2w6MCxwb3M6MCxjbTplLHNwbGl0U3BhY2VzOih5b3x8Ym8pJiZlLmdldE9wdGlvbihcImxpbmVXcmFwcGluZ1wiKX07dC5tZWFzdXJlPXt9O2Zvcih2YXIgaT0wO2k8PSh0LnJlc3Q/dC5yZXN0Lmxlbmd0aDowKTtpKyspe3ZhciBvLGw9aT90LnJlc3RbaS0xXTp0LmxpbmU7ci5wb3M9MCxyLmFkZFRva2VuPVJyLFppKGUuZGlzcGxheS5tZWFzdXJlKSYmKG89cmkobCkpJiYoci5hZGRUb2tlbj1fcihyLmFkZFRva2VuLG8pKSxyLm1hcD1bXTt2YXIgYT10IT1lLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCYmZWkobCk7cXIobCxyLEVyKGUsbCxhKSksbC5zdHlsZUNsYXNzZXMmJihsLnN0eWxlQ2xhc3Nlcy5iZ0NsYXNzJiYoci5iZ0NsYXNzPSRpKGwuc3R5bGVDbGFzc2VzLmJnQ2xhc3Msci5iZ0NsYXNzfHxcIlwiKSksbC5zdHlsZUNsYXNzZXMudGV4dENsYXNzJiYoci50ZXh0Q2xhc3M9JGkobC5zdHlsZUNsYXNzZXMudGV4dENsYXNzLHIudGV4dENsYXNzfHxcIlwiKSkpLDA9PXIubWFwLmxlbmd0aCYmci5tYXAucHVzaCgwLDAsci5jb250ZW50LmFwcGVuZENoaWxkKFlpKGUuZGlzcGxheS5tZWFzdXJlKSkpLDA9PWk/KHQubWVhc3VyZS5tYXA9ci5tYXAsdC5tZWFzdXJlLmNhY2hlPXt9KTooKHQubWVhc3VyZS5tYXBzfHwodC5tZWFzdXJlLm1hcHM9W10pKS5wdXNoKHIubWFwKSwodC5tZWFzdXJlLmNhY2hlc3x8KHQubWVhc3VyZS5jYWNoZXM9W10pKS5wdXNoKHt9KSl9cmV0dXJuIGJvJiYvXFxiY20tdGFiXFxiLy50ZXN0KHIuY29udGVudC5sYXN0Q2hpbGQuY2xhc3NOYW1lKSYmKHIuY29udGVudC5jbGFzc05hbWU9XCJjbS10YWItd3JhcC1oYWNrXCIpLFdsKGUsXCJyZW5kZXJMaW5lXCIsZSx0LmxpbmUsci5wcmUpLHIucHJlLmNsYXNzTmFtZSYmKHIudGV4dENsYXNzPSRpKHIucHJlLmNsYXNzTmFtZSxyLnRleHRDbGFzc3x8XCJcIikpLHJ9ZnVuY3Rpb24gRnIoZSl7dmFyIHQ9X2koXCJzcGFuXCIsXCLigKJcIixcImNtLWludmFsaWRjaGFyXCIpO3JldHVybiB0LnRpdGxlPVwiXFxcXHVcIitlLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLHQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLHQudGl0bGUpLHR9ZnVuY3Rpb24gUnIoZSx0LG4scixpLG8sbCl7aWYodCl7dmFyIGE9ZS5zcGxpdFNwYWNlcz90LnJlcGxhY2UoLyB7Myx9L2csQnIpOnQscz1lLmNtLnN0YXRlLnNwZWNpYWxDaGFycyxjPSExO2lmKHMudGVzdCh0KSlmb3IodmFyIHU9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGQ9MDs7KXtzLmxhc3RJbmRleD1kO3ZhciBoPXMuZXhlYyh0KSxmPWg/aC5pbmRleC1kOnQubGVuZ3RoLWQ7aWYoZil7dmFyIHA9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYS5zbGljZShkLGQrZikpO3lvJiY5PnhvP3UuYXBwZW5kQ2hpbGQoX2koXCJzcGFuXCIsW3BdKSk6dS5hcHBlbmRDaGlsZChwKSxlLm1hcC5wdXNoKGUucG9zLGUucG9zK2YscCksZS5jb2wrPWYsZS5wb3MrPWZ9aWYoIWgpYnJlYWs7aWYoZCs9ZisxLFwiXHRcIj09aFswXSl7dmFyIG09ZS5jbS5vcHRpb25zLnRhYlNpemUsZz1tLWUuY29sJW0scD11LmFwcGVuZENoaWxkKF9pKFwic3BhblwiLE9pKGcpLFwiY20tdGFiXCIpKTtwLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSxwLnNldEF0dHJpYnV0ZShcImNtLXRleHRcIixcIlx0XCIpLGUuY29sKz1nfWVsc2UgaWYoXCJcXHJcIj09aFswXXx8XCJcXG5cIj09aFswXSl7dmFyIHA9dS5hcHBlbmRDaGlsZChfaShcInNwYW5cIixcIlxcclwiPT1oWzBdP1wi4pCNXCI6XCLikKRcIixcImNtLWludmFsaWRjaGFyXCIpKTtwLnNldEF0dHJpYnV0ZShcImNtLXRleHRcIixoWzBdKSxlLmNvbCs9MX1lbHNle3ZhciBwPWUuY20ub3B0aW9ucy5zcGVjaWFsQ2hhclBsYWNlaG9sZGVyKGhbMF0pO3Auc2V0QXR0cmlidXRlKFwiY20tdGV4dFwiLGhbMF0pLHlvJiY5PnhvP3UuYXBwZW5kQ2hpbGQoX2koXCJzcGFuXCIsW3BdKSk6dS5hcHBlbmRDaGlsZChwKSxlLmNvbCs9MX1lLm1hcC5wdXNoKGUucG9zLGUucG9zKzEscCksZS5wb3MrK31lbHNle2UuY29sKz10Lmxlbmd0aDt2YXIgdT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKTtlLm1hcC5wdXNoKGUucG9zLGUucG9zK3QubGVuZ3RoLHUpLHlvJiY5PnhvJiYoYz0hMCksZS5wb3MrPXQubGVuZ3RofWlmKG58fHJ8fGl8fGN8fGwpe3ZhciB2PW58fFwiXCI7ciYmKHYrPXIpLGkmJih2Kz1pKTt2YXIgeT1faShcInNwYW5cIixbdV0sdixsKTtyZXR1cm4gbyYmKHkudGl0bGU9byksZS5jb250ZW50LmFwcGVuZENoaWxkKHkpfWUuY29udGVudC5hcHBlbmRDaGlsZCh1KX19ZnVuY3Rpb24gQnIoZSl7Zm9yKHZhciB0PVwiIFwiLG49MDtuPGUubGVuZ3RoLTI7KytuKXQrPW4lMj9cIiBcIjpcIiBcIjtyZXR1cm4gdCs9XCIgXCJ9ZnVuY3Rpb24gX3IoZSx0KXtyZXR1cm4gZnVuY3Rpb24obixyLGksbyxsLGEscyl7aT1pP2krXCIgY20tZm9yY2UtYm9yZGVyXCI6XCJjbS1mb3JjZS1ib3JkZXJcIjtmb3IodmFyIGM9bi5wb3MsdT1jK3IubGVuZ3RoOzspe2Zvcih2YXIgZD0wO2Q8dC5sZW5ndGg7ZCsrKXt2YXIgaD10W2RdO2lmKGgudG8+YyYmaC5mcm9tPD1jKWJyZWFrfWlmKGgudG8+PXUpcmV0dXJuIGUobixyLGksbyxsLGEscyk7ZShuLHIuc2xpY2UoMCxoLnRvLWMpLGksbyxudWxsLGEscyksbz1udWxsLHI9ci5zbGljZShoLnRvLWMpLGM9aC50b319fWZ1bmN0aW9uIGpyKGUsdCxuLHIpe3ZhciBpPSFyJiZuLndpZGdldE5vZGU7aSYmZS5tYXAucHVzaChlLnBvcyxlLnBvcyt0LGkpLCFyJiZlLmNtLmRpc3BsYXkuaW5wdXQubmVlZHNDb250ZW50QXR0cmlidXRlJiYoaXx8KGk9ZS5jb250ZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpKSksaS5zZXRBdHRyaWJ1dGUoXCJjbS1tYXJrZXJcIixuLmlkKSksaSYmKGUuY20uZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKGkpLGUuY29udGVudC5hcHBlbmRDaGlsZChpKSksZS5wb3MrPXR9ZnVuY3Rpb24gcXIoZSx0LG4pe3ZhciByPWUubWFya2VkU3BhbnMsaT1lLnRleHQsbz0wO2lmKHIpZm9yKHZhciBsLGEscyxjLHUsZCxoLGY9aS5sZW5ndGgscD0wLG09MSxnPVwiXCIsdj0wOzspe2lmKHY9PXApe3M9Yz11PWQ9YT1cIlwiLGg9bnVsbCx2PTEvMDtmb3IodmFyIHk9W10seD0wO3g8ci5sZW5ndGg7Kyt4KXt2YXIgYj1yW3hdLHc9Yi5tYXJrZXI7XCJib29rbWFya1wiPT13LnR5cGUmJmIuZnJvbT09cCYmdy53aWRnZXROb2RlP3kucHVzaCh3KTpiLmZyb208PXAmJihudWxsPT1iLnRvfHxiLnRvPnB8fHcuY29sbGFwc2VkJiZiLnRvPT1wJiZiLmZyb209PXApPyhudWxsIT1iLnRvJiZiLnRvIT1wJiZ2PmIudG8mJih2PWIudG8sYz1cIlwiKSx3LmNsYXNzTmFtZSYmKHMrPVwiIFwiK3cuY2xhc3NOYW1lKSx3LmNzcyYmKGE9dy5jc3MpLHcuc3RhcnRTdHlsZSYmYi5mcm9tPT1wJiYodSs9XCIgXCIrdy5zdGFydFN0eWxlKSx3LmVuZFN0eWxlJiZiLnRvPT12JiYoYys9XCIgXCIrdy5lbmRTdHlsZSksdy50aXRsZSYmIWQmJihkPXcudGl0bGUpLHcuY29sbGFwc2VkJiYoIWh8fGhyKGgubWFya2VyLHcpPDApJiYoaD1iKSk6Yi5mcm9tPnAmJnY+Yi5mcm9tJiYodj1iLmZyb20pfWlmKGgmJihoLmZyb218fDApPT1wKXtpZihqcih0LChudWxsPT1oLnRvP2YrMTpoLnRvKS1wLGgubWFya2VyLG51bGw9PWguZnJvbSksbnVsbD09aC50bylyZXR1cm47aC50bz09cCYmKGg9ITEpfWlmKCFoJiZ5Lmxlbmd0aClmb3IodmFyIHg9MDt4PHkubGVuZ3RoOysreClqcih0LDAseVt4XSl9aWYocD49ZilicmVhaztmb3IodmFyIGs9TWF0aC5taW4oZix2KTs7KXtpZihnKXt2YXIgQz1wK2cubGVuZ3RoO2lmKCFoKXt2YXIgUz1DPms/Zy5zbGljZSgwLGstcCk6Zzt0LmFkZFRva2VuKHQsUyxsP2wrczpzLHUscCtTLmxlbmd0aD09dj9jOlwiXCIsZCxhKX1pZihDPj1rKXtnPWcuc2xpY2Uoay1wKSxwPWs7YnJlYWt9cD1DLHU9XCJcIn1nPWkuc2xpY2UobyxvPW5bbSsrXSksbD1QcihuW20rK10sdC5jbS5vcHRpb25zKX19ZWxzZSBmb3IodmFyIG09MTttPG4ubGVuZ3RoO20rPTIpdC5hZGRUb2tlbih0LGkuc2xpY2UobyxvPW5bbV0pLFByKG5bbSsxXSx0LmNtLm9wdGlvbnMpKX1mdW5jdGlvbiBHcihlLHQpe3JldHVybiAwPT10LmZyb20uY2gmJjA9PXQudG8uY2gmJlwiXCI9PVdpKHQudGV4dCkmJighZS5jbXx8ZS5jbS5vcHRpb25zLndob2xlTGluZVVwZGF0ZUJlZm9yZSl9ZnVuY3Rpb24gVXIoZSx0LG4scil7ZnVuY3Rpb24gaShlKXtyZXR1cm4gbj9uW2VdOm51bGx9ZnVuY3Rpb24gbyhlLG4saSl7VHIoZSxuLGksciksQ2koZSxcImNoYW5nZVwiLGUsdCl9ZnVuY3Rpb24gbChlLHQpe2Zvcih2YXIgbj1lLG89W107dD5uOysrbilvLnB1c2gobmV3IHlsKGNbbl0saShuKSxyKSk7cmV0dXJuIG99dmFyIGE9dC5mcm9tLHM9dC50byxjPXQudGV4dCx1PVlyKGUsYS5saW5lKSxkPVlyKGUscy5saW5lKSxoPVdpKGMpLGY9aShjLmxlbmd0aC0xKSxwPXMubGluZS1hLmxpbmU7aWYodC5mdWxsKWUuaW5zZXJ0KDAsbCgwLGMubGVuZ3RoKSksZS5yZW1vdmUoYy5sZW5ndGgsZS5zaXplLWMubGVuZ3RoKTtlbHNlIGlmKEdyKGUsdCkpe3ZhciBtPWwoMCxjLmxlbmd0aC0xKTtvKGQsZC50ZXh0LGYpLHAmJmUucmVtb3ZlKGEubGluZSxwKSxtLmxlbmd0aCYmZS5pbnNlcnQoYS5saW5lLG0pfWVsc2UgaWYodT09ZClpZigxPT1jLmxlbmd0aClvKHUsdS50ZXh0LnNsaWNlKDAsYS5jaCkraCt1LnRleHQuc2xpY2Uocy5jaCksZik7ZWxzZXt2YXIgbT1sKDEsYy5sZW5ndGgtMSk7bS5wdXNoKG5ldyB5bChoK3UudGV4dC5zbGljZShzLmNoKSxmLHIpKSxvKHUsdS50ZXh0LnNsaWNlKDAsYS5jaCkrY1swXSxpKDApKSxlLmluc2VydChhLmxpbmUrMSxtKX1lbHNlIGlmKDE9PWMubGVuZ3RoKW8odSx1LnRleHQuc2xpY2UoMCxhLmNoKStjWzBdK2QudGV4dC5zbGljZShzLmNoKSxpKDApKSxlLnJlbW92ZShhLmxpbmUrMSxwKTtlbHNle28odSx1LnRleHQuc2xpY2UoMCxhLmNoKStjWzBdLGkoMCkpLG8oZCxoK2QudGV4dC5zbGljZShzLmNoKSxmKTt2YXIgbT1sKDEsYy5sZW5ndGgtMSk7cD4xJiZlLnJlbW92ZShhLmxpbmUrMSxwLTEpLGUuaW5zZXJ0KGEubGluZSsxLG0pfUNpKGUsXCJjaGFuZ2VcIixlLHQpfWZ1bmN0aW9uICRyKGUpe3RoaXMubGluZXM9ZSx0aGlzLnBhcmVudD1udWxsO2Zvcih2YXIgdD0wLG49MDt0PGUubGVuZ3RoOysrdCllW3RdLnBhcmVudD10aGlzLG4rPWVbdF0uaGVpZ2h0O3RoaXMuaGVpZ2h0PW59ZnVuY3Rpb24gVnIoZSl7dGhpcy5jaGlsZHJlbj1lO2Zvcih2YXIgdD0wLG49MCxyPTA7cjxlLmxlbmd0aDsrK3Ipe3ZhciBpPWVbcl07dCs9aS5jaHVua1NpemUoKSxuKz1pLmhlaWdodCxpLnBhcmVudD10aGlzfXRoaXMuc2l6ZT10LHRoaXMuaGVpZ2h0PW4sdGhpcy5wYXJlbnQ9bnVsbH1mdW5jdGlvbiBLcihlLHQsbil7ZnVuY3Rpb24gcihlLGksbyl7aWYoZS5saW5rZWQpZm9yKHZhciBsPTA7bDxlLmxpbmtlZC5sZW5ndGg7KytsKXt2YXIgYT1lLmxpbmtlZFtsXTtpZihhLmRvYyE9aSl7dmFyIHM9byYmYS5zaGFyZWRIaXN0Oyghbnx8cykmJih0KGEuZG9jLHMpLHIoYS5kb2MsZSxzKSl9fX1yKGUsbnVsbCwhMCl9ZnVuY3Rpb24gWHIoZSx0KXtpZih0LmNtKXRocm93IG5ldyBFcnJvcihcIlRoaXMgZG9jdW1lbnQgaXMgYWxyZWFkeSBpbiB1c2UuXCIpO2UuZG9jPXQsdC5jbT1lLGwoZSksbihlKSxlLm9wdGlvbnMubGluZVdyYXBwaW5nfHxoKGUpLGUub3B0aW9ucy5tb2RlPXQubW9kZU9wdGlvbixFdChlKX1mdW5jdGlvbiBZcihlLHQpe2lmKHQtPWUuZmlyc3QsMD50fHx0Pj1lLnNpemUpdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gbGluZSBcIisodCtlLmZpcnN0KStcIiBpbiB0aGUgZG9jdW1lbnQuXCIpO2Zvcih2YXIgbj1lOyFuLmxpbmVzOylmb3IodmFyIHI9MDs7KytyKXt2YXIgaT1uLmNoaWxkcmVuW3JdLG89aS5jaHVua1NpemUoKTtpZihvPnQpe249aTticmVha310LT1vfXJldHVybiBuLmxpbmVzW3RdfWZ1bmN0aW9uIFpyKGUsdCxuKXt2YXIgcj1bXSxpPXQubGluZTtyZXR1cm4gZS5pdGVyKHQubGluZSxuLmxpbmUrMSxmdW5jdGlvbihlKXt2YXIgbz1lLnRleHQ7aT09bi5saW5lJiYobz1vLnNsaWNlKDAsbi5jaCkpLGk9PXQubGluZSYmKG89by5zbGljZSh0LmNoKSksci5wdXNoKG8pLCsraX0pLHJ9ZnVuY3Rpb24gUXIoZSx0LG4pe3ZhciByPVtdO3JldHVybiBlLml0ZXIodCxuLGZ1bmN0aW9uKGUpe3IucHVzaChlLnRleHQpfSkscn1mdW5jdGlvbiBKcihlLHQpe3ZhciBuPXQtZS5oZWlnaHQ7aWYobilmb3IodmFyIHI9ZTtyO3I9ci5wYXJlbnQpci5oZWlnaHQrPW59ZnVuY3Rpb24gZWkoZSl7aWYobnVsbD09ZS5wYXJlbnQpcmV0dXJuIG51bGw7Zm9yKHZhciB0PWUucGFyZW50LG49SGkodC5saW5lcyxlKSxyPXQucGFyZW50O3I7dD1yLHI9ci5wYXJlbnQpZm9yKHZhciBpPTA7ci5jaGlsZHJlbltpXSE9dDsrK2kpbis9ci5jaGlsZHJlbltpXS5jaHVua1NpemUoKTtyZXR1cm4gbit0LmZpcnN0fWZ1bmN0aW9uIHRpKGUsdCl7dmFyIG49ZS5maXJzdDtlOmRve2Zvcih2YXIgcj0wO3I8ZS5jaGlsZHJlbi5sZW5ndGg7KytyKXt2YXIgaT1lLmNoaWxkcmVuW3JdLG89aS5oZWlnaHQ7aWYobz50KXtlPWk7Y29udGludWUgZX10LT1vLG4rPWkuY2h1bmtTaXplKCl9cmV0dXJuIG59d2hpbGUoIWUubGluZXMpO2Zvcih2YXIgcj0wO3I8ZS5saW5lcy5sZW5ndGg7KytyKXt2YXIgbD1lLmxpbmVzW3JdLGE9bC5oZWlnaHQ7aWYoYT50KWJyZWFrO3QtPWF9cmV0dXJuIG4rcn1mdW5jdGlvbiBuaShlKXtlPXZyKGUpO2Zvcih2YXIgdD0wLG49ZS5wYXJlbnQscj0wO3I8bi5saW5lcy5sZW5ndGg7KytyKXt2YXIgaT1uLmxpbmVzW3JdO2lmKGk9PWUpYnJlYWs7dCs9aS5oZWlnaHR9Zm9yKHZhciBvPW4ucGFyZW50O287bj1vLG89bi5wYXJlbnQpZm9yKHZhciByPTA7cjxvLmNoaWxkcmVuLmxlbmd0aDsrK3Ipe3ZhciBsPW8uY2hpbGRyZW5bcl07aWYobD09bilicmVhazt0Kz1sLmhlaWdodH1yZXR1cm4gdH1mdW5jdGlvbiByaShlKXt2YXIgdD1lLm9yZGVyO3JldHVybiBudWxsPT10JiYodD1lLm9yZGVyPW9hKGUudGV4dCkpLHR9ZnVuY3Rpb24gaWkoZSl7dGhpcy5kb25lPVtdLHRoaXMudW5kb25lPVtdLHRoaXMudW5kb0RlcHRoPTEvMCx0aGlzLmxhc3RNb2RUaW1lPXRoaXMubGFzdFNlbFRpbWU9MCxcbnRoaXMubGFzdE9wPXRoaXMubGFzdFNlbE9wPW51bGwsdGhpcy5sYXN0T3JpZ2luPXRoaXMubGFzdFNlbE9yaWdpbj1udWxsLHRoaXMuZ2VuZXJhdGlvbj10aGlzLm1heEdlbmVyYXRpb249ZXx8MX1mdW5jdGlvbiBvaShlLHQpe3ZhciBuPXtmcm9tOlYodC5mcm9tKSx0bzpabyh0KSx0ZXh0OlpyKGUsdC5mcm9tLHQudG8pfTtyZXR1cm4gaGkoZSxuLHQuZnJvbS5saW5lLHQudG8ubGluZSsxKSxLcihlLGZ1bmN0aW9uKGUpe2hpKGUsbix0LmZyb20ubGluZSx0LnRvLmxpbmUrMSl9LCEwKSxufWZ1bmN0aW9uIGxpKGUpe2Zvcig7ZS5sZW5ndGg7KXt2YXIgdD1XaShlKTtpZighdC5yYW5nZXMpYnJlYWs7ZS5wb3AoKX19ZnVuY3Rpb24gYWkoZSx0KXtyZXR1cm4gdD8obGkoZS5kb25lKSxXaShlLmRvbmUpKTplLmRvbmUubGVuZ3RoJiYhV2koZS5kb25lKS5yYW5nZXM/V2koZS5kb25lKTplLmRvbmUubGVuZ3RoPjEmJiFlLmRvbmVbZS5kb25lLmxlbmd0aC0yXS5yYW5nZXM/KGUuZG9uZS5wb3AoKSxXaShlLmRvbmUpKTp2b2lkIDB9ZnVuY3Rpb24gc2koZSx0LG4scil7dmFyIGk9ZS5oaXN0b3J5O2kudW5kb25lLmxlbmd0aD0wO3ZhciBvLGw9K25ldyBEYXRlO2lmKChpLmxhc3RPcD09cnx8aS5sYXN0T3JpZ2luPT10Lm9yaWdpbiYmdC5vcmlnaW4mJihcIitcIj09dC5vcmlnaW4uY2hhckF0KDApJiZlLmNtJiZpLmxhc3RNb2RUaW1lPmwtZS5jbS5vcHRpb25zLmhpc3RvcnlFdmVudERlbGF5fHxcIipcIj09dC5vcmlnaW4uY2hhckF0KDApKSkmJihvPWFpKGksaS5sYXN0T3A9PXIpKSl7dmFyIGE9V2koby5jaGFuZ2VzKTswPT16byh0LmZyb20sdC50bykmJjA9PXpvKHQuZnJvbSxhLnRvKT9hLnRvPVpvKHQpOm8uY2hhbmdlcy5wdXNoKG9pKGUsdCkpfWVsc2V7dmFyIHM9V2koaS5kb25lKTtmb3IocyYmcy5yYW5nZXN8fGRpKGUuc2VsLGkuZG9uZSksbz17Y2hhbmdlczpbb2koZSx0KV0sZ2VuZXJhdGlvbjppLmdlbmVyYXRpb259LGkuZG9uZS5wdXNoKG8pO2kuZG9uZS5sZW5ndGg+aS51bmRvRGVwdGg7KWkuZG9uZS5zaGlmdCgpLGkuZG9uZVswXS5yYW5nZXN8fGkuZG9uZS5zaGlmdCgpfWkuZG9uZS5wdXNoKG4pLGkuZ2VuZXJhdGlvbj0rK2kubWF4R2VuZXJhdGlvbixpLmxhc3RNb2RUaW1lPWkubGFzdFNlbFRpbWU9bCxpLmxhc3RPcD1pLmxhc3RTZWxPcD1yLGkubGFzdE9yaWdpbj1pLmxhc3RTZWxPcmlnaW49dC5vcmlnaW4sYXx8V2woZSxcImhpc3RvcnlBZGRlZFwiKX1mdW5jdGlvbiBjaShlLHQsbixyKXt2YXIgaT10LmNoYXJBdCgwKTtyZXR1cm5cIipcIj09aXx8XCIrXCI9PWkmJm4ucmFuZ2VzLmxlbmd0aD09ci5yYW5nZXMubGVuZ3RoJiZuLnNvbWV0aGluZ1NlbGVjdGVkKCk9PXIuc29tZXRoaW5nU2VsZWN0ZWQoKSYmbmV3IERhdGUtZS5oaXN0b3J5Lmxhc3RTZWxUaW1lPD0oZS5jbT9lLmNtLm9wdGlvbnMuaGlzdG9yeUV2ZW50RGVsYXk6NTAwKX1mdW5jdGlvbiB1aShlLHQsbixyKXt2YXIgaT1lLmhpc3Rvcnksbz1yJiZyLm9yaWdpbjtuPT1pLmxhc3RTZWxPcHx8byYmaS5sYXN0U2VsT3JpZ2luPT1vJiYoaS5sYXN0TW9kVGltZT09aS5sYXN0U2VsVGltZSYmaS5sYXN0T3JpZ2luPT1vfHxjaShlLG8sV2koaS5kb25lKSx0KSk/aS5kb25lW2kuZG9uZS5sZW5ndGgtMV09dDpkaSh0LGkuZG9uZSksaS5sYXN0U2VsVGltZT0rbmV3IERhdGUsaS5sYXN0U2VsT3JpZ2luPW8saS5sYXN0U2VsT3A9bixyJiZyLmNsZWFyUmVkbyE9PSExJiZsaShpLnVuZG9uZSl9ZnVuY3Rpb24gZGkoZSx0KXt2YXIgbj1XaSh0KTtuJiZuLnJhbmdlcyYmbi5lcXVhbHMoZSl8fHQucHVzaChlKX1mdW5jdGlvbiBoaShlLHQsbixyKXt2YXIgaT10W1wic3BhbnNfXCIrZS5pZF0sbz0wO2UuaXRlcihNYXRoLm1heChlLmZpcnN0LG4pLE1hdGgubWluKGUuZmlyc3QrZS5zaXplLHIpLGZ1bmN0aW9uKG4pe24ubWFya2VkU3BhbnMmJigoaXx8KGk9dFtcInNwYW5zX1wiK2UuaWRdPXt9KSlbb109bi5tYXJrZWRTcGFucyksKytvfSl9ZnVuY3Rpb24gZmkoZSl7aWYoIWUpcmV0dXJuIG51bGw7Zm9yKHZhciB0LG49MDtuPGUubGVuZ3RoOysrbillW25dLm1hcmtlci5leHBsaWNpdGx5Q2xlYXJlZD90fHwodD1lLnNsaWNlKDAsbikpOnQmJnQucHVzaChlW25dKTtyZXR1cm4gdD90Lmxlbmd0aD90Om51bGw6ZX1mdW5jdGlvbiBwaShlLHQpe3ZhciBuPXRbXCJzcGFuc19cIitlLmlkXTtpZighbilyZXR1cm4gbnVsbDtmb3IodmFyIHI9MCxpPVtdO3I8dC50ZXh0Lmxlbmd0aDsrK3IpaS5wdXNoKGZpKG5bcl0pKTtyZXR1cm4gaX1mdW5jdGlvbiBtaShlLHQsbil7Zm9yKHZhciByPTAsaT1bXTtyPGUubGVuZ3RoOysrcil7dmFyIG89ZVtyXTtpZihvLnJhbmdlcylpLnB1c2gobj9kZS5wcm90b3R5cGUuZGVlcENvcHkuY2FsbChvKTpvKTtlbHNle3ZhciBsPW8uY2hhbmdlcyxhPVtdO2kucHVzaCh7Y2hhbmdlczphfSk7Zm9yKHZhciBzPTA7czxsLmxlbmd0aDsrK3Mpe3ZhciBjLHU9bFtzXTtpZihhLnB1c2goe2Zyb206dS5mcm9tLHRvOnUudG8sdGV4dDp1LnRleHR9KSx0KWZvcih2YXIgZCBpbiB1KShjPWQubWF0Y2goL15zcGFuc18oXFxkKykkLykpJiZIaSh0LE51bWJlcihjWzFdKSk+LTEmJihXaShhKVtkXT11W2RdLGRlbGV0ZSB1W2RdKX19fXJldHVybiBpfWZ1bmN0aW9uIGdpKGUsdCxuLHIpe248ZS5saW5lP2UubGluZSs9cjp0PGUubGluZSYmKGUubGluZT10LGUuY2g9MCl9ZnVuY3Rpb24gdmkoZSx0LG4scil7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDsrK2kpe3ZhciBvPWVbaV0sbD0hMDtpZihvLnJhbmdlcyl7by5jb3BpZWR8fChvPWVbaV09by5kZWVwQ29weSgpLG8uY29waWVkPSEwKTtmb3IodmFyIGE9MDthPG8ucmFuZ2VzLmxlbmd0aDthKyspZ2koby5yYW5nZXNbYV0uYW5jaG9yLHQsbixyKSxnaShvLnJhbmdlc1thXS5oZWFkLHQsbixyKX1lbHNle2Zvcih2YXIgYT0wO2E8by5jaGFuZ2VzLmxlbmd0aDsrK2Epe3ZhciBzPW8uY2hhbmdlc1thXTtpZihuPHMuZnJvbS5saW5lKXMuZnJvbT1QbyhzLmZyb20ubGluZStyLHMuZnJvbS5jaCkscy50bz1QbyhzLnRvLmxpbmUrcixzLnRvLmNoKTtlbHNlIGlmKHQ8PXMudG8ubGluZSl7bD0hMTticmVha319bHx8KGUuc3BsaWNlKDAsaSsxKSxpPTApfX19ZnVuY3Rpb24geWkoZSx0KXt2YXIgbj10LmZyb20ubGluZSxyPXQudG8ubGluZSxpPXQudGV4dC5sZW5ndGgtKHItbiktMTt2aShlLmRvbmUsbixyLGkpLHZpKGUudW5kb25lLG4scixpKX1mdW5jdGlvbiB4aShlKXtyZXR1cm4gbnVsbCE9ZS5kZWZhdWx0UHJldmVudGVkP2UuZGVmYXVsdFByZXZlbnRlZDowPT1lLnJldHVyblZhbHVlfWZ1bmN0aW9uIGJpKGUpe3JldHVybiBlLnRhcmdldHx8ZS5zcmNFbGVtZW50fWZ1bmN0aW9uIHdpKGUpe3ZhciB0PWUud2hpY2g7cmV0dXJuIG51bGw9PXQmJigxJmUuYnV0dG9uP3Q9MToyJmUuYnV0dG9uP3Q9Mzo0JmUuYnV0dG9uJiYodD0yKSksQW8mJmUuY3RybEtleSYmMT09dCYmKHQ9MyksdH1mdW5jdGlvbiBraShlLHQsbil7dmFyIHI9ZS5faGFuZGxlcnMmJmUuX2hhbmRsZXJzW3RdO3JldHVybiBuP3ImJnIubGVuZ3RoPjA/ci5zbGljZSgpOkFsOnJ8fEFsfWZ1bmN0aW9uIENpKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtlLmFwcGx5KG51bGwsbyl9fXZhciByPWtpKGUsdCwhMSk7aWYoci5sZW5ndGgpe3ZhciBpLG89QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3FvP2k9cW8uZGVsYXllZENhbGxiYWNrczpIbD9pPUhsOihpPUhsPVtdLHNldFRpbWVvdXQoU2ksMCkpO2Zvcih2YXIgbD0wO2w8ci5sZW5ndGg7KytsKWkucHVzaChuKHJbbF0pKX19ZnVuY3Rpb24gU2koKXt2YXIgZT1IbDtIbD1udWxsO2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7Kyt0KWVbdF0oKX1mdW5jdGlvbiBMaShlLHQsbil7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PXt0eXBlOnQscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9fSksV2woZSxufHx0LnR5cGUsZSx0KSx4aSh0KXx8dC5jb2RlbWlycm9ySWdub3JlfWZ1bmN0aW9uIFRpKGUpe3ZhciB0PWUuX2hhbmRsZXJzJiZlLl9oYW5kbGVycy5jdXJzb3JBY3Rpdml0eTtpZih0KWZvcih2YXIgbj1lLmN1ck9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnN8fChlLmN1ck9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnM9W10pLHI9MDtyPHQubGVuZ3RoOysrciktMT09SGkobix0W3JdKSYmbi5wdXNoKHRbcl0pfWZ1bmN0aW9uIE1pKGUsdCl7cmV0dXJuIGtpKGUsdCkubGVuZ3RoPjB9ZnVuY3Rpb24gTmkoZSl7ZS5wcm90b3R5cGUub249ZnVuY3Rpb24oZSx0KXtObCh0aGlzLGUsdCl9LGUucHJvdG90eXBlLm9mZj1mdW5jdGlvbihlLHQpe09sKHRoaXMsZSx0KX19ZnVuY3Rpb24gQWkoKXt0aGlzLmlkPW51bGx9ZnVuY3Rpb24gT2koZSl7Zm9yKDtCbC5sZW5ndGg8PWU7KUJsLnB1c2goV2koQmwpK1wiIFwiKTtyZXR1cm4gQmxbZV19ZnVuY3Rpb24gV2koZSl7cmV0dXJuIGVbZS5sZW5ndGgtMV19ZnVuY3Rpb24gSGkoZSx0KXtmb3IodmFyIG49MDtuPGUubGVuZ3RoOysrbilpZihlW25dPT10KXJldHVybiBuO3JldHVybi0xfWZ1bmN0aW9uIERpKGUsdCl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyluW3JdPXQoZVtyXSxyKTtyZXR1cm4gbn1mdW5jdGlvbiBFaSgpe31mdW5jdGlvbiBJaShlLHQpe3ZhciBuO3JldHVybiBPYmplY3QuY3JlYXRlP249T2JqZWN0LmNyZWF0ZShlKTooRWkucHJvdG90eXBlPWUsbj1uZXcgRWkpLHQmJlBpKHQsbiksbn1mdW5jdGlvbiBQaShlLHQsbil7dHx8KHQ9e30pO2Zvcih2YXIgciBpbiBlKSFlLmhhc093blByb3BlcnR5KHIpfHxuPT09ITEmJnQuaGFzT3duUHJvcGVydHkocil8fCh0W3JdPWVbcl0pO3JldHVybiB0fWZ1bmN0aW9uIHppKGUpe3ZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseShudWxsLHQpfX1mdW5jdGlvbiBGaShlLHQpe3JldHVybiB0P3Quc291cmNlLmluZGV4T2YoXCJcXFxcd1wiKT4tMSYmR2woZSk/ITA6dC50ZXN0KGUpOkdsKGUpfWZ1bmN0aW9uIFJpKGUpe2Zvcih2YXIgdCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkmJmVbdF0pcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gQmkoZSl7cmV0dXJuIGUuY2hhckNvZGVBdCgwKT49NzY4JiZVbC50ZXN0KGUpfWZ1bmN0aW9uIF9pKGUsdCxuLHIpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZSk7aWYobiYmKGkuY2xhc3NOYW1lPW4pLHImJihpLnN0eWxlLmNzc1RleHQ9ciksXCJzdHJpbmdcIj09dHlwZW9mIHQpaS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0KSk7ZWxzZSBpZih0KWZvcih2YXIgbz0wO288dC5sZW5ndGg7KytvKWkuYXBwZW5kQ2hpbGQodFtvXSk7cmV0dXJuIGl9ZnVuY3Rpb24gamkoZSl7Zm9yKHZhciB0PWUuY2hpbGROb2Rlcy5sZW5ndGg7dD4wOy0tdCllLnJlbW92ZUNoaWxkKGUuZmlyc3RDaGlsZCk7cmV0dXJuIGV9ZnVuY3Rpb24gcWkoZSx0KXtyZXR1cm4gamkoZSkuYXBwZW5kQ2hpbGQodCl9ZnVuY3Rpb24gR2koKXtmb3IodmFyIGU9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtlJiZlLnJvb3QmJmUucm9vdC5hY3RpdmVFbGVtZW50OyllPWUucm9vdC5hY3RpdmVFbGVtZW50O3JldHVybiBlfWZ1bmN0aW9uIFVpKGUpe3JldHVybiBuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrZStcIig/OiR8XFxcXHMpXFxcXHMqXCIpfWZ1bmN0aW9uICRpKGUsdCl7Zm9yKHZhciBuPWUuc3BsaXQoXCIgXCIpLHI9MDtyPG4ubGVuZ3RoO3IrKyluW3JdJiYhVWkobltyXSkudGVzdCh0KSYmKHQrPVwiIFwiK25bcl0pO3JldHVybiB0fWZ1bmN0aW9uIFZpKGUpe2lmKGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlmb3IodmFyIHQ9ZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiQ29kZU1pcnJvclwiKSxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl0uQ29kZU1pcnJvcjtyJiZlKHIpfX1mdW5jdGlvbiBLaSgpe1psfHwoWGkoKSxabD0hMCl9ZnVuY3Rpb24gWGkoKXt2YXIgZTtObCh3aW5kb3csXCJyZXNpemVcIixmdW5jdGlvbigpe251bGw9PWUmJihlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlPW51bGwsVmkocXQpfSwxMDApKX0pLE5sKHdpbmRvdyxcImJsdXJcIixmdW5jdGlvbigpe1ZpKHZuKX0pfWZ1bmN0aW9uIFlpKGUpe2lmKG51bGw9PVZsKXt2YXIgdD1faShcInNwYW5cIixcIuKAi1wiKTtxaShlLF9pKFwic3BhblwiLFt0LGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwieFwiKV0pKSwwIT1lLmZpcnN0Q2hpbGQub2Zmc2V0SGVpZ2h0JiYoVmw9dC5vZmZzZXRXaWR0aDw9MSYmdC5vZmZzZXRIZWlnaHQ+MiYmISh5byYmOD54bykpfXZhciBuPVZsP19pKFwic3BhblwiLFwi4oCLXCIpOl9pKFwic3BhblwiLFwiIFwiLG51bGwsXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiAxcHg7IG1hcmdpbi1yaWdodDogLTFweFwiKTtyZXR1cm4gbi5zZXRBdHRyaWJ1dGUoXCJjbS10ZXh0XCIsXCJcIiksbn1mdW5jdGlvbiBaaShlKXtpZihudWxsIT1LbClyZXR1cm4gS2w7dmFyIHQ9cWkoZSxkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkHYrkFcIikpLG49amwodCwwLDEpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKCFufHxuLmxlZnQ9PW4ucmlnaHQpcmV0dXJuITE7dmFyIHI9amwodCwxLDIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiBLbD1yLnJpZ2h0LW4ucmlnaHQ8M31mdW5jdGlvbiBRaShlKXtpZihudWxsIT1uYSlyZXR1cm4gbmE7dmFyIHQ9cWkoZSxfaShcInNwYW5cIixcInhcIikpLG49dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxyPWpsKHQsMCwxKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm4gbmE9TWF0aC5hYnMobi5sZWZ0LXIubGVmdCk+MX1mdW5jdGlvbiBKaShlLHQsbixyKXtpZighZSlyZXR1cm4gcih0LG4sXCJsdHJcIik7Zm9yKHZhciBpPSExLG89MDtvPGUubGVuZ3RoOysrbyl7dmFyIGw9ZVtvXTsobC5mcm9tPG4mJmwudG8+dHx8dD09biYmbC50bz09dCkmJihyKE1hdGgubWF4KGwuZnJvbSx0KSxNYXRoLm1pbihsLnRvLG4pLDE9PWwubGV2ZWw/XCJydGxcIjpcImx0clwiKSxpPSEwKX1pfHxyKHQsbixcImx0clwiKX1mdW5jdGlvbiBlbyhlKXtyZXR1cm4gZS5sZXZlbCUyP2UudG86ZS5mcm9tfWZ1bmN0aW9uIHRvKGUpe3JldHVybiBlLmxldmVsJTI/ZS5mcm9tOmUudG99ZnVuY3Rpb24gbm8oZSl7dmFyIHQ9cmkoZSk7cmV0dXJuIHQ/ZW8odFswXSk6MH1mdW5jdGlvbiBybyhlKXt2YXIgdD1yaShlKTtyZXR1cm4gdD90byhXaSh0KSk6ZS50ZXh0Lmxlbmd0aH1mdW5jdGlvbiBpbyhlLHQpe3ZhciBuPVlyKGUuZG9jLHQpLHI9dnIobik7ciE9biYmKHQ9ZWkocikpO3ZhciBpPXJpKHIpLG89aT9pWzBdLmxldmVsJTI/cm8ocik6bm8ocik6MDtyZXR1cm4gUG8odCxvKX1mdW5jdGlvbiBvbyhlLHQpe2Zvcih2YXIgbixyPVlyKGUuZG9jLHQpO249bXIocik7KXI9bi5maW5kKDEsITApLmxpbmUsdD1udWxsO3ZhciBpPXJpKHIpLG89aT9pWzBdLmxldmVsJTI/bm8ocik6cm8ocik6ci50ZXh0Lmxlbmd0aDtyZXR1cm4gUG8obnVsbD09dD9laShyKTp0LG8pfWZ1bmN0aW9uIGxvKGUsdCl7dmFyIG49aW8oZSx0LmxpbmUpLHI9WXIoZS5kb2Msbi5saW5lKSxpPXJpKHIpO2lmKCFpfHwwPT1pWzBdLmxldmVsKXt2YXIgbz1NYXRoLm1heCgwLHIudGV4dC5zZWFyY2goL1xcUy8pKSxsPXQubGluZT09bi5saW5lJiZ0LmNoPD1vJiZ0LmNoO3JldHVybiBQbyhuLmxpbmUsbD8wOm8pfXJldHVybiBufWZ1bmN0aW9uIGFvKGUsdCxuKXt2YXIgcj1lWzBdLmxldmVsO3JldHVybiB0PT1yPyEwOm49PXI/ITE6bj50fWZ1bmN0aW9uIHNvKGUsdCl7aWE9bnVsbDtmb3IodmFyIG4scj0wO3I8ZS5sZW5ndGg7KytyKXt2YXIgaT1lW3JdO2lmKGkuZnJvbTx0JiZpLnRvPnQpcmV0dXJuIHI7aWYoaS5mcm9tPT10fHxpLnRvPT10KXtpZihudWxsIT1uKXJldHVybiBhbyhlLGkubGV2ZWwsZVtuXS5sZXZlbCk/KGkuZnJvbSE9aS50byYmKGlhPW4pLHIpOihpLmZyb20hPWkudG8mJihpYT1yKSxuKTtuPXJ9fXJldHVybiBufWZ1bmN0aW9uIGNvKGUsdCxuLHIpe2lmKCFyKXJldHVybiB0K247ZG8gdCs9bjt3aGlsZSh0PjAmJkJpKGUudGV4dC5jaGFyQXQodCkpKTtyZXR1cm4gdH1mdW5jdGlvbiB1byhlLHQsbixyKXt2YXIgaT1yaShlKTtpZighaSlyZXR1cm4gaG8oZSx0LG4scik7Zm9yKHZhciBvPXNvKGksdCksbD1pW29dLGE9Y28oZSx0LGwubGV2ZWwlMj8tbjpuLHIpOzspe2lmKGE+bC5mcm9tJiZhPGwudG8pcmV0dXJuIGE7aWYoYT09bC5mcm9tfHxhPT1sLnRvKXJldHVybiBzbyhpLGEpPT1vP2E6KGw9aVtvKz1uXSxuPjA9PWwubGV2ZWwlMj9sLnRvOmwuZnJvbSk7aWYobD1pW28rPW5dLCFsKXJldHVybiBudWxsO2E9bj4wPT1sLmxldmVsJTI/Y28oZSxsLnRvLC0xLHIpOmNvKGUsbC5mcm9tLDEscil9fWZ1bmN0aW9uIGhvKGUsdCxuLHIpe3ZhciBpPXQrbjtpZihyKWZvcig7aT4wJiZCaShlLnRleHQuY2hhckF0KGkpKTspaSs9bjtyZXR1cm4gMD5pfHxpPmUudGV4dC5sZW5ndGg/bnVsbDppfXZhciBmbz1uYXZpZ2F0b3IudXNlckFnZW50LHBvPW5hdmlnYXRvci5wbGF0Zm9ybSxtbz0vZ2Vja29cXC9cXGQvaS50ZXN0KGZvKSxnbz0vTVNJRSBcXGQvLnRlc3QoZm8pLHZvPS9UcmlkZW50XFwvKD86WzctOV18XFxkezIsfSlcXC4uKnJ2OihcXGQrKS8uZXhlYyhmbykseW89Z298fHZvLHhvPXlvJiYoZ28/ZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHw2OnZvWzFdKSxibz0vV2ViS2l0XFwvLy50ZXN0KGZvKSx3bz1ibyYmL1F0XFwvXFxkK1xcLlxcZCsvLnRlc3QoZm8pLGtvPS9DaHJvbWVcXC8vLnRlc3QoZm8pLENvPS9PcGVyYVxcLy8udGVzdChmbyksU289L0FwcGxlIENvbXB1dGVyLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpLExvPS9NYWMgT1MgWCAxXFxkXFxEKFs4LTldfFxcZFxcZClcXEQvLnRlc3QoZm8pLFRvPS9QaGFudG9tSlMvLnRlc3QoZm8pLE1vPS9BcHBsZVdlYktpdC8udGVzdChmbykmJi9Nb2JpbGVcXC9cXHcrLy50ZXN0KGZvKSxObz1Nb3x8L0FuZHJvaWR8d2ViT1N8QmxhY2tCZXJyeXxPcGVyYSBNaW5pfE9wZXJhIE1vYml8SUVNb2JpbGUvaS50ZXN0KGZvKSxBbz1Nb3x8L01hYy8udGVzdChwbyksT289L3dpbi9pLnRlc3QocG8pLFdvPUNvJiZmby5tYXRjaCgvVmVyc2lvblxcLyhcXGQqXFwuXFxkKikvKTtXbyYmKFdvPU51bWJlcihXb1sxXSkpLFdvJiZXbz49MTUmJihDbz0hMSxibz0hMCk7dmFyIEhvPUFvJiYod298fENvJiYobnVsbD09V298fDEyLjExPldvKSksRG89bW98fHlvJiZ4bz49OSxFbz0hMSxJbz0hMTttLnByb3RvdHlwZT1QaSh7dXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc2Nyb2xsV2lkdGg+ZS5jbGllbnRXaWR0aCsxLG49ZS5zY3JvbGxIZWlnaHQ+ZS5jbGllbnRIZWlnaHQrMSxyPWUubmF0aXZlQmFyV2lkdGg7aWYobil7dGhpcy52ZXJ0LnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHRoaXMudmVydC5zdHlsZS5ib3R0b209dD9yK1wicHhcIjpcIjBcIjt2YXIgaT1lLnZpZXdIZWlnaHQtKHQ/cjowKTt0aGlzLnZlcnQuZmlyc3RDaGlsZC5zdHlsZS5oZWlnaHQ9TWF0aC5tYXgoMCxlLnNjcm9sbEhlaWdodC1lLmNsaWVudEhlaWdodCtpKStcInB4XCJ9ZWxzZSB0aGlzLnZlcnQuc3R5bGUuZGlzcGxheT1cIlwiLHRoaXMudmVydC5maXJzdENoaWxkLnN0eWxlLmhlaWdodD1cIjBcIjtpZih0KXt0aGlzLmhvcml6LnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHRoaXMuaG9yaXouc3R5bGUucmlnaHQ9bj9yK1wicHhcIjpcIjBcIix0aGlzLmhvcml6LnN0eWxlLmxlZnQ9ZS5iYXJMZWZ0K1wicHhcIjt2YXIgbz1lLnZpZXdXaWR0aC1lLmJhckxlZnQtKG4/cjowKTt0aGlzLmhvcml6LmZpcnN0Q2hpbGQuc3R5bGUud2lkdGg9ZS5zY3JvbGxXaWR0aC1lLmNsaWVudFdpZHRoK28rXCJweFwifWVsc2UgdGhpcy5ob3Jpei5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5ob3Jpei5maXJzdENoaWxkLnN0eWxlLndpZHRoPVwiMFwiO3JldHVybiF0aGlzLmNoZWNrZWRaZXJvV2lkdGgmJmUuY2xpZW50SGVpZ2h0PjAmJigwPT1yJiZ0aGlzLnplcm9XaWR0aEhhY2soKSx0aGlzLmNoZWNrZWRaZXJvV2lkdGg9ITApLHtyaWdodDpuP3I6MCxib3R0b206dD9yOjB9fSxzZXRTY3JvbGxMZWZ0OmZ1bmN0aW9uKGUpe3RoaXMuaG9yaXouc2Nyb2xsTGVmdCE9ZSYmKHRoaXMuaG9yaXouc2Nyb2xsTGVmdD1lKSx0aGlzLmRpc2FibGVIb3JpeiYmdGhpcy5lbmFibGVaZXJvV2lkdGhCYXIodGhpcy5ob3Jpeix0aGlzLmRpc2FibGVIb3Jpeil9LHNldFNjcm9sbFRvcDpmdW5jdGlvbihlKXt0aGlzLnZlcnQuc2Nyb2xsVG9wIT1lJiYodGhpcy52ZXJ0LnNjcm9sbFRvcD1lKSx0aGlzLmRpc2FibGVWZXJ0JiZ0aGlzLmVuYWJsZVplcm9XaWR0aEJhcih0aGlzLnZlcnQsdGhpcy5kaXNhYmxlVmVydCl9LHplcm9XaWR0aEhhY2s6ZnVuY3Rpb24oKXt2YXIgZT1BbyYmIUxvP1wiMTJweFwiOlwiMThweFwiO3RoaXMuaG9yaXouc3R5bGUuaGVpZ2h0PXRoaXMudmVydC5zdHlsZS53aWR0aD1lLHRoaXMuaG9yaXouc3R5bGUucG9pbnRlckV2ZW50cz10aGlzLnZlcnQuc3R5bGUucG9pbnRlckV2ZW50cz1cIm5vbmVcIix0aGlzLmRpc2FibGVIb3Jpej1uZXcgQWksdGhpcy5kaXNhYmxlVmVydD1uZXcgQWl9LGVuYWJsZVplcm9XaWR0aEJhcjpmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oKXt2YXIgcj1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGk9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChyLmxlZnQrMSxyLmJvdHRvbS0xKTtpIT1lP2Uuc3R5bGUucG9pbnRlckV2ZW50cz1cIm5vbmVcIjp0LnNldCgxZTMsbil9ZS5zdHlsZS5wb2ludGVyRXZlbnRzPVwiYXV0b1wiLHQuc2V0KDFlMyxuKX0sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhvcml6LnBhcmVudE5vZGU7ZS5yZW1vdmVDaGlsZCh0aGlzLmhvcml6KSxlLnJlbW92ZUNoaWxkKHRoaXMudmVydCl9fSxtLnByb3RvdHlwZSksZy5wcm90b3R5cGU9UGkoe3VwZGF0ZTpmdW5jdGlvbigpe3JldHVybntib3R0b206MCxyaWdodDowfX0sc2V0U2Nyb2xsTGVmdDpmdW5jdGlvbigpe30sc2V0U2Nyb2xsVG9wOmZ1bmN0aW9uKCl7fSxjbGVhcjpmdW5jdGlvbigpe319LGcucHJvdG90eXBlKSxlLnNjcm9sbGJhck1vZGVsPXtcIm5hdGl2ZVwiOm0sXCJudWxsXCI6Z30sTC5wcm90b3R5cGUuc2lnbmFsPWZ1bmN0aW9uKGUsdCl7TWkoZSx0KSYmdGhpcy5ldmVudHMucHVzaChhcmd1bWVudHMpfSxMLnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMuZXZlbnRzLmxlbmd0aDtlKyspV2wuYXBwbHkobnVsbCx0aGlzLmV2ZW50c1tlXSl9O3ZhciBQbz1lLlBvcz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgUG8/KHRoaXMubGluZT1lLHZvaWQodGhpcy5jaD10KSk6bmV3IFBvKGUsdCl9LHpvPWUuY21wUG9zPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubGluZS10LmxpbmV8fGUuY2gtdC5jaH0sRm89bnVsbDtyZS5wcm90b3R5cGU9UGkoe2luaXQ6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtpZihyLnNvbWV0aGluZ1NlbGVjdGVkKCkpRm89ci5nZXRTZWxlY3Rpb25zKCksbi5pbmFjY3VyYXRlU2VsZWN0aW9uJiYobi5wcmV2SW5wdXQ9XCJcIixuLmluYWNjdXJhdGVTZWxlY3Rpb249ITEsby52YWx1ZT1Gby5qb2luKFwiXFxuXCIpLF9sKG8pKTtlbHNle2lmKCFyLm9wdGlvbnMubGluZVdpc2VDb3B5Q3V0KXJldHVybjt2YXIgdD10ZShyKTtGbz10LnRleHQsXCJjdXRcIj09ZS50eXBlP3Iuc2V0U2VsZWN0aW9ucyh0LnJhbmdlcyxudWxsLElsKToobi5wcmV2SW5wdXQ9XCJcIixvLnZhbHVlPXQudGV4dC5qb2luKFwiXFxuXCIpLF9sKG8pKX1cImN1dFwiPT1lLnR5cGUmJihyLnN0YXRlLmN1dEluY29taW5nPSEwKX12YXIgbj10aGlzLHI9dGhpcy5jbSxpPXRoaXMud3JhcHBlcj1pZSgpLG89dGhpcy50ZXh0YXJlYT1pLmZpcnN0Q2hpbGQ7ZS53cmFwcGVyLmluc2VydEJlZm9yZShpLGUud3JhcHBlci5maXJzdENoaWxkKSxNbyYmKG8uc3R5bGUud2lkdGg9XCIwcHhcIiksTmwobyxcImlucHV0XCIsZnVuY3Rpb24oKXt5byYmeG8+PTkmJm4uaGFzU2VsZWN0aW9uJiYobi5oYXNTZWxlY3Rpb249bnVsbCksbi5wb2xsKCl9KSxObChvLFwicGFzdGVcIixmdW5jdGlvbihlKXtyZXR1cm4gSihlLHIpPyEwOihyLnN0YXRlLnBhc3RlSW5jb21pbmc9ITAsdm9pZCBuLmZhc3RQb2xsKCkpfSksTmwobyxcImN1dFwiLHQpLE5sKG8sXCJjb3B5XCIsdCksTmwoZS5zY3JvbGxlcixcInBhc3RlXCIsZnVuY3Rpb24odCl7R3QoZSx0KXx8KHIuc3RhdGUucGFzdGVJbmNvbWluZz0hMCxuLmZvY3VzKCkpfSksTmwoZS5saW5lU3BhY2UsXCJzZWxlY3RzdGFydFwiLGZ1bmN0aW9uKHQpe0d0KGUsdCl8fExsKHQpfSksTmwobyxcImNvbXBvc2l0aW9uc3RhcnRcIixmdW5jdGlvbigpe3ZhciBlPXIuZ2V0Q3Vyc29yKFwiZnJvbVwiKTtuLmNvbXBvc2luZyYmbi5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKSxuLmNvbXBvc2luZz17c3RhcnQ6ZSxyYW5nZTpyLm1hcmtUZXh0KGUsci5nZXRDdXJzb3IoXCJ0b1wiKSx7Y2xhc3NOYW1lOlwiQ29kZU1pcnJvci1jb21wb3NpbmdcIn0pfX0pLE5sKG8sXCJjb21wb3NpdGlvbmVuZFwiLGZ1bmN0aW9uKCl7bi5jb21wb3NpbmcmJihuLnBvbGwoKSxuLmNvbXBvc2luZy5yYW5nZS5jbGVhcigpLG4uY29tcG9zaW5nPW51bGwpfSl9LHByZXBhcmVTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNtLHQ9ZS5kaXNwbGF5LG49ZS5kb2Mscj1FZShlKTtpZihlLm9wdGlvbnMubW92ZUlucHV0V2l0aEN1cnNvcil7dmFyIGk9aHQoZSxuLnNlbC5wcmltYXJ5KCkuaGVhZCxcImRpdlwiKSxvPXQud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxsPXQubGluZURpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyLnRlVG9wPU1hdGgubWF4KDAsTWF0aC5taW4odC53cmFwcGVyLmNsaWVudEhlaWdodC0xMCxpLnRvcCtsLnRvcC1vLnRvcCkpLHIudGVMZWZ0PU1hdGgubWF4KDAsTWF0aC5taW4odC53cmFwcGVyLmNsaWVudFdpZHRoLTEwLGkubGVmdCtsLmxlZnQtby5sZWZ0KSl9cmV0dXJuIHJ9LHNob3dTZWxlY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jbSxuPXQuZGlzcGxheTtxaShuLmN1cnNvckRpdixlLmN1cnNvcnMpLHFpKG4uc2VsZWN0aW9uRGl2LGUuc2VsZWN0aW9uKSxudWxsIT1lLnRlVG9wJiYodGhpcy53cmFwcGVyLnN0eWxlLnRvcD1lLnRlVG9wK1wicHhcIix0aGlzLndyYXBwZXIuc3R5bGUubGVmdD1lLnRlTGVmdCtcInB4XCIpfSxyZXNldDpmdW5jdGlvbihlKXtpZighdGhpcy5jb250ZXh0TWVudVBlbmRpbmcpe3ZhciB0LG4scj10aGlzLmNtLGk9ci5kb2M7aWYoci5zb21ldGhpbmdTZWxlY3RlZCgpKXt0aGlzLnByZXZJbnB1dD1cIlwiO3ZhciBvPWkuc2VsLnByaW1hcnkoKTt0PXRhJiYoby50bygpLmxpbmUtby5mcm9tKCkubGluZT4xMDB8fChuPXIuZ2V0U2VsZWN0aW9uKCkpLmxlbmd0aD4xZTMpO3ZhciBsPXQ/XCItXCI6bnx8ci5nZXRTZWxlY3Rpb24oKTt0aGlzLnRleHRhcmVhLnZhbHVlPWwsci5zdGF0ZS5mb2N1c2VkJiZfbCh0aGlzLnRleHRhcmVhKSx5byYmeG8+PTkmJih0aGlzLmhhc1NlbGVjdGlvbj1sKX1lbHNlIGV8fCh0aGlzLnByZXZJbnB1dD10aGlzLnRleHRhcmVhLnZhbHVlPVwiXCIseW8mJnhvPj05JiYodGhpcy5oYXNTZWxlY3Rpb249bnVsbCkpO3RoaXMuaW5hY2N1cmF0ZVNlbGVjdGlvbj10fX0sZ2V0RmllbGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0YXJlYX0sc3VwcG9ydHNUb3VjaDpmdW5jdGlvbigpe3JldHVybiExfSxmb2N1czpmdW5jdGlvbigpe2lmKFwibm9jdXJzb3JcIiE9dGhpcy5jbS5vcHRpb25zLnJlYWRPbmx5JiYoIU5vfHxHaSgpIT10aGlzLnRleHRhcmVhKSl0cnl7dGhpcy50ZXh0YXJlYS5mb2N1cygpfWNhdGNoKGUpe319LGJsdXI6ZnVuY3Rpb24oKXt0aGlzLnRleHRhcmVhLmJsdXIoKX0scmVzZXRQb3NpdGlvbjpmdW5jdGlvbigpe3RoaXMud3JhcHBlci5zdHlsZS50b3A9dGhpcy53cmFwcGVyLnN0eWxlLmxlZnQ9MH0scmVjZWl2ZWRGb2N1czpmdW5jdGlvbigpe3RoaXMuc2xvd1BvbGwoKX0sc2xvd1BvbGw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UucG9sbGluZ0Zhc3R8fGUucG9sbGluZy5zZXQodGhpcy5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCxmdW5jdGlvbigpe2UucG9sbCgpLGUuY20uc3RhdGUuZm9jdXNlZCYmZS5zbG93UG9sbCgpfSl9LGZhc3RQb2xsOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciByPW4ucG9sbCgpO3J8fHQ/KG4ucG9sbGluZ0Zhc3Q9ITEsbi5zbG93UG9sbCgpKToodD0hMCxuLnBvbGxpbmcuc2V0KDYwLGUpKX12YXIgdD0hMSxuPXRoaXM7bi5wb2xsaW5nRmFzdD0hMCxuLnBvbGxpbmcuc2V0KDIwLGUpfSxwb2xsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jbSx0PXRoaXMudGV4dGFyZWEsbj10aGlzLnByZXZJbnB1dDtpZih0aGlzLmNvbnRleHRNZW51UGVuZGluZ3x8IWUuc3RhdGUuZm9jdXNlZHx8ZWEodCkmJiFuJiYhdGhpcy5jb21wb3Npbmd8fFooZSl8fGUub3B0aW9ucy5kaXNhYmxlSW5wdXR8fGUuc3RhdGUua2V5U2VxKXJldHVybiExO3ZhciByPXQudmFsdWU7aWYocj09biYmIWUuc29tZXRoaW5nU2VsZWN0ZWQoKSlyZXR1cm4hMTtpZih5byYmeG8+PTkmJnRoaXMuaGFzU2VsZWN0aW9uPT09cnx8QW8mJi9bXFx1ZjcwMC1cXHVmN2ZmXS8udGVzdChyKSlyZXR1cm4gZS5kaXNwbGF5LmlucHV0LnJlc2V0KCksITE7aWYoZS5kb2Muc2VsPT1lLmRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUpe3ZhciBpPXIuY2hhckNvZGVBdCgwKTtpZig4MjAzIT1pfHxufHwobj1cIuKAi1wiKSw4NjY2PT1pKXJldHVybiB0aGlzLnJlc2V0KCksdGhpcy5jbS5leGVjQ29tbWFuZChcInVuZG9cIil9Zm9yKHZhciBvPTAsbD1NYXRoLm1pbihuLmxlbmd0aCxyLmxlbmd0aCk7bD5vJiZuLmNoYXJDb2RlQXQobyk9PXIuY2hhckNvZGVBdChvKTspKytvO3ZhciBhPXRoaXM7cmV0dXJuIE50KGUsZnVuY3Rpb24oKXtRKGUsci5zbGljZShvKSxuLmxlbmd0aC1vLG51bGwsYS5jb21wb3Npbmc/XCIqY29tcG9zZVwiOm51bGwpLHIubGVuZ3RoPjFlM3x8ci5pbmRleE9mKFwiXFxuXCIpPi0xP3QudmFsdWU9YS5wcmV2SW5wdXQ9XCJcIjphLnByZXZJbnB1dD1yLGEuY29tcG9zaW5nJiYoYS5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKSxhLmNvbXBvc2luZy5yYW5nZT1lLm1hcmtUZXh0KGEuY29tcG9zaW5nLnN0YXJ0LGUuZ2V0Q3Vyc29yKFwidG9cIikse2NsYXNzTmFtZTpcIkNvZGVNaXJyb3ItY29tcG9zaW5nXCJ9KSl9KSwhMH0sZW5zdXJlUG9sbGVkOmZ1bmN0aW9uKCl7dGhpcy5wb2xsaW5nRmFzdCYmdGhpcy5wb2xsKCkmJih0aGlzLnBvbGxpbmdGYXN0PSExKX0sb25LZXlQcmVzczpmdW5jdGlvbigpe3lvJiZ4bz49OSYmKHRoaXMuaGFzU2VsZWN0aW9uPW51bGwpLHRoaXMuZmFzdFBvbGwoKX0sb25Db250ZXh0TWVudTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7aWYobnVsbCE9bC5zZWxlY3Rpb25TdGFydCl7dmFyIGU9aS5zb21ldGhpbmdTZWxlY3RlZCgpLHQ9XCLigItcIisoZT9sLnZhbHVlOlwiXCIpO2wudmFsdWU9XCLih5pcIixsLnZhbHVlPXQsci5wcmV2SW5wdXQ9ZT9cIlwiOlwi4oCLXCIsbC5zZWxlY3Rpb25TdGFydD0xLGwuc2VsZWN0aW9uRW5kPXQubGVuZ3RoLG8uc2VsRm9yQ29udGV4dE1lbnU9aS5kb2Muc2VsfX1mdW5jdGlvbiBuKCl7aWYoci5jb250ZXh0TWVudVBlbmRpbmc9ITEsci53cmFwcGVyLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIixsLnN0eWxlLmNzc1RleHQ9dSx5byYmOT54byYmby5zY3JvbGxiYXJzLnNldFNjcm9sbFRvcChvLnNjcm9sbGVyLnNjcm9sbFRvcD1zKSxudWxsIT1sLnNlbGVjdGlvblN0YXJ0KXsoIXlvfHx5byYmOT54bykmJnQoKTt2YXIgZT0wLG49ZnVuY3Rpb24oKXtvLnNlbEZvckNvbnRleHRNZW51PT1pLmRvYy5zZWwmJjA9PWwuc2VsZWN0aW9uU3RhcnQmJmwuc2VsZWN0aW9uRW5kPjAmJlwi4oCLXCI9PXIucHJldklucHV0P0F0KGksc2wuc2VsZWN0QWxsKShpKTplKys8MTA/by5kZXRlY3RpbmdTZWxlY3RBbGw9c2V0VGltZW91dChuLDUwMCk6by5pbnB1dC5yZXNldCgpfTtvLmRldGVjdGluZ1NlbGVjdEFsbD1zZXRUaW1lb3V0KG4sMjAwKX19dmFyIHI9dGhpcyxpPXIuY20sbz1pLmRpc3BsYXksbD1yLnRleHRhcmVhLGE9VXQoaSxlKSxzPW8uc2Nyb2xsZXIuc2Nyb2xsVG9wO2lmKGEmJiFDbyl7dmFyIGM9aS5vcHRpb25zLnJlc2V0U2VsZWN0aW9uT25Db250ZXh0TWVudTtjJiYtMT09aS5kb2Muc2VsLmNvbnRhaW5zKGEpJiZBdChpLE1lKShpLmRvYyxwZShhKSxJbCk7dmFyIHU9bC5zdHlsZS5jc3NUZXh0O2lmKHIud3JhcHBlci5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsbC5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246IGZpeGVkOyB3aWR0aDogMzBweDsgaGVpZ2h0OiAzMHB4OyB0b3A6IFwiKyhlLmNsaWVudFktNSkrXCJweDsgbGVmdDogXCIrKGUuY2xpZW50WC01KStcInB4OyB6LWluZGV4OiAxMDAwOyBiYWNrZ3JvdW5kOiBcIisoeW8/XCJyZ2JhKDI1NSwgMjU1LCAyNTUsIC4wNSlcIjpcInRyYW5zcGFyZW50XCIpK1wiOyBvdXRsaW5lOiBub25lOyBib3JkZXItd2lkdGg6IDA7IG91dGxpbmU6IG5vbmU7IG92ZXJmbG93OiBoaWRkZW47IG9wYWNpdHk6IC4wNTsgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTUpO1wiLGJvKXZhciBkPXdpbmRvdy5zY3JvbGxZO2lmKG8uaW5wdXQuZm9jdXMoKSxibyYmd2luZG93LnNjcm9sbFRvKG51bGwsZCksby5pbnB1dC5yZXNldCgpLGkuc29tZXRoaW5nU2VsZWN0ZWQoKXx8KGwudmFsdWU9ci5wcmV2SW5wdXQ9XCIgXCIpLHIuY29udGV4dE1lbnVQZW5kaW5nPSEwLG8uc2VsRm9yQ29udGV4dE1lbnU9aS5kb2Muc2VsLGNsZWFyVGltZW91dChvLmRldGVjdGluZ1NlbGVjdEFsbCkseW8mJnhvPj05JiZ0KCksRG8pe01sKGUpO3ZhciBoPWZ1bmN0aW9uKCl7T2wod2luZG93LFwibW91c2V1cFwiLGgpLHNldFRpbWVvdXQobiwyMCl9O05sKHdpbmRvdyxcIm1vdXNldXBcIixoKX1lbHNlIHNldFRpbWVvdXQobiw1MCl9fSxyZWFkT25seUNoYW5nZWQ6ZnVuY3Rpb24oZSl7ZXx8dGhpcy5yZXNldCgpfSxzZXRVbmVkaXRhYmxlOkVpLG5lZWRzQ29udGVudEF0dHJpYnV0ZTohMX0scmUucHJvdG90eXBlKSxvZS5wcm90b3R5cGU9UGkoe2luaXQ6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtpZihyLnNvbWV0aGluZ1NlbGVjdGVkKCkpRm89ci5nZXRTZWxlY3Rpb25zKCksXCJjdXRcIj09ZS50eXBlJiZyLnJlcGxhY2VTZWxlY3Rpb24oXCJcIixudWxsLFwiY3V0XCIpO2Vsc2V7aWYoIXIub3B0aW9ucy5saW5lV2lzZUNvcHlDdXQpcmV0dXJuO3ZhciB0PXRlKHIpO0ZvPXQudGV4dCxcImN1dFwiPT1lLnR5cGUmJnIub3BlcmF0aW9uKGZ1bmN0aW9uKCl7ci5zZXRTZWxlY3Rpb25zKHQucmFuZ2VzLDAsSWwpLHIucmVwbGFjZVNlbGVjdGlvbihcIlwiLG51bGwsXCJjdXRcIil9KX1pZihlLmNsaXBib2FyZERhdGEmJiFNbyllLnByZXZlbnREZWZhdWx0KCksZS5jbGlwYm9hcmREYXRhLmNsZWFyRGF0YSgpLGUuY2xpcGJvYXJkRGF0YS5zZXREYXRhKFwidGV4dC9wbGFpblwiLEZvLmpvaW4oXCJcXG5cIikpO2Vsc2V7dmFyIG49aWUoKSxpPW4uZmlyc3RDaGlsZDtyLmRpc3BsYXkubGluZVNwYWNlLmluc2VydEJlZm9yZShuLHIuZGlzcGxheS5saW5lU3BhY2UuZmlyc3RDaGlsZCksaS52YWx1ZT1Gby5qb2luKFwiXFxuXCIpO3ZhciBvPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7X2woaSksc2V0VGltZW91dChmdW5jdGlvbigpe3IuZGlzcGxheS5saW5lU3BhY2UucmVtb3ZlQ2hpbGQobiksby5mb2N1cygpfSw1MCl9fXZhciBuPXRoaXMscj1uLmNtLGk9bi5kaXY9ZS5saW5lRGl2O25lKGkpLE5sKGksXCJwYXN0ZVwiLGZ1bmN0aW9uKGUpe0ooZSxyKX0pLE5sKGksXCJjb21wb3NpdGlvbnN0YXJ0XCIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kYXRhO2lmKG4uY29tcG9zaW5nPXtzZWw6ci5kb2Muc2VsLGRhdGE6dCxzdGFydERhdGE6dH0sdCl7dmFyIGk9ci5kb2Muc2VsLnByaW1hcnkoKSxvPXIuZ2V0TGluZShpLmhlYWQubGluZSksbD1vLmluZGV4T2YodCxNYXRoLm1heCgwLGkuaGVhZC5jaC10Lmxlbmd0aCkpO2w+LTEmJmw8PWkuaGVhZC5jaCYmKG4uY29tcG9zaW5nLnNlbD1wZShQbyhpLmhlYWQubGluZSxsKSxQbyhpLmhlYWQubGluZSxsK3QubGVuZ3RoKSkpfX0pLE5sKGksXCJjb21wb3NpdGlvbnVwZGF0ZVwiLGZ1bmN0aW9uKGUpe24uY29tcG9zaW5nLmRhdGE9ZS5kYXRhfSksTmwoaSxcImNvbXBvc2l0aW9uZW5kXCIsZnVuY3Rpb24oZSl7dmFyIHQ9bi5jb21wb3Npbmc7dCYmKGUuZGF0YT09dC5zdGFydERhdGF8fC9cXHUyMDBiLy50ZXN0KGUuZGF0YSl8fCh0LmRhdGE9ZS5kYXRhKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5oYW5kbGVkfHxuLmFwcGx5Q29tcG9zaXRpb24odCksbi5jb21wb3Npbmc9PXQmJihuLmNvbXBvc2luZz1udWxsKX0sNTApKX0pLE5sKGksXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oKXtuLmZvcmNlQ29tcG9zaXRpb25FbmQoKX0pLE5sKGksXCJpbnB1dFwiLGZ1bmN0aW9uKCl7bi5jb21wb3Npbmd8fChaKHIpfHwhbi5wb2xsQ29udGVudCgpKSYmTnQobi5jbSxmdW5jdGlvbigpe0V0KHIpfSl9KSxObChpLFwiY29weVwiLHQpLE5sKGksXCJjdXRcIix0KX0scHJlcGFyZVNlbGVjdGlvbjpmdW5jdGlvbigpe3ZhciBlPUVlKHRoaXMuY20sITEpO3JldHVybiBlLmZvY3VzPXRoaXMuY20uc3RhdGUuZm9jdXNlZCxlfSxzaG93U2VsZWN0aW9uOmZ1bmN0aW9uKGUpe2UmJnRoaXMuY20uZGlzcGxheS52aWV3Lmxlbmd0aCYmKGUuZm9jdXMmJnRoaXMuc2hvd1ByaW1hcnlTZWxlY3Rpb24oKSx0aGlzLnNob3dNdWx0aXBsZVNlbGVjdGlvbnMoZSkpfSxzaG93UHJpbWFyeVNlbGVjdGlvbjpmdW5jdGlvbigpe3ZhciBlPXdpbmRvdy5nZXRTZWxlY3Rpb24oKSx0PXRoaXMuY20uZG9jLnNlbC5wcmltYXJ5KCksbj1zZSh0aGlzLmNtLGUuYW5jaG9yTm9kZSxlLmFuY2hvck9mZnNldCkscj1zZSh0aGlzLmNtLGUuZm9jdXNOb2RlLGUuZm9jdXNPZmZzZXQpO2lmKCFufHxuLmJhZHx8IXJ8fHIuYmFkfHwwIT16byhYKG4sciksdC5mcm9tKCkpfHwwIT16byhLKG4sciksdC50bygpKSl7dmFyIGk9bGUodGhpcy5jbSx0LmZyb20oKSksbz1sZSh0aGlzLmNtLHQudG8oKSk7aWYoaXx8byl7dmFyIGw9dGhpcy5jbS5kaXNwbGF5LnZpZXcsYT1lLnJhbmdlQ291bnQmJmUuZ2V0UmFuZ2VBdCgwKTtpZihpKXtpZighbyl7dmFyIHM9bFtsLmxlbmd0aC0xXS5tZWFzdXJlLGM9cy5tYXBzP3MubWFwc1tzLm1hcHMubGVuZ3RoLTFdOnMubWFwO289e25vZGU6Y1tjLmxlbmd0aC0xXSxvZmZzZXQ6Y1tjLmxlbmd0aC0yXS1jW2MubGVuZ3RoLTNdfX19ZWxzZSBpPXtub2RlOmxbMF0ubWVhc3VyZS5tYXBbMl0sb2Zmc2V0OjB9O3RyeXt2YXIgdT1qbChpLm5vZGUsaS5vZmZzZXQsby5vZmZzZXQsby5ub2RlKX1jYXRjaChkKXt9dSYmKGUucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZSh1KSxhJiZudWxsPT1lLmFuY2hvck5vZGU/ZS5hZGRSYW5nZShhKTptbyYmdGhpcy5zdGFydEdyYWNlUGVyaW9kKCkpLHRoaXMucmVtZW1iZXJTZWxlY3Rpb24oKX19fSxzdGFydEdyYWNlUGVyaW9kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztjbGVhclRpbWVvdXQodGhpcy5ncmFjZVBlcmlvZCksdGhpcy5ncmFjZVBlcmlvZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5ncmFjZVBlcmlvZD0hMSxlLnNlbGVjdGlvbkNoYW5nZWQoKSYmZS5jbS5vcGVyYXRpb24oZnVuY3Rpb24oKXtlLmNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQ9ITB9KX0sMjApfSxzaG93TXVsdGlwbGVTZWxlY3Rpb25zOmZ1bmN0aW9uKGUpe3FpKHRoaXMuY20uZGlzcGxheS5jdXJzb3JEaXYsZS5jdXJzb3JzKSxxaSh0aGlzLmNtLmRpc3BsYXkuc2VsZWN0aW9uRGl2LGUuc2VsZWN0aW9uKX0scmVtZW1iZXJTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT13aW5kb3cuZ2V0U2VsZWN0aW9uKCk7dGhpcy5sYXN0QW5jaG9yTm9kZT1lLmFuY2hvck5vZGUsdGhpcy5sYXN0QW5jaG9yT2Zmc2V0PWUuYW5jaG9yT2Zmc2V0LHRoaXMubGFzdEZvY3VzTm9kZT1lLmZvY3VzTm9kZSx0aGlzLmxhc3RGb2N1c09mZnNldD1lLmZvY3VzT2Zmc2V0fSxzZWxlY3Rpb25JbkVkaXRvcjpmdW5jdGlvbigpe3ZhciBlPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtpZighZS5yYW5nZUNvdW50KXJldHVybiExO3ZhciB0PWUuZ2V0UmFuZ2VBdCgwKS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtyZXR1cm4gJGwodGhpcy5kaXYsdCl9LGZvY3VzOmZ1bmN0aW9uKCl7XCJub2N1cnNvclwiIT10aGlzLmNtLm9wdGlvbnMucmVhZE9ubHkmJnRoaXMuZGl2LmZvY3VzKCl9LGJsdXI6ZnVuY3Rpb24oKXt0aGlzLmRpdi5ibHVyKCl9LGdldEZpZWxkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2fSxzdXBwb3J0c1RvdWNoOmZ1bmN0aW9uKCl7cmV0dXJuITB9LHJlY2VpdmVkRm9jdXM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dC5jbS5zdGF0ZS5mb2N1c2VkJiYodC5wb2xsU2VsZWN0aW9uKCksdC5wb2xsaW5nLnNldCh0LmNtLm9wdGlvbnMucG9sbEludGVydmFsLGUpKX12YXIgdD10aGlzO3RoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKT90aGlzLnBvbGxTZWxlY3Rpb24oKTpOdCh0aGlzLmNtLGZ1bmN0aW9uKCl7dC5jbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkPSEwfSksdGhpcy5wb2xsaW5nLnNldCh0aGlzLmNtLm9wdGlvbnMucG9sbEludGVydmFsLGUpfSxzZWxlY3Rpb25DaGFuZ2VkOmZ1bmN0aW9uKCl7dmFyIGU9d2luZG93LmdldFNlbGVjdGlvbigpO3JldHVybiBlLmFuY2hvck5vZGUhPXRoaXMubGFzdEFuY2hvck5vZGV8fGUuYW5jaG9yT2Zmc2V0IT10aGlzLmxhc3RBbmNob3JPZmZzZXR8fGUuZm9jdXNOb2RlIT10aGlzLmxhc3RGb2N1c05vZGV8fGUuZm9jdXNPZmZzZXQhPXRoaXMubGFzdEZvY3VzT2Zmc2V0fSxwb2xsU2VsZWN0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY29tcG9zaW5nJiYhdGhpcy5ncmFjZVBlcmlvZCYmdGhpcy5zZWxlY3Rpb25DaGFuZ2VkKCkpe3ZhciBlPXdpbmRvdy5nZXRTZWxlY3Rpb24oKSx0PXRoaXMuY207dGhpcy5yZW1lbWJlclNlbGVjdGlvbigpO3ZhciBuPXNlKHQsZS5hbmNob3JOb2RlLGUuYW5jaG9yT2Zmc2V0KSxyPXNlKHQsZS5mb2N1c05vZGUsZS5mb2N1c09mZnNldCk7biYmciYmTnQodCxmdW5jdGlvbigpe01lKHQuZG9jLHBlKG4sciksSWwpLChuLmJhZHx8ci5iYWQpJiYodC5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkPSEwKX0pfX0scG9sbENvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNtLHQ9ZS5kaXNwbGF5LG49ZS5kb2Muc2VsLnByaW1hcnkoKSxyPW4uZnJvbSgpLGk9bi50bygpO2lmKHIubGluZTx0LnZpZXdGcm9tfHxpLmxpbmU+dC52aWV3VG8tMSlyZXR1cm4hMTt2YXIgbztpZihyLmxpbmU9PXQudmlld0Zyb218fDA9PShvPXp0KGUsci5saW5lKSkpdmFyIGw9ZWkodC52aWV3WzBdLmxpbmUpLGE9dC52aWV3WzBdLm5vZGU7ZWxzZSB2YXIgbD1laSh0LnZpZXdbb10ubGluZSksYT10LnZpZXdbby0xXS5ub2RlLm5leHRTaWJsaW5nO3ZhciBzPXp0KGUsaS5saW5lKTtpZihzPT10LnZpZXcubGVuZ3RoLTEpdmFyIGM9dC52aWV3VG8tMSx1PXQubGluZURpdi5sYXN0Q2hpbGQ7ZWxzZSB2YXIgYz1laSh0LnZpZXdbcysxXS5saW5lKS0xLHU9dC52aWV3W3MrMV0ubm9kZS5wcmV2aW91c1NpYmxpbmc7Zm9yKHZhciBkPWUuZG9jLnNwbGl0TGluZXModWUoZSxhLHUsbCxjKSksaD1acihlLmRvYyxQbyhsLDApLFBvKGMsWXIoZS5kb2MsYykudGV4dC5sZW5ndGgpKTtkLmxlbmd0aD4xJiZoLmxlbmd0aD4xOylpZihXaShkKT09V2koaCkpZC5wb3AoKSxoLnBvcCgpLGMtLTtlbHNle2lmKGRbMF0hPWhbMF0pYnJlYWs7ZC5zaGlmdCgpLGguc2hpZnQoKSxsKyt9Zm9yKHZhciBmPTAscD0wLG09ZFswXSxnPWhbMF0sdj1NYXRoLm1pbihtLmxlbmd0aCxnLmxlbmd0aCk7dj5mJiZtLmNoYXJDb2RlQXQoZik9PWcuY2hhckNvZGVBdChmKTspKytmO2Zvcih2YXIgeT1XaShkKSx4PVdpKGgpLGI9TWF0aC5taW4oeS5sZW5ndGgtKDE9PWQubGVuZ3RoP2Y6MCkseC5sZW5ndGgtKDE9PWgubGVuZ3RoP2Y6MCkpO2I+cCYmeS5jaGFyQ29kZUF0KHkubGVuZ3RoLXAtMSk9PXguY2hhckNvZGVBdCh4Lmxlbmd0aC1wLTEpOykrK3A7ZFtkLmxlbmd0aC0xXT15LnNsaWNlKDAseS5sZW5ndGgtcCksZFswXT1kWzBdLnNsaWNlKGYpO3ZhciB3PVBvKGwsZiksaz1QbyhjLGgubGVuZ3RoP1dpKGgpLmxlbmd0aC1wOjApO3JldHVybiBkLmxlbmd0aD4xfHxkWzBdfHx6byh3LGspPyhXbihlLmRvYyxkLHcsayxcIitpbnB1dFwiKSwhMCk6dm9pZCAwfSxlbnN1cmVQb2xsZWQ6ZnVuY3Rpb24oKXt0aGlzLmZvcmNlQ29tcG9zaXRpb25FbmQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmZvcmNlQ29tcG9zaXRpb25FbmQoKX0sZm9yY2VDb21wb3NpdGlvbkVuZDpmdW5jdGlvbigpe3RoaXMuY29tcG9zaW5nJiYhdGhpcy5jb21wb3NpbmcuaGFuZGxlZCYmKHRoaXMuYXBwbHlDb21wb3NpdGlvbih0aGlzLmNvbXBvc2luZyksdGhpcy5jb21wb3NpbmcuaGFuZGxlZD0hMCx0aGlzLmRpdi5ibHVyKCksdGhpcy5kaXYuZm9jdXMoKSl9LGFwcGx5Q29tcG9zaXRpb246ZnVuY3Rpb24oZSl7Wih0aGlzLmNtKT9BdCh0aGlzLmNtLEV0KSh0aGlzLmNtKTplLmRhdGEmJmUuZGF0YSE9ZS5zdGFydERhdGEmJkF0KHRoaXMuY20sUSkodGhpcy5jbSxlLmRhdGEsMCxlLnNlbCl9LHNldFVuZWRpdGFibGU6ZnVuY3Rpb24oZSl7ZS5jb250ZW50RWRpdGFibGU9XCJmYWxzZVwifSxvbktleVByZXNzOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxaKHRoaXMuY20pfHxBdCh0aGlzLmNtLFEpKHRoaXMuY20sU3RyaW5nLmZyb21DaGFyQ29kZShudWxsPT1lLmNoYXJDb2RlP2Uua2V5Q29kZTplLmNoYXJDb2RlKSwwKX0scmVhZE9ubHlDaGFuZ2VkOmZ1bmN0aW9uKGUpe3RoaXMuZGl2LmNvbnRlbnRFZGl0YWJsZT1TdHJpbmcoXCJub2N1cnNvclwiIT1lKX0sb25Db250ZXh0TWVudTpFaSxyZXNldFBvc2l0aW9uOkVpLG5lZWRzQ29udGVudEF0dHJpYnV0ZTohMH0sb2UucHJvdG90eXBlKSxlLmlucHV0U3R5bGVzPXt0ZXh0YXJlYTpyZSxjb250ZW50ZWRpdGFibGU6b2V9LGRlLnByb3RvdHlwZT17cHJpbWFyeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJhbmdlc1t0aGlzLnByaW1JbmRleF19LGVxdWFsczpmdW5jdGlvbihlKXtpZihlPT10aGlzKXJldHVybiEwO2lmKGUucHJpbUluZGV4IT10aGlzLnByaW1JbmRleHx8ZS5yYW5nZXMubGVuZ3RoIT10aGlzLnJhbmdlcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciB0PTA7dDx0aGlzLnJhbmdlcy5sZW5ndGg7dCsrKXt2YXIgbj10aGlzLnJhbmdlc1t0XSxyPWUucmFuZ2VzW3RdO2lmKDAhPXpvKG4uYW5jaG9yLHIuYW5jaG9yKXx8MCE9em8obi5oZWFkLHIuaGVhZCkpcmV0dXJuITF9cmV0dXJuITB9LGRlZXBDb3B5OmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PHRoaXMucmFuZ2VzLmxlbmd0aDt0KyspZVt0XT1uZXcgaGUoVih0aGlzLnJhbmdlc1t0XS5hbmNob3IpLFYodGhpcy5yYW5nZXNbdF0uaGVhZCkpO3JldHVybiBuZXcgZGUoZSx0aGlzLnByaW1JbmRleCl9LHNvbWV0aGluZ1NlbGVjdGVkOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLnJhbmdlcy5sZW5ndGg7ZSsrKWlmKCF0aGlzLnJhbmdlc1tlXS5lbXB0eSgpKXJldHVybiEwO3JldHVybiExfSxjb250YWluczpmdW5jdGlvbihlLHQpe3R8fCh0PWUpO2Zvcih2YXIgbj0wO248dGhpcy5yYW5nZXMubGVuZ3RoO24rKyl7dmFyIHI9dGhpcy5yYW5nZXNbbl07aWYoem8odCxyLmZyb20oKSk+PTAmJnpvKGUsci50bygpKTw9MClyZXR1cm4gbn1yZXR1cm4tMX19LGhlLnByb3RvdHlwZT17ZnJvbTpmdW5jdGlvbigpe3JldHVybiBYKHRoaXMuYW5jaG9yLHRoaXMuaGVhZCl9LHRvOmZ1bmN0aW9uKCl7cmV0dXJuIEsodGhpcy5hbmNob3IsdGhpcy5oZWFkKX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWFkLmxpbmU9PXRoaXMuYW5jaG9yLmxpbmUmJnRoaXMuaGVhZC5jaD09dGhpcy5hbmNob3IuY2h9fTt2YXIgUm8sQm8sX28sam89e2xlZnQ6MCxyaWdodDowLHRvcDowLGJvdHRvbTowfSxxbz1udWxsLEdvPTAsVW89MCwkbz0wLFZvPW51bGw7eW8/Vm89LS41Mzptbz9Wbz0xNTprbz9Wbz0tLjc6U28mJihWbz0tMS8zKTt2YXIgS289ZnVuY3Rpb24oZSl7dmFyIHQ9ZS53aGVlbERlbHRhWCxuPWUud2hlZWxEZWx0YVk7cmV0dXJuIG51bGw9PXQmJmUuZGV0YWlsJiZlLmF4aXM9PWUuSE9SSVpPTlRBTF9BWElTJiYodD1lLmRldGFpbCksbnVsbD09biYmZS5kZXRhaWwmJmUuYXhpcz09ZS5WRVJUSUNBTF9BWElTP249ZS5kZXRhaWw6bnVsbD09biYmKG49ZS53aGVlbERlbHRhKSx7eDp0LHk6bn19O2Uud2hlZWxFdmVudFBpeGVscz1mdW5jdGlvbihlKXt2YXIgdD1LbyhlKTtyZXR1cm4gdC54Kj1Wbyx0LnkqPVZvLHR9O3ZhciBYbz1uZXcgQWksWW89bnVsbCxabz1lLmNoYW5nZUVuZD1mdW5jdGlvbihlKXtyZXR1cm4gZS50ZXh0P1BvKGUuZnJvbS5saW5lK2UudGV4dC5sZW5ndGgtMSxXaShlLnRleHQpLmxlbmd0aCsoMT09ZS50ZXh0Lmxlbmd0aD9lLmZyb20uY2g6MCkpOmUudG99O2UucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjplLGZvY3VzOmZ1bmN0aW9uKCl7d2luZG93LmZvY3VzKCksdGhpcy5kaXNwbGF5LmlucHV0LmZvY3VzKCl9LHNldE9wdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMub3B0aW9ucyxyPW5bZV07KG5bZV0hPXR8fFwibW9kZVwiPT1lKSYmKG5bZV09dCxKby5oYXNPd25Qcm9wZXJ0eShlKSYmQXQodGhpcyxKb1tlXSkodGhpcyx0LHIpKX0sZ2V0T3B0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnNbZV19LGdldERvYzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvY30sYWRkS2V5TWFwOmZ1bmN0aW9uKGUsdCl7dGhpcy5zdGF0ZS5rZXlNYXBzW3Q/XCJwdXNoXCI6XCJ1bnNoaWZ0XCJdKCRuKGUpKX0scmVtb3ZlS2V5TWFwOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnN0YXRlLmtleU1hcHMsbj0wO248dC5sZW5ndGg7KytuKWlmKHRbbl09PWV8fHRbbl0ubmFtZT09ZSlyZXR1cm4gdC5zcGxpY2UobiwxKSwhMH0sYWRkT3ZlcmxheTpPdChmdW5jdGlvbih0LG4pe3ZhciByPXQudG9rZW4/dDplLmdldE1vZGUodGhpcy5vcHRpb25zLHQpO2lmKHIuc3RhcnRTdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJPdmVybGF5cyBtYXkgbm90IGJlIHN0YXRlZnVsLlwiKTt0aGlzLnN0YXRlLm92ZXJsYXlzLnB1c2goe21vZGU6cixtb2RlU3BlYzp0LG9wYXF1ZTpuJiZuLm9wYXF1ZX0pLHRoaXMuc3RhdGUubW9kZUdlbisrLEV0KHRoaXMpfSkscmVtb3ZlT3ZlcmxheTpPdChmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5zdGF0ZS5vdmVybGF5cyxuPTA7bjx0Lmxlbmd0aDsrK24pe3ZhciByPXRbbl0ubW9kZVNwZWM7aWYocj09ZXx8XCJzdHJpbmdcIj09dHlwZW9mIGUmJnIubmFtZT09ZSlyZXR1cm4gdC5zcGxpY2UobiwxKSx0aGlzLnN0YXRlLm1vZGVHZW4rKyx2b2lkIEV0KHRoaXMpfX0pLGluZGVudExpbmU6T3QoZnVuY3Rpb24oZSx0LG4pe1wic3RyaW5nXCIhPXR5cGVvZiB0JiZcIm51bWJlclwiIT10eXBlb2YgdCYmKHQ9bnVsbD09dD90aGlzLm9wdGlvbnMuc21hcnRJbmRlbnQ/XCJzbWFydFwiOlwicHJldlwiOnQ/XCJhZGRcIjpcInN1YnRyYWN0XCIpLHllKHRoaXMuZG9jLGUpJiZSbih0aGlzLGUsdCxuKX0pLGluZGVudFNlbGVjdGlvbjpPdChmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5kb2Muc2VsLnJhbmdlcyxuPS0xLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGk9dFtyXTtpZihpLmVtcHR5KCkpaS5oZWFkLmxpbmU+biYmKFJuKHRoaXMsaS5oZWFkLmxpbmUsZSwhMCksbj1pLmhlYWQubGluZSxyPT10aGlzLmRvYy5zZWwucHJpbUluZGV4JiZ6bih0aGlzKSk7ZWxzZXt2YXIgbz1pLmZyb20oKSxsPWkudG8oKSxhPU1hdGgubWF4KG4sby5saW5lKTtuPU1hdGgubWluKHRoaXMubGFzdExpbmUoKSxsLmxpbmUtKGwuY2g/MDoxKSkrMTtmb3IodmFyIHM9YTtuPnM7KytzKVJuKHRoaXMscyxlKTt2YXIgYz10aGlzLmRvYy5zZWwucmFuZ2VzOzA9PW8uY2gmJnQubGVuZ3RoPT1jLmxlbmd0aCYmY1tyXS5mcm9tKCkuY2g+MCYmQ2UodGhpcy5kb2MscixuZXcgaGUobyxjW3JdLnRvKCkpLElsKX19fSksZ2V0VG9rZW5BdDpmdW5jdGlvbihlLHQpe3JldHVybiBXcih0aGlzLGUsdCl9LGdldExpbmVUb2tlbnM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gV3IodGhpcyxQbyhlKSx0LCEwKX0sZ2V0VG9rZW5UeXBlQXQ6ZnVuY3Rpb24oZSl7ZT1nZSh0aGlzLmRvYyxlKTt2YXIgdCxuPUVyKHRoaXMsWXIodGhpcy5kb2MsZS5saW5lKSkscj0wLGk9KG4ubGVuZ3RoLTEpLzIsbz1lLmNoO2lmKDA9PW8pdD1uWzJdO2Vsc2UgZm9yKDs7KXt2YXIgbD1yK2k+PjE7aWYoKGw/blsyKmwtMV06MCk+PW8paT1sO2Vsc2V7aWYoIShuWzIqbCsxXTxvKSl7dD1uWzIqbCsyXTticmVha31yPWwrMX19dmFyIGE9dD90LmluZGV4T2YoXCJjbS1vdmVybGF5IFwiKTotMTtyZXR1cm4gMD5hP3Q6MD09YT9udWxsOnQuc2xpY2UoMCxhLTEpfSxnZXRNb2RlQXQ6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5kb2MubW9kZTtyZXR1cm4gbi5pbm5lck1vZGU/ZS5pbm5lck1vZGUobix0aGlzLmdldFRva2VuQXQodCkuc3RhdGUpLm1vZGU6bn0sZ2V0SGVscGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZ2V0SGVscGVycyhlLHQpWzBdfSxnZXRIZWxwZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIG49W107aWYoIW9sLmhhc093blByb3BlcnR5KHQpKXJldHVybiBuO3ZhciByPW9sW3RdLGk9dGhpcy5nZXRNb2RlQXQoZSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGlbdF0pcltpW3RdXSYmbi5wdXNoKHJbaVt0XV0pO2Vsc2UgaWYoaVt0XSlmb3IodmFyIG89MDtvPGlbdF0ubGVuZ3RoO28rKyl7dmFyIGw9cltpW3RdW29dXTtsJiZuLnB1c2gobCl9ZWxzZSBpLmhlbHBlclR5cGUmJnJbaS5oZWxwZXJUeXBlXT9uLnB1c2gocltpLmhlbHBlclR5cGVdKTpyW2kubmFtZV0mJm4ucHVzaChyW2kubmFtZV0pO2Zvcih2YXIgbz0wO288ci5fZ2xvYmFsLmxlbmd0aDtvKyspe3ZhciBhPXIuX2dsb2JhbFtvXTthLnByZWQoaSx0aGlzKSYmLTE9PUhpKG4sYS52YWwpJiZuLnB1c2goYS52YWwpfXJldHVybiBufSxnZXRTdGF0ZUFmdGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5kb2M7cmV0dXJuIGU9bWUobixudWxsPT1lP24uZmlyc3Qrbi5zaXplLTE6ZSksX2UodGhpcyxlKzEsdCl9LGN1cnNvckNvb3JkczpmdW5jdGlvbihlLHQpe3ZhciBuLHI9dGhpcy5kb2Muc2VsLnByaW1hcnkoKTtyZXR1cm4gbj1udWxsPT1lP3IuaGVhZDpcIm9iamVjdFwiPT10eXBlb2YgZT9nZSh0aGlzLmRvYyxlKTplP3IuZnJvbSgpOnIudG8oKSxodCh0aGlzLG4sdHx8XCJwYWdlXCIpfSxjaGFyQ29vcmRzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGR0KHRoaXMsZ2UodGhpcy5kb2MsZSksdHx8XCJwYWdlXCIpfSxjb29yZHNDaGFyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9dXQodGhpcyxlLHR8fFwicGFnZVwiKSxtdCh0aGlzLGUubGVmdCxlLnRvcCl9LGxpbmVBdEhlaWdodDpmdW5jdGlvbihlLHQpe3JldHVybiBlPXV0KHRoaXMse3RvcDplLGxlZnQ6MH0sdHx8XCJwYWdlXCIpLnRvcCx0aSh0aGlzLmRvYyxlK3RoaXMuZGlzcGxheS52aWV3T2Zmc2V0KX0saGVpZ2h0QXRMaW5lOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0hMTtpZihcIm51bWJlclwiPT10eXBlb2YgZSl7dmFyIGk9dGhpcy5kb2MuZmlyc3QrdGhpcy5kb2Muc2l6ZS0xO2U8dGhpcy5kb2MuZmlyc3Q/ZT10aGlzLmRvYy5maXJzdDplPmkmJihlPWkscj0hMCksbj1Zcih0aGlzLmRvYyxlKX1lbHNlIG49ZTtyZXR1cm4gY3QodGhpcyxuLHt0b3A6MCxsZWZ0OjB9LHR8fFwicGFnZVwiKS50b3ArKHI/dGhpcy5kb2MuaGVpZ2h0LW5pKG4pOjApfSxkZWZhdWx0VGV4dEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB2dCh0aGlzLmRpc3BsYXkpfSxkZWZhdWx0Q2hhcldpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHl0KHRoaXMuZGlzcGxheSl9LHNldEd1dHRlck1hcmtlcjpPdChmdW5jdGlvbihlLHQsbil7cmV0dXJuIEJuKHRoaXMuZG9jLGUsXCJndXR0ZXJcIixmdW5jdGlvbihlKXt2YXIgcj1lLmd1dHRlck1hcmtlcnN8fChlLmd1dHRlck1hcmtlcnM9e30pO3JldHVybiByW3RdPW4sIW4mJlJpKHIpJiYoZS5ndXR0ZXJNYXJrZXJzPW51bGwpLCEwfSl9KSxjbGVhckd1dHRlcjpPdChmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5kb2Mscj1uLmZpcnN0O24uaXRlcihmdW5jdGlvbihuKXtuLmd1dHRlck1hcmtlcnMmJm4uZ3V0dGVyTWFya2Vyc1tlXSYmKG4uZ3V0dGVyTWFya2Vyc1tlXT1udWxsLEl0KHQscixcImd1dHRlclwiKSxSaShuLmd1dHRlck1hcmtlcnMpJiYobi5ndXR0ZXJNYXJrZXJzPW51bGwpKSwrK3J9KX0pLGxpbmVJbmZvOmZ1bmN0aW9uKGUpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXtpZigheWUodGhpcy5kb2MsZSkpcmV0dXJuIG51bGw7dmFyIHQ9ZTtpZihlPVlyKHRoaXMuZG9jLGUpLCFlKXJldHVybiBudWxsfWVsc2V7dmFyIHQ9ZWkoZSk7aWYobnVsbD09dClyZXR1cm4gbnVsbH1yZXR1cm57bGluZTp0LGhhbmRsZTplLHRleHQ6ZS50ZXh0LGd1dHRlck1hcmtlcnM6ZS5ndXR0ZXJNYXJrZXJzLHRleHRDbGFzczplLnRleHRDbGFzcyxiZ0NsYXNzOmUuYmdDbGFzcyx3cmFwQ2xhc3M6ZS53cmFwQ2xhc3Msd2lkZ2V0czplLndpZGdldHN9fSxnZXRWaWV3cG9ydDpmdW5jdGlvbigpe3JldHVybntmcm9tOnRoaXMuZGlzcGxheS52aWV3RnJvbSx0bzp0aGlzLmRpc3BsYXkudmlld1RvfX0sYWRkV2lkZ2V0OmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG89dGhpcy5kaXNwbGF5O2U9aHQodGhpcyxnZSh0aGlzLmRvYyxlKSk7dmFyIGw9ZS5ib3R0b20sYT1lLmxlZnQ7aWYodC5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdC5zZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIsXCJ0cnVlXCIpLHRoaXMuZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKHQpLG8uc2l6ZXIuYXBwZW5kQ2hpbGQodCksXCJvdmVyXCI9PXIpbD1lLnRvcDtlbHNlIGlmKFwiYWJvdmVcIj09cnx8XCJuZWFyXCI9PXIpe3ZhciBzPU1hdGgubWF4KG8ud3JhcHBlci5jbGllbnRIZWlnaHQsdGhpcy5kb2MuaGVpZ2h0KSxjPU1hdGgubWF4KG8uc2l6ZXIuY2xpZW50V2lkdGgsby5saW5lU3BhY2UuY2xpZW50V2lkdGgpOyhcImFib3ZlXCI9PXJ8fGUuYm90dG9tK3Qub2Zmc2V0SGVpZ2h0PnMpJiZlLnRvcD50Lm9mZnNldEhlaWdodD9sPWUudG9wLXQub2Zmc2V0SGVpZ2h0OmUuYm90dG9tK3Qub2Zmc2V0SGVpZ2h0PD1zJiYobD1lLmJvdHRvbSksYSt0Lm9mZnNldFdpZHRoPmMmJihhPWMtdC5vZmZzZXRXaWR0aCl9dC5zdHlsZS50b3A9bCtcInB4XCIsdC5zdHlsZS5sZWZ0PXQuc3R5bGUucmlnaHQ9XCJcIixcInJpZ2h0XCI9PWk/KGE9by5zaXplci5jbGllbnRXaWR0aC10Lm9mZnNldFdpZHRoLHQuc3R5bGUucmlnaHQ9XCIwcHhcIik6KFwibGVmdFwiPT1pP2E9MDpcIm1pZGRsZVwiPT1pJiYoYT0oby5zaXplci5jbGllbnRXaWR0aC10Lm9mZnNldFdpZHRoKS8yKSx0LnN0eWxlLmxlZnQ9YStcInB4XCIpLG4mJkVuKHRoaXMsYSxsLGErdC5vZmZzZXRXaWR0aCxsK3Qub2Zmc2V0SGVpZ2h0KX0sdHJpZ2dlck9uS2V5RG93bjpPdChkbiksdHJpZ2dlck9uS2V5UHJlc3M6T3QocG4pLHRyaWdnZXJPbktleVVwOmZuLGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGUpe3JldHVybiBzbC5oYXNPd25Qcm9wZXJ0eShlKT9zbFtlXS5jYWxsKG51bGwsdGhpcyk6dm9pZCAwfSx0cmlnZ2VyRWxlY3RyaWM6T3QoZnVuY3Rpb24oZSl7ZWUodGhpcyxlKX0pLGZpbmRQb3NIOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPTE7MD50JiYoaT0tMSx0PS10KTtmb3IodmFyIG89MCxsPWdlKHRoaXMuZG9jLGUpO3Q+byYmKGw9am4odGhpcy5kb2MsbCxpLG4sciksIWwuaGl0U2lkZSk7KytvKTtyZXR1cm4gbH0sbW92ZUg6T3QoZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHIpe3JldHVybiBuLmRpc3BsYXkuc2hpZnR8fG4uZG9jLmV4dGVuZHx8ci5lbXB0eSgpP2puKG4uZG9jLHIuaGVhZCxlLHQsbi5vcHRpb25zLnJ0bE1vdmVWaXN1YWxseSk6MD5lP3IuZnJvbSgpOnIudG8oKX0semwpfSksZGVsZXRlSDpPdChmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZG9jLnNlbCxyPXRoaXMuZG9jO24uc29tZXRoaW5nU2VsZWN0ZWQoKT9yLnJlcGxhY2VTZWxlY3Rpb24oXCJcIixudWxsLFwiK2RlbGV0ZVwiKTpfbih0aGlzLGZ1bmN0aW9uKG4pe3ZhciBpPWpuKHIsbi5oZWFkLGUsdCwhMSk7cmV0dXJuIDA+ZT97ZnJvbTppLHRvOm4uaGVhZH06e2Zyb206bi5oZWFkLHRvOml9fSl9KSxmaW5kUG9zVjpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT0xLG89cjswPnQmJihpPS0xLHQ9LXQpO2Zvcih2YXIgbD0wLGE9Z2UodGhpcy5kb2MsZSk7dD5sOysrbCl7dmFyIHM9aHQodGhpcyxhLFwiZGl2XCIpO2lmKG51bGw9PW8/bz1zLmxlZnQ6cy5sZWZ0PW8sYT1xbih0aGlzLHMsaSxuKSxhLmhpdFNpZGUpYnJlYWt9cmV0dXJuIGF9LG1vdmVWOk90KGZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxyPXRoaXMuZG9jLGk9W10sbz0hbi5kaXNwbGF5LnNoaWZ0JiYhci5leHRlbmQmJnIuc2VsLnNvbWV0aGluZ1NlbGVjdGVkKCk7aWYoci5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24obCl7aWYobylyZXR1cm4gMD5lP2wuZnJvbSgpOmwudG8oKTt2YXIgYT1odChuLGwuaGVhZCxcImRpdlwiKTtudWxsIT1sLmdvYWxDb2x1bW4mJihhLmxlZnQ9bC5nb2FsQ29sdW1uKSxpLnB1c2goYS5sZWZ0KTt2YXIgcz1xbihuLGEsZSx0KTtyZXR1cm5cInBhZ2VcIj09dCYmbD09ci5zZWwucHJpbWFyeSgpJiZQbihuLG51bGwsZHQobixzLFwiZGl2XCIpLnRvcC1hLnRvcCksc30semwpLGkubGVuZ3RoKWZvcih2YXIgbD0wO2w8ci5zZWwucmFuZ2VzLmxlbmd0aDtsKyspci5zZWwucmFuZ2VzW2xdLmdvYWxDb2x1bW49aVtsXX0pLGZpbmRXb3JkQXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kb2Msbj1Zcih0LGUubGluZSkudGV4dCxyPWUuY2gsaT1lLmNoO2lmKG4pe3ZhciBvPXRoaXMuZ2V0SGVscGVyKGUsXCJ3b3JkQ2hhcnNcIik7KGUueFJlbDwwfHxpPT1uLmxlbmd0aCkmJnI/LS1yOisraTtmb3IodmFyIGw9bi5jaGFyQXQociksYT1GaShsLG8pP2Z1bmN0aW9uKGUpe3JldHVybiBGaShlLG8pfTovXFxzLy50ZXN0KGwpP2Z1bmN0aW9uKGUpe3JldHVybi9cXHMvLnRlc3QoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiEvXFxzLy50ZXN0KGUpJiYhRmkoZSl9O3I+MCYmYShuLmNoYXJBdChyLTEpKTspLS1yO2Zvcig7aTxuLmxlbmd0aCYmYShuLmNoYXJBdChpKSk7KSsraX1yZXR1cm4gbmV3IGhlKFBvKGUubGluZSxyKSxQbyhlLmxpbmUsaSkpfSx0b2dnbGVPdmVyd3JpdGU6ZnVuY3Rpb24oZSl7KG51bGw9PWV8fGUhPXRoaXMuc3RhdGUub3ZlcndyaXRlKSYmKCh0aGlzLnN0YXRlLm92ZXJ3cml0ZT0hdGhpcy5zdGF0ZS5vdmVyd3JpdGUpP1lsKHRoaXMuZGlzcGxheS5jdXJzb3JEaXYsXCJDb2RlTWlycm9yLW92ZXJ3cml0ZVwiKTpYbCh0aGlzLmRpc3BsYXkuY3Vyc29yRGl2LFwiQ29kZU1pcnJvci1vdmVyd3JpdGVcIiksV2wodGhpcyxcIm92ZXJ3cml0ZVRvZ2dsZVwiLHRoaXMsdGhpcy5zdGF0ZS5vdmVyd3JpdGUpKX0saGFzRm9jdXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCk9PUdpKCl9LHNjcm9sbFRvOk90KGZ1bmN0aW9uKGUsdCl7KG51bGwhPWV8fG51bGwhPXQpJiZGbih0aGlzKSxudWxsIT1lJiYodGhpcy5jdXJPcC5zY3JvbGxMZWZ0PWUpLG51bGwhPXQmJih0aGlzLmN1ck9wLnNjcm9sbFRvcD10KX0pLGdldFNjcm9sbEluZm86ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRpc3BsYXkuc2Nyb2xsZXI7cmV0dXJue2xlZnQ6ZS5zY3JvbGxMZWZ0LHRvcDplLnNjcm9sbFRvcCxoZWlnaHQ6ZS5zY3JvbGxIZWlnaHQtVWUodGhpcyktdGhpcy5kaXNwbGF5LmJhckhlaWdodCx3aWR0aDplLnNjcm9sbFdpZHRoLVVlKHRoaXMpLXRoaXMuZGlzcGxheS5iYXJXaWR0aCxjbGllbnRIZWlnaHQ6VmUodGhpcyksY2xpZW50V2lkdGg6JGUodGhpcyl9fSxzY3JvbGxJbnRvVmlldzpPdChmdW5jdGlvbihlLHQpe2lmKG51bGw9PWU/KGU9e2Zyb206dGhpcy5kb2Muc2VsLnByaW1hcnkoKS5oZWFkLHRvOm51bGx9LG51bGw9PXQmJih0PXRoaXMub3B0aW9ucy5jdXJzb3JTY3JvbGxNYXJnaW4pKTpcIm51bWJlclwiPT10eXBlb2YgZT9lPXtcbmZyb206UG8oZSwwKSx0bzpudWxsfTpudWxsPT1lLmZyb20mJihlPXtmcm9tOmUsdG86bnVsbH0pLGUudG98fChlLnRvPWUuZnJvbSksZS5tYXJnaW49dHx8MCxudWxsIT1lLmZyb20ubGluZSlGbih0aGlzKSx0aGlzLmN1ck9wLnNjcm9sbFRvUG9zPWU7ZWxzZXt2YXIgbj1Jbih0aGlzLE1hdGgubWluKGUuZnJvbS5sZWZ0LGUudG8ubGVmdCksTWF0aC5taW4oZS5mcm9tLnRvcCxlLnRvLnRvcCktZS5tYXJnaW4sTWF0aC5tYXgoZS5mcm9tLnJpZ2h0LGUudG8ucmlnaHQpLE1hdGgubWF4KGUuZnJvbS5ib3R0b20sZS50by5ib3R0b20pK2UubWFyZ2luKTt0aGlzLnNjcm9sbFRvKG4uc2Nyb2xsTGVmdCxuLnNjcm9sbFRvcCl9fSksc2V0U2l6ZTpPdChmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGV8fC9eXFxkKyQvLnRlc3QoU3RyaW5nKGUpKT9lK1wicHhcIjplfXZhciByPXRoaXM7bnVsbCE9ZSYmKHIuZGlzcGxheS53cmFwcGVyLnN0eWxlLndpZHRoPW4oZSkpLG51bGwhPXQmJihyLmRpc3BsYXkud3JhcHBlci5zdHlsZS5oZWlnaHQ9bih0KSksci5vcHRpb25zLmxpbmVXcmFwcGluZyYmb3QodGhpcyk7dmFyIGk9ci5kaXNwbGF5LnZpZXdGcm9tO3IuZG9jLml0ZXIoaSxyLmRpc3BsYXkudmlld1RvLGZ1bmN0aW9uKGUpe2lmKGUud2lkZ2V0cylmb3IodmFyIHQ9MDt0PGUud2lkZ2V0cy5sZW5ndGg7dCsrKWlmKGUud2lkZ2V0c1t0XS5ub0hTY3JvbGwpe0l0KHIsaSxcIndpZGdldFwiKTticmVha30rK2l9KSxyLmN1ck9wLmZvcmNlVXBkYXRlPSEwLFdsKHIsXCJyZWZyZXNoXCIsdGhpcyl9KSxvcGVyYXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuIE50KHRoaXMsZSl9LHJlZnJlc2g6T3QoZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodDtFdCh0aGlzKSx0aGlzLmN1ck9wLmZvcmNlVXBkYXRlPSEwLGx0KHRoaXMpLHRoaXMuc2Nyb2xsVG8odGhpcy5kb2Muc2Nyb2xsTGVmdCx0aGlzLmRvYy5zY3JvbGxUb3ApLHUodGhpcyksKG51bGw9PWV8fE1hdGguYWJzKGUtdnQodGhpcy5kaXNwbGF5KSk+LjUpJiZsKHRoaXMpLFdsKHRoaXMsXCJyZWZyZXNoXCIsdGhpcyl9KSxzd2FwRG9jOk90KGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZG9jO3JldHVybiB0LmNtPW51bGwsWHIodGhpcyxlKSxsdCh0aGlzKSx0aGlzLmRpc3BsYXkuaW5wdXQucmVzZXQoKSx0aGlzLnNjcm9sbFRvKGUuc2Nyb2xsTGVmdCxlLnNjcm9sbFRvcCksdGhpcy5jdXJPcC5mb3JjZVNjcm9sbD0hMCxDaSh0aGlzLFwic3dhcERvY1wiLHRoaXMsdCksdH0pLGdldElucHV0RmllbGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCl9LGdldFdyYXBwZXJFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheS53cmFwcGVyfSxnZXRTY3JvbGxlckVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LnNjcm9sbGVyfSxnZXRHdXR0ZXJFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheS5ndXR0ZXJzfX0sTmkoZSk7dmFyIFFvPWUuZGVmYXVsdHM9e30sSm89ZS5vcHRpb25IYW5kbGVycz17fSxlbD1lLkluaXQ9e3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuXCJDb2RlTWlycm9yLkluaXRcIn19O0duKFwidmFsdWVcIixcIlwiLGZ1bmN0aW9uKGUsdCl7ZS5zZXRWYWx1ZSh0KX0sITApLEduKFwibW9kZVwiLG51bGwsZnVuY3Rpb24oZSx0KXtlLmRvYy5tb2RlT3B0aW9uPXQsbihlKX0sITApLEduKFwiaW5kZW50VW5pdFwiLDIsbiwhMCksR24oXCJpbmRlbnRXaXRoVGFic1wiLCExKSxHbihcInNtYXJ0SW5kZW50XCIsITApLEduKFwidGFiU2l6ZVwiLDQsZnVuY3Rpb24oZSl7cihlKSxsdChlKSxFdChlKX0sITApLEduKFwibGluZVNlcGFyYXRvclwiLG51bGwsZnVuY3Rpb24oZSx0KXtpZihlLmRvYy5saW5lU2VwPXQsdCl7dmFyIG49W10scj1lLmRvYy5maXJzdDtlLmRvYy5pdGVyKGZ1bmN0aW9uKGUpe2Zvcih2YXIgaT0wOzspe3ZhciBvPWUudGV4dC5pbmRleE9mKHQsaSk7aWYoLTE9PW8pYnJlYWs7aT1vK3QubGVuZ3RoLG4ucHVzaChQbyhyLG8pKX1yKyt9KTtmb3IodmFyIGk9bi5sZW5ndGgtMTtpPj0wO2ktLSlXbihlLmRvYyx0LG5baV0sUG8obltpXS5saW5lLG5baV0uY2grdC5sZW5ndGgpKX19KSxHbihcInNwZWNpYWxDaGFyc1wiLC9bXFx0XFx1MDAwMC1cXHUwMDE5XFx1MDBhZFxcdTIwMGItXFx1MjAwZlxcdTIwMjhcXHUyMDI5XFx1ZmVmZl0vZyxmdW5jdGlvbih0LG4scil7dC5zdGF0ZS5zcGVjaWFsQ2hhcnM9bmV3IFJlZ0V4cChuLnNvdXJjZSsobi50ZXN0KFwiXHRcIik/XCJcIjpcInxcdFwiKSxcImdcIiksciE9ZS5Jbml0JiZ0LnJlZnJlc2goKX0pLEduKFwic3BlY2lhbENoYXJQbGFjZWhvbGRlclwiLEZyLGZ1bmN0aW9uKGUpe2UucmVmcmVzaCgpfSwhMCksR24oXCJlbGVjdHJpY0NoYXJzXCIsITApLEduKFwiaW5wdXRTdHlsZVwiLE5vP1wiY29udGVudGVkaXRhYmxlXCI6XCJ0ZXh0YXJlYVwiLGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiaW5wdXRTdHlsZSBjYW4gbm90ICh5ZXQpIGJlIGNoYW5nZWQgaW4gYSBydW5uaW5nIGVkaXRvclwiKX0sITApLEduKFwicnRsTW92ZVZpc3VhbGx5XCIsIU9vKSxHbihcIndob2xlTGluZVVwZGF0ZUJlZm9yZVwiLCEwKSxHbihcInRoZW1lXCIsXCJkZWZhdWx0XCIsZnVuY3Rpb24oZSl7YShlKSxzKGUpfSwhMCksR24oXCJrZXlNYXBcIixcImRlZmF1bHRcIixmdW5jdGlvbih0LG4scil7dmFyIGk9JG4obiksbz1yIT1lLkluaXQmJiRuKHIpO28mJm8uZGV0YWNoJiZvLmRldGFjaCh0LGkpLGkuYXR0YWNoJiZpLmF0dGFjaCh0LG98fG51bGwpfSksR24oXCJleHRyYUtleXNcIixudWxsKSxHbihcImxpbmVXcmFwcGluZ1wiLCExLGksITApLEduKFwiZ3V0dGVyc1wiLFtdLGZ1bmN0aW9uKGUpe2YoZS5vcHRpb25zKSxzKGUpfSwhMCksR24oXCJmaXhlZEd1dHRlclwiLCEwLGZ1bmN0aW9uKGUsdCl7ZS5kaXNwbGF5Lmd1dHRlcnMuc3R5bGUubGVmdD10P1MoZS5kaXNwbGF5KStcInB4XCI6XCIwXCIsZS5yZWZyZXNoKCl9LCEwKSxHbihcImNvdmVyR3V0dGVyTmV4dFRvU2Nyb2xsYmFyXCIsITEsZnVuY3Rpb24oZSl7eShlKX0sITApLEduKFwic2Nyb2xsYmFyU3R5bGVcIixcIm5hdGl2ZVwiLGZ1bmN0aW9uKGUpe3YoZSkseShlKSxlLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxUb3AoZS5kb2Muc2Nyb2xsVG9wKSxlLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxMZWZ0KGUuZG9jLnNjcm9sbExlZnQpfSwhMCksR24oXCJsaW5lTnVtYmVyc1wiLCExLGZ1bmN0aW9uKGUpe2YoZS5vcHRpb25zKSxzKGUpfSwhMCksR24oXCJmaXJzdExpbmVOdW1iZXJcIiwxLHMsITApLEduKFwibGluZU51bWJlckZvcm1hdHRlclwiLGZ1bmN0aW9uKGUpe3JldHVybiBlfSxzLCEwKSxHbihcInNob3dDdXJzb3JXaGVuU2VsZWN0aW5nXCIsITEsRGUsITApLEduKFwicmVzZXRTZWxlY3Rpb25PbkNvbnRleHRNZW51XCIsITApLEduKFwibGluZVdpc2VDb3B5Q3V0XCIsITApLEduKFwicmVhZE9ubHlcIiwhMSxmdW5jdGlvbihlLHQpe1wibm9jdXJzb3JcIj09dD8odm4oZSksZS5kaXNwbGF5LmlucHV0LmJsdXIoKSxlLmRpc3BsYXkuZGlzYWJsZWQ9ITApOmUuZGlzcGxheS5kaXNhYmxlZD0hMSxlLmRpc3BsYXkuaW5wdXQucmVhZE9ubHlDaGFuZ2VkKHQpfSksR24oXCJkaXNhYmxlSW5wdXRcIiwhMSxmdW5jdGlvbihlLHQpe3R8fGUuZGlzcGxheS5pbnB1dC5yZXNldCgpfSwhMCksR24oXCJkcmFnRHJvcFwiLCEwLGp0KSxHbihcImFsbG93RHJvcEZpbGVUeXBlc1wiLG51bGwpLEduKFwiY3Vyc29yQmxpbmtSYXRlXCIsNTMwKSxHbihcImN1cnNvclNjcm9sbE1hcmdpblwiLDApLEduKFwiY3Vyc29ySGVpZ2h0XCIsMSxEZSwhMCksR24oXCJzaW5nbGVDdXJzb3JIZWlnaHRQZXJMaW5lXCIsITAsRGUsITApLEduKFwid29ya1RpbWVcIiwxMDApLEduKFwid29ya0RlbGF5XCIsMTAwKSxHbihcImZsYXR0ZW5TcGFuc1wiLCEwLHIsITApLEduKFwiYWRkTW9kZUNsYXNzXCIsITEsciwhMCksR24oXCJwb2xsSW50ZXJ2YWxcIiwxMDApLEduKFwidW5kb0RlcHRoXCIsMjAwLGZ1bmN0aW9uKGUsdCl7ZS5kb2MuaGlzdG9yeS51bmRvRGVwdGg9dH0pLEduKFwiaGlzdG9yeUV2ZW50RGVsYXlcIiwxMjUwKSxHbihcInZpZXdwb3J0TWFyZ2luXCIsMTAsZnVuY3Rpb24oZSl7ZS5yZWZyZXNoKCl9LCEwKSxHbihcIm1heEhpZ2hsaWdodExlbmd0aFwiLDFlNCxyLCEwKSxHbihcIm1vdmVJbnB1dFdpdGhDdXJzb3JcIiwhMCxmdW5jdGlvbihlLHQpe3R8fGUuZGlzcGxheS5pbnB1dC5yZXNldFBvc2l0aW9uKCl9KSxHbihcInRhYmluZGV4XCIsbnVsbCxmdW5jdGlvbihlLHQpe2UuZGlzcGxheS5pbnB1dC5nZXRGaWVsZCgpLnRhYkluZGV4PXR8fFwiXCJ9KSxHbihcImF1dG9mb2N1c1wiLG51bGwpO3ZhciB0bD1lLm1vZGVzPXt9LG5sPWUubWltZU1vZGVzPXt9O2UuZGVmaW5lTW9kZT1mdW5jdGlvbih0LG4pe2UuZGVmYXVsdHMubW9kZXx8XCJudWxsXCI9PXR8fChlLmRlZmF1bHRzLm1vZGU9dCksYXJndW1lbnRzLmxlbmd0aD4yJiYobi5kZXBlbmRlbmNpZXM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpKSx0bFt0XT1ufSxlLmRlZmluZU1JTUU9ZnVuY3Rpb24oZSx0KXtubFtlXT10fSxlLnJlc29sdmVNb2RlPWZ1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0JiZubC5oYXNPd25Qcm9wZXJ0eSh0KSl0PW5sW3RdO2Vsc2UgaWYodCYmXCJzdHJpbmdcIj09dHlwZW9mIHQubmFtZSYmbmwuaGFzT3duUHJvcGVydHkodC5uYW1lKSl7dmFyIG49bmxbdC5uYW1lXTtcInN0cmluZ1wiPT10eXBlb2YgbiYmKG49e25hbWU6bn0pLHQ9SWkobix0KSx0Lm5hbWU9bi5uYW1lfWVsc2UgaWYoXCJzdHJpbmdcIj09dHlwZW9mIHQmJi9eW1xcd1xcLV0rXFwvW1xcd1xcLV0rXFwreG1sJC8udGVzdCh0KSlyZXR1cm4gZS5yZXNvbHZlTW9kZShcImFwcGxpY2F0aW9uL3htbFwiKTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD97bmFtZTp0fTp0fHx7bmFtZTpcIm51bGxcIn19LGUuZ2V0TW9kZT1mdW5jdGlvbih0LG4pe3ZhciBuPWUucmVzb2x2ZU1vZGUobikscj10bFtuLm5hbWVdO2lmKCFyKXJldHVybiBlLmdldE1vZGUodCxcInRleHQvcGxhaW5cIik7dmFyIGk9cih0LG4pO2lmKHJsLmhhc093blByb3BlcnR5KG4ubmFtZSkpe3ZhciBvPXJsW24ubmFtZV07Zm9yKHZhciBsIGluIG8pby5oYXNPd25Qcm9wZXJ0eShsKSYmKGkuaGFzT3duUHJvcGVydHkobCkmJihpW1wiX1wiK2xdPWlbbF0pLGlbbF09b1tsXSl9aWYoaS5uYW1lPW4ubmFtZSxuLmhlbHBlclR5cGUmJihpLmhlbHBlclR5cGU9bi5oZWxwZXJUeXBlKSxuLm1vZGVQcm9wcylmb3IodmFyIGwgaW4gbi5tb2RlUHJvcHMpaVtsXT1uLm1vZGVQcm9wc1tsXTtyZXR1cm4gaX0sZS5kZWZpbmVNb2RlKFwibnVsbFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Rva2VuOmZ1bmN0aW9uKGUpe2Uuc2tpcFRvRW5kKCl9fX0pLGUuZGVmaW5lTUlNRShcInRleHQvcGxhaW5cIixcIm51bGxcIik7dmFyIHJsPWUubW9kZUV4dGVuc2lvbnM9e307ZS5leHRlbmRNb2RlPWZ1bmN0aW9uKGUsdCl7dmFyIG49cmwuaGFzT3duUHJvcGVydHkoZSk/cmxbZV06cmxbZV09e307UGkodCxuKX0sZS5kZWZpbmVFeHRlbnNpb249ZnVuY3Rpb24odCxuKXtlLnByb3RvdHlwZVt0XT1ufSxlLmRlZmluZURvY0V4dGVuc2lvbj1mdW5jdGlvbihlLHQpe2tsLnByb3RvdHlwZVtlXT10fSxlLmRlZmluZU9wdGlvbj1Hbjt2YXIgaWw9W107ZS5kZWZpbmVJbml0SG9vaz1mdW5jdGlvbihlKXtpbC5wdXNoKGUpfTt2YXIgb2w9ZS5oZWxwZXJzPXt9O2UucmVnaXN0ZXJIZWxwZXI9ZnVuY3Rpb24odCxuLHIpe29sLmhhc093blByb3BlcnR5KHQpfHwob2xbdF09ZVt0XT17X2dsb2JhbDpbXX0pLG9sW3RdW25dPXJ9LGUucmVnaXN0ZXJHbG9iYWxIZWxwZXI9ZnVuY3Rpb24odCxuLHIsaSl7ZS5yZWdpc3RlckhlbHBlcih0LG4saSksb2xbdF0uX2dsb2JhbC5wdXNoKHtwcmVkOnIsdmFsOml9KX07dmFyIGxsPWUuY29weVN0YXRlPWZ1bmN0aW9uKGUsdCl7aWYodD09PSEwKXJldHVybiB0O2lmKGUuY29weVN0YXRlKXJldHVybiBlLmNvcHlTdGF0ZSh0KTt2YXIgbj17fTtmb3IodmFyIHIgaW4gdCl7dmFyIGk9dFtyXTtpIGluc3RhbmNlb2YgQXJyYXkmJihpPWkuY29uY2F0KFtdKSksbltyXT1pfXJldHVybiBufSxhbD1lLnN0YXJ0U3RhdGU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlLnN0YXJ0U3RhdGU/ZS5zdGFydFN0YXRlKHQsbik6ITB9O2UuaW5uZXJNb2RlPWZ1bmN0aW9uKGUsdCl7Zm9yKDtlLmlubmVyTW9kZTspe3ZhciBuPWUuaW5uZXJNb2RlKHQpO2lmKCFufHxuLm1vZGU9PWUpYnJlYWs7dD1uLnN0YXRlLGU9bi5tb2RlfXJldHVybiBufHx7bW9kZTplLHN0YXRlOnR9fTt2YXIgc2w9ZS5jb21tYW5kcz17c2VsZWN0QWxsOmZ1bmN0aW9uKGUpe2Uuc2V0U2VsZWN0aW9uKFBvKGUuZmlyc3RMaW5lKCksMCksUG8oZS5sYXN0TGluZSgpKSxJbCl9LHNpbmdsZVNlbGVjdGlvbjpmdW5jdGlvbihlKXtlLnNldFNlbGVjdGlvbihlLmdldEN1cnNvcihcImFuY2hvclwiKSxlLmdldEN1cnNvcihcImhlYWRcIiksSWwpfSxraWxsTGluZTpmdW5jdGlvbihlKXtfbihlLGZ1bmN0aW9uKHQpe2lmKHQuZW1wdHkoKSl7dmFyIG49WXIoZS5kb2MsdC5oZWFkLmxpbmUpLnRleHQubGVuZ3RoO3JldHVybiB0LmhlYWQuY2g9PW4mJnQuaGVhZC5saW5lPGUubGFzdExpbmUoKT97ZnJvbTp0LmhlYWQsdG86UG8odC5oZWFkLmxpbmUrMSwwKX06e2Zyb206dC5oZWFkLHRvOlBvKHQuaGVhZC5saW5lLG4pfX1yZXR1cm57ZnJvbTp0LmZyb20oKSx0bzp0LnRvKCl9fSl9LGRlbGV0ZUxpbmU6ZnVuY3Rpb24oZSl7X24oZSxmdW5jdGlvbih0KXtyZXR1cm57ZnJvbTpQbyh0LmZyb20oKS5saW5lLDApLHRvOmdlKGUuZG9jLFBvKHQudG8oKS5saW5lKzEsMCkpfX0pfSxkZWxMaW5lTGVmdDpmdW5jdGlvbihlKXtfbihlLGZ1bmN0aW9uKGUpe3JldHVybntmcm9tOlBvKGUuZnJvbSgpLmxpbmUsMCksdG86ZS5mcm9tKCl9fSl9LGRlbFdyYXBwZWRMaW5lTGVmdDpmdW5jdGlvbihlKXtfbihlLGZ1bmN0aW9uKHQpe3ZhciBuPWUuY2hhckNvb3Jkcyh0LmhlYWQsXCJkaXZcIikudG9wKzUscj1lLmNvb3Jkc0NoYXIoe2xlZnQ6MCx0b3A6bn0sXCJkaXZcIik7cmV0dXJue2Zyb206cix0bzp0LmZyb20oKX19KX0sZGVsV3JhcHBlZExpbmVSaWdodDpmdW5jdGlvbihlKXtfbihlLGZ1bmN0aW9uKHQpe3ZhciBuPWUuY2hhckNvb3Jkcyh0LmhlYWQsXCJkaXZcIikudG9wKzUscj1lLmNvb3Jkc0NoYXIoe2xlZnQ6ZS5kaXNwbGF5LmxpbmVEaXYub2Zmc2V0V2lkdGgrMTAwLHRvcDpufSxcImRpdlwiKTtyZXR1cm57ZnJvbTp0LmZyb20oKSx0bzpyfX0pfSx1bmRvOmZ1bmN0aW9uKGUpe2UudW5kbygpfSxyZWRvOmZ1bmN0aW9uKGUpe2UucmVkbygpfSx1bmRvU2VsZWN0aW9uOmZ1bmN0aW9uKGUpe2UudW5kb1NlbGVjdGlvbigpfSxyZWRvU2VsZWN0aW9uOmZ1bmN0aW9uKGUpe2UucmVkb1NlbGVjdGlvbigpfSxnb0RvY1N0YXJ0OmZ1bmN0aW9uKGUpe2UuZXh0ZW5kU2VsZWN0aW9uKFBvKGUuZmlyc3RMaW5lKCksMCkpfSxnb0RvY0VuZDpmdW5jdGlvbihlKXtlLmV4dGVuZFNlbGVjdGlvbihQbyhlLmxhc3RMaW5lKCkpKX0sZ29MaW5lU3RhcnQ6ZnVuY3Rpb24oZSl7ZS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24odCl7cmV0dXJuIGlvKGUsdC5oZWFkLmxpbmUpfSx7b3JpZ2luOlwiK21vdmVcIixiaWFzOjF9KX0sZ29MaW5lU3RhcnRTbWFydDpmdW5jdGlvbihlKXtlLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbih0KXtyZXR1cm4gbG8oZSx0LmhlYWQpfSx7b3JpZ2luOlwiK21vdmVcIixiaWFzOjF9KX0sZ29MaW5lRW5kOmZ1bmN0aW9uKGUpe2UuZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHQpe3JldHVybiBvbyhlLHQuaGVhZC5saW5lKX0se29yaWdpbjpcIittb3ZlXCIsYmlhczotMX0pfSxnb0xpbmVSaWdodDpmdW5jdGlvbihlKXtlLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbih0KXt2YXIgbj1lLmNoYXJDb29yZHModC5oZWFkLFwiZGl2XCIpLnRvcCs1O3JldHVybiBlLmNvb3Jkc0NoYXIoe2xlZnQ6ZS5kaXNwbGF5LmxpbmVEaXYub2Zmc2V0V2lkdGgrMTAwLHRvcDpufSxcImRpdlwiKX0semwpfSxnb0xpbmVMZWZ0OmZ1bmN0aW9uKGUpe2UuZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHQpe3ZhciBuPWUuY2hhckNvb3Jkcyh0LmhlYWQsXCJkaXZcIikudG9wKzU7cmV0dXJuIGUuY29vcmRzQ2hhcih7bGVmdDowLHRvcDpufSxcImRpdlwiKX0semwpfSxnb0xpbmVMZWZ0U21hcnQ6ZnVuY3Rpb24oZSl7ZS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24odCl7dmFyIG49ZS5jaGFyQ29vcmRzKHQuaGVhZCxcImRpdlwiKS50b3ArNSxyPWUuY29vcmRzQ2hhcih7bGVmdDowLHRvcDpufSxcImRpdlwiKTtyZXR1cm4gci5jaDxlLmdldExpbmUoci5saW5lKS5zZWFyY2goL1xcUy8pP2xvKGUsdC5oZWFkKTpyfSx6bCl9LGdvTGluZVVwOmZ1bmN0aW9uKGUpe2UubW92ZVYoLTEsXCJsaW5lXCIpfSxnb0xpbmVEb3duOmZ1bmN0aW9uKGUpe2UubW92ZVYoMSxcImxpbmVcIil9LGdvUGFnZVVwOmZ1bmN0aW9uKGUpe2UubW92ZVYoLTEsXCJwYWdlXCIpfSxnb1BhZ2VEb3duOmZ1bmN0aW9uKGUpe2UubW92ZVYoMSxcInBhZ2VcIil9LGdvQ2hhckxlZnQ6ZnVuY3Rpb24oZSl7ZS5tb3ZlSCgtMSxcImNoYXJcIil9LGdvQ2hhclJpZ2h0OmZ1bmN0aW9uKGUpe2UubW92ZUgoMSxcImNoYXJcIil9LGdvQ29sdW1uTGVmdDpmdW5jdGlvbihlKXtlLm1vdmVIKC0xLFwiY29sdW1uXCIpfSxnb0NvbHVtblJpZ2h0OmZ1bmN0aW9uKGUpe2UubW92ZUgoMSxcImNvbHVtblwiKX0sZ29Xb3JkTGVmdDpmdW5jdGlvbihlKXtlLm1vdmVIKC0xLFwid29yZFwiKX0sZ29Hcm91cFJpZ2h0OmZ1bmN0aW9uKGUpe2UubW92ZUgoMSxcImdyb3VwXCIpfSxnb0dyb3VwTGVmdDpmdW5jdGlvbihlKXtlLm1vdmVIKC0xLFwiZ3JvdXBcIil9LGdvV29yZFJpZ2h0OmZ1bmN0aW9uKGUpe2UubW92ZUgoMSxcIndvcmRcIil9LGRlbENoYXJCZWZvcmU6ZnVuY3Rpb24oZSl7ZS5kZWxldGVIKC0xLFwiY2hhclwiKX0sZGVsQ2hhckFmdGVyOmZ1bmN0aW9uKGUpe2UuZGVsZXRlSCgxLFwiY2hhclwiKX0sZGVsV29yZEJlZm9yZTpmdW5jdGlvbihlKXtlLmRlbGV0ZUgoLTEsXCJ3b3JkXCIpfSxkZWxXb3JkQWZ0ZXI6ZnVuY3Rpb24oZSl7ZS5kZWxldGVIKDEsXCJ3b3JkXCIpfSxkZWxHcm91cEJlZm9yZTpmdW5jdGlvbihlKXtlLmRlbGV0ZUgoLTEsXCJncm91cFwiKX0sZGVsR3JvdXBBZnRlcjpmdW5jdGlvbihlKXtlLmRlbGV0ZUgoMSxcImdyb3VwXCIpfSxpbmRlbnRBdXRvOmZ1bmN0aW9uKGUpe2UuaW5kZW50U2VsZWN0aW9uKFwic21hcnRcIil9LGluZGVudE1vcmU6ZnVuY3Rpb24oZSl7ZS5pbmRlbnRTZWxlY3Rpb24oXCJhZGRcIil9LGluZGVudExlc3M6ZnVuY3Rpb24oZSl7ZS5pbmRlbnRTZWxlY3Rpb24oXCJzdWJ0cmFjdFwiKX0saW5zZXJ0VGFiOmZ1bmN0aW9uKGUpe2UucmVwbGFjZVNlbGVjdGlvbihcIlx0XCIpfSxpbnNlcnRTb2Z0VGFiOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPWUubGlzdFNlbGVjdGlvbnMoKSxyPWUub3B0aW9ucy50YWJTaXplLGk9MDtpPG4ubGVuZ3RoO2krKyl7dmFyIG89bltpXS5mcm9tKCksbD1GbChlLmdldExpbmUoby5saW5lKSxvLmNoLHIpO3QucHVzaChuZXcgQXJyYXkoci1sJXIrMSkuam9pbihcIiBcIikpfWUucmVwbGFjZVNlbGVjdGlvbnModCl9LGRlZmF1bHRUYWI6ZnVuY3Rpb24oZSl7ZS5zb21ldGhpbmdTZWxlY3RlZCgpP2UuaW5kZW50U2VsZWN0aW9uKFwiYWRkXCIpOmUuZXhlY0NvbW1hbmQoXCJpbnNlcnRUYWJcIil9LHRyYW5zcG9zZUNoYXJzOmZ1bmN0aW9uKGUpe050KGUsZnVuY3Rpb24oKXtmb3IodmFyIHQ9ZS5saXN0U2VsZWN0aW9ucygpLG49W10scj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgaT10W3JdLmhlYWQsbz1ZcihlLmRvYyxpLmxpbmUpLnRleHQ7aWYobylpZihpLmNoPT1vLmxlbmd0aCYmKGk9bmV3IFBvKGkubGluZSxpLmNoLTEpKSxpLmNoPjApaT1uZXcgUG8oaS5saW5lLGkuY2grMSksZS5yZXBsYWNlUmFuZ2Uoby5jaGFyQXQoaS5jaC0xKStvLmNoYXJBdChpLmNoLTIpLFBvKGkubGluZSxpLmNoLTIpLGksXCIrdHJhbnNwb3NlXCIpO2Vsc2UgaWYoaS5saW5lPmUuZG9jLmZpcnN0KXt2YXIgbD1ZcihlLmRvYyxpLmxpbmUtMSkudGV4dDtsJiZlLnJlcGxhY2VSYW5nZShvLmNoYXJBdCgwKStlLmRvYy5saW5lU2VwYXJhdG9yKCkrbC5jaGFyQXQobC5sZW5ndGgtMSksUG8oaS5saW5lLTEsbC5sZW5ndGgtMSksUG8oaS5saW5lLDEpLFwiK3RyYW5zcG9zZVwiKX1uLnB1c2gobmV3IGhlKGksaSkpfWUuc2V0U2VsZWN0aW9ucyhuKX0pfSxuZXdsaW5lQW5kSW5kZW50OmZ1bmN0aW9uKGUpe050KGUsZnVuY3Rpb24oKXtmb3IodmFyIHQ9ZS5saXN0U2VsZWN0aW9ucygpLmxlbmd0aCxuPTA7dD5uO24rKyl7dmFyIHI9ZS5saXN0U2VsZWN0aW9ucygpW25dO2UucmVwbGFjZVJhbmdlKGUuZG9jLmxpbmVTZXBhcmF0b3IoKSxyLmFuY2hvcixyLmhlYWQsXCIraW5wdXRcIiksZS5pbmRlbnRMaW5lKHIuZnJvbSgpLmxpbmUrMSxudWxsLCEwKX16bihlKX0pfSx0b2dnbGVPdmVyd3JpdGU6ZnVuY3Rpb24oZSl7ZS50b2dnbGVPdmVyd3JpdGUoKX19LGNsPWUua2V5TWFwPXt9O2NsLmJhc2ljPXtMZWZ0OlwiZ29DaGFyTGVmdFwiLFJpZ2h0OlwiZ29DaGFyUmlnaHRcIixVcDpcImdvTGluZVVwXCIsRG93bjpcImdvTGluZURvd25cIixFbmQ6XCJnb0xpbmVFbmRcIixIb21lOlwiZ29MaW5lU3RhcnRTbWFydFwiLFBhZ2VVcDpcImdvUGFnZVVwXCIsUGFnZURvd246XCJnb1BhZ2VEb3duXCIsRGVsZXRlOlwiZGVsQ2hhckFmdGVyXCIsQmFja3NwYWNlOlwiZGVsQ2hhckJlZm9yZVwiLFwiU2hpZnQtQmFja3NwYWNlXCI6XCJkZWxDaGFyQmVmb3JlXCIsVGFiOlwiZGVmYXVsdFRhYlwiLFwiU2hpZnQtVGFiXCI6XCJpbmRlbnRBdXRvXCIsRW50ZXI6XCJuZXdsaW5lQW5kSW5kZW50XCIsSW5zZXJ0OlwidG9nZ2xlT3ZlcndyaXRlXCIsRXNjOlwic2luZ2xlU2VsZWN0aW9uXCJ9LGNsLnBjRGVmYXVsdD17XCJDdHJsLUFcIjpcInNlbGVjdEFsbFwiLFwiQ3RybC1EXCI6XCJkZWxldGVMaW5lXCIsXCJDdHJsLVpcIjpcInVuZG9cIixcIlNoaWZ0LUN0cmwtWlwiOlwicmVkb1wiLFwiQ3RybC1ZXCI6XCJyZWRvXCIsXCJDdHJsLUhvbWVcIjpcImdvRG9jU3RhcnRcIixcIkN0cmwtRW5kXCI6XCJnb0RvY0VuZFwiLFwiQ3RybC1VcFwiOlwiZ29MaW5lVXBcIixcIkN0cmwtRG93blwiOlwiZ29MaW5lRG93blwiLFwiQ3RybC1MZWZ0XCI6XCJnb0dyb3VwTGVmdFwiLFwiQ3RybC1SaWdodFwiOlwiZ29Hcm91cFJpZ2h0XCIsXCJBbHQtTGVmdFwiOlwiZ29MaW5lU3RhcnRcIixcIkFsdC1SaWdodFwiOlwiZ29MaW5lRW5kXCIsXCJDdHJsLUJhY2tzcGFjZVwiOlwiZGVsR3JvdXBCZWZvcmVcIixcIkN0cmwtRGVsZXRlXCI6XCJkZWxHcm91cEFmdGVyXCIsXCJDdHJsLVNcIjpcInNhdmVcIixcIkN0cmwtRlwiOlwiZmluZFwiLFwiQ3RybC1HXCI6XCJmaW5kTmV4dFwiLFwiU2hpZnQtQ3RybC1HXCI6XCJmaW5kUHJldlwiLFwiU2hpZnQtQ3RybC1GXCI6XCJyZXBsYWNlXCIsXCJTaGlmdC1DdHJsLVJcIjpcInJlcGxhY2VBbGxcIixcIkN0cmwtW1wiOlwiaW5kZW50TGVzc1wiLFwiQ3RybC1dXCI6XCJpbmRlbnRNb3JlXCIsXCJDdHJsLVVcIjpcInVuZG9TZWxlY3Rpb25cIixcIlNoaWZ0LUN0cmwtVVwiOlwicmVkb1NlbGVjdGlvblwiLFwiQWx0LVVcIjpcInJlZG9TZWxlY3Rpb25cIixmYWxsdGhyb3VnaDpcImJhc2ljXCJ9LGNsLmVtYWNzeT17XCJDdHJsLUZcIjpcImdvQ2hhclJpZ2h0XCIsXCJDdHJsLUJcIjpcImdvQ2hhckxlZnRcIixcIkN0cmwtUFwiOlwiZ29MaW5lVXBcIixcIkN0cmwtTlwiOlwiZ29MaW5lRG93blwiLFwiQWx0LUZcIjpcImdvV29yZFJpZ2h0XCIsXCJBbHQtQlwiOlwiZ29Xb3JkTGVmdFwiLFwiQ3RybC1BXCI6XCJnb0xpbmVTdGFydFwiLFwiQ3RybC1FXCI6XCJnb0xpbmVFbmRcIixcIkN0cmwtVlwiOlwiZ29QYWdlRG93blwiLFwiU2hpZnQtQ3RybC1WXCI6XCJnb1BhZ2VVcFwiLFwiQ3RybC1EXCI6XCJkZWxDaGFyQWZ0ZXJcIixcIkN0cmwtSFwiOlwiZGVsQ2hhckJlZm9yZVwiLFwiQWx0LURcIjpcImRlbFdvcmRBZnRlclwiLFwiQWx0LUJhY2tzcGFjZVwiOlwiZGVsV29yZEJlZm9yZVwiLFwiQ3RybC1LXCI6XCJraWxsTGluZVwiLFwiQ3RybC1UXCI6XCJ0cmFuc3Bvc2VDaGFyc1wifSxjbC5tYWNEZWZhdWx0PXtcIkNtZC1BXCI6XCJzZWxlY3RBbGxcIixcIkNtZC1EXCI6XCJkZWxldGVMaW5lXCIsXCJDbWQtWlwiOlwidW5kb1wiLFwiU2hpZnQtQ21kLVpcIjpcInJlZG9cIixcIkNtZC1ZXCI6XCJyZWRvXCIsXCJDbWQtSG9tZVwiOlwiZ29Eb2NTdGFydFwiLFwiQ21kLVVwXCI6XCJnb0RvY1N0YXJ0XCIsXCJDbWQtRW5kXCI6XCJnb0RvY0VuZFwiLFwiQ21kLURvd25cIjpcImdvRG9jRW5kXCIsXCJBbHQtTGVmdFwiOlwiZ29Hcm91cExlZnRcIixcIkFsdC1SaWdodFwiOlwiZ29Hcm91cFJpZ2h0XCIsXCJDbWQtTGVmdFwiOlwiZ29MaW5lTGVmdFwiLFwiQ21kLVJpZ2h0XCI6XCJnb0xpbmVSaWdodFwiLFwiQWx0LUJhY2tzcGFjZVwiOlwiZGVsR3JvdXBCZWZvcmVcIixcIkN0cmwtQWx0LUJhY2tzcGFjZVwiOlwiZGVsR3JvdXBBZnRlclwiLFwiQWx0LURlbGV0ZVwiOlwiZGVsR3JvdXBBZnRlclwiLFwiQ21kLVNcIjpcInNhdmVcIixcIkNtZC1GXCI6XCJmaW5kXCIsXCJDbWQtR1wiOlwiZmluZE5leHRcIixcIlNoaWZ0LUNtZC1HXCI6XCJmaW5kUHJldlwiLFwiQ21kLUFsdC1GXCI6XCJyZXBsYWNlXCIsXCJTaGlmdC1DbWQtQWx0LUZcIjpcInJlcGxhY2VBbGxcIixcIkNtZC1bXCI6XCJpbmRlbnRMZXNzXCIsXCJDbWQtXVwiOlwiaW5kZW50TW9yZVwiLFwiQ21kLUJhY2tzcGFjZVwiOlwiZGVsV3JhcHBlZExpbmVMZWZ0XCIsXCJDbWQtRGVsZXRlXCI6XCJkZWxXcmFwcGVkTGluZVJpZ2h0XCIsXCJDbWQtVVwiOlwidW5kb1NlbGVjdGlvblwiLFwiU2hpZnQtQ21kLVVcIjpcInJlZG9TZWxlY3Rpb25cIixcIkN0cmwtVXBcIjpcImdvRG9jU3RhcnRcIixcIkN0cmwtRG93blwiOlwiZ29Eb2NFbmRcIixmYWxsdGhyb3VnaDpbXCJiYXNpY1wiLFwiZW1hY3N5XCJdfSxjbFtcImRlZmF1bHRcIl09QW8/Y2wubWFjRGVmYXVsdDpjbC5wY0RlZmF1bHQsZS5ub3JtYWxpemVLZXlNYXA9ZnVuY3Rpb24oZSl7dmFyIHQ9e307Zm9yKHZhciBuIGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eShuKSl7dmFyIHI9ZVtuXTtpZigvXihuYW1lfGZhbGx0aHJvdWdofChkZXxhdCl0YWNoKSQvLnRlc3QobikpY29udGludWU7aWYoXCIuLi5cIj09cil7ZGVsZXRlIGVbbl07Y29udGludWV9Zm9yKHZhciBpPURpKG4uc3BsaXQoXCIgXCIpLFVuKSxvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciBsLGE7bz09aS5sZW5ndGgtMT8oYT1pLmpvaW4oXCIgXCIpLGw9cik6KGE9aS5zbGljZSgwLG8rMSkuam9pbihcIiBcIiksbD1cIi4uLlwiKTt2YXIgcz10W2FdO2lmKHMpe2lmKHMhPWwpdGhyb3cgbmV3IEVycm9yKFwiSW5jb25zaXN0ZW50IGJpbmRpbmdzIGZvciBcIithKX1lbHNlIHRbYV09bH1kZWxldGUgZVtuXX1mb3IodmFyIGMgaW4gdCllW2NdPXRbY107cmV0dXJuIGV9O3ZhciB1bD1lLmxvb2t1cEtleT1mdW5jdGlvbihlLHQsbixyKXt0PSRuKHQpO3ZhciBpPXQuY2FsbD90LmNhbGwoZSxyKTp0W2VdO2lmKGk9PT0hMSlyZXR1cm5cIm5vdGhpbmdcIjtpZihcIi4uLlwiPT09aSlyZXR1cm5cIm11bHRpXCI7aWYobnVsbCE9aSYmbihpKSlyZXR1cm5cImhhbmRsZWRcIjtpZih0LmZhbGx0aHJvdWdoKXtpZihcIltvYmplY3QgQXJyYXldXCIhPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0LmZhbGx0aHJvdWdoKSlyZXR1cm4gdWwoZSx0LmZhbGx0aHJvdWdoLG4scik7Zm9yKHZhciBvPTA7bzx0LmZhbGx0aHJvdWdoLmxlbmd0aDtvKyspe3ZhciBsPXVsKGUsdC5mYWxsdGhyb3VnaFtvXSxuLHIpO2lmKGwpcmV0dXJuIGx9fX0sZGw9ZS5pc01vZGlmaWVyS2V5PWZ1bmN0aW9uKGUpe3ZhciB0PVwic3RyaW5nXCI9PXR5cGVvZiBlP2U6cmFbZS5rZXlDb2RlXTtyZXR1cm5cIkN0cmxcIj09dHx8XCJBbHRcIj09dHx8XCJTaGlmdFwiPT10fHxcIk1vZFwiPT10fSxobD1lLmtleU5hbWU9ZnVuY3Rpb24oZSx0KXtpZihDbyYmMzQ9PWUua2V5Q29kZSYmZVtcImNoYXJcIl0pcmV0dXJuITE7dmFyIG49cmFbZS5rZXlDb2RlXSxyPW47cmV0dXJuIG51bGw9PXJ8fGUuYWx0R3JhcGhLZXk/ITE6KGUuYWx0S2V5JiZcIkFsdFwiIT1uJiYocj1cIkFsdC1cIityKSwoSG8/ZS5tZXRhS2V5OmUuY3RybEtleSkmJlwiQ3RybFwiIT1uJiYocj1cIkN0cmwtXCIrciksKEhvP2UuY3RybEtleTplLm1ldGFLZXkpJiZcIkNtZFwiIT1uJiYocj1cIkNtZC1cIityKSwhdCYmZS5zaGlmdEtleSYmXCJTaGlmdFwiIT1uJiYocj1cIlNoaWZ0LVwiK3IpLHIpfTtlLmZyb21UZXh0QXJlYT1mdW5jdGlvbih0LG4pe2Z1bmN0aW9uIHIoKXt0LnZhbHVlPWMuZ2V0VmFsdWUoKX1pZihuPW4/UGkobik6e30sbi52YWx1ZT10LnZhbHVlLCFuLnRhYmluZGV4JiZ0LnRhYkluZGV4JiYobi50YWJpbmRleD10LnRhYkluZGV4KSwhbi5wbGFjZWhvbGRlciYmdC5wbGFjZWhvbGRlciYmKG4ucGxhY2Vob2xkZXI9dC5wbGFjZWhvbGRlciksbnVsbD09bi5hdXRvZm9jdXMpe3ZhciBpPUdpKCk7bi5hdXRvZm9jdXM9aT09dHx8bnVsbCE9dC5nZXRBdHRyaWJ1dGUoXCJhdXRvZm9jdXNcIikmJmk9PWRvY3VtZW50LmJvZHl9aWYodC5mb3JtJiYoTmwodC5mb3JtLFwic3VibWl0XCIsciksIW4ubGVhdmVTdWJtaXRNZXRob2RBbG9uZSkpe3ZhciBvPXQuZm9ybSxsPW8uc3VibWl0O3RyeXt2YXIgYT1vLnN1Ym1pdD1mdW5jdGlvbigpe3IoKSxvLnN1Ym1pdD1sLG8uc3VibWl0KCksby5zdWJtaXQ9YX19Y2F0Y2gocyl7fX1uLmZpbmlzaEluaXQ9ZnVuY3Rpb24oZSl7ZS5zYXZlPXIsZS5nZXRUZXh0QXJlYT1mdW5jdGlvbigpe3JldHVybiB0fSxlLnRvVGV4dEFyZWE9ZnVuY3Rpb24oKXtlLnRvVGV4dEFyZWE9aXNOYU4scigpLHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlLmdldFdyYXBwZXJFbGVtZW50KCkpLHQuc3R5bGUuZGlzcGxheT1cIlwiLHQuZm9ybSYmKE9sKHQuZm9ybSxcInN1Ym1pdFwiLHIpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZm9ybS5zdWJtaXQmJih0LmZvcm0uc3VibWl0PWwpKX19LHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjt2YXIgYz1lKGZ1bmN0aW9uKGUpe3QucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0Lm5leHRTaWJsaW5nKX0sbik7cmV0dXJuIGN9O3ZhciBmbD1lLlN0cmluZ1N0cmVhbT1mdW5jdGlvbihlLHQpe3RoaXMucG9zPXRoaXMuc3RhcnQ9MCx0aGlzLnN0cmluZz1lLHRoaXMudGFiU2l6ZT10fHw4LHRoaXMubGFzdENvbHVtblBvcz10aGlzLmxhc3RDb2x1bW5WYWx1ZT0wLHRoaXMubGluZVN0YXJ0PTB9O2ZsLnByb3RvdHlwZT17ZW9sOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zPj10aGlzLnN0cmluZy5sZW5ndGh9LHNvbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvcz09dGhpcy5saW5lU3RhcnR9LHBlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKXx8dm9pZCAwfSxuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zPHRoaXMuc3RyaW5nLmxlbmd0aD90aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MrKyk6dm9pZCAwfSxlYXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl2YXIgbj10PT1lO2Vsc2UgdmFyIG49dCYmKGUudGVzdD9lLnRlc3QodCk6ZSh0KSk7cmV0dXJuIG4/KCsrdGhpcy5wb3MsdCk6dm9pZCAwfSxlYXRXaGlsZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5wb3M7dGhpcy5lYXQoZSk7KTtyZXR1cm4gdGhpcy5wb3M+dH0sZWF0U3BhY2U6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5wb3M7L1tcXHNcXHUwMGEwXS8udGVzdCh0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MpKTspKyt0aGlzLnBvcztyZXR1cm4gdGhpcy5wb3M+ZX0sc2tpcFRvRW5kOmZ1bmN0aW9uKCl7dGhpcy5wb3M9dGhpcy5zdHJpbmcubGVuZ3RofSxza2lwVG86ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zdHJpbmcuaW5kZXhPZihlLHRoaXMucG9zKTtyZXR1cm4gdD4tMT8odGhpcy5wb3M9dCwhMCk6dm9pZCAwfSxiYWNrVXA6ZnVuY3Rpb24oZSl7dGhpcy5wb3MtPWV9LGNvbHVtbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhc3RDb2x1bW5Qb3M8dGhpcy5zdGFydCYmKHRoaXMubGFzdENvbHVtblZhbHVlPUZsKHRoaXMuc3RyaW5nLHRoaXMuc3RhcnQsdGhpcy50YWJTaXplLHRoaXMubGFzdENvbHVtblBvcyx0aGlzLmxhc3RDb2x1bW5WYWx1ZSksdGhpcy5sYXN0Q29sdW1uUG9zPXRoaXMuc3RhcnQpLHRoaXMubGFzdENvbHVtblZhbHVlLSh0aGlzLmxpbmVTdGFydD9GbCh0aGlzLnN0cmluZyx0aGlzLmxpbmVTdGFydCx0aGlzLnRhYlNpemUpOjApfSxpbmRlbnRhdGlvbjpmdW5jdGlvbigpe3JldHVybiBGbCh0aGlzLnN0cmluZyxudWxsLHRoaXMudGFiU2l6ZSktKHRoaXMubGluZVN0YXJ0P0ZsKHRoaXMuc3RyaW5nLHRoaXMubGluZVN0YXJ0LHRoaXMudGFiU2l6ZSk6MCl9LG1hdGNoOmZ1bmN0aW9uKGUsdCxuKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl7dmFyIHI9dGhpcy5zdHJpbmcuc2xpY2UodGhpcy5wb3MpLm1hdGNoKGUpO3JldHVybiByJiZyLmluZGV4PjA/bnVsbDoociYmdCE9PSExJiYodGhpcy5wb3MrPXJbMF0ubGVuZ3RoKSxyKX12YXIgaT1mdW5jdGlvbihlKXtyZXR1cm4gbj9lLnRvTG93ZXJDYXNlKCk6ZX0sbz10aGlzLnN0cmluZy5zdWJzdHIodGhpcy5wb3MsZS5sZW5ndGgpO3JldHVybiBpKG8pPT1pKGUpPyh0IT09ITEmJih0aGlzLnBvcys9ZS5sZW5ndGgpLCEwKTp2b2lkIDB9LGN1cnJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJpbmcuc2xpY2UodGhpcy5zdGFydCx0aGlzLnBvcyl9LGhpZGVGaXJzdENoYXJzOmZ1bmN0aW9uKGUsdCl7dGhpcy5saW5lU3RhcnQrPWU7dHJ5e3JldHVybiB0KCl9ZmluYWxseXt0aGlzLmxpbmVTdGFydC09ZX19fTt2YXIgcGw9MCxtbD1lLlRleHRNYXJrZXI9ZnVuY3Rpb24oZSx0KXt0aGlzLmxpbmVzPVtdLHRoaXMudHlwZT10LHRoaXMuZG9jPWUsdGhpcy5pZD0rK3BsfTtOaShtbCksbWwucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7aWYoIXRoaXMuZXhwbGljaXRseUNsZWFyZWQpe3ZhciBlPXRoaXMuZG9jLmNtLHQ9ZSYmIWUuY3VyT3A7aWYodCYmeHQoZSksTWkodGhpcyxcImNsZWFyXCIpKXt2YXIgbj10aGlzLmZpbmQoKTtuJiZDaSh0aGlzLFwiY2xlYXJcIixuLmZyb20sbi50byl9Zm9yKHZhciByPW51bGwsaT1udWxsLG89MDtvPHRoaXMubGluZXMubGVuZ3RoOysrbyl7dmFyIGw9dGhpcy5saW5lc1tvXSxhPUpuKGwubWFya2VkU3BhbnMsdGhpcyk7ZSYmIXRoaXMuY29sbGFwc2VkP0l0KGUsZWkobCksXCJ0ZXh0XCIpOmUmJihudWxsIT1hLnRvJiYoaT1laShsKSksbnVsbCE9YS5mcm9tJiYocj1laShsKSkpLGwubWFya2VkU3BhbnM9ZXIobC5tYXJrZWRTcGFucyxhKSxudWxsPT1hLmZyb20mJnRoaXMuY29sbGFwc2VkJiYhd3IodGhpcy5kb2MsbCkmJmUmJkpyKGwsdnQoZS5kaXNwbGF5KSl9aWYoZSYmdGhpcy5jb2xsYXBzZWQmJiFlLm9wdGlvbnMubGluZVdyYXBwaW5nKWZvcih2YXIgbz0wO288dGhpcy5saW5lcy5sZW5ndGg7KytvKXt2YXIgcz12cih0aGlzLmxpbmVzW29dKSxjPWQocyk7Yz5lLmRpc3BsYXkubWF4TGluZUxlbmd0aCYmKGUuZGlzcGxheS5tYXhMaW5lPXMsZS5kaXNwbGF5Lm1heExpbmVMZW5ndGg9YyxlLmRpc3BsYXkubWF4TGluZUNoYW5nZWQ9ITApfW51bGwhPXImJmUmJnRoaXMuY29sbGFwc2VkJiZFdChlLHIsaSsxKSx0aGlzLmxpbmVzLmxlbmd0aD0wLHRoaXMuZXhwbGljaXRseUNsZWFyZWQ9ITAsdGhpcy5hdG9taWMmJnRoaXMuZG9jLmNhbnRFZGl0JiYodGhpcy5kb2MuY2FudEVkaXQ9ITEsZSYmT2UoZS5kb2MpKSxlJiZDaShlLFwibWFya2VyQ2xlYXJlZFwiLGUsdGhpcyksdCYmd3QoZSksdGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LmNsZWFyKCl9fSxtbC5wcm90b3R5cGUuZmluZD1mdW5jdGlvbihlLHQpe251bGw9PWUmJlwiYm9va21hcmtcIj09dGhpcy50eXBlJiYoZT0xKTtmb3IodmFyIG4scixpPTA7aTx0aGlzLmxpbmVzLmxlbmd0aDsrK2kpe3ZhciBvPXRoaXMubGluZXNbaV0sbD1KbihvLm1hcmtlZFNwYW5zLHRoaXMpO2lmKG51bGwhPWwuZnJvbSYmKG49UG8odD9vOmVpKG8pLGwuZnJvbSksLTE9PWUpKXJldHVybiBuO2lmKG51bGwhPWwudG8mJihyPVBvKHQ/bzplaShvKSxsLnRvKSwxPT1lKSlyZXR1cm4gcn1yZXR1cm4gbiYme2Zyb206bix0bzpyfX0sbWwucHJvdG90eXBlLmNoYW5nZWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmZpbmQoLTEsITApLHQ9dGhpcyxuPXRoaXMuZG9jLmNtO2UmJm4mJk50KG4sZnVuY3Rpb24oKXt2YXIgcj1lLmxpbmUsaT1laShlLmxpbmUpLG89UWUobixpKTtpZihvJiYoaXQobyksbi5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkPW4uY3VyT3AuZm9yY2VVcGRhdGU9ITApLG4uY3VyT3AudXBkYXRlTWF4TGluZT0hMCwhd3IodC5kb2MscikmJm51bGwhPXQuaGVpZ2h0KXt2YXIgbD10LmhlaWdodDt0LmhlaWdodD1udWxsO3ZhciBhPVNyKHQpLWw7YSYmSnIocixyLmhlaWdodCthKX19KX0sbWwucHJvdG90eXBlLmF0dGFjaExpbmU9ZnVuY3Rpb24oZSl7aWYoIXRoaXMubGluZXMubGVuZ3RoJiZ0aGlzLmRvYy5jbSl7dmFyIHQ9dGhpcy5kb2MuY20uY3VyT3A7dC5tYXliZUhpZGRlbk1hcmtlcnMmJi0xIT1IaSh0Lm1heWJlSGlkZGVuTWFya2Vycyx0aGlzKXx8KHQubWF5YmVVbmhpZGRlbk1hcmtlcnN8fCh0Lm1heWJlVW5oaWRkZW5NYXJrZXJzPVtdKSkucHVzaCh0aGlzKX10aGlzLmxpbmVzLnB1c2goZSl9LG1sLnByb3RvdHlwZS5kZXRhY2hMaW5lPWZ1bmN0aW9uKGUpe2lmKHRoaXMubGluZXMuc3BsaWNlKEhpKHRoaXMubGluZXMsZSksMSksIXRoaXMubGluZXMubGVuZ3RoJiZ0aGlzLmRvYy5jbSl7dmFyIHQ9dGhpcy5kb2MuY20uY3VyT3A7KHQubWF5YmVIaWRkZW5NYXJrZXJzfHwodC5tYXliZUhpZGRlbk1hcmtlcnM9W10pKS5wdXNoKHRoaXMpfX07dmFyIHBsPTAsZ2w9ZS5TaGFyZWRUZXh0TWFya2VyPWZ1bmN0aW9uKGUsdCl7dGhpcy5tYXJrZXJzPWUsdGhpcy5wcmltYXJ5PXQ7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDsrK24pZVtuXS5wYXJlbnQ9dGhpc307TmkoZ2wpLGdsLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe2lmKCF0aGlzLmV4cGxpY2l0bHlDbGVhcmVkKXt0aGlzLmV4cGxpY2l0bHlDbGVhcmVkPSEwO2Zvcih2YXIgZT0wO2U8dGhpcy5tYXJrZXJzLmxlbmd0aDsrK2UpdGhpcy5tYXJrZXJzW2VdLmNsZWFyKCk7Q2kodGhpcyxcImNsZWFyXCIpfX0sZ2wucHJvdG90eXBlLmZpbmQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5wcmltYXJ5LmZpbmQoZSx0KX07dmFyIHZsPWUuTGluZVdpZGdldD1mdW5jdGlvbihlLHQsbil7aWYobilmb3IodmFyIHIgaW4gbiluLmhhc093blByb3BlcnR5KHIpJiYodGhpc1tyXT1uW3JdKTt0aGlzLmRvYz1lLHRoaXMubm9kZT10fTtOaSh2bCksdmwucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kb2MuY20sdD10aGlzLmxpbmUud2lkZ2V0cyxuPXRoaXMubGluZSxyPWVpKG4pO2lmKG51bGwhPXImJnQpe2Zvcih2YXIgaT0wO2k8dC5sZW5ndGg7KytpKXRbaV09PXRoaXMmJnQuc3BsaWNlKGktLSwxKTt0Lmxlbmd0aHx8KG4ud2lkZ2V0cz1udWxsKTt2YXIgbz1Tcih0aGlzKTtKcihuLE1hdGgubWF4KDAsbi5oZWlnaHQtbykpLGUmJk50KGUsZnVuY3Rpb24oKXtDcihlLG4sLW8pLEl0KGUscixcIndpZGdldFwiKX0pfX0sdmwucHJvdG90eXBlLmNoYW5nZWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhlaWdodCx0PXRoaXMuZG9jLmNtLG49dGhpcy5saW5lO3RoaXMuaGVpZ2h0PW51bGw7dmFyIHI9U3IodGhpcyktZTtyJiYoSnIobixuLmhlaWdodCtyKSx0JiZOdCh0LGZ1bmN0aW9uKCl7dC5jdXJPcC5mb3JjZVVwZGF0ZT0hMCxDcih0LG4scil9KSl9O3ZhciB5bD1lLkxpbmU9ZnVuY3Rpb24oZSx0LG4pe3RoaXMudGV4dD1lLGNyKHRoaXMsdCksdGhpcy5oZWlnaHQ9bj9uKHRoaXMpOjF9O05pKHlsKSx5bC5wcm90b3R5cGUubGluZU5vPWZ1bmN0aW9uKCl7cmV0dXJuIGVpKHRoaXMpfTt2YXIgeGw9e30sYmw9e307JHIucHJvdG90eXBlPXtjaHVua1NpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saW5lcy5sZW5ndGh9LHJlbW92ZUlubmVyOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPWUscj1lK3Q7cj5uOysrbil7dmFyIGk9dGhpcy5saW5lc1tuXTt0aGlzLmhlaWdodC09aS5oZWlnaHQsTXIoaSksQ2koaSxcImRlbGV0ZVwiKX10aGlzLmxpbmVzLnNwbGljZShlLHQpfSxjb2xsYXBzZTpmdW5jdGlvbihlKXtlLnB1c2guYXBwbHkoZSx0aGlzLmxpbmVzKX0saW5zZXJ0SW5uZXI6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuaGVpZ2h0Kz1uLHRoaXMubGluZXM9dGhpcy5saW5lcy5zbGljZSgwLGUpLmNvbmNhdCh0KS5jb25jYXQodGhpcy5saW5lcy5zbGljZShlKSk7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDsrK3IpdFtyXS5wYXJlbnQ9dGhpc30saXRlck46ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1lK3Q7cj5lOysrZSlpZihuKHRoaXMubGluZXNbZV0pKXJldHVybiEwfX0sVnIucHJvdG90eXBlPXtjaHVua1NpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfSxyZW1vdmVJbm5lcjpmdW5jdGlvbihlLHQpe3RoaXMuc2l6ZS09dDtmb3IodmFyIG49MDtuPHRoaXMuY2hpbGRyZW4ubGVuZ3RoOysrbil7dmFyIHI9dGhpcy5jaGlsZHJlbltuXSxpPXIuY2h1bmtTaXplKCk7aWYoaT5lKXt2YXIgbz1NYXRoLm1pbih0LGktZSksbD1yLmhlaWdodDtpZihyLnJlbW92ZUlubmVyKGUsbyksdGhpcy5oZWlnaHQtPWwtci5oZWlnaHQsaT09byYmKHRoaXMuY2hpbGRyZW4uc3BsaWNlKG4tLSwxKSxyLnBhcmVudD1udWxsKSwwPT0odC09bykpYnJlYWs7ZT0wfWVsc2UgZS09aX1pZih0aGlzLnNpemUtdDwyNSYmKHRoaXMuY2hpbGRyZW4ubGVuZ3RoPjF8fCEodGhpcy5jaGlsZHJlblswXWluc3RhbmNlb2YgJHIpKSl7dmFyIGE9W107dGhpcy5jb2xsYXBzZShhKSx0aGlzLmNoaWxkcmVuPVtuZXcgJHIoYSldLHRoaXMuY2hpbGRyZW5bMF0ucGFyZW50PXRoaXN9fSxjb2xsYXBzZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PHRoaXMuY2hpbGRyZW4ubGVuZ3RoOysrdCl0aGlzLmNoaWxkcmVuW3RdLmNvbGxhcHNlKGUpfSxpbnNlcnRJbm5lcjpmdW5jdGlvbihlLHQsbil7dGhpcy5zaXplKz10Lmxlbmd0aCx0aGlzLmhlaWdodCs9bjtmb3IodmFyIHI9MDtyPHRoaXMuY2hpbGRyZW4ubGVuZ3RoOysrcil7dmFyIGk9dGhpcy5jaGlsZHJlbltyXSxvPWkuY2h1bmtTaXplKCk7aWYobz49ZSl7aWYoaS5pbnNlcnRJbm5lcihlLHQsbiksaS5saW5lcyYmaS5saW5lcy5sZW5ndGg+NTApe2Zvcig7aS5saW5lcy5sZW5ndGg+NTA7KXt2YXIgbD1pLmxpbmVzLnNwbGljZShpLmxpbmVzLmxlbmd0aC0yNSwyNSksYT1uZXcgJHIobCk7aS5oZWlnaHQtPWEuaGVpZ2h0LHRoaXMuY2hpbGRyZW4uc3BsaWNlKHIrMSwwLGEpLGEucGFyZW50PXRoaXN9dGhpcy5tYXliZVNwaWxsKCl9YnJlYWt9ZS09b319LG1heWJlU3BpbGw6ZnVuY3Rpb24oKXtpZighKHRoaXMuY2hpbGRyZW4ubGVuZ3RoPD0xMCkpe3ZhciBlPXRoaXM7ZG97dmFyIHQ9ZS5jaGlsZHJlbi5zcGxpY2UoZS5jaGlsZHJlbi5sZW5ndGgtNSw1KSxuPW5ldyBWcih0KTtpZihlLnBhcmVudCl7ZS5zaXplLT1uLnNpemUsZS5oZWlnaHQtPW4uaGVpZ2h0O3ZhciByPUhpKGUucGFyZW50LmNoaWxkcmVuLGUpO2UucGFyZW50LmNoaWxkcmVuLnNwbGljZShyKzEsMCxuKX1lbHNle3ZhciBpPW5ldyBWcihlLmNoaWxkcmVuKTtpLnBhcmVudD1lLGUuY2hpbGRyZW49W2ksbl0sZT1pfW4ucGFyZW50PWUucGFyZW50fXdoaWxlKGUuY2hpbGRyZW4ubGVuZ3RoPjEwKTtlLnBhcmVudC5tYXliZVNwaWxsKCl9fSxpdGVyTjpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPTA7cjx0aGlzLmNoaWxkcmVuLmxlbmd0aDsrK3Ipe3ZhciBpPXRoaXMuY2hpbGRyZW5bcl0sbz1pLmNodW5rU2l6ZSgpO2lmKG8+ZSl7dmFyIGw9TWF0aC5taW4odCxvLWUpO2lmKGkuaXRlck4oZSxsLG4pKXJldHVybiEwO2lmKDA9PSh0LT1sKSlicmVhaztlPTB9ZWxzZSBlLT1vfX19O3ZhciB3bD0wLGtsPWUuRG9jPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGtsKSlyZXR1cm4gbmV3IGtsKGUsdCxuLHIpO251bGw9PW4mJihuPTApLFZyLmNhbGwodGhpcyxbbmV3ICRyKFtuZXcgeWwoXCJcIixudWxsKV0pXSksdGhpcy5maXJzdD1uLHRoaXMuc2Nyb2xsVG9wPXRoaXMuc2Nyb2xsTGVmdD0wLHRoaXMuY2FudEVkaXQ9ITEsdGhpcy5jbGVhbkdlbmVyYXRpb249MSx0aGlzLmZyb250aWVyPW47dmFyIGk9UG8obiwwKTt0aGlzLnNlbD1wZShpKSx0aGlzLmhpc3Rvcnk9bmV3IGlpKG51bGwpLHRoaXMuaWQ9Kyt3bCx0aGlzLm1vZGVPcHRpb249dCx0aGlzLmxpbmVTZXA9cixcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9dGhpcy5zcGxpdExpbmVzKGUpKSxVcih0aGlzLHtmcm9tOmksdG86aSx0ZXh0OmV9KSxNZSh0aGlzLHBlKGkpLElsKX07a2wucHJvdG90eXBlPUlpKFZyLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6a2wsaXRlcjpmdW5jdGlvbihlLHQsbil7bj90aGlzLml0ZXJOKGUtdGhpcy5maXJzdCx0LWUsbik6dGhpcy5pdGVyTih0aGlzLmZpcnN0LHRoaXMuZmlyc3QrdGhpcy5zaXplLGUpfSxpbnNlcnQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPTA7cjx0Lmxlbmd0aDsrK3Ipbis9dFtyXS5oZWlnaHQ7dGhpcy5pbnNlcnRJbm5lcihlLXRoaXMuZmlyc3QsdCxuKX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dGhpcy5yZW1vdmVJbm5lcihlLXRoaXMuZmlyc3QsdCl9LGdldFZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVFyKHRoaXMsdGhpcy5maXJzdCx0aGlzLmZpcnN0K3RoaXMuc2l6ZSk7cmV0dXJuIGU9PT0hMT90OnQuam9pbihlfHx0aGlzLmxpbmVTZXBhcmF0b3IoKSl9LHNldFZhbHVlOld0KGZ1bmN0aW9uKGUpe3ZhciB0PVBvKHRoaXMuZmlyc3QsMCksbj10aGlzLmZpcnN0K3RoaXMuc2l6ZS0xO0xuKHRoaXMse2Zyb206dCx0bzpQbyhuLFlyKHRoaXMsbikudGV4dC5sZW5ndGgpLHRleHQ6dGhpcy5zcGxpdExpbmVzKGUpLG9yaWdpbjpcInNldFZhbHVlXCIsZnVsbDohMH0sITApLE1lKHRoaXMscGUodCkpfSkscmVwbGFjZVJhbmdlOmZ1bmN0aW9uKGUsdCxuLHIpe3Q9Z2UodGhpcyx0KSxuPW4/Z2UodGhpcyxuKTp0LFduKHRoaXMsZSx0LG4scil9LGdldFJhbmdlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1acih0aGlzLGdlKHRoaXMsZSksZ2UodGhpcyx0KSk7cmV0dXJuIG49PT0hMT9yOnIuam9pbihufHx0aGlzLmxpbmVTZXBhcmF0b3IoKSl9LGdldExpbmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRMaW5lSGFuZGxlKGUpO3JldHVybiB0JiZ0LnRleHR9LGdldExpbmVIYW5kbGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHllKHRoaXMsZSk/WXIodGhpcyxlKTp2b2lkIDB9LGdldExpbmVOdW1iZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVpKGUpfSxnZXRMaW5lSGFuZGxlVmlzdWFsU3RhcnQ6ZnVuY3Rpb24oZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGUmJihlPVlyKHRoaXMsZSkpLHZyKGUpfSxsaW5lQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfSxmaXJzdExpbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maXJzdH0sbGFzdExpbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maXJzdCt0aGlzLnNpemUtMX0sY2xpcFBvczpmdW5jdGlvbihlKXtyZXR1cm4gZ2UodGhpcyxlKX0sZ2V0Q3Vyc29yOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5zZWwucHJpbWFyeSgpO3JldHVybiB0PW51bGw9PWV8fFwiaGVhZFwiPT1lP24uaGVhZDpcImFuY2hvclwiPT1lP24uYW5jaG9yOlwiZW5kXCI9PWV8fFwidG9cIj09ZXx8ZT09PSExP24udG8oKTpuLmZyb20oKX0sbGlzdFNlbGVjdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWwucmFuZ2VzfSxzb21ldGhpbmdTZWxlY3RlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbC5zb21ldGhpbmdTZWxlY3RlZCgpfSxzZXRDdXJzb3I6V3QoZnVuY3Rpb24oZSx0LG4pe1NlKHRoaXMsZ2UodGhpcyxcIm51bWJlclwiPT10eXBlb2YgZT9QbyhlLHR8fDApOmUpLG51bGwsbil9KSxzZXRTZWxlY3Rpb246V3QoZnVuY3Rpb24oZSx0LG4pe1NlKHRoaXMsZ2UodGhpcyxlKSxnZSh0aGlzLHR8fGUpLG4pfSksZXh0ZW5kU2VsZWN0aW9uOld0KGZ1bmN0aW9uKGUsdCxuKXt3ZSh0aGlzLGdlKHRoaXMsZSksdCYmZ2UodGhpcyx0KSxuKX0pLGV4dGVuZFNlbGVjdGlvbnM6V3QoZnVuY3Rpb24oZSx0KXtrZSh0aGlzLHhlKHRoaXMsZSx0KSl9KSxleHRlbmRTZWxlY3Rpb25zQnk6V3QoZnVuY3Rpb24oZSx0KXtrZSh0aGlzLERpKHRoaXMuc2VsLnJhbmdlcyxlKSx0KX0pLHNldFNlbGVjdGlvbnM6V3QoZnVuY3Rpb24oZSx0LG4pe2lmKGUubGVuZ3RoKXtmb3IodmFyIHI9MCxpPVtdO3I8ZS5sZW5ndGg7cisrKWlbcl09bmV3IGhlKGdlKHRoaXMsZVtyXS5hbmNob3IpLGdlKHRoaXMsZVtyXS5oZWFkKSk7bnVsbD09dCYmKHQ9TWF0aC5taW4oZS5sZW5ndGgtMSx0aGlzLnNlbC5wcmltSW5kZXgpKSxNZSh0aGlzLGZlKGksdCksbil9fSksYWRkU2VsZWN0aW9uOld0KGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10aGlzLnNlbC5yYW5nZXMuc2xpY2UoMCk7ci5wdXNoKG5ldyBoZShnZSh0aGlzLGUpLGdlKHRoaXMsdHx8ZSkpKSxNZSh0aGlzLGZlKHIsci5sZW5ndGgtMSksbil9KSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49dGhpcy5zZWwucmFuZ2VzLHI9MDtyPG4ubGVuZ3RoO3IrKyl7dmFyIGk9WnIodGhpcyxuW3JdLmZyb20oKSxuW3JdLnRvKCkpO3Q9dD90LmNvbmNhdChpKTppfXJldHVybiBlPT09ITE/dDp0LmpvaW4oZXx8dGhpcy5saW5lU2VwYXJhdG9yKCkpfSxnZXRTZWxlY3Rpb25zOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPXRoaXMuc2VsLnJhbmdlcyxyPTA7cjxuLmxlbmd0aDtyKyspe3ZhciBpPVpyKHRoaXMsbltyXS5mcm9tKCksbltyXS50bygpKTtlIT09ITEmJihpPWkuam9pbihlfHx0aGlzLmxpbmVTZXBhcmF0b3IoKSkpLHRbcl09aX1yZXR1cm4gdH0scmVwbGFjZVNlbGVjdGlvbjpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPVtdLGk9MDtpPHRoaXMuc2VsLnJhbmdlcy5sZW5ndGg7aSsrKXJbaV09ZTt0aGlzLnJlcGxhY2VTZWxlY3Rpb25zKHIsdCxufHxcIitpbnB1dFwiKX0scmVwbGFjZVNlbGVjdGlvbnM6V3QoZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1bXSxpPXRoaXMuc2VsLG89MDtvPGkucmFuZ2VzLmxlbmd0aDtvKyspe3ZhciBsPWkucmFuZ2VzW29dO3Jbb109e2Zyb206bC5mcm9tKCksdG86bC50bygpLHRleHQ6dGhpcy5zcGxpdExpbmVzKGVbb10pLG9yaWdpbjpufX1mb3IodmFyIGE9dCYmXCJlbmRcIiE9dCYmQ24odGhpcyxyLHQpLG89ci5sZW5ndGgtMTtvPj0wO28tLSlMbih0aGlzLHJbb10pO2E/VGUodGhpcyxhKTp0aGlzLmNtJiZ6bih0aGlzLmNtKX0pLHVuZG86V3QoZnVuY3Rpb24oKXtNbih0aGlzLFwidW5kb1wiKX0pLHJlZG86V3QoZnVuY3Rpb24oKXtNbih0aGlzLFwicmVkb1wiKX0pLHVuZG9TZWxlY3Rpb246V3QoZnVuY3Rpb24oKXtNbih0aGlzLFwidW5kb1wiLCEwKX0pLHJlZG9TZWxlY3Rpb246V3QoZnVuY3Rpb24oKXtNbih0aGlzLFwicmVkb1wiLCEwKX0pLHNldEV4dGVuZGluZzpmdW5jdGlvbihlKXt0aGlzLmV4dGVuZD1lfSxnZXRFeHRlbmRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbmR9LGhpc3RvcnlTaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuaGlzdG9yeSx0PTAsbj0wLHI9MDtyPGUuZG9uZS5sZW5ndGg7cisrKWUuZG9uZVtyXS5yYW5nZXN8fCsrdDtmb3IodmFyIHI9MDtyPGUudW5kb25lLmxlbmd0aDtyKyspZS51bmRvbmVbcl0ucmFuZ2VzfHwrK247cmV0dXJue3VuZG86dCxyZWRvOm59fSxjbGVhckhpc3Rvcnk6ZnVuY3Rpb24oKXt0aGlzLmhpc3Rvcnk9bmV3IGlpKHRoaXMuaGlzdG9yeS5tYXhHZW5lcmF0aW9uKX0sbWFya0NsZWFuOmZ1bmN0aW9uKCl7dGhpcy5jbGVhbkdlbmVyYXRpb249dGhpcy5jaGFuZ2VHZW5lcmF0aW9uKCEwKX0sY2hhbmdlR2VuZXJhdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4gZSYmKHRoaXMuaGlzdG9yeS5sYXN0T3A9dGhpcy5oaXN0b3J5Lmxhc3RTZWxPcD10aGlzLmhpc3RvcnkubGFzdE9yaWdpbj1udWxsKSx0aGlzLmhpc3RvcnkuZ2VuZXJhdGlvbn0saXNDbGVhbjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oaXN0b3J5LmdlbmVyYXRpb249PShlfHx0aGlzLmNsZWFuR2VuZXJhdGlvbil9LGdldEhpc3Rvcnk6ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTptaSh0aGlzLmhpc3RvcnkuZG9uZSksdW5kb25lOm1pKHRoaXMuaGlzdG9yeS51bmRvbmUpfX0sc2V0SGlzdG9yeTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmhpc3Rvcnk9bmV3IGlpKHRoaXMuaGlzdG9yeS5tYXhHZW5lcmF0aW9uKTt0LmRvbmU9bWkoZS5kb25lLnNsaWNlKDApLG51bGwsITApLHQudW5kb25lPW1pKGUudW5kb25lLnNsaWNlKDApLG51bGwsITApfSxhZGRMaW5lQ2xhc3M6V3QoZnVuY3Rpb24oZSx0LG4pe3JldHVybiBCbih0aGlzLGUsXCJndXR0ZXJcIj09dD9cImd1dHRlclwiOlwiY2xhc3NcIixmdW5jdGlvbihlKXt2YXIgcj1cInRleHRcIj09dD9cInRleHRDbGFzc1wiOlwiYmFja2dyb3VuZFwiPT10P1wiYmdDbGFzc1wiOlwiZ3V0dGVyXCI9PXQ/XCJndXR0ZXJDbGFzc1wiOlwid3JhcENsYXNzXCI7aWYoZVtyXSl7aWYoVWkobikudGVzdChlW3JdKSlyZXR1cm4hMTtlW3JdKz1cIiBcIitufWVsc2UgZVtyXT1uO3JldHVybiEwfSl9KSxyZW1vdmVMaW5lQ2xhc3M6V3QoZnVuY3Rpb24oZSx0LG4pe3JldHVybiBCbih0aGlzLGUsXCJndXR0ZXJcIj09dD9cImd1dHRlclwiOlwiY2xhc3NcIixmdW5jdGlvbihlKXt2YXIgcj1cInRleHRcIj09dD9cInRleHRDbGFzc1wiOlwiYmFja2dyb3VuZFwiPT10P1wiYmdDbGFzc1wiOlwiZ3V0dGVyXCI9PXQ/XCJndXR0ZXJDbGFzc1wiOlwid3JhcENsYXNzXCIsaT1lW3JdO2lmKCFpKXJldHVybiExO2lmKG51bGw9PW4pZVtyXT1udWxsO2Vsc2V7dmFyIG89aS5tYXRjaChVaShuKSk7aWYoIW8pcmV0dXJuITE7dmFyIGw9by5pbmRleCtvWzBdLmxlbmd0aDtlW3JdPWkuc2xpY2UoMCxvLmluZGV4KSsoby5pbmRleCYmbCE9aS5sZW5ndGg/XCIgXCI6XCJcIikraS5zbGljZShsKXx8bnVsbH1yZXR1cm4hMH0pfSksYWRkTGluZVdpZGdldDpXdChmdW5jdGlvbihlLHQsbil7cmV0dXJuIExyKHRoaXMsZSx0LG4pfSkscmVtb3ZlTGluZVdpZGdldDpmdW5jdGlvbihlKXtlLmNsZWFyKCl9LG1hcmtUZXh0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gVm4odGhpcyxnZSh0aGlzLGUpLGdlKHRoaXMsdCksbixuJiZuLnR5cGV8fFwicmFuZ2VcIil9LHNldEJvb2ttYXJrOmZ1bmN0aW9uKGUsdCl7dmFyIG49e3JlcGxhY2VkV2l0aDp0JiYobnVsbD09dC5ub2RlVHlwZT90LndpZGdldDp0KSxpbnNlcnRMZWZ0OnQmJnQuaW5zZXJ0TGVmdCxjbGVhcldoZW5FbXB0eTohMSxzaGFyZWQ6dCYmdC5zaGFyZWQsaGFuZGxlTW91c2VFdmVudHM6dCYmdC5oYW5kbGVNb3VzZUV2ZW50c307cmV0dXJuIGU9Z2UodGhpcyxlKSxWbih0aGlzLGUsZSxuLFwiYm9va21hcmtcIil9LGZpbmRNYXJrc0F0OmZ1bmN0aW9uKGUpe2U9Z2UodGhpcyxlKTt2YXIgdD1bXSxuPVlyKHRoaXMsZS5saW5lKS5tYXJrZWRTcGFucztpZihuKWZvcih2YXIgcj0wO3I8bi5sZW5ndGg7KytyKXt2YXIgaT1uW3JdOyhudWxsPT1pLmZyb218fGkuZnJvbTw9ZS5jaCkmJihudWxsPT1pLnRvfHxpLnRvPj1lLmNoKSYmdC5wdXNoKGkubWFya2VyLnBhcmVudHx8aS5tYXJrZXIpfXJldHVybiB0fSxmaW5kTWFya3M6ZnVuY3Rpb24oZSx0LG4pe2U9Z2UodGhpcyxlKSx0PWdlKHRoaXMsdCk7dmFyIHI9W10saT1lLmxpbmU7cmV0dXJuIHRoaXMuaXRlcihlLmxpbmUsdC5saW5lKzEsZnVuY3Rpb24obyl7dmFyIGw9by5tYXJrZWRTcGFucztpZihsKWZvcih2YXIgYT0wO2E8bC5sZW5ndGg7YSsrKXt2YXIgcz1sW2FdO2k9PWUubGluZSYmZS5jaD5zLnRvfHxudWxsPT1zLmZyb20mJmkhPWUubGluZXx8aT09dC5saW5lJiZzLmZyb20+dC5jaHx8biYmIW4ocy5tYXJrZXIpfHxyLnB1c2gocy5tYXJrZXIucGFyZW50fHxzLm1hcmtlcil9KytpfSkscn0sZ2V0QWxsTWFya3M6ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy5pdGVyKGZ1bmN0aW9uKHQpe3ZhciBuPXQubWFya2VkU3BhbnM7aWYobilmb3IodmFyIHI9MDtyPG4ubGVuZ3RoOysrciludWxsIT1uW3JdLmZyb20mJmUucHVzaChuW3JdLm1hcmtlcil9KSxlfSxwb3NGcm9tSW5kZXg6ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLmZpcnN0O3JldHVybiB0aGlzLml0ZXIoZnVuY3Rpb24ocil7dmFyIGk9ci50ZXh0Lmxlbmd0aCsxO3JldHVybiBpPmU/KHQ9ZSwhMCk6KGUtPWksdm9pZCsrbil9KSxnZSh0aGlzLFBvKG4sdCkpfSxpbmRleEZyb21Qb3M6ZnVuY3Rpb24oZSl7ZT1nZSh0aGlzLGUpO3ZhciB0PWUuY2g7cmV0dXJuIGUubGluZTx0aGlzLmZpcnN0fHxlLmNoPDA/MDoodGhpcy5pdGVyKHRoaXMuZmlyc3QsZS5saW5lLGZ1bmN0aW9uKGUpe3QrPWUudGV4dC5sZW5ndGgrMX0pLHQpfSxjb3B5OmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBrbChRcih0aGlzLHRoaXMuZmlyc3QsdGhpcy5maXJzdCt0aGlzLnNpemUpLHRoaXMubW9kZU9wdGlvbix0aGlzLmZpcnN0LHRoaXMubGluZVNlcCk7cmV0dXJuIHQuc2Nyb2xsVG9wPXRoaXMuc2Nyb2xsVG9wLHQuc2Nyb2xsTGVmdD10aGlzLnNjcm9sbExlZnQsdC5zZWw9dGhpcy5zZWwsdC5leHRlbmQ9ITEsZSYmKHQuaGlzdG9yeS51bmRvRGVwdGg9dGhpcy5oaXN0b3J5LnVuZG9EZXB0aCx0LnNldEhpc3RvcnkodGhpcy5nZXRIaXN0b3J5KCkpKSx0fSxsaW5rZWREb2M6ZnVuY3Rpb24oZSl7ZXx8KGU9e30pO3ZhciB0PXRoaXMuZmlyc3Qsbj10aGlzLmZpcnN0K3RoaXMuc2l6ZTtudWxsIT1lLmZyb20mJmUuZnJvbT50JiYodD1lLmZyb20pLG51bGwhPWUudG8mJmUudG88biYmKG49ZS50byk7dmFyIHI9bmV3IGtsKFFyKHRoaXMsdCxuKSxlLm1vZGV8fHRoaXMubW9kZU9wdGlvbix0LHRoaXMubGluZVNlcCk7cmV0dXJuIGUuc2hhcmVkSGlzdCYmKHIuaGlzdG9yeT10aGlzLmhpc3RvcnkpLCh0aGlzLmxpbmtlZHx8KHRoaXMubGlua2VkPVtdKSkucHVzaCh7ZG9jOnIsc2hhcmVkSGlzdDplLnNoYXJlZEhpc3R9KSxyLmxpbmtlZD1be2RvYzp0aGlzLGlzUGFyZW50OiEwLHNoYXJlZEhpc3Q6ZS5zaGFyZWRIaXN0fV0sWW4ocixYbih0aGlzKSkscn0sdW5saW5rRG9jOmZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBlJiYodD10LmRvYyksdGhpcy5saW5rZWQpZm9yKHZhciBuPTA7bjx0aGlzLmxpbmtlZC5sZW5ndGg7KytuKXt2YXIgcj10aGlzLmxpbmtlZFtuXTtpZihyLmRvYz09dCl7dGhpcy5saW5rZWQuc3BsaWNlKG4sMSksdC51bmxpbmtEb2ModGhpcyksWm4oWG4odGhpcykpO2JyZWFrfX1pZih0Lmhpc3Rvcnk9PXRoaXMuaGlzdG9yeSl7dmFyIGk9W3QuaWRdO0tyKHQsZnVuY3Rpb24oZSl7aS5wdXNoKGUuaWQpfSwhMCksdC5oaXN0b3J5PW5ldyBpaShudWxsKSx0Lmhpc3RvcnkuZG9uZT1taSh0aGlzLmhpc3RvcnkuZG9uZSxpKSx0Lmhpc3RvcnkudW5kb25lPW1pKHRoaXMuaGlzdG9yeS51bmRvbmUsaSl9fSxpdGVyTGlua2VkRG9jczpmdW5jdGlvbihlKXtLcih0aGlzLGUpfSxnZXRNb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZX0sZ2V0RWRpdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY219LHNwbGl0TGluZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubGluZVNlcD9lLnNwbGl0KHRoaXMubGluZVNlcCk6SmwoZSl9LGxpbmVTZXBhcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saW5lU2VwfHxcIlxcblwifX0pLGtsLnByb3RvdHlwZS5lYWNoTGluZT1rbC5wcm90b3R5cGUuaXRlcjt2YXIgQ2w9XCJpdGVyIGluc2VydCByZW1vdmUgY29weSBnZXRFZGl0b3IgY29uc3RydWN0b3JcIi5zcGxpdChcIiBcIik7Zm9yKHZhciBTbCBpbiBrbC5wcm90b3R5cGUpa2wucHJvdG90eXBlLmhhc093blByb3BlcnR5KFNsKSYmSGkoQ2wsU2wpPDAmJihlLnByb3RvdHlwZVtTbF09ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodGhpcy5kb2MsYXJndW1lbnRzKX19KGtsLnByb3RvdHlwZVtTbF0pKTtOaShrbCk7dmFyIExsPWUuZV9wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0P2UucHJldmVudERlZmF1bHQoKTplLnJldHVyblZhbHVlPSExfSxUbD1lLmVfc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uP2Uuc3RvcFByb3BhZ2F0aW9uKCk6ZS5jYW5jZWxCdWJibGU9ITB9LE1sPWUuZV9zdG9wPWZ1bmN0aW9uKGUpe0xsKGUpLFRsKGUpfSxObD1lLm9uPWZ1bmN0aW9uKGUsdCxuKXtpZihlLmFkZEV2ZW50TGlzdGVuZXIpZS5hZGRFdmVudExpc3RlbmVyKHQsbiwhMSk7ZWxzZSBpZihlLmF0dGFjaEV2ZW50KWUuYXR0YWNoRXZlbnQoXCJvblwiK3Qsbik7ZWxzZXt2YXIgcj1lLl9oYW5kbGVyc3x8KGUuX2hhbmRsZXJzPXt9KSxpPXJbdF18fChyW3RdPVtdKTtpLnB1c2gobil9fSxBbD1bXSxPbD1lLm9mZj1mdW5jdGlvbihlLHQsbil7aWYoZS5yZW1vdmVFdmVudExpc3RlbmVyKWUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG4sITEpO2Vsc2UgaWYoZS5kZXRhY2hFdmVudCllLmRldGFjaEV2ZW50KFwib25cIit0LG4pO2Vsc2UgZm9yKHZhciByPWtpKGUsdCwhMSksaT0wO2k8ci5sZW5ndGg7KytpKWlmKHJbaV09PW4pe3Iuc3BsaWNlKGksMSk7YnJlYWt9fSxXbD1lLnNpZ25hbD1mdW5jdGlvbihlLHQpe3ZhciBuPWtpKGUsdCwhMCk7aWYobi5sZW5ndGgpZm9yKHZhciByPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSxpPTA7aTxuLmxlbmd0aDsrK2kpbltpXS5hcHBseShudWxsLHIpfSxIbD1udWxsLERsPTMwLEVsPWUuUGFzcz17dG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIkNvZGVNaXJyb3IuUGFzc1wifX0sSWw9e3Njcm9sbDohMX0sUGw9e29yaWdpbjpcIiptb3VzZVwifSx6bD17b3JpZ2luOlwiK21vdmVcIn07QWkucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe2NsZWFyVGltZW91dCh0aGlzLmlkKSx0aGlzLmlkPXNldFRpbWVvdXQodCxlKX07dmFyIEZsPWUuY291bnRDb2x1bW49ZnVuY3Rpb24oZSx0LG4scixpKXtudWxsPT10JiYodD1lLnNlYXJjaCgvW15cXHNcXHUwMGEwXS8pLC0xPT10JiYodD1lLmxlbmd0aCkpO2Zvcih2YXIgbz1yfHwwLGw9aXx8MDs7KXt2YXIgYT1lLmluZGV4T2YoXCJcdFwiLG8pO2lmKDA+YXx8YT49dClyZXR1cm4gbCsodC1vKTtsKz1hLW8sbCs9bi1sJW4sbz1hKzF9fSxSbD1lLmZpbmRDb2x1bW49ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj0wLGk9MDs7KXt2YXIgbz1lLmluZGV4T2YoXCJcdFwiLHIpOy0xPT1vJiYobz1lLmxlbmd0aCk7dmFyIGw9by1yO2lmKG89PWUubGVuZ3RofHxpK2w+PXQpcmV0dXJuIHIrTWF0aC5taW4obCx0LWkpO2lmKGkrPW8tcixpKz1uLWklbixyPW8rMSxpPj10KXJldHVybiByfX0sQmw9W1wiXCJdLF9sPWZ1bmN0aW9uKGUpe2Uuc2VsZWN0KCl9O01vP19sPWZ1bmN0aW9uKGUpe2Uuc2VsZWN0aW9uU3RhcnQ9MCxlLnNlbGVjdGlvbkVuZD1lLnZhbHVlLmxlbmd0aH06eW8mJihfbD1mdW5jdGlvbihlKXt0cnl7ZS5zZWxlY3QoKX1jYXRjaCh0KXt9fSk7dmFyIGpsLHFsPS9bXFx1MDBkZlxcdTA1ODdcXHUwNTkwLVxcdTA1ZjRcXHUwNjAwLVxcdTA2ZmZcXHUzMDQwLVxcdTMwOWZcXHUzMGEwLVxcdTMwZmZcXHUzNDAwLVxcdTRkYjVcXHU0ZTAwLVxcdTlmY2NcXHVhYzAwLVxcdWQ3YWZdLyxHbD1lLmlzV29yZENoYXI9ZnVuY3Rpb24oZSl7cmV0dXJuL1xcdy8udGVzdChlKXx8ZT5cIsKAXCImJihlLnRvVXBwZXJDYXNlKCkhPWUudG9Mb3dlckNhc2UoKXx8cWwudGVzdChlKSl9LFVsPS9bXFx1MDMwMC1cXHUwMzZmXFx1MDQ4My1cXHUwNDg5XFx1MDU5MS1cXHUwNWJkXFx1MDViZlxcdTA1YzFcXHUwNWMyXFx1MDVjNFxcdTA1YzVcXHUwNWM3XFx1MDYxMC1cXHUwNjFhXFx1MDY0Yi1cXHUwNjVlXFx1MDY3MFxcdTA2ZDYtXFx1MDZkY1xcdTA2ZGUtXFx1MDZlNFxcdTA2ZTdcXHUwNmU4XFx1MDZlYS1cXHUwNmVkXFx1MDcxMVxcdTA3MzAtXFx1MDc0YVxcdTA3YTYtXFx1MDdiMFxcdTA3ZWItXFx1MDdmM1xcdTA4MTYtXFx1MDgxOVxcdTA4MWItXFx1MDgyM1xcdTA4MjUtXFx1MDgyN1xcdTA4MjktXFx1MDgyZFxcdTA5MDAtXFx1MDkwMlxcdTA5M2NcXHUwOTQxLVxcdTA5NDhcXHUwOTRkXFx1MDk1MS1cXHUwOTU1XFx1MDk2MlxcdTA5NjNcXHUwOTgxXFx1MDliY1xcdTA5YmVcXHUwOWMxLVxcdTA5YzRcXHUwOWNkXFx1MDlkN1xcdTA5ZTJcXHUwOWUzXFx1MGEwMVxcdTBhMDJcXHUwYTNjXFx1MGE0MVxcdTBhNDJcXHUwYTQ3XFx1MGE0OFxcdTBhNGItXFx1MGE0ZFxcdTBhNTFcXHUwYTcwXFx1MGE3MVxcdTBhNzVcXHUwYTgxXFx1MGE4MlxcdTBhYmNcXHUwYWMxLVxcdTBhYzVcXHUwYWM3XFx1MGFjOFxcdTBhY2RcXHUwYWUyXFx1MGFlM1xcdTBiMDFcXHUwYjNjXFx1MGIzZVxcdTBiM2ZcXHUwYjQxLVxcdTBiNDRcXHUwYjRkXFx1MGI1NlxcdTBiNTdcXHUwYjYyXFx1MGI2M1xcdTBiODJcXHUwYmJlXFx1MGJjMFxcdTBiY2RcXHUwYmQ3XFx1MGMzZS1cXHUwYzQwXFx1MGM0Ni1cXHUwYzQ4XFx1MGM0YS1cXHUwYzRkXFx1MGM1NVxcdTBjNTZcXHUwYzYyXFx1MGM2M1xcdTBjYmNcXHUwY2JmXFx1MGNjMlxcdTBjYzZcXHUwY2NjXFx1MGNjZFxcdTBjZDVcXHUwY2Q2XFx1MGNlMlxcdTBjZTNcXHUwZDNlXFx1MGQ0MS1cXHUwZDQ0XFx1MGQ0ZFxcdTBkNTdcXHUwZDYyXFx1MGQ2M1xcdTBkY2FcXHUwZGNmXFx1MGRkMi1cXHUwZGQ0XFx1MGRkNlxcdTBkZGZcXHUwZTMxXFx1MGUzNC1cXHUwZTNhXFx1MGU0Ny1cXHUwZTRlXFx1MGViMVxcdTBlYjQtXFx1MGViOVxcdTBlYmJcXHUwZWJjXFx1MGVjOC1cXHUwZWNkXFx1MGYxOFxcdTBmMTlcXHUwZjM1XFx1MGYzN1xcdTBmMzlcXHUwZjcxLVxcdTBmN2VcXHUwZjgwLVxcdTBmODRcXHUwZjg2XFx1MGY4N1xcdTBmOTAtXFx1MGY5N1xcdTBmOTktXFx1MGZiY1xcdTBmYzZcXHUxMDJkLVxcdTEwMzBcXHUxMDMyLVxcdTEwMzdcXHUxMDM5XFx1MTAzYVxcdTEwM2RcXHUxMDNlXFx1MTA1OFxcdTEwNTlcXHUxMDVlLVxcdTEwNjBcXHUxMDcxLVxcdTEwNzRcXHUxMDgyXFx1MTA4NVxcdTEwODZcXHUxMDhkXFx1MTA5ZFxcdTEzNWZcXHUxNzEyLVxcdTE3MTRcXHUxNzMyLVxcdTE3MzRcXHUxNzUyXFx1MTc1M1xcdTE3NzJcXHUxNzczXFx1MTdiNy1cXHUxN2JkXFx1MTdjNlxcdTE3YzktXFx1MTdkM1xcdTE3ZGRcXHUxODBiLVxcdTE4MGRcXHUxOGE5XFx1MTkyMC1cXHUxOTIyXFx1MTkyN1xcdTE5MjhcXHUxOTMyXFx1MTkzOS1cXHUxOTNiXFx1MWExN1xcdTFhMThcXHUxYTU2XFx1MWE1OC1cXHUxYTVlXFx1MWE2MFxcdTFhNjJcXHUxYTY1LVxcdTFhNmNcXHUxYTczLVxcdTFhN2NcXHUxYTdmXFx1MWIwMC1cXHUxYjAzXFx1MWIzNFxcdTFiMzYtXFx1MWIzYVxcdTFiM2NcXHUxYjQyXFx1MWI2Yi1cXHUxYjczXFx1MWI4MFxcdTFiODFcXHUxYmEyLVxcdTFiYTVcXHUxYmE4XFx1MWJhOVxcdTFjMmMtXFx1MWMzM1xcdTFjMzZcXHUxYzM3XFx1MWNkMC1cXHUxY2QyXFx1MWNkNC1cXHUxY2UwXFx1MWNlMi1cXHUxY2U4XFx1MWNlZFxcdTFkYzAtXFx1MWRlNlxcdTFkZmQtXFx1MWRmZlxcdTIwMGNcXHUyMDBkXFx1MjBkMC1cXHUyMGYwXFx1MmNlZi1cXHUyY2YxXFx1MmRlMC1cXHUyZGZmXFx1MzAyYS1cXHUzMDJmXFx1MzA5OVxcdTMwOWFcXHVhNjZmLVxcdWE2NzJcXHVhNjdjXFx1YTY3ZFxcdWE2ZjBcXHVhNmYxXFx1YTgwMlxcdWE4MDZcXHVhODBiXFx1YTgyNVxcdWE4MjZcXHVhOGM0XFx1YThlMC1cXHVhOGYxXFx1YTkyNi1cXHVhOTJkXFx1YTk0Ny1cXHVhOTUxXFx1YTk4MC1cXHVhOTgyXFx1YTliM1xcdWE5YjYtXFx1YTliOVxcdWE5YmNcXHVhYTI5LVxcdWFhMmVcXHVhYTMxXFx1YWEzMlxcdWFhMzVcXHVhYTM2XFx1YWE0M1xcdWFhNGNcXHVhYWIwXFx1YWFiMi1cXHVhYWI0XFx1YWFiN1xcdWFhYjhcXHVhYWJlXFx1YWFiZlxcdWFhYzFcXHVhYmU1XFx1YWJlOFxcdWFiZWRcXHVkYzAwLVxcdWRmZmZcXHVmYjFlXFx1ZmUwMC1cXHVmZTBmXFx1ZmUyMC1cXHVmZTI2XFx1ZmY5ZVxcdWZmOWZdLztcbmpsPWRvY3VtZW50LmNyZWF0ZVJhbmdlP2Z1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7cmV0dXJuIGkuc2V0RW5kKHJ8fGUsbiksaS5zZXRTdGFydChlLHQpLGl9OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1kb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO3RyeXtyLm1vdmVUb0VsZW1lbnRUZXh0KGUucGFyZW50Tm9kZSl9Y2F0Y2goaSl7cmV0dXJuIHJ9cmV0dXJuIHIuY29sbGFwc2UoITApLHIubW92ZUVuZChcImNoYXJhY3RlclwiLG4pLHIubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsdCkscn07dmFyICRsPWUuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtpZigzPT10Lm5vZGVUeXBlJiYodD10LnBhcmVudE5vZGUpLGUuY29udGFpbnMpcmV0dXJuIGUuY29udGFpbnModCk7ZG8gaWYoMTE9PXQubm9kZVR5cGUmJih0PXQuaG9zdCksdD09ZSlyZXR1cm4hMDt3aGlsZSh0PXQucGFyZW50Tm9kZSl9O3lvJiYxMT54byYmKEdpPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50fWNhdGNoKGUpe3JldHVybiBkb2N1bWVudC5ib2R5fX0pO3ZhciBWbCxLbCxYbD1lLnJtQ2xhc3M9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNsYXNzTmFtZSxyPVVpKHQpLmV4ZWMobik7aWYocil7dmFyIGk9bi5zbGljZShyLmluZGV4K3JbMF0ubGVuZ3RoKTtlLmNsYXNzTmFtZT1uLnNsaWNlKDAsci5pbmRleCkrKGk/clsxXStpOlwiXCIpfX0sWWw9ZS5hZGRDbGFzcz1mdW5jdGlvbihlLHQpe3ZhciBuPWUuY2xhc3NOYW1lO1VpKHQpLnRlc3Qobil8fChlLmNsYXNzTmFtZSs9KG4/XCIgXCI6XCJcIikrdCl9LFpsPSExLFFsPWZ1bmN0aW9uKCl7aWYoeW8mJjk+eG8pcmV0dXJuITE7dmFyIGU9X2koXCJkaXZcIik7cmV0dXJuXCJkcmFnZ2FibGVcImluIGV8fFwiZHJhZ0Ryb3BcImluIGV9KCksSmw9ZS5zcGxpdExpbmVzPTMhPVwiXFxuXFxuYlwiLnNwbGl0KC9cXG4vKS5sZW5ndGg/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1bXSxyPWUubGVuZ3RoO3I+PXQ7KXt2YXIgaT1lLmluZGV4T2YoXCJcXG5cIix0KTstMT09aSYmKGk9ZS5sZW5ndGgpO3ZhciBvPWUuc2xpY2UodCxcIlxcclwiPT1lLmNoYXJBdChpLTEpP2ktMTppKSxsPW8uaW5kZXhPZihcIlxcclwiKTstMSE9bD8obi5wdXNoKG8uc2xpY2UoMCxsKSksdCs9bCsxKToobi5wdXNoKG8pLHQ9aSsxKX1yZXR1cm4gbn06ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BsaXQoL1xcclxcbj98XFxuLyl9LGVhPXdpbmRvdy5nZXRTZWxlY3Rpb24/ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBlLnNlbGVjdGlvblN0YXJ0IT1lLnNlbGVjdGlvbkVuZH1jYXRjaCh0KXtyZXR1cm4hMX19OmZ1bmN0aW9uKGUpe3RyeXt2YXIgdD1lLm93bmVyRG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCl9Y2F0Y2gobil7fXJldHVybiB0JiZ0LnBhcmVudEVsZW1lbnQoKT09ZT8wIT10LmNvbXBhcmVFbmRQb2ludHMoXCJTdGFydFRvRW5kXCIsdCk6ITF9LHRhPWZ1bmN0aW9uKCl7dmFyIGU9X2koXCJkaXZcIik7cmV0dXJuXCJvbmNvcHlcImluIGU/ITA6KGUuc2V0QXR0cmlidXRlKFwib25jb3B5XCIsXCJyZXR1cm47XCIpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGUub25jb3B5KX0oKSxuYT1udWxsLHJhPWUua2V5TmFtZXM9ezM6XCJFbnRlclwiLDg6XCJCYWNrc3BhY2VcIiw5OlwiVGFiXCIsMTM6XCJFbnRlclwiLDE2OlwiU2hpZnRcIiwxNzpcIkN0cmxcIiwxODpcIkFsdFwiLDE5OlwiUGF1c2VcIiwyMDpcIkNhcHNMb2NrXCIsMjc6XCJFc2NcIiwzMjpcIlNwYWNlXCIsMzM6XCJQYWdlVXBcIiwzNDpcIlBhZ2VEb3duXCIsMzU6XCJFbmRcIiwzNjpcIkhvbWVcIiwzNzpcIkxlZnRcIiwzODpcIlVwXCIsMzk6XCJSaWdodFwiLDQwOlwiRG93blwiLDQ0OlwiUHJpbnRTY3JuXCIsNDU6XCJJbnNlcnRcIiw0NjpcIkRlbGV0ZVwiLDU5OlwiO1wiLDYxOlwiPVwiLDkxOlwiTW9kXCIsOTI6XCJNb2RcIiw5MzpcIk1vZFwiLDEwNjpcIipcIiwxMDc6XCI9XCIsMTA5OlwiLVwiLDExMDpcIi5cIiwxMTE6XCIvXCIsMTI3OlwiRGVsZXRlXCIsMTczOlwiLVwiLDE4NjpcIjtcIiwxODc6XCI9XCIsMTg4OlwiLFwiLDE4OTpcIi1cIiwxOTA6XCIuXCIsMTkxOlwiL1wiLDE5MjpcImBcIiwyMTk6XCJbXCIsMjIwOlwiXFxcXFwiLDIyMTpcIl1cIiwyMjI6XCInXCIsNjMyMzI6XCJVcFwiLDYzMjMzOlwiRG93blwiLDYzMjM0OlwiTGVmdFwiLDYzMjM1OlwiUmlnaHRcIiw2MzI3MjpcIkRlbGV0ZVwiLDYzMjczOlwiSG9tZVwiLDYzMjc1OlwiRW5kXCIsNjMyNzY6XCJQYWdlVXBcIiw2MzI3NzpcIlBhZ2VEb3duXCIsNjMzMDI6XCJJbnNlcnRcIn07IWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7MTA+ZTtlKyspcmFbZSs0OF09cmFbZSs5Nl09U3RyaW5nKGUpO2Zvcih2YXIgZT02NTs5MD49ZTtlKyspcmFbZV09U3RyaW5nLmZyb21DaGFyQ29kZShlKTtmb3IodmFyIGU9MTsxMj49ZTtlKyspcmFbZSsxMTFdPXJhW2UrNjMyMzVdPVwiRlwiK2V9KCk7dmFyIGlhLG9hPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gMjQ3Pj1lP24uY2hhckF0KGUpOmU+PTE0MjQmJjE1MjQ+PWU/XCJSXCI6ZT49MTUzNiYmMTc3Mz49ZT9yLmNoYXJBdChlLTE1MzYpOmU+PTE3NzQmJjIyMjA+PWU/XCJyXCI6ZT49ODE5MiYmODIwMz49ZT9cIndcIjo4MjA0PT1lP1wiYlwiOlwiTFwifWZ1bmN0aW9uIHQoZSx0LG4pe3RoaXMubGV2ZWw9ZSx0aGlzLmZyb209dCx0aGlzLnRvPW59dmFyIG49XCJiYmJiYmJiYmJ0c3R3c2JiYmJiYmJiYmJiYmJic3NzdHdOTiUlJU5OTk5OTixOLE4xMTExMTExMTExTk5OTk5OTkxMTExMTExMTExMTExMTExMTExMTExMTExMTk5OTk5OTExMTExMTExMTExMTExMTExMTExMTExMTExOTk5OYmJiYmJic2JiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiLE4lJSUlTk5OTkxOTk5OTiUlMTFOTE5OTjFMTk5OTk5MTExMTExMTExMTExMTExMTExMTExMTE5MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTlwiLHI9XCJycnJycnJycnJycnIsck5ObW1tbW1tcnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJtbW1tbW1tbW1tbW1tbXJycnJycnJubm5ubm5ubm5uJW5ucnJybXJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJybW1tbW1tbW1tbW1tbW1tbW1tbU5tbW1tXCIsaT0vW1xcdTA1OTAtXFx1MDVmNFxcdTA2MDAtXFx1MDZmZlxcdTA3MDAtXFx1MDhhY10vLG89L1tzdHdOXS8sbD0vW0xScl0vLGE9L1tMYjFuXS8scz0vWzFuXS8sYz1cIkxcIjtyZXR1cm4gZnVuY3Rpb24obil7aWYoIWkudGVzdChuKSlyZXR1cm4hMTtmb3IodmFyIHIsdT1uLmxlbmd0aCxkPVtdLGg9MDt1Pmg7KytoKWQucHVzaChyPWUobi5jaGFyQ29kZUF0KGgpKSk7Zm9yKHZhciBoPTAsZj1jO3U+aDsrK2gpe3ZhciByPWRbaF07XCJtXCI9PXI/ZFtoXT1mOmY9cn1mb3IodmFyIGg9MCxwPWM7dT5oOysraCl7dmFyIHI9ZFtoXTtcIjFcIj09ciYmXCJyXCI9PXA/ZFtoXT1cIm5cIjpsLnRlc3QocikmJihwPXIsXCJyXCI9PXImJihkW2hdPVwiUlwiKSl9Zm9yKHZhciBoPTEsZj1kWzBdO3UtMT5oOysraCl7dmFyIHI9ZFtoXTtcIitcIj09ciYmXCIxXCI9PWYmJlwiMVwiPT1kW2grMV0/ZFtoXT1cIjFcIjpcIixcIiE9cnx8ZiE9ZFtoKzFdfHxcIjFcIiE9ZiYmXCJuXCIhPWZ8fChkW2hdPWYpLGY9cn1mb3IodmFyIGg9MDt1Pmg7KytoKXt2YXIgcj1kW2hdO2lmKFwiLFwiPT1yKWRbaF09XCJOXCI7ZWxzZSBpZihcIiVcIj09cil7Zm9yKHZhciBtPWgrMTt1Pm0mJlwiJVwiPT1kW21dOysrbSk7Zm9yKHZhciBnPWgmJlwiIVwiPT1kW2gtMV18fHU+bSYmXCIxXCI9PWRbbV0/XCIxXCI6XCJOXCIsdj1oO20+djsrK3YpZFt2XT1nO2g9bS0xfX1mb3IodmFyIGg9MCxwPWM7dT5oOysraCl7dmFyIHI9ZFtoXTtcIkxcIj09cCYmXCIxXCI9PXI/ZFtoXT1cIkxcIjpsLnRlc3QocikmJihwPXIpfWZvcih2YXIgaD0wO3U+aDsrK2gpaWYoby50ZXN0KGRbaF0pKXtmb3IodmFyIG09aCsxO3U+bSYmby50ZXN0KGRbbV0pOysrbSk7Zm9yKHZhciB5PVwiTFwiPT0oaD9kW2gtMV06YykseD1cIkxcIj09KHU+bT9kW21dOmMpLGc9eXx8eD9cIkxcIjpcIlJcIix2PWg7bT52OysrdilkW3ZdPWc7aD1tLTF9Zm9yKHZhciBiLHc9W10saD0wO3U+aDspaWYoYS50ZXN0KGRbaF0pKXt2YXIgaz1oO2ZvcigrK2g7dT5oJiZhLnRlc3QoZFtoXSk7KytoKTt3LnB1c2gobmV3IHQoMCxrLGgpKX1lbHNle3ZhciBDPWgsUz13Lmxlbmd0aDtmb3IoKytoO3U+aCYmXCJMXCIhPWRbaF07KytoKTtmb3IodmFyIHY9QztoPnY7KWlmKHMudGVzdChkW3ZdKSl7dj5DJiZ3LnNwbGljZShTLDAsbmV3IHQoMSxDLHYpKTt2YXIgTD12O2ZvcigrK3Y7aD52JiZzLnRlc3QoZFt2XSk7Kyt2KTt3LnNwbGljZShTLDAsbmV3IHQoMixMLHYpKSxDPXZ9ZWxzZSsrdjtoPkMmJncuc3BsaWNlKFMsMCxuZXcgdCgxLEMsaCkpfXJldHVybiAxPT13WzBdLmxldmVsJiYoYj1uLm1hdGNoKC9eXFxzKy8pKSYmKHdbMF0uZnJvbT1iWzBdLmxlbmd0aCx3LnVuc2hpZnQobmV3IHQoMCwwLGJbMF0ubGVuZ3RoKSkpLDE9PVdpKHcpLmxldmVsJiYoYj1uLm1hdGNoKC9cXHMrJC8pKSYmKFdpKHcpLnRvLT1iWzBdLmxlbmd0aCx3LnB1c2gobmV3IHQoMCx1LWJbMF0ubGVuZ3RoLHUpKSksMj09d1swXS5sZXZlbCYmdy51bnNoaWZ0KG5ldyB0KDEsd1swXS50byx3WzBdLnRvKSksd1swXS5sZXZlbCE9V2kodykubGV2ZWwmJncucHVzaChuZXcgdCh3WzBdLmxldmVsLHUsdSkpLHd9fSgpO3JldHVybiBlLnZlcnNpb249XCI1LjguMVwiLGV9KX0se31dLDc6W2Z1bmN0aW9uKHQsbixyKXshZnVuY3Rpb24oaSl7XCJvYmplY3RcIj09dHlwZW9mIHImJlwib2JqZWN0XCI9PXR5cGVvZiBuP2kodChcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIpLHQoXCIuLi9tYXJrZG93bi9tYXJrZG93blwiKSx0KFwiLi4vLi4vYWRkb24vbW9kZS9vdmVybGF5XCIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlLmFtZD9lKFtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIsXCIuLi9tYXJrZG93bi9tYXJrZG93blwiLFwiLi4vLi4vYWRkb24vbW9kZS9vdmVybGF5XCJdLGkpOmkoQ29kZU1pcnJvcil9KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciB0PS9eKCg/Oig/OmFhYXM/fGFib3V0fGFjYXB8YWRpdW14dHJhfGFmW3BzXXxhaW18YXB0fGF0dGFjaG1lbnR8YXd8YmVzaGFyZXxiaXRjb2lufGJvbG98Y2FsbHRvfGNhcHxjaHJvbWUoPzotZXh0ZW5zaW9uKT98Y2lkfGNvYXB8Y29tLWV2ZW50YnJpdGUtYXR0ZW5kZWV8Y29udGVudHxjcmlkfGN2c3xkYXRhfGRhdnxkaWN0fGRsbmEtKD86cGxheWNvbnRhaW5lcnxwbGF5c2luZ2xlKXxkbnN8ZG9pfGR0bnxkdmJ8ZWQya3xmYWNldGltZXxmZWVkfGZpbGV8ZmluZ2VyfGZpc2h8ZnRwfGdlb3xnZ3xnaXR8Z2l6bW9wcm9qZWN0fGdvfGdvcGhlcnxndGFsa3xoMzIzfGhjcHxodHRwcz98aWF4fGljYXB8aWNvbnxpbXxpbWFwfGluZm98aXBufGlwcHxpcmNbNnNdP3xpcmlzKD86XFwuYmVlcHxcXC5sd3p8XFwueHBjfFxcLnhwY3MpP3xpdG1zfGphcnxqYXZhc2NyaXB0fGptc3xrZXlwYXJjfGxhc3RmbXxsZGFwcz98bWFnbmV0fG1haWx0b3xtYXBzfG1hcmtldHxtZXNzYWdlfG1pZHxtbXN8bXMtaGVscHxtc25pbXxtc3Jwcz98bXRxcHxtdW1ibGV8bXVwZGF0ZXxtdm58bmV3c3xuZnN8bmloP3xubnRwfG5vdGVzfG9pZHxvcGFxdWVsb2NrdG9rZW58cGFsbXxwYXBhcmF6eml8cGxhdGZvcm18cG9wfHByZXN8cHJveHl8cHN5Y3xxdWVyeXxyZXMoPzpvdXJjZSk/fHJtaXxyc3luY3xydG1wfHJ0c3B8c2Vjb25kbGlmZXxzZXJ2aWNlfHNlc3Npb258c2Z0cHxzZ258c2h0dHB8c2lldmV8c2lwcz98c2t5cGV8c21bYnNdfHNubXB8c29hcFxcLmJlZXBzP3xzb2xkYXR8c3BvdGlmeXxzc2h8c3RlYW18c3ZufHRhZ3x0ZWFtc3BlYWt8dGVsKD86bmV0KT98dGZ0cHx0aGluZ3N8dGhpc21lc3NhZ2V8dGlwfHRuMzI3MHx0dnx1ZHB8dW5yZWFsfHVybnx1dDIwMDR8dmVtbWl8dmVudHJpbG98dmlldy1zb3VyY2V8d2ViY2FsfHdzcz98d3RhaXx3eWNpd3lnfHhjb24oPzotdXNlcmlkKT98eGZpcmV8eG1scnBjXFwuYmVlcHM/fHhtcHB8eHJpfHltc2dyfHozOVxcLjUwW3JzXT8pOig/OlxcL3sxLDN9fFthLXowLTklXSl8d3d3XFxkezAsM31bLl18W2EtejAtOS5cXC1dK1suXVthLXpdezIsNH1cXC8pKD86W15cXHMoKTw+XXxcXChbXlxccygpPD5dKlxcKSkrKD86XFwoW15cXHMoKTw+XSpcXCl8W15cXHNgKiEoKVxcW1xcXXt9OzonXCIuLDw+P8KrwrvigJzigJ3igJjigJldKSkvaTtlLmRlZmluZU1vZGUoXCJnZm1cIixmdW5jdGlvbihuLHIpe2Z1bmN0aW9uIGkoZSl7cmV0dXJuIGUuY29kZT0hMSxudWxsfXZhciBvPTAsbD17c3RhcnRTdGF0ZTpmdW5jdGlvbigpe3JldHVybntjb2RlOiExLGNvZGVCbG9jazohMSxhdGVTcGFjZTohMX19LGNvcHlTdGF0ZTpmdW5jdGlvbihlKXtyZXR1cm57Y29kZTplLmNvZGUsY29kZUJsb2NrOmUuY29kZUJsb2NrLGF0ZVNwYWNlOmUuYXRlU3BhY2V9fSx0b2tlbjpmdW5jdGlvbihlLG4pe2lmKG4uY29tYmluZVRva2Vucz1udWxsLG4uY29kZUJsb2NrKXJldHVybiBlLm1hdGNoKC9eYGBgKy8pPyhuLmNvZGVCbG9jaz0hMSxudWxsKTooZS5za2lwVG9FbmQoKSxudWxsKTtpZihlLnNvbCgpJiYobi5jb2RlPSExKSxlLnNvbCgpJiZlLm1hdGNoKC9eYGBgKy8pKXJldHVybiBlLnNraXBUb0VuZCgpLG4uY29kZUJsb2NrPSEwLG51bGw7aWYoXCJgXCI9PT1lLnBlZWsoKSl7ZS5uZXh0KCk7dmFyIGk9ZS5wb3M7ZS5lYXRXaGlsZShcImBcIik7dmFyIGw9MStlLnBvcy1pO3JldHVybiBuLmNvZGU/bD09PW8mJihuLmNvZGU9ITEpOihvPWwsbi5jb2RlPSEwKSxudWxsfWlmKG4uY29kZSlyZXR1cm4gZS5uZXh0KCksbnVsbDtpZihlLmVhdFNwYWNlKCkpcmV0dXJuIG4uYXRlU3BhY2U9ITAsbnVsbDtpZigoZS5zb2woKXx8bi5hdGVTcGFjZSkmJihuLmF0ZVNwYWNlPSExLHIuZ2l0SHViU3BpY2UhPT0hMSkpe2lmKGUubWF0Y2goL14oPzpbYS16QS1aMC05XFwtX10rXFwvKT8oPzpbYS16QS1aMC05XFwtX10rQCk/KD86W2EtZjAtOV17Nyw0MH1cXGIpLykpcmV0dXJuIG4uY29tYmluZVRva2Vucz0hMCxcImxpbmtcIjtpZihlLm1hdGNoKC9eKD86W2EtekEtWjAtOVxcLV9dK1xcLyk/KD86W2EtekEtWjAtOVxcLV9dKyk/I1swLTldK1xcYi8pKXJldHVybiBuLmNvbWJpbmVUb2tlbnM9ITAsXCJsaW5rXCJ9cmV0dXJuIGUubWF0Y2godCkmJlwiXShcIiE9ZS5zdHJpbmcuc2xpY2UoZS5zdGFydC0yLGUuc3RhcnQpJiYoMD09ZS5zdGFydHx8L1xcVy8udGVzdChlLnN0cmluZy5jaGFyQXQoZS5zdGFydC0xKSkpPyhuLmNvbWJpbmVUb2tlbnM9ITAsXCJsaW5rXCIpOihlLm5leHQoKSxudWxsKX0sYmxhbmtMaW5lOml9LGE9e3VuZGVyc2NvcmVzQnJlYWtXb3JkczohMSx0YXNrTGlzdHM6ITAsZmVuY2VkQ29kZUJsb2NrczpcImBgYFwiLHN0cmlrZXRocm91Z2g6ITB9O2Zvcih2YXIgcyBpbiByKWFbc109cltzXTtyZXR1cm4gYS5uYW1lPVwibWFya2Rvd25cIixlLm92ZXJsYXlNb2RlKGUuZ2V0TW9kZShuLGEpLGwpfSxcIm1hcmtkb3duXCIpLGUuZGVmaW5lTUlNRShcInRleHQveC1nZm1cIixcImdmbVwiKX0pfSx7XCIuLi8uLi9hZGRvbi9tb2RlL292ZXJsYXlcIjo1LFwiLi4vLi4vbGliL2NvZGVtaXJyb3JcIjo2LFwiLi4vbWFya2Rvd24vbWFya2Rvd25cIjo4fV0sODpbZnVuY3Rpb24odCxuLHIpeyFmdW5jdGlvbihpKXtcIm9iamVjdFwiPT10eXBlb2YgciYmXCJvYmplY3RcIj09dHlwZW9mIG4/aSh0KFwiLi4vLi4vbGliL2NvZGVtaXJyb3JcIiksdChcIi4uL3htbC94bWxcIiksdChcIi4uL21ldGFcIikpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUuYW1kP2UoW1wiLi4vLi4vbGliL2NvZGVtaXJyb3JcIixcIi4uL3htbC94bWxcIixcIi4uL21ldGFcIl0saSk6aShDb2RlTWlycm9yKX0oZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZS5kZWZpbmVNb2RlKFwibWFya2Rvd25cIixmdW5jdGlvbih0LG4pe2Z1bmN0aW9uIHIobil7aWYoZS5maW5kTW9kZUJ5TmFtZSl7dmFyIHI9ZS5maW5kTW9kZUJ5TmFtZShuKTtyJiYobj1yLm1pbWV8fHIubWltZXNbMF0pfXZhciBpPWUuZ2V0TW9kZSh0LG4pO3JldHVyblwibnVsbFwiPT1pLm5hbWU/bnVsbDppfWZ1bmN0aW9uIGkoZSx0LG4pe3JldHVybiB0LmY9dC5pbmxpbmU9bixuKGUsdCl9ZnVuY3Rpb24gbyhlLHQsbil7cmV0dXJuIHQuZj10LmJsb2NrPW4sbihlLHQpfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIWV8fCEvXFxTLy50ZXN0KGUuc3RyaW5nKX1mdW5jdGlvbiBhKGUpe3JldHVybiBlLmxpbmtUaXRsZT0hMSxlLmVtPSExLGUuc3Ryb25nPSExLGUuc3RyaWtldGhyb3VnaD0hMSxlLnF1b3RlPTAsZS5pbmRlbnRlZENvZGU9ITEsa3x8ZS5mIT1jfHwoZS5mPXAsZS5ibG9jaz1zKSxlLnRyYWlsaW5nU3BhY2U9MCxlLnRyYWlsaW5nU3BhY2VOZXdMaW5lPSExLGUucHJldkxpbmU9ZS50aGlzTGluZSxlLnRoaXNMaW5lPW51bGwsbnVsbH1mdW5jdGlvbiBzKGUsdCl7dmFyIG89ZS5zb2woKSxhPXQubGlzdCE9PSExLHM9dC5pbmRlbnRlZENvZGU7dC5pbmRlbnRlZENvZGU9ITEsYSYmKHQuaW5kZW50YXRpb25EaWZmPj0wPyh0LmluZGVudGF0aW9uRGlmZjw0JiYodC5pbmRlbnRhdGlvbi09dC5pbmRlbnRhdGlvbkRpZmYpLHQubGlzdD1udWxsKTp0LmluZGVudGF0aW9uPjA/KHQubGlzdD1udWxsLHQubGlzdERlcHRoPU1hdGguZmxvb3IodC5pbmRlbnRhdGlvbi80KSk6KHQubGlzdD0hMSx0Lmxpc3REZXB0aD0wKSk7dmFyIGM9bnVsbDtpZih0LmluZGVudGF0aW9uRGlmZj49NClyZXR1cm4gZS5za2lwVG9FbmQoKSxzfHxsKHQucHJldkxpbmUpPyh0LmluZGVudGF0aW9uLT00LHQuaW5kZW50ZWRDb2RlPSEwLEwuY29kZSk6bnVsbDtpZihlLmVhdFNwYWNlKCkpcmV0dXJuIG51bGw7aWYoKGM9ZS5tYXRjaChXKSkmJmNbMV0ubGVuZ3RoPD02KXJldHVybiB0LmhlYWRlcj1jWzFdLmxlbmd0aCxuLmhpZ2hsaWdodEZvcm1hdHRpbmcmJih0LmZvcm1hdHRpbmc9XCJoZWFkZXJcIiksdC5mPXQuaW5saW5lLGgodCk7aWYoIShsKHQucHJldkxpbmUpfHx0LnF1b3RlfHxhfHxzKSYmKGM9ZS5tYXRjaChIKSkpcmV0dXJuIHQuaGVhZGVyPVwiPVwiPT1jWzBdLmNoYXJBdCgwKT8xOjIsbi5oaWdobGlnaHRGb3JtYXR0aW5nJiYodC5mb3JtYXR0aW5nPVwiaGVhZGVyXCIpLHQuZj10LmlubGluZSxoKHQpO2lmKGUuZWF0KFwiPlwiKSlyZXR1cm4gdC5xdW90ZT1vPzE6dC5xdW90ZSsxLG4uaGlnaGxpZ2h0Rm9ybWF0dGluZyYmKHQuZm9ybWF0dGluZz1cInF1b3RlXCIpLGUuZWF0U3BhY2UoKSxoKHQpO2lmKFwiW1wiPT09ZS5wZWVrKCkpcmV0dXJuIGkoZSx0LHkpO2lmKGUubWF0Y2goTSwhMCkpcmV0dXJuIHQuaHI9ITAsTC5ocjtpZigobCh0LnByZXZMaW5lKXx8YSkmJihlLm1hdGNoKE4sITEpfHxlLm1hdGNoKEEsITEpKSl7dmFyIGQ9bnVsbDtyZXR1cm4gZS5tYXRjaChOLCEwKT9kPVwidWxcIjooZS5tYXRjaChBLCEwKSxkPVwib2xcIiksdC5pbmRlbnRhdGlvbj1lLmNvbHVtbigpK2UuY3VycmVudCgpLmxlbmd0aCx0Lmxpc3Q9ITAsdC5saXN0RGVwdGgrKyxuLnRhc2tMaXN0cyYmZS5tYXRjaChPLCExKSYmKHQudGFza0xpc3Q9ITApLHQuZj10LmlubGluZSxuLmhpZ2hsaWdodEZvcm1hdHRpbmcmJih0LmZvcm1hdHRpbmc9W1wibGlzdFwiLFwibGlzdC1cIitkXSksaCh0KX1yZXR1cm4gbi5mZW5jZWRDb2RlQmxvY2tzJiYoYz1lLm1hdGNoKEUsITApKT8odC5mZW5jZWRDaGFycz1jWzFdLHQubG9jYWxNb2RlPXIoY1syXSksdC5sb2NhbE1vZGUmJih0LmxvY2FsU3RhdGU9dC5sb2NhbE1vZGUuc3RhcnRTdGF0ZSgpKSx0LmY9dC5ibG9jaz11LG4uaGlnaGxpZ2h0Rm9ybWF0dGluZyYmKHQuZm9ybWF0dGluZz1cImNvZGUtYmxvY2tcIiksdC5jb2RlPSEwLGgodCkpOmkoZSx0LHQuaW5saW5lKX1mdW5jdGlvbiBjKGUsdCl7dmFyIG49Qy50b2tlbihlLHQuaHRtbFN0YXRlKTtyZXR1cm4oayYmbnVsbD09PXQuaHRtbFN0YXRlLnRhZ1N0YXJ0JiYhdC5odG1sU3RhdGUuY29udGV4dCYmdC5odG1sU3RhdGUudG9rZW5pemUuaXNJblRleHR8fHQubWRfaW5zaWRlJiZlLmN1cnJlbnQoKS5pbmRleE9mKFwiPlwiKT4tMSkmJih0LmY9cCx0LmJsb2NrPXMsdC5odG1sU3RhdGU9bnVsbCksbn1mdW5jdGlvbiB1KGUsdCl7cmV0dXJuIGUuc29sKCkmJnQuZmVuY2VkQ2hhcnMmJmUubWF0Y2godC5mZW5jZWRDaGFycywhMSk/KHQubG9jYWxNb2RlPXQubG9jYWxTdGF0ZT1udWxsLHQuZj10LmJsb2NrPWQsbnVsbCk6dC5sb2NhbE1vZGU/dC5sb2NhbE1vZGUudG9rZW4oZSx0LmxvY2FsU3RhdGUpOihlLnNraXBUb0VuZCgpLEwuY29kZSl9ZnVuY3Rpb24gZChlLHQpe2UubWF0Y2godC5mZW5jZWRDaGFycyksdC5ibG9jaz1zLHQuZj1wLHQuZmVuY2VkQ2hhcnM9bnVsbCxuLmhpZ2hsaWdodEZvcm1hdHRpbmcmJih0LmZvcm1hdHRpbmc9XCJjb2RlLWJsb2NrXCIpLHQuY29kZT0hMDt2YXIgcj1oKHQpO3JldHVybiB0LmNvZGU9ITEscn1mdW5jdGlvbiBoKGUpe3ZhciB0PVtdO2lmKGUuZm9ybWF0dGluZyl7dC5wdXNoKEwuZm9ybWF0dGluZyksXCJzdHJpbmdcIj09dHlwZW9mIGUuZm9ybWF0dGluZyYmKGUuZm9ybWF0dGluZz1bZS5mb3JtYXR0aW5nXSk7Zm9yKHZhciByPTA7cjxlLmZvcm1hdHRpbmcubGVuZ3RoO3IrKyl0LnB1c2goTC5mb3JtYXR0aW5nK1wiLVwiK2UuZm9ybWF0dGluZ1tyXSksXCJoZWFkZXJcIj09PWUuZm9ybWF0dGluZ1tyXSYmdC5wdXNoKEwuZm9ybWF0dGluZytcIi1cIitlLmZvcm1hdHRpbmdbcl0rXCItXCIrZS5oZWFkZXIpLFwicXVvdGVcIj09PWUuZm9ybWF0dGluZ1tyXSYmKCFuLm1heEJsb2NrcXVvdGVEZXB0aHx8bi5tYXhCbG9ja3F1b3RlRGVwdGg+PWUucXVvdGU/dC5wdXNoKEwuZm9ybWF0dGluZytcIi1cIitlLmZvcm1hdHRpbmdbcl0rXCItXCIrZS5xdW90ZSk6dC5wdXNoKFwiZXJyb3JcIikpfWlmKGUudGFza09wZW4pcmV0dXJuIHQucHVzaChcIm1ldGFcIiksdC5sZW5ndGg/dC5qb2luKFwiIFwiKTpudWxsO2lmKGUudGFza0Nsb3NlZClyZXR1cm4gdC5wdXNoKFwicHJvcGVydHlcIiksdC5sZW5ndGg/dC5qb2luKFwiIFwiKTpudWxsO2lmKGUubGlua0hyZWY/dC5wdXNoKEwubGlua0hyZWYsXCJ1cmxcIik6KGUuc3Ryb25nJiZ0LnB1c2goTC5zdHJvbmcpLGUuZW0mJnQucHVzaChMLmVtKSxlLnN0cmlrZXRocm91Z2gmJnQucHVzaChMLnN0cmlrZXRocm91Z2gpLGUubGlua1RleHQmJnQucHVzaChMLmxpbmtUZXh0KSxlLmNvZGUmJnQucHVzaChMLmNvZGUpKSxlLmhlYWRlciYmdC5wdXNoKEwuaGVhZGVyLEwuaGVhZGVyK1wiLVwiK2UuaGVhZGVyKSxlLnF1b3RlJiYodC5wdXNoKEwucXVvdGUpLCFuLm1heEJsb2NrcXVvdGVEZXB0aHx8bi5tYXhCbG9ja3F1b3RlRGVwdGg+PWUucXVvdGU/dC5wdXNoKEwucXVvdGUrXCItXCIrZS5xdW90ZSk6dC5wdXNoKEwucXVvdGUrXCItXCIrbi5tYXhCbG9ja3F1b3RlRGVwdGgpKSxlLmxpc3QhPT0hMSl7dmFyIGk9KGUubGlzdERlcHRoLTEpJTM7aT8xPT09aT90LnB1c2goTC5saXN0Mik6dC5wdXNoKEwubGlzdDMpOnQucHVzaChMLmxpc3QxKX1yZXR1cm4gZS50cmFpbGluZ1NwYWNlTmV3TGluZT90LnB1c2goXCJ0cmFpbGluZy1zcGFjZS1uZXctbGluZVwiKTplLnRyYWlsaW5nU3BhY2UmJnQucHVzaChcInRyYWlsaW5nLXNwYWNlLVwiKyhlLnRyYWlsaW5nU3BhY2UlMj9cImFcIjpcImJcIikpLHQubGVuZ3RoP3Quam9pbihcIiBcIik6bnVsbH1mdW5jdGlvbiBmKGUsdCl7cmV0dXJuIGUubWF0Y2goRCwhMCk/aCh0KTp2b2lkIDB9ZnVuY3Rpb24gcCh0LHIpe3ZhciBpPXIudGV4dCh0LHIpO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBpKXJldHVybiBpO2lmKHIubGlzdClyZXR1cm4gci5saXN0PW51bGwsaChyKTtpZihyLnRhc2tMaXN0KXt2YXIgbD1cInhcIiE9PXQubWF0Y2goTywhMClbMV07cmV0dXJuIGw/ci50YXNrT3Blbj0hMDpyLnRhc2tDbG9zZWQ9ITAsbi5oaWdobGlnaHRGb3JtYXR0aW5nJiYoci5mb3JtYXR0aW5nPVwidGFza1wiKSxyLnRhc2tMaXN0PSExLGgocil9aWYoci50YXNrT3Blbj0hMSxyLnRhc2tDbG9zZWQ9ITEsci5oZWFkZXImJnQubWF0Y2goL14jKyQvLCEwKSlyZXR1cm4gbi5oaWdobGlnaHRGb3JtYXR0aW5nJiYoci5mb3JtYXR0aW5nPVwiaGVhZGVyXCIpLGgocik7dmFyIGE9dC5zb2woKSxzPXQubmV4dCgpO2lmKFwiXFxcXFwiPT09cyYmKHQubmV4dCgpLG4uaGlnaGxpZ2h0Rm9ybWF0dGluZykpe3ZhciB1PWgociksZD1MLmZvcm1hdHRpbmcrXCItZXNjYXBlXCI7cmV0dXJuIHU/dStcIiBcIitkOmR9aWYoci5saW5rVGl0bGUpe3IubGlua1RpdGxlPSExO3ZhciBmPXM7XCIoXCI9PT1zJiYoZj1cIilcIiksZj0oZitcIlwiKS5yZXBsYWNlKC8oWy4/KiteJFtcXF1cXFxcKCl7fXwtXSkvZyxcIlxcXFwkMVwiKTt2YXIgcD1cIl5cXFxccyooPzpbXlwiK2YrXCJcXFxcXFxcXF0rfFxcXFxcXFxcXFxcXFxcXFx8XFxcXFxcXFwuKVwiK2Y7aWYodC5tYXRjaChuZXcgUmVnRXhwKHApLCEwKSlyZXR1cm4gTC5saW5rSHJlZn1pZihcImBcIj09PXMpe3ZhciB2PXIuZm9ybWF0dGluZztuLmhpZ2hsaWdodEZvcm1hdHRpbmcmJihyLmZvcm1hdHRpbmc9XCJjb2RlXCIpO3ZhciB5PWgocikseD10LnBvczt0LmVhdFdoaWxlKFwiYFwiKTt2YXIgYj0xK3QucG9zLXg7cmV0dXJuIHIuY29kZT9iPT09Uz8oci5jb2RlPSExLHkpOihyLmZvcm1hdHRpbmc9dixoKHIpKTooUz1iLHIuY29kZT0hMCxoKHIpKX1pZihyLmNvZGUpcmV0dXJuIGgocik7aWYoXCIhXCI9PT1zJiZ0Lm1hdGNoKC9cXFtbXlxcXV0qXFxdID8oPzpcXCh8XFxbKS8sITEpKXJldHVybiB0Lm1hdGNoKC9cXFtbXlxcXV0qXFxdLyksci5pbmxpbmU9ci5mPWcsTC5pbWFnZTtpZihcIltcIj09PXMmJnQubWF0Y2goLy4qXFxdKFxcKC4qXFwpfCA/XFxbLipcXF0pLywhMSkpcmV0dXJuIHIubGlua1RleHQ9ITAsbi5oaWdobGlnaHRGb3JtYXR0aW5nJiYoci5mb3JtYXR0aW5nPVwibGlua1wiKSxoKHIpO2lmKFwiXVwiPT09cyYmci5saW5rVGV4dCYmdC5tYXRjaCgvXFwoLipcXCl8ID9cXFsuKlxcXS8sITEpKXtuLmhpZ2hsaWdodEZvcm1hdHRpbmcmJihyLmZvcm1hdHRpbmc9XCJsaW5rXCIpO3ZhciB1PWgocik7cmV0dXJuIHIubGlua1RleHQ9ITEsci5pbmxpbmU9ci5mPWcsdX1pZihcIjxcIj09PXMmJnQubWF0Y2goL14oaHR0cHM/fGZ0cHM/KTpcXC9cXC8oPzpbXlxcXFw+XXxcXFxcLikrPi8sITEpKXtyLmY9ci5pbmxpbmU9bSxuLmhpZ2hsaWdodEZvcm1hdHRpbmcmJihyLmZvcm1hdHRpbmc9XCJsaW5rXCIpO3ZhciB1PWgocik7cmV0dXJuIHU/dSs9XCIgXCI6dT1cIlwiLHUrTC5saW5rSW5saW5lfWlmKFwiPFwiPT09cyYmdC5tYXRjaCgvXltePiBcXFxcXStAKD86W15cXFxcPl18XFxcXC4pKz4vLCExKSl7ci5mPXIuaW5saW5lPW0sbi5oaWdobGlnaHRGb3JtYXR0aW5nJiYoci5mb3JtYXR0aW5nPVwibGlua1wiKTt2YXIgdT1oKHIpO3JldHVybiB1P3UrPVwiIFwiOnU9XCJcIix1K0wubGlua0VtYWlsfWlmKFwiPFwiPT09cyYmdC5tYXRjaCgvXighLS18XFx3KS8sITEpKXt2YXIgdz10LnN0cmluZy5pbmRleE9mKFwiPlwiLHQucG9zKTtpZigtMSE9dyl7dmFyIGs9dC5zdHJpbmcuc3Vic3RyaW5nKHQuc3RhcnQsdyk7L21hcmtkb3duXFxzKj1cXHMqKCd8XCIpezAsMX0xKCd8XCIpezAsMX0vLnRlc3QoaykmJihyLm1kX2luc2lkZT0hMCl9cmV0dXJuIHQuYmFja1VwKDEpLHIuaHRtbFN0YXRlPWUuc3RhcnRTdGF0ZShDKSxvKHQscixjKX1pZihcIjxcIj09PXMmJnQubWF0Y2goL15cXC9cXHcqPz4vKSlyZXR1cm4gci5tZF9pbnNpZGU9ITEsXCJ0YWdcIjt2YXIgVD0hMTtpZighbi51bmRlcnNjb3Jlc0JyZWFrV29yZHMmJlwiX1wiPT09cyYmXCJfXCIhPT10LnBlZWsoKSYmdC5tYXRjaCgvKFxcdykvLCExKSl7dmFyIE09dC5wb3MtMjtpZihNPj0wKXt2YXIgTj10LnN0cmluZy5jaGFyQXQoTSk7XCJfXCIhPT1OJiZOLm1hdGNoKC8oXFx3KS8sITEpJiYoVD0hMCl9fWlmKFwiKlwiPT09c3x8XCJfXCI9PT1zJiYhVClpZihhJiZcIiBcIj09PXQucGVlaygpKTtlbHNle2lmKHIuc3Ryb25nPT09cyYmdC5lYXQocykpe24uaGlnaGxpZ2h0Rm9ybWF0dGluZyYmKHIuZm9ybWF0dGluZz1cInN0cm9uZ1wiKTt2YXIgeT1oKHIpO3JldHVybiByLnN0cm9uZz0hMSx5fWlmKCFyLnN0cm9uZyYmdC5lYXQocykpcmV0dXJuIHIuc3Ryb25nPXMsbi5oaWdobGlnaHRGb3JtYXR0aW5nJiYoci5mb3JtYXR0aW5nPVwic3Ryb25nXCIpLGgocik7aWYoci5lbT09PXMpe24uaGlnaGxpZ2h0Rm9ybWF0dGluZyYmKHIuZm9ybWF0dGluZz1cImVtXCIpO3ZhciB5PWgocik7cmV0dXJuIHIuZW09ITEseX1pZighci5lbSlyZXR1cm4gci5lbT1zLG4uaGlnaGxpZ2h0Rm9ybWF0dGluZyYmKHIuZm9ybWF0dGluZz1cImVtXCIpLGgocil9ZWxzZSBpZihcIiBcIj09PXMmJih0LmVhdChcIipcIil8fHQuZWF0KFwiX1wiKSkpe2lmKFwiIFwiPT09dC5wZWVrKCkpcmV0dXJuIGgocik7dC5iYWNrVXAoMSl9aWYobi5zdHJpa2V0aHJvdWdoKWlmKFwiflwiPT09cyYmdC5lYXRXaGlsZShzKSl7aWYoci5zdHJpa2V0aHJvdWdoKXtuLmhpZ2hsaWdodEZvcm1hdHRpbmcmJihyLmZvcm1hdHRpbmc9XCJzdHJpa2V0aHJvdWdoXCIpO3ZhciB5PWgocik7cmV0dXJuIHIuc3RyaWtldGhyb3VnaD0hMSx5fWlmKHQubWF0Y2goL15bXlxcc10vLCExKSlyZXR1cm4gci5zdHJpa2V0aHJvdWdoPSEwLG4uaGlnaGxpZ2h0Rm9ybWF0dGluZyYmKHIuZm9ybWF0dGluZz1cInN0cmlrZXRocm91Z2hcIiksaChyKX1lbHNlIGlmKFwiIFwiPT09cyYmdC5tYXRjaCgvXn5+LywhMCkpe2lmKFwiIFwiPT09dC5wZWVrKCkpcmV0dXJuIGgocik7dC5iYWNrVXAoMil9cmV0dXJuXCIgXCI9PT1zJiYodC5tYXRjaCgvICskLywhMSk/ci50cmFpbGluZ1NwYWNlKys6ci50cmFpbGluZ1NwYWNlJiYoci50cmFpbGluZ1NwYWNlTmV3TGluZT0hMCkpLGgocil9ZnVuY3Rpb24gbShlLHQpe3ZhciByPWUubmV4dCgpO2lmKFwiPlwiPT09cil7dC5mPXQuaW5saW5lPXAsbi5oaWdobGlnaHRGb3JtYXR0aW5nJiYodC5mb3JtYXR0aW5nPVwibGlua1wiKTt2YXIgaT1oKHQpO3JldHVybiBpP2krPVwiIFwiOmk9XCJcIixpK0wubGlua0lubGluZX1yZXR1cm4gZS5tYXRjaCgvXltePl0rLywhMCksTC5saW5rSW5saW5lfWZ1bmN0aW9uIGcoZSx0KXtpZihlLmVhdFNwYWNlKCkpcmV0dXJuIG51bGw7dmFyIHI9ZS5uZXh0KCk7cmV0dXJuXCIoXCI9PT1yfHxcIltcIj09PXI/KHQuZj10LmlubGluZT12KFwiKFwiPT09cj9cIilcIjpcIl1cIiksbi5oaWdobGlnaHRGb3JtYXR0aW5nJiYodC5mb3JtYXR0aW5nPVwibGluay1zdHJpbmdcIiksdC5saW5rSHJlZj0hMCxoKHQpKTpcImVycm9yXCJ9ZnVuY3Rpb24gdihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgaT10Lm5leHQoKTtpZihpPT09ZSl7ci5mPXIuaW5saW5lPXAsbi5oaWdobGlnaHRGb3JtYXR0aW5nJiYoci5mb3JtYXR0aW5nPVwibGluay1zdHJpbmdcIik7dmFyIG89aChyKTtyZXR1cm4gci5saW5rSHJlZj0hMSxvfXJldHVybiB0Lm1hdGNoKHcoZSksITApJiZ0LmJhY2tVcCgxKSxyLmxpbmtIcmVmPSEwLGgocil9fWZ1bmN0aW9uIHkoZSx0KXtyZXR1cm4gZS5tYXRjaCgvXlteXFxdXSpcXF06LywhMSk/KHQuZj14LGUubmV4dCgpLG4uaGlnaGxpZ2h0Rm9ybWF0dGluZyYmKHQuZm9ybWF0dGluZz1cImxpbmtcIiksdC5saW5rVGV4dD0hMCxoKHQpKTppKGUsdCxwKX1mdW5jdGlvbiB4KGUsdCl7aWYoZS5tYXRjaCgvXlxcXTovLCEwKSl7dC5mPXQuaW5saW5lPWIsbi5oaWdobGlnaHRGb3JtYXR0aW5nJiYodC5mb3JtYXR0aW5nPVwibGlua1wiKTt2YXIgcj1oKHQpO3JldHVybiB0LmxpbmtUZXh0PSExLHJ9cmV0dXJuIGUubWF0Y2goL15bXlxcXV0rLywhMCksTC5saW5rVGV4dH1mdW5jdGlvbiBiKGUsdCl7cmV0dXJuIGUuZWF0U3BhY2UoKT9udWxsOihlLm1hdGNoKC9eW15cXHNdKy8sITApLHZvaWQgMD09PWUucGVlaygpP3QubGlua1RpdGxlPSEwOmUubWF0Y2goL14oPzpcXHMrKD86XCIoPzpbXlwiXFxcXF18XFxcXFxcXFx8XFxcXC4pK1wifCcoPzpbXidcXFxcXXxcXFxcXFxcXHxcXFxcLikrJ3xcXCgoPzpbXilcXFxcXXxcXFxcXFxcXHxcXFxcLikrXFwpKSk/LywhMCksdC5mPXQuaW5saW5lPXAsTC5saW5rSHJlZitcIiB1cmxcIil9ZnVuY3Rpb24gdyhlKXtyZXR1cm4gSVtlXXx8KGU9KGUrXCJcIikucmVwbGFjZSgvKFsuPyorXiRbXFxdXFxcXCgpe318LV0pL2csXCJcXFxcJDFcIiksSVtlXT1uZXcgUmVnRXhwKFwiXig/OlteXFxcXFxcXFxdfFxcXFxcXFxcLikqPyhcIitlK1wiKVwiKSksSVtlXX12YXIgaz1lLm1vZGVzLmhhc093blByb3BlcnR5KFwieG1sXCIpLEM9ZS5nZXRNb2RlKHQsaz97bmFtZTpcInhtbFwiLGh0bWxNb2RlOiEwfTpcInRleHQvcGxhaW5cIik7dm9pZCAwPT09bi5oaWdobGlnaHRGb3JtYXR0aW5nJiYobi5oaWdobGlnaHRGb3JtYXR0aW5nPSExKSx2b2lkIDA9PT1uLm1heEJsb2NrcXVvdGVEZXB0aCYmKG4ubWF4QmxvY2txdW90ZURlcHRoPTApLHZvaWQgMD09PW4udW5kZXJzY29yZXNCcmVha1dvcmRzJiYobi51bmRlcnNjb3Jlc0JyZWFrV29yZHM9ITApLHZvaWQgMD09PW4udGFza0xpc3RzJiYobi50YXNrTGlzdHM9ITEpLHZvaWQgMD09PW4uc3RyaWtldGhyb3VnaCYmKG4uc3RyaWtldGhyb3VnaD0hMSksdm9pZCAwPT09bi50b2tlblR5cGVPdmVycmlkZXMmJihuLnRva2VuVHlwZU92ZXJyaWRlcz17fSk7dmFyIFM9MCxMPXtoZWFkZXI6XCJoZWFkZXJcIixjb2RlOlwiY29tbWVudFwiLHF1b3RlOlwicXVvdGVcIixsaXN0MTpcInZhcmlhYmxlLTJcIixsaXN0MjpcInZhcmlhYmxlLTNcIixsaXN0MzpcImtleXdvcmRcIixocjpcImhyXCIsaW1hZ2U6XCJ0YWdcIixmb3JtYXR0aW5nOlwiZm9ybWF0dGluZ1wiLGxpbmtJbmxpbmU6XCJsaW5rXCIsbGlua0VtYWlsOlwibGlua1wiLGxpbmtUZXh0OlwibGlua1wiLGxpbmtIcmVmOlwic3RyaW5nXCIsZW06XCJlbVwiLHN0cm9uZzpcInN0cm9uZ1wiLHN0cmlrZXRocm91Z2g6XCJzdHJpa2V0aHJvdWdoXCJ9O2Zvcih2YXIgVCBpbiBMKUwuaGFzT3duUHJvcGVydHkoVCkmJm4udG9rZW5UeXBlT3ZlcnJpZGVzW1RdJiYoTFtUXT1uLnRva2VuVHlwZU92ZXJyaWRlc1tUXSk7dmFyIE09L14oWypcXC1fXSkoPzpcXHMqXFwxKXsyLH1cXHMqJC8sTj0vXlsqXFwtK11cXHMrLyxBPS9eWzAtOV0rKFsuKV0pXFxzKy8sTz0vXlxcWyh4fCApXFxdKD89XFxzKS8sVz1uLmFsbG93QXR4SGVhZGVyV2l0aG91dFNwYWNlPy9eKCMrKS86L14oIyspKD86IHwkKS8sSD0vXiAqKD86XFw9ezEsfXwtezEsfSlcXHMqJC8sRD0vXlteIyFcXFtcXF0qX1xcXFw8PmAgXCInKH5dKy8sRT1uZXcgUmVnRXhwKFwiXihcIisobi5mZW5jZWRDb2RlQmxvY2tzPT09ITA/XCJ+fn4rfGBgYCtcIjpuLmZlbmNlZENvZGVCbG9ja3MpK1wiKVsgXFxcXHRdKihbXFxcXHcrI10qKVwiKSxJPVtdLFA9e3N0YXJ0U3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm57ZjpzLHByZXZMaW5lOm51bGwsdGhpc0xpbmU6bnVsbCxibG9jazpzLGh0bWxTdGF0ZTpudWxsLGluZGVudGF0aW9uOjAsaW5saW5lOnAsdGV4dDpmLGZvcm1hdHRpbmc6ITEsbGlua1RleHQ6ITEsbGlua0hyZWY6ITEsbGlua1RpdGxlOiExLGVtOiExLHN0cm9uZzohMSxoZWFkZXI6MCxocjohMSx0YXNrTGlzdDohMSxsaXN0OiExLGxpc3REZXB0aDowLHF1b3RlOjAsdHJhaWxpbmdTcGFjZTowLHRyYWlsaW5nU3BhY2VOZXdMaW5lOiExLHN0cmlrZXRocm91Z2g6ITEsZmVuY2VkQ2hhcnM6bnVsbH19LGNvcHlTdGF0ZTpmdW5jdGlvbih0KXtyZXR1cm57Zjp0LmYscHJldkxpbmU6dC5wcmV2TGluZSx0aGlzTGluZTp0W1widGhpc1wiXSxibG9jazp0LmJsb2NrLGh0bWxTdGF0ZTp0Lmh0bWxTdGF0ZSYmZS5jb3B5U3RhdGUoQyx0Lmh0bWxTdGF0ZSksaW5kZW50YXRpb246dC5pbmRlbnRhdGlvbixsb2NhbE1vZGU6dC5sb2NhbE1vZGUsbG9jYWxTdGF0ZTp0LmxvY2FsTW9kZT9lLmNvcHlTdGF0ZSh0LmxvY2FsTW9kZSx0LmxvY2FsU3RhdGUpOm51bGwsaW5saW5lOnQuaW5saW5lLHRleHQ6dC50ZXh0LGZvcm1hdHRpbmc6ITEsbGlua1RpdGxlOnQubGlua1RpdGxlLGNvZGU6dC5jb2RlLGVtOnQuZW0sc3Ryb25nOnQuc3Ryb25nLHN0cmlrZXRocm91Z2g6dC5zdHJpa2V0aHJvdWdoLGhlYWRlcjp0LmhlYWRlcixocjp0LmhyLHRhc2tMaXN0OnQudGFza0xpc3QsbGlzdDp0Lmxpc3QsbGlzdERlcHRoOnQubGlzdERlcHRoLHF1b3RlOnQucXVvdGUsaW5kZW50ZWRDb2RlOnQuaW5kZW50ZWRDb2RlLHRyYWlsaW5nU3BhY2U6dC50cmFpbGluZ1NwYWNlLHRyYWlsaW5nU3BhY2VOZXdMaW5lOnQudHJhaWxpbmdTcGFjZU5ld0xpbmUsbWRfaW5zaWRlOnQubWRfaW5zaWRlLGZlbmNlZENoYXJzOnQuZmVuY2VkQ2hhcnN9fSx0b2tlbjpmdW5jdGlvbihlLHQpe2lmKHQuZm9ybWF0dGluZz0hMSxlIT10LnRoaXNMaW5lKXt2YXIgbj10LmhlYWRlcnx8dC5ocjtpZih0LmhlYWRlcj0wLHQuaHI9ITEsZS5tYXRjaCgvXlxccyokLywhMCl8fG4pe2lmKGEodCksIW4pcmV0dXJuIG51bGw7dC5wcmV2TGluZT1udWxsfXQucHJldkxpbmU9dC50aGlzTGluZSx0LnRoaXNMaW5lPWUsdC50YXNrTGlzdD0hMSx0LnRyYWlsaW5nU3BhY2U9MCx0LnRyYWlsaW5nU3BhY2VOZXdMaW5lPSExLHQuZj10LmJsb2NrO3ZhciByPWUubWF0Y2goL15cXHMqLywhMClbMF0ucmVwbGFjZSgvXFx0L2csXCIgICAgXCIpLmxlbmd0aCxpPTQqTWF0aC5mbG9vcigoci10LmluZGVudGF0aW9uKS80KTtpPjQmJihpPTQpO3ZhciBvPXQuaW5kZW50YXRpb24raTtpZih0LmluZGVudGF0aW9uRGlmZj1vLXQuaW5kZW50YXRpb24sdC5pbmRlbnRhdGlvbj1vLHI+MClyZXR1cm4gbnVsbH1yZXR1cm4gdC5mKGUsdCl9LGlubmVyTW9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ibG9jaz09Yz97c3RhdGU6ZS5odG1sU3RhdGUsbW9kZTpDfTplLmxvY2FsU3RhdGU/e3N0YXRlOmUubG9jYWxTdGF0ZSxtb2RlOmUubG9jYWxNb2RlfTp7c3RhdGU6ZSxtb2RlOlB9fSxibGFua0xpbmU6YSxnZXRUeXBlOmgsZm9sZDpcIm1hcmtkb3duXCJ9O3JldHVybiBQfSxcInhtbFwiKSxlLmRlZmluZU1JTUUoXCJ0ZXh0L3gtbWFya2Rvd25cIixcIm1hcmtkb3duXCIpfSl9LHtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCI6NixcIi4uL21ldGFcIjo5LFwiLi4veG1sL3htbFwiOjEwfV0sOTpbZnVuY3Rpb24odCxuLHIpeyFmdW5jdGlvbihpKXtcIm9iamVjdFwiPT10eXBlb2YgciYmXCJvYmplY3RcIj09dHlwZW9mIG4/aSh0KFwiLi4vbGliL2NvZGVtaXJyb3JcIikpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUuYW1kP2UoW1wiLi4vbGliL2NvZGVtaXJyb3JcIl0saSk6aShDb2RlTWlycm9yKX0oZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZS5tb2RlSW5mbz1be25hbWU6XCJBUExcIixtaW1lOlwidGV4dC9hcGxcIixtb2RlOlwiYXBsXCIsZXh0OltcImR5YWxvZ1wiLFwiYXBsXCJdfSx7bmFtZTpcIlBHUFwiLG1pbWVzOltcImFwcGxpY2F0aW9uL3BncFwiLFwiYXBwbGljYXRpb24vcGdwLWtleXNcIixcImFwcGxpY2F0aW9uL3BncC1zaWduYXR1cmVcIl0sbW9kZTpcImFzY2lpYXJtb3JcIixleHQ6W1wicGdwXCJdfSx7bmFtZTpcIkFTTi4xXCIsbWltZTpcInRleHQveC10dGNuLWFzblwiLG1vZGU6XCJhc24uMVwiLGV4dDpbXCJhc25cIixcImFzbjFcIl19LHtuYW1lOlwiQXN0ZXJpc2tcIixtaW1lOlwidGV4dC94LWFzdGVyaXNrXCIsbW9kZTpcImFzdGVyaXNrXCIsZmlsZTovXmV4dGVuc2lvbnNcXC5jb25mJC9pfSx7bmFtZTpcIkJyYWluZnVja1wiLG1pbWU6XCJ0ZXh0L3gtYnJhaW5mdWNrXCIsbW9kZTpcImJyYWluZnVja1wiLGV4dDpbXCJiXCIsXCJiZlwiXX0se25hbWU6XCJDXCIsbWltZTpcInRleHQveC1jc3JjXCIsbW9kZTpcImNsaWtlXCIsZXh0OltcImNcIixcImhcIl19LHtuYW1lOlwiQysrXCIsbWltZTpcInRleHQveC1jKytzcmNcIixtb2RlOlwiY2xpa2VcIixleHQ6W1wiY3BwXCIsXCJjKytcIixcImNjXCIsXCJjeHhcIixcImhwcFwiLFwiaCsrXCIsXCJoaFwiLFwiaHh4XCJdLGFsaWFzOltcImNwcFwiXX0se25hbWU6XCJDb2JvbFwiLG1pbWU6XCJ0ZXh0L3gtY29ib2xcIixtb2RlOlwiY29ib2xcIixleHQ6W1wiY29iXCIsXCJjcHlcIl19LHtuYW1lOlwiQyNcIixtaW1lOlwidGV4dC94LWNzaGFycFwiLG1vZGU6XCJjbGlrZVwiLGV4dDpbXCJjc1wiXSxhbGlhczpbXCJjc2hhcnBcIl19LHtuYW1lOlwiQ2xvanVyZVwiLG1pbWU6XCJ0ZXh0L3gtY2xvanVyZVwiLG1vZGU6XCJjbG9qdXJlXCIsZXh0OltcImNsalwiXX0se25hbWU6XCJDbG9zdXJlIFN0eWxlc2hlZXRzIChHU1MpXCIsbWltZTpcInRleHQveC1nc3NcIixtb2RlOlwiY3NzXCIsZXh0OltcImdzc1wiXX0se25hbWU6XCJDTWFrZVwiLG1pbWU6XCJ0ZXh0L3gtY21ha2VcIixtb2RlOlwiY21ha2VcIixleHQ6W1wiY21ha2VcIixcImNtYWtlLmluXCJdLGZpbGU6L15DTWFrZUxpc3RzLnR4dCQvfSx7bmFtZTpcIkNvZmZlZVNjcmlwdFwiLG1pbWU6XCJ0ZXh0L3gtY29mZmVlc2NyaXB0XCIsbW9kZTpcImNvZmZlZXNjcmlwdFwiLGV4dDpbXCJjb2ZmZWVcIl0sYWxpYXM6W1wiY29mZmVlXCIsXCJjb2ZmZWUtc2NyaXB0XCJdfSx7bmFtZTpcIkNvbW1vbiBMaXNwXCIsbWltZTpcInRleHQveC1jb21tb24tbGlzcFwiLG1vZGU6XCJjb21tb25saXNwXCIsZXh0OltcImNsXCIsXCJsaXNwXCIsXCJlbFwiXSxhbGlhczpbXCJsaXNwXCJdfSx7bmFtZTpcIkN5cGhlclwiLG1pbWU6XCJhcHBsaWNhdGlvbi94LWN5cGhlci1xdWVyeVwiLG1vZGU6XCJjeXBoZXJcIixleHQ6W1wiY3lwXCIsXCJjeXBoZXJcIl19LHtuYW1lOlwiQ3l0aG9uXCIsbWltZTpcInRleHQveC1jeXRob25cIixtb2RlOlwicHl0aG9uXCIsZXh0OltcInB5eFwiLFwicHhkXCIsXCJweGlcIl19LHtuYW1lOlwiQ1NTXCIsbWltZTpcInRleHQvY3NzXCIsbW9kZTpcImNzc1wiLGV4dDpbXCJjc3NcIl19LHtuYW1lOlwiQ1FMXCIsbWltZTpcInRleHQveC1jYXNzYW5kcmFcIixtb2RlOlwic3FsXCIsZXh0OltcImNxbFwiXX0se25hbWU6XCJEXCIsbWltZTpcInRleHQveC1kXCIsbW9kZTpcImRcIixleHQ6W1wiZFwiXX0se25hbWU6XCJEYXJ0XCIsbWltZXM6W1wiYXBwbGljYXRpb24vZGFydFwiLFwidGV4dC94LWRhcnRcIl0sbW9kZTpcImRhcnRcIixleHQ6W1wiZGFydFwiXX0se25hbWU6XCJkaWZmXCIsbWltZTpcInRleHQveC1kaWZmXCIsbW9kZTpcImRpZmZcIixleHQ6W1wiZGlmZlwiLFwicGF0Y2hcIl19LHtuYW1lOlwiRGphbmdvXCIsbWltZTpcInRleHQveC1kamFuZ29cIixtb2RlOlwiZGphbmdvXCJ9LHtuYW1lOlwiRG9ja2VyZmlsZVwiLG1pbWU6XCJ0ZXh0L3gtZG9ja2VyZmlsZVwiLG1vZGU6XCJkb2NrZXJmaWxlXCIsZmlsZTovXkRvY2tlcmZpbGUkL30se25hbWU6XCJEVERcIixtaW1lOlwiYXBwbGljYXRpb24veG1sLWR0ZFwiLG1vZGU6XCJkdGRcIixleHQ6W1wiZHRkXCJdfSx7bmFtZTpcIkR5bGFuXCIsbWltZTpcInRleHQveC1keWxhblwiLG1vZGU6XCJkeWxhblwiLGV4dDpbXCJkeWxhblwiLFwiZHlsXCIsXCJpbnRyXCJdfSx7bmFtZTpcIkVCTkZcIixtaW1lOlwidGV4dC94LWVibmZcIixtb2RlOlwiZWJuZlwifSx7bmFtZTpcIkVDTFwiLG1pbWU6XCJ0ZXh0L3gtZWNsXCIsbW9kZTpcImVjbFwiLGV4dDpbXCJlY2xcIl19LHtuYW1lOlwiRWlmZmVsXCIsbWltZTpcInRleHQveC1laWZmZWxcIixtb2RlOlwiZWlmZmVsXCIsZXh0OltcImVcIl19LHtuYW1lOlwiRWxtXCIsbWltZTpcInRleHQveC1lbG1cIixtb2RlOlwiZWxtXCIsZXh0OltcImVsbVwiXX0se25hbWU6XCJFbWJlZGRlZCBKYXZhc2NyaXB0XCIsbWltZTpcImFwcGxpY2F0aW9uL3gtZWpzXCIsbW9kZTpcImh0bWxlbWJlZGRlZFwiLGV4dDpbXCJlanNcIl19LHtuYW1lOlwiRW1iZWRkZWQgUnVieVwiLG1pbWU6XCJhcHBsaWNhdGlvbi94LWVyYlwiLG1vZGU6XCJodG1sZW1iZWRkZWRcIixleHQ6W1wiZXJiXCJdfSx7bmFtZTpcIkVybGFuZ1wiLG1pbWU6XCJ0ZXh0L3gtZXJsYW5nXCIsbW9kZTpcImVybGFuZ1wiLGV4dDpbXCJlcmxcIl19LHtuYW1lOlwiRmFjdG9yXCIsbWltZTpcInRleHQveC1mYWN0b3JcIixtb2RlOlwiZmFjdG9yXCIsZXh0OltcImZhY3RvclwiXX0se25hbWU6XCJGb3J0aFwiLG1pbWU6XCJ0ZXh0L3gtZm9ydGhcIixtb2RlOlwiZm9ydGhcIixleHQ6W1wiZm9ydGhcIixcImZ0aFwiLFwiNHRoXCJdfSx7bmFtZTpcIkZvcnRyYW5cIixtaW1lOlwidGV4dC94LWZvcnRyYW5cIixtb2RlOlwiZm9ydHJhblwiLGV4dDpbXCJmXCIsXCJmb3JcIixcImY3N1wiLFwiZjkwXCJdfSx7bmFtZTpcIkYjXCIsbWltZTpcInRleHQveC1mc2hhcnBcIixtb2RlOlwibWxsaWtlXCIsZXh0OltcImZzXCJdLGFsaWFzOltcImZzaGFycFwiXX0se25hbWU6XCJHYXNcIixtaW1lOlwidGV4dC94LWdhc1wiLG1vZGU6XCJnYXNcIixleHQ6W1wic1wiXX0se25hbWU6XCJHaGVya2luXCIsbWltZTpcInRleHQveC1mZWF0dXJlXCIsbW9kZTpcImdoZXJraW5cIixleHQ6W1wiZmVhdHVyZVwiXX0se25hbWU6XCJHaXRIdWIgRmxhdm9yZWQgTWFya2Rvd25cIixtaW1lOlwidGV4dC94LWdmbVwiLG1vZGU6XCJnZm1cIixmaWxlOi9eKHJlYWRtZXxjb250cmlidXRpbmd8aGlzdG9yeSkubWQkL2l9LHtuYW1lOlwiR29cIixtaW1lOlwidGV4dC94LWdvXCIsbW9kZTpcImdvXCIsZXh0OltcImdvXCJdfSx7bmFtZTpcIkdyb292eVwiLG1pbWU6XCJ0ZXh0L3gtZ3Jvb3Z5XCIsbW9kZTpcImdyb292eVwiLGV4dDpbXCJncm9vdnlcIl19LHtuYW1lOlwiSEFNTFwiLG1pbWU6XCJ0ZXh0L3gtaGFtbFwiLG1vZGU6XCJoYW1sXCIsZXh0OltcImhhbWxcIl19LHtuYW1lOlwiSGFza2VsbFwiLG1pbWU6XCJ0ZXh0L3gtaGFza2VsbFwiLG1vZGU6XCJoYXNrZWxsXCIsZXh0OltcImhzXCJdfSx7bmFtZTpcIkhheGVcIixtaW1lOlwidGV4dC94LWhheGVcIixtb2RlOlwiaGF4ZVwiLGV4dDpbXCJoeFwiXX0se25hbWU6XCJIWE1MXCIsbWltZTpcInRleHQveC1oeG1sXCIsbW9kZTpcImhheGVcIixleHQ6W1wiaHhtbFwiXX0se25hbWU6XCJBU1AuTkVUXCIsbWltZTpcImFwcGxpY2F0aW9uL3gtYXNweFwiLG1vZGU6XCJodG1sZW1iZWRkZWRcIixleHQ6W1wiYXNweFwiXSxhbGlhczpbXCJhc3BcIixcImFzcHhcIl19LHtuYW1lOlwiSFRNTFwiLG1pbWU6XCJ0ZXh0L2h0bWxcIixtb2RlOlwiaHRtbG1peGVkXCIsZXh0OltcImh0bWxcIixcImh0bVwiXSxhbGlhczpbXCJ4aHRtbFwiXX0se25hbWU6XCJIVFRQXCIsbWltZTpcIm1lc3NhZ2UvaHR0cFwiLG1vZGU6XCJodHRwXCJ9LHtuYW1lOlwiSURMXCIsbWltZTpcInRleHQveC1pZGxcIixtb2RlOlwiaWRsXCIsZXh0OltcInByb1wiXX0se25hbWU6XCJKYWRlXCIsbWltZTpcInRleHQveC1qYWRlXCIsbW9kZTpcImphZGVcIixleHQ6W1wiamFkZVwiXX0se25hbWU6XCJKYXZhXCIsbWltZTpcInRleHQveC1qYXZhXCIsbW9kZTpcImNsaWtlXCIsZXh0OltcImphdmFcIl19LHtuYW1lOlwiSmF2YSBTZXJ2ZXIgUGFnZXNcIixtaW1lOlwiYXBwbGljYXRpb24veC1qc3BcIixtb2RlOlwiaHRtbGVtYmVkZGVkXCIsZXh0OltcImpzcFwiXSxhbGlhczpbXCJqc3BcIl19LHtuYW1lOlwiSmF2YVNjcmlwdFwiLG1pbWVzOltcInRleHQvamF2YXNjcmlwdFwiLFwidGV4dC9lY21hc2NyaXB0XCIsXCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0XCIsXCJhcHBsaWNhdGlvbi94LWphdmFzY3JpcHRcIixcImFwcGxpY2F0aW9uL2VjbWFzY3JpcHRcIl0sbW9kZTpcImphdmFzY3JpcHRcIixleHQ6W1wianNcIl0sYWxpYXM6W1wiZWNtYXNjcmlwdFwiLFwianNcIixcIm5vZGVcIl19LHtuYW1lOlwiSlNPTlwiLG1pbWVzOltcImFwcGxpY2F0aW9uL2pzb25cIixcImFwcGxpY2F0aW9uL3gtanNvblwiXSxtb2RlOlwiamF2YXNjcmlwdFwiLGV4dDpbXCJqc29uXCIsXCJtYXBcIl0sYWxpYXM6W1wianNvbjVcIl19LHtuYW1lOlwiSlNPTi1MRFwiLG1pbWU6XCJhcHBsaWNhdGlvbi9sZCtqc29uXCIsbW9kZTpcImphdmFzY3JpcHRcIixleHQ6W1wianNvbmxkXCJdLGFsaWFzOltcImpzb25sZFwiXX0se25hbWU6XCJKaW5qYTJcIixtaW1lOlwibnVsbFwiLG1vZGU6XCJqaW5qYTJcIn0se25hbWU6XCJKdWxpYVwiLG1pbWU6XCJ0ZXh0L3gtanVsaWFcIixtb2RlOlwianVsaWFcIixleHQ6W1wiamxcIl19LHtuYW1lOlwiS290bGluXCIsbWltZTpcInRleHQveC1rb3RsaW5cIixtb2RlOlwiY2xpa2VcIixleHQ6W1wia3RcIl19LHtuYW1lOlwiTEVTU1wiLG1pbWU6XCJ0ZXh0L3gtbGVzc1wiLG1vZGU6XCJjc3NcIixleHQ6W1wibGVzc1wiXX0se25hbWU6XCJMaXZlU2NyaXB0XCIsbWltZTpcInRleHQveC1saXZlc2NyaXB0XCIsbW9kZTpcImxpdmVzY3JpcHRcIixleHQ6W1wibHNcIl0sYWxpYXM6W1wibHNcIl19LHtuYW1lOlwiTHVhXCIsbWltZTpcInRleHQveC1sdWFcIixtb2RlOlwibHVhXCIsZXh0OltcImx1YVwiXX0se25hbWU6XCJNYXJrZG93blwiLG1pbWU6XCJ0ZXh0L3gtbWFya2Rvd25cIixtb2RlOlwibWFya2Rvd25cIixleHQ6W1wibWFya2Rvd25cIixcIm1kXCIsXCJta2RcIl19LHtuYW1lOlwibUlSQ1wiLG1pbWU6XCJ0ZXh0L21pcmNcIixtb2RlOlwibWlyY1wifSx7bmFtZTpcIk1hcmlhREIgU1FMXCIsbWltZTpcInRleHQveC1tYXJpYWRiXCIsbW9kZTpcInNxbFwifSx7bmFtZTpcIk1hdGhlbWF0aWNhXCIsbWltZTpcInRleHQveC1tYXRoZW1hdGljYVwiLG1vZGU6XCJtYXRoZW1hdGljYVwiLGV4dDpbXCJtXCIsXCJuYlwiXX0se25hbWU6XCJNb2RlbGljYVwiLG1pbWU6XCJ0ZXh0L3gtbW9kZWxpY2FcIixtb2RlOlwibW9kZWxpY2FcIixleHQ6W1wibW9cIl19LHtuYW1lOlwiTVVNUFNcIixtaW1lOlwidGV4dC94LW11bXBzXCIsbW9kZTpcIm11bXBzXCJ9LHtuYW1lOlwiTVMgU1FMXCIsbWltZTpcInRleHQveC1tc3NxbFwiLG1vZGU6XCJzcWxcIn0se25hbWU6XCJNeVNRTFwiLG1pbWU6XCJ0ZXh0L3gtbXlzcWxcIixtb2RlOlwic3FsXCJ9LHtuYW1lOlwiTmdpbnhcIixtaW1lOlwidGV4dC94LW5naW54LWNvbmZcIixtb2RlOlwibmdpbnhcIixmaWxlOi9uZ2lueC4qXFwuY29uZiQvaX0se25hbWU6XCJOU0lTXCIsbWltZTpcInRleHQveC1uc2lzXCIsbW9kZTpcIm5zaXNcIixleHQ6W1wibnNoXCIsXCJuc2lcIl19LHtuYW1lOlwiTlRyaXBsZXNcIixtaW1lOlwidGV4dC9uLXRyaXBsZXNcIixtb2RlOlwibnRyaXBsZXNcIixleHQ6W1wibnRcIl19LHtuYW1lOlwiT2JqZWN0aXZlIENcIixtaW1lOlwidGV4dC94LW9iamVjdGl2ZWNcIixtb2RlOlwiY2xpa2VcIixleHQ6W1wibVwiLFwibW1cIl19LHtuYW1lOlwiT0NhbWxcIixtaW1lOlwidGV4dC94LW9jYW1sXCIsbW9kZTpcIm1sbGlrZVwiLGV4dDpbXCJtbFwiLFwibWxpXCIsXCJtbGxcIixcIm1seVwiXX0se25hbWU6XCJPY3RhdmVcIixtaW1lOlwidGV4dC94LW9jdGF2ZVwiLG1vZGU6XCJvY3RhdmVcIixleHQ6W1wibVwiXX0se25hbWU6XCJPelwiLG1pbWU6XCJ0ZXh0L3gtb3pcIixtb2RlOlwib3pcIixleHQ6W1wib3pcIl19LHtuYW1lOlwiUGFzY2FsXCIsbWltZTpcInRleHQveC1wYXNjYWxcIixtb2RlOlwicGFzY2FsXCIsZXh0OltcInBcIixcInBhc1wiXX0se25hbWU6XCJQRUcuanNcIixtaW1lOlwibnVsbFwiLG1vZGU6XCJwZWdqc1wiLGV4dDpbXCJqc29ubGRcIl19LHtuYW1lOlwiUGVybFwiLG1pbWU6XCJ0ZXh0L3gtcGVybFwiLG1vZGU6XCJwZXJsXCIsZXh0OltcInBsXCIsXCJwbVwiXX0se25hbWU6XCJQSFBcIixtaW1lOlwiYXBwbGljYXRpb24veC1odHRwZC1waHBcIixtb2RlOlwicGhwXCIsZXh0OltcInBocFwiLFwicGhwM1wiLFwicGhwNFwiLFwicGhwNVwiLFwicGh0bWxcIl19LHtuYW1lOlwiUGlnXCIsbWltZTpcInRleHQveC1waWdcIixtb2RlOlwicGlnXCIsZXh0OltcInBpZ1wiXX0se25hbWU6XCJQbGFpbiBUZXh0XCIsbWltZTpcInRleHQvcGxhaW5cIixtb2RlOlwibnVsbFwiLGV4dDpbXCJ0eHRcIixcInRleHRcIixcImNvbmZcIixcImRlZlwiLFwibGlzdFwiLFwibG9nXCJdfSx7bmFtZTpcIlBMU1FMXCIsbWltZTpcInRleHQveC1wbHNxbFwiLG1vZGU6XCJzcWxcIixleHQ6W1wicGxzXCJdfSx7bmFtZTpcIlByb3BlcnRpZXMgZmlsZXNcIixtaW1lOlwidGV4dC94LXByb3BlcnRpZXNcIixtb2RlOlwicHJvcGVydGllc1wiLGV4dDpbXCJwcm9wZXJ0aWVzXCIsXCJpbmlcIixcImluXCJdLGFsaWFzOltcImluaVwiLFwicHJvcGVydGllc1wiXX0se25hbWU6XCJQeXRob25cIixtaW1lOlwidGV4dC94LXB5dGhvblwiLG1vZGU6XCJweXRob25cIixleHQ6W1wicHlcIixcInB5d1wiXX0se25hbWU6XCJQdXBwZXRcIixtaW1lOlwidGV4dC94LXB1cHBldFwiLG1vZGU6XCJwdXBwZXRcIixleHQ6W1wicHBcIl19LHtuYW1lOlwiUVwiLG1pbWU6XCJ0ZXh0L3gtcVwiLG1vZGU6XCJxXCIsZXh0OltcInFcIl19LHtuYW1lOlwiUlwiLG1pbWU6XCJ0ZXh0L3gtcnNyY1wiLG1vZGU6XCJyXCIsZXh0OltcInJcIl0sYWxpYXM6W1wicnNjcmlwdFwiXX0se25hbWU6XCJyZVN0cnVjdHVyZWRUZXh0XCIsbWltZTpcInRleHQveC1yc3RcIixtb2RlOlwicnN0XCIsZXh0OltcInJzdFwiXSxhbGlhczpbXCJyc3RcIl19LHtuYW1lOlwiUlBNIENoYW5nZXNcIixtaW1lOlwidGV4dC94LXJwbS1jaGFuZ2VzXCIsbW9kZTpcInJwbVwifSx7bmFtZTpcIlJQTSBTcGVjXCIsbWltZTpcInRleHQveC1ycG0tc3BlY1wiLG1vZGU6XCJycG1cIixleHQ6W1wic3BlY1wiXX0se25hbWU6XCJSdWJ5XCIsbWltZTpcInRleHQveC1ydWJ5XCIsbW9kZTpcInJ1YnlcIixleHQ6W1wicmJcIl0sYWxpYXM6W1wianJ1YnlcIixcIm1hY3J1YnlcIixcInJha2VcIixcInJiXCIsXCJyYnhcIl19LHtuYW1lOlwiUnVzdFwiLG1pbWU6XCJ0ZXh0L3gtcnVzdHNyY1wiLG1vZGU6XCJydXN0XCIsZXh0OltcInJzXCJdfSx7bmFtZTpcIlNhc3NcIixtaW1lOlwidGV4dC94LXNhc3NcIixtb2RlOlwic2Fzc1wiLGV4dDpbXCJzYXNzXCJdfSx7bmFtZTpcIlNjYWxhXCIsbWltZTpcInRleHQveC1zY2FsYVwiLG1vZGU6XCJjbGlrZVwiLGV4dDpbXCJzY2FsYVwiXX0se25hbWU6XCJTY2hlbWVcIixtaW1lOlwidGV4dC94LXNjaGVtZVwiLG1vZGU6XCJzY2hlbWVcIixleHQ6W1wic2NtXCIsXCJzc1wiXX0se25hbWU6XCJTQ1NTXCIsbWltZTpcInRleHQveC1zY3NzXCIsbW9kZTpcImNzc1wiLGV4dDpbXCJzY3NzXCJdfSx7bmFtZTpcIlNoZWxsXCIsbWltZTpcInRleHQveC1zaFwiLG1vZGU6XCJzaGVsbFwiLGV4dDpbXCJzaFwiLFwia3NoXCIsXCJiYXNoXCJdLGFsaWFzOltcImJhc2hcIixcInNoXCIsXCJ6c2hcIl0sZmlsZTovXlBLR0JVSUxEJC99LHtuYW1lOlwiU2lldmVcIixtaW1lOlwiYXBwbGljYXRpb24vc2lldmVcIixtb2RlOlwic2lldmVcIixleHQ6W1wic2l2XCIsXCJzaWV2ZVwiXX0se25hbWU6XCJTbGltXCIsbWltZXM6W1widGV4dC94LXNsaW1cIixcImFwcGxpY2F0aW9uL3gtc2xpbVwiXSxtb2RlOlwic2xpbVwiLGV4dDpbXCJzbGltXCJdfSx7bmFtZTpcIlNtYWxsdGFsa1wiLG1pbWU6XCJ0ZXh0L3gtc3RzcmNcIixtb2RlOlwic21hbGx0YWxrXCIsZXh0OltcInN0XCJdfSx7bmFtZTpcIlNtYXJ0eVwiLG1pbWU6XCJ0ZXh0L3gtc21hcnR5XCIsbW9kZTpcInNtYXJ0eVwiLGV4dDpbXCJ0cGxcIl19LHtuYW1lOlwiU29sclwiLG1pbWU6XCJ0ZXh0L3gtc29sclwiLG1vZGU6XCJzb2xyXCJ9LHtuYW1lOlwiU295XCIsbWltZTpcInRleHQveC1zb3lcIixtb2RlOlwic295XCIsZXh0OltcInNveVwiXSxhbGlhczpbXCJjbG9zdXJlIHRlbXBsYXRlXCJdfSx7bmFtZTpcIlNQQVJRTFwiLG1pbWU6XCJhcHBsaWNhdGlvbi9zcGFycWwtcXVlcnlcIixtb2RlOlwic3BhcnFsXCIsZXh0OltcInJxXCIsXCJzcGFycWxcIl0sYWxpYXM6W1wic3BhcnVsXCJdfSx7bmFtZTpcIlNwcmVhZHNoZWV0XCIsbWltZTpcInRleHQveC1zcHJlYWRzaGVldFwiLG1vZGU6XCJzcHJlYWRzaGVldFwiLGFsaWFzOltcImV4Y2VsXCIsXCJmb3JtdWxhXCJdfSx7bmFtZTpcIlNRTFwiLG1pbWU6XCJ0ZXh0L3gtc3FsXCIsbW9kZTpcInNxbFwiLGV4dDpbXCJzcWxcIl19LHtuYW1lOlwiU3F1aXJyZWxcIixtaW1lOlwidGV4dC94LXNxdWlycmVsXCIsbW9kZTpcImNsaWtlXCIsZXh0OltcIm51dFwiXX0se25hbWU6XCJTd2lmdFwiLG1pbWU6XCJ0ZXh0L3gtc3dpZnRcIixtb2RlOlwic3dpZnRcIixleHQ6W1wic3dpZnRcIl19LHtuYW1lOlwiTWFyaWFEQlwiLG1pbWU6XCJ0ZXh0L3gtbWFyaWFkYlwiLG1vZGU6XCJzcWxcIn0se25hbWU6XCJzVGVYXCIsbWltZTpcInRleHQveC1zdGV4XCIsbW9kZTpcInN0ZXhcIn0se25hbWU6XCJMYVRlWFwiLG1pbWU6XCJ0ZXh0L3gtbGF0ZXhcIixtb2RlOlwic3RleFwiLGV4dDpbXCJ0ZXh0XCIsXCJsdHhcIl0sYWxpYXM6W1widGV4XCJdfSx7bmFtZTpcIlN5c3RlbVZlcmlsb2dcIixtaW1lOlwidGV4dC94LXN5c3RlbXZlcmlsb2dcIixtb2RlOlwidmVyaWxvZ1wiLGV4dDpbXCJ2XCJdfSx7bmFtZTpcIlRjbFwiLG1pbWU6XCJ0ZXh0L3gtdGNsXCIsbW9kZTpcInRjbFwiLGV4dDpbXCJ0Y2xcIl19LHtuYW1lOlwiVGV4dGlsZVwiLG1pbWU6XCJ0ZXh0L3gtdGV4dGlsZVwiLG1vZGU6XCJ0ZXh0aWxlXCIsZXh0OltcInRleHRpbGVcIl19LHtuYW1lOlwiVGlkZGx5V2lraSBcIixtaW1lOlwidGV4dC94LXRpZGRseXdpa2lcIixtb2RlOlwidGlkZGx5d2lraVwifSx7bmFtZTpcIlRpa2kgd2lraVwiLG1pbWU6XCJ0ZXh0L3Rpa2lcIixtb2RlOlwidGlraVwifSx7bmFtZTpcIlRPTUxcIixtaW1lOlwidGV4dC94LXRvbWxcIixtb2RlOlwidG9tbFwiLGV4dDpbXCJ0b21sXCJdfSx7bmFtZTpcIlRvcm5hZG9cIixtaW1lOlwidGV4dC94LXRvcm5hZG9cIixtb2RlOlwidG9ybmFkb1wifSx7bmFtZTpcInRyb2ZmXCIsbWltZTpcInRyb2ZmXCIsbW9kZTpcInRyb2ZmXCIsZXh0OltcIjFcIixcIjJcIixcIjNcIixcIjRcIixcIjVcIixcIjZcIixcIjdcIixcIjhcIixcIjlcIl19LHtuYW1lOlwiVFRDTlwiLG1pbWU6XCJ0ZXh0L3gtdHRjblwiLG1vZGU6XCJ0dGNuXCIsZXh0OltcInR0Y25cIixcInR0Y24zXCIsXCJ0dGNucHBcIl19LHtuYW1lOlwiVFRDTl9DRkdcIixtaW1lOlwidGV4dC94LXR0Y24tY2ZnXCIsbW9kZTpcInR0Y24tY2ZnXCIsZXh0OltcImNmZ1wiXX0se25hbWU6XCJUdXJ0bGVcIixtaW1lOlwidGV4dC90dXJ0bGVcIixtb2RlOlwidHVydGxlXCIsZXh0OltcInR0bFwiXX0se25hbWU6XCJUeXBlU2NyaXB0XCIsbWltZTpcImFwcGxpY2F0aW9uL3R5cGVzY3JpcHRcIixtb2RlOlwiamF2YXNjcmlwdFwiLGV4dDpbXCJ0c1wiXSxhbGlhczpbXCJ0c1wiXX0se25hbWU6XCJUd2lnXCIsbWltZTpcInRleHQveC10d2lnXCIsbW9kZTpcInR3aWdcIn0se25hbWU6XCJWQi5ORVRcIixtaW1lOlwidGV4dC94LXZiXCIsbW9kZTpcInZiXCIsZXh0OltcInZiXCJdfSx7bmFtZTpcIlZCU2NyaXB0XCIsbWltZTpcInRleHQvdmJzY3JpcHRcIixtb2RlOlwidmJzY3JpcHRcIixleHQ6W1widmJzXCJdfSx7bmFtZTpcIlZlbG9jaXR5XCIsbWltZTpcInRleHQvdmVsb2NpdHlcIixtb2RlOlwidmVsb2NpdHlcIixleHQ6W1widnRsXCJdfSx7bmFtZTpcIlZlcmlsb2dcIixtaW1lOlwidGV4dC94LXZlcmlsb2dcIixtb2RlOlwidmVyaWxvZ1wiLGV4dDpbXCJ2XCJdfSx7bmFtZTpcIlZIRExcIixtaW1lOlwidGV4dC94LXZoZGxcIixtb2RlOlwidmhkbFwiLGV4dDpbXCJ2aGRcIixcInZoZGxcIl19LHtuYW1lOlwiWE1MXCIsbWltZXM6W1wiYXBwbGljYXRpb24veG1sXCIsXCJ0ZXh0L3htbFwiXSxtb2RlOlwieG1sXCIsZXh0OltcInhtbFwiLFwieHNsXCIsXCJ4c2RcIl0sYWxpYXM6W1wicnNzXCIsXCJ3c2RsXCIsXCJ4c2RcIl19LHtuYW1lOlwiWFF1ZXJ5XCIsbWltZTpcImFwcGxpY2F0aW9uL3hxdWVyeVwiLG1vZGU6XCJ4cXVlcnlcIixleHQ6W1wieHlcIixcInhxdWVyeVwiXX0se25hbWU6XCJZQU1MXCIsbWltZTpcInRleHQveC15YW1sXCIsbW9kZTpcInlhbWxcIixleHQ6W1wieWFtbFwiLFwieW1sXCJdLGFsaWFzOltcInltbFwiXX0se25hbWU6XCJaODBcIixtaW1lOlwidGV4dC94LXo4MFwiLG1vZGU6XCJ6ODBcIixleHQ6W1wiejgwXCJdfSx7bmFtZTpcIm1zY2dlblwiLG1pbWU6XCJ0ZXh0L3gtbXNjZ2VuXCIsbW9kZTpcIm1zY2dlblwiLGV4dDpbXCJtc2NnZW5cIixcIm1zY2luXCIsXCJtc2NcIl19LHtuYW1lOlwieHVcIixtaW1lOlwidGV4dC94LXh1XCIsbW9kZTpcIm1zY2dlblwiLGV4dDpbXCJ4dVwiXX0se25hbWU6XCJtc2dlbm55XCIsbWltZTpcInRleHQveC1tc2dlbm55XCIsbW9kZTpcIm1zY2dlblwiLGV4dDpbXCJtc2dlbm55XCJdfV07Zm9yKHZhciB0PTA7dDxlLm1vZGVJbmZvLmxlbmd0aDt0Kyspe3ZhciBuPWUubW9kZUluZm9bdF07bi5taW1lcyYmKG4ubWltZT1uLm1pbWVzWzBdKX1lLmZpbmRNb2RlQnlNSU1FPWZ1bmN0aW9uKHQpe3Q9dC50b0xvd2VyQ2FzZSgpO2Zvcih2YXIgbj0wO248ZS5tb2RlSW5mby5sZW5ndGg7bisrKXt2YXIgcj1lLm1vZGVJbmZvW25dO2lmKHIubWltZT09dClyZXR1cm4gcjtpZihyLm1pbWVzKWZvcih2YXIgaT0wO2k8ci5taW1lcy5sZW5ndGg7aSsrKWlmKHIubWltZXNbaV09PXQpcmV0dXJuIHJ9fSxlLmZpbmRNb2RlQnlFeHRlbnNpb249ZnVuY3Rpb24odCl7Zm9yKHZhciBuPTA7bjxlLm1vZGVJbmZvLmxlbmd0aDtuKyspe3ZhciByPWUubW9kZUluZm9bbl07aWYoci5leHQpZm9yKHZhciBpPTA7aTxyLmV4dC5sZW5ndGg7aSsrKWlmKHIuZXh0W2ldPT10KXJldHVybiByfX0sZS5maW5kTW9kZUJ5RmlsZU5hbWU9ZnVuY3Rpb24odCl7Zm9yKHZhciBuPTA7bjxlLm1vZGVJbmZvLmxlbmd0aDtuKyspe3ZhciByPWUubW9kZUluZm9bbl07aWYoci5maWxlJiZyLmZpbGUudGVzdCh0KSlyZXR1cm4gcn12YXIgaT10Lmxhc3RJbmRleE9mKFwiLlwiKSxvPWk+LTEmJnQuc3Vic3RyaW5nKGkrMSx0Lmxlbmd0aCk7cmV0dXJuIG8/ZS5maW5kTW9kZUJ5RXh0ZW5zaW9uKG8pOnZvaWQgMH0sZS5maW5kTW9kZUJ5TmFtZT1mdW5jdGlvbih0KXt0PXQudG9Mb3dlckNhc2UoKTtmb3IodmFyIG49MDtuPGUubW9kZUluZm8ubGVuZ3RoO24rKyl7dmFyIHI9ZS5tb2RlSW5mb1tuXTtpZihyLm5hbWUudG9Mb3dlckNhc2UoKT09dClyZXR1cm4gcjtpZihyLmFsaWFzKWZvcih2YXIgaT0wO2k8ci5hbGlhcy5sZW5ndGg7aSsrKWlmKHIuYWxpYXNbaV0udG9Mb3dlckNhc2UoKT09dClyZXR1cm4gcn19fSl9LHtcIi4uL2xpYi9jb2RlbWlycm9yXCI6Nn1dLDEwOltmdW5jdGlvbih0LG4scil7IWZ1bmN0aW9uKGkpe1wib2JqZWN0XCI9PXR5cGVvZiByJiZcIm9iamVjdFwiPT10eXBlb2Ygbj9pKHQoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk6XCJmdW5jdGlvblwiPT10eXBlb2YgZSYmZS5hbWQ/ZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSxpKTppKENvZGVNaXJyb3IpfShmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlLmRlZmluZU1vZGUoXCJ4bWxcIixmdW5jdGlvbih0LG4pe2Z1bmN0aW9uIHIoZSx0KXtmdW5jdGlvbiBuKG4pe3JldHVybiB0LnRva2VuaXplPW4sbihlLHQpfXZhciByPWUubmV4dCgpO2lmKFwiPFwiPT1yKXJldHVybiBlLmVhdChcIiFcIik/ZS5lYXQoXCJbXCIpP2UubWF0Y2goXCJDREFUQVtcIik/bihsKFwiYXRvbVwiLFwiXV0+XCIpKTpudWxsOmUubWF0Y2goXCItLVwiKT9uKGwoXCJjb21tZW50XCIsXCItLT5cIikpOmUubWF0Y2goXCJET0NUWVBFXCIsITAsITApPyhlLmVhdFdoaWxlKC9bXFx3XFwuX1xcLV0vKSxuKGEoMSkpKTpudWxsOmUuZWF0KFwiP1wiKT8oZS5lYXRXaGlsZSgvW1xcd1xcLl9cXC1dLyksdC50b2tlbml6ZT1sKFwibWV0YVwiLFwiPz5cIiksXCJtZXRhXCIpOihDPWUuZWF0KFwiL1wiKT9cImNsb3NlVGFnXCI6XCJvcGVuVGFnXCIsdC50b2tlbml6ZT1pLFwidGFnIGJyYWNrZXRcIik7aWYoXCImXCI9PXIpe3ZhciBvO3JldHVybiBvPWUuZWF0KFwiI1wiKT9lLmVhdChcInhcIik/ZS5lYXRXaGlsZSgvW2EtZkEtRlxcZF0vKSYmZS5lYXQoXCI7XCIpOmUuZWF0V2hpbGUoL1tcXGRdLykmJmUuZWF0KFwiO1wiKTplLmVhdFdoaWxlKC9bXFx3XFwuXFwtOl0vKSYmZS5lYXQoXCI7XCIpLG8/XCJhdG9tXCI6XCJlcnJvclwifXJldHVybiBlLmVhdFdoaWxlKC9bXiY8XS8pLG51bGx9ZnVuY3Rpb24gaShlLHQpe3ZhciBuPWUubmV4dCgpO2lmKFwiPlwiPT1ufHxcIi9cIj09biYmZS5lYXQoXCI+XCIpKXJldHVybiB0LnRva2VuaXplPXIsQz1cIj5cIj09bj9cImVuZFRhZ1wiOlwic2VsZmNsb3NlVGFnXCIsXCJ0YWcgYnJhY2tldFwiO2lmKFwiPVwiPT1uKXJldHVybiBDPVwiZXF1YWxzXCIsbnVsbDtpZihcIjxcIj09bil7dC50b2tlbml6ZT1yLHQuc3RhdGU9ZCx0LnRhZ05hbWU9dC50YWdTdGFydD1udWxsO3ZhciBpPXQudG9rZW5pemUoZSx0KTtyZXR1cm4gaT9pK1wiIHRhZyBlcnJvclwiOlwidGFnIGVycm9yXCJ9cmV0dXJuL1tcXCdcXFwiXS8udGVzdChuKT8odC50b2tlbml6ZT1vKG4pLHQuc3RyaW5nU3RhcnRDb2w9ZS5jb2x1bW4oKSx0LnRva2VuaXplKGUsdCkpOihlLm1hdGNoKC9eW15cXHNcXHUwMGEwPTw+XFxcIlxcJ10qW15cXHNcXHUwMGEwPTw+XFxcIlxcJ1xcL10vKSxcIndvcmRcIil9ZnVuY3Rpb24gbyhlKXt2YXIgdD1mdW5jdGlvbih0LG4pe2Zvcig7IXQuZW9sKCk7KWlmKHQubmV4dCgpPT1lKXtuLnRva2VuaXplPWk7YnJlYWt9cmV0dXJuXCJzdHJpbmdcIn07cmV0dXJuIHQuaXNJbkF0dHJpYnV0ZT0hMCx0fWZ1bmN0aW9uIGwoZSx0KXtyZXR1cm4gZnVuY3Rpb24obixpKXtmb3IoOyFuLmVvbCgpOyl7aWYobi5tYXRjaCh0KSl7aS50b2tlbml6ZT1yO2JyZWFrfW4ubmV4dCgpfXJldHVybiBlfX1mdW5jdGlvbiBhKGUpe3JldHVybiBmdW5jdGlvbih0LG4pe2Zvcih2YXIgaTtudWxsIT0oaT10Lm5leHQoKSk7KXtpZihcIjxcIj09aSlyZXR1cm4gbi50b2tlbml6ZT1hKGUrMSksbi50b2tlbml6ZSh0LG4pO2lmKFwiPlwiPT1pKXtpZigxPT1lKXtuLnRva2VuaXplPXI7YnJlYWt9cmV0dXJuIG4udG9rZW5pemU9YShlLTEpLG4udG9rZW5pemUodCxuKX19cmV0dXJuXCJtZXRhXCJ9fWZ1bmN0aW9uIHMoZSx0LG4pe3RoaXMucHJldj1lLmNvbnRleHQsdGhpcy50YWdOYW1lPXQsdGhpcy5pbmRlbnQ9ZS5pbmRlbnRlZCx0aGlzLnN0YXJ0T2ZMaW5lPW4sKEwuZG9Ob3RJbmRlbnQuaGFzT3duUHJvcGVydHkodCl8fGUuY29udGV4dCYmZS5jb250ZXh0Lm5vSW5kZW50KSYmKHRoaXMubm9JbmRlbnQ9ITApfWZ1bmN0aW9uIGMoZSl7ZS5jb250ZXh0JiYoZS5jb250ZXh0PWUuY29udGV4dC5wcmV2KX1mdW5jdGlvbiB1KGUsdCl7Zm9yKHZhciBuOzspe2lmKCFlLmNvbnRleHQpcmV0dXJuO2lmKG49ZS5jb250ZXh0LnRhZ05hbWUsIUwuY29udGV4dEdyYWJiZXJzLmhhc093blByb3BlcnR5KG4pfHwhTC5jb250ZXh0R3JhYmJlcnNbbl0uaGFzT3duUHJvcGVydHkodCkpcmV0dXJuO2MoZSl9fWZ1bmN0aW9uIGQoZSx0LG4pe3JldHVyblwib3BlblRhZ1wiPT1lPyhuLnRhZ1N0YXJ0PXQuY29sdW1uKCksaCk6XCJjbG9zZVRhZ1wiPT1lP2Y6ZH1mdW5jdGlvbiBoKGUsdCxuKXtyZXR1cm5cIndvcmRcIj09ZT8obi50YWdOYW1lPXQuY3VycmVudCgpLFM9XCJ0YWdcIixnKTooUz1cImVycm9yXCIsaCl9ZnVuY3Rpb24gZihlLHQsbil7aWYoXCJ3b3JkXCI9PWUpe3ZhciByPXQuY3VycmVudCgpO3JldHVybiBuLmNvbnRleHQmJm4uY29udGV4dC50YWdOYW1lIT1yJiZMLmltcGxpY2l0bHlDbG9zZWQuaGFzT3duUHJvcGVydHkobi5jb250ZXh0LnRhZ05hbWUpJiZjKG4pLG4uY29udGV4dCYmbi5jb250ZXh0LnRhZ05hbWU9PXI/KFM9XCJ0YWdcIixwKTooUz1cInRhZyBlcnJvclwiLG0pfXJldHVybiBTPVwiZXJyb3JcIixtfWZ1bmN0aW9uIHAoZSx0LG4pe3JldHVyblwiZW5kVGFnXCIhPWU/KFM9XCJlcnJvclwiLHApOihjKG4pLGQpfWZ1bmN0aW9uIG0oZSx0LG4pe3JldHVybiBTPVwiZXJyb3JcIixwKGUsdCxuKX1mdW5jdGlvbiBnKGUsdCxuKXtpZihcIndvcmRcIj09ZSlyZXR1cm4gUz1cImF0dHJpYnV0ZVwiLFxudjtpZihcImVuZFRhZ1wiPT1lfHxcInNlbGZjbG9zZVRhZ1wiPT1lKXt2YXIgcj1uLnRhZ05hbWUsaT1uLnRhZ1N0YXJ0O3JldHVybiBuLnRhZ05hbWU9bi50YWdTdGFydD1udWxsLFwic2VsZmNsb3NlVGFnXCI9PWV8fEwuYXV0b1NlbGZDbG9zZXJzLmhhc093blByb3BlcnR5KHIpP3UobixyKToodShuLHIpLG4uY29udGV4dD1uZXcgcyhuLHIsaT09bi5pbmRlbnRlZCkpLGR9cmV0dXJuIFM9XCJlcnJvclwiLGd9ZnVuY3Rpb24gdihlLHQsbil7cmV0dXJuXCJlcXVhbHNcIj09ZT95OihMLmFsbG93TWlzc2luZ3x8KFM9XCJlcnJvclwiKSxnKGUsdCxuKSl9ZnVuY3Rpb24geShlLHQsbil7cmV0dXJuXCJzdHJpbmdcIj09ZT94Olwid29yZFwiPT1lJiZMLmFsbG93VW5xdW90ZWQ/KFM9XCJzdHJpbmdcIixnKTooUz1cImVycm9yXCIsZyhlLHQsbikpfWZ1bmN0aW9uIHgoZSx0LG4pe3JldHVyblwic3RyaW5nXCI9PWU/eDpnKGUsdCxuKX12YXIgYj10LmluZGVudFVuaXQsdz1uLm11bHRpbGluZVRhZ0luZGVudEZhY3Rvcnx8MSxrPW4ubXVsdGlsaW5lVGFnSW5kZW50UGFzdFRhZztudWxsPT1rJiYoaz0hMCk7dmFyIEMsUyxMPW4uaHRtbE1vZGU/e2F1dG9TZWxmQ2xvc2Vyczp7YXJlYTohMCxiYXNlOiEwLGJyOiEwLGNvbDohMCxjb21tYW5kOiEwLGVtYmVkOiEwLGZyYW1lOiEwLGhyOiEwLGltZzohMCxpbnB1dDohMCxrZXlnZW46ITAsbGluazohMCxtZXRhOiEwLHBhcmFtOiEwLHNvdXJjZTohMCx0cmFjazohMCx3YnI6ITAsbWVudWl0ZW06ITB9LGltcGxpY2l0bHlDbG9zZWQ6e2RkOiEwLGxpOiEwLG9wdGdyb3VwOiEwLG9wdGlvbjohMCxwOiEwLHJwOiEwLHJ0OiEwLHRib2R5OiEwLHRkOiEwLHRmb290OiEwLHRoOiEwLHRyOiEwfSxjb250ZXh0R3JhYmJlcnM6e2RkOntkZDohMCxkdDohMH0sZHQ6e2RkOiEwLGR0OiEwfSxsaTp7bGk6ITB9LG9wdGlvbjp7b3B0aW9uOiEwLG9wdGdyb3VwOiEwfSxvcHRncm91cDp7b3B0Z3JvdXA6ITB9LHA6e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGRpcjohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxtZW51OiEwLG5hdjohMCxvbDohMCxwOiEwLHByZTohMCxzZWN0aW9uOiEwLHRhYmxlOiEwLHVsOiEwfSxycDp7cnA6ITAscnQ6ITB9LHJ0OntycDohMCxydDohMH0sdGJvZHk6e3Rib2R5OiEwLHRmb290OiEwfSx0ZDp7dGQ6ITAsdGg6ITB9LHRmb290Ont0Ym9keTohMH0sdGg6e3RkOiEwLHRoOiEwfSx0aGVhZDp7dGJvZHk6ITAsdGZvb3Q6ITB9LHRyOnt0cjohMH19LGRvTm90SW5kZW50OntwcmU6ITB9LGFsbG93VW5xdW90ZWQ6ITAsYWxsb3dNaXNzaW5nOiEwLGNhc2VGb2xkOiEwfTp7YXV0b1NlbGZDbG9zZXJzOnt9LGltcGxpY2l0bHlDbG9zZWQ6e30sY29udGV4dEdyYWJiZXJzOnt9LGRvTm90SW5kZW50Ont9LGFsbG93VW5xdW90ZWQ6ITEsYWxsb3dNaXNzaW5nOiExLGNhc2VGb2xkOiExfSxUPW4uYWxpZ25DREFUQTtyZXR1cm4gci5pc0luVGV4dD0hMCx7c3RhcnRTdGF0ZTpmdW5jdGlvbigpe3JldHVybnt0b2tlbml6ZTpyLHN0YXRlOmQsaW5kZW50ZWQ6MCx0YWdOYW1lOm51bGwsdGFnU3RhcnQ6bnVsbCxjb250ZXh0Om51bGx9fSx0b2tlbjpmdW5jdGlvbihlLHQpe2lmKCF0LnRhZ05hbWUmJmUuc29sKCkmJih0LmluZGVudGVkPWUuaW5kZW50YXRpb24oKSksZS5lYXRTcGFjZSgpKXJldHVybiBudWxsO0M9bnVsbDt2YXIgbj10LnRva2VuaXplKGUsdCk7cmV0dXJuKG58fEMpJiZcImNvbW1lbnRcIiE9biYmKFM9bnVsbCx0LnN0YXRlPXQuc3RhdGUoQ3x8bixlLHQpLFMmJihuPVwiZXJyb3JcIj09Uz9uK1wiIGVycm9yXCI6UykpLG59LGluZGVudDpmdW5jdGlvbih0LG4sbyl7dmFyIGw9dC5jb250ZXh0O2lmKHQudG9rZW5pemUuaXNJbkF0dHJpYnV0ZSlyZXR1cm4gdC50YWdTdGFydD09dC5pbmRlbnRlZD90LnN0cmluZ1N0YXJ0Q29sKzE6dC5pbmRlbnRlZCtiO2lmKGwmJmwubm9JbmRlbnQpcmV0dXJuIGUuUGFzcztpZih0LnRva2VuaXplIT1pJiZ0LnRva2VuaXplIT1yKXJldHVybiBvP28ubWF0Y2goL14oXFxzKikvKVswXS5sZW5ndGg6MDtpZih0LnRhZ05hbWUpcmV0dXJuIGs/dC50YWdTdGFydCt0LnRhZ05hbWUubGVuZ3RoKzI6dC50YWdTdGFydCtiKnc7aWYoVCYmLzwhXFxbQ0RBVEFcXFsvLnRlc3QobikpcmV0dXJuIDA7dmFyIGE9biYmL148KFxcLyk/KFtcXHdfOlxcLi1dKikvLmV4ZWMobik7aWYoYSYmYVsxXSlmb3IoO2w7KXtpZihsLnRhZ05hbWU9PWFbMl0pe2w9bC5wcmV2O2JyZWFrfWlmKCFMLmltcGxpY2l0bHlDbG9zZWQuaGFzT3duUHJvcGVydHkobC50YWdOYW1lKSlicmVhaztsPWwucHJldn1lbHNlIGlmKGEpZm9yKDtsOyl7dmFyIHM9TC5jb250ZXh0R3JhYmJlcnNbbC50YWdOYW1lXTtpZighc3x8IXMuaGFzT3duUHJvcGVydHkoYVsyXSkpYnJlYWs7bD1sLnByZXZ9Zm9yKDtsJiYhbC5zdGFydE9mTGluZTspbD1sLnByZXY7cmV0dXJuIGw/bC5pbmRlbnQrYjowfSxlbGVjdHJpY0lucHV0Oi88XFwvW1xcc1xcdzpdKz4kLyxibG9ja0NvbW1lbnRTdGFydDpcIjwhLS1cIixibG9ja0NvbW1lbnRFbmQ6XCItLT5cIixjb25maWd1cmF0aW9uOm4uaHRtbE1vZGU/XCJodG1sXCI6XCJ4bWxcIixoZWxwZXJUeXBlOm4uaHRtbE1vZGU/XCJodG1sXCI6XCJ4bWxcIn19KSxlLmRlZmluZU1JTUUoXCJ0ZXh0L3htbFwiLFwieG1sXCIpLGUuZGVmaW5lTUlNRShcImFwcGxpY2F0aW9uL3htbFwiLFwieG1sXCIpLGUubWltZU1vZGVzLmhhc093blByb3BlcnR5KFwidGV4dC9odG1sXCIpfHxlLmRlZmluZU1JTUUoXCJ0ZXh0L2h0bWxcIix7bmFtZTpcInhtbFwiLGh0bWxNb2RlOiEwfSl9KX0se1wiLi4vLi4vbGliL2NvZGVtaXJyb3JcIjo2fV0sMTE6W2Z1bmN0aW9uKHQsbixyKXsoZnVuY3Rpb24odCl7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt0aGlzLnRva2Vucz1bXSx0aGlzLnRva2Vucy5saW5rcz17fSx0aGlzLm9wdGlvbnM9ZXx8aC5kZWZhdWx0cyx0aGlzLnJ1bGVzPWYubm9ybWFsLHRoaXMub3B0aW9ucy5nZm0mJih0aGlzLm9wdGlvbnMudGFibGVzP3RoaXMucnVsZXM9Zi50YWJsZXM6dGhpcy5ydWxlcz1mLmdmbSl9ZnVuY3Rpb24gaShlLHQpe2lmKHRoaXMub3B0aW9ucz10fHxoLmRlZmF1bHRzLHRoaXMubGlua3M9ZSx0aGlzLnJ1bGVzPXAubm9ybWFsLHRoaXMucmVuZGVyZXI9dGhpcy5vcHRpb25zLnJlbmRlcmVyfHxuZXcgbyx0aGlzLnJlbmRlcmVyLm9wdGlvbnM9dGhpcy5vcHRpb25zLCF0aGlzLmxpbmtzKXRocm93IG5ldyBFcnJvcihcIlRva2VucyBhcnJheSByZXF1aXJlcyBhIGBsaW5rc2AgcHJvcGVydHkuXCIpO3RoaXMub3B0aW9ucy5nZm0/dGhpcy5vcHRpb25zLmJyZWFrcz90aGlzLnJ1bGVzPXAuYnJlYWtzOnRoaXMucnVsZXM9cC5nZm06dGhpcy5vcHRpb25zLnBlZGFudGljJiYodGhpcy5ydWxlcz1wLnBlZGFudGljKX1mdW5jdGlvbiBvKGUpe3RoaXMub3B0aW9ucz1lfHx7fX1mdW5jdGlvbiBsKGUpe3RoaXMudG9rZW5zPVtdLHRoaXMudG9rZW49bnVsbCx0aGlzLm9wdGlvbnM9ZXx8aC5kZWZhdWx0cyx0aGlzLm9wdGlvbnMucmVuZGVyZXI9dGhpcy5vcHRpb25zLnJlbmRlcmVyfHxuZXcgbyx0aGlzLnJlbmRlcmVyPXRoaXMub3B0aW9ucy5yZW5kZXJlcix0aGlzLnJlbmRlcmVyLm9wdGlvbnM9dGhpcy5vcHRpb25zfWZ1bmN0aW9uIGEoZSx0KXtyZXR1cm4gZS5yZXBsYWNlKHQ/LyYvZzovJig/ISM/XFx3KzspL2csXCImYW1wO1wiKS5yZXBsYWNlKC88L2csXCImbHQ7XCIpLnJlcGxhY2UoLz4vZyxcIiZndDtcIikucmVwbGFjZSgvXCIvZyxcIiZxdW90O1wiKS5yZXBsYWNlKC8nL2csXCImIzM5O1wiKX1mdW5jdGlvbiBzKGUpe3JldHVybiBlLnJlcGxhY2UoLyYoWyNcXHddKyk7L2csZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD10LnRvTG93ZXJDYXNlKCksXCJjb2xvblwiPT09dD9cIjpcIjpcIiNcIj09PXQuY2hhckF0KDApP1wieFwiPT09dC5jaGFyQXQoMSk/U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludCh0LnN1YnN0cmluZygyKSwxNikpOlN0cmluZy5mcm9tQ2hhckNvZGUoK3Quc3Vic3RyaW5nKDEpKTpcIlwifSl9ZnVuY3Rpb24gYyhlLHQpe3JldHVybiBlPWUuc291cmNlLHQ9dHx8XCJcIixmdW5jdGlvbiBuKHIsaSl7cmV0dXJuIHI/KGk9aS5zb3VyY2V8fGksaT1pLnJlcGxhY2UoLyhefFteXFxbXSlcXF4vZyxcIiQxXCIpLGU9ZS5yZXBsYWNlKHIsaSksbik6bmV3IFJlZ0V4cChlLHQpfX1mdW5jdGlvbiB1KCl7fWZ1bmN0aW9uIGQoZSl7Zm9yKHZhciB0LG4scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspe3Q9YXJndW1lbnRzW3JdO2ZvcihuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pfXJldHVybiBlfWZ1bmN0aW9uIGgoZSxuLHIpe2lmKHJ8fFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pe3J8fChyPW4sbj1udWxsKSxuPWQoe30saC5kZWZhdWx0cyxufHx7fSk7dmFyIGksbyxzPW4uaGlnaGxpZ2h0LGM9MDt0cnl7aT10LmxleChlLG4pfWNhdGNoKHUpe3JldHVybiByKHUpfW89aS5sZW5ndGg7dmFyIGY9ZnVuY3Rpb24oZSl7aWYoZSlyZXR1cm4gbi5oaWdobGlnaHQ9cyxyKGUpO3ZhciB0O3RyeXt0PWwucGFyc2UoaSxuKX1jYXRjaChvKXtlPW99cmV0dXJuIG4uaGlnaGxpZ2h0PXMsZT9yKGUpOnIobnVsbCx0KX07aWYoIXN8fHMubGVuZ3RoPDMpcmV0dXJuIGYoKTtpZihkZWxldGUgbi5oaWdobGlnaHQsIW8pcmV0dXJuIGYoKTtmb3IoO2M8aS5sZW5ndGg7YysrKSFmdW5jdGlvbihlKXtyZXR1cm5cImNvZGVcIiE9PWUudHlwZT8tLW98fGYoKTpzKGUudGV4dCxlLmxhbmcsZnVuY3Rpb24odCxuKXtyZXR1cm4gdD9mKHQpOm51bGw9PW58fG49PT1lLnRleHQ/LS1vfHxmKCk6KGUudGV4dD1uLGUuZXNjYXBlZD0hMCx2b2lkKC0tb3x8ZigpKSl9KX0oaVtjXSl9ZWxzZSB0cnl7cmV0dXJuIG4mJihuPWQoe30saC5kZWZhdWx0cyxuKSksbC5wYXJzZSh0LmxleChlLG4pLG4pfWNhdGNoKHUpe2lmKHUubWVzc2FnZSs9XCJcXG5QbGVhc2UgcmVwb3J0IHRoaXMgdG8gaHR0cHM6Ly9naXRodWIuY29tL2NoamovbWFya2VkLlwiLChufHxoLmRlZmF1bHRzKS5zaWxlbnQpcmV0dXJuXCI8cD5BbiBlcnJvciBvY2N1cmVkOjwvcD48cHJlPlwiK2EodS5tZXNzYWdlK1wiXCIsITApK1wiPC9wcmU+XCI7dGhyb3cgdX19dmFyIGY9e25ld2xpbmU6L15cXG4rLyxjb2RlOi9eKCB7NH1bXlxcbl0rXFxuKikrLyxmZW5jZXM6dSxocjovXiggKlstKl9dKXszLH0gKig/Olxcbit8JCkvLGhlYWRpbmc6L14gKigjezEsNn0pICooW15cXG5dKz8pICojKiAqKD86XFxuK3wkKS8sbnB0YWJsZTp1LGxoZWFkaW5nOi9eKFteXFxuXSspXFxuICooPXwtKXsyLH0gKig/Olxcbit8JCkvLGJsb2NrcXVvdGU6L14oICo+W15cXG5dKyhcXG4oPyFkZWYpW15cXG5dKykqXFxuKikrLyxsaXN0Oi9eKCAqKShidWxsKSBbXFxzXFxTXSs/KD86aHJ8ZGVmfFxcbnsyLH0oPyEgKSg/IVxcMWJ1bGwgKVxcbip8XFxzKiQpLyxodG1sOi9eICooPzpjb21tZW50ICooPzpcXG58XFxzKiQpfGNsb3NlZCAqKD86XFxuezIsfXxcXHMqJCl8Y2xvc2luZyAqKD86XFxuezIsfXxcXHMqJCkpLyxkZWY6L14gKlxcWyhbXlxcXV0rKVxcXTogKjw/KFteXFxzPl0rKT4/KD86ICtbXCIoXShbXlxcbl0rKVtcIildKT8gKig/Olxcbit8JCkvLHRhYmxlOnUscGFyYWdyYXBoOi9eKCg/OlteXFxuXStcXG4/KD8haHJ8aGVhZGluZ3xsaGVhZGluZ3xibG9ja3F1b3RlfHRhZ3xkZWYpKSspXFxuKi8sdGV4dDovXlteXFxuXSsvfTtmLmJ1bGxldD0vKD86WyorLV18XFxkK1xcLikvLGYuaXRlbT0vXiggKikoYnVsbCkgW15cXG5dKig/Olxcbig/IVxcMWJ1bGwgKVteXFxuXSopKi8sZi5pdGVtPWMoZi5pdGVtLFwiZ21cIikoL2J1bGwvZyxmLmJ1bGxldCkoKSxmLmxpc3Q9YyhmLmxpc3QpKC9idWxsL2csZi5idWxsZXQpKFwiaHJcIixcIlxcXFxuKyg/PVxcXFwxPyg/OlstKl9dICopezMsfSg/OlxcXFxuK3wkKSlcIikoXCJkZWZcIixcIlxcXFxuKyg/PVwiK2YuZGVmLnNvdXJjZStcIilcIikoKSxmLmJsb2NrcXVvdGU9YyhmLmJsb2NrcXVvdGUpKFwiZGVmXCIsZi5kZWYpKCksZi5fdGFnPVwiKD8hKD86YXxlbXxzdHJvbmd8c21hbGx8c3xjaXRlfHF8ZGZufGFiYnJ8ZGF0YXx0aW1lfGNvZGV8dmFyfHNhbXB8a2JkfHN1YnxzdXB8aXxifHV8bWFya3xydWJ5fHJ0fHJwfGJkaXxiZG98c3Bhbnxicnx3YnJ8aW5zfGRlbHxpbWcpXFxcXGIpXFxcXHcrKD8hOi98W15cXFxcd1xcXFxzQF0qQClcXFxcYlwiLGYuaHRtbD1jKGYuaHRtbCkoXCJjb21tZW50XCIsLzwhLS1bXFxzXFxTXSo/LS0+LykoXCJjbG9zZWRcIiwvPCh0YWcpW1xcc1xcU10rPzxcXC9cXDE+LykoXCJjbG9zaW5nXCIsLzx0YWcoPzpcIlteXCJdKlwifCdbXiddKid8W14nXCI+XSkqPz4vKSgvdGFnL2csZi5fdGFnKSgpLGYucGFyYWdyYXBoPWMoZi5wYXJhZ3JhcGgpKFwiaHJcIixmLmhyKShcImhlYWRpbmdcIixmLmhlYWRpbmcpKFwibGhlYWRpbmdcIixmLmxoZWFkaW5nKShcImJsb2NrcXVvdGVcIixmLmJsb2NrcXVvdGUpKFwidGFnXCIsXCI8XCIrZi5fdGFnKShcImRlZlwiLGYuZGVmKSgpLGYubm9ybWFsPWQoe30sZiksZi5nZm09ZCh7fSxmLm5vcm1hbCx7ZmVuY2VzOi9eICooYHszLH18fnszLH0pWyBcXC5dKihcXFMrKT8gKlxcbihbXFxzXFxTXSo/KVxccypcXDEgKig/Olxcbit8JCkvLHBhcmFncmFwaDovXi8saGVhZGluZzovXiAqKCN7MSw2fSkgKyhbXlxcbl0rPykgKiMqICooPzpcXG4rfCQpL30pLGYuZ2ZtLnBhcmFncmFwaD1jKGYucGFyYWdyYXBoKShcIig/IVwiLFwiKD8hXCIrZi5nZm0uZmVuY2VzLnNvdXJjZS5yZXBsYWNlKFwiXFxcXDFcIixcIlxcXFwyXCIpK1wifFwiK2YubGlzdC5zb3VyY2UucmVwbGFjZShcIlxcXFwxXCIsXCJcXFxcM1wiKStcInxcIikoKSxmLnRhYmxlcz1kKHt9LGYuZ2ZtLHtucHRhYmxlOi9eICooXFxTLipcXHwuKilcXG4gKihbLTpdKyAqXFx8Wy18IDpdKilcXG4oKD86LipcXHwuKig/OlxcbnwkKSkqKVxcbiovLHRhYmxlOi9eICpcXHwoLispXFxuICpcXHwoICpbLTpdK1stfCA6XSopXFxuKCg/OiAqXFx8LiooPzpcXG58JCkpKilcXG4qL30pLHQucnVsZXM9Zix0LmxleD1mdW5jdGlvbihlLG4pe3ZhciByPW5ldyB0KG4pO3JldHVybiByLmxleChlKX0sdC5wcm90b3R5cGUubGV4PWZ1bmN0aW9uKGUpe3JldHVybiBlPWUucmVwbGFjZSgvXFxyXFxufFxcci9nLFwiXFxuXCIpLnJlcGxhY2UoL1xcdC9nLFwiICAgIFwiKS5yZXBsYWNlKC9cXHUwMGEwL2csXCIgXCIpLnJlcGxhY2UoL1xcdTI0MjQvZyxcIlxcblwiKSx0aGlzLnRva2VuKGUsITApfSx0LnByb3RvdHlwZS50b2tlbj1mdW5jdGlvbihlLHQsbil7Zm9yKHZhciByLGksbyxsLGEscyxjLHUsZCxlPWUucmVwbGFjZSgvXiArJC9nbSxcIlwiKTtlOylpZigobz10aGlzLnJ1bGVzLm5ld2xpbmUuZXhlYyhlKSkmJihlPWUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSxvWzBdLmxlbmd0aD4xJiZ0aGlzLnRva2Vucy5wdXNoKHt0eXBlOlwic3BhY2VcIn0pKSxvPXRoaXMucnVsZXMuY29kZS5leGVjKGUpKWU9ZS5zdWJzdHJpbmcob1swXS5sZW5ndGgpLG89b1swXS5yZXBsYWNlKC9eIHs0fS9nbSxcIlwiKSx0aGlzLnRva2Vucy5wdXNoKHt0eXBlOlwiY29kZVwiLHRleHQ6dGhpcy5vcHRpb25zLnBlZGFudGljP286by5yZXBsYWNlKC9cXG4rJC8sXCJcIil9KTtlbHNlIGlmKG89dGhpcy5ydWxlcy5mZW5jZXMuZXhlYyhlKSllPWUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSx0aGlzLnRva2Vucy5wdXNoKHt0eXBlOlwiY29kZVwiLGxhbmc6b1syXSx0ZXh0Om9bM118fFwiXCJ9KTtlbHNlIGlmKG89dGhpcy5ydWxlcy5oZWFkaW5nLmV4ZWMoZSkpZT1lLnN1YnN0cmluZyhvWzBdLmxlbmd0aCksdGhpcy50b2tlbnMucHVzaCh7dHlwZTpcImhlYWRpbmdcIixkZXB0aDpvWzFdLmxlbmd0aCx0ZXh0Om9bMl19KTtlbHNlIGlmKHQmJihvPXRoaXMucnVsZXMubnB0YWJsZS5leGVjKGUpKSl7Zm9yKGU9ZS5zdWJzdHJpbmcob1swXS5sZW5ndGgpLHM9e3R5cGU6XCJ0YWJsZVwiLGhlYWRlcjpvWzFdLnJlcGxhY2UoL14gKnwgKlxcfCAqJC9nLFwiXCIpLnNwbGl0KC8gKlxcfCAqLyksYWxpZ246b1syXS5yZXBsYWNlKC9eICp8XFx8ICokL2csXCJcIikuc3BsaXQoLyAqXFx8ICovKSxjZWxsczpvWzNdLnJlcGxhY2UoL1xcbiQvLFwiXCIpLnNwbGl0KFwiXFxuXCIpfSx1PTA7dTxzLmFsaWduLmxlbmd0aDt1KyspL14gKi0rOiAqJC8udGVzdChzLmFsaWduW3VdKT9zLmFsaWduW3VdPVwicmlnaHRcIjovXiAqOi0rOiAqJC8udGVzdChzLmFsaWduW3VdKT9zLmFsaWduW3VdPVwiY2VudGVyXCI6L14gKjotKyAqJC8udGVzdChzLmFsaWduW3VdKT9zLmFsaWduW3VdPVwibGVmdFwiOnMuYWxpZ25bdV09bnVsbDtmb3IodT0wO3U8cy5jZWxscy5sZW5ndGg7dSsrKXMuY2VsbHNbdV09cy5jZWxsc1t1XS5zcGxpdCgvICpcXHwgKi8pO3RoaXMudG9rZW5zLnB1c2gocyl9ZWxzZSBpZihvPXRoaXMucnVsZXMubGhlYWRpbmcuZXhlYyhlKSllPWUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSx0aGlzLnRva2Vucy5wdXNoKHt0eXBlOlwiaGVhZGluZ1wiLGRlcHRoOlwiPVwiPT09b1syXT8xOjIsdGV4dDpvWzFdfSk7ZWxzZSBpZihvPXRoaXMucnVsZXMuaHIuZXhlYyhlKSllPWUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSx0aGlzLnRva2Vucy5wdXNoKHt0eXBlOlwiaHJcIn0pO2Vsc2UgaWYobz10aGlzLnJ1bGVzLmJsb2NrcXVvdGUuZXhlYyhlKSllPWUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSx0aGlzLnRva2Vucy5wdXNoKHt0eXBlOlwiYmxvY2txdW90ZV9zdGFydFwifSksbz1vWzBdLnJlcGxhY2UoL14gKj4gPy9nbSxcIlwiKSx0aGlzLnRva2VuKG8sdCwhMCksdGhpcy50b2tlbnMucHVzaCh7dHlwZTpcImJsb2NrcXVvdGVfZW5kXCJ9KTtlbHNlIGlmKG89dGhpcy5ydWxlcy5saXN0LmV4ZWMoZSkpe2ZvcihlPWUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSxsPW9bMl0sdGhpcy50b2tlbnMucHVzaCh7dHlwZTpcImxpc3Rfc3RhcnRcIixvcmRlcmVkOmwubGVuZ3RoPjF9KSxvPW9bMF0ubWF0Y2godGhpcy5ydWxlcy5pdGVtKSxyPSExLGQ9by5sZW5ndGgsdT0wO2Q+dTt1Kyspcz1vW3VdLGM9cy5sZW5ndGgscz1zLnJlcGxhY2UoL14gKihbKistXXxcXGQrXFwuKSArLyxcIlwiKSx+cy5pbmRleE9mKFwiXFxuIFwiKSYmKGMtPXMubGVuZ3RoLHM9dGhpcy5vcHRpb25zLnBlZGFudGljP3MucmVwbGFjZSgvXiB7MSw0fS9nbSxcIlwiKTpzLnJlcGxhY2UobmV3IFJlZ0V4cChcIl4gezEsXCIrYytcIn1cIixcImdtXCIpLFwiXCIpKSx0aGlzLm9wdGlvbnMuc21hcnRMaXN0cyYmdSE9PWQtMSYmKGE9Zi5idWxsZXQuZXhlYyhvW3UrMV0pWzBdLGw9PT1hfHxsLmxlbmd0aD4xJiZhLmxlbmd0aD4xfHwoZT1vLnNsaWNlKHUrMSkuam9pbihcIlxcblwiKStlLHU9ZC0xKSksaT1yfHwvXFxuXFxuKD8hXFxzKiQpLy50ZXN0KHMpLHUhPT1kLTEmJihyPVwiXFxuXCI9PT1zLmNoYXJBdChzLmxlbmd0aC0xKSxpfHwoaT1yKSksdGhpcy50b2tlbnMucHVzaCh7dHlwZTppP1wibG9vc2VfaXRlbV9zdGFydFwiOlwibGlzdF9pdGVtX3N0YXJ0XCJ9KSx0aGlzLnRva2VuKHMsITEsbiksdGhpcy50b2tlbnMucHVzaCh7dHlwZTpcImxpc3RfaXRlbV9lbmRcIn0pO3RoaXMudG9rZW5zLnB1c2goe3R5cGU6XCJsaXN0X2VuZFwifSl9ZWxzZSBpZihvPXRoaXMucnVsZXMuaHRtbC5leGVjKGUpKWU9ZS5zdWJzdHJpbmcob1swXS5sZW5ndGgpLHRoaXMudG9rZW5zLnB1c2goe3R5cGU6dGhpcy5vcHRpb25zLnNhbml0aXplP1wicGFyYWdyYXBoXCI6XCJodG1sXCIscHJlOiF0aGlzLm9wdGlvbnMuc2FuaXRpemVyJiYoXCJwcmVcIj09PW9bMV18fFwic2NyaXB0XCI9PT1vWzFdfHxcInN0eWxlXCI9PT1vWzFdKSx0ZXh0Om9bMF19KTtlbHNlIGlmKCFuJiZ0JiYobz10aGlzLnJ1bGVzLmRlZi5leGVjKGUpKSllPWUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSx0aGlzLnRva2Vucy5saW5rc1tvWzFdLnRvTG93ZXJDYXNlKCldPXtocmVmOm9bMl0sdGl0bGU6b1szXX07ZWxzZSBpZih0JiYobz10aGlzLnJ1bGVzLnRhYmxlLmV4ZWMoZSkpKXtmb3IoZT1lLnN1YnN0cmluZyhvWzBdLmxlbmd0aCkscz17dHlwZTpcInRhYmxlXCIsaGVhZGVyOm9bMV0ucmVwbGFjZSgvXiAqfCAqXFx8ICokL2csXCJcIikuc3BsaXQoLyAqXFx8ICovKSxhbGlnbjpvWzJdLnJlcGxhY2UoL14gKnxcXHwgKiQvZyxcIlwiKS5zcGxpdCgvICpcXHwgKi8pLGNlbGxzOm9bM10ucmVwbGFjZSgvKD86ICpcXHwgKik/XFxuJC8sXCJcIikuc3BsaXQoXCJcXG5cIil9LHU9MDt1PHMuYWxpZ24ubGVuZ3RoO3UrKykvXiAqLSs6ICokLy50ZXN0KHMuYWxpZ25bdV0pP3MuYWxpZ25bdV09XCJyaWdodFwiOi9eICo6LSs6ICokLy50ZXN0KHMuYWxpZ25bdV0pP3MuYWxpZ25bdV09XCJjZW50ZXJcIjovXiAqOi0rICokLy50ZXN0KHMuYWxpZ25bdV0pP3MuYWxpZ25bdV09XCJsZWZ0XCI6cy5hbGlnblt1XT1udWxsO2Zvcih1PTA7dTxzLmNlbGxzLmxlbmd0aDt1Kyspcy5jZWxsc1t1XT1zLmNlbGxzW3VdLnJlcGxhY2UoL14gKlxcfCAqfCAqXFx8ICokL2csXCJcIikuc3BsaXQoLyAqXFx8ICovKTt0aGlzLnRva2Vucy5wdXNoKHMpfWVsc2UgaWYodCYmKG89dGhpcy5ydWxlcy5wYXJhZ3JhcGguZXhlYyhlKSkpZT1lLnN1YnN0cmluZyhvWzBdLmxlbmd0aCksdGhpcy50b2tlbnMucHVzaCh7dHlwZTpcInBhcmFncmFwaFwiLHRleHQ6XCJcXG5cIj09PW9bMV0uY2hhckF0KG9bMV0ubGVuZ3RoLTEpP29bMV0uc2xpY2UoMCwtMSk6b1sxXX0pO2Vsc2UgaWYobz10aGlzLnJ1bGVzLnRleHQuZXhlYyhlKSllPWUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSx0aGlzLnRva2Vucy5wdXNoKHt0eXBlOlwidGV4dFwiLHRleHQ6b1swXX0pO2Vsc2UgaWYoZSl0aHJvdyBuZXcgRXJyb3IoXCJJbmZpbml0ZSBsb29wIG9uIGJ5dGU6IFwiK2UuY2hhckNvZGVBdCgwKSk7cmV0dXJuIHRoaXMudG9rZW5zfTt2YXIgcD17ZXNjYXBlOi9eXFxcXChbXFxcXGAqe31cXFtcXF0oKSMrXFwtLiFfPl0pLyxhdXRvbGluazovXjwoW14gPl0rKEB8OlxcLylbXiA+XSspPi8sdXJsOnUsdGFnOi9ePCEtLVtcXHNcXFNdKj8tLT58XjxcXC8/XFx3Kyg/OlwiW15cIl0qXCJ8J1teJ10qJ3xbXidcIj5dKSo/Pi8sbGluazovXiE/XFxbKGluc2lkZSlcXF1cXChocmVmXFwpLyxyZWZsaW5rOi9eIT9cXFsoaW5zaWRlKVxcXVxccypcXFsoW15cXF1dKilcXF0vLG5vbGluazovXiE/XFxbKCg/OlxcW1teXFxdXSpcXF18W15cXFtcXF1dKSopXFxdLyxzdHJvbmc6L15fXyhbXFxzXFxTXSs/KV9fKD8hXyl8XlxcKlxcKihbXFxzXFxTXSs/KVxcKlxcKig/IVxcKikvLGVtOi9eXFxiXygoPzpbXl9dfF9fKSs/KV9cXGJ8XlxcKigoPzpcXCpcXCp8W1xcc1xcU10pKz8pXFwqKD8hXFwqKS8sY29kZTovXihgKylcXHMqKFtcXHNcXFNdKj9bXmBdKVxccypcXDEoPyFgKS8sYnI6L14gezIsfVxcbig/IVxccyokKS8sZGVsOnUsdGV4dDovXltcXHNcXFNdKz8oPz1bXFxcXDwhXFxbXypgXXwgezIsfVxcbnwkKS99O3AuX2luc2lkZT0vKD86XFxbW15cXF1dKlxcXXxbXlxcW1xcXV18XFxdKD89W15cXFtdKlxcXSkpKi8scC5faHJlZj0vXFxzKjw/KFtcXHNcXFNdKj8pPj8oPzpcXHMrWydcIl0oW1xcc1xcU10qPylbJ1wiXSk/XFxzKi8scC5saW5rPWMocC5saW5rKShcImluc2lkZVwiLHAuX2luc2lkZSkoXCJocmVmXCIscC5faHJlZikoKSxwLnJlZmxpbms9YyhwLnJlZmxpbmspKFwiaW5zaWRlXCIscC5faW5zaWRlKSgpLHAubm9ybWFsPWQoe30scCkscC5wZWRhbnRpYz1kKHt9LHAubm9ybWFsLHtzdHJvbmc6L15fXyg/PVxcUykoW1xcc1xcU10qP1xcUylfXyg/IV8pfF5cXCpcXCooPz1cXFMpKFtcXHNcXFNdKj9cXFMpXFwqXFwqKD8hXFwqKS8sZW06L15fKD89XFxTKShbXFxzXFxTXSo/XFxTKV8oPyFfKXxeXFwqKD89XFxTKShbXFxzXFxTXSo/XFxTKVxcKig/IVxcKikvfSkscC5nZm09ZCh7fSxwLm5vcm1hbCx7ZXNjYXBlOmMocC5lc2NhcGUpKFwiXSlcIixcIn58XSlcIikoKSx1cmw6L14oaHR0cHM/OlxcL1xcL1teXFxzPF0rW148Liw6O1wiJylcXF1cXHNdKS8sZGVsOi9efn4oPz1cXFMpKFtcXHNcXFNdKj9cXFMpfn4vLHRleHQ6YyhwLnRleHQpKFwiXXxcIixcIn5dfFwiKShcInxcIixcInxodHRwcz86Ly98XCIpKCl9KSxwLmJyZWFrcz1kKHt9LHAuZ2ZtLHticjpjKHAuYnIpKFwiezIsfVwiLFwiKlwiKSgpLHRleHQ6YyhwLmdmbS50ZXh0KShcInsyLH1cIixcIipcIikoKX0pLGkucnVsZXM9cCxpLm91dHB1dD1mdW5jdGlvbihlLHQsbil7dmFyIHI9bmV3IGkodCxuKTtyZXR1cm4gci5vdXRwdXQoZSl9LGkucHJvdG90eXBlLm91dHB1dD1mdW5jdGlvbihlKXtmb3IodmFyIHQsbixyLGksbz1cIlwiO2U7KWlmKGk9dGhpcy5ydWxlcy5lc2NhcGUuZXhlYyhlKSllPWUuc3Vic3RyaW5nKGlbMF0ubGVuZ3RoKSxvKz1pWzFdO2Vsc2UgaWYoaT10aGlzLnJ1bGVzLmF1dG9saW5rLmV4ZWMoZSkpZT1lLnN1YnN0cmluZyhpWzBdLmxlbmd0aCksXCJAXCI9PT1pWzJdPyhuPVwiOlwiPT09aVsxXS5jaGFyQXQoNik/dGhpcy5tYW5nbGUoaVsxXS5zdWJzdHJpbmcoNykpOnRoaXMubWFuZ2xlKGlbMV0pLHI9dGhpcy5tYW5nbGUoXCJtYWlsdG86XCIpK24pOihuPWEoaVsxXSkscj1uKSxvKz10aGlzLnJlbmRlcmVyLmxpbmsocixudWxsLG4pO2Vsc2UgaWYodGhpcy5pbkxpbmt8fCEoaT10aGlzLnJ1bGVzLnVybC5leGVjKGUpKSl7aWYoaT10aGlzLnJ1bGVzLnRhZy5leGVjKGUpKSF0aGlzLmluTGluayYmL148YSAvaS50ZXN0KGlbMF0pP3RoaXMuaW5MaW5rPSEwOnRoaXMuaW5MaW5rJiYvXjxcXC9hPi9pLnRlc3QoaVswXSkmJih0aGlzLmluTGluaz0hMSksZT1lLnN1YnN0cmluZyhpWzBdLmxlbmd0aCksbys9dGhpcy5vcHRpb25zLnNhbml0aXplP3RoaXMub3B0aW9ucy5zYW5pdGl6ZXI/dGhpcy5vcHRpb25zLnNhbml0aXplcihpWzBdKTphKGlbMF0pOmlbMF07ZWxzZSBpZihpPXRoaXMucnVsZXMubGluay5leGVjKGUpKWU9ZS5zdWJzdHJpbmcoaVswXS5sZW5ndGgpLHRoaXMuaW5MaW5rPSEwLG8rPXRoaXMub3V0cHV0TGluayhpLHtocmVmOmlbMl0sdGl0bGU6aVszXX0pLHRoaXMuaW5MaW5rPSExO2Vsc2UgaWYoKGk9dGhpcy5ydWxlcy5yZWZsaW5rLmV4ZWMoZSkpfHwoaT10aGlzLnJ1bGVzLm5vbGluay5leGVjKGUpKSl7aWYoZT1lLnN1YnN0cmluZyhpWzBdLmxlbmd0aCksdD0oaVsyXXx8aVsxXSkucmVwbGFjZSgvXFxzKy9nLFwiIFwiKSx0PXRoaXMubGlua3NbdC50b0xvd2VyQ2FzZSgpXSwhdHx8IXQuaHJlZil7bys9aVswXS5jaGFyQXQoMCksZT1pWzBdLnN1YnN0cmluZygxKStlO2NvbnRpbnVlfXRoaXMuaW5MaW5rPSEwLG8rPXRoaXMub3V0cHV0TGluayhpLHQpLHRoaXMuaW5MaW5rPSExfWVsc2UgaWYoaT10aGlzLnJ1bGVzLnN0cm9uZy5leGVjKGUpKWU9ZS5zdWJzdHJpbmcoaVswXS5sZW5ndGgpLG8rPXRoaXMucmVuZGVyZXIuc3Ryb25nKHRoaXMub3V0cHV0KGlbMl18fGlbMV0pKTtlbHNlIGlmKGk9dGhpcy5ydWxlcy5lbS5leGVjKGUpKWU9ZS5zdWJzdHJpbmcoaVswXS5sZW5ndGgpLG8rPXRoaXMucmVuZGVyZXIuZW0odGhpcy5vdXRwdXQoaVsyXXx8aVsxXSkpO2Vsc2UgaWYoaT10aGlzLnJ1bGVzLmNvZGUuZXhlYyhlKSllPWUuc3Vic3RyaW5nKGlbMF0ubGVuZ3RoKSxvKz10aGlzLnJlbmRlcmVyLmNvZGVzcGFuKGEoaVsyXSwhMCkpO2Vsc2UgaWYoaT10aGlzLnJ1bGVzLmJyLmV4ZWMoZSkpZT1lLnN1YnN0cmluZyhpWzBdLmxlbmd0aCksbys9dGhpcy5yZW5kZXJlci5icigpO2Vsc2UgaWYoaT10aGlzLnJ1bGVzLmRlbC5leGVjKGUpKWU9ZS5zdWJzdHJpbmcoaVswXS5sZW5ndGgpLG8rPXRoaXMucmVuZGVyZXIuZGVsKHRoaXMub3V0cHV0KGlbMV0pKTtlbHNlIGlmKGk9dGhpcy5ydWxlcy50ZXh0LmV4ZWMoZSkpZT1lLnN1YnN0cmluZyhpWzBdLmxlbmd0aCksbys9dGhpcy5yZW5kZXJlci50ZXh0KGEodGhpcy5zbWFydHlwYW50cyhpWzBdKSkpO2Vsc2UgaWYoZSl0aHJvdyBuZXcgRXJyb3IoXCJJbmZpbml0ZSBsb29wIG9uIGJ5dGU6IFwiK2UuY2hhckNvZGVBdCgwKSl9ZWxzZSBlPWUuc3Vic3RyaW5nKGlbMF0ubGVuZ3RoKSxuPWEoaVsxXSkscj1uLG8rPXRoaXMucmVuZGVyZXIubGluayhyLG51bGwsbik7cmV0dXJuIG99LGkucHJvdG90eXBlLm91dHB1dExpbms9ZnVuY3Rpb24oZSx0KXt2YXIgbj1hKHQuaHJlZikscj10LnRpdGxlP2EodC50aXRsZSk6bnVsbDtyZXR1cm5cIiFcIiE9PWVbMF0uY2hhckF0KDApP3RoaXMucmVuZGVyZXIubGluayhuLHIsdGhpcy5vdXRwdXQoZVsxXSkpOnRoaXMucmVuZGVyZXIuaW1hZ2UobixyLGEoZVsxXSkpfSxpLnByb3RvdHlwZS5zbWFydHlwYW50cz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vcHRpb25zLnNtYXJ0eXBhbnRzP2UucmVwbGFjZSgvLS0tL2csXCLigJRcIikucmVwbGFjZSgvLS0vZyxcIuKAk1wiKS5yZXBsYWNlKC8oXnxbLVxcdTIwMTQvKFxcW3tcIlxcc10pJy9nLFwiJDHigJhcIikucmVwbGFjZSgvJy9nLFwi4oCZXCIpLnJlcGxhY2UoLyhefFstXFx1MjAxNC8oXFxbe1xcdTIwMThcXHNdKVwiL2csXCIkMeKAnFwiKS5yZXBsYWNlKC9cIi9nLFwi4oCdXCIpLnJlcGxhY2UoL1xcLnszfS9nLFwi4oCmXCIpOmV9LGkucHJvdG90eXBlLm1hbmdsZT1mdW5jdGlvbihlKXtpZighdGhpcy5vcHRpb25zLm1hbmdsZSlyZXR1cm4gZTtmb3IodmFyIHQsbj1cIlwiLHI9ZS5sZW5ndGgsaT0wO3I+aTtpKyspdD1lLmNoYXJDb2RlQXQoaSksTWF0aC5yYW5kb20oKT4uNSYmKHQ9XCJ4XCIrdC50b1N0cmluZygxNikpLG4rPVwiJiNcIit0K1wiO1wiO3JldHVybiBufSxvLnByb3RvdHlwZS5jb2RlPWZ1bmN0aW9uKGUsdCxuKXtpZih0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0KXt2YXIgcj10aGlzLm9wdGlvbnMuaGlnaGxpZ2h0KGUsdCk7bnVsbCE9ciYmciE9PWUmJihuPSEwLGU9cil9cmV0dXJuIHQ/JzxwcmU+PGNvZGUgY2xhc3M9XCInK3RoaXMub3B0aW9ucy5sYW5nUHJlZml4K2EodCwhMCkrJ1wiPicrKG4/ZTphKGUsITApKStcIlxcbjwvY29kZT48L3ByZT5cXG5cIjpcIjxwcmU+PGNvZGU+XCIrKG4/ZTphKGUsITApKStcIlxcbjwvY29kZT48L3ByZT5cIn0sby5wcm90b3R5cGUuYmxvY2txdW90ZT1mdW5jdGlvbihlKXtyZXR1cm5cIjxibG9ja3F1b3RlPlxcblwiK2UrXCI8L2Jsb2NrcXVvdGU+XFxuXCJ9LG8ucHJvdG90eXBlLmh0bWw9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LG8ucHJvdG90eXBlLmhlYWRpbmc9ZnVuY3Rpb24oZSx0LG4pe3JldHVyblwiPGhcIit0KycgaWQ9XCInK3RoaXMub3B0aW9ucy5oZWFkZXJQcmVmaXgrbi50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teXFx3XSsvZyxcIi1cIikrJ1wiPicrZStcIjwvaFwiK3QrXCI+XFxuXCJ9LG8ucHJvdG90eXBlLmhyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy54aHRtbD9cIjxoci8+XFxuXCI6XCI8aHI+XFxuXCJ9LG8ucHJvdG90eXBlLmxpc3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbj10P1wib2xcIjpcInVsXCI7cmV0dXJuXCI8XCIrbitcIj5cXG5cIitlK1wiPC9cIituK1wiPlxcblwifSxvLnByb3RvdHlwZS5saXN0aXRlbT1mdW5jdGlvbihlKXtyZXR1cm5cIjxsaT5cIitlK1wiPC9saT5cXG5cIn0sby5wcm90b3R5cGUucGFyYWdyYXBoPWZ1bmN0aW9uKGUpe3JldHVyblwiPHA+XCIrZStcIjwvcD5cXG5cIn0sby5wcm90b3R5cGUudGFibGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm5cIjx0YWJsZT5cXG48dGhlYWQ+XFxuXCIrZStcIjwvdGhlYWQ+XFxuPHRib2R5PlxcblwiK3QrXCI8L3Rib2R5PlxcbjwvdGFibGU+XFxuXCJ9LG8ucHJvdG90eXBlLnRhYmxlcm93PWZ1bmN0aW9uKGUpe3JldHVyblwiPHRyPlxcblwiK2UrXCI8L3RyPlxcblwifSxvLnByb3RvdHlwZS50YWJsZWNlbGw9ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmhlYWRlcj9cInRoXCI6XCJ0ZFwiLHI9dC5hbGlnbj9cIjxcIituKycgc3R5bGU9XCJ0ZXh0LWFsaWduOicrdC5hbGlnbisnXCI+JzpcIjxcIituK1wiPlwiO3JldHVybiByK2UrXCI8L1wiK24rXCI+XFxuXCJ9LG8ucHJvdG90eXBlLnN0cm9uZz1mdW5jdGlvbihlKXtyZXR1cm5cIjxzdHJvbmc+XCIrZStcIjwvc3Ryb25nPlwifSxvLnByb3RvdHlwZS5lbT1mdW5jdGlvbihlKXtyZXR1cm5cIjxlbT5cIitlK1wiPC9lbT5cIn0sby5wcm90b3R5cGUuY29kZXNwYW49ZnVuY3Rpb24oZSl7cmV0dXJuXCI8Y29kZT5cIitlK1wiPC9jb2RlPlwifSxvLnByb3RvdHlwZS5icj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMueGh0bWw/XCI8YnIvPlwiOlwiPGJyPlwifSxvLnByb3RvdHlwZS5kZWw9ZnVuY3Rpb24oZSl7cmV0dXJuXCI8ZGVsPlwiK2UrXCI8L2RlbD5cIn0sby5wcm90b3R5cGUubGluaz1mdW5jdGlvbihlLHQsbil7aWYodGhpcy5vcHRpb25zLnNhbml0aXplKXt0cnl7dmFyIHI9ZGVjb2RlVVJJQ29tcG9uZW50KHMoZSkpLnJlcGxhY2UoL1teXFx3Ol0vZyxcIlwiKS50b0xvd2VyQ2FzZSgpfWNhdGNoKGkpe3JldHVyblwiXCJ9aWYoMD09PXIuaW5kZXhPZihcImphdmFzY3JpcHQ6XCIpfHwwPT09ci5pbmRleE9mKFwidmJzY3JpcHQ6XCIpKXJldHVyblwiXCJ9dmFyIG89JzxhIGhyZWY9XCInK2UrJ1wiJztyZXR1cm4gdCYmKG8rPScgdGl0bGU9XCInK3QrJ1wiJyksbys9XCI+XCIrbitcIjwvYT5cIn0sby5wcm90b3R5cGUuaW1hZ2U9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPSc8aW1nIHNyYz1cIicrZSsnXCIgYWx0PVwiJytuKydcIic7cmV0dXJuIHQmJihyKz0nIHRpdGxlPVwiJyt0KydcIicpLHIrPXRoaXMub3B0aW9ucy54aHRtbD9cIi8+XCI6XCI+XCJ9LG8ucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGwucGFyc2U9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPW5ldyBsKHQsbik7cmV0dXJuIHIucGFyc2UoZSl9LGwucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGUpe3RoaXMuaW5saW5lPW5ldyBpKGUubGlua3MsdGhpcy5vcHRpb25zLHRoaXMucmVuZGVyZXIpLHRoaXMudG9rZW5zPWUucmV2ZXJzZSgpO2Zvcih2YXIgdD1cIlwiO3RoaXMubmV4dCgpOyl0Kz10aGlzLnRvaygpO3JldHVybiB0fSxsLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW49dGhpcy50b2tlbnMucG9wKCl9LGwucHJvdG90eXBlLnBlZWs9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b2tlbnNbdGhpcy50b2tlbnMubGVuZ3RoLTFdfHwwfSxsLnByb3RvdHlwZS5wYXJzZVRleHQ9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy50b2tlbi50ZXh0O1widGV4dFwiPT09dGhpcy5wZWVrKCkudHlwZTspZSs9XCJcXG5cIit0aGlzLm5leHQoKS50ZXh0O3JldHVybiB0aGlzLmlubGluZS5vdXRwdXQoZSl9LGwucHJvdG90eXBlLnRvaz1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLnRva2VuLnR5cGUpe2Nhc2VcInNwYWNlXCI6cmV0dXJuXCJcIjtjYXNlXCJoclwiOnJldHVybiB0aGlzLnJlbmRlcmVyLmhyKCk7Y2FzZVwiaGVhZGluZ1wiOnJldHVybiB0aGlzLnJlbmRlcmVyLmhlYWRpbmcodGhpcy5pbmxpbmUub3V0cHV0KHRoaXMudG9rZW4udGV4dCksdGhpcy50b2tlbi5kZXB0aCx0aGlzLnRva2VuLnRleHQpO2Nhc2VcImNvZGVcIjpyZXR1cm4gdGhpcy5yZW5kZXJlci5jb2RlKHRoaXMudG9rZW4udGV4dCx0aGlzLnRva2VuLmxhbmcsdGhpcy50b2tlbi5lc2NhcGVkKTtjYXNlXCJ0YWJsZVwiOnZhciBlLHQsbixyLGksbz1cIlwiLGw9XCJcIjtmb3Iobj1cIlwiLGU9MDtlPHRoaXMudG9rZW4uaGVhZGVyLmxlbmd0aDtlKyspcj17aGVhZGVyOiEwLGFsaWduOnRoaXMudG9rZW4uYWxpZ25bZV19LG4rPXRoaXMucmVuZGVyZXIudGFibGVjZWxsKHRoaXMuaW5saW5lLm91dHB1dCh0aGlzLnRva2VuLmhlYWRlcltlXSkse2hlYWRlcjohMCxhbGlnbjp0aGlzLnRva2VuLmFsaWduW2VdfSk7Zm9yKG8rPXRoaXMucmVuZGVyZXIudGFibGVyb3cobiksZT0wO2U8dGhpcy50b2tlbi5jZWxscy5sZW5ndGg7ZSsrKXtmb3IodD10aGlzLnRva2VuLmNlbGxzW2VdLG49XCJcIixpPTA7aTx0Lmxlbmd0aDtpKyspbis9dGhpcy5yZW5kZXJlci50YWJsZWNlbGwodGhpcy5pbmxpbmUub3V0cHV0KHRbaV0pLHtoZWFkZXI6ITEsYWxpZ246dGhpcy50b2tlbi5hbGlnbltpXX0pO2wrPXRoaXMucmVuZGVyZXIudGFibGVyb3cobil9cmV0dXJuIHRoaXMucmVuZGVyZXIudGFibGUobyxsKTtjYXNlXCJibG9ja3F1b3RlX3N0YXJ0XCI6Zm9yKHZhciBsPVwiXCI7XCJibG9ja3F1b3RlX2VuZFwiIT09dGhpcy5uZXh0KCkudHlwZTspbCs9dGhpcy50b2soKTtyZXR1cm4gdGhpcy5yZW5kZXJlci5ibG9ja3F1b3RlKGwpO2Nhc2VcImxpc3Rfc3RhcnRcIjpmb3IodmFyIGw9XCJcIixhPXRoaXMudG9rZW4ub3JkZXJlZDtcImxpc3RfZW5kXCIhPT10aGlzLm5leHQoKS50eXBlOylsKz10aGlzLnRvaygpO3JldHVybiB0aGlzLnJlbmRlcmVyLmxpc3QobCxhKTtjYXNlXCJsaXN0X2l0ZW1fc3RhcnRcIjpmb3IodmFyIGw9XCJcIjtcImxpc3RfaXRlbV9lbmRcIiE9PXRoaXMubmV4dCgpLnR5cGU7KWwrPVwidGV4dFwiPT09dGhpcy50b2tlbi50eXBlP3RoaXMucGFyc2VUZXh0KCk6dGhpcy50b2soKTtyZXR1cm4gdGhpcy5yZW5kZXJlci5saXN0aXRlbShsKTtjYXNlXCJsb29zZV9pdGVtX3N0YXJ0XCI6Zm9yKHZhciBsPVwiXCI7XCJsaXN0X2l0ZW1fZW5kXCIhPT10aGlzLm5leHQoKS50eXBlOylsKz10aGlzLnRvaygpO3JldHVybiB0aGlzLnJlbmRlcmVyLmxpc3RpdGVtKGwpO2Nhc2VcImh0bWxcIjp2YXIgcz10aGlzLnRva2VuLnByZXx8dGhpcy5vcHRpb25zLnBlZGFudGljP3RoaXMudG9rZW4udGV4dDp0aGlzLmlubGluZS5vdXRwdXQodGhpcy50b2tlbi50ZXh0KTtyZXR1cm4gdGhpcy5yZW5kZXJlci5odG1sKHMpO2Nhc2VcInBhcmFncmFwaFwiOnJldHVybiB0aGlzLnJlbmRlcmVyLnBhcmFncmFwaCh0aGlzLmlubGluZS5vdXRwdXQodGhpcy50b2tlbi50ZXh0KSk7Y2FzZVwidGV4dFwiOnJldHVybiB0aGlzLnJlbmRlcmVyLnBhcmFncmFwaCh0aGlzLnBhcnNlVGV4dCgpKX19LHUuZXhlYz11LGgub3B0aW9ucz1oLnNldE9wdGlvbnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGQoaC5kZWZhdWx0cyxlKSxofSxoLmRlZmF1bHRzPXtnZm06ITAsdGFibGVzOiEwLGJyZWFrczohMSxwZWRhbnRpYzohMSxzYW5pdGl6ZTohMSxzYW5pdGl6ZXI6bnVsbCxtYW5nbGU6ITAsc21hcnRMaXN0czohMSxzaWxlbnQ6ITEsaGlnaGxpZ2h0Om51bGwsbGFuZ1ByZWZpeDpcImxhbmctXCIsc21hcnR5cGFudHM6ITEsaGVhZGVyUHJlZml4OlwiXCIscmVuZGVyZXI6bmV3IG8seGh0bWw6ITF9LGguUGFyc2VyPWwsaC5wYXJzZXI9bC5wYXJzZSxoLlJlbmRlcmVyPW8saC5MZXhlcj10LGgubGV4ZXI9dC5sZXgsaC5JbmxpbmVMZXhlcj1pLGguaW5saW5lTGV4ZXI9aS5vdXRwdXQsaC5wYXJzZT1oLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBuJiZcIm9iamVjdFwiPT10eXBlb2Ygcj9uLmV4cG9ydHM9aDpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlLmFtZD9lKGZ1bmN0aW9uKCl7cmV0dXJuIGh9KTp0aGlzLm1hcmtlZD1ofSkuY2FsbChmdW5jdGlvbigpe3JldHVybiB0aGlzfHwoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dCl9KCkpfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sMTI6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj1lKFwiY29kZW1pcnJvclwiKTtyLmNvbW1hbmRzLnRhYkFuZEluZGVudE1hcmtkb3duTGlzdD1mdW5jdGlvbihlKXt2YXIgdD1lLmxpc3RTZWxlY3Rpb25zKCksbj10WzBdLmhlYWQscj1lLmdldFN0YXRlQWZ0ZXIobi5saW5lKSxpPXIubGlzdCE9PSExO2lmKGkpcmV0dXJuIHZvaWQgZS5leGVjQ29tbWFuZChcImluZGVudE1vcmVcIik7aWYoZS5vcHRpb25zLmluZGVudFdpdGhUYWJzKWUuZXhlY0NvbW1hbmQoXCJpbnNlcnRUYWJcIik7ZWxzZXt2YXIgbz1BcnJheShlLm9wdGlvbnMudGFiU2l6ZSsxKS5qb2luKFwiIFwiKTtlLnJlcGxhY2VTZWxlY3Rpb24obyl9fSxyLmNvbW1hbmRzLnNoaWZ0VGFiQW5kVW5pbmRlbnRNYXJrZG93bkxpc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5saXN0U2VsZWN0aW9ucygpLG49dFswXS5oZWFkLHI9ZS5nZXRTdGF0ZUFmdGVyKG4ubGluZSksaT1yLmxpc3QhPT0hMTtpZihpKXJldHVybiB2b2lkIGUuZXhlY0NvbW1hbmQoXCJpbmRlbnRMZXNzXCIpO2lmKGUub3B0aW9ucy5pbmRlbnRXaXRoVGFicyllLmV4ZWNDb21tYW5kKFwiaW5zZXJ0VGFiXCIpO2Vsc2V7dmFyIG89QXJyYXkoZS5vcHRpb25zLnRhYlNpemUrMSkuam9pbihcIiBcIik7ZS5yZXBsYWNlU2VsZWN0aW9uKG8pfX19LHtjb2RlbWlycm9yOjZ9XSwxMzpbZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGU9ej9lLnJlcGxhY2UoXCJDdHJsXCIsXCJDbWRcIik6ZS5yZXBsYWNlKFwiQ21kXCIsXCJDdHJsXCIpfWZ1bmN0aW9uIGkoZSx0KXtlPWV8fHt9O3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3JldHVybiB0PXZvaWQgMD09dD8hMDp0LGUudGl0bGUmJnQmJihuLnRpdGxlPWUudGl0bGUseiYmKG4udGl0bGU9bi50aXRsZS5yZXBsYWNlKFwiQ3RybFwiLFwi4oyYXCIpLG4udGl0bGU9bi50aXRsZS5yZXBsYWNlKFwiQWx0XCIsXCLijKVcIikpKSxuLmNsYXNzTmFtZT1lLmNsYXNzTmFtZSxufWZ1bmN0aW9uIG8oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtyZXR1cm4gZS5jbGFzc05hbWU9XCJzZXBhcmF0b3JcIixlLmlubmVySFRNTD1cInxcIixlfWZ1bmN0aW9uIGwoZSx0KXt0PXR8fGUuZ2V0Q3Vyc29yKFwic3RhcnRcIik7dmFyIG49ZS5nZXRUb2tlbkF0KHQpO2lmKCFuLnR5cGUpcmV0dXJue307Zm9yKHZhciByLGksbz1uLnR5cGUuc3BsaXQoXCIgXCIpLGw9e30sYT0wO2E8by5sZW5ndGg7YSsrKXI9b1thXSxcInN0cm9uZ1wiPT09cj9sLmJvbGQ9ITA6XCJ2YXJpYWJsZS0yXCI9PT1yPyhpPWUuZ2V0TGluZSh0LmxpbmUpLC9eXFxzKlxcZCtcXC5cXHMvLnRlc3QoaSk/bFtcIm9yZGVyZWQtbGlzdFwiXT0hMDpsW1widW5vcmRlcmVkLWxpc3RcIl09ITApOlwiYXRvbVwiPT09cj9sLnF1b3RlPSEwOlwiZW1cIj09PXI/bC5pdGFsaWM9ITA6XCJxdW90ZVwiPT09cj9sLnF1b3RlPSEwOlwic3RyaWtldGhyb3VnaFwiPT09cj9sLnN0cmlrZXRocm91Z2g9ITA6XCJjb21tZW50XCI9PT1yJiYobC5jb2RlPSEwKTtyZXR1cm4gbH1mdW5jdGlvbiBhKGUpe3ZhciB0PWUuY29kZW1pcnJvcjt0LnNldE9wdGlvbihcImZ1bGxTY3JlZW5cIiwhdC5nZXRPcHRpb24oXCJmdWxsU2NyZWVuXCIpKSx0LmdldE9wdGlvbihcImZ1bGxTY3JlZW5cIik/KEI9ZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyxkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PVwiaGlkZGVuXCIpOmRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c9Qjt2YXIgbj10LmdldFdyYXBwZXJFbGVtZW50KCk7L2Z1bGxzY3JlZW4vLnRlc3Qobi5wcmV2aW91c1NpYmxpbmcuY2xhc3NOYW1lKT9uLnByZXZpb3VzU2libGluZy5jbGFzc05hbWU9bi5wcmV2aW91c1NpYmxpbmcuY2xhc3NOYW1lLnJlcGxhY2UoL1xccypmdWxsc2NyZWVuXFxiLyxcIlwiKTpuLnByZXZpb3VzU2libGluZy5jbGFzc05hbWUrPVwiIGZ1bGxzY3JlZW5cIjt2YXIgcj1lLnRvb2xiYXJFbGVtZW50cy5mdWxsc2NyZWVuOy9hY3RpdmUvLnRlc3Qoci5jbGFzc05hbWUpP3IuY2xhc3NOYW1lPXIuY2xhc3NOYW1lLnJlcGxhY2UoL1xccyphY3RpdmVcXHMqL2csXCJcIik6ci5jbGFzc05hbWUrPVwiIGFjdGl2ZVwiO3ZhciBpPXQuZ2V0V3JhcHBlckVsZW1lbnQoKS5uZXh0U2libGluZzsvZWRpdG9yLXByZXZpZXctYWN0aXZlLXNpZGUvLnRlc3QoaS5jbGFzc05hbWUpJiZMKGUpfWZ1bmN0aW9uIHMoZSl7TyhlLFwiYm9sZFwiLFwiKipcIil9ZnVuY3Rpb24gYyhlKXtPKGUsXCJpdGFsaWNcIixcIipcIil9ZnVuY3Rpb24gdShlKXtPKGUsXCJzdHJpa2V0aHJvdWdoXCIsXCJ+flwiKX1mdW5jdGlvbiBkKGUpe08oZSxcImNvZGVcIixcImBgYFxcclxcblwiLFwiXFxyXFxuYGBgXCIpfWZ1bmN0aW9uIGgoZSl7dmFyIHQ9ZS5jb2RlbWlycm9yO0EodCxcInF1b3RlXCIpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9ZS5jb2RlbWlycm9yO04odCxcInNtYWxsZXJcIil9ZnVuY3Rpb24gcChlKXt2YXIgdD1lLmNvZGVtaXJyb3I7Tih0LFwiYmlnZ2VyXCIpfWZ1bmN0aW9uIG0oZSl7dmFyIHQ9ZS5jb2RlbWlycm9yO04odCx2b2lkIDAsMSl9ZnVuY3Rpb24gZyhlKXt2YXIgdD1lLmNvZGVtaXJyb3I7Tih0LHZvaWQgMCwyKX1mdW5jdGlvbiB2KGUpe3ZhciB0PWUuY29kZW1pcnJvcjtOKHQsdm9pZCAwLDMpfWZ1bmN0aW9uIHkoZSl7dmFyIHQ9ZS5jb2RlbWlycm9yO0EodCxcInVub3JkZXJlZC1saXN0XCIpfWZ1bmN0aW9uIHgoZSl7dmFyIHQ9ZS5jb2RlbWlycm9yO0EodCxcIm9yZGVyZWQtbGlzdFwiKX1mdW5jdGlvbiBiKGUpe3ZhciB0PWUuY29kZW1pcnJvcixuPWwodCkscj1lLm9wdGlvbnM7TSh0LG4ubGluayxyLmluc2VydFRleHRzLmxpbmspfWZ1bmN0aW9uIHcoZSl7dmFyIHQ9ZS5jb2RlbWlycm9yLG49bCh0KSxyPWUub3B0aW9ucztNKHQsbi5pbWFnZSxyLmluc2VydFRleHRzLmltYWdlKX1mdW5jdGlvbiBrKGUpe3ZhciB0PWUuY29kZW1pcnJvcixuPWwodCkscj1lLm9wdGlvbnM7TSh0LG4uaW1hZ2Usci5pbnNlcnRUZXh0cy5ob3Jpem9udGFsUnVsZSl9ZnVuY3Rpb24gQyhlKXt2YXIgdD1lLmNvZGVtaXJyb3I7dC51bmRvKCksdC5mb2N1cygpfWZ1bmN0aW9uIFMoZSl7dmFyIHQ9ZS5jb2RlbWlycm9yO3QucmVkbygpLHQuZm9jdXMoKX1mdW5jdGlvbiBMKGUpe3ZhciB0PWUuY29kZW1pcnJvcixuPXQuZ2V0V3JhcHBlckVsZW1lbnQoKSxyPW4ubmV4dFNpYmxpbmcsaT1lLnRvb2xiYXJFbGVtZW50c1tcInNpZGUtYnktc2lkZVwiXTsvZWRpdG9yLXByZXZpZXctYWN0aXZlLXNpZGUvLnRlc3Qoci5jbGFzc05hbWUpPyhyLmNsYXNzTmFtZT1yLmNsYXNzTmFtZS5yZXBsYWNlKC9cXHMqZWRpdG9yLXByZXZpZXctYWN0aXZlLXNpZGVcXHMqL2csXCJcIiksaS5jbGFzc05hbWU9aS5jbGFzc05hbWUucmVwbGFjZSgvXFxzKmFjdGl2ZVxccyovZyxcIlwiKSxuLmNsYXNzTmFtZT1uLmNsYXNzTmFtZS5yZXBsYWNlKC9cXHMqQ29kZU1pcnJvci1zaWRlZFxccyovZyxcIiBcIikpOihzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5nZXRPcHRpb24oXCJmdWxsU2NyZWVuXCIpfHxhKGUpLHIuY2xhc3NOYW1lKz1cIiBlZGl0b3ItcHJldmlldy1hY3RpdmUtc2lkZVwifSwxKSxpLmNsYXNzTmFtZSs9XCIgYWN0aXZlXCIsbi5jbGFzc05hbWUrPVwiIENvZGVNaXJyb3Itc2lkZWRcIik7dmFyIG89bi5sYXN0Q2hpbGQ7aWYoL2VkaXRvci1wcmV2aWV3LWFjdGl2ZS8udGVzdChvLmNsYXNzTmFtZSkpe28uY2xhc3NOYW1lPW8uY2xhc3NOYW1lLnJlcGxhY2UoL1xccyplZGl0b3ItcHJldmlldy1hY3RpdmVcXHMqL2csXCJcIik7dmFyIGw9ZS50b29sYmFyRWxlbWVudHMucHJldmlldyxzPW4ucHJldmlvdXNTaWJsaW5nO2wuY2xhc3NOYW1lPWwuY2xhc3NOYW1lLnJlcGxhY2UoL1xccyphY3RpdmVcXHMqL2csXCJcIikscy5jbGFzc05hbWU9cy5jbGFzc05hbWUucmVwbGFjZSgvXFxzKmRpc2FibGVkLWZvci1wcmV2aWV3Ki9nLFwiXCIpfXIuaW5uZXJIVE1MPWUub3B0aW9ucy5wcmV2aWV3UmVuZGVyKGUudmFsdWUoKSxyKSx0Lm9uKFwidXBkYXRlXCIsZnVuY3Rpb24oKXtyLmlubmVySFRNTD1lLm9wdGlvbnMucHJldmlld1JlbmRlcihlLnZhbHVlKCkscil9KX1mdW5jdGlvbiBUKGUpe3ZhciB0PWUuY29kZW1pcnJvcixuPXQuZ2V0V3JhcHBlckVsZW1lbnQoKSxyPW4ucHJldmlvdXNTaWJsaW5nLGk9ZS50b29sYmFyRWxlbWVudHMucHJldmlldyxvPW4ubGFzdENoaWxkO28mJi9lZGl0b3ItcHJldmlldy8udGVzdChvLmNsYXNzTmFtZSl8fChvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksby5jbGFzc05hbWU9XCJlZGl0b3ItcHJldmlld1wiLG4uYXBwZW5kQ2hpbGQobykpLC9lZGl0b3ItcHJldmlldy1hY3RpdmUvLnRlc3Qoby5jbGFzc05hbWUpPyhvLmNsYXNzTmFtZT1vLmNsYXNzTmFtZS5yZXBsYWNlKC9cXHMqZWRpdG9yLXByZXZpZXctYWN0aXZlXFxzKi9nLFwiXCIpLGkuY2xhc3NOYW1lPWkuY2xhc3NOYW1lLnJlcGxhY2UoL1xccyphY3RpdmVcXHMqL2csXCJcIiksci5jbGFzc05hbWU9ci5jbGFzc05hbWUucmVwbGFjZSgvXFxzKmRpc2FibGVkLWZvci1wcmV2aWV3Ki9nLFwiXCIpKTooc2V0VGltZW91dChmdW5jdGlvbigpe28uY2xhc3NOYW1lKz1cIiBlZGl0b3ItcHJldmlldy1hY3RpdmVcIn0sMSksaS5jbGFzc05hbWUrPVwiIGFjdGl2ZVwiLHIuY2xhc3NOYW1lKz1cIiBkaXNhYmxlZC1mb3ItcHJldmlld1wiKSxvLmlubmVySFRNTD1lLm9wdGlvbnMucHJldmlld1JlbmRlcihlLnZhbHVlKCksbyk7dmFyIGw9dC5nZXRXcmFwcGVyRWxlbWVudCgpLm5leHRTaWJsaW5nOy9lZGl0b3ItcHJldmlldy1hY3RpdmUtc2lkZS8udGVzdChsLmNsYXNzTmFtZSkmJkwoZSl9ZnVuY3Rpb24gTShlLHQsbil7aWYoIS9lZGl0b3ItcHJldmlldy1hY3RpdmUvLnRlc3QoZS5nZXRXcmFwcGVyRWxlbWVudCgpLmxhc3RDaGlsZC5jbGFzc05hbWUpKXt2YXIgcixpPW5bMF0sbz1uWzFdLGw9ZS5nZXRDdXJzb3IoXCJzdGFydFwiKSxhPWUuZ2V0Q3Vyc29yKFwiZW5kXCIpO3Q/KHI9ZS5nZXRMaW5lKGwubGluZSksaT1yLnNsaWNlKDAsbC5jaCksbz1yLnNsaWNlKGwuY2gpLGUucmVwbGFjZVJhbmdlKGkrbyx7bGluZTpsLmxpbmUsY2g6MH0pKToocj1lLmdldFNlbGVjdGlvbigpLGUucmVwbGFjZVNlbGVjdGlvbihpK3IrbyksbC5jaCs9aS5sZW5ndGgsbCE9PWEmJihhLmNoKz1pLmxlbmd0aCkpLGUuc2V0U2VsZWN0aW9uKGwsYSksZS5mb2N1cygpfX1mdW5jdGlvbiBOKGUsdCxuKXtpZighL2VkaXRvci1wcmV2aWV3LWFjdGl2ZS8udGVzdChlLmdldFdyYXBwZXJFbGVtZW50KCkubGFzdENoaWxkLmNsYXNzTmFtZSkpe2Zvcih2YXIgcj1lLmdldEN1cnNvcihcInN0YXJ0XCIpLGk9ZS5nZXRDdXJzb3IoXCJlbmRcIiksbz1yLmxpbmU7bzw9aS5saW5lO28rKykhZnVuY3Rpb24ocil7dmFyIGk9ZS5nZXRMaW5lKHIpLG89aS5zZWFyY2goL1teI10vKTtpPXZvaWQgMCE9PXQ/MD49bz9cImJpZ2dlclwiPT10P1wiIyMjIyMjIFwiK2k6XCIjIFwiK2k6Nj09byYmXCJzbWFsbGVyXCI9PXQ/aS5zdWJzdHIoNyk6MT09byYmXCJiaWdnZXJcIj09dD9pLnN1YnN0cigyKTpcImJpZ2dlclwiPT10P2kuc3Vic3RyKDEpOlwiI1wiK2k6MT09bj8wPj1vP1wiIyBcIitpOm89PW4/aS5zdWJzdHIobysxKTpcIiMgXCIraS5zdWJzdHIobysxKToyPT1uPzA+PW8/XCIjIyBcIitpOm89PW4/aS5zdWJzdHIobysxKTpcIiMjIFwiK2kuc3Vic3RyKG8rMSk6MD49bz9cIiMjIyBcIitpOm89PW4/aS5zdWJzdHIobysxKTpcIiMjIyBcIitpLnN1YnN0cihvKzEpLGUucmVwbGFjZVJhbmdlKGkse2xpbmU6cixjaDowfSx7bGluZTpyLGNoOjk5OTk5OTk5OTk5OTk5fSl9KG8pO2UuZm9jdXMoKX19ZnVuY3Rpb24gQShlLHQpe2lmKCEvZWRpdG9yLXByZXZpZXctYWN0aXZlLy50ZXN0KGUuZ2V0V3JhcHBlckVsZW1lbnQoKS5sYXN0Q2hpbGQuY2xhc3NOYW1lKSl7Zm9yKHZhciBuPWwoZSkscj1lLmdldEN1cnNvcihcInN0YXJ0XCIpLGk9ZS5nZXRDdXJzb3IoXCJlbmRcIiksbz17cXVvdGU6L14oXFxzKilcXD5cXHMrLyxcInVub3JkZXJlZC1saXN0XCI6L14oXFxzKikoXFwqfFxcLXxcXCspXFxzKy8sXCJvcmRlcmVkLWxpc3RcIjovXihcXHMqKVxcZCtcXC5cXHMrL30sYT17cXVvdGU6XCI+IFwiLFwidW5vcmRlcmVkLWxpc3RcIjpcIiogXCIsXCJvcmRlcmVkLWxpc3RcIjpcIjEuIFwifSxzPXIubGluZTtzPD1pLmxpbmU7cysrKSFmdW5jdGlvbihyKXt2YXIgaT1lLmdldExpbmUocik7aT1uW3RdP2kucmVwbGFjZShvW3RdLFwiJDFcIik6YVt0XStpLGUucmVwbGFjZVJhbmdlKGkse2xpbmU6cixjaDowfSx7bGluZTpyLGNoOjk5OTk5OTk5OTk5OTk5fSl9KHMpO2UuZm9jdXMoKX19ZnVuY3Rpb24gTyhlLHQsbixyKXtpZighL2VkaXRvci1wcmV2aWV3LWFjdGl2ZS8udGVzdChlLmNvZGVtaXJyb3IuZ2V0V3JhcHBlckVsZW1lbnQoKS5sYXN0Q2hpbGQuY2xhc3NOYW1lKSl7cj1cInVuZGVmaW5lZFwiPT10eXBlb2Ygcj9uOnI7dmFyIGksbz1lLmNvZGVtaXJyb3IsYT1sKG8pLHM9bixjPXIsdT1vLmdldEN1cnNvcihcInN0YXJ0XCIpLGQ9by5nZXRDdXJzb3IoXCJlbmRcIik7YVt0XT8oaT1vLmdldExpbmUodS5saW5lKSxzPWkuc2xpY2UoMCx1LmNoKSxjPWkuc2xpY2UodS5jaCksXCJib2xkXCI9PXQ/KHM9cy5yZXBsYWNlKC8oXFwqXFwqfF9fKSg/IVtcXHNcXFNdKihcXCpcXCp8X18pKS8sXCJcIiksYz1jLnJlcGxhY2UoLyhcXCpcXCp8X18pLyxcIlwiKSk6XCJpdGFsaWNcIj09dD8ocz1zLnJlcGxhY2UoLyhcXCp8XykoPyFbXFxzXFxTXSooXFwqfF8pKS8sXCJcIiksYz1jLnJlcGxhY2UoLyhcXCp8XykvLFwiXCIpKTpcInN0cmlrZXRocm91Z2hcIj09dCYmKHM9cy5yZXBsYWNlKC8oXFwqXFwqfH5+KSg/IVtcXHNcXFNdKihcXCpcXCp8fn4pKS8sXCJcIiksYz1jLnJlcGxhY2UoLyhcXCpcXCp8fn4pLyxcIlwiKSksby5yZXBsYWNlUmFuZ2UocytjLHtsaW5lOnUubGluZSxjaDowfSx7bGluZTp1LmxpbmUsY2g6OTk5OTk5OTk5OTk5OTl9KSxcImJvbGRcIj09dHx8XCJzdHJpa2V0aHJvdWdoXCI9PXQ/KHUuY2gtPTIsdSE9PWQmJihkLmNoLT0yKSk6XCJpdGFsaWNcIj09dCYmKHUuY2gtPTEsdSE9PWQmJihkLmNoLT0xKSkpOihpPW8uZ2V0U2VsZWN0aW9uKCksXCJib2xkXCI9PXQ/KGk9aS5zcGxpdChcIioqXCIpLmpvaW4oXCJcIiksaT1pLnNwbGl0KFwiX19cIikuam9pbihcIlwiKSk6XCJpdGFsaWNcIj09dD8oaT1pLnNwbGl0KFwiKlwiKS5qb2luKFwiXCIpLGk9aS5zcGxpdChcIl9cIikuam9pbihcIlwiKSk6XCJzdHJpa2V0aHJvdWdoXCI9PXQmJihpPWkuc3BsaXQoXCJ+flwiKS5qb2luKFwiXCIpKSxvLnJlcGxhY2VTZWxlY3Rpb24ocytpK2MpLHUuY2grPW4ubGVuZ3RoLGQuY2g9dS5jaCtpLmxlbmd0aCksby5zZXRTZWxlY3Rpb24odSxkKSxvLmZvY3VzKCl9fWZ1bmN0aW9uIFcoZSx0KXtmb3IodmFyIG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiYodFtuXWluc3RhbmNlb2YgQXJyYXk/ZVtuXT10W25dLmNvbmNhdChlW25daW5zdGFuY2VvZiBBcnJheT9lW25dOltdKTpudWxsIT09dFtuXSYmXCJvYmplY3RcIj09dHlwZW9mIHRbbl0mJnRbbl0uY29uc3RydWN0b3I9PT1PYmplY3Q/ZVtuXT1XKGVbbl18fHt9LHRbbl0pOmVbbl09dFtuXSk7cmV0dXJuIGV9ZnVuY3Rpb24gSChlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWU9VyhlLGFyZ3VtZW50c1t0XSk7cmV0dXJuIGV9ZnVuY3Rpb24gRChlKXt2YXIgdD0vW2EtekEtWjAtOV9cXHUwMzkyLVxcdTAzYzldK3xbXFx1NEUwMC1cXHU5RkZGXFx1MzQwMC1cXHU0ZGJmXFx1ZjkwMC1cXHVmYWZmXFx1MzA0MC1cXHUzMDlmXFx1YWMwMC1cXHVkN2FmXSsvZyxuPWUubWF0Y2godCkscj0wO2lmKG51bGw9PT1uKXJldHVybiByO2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXIrPW5baV0uY2hhckNvZGVBdCgwKT49MTk5Njg/bltpXS5sZW5ndGg6MTtyZXR1cm4gcn1mdW5jdGlvbiBFKGUpe2U9ZXx8e30sZS5wYXJlbnQ9dGhpczt2YXIgdD0hMDtpZihlLmF1dG9Eb3dubG9hZEZvbnRBd2Vzb21lPT09ITEmJih0PSExKSxlLmF1dG9Eb3dubG9hZEZvbnRBd2Vzb21lIT09ITApZm9yKHZhciBuPWRvY3VtZW50LnN0eWxlU2hlZXRzLHI9MDtyPG4ubGVuZ3RoO3IrKyluW3JdLmhyZWYmJm5bcl0uaHJlZi5pbmRleE9mKFwiLy9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9mb250LWF3ZXNvbWUvXCIpPi0xJiYodD0hMSk7aWYodCl7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7aS5yZWw9XCJzdHlsZXNoZWV0XCIsaS5ocmVmPVwiaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9mb250LWF3ZXNvbWUvbGF0ZXN0L2Nzcy9mb250LWF3ZXNvbWUubWluLmNzc1wiLGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChpKX1pZihlLmVsZW1lbnQpdGhpcy5lbGVtZW50PWUuZWxlbWVudDtlbHNlIGlmKG51bGw9PT1lLmVsZW1lbnQpcmV0dXJuIHZvaWQgY29uc29sZS5sb2coXCJTaW1wbGVNREU6IEVycm9yLiBObyBlbGVtZW50IHdhcyBmb3VuZC5cIik7ZS50b29sYmFyIT09ITEmJihlLnRvb2xiYXI9ZS50b29sYmFyfHxFLnRvb2xiYXIpLGUuaGFzT3duUHJvcGVydHkoXCJzdGF0dXNcIil8fChlLnN0YXR1cz1bXCJhdXRvc2F2ZVwiLFwibGluZXNcIixcIndvcmRzXCIsXCJjdXJzb3JcIl0pLGUucHJldmlld1JlbmRlcnx8KGUucHJldmlld1JlbmRlcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wYXJlbnQubWFya2Rvd24oZSl9KSxlLnBhcnNpbmdDb25maWc9ZS5wYXJzaW5nQ29uZmlnfHx7fSxlLmluc2VydFRleHRzPUgoe30saixlLmluc2VydFRleHRzfHx7fSksdGhpcy5vcHRpb25zPWUsdGhpcy5yZW5kZXIoKSxlLmluaXRpYWxWYWx1ZSYmdGhpcy52YWx1ZShlLmluaXRpYWxWYWx1ZSl9dmFyIEk9ZShcImNvZGVtaXJyb3JcIik7ZShcImNvZGVtaXJyb3IvYWRkb24vZWRpdC9jb250aW51ZWxpc3QuanNcIiksZShcIi4vY29kZW1pcnJvci90YWJsaXN0XCIpLGUoXCJjb2RlbWlycm9yL2FkZG9uL2Rpc3BsYXkvZnVsbHNjcmVlbi5qc1wiKSxlKFwiY29kZW1pcnJvci9tb2RlL21hcmtkb3duL21hcmtkb3duLmpzXCIpLGUoXCJjb2RlbWlycm9yL2FkZG9uL21vZGUvb3ZlcmxheS5qc1wiKSxlKFwiY29kZW1pcnJvci9tb2RlL2dmbS9nZm0uanNcIiksZShcImNvZGVtaXJyb3IvbW9kZS94bWwveG1sLmpzXCIpLGUoXCJzcGVsbC1jaGVja2VyXCIpO3ZhciBQPWUoXCJtYXJrZWRcIiksej0vTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSksRj17XCJDbWQtQlwiOnMsXCJDbWQtSVwiOmMsXCJDbWQtS1wiOmIsXCJDbWQtSFwiOmYsXCJTaGlmdC1DbWQtSFwiOnAsXCJDbWQtQWx0LUlcIjp3LFwiQ21kLSdcIjpoLFwiQ21kLUFsdC1MXCI6eCxcIkNtZC1MXCI6eSxcIkNtZC1BbHQtQ1wiOmQsXCJDbWQtUFwiOlR9LFI9ZnVuY3Rpb24oKXt2YXIgZT0hMTtyZXR1cm4gZnVuY3Rpb24odCl7KC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm98YW5kcm9pZHxpcGFkfHBsYXlib29rfHNpbGsvaS50ZXN0KHQpfHwvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaS50ZXN0KHQuc3Vic3RyKDAsNCkpKSYmKGU9ITApfShuYXZpZ2F0b3IudXNlckFnZW50fHxuYXZpZ2F0b3IudmVuZG9yfHx3aW5kb3cub3BlcmEpLGV9LEI9XCJcIixfPXtib2xkOntuYW1lOlwiYm9sZFwiLGFjdGlvbjpzLGNsYXNzTmFtZTpcImZhIGZhLWJvbGRcIix0aXRsZTpcIkJvbGQgKEN0cmwrQilcIn0saXRhbGljOntuYW1lOlwiaXRhbGljXCIsYWN0aW9uOmMsY2xhc3NOYW1lOlwiZmEgZmEtaXRhbGljXCIsdGl0bGU6XCJJdGFsaWMgKEN0cmwrSSlcIn0sc3RyaWtldGhyb3VnaDp7bmFtZTpcInN0cmlrZXRocm91Z2hcIixhY3Rpb246dSxjbGFzc05hbWU6XCJmYSBmYS1zdHJpa2V0aHJvdWdoXCIsdGl0bGU6XCJTdHJpa2V0aHJvdWdoXCJ9LGhlYWRpbmc6e25hbWU6XCJoZWFkaW5nXCIsYWN0aW9uOmYsY2xhc3NOYW1lOlwiZmEgZmEtaGVhZGVyXCIsdGl0bGU6XCJIZWFkaW5nIChDdHJsK0gpXCJ9LFwiaGVhZGluZy1zbWFsbGVyXCI6e25hbWU6XCJoZWFkaW5nLXNtYWxsZXJcIixhY3Rpb246ZixjbGFzc05hbWU6XCJmYSBmYS1oZWFkZXIgZmEtaGVhZGVyLXggZmEtaGVhZGVyLXNtYWxsZXJcIix0aXRsZTpcIlNtYWxsZXIgSGVhZGluZyAoQ3RybCtIKVwifSxcImhlYWRpbmctYmlnZ2VyXCI6e25hbWU6XCJoZWFkaW5nLWJpZ2dlclwiLGFjdGlvbjpwLGNsYXNzTmFtZTpcImZhIGZhLWhlYWRlciBmYS1oZWFkZXIteCBmYS1oZWFkZXItYmlnZ2VyXCIsdGl0bGU6XCJCaWdnZXIgSGVhZGluZyAoU2hpZnQrQ3RybCtIKVwifSxcImhlYWRpbmctMVwiOntuYW1lOlwiaGVhZGluZy0xXCIsYWN0aW9uOm0sY2xhc3NOYW1lOlwiZmEgZmEtaGVhZGVyIGZhLWhlYWRlci14IGZhLWhlYWRlci0xXCIsdGl0bGU6XCJCaWcgSGVhZGluZ1wifSxcImhlYWRpbmctMlwiOntuYW1lOlwiaGVhZGluZy0yXCIsYWN0aW9uOmcsY2xhc3NOYW1lOlwiZmEgZmEtaGVhZGVyIGZhLWhlYWRlci14IGZhLWhlYWRlci0yXCIsdGl0bGU6XCJNZWRpdW0gSGVhZGluZ1wifSxcImhlYWRpbmctM1wiOntuYW1lOlwiaGVhZGluZy0zXCIsYWN0aW9uOnYsY2xhc3NOYW1lOlwiZmEgZmEtaGVhZGVyIGZhLWhlYWRlci14IGZhLWhlYWRlci0zXCIsdGl0bGU6XCJTbWFsbCBIZWFkaW5nXCJ9LGNvZGU6e25hbWU6XCJjb2RlXCIsYWN0aW9uOmQsY2xhc3NOYW1lOlwiZmEgZmEtY29kZVwiLHRpdGxlOlwiQ29kZSAoQ3RybCtBbHQrQylcIn0scXVvdGU6e25hbWU6XCJxdW90ZVwiLGFjdGlvbjpoLGNsYXNzTmFtZTpcImZhIGZhLXF1b3RlLWxlZnRcIix0aXRsZTpcIlF1b3RlIChDdHJsKycpXCJ9LFwidW5vcmRlcmVkLWxpc3RcIjp7bmFtZTpcInVub3JkZXJlZC1saXN0XCIsYWN0aW9uOnksY2xhc3NOYW1lOlwiZmEgZmEtbGlzdC11bFwiLHRpdGxlOlwiR2VuZXJpYyBMaXN0IChDdHJsK0wpXCJ9LFwib3JkZXJlZC1saXN0XCI6e25hbWU6XCJvcmRlcmVkLWxpc3RcIixhY3Rpb246eCxjbGFzc05hbWU6XCJmYSBmYS1saXN0LW9sXCIsdGl0bGU6XCJOdW1iZXJlZCBMaXN0IChDdHJsK0FsdCtMKVwifSxsaW5rOntuYW1lOlwibGlua1wiLGFjdGlvbjpiLGNsYXNzTmFtZTpcImZhIGZhLWxpbmtcIix0aXRsZTpcIkNyZWF0ZSBMaW5rIChDdHJsK0spXCJ9LGltYWdlOntuYW1lOlwiaW1hZ2VcIixhY3Rpb246dyxjbGFzc05hbWU6XCJmYSBmYS1waWN0dXJlLW9cIix0aXRsZTpcIkluc2VydCBJbWFnZSAoQ3RybCtBbHQrSSlcIn0sXCJob3Jpem9udGFsLXJ1bGVcIjp7bmFtZTpcImhvcml6b250YWwtcnVsZVwiLGFjdGlvbjprLGNsYXNzTmFtZTpcImZhIGZhLW1pbnVzXCIsdGl0bGU6XCJJbnNlcnQgSG9yaXpvbnRhbCBMaW5lXCJ9LHByZXZpZXc6e25hbWU6XCJwcmV2aWV3XCIsYWN0aW9uOlQsY2xhc3NOYW1lOlwiZmEgZmEtZXllIG5vLWRpc2FibGVcIix0aXRsZTpcIlRvZ2dsZSBQcmV2aWV3IChDdHJsK1ApXCJ9LFwic2lkZS1ieS1zaWRlXCI6e25hbWU6XCJzaWRlLWJ5LXNpZGVcIixhY3Rpb246TCxjbGFzc05hbWU6XCJmYSBmYS1jb2x1bW5zIG5vLWRpc2FibGUgbm8tbW9iaWxlXCIsdGl0bGU6XCJUb2dnbGUgU2lkZSBieSBTaWRlIChGOSlcIlxufSxmdWxsc2NyZWVuOntuYW1lOlwiZnVsbHNjcmVlblwiLGFjdGlvbjphLGNsYXNzTmFtZTpcImZhIGZhLWFycm93cy1hbHQgbm8tZGlzYWJsZSBuby1tb2JpbGVcIix0aXRsZTpcIlRvZ2dsZSBGdWxsc2NyZWVuIChGMTEpXCJ9LGd1aWRlOntuYW1lOlwiZ3VpZGVcIixhY3Rpb246XCJodHRwOi8vbmV4dHN0ZXB3ZWJzLmdpdGh1Yi5pby9zaW1wbGVtZGUtbWFya2Rvd24tZWRpdG9yL21hcmtkb3duLWd1aWRlXCIsY2xhc3NOYW1lOlwiZmEgZmEtcXVlc3Rpb24tY2lyY2xlXCIsdGl0bGU6XCJNYXJrZG93biBHdWlkZVwifX0saj17bGluazpbXCJbXCIsXCJdKGh0dHA6Ly8pXCJdLGltYWdlOltcIiFbXShodHRwOi8vXCIsXCIpXCJdLGhvcml6b250YWxSdWxlOltcIlwiLFwiXFxuXFxuLS0tLS1cXG5cXG5cIl19O0UudG9vbGJhcj1bXCJib2xkXCIsXCJpdGFsaWNcIixcImhlYWRpbmdcIixcInxcIixcInF1b3RlXCIsXCJ1bm9yZGVyZWQtbGlzdFwiLFwib3JkZXJlZC1saXN0XCIsXCJ8XCIsXCJsaW5rXCIsXCJpbWFnZVwiLFwifFwiLFwicHJldmlld1wiLFwic2lkZS1ieS1zaWRlXCIsXCJmdWxsc2NyZWVuXCIsXCJndWlkZVwiXSxFLnByb3RvdHlwZS5tYXJrZG93bj1mdW5jdGlvbihlKXtpZihQKXt2YXIgdD17fTtyZXR1cm4gdGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMucmVuZGVyaW5nQ29uZmlnJiZ0aGlzLm9wdGlvbnMucmVuZGVyaW5nQ29uZmlnLnNpbmdsZUxpbmVCcmVha3MhPT0hMSYmKHQuYnJlYWtzPSEwKSx0aGlzLm9wdGlvbnMmJnRoaXMub3B0aW9ucy5yZW5kZXJpbmdDb25maWcmJnRoaXMub3B0aW9ucy5yZW5kZXJpbmdDb25maWcuY29kZVN5bnRheEhpZ2hsaWdodGluZz09PSEwJiZ3aW5kb3cuaGxqcyYmKHQuaGlnaGxpZ2h0PWZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuaGxqcy5oaWdobGlnaHRBdXRvKGUpLnZhbHVlfSksUC5zZXRPcHRpb25zKHQpLFAoZSl9fSxFLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oZSl7aWYoZXx8KGU9dGhpcy5lbGVtZW50fHxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRleHRhcmVhXCIpWzBdKSwhdGhpcy5fcmVuZGVyZWR8fHRoaXMuX3JlbmRlcmVkIT09ZSl7dGhpcy5lbGVtZW50PWU7dmFyIHQ9dGhpcy5vcHRpb25zLG49dGhpcyxpPXt9O2Zvcih2YXIgbyBpbiBGKSFmdW5jdGlvbihlKXtpW3IoZSldPWZ1bmN0aW9uKCl7RltlXShuKX19KG8pO2kuRW50ZXI9XCJuZXdsaW5lQW5kSW5kZW50Q29udGludWVNYXJrZG93bkxpc3RcIixpLlRhYj1cInRhYkFuZEluZGVudE1hcmtkb3duTGlzdFwiLGlbXCJTaGlmdC1UYWJcIl09XCJzaGlmdFRhYkFuZFVuaW5kZW50TWFya2Rvd25MaXN0XCIsaS5GMTE9ZnVuY3Rpb24oKXthKG4pfSxpLkY5PWZ1bmN0aW9uKCl7TChuKX0saS5Fc2M9ZnVuY3Rpb24oZSl7ZS5nZXRPcHRpb24oXCJmdWxsU2NyZWVuXCIpJiZhKG4pfTt2YXIgbCxzO3Quc3BlbGxDaGVja2VyIT09ITE/KGw9XCJzcGVsbC1jaGVja2VyXCIscz10LnBhcnNpbmdDb25maWcscy5uYW1lPVwiZ2ZtXCIscy5naXRIdWJTcGljZT0hMSk6KGw9dC5wYXJzaW5nQ29uZmlnLGwubmFtZT1cImdmbVwiLGwuZ2l0SHViU3BpY2U9ITEpLHRoaXMuY29kZW1pcnJvcj1JLmZyb21UZXh0QXJlYShlLHttb2RlOmwsYmFja2Ryb3A6cyx0aGVtZTpcInBhcGVyXCIsdGFiU2l6ZTp2b2lkIDAhPXQudGFiU2l6ZT90LnRhYlNpemU6MixpbmRlbnRVbml0OnZvaWQgMCE9dC50YWJTaXplP3QudGFiU2l6ZToyLGluZGVudFdpdGhUYWJzOnQuaW5kZW50V2l0aFRhYnM9PT0hMT8hMTohMCxsaW5lTnVtYmVyczohMSxhdXRvZm9jdXM6dC5hdXRvZm9jdXM9PT0hMD8hMDohMSxleHRyYUtleXM6aSxsaW5lV3JhcHBpbmc6dC5saW5lV3JhcHBpbmc9PT0hMT8hMTohMCxhbGxvd0Ryb3BGaWxlVHlwZXM6W1widGV4dC9wbGFpblwiXX0pLHQudG9vbGJhciE9PSExJiZ0aGlzLmNyZWF0ZVRvb2xiYXIoKSx0LnN0YXR1cyE9PSExJiZ0aGlzLmNyZWF0ZVN0YXR1c2JhcigpLHZvaWQgMCE9dC5hdXRvc2F2ZSYmdC5hdXRvc2F2ZS5lbmFibGVkPT09ITAmJnRoaXMuYXV0b3NhdmUoKSx0aGlzLmNyZWF0ZVNpZGVCeVNpZGUoKSx0aGlzLl9yZW5kZXJlZD10aGlzLmVsZW1lbnR9fSxFLnByb3RvdHlwZS5hdXRvc2F2ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMudmFsdWUoKSx0PXRoaXM7aWYodm9pZCAwPT10aGlzLm9wdGlvbnMuYXV0b3NhdmUudW5pcXVlX2lkfHxcIlwiPT10aGlzLm9wdGlvbnMuYXV0b3NhdmUudW5pcXVlX2lkKXJldHVybiB2b2lkIGNvbnNvbGUubG9nKFwiU2ltcGxlTURFOiBZb3UgbXVzdCBzZXQgYSB1bmlxdWVfaWQgdG8gdXNlIHRoZSBhdXRvc2F2ZSBmZWF0dXJlXCIpO251bGwhPXQuZWxlbWVudC5mb3JtJiZ2b2lkIDAhPXQuZWxlbWVudC5mb3JtJiZ0LmVsZW1lbnQuZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsZnVuY3Rpb24oKXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0Lm9wdGlvbnMuYXV0b3NhdmUudW5pcXVlX2lkLFwiXCIpfSksdGhpcy5vcHRpb25zLmF1dG9zYXZlLmxvYWRlZCE9PSEwJiYobnVsbCE9bG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5vcHRpb25zLmF1dG9zYXZlLnVuaXF1ZV9pZCkmJnRoaXMuY29kZW1pcnJvci5zZXRWYWx1ZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLm9wdGlvbnMuYXV0b3NhdmUudW5pcXVlX2lkKSksdGhpcy5vcHRpb25zLmF1dG9zYXZlLmxvYWRlZD0hMCksbG9jYWxTdG9yYWdlJiZsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLm9wdGlvbnMuYXV0b3NhdmUudW5pcXVlX2lkLGUpO3ZhciBuPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXV0b3NhdmVkXCIpO2lmKG51bGwhPW4mJnZvaWQgMCE9biYmXCJcIiE9bil7dmFyIHI9bmV3IERhdGUsaT1yLmdldEhvdXJzKCksbz1yLmdldE1pbnV0ZXMoKSxsPVwiYW1cIixhPWk7YT49MTImJihhPWktMTIsbD1cInBtXCIpLDA9PWEmJihhPTEyKSxvPTEwPm8/XCIwXCIrbzpvLG4uaW5uZXJIVE1MPVwiQXV0b3NhdmVkOiBcIithK1wiOlwiK28rXCIgXCIrbH1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5hdXRvc2F2ZSgpfSx0aGlzLm9wdGlvbnMuYXV0b3NhdmUuZGVsYXl8fDFlNCl9LEUucHJvdG90eXBlLmNyZWF0ZVNpZGVCeVNpZGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvZGVtaXJyb3IsdD1lLmdldFdyYXBwZXJFbGVtZW50KCksbj10Lm5leHRTaWJsaW5nO24mJi9lZGl0b3ItcHJldmlldy1zaWRlLy50ZXN0KG4uY2xhc3NOYW1lKXx8KG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxuLmNsYXNzTmFtZT1cImVkaXRvci1wcmV2aWV3LXNpZGVcIix0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG4sdC5uZXh0U2libGluZykpO3ZhciByPSExLGk9ITE7cmV0dXJuIGUub24oXCJzY3JvbGxcIixmdW5jdGlvbihlKXtpZihyKXJldHVybiB2b2lkKHI9ITEpO2k9ITA7dmFyIHQ9ZS5nZXRTY3JvbGxJbmZvKCkuaGVpZ2h0LWUuZ2V0U2Nyb2xsSW5mbygpLmNsaWVudEhlaWdodCxvPXBhcnNlRmxvYXQoZS5nZXRTY3JvbGxJbmZvKCkudG9wKS90LGw9KG4uc2Nyb2xsSGVpZ2h0LW4uY2xpZW50SGVpZ2h0KSpvO24uc2Nyb2xsVG9wPWx9KSxuLm9uc2Nyb2xsPWZ1bmN0aW9uKCl7aWYoaSlyZXR1cm4gdm9pZChpPSExKTtyPSEwO3ZhciB0PW4uc2Nyb2xsSGVpZ2h0LW4uY2xpZW50SGVpZ2h0LG89cGFyc2VGbG9hdChuLnNjcm9sbFRvcCkvdCxsPShlLmdldFNjcm9sbEluZm8oKS5oZWlnaHQtZS5nZXRTY3JvbGxJbmZvKCkuY2xpZW50SGVpZ2h0KSpvO2Uuc2Nyb2xsVG8oMCxsKX0sITB9LEUucHJvdG90eXBlLmNyZWF0ZVRvb2xiYXI9ZnVuY3Rpb24oZSl7aWYoZT1lfHx0aGlzLm9wdGlvbnMudG9vbGJhcixlJiYwIT09ZS5sZW5ndGgpe3ZhciB0O2Zvcih0PTA7dDxlLmxlbmd0aDt0Kyspdm9pZCAwIT1fW2VbdF1dJiYoZVt0XT1fW2VbdF1dKTt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uY2xhc3NOYW1lPVwiZWRpdG9yLXRvb2xiYXJcIjt2YXIgcj10aGlzLGE9e307Zm9yKHIudG9vbGJhcj1lLHQ9MDt0PGUubGVuZ3RoO3QrKykoXCJndWlkZVwiIT1lW3RdLm5hbWV8fHIub3B0aW9ucy50b29sYmFyR3VpZGVJY29uIT09ITEpJiYoci5vcHRpb25zLmhpZGVJY29ucyYmLTEhPXIub3B0aW9ucy5oaWRlSWNvbnMuaW5kZXhPZihlW3RdLm5hbWUpfHwoXCJmdWxsc2NyZWVuXCIhPWVbdF0ubmFtZSYmXCJzaWRlLWJ5LXNpZGVcIiE9ZVt0XS5uYW1lfHwhUigpKSYmIWZ1bmN0aW9uKGUpe3ZhciB0O3Q9XCJ8XCI9PT1lP28oKTppKGUsci5vcHRpb25zLnRvb2xiYXJUaXBzKSxlLmFjdGlvbiYmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUuYWN0aW9uP3Qub25jbGljaz1mdW5jdGlvbigpe2UuYWN0aW9uKHIpfTpcInN0cmluZ1wiPT10eXBlb2YgZS5hY3Rpb24mJih0LmhyZWY9ZS5hY3Rpb24sdC50YXJnZXQ9XCJfYmxhbmtcIikpLGFbZS5uYW1lfHxlXT10LG4uYXBwZW5kQ2hpbGQodCl9KGVbdF0pKTtyLnRvb2xiYXJFbGVtZW50cz1hO3ZhciBzPXRoaXMuY29kZW1pcnJvcjtzLm9uKFwiY3Vyc29yQWN0aXZpdHlcIixmdW5jdGlvbigpe3ZhciBlPWwocyk7Zm9yKHZhciB0IGluIGEpIWZ1bmN0aW9uKHQpe3ZhciBuPWFbdF07ZVt0XT9uLmNsYXNzTmFtZSs9XCIgYWN0aXZlXCI6XCJmdWxsc2NyZWVuXCIhPXQmJlwic2lkZS1ieS1zaWRlXCIhPXQmJihuLmNsYXNzTmFtZT1uLmNsYXNzTmFtZS5yZXBsYWNlKC9cXHMqYWN0aXZlXFxzKi9nLFwiXCIpKX0odCl9KTt2YXIgYz1zLmdldFdyYXBwZXJFbGVtZW50KCk7cmV0dXJuIGMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobixjKSxufX0sRS5wcm90b3R5cGUuY3JlYXRlU3RhdHVzYmFyPWZ1bmN0aW9uKGUpe2U9ZXx8dGhpcy5vcHRpb25zLnN0YXR1czt2YXIgdD10aGlzLm9wdGlvbnM7aWYoZSYmMCE9PWUubGVuZ3RoKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uY2xhc3NOYW1lPVwiZWRpdG9yLXN0YXR1c2JhclwiO2Zvcih2YXIgcixpPXRoaXMuY29kZW1pcnJvcixvPTA7bzxlLmxlbmd0aDtvKyspIWZ1bmN0aW9uKGUpe3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO28uY2xhc3NOYW1lPWUsXCJ3b3Jkc1wiPT09ZT8oby5pbm5lckhUTUw9XCIwXCIsaS5vbihcInVwZGF0ZVwiLGZ1bmN0aW9uKCl7by5pbm5lckhUTUw9RChpLmdldFZhbHVlKCkpfSkpOlwibGluZXNcIj09PWU/KG8uaW5uZXJIVE1MPVwiMFwiLGkub24oXCJ1cGRhdGVcIixmdW5jdGlvbigpe28uaW5uZXJIVE1MPWkubGluZUNvdW50KCl9KSk6XCJjdXJzb3JcIj09PWU/KG8uaW5uZXJIVE1MPVwiMDowXCIsaS5vbihcImN1cnNvckFjdGl2aXR5XCIsZnVuY3Rpb24oKXtyPWkuZ2V0Q3Vyc29yKCksby5pbm5lckhUTUw9ci5saW5lK1wiOlwiK3IuY2h9KSk6XCJhdXRvc2F2ZVwiPT09ZSYmdm9pZCAwIT10LmF1dG9zYXZlJiZ0LmF1dG9zYXZlLmVuYWJsZWQ9PT0hMCYmby5zZXRBdHRyaWJ1dGUoXCJpZFwiLFwiYXV0b3NhdmVkXCIpLG4uYXBwZW5kQ2hpbGQobyl9KGVbb10pO3ZhciBsPXRoaXMuY29kZW1pcnJvci5nZXRXcmFwcGVyRWxlbWVudCgpO3JldHVybiBsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG4sbC5uZXh0U2libGluZyksbn19LEUucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP3RoaXMuY29kZW1pcnJvci5nZXRWYWx1ZSgpOih0aGlzLmNvZGVtaXJyb3IuZ2V0RG9jKCkuc2V0VmFsdWUoZSksdGhpcyl9LEUudG9nZ2xlQm9sZD1zLEUudG9nZ2xlSXRhbGljPWMsRS50b2dnbGVTdHJpa2V0aHJvdWdoPXUsRS50b2dnbGVCbG9ja3F1b3RlPWgsRS50b2dnbGVIZWFkaW5nU21hbGxlcj1mLEUudG9nZ2xlSGVhZGluZ0JpZ2dlcj1wLEUudG9nZ2xlSGVhZGluZzE9bSxFLnRvZ2dsZUhlYWRpbmcyPWcsRS50b2dnbGVIZWFkaW5nMz12LEUudG9nZ2xlQ29kZUJsb2NrPWQsRS50b2dnbGVVbm9yZGVyZWRMaXN0PXksRS50b2dnbGVPcmRlcmVkTGlzdD14LEUuZHJhd0xpbms9YixFLmRyYXdJbWFnZT13LEUuZHJhd0hvcml6b250YWxSdWxlPWssRS51bmRvPUMsRS5yZWRvPVMsRS50b2dnbGVQcmV2aWV3PVQsRS50b2dnbGVTaWRlQnlTaWRlPUwsRS50b2dnbGVGdWxsU2NyZWVuPWEsRS5wcm90b3R5cGUudG9nZ2xlQm9sZD1mdW5jdGlvbigpe3ModGhpcyl9LEUucHJvdG90eXBlLnRvZ2dsZUl0YWxpYz1mdW5jdGlvbigpe2ModGhpcyl9LEUucHJvdG90eXBlLnRvZ2dsZVN0cmlrZXRocm91Z2g9ZnVuY3Rpb24oKXt1KHRoaXMpfSxFLnByb3RvdHlwZS50b2dnbGVCbG9ja3F1b3RlPWZ1bmN0aW9uKCl7aCh0aGlzKX0sRS5wcm90b3R5cGUudG9nZ2xlSGVhZGluZ1NtYWxsZXI9ZnVuY3Rpb24oKXtmKHRoaXMpfSxFLnByb3RvdHlwZS50b2dnbGVIZWFkaW5nQmlnZ2VyPWZ1bmN0aW9uKCl7cCh0aGlzKX0sRS5wcm90b3R5cGUudG9nZ2xlSGVhZGluZzE9ZnVuY3Rpb24oKXttKHRoaXMpfSxFLnByb3RvdHlwZS50b2dnbGVIZWFkaW5nMj1mdW5jdGlvbigpe2codGhpcyl9LEUucHJvdG90eXBlLnRvZ2dsZUhlYWRpbmczPWZ1bmN0aW9uKCl7dih0aGlzKX0sRS5wcm90b3R5cGUudG9nZ2xlQ29kZUJsb2NrPWZ1bmN0aW9uKCl7ZCh0aGlzKX0sRS5wcm90b3R5cGUudG9nZ2xlVW5vcmRlcmVkTGlzdD1mdW5jdGlvbigpe3kodGhpcyl9LEUucHJvdG90eXBlLnRvZ2dsZU9yZGVyZWRMaXN0PWZ1bmN0aW9uKCl7eCh0aGlzKX0sRS5wcm90b3R5cGUuZHJhd0xpbms9ZnVuY3Rpb24oKXtiKHRoaXMpfSxFLnByb3RvdHlwZS5kcmF3SW1hZ2U9ZnVuY3Rpb24oKXt3KHRoaXMpfSxFLnByb3RvdHlwZS5kcmF3SG9yaXpvbnRhbFJ1bGU9ZnVuY3Rpb24oKXtrKHRoaXMpfSxFLnByb3RvdHlwZS51bmRvPWZ1bmN0aW9uKCl7Qyh0aGlzKX0sRS5wcm90b3R5cGUucmVkbz1mdW5jdGlvbigpe1ModGhpcyl9LEUucHJvdG90eXBlLnRvZ2dsZVByZXZpZXc9ZnVuY3Rpb24oKXtUKHRoaXMpfSxFLnByb3RvdHlwZS50b2dnbGVTaWRlQnlTaWRlPWZ1bmN0aW9uKCl7TCh0aGlzKX0sRS5wcm90b3R5cGUudG9nZ2xlRnVsbFNjcmVlbj1mdW5jdGlvbigpe2EodGhpcyl9LEUucHJvdG90eXBlLmlzUHJldmlld0FjdGl2ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY29kZW1pcnJvcix0PWUuZ2V0V3JhcHBlckVsZW1lbnQoKSxuPXQubGFzdENoaWxkO3JldHVybi9lZGl0b3ItcHJldmlldy1hY3RpdmUvLnRlc3Qobi5jbGFzc05hbWUpfSxFLnByb3RvdHlwZS5pc1NpZGVCeVNpZGVBY3RpdmU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNvZGVtaXJyb3IsdD1lLmdldFdyYXBwZXJFbGVtZW50KCksbj10Lm5leHRTaWJsaW5nO3JldHVybi9lZGl0b3ItcHJldmlldy1hY3RpdmUtc2lkZS8udGVzdChuLmNsYXNzTmFtZSl9LEUucHJvdG90eXBlLmlzRnVsbHNjcmVlbkFjdGl2ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY29kZW1pcnJvcjtyZXR1cm4gZS5nZXRPcHRpb24oXCJmdWxsU2NyZWVuXCIpfSx0LmV4cG9ydHM9RX0se1wiLi9jb2RlbWlycm9yL3RhYmxpc3RcIjoxMixjb2RlbWlycm9yOjYsXCJjb2RlbWlycm9yL2FkZG9uL2Rpc3BsYXkvZnVsbHNjcmVlbi5qc1wiOjMsXCJjb2RlbWlycm9yL2FkZG9uL2VkaXQvY29udGludWVsaXN0LmpzXCI6NCxcImNvZGVtaXJyb3IvYWRkb24vbW9kZS9vdmVybGF5LmpzXCI6NSxcImNvZGVtaXJyb3IvbW9kZS9nZm0vZ2ZtLmpzXCI6NyxcImNvZGVtaXJyb3IvbW9kZS9tYXJrZG93bi9tYXJrZG93bi5qc1wiOjgsXCJjb2RlbWlycm9yL21vZGUveG1sL3htbC5qc1wiOjEwLG1hcmtlZDoxMSxcInNwZWxsLWNoZWNrZXJcIjoxfV19LHt9LFsxM10pKDEzKX0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
